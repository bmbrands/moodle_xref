<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /mod/forum/tests/generator/lib.php source</title>
    <link rel="stylesheet" href="../../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../../';
subdir='mod/forum/tests/generator';
filename='lib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/mod/forum/tests/generator/</a> -> <a href="lib.php.html">lib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="lib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="lib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * mod_forum data generator</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package    mod_forum</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @category   test</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @copyright  2012 Petr Skoda {@link http://skodak.org}</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> */</span>
<a name="l25"><span class="linenum">  25</span></a>  
<a name="l26"><span class="linenum">  26</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l27"><span class="linenum">  27</span></a>  
<a name="l28"><span class="linenum">  28</span></a>  
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment">/**</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> * Forum module data generator class</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> *</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * @package    mod_forum</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> * @category   test</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> * @copyright  2012 Petr Skoda {@link http://skodak.org}</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment"> */</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('mod_forum_generator')" href="../../../../_classes/mod_forum_generator.html" onMouseOver="classPopup(event,'mod_forum_generator')">mod_forum_generator</a> extends testing_module_generator {
<a name="l38"><span class="linenum">  38</span></a>  
<a name="l39"><span class="linenum">  39</span></a>      <span class="comment">/**</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment">     * @var int keep track of how many forum discussions have been created.</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment">     */</span>
<a name="l42"><span class="linenum">  42</span></a>      protected <a class="var it6174" onMouseOver="hilite(6174)" onMouseOut="lolite()" onClick="logVariable('forumdiscussioncount')" href="../../../../_variables/forumdiscussioncount.html">$forumdiscussioncount</a> = 0;
<a name="l43"><span class="linenum">  43</span></a>  
<a name="l44"><span class="linenum">  44</span></a>      <span class="comment">/**</span>
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment">     * @var int keep track of how many forum posts have been created.</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment">     */</span>
<a name="l47"><span class="linenum">  47</span></a>      protected <a class="var it6175" onMouseOver="hilite(6175)" onMouseOut="lolite()" onClick="logVariable('forumpostcount')" href="../../../../_variables/forumpostcount.html">$forumpostcount</a> = 0;
<a name="l48"><span class="linenum">  48</span></a>  
<a name="l49"><span class="linenum">  49</span></a>      <span class="comment">/**</span>
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment">     * @var int keep track of how many forum subscriptions have been created.</span>
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment">     */</span>
<a name="l52"><span class="linenum">  52</span></a>      protected <a class="var it6176" onMouseOver="hilite(6176)" onMouseOut="lolite()" onClick="logVariable('forumsubscriptionscount')" href="../../../../_variables/forumsubscriptionscount.html">$forumsubscriptionscount</a> = 0;
<a name="l53"><span class="linenum">  53</span></a>  
<a name="l54"><span class="linenum">  54</span></a>      <span class="comment">/**</span>
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment">     * To be called from data reset code only,</span>
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment">     * do not use in tests.</span>
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment">     * @return void</span>
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment">     */</span>
<a name="l59"><span class="linenum">  59</span></a>      public function <a class="function" onClick="logFunction('reset')" href="../../../../_functions/reset.html" onMouseOver="funcPopup(event,'reset')">reset</a>() {
<a name="l60"><span class="linenum">  60</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('forumdiscussioncount')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/forumdiscussioncount.html">forumdiscussioncount</a> = 0;
<a name="l61"><span class="linenum">  61</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('forumpostcount')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/forumpostcount.html">forumpostcount</a> = 0;
<a name="l62"><span class="linenum">  62</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('forumsubscriptionscount')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/forumsubscriptionscount.html">forumsubscriptionscount</a> = 0;
<a name="l63"><span class="linenum">  63</span></a>  
<a name="l64"><span class="linenum">  64</span></a>          parent::<a class="phpfunction" onClick="logFunction('reset')" href="../../../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>();
<a name="l65"><span class="linenum">  65</span></a>      }
<a name="l66"><span class="linenum">  66</span></a>  
<a name="l67"><span class="linenum">  67</span></a>      public function <a class="function" onClick="logFunction('create_instance')" href="../../../../_functions/create_instance.html" onMouseOver="funcPopup(event,'create_instance')">create_instance</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a> = null, array <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../../_variables/options.html">$options</a> = null) {
<a name="l68"><span class="linenum">  68</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>;
<a name="l69"><span class="linenum">  69</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../../../../mod/forum/lib.php.html">/mod/forum/lib.php</a>');
<a name="l70"><span class="linenum">  70</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a> = (object)(array)<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>;
<a name="l71"><span class="linenum">  71</span></a>  
<a name="l72"><span class="linenum">  72</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('type')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/type.html">type</a>)) {
<a name="l73"><span class="linenum">  73</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('type')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/type.html">type</a> = 'general';
<a name="l74"><span class="linenum">  74</span></a>          }
<a name="l75"><span class="linenum">  75</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('assessed')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/assessed.html">assessed</a>)) {
<a name="l76"><span class="linenum">  76</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('assessed')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/assessed.html">assessed</a> = 0;
<a name="l77"><span class="linenum">  77</span></a>          }
<a name="l78"><span class="linenum">  78</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('scale')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/scale.html">scale</a>)) {
<a name="l79"><span class="linenum">  79</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('scale')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/scale.html">scale</a> = 0;
<a name="l80"><span class="linenum">  80</span></a>          }
<a name="l81"><span class="linenum">  81</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('forcesubscribe')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/forcesubscribe.html">forcesubscribe</a>)) {
<a name="l82"><span class="linenum">  82</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('forcesubscribe')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/forcesubscribe.html">forcesubscribe</a> = <a class="constant" onClick="logConstant('FORUM_CHOOSESUBSCRIBE')" href="../../../../_constants/FORUM_CHOOSESUBSCRIBE.html" onMouseOver="constPopup(event,'FORUM_CHOOSESUBSCRIBE')">FORUM_CHOOSESUBSCRIBE</a>;
<a name="l83"><span class="linenum">  83</span></a>          }
<a name="l84"><span class="linenum">  84</span></a>  
<a name="l85"><span class="linenum">  85</span></a>          return parent::<a class="function" onClick="logFunction('create_instance')" href="../../../../_functions/create_instance.html" onMouseOver="funcPopup(event,'create_instance')">create_instance</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>, (array)<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../../_variables/options.html">$options</a>);
<a name="l86"><span class="linenum">  86</span></a>      }
<a name="l87"><span class="linenum">  87</span></a>  
<a name="l88"><span class="linenum">  88</span></a>      <span class="comment">/**</span>
<a name="l89"><span class="linenum">  89</span></a>  <span class="comment">     * Function to create a dummy subscription.</span>
<a name="l90"><span class="linenum">  90</span></a>  <span class="comment">     *</span>
<a name="l91"><span class="linenum">  91</span></a>  <span class="comment">     * @param array|stdClass $record</span>
<a name="l92"><span class="linenum">  92</span></a>  <span class="comment">     * @return stdClass the subscription object</span>
<a name="l93"><span class="linenum">  93</span></a>  <span class="comment">     */</span>
<a name="l94"><span class="linenum">  94</span></a>      public function <a class="function" onClick="logFunction('create_subscription')" href="../../../../_functions/create_subscription.html" onMouseOver="funcPopup(event,'create_subscription')">create_subscription</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a> = null) {
<a name="l95"><span class="linenum">  95</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>;
<a name="l96"><span class="linenum">  96</span></a>  
<a name="l97"><span class="linenum">  97</span></a>  <span class="comment">        // Increment the forum subscription count.</span>
<a name="l98"><span class="linenum">  98</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('forumsubscriptionscount')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/forumsubscriptionscount.html">forumsubscriptionscount</a>++;
<a name="l99"><span class="linenum">  99</span></a>  
<a name="l100"><span class="linenum"> 100</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a> = (array)<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>;
<a name="l101"><span class="linenum"> 101</span></a>  
<a name="l102"><span class="linenum"> 102</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['course'])) {
<a name="l103"><span class="linenum"> 103</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('course must be present in <a class="class" onClick="logClass('phpunit_util')" href="../../../../_classes/phpunit_util.html" onMouseOver="classPopup(event,'phpunit_util')">phpunit_util</a>::<a class="function" onClick="logFunction('create_subscription')" href="../../../../_functions/create_subscription.html" onMouseOver="funcPopup(event,'create_subscription')">create_subscription</a>() <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>');
<a name="l104"><span class="linenum"> 104</span></a>          }
<a name="l105"><span class="linenum"> 105</span></a>  
<a name="l106"><span class="linenum"> 106</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['forum'])) {
<a name="l107"><span class="linenum"> 107</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('forum must be present in <a class="class" onClick="logClass('phpunit_util')" href="../../../../_classes/phpunit_util.html" onMouseOver="classPopup(event,'phpunit_util')">phpunit_util</a>::<a class="function" onClick="logFunction('create_subscription')" href="../../../../_functions/create_subscription.html" onMouseOver="funcPopup(event,'create_subscription')">create_subscription</a>() <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>');
<a name="l108"><span class="linenum"> 108</span></a>          }
<a name="l109"><span class="linenum"> 109</span></a>  
<a name="l110"><span class="linenum"> 110</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['userid'])) {
<a name="l111"><span class="linenum"> 111</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('userid must be present in <a class="class" onClick="logClass('phpunit_util')" href="../../../../_classes/phpunit_util.html" onMouseOver="classPopup(event,'phpunit_util')">phpunit_util</a>::<a class="function" onClick="logFunction('create_subscription')" href="../../../../_functions/create_subscription.html" onMouseOver="funcPopup(event,'create_subscription')">create_subscription</a>() <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>');
<a name="l112"><span class="linenum"> 112</span></a>          }
<a name="l113"><span class="linenum"> 113</span></a>  
<a name="l114"><span class="linenum"> 114</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a> = (object)<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>;
<a name="l115"><span class="linenum"> 115</span></a>  
<a name="l116"><span class="linenum"> 116</span></a>  <span class="comment">        // Add the subscription.</span>
<a name="l117"><span class="linenum"> 117</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('forum_subscriptions', <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>);
<a name="l118"><span class="linenum"> 118</span></a>  
<a name="l119"><span class="linenum"> 119</span></a>          return <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>;
<a name="l120"><span class="linenum"> 120</span></a>      }
<a name="l121"><span class="linenum"> 121</span></a>  
<a name="l122"><span class="linenum"> 122</span></a>      <span class="comment">/**</span>
<a name="l123"><span class="linenum"> 123</span></a>  <span class="comment">     * Function to create a dummy discussion.</span>
<a name="l124"><span class="linenum"> 124</span></a>  <span class="comment">     *</span>
<a name="l125"><span class="linenum"> 125</span></a>  <span class="comment">     * @param array|stdClass $record</span>
<a name="l126"><span class="linenum"> 126</span></a>  <span class="comment">     * @return stdClass the discussion object</span>
<a name="l127"><span class="linenum"> 127</span></a>  <span class="comment">     */</span>
<a name="l128"><span class="linenum"> 128</span></a>      public function <a class="function" onClick="logFunction('create_discussion')" href="../../../../_functions/create_discussion.html" onMouseOver="funcPopup(event,'create_discussion')">create_discussion</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a> = null) {
<a name="l129"><span class="linenum"> 129</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>;
<a name="l130"><span class="linenum"> 130</span></a>  
<a name="l131"><span class="linenum"> 131</span></a>  <span class="comment">        // Increment the forum discussion count.</span>
<a name="l132"><span class="linenum"> 132</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('forumdiscussioncount')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/forumdiscussioncount.html">forumdiscussioncount</a>++;
<a name="l133"><span class="linenum"> 133</span></a>  
<a name="l134"><span class="linenum"> 134</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a> = (array) <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>;
<a name="l135"><span class="linenum"> 135</span></a>  
<a name="l136"><span class="linenum"> 136</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['course'])) {
<a name="l137"><span class="linenum"> 137</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('course must be present in <a class="class" onClick="logClass('phpunit_util')" href="../../../../_classes/phpunit_util.html" onMouseOver="classPopup(event,'phpunit_util')">phpunit_util</a>::<a class="function" onClick="logFunction('create_discussion')" href="../../../../_functions/create_discussion.html" onMouseOver="funcPopup(event,'create_discussion')">create_discussion</a>() <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>');
<a name="l138"><span class="linenum"> 138</span></a>          }
<a name="l139"><span class="linenum"> 139</span></a>  
<a name="l140"><span class="linenum"> 140</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['forum'])) {
<a name="l141"><span class="linenum"> 141</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('forum must be present in <a class="class" onClick="logClass('phpunit_util')" href="../../../../_classes/phpunit_util.html" onMouseOver="classPopup(event,'phpunit_util')">phpunit_util</a>::<a class="function" onClick="logFunction('create_discussion')" href="../../../../_functions/create_discussion.html" onMouseOver="funcPopup(event,'create_discussion')">create_discussion</a>() <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>');
<a name="l142"><span class="linenum"> 142</span></a>          }
<a name="l143"><span class="linenum"> 143</span></a>  
<a name="l144"><span class="linenum"> 144</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['userid'])) {
<a name="l145"><span class="linenum"> 145</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('userid must be present in <a class="class" onClick="logClass('phpunit_util')" href="../../../../_classes/phpunit_util.html" onMouseOver="classPopup(event,'phpunit_util')">phpunit_util</a>::<a class="function" onClick="logFunction('create_discussion')" href="../../../../_functions/create_discussion.html" onMouseOver="funcPopup(event,'create_discussion')">create_discussion</a>() <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>');
<a name="l146"><span class="linenum"> 146</span></a>          }
<a name="l147"><span class="linenum"> 147</span></a>  
<a name="l148"><span class="linenum"> 148</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['name'])) {
<a name="l149"><span class="linenum"> 149</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['name'] = &quot;Discussion &quot; . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('forumdiscussioncount')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/forumdiscussioncount.html">forumdiscussioncount</a>;
<a name="l150"><span class="linenum"> 150</span></a>          }
<a name="l151"><span class="linenum"> 151</span></a>  
<a name="l152"><span class="linenum"> 152</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['subject'])) {
<a name="l153"><span class="linenum"> 153</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['subject'] = &quot;Subject for discussion &quot; . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('forumdiscussioncount')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/forumdiscussioncount.html">forumdiscussioncount</a>;
<a name="l154"><span class="linenum"> 154</span></a>          }
<a name="l155"><span class="linenum"> 155</span></a>  
<a name="l156"><span class="linenum"> 156</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['message'])) {
<a name="l157"><span class="linenum"> 157</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['message'] = <a class="class" onClick="logClass('html_writer')" href="../../../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../../../../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('p', 'Message for discussion ' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('forumdiscussioncount')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/forumdiscussioncount.html">forumdiscussioncount</a>);
<a name="l158"><span class="linenum"> 158</span></a>          }
<a name="l159"><span class="linenum"> 159</span></a>  
<a name="l160"><span class="linenum"> 160</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['messageformat'])) {
<a name="l161"><span class="linenum"> 161</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['messageformat'] = <a class="function" onClick="logFunction('editors_get_preferred_format')" href="../../../../_functions/editors_get_preferred_format.html" onMouseOver="funcPopup(event,'editors_get_preferred_format')">editors_get_preferred_format</a>();
<a name="l162"><span class="linenum"> 162</span></a>          }
<a name="l163"><span class="linenum"> 163</span></a>  
<a name="l164"><span class="linenum"> 164</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['messagetrust'])) {
<a name="l165"><span class="linenum"> 165</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['messagetrust'] = &quot;&quot;;
<a name="l166"><span class="linenum"> 166</span></a>          }
<a name="l167"><span class="linenum"> 167</span></a>  
<a name="l168"><span class="linenum"> 168</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['assessed'])) {
<a name="l169"><span class="linenum"> 169</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['assessed'] = '1';
<a name="l170"><span class="linenum"> 170</span></a>          }
<a name="l171"><span class="linenum"> 171</span></a>  
<a name="l172"><span class="linenum"> 172</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['groupid'])) {
<a name="l173"><span class="linenum"> 173</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['groupid'] = &quot;-1&quot;;
<a name="l174"><span class="linenum"> 174</span></a>          }
<a name="l175"><span class="linenum"> 175</span></a>  
<a name="l176"><span class="linenum"> 176</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['timestart'])) {
<a name="l177"><span class="linenum"> 177</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['timestart'] = &quot;0&quot;;
<a name="l178"><span class="linenum"> 178</span></a>          }
<a name="l179"><span class="linenum"> 179</span></a>  
<a name="l180"><span class="linenum"> 180</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['timeend'])) {
<a name="l181"><span class="linenum"> 181</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['timeend'] = &quot;0&quot;;
<a name="l182"><span class="linenum"> 182</span></a>          }
<a name="l183"><span class="linenum"> 183</span></a>  
<a name="l184"><span class="linenum"> 184</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['mailnow'])) {
<a name="l185"><span class="linenum"> 185</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['mailnow'] = &quot;0&quot;;
<a name="l186"><span class="linenum"> 186</span></a>          }
<a name="l187"><span class="linenum"> 187</span></a>  
<a name="l188"><span class="linenum"> 188</span></a>          if (isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['timemodified'])) {
<a name="l189"><span class="linenum"> 189</span></a>              <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('timemodified')" href="../../../../_variables/timemodified.html">$timemodified</a> = <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['timemodified'];
<a name="l190"><span class="linenum"> 190</span></a>          }
<a name="l191"><span class="linenum"> 191</span></a>  
<a name="l192"><span class="linenum"> 192</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['pinned'])) {
<a name="l193"><span class="linenum"> 193</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['pinned'] = <a class="constant" onClick="logConstant('FORUM_DISCUSSION_UNPINNED')" href="../../../../_constants/FORUM_DISCUSSION_UNPINNED.html" onMouseOver="constPopup(event,'FORUM_DISCUSSION_UNPINNED')">FORUM_DISCUSSION_UNPINNED</a>;
<a name="l194"><span class="linenum"> 194</span></a>          }
<a name="l195"><span class="linenum"> 195</span></a>  
<a name="l196"><span class="linenum"> 196</span></a>          if (isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['mailed'])) {
<a name="l197"><span class="linenum"> 197</span></a>              <a class="var it6179" onMouseOver="hilite(6179)" onMouseOut="lolite()" onClick="logVariable('mailed')" href="../../../../_variables/mailed.html">$mailed</a> = <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['mailed'];
<a name="l198"><span class="linenum"> 198</span></a>          }
<a name="l199"><span class="linenum"> 199</span></a>  
<a name="l200"><span class="linenum"> 200</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a> = (object) <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>;
<a name="l201"><span class="linenum"> 201</span></a>  
<a name="l202"><span class="linenum"> 202</span></a>  <span class="comment">        // Add the discussion.</span>
<a name="l203"><span class="linenum"> 203</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a> = <a class="function" onClick="logFunction('forum_add_discussion')" href="../../../../_functions/forum_add_discussion.html" onMouseOver="funcPopup(event,'forum_add_discussion')">forum_add_discussion</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>, null, null, <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('userid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/userid.html">userid</a>);
<a name="l204"><span class="linenum"> 204</span></a>  
<a name="l205"><span class="linenum"> 205</span></a>          if (isset(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('timemodified')" href="../../../../_variables/timemodified.html">$timemodified</a>) || isset(<a class="var it6179" onMouseOver="hilite(6179)" onMouseOut="lolite()" onClick="logVariable('mailed')" href="../../../../_variables/mailed.html">$mailed</a>)) {
<a name="l206"><span class="linenum"> 206</span></a>              <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../../_variables/post.html">$post</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('forum_posts', array('discussion' =&gt; <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>));
<a name="l207"><span class="linenum"> 207</span></a>  
<a name="l208"><span class="linenum"> 208</span></a>              if (isset(<a class="var it6179" onMouseOver="hilite(6179)" onMouseOut="lolite()" onClick="logVariable('mailed')" href="../../../../_variables/mailed.html">$mailed</a>)) {
<a name="l209"><span class="linenum"> 209</span></a>                  <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('mailed')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../../../_variables/mailed.html">mailed</a> = <a class="var it6179" onMouseOver="hilite(6179)" onMouseOut="lolite()" onClick="logVariable('mailed')" href="../../../../_variables/mailed.html">$mailed</a>;
<a name="l210"><span class="linenum"> 210</span></a>              }
<a name="l211"><span class="linenum"> 211</span></a>  
<a name="l212"><span class="linenum"> 212</span></a>              if (isset(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('timemodified')" href="../../../../_variables/timemodified.html">$timemodified</a>)) {
<a name="l213"><span class="linenum"> 213</span></a>  <span class="comment">                // Enforce the time modified.</span>
<a name="l214"><span class="linenum"> 214</span></a>                  <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/timemodified.html">timemodified</a> = <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('timemodified')" href="../../../../_variables/timemodified.html">$timemodified</a>;
<a name="l215"><span class="linenum"> 215</span></a>                  <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('modified')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../../../_variables/modified.html">modified</a> = <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('created')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../../../_variables/created.html">created</a> = <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('timemodified')" href="../../../../_variables/timemodified.html">$timemodified</a>;
<a name="l216"><span class="linenum"> 216</span></a>  
<a name="l217"><span class="linenum"> 217</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('forum_discussions', <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>);
<a name="l218"><span class="linenum"> 218</span></a>              }
<a name="l219"><span class="linenum"> 219</span></a>  
<a name="l220"><span class="linenum"> 220</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('forum_posts', <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../../_variables/post.html">$post</a>);
<a name="l221"><span class="linenum"> 221</span></a>          }
<a name="l222"><span class="linenum"> 222</span></a>  
<a name="l223"><span class="linenum"> 223</span></a>          return <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>;
<a name="l224"><span class="linenum"> 224</span></a>      }
<a name="l225"><span class="linenum"> 225</span></a>  
<a name="l226"><span class="linenum"> 226</span></a>      <span class="comment">/**</span>
<a name="l227"><span class="linenum"> 227</span></a>  <span class="comment">     * Function to create a dummy post.</span>
<a name="l228"><span class="linenum"> 228</span></a>  <span class="comment">     *</span>
<a name="l229"><span class="linenum"> 229</span></a>  <span class="comment">     * @param array|stdClass $record</span>
<a name="l230"><span class="linenum"> 230</span></a>  <span class="comment">     * @return stdClass the post object</span>
<a name="l231"><span class="linenum"> 231</span></a>  <span class="comment">     */</span>
<a name="l232"><span class="linenum"> 232</span></a>      public function <a class="function" onClick="logFunction('create_post')" href="../../../../_functions/create_post.html" onMouseOver="funcPopup(event,'create_post')">create_post</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a> = null) {
<a name="l233"><span class="linenum"> 233</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>;
<a name="l234"><span class="linenum"> 234</span></a>  
<a name="l235"><span class="linenum"> 235</span></a>  <span class="comment">        // Increment the forum post count.</span>
<a name="l236"><span class="linenum"> 236</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('forumpostcount')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/forumpostcount.html">forumpostcount</a>++;
<a name="l237"><span class="linenum"> 237</span></a>  
<a name="l238"><span class="linenum"> 238</span></a>  <span class="comment">        // Variable to store time.</span>
<a name="l239"><span class="linenum"> 239</span></a>          <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../../../../_variables/time.html">$time</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>() + <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('forumpostcount')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/forumpostcount.html">forumpostcount</a>;
<a name="l240"><span class="linenum"> 240</span></a>  
<a name="l241"><span class="linenum"> 241</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a> = (array) <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>;
<a name="l242"><span class="linenum"> 242</span></a>  
<a name="l243"><span class="linenum"> 243</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['discussion'])) {
<a name="l244"><span class="linenum"> 244</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('discussion must be present in <a class="class" onClick="logClass('phpunit_util')" href="../../../../_classes/phpunit_util.html" onMouseOver="classPopup(event,'phpunit_util')">phpunit_util</a>::<a class="function" onClick="logFunction('create_post')" href="../../../../_functions/create_post.html" onMouseOver="funcPopup(event,'create_post')">create_post</a>() <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>');
<a name="l245"><span class="linenum"> 245</span></a>          }
<a name="l246"><span class="linenum"> 246</span></a>  
<a name="l247"><span class="linenum"> 247</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['userid'])) {
<a name="l248"><span class="linenum"> 248</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('userid must be present in <a class="class" onClick="logClass('phpunit_util')" href="../../../../_classes/phpunit_util.html" onMouseOver="classPopup(event,'phpunit_util')">phpunit_util</a>::<a class="function" onClick="logFunction('create_post')" href="../../../../_functions/create_post.html" onMouseOver="funcPopup(event,'create_post')">create_post</a>() <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>');
<a name="l249"><span class="linenum"> 249</span></a>          }
<a name="l250"><span class="linenum"> 250</span></a>  
<a name="l251"><span class="linenum"> 251</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['parent'])) {
<a name="l252"><span class="linenum"> 252</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['parent'] = 0;
<a name="l253"><span class="linenum"> 253</span></a>          }
<a name="l254"><span class="linenum"> 254</span></a>  
<a name="l255"><span class="linenum"> 255</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['subject'])) {
<a name="l256"><span class="linenum"> 256</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['subject'] = 'Forum post subject ' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('forumpostcount')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/forumpostcount.html">forumpostcount</a>;
<a name="l257"><span class="linenum"> 257</span></a>          }
<a name="l258"><span class="linenum"> 258</span></a>  
<a name="l259"><span class="linenum"> 259</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['message'])) {
<a name="l260"><span class="linenum"> 260</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['message'] = <a class="class" onClick="logClass('html_writer')" href="../../../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../../../../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('p', 'Forum message post ' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('forumpostcount')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/forumpostcount.html">forumpostcount</a>);
<a name="l261"><span class="linenum"> 261</span></a>          }
<a name="l262"><span class="linenum"> 262</span></a>  
<a name="l263"><span class="linenum"> 263</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['created'])) {
<a name="l264"><span class="linenum"> 264</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['created'] = <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../../../../_variables/time.html">$time</a>;
<a name="l265"><span class="linenum"> 265</span></a>          }
<a name="l266"><span class="linenum"> 266</span></a>  
<a name="l267"><span class="linenum"> 267</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['modified'])) {
<a name="l268"><span class="linenum"> 268</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['modified'] = <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../../../../_variables/time.html">$time</a>;
<a name="l269"><span class="linenum"> 269</span></a>          }
<a name="l270"><span class="linenum"> 270</span></a>  
<a name="l271"><span class="linenum"> 271</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['mailed'])) {
<a name="l272"><span class="linenum"> 272</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['mailed'] = 0;
<a name="l273"><span class="linenum"> 273</span></a>          }
<a name="l274"><span class="linenum"> 274</span></a>  
<a name="l275"><span class="linenum"> 275</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['messageformat'])) {
<a name="l276"><span class="linenum"> 276</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['messageformat'] = 0;
<a name="l277"><span class="linenum"> 277</span></a>          }
<a name="l278"><span class="linenum"> 278</span></a>  
<a name="l279"><span class="linenum"> 279</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['messagetrust'])) {
<a name="l280"><span class="linenum"> 280</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['messagetrust'] = 0;
<a name="l281"><span class="linenum"> 281</span></a>          }
<a name="l282"><span class="linenum"> 282</span></a>  
<a name="l283"><span class="linenum"> 283</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['attachment'])) {
<a name="l284"><span class="linenum"> 284</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['attachment'] = &quot;&quot;;
<a name="l285"><span class="linenum"> 285</span></a>          }
<a name="l286"><span class="linenum"> 286</span></a>  
<a name="l287"><span class="linenum"> 287</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['totalscore'])) {
<a name="l288"><span class="linenum"> 288</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['totalscore'] = 0;
<a name="l289"><span class="linenum"> 289</span></a>          }
<a name="l290"><span class="linenum"> 290</span></a>  
<a name="l291"><span class="linenum"> 291</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['mailnow'])) {
<a name="l292"><span class="linenum"> 292</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['mailnow'] = 0;
<a name="l293"><span class="linenum"> 293</span></a>          }
<a name="l294"><span class="linenum"> 294</span></a>  
<a name="l295"><span class="linenum"> 295</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a> = (object) <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>;
<a name="l296"><span class="linenum"> 296</span></a>  
<a name="l297"><span class="linenum"> 297</span></a>  <span class="comment">        // Add the post.</span>
<a name="l298"><span class="linenum"> 298</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('forum_posts', <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>);
<a name="l299"><span class="linenum"> 299</span></a>  
<a name="l300"><span class="linenum"> 300</span></a>  <span class="comment">        // Update the last post.</span>
<a name="l301"><span class="linenum"> 301</span></a>          <a class="function" onClick="logFunction('forum_discussion_update_last_post')" href="../../../../_functions/forum_discussion_update_last_post.html" onMouseOver="funcPopup(event,'forum_discussion_update_last_post')">forum_discussion_update_last_post</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('discussion')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/discussion.html">discussion</a>);
<a name="l302"><span class="linenum"> 302</span></a>  
<a name="l303"><span class="linenum"> 303</span></a>          return <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>;
<a name="l304"><span class="linenum"> 304</span></a>      }
<a name="l305"><span class="linenum"> 305</span></a>  
<a name="l306"><span class="linenum"> 306</span></a>      public function <a class="function" onClick="logFunction('create_content')" href="../../../../_functions/create_content.html" onMouseOver="funcPopup(event,'create_content')">create_content</a>(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../../../_variables/instance.html">$instance</a>, <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a> = array()) {
<a name="l307"><span class="linenum"> 307</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>;
<a name="l308"><span class="linenum"> 308</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a> = (array)<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a> + array(
<a name="l309"><span class="linenum"> 309</span></a>              'forum' =&gt; <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('id')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>,
<a name="l310"><span class="linenum"> 310</span></a>              'userid' =&gt; <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>,
<a name="l311"><span class="linenum"> 311</span></a>              'course' =&gt; <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../../../_variables/instance.html">$instance</a>-&gt;course
<a name="l312"><span class="linenum"> 312</span></a>          );
<a name="l313"><span class="linenum"> 313</span></a>          if (empty(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['discussion']) &amp;&amp; empty(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['parent'])) {
<a name="l314"><span class="linenum"> 314</span></a>  <span class="comment">            // Create discussion.</span>
<a name="l315"><span class="linenum"> 315</span></a>              <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../../../_variables/discussion.html">$discussion</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('create_discussion')" href="../../../../_functions/create_discussion.html" onMouseOver="funcPopup(event,'create_discussion')">create_discussion</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>);
<a name="l316"><span class="linenum"> 316</span></a>              <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../../_variables/post.html">$post</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('forum_posts', array('id' =&gt; <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('firstpost')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../../../_variables/firstpost.html">firstpost</a>));
<a name="l317"><span class="linenum"> 317</span></a>          } else {
<a name="l318"><span class="linenum"> 318</span></a>  <span class="comment">            // Create post.</span>
<a name="l319"><span class="linenum"> 319</span></a>              if (empty(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['parent'])) {
<a name="l320"><span class="linenum"> 320</span></a>                  <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['parent'] = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('forum_discussions', 'firstpost', array('id' =&gt; <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['discussion']), <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l321"><span class="linenum"> 321</span></a>              } else if (empty(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['discussion'])) {
<a name="l322"><span class="linenum"> 322</span></a>                  <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['discussion'] = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('forum_posts', 'discussion', array('id' =&gt; <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>['parent']), <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l323"><span class="linenum"> 323</span></a>              }
<a name="l324"><span class="linenum"> 324</span></a>              <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../../_variables/post.html">$post</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('create_post')" href="../../../../_functions/create_post.html" onMouseOver="funcPopup(event,'create_post')">create_post</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>);
<a name="l325"><span class="linenum"> 325</span></a>          }
<a name="l326"><span class="linenum"> 326</span></a>          return <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../../_variables/post.html">$post</a>;
<a name="l327"><span class="linenum"> 327</span></a>      }
<a name="l328"><span class="linenum"> 328</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'reset': ['reset', 'Resets the achievement with the given ID for the currently authenticated player. This method is only accessible to whitelisted tester accounts for your application. (achievements.reset) ', [['lib/google/src/Google/Service','GamesManagement.php',350],['lib/google/src/Google/Service','GamesManagement.php',471],['lib/google/src/Google/Service','GamesManagement.php',608],['lib/google/src/Google/Service','GamesManagement.php',692],['lib/google/src/Google/Service','GamesManagement.php',732],['lib/google/src/Google/Service','GamesManagement.php',819],['mod/forum/tests/generator','lib.php',54],['lib/testing/generator','component_generator_base.php',53],['lib/testing/generator','module_generator.php',45],['mod/book/tests/generator','lib.php',43],['competency/tests/generator','lib.php',78],['lib/adodb','adodb-active-record.inc.php',817],['mod/survey/tests/generator','lib.php',38],['notes/tests/generator','lib.php',43],['lib/lessphp/Tree','DefaultFunc.php',31],['lib/phpmailer','class.smtp.php',830],['lib/testing/generator','repository_generator.php',45],['question/tests/generator','lib.php',34],['lib/jabber/XMPP','BOSH.php',158],['lib/testing/generator','data_generator.php',84],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',71],['admin/tool/uploadcourse/classes','course.php',867],['mod/lesson/tests/generator','lib.php',43],['mod/glossary/tests/generator','lib.php',48],['lib/testing/generator','block_generator.php',42],['mod/chat/tests/generator','lib.php',43],['backup/cc/cc_lib','cc_utils.php',417],['backup/cc/cc_lib','cc_utils.php',458],['lib/horde/framework/Horde/Imap/Client/Base','Mailbox.php',167],['lib/mustache/src/Mustache','Tokenizer.php',212],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',44],['admin/tool/uploadcourse/classes','processor.php',362],['lib/lessphp','Parser.php',100],['mod/assign/feedback/editpdf/fpdi','pdf_context.php',76],['lib/tests/fixtures','event_fixtures.php',69],['backup/cc','validator.php',64],['lib/jabber/XMPP','XMLStream.php',730],['cache/classes','factory.php',156],['mod/wiki/tests/generator','lib.php',43],['lib/google/src/Google/Service','Compute.php',6455]], 1213],
'editors_get_preferred_format': ['editors_get_preferred_format', 'Returns users preferred text format. ', [['lib','editorlib.php',79]], 19],
'create_post': ['create_post', 'Function to create a dummy post. ', [['mod/forum/tests/generator','lib.php',226]], 58],
'forum_add_discussion': ['forum_add_discussion', 'Given an object containing all the necessary data, create a new discussion and return the id ', [['mod/forum','lib.php',4457]], 6],
'create_content': ['create_content', '', [['mod/forum/tests/generator','lib.php',306],['lib/testing/generator','module_generator.php',274],['mod/book/tests/generator','lib.php',123],['mod/lesson/tests/generator','lib.php',95],['mod/glossary/tests/generator','lib.php',109],['mod/wiki/tests/generator','lib.php',65]], 134],
'create_subscription': ['create_subscription', 'Function to create a dummy subscription. ', [['mod/forum/tests/generator','lib.php',88],['admin/tool/monitor/tests/generator','lib.php',106],['admin/tool/monitor/classes','subscription_manager.php',42]], 45],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'tag': ['tag', 'Outputs a tag with attributes and contents ', [['lib','outputcomponents.php',1073]], 1292],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pdo_moodle_database.php',461],['lib/dml','oci_native_moodle_database.php',1404],['lib/dml','pgsql_native_moodle_database.php',1089],['lib/dml','mssql_native_moodle_database.php',1067],['lib/dml','mysqli_native_moodle_database.php',1405],['lib/dml','sqlsrv_native_moodle_database.php',1148],['lib/dml/tests','dml_test.php',5551]], 650],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'create_instance': ['create_instance', '', [['mod/imscp/tests/generator','lib.php',38],['mod/forum/tests/generator','lib.php',67],['mod/workshop/tests/generator','lib.php',38],['lib/testing/generator','module_generator.php',210],['mod/book/tests/generator','lib.php',53],['mod/survey/tests/generator','lib.php',49],['notes/tests/generator','lib.php',52],['lib/testing/generator','repository_generator.php',106],['mod/lti/tests/generator','lib.php',40],['mod/lesson/tests/generator','lib.php',53],['mod/page/tests/generator','lib.php',39],['mod/glossary/tests/generator','lib.php',59],['lib/testing/generator','block_generator.php',100],['grade/grading/form','lib.php',493],['mod/choice/tests/generator','lib.php',38],['mod/chat/tests/generator','lib.php',53],['mod/assignment/tests/generator','lib.php',39],['mod/folder/tests/generator','lib.php',38],['mod/assign/tests','base_test.php',200],['mod/feedback/tests/generator','lib.php',38],['lib/portfolio','plugin.php',412],['mod/assign/tests/generator','lib.php',29],['mod/data/tests/generator','lib.php',39],['mod/quiz/tests/generator','lib.php',28],['mod/url/tests/generator','lib.php',38],['mod/resource/tests/generator','lib.php',37],['mod/wiki/tests/generator','lib.php',53],['mod/scorm/tests/generator','lib.php',38]], 328],
'create_discussion': ['create_discussion', 'Function to create a dummy discussion. ', [['mod/forum/tests/generator','lib.php',122]], 160],
'get_field': ['get_field', 'Gets an instance of the form field. ', [['lib/behat','behat_field_manager.php',248],['mod/quiz/report/statistics/classes','calculated.php',109],['lib/dml','moodle_database.php',1546],['user/filters','lib.php',124]], 536],
'forum_discussion_update_last_post': ['forum_discussion_update_last_post', 'Sets the last post for a given discussion ', [['mod/forum','lib.php',6678]], 4],
'time': ['time', '', [], 1959],
'defined': ['defined', '', [], 4731],
'reset': ['reset', '', [], 1213]};
CLASS_DATA={
'html_writer': ['html_writer', 'Simple html output class ', [['lib','outputcomponents.php',1062]], 5120],
'phpunit_util': ['phpunit_util', 'Collection of utility methods. ', [['lib/phpunit/classes','util.php',28]], 54],
'coding_exception': ['coding_exception', 'Exception indicating programming error, must be fixed by a programer. For example a core API might throw this type of exception if a plugin calls it incorrectly. ', [['lib','setuplib.php',239]], 1200],
'mod_forum_generator': ['mod_forum_generator', 'Forum module data generator class ', [['mod/forum/tests/generator','lib.php',29]], 0]};
CONST_DATA={
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153],
'FORUM_CHOOSESUBSCRIBE': ['FORUM_CHOOSESUBSCRIBE', '', [['mod/forum','lib.php',37]], 38],
'FORUM_DISCUSSION_UNPINNED': ['FORUM_DISCUSSION_UNPINNED', '', [['mod/forum','lib.php',73]], 14],
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1384]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
