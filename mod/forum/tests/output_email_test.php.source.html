<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /mod/forum/tests/output_email_test.php source</title>
    <link rel="stylesheet" href="../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../';
subdir='mod/forum/tests';
filename='output_email_test.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/mod/forum/tests/</a> -> <a href="output_email_test.php.html">output_email_test.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="output_email_test.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="output_email_test.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * The module forums tests</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package    mod_forum</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @copyright  2016 Andrew Nicols &lt;andrew@nicols.co.uk&gt;</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> */</span>
<a name="l24"><span class="linenum">  24</span></a>  
<a name="l25"><span class="linenum">  25</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment">/**</span>
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment"> * Tests for the forum output/email class.</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> *</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> * @copyright  2016 Andrew Nicols &lt;andrew@nicols.co.uk&gt;</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> */</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('mod_forum_output_email_testcase')" href="../../../_classes/mod_forum_output_email_testcase.html" onMouseOver="classPopup(event,'mod_forum_output_email_testcase')">mod_forum_output_email_testcase</a> extends advanced_testcase {
<a name="l34"><span class="linenum">  34</span></a>      <span class="comment">/**</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment">     * Data provider for the postdate function tests.</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment">     */</span>
<a name="l37"><span class="linenum">  37</span></a>      public function <a class="function" onClick="logFunction('postdate_provider')" href="../../../_functions/postdate_provider.html" onMouseOver="funcPopup(event,'postdate_provider')">postdate_provider</a>() {
<a name="l38"><span class="linenum">  38</span></a>          return array(
<a name="l39"><span class="linenum">  39</span></a>              'Timed discussions disabled, timestart unset' =&gt; array(
<a name="l40"><span class="linenum">  40</span></a>                  'globalconfig'      =&gt; array(
<a name="l41"><span class="linenum">  41</span></a>                      'forum_enabletimedposts' =&gt; 0,
<a name="l42"><span class="linenum">  42</span></a>                  ),
<a name="l43"><span class="linenum">  43</span></a>                  'forumconfig'       =&gt; array(
<a name="l44"><span class="linenum">  44</span></a>                  ),
<a name="l45"><span class="linenum">  45</span></a>                  'postconfig'        =&gt; array(
<a name="l46"><span class="linenum">  46</span></a>                      'modified'  =&gt; 1000,
<a name="l47"><span class="linenum">  47</span></a>                  ),
<a name="l48"><span class="linenum">  48</span></a>                  'discussionconfig'  =&gt; array(
<a name="l49"><span class="linenum">  49</span></a>                  ),
<a name="l50"><span class="linenum">  50</span></a>                  'expectation'       =&gt; 1000,
<a name="l51"><span class="linenum">  51</span></a>              ),
<a name="l52"><span class="linenum">  52</span></a>              'Timed discussions disabled, timestart set and newer' =&gt; array(
<a name="l53"><span class="linenum">  53</span></a>                  'globalconfig'      =&gt; array(
<a name="l54"><span class="linenum">  54</span></a>                      'forum_enabletimedposts' =&gt; 0,
<a name="l55"><span class="linenum">  55</span></a>                  ),
<a name="l56"><span class="linenum">  56</span></a>                  'forumconfig'       =&gt; array(
<a name="l57"><span class="linenum">  57</span></a>                  ),
<a name="l58"><span class="linenum">  58</span></a>                  'postconfig'        =&gt; array(
<a name="l59"><span class="linenum">  59</span></a>                      'modified'  =&gt; 1000,
<a name="l60"><span class="linenum">  60</span></a>                  ),
<a name="l61"><span class="linenum">  61</span></a>                  'discussionconfig'  =&gt; array(
<a name="l62"><span class="linenum">  62</span></a>                      'timestart' =&gt; 2000,
<a name="l63"><span class="linenum">  63</span></a>                  ),
<a name="l64"><span class="linenum">  64</span></a>                  'expectation'       =&gt; 1000,
<a name="l65"><span class="linenum">  65</span></a>              ),
<a name="l66"><span class="linenum">  66</span></a>              'Timed discussions disabled, timestart set but older' =&gt; array(
<a name="l67"><span class="linenum">  67</span></a>                  'globalconfig'      =&gt; array(
<a name="l68"><span class="linenum">  68</span></a>                      'forum_enabletimedposts' =&gt; 0,
<a name="l69"><span class="linenum">  69</span></a>                  ),
<a name="l70"><span class="linenum">  70</span></a>                  'forumconfig'       =&gt; array(
<a name="l71"><span class="linenum">  71</span></a>                  ),
<a name="l72"><span class="linenum">  72</span></a>                  'postconfig'        =&gt; array(
<a name="l73"><span class="linenum">  73</span></a>                      'modified'  =&gt; 1000,
<a name="l74"><span class="linenum">  74</span></a>                  ),
<a name="l75"><span class="linenum">  75</span></a>                  'discussionconfig'  =&gt; array(
<a name="l76"><span class="linenum">  76</span></a>                      'timestart' =&gt; 500,
<a name="l77"><span class="linenum">  77</span></a>                  ),
<a name="l78"><span class="linenum">  78</span></a>                  'expectation'       =&gt; 1000,
<a name="l79"><span class="linenum">  79</span></a>              ),
<a name="l80"><span class="linenum">  80</span></a>              'Timed discussions enabled, timestart unset' =&gt; array(
<a name="l81"><span class="linenum">  81</span></a>                  'globalconfig'      =&gt; array(
<a name="l82"><span class="linenum">  82</span></a>                      'forum_enabletimedposts' =&gt; 1,
<a name="l83"><span class="linenum">  83</span></a>                  ),
<a name="l84"><span class="linenum">  84</span></a>                  'forumconfig'       =&gt; array(
<a name="l85"><span class="linenum">  85</span></a>                  ),
<a name="l86"><span class="linenum">  86</span></a>                  'postconfig'        =&gt; array(
<a name="l87"><span class="linenum">  87</span></a>                      'modified'  =&gt; 1000,
<a name="l88"><span class="linenum">  88</span></a>                  ),
<a name="l89"><span class="linenum">  89</span></a>                  'discussionconfig'  =&gt; array(
<a name="l90"><span class="linenum">  90</span></a>                  ),
<a name="l91"><span class="linenum">  91</span></a>                  'expectation'       =&gt; 1000,
<a name="l92"><span class="linenum">  92</span></a>              ),
<a name="l93"><span class="linenum">  93</span></a>              'Timed discussions enabled, timestart set and newer' =&gt; array(
<a name="l94"><span class="linenum">  94</span></a>                  'globalconfig'      =&gt; array(
<a name="l95"><span class="linenum">  95</span></a>                      'forum_enabletimedposts' =&gt; 1,
<a name="l96"><span class="linenum">  96</span></a>                  ),
<a name="l97"><span class="linenum">  97</span></a>                  'forumconfig'       =&gt; array(
<a name="l98"><span class="linenum">  98</span></a>                  ),
<a name="l99"><span class="linenum">  99</span></a>                  'postconfig'        =&gt; array(
<a name="l100"><span class="linenum"> 100</span></a>                      'modified'  =&gt; 1000,
<a name="l101"><span class="linenum"> 101</span></a>                  ),
<a name="l102"><span class="linenum"> 102</span></a>                  'discussionconfig'  =&gt; array(
<a name="l103"><span class="linenum"> 103</span></a>                      'timestart' =&gt; 2000,
<a name="l104"><span class="linenum"> 104</span></a>                  ),
<a name="l105"><span class="linenum"> 105</span></a>                  'expectation'       =&gt; 2000,
<a name="l106"><span class="linenum"> 106</span></a>              ),
<a name="l107"><span class="linenum"> 107</span></a>              'Timed discussions enabled, timestart set but older' =&gt; array(
<a name="l108"><span class="linenum"> 108</span></a>                  'globalconfig'      =&gt; array(
<a name="l109"><span class="linenum"> 109</span></a>                      'forum_enabletimedposts' =&gt; 1,
<a name="l110"><span class="linenum"> 110</span></a>                  ),
<a name="l111"><span class="linenum"> 111</span></a>                  'forumconfig'       =&gt; array(
<a name="l112"><span class="linenum"> 112</span></a>                  ),
<a name="l113"><span class="linenum"> 113</span></a>                  'postconfig'        =&gt; array(
<a name="l114"><span class="linenum"> 114</span></a>                      'modified'  =&gt; 1000,
<a name="l115"><span class="linenum"> 115</span></a>                  ),
<a name="l116"><span class="linenum"> 116</span></a>                  'discussionconfig'  =&gt; array(
<a name="l117"><span class="linenum"> 117</span></a>                      'timestart' =&gt; 500,
<a name="l118"><span class="linenum"> 118</span></a>                  ),
<a name="l119"><span class="linenum"> 119</span></a>                  'expectation'       =&gt; 1000,
<a name="l120"><span class="linenum"> 120</span></a>              ),
<a name="l121"><span class="linenum"> 121</span></a>          );
<a name="l122"><span class="linenum"> 122</span></a>      }
<a name="l123"><span class="linenum"> 123</span></a>  
<a name="l124"><span class="linenum"> 124</span></a>      <span class="comment">/**</span>
<a name="l125"><span class="linenum"> 125</span></a>  <span class="comment">     * Test for the forum email renderable postdate.</span>
<a name="l126"><span class="linenum"> 126</span></a>  <span class="comment">     *</span>
<a name="l127"><span class="linenum"> 127</span></a>  <span class="comment">     * @dataProvider postdate_provider</span>
<a name="l128"><span class="linenum"> 128</span></a>  <span class="comment">     *</span>
<a name="l129"><span class="linenum"> 129</span></a>  <span class="comment">     * @param array  $globalconfig      The configuration to set on $CFG</span>
<a name="l130"><span class="linenum"> 130</span></a>  <span class="comment">     * @param array  $forumconfig       The configuration for this forum</span>
<a name="l131"><span class="linenum"> 131</span></a>  <span class="comment">     * @param array  $postconfig        The configuration for this post</span>
<a name="l132"><span class="linenum"> 132</span></a>  <span class="comment">     * @param array  $discussionconfig  The configuration for this discussion</span>
<a name="l133"><span class="linenum"> 133</span></a>  <span class="comment">     * @param string $expectation       The expected date</span>
<a name="l134"><span class="linenum"> 134</span></a>  <span class="comment">     */</span>
<a name="l135"><span class="linenum"> 135</span></a>      public function <a class="function" onClick="logFunction('test_postdate')" href="../../../_functions/test_postdate.html" onMouseOver="funcPopup(event,'test_postdate')">test_postdate</a>(<a class="var it4564" onMouseOver="hilite(4564)" onMouseOut="lolite()" onClick="logVariable('globalconfig')" href="../../../_variables/globalconfig.html">$globalconfig</a>, <a class="var it4565" onMouseOver="hilite(4565)" onMouseOut="lolite()" onClick="logVariable('forumconfig')" href="../../../_variables/forumconfig.html">$forumconfig</a>, <a class="var it4566" onMouseOver="hilite(4566)" onMouseOut="lolite()" onClick="logVariable('postconfig')" href="../../../_variables/postconfig.html">$postconfig</a>, <a class="var it4567" onMouseOver="hilite(4567)" onMouseOut="lolite()" onClick="logVariable('discussionconfig')" href="../../../_variables/discussionconfig.html">$discussionconfig</a>, <a class="var it4568" onMouseOver="hilite(4568)" onMouseOut="lolite()" onClick="logVariable('expectation')" href="../../../_variables/expectation.html">$expectation</a>) {
<a name="l136"><span class="linenum"> 136</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l137"><span class="linenum"> 137</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('resetAfterTest')" href="../../../_functions/resetaftertest.html" onMouseOver="funcPopup(event,'resetaftertest')">resetAfterTest</a>(true);
<a name="l138"><span class="linenum"> 138</span></a>  
<a name="l139"><span class="linenum"> 139</span></a>  <span class="comment">        // Apply the global configuration.</span>
<a name="l140"><span class="linenum"> 140</span></a>          foreach (<a class="var it4564" onMouseOver="hilite(4564)" onMouseOut="lolite()" onClick="logVariable('globalconfig')" href="../../../_variables/globalconfig.html">$globalconfig</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a> =&gt; <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>) {
<a name="l141"><span class="linenum"> 141</span></a>              <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a> = <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>;
<a name="l142"><span class="linenum"> 142</span></a>          }
<a name="l143"><span class="linenum"> 143</span></a>  
<a name="l144"><span class="linenum"> 144</span></a>  <span class="comment">        // Create the fixture.</span>
<a name="l145"><span class="linenum"> 145</span></a>          <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDataGenerator')" href="../../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_user')" href="../../../_functions/create_user.html" onMouseOver="funcPopup(event,'create_user')">create_user</a>();
<a name="l146"><span class="linenum"> 146</span></a>          <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../../_variables/course.html">$course</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDataGenerator')" href="../../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_course')" href="../../../_functions/create_course.html" onMouseOver="funcPopup(event,'create_course')">create_course</a>();
<a name="l147"><span class="linenum"> 147</span></a>          <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../../_variables/forum.html">$forum</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDataGenerator')" href="../../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_module')" href="../../../_functions/create_module.html" onMouseOver="funcPopup(event,'create_module')">create_module</a>('forum', (object) array('course' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>));
<a name="l148"><span class="linenum"> 148</span></a>          <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('forum', <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('id')" class="var it43075" onMouseOver="hilite(43075)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>, false, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l149"><span class="linenum"> 149</span></a>  
<a name="l150"><span class="linenum"> 150</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDataGenerator')" href="../../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('enrol_user')" href="../../../_functions/enrol_user.html" onMouseOver="funcPopup(event,'enrol_user')">enrol_user</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>);
<a name="l151"><span class="linenum"> 151</span></a>  
<a name="l152"><span class="linenum"> 152</span></a>  <span class="comment">        // Create a new discussion.</span>
<a name="l153"><span class="linenum"> 153</span></a>          <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../../_variables/discussion.html">$discussion</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDataGenerator')" href="../../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('get_plugin_generator')" href="../../../_functions/get_plugin_generator.html" onMouseOver="funcPopup(event,'get_plugin_generator')">get_plugin_generator</a>('mod_forum')-&gt;<a class="function" onClick="logFunction('create_discussion')" href="../../../_functions/create_discussion.html" onMouseOver="funcPopup(event,'create_discussion')">create_discussion</a>(
<a name="l154"><span class="linenum"> 154</span></a>              (object) <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it4567" onMouseOver="hilite(4567)" onMouseOut="lolite()" onClick="logVariable('discussionconfig')" href="../../../_variables/discussionconfig.html">$discussionconfig</a>, array(
<a name="l155"><span class="linenum"> 155</span></a>                  'course'    =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>,
<a name="l156"><span class="linenum"> 156</span></a>                  'forum'     =&gt; <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('id')" class="var it43075" onMouseOver="hilite(43075)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>,
<a name="l157"><span class="linenum"> 157</span></a>                  'userid'    =&gt; <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>,
<a name="l158"><span class="linenum"> 158</span></a>              )));
<a name="l159"><span class="linenum"> 159</span></a>  
<a name="l160"><span class="linenum"> 160</span></a>  <span class="comment">        // Apply the discussion configuration.</span>
<a name="l161"><span class="linenum"> 161</span></a>  <span class="comment">        // Some settings are ignored by the generator and must be set manually.</span>
<a name="l162"><span class="linenum"> 162</span></a>          <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../../_variables/discussion.html">$discussion</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('forum_discussions', array('id' =&gt; <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('id')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>));
<a name="l163"><span class="linenum"> 163</span></a>          foreach (<a class="var it4567" onMouseOver="hilite(4567)" onMouseOut="lolite()" onClick="logVariable('discussionconfig')" href="../../../_variables/discussionconfig.html">$discussionconfig</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a> =&gt; <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>) {
<a name="l164"><span class="linenum"> 164</span></a>              <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../../_variables/discussion.html">$discussion</a>-&gt;<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a> = <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>;
<a name="l165"><span class="linenum"> 165</span></a>          }
<a name="l166"><span class="linenum"> 166</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('forum_discussions', <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../../_variables/discussion.html">$discussion</a>);
<a name="l167"><span class="linenum"> 167</span></a>  
<a name="l168"><span class="linenum"> 168</span></a>  <span class="comment">        // Apply the post configuration.</span>
<a name="l169"><span class="linenum"> 169</span></a>  <span class="comment">        // Some settings are ignored by the generator and must be set manually.</span>
<a name="l170"><span class="linenum"> 170</span></a>          <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../_variables/post.html">$post</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('forum_posts', array('discussion' =&gt; <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('id')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>));
<a name="l171"><span class="linenum"> 171</span></a>          foreach (<a class="var it4566" onMouseOver="hilite(4566)" onMouseOut="lolite()" onClick="logVariable('postconfig')" href="../../../_variables/postconfig.html">$postconfig</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a> =&gt; <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>) {
<a name="l172"><span class="linenum"> 172</span></a>              <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../_variables/post.html">$post</a>-&gt;<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a> = <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>;
<a name="l173"><span class="linenum"> 173</span></a>          }
<a name="l174"><span class="linenum"> 174</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('forum_posts', <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../_variables/post.html">$post</a>);
<a name="l175"><span class="linenum"> 175</span></a>  
<a name="l176"><span class="linenum"> 176</span></a>  <span class="comment">        // Create the renderable.</span>
<a name="l177"><span class="linenum"> 177</span></a>          <a class="var it4570" onMouseOver="hilite(4570)" onMouseOut="lolite()" onClick="logVariable('renderable')" href="../../../_variables/renderable.html">$renderable</a> = new mod_forum\output\forum_post_email(
<a name="l178"><span class="linenum"> 178</span></a>                  <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../../_variables/course.html">$course</a>,
<a name="l179"><span class="linenum"> 179</span></a>                  <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../../_variables/cm.html">$cm</a>,
<a name="l180"><span class="linenum"> 180</span></a>                  <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../../_variables/forum.html">$forum</a>,
<a name="l181"><span class="linenum"> 181</span></a>                  <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../../_variables/discussion.html">$discussion</a>,
<a name="l182"><span class="linenum"> 182</span></a>                  <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../../_variables/post.html">$post</a>,
<a name="l183"><span class="linenum"> 183</span></a>                  <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a>,
<a name="l184"><span class="linenum"> 184</span></a>                  <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a>,
<a name="l185"><span class="linenum"> 185</span></a>                  true
<a name="l186"><span class="linenum"> 186</span></a>              );
<a name="l187"><span class="linenum"> 187</span></a>  
<a name="l188"><span class="linenum"> 188</span></a>  <span class="comment">        // Check the postdate matches our expectations.</span>
<a name="l189"><span class="linenum"> 189</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(<a class="function" onClick="logFunction('userdate')" href="../../../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it4568" onMouseOver="hilite(4568)" onMouseOut="lolite()" onClick="logVariable('expectation')" href="../../../_variables/expectation.html">$expectation</a>, &quot;&quot;, \<a class="class" onClick="logClass('core_date')" href="../../../_classes/core_date.html" onMouseOver="classPopup(event,'core_date')">core_date</a>::<a class="function" onClick="logFunction('get_user_timezone')" href="../../../_functions/get_user_timezone.html" onMouseOver="funcPopup(event,'get_user_timezone')">get_user_timezone</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../_variables/user.html">$user</a>)), <a class="var it4570" onMouseOver="hilite(4570)" onMouseOut="lolite()" onClick="logVariable('renderable')" href="../../../_variables/renderable.html">$renderable</a>-&gt;<a class="function" onClick="logFunction('get_postdate')" href="../../../_functions/get_postdate.html" onMouseOver="funcPopup(event,'get_postdate')">get_postdate</a>());
<a name="l190"><span class="linenum"> 190</span></a>      }
<a name="l191"><span class="linenum"> 191</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'get_plugin_generator': ['get_plugin_generator', 'Return generator for given plugin or component. ', [['lib/testing/generator','data_generator.php',100]], 619],
'create_discussion': ['create_discussion', 'Function to create a dummy discussion. ', [['mod/forum/tests/generator','lib.php',122]], 160],
'get_postdate': ['get_postdate', 'The date of the post, formatted according to the postto user\'s preferences. ', [['mod/forum/classes/output','forum_post.php',520]], 3],
'create_user': ['create_user', 'Create a test user ', [['lib/testing/generator','data_generator.php',137]], 1376],
'get_user_timezone': ['get_user_timezone', 'Returns a float or a string which denotes the user\'s timezone A float value means that a simple offset from GMT is used, while a string (it will be the name of a timezone in the database) means that for this timezone there are also DST rules to be taken into account Checks various settings and picks the most dominant of those which have a value ', [['lib','moodlelib.php',2284],['lib/classes','date.php',220]], 69],
'getdatagenerator': ['getdatagenerator', 'Get data generator ', [['lib/phpunit/classes','advanced_testcase.php',570]], 4450],
'get_coursemodule_from_instance': ['get_coursemodule_from_instance', 'Given an instance number of a module, finds the coursemodule description ', [['lib','datalib.php',1300]], 441],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pdo_moodle_database.php',461],['lib/dml','oci_native_moodle_database.php',1404],['lib/dml','pgsql_native_moodle_database.php',1089],['lib/dml','mssql_native_moodle_database.php',1067],['lib/dml','mysqli_native_moodle_database.php',1405],['lib/dml','sqlsrv_native_moodle_database.php',1148],['lib/dml/tests','dml_test.php',5551]], 650],
'resetaftertest': ['resetaftertest', 'Reset everything after current test. ', [['lib/phpunit/classes','advanced_testcase.php',246]], 1528],
'postdate_provider': ['postdate_provider', 'Data provider for the postdate function tests. ', [['mod/forum/tests','output_email_test.php',34]], 0],
'enrol_user': ['enrol_user', 'Enrol user into course via enrol instance. ', [['enrol/flatfile','lib.php',144],['lib','enrollib.php',1270],['lib/testing/generator','data_generator.php',891],['enrol/lti/classes','helper.php',233],['enrol/self','externallib.php',122],['enrol/mnet','enrol.php',115],['enrol/guest','lib.php',60]], 745],
'userdate': ['userdate', 'Returns a formatted string that represents a date in user time. ', [['lib','moodlelib.php',2155],['lib/adodb','adodb.inc.php',2842],['lib/adodb','adodb.inc.php',3569]], 525],
'test_postdate': ['test_postdate', 'Test for the forum email renderable postdate. ', [['mod/forum/tests','output_email_test.php',124]], 0],
'create_course': ['create_course', 'Creates the actual course. ', [['admin/tool/generator/classes','course_backend.php',246],['lib/testing/generator','data_generator.php',366],['enrol/ldap','lib.php',949],['course','lib.php',2654]], 1178],
'assertequals': ['assertequals', 'Asserts that two variables are equal. ', [['lib/tests','completionlib_test.php',68]], 12471],
'create_module': ['create_module', 'Create a test activity module. ', [['lib/testing/generator','data_generator.php',481],['course','lib.php',3522]], 762],
'defined': ['defined', '', [], 4731],
'array_merge': ['array_merge', '', [], 2944]};
CLASS_DATA={
'mod_forum_output_email_testcase': ['mod_forum_output_email_testcase', 'Tests for the forum output/email class. ', [['mod/forum/tests','output_email_test.php',27]], 0],
'core_date': ['core_date', 'Core date and time related code. ', [['lib/classes','date.php',26]], 192]};
CONST_DATA={
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153],
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1384]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
