<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /mod/forum/externallib.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='mod/forum';
filename='externallib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/mod/forum/</a> -> <a href="externallib.php.html">externallib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="externallib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="externallib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">//</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">//</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">//</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment">/**</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * External forum API</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> *</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @package    mod_forum</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @copyright  2012 Mark Nelson &lt;markn@moodle.com&gt;</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> */</span>
<a name="l25"><span class="linenum">  25</span></a>  
<a name="l26"><span class="linenum">  26</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die;
<a name="l27"><span class="linenum">  27</span></a>  
<a name="l28"><span class="linenum">  28</span></a>  require_once(&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>/externallib.php&quot;);
<a name="l29"><span class="linenum">  29</span></a>  
<a name="l30"><span class="linenum">  30</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('mod_forum_external')" href="../../_classes/mod_forum_external.html" onMouseOver="classPopup(event,'mod_forum_external')">mod_forum_external</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('external_api')" href="../../_classes/external_api.html" onMouseOver="classPopup(event,'external_api')">external_api</a> {
<a name="l31"><span class="linenum">  31</span></a>  
<a name="l32"><span class="linenum">  32</span></a>      <span class="comment">/**</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment">     * Describes the parameters for get_forum.</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment">     *</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment">     * @return external_external_function_parameters</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment">     * @since Moodle 2.5</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment">     */</span>
<a name="l38"><span class="linenum">  38</span></a>      public static function <a class="function" onClick="logFunction('get_forums_by_courses_parameters')" href="../../_functions/get_forums_by_courses_parameters.html" onMouseOver="funcPopup(event,'get_forums_by_courses_parameters')">get_forums_by_courses_parameters</a>() {
<a name="l39"><span class="linenum">  39</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_function_parameters')" href="../../_classes/external_function_parameters.html" onMouseOver="classPopup(event,'external_function_parameters')">external_function_parameters</a> (
<a name="l40"><span class="linenum">  40</span></a>              array(
<a name="l41"><span class="linenum">  41</span></a>                  'courseids' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_multiple_structure')" href="../../_classes/external_multiple_structure.html" onMouseOver="classPopup(event,'external_multiple_structure')">external_multiple_structure</a>(<span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'course ID',
<a name="l42"><span class="linenum">  42</span></a>                          <a class="constant" onClick="logConstant('VALUE_REQUIRED')" href="../../_constants/VALUE_REQUIRED.html" onMouseOver="constPopup(event,'VALUE_REQUIRED')">VALUE_REQUIRED</a>, '', <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>), 'Array of Course IDs', <a class="constant" onClick="logConstant('VALUE_DEFAULT')" href="../../_constants/VALUE_DEFAULT.html" onMouseOver="constPopup(event,'VALUE_DEFAULT')">VALUE_DEFAULT</a>, array()),
<a name="l43"><span class="linenum">  43</span></a>              )
<a name="l44"><span class="linenum">  44</span></a>          );
<a name="l45"><span class="linenum">  45</span></a>      }
<a name="l46"><span class="linenum">  46</span></a>  
<a name="l47"><span class="linenum">  47</span></a>      <span class="comment">/**</span>
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment">     * Returns a list of forums in a provided list of courses,</span>
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment">     * if no list is provided all forums that the user can view</span>
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment">     * will be returned.</span>
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment">     *</span>
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment">     * @param array $courseids the course ids</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment">     * @return array the forum details</span>
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment">     * @since Moodle 2.5</span>
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment">     */</span>
<a name="l56"><span class="linenum">  56</span></a>      public static function <a class="function" onClick="logFunction('get_forums_by_courses')" href="../../_functions/get_forums_by_courses.html" onMouseOver="funcPopup(event,'get_forums_by_courses')">get_forums_by_courses</a>(<a class="var it2413" onMouseOver="hilite(2413)" onMouseOut="lolite()" onClick="logVariable('courseids')" href="../../_variables/courseids.html">$courseids</a> = array()) {
<a name="l57"><span class="linenum">  57</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l58"><span class="linenum">  58</span></a>  
<a name="l59"><span class="linenum">  59</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . "<a class="filename" href="../../mod/forum/lib.php.html">/mod/forum/lib.php</a>");
<a name="l60"><span class="linenum">  60</span></a>  
<a name="l61"><span class="linenum">  61</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = self::<a class="function" onClick="logFunction('validate_parameters')" href="../../_functions/validate_parameters.html" onMouseOver="funcPopup(event,'validate_parameters')">validate_parameters</a>(self::<a class="function" onClick="logFunction('get_forums_by_courses_parameters')" href="../../_functions/get_forums_by_courses_parameters.html" onMouseOver="funcPopup(event,'get_forums_by_courses_parameters')">get_forums_by_courses_parameters</a>(), array('courseids' =&gt; <a class="var it2413" onMouseOver="hilite(2413)" onMouseOut="lolite()" onClick="logVariable('courseids')" href="../../_variables/courseids.html">$courseids</a>));
<a name="l62"><span class="linenum">  62</span></a>  
<a name="l63"><span class="linenum">  63</span></a>          <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a> = array();
<a name="l64"><span class="linenum">  64</span></a>          if (empty(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['courseids'])) {
<a name="l65"><span class="linenum">  65</span></a>              <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a> = <a class="function" onClick="logFunction('enrol_get_my_courses')" href="../../_functions/enrol_get_my_courses.html" onMouseOver="funcPopup(event,'enrol_get_my_courses')">enrol_get_my_courses</a>();
<a name="l66"><span class="linenum">  66</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['courseids'] = <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>);
<a name="l67"><span class="linenum">  67</span></a>          }
<a name="l68"><span class="linenum">  68</span></a>  
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment">        // Array to store the forums to return.</span>
<a name="l70"><span class="linenum">  70</span></a>          <a class="var it30664" onMouseOver="hilite(30664)" onMouseOut="lolite()" onClick="logVariable('arrforums')" href="../../_variables/arrforums.html">$arrforums</a> = array();
<a name="l71"><span class="linenum">  71</span></a>          <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../_variables/warnings.html">$warnings</a> = array();
<a name="l72"><span class="linenum">  72</span></a>  
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment">        // Ensure there are courseids to loop through.</span>
<a name="l74"><span class="linenum">  74</span></a>          if (!empty(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['courseids'])) {
<a name="l75"><span class="linenum">  75</span></a>  
<a name="l76"><span class="linenum">  76</span></a>              <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>, <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../_variables/warnings.html">$warnings</a>) = <a class="class" onClick="logClass('external_util')" href="../../_classes/external_util.html" onMouseOver="classPopup(event,'external_util')">external_util</a>::<a class="function" onClick="logFunction('validate_courses')" href="../../_functions/validate_courses.html" onMouseOver="funcPopup(event,'validate_courses')">validate_courses</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['courseids'], <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>);
<a name="l77"><span class="linenum">  77</span></a>  
<a name="l78"><span class="linenum">  78</span></a>  <span class="comment">            // Get the forums in this course. This function checks users visibility permissions.</span>
<a name="l79"><span class="linenum">  79</span></a>              <a class="var it3262" onMouseOver="hilite(3262)" onMouseOut="lolite()" onClick="logVariable('forums')" href="../../_variables/forums.html">$forums</a> = <a class="function" onClick="logFunction('get_all_instances_in_courses')" href="../../_functions/get_all_instances_in_courses.html" onMouseOver="funcPopup(event,'get_all_instances_in_courses')">get_all_instances_in_courses</a>(&quot;forum&quot;, <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>);
<a name="l80"><span class="linenum">  80</span></a>              foreach (<a class="var it3262" onMouseOver="hilite(3262)" onMouseOut="lolite()" onClick="logVariable('forums')" href="../../_variables/forums.html">$forums</a> as <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>) {
<a name="l81"><span class="linenum">  81</span></a>  
<a name="l82"><span class="linenum">  82</span></a>                  <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('course')" class="var it43075" onMouseOver="hilite(43075)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>];
<a name="l83"><span class="linenum">  83</span></a>                  <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('forum', <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('id')" class="var it43075" onMouseOver="hilite(43075)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l84"><span class="linenum">  84</span></a>                  <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l85"><span class="linenum">  85</span></a>  
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment">                // Skip forums we are not allowed to see discussions.</span>
<a name="l87"><span class="linenum">  87</span></a>                  if (!<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/forum:viewdiscussion', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l88"><span class="linenum">  88</span></a>                      continue;
<a name="l89"><span class="linenum">  89</span></a>                  }
<a name="l90"><span class="linenum">  90</span></a>  
<a name="l91"><span class="linenum">  91</span></a>                  <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('name')" class="var it43075" onMouseOver="hilite(43075)" onMouseOut="lolite()" href="../../_variables/name.html">name</a> = <a class="function" onClick="logFunction('external_format_string')" href="../../_functions/external_format_string.html" onMouseOver="funcPopup(event,'external_format_string')">external_format_string</a>(<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('name')" class="var it43075" onMouseOver="hilite(43075)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l92"><span class="linenum">  92</span></a>  <span class="comment">                // Format the intro before being returning using the format setting.</span>
<a name="l93"><span class="linenum">  93</span></a>                  <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('intro')" class="var it43075" onMouseOver="hilite(43075)" onMouseOut="lolite()" href="../../_variables/intro.html">intro</a>, <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('introformat')" class="var it43075" onMouseOver="hilite(43075)" onMouseOut="lolite()" href="../../_variables/introformat.html">introformat</a>) = <a class="function" onClick="logFunction('external_format_text')" href="../../_functions/external_format_text.html" onMouseOver="funcPopup(event,'external_format_text')">external_format_text</a>(<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('intro')" class="var it43075" onMouseOver="hilite(43075)" onMouseOut="lolite()" href="../../_variables/intro.html">intro</a>, <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('introformat')" class="var it43075" onMouseOver="hilite(43075)" onMouseOut="lolite()" href="../../_variables/introformat.html">introformat</a>,
<a name="l94"><span class="linenum">  94</span></a>                                                                                  <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_forum', 'intro', 0);
<a name="l95"><span class="linenum">  95</span></a>                  <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('introfiles')" class="var it43075" onMouseOver="hilite(43075)" onMouseOut="lolite()" href="../../_variables/introfiles.html">introfiles</a> = <a class="class" onClick="logClass('external_util')" href="../../_classes/external_util.html" onMouseOver="classPopup(event,'external_util')">external_util</a>::<a class="function" onClick="logFunction('get_area_files')" href="../../_functions/get_area_files.html" onMouseOver="funcPopup(event,'get_area_files')">get_area_files</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_forum', 'intro', false, false);
<a name="l96"><span class="linenum">  96</span></a>  <span class="comment">                // Discussions count. This function does static request cache.</span>
<a name="l97"><span class="linenum">  97</span></a>                  <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('numdiscussions')" class="var it43075" onMouseOver="hilite(43075)" onMouseOut="lolite()" href="../../_variables/numdiscussions.html">numdiscussions</a> = <a class="function" onClick="logFunction('forum_count_discussions')" href="../../_functions/forum_count_discussions.html" onMouseOver="funcPopup(event,'forum_count_discussions')">forum_count_discussions</a>(<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l98"><span class="linenum">  98</span></a>                  <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('cmid')" class="var it43075" onMouseOver="hilite(43075)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a> = <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it43075" onMouseOver="hilite(43075)" onMouseOut="lolite()" href="../../_variables/coursemodule.html">coursemodule</a>;
<a name="l99"><span class="linenum">  99</span></a>                  <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('cancreatediscussions')" class="var it43075" onMouseOver="hilite(43075)" onMouseOut="lolite()" href="../../_variables/cancreatediscussions.html">cancreatediscussions</a> = <a class="function" onClick="logFunction('forum_user_can_post_discussion')" href="../../_functions/forum_user_can_post_discussion.html" onMouseOver="funcPopup(event,'forum_user_can_post_discussion')">forum_user_can_post_discussion</a>(<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>, null, -1, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l100"><span class="linenum"> 100</span></a>  
<a name="l101"><span class="linenum"> 101</span></a>  <span class="comment">                // Add the forum to the array to return.</span>
<a name="l102"><span class="linenum"> 102</span></a>                  <a class="var it30664" onMouseOver="hilite(30664)" onMouseOut="lolite()" onClick="logVariable('arrforums')" href="../../_variables/arrforums.html">$arrforums</a>[<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('id')" class="var it43075" onMouseOver="hilite(43075)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>;
<a name="l103"><span class="linenum"> 103</span></a>              }
<a name="l104"><span class="linenum"> 104</span></a>          }
<a name="l105"><span class="linenum"> 105</span></a>  
<a name="l106"><span class="linenum"> 106</span></a>          return <a class="var it30664" onMouseOver="hilite(30664)" onMouseOut="lolite()" onClick="logVariable('arrforums')" href="../../_variables/arrforums.html">$arrforums</a>;
<a name="l107"><span class="linenum"> 107</span></a>      }
<a name="l108"><span class="linenum"> 108</span></a>  
<a name="l109"><span class="linenum"> 109</span></a>      <span class="comment">/**</span>
<a name="l110"><span class="linenum"> 110</span></a>  <span class="comment">     * Describes the get_forum return value.</span>
<a name="l111"><span class="linenum"> 111</span></a>  <span class="comment">     *</span>
<a name="l112"><span class="linenum"> 112</span></a>  <span class="comment">     * @return external_single_structure</span>
<a name="l113"><span class="linenum"> 113</span></a>  <span class="comment">     * @since Moodle 2.5</span>
<a name="l114"><span class="linenum"> 114</span></a>  <span class="comment">     */</span>
<a name="l115"><span class="linenum"> 115</span></a>       public static function <a class="function" onClick="logFunction('get_forums_by_courses_returns')" href="../../_functions/get_forums_by_courses_returns.html" onMouseOver="funcPopup(event,'get_forums_by_courses_returns')">get_forums_by_courses_returns</a>() {
<a name="l116"><span class="linenum"> 116</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_multiple_structure')" href="../../_classes/external_multiple_structure.html" onMouseOver="classPopup(event,'external_multiple_structure')">external_multiple_structure</a>(
<a name="l117"><span class="linenum"> 117</span></a>              <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l118"><span class="linenum"> 118</span></a>                  array(
<a name="l119"><span class="linenum"> 119</span></a>                      'id' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Forum id'),
<a name="l120"><span class="linenum"> 120</span></a>                      'course' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Course id'),
<a name="l121"><span class="linenum"> 121</span></a>                      'type' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'The forum type'),
<a name="l122"><span class="linenum"> 122</span></a>                      'name' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'Forum name'),
<a name="l123"><span class="linenum"> 123</span></a>                      'intro' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'The forum intro'),
<a name="l124"><span class="linenum"> 124</span></a>                      'introformat' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_format_value')" href="../../_classes/external_format_value.html" onMouseOver="classPopup(event,'external_format_value')">external_format_value</a>('intro'),
<a name="l125"><span class="linenum"> 125</span></a>                      'introfiles' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_files')" href="../../_classes/external_files.html" onMouseOver="classPopup(event,'external_files')">external_files</a>('Files in the introduction text', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l126"><span class="linenum"> 126</span></a>                      'assessed' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Aggregate type'),
<a name="l127"><span class="linenum"> 127</span></a>                      'assesstimestart' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Assess start time'),
<a name="l128"><span class="linenum"> 128</span></a>                      'assesstimefinish' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Assess finish time'),
<a name="l129"><span class="linenum"> 129</span></a>                      'scale' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Scale'),
<a name="l130"><span class="linenum"> 130</span></a>                      'maxbytes' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Maximum attachment size'),
<a name="l131"><span class="linenum"> 131</span></a>                      'maxattachments' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Maximum number of attachments'),
<a name="l132"><span class="linenum"> 132</span></a>                      'forcesubscribe' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Force users to subscribe'),
<a name="l133"><span class="linenum"> 133</span></a>                      'trackingtype' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Subscription mode'),
<a name="l134"><span class="linenum"> 134</span></a>                      'rsstype' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'RSS feed for this activity'),
<a name="l135"><span class="linenum"> 135</span></a>                      'rssarticles' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Number of RSS recent articles'),
<a name="l136"><span class="linenum"> 136</span></a>                      'timemodified' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Time modified'),
<a name="l137"><span class="linenum"> 137</span></a>                      'warnafter' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Post threshold for warning'),
<a name="l138"><span class="linenum"> 138</span></a>                      'blockafter' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Post threshold for blocking'),
<a name="l139"><span class="linenum"> 139</span></a>                      'blockperiod' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Time period for blocking'),
<a name="l140"><span class="linenum"> 140</span></a>                      'completiondiscussions' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Student must create discussions'),
<a name="l141"><span class="linenum"> 141</span></a>                      'completionreplies' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Student must post replies'),
<a name="l142"><span class="linenum"> 142</span></a>                      'completionposts' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Student must post discussions or replies'),
<a name="l143"><span class="linenum"> 143</span></a>                      'cmid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Course module id'),
<a name="l144"><span class="linenum"> 144</span></a>                      'numdiscussions' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Number of discussions in the forum', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l145"><span class="linenum"> 145</span></a>                      'cancreatediscussions' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_BOOL')" href="../../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>, 'If the user can create discussions', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l146"><span class="linenum"> 146</span></a>                  ), 'forum'
<a name="l147"><span class="linenum"> 147</span></a>              )
<a name="l148"><span class="linenum"> 148</span></a>          );
<a name="l149"><span class="linenum"> 149</span></a>      }
<a name="l150"><span class="linenum"> 150</span></a>  
<a name="l151"><span class="linenum"> 151</span></a>      <span class="comment">/**</span>
<a name="l152"><span class="linenum"> 152</span></a>  <span class="comment">     * Describes the parameters for get_forum_discussion_posts.</span>
<a name="l153"><span class="linenum"> 153</span></a>  <span class="comment">     *</span>
<a name="l154"><span class="linenum"> 154</span></a>  <span class="comment">     * @return external_external_function_parameters</span>
<a name="l155"><span class="linenum"> 155</span></a>  <span class="comment">     * @since Moodle 2.7</span>
<a name="l156"><span class="linenum"> 156</span></a>  <span class="comment">     */</span>
<a name="l157"><span class="linenum"> 157</span></a>      public static function <a class="function" onClick="logFunction('get_forum_discussion_posts_parameters')" href="../../_functions/get_forum_discussion_posts_parameters.html" onMouseOver="funcPopup(event,'get_forum_discussion_posts_parameters')">get_forum_discussion_posts_parameters</a>() {
<a name="l158"><span class="linenum"> 158</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_function_parameters')" href="../../_classes/external_function_parameters.html" onMouseOver="classPopup(event,'external_function_parameters')">external_function_parameters</a> (
<a name="l159"><span class="linenum"> 159</span></a>              array(
<a name="l160"><span class="linenum"> 160</span></a>                  'discussionid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'discussion ID', <a class="constant" onClick="logConstant('VALUE_REQUIRED')" href="../../_constants/VALUE_REQUIRED.html" onMouseOver="constPopup(event,'VALUE_REQUIRED')">VALUE_REQUIRED</a>),
<a name="l161"><span class="linenum"> 161</span></a>                  'sortby' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_ALPHA')" href="../../_constants/PARAM_ALPHA.html" onMouseOver="constPopup(event,'PARAM_ALPHA')">PARAM_ALPHA</a>,
<a name="l162"><span class="linenum"> 162</span></a>                      'sort by this element: id, created or modified', <a class="constant" onClick="logConstant('VALUE_DEFAULT')" href="../../_constants/VALUE_DEFAULT.html" onMouseOver="constPopup(event,'VALUE_DEFAULT')">VALUE_DEFAULT</a>, 'created'),
<a name="l163"><span class="linenum"> 163</span></a>                  'sortdirection' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_ALPHA')" href="../../_constants/PARAM_ALPHA.html" onMouseOver="constPopup(event,'PARAM_ALPHA')">PARAM_ALPHA</a>, 'sort direction: ASC or DESC', <a class="constant" onClick="logConstant('VALUE_DEFAULT')" href="../../_constants/VALUE_DEFAULT.html" onMouseOver="constPopup(event,'VALUE_DEFAULT')">VALUE_DEFAULT</a>, 'DESC')
<a name="l164"><span class="linenum"> 164</span></a>              )
<a name="l165"><span class="linenum"> 165</span></a>          );
<a name="l166"><span class="linenum"> 166</span></a>      }
<a name="l167"><span class="linenum"> 167</span></a>  
<a name="l168"><span class="linenum"> 168</span></a>      <span class="comment">/**</span>
<a name="l169"><span class="linenum"> 169</span></a>  <span class="comment">     * Returns a list of forum posts for a discussion</span>
<a name="l170"><span class="linenum"> 170</span></a>  <span class="comment">     *</span>
<a name="l171"><span class="linenum"> 171</span></a>  <span class="comment">     * @param int $discussionid the post ids</span>
<a name="l172"><span class="linenum"> 172</span></a>  <span class="comment">     * @param string $sortby sort by this element (id, created or modified)</span>
<a name="l173"><span class="linenum"> 173</span></a>  <span class="comment">     * @param string $sortdirection sort direction: ASC or DESC</span>
<a name="l174"><span class="linenum"> 174</span></a>  <span class="comment">     *</span>
<a name="l175"><span class="linenum"> 175</span></a>  <span class="comment">     * @return array the forum post details</span>
<a name="l176"><span class="linenum"> 176</span></a>  <span class="comment">     * @since Moodle 2.7</span>
<a name="l177"><span class="linenum"> 177</span></a>  <span class="comment">     */</span>
<a name="l178"><span class="linenum"> 178</span></a>      public static function <a class="function" onClick="logFunction('get_forum_discussion_posts')" href="../../_functions/get_forum_discussion_posts.html" onMouseOver="funcPopup(event,'get_forum_discussion_posts')">get_forum_discussion_posts</a>(<a class="var it16125" onMouseOver="hilite(16125)" onMouseOut="lolite()" onClick="logVariable('discussionid')" href="../../_variables/discussionid.html">$discussionid</a>, <a class="var it4879" onMouseOver="hilite(4879)" onMouseOut="lolite()" onClick="logVariable('sortby')" href="../../_variables/sortby.html">$sortby</a> = &quot;created&quot;, <a class="var it10672" onMouseOver="hilite(10672)" onMouseOut="lolite()" onClick="logVariable('sortdirection')" href="../../_variables/sortdirection.html">$sortdirection</a> = &quot;DESC&quot;) {
<a name="l179"><span class="linenum"> 179</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>;
<a name="l180"><span class="linenum"> 180</span></a>  
<a name="l181"><span class="linenum"> 181</span></a>          <a class="var it4236" onMouseOver="hilite(4236)" onMouseOut="lolite()" onClick="logVariable('posts')" href="../../_variables/posts.html">$posts</a> = array();
<a name="l182"><span class="linenum"> 182</span></a>          <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../_variables/warnings.html">$warnings</a> = array();
<a name="l183"><span class="linenum"> 183</span></a>  
<a name="l184"><span class="linenum"> 184</span></a>  <span class="comment">        // Validate the parameter.</span>
<a name="l185"><span class="linenum"> 185</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = self::<a class="function" onClick="logFunction('validate_parameters')" href="../../_functions/validate_parameters.html" onMouseOver="funcPopup(event,'validate_parameters')">validate_parameters</a>(self::<a class="function" onClick="logFunction('get_forum_discussion_posts_parameters')" href="../../_functions/get_forum_discussion_posts_parameters.html" onMouseOver="funcPopup(event,'get_forum_discussion_posts_parameters')">get_forum_discussion_posts_parameters</a>(),
<a name="l186"><span class="linenum"> 186</span></a>              array(
<a name="l187"><span class="linenum"> 187</span></a>                  'discussionid' =&gt; <a class="var it16125" onMouseOver="hilite(16125)" onMouseOut="lolite()" onClick="logVariable('discussionid')" href="../../_variables/discussionid.html">$discussionid</a>,
<a name="l188"><span class="linenum"> 188</span></a>                  'sortby' =&gt; <a class="var it4879" onMouseOver="hilite(4879)" onMouseOut="lolite()" onClick="logVariable('sortby')" href="../../_variables/sortby.html">$sortby</a>,
<a name="l189"><span class="linenum"> 189</span></a>                  'sortdirection' =&gt; <a class="var it10672" onMouseOver="hilite(10672)" onMouseOut="lolite()" onClick="logVariable('sortdirection')" href="../../_variables/sortdirection.html">$sortdirection</a>));
<a name="l190"><span class="linenum"> 190</span></a>  
<a name="l191"><span class="linenum"> 191</span></a>  <span class="comment">        // Compact/extract functions are not recommended.</span>
<a name="l192"><span class="linenum"> 192</span></a>          <a class="var it16125" onMouseOver="hilite(16125)" onMouseOut="lolite()" onClick="logVariable('discussionid')" href="../../_variables/discussionid.html">$discussionid</a>   = <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['discussionid'];
<a name="l193"><span class="linenum"> 193</span></a>          <a class="var it4879" onMouseOver="hilite(4879)" onMouseOut="lolite()" onClick="logVariable('sortby')" href="../../_variables/sortby.html">$sortby</a>         = <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['sortby'];
<a name="l194"><span class="linenum"> 194</span></a>          <a class="var it10672" onMouseOver="hilite(10672)" onMouseOut="lolite()" onClick="logVariable('sortdirection')" href="../../_variables/sortdirection.html">$sortdirection</a>  = <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['sortdirection'];
<a name="l195"><span class="linenum"> 195</span></a>  
<a name="l196"><span class="linenum"> 196</span></a>          <a class="var it30182" onMouseOver="hilite(30182)" onMouseOut="lolite()" onClick="logVariable('sortallowedvalues')" href="../../_variables/sortallowedvalues.html">$sortallowedvalues</a> = array('id', 'created', 'modified');
<a name="l197"><span class="linenum"> 197</span></a>          if (!<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it4879" onMouseOver="hilite(4879)" onMouseOut="lolite()" onClick="logVariable('sortby')" href="../../_variables/sortby.html">$sortby</a>, <a class="var it30182" onMouseOver="hilite(30182)" onMouseOut="lolite()" onClick="logVariable('sortallowedvalues')" href="../../_variables/sortallowedvalues.html">$sortallowedvalues</a>)) {
<a name="l198"><span class="linenum"> 198</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('invalid_parameter_exception')" href="../../_classes/invalid_parameter_exception.html" onMouseOver="classPopup(event,'invalid_parameter_exception')">invalid_parameter_exception</a>('Invalid value for sortby <a class="function" onClick="logFunction('parameter')" href="../../_functions/parameter.html" onMouseOver="funcPopup(event,'parameter')">parameter</a> (value: ' . <a class="var it4879" onMouseOver="hilite(4879)" onMouseOut="lolite()" onClick="logVariable('sortby')" href="../../_variables/sortby.html">$sortby</a> . '),' .
<a name="l199"><span class="linenum"> 199</span></a>                  'allowed values are: ' . <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(',', <a class="var it30182" onMouseOver="hilite(30182)" onMouseOut="lolite()" onClick="logVariable('sortallowedvalues')" href="../../_variables/sortallowedvalues.html">$sortallowedvalues</a>));
<a name="l200"><span class="linenum"> 200</span></a>          }
<a name="l201"><span class="linenum"> 201</span></a>  
<a name="l202"><span class="linenum"> 202</span></a>          <a class="var it10672" onMouseOver="hilite(10672)" onMouseOut="lolite()" onClick="logVariable('sortdirection')" href="../../_variables/sortdirection.html">$sortdirection</a> = <a class="phpfunction" onClick="logFunction('strtoupper')" href="../../_functions/strtoupper.html" onMouseOver="phpfuncPopup(event,'strtoupper')">strtoupper</a>(<a class="var it10672" onMouseOver="hilite(10672)" onMouseOut="lolite()" onClick="logVariable('sortdirection')" href="../../_variables/sortdirection.html">$sortdirection</a>);
<a name="l203"><span class="linenum"> 203</span></a>          <a class="var it30183" onMouseOver="hilite(30183)" onMouseOut="lolite()" onClick="logVariable('directionallowedvalues')" href="../../_variables/directionallowedvalues.html">$directionallowedvalues</a> = array('ASC', 'DESC');
<a name="l204"><span class="linenum"> 204</span></a>          if (!<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it10672" onMouseOver="hilite(10672)" onMouseOut="lolite()" onClick="logVariable('sortdirection')" href="../../_variables/sortdirection.html">$sortdirection</a>, <a class="var it30183" onMouseOver="hilite(30183)" onMouseOut="lolite()" onClick="logVariable('directionallowedvalues')" href="../../_variables/directionallowedvalues.html">$directionallowedvalues</a>)) {
<a name="l205"><span class="linenum"> 205</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('invalid_parameter_exception')" href="../../_classes/invalid_parameter_exception.html" onMouseOver="classPopup(event,'invalid_parameter_exception')">invalid_parameter_exception</a>('Invalid value for sortdirection <a class="function" onClick="logFunction('parameter')" href="../../_functions/parameter.html" onMouseOver="funcPopup(event,'parameter')">parameter</a> (value: ' . <a class="var it10672" onMouseOver="hilite(10672)" onMouseOut="lolite()" onClick="logVariable('sortdirection')" href="../../_variables/sortdirection.html">$sortdirection</a> . '),' .
<a name="l206"><span class="linenum"> 206</span></a>                  'allowed values are: ' . <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(',', <a class="var it30183" onMouseOver="hilite(30183)" onMouseOut="lolite()" onClick="logVariable('directionallowedvalues')" href="../../_variables/directionallowedvalues.html">$directionallowedvalues</a>));
<a name="l207"><span class="linenum"> 207</span></a>          }
<a name="l208"><span class="linenum"> 208</span></a>  
<a name="l209"><span class="linenum"> 209</span></a>          <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('forum_discussions', array('id' =&gt; <a class="var it16125" onMouseOver="hilite(16125)" onMouseOut="lolite()" onClick="logVariable('discussionid')" href="../../_variables/discussionid.html">$discussionid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l210"><span class="linenum"> 210</span></a>          <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('forum', array('id' =&gt; <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('forum')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/forum.html">forum</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l211"><span class="linenum"> 211</span></a>          <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id' =&gt; <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('course')" class="var it43075" onMouseOver="hilite(43075)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l212"><span class="linenum"> 212</span></a>          <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('forum', <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('id')" class="var it43075" onMouseOver="hilite(43075)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, false, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l213"><span class="linenum"> 213</span></a>  
<a name="l214"><span class="linenum"> 214</span></a>  <span class="comment">        // Validate the module context. It checks everything that affects the module visibility (including groupings, etc..).</span>
<a name="l215"><span class="linenum"> 215</span></a>          <a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l216"><span class="linenum"> 216</span></a>          self::<a class="function" onClick="logFunction('validate_context')" href="../../_functions/validate_context.html" onMouseOver="funcPopup(event,'validate_context')">validate_context</a>(<a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>);
<a name="l217"><span class="linenum"> 217</span></a>  
<a name="l218"><span class="linenum"> 218</span></a>  <span class="comment">        // This require must be here, see mod/forum/discuss.php.</span>
<a name="l219"><span class="linenum"> 219</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . "<a class="filename" href="../../mod/forum/lib.php.html">/mod/forum/lib.php</a>");
<a name="l220"><span class="linenum"> 220</span></a>  
<a name="l221"><span class="linenum"> 221</span></a>  <span class="comment">        // Check they have the view forum capability.</span>
<a name="l222"><span class="linenum"> 222</span></a>          <a class="function" onClick="logFunction('require_capability')" href="../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/forum:viewdiscussion', <a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>, null, true, 'noviewdiscussionspermission', 'forum');
<a name="l223"><span class="linenum"> 223</span></a>  
<a name="l224"><span class="linenum"> 224</span></a>          if (! <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a> = <a class="function" onClick="logFunction('forum_get_post_full')" href="../../_functions/forum_get_post_full.html" onMouseOver="funcPopup(event,'forum_get_post_full')">forum_get_post_full</a>(<a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('firstpost')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/firstpost.html">firstpost</a>)) {
<a name="l225"><span class="linenum"> 225</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('notexists', 'forum');
<a name="l226"><span class="linenum"> 226</span></a>          }
<a name="l227"><span class="linenum"> 227</span></a>  
<a name="l228"><span class="linenum"> 228</span></a>  <span class="comment">        // This function check groups, qanda, timed discussions, etc.</span>
<a name="l229"><span class="linenum"> 229</span></a>          if (!<a class="function" onClick="logFunction('forum_user_can_see_post')" href="../../_functions/forum_user_can_see_post.html" onMouseOver="funcPopup(event,'forum_user_can_see_post')">forum_user_can_see_post</a>(<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>, <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>, <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>, null, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>)) {
<a name="l230"><span class="linenum"> 230</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('noviewdiscussionspermission', 'forum');
<a name="l231"><span class="linenum"> 231</span></a>          }
<a name="l232"><span class="linenum"> 232</span></a>  
<a name="l233"><span class="linenum"> 233</span></a>          <a class="var it24836" onMouseOver="hilite(24836)" onMouseOut="lolite()" onClick="logVariable('canviewfullname')" href="../../_variables/canviewfullname.html">$canviewfullname</a> = <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:viewfullnames', <a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>);
<a name="l234"><span class="linenum"> 234</span></a>  
<a name="l235"><span class="linenum"> 235</span></a>  <span class="comment">        // We will add this field in the response.</span>
<a name="l236"><span class="linenum"> 236</span></a>          <a class="var it24379" onMouseOver="hilite(24379)" onMouseOut="lolite()" onClick="logVariable('canreply')" href="../../_variables/canreply.html">$canreply</a> = <a class="function" onClick="logFunction('forum_user_can_post')" href="../../_functions/forum_user_can_post.html" onMouseOver="funcPopup(event,'forum_user_can_post')">forum_user_can_post</a>(<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>, <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>);
<a name="l237"><span class="linenum"> 237</span></a>  
<a name="l238"><span class="linenum"> 238</span></a>          <a class="var it30666" onMouseOver="hilite(30666)" onMouseOut="lolite()" onClick="logVariable('forumtracked')" href="../../_variables/forumtracked.html">$forumtracked</a> = <a class="function" onClick="logFunction('forum_tp_is_tracked')" href="../../_functions/forum_tp_is_tracked.html" onMouseOver="funcPopup(event,'forum_tp_is_tracked')">forum_tp_is_tracked</a>(<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>);
<a name="l239"><span class="linenum"> 239</span></a>  
<a name="l240"><span class="linenum"> 240</span></a>          <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a> = 'p.' . <a class="var it4879" onMouseOver="hilite(4879)" onMouseOut="lolite()" onClick="logVariable('sortby')" href="../../_variables/sortby.html">$sortby</a> . ' ' . <a class="var it10672" onMouseOver="hilite(10672)" onMouseOut="lolite()" onClick="logVariable('sortdirection')" href="../../_variables/sortdirection.html">$sortdirection</a>;
<a name="l241"><span class="linenum"> 241</span></a>          <a class="var it30667" onMouseOver="hilite(30667)" onMouseOut="lolite()" onClick="logVariable('allposts')" href="../../_variables/allposts.html">$allposts</a> = <a class="function" onClick="logFunction('forum_get_all_discussion_posts')" href="../../_functions/forum_get_all_discussion_posts.html" onMouseOver="funcPopup(event,'forum_get_all_discussion_posts')">forum_get_all_discussion_posts</a>(<a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('id')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>, <a class="var it30666" onMouseOver="hilite(30666)" onMouseOut="lolite()" onClick="logVariable('forumtracked')" href="../../_variables/forumtracked.html">$forumtracked</a>);
<a name="l242"><span class="linenum"> 242</span></a>  
<a name="l243"><span class="linenum"> 243</span></a>          foreach (<a class="var it30667" onMouseOver="hilite(30667)" onMouseOut="lolite()" onClick="logVariable('allposts')" href="../../_variables/allposts.html">$allposts</a> as <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>) {
<a name="l244"><span class="linenum"> 244</span></a>  
<a name="l245"><span class="linenum"> 245</span></a>              if (!<a class="function" onClick="logFunction('forum_user_can_see_post')" href="../../_functions/forum_user_can_see_post.html" onMouseOver="funcPopup(event,'forum_user_can_see_post')">forum_user_can_see_post</a>(<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>, <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>, <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>, null, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>)) {
<a name="l246"><span class="linenum"> 246</span></a>                  <a class="var it3502" onMouseOver="hilite(3502)" onMouseOut="lolite()" onClick="logVariable('warning')" href="../../_variables/warning.html">$warning</a> = array();
<a name="l247"><span class="linenum"> 247</span></a>                  <a class="var it3502" onMouseOver="hilite(3502)" onMouseOut="lolite()" onClick="logVariable('warning')" href="../../_variables/warning.html">$warning</a>['item'] = 'post';
<a name="l248"><span class="linenum"> 248</span></a>                  <a class="var it3502" onMouseOver="hilite(3502)" onMouseOut="lolite()" onClick="logVariable('warning')" href="../../_variables/warning.html">$warning</a>['itemid'] = <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('id')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l249"><span class="linenum"> 249</span></a>                  <a class="var it3502" onMouseOver="hilite(3502)" onMouseOut="lolite()" onClick="logVariable('warning')" href="../../_variables/warning.html">$warning</a>['warningcode'] = '1';
<a name="l250"><span class="linenum"> 250</span></a>                  <a class="var it3502" onMouseOver="hilite(3502)" onMouseOut="lolite()" onClick="logVariable('warning')" href="../../_variables/warning.html">$warning</a>['message'] = 'You can\'t see this post';
<a name="l251"><span class="linenum"> 251</span></a>                  <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../_variables/warnings.html">$warnings</a>[] = <a class="var it3502" onMouseOver="hilite(3502)" onMouseOut="lolite()" onClick="logVariable('warning')" href="../../_variables/warning.html">$warning</a>;
<a name="l252"><span class="linenum"> 252</span></a>                  continue;
<a name="l253"><span class="linenum"> 253</span></a>              }
<a name="l254"><span class="linenum"> 254</span></a>  
<a name="l255"><span class="linenum"> 255</span></a>  <span class="comment">            // Function forum_get_all_discussion_posts adds postread field.</span>
<a name="l256"><span class="linenum"> 256</span></a>  <span class="comment">            // Note that the value returned can be a boolean or an integer. The WS expects a boolean.</span>
<a name="l257"><span class="linenum"> 257</span></a>              if (empty(<a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('postread')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../_variables/postread.html">postread</a>)) {
<a name="l258"><span class="linenum"> 258</span></a>                  <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('postread')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../_variables/postread.html">postread</a> = false;
<a name="l259"><span class="linenum"> 259</span></a>              } else {
<a name="l260"><span class="linenum"> 260</span></a>                  <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('postread')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../_variables/postread.html">postread</a> = true;
<a name="l261"><span class="linenum"> 261</span></a>              }
<a name="l262"><span class="linenum"> 262</span></a>  
<a name="l263"><span class="linenum"> 263</span></a>              <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('canreply')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../_variables/canreply.html">canreply</a> = <a class="var it24379" onMouseOver="hilite(24379)" onMouseOut="lolite()" onClick="logVariable('canreply')" href="../../_variables/canreply.html">$canreply</a>;
<a name="l264"><span class="linenum"> 264</span></a>              if (!empty(<a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('children')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../_variables/children.html">children</a>)) {
<a name="l265"><span class="linenum"> 265</span></a>                  <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('children')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../_variables/children.html">children</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('children')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../_variables/children.html">children</a>);
<a name="l266"><span class="linenum"> 266</span></a>              } else {
<a name="l267"><span class="linenum"> 267</span></a>                  <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('children')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../_variables/children.html">children</a> = array();
<a name="l268"><span class="linenum"> 268</span></a>              }
<a name="l269"><span class="linenum"> 269</span></a>  
<a name="l270"><span class="linenum"> 270</span></a>              <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = new stdclass();
<a name="l271"><span class="linenum"> 271</span></a>              <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('userid')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>;
<a name="l272"><span class="linenum"> 272</span></a>              <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="function" onClick="logFunction('username_load_fields_from_object')" href="../../_functions/username_load_fields_from_object.html" onMouseOver="funcPopup(event,'username_load_fields_from_object')">username_load_fields_from_object</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>, null, array('picture', 'imagealt', 'email'));
<a name="l273"><span class="linenum"> 273</span></a>              <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('userfullname')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../_variables/userfullname.html">userfullname</a> = <a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it24836" onMouseOver="hilite(24836)" onMouseOut="lolite()" onClick="logVariable('canviewfullname')" href="../../_variables/canviewfullname.html">$canviewfullname</a>);
<a name="l274"><span class="linenum"> 274</span></a>  
<a name="l275"><span class="linenum"> 275</span></a>              <a class="var it7923" onMouseOver="hilite(7923)" onMouseOut="lolite()" onClick="logVariable('userpicture')" href="../../_variables/userpicture.html">$userpicture</a> = <span class="keyword">new </span><a class="class" onClick="logClass('user_picture')" href="../../_classes/user_picture.html" onMouseOver="classPopup(event,'user_picture')">user_picture</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>);
<a name="l276"><span class="linenum"> 276</span></a>              <a class="var it7923" onMouseOver="hilite(7923)" onMouseOut="lolite()" onClick="logVariable('userpicture')" href="../../_variables/userpicture.html">$userpicture</a>-&gt;<a onClick="logVariable('size')" class="var it42996" onMouseOver="hilite(42996)" onMouseOut="lolite()" href="../../_variables/size.html">size</a> = 1; <span class="comment">// Size f1.</span>
<a name="l277"><span class="linenum"> 277</span></a>              <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('userpictureurl')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../_variables/userpictureurl.html">userpictureurl</a> = <a class="var it7923" onMouseOver="hilite(7923)" onMouseOut="lolite()" onClick="logVariable('userpicture')" href="../../_variables/userpicture.html">$userpicture</a>-&gt;<a class="function" onClick="logFunction('get_url')" href="../../_functions/get_url.html" onMouseOver="funcPopup(event,'get_url')">get_url</a>(<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>)-&gt;<a class="function" onClick="logFunction('out')" href="../../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(false);
<a name="l278"><span class="linenum"> 278</span></a>  
<a name="l279"><span class="linenum"> 279</span></a>              <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('subject')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../_variables/subject.html">subject</a> = <a class="function" onClick="logFunction('external_format_string')" href="../../_functions/external_format_string.html" onMouseOver="funcPopup(event,'external_format_string')">external_format_string</a>(<a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('subject')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../_variables/subject.html">subject</a>, <a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>-&gt;<a onClick="logVariable('id')" class="var it43689" onMouseOver="hilite(43689)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l280"><span class="linenum"> 280</span></a>  <span class="comment">            // Rewrite embedded images URLs.</span>
<a name="l281"><span class="linenum"> 281</span></a>              <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('message')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../_variables/message.html">message</a>, <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('messageformat')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../_variables/messageformat.html">messageformat</a>) =
<a name="l282"><span class="linenum"> 282</span></a>                  <a class="function" onClick="logFunction('external_format_text')" href="../../_functions/external_format_text.html" onMouseOver="funcPopup(event,'external_format_text')">external_format_text</a>(<a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('message')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../_variables/message.html">message</a>, <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('messageformat')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../_variables/messageformat.html">messageformat</a>, <a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>-&gt;<a onClick="logVariable('id')" class="var it43689" onMouseOver="hilite(43689)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_forum', 'post', <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('id')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l283"><span class="linenum"> 283</span></a>  
<a name="l284"><span class="linenum"> 284</span></a>  <span class="comment">            // List attachments.</span>
<a name="l285"><span class="linenum"> 285</span></a>              if (!empty(<a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('attachment')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../_variables/attachment.html">attachment</a>)) {
<a name="l286"><span class="linenum"> 286</span></a>                  <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('attachments')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../_variables/attachments.html">attachments</a> = <a class="class" onClick="logClass('external_util')" href="../../_classes/external_util.html" onMouseOver="classPopup(event,'external_util')">external_util</a>::<a class="function" onClick="logFunction('get_area_files')" href="../../_functions/get_area_files.html" onMouseOver="funcPopup(event,'get_area_files')">get_area_files</a>(<a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>-&gt;<a onClick="logVariable('id')" class="var it43689" onMouseOver="hilite(43689)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_forum', 'attachment', <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('id')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l287"><span class="linenum"> 287</span></a>              }
<a name="l288"><span class="linenum"> 288</span></a>  
<a name="l289"><span class="linenum"> 289</span></a>              <a class="var it4236" onMouseOver="hilite(4236)" onMouseOut="lolite()" onClick="logVariable('posts')" href="../../_variables/posts.html">$posts</a>[] = <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>;
<a name="l290"><span class="linenum"> 290</span></a>          }
<a name="l291"><span class="linenum"> 291</span></a>  
<a name="l292"><span class="linenum"> 292</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = array();
<a name="l293"><span class="linenum"> 293</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>['posts'] = <a class="var it4236" onMouseOver="hilite(4236)" onMouseOut="lolite()" onClick="logVariable('posts')" href="../../_variables/posts.html">$posts</a>;
<a name="l294"><span class="linenum"> 294</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>['warnings'] = <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../_variables/warnings.html">$warnings</a>;
<a name="l295"><span class="linenum"> 295</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l296"><span class="linenum"> 296</span></a>      }
<a name="l297"><span class="linenum"> 297</span></a>  
<a name="l298"><span class="linenum"> 298</span></a>      <span class="comment">/**</span>
<a name="l299"><span class="linenum"> 299</span></a>  <span class="comment">     * Describes the get_forum_discussion_posts return value.</span>
<a name="l300"><span class="linenum"> 300</span></a>  <span class="comment">     *</span>
<a name="l301"><span class="linenum"> 301</span></a>  <span class="comment">     * @return external_single_structure</span>
<a name="l302"><span class="linenum"> 302</span></a>  <span class="comment">     * @since Moodle 2.7</span>
<a name="l303"><span class="linenum"> 303</span></a>  <span class="comment">     */</span>
<a name="l304"><span class="linenum"> 304</span></a>      public static function <a class="function" onClick="logFunction('get_forum_discussion_posts_returns')" href="../../_functions/get_forum_discussion_posts_returns.html" onMouseOver="funcPopup(event,'get_forum_discussion_posts_returns')">get_forum_discussion_posts_returns</a>() {
<a name="l305"><span class="linenum"> 305</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l306"><span class="linenum"> 306</span></a>              array(
<a name="l307"><span class="linenum"> 307</span></a>                  'posts' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_multiple_structure')" href="../../_classes/external_multiple_structure.html" onMouseOver="classPopup(event,'external_multiple_structure')">external_multiple_structure</a>(
<a name="l308"><span class="linenum"> 308</span></a>                          <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l309"><span class="linenum"> 309</span></a>                              array(
<a name="l310"><span class="linenum"> 310</span></a>                                  'id' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Post id'),
<a name="l311"><span class="linenum"> 311</span></a>                                  'discussion' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Discussion id'),
<a name="l312"><span class="linenum"> 312</span></a>                                  'parent' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Parent id'),
<a name="l313"><span class="linenum"> 313</span></a>                                  'userid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'User id'),
<a name="l314"><span class="linenum"> 314</span></a>                                  'created' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Creation time'),
<a name="l315"><span class="linenum"> 315</span></a>                                  'modified' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Time modified'),
<a name="l316"><span class="linenum"> 316</span></a>                                  'mailed' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Mailed?'),
<a name="l317"><span class="linenum"> 317</span></a>                                  'subject' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'The post subject'),
<a name="l318"><span class="linenum"> 318</span></a>                                  'message' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'The post message'),
<a name="l319"><span class="linenum"> 319</span></a>                                  'messageformat' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_format_value')" href="../../_classes/external_format_value.html" onMouseOver="classPopup(event,'external_format_value')">external_format_value</a>('message'),
<a name="l320"><span class="linenum"> 320</span></a>                                  'messagetrust' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Can we trust?'),
<a name="l321"><span class="linenum"> 321</span></a>                                  'attachment' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'Has attachments?'),
<a name="l322"><span class="linenum"> 322</span></a>                                  'attachments' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_files')" href="../../_classes/external_files.html" onMouseOver="classPopup(event,'external_files')">external_files</a>('attachments', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l323"><span class="linenum"> 323</span></a>                                  'totalscore' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'The post message total score'),
<a name="l324"><span class="linenum"> 324</span></a>                                  'mailnow' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Mail now?'),
<a name="l325"><span class="linenum"> 325</span></a>                                  'children' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_multiple_structure')" href="../../_classes/external_multiple_structure.html" onMouseOver="classPopup(event,'external_multiple_structure')">external_multiple_structure</a>(<span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'children post id')),
<a name="l326"><span class="linenum"> 326</span></a>                                  'canreply' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_BOOL')" href="../../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>, 'The user can reply to posts?'),
<a name="l327"><span class="linenum"> 327</span></a>                                  'postread' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_BOOL')" href="../../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>, 'The post was read'),
<a name="l328"><span class="linenum"> 328</span></a>                                  'userfullname' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'Post author full name'),
<a name="l329"><span class="linenum"> 329</span></a>                                  'userpictureurl' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_URL')" href="../../_constants/PARAM_URL.html" onMouseOver="constPopup(event,'PARAM_URL')">PARAM_URL</a>, 'Post author picture.', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>)
<a name="l330"><span class="linenum"> 330</span></a>                              ), 'post'
<a name="l331"><span class="linenum"> 331</span></a>                          )
<a name="l332"><span class="linenum"> 332</span></a>                      ),
<a name="l333"><span class="linenum"> 333</span></a>                  'warnings' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_warnings')" href="../../_classes/external_warnings.html" onMouseOver="classPopup(event,'external_warnings')">external_warnings</a>()
<a name="l334"><span class="linenum"> 334</span></a>              )
<a name="l335"><span class="linenum"> 335</span></a>          );
<a name="l336"><span class="linenum"> 336</span></a>      }
<a name="l337"><span class="linenum"> 337</span></a>  
<a name="l338"><span class="linenum"> 338</span></a>      <span class="comment">/**</span>
<a name="l339"><span class="linenum"> 339</span></a>  <span class="comment">     * Describes the parameters for get_forum_discussions_paginated.</span>
<a name="l340"><span class="linenum"> 340</span></a>  <span class="comment">     *</span>
<a name="l341"><span class="linenum"> 341</span></a>  <span class="comment">     * @return external_external_function_parameters</span>
<a name="l342"><span class="linenum"> 342</span></a>  <span class="comment">     * @since Moodle 2.8</span>
<a name="l343"><span class="linenum"> 343</span></a>  <span class="comment">     */</span>
<a name="l344"><span class="linenum"> 344</span></a>      public static function <a class="function" onClick="logFunction('get_forum_discussions_paginated_parameters')" href="../../_functions/get_forum_discussions_paginated_parameters.html" onMouseOver="funcPopup(event,'get_forum_discussions_paginated_parameters')">get_forum_discussions_paginated_parameters</a>() {
<a name="l345"><span class="linenum"> 345</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_function_parameters')" href="../../_classes/external_function_parameters.html" onMouseOver="classPopup(event,'external_function_parameters')">external_function_parameters</a> (
<a name="l346"><span class="linenum"> 346</span></a>              array(
<a name="l347"><span class="linenum"> 347</span></a>                  'forumid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'forum instance id', <a class="constant" onClick="logConstant('VALUE_REQUIRED')" href="../../_constants/VALUE_REQUIRED.html" onMouseOver="constPopup(event,'VALUE_REQUIRED')">VALUE_REQUIRED</a>),
<a name="l348"><span class="linenum"> 348</span></a>                  'sortby' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_ALPHA')" href="../../_constants/PARAM_ALPHA.html" onMouseOver="constPopup(event,'PARAM_ALPHA')">PARAM_ALPHA</a>,
<a name="l349"><span class="linenum"> 349</span></a>                      'sort by this element: id, timemodified, timestart or timeend', <a class="constant" onClick="logConstant('VALUE_DEFAULT')" href="../../_constants/VALUE_DEFAULT.html" onMouseOver="constPopup(event,'VALUE_DEFAULT')">VALUE_DEFAULT</a>, 'timemodified'),
<a name="l350"><span class="linenum"> 350</span></a>                  'sortdirection' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_ALPHA')" href="../../_constants/PARAM_ALPHA.html" onMouseOver="constPopup(event,'PARAM_ALPHA')">PARAM_ALPHA</a>, 'sort direction: ASC or DESC', <a class="constant" onClick="logConstant('VALUE_DEFAULT')" href="../../_constants/VALUE_DEFAULT.html" onMouseOver="constPopup(event,'VALUE_DEFAULT')">VALUE_DEFAULT</a>, 'DESC'),
<a name="l351"><span class="linenum"> 351</span></a>                  'page' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'current page', <a class="constant" onClick="logConstant('VALUE_DEFAULT')" href="../../_constants/VALUE_DEFAULT.html" onMouseOver="constPopup(event,'VALUE_DEFAULT')">VALUE_DEFAULT</a>, -1),
<a name="l352"><span class="linenum"> 352</span></a>                  'perpage' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'items per page', <a class="constant" onClick="logConstant('VALUE_DEFAULT')" href="../../_constants/VALUE_DEFAULT.html" onMouseOver="constPopup(event,'VALUE_DEFAULT')">VALUE_DEFAULT</a>, 0),
<a name="l353"><span class="linenum"> 353</span></a>              )
<a name="l354"><span class="linenum"> 354</span></a>          );
<a name="l355"><span class="linenum"> 355</span></a>      }
<a name="l356"><span class="linenum"> 356</span></a>  
<a name="l357"><span class="linenum"> 357</span></a>      <span class="comment">/**</span>
<a name="l358"><span class="linenum"> 358</span></a>  <span class="comment">     * Returns a list of forum discussions optionally sorted and paginated.</span>
<a name="l359"><span class="linenum"> 359</span></a>  <span class="comment">     *</span>
<a name="l360"><span class="linenum"> 360</span></a>  <span class="comment">     * @param int $forumid the forum instance id</span>
<a name="l361"><span class="linenum"> 361</span></a>  <span class="comment">     * @param string $sortby sort by this element (id, timemodified, timestart or timeend)</span>
<a name="l362"><span class="linenum"> 362</span></a>  <span class="comment">     * @param string $sortdirection sort direction: ASC or DESC</span>
<a name="l363"><span class="linenum"> 363</span></a>  <span class="comment">     * @param int $page page number</span>
<a name="l364"><span class="linenum"> 364</span></a>  <span class="comment">     * @param int $perpage items per page</span>
<a name="l365"><span class="linenum"> 365</span></a>  <span class="comment">     *</span>
<a name="l366"><span class="linenum"> 366</span></a>  <span class="comment">     * @return array the forum discussion details including warnings</span>
<a name="l367"><span class="linenum"> 367</span></a>  <span class="comment">     * @since Moodle 2.8</span>
<a name="l368"><span class="linenum"> 368</span></a>  <span class="comment">     */</span>
<a name="l369"><span class="linenum"> 369</span></a>      public static function <a class="function" onClick="logFunction('get_forum_discussions_paginated')" href="../../_functions/get_forum_discussions_paginated.html" onMouseOver="funcPopup(event,'get_forum_discussions_paginated')">get_forum_discussions_paginated</a>(<a class="var it7863" onMouseOver="hilite(7863)" onMouseOut="lolite()" onClick="logVariable('forumid')" href="../../_variables/forumid.html">$forumid</a>, <a class="var it4879" onMouseOver="hilite(4879)" onMouseOut="lolite()" onClick="logVariable('sortby')" href="../../_variables/sortby.html">$sortby</a> = 'timemodified', <a class="var it10672" onMouseOver="hilite(10672)" onMouseOut="lolite()" onClick="logVariable('sortdirection')" href="../../_variables/sortdirection.html">$sortdirection</a> = 'DESC',
<a name="l370"><span class="linenum"> 370</span></a>                                                      <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = -1, <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../../_variables/perpage.html">$perpage</a> = 0) {
<a name="l371"><span class="linenum"> 371</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>;
<a name="l372"><span class="linenum"> 372</span></a>  
<a name="l373"><span class="linenum"> 373</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . "<a class="filename" href="../../mod/forum/lib.php.html">/mod/forum/lib.php</a>");
<a name="l374"><span class="linenum"> 374</span></a>  
<a name="l375"><span class="linenum"> 375</span></a>          <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../_variables/warnings.html">$warnings</a> = array();
<a name="l376"><span class="linenum"> 376</span></a>          <a class="var it4235" onMouseOver="hilite(4235)" onMouseOut="lolite()" onClick="logVariable('discussions')" href="../../_variables/discussions.html">$discussions</a> = array();
<a name="l377"><span class="linenum"> 377</span></a>  
<a name="l378"><span class="linenum"> 378</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = self::<a class="function" onClick="logFunction('validate_parameters')" href="../../_functions/validate_parameters.html" onMouseOver="funcPopup(event,'validate_parameters')">validate_parameters</a>(self::<a class="function" onClick="logFunction('get_forum_discussions_paginated_parameters')" href="../../_functions/get_forum_discussions_paginated_parameters.html" onMouseOver="funcPopup(event,'get_forum_discussions_paginated_parameters')">get_forum_discussions_paginated_parameters</a>(),
<a name="l379"><span class="linenum"> 379</span></a>              array(
<a name="l380"><span class="linenum"> 380</span></a>                  'forumid' =&gt; <a class="var it7863" onMouseOver="hilite(7863)" onMouseOut="lolite()" onClick="logVariable('forumid')" href="../../_variables/forumid.html">$forumid</a>,
<a name="l381"><span class="linenum"> 381</span></a>                  'sortby' =&gt; <a class="var it4879" onMouseOver="hilite(4879)" onMouseOut="lolite()" onClick="logVariable('sortby')" href="../../_variables/sortby.html">$sortby</a>,
<a name="l382"><span class="linenum"> 382</span></a>                  'sortdirection' =&gt; <a class="var it10672" onMouseOver="hilite(10672)" onMouseOut="lolite()" onClick="logVariable('sortdirection')" href="../../_variables/sortdirection.html">$sortdirection</a>,
<a name="l383"><span class="linenum"> 383</span></a>                  'page' =&gt; <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>,
<a name="l384"><span class="linenum"> 384</span></a>                  'perpage' =&gt; <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../../_variables/perpage.html">$perpage</a>
<a name="l385"><span class="linenum"> 385</span></a>              )
<a name="l386"><span class="linenum"> 386</span></a>          );
<a name="l387"><span class="linenum"> 387</span></a>  
<a name="l388"><span class="linenum"> 388</span></a>  <span class="comment">        // Compact/extract functions are not recommended.</span>
<a name="l389"><span class="linenum"> 389</span></a>          <a class="var it7863" onMouseOver="hilite(7863)" onMouseOut="lolite()" onClick="logVariable('forumid')" href="../../_variables/forumid.html">$forumid</a>        = <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['forumid'];
<a name="l390"><span class="linenum"> 390</span></a>          <a class="var it4879" onMouseOver="hilite(4879)" onMouseOut="lolite()" onClick="logVariable('sortby')" href="../../_variables/sortby.html">$sortby</a>         = <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['sortby'];
<a name="l391"><span class="linenum"> 391</span></a>          <a class="var it10672" onMouseOver="hilite(10672)" onMouseOut="lolite()" onClick="logVariable('sortdirection')" href="../../_variables/sortdirection.html">$sortdirection</a>  = <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['sortdirection'];
<a name="l392"><span class="linenum"> 392</span></a>          <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>           = <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['page'];
<a name="l393"><span class="linenum"> 393</span></a>          <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../../_variables/perpage.html">$perpage</a>        = <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['perpage'];
<a name="l394"><span class="linenum"> 394</span></a>  
<a name="l395"><span class="linenum"> 395</span></a>          <a class="var it30182" onMouseOver="hilite(30182)" onMouseOut="lolite()" onClick="logVariable('sortallowedvalues')" href="../../_variables/sortallowedvalues.html">$sortallowedvalues</a> = array('id', 'timemodified', 'timestart', 'timeend');
<a name="l396"><span class="linenum"> 396</span></a>          if (!<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it4879" onMouseOver="hilite(4879)" onMouseOut="lolite()" onClick="logVariable('sortby')" href="../../_variables/sortby.html">$sortby</a>, <a class="var it30182" onMouseOver="hilite(30182)" onMouseOut="lolite()" onClick="logVariable('sortallowedvalues')" href="../../_variables/sortallowedvalues.html">$sortallowedvalues</a>)) {
<a name="l397"><span class="linenum"> 397</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('invalid_parameter_exception')" href="../../_classes/invalid_parameter_exception.html" onMouseOver="classPopup(event,'invalid_parameter_exception')">invalid_parameter_exception</a>('Invalid value for sortby <a class="function" onClick="logFunction('parameter')" href="../../_functions/parameter.html" onMouseOver="funcPopup(event,'parameter')">parameter</a> (value: ' . <a class="var it4879" onMouseOver="hilite(4879)" onMouseOut="lolite()" onClick="logVariable('sortby')" href="../../_variables/sortby.html">$sortby</a> . '),' .
<a name="l398"><span class="linenum"> 398</span></a>                  'allowed values are: ' . <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(',', <a class="var it30182" onMouseOver="hilite(30182)" onMouseOut="lolite()" onClick="logVariable('sortallowedvalues')" href="../../_variables/sortallowedvalues.html">$sortallowedvalues</a>));
<a name="l399"><span class="linenum"> 399</span></a>          }
<a name="l400"><span class="linenum"> 400</span></a>  
<a name="l401"><span class="linenum"> 401</span></a>          <a class="var it10672" onMouseOver="hilite(10672)" onMouseOut="lolite()" onClick="logVariable('sortdirection')" href="../../_variables/sortdirection.html">$sortdirection</a> = <a class="phpfunction" onClick="logFunction('strtoupper')" href="../../_functions/strtoupper.html" onMouseOver="phpfuncPopup(event,'strtoupper')">strtoupper</a>(<a class="var it10672" onMouseOver="hilite(10672)" onMouseOut="lolite()" onClick="logVariable('sortdirection')" href="../../_variables/sortdirection.html">$sortdirection</a>);
<a name="l402"><span class="linenum"> 402</span></a>          <a class="var it30183" onMouseOver="hilite(30183)" onMouseOut="lolite()" onClick="logVariable('directionallowedvalues')" href="../../_variables/directionallowedvalues.html">$directionallowedvalues</a> = array('ASC', 'DESC');
<a name="l403"><span class="linenum"> 403</span></a>          if (!<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it10672" onMouseOver="hilite(10672)" onMouseOut="lolite()" onClick="logVariable('sortdirection')" href="../../_variables/sortdirection.html">$sortdirection</a>, <a class="var it30183" onMouseOver="hilite(30183)" onMouseOut="lolite()" onClick="logVariable('directionallowedvalues')" href="../../_variables/directionallowedvalues.html">$directionallowedvalues</a>)) {
<a name="l404"><span class="linenum"> 404</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('invalid_parameter_exception')" href="../../_classes/invalid_parameter_exception.html" onMouseOver="classPopup(event,'invalid_parameter_exception')">invalid_parameter_exception</a>('Invalid value for sortdirection <a class="function" onClick="logFunction('parameter')" href="../../_functions/parameter.html" onMouseOver="funcPopup(event,'parameter')">parameter</a> (value: ' . <a class="var it10672" onMouseOver="hilite(10672)" onMouseOut="lolite()" onClick="logVariable('sortdirection')" href="../../_variables/sortdirection.html">$sortdirection</a> . '),' .
<a name="l405"><span class="linenum"> 405</span></a>                  'allowed values are: ' . <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(',', <a class="var it30183" onMouseOver="hilite(30183)" onMouseOut="lolite()" onClick="logVariable('directionallowedvalues')" href="../../_variables/directionallowedvalues.html">$directionallowedvalues</a>));
<a name="l406"><span class="linenum"> 406</span></a>          }
<a name="l407"><span class="linenum"> 407</span></a>  
<a name="l408"><span class="linenum"> 408</span></a>          <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('forum', array('id' =&gt; <a class="var it7863" onMouseOver="hilite(7863)" onMouseOut="lolite()" onClick="logVariable('forumid')" href="../../_variables/forumid.html">$forumid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l409"><span class="linenum"> 409</span></a>          <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id' =&gt; <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('course')" class="var it43075" onMouseOver="hilite(43075)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l410"><span class="linenum"> 410</span></a>          <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('forum', <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('id')" class="var it43075" onMouseOver="hilite(43075)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, false, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l411"><span class="linenum"> 411</span></a>  
<a name="l412"><span class="linenum"> 412</span></a>  <span class="comment">        // Validate the module context. It checks everything that affects the module visibility (including groupings, etc..).</span>
<a name="l413"><span class="linenum"> 413</span></a>          <a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l414"><span class="linenum"> 414</span></a>          self::<a class="function" onClick="logFunction('validate_context')" href="../../_functions/validate_context.html" onMouseOver="funcPopup(event,'validate_context')">validate_context</a>(<a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>);
<a name="l415"><span class="linenum"> 415</span></a>  
<a name="l416"><span class="linenum"> 416</span></a>  <span class="comment">        // Check they have the view forum capability.</span>
<a name="l417"><span class="linenum"> 417</span></a>          <a class="function" onClick="logFunction('require_capability')" href="../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/forum:viewdiscussion', <a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>, null, true, 'noviewdiscussionspermission', 'forum');
<a name="l418"><span class="linenum"> 418</span></a>  
<a name="l419"><span class="linenum"> 419</span></a>          <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a> = 'd.pinned DESC, d.' . <a class="var it4879" onMouseOver="hilite(4879)" onMouseOut="lolite()" onClick="logVariable('sortby')" href="../../_variables/sortby.html">$sortby</a> . ' ' . <a class="var it10672" onMouseOver="hilite(10672)" onMouseOut="lolite()" onClick="logVariable('sortdirection')" href="../../_variables/sortdirection.html">$sortdirection</a>;
<a name="l420"><span class="linenum"> 420</span></a>          <a class="var it26082" onMouseOver="hilite(26082)" onMouseOut="lolite()" onClick="logVariable('alldiscussions')" href="../../_variables/alldiscussions.html">$alldiscussions</a> = <a class="function" onClick="logFunction('forum_get_discussions')" href="../../_functions/forum_get_discussions.html" onMouseOver="funcPopup(event,'forum_get_discussions')">forum_get_discussions</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>, true, -1, -1, true, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>, <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../../_variables/perpage.html">$perpage</a>, <a class="constant" onClick="logConstant('FORUM_POSTS_ALL_USER_GROUPS')" href="../../_constants/FORUM_POSTS_ALL_USER_GROUPS.html" onMouseOver="constPopup(event,'FORUM_POSTS_ALL_USER_GROUPS')">FORUM_POSTS_ALL_USER_GROUPS</a>);
<a name="l421"><span class="linenum"> 421</span></a>  
<a name="l422"><span class="linenum"> 422</span></a>          if (<a class="var it26082" onMouseOver="hilite(26082)" onMouseOut="lolite()" onClick="logVariable('alldiscussions')" href="../../_variables/alldiscussions.html">$alldiscussions</a>) {
<a name="l423"><span class="linenum"> 423</span></a>              <a class="var it24836" onMouseOver="hilite(24836)" onMouseOut="lolite()" onClick="logVariable('canviewfullname')" href="../../_variables/canviewfullname.html">$canviewfullname</a> = <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:viewfullnames', <a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>);
<a name="l424"><span class="linenum"> 424</span></a>  
<a name="l425"><span class="linenum"> 425</span></a>  <span class="comment">            // Get the unreads array, this takes a forum id and returns data for all discussions.</span>
<a name="l426"><span class="linenum"> 426</span></a>              <a class="var it30669" onMouseOver="hilite(30669)" onMouseOut="lolite()" onClick="logVariable('unreads')" href="../../_variables/unreads.html">$unreads</a> = array();
<a name="l427"><span class="linenum"> 427</span></a>              if (<a class="var it30670" onMouseOver="hilite(30670)" onMouseOut="lolite()" onClick="logVariable('cantrack')" href="../../_variables/cantrack.html">$cantrack</a> = <a class="function" onClick="logFunction('forum_tp_can_track_forums')" href="../../_functions/forum_tp_can_track_forums.html" onMouseOver="funcPopup(event,'forum_tp_can_track_forums')">forum_tp_can_track_forums</a>(<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>)) {
<a name="l428"><span class="linenum"> 428</span></a>                  if (<a class="var it30666" onMouseOver="hilite(30666)" onMouseOut="lolite()" onClick="logVariable('forumtracked')" href="../../_variables/forumtracked.html">$forumtracked</a> = <a class="function" onClick="logFunction('forum_tp_is_tracked')" href="../../_functions/forum_tp_is_tracked.html" onMouseOver="funcPopup(event,'forum_tp_is_tracked')">forum_tp_is_tracked</a>(<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>)) {
<a name="l429"><span class="linenum"> 429</span></a>                      <a class="var it30669" onMouseOver="hilite(30669)" onMouseOut="lolite()" onClick="logVariable('unreads')" href="../../_variables/unreads.html">$unreads</a> = <a class="function" onClick="logFunction('forum_get_discussions_unread')" href="../../_functions/forum_get_discussions_unread.html" onMouseOver="funcPopup(event,'forum_get_discussions_unread')">forum_get_discussions_unread</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l430"><span class="linenum"> 430</span></a>                  }
<a name="l431"><span class="linenum"> 431</span></a>              }
<a name="l432"><span class="linenum"> 432</span></a>  <span class="comment">            // The forum function returns the replies for all the discussions in a given forum.</span>
<a name="l433"><span class="linenum"> 433</span></a>              <a class="var it18735" onMouseOver="hilite(18735)" onMouseOut="lolite()" onClick="logVariable('replies')" href="../../_variables/replies.html">$replies</a> = <a class="function" onClick="logFunction('forum_count_discussion_replies')" href="../../_functions/forum_count_discussion_replies.html" onMouseOver="funcPopup(event,'forum_count_discussion_replies')">forum_count_discussion_replies</a>(<a class="var it7863" onMouseOver="hilite(7863)" onMouseOut="lolite()" onClick="logVariable('forumid')" href="../../_variables/forumid.html">$forumid</a>, <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>, -1, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>, <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../../_variables/perpage.html">$perpage</a>);
<a name="l434"><span class="linenum"> 434</span></a>  
<a name="l435"><span class="linenum"> 435</span></a>              foreach (<a class="var it26082" onMouseOver="hilite(26082)" onMouseOut="lolite()" onClick="logVariable('alldiscussions')" href="../../_variables/alldiscussions.html">$alldiscussions</a> as <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>) {
<a name="l436"><span class="linenum"> 436</span></a>  
<a name="l437"><span class="linenum"> 437</span></a>  <span class="comment">                // This function checks for qanda forums.</span>
<a name="l438"><span class="linenum"> 438</span></a>  <span class="comment">                // Note that the forum_get_discussions returns as id the post id, not the discussion id so we need to do this.</span>
<a name="l439"><span class="linenum"> 439</span></a>                  <a class="var it30671" onMouseOver="hilite(30671)" onMouseOut="lolite()" onClick="logVariable('discussionrec')" href="../../_variables/discussionrec.html">$discussionrec</a> = clone <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>;
<a name="l440"><span class="linenum"> 440</span></a>                  <a class="var it30671" onMouseOver="hilite(30671)" onMouseOut="lolite()" onClick="logVariable('discussionrec')" href="../../_variables/discussionrec.html">$discussionrec</a>-&gt;<a onClick="logVariable('id')" class="var it44607" onMouseOver="hilite(44607)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('discussion')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/discussion.html">discussion</a>;
<a name="l441"><span class="linenum"> 441</span></a>                  if (!<a class="function" onClick="logFunction('forum_user_can_see_discussion')" href="../../_functions/forum_user_can_see_discussion.html" onMouseOver="funcPopup(event,'forum_user_can_see_discussion')">forum_user_can_see_discussion</a>(<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>, <a class="var it30671" onMouseOver="hilite(30671)" onMouseOut="lolite()" onClick="logVariable('discussionrec')" href="../../_variables/discussionrec.html">$discussionrec</a>, <a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>)) {
<a name="l442"><span class="linenum"> 442</span></a>                      <a class="var it3502" onMouseOver="hilite(3502)" onMouseOut="lolite()" onClick="logVariable('warning')" href="../../_variables/warning.html">$warning</a> = array();
<a name="l443"><span class="linenum"> 443</span></a>  <span class="comment">                    // Function forum_get_discussions returns forum_posts ids not forum_discussions ones.</span>
<a name="l444"><span class="linenum"> 444</span></a>                      <a class="var it3502" onMouseOver="hilite(3502)" onMouseOut="lolite()" onClick="logVariable('warning')" href="../../_variables/warning.html">$warning</a>['item'] = 'post';
<a name="l445"><span class="linenum"> 445</span></a>                      <a class="var it3502" onMouseOver="hilite(3502)" onMouseOut="lolite()" onClick="logVariable('warning')" href="../../_variables/warning.html">$warning</a>['itemid'] = <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('id')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l446"><span class="linenum"> 446</span></a>                      <a class="var it3502" onMouseOver="hilite(3502)" onMouseOut="lolite()" onClick="logVariable('warning')" href="../../_variables/warning.html">$warning</a>['warningcode'] = '1';
<a name="l447"><span class="linenum"> 447</span></a>                      <a class="var it3502" onMouseOver="hilite(3502)" onMouseOut="lolite()" onClick="logVariable('warning')" href="../../_variables/warning.html">$warning</a>['message'] = 'You can\'t see this discussion';
<a name="l448"><span class="linenum"> 448</span></a>                      <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../_variables/warnings.html">$warnings</a>[] = <a class="var it3502" onMouseOver="hilite(3502)" onMouseOut="lolite()" onClick="logVariable('warning')" href="../../_variables/warning.html">$warning</a>;
<a name="l449"><span class="linenum"> 449</span></a>                      continue;
<a name="l450"><span class="linenum"> 450</span></a>                  }
<a name="l451"><span class="linenum"> 451</span></a>  
<a name="l452"><span class="linenum"> 452</span></a>                  <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('numunread')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/numunread.html">numunread</a> = 0;
<a name="l453"><span class="linenum"> 453</span></a>                  if (<a class="var it30670" onMouseOver="hilite(30670)" onMouseOut="lolite()" onClick="logVariable('cantrack')" href="../../_variables/cantrack.html">$cantrack</a> &amp;&amp; <a class="var it30666" onMouseOver="hilite(30666)" onMouseOut="lolite()" onClick="logVariable('forumtracked')" href="../../_variables/forumtracked.html">$forumtracked</a>) {
<a name="l454"><span class="linenum"> 454</span></a>                      if (isset(<a class="var it30669" onMouseOver="hilite(30669)" onMouseOut="lolite()" onClick="logVariable('unreads')" href="../../_variables/unreads.html">$unreads</a>[<a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('discussion')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/discussion.html">discussion</a>])) {
<a name="l455"><span class="linenum"> 455</span></a>                          <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('numunread')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/numunread.html">numunread</a> = (int) <a class="var it30669" onMouseOver="hilite(30669)" onMouseOut="lolite()" onClick="logVariable('unreads')" href="../../_variables/unreads.html">$unreads</a>[<a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('discussion')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/discussion.html">discussion</a>];
<a name="l456"><span class="linenum"> 456</span></a>                      }
<a name="l457"><span class="linenum"> 457</span></a>                  }
<a name="l458"><span class="linenum"> 458</span></a>  
<a name="l459"><span class="linenum"> 459</span></a>                  <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('numreplies')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/numreplies.html">numreplies</a> = 0;
<a name="l460"><span class="linenum"> 460</span></a>                  if (!empty(<a class="var it18735" onMouseOver="hilite(18735)" onMouseOut="lolite()" onClick="logVariable('replies')" href="../../_variables/replies.html">$replies</a>[<a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('discussion')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/discussion.html">discussion</a>])) {
<a name="l461"><span class="linenum"> 461</span></a>                      <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('numreplies')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/numreplies.html">numreplies</a> = (int) <a class="var it18735" onMouseOver="hilite(18735)" onMouseOut="lolite()" onClick="logVariable('replies')" href="../../_variables/replies.html">$replies</a>[<a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('discussion')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/discussion.html">discussion</a>]-&gt;replies;
<a name="l462"><span class="linenum"> 462</span></a>                  }
<a name="l463"><span class="linenum"> 463</span></a>  
<a name="l464"><span class="linenum"> 464</span></a>                  <a class="var it28842" onMouseOver="hilite(28842)" onMouseOut="lolite()" onClick="logVariable('picturefields')" href="../../_variables/picturefields.html">$picturefields</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="class" onClick="logClass('user_picture')" href="../../_classes/user_picture.html" onMouseOver="classPopup(event,'user_picture')">user_picture</a>::<a class="function" onClick="logFunction('fields')" href="../../_functions/fields.html" onMouseOver="funcPopup(event,'fields')">fields</a>());
<a name="l465"><span class="linenum"> 465</span></a>  
<a name="l466"><span class="linenum"> 466</span></a>  <span class="comment">                // Load user objects from the results of the query.</span>
<a name="l467"><span class="linenum"> 467</span></a>                  <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = new stdclass();
<a name="l468"><span class="linenum"> 468</span></a>                  <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('userid')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>;
<a name="l469"><span class="linenum"> 469</span></a>                  <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="function" onClick="logFunction('username_load_fields_from_object')" href="../../_functions/username_load_fields_from_object.html" onMouseOver="funcPopup(event,'username_load_fields_from_object')">username_load_fields_from_object</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>, null, <a class="var it28842" onMouseOver="hilite(28842)" onMouseOut="lolite()" onClick="logVariable('picturefields')" href="../../_variables/picturefields.html">$picturefields</a>);
<a name="l470"><span class="linenum"> 470</span></a>  <span class="comment">                // Preserve the id, it can be modified by username_load_fields_from_object.</span>
<a name="l471"><span class="linenum"> 471</span></a>                  <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('userid')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>;
<a name="l472"><span class="linenum"> 472</span></a>                  <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('userfullname')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/userfullname.html">userfullname</a> = <a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it24836" onMouseOver="hilite(24836)" onMouseOut="lolite()" onClick="logVariable('canviewfullname')" href="../../_variables/canviewfullname.html">$canviewfullname</a>);
<a name="l473"><span class="linenum"> 473</span></a>  
<a name="l474"><span class="linenum"> 474</span></a>                  <a class="var it7923" onMouseOver="hilite(7923)" onMouseOut="lolite()" onClick="logVariable('userpicture')" href="../../_variables/userpicture.html">$userpicture</a> = <span class="keyword">new </span><a class="class" onClick="logClass('user_picture')" href="../../_classes/user_picture.html" onMouseOver="classPopup(event,'user_picture')">user_picture</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>);
<a name="l475"><span class="linenum"> 475</span></a>                  <a class="var it7923" onMouseOver="hilite(7923)" onMouseOut="lolite()" onClick="logVariable('userpicture')" href="../../_variables/userpicture.html">$userpicture</a>-&gt;<a onClick="logVariable('size')" class="var it42996" onMouseOver="hilite(42996)" onMouseOut="lolite()" href="../../_variables/size.html">size</a> = 1; <span class="comment">// Size f1.</span>
<a name="l476"><span class="linenum"> 476</span></a>                  <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('userpictureurl')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/userpictureurl.html">userpictureurl</a> = <a class="var it7923" onMouseOver="hilite(7923)" onMouseOut="lolite()" onClick="logVariable('userpicture')" href="../../_variables/userpicture.html">$userpicture</a>-&gt;<a class="function" onClick="logFunction('get_url')" href="../../_functions/get_url.html" onMouseOver="funcPopup(event,'get_url')">get_url</a>(<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>)-&gt;<a class="function" onClick="logFunction('out')" href="../../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(false);
<a name="l477"><span class="linenum"> 477</span></a>  
<a name="l478"><span class="linenum"> 478</span></a>                  <a class="var it5323" onMouseOver="hilite(5323)" onMouseOut="lolite()" onClick="logVariable('usermodified')" href="../../_variables/usermodified.html">$usermodified</a> = new stdclass();
<a name="l479"><span class="linenum"> 479</span></a>                  <a class="var it5323" onMouseOver="hilite(5323)" onMouseOut="lolite()" onClick="logVariable('usermodified')" href="../../_variables/usermodified.html">$usermodified</a>-&gt;<a onClick="logVariable('id')" class="var it44608" onMouseOver="hilite(44608)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('usermodified')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/usermodified.html">usermodified</a>;
<a name="l480"><span class="linenum"> 480</span></a>                  <a class="var it5323" onMouseOver="hilite(5323)" onMouseOut="lolite()" onClick="logVariable('usermodified')" href="../../_variables/usermodified.html">$usermodified</a> = <a class="function" onClick="logFunction('username_load_fields_from_object')" href="../../_functions/username_load_fields_from_object.html" onMouseOver="funcPopup(event,'username_load_fields_from_object')">username_load_fields_from_object</a>(<a class="var it5323" onMouseOver="hilite(5323)" onMouseOut="lolite()" onClick="logVariable('usermodified')" href="../../_variables/usermodified.html">$usermodified</a>, <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>, 'um', <a class="var it28842" onMouseOver="hilite(28842)" onMouseOut="lolite()" onClick="logVariable('picturefields')" href="../../_variables/picturefields.html">$picturefields</a>);
<a name="l481"><span class="linenum"> 481</span></a>  <span class="comment">                // Preserve the id (it can be overwritten due to the prefixed $picturefields).</span>
<a name="l482"><span class="linenum"> 482</span></a>                  <a class="var it5323" onMouseOver="hilite(5323)" onMouseOut="lolite()" onClick="logVariable('usermodified')" href="../../_variables/usermodified.html">$usermodified</a>-&gt;<a onClick="logVariable('id')" class="var it44608" onMouseOver="hilite(44608)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('usermodified')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/usermodified.html">usermodified</a>;
<a name="l483"><span class="linenum"> 483</span></a>                  <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('usermodifiedfullname')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/usermodifiedfullname.html">usermodifiedfullname</a> = <a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it5323" onMouseOver="hilite(5323)" onMouseOut="lolite()" onClick="logVariable('usermodified')" href="../../_variables/usermodified.html">$usermodified</a>, <a class="var it24836" onMouseOver="hilite(24836)" onMouseOut="lolite()" onClick="logVariable('canviewfullname')" href="../../_variables/canviewfullname.html">$canviewfullname</a>);
<a name="l484"><span class="linenum"> 484</span></a>  
<a name="l485"><span class="linenum"> 485</span></a>                  <a class="var it7923" onMouseOver="hilite(7923)" onMouseOut="lolite()" onClick="logVariable('userpicture')" href="../../_variables/userpicture.html">$userpicture</a> = <span class="keyword">new </span><a class="class" onClick="logClass('user_picture')" href="../../_classes/user_picture.html" onMouseOver="classPopup(event,'user_picture')">user_picture</a>(<a class="var it5323" onMouseOver="hilite(5323)" onMouseOut="lolite()" onClick="logVariable('usermodified')" href="../../_variables/usermodified.html">$usermodified</a>);
<a name="l486"><span class="linenum"> 486</span></a>                  <a class="var it7923" onMouseOver="hilite(7923)" onMouseOut="lolite()" onClick="logVariable('userpicture')" href="../../_variables/userpicture.html">$userpicture</a>-&gt;<a onClick="logVariable('size')" class="var it42996" onMouseOver="hilite(42996)" onMouseOut="lolite()" href="../../_variables/size.html">size</a> = 1; <span class="comment">// Size f1.</span>
<a name="l487"><span class="linenum"> 487</span></a>                  <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('usermodifiedpictureurl')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/usermodifiedpictureurl.html">usermodifiedpictureurl</a> = <a class="var it7923" onMouseOver="hilite(7923)" onMouseOut="lolite()" onClick="logVariable('userpicture')" href="../../_variables/userpicture.html">$userpicture</a>-&gt;<a class="function" onClick="logFunction('get_url')" href="../../_functions/get_url.html" onMouseOver="funcPopup(event,'get_url')">get_url</a>(<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>)-&gt;<a class="function" onClick="logFunction('out')" href="../../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(false);
<a name="l488"><span class="linenum"> 488</span></a>  
<a name="l489"><span class="linenum"> 489</span></a>                  <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('name')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/name.html">name</a> = <a class="function" onClick="logFunction('external_format_string')" href="../../_functions/external_format_string.html" onMouseOver="funcPopup(event,'external_format_string')">external_format_string</a>(<a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('name')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>, <a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>-&gt;<a onClick="logVariable('id')" class="var it43689" onMouseOver="hilite(43689)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l490"><span class="linenum"> 490</span></a>                  <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('subject')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/subject.html">subject</a> = <a class="function" onClick="logFunction('external_format_string')" href="../../_functions/external_format_string.html" onMouseOver="funcPopup(event,'external_format_string')">external_format_string</a>(<a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('subject')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/subject.html">subject</a>, <a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>-&gt;<a onClick="logVariable('id')" class="var it43689" onMouseOver="hilite(43689)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l491"><span class="linenum"> 491</span></a>  <span class="comment">                // Rewrite embedded images URLs.</span>
<a name="l492"><span class="linenum"> 492</span></a>                  <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('message')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/message.html">message</a>, <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('messageformat')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/messageformat.html">messageformat</a>) =
<a name="l493"><span class="linenum"> 493</span></a>                      <a class="function" onClick="logFunction('external_format_text')" href="../../_functions/external_format_text.html" onMouseOver="funcPopup(event,'external_format_text')">external_format_text</a>(<a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('message')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/message.html">message</a>, <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('messageformat')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/messageformat.html">messageformat</a>,
<a name="l494"><span class="linenum"> 494</span></a>                                              <a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>-&gt;<a onClick="logVariable('id')" class="var it43689" onMouseOver="hilite(43689)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_forum', 'post', <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('id')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l495"><span class="linenum"> 495</span></a>  
<a name="l496"><span class="linenum"> 496</span></a>  <span class="comment">                // List attachments.</span>
<a name="l497"><span class="linenum"> 497</span></a>                  if (!empty(<a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('attachment')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/attachment.html">attachment</a>)) {
<a name="l498"><span class="linenum"> 498</span></a>                      <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('attachments')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/attachments.html">attachments</a> = <a class="class" onClick="logClass('external_util')" href="../../_classes/external_util.html" onMouseOver="classPopup(event,'external_util')">external_util</a>::<a class="function" onClick="logFunction('get_area_files')" href="../../_functions/get_area_files.html" onMouseOver="funcPopup(event,'get_area_files')">get_area_files</a>(<a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>-&gt;<a onClick="logVariable('id')" class="var it43689" onMouseOver="hilite(43689)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_forum', 'attachment',
<a name="l499"><span class="linenum"> 499</span></a>                                                                                  <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('id')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l500"><span class="linenum"> 500</span></a>                  }
<a name="l501"><span class="linenum"> 501</span></a>  
<a name="l502"><span class="linenum"> 502</span></a>                  <a class="var it4235" onMouseOver="hilite(4235)" onMouseOut="lolite()" onClick="logVariable('discussions')" href="../../_variables/discussions.html">$discussions</a>[] = <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>;
<a name="l503"><span class="linenum"> 503</span></a>              }
<a name="l504"><span class="linenum"> 504</span></a>          }
<a name="l505"><span class="linenum"> 505</span></a>  
<a name="l506"><span class="linenum"> 506</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = array();
<a name="l507"><span class="linenum"> 507</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>['discussions'] = <a class="var it4235" onMouseOver="hilite(4235)" onMouseOut="lolite()" onClick="logVariable('discussions')" href="../../_variables/discussions.html">$discussions</a>;
<a name="l508"><span class="linenum"> 508</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>['warnings'] = <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../_variables/warnings.html">$warnings</a>;
<a name="l509"><span class="linenum"> 509</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l510"><span class="linenum"> 510</span></a>  
<a name="l511"><span class="linenum"> 511</span></a>      }
<a name="l512"><span class="linenum"> 512</span></a>  
<a name="l513"><span class="linenum"> 513</span></a>      <span class="comment">/**</span>
<a name="l514"><span class="linenum"> 514</span></a>  <span class="comment">     * Describes the get_forum_discussions_paginated return value.</span>
<a name="l515"><span class="linenum"> 515</span></a>  <span class="comment">     *</span>
<a name="l516"><span class="linenum"> 516</span></a>  <span class="comment">     * @return external_single_structure</span>
<a name="l517"><span class="linenum"> 517</span></a>  <span class="comment">     * @since Moodle 2.8</span>
<a name="l518"><span class="linenum"> 518</span></a>  <span class="comment">     */</span>
<a name="l519"><span class="linenum"> 519</span></a>      public static function <a class="function" onClick="logFunction('get_forum_discussions_paginated_returns')" href="../../_functions/get_forum_discussions_paginated_returns.html" onMouseOver="funcPopup(event,'get_forum_discussions_paginated_returns')">get_forum_discussions_paginated_returns</a>() {
<a name="l520"><span class="linenum"> 520</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l521"><span class="linenum"> 521</span></a>              array(
<a name="l522"><span class="linenum"> 522</span></a>                  'discussions' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_multiple_structure')" href="../../_classes/external_multiple_structure.html" onMouseOver="classPopup(event,'external_multiple_structure')">external_multiple_structure</a>(
<a name="l523"><span class="linenum"> 523</span></a>                          <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l524"><span class="linenum"> 524</span></a>                              array(
<a name="l525"><span class="linenum"> 525</span></a>                                  'id' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Post id'),
<a name="l526"><span class="linenum"> 526</span></a>                                  'name' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'Discussion name'),
<a name="l527"><span class="linenum"> 527</span></a>                                  'groupid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Group id'),
<a name="l528"><span class="linenum"> 528</span></a>                                  'timemodified' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Time modified'),
<a name="l529"><span class="linenum"> 529</span></a>                                  'usermodified' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'The id of the user who last modified'),
<a name="l530"><span class="linenum"> 530</span></a>                                  'timestart' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Time discussion can start'),
<a name="l531"><span class="linenum"> 531</span></a>                                  'timeend' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Time discussion ends'),
<a name="l532"><span class="linenum"> 532</span></a>                                  'discussion' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Discussion id'),
<a name="l533"><span class="linenum"> 533</span></a>                                  'parent' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Parent id'),
<a name="l534"><span class="linenum"> 534</span></a>                                  'userid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'User who started the discussion id'),
<a name="l535"><span class="linenum"> 535</span></a>                                  'created' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Creation time'),
<a name="l536"><span class="linenum"> 536</span></a>                                  'modified' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Time modified'),
<a name="l537"><span class="linenum"> 537</span></a>                                  'mailed' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Mailed?'),
<a name="l538"><span class="linenum"> 538</span></a>                                  'subject' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'The post subject'),
<a name="l539"><span class="linenum"> 539</span></a>                                  'message' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'The post message'),
<a name="l540"><span class="linenum"> 540</span></a>                                  'messageformat' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_format_value')" href="../../_classes/external_format_value.html" onMouseOver="classPopup(event,'external_format_value')">external_format_value</a>('message'),
<a name="l541"><span class="linenum"> 541</span></a>                                  'messagetrust' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Can we trust?'),
<a name="l542"><span class="linenum"> 542</span></a>                                  'attachment' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'Has attachments?'),
<a name="l543"><span class="linenum"> 543</span></a>                                  'attachments' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_files')" href="../../_classes/external_files.html" onMouseOver="classPopup(event,'external_files')">external_files</a>('attachments', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l544"><span class="linenum"> 544</span></a>                                  'totalscore' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'The post message total score'),
<a name="l545"><span class="linenum"> 545</span></a>                                  'mailnow' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Mail now?'),
<a name="l546"><span class="linenum"> 546</span></a>                                  'userfullname' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'Post author full name'),
<a name="l547"><span class="linenum"> 547</span></a>                                  'usermodifiedfullname' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'Post modifier full name'),
<a name="l548"><span class="linenum"> 548</span></a>                                  'userpictureurl' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_URL')" href="../../_constants/PARAM_URL.html" onMouseOver="constPopup(event,'PARAM_URL')">PARAM_URL</a>, 'Post author picture.'),
<a name="l549"><span class="linenum"> 549</span></a>                                  'usermodifiedpictureurl' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_URL')" href="../../_constants/PARAM_URL.html" onMouseOver="constPopup(event,'PARAM_URL')">PARAM_URL</a>, 'Post modifier picture.'),
<a name="l550"><span class="linenum"> 550</span></a>                                  'numreplies' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'The number of replies in the discussion'),
<a name="l551"><span class="linenum"> 551</span></a>                                  'numunread' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'The number of unread discussions.'),
<a name="l552"><span class="linenum"> 552</span></a>                                  'pinned' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_BOOL')" href="../../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>, 'Is the discussion pinned')
<a name="l553"><span class="linenum"> 553</span></a>                              ), 'post'
<a name="l554"><span class="linenum"> 554</span></a>                          )
<a name="l555"><span class="linenum"> 555</span></a>                      ),
<a name="l556"><span class="linenum"> 556</span></a>                  'warnings' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_warnings')" href="../../_classes/external_warnings.html" onMouseOver="classPopup(event,'external_warnings')">external_warnings</a>()
<a name="l557"><span class="linenum"> 557</span></a>              )
<a name="l558"><span class="linenum"> 558</span></a>          );
<a name="l559"><span class="linenum"> 559</span></a>      }
<a name="l560"><span class="linenum"> 560</span></a>  
<a name="l561"><span class="linenum"> 561</span></a>      <span class="comment">/**</span>
<a name="l562"><span class="linenum"> 562</span></a>  <span class="comment">     * Returns description of method parameters</span>
<a name="l563"><span class="linenum"> 563</span></a>  <span class="comment">     *</span>
<a name="l564"><span class="linenum"> 564</span></a>  <span class="comment">     * @return external_function_parameters</span>
<a name="l565"><span class="linenum"> 565</span></a>  <span class="comment">     * @since Moodle 2.9</span>
<a name="l566"><span class="linenum"> 566</span></a>  <span class="comment">     */</span>
<a name="l567"><span class="linenum"> 567</span></a>      public static function <a class="function" onClick="logFunction('view_forum_parameters')" href="../../_functions/view_forum_parameters.html" onMouseOver="funcPopup(event,'view_forum_parameters')">view_forum_parameters</a>() {
<a name="l568"><span class="linenum"> 568</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_function_parameters')" href="../../_classes/external_function_parameters.html" onMouseOver="classPopup(event,'external_function_parameters')">external_function_parameters</a>(
<a name="l569"><span class="linenum"> 569</span></a>              array(
<a name="l570"><span class="linenum"> 570</span></a>                  'forumid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'forum instance id')
<a name="l571"><span class="linenum"> 571</span></a>              )
<a name="l572"><span class="linenum"> 572</span></a>          );
<a name="l573"><span class="linenum"> 573</span></a>      }
<a name="l574"><span class="linenum"> 574</span></a>  
<a name="l575"><span class="linenum"> 575</span></a>      <span class="comment">/**</span>
<a name="l576"><span class="linenum"> 576</span></a>  <span class="comment">     * Trigger the course module viewed event and update the module completion status.</span>
<a name="l577"><span class="linenum"> 577</span></a>  <span class="comment">     *</span>
<a name="l578"><span class="linenum"> 578</span></a>  <span class="comment">     * @param int $forumid the forum instance id</span>
<a name="l579"><span class="linenum"> 579</span></a>  <span class="comment">     * @return array of warnings and status result</span>
<a name="l580"><span class="linenum"> 580</span></a>  <span class="comment">     * @since Moodle 2.9</span>
<a name="l581"><span class="linenum"> 581</span></a>  <span class="comment">     * @throws moodle_exception</span>
<a name="l582"><span class="linenum"> 582</span></a>  <span class="comment">     */</span>
<a name="l583"><span class="linenum"> 583</span></a>      public static function <a class="function" onClick="logFunction('view_forum')" href="../../_functions/view_forum.html" onMouseOver="funcPopup(event,'view_forum')">view_forum</a>(<a class="var it7863" onMouseOver="hilite(7863)" onMouseOut="lolite()" onClick="logVariable('forumid')" href="../../_variables/forumid.html">$forumid</a>) {
<a name="l584"><span class="linenum"> 584</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l585"><span class="linenum"> 585</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . "<a class="filename" href="../../mod/forum/lib.php.html">/mod/forum/lib.php</a>");
<a name="l586"><span class="linenum"> 586</span></a>  
<a name="l587"><span class="linenum"> 587</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = self::<a class="function" onClick="logFunction('validate_parameters')" href="../../_functions/validate_parameters.html" onMouseOver="funcPopup(event,'validate_parameters')">validate_parameters</a>(self::<a class="function" onClick="logFunction('view_forum_parameters')" href="../../_functions/view_forum_parameters.html" onMouseOver="funcPopup(event,'view_forum_parameters')">view_forum_parameters</a>(),
<a name="l588"><span class="linenum"> 588</span></a>                                              array(
<a name="l589"><span class="linenum"> 589</span></a>                                                  'forumid' =&gt; <a class="var it7863" onMouseOver="hilite(7863)" onMouseOut="lolite()" onClick="logVariable('forumid')" href="../../_variables/forumid.html">$forumid</a>
<a name="l590"><span class="linenum"> 590</span></a>                                              ));
<a name="l591"><span class="linenum"> 591</span></a>          <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../_variables/warnings.html">$warnings</a> = array();
<a name="l592"><span class="linenum"> 592</span></a>  
<a name="l593"><span class="linenum"> 593</span></a>  <span class="comment">        // Request and permission validation.</span>
<a name="l594"><span class="linenum"> 594</span></a>          <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('forum', array('id' =&gt; <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['forumid']), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l595"><span class="linenum"> 595</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>) = <a class="function" onClick="logFunction('get_course_and_cm_from_instance')" href="../../_functions/get_course_and_cm_from_instance.html" onMouseOver="funcPopup(event,'get_course_and_cm_from_instance')">get_course_and_cm_from_instance</a>(<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>, 'forum');
<a name="l596"><span class="linenum"> 596</span></a>  
<a name="l597"><span class="linenum"> 597</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l598"><span class="linenum"> 598</span></a>          self::<a class="function" onClick="logFunction('validate_context')" href="../../_functions/validate_context.html" onMouseOver="funcPopup(event,'validate_context')">validate_context</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l599"><span class="linenum"> 599</span></a>  
<a name="l600"><span class="linenum"> 600</span></a>          <a class="function" onClick="logFunction('require_capability')" href="../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/forum:viewdiscussion', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, null, true, 'noviewdiscussionspermission', 'forum');
<a name="l601"><span class="linenum"> 601</span></a>  
<a name="l602"><span class="linenum"> 602</span></a>  <span class="comment">        // Call the forum/lib API.</span>
<a name="l603"><span class="linenum"> 603</span></a>          <a class="function" onClick="logFunction('forum_view')" href="../../_functions/forum_view.html" onMouseOver="funcPopup(event,'forum_view')">forum_view</a>(<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l604"><span class="linenum"> 604</span></a>  
<a name="l605"><span class="linenum"> 605</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = array();
<a name="l606"><span class="linenum"> 606</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>['status'] = true;
<a name="l607"><span class="linenum"> 607</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>['warnings'] = <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../_variables/warnings.html">$warnings</a>;
<a name="l608"><span class="linenum"> 608</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l609"><span class="linenum"> 609</span></a>      }
<a name="l610"><span class="linenum"> 610</span></a>  
<a name="l611"><span class="linenum"> 611</span></a>      <span class="comment">/**</span>
<a name="l612"><span class="linenum"> 612</span></a>  <span class="comment">     * Returns description of method result value</span>
<a name="l613"><span class="linenum"> 613</span></a>  <span class="comment">     *</span>
<a name="l614"><span class="linenum"> 614</span></a>  <span class="comment">     * @return external_description</span>
<a name="l615"><span class="linenum"> 615</span></a>  <span class="comment">     * @since Moodle 2.9</span>
<a name="l616"><span class="linenum"> 616</span></a>  <span class="comment">     */</span>
<a name="l617"><span class="linenum"> 617</span></a>      public static function <a class="function" onClick="logFunction('view_forum_returns')" href="../../_functions/view_forum_returns.html" onMouseOver="funcPopup(event,'view_forum_returns')">view_forum_returns</a>() {
<a name="l618"><span class="linenum"> 618</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l619"><span class="linenum"> 619</span></a>              array(
<a name="l620"><span class="linenum"> 620</span></a>                  'status' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_BOOL')" href="../../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>, 'status: true if success'),
<a name="l621"><span class="linenum"> 621</span></a>                  'warnings' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_warnings')" href="../../_classes/external_warnings.html" onMouseOver="classPopup(event,'external_warnings')">external_warnings</a>()
<a name="l622"><span class="linenum"> 622</span></a>              )
<a name="l623"><span class="linenum"> 623</span></a>          );
<a name="l624"><span class="linenum"> 624</span></a>      }
<a name="l625"><span class="linenum"> 625</span></a>  
<a name="l626"><span class="linenum"> 626</span></a>      <span class="comment">/**</span>
<a name="l627"><span class="linenum"> 627</span></a>  <span class="comment">     * Returns description of method parameters</span>
<a name="l628"><span class="linenum"> 628</span></a>  <span class="comment">     *</span>
<a name="l629"><span class="linenum"> 629</span></a>  <span class="comment">     * @return external_function_parameters</span>
<a name="l630"><span class="linenum"> 630</span></a>  <span class="comment">     * @since Moodle 2.9</span>
<a name="l631"><span class="linenum"> 631</span></a>  <span class="comment">     */</span>
<a name="l632"><span class="linenum"> 632</span></a>      public static function <a class="function" onClick="logFunction('view_forum_discussion_parameters')" href="../../_functions/view_forum_discussion_parameters.html" onMouseOver="funcPopup(event,'view_forum_discussion_parameters')">view_forum_discussion_parameters</a>() {
<a name="l633"><span class="linenum"> 633</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_function_parameters')" href="../../_classes/external_function_parameters.html" onMouseOver="classPopup(event,'external_function_parameters')">external_function_parameters</a>(
<a name="l634"><span class="linenum"> 634</span></a>              array(
<a name="l635"><span class="linenum"> 635</span></a>                  'discussionid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'discussion id')
<a name="l636"><span class="linenum"> 636</span></a>              )
<a name="l637"><span class="linenum"> 637</span></a>          );
<a name="l638"><span class="linenum"> 638</span></a>      }
<a name="l639"><span class="linenum"> 639</span></a>  
<a name="l640"><span class="linenum"> 640</span></a>      <span class="comment">/**</span>
<a name="l641"><span class="linenum"> 641</span></a>  <span class="comment">     * Trigger the discussion viewed event.</span>
<a name="l642"><span class="linenum"> 642</span></a>  <span class="comment">     *</span>
<a name="l643"><span class="linenum"> 643</span></a>  <span class="comment">     * @param int $discussionid the discussion id</span>
<a name="l644"><span class="linenum"> 644</span></a>  <span class="comment">     * @return array of warnings and status result</span>
<a name="l645"><span class="linenum"> 645</span></a>  <span class="comment">     * @since Moodle 2.9</span>
<a name="l646"><span class="linenum"> 646</span></a>  <span class="comment">     * @throws moodle_exception</span>
<a name="l647"><span class="linenum"> 647</span></a>  <span class="comment">     */</span>
<a name="l648"><span class="linenum"> 648</span></a>      public static function <a class="function" onClick="logFunction('view_forum_discussion')" href="../../_functions/view_forum_discussion.html" onMouseOver="funcPopup(event,'view_forum_discussion')">view_forum_discussion</a>(<a class="var it16125" onMouseOver="hilite(16125)" onMouseOut="lolite()" onClick="logVariable('discussionid')" href="../../_variables/discussionid.html">$discussionid</a>) {
<a name="l649"><span class="linenum"> 649</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l650"><span class="linenum"> 650</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . "<a class="filename" href="../../mod/forum/lib.php.html">/mod/forum/lib.php</a>");
<a name="l651"><span class="linenum"> 651</span></a>  
<a name="l652"><span class="linenum"> 652</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = self::<a class="function" onClick="logFunction('validate_parameters')" href="../../_functions/validate_parameters.html" onMouseOver="funcPopup(event,'validate_parameters')">validate_parameters</a>(self::<a class="function" onClick="logFunction('view_forum_discussion_parameters')" href="../../_functions/view_forum_discussion_parameters.html" onMouseOver="funcPopup(event,'view_forum_discussion_parameters')">view_forum_discussion_parameters</a>(),
<a name="l653"><span class="linenum"> 653</span></a>                                              array(
<a name="l654"><span class="linenum"> 654</span></a>                                                  'discussionid' =&gt; <a class="var it16125" onMouseOver="hilite(16125)" onMouseOut="lolite()" onClick="logVariable('discussionid')" href="../../_variables/discussionid.html">$discussionid</a>
<a name="l655"><span class="linenum"> 655</span></a>                                              ));
<a name="l656"><span class="linenum"> 656</span></a>          <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../_variables/warnings.html">$warnings</a> = array();
<a name="l657"><span class="linenum"> 657</span></a>  
<a name="l658"><span class="linenum"> 658</span></a>          <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('forum_discussions', array('id' =&gt; <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['discussionid']), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l659"><span class="linenum"> 659</span></a>          <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('forum', array('id' =&gt; <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('forum')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/forum.html">forum</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l660"><span class="linenum"> 660</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>) = <a class="function" onClick="logFunction('get_course_and_cm_from_instance')" href="../../_functions/get_course_and_cm_from_instance.html" onMouseOver="funcPopup(event,'get_course_and_cm_from_instance')">get_course_and_cm_from_instance</a>(<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>, 'forum');
<a name="l661"><span class="linenum"> 661</span></a>  
<a name="l662"><span class="linenum"> 662</span></a>  <span class="comment">        // Validate the module context. It checks everything that affects the module visibility (including groupings, etc..).</span>
<a name="l663"><span class="linenum"> 663</span></a>          <a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l664"><span class="linenum"> 664</span></a>          self::<a class="function" onClick="logFunction('validate_context')" href="../../_functions/validate_context.html" onMouseOver="funcPopup(event,'validate_context')">validate_context</a>(<a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>);
<a name="l665"><span class="linenum"> 665</span></a>  
<a name="l666"><span class="linenum"> 666</span></a>          <a class="function" onClick="logFunction('require_capability')" href="../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/forum:viewdiscussion', <a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>, null, true, 'noviewdiscussionspermission', 'forum');
<a name="l667"><span class="linenum"> 667</span></a>  
<a name="l668"><span class="linenum"> 668</span></a>  <span class="comment">        // Call the forum/lib API.</span>
<a name="l669"><span class="linenum"> 669</span></a>          <a class="function" onClick="logFunction('forum_discussion_view')" href="../../_functions/forum_discussion_view.html" onMouseOver="funcPopup(event,'forum_discussion_view')">forum_discussion_view</a>(<a class="var it2714" onMouseOver="hilite(2714)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>, <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>, <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>);
<a name="l670"><span class="linenum"> 670</span></a>  
<a name="l671"><span class="linenum"> 671</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = array();
<a name="l672"><span class="linenum"> 672</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>['status'] = true;
<a name="l673"><span class="linenum"> 673</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>['warnings'] = <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../_variables/warnings.html">$warnings</a>;
<a name="l674"><span class="linenum"> 674</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l675"><span class="linenum"> 675</span></a>      }
<a name="l676"><span class="linenum"> 676</span></a>  
<a name="l677"><span class="linenum"> 677</span></a>      <span class="comment">/**</span>
<a name="l678"><span class="linenum"> 678</span></a>  <span class="comment">     * Returns description of method result value</span>
<a name="l679"><span class="linenum"> 679</span></a>  <span class="comment">     *</span>
<a name="l680"><span class="linenum"> 680</span></a>  <span class="comment">     * @return external_description</span>
<a name="l681"><span class="linenum"> 681</span></a>  <span class="comment">     * @since Moodle 2.9</span>
<a name="l682"><span class="linenum"> 682</span></a>  <span class="comment">     */</span>
<a name="l683"><span class="linenum"> 683</span></a>      public static function <a class="function" onClick="logFunction('view_forum_discussion_returns')" href="../../_functions/view_forum_discussion_returns.html" onMouseOver="funcPopup(event,'view_forum_discussion_returns')">view_forum_discussion_returns</a>() {
<a name="l684"><span class="linenum"> 684</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l685"><span class="linenum"> 685</span></a>              array(
<a name="l686"><span class="linenum"> 686</span></a>                  'status' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_BOOL')" href="../../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>, 'status: true if success'),
<a name="l687"><span class="linenum"> 687</span></a>                  'warnings' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_warnings')" href="../../_classes/external_warnings.html" onMouseOver="classPopup(event,'external_warnings')">external_warnings</a>()
<a name="l688"><span class="linenum"> 688</span></a>              )
<a name="l689"><span class="linenum"> 689</span></a>          );
<a name="l690"><span class="linenum"> 690</span></a>      }
<a name="l691"><span class="linenum"> 691</span></a>  
<a name="l692"><span class="linenum"> 692</span></a>      <span class="comment">/**</span>
<a name="l693"><span class="linenum"> 693</span></a>  <span class="comment">     * Returns description of method parameters</span>
<a name="l694"><span class="linenum"> 694</span></a>  <span class="comment">     *</span>
<a name="l695"><span class="linenum"> 695</span></a>  <span class="comment">     * @return external_function_parameters</span>
<a name="l696"><span class="linenum"> 696</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l697"><span class="linenum"> 697</span></a>  <span class="comment">     */</span>
<a name="l698"><span class="linenum"> 698</span></a>      public static function <a class="function" onClick="logFunction('add_discussion_post_parameters')" href="../../_functions/add_discussion_post_parameters.html" onMouseOver="funcPopup(event,'add_discussion_post_parameters')">add_discussion_post_parameters</a>() {
<a name="l699"><span class="linenum"> 699</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_function_parameters')" href="../../_classes/external_function_parameters.html" onMouseOver="classPopup(event,'external_function_parameters')">external_function_parameters</a>(
<a name="l700"><span class="linenum"> 700</span></a>              array(
<a name="l701"><span class="linenum"> 701</span></a>                  'postid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'the post id we are going to reply to
<a name="l702"><span class="linenum"> 702</span></a>                                                  (can be the initial discussion post'),
<a name="l703"><span class="linenum"> 703</span></a>                  'subject' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, '<span class="keyword">new </span><a class="class" onClick="logClass('post')" href="../../_classes/post.html" onMouseOver="classPopup(event,'post')">post</a> subject'),
<a name="l704"><span class="linenum"> 704</span></a>                  'message' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, '<span class="keyword">new </span><a class="class" onClick="logClass('post')" href="../../_classes/post.html" onMouseOver="classPopup(event,'post')">post</a> <a class="function" onClick="logFunction('message')" href="../../_functions/message.html" onMouseOver="funcPopup(event,'message')">message</a> (only html format allowed)'),
<a name="l705"><span class="linenum"> 705</span></a>                  'options' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_multiple_structure')" href="../../_classes/external_multiple_structure.html" onMouseOver="classPopup(event,'external_multiple_structure')">external_multiple_structure</a> (
<a name="l706"><span class="linenum"> 706</span></a>                      <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l707"><span class="linenum"> 707</span></a>                          array(
<a name="l708"><span class="linenum"> 708</span></a>                              'name' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_ALPHANUM')" href="../../_constants/PARAM_ALPHANUM.html" onMouseOver="constPopup(event,'PARAM_ALPHANUM')">PARAM_ALPHANUM</a>,
<a name="l709"><span class="linenum"> 709</span></a>                                          'The allowed keys (value format) are:
<a name="l710"><span class="linenum"> 710</span></a>                                          discussionsubscribe (bool); subscribe to the discussion?, default to true
<a name="l711"><span class="linenum"> 711</span></a>                                          inlineattachmentsid              (int); the draft file area id for inline attachments
<a name="l712"><span class="linenum"> 712</span></a>                                          attachmentsid       (int); the draft file area id for attachments
<a name="l713"><span class="linenum"> 713</span></a>                              '),
<a name="l714"><span class="linenum"> 714</span></a>                              'value' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'the value of the option,
<a name="l715"><span class="linenum"> 715</span></a>                                                              this param is validated in the external function.'
<a name="l716"><span class="linenum"> 716</span></a>                          )
<a name="l717"><span class="linenum"> 717</span></a>                      )
<a name="l718"><span class="linenum"> 718</span></a>                  ), 'Options', <a class="constant" onClick="logConstant('VALUE_DEFAULT')" href="../../_constants/VALUE_DEFAULT.html" onMouseOver="constPopup(event,'VALUE_DEFAULT')">VALUE_DEFAULT</a>, array())
<a name="l719"><span class="linenum"> 719</span></a>              )
<a name="l720"><span class="linenum"> 720</span></a>          );
<a name="l721"><span class="linenum"> 721</span></a>      }
<a name="l722"><span class="linenum"> 722</span></a>  
<a name="l723"><span class="linenum"> 723</span></a>      <span class="comment">/**</span>
<a name="l724"><span class="linenum"> 724</span></a>  <span class="comment">     * Create new posts into an existing discussion.</span>
<a name="l725"><span class="linenum"> 725</span></a>  <span class="comment">     *</span>
<a name="l726"><span class="linenum"> 726</span></a>  <span class="comment">     * @param int $postid the post id we are going to reply to</span>
<a name="l727"><span class="linenum"> 727</span></a>  <span class="comment">     * @param string $subject new post subject</span>
<a name="l728"><span class="linenum"> 728</span></a>  <span class="comment">     * @param string $message new post message (only html format allowed)</span>
<a name="l729"><span class="linenum"> 729</span></a>  <span class="comment">     * @param array $options optional settings</span>
<a name="l730"><span class="linenum"> 730</span></a>  <span class="comment">     * @return array of warnings and the new post id</span>
<a name="l731"><span class="linenum"> 731</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l732"><span class="linenum"> 732</span></a>  <span class="comment">     * @throws moodle_exception</span>
<a name="l733"><span class="linenum"> 733</span></a>  <span class="comment">     */</span>
<a name="l734"><span class="linenum"> 734</span></a>      public static function <a class="function" onClick="logFunction('add_discussion_post')" href="../../_functions/add_discussion_post.html" onMouseOver="funcPopup(event,'add_discussion_post')">add_discussion_post</a>(<a class="var it23839" onMouseOver="hilite(23839)" onMouseOut="lolite()" onClick="logVariable('postid')" href="../../_variables/postid.html">$postid</a>, <a class="var it1792" onMouseOver="hilite(1792)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../_variables/subject.html">$subject</a>, <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../_variables/message.html">$message</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = array()) {
<a name="l735"><span class="linenum"> 735</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l736"><span class="linenum"> 736</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . "<a class="filename" href="../../mod/forum/lib.php.html">/mod/forum/lib.php</a>");
<a name="l737"><span class="linenum"> 737</span></a>  
<a name="l738"><span class="linenum"> 738</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = self::<a class="function" onClick="logFunction('validate_parameters')" href="../../_functions/validate_parameters.html" onMouseOver="funcPopup(event,'validate_parameters')">validate_parameters</a>(self::<a class="function" onClick="logFunction('add_discussion_post_parameters')" href="../../_functions/add_discussion_post_parameters.html" onMouseOver="funcPopup(event,'add_discussion_post_parameters')">add_discussion_post_parameters</a>(),
<a name="l739"><span class="linenum"> 739</span></a>                                              array(
<a name="l740"><span class="linenum"> 740</span></a>                                                  'postid' =&gt; <a class="var it23839" onMouseOver="hilite(23839)" onMouseOut="lolite()" onClick="logVariable('postid')" href="../../_variables/postid.html">$postid</a>,
<a name="l741"><span class="linenum"> 741</span></a>                                                  'subject' =&gt; <a class="var it1792" onMouseOver="hilite(1792)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../_variables/subject.html">$subject</a>,
<a name="l742"><span class="linenum"> 742</span></a>                                                  'message' =&gt; <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../_variables/message.html">$message</a>,
<a name="l743"><span class="linenum"> 743</span></a>                                                  'options' =&gt; <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>
<a name="l744"><span class="linenum"> 744</span></a>                                              ));
<a name="l745"><span class="linenum"> 745</span></a>  <span class="comment">        // Validate options.</span>
<a name="l746"><span class="linenum"> 746</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = array(
<a name="l747"><span class="linenum"> 747</span></a>              'discussionsubscribe' =&gt; true,
<a name="l748"><span class="linenum"> 748</span></a>              'inlineattachmentsid' =&gt; 0,
<a name="l749"><span class="linenum"> 749</span></a>              'attachmentsid' =&gt; null
<a name="l750"><span class="linenum"> 750</span></a>          );
<a name="l751"><span class="linenum"> 751</span></a>          foreach (<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['options'] as <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('option')" href="../../_variables/option.html">$option</a>) {
<a name="l752"><span class="linenum"> 752</span></a>              <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('option')" href="../../_variables/option.html">$option</a>['name']);
<a name="l753"><span class="linenum"> 753</span></a>              switch (<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>) {
<a name="l754"><span class="linenum"> 754</span></a>                  case 'discussionsubscribe':
<a name="l755"><span class="linenum"> 755</span></a>                      <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> = <a class="function" onClick="logFunction('clean_param')" href="../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('option')" href="../../_variables/option.html">$option</a>['value'], <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>);
<a name="l756"><span class="linenum"> 756</span></a>                      break;
<a name="l757"><span class="linenum"> 757</span></a>                  case 'inlineattachmentsid':
<a name="l758"><span class="linenum"> 758</span></a>                      <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> = <a class="function" onClick="logFunction('clean_param')" href="../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('option')" href="../../_variables/option.html">$option</a>['value'], <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l759"><span class="linenum"> 759</span></a>                      break;
<a name="l760"><span class="linenum"> 760</span></a>                  case 'attachmentsid':
<a name="l761"><span class="linenum"> 761</span></a>                      <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> = <a class="function" onClick="logFunction('clean_param')" href="../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('option')" href="../../_variables/option.html">$option</a>['value'], <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l762"><span class="linenum"> 762</span></a>                      break;
<a name="l763"><span class="linenum"> 763</span></a>                  default:
<a name="l764"><span class="linenum"> 764</span></a>                      throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('errorinvalidparam', 'webservice', '', <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>);
<a name="l765"><span class="linenum"> 765</span></a>              }
<a name="l766"><span class="linenum"> 766</span></a>              <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>[<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>] = <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>;
<a name="l767"><span class="linenum"> 767</span></a>          }
<a name="l768"><span class="linenum"> 768</span></a>  
<a name="l769"><span class="linenum"> 769</span></a>          <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../_variables/warnings.html">$warnings</a> = array();
<a name="l770"><span class="linenum"> 770</span></a>  
<a name="l771"><span class="linenum"> 771</span></a>          if (!<a class="var it311" onMouseOver="hilite(311)" onMouseOut="lolite()" onClick="logVariable('parent')" href="../../_variables/parent.html">$parent</a> = <a class="function" onClick="logFunction('forum_get_post_full')" href="../../_functions/forum_get_post_full.html" onMouseOver="funcPopup(event,'forum_get_post_full')">forum_get_post_full</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['postid'])) {
<a name="l772"><span class="linenum"> 772</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('invalidparentpostid', 'forum');
<a name="l773"><span class="linenum"> 773</span></a>          }
<a name="l774"><span class="linenum"> 774</span></a>  
<a name="l775"><span class="linenum"> 775</span></a>          if (!<a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>(&quot;forum_discussions&quot;, array(&quot;id&quot; =&gt; <a class="var it311" onMouseOver="hilite(311)" onMouseOut="lolite()" onClick="logVariable('parent')" href="../../_variables/parent.html">$parent</a>-&gt;<a onClick="logVariable('discussion')" class="var it43399" onMouseOver="hilite(43399)" onMouseOut="lolite()" href="../../_variables/discussion.html">discussion</a>))) {
<a name="l776"><span class="linenum"> 776</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('notpartofdiscussion', 'forum');
<a name="l777"><span class="linenum"> 777</span></a>          }
<a name="l778"><span class="linenum"> 778</span></a>  
<a name="l779"><span class="linenum"> 779</span></a>  <span class="comment">        // Request and permission validation.</span>
<a name="l780"><span class="linenum"> 780</span></a>          <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('forum', array('id' =&gt; <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('forum')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/forum.html">forum</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l781"><span class="linenum"> 781</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>) = <a class="function" onClick="logFunction('get_course_and_cm_from_instance')" href="../../_functions/get_course_and_cm_from_instance.html" onMouseOver="funcPopup(event,'get_course_and_cm_from_instance')">get_course_and_cm_from_instance</a>(<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>, 'forum');
<a name="l782"><span class="linenum"> 782</span></a>  
<a name="l783"><span class="linenum"> 783</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l784"><span class="linenum"> 784</span></a>          self::<a class="function" onClick="logFunction('validate_context')" href="../../_functions/validate_context.html" onMouseOver="funcPopup(event,'validate_context')">validate_context</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l785"><span class="linenum"> 785</span></a>  
<a name="l786"><span class="linenum"> 786</span></a>          if (!<a class="function" onClick="logFunction('forum_user_can_post')" href="../../_functions/forum_user_can_post.html" onMouseOver="funcPopup(event,'forum_user_can_post')">forum_user_can_post</a>(<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>, <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l787"><span class="linenum"> 787</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('nopostforum', 'forum');
<a name="l788"><span class="linenum"> 788</span></a>          }
<a name="l789"><span class="linenum"> 789</span></a>  
<a name="l790"><span class="linenum"> 790</span></a>          <a class="var it7440" onMouseOver="hilite(7440)" onMouseOut="lolite()" onClick="logVariable('thresholdwarning')" href="../../_variables/thresholdwarning.html">$thresholdwarning</a> = <a class="function" onClick="logFunction('forum_check_throttling')" href="../../_functions/forum_check_throttling.html" onMouseOver="funcPopup(event,'forum_check_throttling')">forum_check_throttling</a>(<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l791"><span class="linenum"> 791</span></a>          <a class="function" onClick="logFunction('forum_check_blocking_threshold')" href="../../_functions/forum_check_blocking_threshold.html" onMouseOver="funcPopup(event,'forum_check_blocking_threshold')">forum_check_blocking_threshold</a>(<a class="var it7440" onMouseOver="hilite(7440)" onMouseOut="lolite()" onClick="logVariable('thresholdwarning')" href="../../_variables/thresholdwarning.html">$thresholdwarning</a>);
<a name="l792"><span class="linenum"> 792</span></a>  
<a name="l793"><span class="linenum"> 793</span></a>  <span class="comment">        // Create the post.</span>
<a name="l794"><span class="linenum"> 794</span></a>          <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a> = new stdClass();
<a name="l795"><span class="linenum"> 795</span></a>          <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('discussion')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../_variables/discussion.html">discussion</a> = <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('id')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l796"><span class="linenum"> 796</span></a>          <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('parent')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../_variables/parent.html">parent</a> = <a class="var it311" onMouseOver="hilite(311)" onMouseOut="lolite()" onClick="logVariable('parent')" href="../../_variables/parent.html">$parent</a>-&gt;<a onClick="logVariable('id')" class="var it43399" onMouseOver="hilite(43399)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l797"><span class="linenum"> 797</span></a>          <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('subject')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../_variables/subject.html">subject</a> = <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['subject'];
<a name="l798"><span class="linenum"> 798</span></a>          <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('message')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../_variables/message.html">message</a> = <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['message'];
<a name="l799"><span class="linenum"> 799</span></a>          <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('messageformat')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../_variables/messageformat.html">messageformat</a> = <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>;   <span class="comment">// Force formatting for now.</span>
<a name="l800"><span class="linenum"> 800</span></a>          <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('messagetrust')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../_variables/messagetrust.html">messagetrust</a> = <a class="function" onClick="logFunction('trusttext_trusted')" href="../../_functions/trusttext_trusted.html" onMouseOver="funcPopup(event,'trusttext_trusted')">trusttext_trusted</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l801"><span class="linenum"> 801</span></a>          <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('itemid')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../_variables/itemid.html">itemid</a> = <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['inlineattachmentsid'];
<a name="l802"><span class="linenum"> 802</span></a>          <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('attachments')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../_variables/attachments.html">attachments</a>   = <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['attachmentsid'];
<a name="l803"><span class="linenum"> 803</span></a>          <a class="var it30676" onMouseOver="hilite(30676)" onMouseOut="lolite()" onClick="logVariable('fakemform')" href="../../_variables/fakemform.html">$fakemform</a> = <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('attachments')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../_variables/attachments.html">attachments</a>;
<a name="l804"><span class="linenum"> 804</span></a>          if (<a class="var it23839" onMouseOver="hilite(23839)" onMouseOut="lolite()" onClick="logVariable('postid')" href="../../_variables/postid.html">$postid</a> = <a class="function" onClick="logFunction('forum_add_new_post')" href="../../_functions/forum_add_new_post.html" onMouseOver="funcPopup(event,'forum_add_new_post')">forum_add_new_post</a>(<a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>, <a class="var it30676" onMouseOver="hilite(30676)" onMouseOut="lolite()" onClick="logVariable('fakemform')" href="../../_variables/fakemform.html">$fakemform</a>)) {
<a name="l805"><span class="linenum"> 805</span></a>  
<a name="l806"><span class="linenum"> 806</span></a>              <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('id')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it23839" onMouseOver="hilite(23839)" onMouseOut="lolite()" onClick="logVariable('postid')" href="../../_variables/postid.html">$postid</a>;
<a name="l807"><span class="linenum"> 807</span></a>  
<a name="l808"><span class="linenum"> 808</span></a>  <span class="comment">            // Trigger events and completion.</span>
<a name="l809"><span class="linenum"> 809</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array(
<a name="l810"><span class="linenum"> 810</span></a>                  'context' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>,
<a name="l811"><span class="linenum"> 811</span></a>                  'objectid' =&gt; <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('id')" class="var it43223" onMouseOver="hilite(43223)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l812"><span class="linenum"> 812</span></a>                  'other' =&gt; array(
<a name="l813"><span class="linenum"> 813</span></a>                      'discussionid' =&gt; <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('id')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l814"><span class="linenum"> 814</span></a>                      'forumid' =&gt; <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('id')" class="var it43075" onMouseOver="hilite(43075)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l815"><span class="linenum"> 815</span></a>                      'forumtype' =&gt; <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('type')" class="var it43075" onMouseOver="hilite(43075)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>,
<a name="l816"><span class="linenum"> 816</span></a>                  )
<a name="l817"><span class="linenum"> 817</span></a>              );
<a name="l818"><span class="linenum"> 818</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_forum\event\<a class="class" onClick="logClass('post_created')" href="../../_classes/post_created.html" onMouseOver="classPopup(event,'post_created')">post_created</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l819"><span class="linenum"> 819</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('forum_posts', <a class="var it4569" onMouseOver="hilite(4569)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>);
<a name="l820"><span class="linenum"> 820</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('forum_discussions', <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>);
<a name="l821"><span class="linenum"> 821</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l822"><span class="linenum"> 822</span></a>  
<a name="l823"><span class="linenum"> 823</span></a>  <span class="comment">            // Update completion state.</span>
<a name="l824"><span class="linenum"> 824</span></a>              <a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a> = <span class="keyword">new </span><a class="class" onClick="logClass('completion_info')" href="../../_classes/completion_info.html" onMouseOver="classPopup(event,'completion_info')">completion_info</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l825"><span class="linenum"> 825</span></a>              if (<a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>) &amp;&amp;
<a name="l826"><span class="linenum"> 826</span></a>                      (<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('completionreplies')" class="var it43075" onMouseOver="hilite(43075)" onMouseOut="lolite()" href="../../_variables/completionreplies.html">completionreplies</a> || <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('completionposts')" class="var it43075" onMouseOver="hilite(43075)" onMouseOut="lolite()" href="../../_variables/completionposts.html">completionposts</a>)) {
<a name="l827"><span class="linenum"> 827</span></a>                  <a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a>-&gt;<a class="function" onClick="logFunction('update_state')" href="../../_functions/update_state.html" onMouseOver="funcPopup(event,'update_state')">update_state</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="constant" onClick="logConstant('COMPLETION_COMPLETE')" href="../../_constants/COMPLETION_COMPLETE.html" onMouseOver="constPopup(event,'COMPLETION_COMPLETE')">COMPLETION_COMPLETE</a>);
<a name="l828"><span class="linenum"> 828</span></a>              }
<a name="l829"><span class="linenum"> 829</span></a>  
<a name="l830"><span class="linenum"> 830</span></a>              <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../../_variables/settings.html">$settings</a> = new stdClass();
<a name="l831"><span class="linenum"> 831</span></a>              <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../../_variables/settings.html">$settings</a>-&gt;<a onClick="logVariable('discussionsubscribe')" class="var it43241" onMouseOver="hilite(43241)" onMouseOut="lolite()" href="../../_variables/discussionsubscribe.html">discussionsubscribe</a> = <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['discussionsubscribe'];
<a name="l832"><span class="linenum"> 832</span></a>              <a class="function" onClick="logFunction('forum_post_subscription')" href="../../_functions/forum_post_subscription.html" onMouseOver="funcPopup(event,'forum_post_subscription')">forum_post_subscription</a>(<a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../../_variables/settings.html">$settings</a>, <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>, <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>);
<a name="l833"><span class="linenum"> 833</span></a>          } else {
<a name="l834"><span class="linenum"> 834</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('couldnotadd', 'forum');
<a name="l835"><span class="linenum"> 835</span></a>          }
<a name="l836"><span class="linenum"> 836</span></a>  
<a name="l837"><span class="linenum"> 837</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = array();
<a name="l838"><span class="linenum"> 838</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>['postid'] = <a class="var it23839" onMouseOver="hilite(23839)" onMouseOut="lolite()" onClick="logVariable('postid')" href="../../_variables/postid.html">$postid</a>;
<a name="l839"><span class="linenum"> 839</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>['warnings'] = <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../_variables/warnings.html">$warnings</a>;
<a name="l840"><span class="linenum"> 840</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l841"><span class="linenum"> 841</span></a>      }
<a name="l842"><span class="linenum"> 842</span></a>  
<a name="l843"><span class="linenum"> 843</span></a>      <span class="comment">/**</span>
<a name="l844"><span class="linenum"> 844</span></a>  <span class="comment">     * Returns description of method result value</span>
<a name="l845"><span class="linenum"> 845</span></a>  <span class="comment">     *</span>
<a name="l846"><span class="linenum"> 846</span></a>  <span class="comment">     * @return external_description</span>
<a name="l847"><span class="linenum"> 847</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l848"><span class="linenum"> 848</span></a>  <span class="comment">     */</span>
<a name="l849"><span class="linenum"> 849</span></a>      public static function <a class="function" onClick="logFunction('add_discussion_post_returns')" href="../../_functions/add_discussion_post_returns.html" onMouseOver="funcPopup(event,'add_discussion_post_returns')">add_discussion_post_returns</a>() {
<a name="l850"><span class="linenum"> 850</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l851"><span class="linenum"> 851</span></a>              array(
<a name="l852"><span class="linenum"> 852</span></a>                  'postid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, '<span class="keyword">new </span><a class="class" onClick="logClass('post')" href="../../_classes/post.html" onMouseOver="classPopup(event,'post')">post</a> id'),
<a name="l853"><span class="linenum"> 853</span></a>                  'warnings' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_warnings')" href="../../_classes/external_warnings.html" onMouseOver="classPopup(event,'external_warnings')">external_warnings</a>()
<a name="l854"><span class="linenum"> 854</span></a>              )
<a name="l855"><span class="linenum"> 855</span></a>          );
<a name="l856"><span class="linenum"> 856</span></a>      }
<a name="l857"><span class="linenum"> 857</span></a>  
<a name="l858"><span class="linenum"> 858</span></a>      <span class="comment">/**</span>
<a name="l859"><span class="linenum"> 859</span></a>  <span class="comment">     * Returns description of method parameters</span>
<a name="l860"><span class="linenum"> 860</span></a>  <span class="comment">     *</span>
<a name="l861"><span class="linenum"> 861</span></a>  <span class="comment">     * @return external_function_parameters</span>
<a name="l862"><span class="linenum"> 862</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l863"><span class="linenum"> 863</span></a>  <span class="comment">     */</span>
<a name="l864"><span class="linenum"> 864</span></a>      public static function <a class="function" onClick="logFunction('add_discussion_parameters')" href="../../_functions/add_discussion_parameters.html" onMouseOver="funcPopup(event,'add_discussion_parameters')">add_discussion_parameters</a>() {
<a name="l865"><span class="linenum"> 865</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_function_parameters')" href="../../_classes/external_function_parameters.html" onMouseOver="classPopup(event,'external_function_parameters')">external_function_parameters</a>(
<a name="l866"><span class="linenum"> 866</span></a>              array(
<a name="l867"><span class="linenum"> 867</span></a>                  'forumid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Forum instance ID'),
<a name="l868"><span class="linenum"> 868</span></a>                  'subject' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'New Discussion subject'),
<a name="l869"><span class="linenum"> 869</span></a>                  'message' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'New Discussion <a class="function" onClick="logFunction('message')" href="../../_functions/message.html" onMouseOver="funcPopup(event,'message')">message</a> (only html format allowed)'),
<a name="l870"><span class="linenum"> 870</span></a>                  'groupid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'The group, default to -1', <a class="constant" onClick="logConstant('VALUE_DEFAULT')" href="../../_constants/VALUE_DEFAULT.html" onMouseOver="constPopup(event,'VALUE_DEFAULT')">VALUE_DEFAULT</a>, -1),
<a name="l871"><span class="linenum"> 871</span></a>                  'options' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_multiple_structure')" href="../../_classes/external_multiple_structure.html" onMouseOver="classPopup(event,'external_multiple_structure')">external_multiple_structure</a> (
<a name="l872"><span class="linenum"> 872</span></a>                      <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l873"><span class="linenum"> 873</span></a>                          array(
<a name="l874"><span class="linenum"> 874</span></a>                              'name' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_ALPHANUM')" href="../../_constants/PARAM_ALPHANUM.html" onMouseOver="constPopup(event,'PARAM_ALPHANUM')">PARAM_ALPHANUM</a>,
<a name="l875"><span class="linenum"> 875</span></a>                                          'The allowed keys (value format) are:
<a name="l876"><span class="linenum"> 876</span></a>                                          discussionsubscribe (bool); subscribe to the discussion?, default to true
<a name="l877"><span class="linenum"> 877</span></a>                                          discussionpinned    (bool); is the discussion pinned, default to false
<a name="l878"><span class="linenum"> 878</span></a>                                          inlineattachmentsid              (int); the draft file area id for inline attachments
<a name="l879"><span class="linenum"> 879</span></a>                                          attachmentsid       (int); the draft file area id for attachments
<a name="l880"><span class="linenum"> 880</span></a>                              '),
<a name="l881"><span class="linenum"> 881</span></a>                              'value' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'The value of the option,
<a name="l882"><span class="linenum"> 882</span></a>                                                              This param is validated in the external function.'
<a name="l883"><span class="linenum"> 883</span></a>                          )
<a name="l884"><span class="linenum"> 884</span></a>                      )
<a name="l885"><span class="linenum"> 885</span></a>                  ), 'Options', <a class="constant" onClick="logConstant('VALUE_DEFAULT')" href="../../_constants/VALUE_DEFAULT.html" onMouseOver="constPopup(event,'VALUE_DEFAULT')">VALUE_DEFAULT</a>, array())
<a name="l886"><span class="linenum"> 886</span></a>              )
<a name="l887"><span class="linenum"> 887</span></a>          );
<a name="l888"><span class="linenum"> 888</span></a>      }
<a name="l889"><span class="linenum"> 889</span></a>  
<a name="l890"><span class="linenum"> 890</span></a>      <span class="comment">/**</span>
<a name="l891"><span class="linenum"> 891</span></a>  <span class="comment">     * Add a new discussion into an existing forum.</span>
<a name="l892"><span class="linenum"> 892</span></a>  <span class="comment">     *</span>
<a name="l893"><span class="linenum"> 893</span></a>  <span class="comment">     * @param int $forumid the forum instance id</span>
<a name="l894"><span class="linenum"> 894</span></a>  <span class="comment">     * @param string $subject new discussion subject</span>
<a name="l895"><span class="linenum"> 895</span></a>  <span class="comment">     * @param string $message new discussion message (only html format allowed)</span>
<a name="l896"><span class="linenum"> 896</span></a>  <span class="comment">     * @param int $groupid the user course group</span>
<a name="l897"><span class="linenum"> 897</span></a>  <span class="comment">     * @param array $options optional settings</span>
<a name="l898"><span class="linenum"> 898</span></a>  <span class="comment">     * @return array of warnings and the new discussion id</span>
<a name="l899"><span class="linenum"> 899</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l900"><span class="linenum"> 900</span></a>  <span class="comment">     * @throws moodle_exception</span>
<a name="l901"><span class="linenum"> 901</span></a>  <span class="comment">     */</span>
<a name="l902"><span class="linenum"> 902</span></a>      public static function <a class="function" onClick="logFunction('add_discussion')" href="../../_functions/add_discussion.html" onMouseOver="funcPopup(event,'add_discussion')">add_discussion</a>(<a class="var it7863" onMouseOver="hilite(7863)" onMouseOut="lolite()" onClick="logVariable('forumid')" href="../../_variables/forumid.html">$forumid</a>, <a class="var it1792" onMouseOver="hilite(1792)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../_variables/subject.html">$subject</a>, <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../_variables/message.html">$message</a>, <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a> = -1, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = array()) {
<a name="l903"><span class="linenum"> 903</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l904"><span class="linenum"> 904</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . "<a class="filename" href="../../mod/forum/lib.php.html">/mod/forum/lib.php</a>");
<a name="l905"><span class="linenum"> 905</span></a>  
<a name="l906"><span class="linenum"> 906</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = self::<a class="function" onClick="logFunction('validate_parameters')" href="../../_functions/validate_parameters.html" onMouseOver="funcPopup(event,'validate_parameters')">validate_parameters</a>(self::<a class="function" onClick="logFunction('add_discussion_parameters')" href="../../_functions/add_discussion_parameters.html" onMouseOver="funcPopup(event,'add_discussion_parameters')">add_discussion_parameters</a>(),
<a name="l907"><span class="linenum"> 907</span></a>                                              array(
<a name="l908"><span class="linenum"> 908</span></a>                                                  'forumid' =&gt; <a class="var it7863" onMouseOver="hilite(7863)" onMouseOut="lolite()" onClick="logVariable('forumid')" href="../../_variables/forumid.html">$forumid</a>,
<a name="l909"><span class="linenum"> 909</span></a>                                                  'subject' =&gt; <a class="var it1792" onMouseOver="hilite(1792)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../_variables/subject.html">$subject</a>,
<a name="l910"><span class="linenum"> 910</span></a>                                                  'message' =&gt; <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../_variables/message.html">$message</a>,
<a name="l911"><span class="linenum"> 911</span></a>                                                  'groupid' =&gt; <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>,
<a name="l912"><span class="linenum"> 912</span></a>                                                  'options' =&gt; <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>
<a name="l913"><span class="linenum"> 913</span></a>                                              ));
<a name="l914"><span class="linenum"> 914</span></a>  <span class="comment">        // Validate options.</span>
<a name="l915"><span class="linenum"> 915</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = array(
<a name="l916"><span class="linenum"> 916</span></a>              'discussionsubscribe' =&gt; true,
<a name="l917"><span class="linenum"> 917</span></a>              'discussionpinned' =&gt; false,
<a name="l918"><span class="linenum"> 918</span></a>              'inlineattachmentsid' =&gt; 0,
<a name="l919"><span class="linenum"> 919</span></a>              'attachmentsid' =&gt; null
<a name="l920"><span class="linenum"> 920</span></a>          );
<a name="l921"><span class="linenum"> 921</span></a>          foreach (<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['options'] as <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('option')" href="../../_variables/option.html">$option</a>) {
<a name="l922"><span class="linenum"> 922</span></a>              <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('option')" href="../../_variables/option.html">$option</a>['name']);
<a name="l923"><span class="linenum"> 923</span></a>              switch (<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>) {
<a name="l924"><span class="linenum"> 924</span></a>                  case 'discussionsubscribe':
<a name="l925"><span class="linenum"> 925</span></a>                      <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> = <a class="function" onClick="logFunction('clean_param')" href="../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('option')" href="../../_variables/option.html">$option</a>['value'], <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>);
<a name="l926"><span class="linenum"> 926</span></a>                      break;
<a name="l927"><span class="linenum"> 927</span></a>                  case 'discussionpinned':
<a name="l928"><span class="linenum"> 928</span></a>                      <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> = <a class="function" onClick="logFunction('clean_param')" href="../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('option')" href="../../_variables/option.html">$option</a>['value'], <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>);
<a name="l929"><span class="linenum"> 929</span></a>                      break;
<a name="l930"><span class="linenum"> 930</span></a>                  case 'inlineattachmentsid':
<a name="l931"><span class="linenum"> 931</span></a>                      <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> = <a class="function" onClick="logFunction('clean_param')" href="../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('option')" href="../../_variables/option.html">$option</a>['value'], <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l932"><span class="linenum"> 932</span></a>                      break;
<a name="l933"><span class="linenum"> 933</span></a>                  case 'attachmentsid':
<a name="l934"><span class="linenum"> 934</span></a>                      <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> = <a class="function" onClick="logFunction('clean_param')" href="../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('option')" href="../../_variables/option.html">$option</a>['value'], <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l935"><span class="linenum"> 935</span></a>                      break;
<a name="l936"><span class="linenum"> 936</span></a>                  default:
<a name="l937"><span class="linenum"> 937</span></a>                      throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('errorinvalidparam', 'webservice', '', <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>);
<a name="l938"><span class="linenum"> 938</span></a>              }
<a name="l939"><span class="linenum"> 939</span></a>              <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>[<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>] = <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>;
<a name="l940"><span class="linenum"> 940</span></a>          }
<a name="l941"><span class="linenum"> 941</span></a>  
<a name="l942"><span class="linenum"> 942</span></a>          <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../_variables/warnings.html">$warnings</a> = array();
<a name="l943"><span class="linenum"> 943</span></a>  
<a name="l944"><span class="linenum"> 944</span></a>  <span class="comment">        // Request and permission validation.</span>
<a name="l945"><span class="linenum"> 945</span></a>          <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('forum', array('id' =&gt; <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['forumid']), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l946"><span class="linenum"> 946</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>) = <a class="function" onClick="logFunction('get_course_and_cm_from_instance')" href="../../_functions/get_course_and_cm_from_instance.html" onMouseOver="funcPopup(event,'get_course_and_cm_from_instance')">get_course_and_cm_from_instance</a>(<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>, 'forum');
<a name="l947"><span class="linenum"> 947</span></a>  
<a name="l948"><span class="linenum"> 948</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l949"><span class="linenum"> 949</span></a>          self::<a class="function" onClick="logFunction('validate_context')" href="../../_functions/validate_context.html" onMouseOver="funcPopup(event,'validate_context')">validate_context</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l950"><span class="linenum"> 950</span></a>  
<a name="l951"><span class="linenum"> 951</span></a>  <span class="comment">        // Normalize group.</span>
<a name="l952"><span class="linenum"> 952</span></a>          if (!<a class="function" onClick="logFunction('groups_get_activity_groupmode')" href="../../_functions/groups_get_activity_groupmode.html" onMouseOver="funcPopup(event,'groups_get_activity_groupmode')">groups_get_activity_groupmode</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>)) {
<a name="l953"><span class="linenum"> 953</span></a>  <span class="comment">            // Groups not supported, force to -1.</span>
<a name="l954"><span class="linenum"> 954</span></a>              <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a> = -1;
<a name="l955"><span class="linenum"> 955</span></a>          } else {
<a name="l956"><span class="linenum"> 956</span></a>  <span class="comment">            // Check if we receive the default or and empty value for groupid,</span>
<a name="l957"><span class="linenum"> 957</span></a>  <span class="comment">            // in this case, get the group for the user in the activity.</span>
<a name="l958"><span class="linenum"> 958</span></a>              if (<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a> === -1 or empty(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['groupid'])) {
<a name="l959"><span class="linenum"> 959</span></a>                  <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a> = <a class="function" onClick="logFunction('groups_get_activity_group')" href="../../_functions/groups_get_activity_group.html" onMouseOver="funcPopup(event,'groups_get_activity_group')">groups_get_activity_group</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l960"><span class="linenum"> 960</span></a>              } else {
<a name="l961"><span class="linenum"> 961</span></a>  <span class="comment">                // Here we rely in the group passed, forum_user_can_post_discussion will validate the group.</span>
<a name="l962"><span class="linenum"> 962</span></a>                  <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a> = <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['groupid'];
<a name="l963"><span class="linenum"> 963</span></a>              }
<a name="l964"><span class="linenum"> 964</span></a>          }
<a name="l965"><span class="linenum"> 965</span></a>  
<a name="l966"><span class="linenum"> 966</span></a>          if (!<a class="function" onClick="logFunction('forum_user_can_post_discussion')" href="../../_functions/forum_user_can_post_discussion.html" onMouseOver="funcPopup(event,'forum_user_can_post_discussion')">forum_user_can_post_discussion</a>(<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>, <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>, -1, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l967"><span class="linenum"> 967</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('cannotcreatediscussion', 'forum');
<a name="l968"><span class="linenum"> 968</span></a>          }
<a name="l969"><span class="linenum"> 969</span></a>  
<a name="l970"><span class="linenum"> 970</span></a>          <a class="var it7440" onMouseOver="hilite(7440)" onMouseOut="lolite()" onClick="logVariable('thresholdwarning')" href="../../_variables/thresholdwarning.html">$thresholdwarning</a> = <a class="function" onClick="logFunction('forum_check_throttling')" href="../../_functions/forum_check_throttling.html" onMouseOver="funcPopup(event,'forum_check_throttling')">forum_check_throttling</a>(<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l971"><span class="linenum"> 971</span></a>          <a class="function" onClick="logFunction('forum_check_blocking_threshold')" href="../../_functions/forum_check_blocking_threshold.html" onMouseOver="funcPopup(event,'forum_check_blocking_threshold')">forum_check_blocking_threshold</a>(<a class="var it7440" onMouseOver="hilite(7440)" onMouseOut="lolite()" onClick="logVariable('thresholdwarning')" href="../../_variables/thresholdwarning.html">$thresholdwarning</a>);
<a name="l972"><span class="linenum"> 972</span></a>  
<a name="l973"><span class="linenum"> 973</span></a>  <span class="comment">        // Create the discussion.</span>
<a name="l974"><span class="linenum"> 974</span></a>          <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a> = new stdClass();
<a name="l975"><span class="linenum"> 975</span></a>          <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('course')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/course.html">course</a> = <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l976"><span class="linenum"> 976</span></a>          <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('forum')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/forum.html">forum</a> = <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('id')" class="var it43075" onMouseOver="hilite(43075)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l977"><span class="linenum"> 977</span></a>          <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('message')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/message.html">message</a> = <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['message'];
<a name="l978"><span class="linenum"> 978</span></a>          <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('messageformat')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/messageformat.html">messageformat</a> = <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>;   <span class="comment">// Force formatting for now.</span>
<a name="l979"><span class="linenum"> 979</span></a>          <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('messagetrust')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/messagetrust.html">messagetrust</a> = <a class="function" onClick="logFunction('trusttext_trusted')" href="../../_functions/trusttext_trusted.html" onMouseOver="funcPopup(event,'trusttext_trusted')">trusttext_trusted</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l980"><span class="linenum"> 980</span></a>          <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('itemid')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/itemid.html">itemid</a> = <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['inlineattachmentsid'];
<a name="l981"><span class="linenum"> 981</span></a>          <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('groupid')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a> = <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>;
<a name="l982"><span class="linenum"> 982</span></a>          <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('mailnow')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/mailnow.html">mailnow</a> = 0;
<a name="l983"><span class="linenum"> 983</span></a>          <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('subject')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/subject.html">subject</a> = <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['subject'];
<a name="l984"><span class="linenum"> 984</span></a>          <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('name')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/name.html">name</a> = <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('subject')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/subject.html">subject</a>;
<a name="l985"><span class="linenum"> 985</span></a>          <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('timestart')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/timestart.html">timestart</a> = 0;
<a name="l986"><span class="linenum"> 986</span></a>          <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('timeend')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/timeend.html">timeend</a> = 0;
<a name="l987"><span class="linenum"> 987</span></a>          <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('attachments')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/attachments.html">attachments</a> = <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['attachmentsid'];
<a name="l988"><span class="linenum"> 988</span></a>  
<a name="l989"><span class="linenum"> 989</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/forum:pindiscussions', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>) &amp;&amp; <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['discussionpinned']) {
<a name="l990"><span class="linenum"> 990</span></a>              <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('pinned')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/pinned.html">pinned</a> = <a class="constant" onClick="logConstant('FORUM_DISCUSSION_PINNED')" href="../../_constants/FORUM_DISCUSSION_PINNED.html" onMouseOver="constPopup(event,'FORUM_DISCUSSION_PINNED')">FORUM_DISCUSSION_PINNED</a>;
<a name="l991"><span class="linenum"> 991</span></a>          } else {
<a name="l992"><span class="linenum"> 992</span></a>              <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('pinned')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/pinned.html">pinned</a> = <a class="constant" onClick="logConstant('FORUM_DISCUSSION_UNPINNED')" href="../../_constants/FORUM_DISCUSSION_UNPINNED.html" onMouseOver="constPopup(event,'FORUM_DISCUSSION_UNPINNED')">FORUM_DISCUSSION_UNPINNED</a>;
<a name="l993"><span class="linenum"> 993</span></a>          }
<a name="l994"><span class="linenum"> 994</span></a>          <a class="var it30676" onMouseOver="hilite(30676)" onMouseOut="lolite()" onClick="logVariable('fakemform')" href="../../_variables/fakemform.html">$fakemform</a> = <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['attachmentsid'];
<a name="l995"><span class="linenum"> 995</span></a>          if (<a class="var it16125" onMouseOver="hilite(16125)" onMouseOut="lolite()" onClick="logVariable('discussionid')" href="../../_variables/discussionid.html">$discussionid</a> = <a class="function" onClick="logFunction('forum_add_discussion')" href="../../_functions/forum_add_discussion.html" onMouseOver="funcPopup(event,'forum_add_discussion')">forum_add_discussion</a>(<a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>, <a class="var it30676" onMouseOver="hilite(30676)" onMouseOut="lolite()" onClick="logVariable('fakemform')" href="../../_variables/fakemform.html">$fakemform</a>)) {
<a name="l996"><span class="linenum"> 996</span></a>  
<a name="l997"><span class="linenum"> 997</span></a>              <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('id')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it16125" onMouseOver="hilite(16125)" onMouseOut="lolite()" onClick="logVariable('discussionid')" href="../../_variables/discussionid.html">$discussionid</a>;
<a name="l998"><span class="linenum"> 998</span></a>  
<a name="l999"><span class="linenum"> 999</span></a>  <span class="comment">            // Trigger events and completion.</span>
<a name="l1000"><span class="linenum">1000</span></a>  
<a name="l1001"><span class="linenum">1001</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array(
<a name="l1002"><span class="linenum">1002</span></a>                  'context' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>,
<a name="l1003"><span class="linenum">1003</span></a>                  'objectid' =&gt; <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('id')" class="var it43540" onMouseOver="hilite(43540)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l1004"><span class="linenum">1004</span></a>                  'other' =&gt; array(
<a name="l1005"><span class="linenum">1005</span></a>                      'forumid' =&gt; <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('id')" class="var it43075" onMouseOver="hilite(43075)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l1006"><span class="linenum">1006</span></a>                  )
<a name="l1007"><span class="linenum">1007</span></a>              );
<a name="l1008"><span class="linenum">1008</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_forum\event\<a class="class" onClick="logClass('discussion_created')" href="../../_classes/discussion_created.html" onMouseOver="classPopup(event,'discussion_created')">discussion_created</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1009"><span class="linenum">1009</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('forum_discussions', <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>);
<a name="l1010"><span class="linenum">1010</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l1011"><span class="linenum">1011</span></a>  
<a name="l1012"><span class="linenum">1012</span></a>              <a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a> = <span class="keyword">new </span><a class="class" onClick="logClass('completion_info')" href="../../_classes/completion_info.html" onMouseOver="classPopup(event,'completion_info')">completion_info</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l1013"><span class="linenum">1013</span></a>              if (<a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>) &amp;&amp;
<a name="l1014"><span class="linenum">1014</span></a>                      (<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('completiondiscussions')" class="var it43075" onMouseOver="hilite(43075)" onMouseOut="lolite()" href="../../_variables/completiondiscussions.html">completiondiscussions</a> || <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('completionposts')" class="var it43075" onMouseOver="hilite(43075)" onMouseOut="lolite()" href="../../_variables/completionposts.html">completionposts</a>)) {
<a name="l1015"><span class="linenum">1015</span></a>                  <a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a>-&gt;<a class="function" onClick="logFunction('update_state')" href="../../_functions/update_state.html" onMouseOver="funcPopup(event,'update_state')">update_state</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="constant" onClick="logConstant('COMPLETION_COMPLETE')" href="../../_constants/COMPLETION_COMPLETE.html" onMouseOver="constPopup(event,'COMPLETION_COMPLETE')">COMPLETION_COMPLETE</a>);
<a name="l1016"><span class="linenum">1016</span></a>              }
<a name="l1017"><span class="linenum">1017</span></a>  
<a name="l1018"><span class="linenum">1018</span></a>              <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../../_variables/settings.html">$settings</a> = new stdClass();
<a name="l1019"><span class="linenum">1019</span></a>              <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../../_variables/settings.html">$settings</a>-&gt;<a onClick="logVariable('discussionsubscribe')" class="var it43241" onMouseOver="hilite(43241)" onMouseOut="lolite()" href="../../_variables/discussionsubscribe.html">discussionsubscribe</a> = <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['discussionsubscribe'];
<a name="l1020"><span class="linenum">1020</span></a>              <a class="function" onClick="logFunction('forum_post_subscription')" href="../../_functions/forum_post_subscription.html" onMouseOver="funcPopup(event,'forum_post_subscription')">forum_post_subscription</a>(<a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../../_variables/settings.html">$settings</a>, <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>, <a class="var it4240" onMouseOver="hilite(4240)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>);
<a name="l1021"><span class="linenum">1021</span></a>          } else {
<a name="l1022"><span class="linenum">1022</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('couldnotadd', 'forum');
<a name="l1023"><span class="linenum">1023</span></a>          }
<a name="l1024"><span class="linenum">1024</span></a>  
<a name="l1025"><span class="linenum">1025</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = array();
<a name="l1026"><span class="linenum">1026</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>['discussionid'] = <a class="var it16125" onMouseOver="hilite(16125)" onMouseOut="lolite()" onClick="logVariable('discussionid')" href="../../_variables/discussionid.html">$discussionid</a>;
<a name="l1027"><span class="linenum">1027</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>['warnings'] = <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../_variables/warnings.html">$warnings</a>;
<a name="l1028"><span class="linenum">1028</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l1029"><span class="linenum">1029</span></a>      }
<a name="l1030"><span class="linenum">1030</span></a>  
<a name="l1031"><span class="linenum">1031</span></a>      <span class="comment">/**</span>
<a name="l1032"><span class="linenum">1032</span></a>  <span class="comment">     * Returns description of method result value</span>
<a name="l1033"><span class="linenum">1033</span></a>  <span class="comment">     *</span>
<a name="l1034"><span class="linenum">1034</span></a>  <span class="comment">     * @return external_description</span>
<a name="l1035"><span class="linenum">1035</span></a>  <span class="comment">     * @since Moodle 3.0</span>
<a name="l1036"><span class="linenum">1036</span></a>  <span class="comment">     */</span>
<a name="l1037"><span class="linenum">1037</span></a>      public static function <a class="function" onClick="logFunction('add_discussion_returns')" href="../../_functions/add_discussion_returns.html" onMouseOver="funcPopup(event,'add_discussion_returns')">add_discussion_returns</a>() {
<a name="l1038"><span class="linenum">1038</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l1039"><span class="linenum">1039</span></a>              array(
<a name="l1040"><span class="linenum">1040</span></a>                  'discussionid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'New Discussion ID'),
<a name="l1041"><span class="linenum">1041</span></a>                  'warnings' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_warnings')" href="../../_classes/external_warnings.html" onMouseOver="classPopup(event,'external_warnings')">external_warnings</a>()
<a name="l1042"><span class="linenum">1042</span></a>              )
<a name="l1043"><span class="linenum">1043</span></a>          );
<a name="l1044"><span class="linenum">1044</span></a>      }
<a name="l1045"><span class="linenum">1045</span></a>  
<a name="l1046"><span class="linenum">1046</span></a>      <span class="comment">/**</span>
<a name="l1047"><span class="linenum">1047</span></a>  <span class="comment">     * Returns description of method parameters</span>
<a name="l1048"><span class="linenum">1048</span></a>  <span class="comment">     *</span>
<a name="l1049"><span class="linenum">1049</span></a>  <span class="comment">     * @return external_function_parameters</span>
<a name="l1050"><span class="linenum">1050</span></a>  <span class="comment">     * @since Moodle 3.1</span>
<a name="l1051"><span class="linenum">1051</span></a>  <span class="comment">     */</span>
<a name="l1052"><span class="linenum">1052</span></a>      public static function <a class="function" onClick="logFunction('can_add_discussion_parameters')" href="../../_functions/can_add_discussion_parameters.html" onMouseOver="funcPopup(event,'can_add_discussion_parameters')">can_add_discussion_parameters</a>() {
<a name="l1053"><span class="linenum">1053</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_function_parameters')" href="../../_classes/external_function_parameters.html" onMouseOver="classPopup(event,'external_function_parameters')">external_function_parameters</a>(
<a name="l1054"><span class="linenum">1054</span></a>              array(
<a name="l1055"><span class="linenum">1055</span></a>                  'forumid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Forum instance ID'),
<a name="l1056"><span class="linenum">1056</span></a>                  'groupid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'The group to check, default to active group.
<a name="l1057"><span class="linenum">1057</span></a>                                                  Use -1 to check if the user can post in all the groups.', <a class="constant" onClick="logConstant('VALUE_DEFAULT')" href="../../_constants/VALUE_DEFAULT.html" onMouseOver="constPopup(event,'VALUE_DEFAULT')">VALUE_DEFAULT</a>, null)
<a name="l1058"><span class="linenum">1058</span></a>              )
<a name="l1059"><span class="linenum">1059</span></a>          );
<a name="l1060"><span class="linenum">1060</span></a>      }
<a name="l1061"><span class="linenum">1061</span></a>  
<a name="l1062"><span class="linenum">1062</span></a>      <span class="comment">/**</span>
<a name="l1063"><span class="linenum">1063</span></a>  <span class="comment">     * Check if the current user can add discussions in the given forum (and optionally for the given group).</span>
<a name="l1064"><span class="linenum">1064</span></a>  <span class="comment">     *</span>
<a name="l1065"><span class="linenum">1065</span></a>  <span class="comment">     * @param int $forumid the forum instance id</span>
<a name="l1066"><span class="linenum">1066</span></a>  <span class="comment">     * @param int $groupid the group to check, default to active group. Use -1 to check if the user can post in all the groups.</span>
<a name="l1067"><span class="linenum">1067</span></a>  <span class="comment">     * @return array of warnings and the status (true if the user can add discussions)</span>
<a name="l1068"><span class="linenum">1068</span></a>  <span class="comment">     * @since Moodle 3.1</span>
<a name="l1069"><span class="linenum">1069</span></a>  <span class="comment">     * @throws moodle_exception</span>
<a name="l1070"><span class="linenum">1070</span></a>  <span class="comment">     */</span>
<a name="l1071"><span class="linenum">1071</span></a>      public static function <a class="function" onClick="logFunction('can_add_discussion')" href="../../_functions/can_add_discussion.html" onMouseOver="funcPopup(event,'can_add_discussion')">can_add_discussion</a>(<a class="var it7863" onMouseOver="hilite(7863)" onMouseOut="lolite()" onClick="logVariable('forumid')" href="../../_variables/forumid.html">$forumid</a>, <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a> = null) {
<a name="l1072"><span class="linenum">1072</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l1073"><span class="linenum">1073</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . "<a class="filename" href="../../mod/forum/lib.php.html">/mod/forum/lib.php</a>");
<a name="l1074"><span class="linenum">1074</span></a>  
<a name="l1075"><span class="linenum">1075</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = self::<a class="function" onClick="logFunction('validate_parameters')" href="../../_functions/validate_parameters.html" onMouseOver="funcPopup(event,'validate_parameters')">validate_parameters</a>(self::<a class="function" onClick="logFunction('can_add_discussion_parameters')" href="../../_functions/can_add_discussion_parameters.html" onMouseOver="funcPopup(event,'can_add_discussion_parameters')">can_add_discussion_parameters</a>(),
<a name="l1076"><span class="linenum">1076</span></a>                                              array(
<a name="l1077"><span class="linenum">1077</span></a>                                                  'forumid' =&gt; <a class="var it7863" onMouseOver="hilite(7863)" onMouseOut="lolite()" onClick="logVariable('forumid')" href="../../_variables/forumid.html">$forumid</a>,
<a name="l1078"><span class="linenum">1078</span></a>                                                  'groupid' =&gt; <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>,
<a name="l1079"><span class="linenum">1079</span></a>                                              ));
<a name="l1080"><span class="linenum">1080</span></a>          <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../_variables/warnings.html">$warnings</a> = array();
<a name="l1081"><span class="linenum">1081</span></a>  
<a name="l1082"><span class="linenum">1082</span></a>  <span class="comment">        // Request and permission validation.</span>
<a name="l1083"><span class="linenum">1083</span></a>          <a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('forum', array('id' =&gt; <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['forumid']), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l1084"><span class="linenum">1084</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>) = <a class="function" onClick="logFunction('get_course_and_cm_from_instance')" href="../../_functions/get_course_and_cm_from_instance.html" onMouseOver="funcPopup(event,'get_course_and_cm_from_instance')">get_course_and_cm_from_instance</a>(<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>, 'forum');
<a name="l1085"><span class="linenum">1085</span></a>  
<a name="l1086"><span class="linenum">1086</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1087"><span class="linenum">1087</span></a>          self::<a class="function" onClick="logFunction('validate_context')" href="../../_functions/validate_context.html" onMouseOver="funcPopup(event,'validate_context')">validate_context</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l1088"><span class="linenum">1088</span></a>  
<a name="l1089"><span class="linenum">1089</span></a>          <a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a> = <a class="function" onClick="logFunction('forum_user_can_post_discussion')" href="../../_functions/forum_user_can_post_discussion.html" onMouseOver="funcPopup(event,'forum_user_can_post_discussion')">forum_user_can_post_discussion</a>(<a class="var it504" onMouseOver="hilite(504)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['groupid'], -1, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l1090"><span class="linenum">1090</span></a>  
<a name="l1091"><span class="linenum">1091</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = array();
<a name="l1092"><span class="linenum">1092</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>['status'] = <a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>;
<a name="l1093"><span class="linenum">1093</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>['warnings'] = <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../_variables/warnings.html">$warnings</a>;
<a name="l1094"><span class="linenum">1094</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l1095"><span class="linenum">1095</span></a>      }
<a name="l1096"><span class="linenum">1096</span></a>  
<a name="l1097"><span class="linenum">1097</span></a>      <span class="comment">/**</span>
<a name="l1098"><span class="linenum">1098</span></a>  <span class="comment">     * Returns description of method result value</span>
<a name="l1099"><span class="linenum">1099</span></a>  <span class="comment">     *</span>
<a name="l1100"><span class="linenum">1100</span></a>  <span class="comment">     * @return external_description</span>
<a name="l1101"><span class="linenum">1101</span></a>  <span class="comment">     * @since Moodle 3.1</span>
<a name="l1102"><span class="linenum">1102</span></a>  <span class="comment">     */</span>
<a name="l1103"><span class="linenum">1103</span></a>      public static function <a class="function" onClick="logFunction('can_add_discussion_returns')" href="../../_functions/can_add_discussion_returns.html" onMouseOver="funcPopup(event,'can_add_discussion_returns')">can_add_discussion_returns</a>() {
<a name="l1104"><span class="linenum">1104</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l1105"><span class="linenum">1105</span></a>              array(
<a name="l1106"><span class="linenum">1106</span></a>                  'status' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_BOOL')" href="../../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>, 'True if the user can add discussions, false otherwise.'),
<a name="l1107"><span class="linenum">1107</span></a>                  'warnings' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_warnings')" href="../../_classes/external_warnings.html" onMouseOver="classPopup(event,'external_warnings')">external_warnings</a>()
<a name="l1108"><span class="linenum">1108</span></a>              )
<a name="l1109"><span class="linenum">1109</span></a>          );
<a name="l1110"><span class="linenum">1110</span></a>      }
<a name="l1111"><span class="linenum">1111</span></a>  
<a name="l1112"><span class="linenum">1112</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'add_discussion_post': ['add_discussion_post', 'Create new posts into an existing discussion. ', [['mod/forum','externallib.php',723]], 4],
'get_forum_discussion_posts': ['get_forum_discussion_posts', 'Returns a list of forum posts for a discussion ', [['mod/forum','externallib.php',168]], 7],
'forum_add_new_post': ['forum_add_new_post', 'Add a new post in an existing discussion. ', [['mod/forum','lib.php',4354]], 3],
'forum_get_discussions_unread': ['forum_get_discussions_unread', '', [['mod/forum','lib.php',2839]], 2],
'view_forum_discussion': ['view_forum_discussion', 'Trigger the discussion viewed event. ', [['mod/forum','externallib.php',640]], 0],
'enrol_get_my_courses': ['enrol_get_my_courses', 'Returns list of courses current $USER is enrolled in and can access ', [['lib','enrollib.php',512]], 30],
'get_forum_discussion_posts_returns': ['get_forum_discussion_posts_returns', 'Describes the get_forum_discussion_posts return value. ', [['mod/forum','externallib.php',298]], 7],
'create': ['create', 'Auto-scan an incoming line to determine the response type. ', [['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',65],['lib/google/src/Google/Service','Partners.php',492],['lib/simplepie/library/SimplePie','Cache.php',95],['lib/google/src/Google/Service','YouTubeReporting.php',237],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',81],['lib/google/src/Google/Service','MapsEngine.php',1677],['lib/google/src/Google/Service','MapsEngine.php',1977],['lib/google/src/Google/Service','MapsEngine.php',2253],['lib/google/src/Google/Service','MapsEngine.php',2330],['lib/google/src/Google/Service','MapsEngine.php',2898],['lib/spout/src/Spout/Writer','WriterFactory.php',18],['lib/google/src/Google/Service','Dns.php',290],['lib/google/src/Google/Service','Dns.php',363],['lib/google/src/Google/Service','Appengine.php',438],['tag/classes','collection.php',188],['lib/adodb','adodb-xmlschema.inc.php',152],['lib/adodb','adodb-xmlschema.inc.php',473],['lib/adodb','adodb-xmlschema.inc.php',738],['lib/adodb','adodb-xmlschema.inc.php',884],['lib/adodb','adodb-xmlschema.inc.php',1129],['mod/quiz','attemptlib.php',100],['mod/quiz','attemptlib.php',596],['lib','weblib.php',3206],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',58],['lib/google/src/Google/Service','Dataflow.php',273],['lib/simplepie/library/SimplePie','Registry.php',153],['competency/classes','persistent.php',387],['lib/google/src/Google/Service','Cloudresourcemanager.php',373],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',270],['lib/google/src/Google/Service','TagManager.php',1007],['lib/google/src/Google/Service','TagManager.php',1097],['lib/google/src/Google/Service','TagManager.php',1249],['lib/google/src/Google/Service','TagManager.php',1342],['lib/google/src/Google/Service','TagManager.php',1436],['lib/google/src/Google/Service','TagManager.php',1530],['lib/google/src/Google/Service','TagManager.php',1681],['mod/lesson','locallib.php',1011],['mod/lesson','locallib.php',2163],['mod/lesson','locallib.php',3212],['lib','modinfolib.php',1732],['repository','lib.php',206],['repository','lib.php',1910],['lib','navigationlib.php',268],['lib/htmlpurifier/HTMLPurifier','Config.php',114],['lib/google/src/Google/Service','Container.php',284],['lib/google/src/Google/Service','Genomics.php',632],['lib/google/src/Google/Service','Genomics.php',721],['lib/google/src/Google/Service','Genomics.php',1312],['lib/google/src/Google/Service','Genomics.php',1427],['lib/google/src/Google/Service','Games.php',1649],['lib/google/src/Google/Service','Games.php',2013],['lib/google/src/Google/Service','Fitness.php',377],['lib/google/src/Google/Service','Gmail.php',747],['lib/google/src/Google/Service','Gmail.php',905],['mod/quiz/classes','structure.php',65],['lib/htmlpurifier/HTMLPurifier','ElementDef.php',135],['lib/adodb','adodb-xmlschema03.inc.php',170],['lib/adodb','adodb-xmlschema03.inc.php',514],['lib/adodb','adodb-xmlschema03.inc.php',779],['lib/adodb','adodb-xmlschema03.inc.php',930],['lib/adodb','adodb-xmlschema03.inc.php',1228],['lib/google/src/Google/Service','Proximitybeacon.php',500],['tag/classes','area.php',205],['course','lib.php',3003],['question/type/ddmarker','shapes.php',170],['lib/classes/event','base.php',149],['lib','coursecatlib.php',325],['repository/filesystem','lib.php',498],['lib/google/src/Google/Service','Storagetransfer.php',281],['calendar','lib.php',2686],['lib/htmlpurifier/HTMLPurifier','Lexer.php',53],['lib/google/src/Google/Service','Classroom.php',445],['lib/google/src/Google/Service','Classroom.php',596],['lib/google/src/Google/Service','Classroom.php',673],['lib/google/src/Google/Service','Classroom.php',783],['lib/google/src/Google/Service','Classroom.php',912],['lib/spout/src/Spout/Reader','ReaderFactory.php',18],['lib/google/src/Google/Service','Pubsub.php',220],['lib/google/src/Google/Service','Pubsub.php',365],['lib/google/src/Google/Service','CloudMonitoring.php',258]], 3276],
'update_state': ['update_state', 'Updates (if necessary) the completion state of activity $cm for the given user. ', [['lib','completionlib.php',507]], 40],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'forum_user_can_see_discussion': ['forum_user_can_see_discussion', '', [['mod/forum','lib.php',5147]], 4],
'out': ['out', 'Returns the selector for use in a CSS rule ', [['lib','csslib.php',1540],['lib','csslib.php',1698],['lib','csslib.php',2078],['lib','csslib.php',2162],['lib','csslib.php',2306],['lib','csslib.php',2495],['lib','csslib.php',3240],['mod/feedback/classes','responses_table.php',332],['lib','moodlelib.php',9729],['lib','weblib.php',545],['lib','tablelib.php',1594],['report/loglive/classes','table_log_ajax.php',37]], 626],
'forum_count_discussions': ['forum_count_discussions', '', [['mod/forum','lib.php',2424]], 3],
'get_forums_by_courses_returns': ['get_forums_by_courses_returns', 'Describes the get_forum return value. ', [['mod/forum','externallib.php',109]], 5],
'forum_check_throttling': ['forum_check_throttling', 'Returns a warning object if a user has reached the number of posts equal to the warning/blocking setting, or false if there is no warning to show. ', [['mod/forum','lib.php',6745]], 4],
'add_discussion': ['add_discussion', 'Add a new discussion into an existing forum. ', [['mod/forum','externallib.php',890]], 12],
'forum_tp_is_tracked': ['forum_tp_is_tracked', 'Tells whether a specific forum is tracked by the user. A user can optionally be specified. If not specified, the current user is assumed. ', [['mod/forum','lib.php',6562]], 32],
'get_area_files': ['get_area_files', 'Returns all area files (optionally limited by itemid) ', [['lib/filestorage','file_storage.php',782],['lib','externallib.php',1134]], 216],
'external_format_string': ['external_format_string', 'Format the string to be returned properly as requested by the either the web service server, either by an internally call. The caller can change the format (raw) with the external_settings singleton All web service servers must set this singleton when parsing the $_GET and $_POST. ', [['lib','externallib.php',850]], 48],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',922],['lib','accesslib.php',344]], 2064],
'forum_discussion_view': ['forum_discussion_view', 'Trigger the discussion viewed event ', [['mod/forum','lib.php',7871]], 3],
'get_forum_discussions_paginated_returns': ['get_forum_discussions_paginated_returns', 'Describes the get_forum_discussions_paginated return value. ', [['mod/forum','externallib.php',513]], 9],
'forum_get_post_full': ['forum_get_post_full', 'Gets a post with all info ready for forum_print_post Most of these joins are just to get the forum id ', [['mod/forum','lib.php',1794]], 13],
'fields': ['fields', '', [['lib/adodb/drivers','adodb-odbtp.inc.php',720],['lib/adodb/drivers','adodb-sqlite3.inc.php',403],['mod/quiz/classes','admin_review_setting.php',65],['lib/adodb/drivers','adodb-ibase.inc.php',865],['lib/adodb/drivers','adodb-postgres64.inc.php',968],['lib/adodb/drivers','adodb-odbc.inc.php',644],['lib/adodb/drivers','adodb-sqlite.inc.php',420],['lib/adodb/drivers','adodb-pdo.inc.php',742],['lib','outputcomponents.php',235],['lib/adodb/drivers','adodb-oci8po.inc.php',104],['lib/adodb/drivers','adodb-mssql.inc.php',906],['lib/adodb/drivers','adodb-mysql.inc.php',774],['lib/adodb/drivers','adodb-mssqlnative.inc.php',895],['lib/adodb/drivers','adodb-oracle.inc.php',267],['lib/adodb','adodb.inc.php',3781],['lib/adodb','adodb.inc.php',4459],['lib/adodb/drivers','adodb-ado5.inc.php',412],['lib/adodb/drivers','adodb-db2.inc.php',756],['lib/adodb/drivers','adodb-oci8.inc.php',1701],['lib/adodb/drivers','adodb-mysqli.inc.php',973],['lib/adodb/drivers','adodb-ado.inc.php',375],['lib/adodb/drivers','adodb-ads.inc.php',690]], 156],
'forum_get_all_discussion_posts': ['forum_get_all_discussion_posts', 'Gets all posts in discussion including top parent. ', [['mod/forum','lib.php',1814]], 5],
'get_forum_discussions_paginated': ['get_forum_discussions_paginated', 'Returns a list of forum discussions optionally sorted and paginated. ', [['mod/forum','externallib.php',357]], 11],
'get_forum_discussion_posts_parameters': ['get_forum_discussion_posts_parameters', 'Describes the parameters for get_forum_discussion_posts. ', [['mod/forum','externallib.php',151]], 1],
'get_coursemodule_from_instance': ['get_coursemodule_from_instance', 'Given an instance number of a module, finds the coursemodule description ', [['lib','datalib.php',1300]], 441],
'require_capability': ['require_capability', 'Wrapper round the require_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',306],['mod/quiz','attemptlib.php',929],['lib','accesslib.php',762],['backup/util/ui','restore_ui_components.php',157]], 690],
'add_record_snapshot': ['add_record_snapshot', 'Add cached data that will be most probably used in event observers. ', [['lib/classes/event','base.php',840]], 332],
'instance': ['instance', 'Returns an instance of the cache_factor method. ', [['cache','disabledlib.php',171],['cache','disabledlib.php',296],['lib/classes','useragent.php',101],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['search/classes','manager.php',109],['cache','locallib.php',52],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['lib/classes','plugin_manager.php',103],['lib/htmlpurifier','HTMLPurifier.php',251],['course/format','lib.php',156],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['admin/tool/installaddon/classes','installer.php',40],['lib','modinfolib.php',373],['cache/classes','helper.php',76],['lib/tests','string_manager_standard_test.php',124],['lib/portfolio','exporter.php',251],['lib/classes/update','validator.php',88],['search/classes','document_factory.php',49],['lib','accesslib.php',6235],['lib','accesslib.php',6487],['lib','accesslib.php',6665],['lib','accesslib.php',6919],['lib','accesslib.php',7180],['lib','accesslib.php',7392],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443],['lib','filterlib.php',80],['search/tests/fixtures','testable_core_search.php',43],['lib/tests/fixtures','testable_update_checker.php',45],['backup/cc','validator.php',35],['cache/classes','config.php',87],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29]], 4647],
'get_forums_by_courses_parameters': ['get_forums_by_courses_parameters', 'Describes the parameters for get_forum. ', [['mod/forum','externallib.php',32]], 1],
'get_url': ['get_url', 'Get URL related to the action ', [['lib/classes/event','competency_plan_unlinked.php',81],['lib/classes/event','grouping_group_assigned.php',57],['lib/classes/event','enrol_instance_deleted.php',79],['report/log/classes/event','user_report_viewed.php',82],['mod/quiz/classes/event','attempt_reviewed.php',72],['lib/classes/event','role_unassigned.php',72],['mod/workshop/classes/event','submission_deleted.php',72],['mod/forum/classes/event','discussion_updated.php',74],['lib/classes/event','course_module_instance_list_viewed.php',84],['lib/classes/event','course_created.php',73],['mod/forum/classes/event','readtracking_enabled.php',73],['mod/wiki/classes/event','page_created.php',77],['lib/classes/event','competency_viewed.php',79],['mod/choice/classes/event','answer_updated.php',81],['lib/simplepie/library/SimplePie','Copyright.php',96],['lib/classes/event','search_indexed.php',69],['lib/classes/event','badge_criteria_updated.php',71],['mod/wiki/classes/event','page_version_deleted.php',83],['lib/classes/event','competency_user_competency_rated_in_plan.php',97],['mod/glossary/classes/event','entry_deleted.php',73],['lib/classes/event','competency_template_viewed.php',81],['admin/tool/langimport/classes/event','langpack_removed.php',80],['mod/glossary/classes/event','category_deleted.php',65],['lib/classes/event','badge_deleted.php',67],['mod/quiz/classes/event','user_override_updated.php',73],['lib/classes/event','message_contact_added.php',57],['lib/classes/event','cohort_member_added.php',68],['lib/classes/event','blog_entry_updated.php',92],['mod/forum/classes/event','assessable_uploaded.php',95],['lib/classes/event','group_deleted.php',74],['lib/classes/event','role_allow_assign_updated.php',65],['mod/lesson/classes/event','highscore_added.php',68],['mod/forum/classes/event','discussion_pinned.php',64],['lib/classes/event','competency_plan_reopened.php',84],['mod/lesson/classes/event','essay_attempt_viewed.php',57],['mod/wiki/classes/event','page_locks_deleted.php',83],['mod/glossary/classes/event','comment_created.php',37],['lib/classes/event','webservice_service_deleted.php',68],['mod/forum/classes/event','discussion_subscription_created.php',75],['admin/tool/log/store/database/tests/fixtures','event.php',44],['mod/workshop/classes/event','assessable_uploaded.php',102],['lib/classes/event','user_loggedout.php',72],['lib/classes/event','webservice_token_created.php',74],['mod/data/classes/event','field_deleted.php',76],['mod/book/classes/event','chapter_created.php',88],['mod/survey/classes/event','report_downloaded.php',73],['mod/workshop/classes/event','phase_switched.php',84],['lib/classes/event','course_reset_started.php',62],['mod/workshop/classes/event','assessment_evaluated.php',75],['lib/classes/event','blog_association_created.php',75],['report/outline/classes/event','activity_report_viewed.php',75],['lib/classes/event','competency_plan_updated.php',84],['mod/choice/classes/event','answer_submitted.php',81],['mod/lesson/classes/event','lesson_ended.php',58],['lib/classes/event','role_allow_switch_updated.php',65],['lib/classes/event','competency_user_competency_rated_in_course.php',97],['mod/quiz/report','attemptsreport_options.php',133],['report/participation/classes/event','report_viewed.php',86],['lib/classes/event','role_capabilities_updated.php',69],['mod/survey/classes/event','response_submitted.php',71],['lib/classes/event','badge_archived.php',65],['mod/workshop/classes/event','assessment_reevaluated.php',85],['report/outline/classes/event','report_viewed.php',83],['lib/classes/event','mnet_access_control_updated.php',66],['mod/assign/classes/event','base.php',90],['mod/lesson/classes/event','essay_assessed.php',87],['lib/filebrowser','file_info.php',226],['mod/book/tool/print/classes/event','book_printed.php',85],['lib/classes/event','grouping_deleted.php',81],['lib/classes/event','course_viewed.php',84],['mod/forum/classes/event','user_report_viewed.php',74],['mod/quiz/classes/event','attempt_summary_viewed.php',75],['lib/classes/event','webservice_service_user_added.php',68],['mod/forum/classes/event','discussion_unpinned.php',64],['lib/classes/event','grouping_group_unassigned.php',57],['mod/chat/classes/event','message_sent.php',68],['lib/classes/event','role_assigned.php',75],['mod/glossary/classes/event','entry_viewed.php',67],['mod/data/classes/event','record_created.php',75],['lib/classes/event','role_deleted.php',73],['mod/wiki/classes/event','page_version_viewed.php',84],['admin/tool/log/store/standard/tests/fixtures','event.php',44],['admin/tool/monitor/classes/event','rule_created.php',68],['lib/classes/event','competency_user_competency_plan_viewed.php',90],['mod/data/classes/event','comment_deleted.php',37],['mod/forum/classes/event','course_module_viewed.php',50],['mod/workshop/classes/event','submission_updated.php',72],['mod/choice/classes/event','report_viewed.php',72],['mod/lesson/classes/event','group_override_deleted.php',73],['mod/wiki/classes/event','page_map_viewed.php',83],['admin/tool/log/store/legacy/tests/fixtures','event.php',44],['mod/lesson/classes/event','question_answered.php',63],['mod/choice/classes/event','report_downloaded.php',73],['lib/classes/event','competency_user_evidence_created.php',82],['lib/classes/event','course_module_completion_updated.php',73],['lib/classes/event','note_updated.php',75],['lib/classes/event','note_created.php',75],['lib/classes/event','competency_framework_created.php',81],['lib/classes/event','course_resources_list_viewed.php',69],['lib/filebrowser','file_info_stored.php',156],['mod/forum/classes/event','subscribers_viewed.php',74],['mod/book/tool/exportimscp/classes/event','book_exported.php',85],['lib','outputcomponents.php',326],['lib','outputcomponents.php',2756],['lib/classes/event','user_enrolment_deleted.php',73],['lib/classes/event','webservice_service_updated.php',68],['mod/lesson/classes/event','group_override_created.php',74],['mod/scorm/classes/event','attempt_deleted.php',71],['lib/classes/event','competency_user_competency_review_request_cancelled.php',81],['lib/classes/event','webservice_service_created.php',74],['mod/wiki/classes/event','page_version_restored.php',83],['mod/forum/classes/event','discussion_deleted.php',75],['lib/classes/event','competency_framework_updated.php',82],['lib/classes/event','blog_comment_created.php',38],['mod/lesson/classes/event','lesson_restarted.php',57],['mod/wiki/classes/event','page_updated.php',83],['mod/assign/submission/comments/classes/event','comment_created.php',37],['lib','modinfolib.php',1230],['lib/classes/event','course_module_updated.php',76],['report/questioninstances/classes/event','report_viewed.php',83],['lib/classes/event','message_contact_blocked.php',57],['lib/classes/event','competency_template_updated.php',84],['lib/classes/event','badge_disabled.php',65],['lib/classes/event','badge_enabled.php',65],['mod/quiz/classes/event','edit_page_viewed.php',72],['mod/scorm/classes/event','tracks_viewed.php',73],['mod/wiki/classes/event','page_diff_viewed.php',85],['lib/classes/event','grouping_created.php',74],['lib/classes/event','group_updated.php',74],['mod/book/classes/event','chapter_updated.php',88],['lib/classes/event','user_loggedin.php',73],['mod/forum/classes/event','subscription_created.php',74],['mod/quiz/classes/event','group_override_updated.php',73],['lib/classes/event','competency_plan_created.php',81],['mod/glossary/classes/event','entry_disapproved.php',65],['lib/classes/event','message_viewed.php',63],['lib/classes/event','comment_created.php',77],['lib/classes/event','competency_evidence_created.php',116],['lib/classes/event','comment_deleted.php',77],['lib/classes/event','competency_user_competency_review_requested.php',81],['mod/quiz/classes/event','attempt_abandoned.php',81],['mod/scorm/classes/event','user_report_viewed.php',71],['mod/quiz/classes/event','attempt_becameoverdue.php',84],['mod/quiz/classes/event','group_override_created.php',74],['mod/book/tool/print/classes/event','chapter_printed.php',88],['mod/data/classes/event','record_deleted.php',75],['lib/classes/event','competency_user_competency_viewed.php',90],['mod/lesson/classes/event','question_viewed.php',63],['lib/classes/event','user_profile_viewed.php',76],['mod/lesson/classes/event','user_override_deleted.php',72],['lib/classes/event','cohort_member_removed.php',69],['mod/lesson/classes/event','lesson_started.php',57],['mod/lesson/classes/event','page_updated.php',82],['mod/workshop/classes/event','submission_viewed.php',72],['mod/glossary/classes/event','entry_created.php',71],['mod/wiki/classes/event','page_history_viewed.php',77],['lib/classes/event','competency_plan_review_request_cancelled.php',84],['mod/quiz/classes/event','attempt_viewed.php',73],['mod/data/classes/event','field_updated.php',76],['lib/classes/event','grouping_updated.php',74],['lib/classes/event','question_category_created.php',66],['lib/classes/event','user_login_failed.php',76],['mod/scorm/classes/event','report_viewed.php',72],['mod/chat/classes/event','sessions_viewed.php',74],['mod/quiz/classes/event','user_override_deleted.php',72],['mod/quiz/classes/event','attempt_submitted.php',81],['mod/lesson/classes/event','group_override_updated.php',73],['mod/workshop/classes/event','submission_created.php',72],['mod/assign/submission/onlinetext/classes/event','assessable_uploaded.php',92],['lib/classes/event','competency_updated.php',79],['mod/lesson/classes/event','page_moved.php',65],['blocks/rss_client/classes/output','channel_image.php',101],['badges/lib','backpacklib.php',116],['lib/classes/event','course_completed.php',91],['lib/classes/event','competency_created.php',79],['mod/lesson/classes/event','highscores_viewed.php',60],['lib/classes/event','message_contact_unblocked.php',57],['lib','accesslib.php',6143],['lib','accesslib.php',6200],['lib','accesslib.php',6451],['lib','accesslib.php',6638],['lib','accesslib.php',6878],['lib','accesslib.php',7098],['lib','accesslib.php',7341],['mod/wiki/classes/event','comment_deleted.php',38],['lib/classes/event','user_enrolment_created.php',72],['lib/classes/event','course_module_created.php',105],['lib/classes/event','webservice_service_user_removed.php',68],['report/log/classes/event','report_viewed.php',85],['mod/assign/submission/file/classes/event','assessable_uploaded.php',94],['lib/classes/event','group_member_added.php',87],['mod/forum/classes/event','discussion_viewed.php',69],['mod/workshop/classes/event','submission_reassessed.php',86],['mod/workshop/classes/event','assessment_evaluations_reset.php',84],['mod/forum/classes/event','discussion_moved.php',75],['mod/lesson/classes/event','lesson_resumed.php',57],['lib/classes/event','comments_viewed.php',69],['mod/data/classes/event','template_viewed.php',74],['mod/wiki/classes/event','page_deleted.php',83],['mod/quiz/classes/event','report_viewed.php',75],['mod/scorm/classes/event','sco_launched.php',73],['mod/glossary/classes/event','entry_updated.php',71],['mod/lesson/classes/event','user_override_created.php',72],['mod/glossary/classes/event','category_updated.php',65],['lib/classes/event','course_updated.php',76],['mod/feedback/classes/event','response_submitted.php',102],['mod/book/classes/event','chapter_deleted.php',88],['mod/wiki/classes/event','comment_created.php',38],['report/completion/classes/event','report_viewed.php',67],['lib/classes/event','recent_activity_viewed.php',76],['mod/quiz/classes/event','question_manually_graded.php',74],['lib/classes/event','user_enrolment_updated.php',72],['lib/classes/event','competency_comment_created.php',49],['report/completion/classes/event','user_report_viewed.php',77],['report/stats/classes/event','report_viewed.php',83],['lib/classes/event','calendar_event_created.php',77],['lib/classes/event','course_section_updated.php',75],['lib/classes/event','message_sent.php',91],['lib/classes/event','calendar_subscription_deleted.php',75],['lib/classes/event','course_category_updated.php',60],['lib/classes/event','user_password_updated.php',95],['mod/forum/classes/event','subscription_deleted.php',74],['lib/classes/event','user_loggedinas.php',85],['lib/classes/event','competency_template_created.php',81],['lib/classes/event','user_created.php',66],['report/loglive/classes/event','report_viewed.php',75],['mod/book/classes/event','chapter_viewed.php',88],['lib/classes/event','badge_awarded.php',72],['lib/classes/event','calendar_subscription_created.php',76],['lib/classes/event','enrol_instance_created.php',78],['lib/classes/event','user_list_viewed.php',74],['mod/forum/classes/event','post_deleted.php',76],['mod/quiz/classes/event','group_override_deleted.php',73],['mod/assign/submission/comments/classes/event','comment_deleted.php',37],['lib/classes/event','badge_created.php',65],['lib/classes/event','base.php',639],['lib/classes/event','competency_framework_viewed.php',78],['mod/glossary/classes/event','course_module_viewed.php',53],['lib/classes/event','group_member_removed.php',78],['lib/classes/event','grade_report_viewed.php',72],['lib/classes/event','calendar_event_updated.php',77],['lib/classes/event','user_updated.php',66],['mod/lesson/classes/event','page_created.php',63],['enrol','locallib.php',1412],['lib/classes/event','blog_comment_deleted.php',38],['backup/util/ui','restore_ui_components.php',98],['lib/classes/event','course_completion_updated.php',65],['lib/classes/event','competency_plan_review_started.php',84],['lib/classes/event','course_user_report_viewed.php',75],['mod/folder/classes/event','all_files_downloaded.php',69],['mod/workshop/classes/event','assessments_reset.php',83],['mod/glossary/classes/event','comment_deleted.php',37],['mod/data/classes/event','template_updated.php',85],['admin/tool/log/store/legacy/classes/event','legacy_logged.php',43],['lib/filebrowser','file_info_context_course.php',505],['lib/classes/event','notes_viewed.php',71],['lib/classes/event','competency_plan_viewed.php',81],['mod/data/classes/event','record_updated.php',75],['lib/classes/event','competency_plan_unapproved.php',84],['mod/lesson/classes/event','content_page_viewed.php',57],['mod/quiz/classes/event','attempt_started.php',80],['lib/classes/event','competency_user_competency_rated.php',91],['mod/forum/classes/event','post_updated.php',76],['lib/classes/event','competency_plan_review_requested.php',84],['lib/classes/event','user_graded.php',115],['mod/forum/classes/event','post_created.php',76],['mod/scorm/classes/event','cmielement_submitted.php',67],['lib/classes/event','enrol_instance_updated.php',79],['admin/tool/capability/classes/event','report_viewed.php',74],['mod/data/classes/event','field_created.php',77],['mod/folder/classes/event','folder_updated.php',66],['lib/classes/event','badge_updated.php',65],['lib/tests/fixtures','event_fixtures.php',47],['lib/tests/fixtures','event_fixtures.php',273],['mod/survey/classes/event','report_viewed.php',73],['mod/quiz/classes/event','attempt_deleted.php',72],['mod/glossary/classes/event','entry_approved.php',65],['mod/wiki/classes/event','comments_viewed.php',68],['mod/wiki/classes/event','page_viewed.php',95],['mod/forum/classes/event','readtracking_disabled.php',73],['admin/tool/langimport/classes/event','langpack_imported.php',89],['lib/classes/event','competency_plan_review_stopped.php',84],['admin/tool/langimport/classes/event','langpack_updated.php',89],['lib/tests','customcontext_test.php',33],['lib/tests','customcontext_test.php',57],['lib/tests','customcontext_test.php',81],['lib/classes/event','competency_user_competency_viewed_in_plan.php',94],['lib/classes/event','competency_user_competency_viewed_in_course.php',93],['mod/glossary/classes/event','category_created.php',65],['report/stats/classes/event','user_report_viewed.php',76],['lib/classes/event','dashboards_reset.php',68],['lib/classes/event','calendar_subscription_updated.php',76],['lib/classes/event','cohort_updated.php',67],['admin/tool/monitor/classes/event','rule_updated.php',68],['mod/lesson/classes/event','page_deleted.php',63],['lib/classes/event','mnet_access_control_created.php',66],['mod/forum/classes/event','discussion_created.php',74],['lib/classes/event','blog_entries_viewed.php',80],['mod/quiz/classes/event','attempt_preview_started.php',73],['lib/classes/event','competency_user_evidence_updated.php',82],['lib/classes/event','course_restored.php',76],['mod/data/classes/event','comment_created.php',37],['lib/classes/event','group_created.php',74],['lib/classes/event','badge_criteria_deleted.php',70],['lib/classes/event','competency_plan_completed.php',84],['mod/lesson/classes/event','user_override_updated.php',73],['lib/classes/event','role_allow_override_updated.php',65],['mod/forum/classes/event','discussion_subscription_deleted.php',75],['lib/classes/event','cohort_deleted.php',67],['lib/classes/event','badge_criteria_created.php',70],['lib/classes/event','blog_entry_created.php',94],['mod/scorm/classes/event','interactions_viewed.php',72],['mod/workshop/classes/event','submission_assessed.php',85],['lib/classes/event','badge_duplicated.php',65],['lib/classes/event','course_category_created.php',57],['lib/classes/event','cohort_created.php',67],['lib/classes/event','competency_plan_approved.php',84],['mod/choice/classes/event','answer_deleted.php',65],['lib/classes/event','competency_user_competency_review_started.php',81],['lib/classes/event','course_reset_ended.php',62],['mod/quiz/classes/event','user_override_created.php',72],['mod/forum/classes/event','course_searched.php',75],['lib/classes/event','message_contact_removed.php',57],['admin/tool/monitor/classes/event','rule_deleted.php',68],['lib/classes/event','competency_user_competency_review_stopped.php',81],['lib/classes/event','course_module_viewed.php',71]], 259],
'forum_user_can_post_discussion': ['forum_user_can_post_discussion', '', [['mod/forum','lib.php',4939]], 25],
'get_forum_discussions_paginated_parameters': ['get_forum_discussions_paginated_parameters', 'Describes the parameters for get_forum_discussions_paginated. ', [['mod/forum','externallib.php',338]], 1],
'forum_user_can_post': ['forum_user_can_post', 'This function checks whether the user can reply to posts in a forum discussion. Use forum_user_can_post_discussion() to check whether the user can start discussions. ', [['mod/forum','lib.php',5000]], 14],
'parameter': ['parameter', '', [['lib/adodb/drivers','adodb-odbtp.inc.php',511],['lib/adodb/drivers','adodb-mssql.inc.php',708],['lib/adodb','adodb.inc.php',981],['lib/adodb/drivers','adodb-oci8.inc.php',1184]], 25],
'external_format_text': ['external_format_text', 'Format the text to be returned properly as requested by the either the web service server, either by an internally call. The caller can change the format (raw, filter, file, fileurl) with the external_settings singleton All web service servers must set this singleton when parsing the $_GET and $_POST. ', [['lib','externallib.php',887]], 61],
'add_discussion_returns': ['add_discussion_returns', 'Returns description of method result value ', [['mod/forum','externallib.php',1031]], 5],
'forum_get_discussions': ['forum_get_discussions', 'Get all discussions in a forum ', [['mod/forum','lib.php',2501]], 16],
'groups_get_activity_group': ['groups_get_activity_group', 'Returns group active in activity, changes the group by default if \'group\' page param present ', [['lib','grouplib.php',814]], 97],
'add_discussion_post_parameters': ['add_discussion_post_parameters', 'Returns description of method parameters ', [['mod/forum','externallib.php',692]], 1],
'username_load_fields_from_object': ['username_load_fields_from_object', 'Reduces lines of duplicated code for getting user name fields. ', [['lib','moodlelib.php',3418]], 27],
'forum_post_subscription': ['forum_post_subscription', 'Given a new post, subscribes or unsubscribes as appropriate. Returns some text which describes what happened. ', [['mod/forum','lib.php',4730]], 5],
'can_add_discussion_returns': ['can_add_discussion_returns', 'Returns description of method result value ', [['mod/forum','externallib.php',1097]], 2],
'message': ['message', 'Send XMPP Message ', [['lib/jabber/XMPP','XMPP.php',156],['mod/lesson','renderer.php',145]], 31],
'fullname': ['fullname', 'Returns a persons full name ', [['lib','moodlelib.php',3249],['mod/assign','locallib.php',3915]], 546],
'forum_user_can_see_post': ['forum_user_can_see_post', '', [['mod/forum','lib.php',5196]], 13],
'can_add_discussion': ['can_add_discussion', 'Check if the current user can add discussions in the given forum (and optionally for the given group). ', [['mod/forum','externallib.php',1062]], 2],
'forum_count_discussion_replies': ['forum_count_discussion_replies', 'Returns an array of counts of replies to each discussion ', [['mod/forum','lib.php',2359]], 12],
'is_enabled': ['is_enabled', 'Tools cannot be disabled. ', [['lib/classes/plugininfo','tool.php',39],['admin/tool/recyclebin/classes','category_bin.php',54],['admin/tool/log/classes/plugininfo','logstore.php',35],['admin/tool/recyclebin/classes','course_bin.php',54],['mod/assign/feedback/offline','locallib.php',380],['admin/tool/recyclebin/classes','base_bin.php',38],['lib','adminlib.php',1955],['search/classes','base.php',190],['lib','medialib.php',318],['lib','medialib.php',635],['lib','medialib.php',1268],['admin/tool/health','index.php',393],['lib/classes/plugininfo','mnetservice.php',33],['lib/classes/message/inbound','manager.php',37],['mod/assignment/classes/plugininfo','assignment.php',32],['competency/classes','api.php',49],['mod/assign','assignmentplugin.php',223],['lib/classes/plugininfo','orphaned.php',37],['search/tests/fixtures','mock_search_area.php',38],['tag/classes','area.php',106],['lib/classes/plugininfo','base.php',383],['mod/assign/feedback/editpdf','locallib.php',340],['tag/classes','tag.php',1269],['mod/assign/submission/comments','locallib.php',172],['lib','completionlib.php',269]], 276],
'clean_param': ['clean_param', 'Used by {@link optional_param()} and {@link required_param()} to clean the variables and/or cast to specific types, based on an options field. <code> $course->format = clean_param($course->format, PARAM_ALPHA); $selectedgradeitem = clean_param($selectedgradeitem, PARAM_INT); </code> ', [['lib','moodlelib.php',769]], 635],
'validate_courses': ['validate_courses', 'Validate a list of courses, returning the complete course objects for valid courses. ', [['lib','externallib.php',1096]], 16],
'view_forum_parameters': ['view_forum_parameters', 'Returns description of method parameters ', [['mod/forum','externallib.php',561]], 1],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 2229],
'view_forum': ['view_forum', 'Trigger the course module viewed event and update the module completion status. ', [['mod/forum','externallib.php',575]], 0],
'add_discussion_post_returns': ['add_discussion_post_returns', 'Returns description of method result value ', [['mod/forum','externallib.php',843]], 2],
'groups_get_activity_groupmode': ['groups_get_activity_groupmode', 'Returns effective groupmode used in activity, course setting overrides activity setting if groupmodeforce enabled. ', [['lib','grouplib.php',468]], 136],
'can_add_discussion_parameters': ['can_add_discussion_parameters', 'Returns description of method parameters ', [['mod/forum','externallib.php',1046]], 1],
'trusttext_trusted': ['trusttext_trusted', 'Is current user trusted to enter no dangerous XSS in this context? ', [['lib','weblib.php',1614]], 8],
'get_all_instances_in_courses': ['get_all_instances_in_courses', 'Returns an array of all the active instances of a particular module in given courses, sorted in the order they are defined ', [['lib','datalib.php',1382]], 23],
'forum_add_discussion': ['forum_add_discussion', 'Given an object containing all the necessary data, create a new discussion and return the id ', [['mod/forum','lib.php',4457]], 6],
'get_course_and_cm_from_instance': ['get_course_and_cm_from_instance', 'Efficiently retrieves the $course (stdclass) and $cm (cm_info) objects, given an instance id or record and module name. ', [['lib','modinfolib.php',2099]], 45],
'view_forum_discussion_returns': ['view_forum_discussion_returns', 'Returns description of method result value ', [['mod/forum','externallib.php',677]], 0],
'forum_view': ['forum_view', 'Mark the activity completed (if required) and trigger the course_module_viewed event. ', [['mod/forum','lib.php',7842]], 3],
'validate_parameters': ['validate_parameters', 'Validates submitted function parameters, if anything is incorrect invalid_parameter_exception is thrown. This is a simple recursive method which is intended to be called from each implementation method of external API. ', [['lib','externallib.php',279]], 340],
'view_forum_discussion_parameters': ['view_forum_discussion_parameters', 'Returns description of method parameters ', [['mod/forum','externallib.php',626]], 1],
'validate_context': ['validate_context', 'Makes sure user may execute functions in this context. ', [['lib','externallib.php',448]], 256],
'add_discussion_parameters': ['add_discussion_parameters', 'Returns description of method parameters ', [['mod/forum','externallib.php',858]], 1],
'trigger': ['trigger', '', [['lib/evalmath','evalmath.class.php',448],['lib/classes/event','base.php',765]], 964],
'view_forum_returns': ['view_forum_returns', 'Returns description of method result value ', [['mod/forum','externallib.php',611]], 0],
'forum_check_blocking_threshold': ['forum_check_blocking_threshold', 'Throws an error if the user is no longer allowed to post due to having reached or exceeded the number of posts specified in \'Post threshold for blocking\' setting. ', [['mod/forum','lib.php',6818]], 5],
'forum_tp_can_track_forums': ['forum_tp_can_track_forums', 'Determine if a user can track forums and optionally a particular forum. Checks the site settings, the user settings and the forum settings (if requested). ', [['mod/forum','lib.php',6506]], 25],
'get_forums_by_courses': ['get_forums_by_courses', 'Returns a list of forums in a provided list of courses, if no list is provided all forums that the user can view will be returned. ', [['mod/forum','externallib.php',47]], 5],
'defined': ['defined', '', [], 4731],
'strtoupper': ['strtoupper', '', [], 565],
'array_keys': ['array_keys', '', [], 1256],
'trim': ['trim', '', [], 1948],
'implode': ['implode', '', [], 1281],
'explode': ['explode', '', [], 1572],
'in_array': ['in_array', '', [], 1234]};
CLASS_DATA={
'external_warnings': ['external_warnings', 'Standard Moodle web service warnings ', [['lib','externallib.php',768]], 150],
'user_picture': ['user_picture', 'Data structure representing a user picture. ', [['lib','outputcomponents.php',142]], 165],
'external_function_parameters': ['external_function_parameters', 'Description of top level - PHP function parameters. ', [['lib','externallib.php',638]], 344],
'external_util': ['external_util', 'Utility functions for the external API. ', [['lib','externallib.php',1086]], 38],
'context_module': ['context_module', 'Course module context class ', [['lib','accesslib.php',7039]], 1106],
'post': ['post', 'Forum posts search area. ', [['mod/forum/classes/search','post.php',31]], 5],
'external_value': ['external_value', 'Scalar value description class ', [['lib','externallib.php',546]], 2505],
'invalid_parameter_exception': ['invalid_parameter_exception', 'Exception indicating malformed parameter problem. This exception is not supposed to be thrown when processing user submitted data in forms. It is more suitable for WS and other low level stuff. ', [['lib','setuplib.php',259]], 88],
'post_created': ['post_created', 'The mod_forum post created event class. ', [['mod/forum/classes/event','post_created.php',29]], 10],
'discussion_created': ['discussion_created', 'The mod_forum discussion created event class. ', [['mod/forum/classes/event','discussion_created.php',29]], 6],
'external_files': ['external_files', 'External structure representing a set of files. ', [['lib','externallib.php',1167]], 21],
'external_multiple_structure': ['external_multiple_structure', 'Bulk array description class. ', [['lib','externallib.php',609]], 350],
'completion_info': ['completion_info', 'Class represents completion information for a course. ', [['lib','completionlib.php',210]], 141],
'mod_forum_external': ['mod_forum_external', '', [['mod/forum','externallib.php',30]], 73],
'external_api': ['external_api', 'Base class for external api methods. ', [['lib','externallib.php',47]], 808],
'external_single_structure': ['external_single_structure', 'Associative array description class ', [['lib','externallib.php',580]], 460],
'external_format_value': ['external_format_value', 'A pre-filled external_value class for text format. ', [['lib','externallib.php',799]], 70],
'moodle_exception': ['moodle_exception', 'Base Moodle Exception class ', [['lib','setuplib.php',75]], 606]};
CONST_DATA={
'PARAM_BOOL': ['PARAM_BOOL', '', [['lib','moodlelib.php',108]], 802],
'FORUM_DISCUSSION_PINNED': ['FORUM_DISCUSSION_PINNED', '', [['mod/forum','lib.php',72]], 20],
'COMPLETION_COMPLETE': ['COMPLETION_COMPLETE', '', [['lib','completionlib.php',76]], 90],
'PARAM_RAW': ['PARAM_RAW', '', [['lib','moodlelib.php',193]], 921],
'VALUE_REQUIRED': ['VALUE_REQUIRED', '', [['lib','moodlelib.php',332]], 144],
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1384],
'PARAM_URL': ['PARAM_URL', '', [['lib','moodlelib.php',239]], 165],
'PARAM_ALPHANUM': ['PARAM_ALPHANUM', '', [['lib','moodlelib.php',88]], 112],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153],
'VALUE_OPTIONAL': ['VALUE_OPTIONAL', '', [['lib','moodlelib.php',337]], 761],
'FORMAT_HTML': ['FORMAT_HTML', '', [['lib','weblib.php',47]], 1121],
'FORUM_DISCUSSION_UNPINNED': ['FORUM_DISCUSSION_UNPINNED', '', [['mod/forum','lib.php',73]], 14],
'PARAM_TEXT': ['PARAM_TEXT', '', [['lib','moodlelib.php',228]], 542],
'FORUM_POSTS_ALL_USER_GROUPS': ['FORUM_POSTS_ALL_USER_GROUPS', '', [['mod/forum','lib.php',70]], 4],
'PARAM_ALPHA': ['PARAM_ALPHA', '', [['lib','moodlelib.php',77]], 398],
'PARAM_INT': ['PARAM_INT', '', [['lib','moodlelib.php',156]], 3812],
'NULL_NOT_ALLOWED': ['NULL_NOT_ALLOWED', '', [['lib','moodlelib.php',347]], 88],
'VALUE_DEFAULT': ['VALUE_DEFAULT', '', [['lib','moodlelib.php',342]], 304]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
