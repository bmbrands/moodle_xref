<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /mod/forum/externallib.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='mod/forum';
filename='externallib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/mod/forum/</a> -> <a href="externallib.php.html">externallib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="externallib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="externallib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">//</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">//</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">//</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment">/**</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * External forum API</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> *</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @package    mod_forum</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @copyright  2012 Mark Nelson &lt;markn@moodle.com&gt;</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> */</span>
<a name="l25"><span class="linenum">  25</span></a>  
<a name="l26"><span class="linenum">  26</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die;
<a name="l27"><span class="linenum">  27</span></a>  
<a name="l28"><span class="linenum">  28</span></a>  require_once(&quot;<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>/externallib.php&quot;);
<a name="l29"><span class="linenum">  29</span></a>  
<a name="l30"><span class="linenum">  30</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('mod_forum_external')" href="../../_classes/mod_forum_external.html" onMouseOver="classPopup(event,'mod_forum_external')">mod_forum_external</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('external_api')" href="../../_classes/external_api.html" onMouseOver="classPopup(event,'external_api')">external_api</a> {
<a name="l31"><span class="linenum">  31</span></a>  
<a name="l32"><span class="linenum">  32</span></a>      <span class="comment">/**</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment">     * Describes the parameters for get_forum.</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment">     *</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment">     * @return external_external_function_parameters</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment">     * @since Moodle 2.5</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment">     */</span>
<a name="l38"><span class="linenum">  38</span></a>      public static function <a class="function" onClick="logFunction('get_forums_by_courses_parameters')" href="../../_functions/get_forums_by_courses_parameters.html" onMouseOver="funcPopup(event,'get_forums_by_courses_parameters')">get_forums_by_courses_parameters</a>() {
<a name="l39"><span class="linenum">  39</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_function_parameters')" href="../../_classes/external_function_parameters.html" onMouseOver="classPopup(event,'external_function_parameters')">external_function_parameters</a> (
<a name="l40"><span class="linenum">  40</span></a>              array(
<a name="l41"><span class="linenum">  41</span></a>                  'courseids' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_multiple_structure')" href="../../_classes/external_multiple_structure.html" onMouseOver="classPopup(event,'external_multiple_structure')">external_multiple_structure</a>(<span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'course ID',
<a name="l42"><span class="linenum">  42</span></a>                          '', <a class="constant" onClick="logConstant('VALUE_REQUIRED')" href="../../_constants/VALUE_REQUIRED.html" onMouseOver="constPopup(event,'VALUE_REQUIRED')">VALUE_REQUIRED</a>, '', <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>), 'Array of Course IDs', <a class="constant" onClick="logConstant('VALUE_DEFAULT')" href="../../_constants/VALUE_DEFAULT.html" onMouseOver="constPopup(event,'VALUE_DEFAULT')">VALUE_DEFAULT</a>, array()),
<a name="l43"><span class="linenum">  43</span></a>              )
<a name="l44"><span class="linenum">  44</span></a>          );
<a name="l45"><span class="linenum">  45</span></a>      }
<a name="l46"><span class="linenum">  46</span></a>  
<a name="l47"><span class="linenum">  47</span></a>      <span class="comment">/**</span>
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment">     * Returns a list of forums in a provided list of courses,</span>
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment">     * if no list is provided all forums that the user can view</span>
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment">     * will be returned.</span>
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment">     *</span>
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment">     * @param array $courseids the course ids</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment">     * @return array the forum details</span>
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment">     * @since Moodle 2.5</span>
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment">     */</span>
<a name="l56"><span class="linenum">  56</span></a>      public static function <a class="function" onClick="logFunction('get_forums_by_courses')" href="../../_functions/get_forums_by_courses.html" onMouseOver="funcPopup(event,'get_forums_by_courses')">get_forums_by_courses</a>(<a class="var it2977" onMouseOver="hilite(2977)" onMouseOut="lolite()" onClick="logVariable('courseids')" href="../../_variables/courseids.html">$courseids</a> = array()) {
<a name="l57"><span class="linenum">  57</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l58"><span class="linenum">  58</span></a>  
<a name="l59"><span class="linenum">  59</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . "<a class="filename" href="../../mod/forum/lib.php.html">/mod/forum/lib.php</a>");
<a name="l60"><span class="linenum">  60</span></a>  
<a name="l61"><span class="linenum">  61</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = self::<a class="function" onClick="logFunction('validate_parameters')" href="../../_functions/validate_parameters.html" onMouseOver="funcPopup(event,'validate_parameters')">validate_parameters</a>(self::<a class="function" onClick="logFunction('get_forums_by_courses_parameters')" href="../../_functions/get_forums_by_courses_parameters.html" onMouseOver="funcPopup(event,'get_forums_by_courses_parameters')">get_forums_by_courses_parameters</a>(), array('courseids' =&gt; <a class="var it2977" onMouseOver="hilite(2977)" onMouseOut="lolite()" onClick="logVariable('courseids')" href="../../_variables/courseids.html">$courseids</a>));
<a name="l62"><span class="linenum">  62</span></a>  
<a name="l63"><span class="linenum">  63</span></a>          if (empty(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['courseids'])) {
<a name="l64"><span class="linenum">  64</span></a>  <span class="comment">            // Get all the courses the user can view.</span>
<a name="l65"><span class="linenum">  65</span></a>              <a class="var it2977" onMouseOver="hilite(2977)" onMouseOut="lolite()" onClick="logVariable('courseids')" href="../../_variables/courseids.html">$courseids</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="function" onClick="logFunction('enrol_get_my_courses')" href="../../_functions/enrol_get_my_courses.html" onMouseOver="funcPopup(event,'enrol_get_my_courses')">enrol_get_my_courses</a>());
<a name="l66"><span class="linenum">  66</span></a>          } else {
<a name="l67"><span class="linenum">  67</span></a>              <a class="var it2977" onMouseOver="hilite(2977)" onMouseOut="lolite()" onClick="logVariable('courseids')" href="../../_variables/courseids.html">$courseids</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['courseids'];
<a name="l68"><span class="linenum">  68</span></a>          }
<a name="l69"><span class="linenum">  69</span></a>  
<a name="l70"><span class="linenum">  70</span></a>  <span class="comment">        // Array to store the forums to return.</span>
<a name="l71"><span class="linenum">  71</span></a>          <a class="var it32396" onMouseOver="hilite(32396)" onMouseOut="lolite()" onClick="logVariable('arrforums')" href="../../_variables/arrforums.html">$arrforums</a> = array();
<a name="l72"><span class="linenum">  72</span></a>  
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment">        // Ensure there are courseids to loop through.</span>
<a name="l74"><span class="linenum">  74</span></a>          if (!empty(<a class="var it2977" onMouseOver="hilite(2977)" onMouseOut="lolite()" onClick="logVariable('courseids')" href="../../_variables/courseids.html">$courseids</a>)) {
<a name="l75"><span class="linenum">  75</span></a>  <span class="comment">            // Array of the courses we are going to retrieve the forums from.</span>
<a name="l76"><span class="linenum">  76</span></a>              <a class="var it4956" onMouseOver="hilite(4956)" onMouseOut="lolite()" onClick="logVariable('dbcourses')" href="../../_variables/dbcourses.html">$dbcourses</a> = array();
<a name="l77"><span class="linenum">  77</span></a>  <span class="comment">            // Mod info for courses.</span>
<a name="l78"><span class="linenum">  78</span></a>              <a class="var it32397" onMouseOver="hilite(32397)" onMouseOut="lolite()" onClick="logVariable('modinfocourses')" href="../../_variables/modinfocourses.html">$modinfocourses</a> = array();
<a name="l79"><span class="linenum">  79</span></a>  
<a name="l80"><span class="linenum">  80</span></a>  <span class="comment">            // Go through the courseids and return the forums.</span>
<a name="l81"><span class="linenum">  81</span></a>              foreach (<a class="var it2977" onMouseOver="hilite(2977)" onMouseOut="lolite()" onClick="logVariable('courseids')" href="../../_variables/courseids.html">$courseids</a> as <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>) {
<a name="l82"><span class="linenum">  82</span></a>  <span class="comment">                // Check the user can function in this context.</span>
<a name="l83"><span class="linenum">  83</span></a>                  try {
<a name="l84"><span class="linenum">  84</span></a>                      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>);
<a name="l85"><span class="linenum">  85</span></a>                      self::<a class="function" onClick="logFunction('validate_context')" href="../../_functions/validate_context.html" onMouseOver="funcPopup(event,'validate_context')">validate_context</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment">                    // Get the modinfo for the course.</span>
<a name="l87"><span class="linenum">  87</span></a>                      <a class="var it32397" onMouseOver="hilite(32397)" onMouseOut="lolite()" onClick="logVariable('modinfocourses')" href="../../_variables/modinfocourses.html">$modinfocourses</a>[<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>] = <a class="function" onClick="logFunction('get_fast_modinfo')" href="../../_functions/get_fast_modinfo.html" onMouseOver="funcPopup(event,'get_fast_modinfo')">get_fast_modinfo</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>);
<a name="l88"><span class="linenum">  88</span></a>                      <a class="var it4956" onMouseOver="hilite(4956)" onMouseOut="lolite()" onClick="logVariable('dbcourses')" href="../../_variables/dbcourses.html">$dbcourses</a>[<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>] = <a class="var it32397" onMouseOver="hilite(32397)" onMouseOut="lolite()" onClick="logVariable('modinfocourses')" href="../../_variables/modinfocourses.html">$modinfocourses</a>[<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>]-&gt;<a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>();
<a name="l89"><span class="linenum">  89</span></a>  
<a name="l90"><span class="linenum">  90</span></a>                  } catch (Exception <a class="var it193" onMouseOver="hilite(193)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>) {
<a name="l91"><span class="linenum">  91</span></a>                      continue;
<a name="l92"><span class="linenum">  92</span></a>                  }
<a name="l93"><span class="linenum">  93</span></a>              }
<a name="l94"><span class="linenum">  94</span></a>  
<a name="l95"><span class="linenum">  95</span></a>  <span class="comment">            // Get the forums in this course. This function checks users visibility permissions.</span>
<a name="l96"><span class="linenum">  96</span></a>              if (<a class="var it2555" onMouseOver="hilite(2555)" onMouseOut="lolite()" onClick="logVariable('forums')" href="../../_variables/forums.html">$forums</a> = <a class="function" onClick="logFunction('get_all_instances_in_courses')" href="../../_functions/get_all_instances_in_courses.html" onMouseOver="funcPopup(event,'get_all_instances_in_courses')">get_all_instances_in_courses</a>(&quot;forum&quot;, <a class="var it4956" onMouseOver="hilite(4956)" onMouseOut="lolite()" onClick="logVariable('dbcourses')" href="../../_variables/dbcourses.html">$dbcourses</a>)) {
<a name="l97"><span class="linenum">  97</span></a>                  foreach (<a class="var it2555" onMouseOver="hilite(2555)" onMouseOut="lolite()" onClick="logVariable('forums')" href="../../_variables/forums.html">$forums</a> as <a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>) {
<a name="l98"><span class="linenum">  98</span></a>  
<a name="l99"><span class="linenum">  99</span></a>                      <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="var it4956" onMouseOver="hilite(4956)" onMouseOut="lolite()" onClick="logVariable('dbcourses')" href="../../_variables/dbcourses.html">$dbcourses</a>[<a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('course')" class="var it39537" onMouseOver="hilite(39537)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>];
<a name="l100"><span class="linenum"> 100</span></a>                      <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="var it32397" onMouseOver="hilite(32397)" onMouseOut="lolite()" onClick="logVariable('modinfocourses')" href="../../_variables/modinfocourses.html">$modinfocourses</a>[<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>]-&gt;<a class="function" onClick="logFunction('get_cm')" href="../../_functions/get_cm.html" onMouseOver="funcPopup(event,'get_cm')">get_cm</a>(<a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it39537" onMouseOver="hilite(39537)" onMouseOut="lolite()" href="../../_variables/coursemodule.html">coursemodule</a>);
<a name="l101"><span class="linenum"> 101</span></a>                      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l102"><span class="linenum"> 102</span></a>  
<a name="l103"><span class="linenum"> 103</span></a>  <span class="comment">                    // Skip forums we are not allowed to see discussions.</span>
<a name="l104"><span class="linenum"> 104</span></a>                      if (!<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/forum:viewdiscussion', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l105"><span class="linenum"> 105</span></a>                          continue;
<a name="l106"><span class="linenum"> 106</span></a>                      }
<a name="l107"><span class="linenum"> 107</span></a>  
<a name="l108"><span class="linenum"> 108</span></a>  <span class="comment">                    // Format the intro before being returning using the format setting.</span>
<a name="l109"><span class="linenum"> 109</span></a>                      <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('intro')" class="var it39537" onMouseOver="hilite(39537)" onMouseOut="lolite()" href="../../_variables/intro.html">intro</a>, <a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('introformat')" class="var it39537" onMouseOver="hilite(39537)" onMouseOut="lolite()" href="../../_variables/introformat.html">introformat</a>) = <a class="function" onClick="logFunction('external_format_text')" href="../../_functions/external_format_text.html" onMouseOver="funcPopup(event,'external_format_text')">external_format_text</a>(<a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('intro')" class="var it39537" onMouseOver="hilite(39537)" onMouseOut="lolite()" href="../../_variables/intro.html">intro</a>, <a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('introformat')" class="var it39537" onMouseOver="hilite(39537)" onMouseOut="lolite()" href="../../_variables/introformat.html">introformat</a>,
<a name="l110"><span class="linenum"> 110</span></a>                                                                                      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_forum', 'intro', 0);
<a name="l111"><span class="linenum"> 111</span></a>  <span class="comment">                    // Discussions count. This function does static request cache.</span>
<a name="l112"><span class="linenum"> 112</span></a>                      <a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('numdiscussions')" class="var it39537" onMouseOver="hilite(39537)" onMouseOut="lolite()" href="../../_variables/numdiscussions.html">numdiscussions</a> = <a class="function" onClick="logFunction('forum_count_discussions')" href="../../_functions/forum_count_discussions.html" onMouseOver="funcPopup(event,'forum_count_discussions')">forum_count_discussions</a>(<a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l113"><span class="linenum"> 113</span></a>                      <a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('cmid')" class="var it39537" onMouseOver="hilite(39537)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a> = <a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it39537" onMouseOver="hilite(39537)" onMouseOut="lolite()" href="../../_variables/coursemodule.html">coursemodule</a>;
<a name="l114"><span class="linenum"> 114</span></a>  
<a name="l115"><span class="linenum"> 115</span></a>  <span class="comment">                    // Add the forum to the array to return.</span>
<a name="l116"><span class="linenum"> 116</span></a>                      <a class="var it32396" onMouseOver="hilite(32396)" onMouseOut="lolite()" onClick="logVariable('arrforums')" href="../../_variables/arrforums.html">$arrforums</a>[<a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('id')" class="var it39537" onMouseOver="hilite(39537)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = <a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>;
<a name="l117"><span class="linenum"> 117</span></a>                  }
<a name="l118"><span class="linenum"> 118</span></a>              }
<a name="l119"><span class="linenum"> 119</span></a>          }
<a name="l120"><span class="linenum"> 120</span></a>  
<a name="l121"><span class="linenum"> 121</span></a>          return <a class="var it32396" onMouseOver="hilite(32396)" onMouseOut="lolite()" onClick="logVariable('arrforums')" href="../../_variables/arrforums.html">$arrforums</a>;
<a name="l122"><span class="linenum"> 122</span></a>      }
<a name="l123"><span class="linenum"> 123</span></a>  
<a name="l124"><span class="linenum"> 124</span></a>      <span class="comment">/**</span>
<a name="l125"><span class="linenum"> 125</span></a>  <span class="comment">     * Describes the get_forum return value.</span>
<a name="l126"><span class="linenum"> 126</span></a>  <span class="comment">     *</span>
<a name="l127"><span class="linenum"> 127</span></a>  <span class="comment">     * @return external_single_structure</span>
<a name="l128"><span class="linenum"> 128</span></a>  <span class="comment">     * @since Moodle 2.5</span>
<a name="l129"><span class="linenum"> 129</span></a>  <span class="comment">     */</span>
<a name="l130"><span class="linenum"> 130</span></a>       public static function <a class="function" onClick="logFunction('get_forums_by_courses_returns')" href="../../_functions/get_forums_by_courses_returns.html" onMouseOver="funcPopup(event,'get_forums_by_courses_returns')">get_forums_by_courses_returns</a>() {
<a name="l131"><span class="linenum"> 131</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_multiple_structure')" href="../../_classes/external_multiple_structure.html" onMouseOver="classPopup(event,'external_multiple_structure')">external_multiple_structure</a>(
<a name="l132"><span class="linenum"> 132</span></a>              <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l133"><span class="linenum"> 133</span></a>                  array(
<a name="l134"><span class="linenum"> 134</span></a>                      'id' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Forum id'),
<a name="l135"><span class="linenum"> 135</span></a>                      'course' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'Course id'),
<a name="l136"><span class="linenum"> 136</span></a>                      'type' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'The forum type'),
<a name="l137"><span class="linenum"> 137</span></a>                      'name' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'Forum name'),
<a name="l138"><span class="linenum"> 138</span></a>                      'intro' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'The forum intro'),
<a name="l139"><span class="linenum"> 139</span></a>                      'introformat' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_format_value')" href="../../_classes/external_format_value.html" onMouseOver="classPopup(event,'external_format_value')">external_format_value</a>('intro'),
<a name="l140"><span class="linenum"> 140</span></a>                      'assessed' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Aggregate type'),
<a name="l141"><span class="linenum"> 141</span></a>                      'assesstimestart' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Assess start time'),
<a name="l142"><span class="linenum"> 142</span></a>                      'assesstimefinish' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Assess finish time'),
<a name="l143"><span class="linenum"> 143</span></a>                      'scale' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Scale'),
<a name="l144"><span class="linenum"> 144</span></a>                      'maxbytes' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Maximum attachment size'),
<a name="l145"><span class="linenum"> 145</span></a>                      'maxattachments' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Maximum number of attachments'),
<a name="l146"><span class="linenum"> 146</span></a>                      'forcesubscribe' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Force users to subscribe'),
<a name="l147"><span class="linenum"> 147</span></a>                      'trackingtype' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Subscription mode'),
<a name="l148"><span class="linenum"> 148</span></a>                      'rsstype' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'RSS feed for this activity'),
<a name="l149"><span class="linenum"> 149</span></a>                      'rssarticles' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Number of RSS recent articles'),
<a name="l150"><span class="linenum"> 150</span></a>                      'timemodified' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Time modified'),
<a name="l151"><span class="linenum"> 151</span></a>                      'warnafter' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Post threshold for warning'),
<a name="l152"><span class="linenum"> 152</span></a>                      'blockafter' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Post threshold for blocking'),
<a name="l153"><span class="linenum"> 153</span></a>                      'blockperiod' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Time period for blocking'),
<a name="l154"><span class="linenum"> 154</span></a>                      'completiondiscussions' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Student must create discussions'),
<a name="l155"><span class="linenum"> 155</span></a>                      'completionreplies' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Student must post replies'),
<a name="l156"><span class="linenum"> 156</span></a>                      'completionposts' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Student must post discussions or replies'),
<a name="l157"><span class="linenum"> 157</span></a>                      'cmid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Course module id'),
<a name="l158"><span class="linenum"> 158</span></a>                      'numdiscussions' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Number of discussions in the forum', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>)
<a name="l159"><span class="linenum"> 159</span></a>                  ), 'forum'
<a name="l160"><span class="linenum"> 160</span></a>              )
<a name="l161"><span class="linenum"> 161</span></a>          );
<a name="l162"><span class="linenum"> 162</span></a>      }
<a name="l163"><span class="linenum"> 163</span></a>  
<a name="l164"><span class="linenum"> 164</span></a>      <span class="comment">/**</span>
<a name="l165"><span class="linenum"> 165</span></a>  <span class="comment">     * Describes the parameters for get_forum_discussions.</span>
<a name="l166"><span class="linenum"> 166</span></a>  <span class="comment">     *</span>
<a name="l167"><span class="linenum"> 167</span></a>  <span class="comment">     * @return external_external_function_parameters</span>
<a name="l168"><span class="linenum"> 168</span></a>  <span class="comment">     * @since Moodle 2.5</span>
<a name="l169"><span class="linenum"> 169</span></a>  <span class="comment">     * @deprecated Moodle 2.8 MDL-46458 - Please do not call this function any more.</span>
<a name="l170"><span class="linenum"> 170</span></a>  <span class="comment">     * @see get_forum_discussions_paginated</span>
<a name="l171"><span class="linenum"> 171</span></a>  <span class="comment">     */</span>
<a name="l172"><span class="linenum"> 172</span></a>      public static function <a class="function" onClick="logFunction('get_forum_discussions_parameters')" href="../../_functions/get_forum_discussions_parameters.html" onMouseOver="funcPopup(event,'get_forum_discussions_parameters')">get_forum_discussions_parameters</a>() {
<a name="l173"><span class="linenum"> 173</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_function_parameters')" href="../../_classes/external_function_parameters.html" onMouseOver="classPopup(event,'external_function_parameters')">external_function_parameters</a> (
<a name="l174"><span class="linenum"> 174</span></a>              array(
<a name="l175"><span class="linenum"> 175</span></a>                  'forumids' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_multiple_structure')" href="../../_classes/external_multiple_structure.html" onMouseOver="classPopup(event,'external_multiple_structure')">external_multiple_structure</a>(<span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'forum ID',
<a name="l176"><span class="linenum"> 176</span></a>                          '', <a class="constant" onClick="logConstant('VALUE_REQUIRED')" href="../../_constants/VALUE_REQUIRED.html" onMouseOver="constPopup(event,'VALUE_REQUIRED')">VALUE_REQUIRED</a>, '', <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>), 'Array of Forum IDs', <a class="constant" onClick="logConstant('VALUE_REQUIRED')" href="../../_constants/VALUE_REQUIRED.html" onMouseOver="constPopup(event,'VALUE_REQUIRED')">VALUE_REQUIRED</a>),
<a name="l177"><span class="linenum"> 177</span></a>                  'limitfrom' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'limit from', <a class="constant" onClick="logConstant('VALUE_DEFAULT')" href="../../_constants/VALUE_DEFAULT.html" onMouseOver="constPopup(event,'VALUE_DEFAULT')">VALUE_DEFAULT</a>, 0),
<a name="l178"><span class="linenum"> 178</span></a>                  'limitnum' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'limit number', <a class="constant" onClick="logConstant('VALUE_DEFAULT')" href="../../_constants/VALUE_DEFAULT.html" onMouseOver="constPopup(event,'VALUE_DEFAULT')">VALUE_DEFAULT</a>, 0)
<a name="l179"><span class="linenum"> 179</span></a>              )
<a name="l180"><span class="linenum"> 180</span></a>          );
<a name="l181"><span class="linenum"> 181</span></a>      }
<a name="l182"><span class="linenum"> 182</span></a>  
<a name="l183"><span class="linenum"> 183</span></a>      <span class="comment">/**</span>
<a name="l184"><span class="linenum"> 184</span></a>  <span class="comment">     * Returns a list of forum discussions as well as a summary of the discussion</span>
<a name="l185"><span class="linenum"> 185</span></a>  <span class="comment">     * in a provided list of forums.</span>
<a name="l186"><span class="linenum"> 186</span></a>  <span class="comment">     *</span>
<a name="l187"><span class="linenum"> 187</span></a>  <span class="comment">     * @param array $forumids the forum ids</span>
<a name="l188"><span class="linenum"> 188</span></a>  <span class="comment">     * @param int $limitfrom limit from SQL data</span>
<a name="l189"><span class="linenum"> 189</span></a>  <span class="comment">     * @param int $limitnum limit number SQL data</span>
<a name="l190"><span class="linenum"> 190</span></a>  <span class="comment">     *</span>
<a name="l191"><span class="linenum"> 191</span></a>  <span class="comment">     * @return array the forum discussion details</span>
<a name="l192"><span class="linenum"> 192</span></a>  <span class="comment">     * @since Moodle 2.5</span>
<a name="l193"><span class="linenum"> 193</span></a>  <span class="comment">     * @deprecated Moodle 2.8 MDL-46458 - Please do not call this function any more.</span>
<a name="l194"><span class="linenum"> 194</span></a>  <span class="comment">     * @see get_forum_discussions_paginated</span>
<a name="l195"><span class="linenum"> 195</span></a>  <span class="comment">     */</span>
<a name="l196"><span class="linenum"> 196</span></a>      public static function <a class="function" onClick="logFunction('get_forum_discussions')" href="../../_functions/get_forum_discussions.html" onMouseOver="funcPopup(event,'get_forum_discussions')">get_forum_discussions</a>(<a class="var it29259" onMouseOver="hilite(29259)" onMouseOut="lolite()" onClick="logVariable('forumids')" href="../../_variables/forumids.html">$forumids</a>, <a class="var it2932" onMouseOver="hilite(2932)" onMouseOut="lolite()" onClick="logVariable('limitfrom')" href="../../_variables/limitfrom.html">$limitfrom</a> = 0, <a class="var it3120" onMouseOver="hilite(3120)" onMouseOut="lolite()" onClick="logVariable('limitnum')" href="../../_variables/limitnum.html">$limitnum</a> = 0) {
<a name="l197"><span class="linenum"> 197</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l198"><span class="linenum"> 198</span></a>  
<a name="l199"><span class="linenum"> 199</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . "<a class="filename" href="../../mod/forum/lib.php.html">/mod/forum/lib.php</a>");
<a name="l200"><span class="linenum"> 200</span></a>  
<a name="l201"><span class="linenum"> 201</span></a>  <span class="comment">        // Validate the parameter.</span>
<a name="l202"><span class="linenum"> 202</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = self::<a class="function" onClick="logFunction('validate_parameters')" href="../../_functions/validate_parameters.html" onMouseOver="funcPopup(event,'validate_parameters')">validate_parameters</a>(self::<a class="function" onClick="logFunction('get_forum_discussions_parameters')" href="../../_functions/get_forum_discussions_parameters.html" onMouseOver="funcPopup(event,'get_forum_discussions_parameters')">get_forum_discussions_parameters</a>(),
<a name="l203"><span class="linenum"> 203</span></a>              array(
<a name="l204"><span class="linenum"> 204</span></a>                  'forumids'  =&gt; <a class="var it29259" onMouseOver="hilite(29259)" onMouseOut="lolite()" onClick="logVariable('forumids')" href="../../_variables/forumids.html">$forumids</a>,
<a name="l205"><span class="linenum"> 205</span></a>                  'limitfrom' =&gt; <a class="var it2932" onMouseOver="hilite(2932)" onMouseOut="lolite()" onClick="logVariable('limitfrom')" href="../../_variables/limitfrom.html">$limitfrom</a>,
<a name="l206"><span class="linenum"> 206</span></a>                  'limitnum'  =&gt; <a class="var it3120" onMouseOver="hilite(3120)" onMouseOut="lolite()" onClick="logVariable('limitnum')" href="../../_variables/limitnum.html">$limitnum</a>,
<a name="l207"><span class="linenum"> 207</span></a>              ));
<a name="l208"><span class="linenum"> 208</span></a>          <a class="var it29259" onMouseOver="hilite(29259)" onMouseOut="lolite()" onClick="logVariable('forumids')" href="../../_variables/forumids.html">$forumids</a>  = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['forumids'];
<a name="l209"><span class="linenum"> 209</span></a>          <a class="var it2932" onMouseOver="hilite(2932)" onMouseOut="lolite()" onClick="logVariable('limitfrom')" href="../../_variables/limitfrom.html">$limitfrom</a> = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['limitfrom'];
<a name="l210"><span class="linenum"> 210</span></a>          <a class="var it3120" onMouseOver="hilite(3120)" onMouseOut="lolite()" onClick="logVariable('limitnum')" href="../../_variables/limitnum.html">$limitnum</a>  = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['limitnum'];
<a name="l211"><span class="linenum"> 211</span></a>  
<a name="l212"><span class="linenum"> 212</span></a>  <span class="comment">        // Array to store the forum discussions to return.</span>
<a name="l213"><span class="linenum"> 213</span></a>          <a class="var it32398" onMouseOver="hilite(32398)" onMouseOut="lolite()" onClick="logVariable('arrdiscussions')" href="../../_variables/arrdiscussions.html">$arrdiscussions</a> = array();
<a name="l214"><span class="linenum"> 214</span></a>  <span class="comment">        // Keep track of the users we have looked up in the DB.</span>
<a name="l215"><span class="linenum"> 215</span></a>          <a class="var it32399" onMouseOver="hilite(32399)" onMouseOut="lolite()" onClick="logVariable('arrusers')" href="../../_variables/arrusers.html">$arrusers</a> = array();
<a name="l216"><span class="linenum"> 216</span></a>  
<a name="l217"><span class="linenum"> 217</span></a>  <span class="comment">        // Loop through them.</span>
<a name="l218"><span class="linenum"> 218</span></a>          foreach (<a class="var it29259" onMouseOver="hilite(29259)" onMouseOut="lolite()" onClick="logVariable('forumids')" href="../../_variables/forumids.html">$forumids</a> as <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>) {
<a name="l219"><span class="linenum"> 219</span></a>  <span class="comment">            // Get the forum object.</span>
<a name="l220"><span class="linenum"> 220</span></a>              <a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('forum', array('id' =&gt; <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l221"><span class="linenum"> 221</span></a>              <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="function" onClick="logFunction('get_course')" href="../../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>(<a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('course')" class="var it39537" onMouseOver="hilite(39537)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>);
<a name="l222"><span class="linenum"> 222</span></a>  
<a name="l223"><span class="linenum"> 223</span></a>              <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a> = <a class="function" onClick="logFunction('get_fast_modinfo')" href="../../_functions/get_fast_modinfo.html" onMouseOver="funcPopup(event,'get_fast_modinfo')">get_fast_modinfo</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l224"><span class="linenum"> 224</span></a>              <a class="var it2555" onMouseOver="hilite(2555)" onMouseOut="lolite()" onClick="logVariable('forums')" href="../../_variables/forums.html">$forums</a>  = <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a>-&gt;<a class="function" onClick="logFunction('get_instances_of')" href="../../_functions/get_instances_of.html" onMouseOver="funcPopup(event,'get_instances_of')">get_instances_of</a>('forum');
<a name="l225"><span class="linenum"> 225</span></a>              <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="var it2555" onMouseOver="hilite(2555)" onMouseOut="lolite()" onClick="logVariable('forums')" href="../../_variables/forums.html">$forums</a>[<a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('id')" class="var it39537" onMouseOver="hilite(39537)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>];
<a name="l226"><span class="linenum"> 226</span></a>  
<a name="l227"><span class="linenum"> 227</span></a>  <span class="comment">            // Get the module context.</span>
<a name="l228"><span class="linenum"> 228</span></a>              <a class="var it1418" onMouseOver="hilite(1418)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l229"><span class="linenum"> 229</span></a>  
<a name="l230"><span class="linenum"> 230</span></a>  <span class="comment">            // Validate the context.</span>
<a name="l231"><span class="linenum"> 231</span></a>              self::<a class="function" onClick="logFunction('validate_context')" href="../../_functions/validate_context.html" onMouseOver="funcPopup(event,'validate_context')">validate_context</a>(<a class="var it1418" onMouseOver="hilite(1418)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>);
<a name="l232"><span class="linenum"> 232</span></a>  
<a name="l233"><span class="linenum"> 233</span></a>              <a class="function" onClick="logFunction('require_capability')" href="../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/forum:viewdiscussion', <a class="var it1418" onMouseOver="hilite(1418)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>);
<a name="l234"><span class="linenum"> 234</span></a>  
<a name="l235"><span class="linenum"> 235</span></a>  <span class="comment">            // Get the discussions for this forum.</span>
<a name="l236"><span class="linenum"> 236</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array();
<a name="l237"><span class="linenum"> 237</span></a>  
<a name="l238"><span class="linenum"> 238</span></a>              <a class="var it7068" onMouseOver="hilite(7068)" onMouseOut="lolite()" onClick="logVariable('groupselect')" href="../../_variables/groupselect.html">$groupselect</a> = &quot;&quot;;
<a name="l239"><span class="linenum"> 239</span></a>              <a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a> = <a class="function" onClick="logFunction('groups_get_activity_groupmode')" href="../../_functions/groups_get_activity_groupmode.html" onMouseOver="funcPopup(event,'groups_get_activity_groupmode')">groups_get_activity_groupmode</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l240"><span class="linenum"> 240</span></a>  
<a name="l241"><span class="linenum"> 241</span></a>              if (<a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a> and <a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a> != <a class="constant" onClick="logConstant('VISIBLEGROUPS')" href="../../_constants/VISIBLEGROUPS.html" onMouseOver="constPopup(event,'VISIBLEGROUPS')">VISIBLEGROUPS</a> and !<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:accessallgroups', <a class="var it1418" onMouseOver="hilite(1418)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>)) {
<a name="l242"><span class="linenum"> 242</span></a>  <span class="comment">                // Get all the discussions from all the groups this user belongs to.</span>
<a name="l243"><span class="linenum"> 243</span></a>                  <a class="var it11639" onMouseOver="hilite(11639)" onMouseOut="lolite()" onClick="logVariable('usergroups')" href="../../_variables/usergroups.html">$usergroups</a> = <a class="function" onClick="logFunction('groups_get_user_groups')" href="../../_functions/groups_get_user_groups.html" onMouseOver="funcPopup(event,'groups_get_user_groups')">groups_get_user_groups</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l244"><span class="linenum"> 244</span></a>                  if (!empty(<a class="var it11639" onMouseOver="hilite(11639)" onMouseOut="lolite()" onClick="logVariable('usergroups')" href="../../_variables/usergroups.html">$usergroups</a>['0'])) {
<a name="l245"><span class="linenum"> 245</span></a>                      <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it11639" onMouseOver="hilite(11639)" onMouseOut="lolite()" onClick="logVariable('usergroups')" href="../../_variables/usergroups.html">$usergroups</a>['0']);
<a name="l246"><span class="linenum"> 246</span></a>                      <a class="var it7068" onMouseOver="hilite(7068)" onMouseOut="lolite()" onClick="logVariable('groupselect')" href="../../_variables/groupselect.html">$groupselect</a> = &quot;AND (groupid <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> OR groupid = -1)&quot;;
<a name="l247"><span class="linenum"> 247</span></a>                  }
<a name="l248"><span class="linenum"> 248</span></a>              }
<a name="l249"><span class="linenum"> 249</span></a>              <a class="phpfunction" onClick="logFunction('array_unshift')" href="../../_functions/array_unshift.html" onMouseOver="phpfuncPopup(event,'array_unshift')">array_unshift</a>(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>);
<a name="l250"><span class="linenum"> 250</span></a>              <a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../_variables/select.html">$select</a> = &quot;forum = ? <a class="var it7068" onMouseOver="hilite(7068)" onMouseOut="lolite()" onClick="logVariable('groupselect')" href="../../_variables/groupselect.html">$groupselect</a>&quot;;
<a name="l251"><span class="linenum"> 251</span></a>  
<a name="l252"><span class="linenum"> 252</span></a>              if (<a class="var it2556" onMouseOver="hilite(2556)" onMouseOut="lolite()" onClick="logVariable('discussions')" href="../../_variables/discussions.html">$discussions</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>('forum_discussions', <a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../_variables/select.html">$select</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, 'timemodified DESC', '*',
<a name="l253"><span class="linenum"> 253</span></a>                                                              <a class="var it2932" onMouseOver="hilite(2932)" onMouseOut="lolite()" onClick="logVariable('limitfrom')" href="../../_variables/limitfrom.html">$limitfrom</a>, <a class="var it3120" onMouseOver="hilite(3120)" onMouseOut="lolite()" onClick="logVariable('limitnum')" href="../../_variables/limitnum.html">$limitnum</a>)) {
<a name="l254"><span class="linenum"> 254</span></a>  
<a name="l255"><span class="linenum"> 255</span></a>  <span class="comment">                // Check if they can view full names.</span>
<a name="l256"><span class="linenum"> 256</span></a>                  <a class="var it3124" onMouseOver="hilite(3124)" onMouseOut="lolite()" onClick="logVariable('canviewfullname')" href="../../_variables/canviewfullname.html">$canviewfullname</a> = <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:viewfullnames', <a class="var it1418" onMouseOver="hilite(1418)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>);
<a name="l257"><span class="linenum"> 257</span></a>  <span class="comment">                // Get the unreads array, this takes a forum id and returns data for all discussions.</span>
<a name="l258"><span class="linenum"> 258</span></a>                  <a class="var it23137" onMouseOver="hilite(23137)" onMouseOut="lolite()" onClick="logVariable('unreads')" href="../../_variables/unreads.html">$unreads</a> = array();
<a name="l259"><span class="linenum"> 259</span></a>                  if (<a class="var it23161" onMouseOver="hilite(23161)" onMouseOut="lolite()" onClick="logVariable('cantrack')" href="../../_variables/cantrack.html">$cantrack</a> = <a class="function" onClick="logFunction('forum_tp_can_track_forums')" href="../../_functions/forum_tp_can_track_forums.html" onMouseOver="funcPopup(event,'forum_tp_can_track_forums')">forum_tp_can_track_forums</a>(<a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>)) {
<a name="l260"><span class="linenum"> 260</span></a>                      if (<a class="var it20844" onMouseOver="hilite(20844)" onMouseOut="lolite()" onClick="logVariable('forumtracked')" href="../../_variables/forumtracked.html">$forumtracked</a> = <a class="function" onClick="logFunction('forum_tp_is_tracked')" href="../../_functions/forum_tp_is_tracked.html" onMouseOver="funcPopup(event,'forum_tp_is_tracked')">forum_tp_is_tracked</a>(<a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>)) {
<a name="l261"><span class="linenum"> 261</span></a>                          <a class="var it23137" onMouseOver="hilite(23137)" onMouseOut="lolite()" onClick="logVariable('unreads')" href="../../_variables/unreads.html">$unreads</a> = <a class="function" onClick="logFunction('forum_get_discussions_unread')" href="../../_functions/forum_get_discussions_unread.html" onMouseOver="funcPopup(event,'forum_get_discussions_unread')">forum_get_discussions_unread</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l262"><span class="linenum"> 262</span></a>                      }
<a name="l263"><span class="linenum"> 263</span></a>                  }
<a name="l264"><span class="linenum"> 264</span></a>  <span class="comment">                // The forum function returns the replies for all the discussions in a given forum.</span>
<a name="l265"><span class="linenum"> 265</span></a>                  <a class="var it8197" onMouseOver="hilite(8197)" onMouseOut="lolite()" onClick="logVariable('replies')" href="../../_variables/replies.html">$replies</a> = <a class="function" onClick="logFunction('forum_count_discussion_replies')" href="../../_functions/forum_count_discussion_replies.html" onMouseOver="funcPopup(event,'forum_count_discussion_replies')">forum_count_discussion_replies</a>(<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>);
<a name="l266"><span class="linenum"> 266</span></a>  
<a name="l267"><span class="linenum"> 267</span></a>                  foreach (<a class="var it2556" onMouseOver="hilite(2556)" onMouseOut="lolite()" onClick="logVariable('discussions')" href="../../_variables/discussions.html">$discussions</a> as <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>) {
<a name="l268"><span class="linenum"> 268</span></a>  <span class="comment">                    // This function checks capabilities, timed discussions, groups and qanda forums posting.</span>
<a name="l269"><span class="linenum"> 269</span></a>                      if (!<a class="function" onClick="logFunction('forum_user_can_see_discussion')" href="../../_functions/forum_user_can_see_discussion.html" onMouseOver="funcPopup(event,'forum_user_can_see_discussion')">forum_user_can_see_discussion</a>(<a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>, <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>, <a class="var it1418" onMouseOver="hilite(1418)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>)) {
<a name="l270"><span class="linenum"> 270</span></a>                          continue;
<a name="l271"><span class="linenum"> 271</span></a>                      }
<a name="l272"><span class="linenum"> 272</span></a>  
<a name="l273"><span class="linenum"> 273</span></a>                      <a class="var it14955" onMouseOver="hilite(14955)" onMouseOut="lolite()" onClick="logVariable('usernamefields')" href="../../_variables/usernamefields.html">$usernamefields</a> = <a class="class" onClick="logClass('user_picture')" href="../../_classes/user_picture.html" onMouseOver="classPopup(event,'user_picture')">user_picture</a>::<a class="function" onClick="logFunction('fields')" href="../../_functions/fields.html" onMouseOver="funcPopup(event,'fields')">fields</a>();
<a name="l274"><span class="linenum"> 274</span></a>  <span class="comment">                    // If we don't have the users details then perform DB call.</span>
<a name="l275"><span class="linenum"> 275</span></a>                      if (empty(<a class="var it32399" onMouseOver="hilite(32399)" onMouseOut="lolite()" onClick="logVariable('arrusers')" href="../../_variables/arrusers.html">$arrusers</a>[<a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('userid')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>])) {
<a name="l276"><span class="linenum"> 276</span></a>                          <a class="var it32399" onMouseOver="hilite(32399)" onMouseOut="lolite()" onClick="logVariable('arrusers')" href="../../_variables/arrusers.html">$arrusers</a>[<a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('userid')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>] = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id' =&gt; <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('userid')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>),
<a name="l277"><span class="linenum"> 277</span></a>                                  <a class="var it14955" onMouseOver="hilite(14955)" onMouseOut="lolite()" onClick="logVariable('usernamefields')" href="../../_variables/usernamefields.html">$usernamefields</a>, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l278"><span class="linenum"> 278</span></a>                      }
<a name="l279"><span class="linenum"> 279</span></a>  <span class="comment">                    // Get the subject.</span>
<a name="l280"><span class="linenum"> 280</span></a>                      <a class="var it1426" onMouseOver="hilite(1426)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../_variables/subject.html">$subject</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('forum_posts', 'subject', array('id' =&gt; <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('firstpost')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/firstpost.html">firstpost</a>), <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l281"><span class="linenum"> 281</span></a>  <span class="comment">                    // Create object to return.</span>
<a name="l282"><span class="linenum"> 282</span></a>                      <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> = new stdClass();
<a name="l283"><span class="linenum"> 283</span></a>                      <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('id')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = (int) <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('id')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l284"><span class="linenum"> 284</span></a>                      <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('course')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../../_variables/course.html">course</a> = <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('course')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>;
<a name="l285"><span class="linenum"> 285</span></a>                      <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('forum')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../../_variables/forum.html">forum</a> = <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('forum')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/forum.html">forum</a>;
<a name="l286"><span class="linenum"> 286</span></a>                      <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('name')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../../_variables/name.html">name</a> = <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('name')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>;
<a name="l287"><span class="linenum"> 287</span></a>                      <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('userid')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('userid')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>;
<a name="l288"><span class="linenum"> 288</span></a>                      <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('groupid')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a> = <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('groupid')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a>;
<a name="l289"><span class="linenum"> 289</span></a>                      <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('assessed')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../../_variables/assessed.html">assessed</a> = <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('assessed')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/assessed.html">assessed</a>;
<a name="l290"><span class="linenum"> 290</span></a>                      <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('timemodified')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = (int) <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('timemodified')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a>;
<a name="l291"><span class="linenum"> 291</span></a>                      <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('usermodified')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../../_variables/usermodified.html">usermodified</a> = <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('usermodified')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/usermodified.html">usermodified</a>;
<a name="l292"><span class="linenum"> 292</span></a>                      <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('timestart')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../../_variables/timestart.html">timestart</a> = <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('timestart')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/timestart.html">timestart</a>;
<a name="l293"><span class="linenum"> 293</span></a>                      <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('timeend')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../../_variables/timeend.html">timeend</a> = <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('timeend')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/timeend.html">timeend</a>;
<a name="l294"><span class="linenum"> 294</span></a>                      <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('firstpost')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../../_variables/firstpost.html">firstpost</a> = (int) <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('firstpost')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/firstpost.html">firstpost</a>;
<a name="l295"><span class="linenum"> 295</span></a>                      <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('firstuserfullname')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../../_variables/firstuserfullname.html">firstuserfullname</a> = <a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it32399" onMouseOver="hilite(32399)" onMouseOut="lolite()" onClick="logVariable('arrusers')" href="../../_variables/arrusers.html">$arrusers</a>[<a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('userid')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>], <a class="var it3124" onMouseOver="hilite(3124)" onMouseOut="lolite()" onClick="logVariable('canviewfullname')" href="../../_variables/canviewfullname.html">$canviewfullname</a>);
<a name="l296"><span class="linenum"> 296</span></a>                      <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('firstuserimagealt')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../../_variables/firstuserimagealt.html">firstuserimagealt</a> = <a class="var it32399" onMouseOver="hilite(32399)" onMouseOut="lolite()" onClick="logVariable('arrusers')" href="../../_variables/arrusers.html">$arrusers</a>[<a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('userid')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>]-&gt;imagealt;
<a name="l297"><span class="linenum"> 297</span></a>                      <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('firstuserpicture')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../../_variables/firstuserpicture.html">firstuserpicture</a> = <a class="var it32399" onMouseOver="hilite(32399)" onMouseOut="lolite()" onClick="logVariable('arrusers')" href="../../_variables/arrusers.html">$arrusers</a>[<a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('userid')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>]-&gt;picture;
<a name="l298"><span class="linenum"> 298</span></a>                      <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('firstuseremail')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../../_variables/firstuseremail.html">firstuseremail</a> = <a class="var it32399" onMouseOver="hilite(32399)" onMouseOut="lolite()" onClick="logVariable('arrusers')" href="../../_variables/arrusers.html">$arrusers</a>[<a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('userid')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>]-&gt;email;
<a name="l299"><span class="linenum"> 299</span></a>                      <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('subject')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../../_variables/subject.html">subject</a> = <a class="var it1426" onMouseOver="hilite(1426)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../_variables/subject.html">$subject</a>;
<a name="l300"><span class="linenum"> 300</span></a>                      <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('numunread')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../../_variables/numunread.html">numunread</a> = '';
<a name="l301"><span class="linenum"> 301</span></a>                      if (<a class="var it23161" onMouseOver="hilite(23161)" onMouseOut="lolite()" onClick="logVariable('cantrack')" href="../../_variables/cantrack.html">$cantrack</a> &amp;&amp; <a class="var it20844" onMouseOver="hilite(20844)" onMouseOut="lolite()" onClick="logVariable('forumtracked')" href="../../_variables/forumtracked.html">$forumtracked</a>) {
<a name="l302"><span class="linenum"> 302</span></a>                          if (isset(<a class="var it23137" onMouseOver="hilite(23137)" onMouseOut="lolite()" onClick="logVariable('unreads')" href="../../_variables/unreads.html">$unreads</a>[<a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('id')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>])) {
<a name="l303"><span class="linenum"> 303</span></a>                              <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('numunread')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../../_variables/numunread.html">numunread</a> = (int) <a class="var it23137" onMouseOver="hilite(23137)" onMouseOut="lolite()" onClick="logVariable('unreads')" href="../../_variables/unreads.html">$unreads</a>[<a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('id')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>];
<a name="l304"><span class="linenum"> 304</span></a>                          }
<a name="l305"><span class="linenum"> 305</span></a>                      }
<a name="l306"><span class="linenum"> 306</span></a>  <span class="comment">                    // Check if there are any replies to this discussion.</span>
<a name="l307"><span class="linenum"> 307</span></a>                      if (!empty(<a class="var it8197" onMouseOver="hilite(8197)" onMouseOut="lolite()" onClick="logVariable('replies')" href="../../_variables/replies.html">$replies</a>[<a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('id')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>])) {
<a name="l308"><span class="linenum"> 308</span></a>                           <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('numreplies')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../../_variables/numreplies.html">numreplies</a> = (int) <a class="var it8197" onMouseOver="hilite(8197)" onMouseOut="lolite()" onClick="logVariable('replies')" href="../../_variables/replies.html">$replies</a>[<a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('id')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>]-&gt;replies;
<a name="l309"><span class="linenum"> 309</span></a>                           <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('lastpost')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../../_variables/lastpost.html">lastpost</a> = (int) <a class="var it8197" onMouseOver="hilite(8197)" onMouseOut="lolite()" onClick="logVariable('replies')" href="../../_variables/replies.html">$replies</a>[<a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('id')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>]-&gt;lastpostid;
<a name="l310"><span class="linenum"> 310</span></a>                      } else { // No replies, so the last post will be the first post.
<a name="l311"><span class="linenum"> 311</span></a>                          <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('numreplies')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../../_variables/numreplies.html">numreplies</a> = 0;
<a name="l312"><span class="linenum"> 312</span></a>                          <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('lastpost')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../../_variables/lastpost.html">lastpost</a> = (int) <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('firstpost')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/firstpost.html">firstpost</a>;
<a name="l313"><span class="linenum"> 313</span></a>                      }
<a name="l314"><span class="linenum"> 314</span></a>  <span class="comment">                    // Get the last post as well as the user who made it.</span>
<a name="l315"><span class="linenum"> 315</span></a>                      <a class="var it23089" onMouseOver="hilite(23089)" onMouseOut="lolite()" onClick="logVariable('lastpost')" href="../../_variables/lastpost.html">$lastpost</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('forum_posts', array('id' =&gt; <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('lastpost')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../../_variables/lastpost.html">lastpost</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l316"><span class="linenum"> 316</span></a>                      if (empty(<a class="var it32399" onMouseOver="hilite(32399)" onMouseOut="lolite()" onClick="logVariable('arrusers')" href="../../_variables/arrusers.html">$arrusers</a>[<a class="var it23089" onMouseOver="hilite(23089)" onMouseOut="lolite()" onClick="logVariable('lastpost')" href="../../_variables/lastpost.html">$lastpost</a>-&gt;<a onClick="logVariable('userid')" class="var it40687" onMouseOver="hilite(40687)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>])) {
<a name="l317"><span class="linenum"> 317</span></a>                          <a class="var it32399" onMouseOver="hilite(32399)" onMouseOut="lolite()" onClick="logVariable('arrusers')" href="../../_variables/arrusers.html">$arrusers</a>[<a class="var it23089" onMouseOver="hilite(23089)" onMouseOut="lolite()" onClick="logVariable('lastpost')" href="../../_variables/lastpost.html">$lastpost</a>-&gt;<a onClick="logVariable('userid')" class="var it40687" onMouseOver="hilite(40687)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>] = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id' =&gt; <a class="var it23089" onMouseOver="hilite(23089)" onMouseOut="lolite()" onClick="logVariable('lastpost')" href="../../_variables/lastpost.html">$lastpost</a>-&gt;<a onClick="logVariable('userid')" class="var it40687" onMouseOver="hilite(40687)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>),
<a name="l318"><span class="linenum"> 318</span></a>                                  <a class="var it14955" onMouseOver="hilite(14955)" onMouseOut="lolite()" onClick="logVariable('usernamefields')" href="../../_variables/usernamefields.html">$usernamefields</a>, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l319"><span class="linenum"> 319</span></a>                      }
<a name="l320"><span class="linenum"> 320</span></a>                      <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('lastuserid')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../../_variables/lastuserid.html">lastuserid</a> = <a class="var it23089" onMouseOver="hilite(23089)" onMouseOut="lolite()" onClick="logVariable('lastpost')" href="../../_variables/lastpost.html">$lastpost</a>-&gt;<a onClick="logVariable('userid')" class="var it40687" onMouseOver="hilite(40687)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>;
<a name="l321"><span class="linenum"> 321</span></a>                      <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('lastuserfullname')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../../_variables/lastuserfullname.html">lastuserfullname</a> = <a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it32399" onMouseOver="hilite(32399)" onMouseOut="lolite()" onClick="logVariable('arrusers')" href="../../_variables/arrusers.html">$arrusers</a>[<a class="var it23089" onMouseOver="hilite(23089)" onMouseOut="lolite()" onClick="logVariable('lastpost')" href="../../_variables/lastpost.html">$lastpost</a>-&gt;<a onClick="logVariable('userid')" class="var it40687" onMouseOver="hilite(40687)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>], <a class="var it3124" onMouseOver="hilite(3124)" onMouseOut="lolite()" onClick="logVariable('canviewfullname')" href="../../_variables/canviewfullname.html">$canviewfullname</a>);
<a name="l322"><span class="linenum"> 322</span></a>                      <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('lastuserimagealt')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../../_variables/lastuserimagealt.html">lastuserimagealt</a> = <a class="var it32399" onMouseOver="hilite(32399)" onMouseOut="lolite()" onClick="logVariable('arrusers')" href="../../_variables/arrusers.html">$arrusers</a>[<a class="var it23089" onMouseOver="hilite(23089)" onMouseOut="lolite()" onClick="logVariable('lastpost')" href="../../_variables/lastpost.html">$lastpost</a>-&gt;<a onClick="logVariable('userid')" class="var it40687" onMouseOver="hilite(40687)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>]-&gt;imagealt;
<a name="l323"><span class="linenum"> 323</span></a>                      <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('lastuserpicture')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../../_variables/lastuserpicture.html">lastuserpicture</a> = <a class="var it32399" onMouseOver="hilite(32399)" onMouseOut="lolite()" onClick="logVariable('arrusers')" href="../../_variables/arrusers.html">$arrusers</a>[<a class="var it23089" onMouseOver="hilite(23089)" onMouseOut="lolite()" onClick="logVariable('lastpost')" href="../../_variables/lastpost.html">$lastpost</a>-&gt;<a onClick="logVariable('userid')" class="var it40687" onMouseOver="hilite(40687)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>]-&gt;picture;
<a name="l324"><span class="linenum"> 324</span></a>                      <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('lastuseremail')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../../_variables/lastuseremail.html">lastuseremail</a> = <a class="var it32399" onMouseOver="hilite(32399)" onMouseOut="lolite()" onClick="logVariable('arrusers')" href="../../_variables/arrusers.html">$arrusers</a>[<a class="var it23089" onMouseOver="hilite(23089)" onMouseOut="lolite()" onClick="logVariable('lastpost')" href="../../_variables/lastpost.html">$lastpost</a>-&gt;<a onClick="logVariable('userid')" class="var it40687" onMouseOver="hilite(40687)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>]-&gt;email;
<a name="l325"><span class="linenum"> 325</span></a>  <span class="comment">                    // Add the discussion statistics to the array to return.</span>
<a name="l326"><span class="linenum"> 326</span></a>                      <a class="var it32398" onMouseOver="hilite(32398)" onMouseOut="lolite()" onClick="logVariable('arrdiscussions')" href="../../_variables/arrdiscussions.html">$arrdiscussions</a>[<a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('id')" class="var it40015" onMouseOver="hilite(40015)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = (array) <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>;
<a name="l327"><span class="linenum"> 327</span></a>                  }
<a name="l328"><span class="linenum"> 328</span></a>              }
<a name="l329"><span class="linenum"> 329</span></a>          }
<a name="l330"><span class="linenum"> 330</span></a>  
<a name="l331"><span class="linenum"> 331</span></a>          return <a class="var it32398" onMouseOver="hilite(32398)" onMouseOut="lolite()" onClick="logVariable('arrdiscussions')" href="../../_variables/arrdiscussions.html">$arrdiscussions</a>;
<a name="l332"><span class="linenum"> 332</span></a>      }
<a name="l333"><span class="linenum"> 333</span></a>  
<a name="l334"><span class="linenum"> 334</span></a>      <span class="comment">/**</span>
<a name="l335"><span class="linenum"> 335</span></a>  <span class="comment">     * Describes the get_forum_discussions return value.</span>
<a name="l336"><span class="linenum"> 336</span></a>  <span class="comment">     *</span>
<a name="l337"><span class="linenum"> 337</span></a>  <span class="comment">     * @return external_single_structure</span>
<a name="l338"><span class="linenum"> 338</span></a>  <span class="comment">     * @since Moodle 2.5</span>
<a name="l339"><span class="linenum"> 339</span></a>  <span class="comment">     * @deprecated Moodle 2.8 MDL-46458 - Please do not call this function any more.</span>
<a name="l340"><span class="linenum"> 340</span></a>  <span class="comment">     * @see get_forum_discussions_paginated</span>
<a name="l341"><span class="linenum"> 341</span></a>  <span class="comment">     */</span>
<a name="l342"><span class="linenum"> 342</span></a>       public static function <a class="function" onClick="logFunction('get_forum_discussions_returns')" href="../../_functions/get_forum_discussions_returns.html" onMouseOver="funcPopup(event,'get_forum_discussions_returns')">get_forum_discussions_returns</a>() {
<a name="l343"><span class="linenum"> 343</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_multiple_structure')" href="../../_classes/external_multiple_structure.html" onMouseOver="classPopup(event,'external_multiple_structure')">external_multiple_structure</a>(
<a name="l344"><span class="linenum"> 344</span></a>              <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l345"><span class="linenum"> 345</span></a>                  array(
<a name="l346"><span class="linenum"> 346</span></a>                      'id' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Forum id'),
<a name="l347"><span class="linenum"> 347</span></a>                      'course' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Course id'),
<a name="l348"><span class="linenum"> 348</span></a>                      'forum' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'The forum id'),
<a name="l349"><span class="linenum"> 349</span></a>                      'name' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'Discussion name'),
<a name="l350"><span class="linenum"> 350</span></a>                      'userid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'User id'),
<a name="l351"><span class="linenum"> 351</span></a>                      'groupid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Group id'),
<a name="l352"><span class="linenum"> 352</span></a>                      'assessed' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Is this assessed?'),
<a name="l353"><span class="linenum"> 353</span></a>                      'timemodified' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Time modified'),
<a name="l354"><span class="linenum"> 354</span></a>                      'usermodified' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'The id of the user who last modified'),
<a name="l355"><span class="linenum"> 355</span></a>                      'timestart' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Time discussion can start'),
<a name="l356"><span class="linenum"> 356</span></a>                      'timeend' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Time discussion ends'),
<a name="l357"><span class="linenum"> 357</span></a>                      'firstpost' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'The first post in the discussion'),
<a name="l358"><span class="linenum"> 358</span></a>                      'firstuserfullname' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'The discussion creators fullname'),
<a name="l359"><span class="linenum"> 359</span></a>                      'firstuserimagealt' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'The discussion creators image alt'),
<a name="l360"><span class="linenum"> 360</span></a>                      'firstuserpicture' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'The discussion creators profile picture'),
<a name="l361"><span class="linenum"> 361</span></a>                      'firstuseremail' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'The discussion creators email'),
<a name="l362"><span class="linenum"> 362</span></a>                      'subject' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'The discussion subject'),
<a name="l363"><span class="linenum"> 363</span></a>                      'numreplies' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'The number of replies in the discussion'),
<a name="l364"><span class="linenum"> 364</span></a>                      'numunread' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'The number of unread posts, blank if this value is
<a name="l365"><span class="linenum"> 365</span></a>                          not available due to forum settings.'),
<a name="l366"><span class="linenum"> 366</span></a>                      'lastpost' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'The id of the last post in the discussion'),
<a name="l367"><span class="linenum"> 367</span></a>                      'lastuserid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'The id of the user who made the last post'),
<a name="l368"><span class="linenum"> 368</span></a>                      'lastuserfullname' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'The last person to posts fullname'),
<a name="l369"><span class="linenum"> 369</span></a>                      'lastuserimagealt' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'The last person to posts image alt'),
<a name="l370"><span class="linenum"> 370</span></a>                      'lastuserpicture' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'The last person to posts profile picture'),
<a name="l371"><span class="linenum"> 371</span></a>                      'lastuseremail' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'The last person to posts email'),
<a name="l372"><span class="linenum"> 372</span></a>                  ), 'discussion'
<a name="l373"><span class="linenum"> 373</span></a>              )
<a name="l374"><span class="linenum"> 374</span></a>          );
<a name="l375"><span class="linenum"> 375</span></a>      }
<a name="l376"><span class="linenum"> 376</span></a>  
<a name="l377"><span class="linenum"> 377</span></a>      <span class="comment">/**</span>
<a name="l378"><span class="linenum"> 378</span></a>  <span class="comment">     * Describes the parameters for get_forum_discussion_posts.</span>
<a name="l379"><span class="linenum"> 379</span></a>  <span class="comment">     *</span>
<a name="l380"><span class="linenum"> 380</span></a>  <span class="comment">     * @return external_external_function_parameters</span>
<a name="l381"><span class="linenum"> 381</span></a>  <span class="comment">     * @since Moodle 2.7</span>
<a name="l382"><span class="linenum"> 382</span></a>  <span class="comment">     */</span>
<a name="l383"><span class="linenum"> 383</span></a>      public static function <a class="function" onClick="logFunction('get_forum_discussion_posts_parameters')" href="../../_functions/get_forum_discussion_posts_parameters.html" onMouseOver="funcPopup(event,'get_forum_discussion_posts_parameters')">get_forum_discussion_posts_parameters</a>() {
<a name="l384"><span class="linenum"> 384</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_function_parameters')" href="../../_classes/external_function_parameters.html" onMouseOver="classPopup(event,'external_function_parameters')">external_function_parameters</a> (
<a name="l385"><span class="linenum"> 385</span></a>              array(
<a name="l386"><span class="linenum"> 386</span></a>                  'discussionid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'discussion ID', <a class="constant" onClick="logConstant('VALUE_REQUIRED')" href="../../_constants/VALUE_REQUIRED.html" onMouseOver="constPopup(event,'VALUE_REQUIRED')">VALUE_REQUIRED</a>),
<a name="l387"><span class="linenum"> 387</span></a>                  'sortby' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_ALPHA')" href="../../_constants/PARAM_ALPHA.html" onMouseOver="constPopup(event,'PARAM_ALPHA')">PARAM_ALPHA</a>,
<a name="l388"><span class="linenum"> 388</span></a>                      'sort by this element: id, created or modified', <a class="constant" onClick="logConstant('VALUE_DEFAULT')" href="../../_constants/VALUE_DEFAULT.html" onMouseOver="constPopup(event,'VALUE_DEFAULT')">VALUE_DEFAULT</a>, 'created'),
<a name="l389"><span class="linenum"> 389</span></a>                  'sortdirection' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_ALPHA')" href="../../_constants/PARAM_ALPHA.html" onMouseOver="constPopup(event,'PARAM_ALPHA')">PARAM_ALPHA</a>, 'sort direction: ASC or DESC', <a class="constant" onClick="logConstant('VALUE_DEFAULT')" href="../../_constants/VALUE_DEFAULT.html" onMouseOver="constPopup(event,'VALUE_DEFAULT')">VALUE_DEFAULT</a>, 'DESC')
<a name="l390"><span class="linenum"> 390</span></a>              )
<a name="l391"><span class="linenum"> 391</span></a>          );
<a name="l392"><span class="linenum"> 392</span></a>      }
<a name="l393"><span class="linenum"> 393</span></a>  
<a name="l394"><span class="linenum"> 394</span></a>      <span class="comment">/**</span>
<a name="l395"><span class="linenum"> 395</span></a>  <span class="comment">     * Returns a list of forum posts for a discussion</span>
<a name="l396"><span class="linenum"> 396</span></a>  <span class="comment">     *</span>
<a name="l397"><span class="linenum"> 397</span></a>  <span class="comment">     * @param int $discussionid the post ids</span>
<a name="l398"><span class="linenum"> 398</span></a>  <span class="comment">     * @param string $sortby sort by this element (id, created or modified)</span>
<a name="l399"><span class="linenum"> 399</span></a>  <span class="comment">     * @param string $sortdirection sort direction: ASC or DESC</span>
<a name="l400"><span class="linenum"> 400</span></a>  <span class="comment">     *</span>
<a name="l401"><span class="linenum"> 401</span></a>  <span class="comment">     * @return array the forum post details</span>
<a name="l402"><span class="linenum"> 402</span></a>  <span class="comment">     * @since Moodle 2.7</span>
<a name="l403"><span class="linenum"> 403</span></a>  <span class="comment">     */</span>
<a name="l404"><span class="linenum"> 404</span></a>      public static function <a class="function" onClick="logFunction('get_forum_discussion_posts')" href="../../_functions/get_forum_discussion_posts.html" onMouseOver="funcPopup(event,'get_forum_discussion_posts')">get_forum_discussion_posts</a>(<a class="var it8130" onMouseOver="hilite(8130)" onMouseOut="lolite()" onClick="logVariable('discussionid')" href="../../_variables/discussionid.html">$discussionid</a>, <a class="var it17854" onMouseOver="hilite(17854)" onMouseOut="lolite()" onClick="logVariable('sortby')" href="../../_variables/sortby.html">$sortby</a> = &quot;created&quot;, <a class="var it12268" onMouseOver="hilite(12268)" onMouseOut="lolite()" onClick="logVariable('sortdirection')" href="../../_variables/sortdirection.html">$sortdirection</a> = &quot;DESC&quot;) {
<a name="l405"><span class="linenum"> 405</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l406"><span class="linenum"> 406</span></a>  
<a name="l407"><span class="linenum"> 407</span></a>          <a class="var it2962" onMouseOver="hilite(2962)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../_variables/warnings.html">$warnings</a> = array();
<a name="l408"><span class="linenum"> 408</span></a>  
<a name="l409"><span class="linenum"> 409</span></a>  <span class="comment">        // Validate the parameter.</span>
<a name="l410"><span class="linenum"> 410</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = self::<a class="function" onClick="logFunction('validate_parameters')" href="../../_functions/validate_parameters.html" onMouseOver="funcPopup(event,'validate_parameters')">validate_parameters</a>(self::<a class="function" onClick="logFunction('get_forum_discussion_posts_parameters')" href="../../_functions/get_forum_discussion_posts_parameters.html" onMouseOver="funcPopup(event,'get_forum_discussion_posts_parameters')">get_forum_discussion_posts_parameters</a>(),
<a name="l411"><span class="linenum"> 411</span></a>              array(
<a name="l412"><span class="linenum"> 412</span></a>                  'discussionid' =&gt; <a class="var it8130" onMouseOver="hilite(8130)" onMouseOut="lolite()" onClick="logVariable('discussionid')" href="../../_variables/discussionid.html">$discussionid</a>,
<a name="l413"><span class="linenum"> 413</span></a>                  'sortby' =&gt; <a class="var it17854" onMouseOver="hilite(17854)" onMouseOut="lolite()" onClick="logVariable('sortby')" href="../../_variables/sortby.html">$sortby</a>,
<a name="l414"><span class="linenum"> 414</span></a>                  'sortdirection' =&gt; <a class="var it12268" onMouseOver="hilite(12268)" onMouseOut="lolite()" onClick="logVariable('sortdirection')" href="../../_variables/sortdirection.html">$sortdirection</a>));
<a name="l415"><span class="linenum"> 415</span></a>  
<a name="l416"><span class="linenum"> 416</span></a>  <span class="comment">        // Compact/extract functions are not recommended.</span>
<a name="l417"><span class="linenum"> 417</span></a>          <a class="var it8130" onMouseOver="hilite(8130)" onMouseOut="lolite()" onClick="logVariable('discussionid')" href="../../_variables/discussionid.html">$discussionid</a>   = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['discussionid'];
<a name="l418"><span class="linenum"> 418</span></a>          <a class="var it17854" onMouseOver="hilite(17854)" onMouseOut="lolite()" onClick="logVariable('sortby')" href="../../_variables/sortby.html">$sortby</a>         = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['sortby'];
<a name="l419"><span class="linenum"> 419</span></a>          <a class="var it12268" onMouseOver="hilite(12268)" onMouseOut="lolite()" onClick="logVariable('sortdirection')" href="../../_variables/sortdirection.html">$sortdirection</a>  = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['sortdirection'];
<a name="l420"><span class="linenum"> 420</span></a>  
<a name="l421"><span class="linenum"> 421</span></a>          <a class="var it32411" onMouseOver="hilite(32411)" onMouseOut="lolite()" onClick="logVariable('sortallowedvalues')" href="../../_variables/sortallowedvalues.html">$sortallowedvalues</a> = array('id', 'created', 'modified');
<a name="l422"><span class="linenum"> 422</span></a>          if (!<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it17854" onMouseOver="hilite(17854)" onMouseOut="lolite()" onClick="logVariable('sortby')" href="../../_variables/sortby.html">$sortby</a>, <a class="var it32411" onMouseOver="hilite(32411)" onMouseOut="lolite()" onClick="logVariable('sortallowedvalues')" href="../../_variables/sortallowedvalues.html">$sortallowedvalues</a>)) {
<a name="l423"><span class="linenum"> 423</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('invalid_parameter_exception')" href="../../_classes/invalid_parameter_exception.html" onMouseOver="classPopup(event,'invalid_parameter_exception')">invalid_parameter_exception</a>('Invalid value for sortby <a class="function" onClick="logFunction('parameter')" href="../../_functions/parameter.html" onMouseOver="funcPopup(event,'parameter')">parameter</a> (value: ' . <a class="var it17854" onMouseOver="hilite(17854)" onMouseOut="lolite()" onClick="logVariable('sortby')" href="../../_variables/sortby.html">$sortby</a> . '),' .
<a name="l424"><span class="linenum"> 424</span></a>                  'allowed values are: ' . <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(',', <a class="var it32411" onMouseOver="hilite(32411)" onMouseOut="lolite()" onClick="logVariable('sortallowedvalues')" href="../../_variables/sortallowedvalues.html">$sortallowedvalues</a>));
<a name="l425"><span class="linenum"> 425</span></a>          }
<a name="l426"><span class="linenum"> 426</span></a>  
<a name="l427"><span class="linenum"> 427</span></a>          <a class="var it12268" onMouseOver="hilite(12268)" onMouseOut="lolite()" onClick="logVariable('sortdirection')" href="../../_variables/sortdirection.html">$sortdirection</a> = <a class="phpfunction" onClick="logFunction('strtoupper')" href="../../_functions/strtoupper.html" onMouseOver="phpfuncPopup(event,'strtoupper')">strtoupper</a>(<a class="var it12268" onMouseOver="hilite(12268)" onMouseOut="lolite()" onClick="logVariable('sortdirection')" href="../../_variables/sortdirection.html">$sortdirection</a>);
<a name="l428"><span class="linenum"> 428</span></a>          <a class="var it32412" onMouseOver="hilite(32412)" onMouseOut="lolite()" onClick="logVariable('directionallowedvalues')" href="../../_variables/directionallowedvalues.html">$directionallowedvalues</a> = array('ASC', 'DESC');
<a name="l429"><span class="linenum"> 429</span></a>          if (!<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it12268" onMouseOver="hilite(12268)" onMouseOut="lolite()" onClick="logVariable('sortdirection')" href="../../_variables/sortdirection.html">$sortdirection</a>, <a class="var it32412" onMouseOver="hilite(32412)" onMouseOut="lolite()" onClick="logVariable('directionallowedvalues')" href="../../_variables/directionallowedvalues.html">$directionallowedvalues</a>)) {
<a name="l430"><span class="linenum"> 430</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('invalid_parameter_exception')" href="../../_classes/invalid_parameter_exception.html" onMouseOver="classPopup(event,'invalid_parameter_exception')">invalid_parameter_exception</a>('Invalid value for sortdirection <a class="function" onClick="logFunction('parameter')" href="../../_functions/parameter.html" onMouseOver="funcPopup(event,'parameter')">parameter</a> (value: ' . <a class="var it12268" onMouseOver="hilite(12268)" onMouseOut="lolite()" onClick="logVariable('sortdirection')" href="../../_variables/sortdirection.html">$sortdirection</a> . '),' .
<a name="l431"><span class="linenum"> 431</span></a>                  'allowed values are: ' . <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(',', <a class="var it32412" onMouseOver="hilite(32412)" onMouseOut="lolite()" onClick="logVariable('directionallowedvalues')" href="../../_variables/directionallowedvalues.html">$directionallowedvalues</a>));
<a name="l432"><span class="linenum"> 432</span></a>          }
<a name="l433"><span class="linenum"> 433</span></a>  
<a name="l434"><span class="linenum"> 434</span></a>          <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('forum_discussions', array('id' =&gt; <a class="var it8130" onMouseOver="hilite(8130)" onMouseOut="lolite()" onClick="logVariable('discussionid')" href="../../_variables/discussionid.html">$discussionid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l435"><span class="linenum"> 435</span></a>          <a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('forum', array('id' =&gt; <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('forum')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/forum.html">forum</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l436"><span class="linenum"> 436</span></a>          <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id' =&gt; <a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('course')" class="var it39537" onMouseOver="hilite(39537)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l437"><span class="linenum"> 437</span></a>          <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('forum', <a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('id')" class="var it39537" onMouseOver="hilite(39537)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, false, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l438"><span class="linenum"> 438</span></a>  
<a name="l439"><span class="linenum"> 439</span></a>  <span class="comment">        // Validate the module context. It checks everything that affects the module visibility (including groupings, etc..).</span>
<a name="l440"><span class="linenum"> 440</span></a>          <a class="var it1418" onMouseOver="hilite(1418)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l441"><span class="linenum"> 441</span></a>          self::<a class="function" onClick="logFunction('validate_context')" href="../../_functions/validate_context.html" onMouseOver="funcPopup(event,'validate_context')">validate_context</a>(<a class="var it1418" onMouseOver="hilite(1418)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>);
<a name="l442"><span class="linenum"> 442</span></a>  
<a name="l443"><span class="linenum"> 443</span></a>  <span class="comment">        // This require must be here, see mod/forum/discuss.php.</span>
<a name="l444"><span class="linenum"> 444</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . "<a class="filename" href="../../mod/forum/lib.php.html">/mod/forum/lib.php</a>");
<a name="l445"><span class="linenum"> 445</span></a>  
<a name="l446"><span class="linenum"> 446</span></a>  <span class="comment">        // Check they have the view forum capability.</span>
<a name="l447"><span class="linenum"> 447</span></a>          <a class="function" onClick="logFunction('require_capability')" href="../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/forum:viewdiscussion', <a class="var it1418" onMouseOver="hilite(1418)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>, null, true, 'noviewdiscussionspermission', 'forum');
<a name="l448"><span class="linenum"> 448</span></a>  
<a name="l449"><span class="linenum"> 449</span></a>          if (! <a class="var it1416" onMouseOver="hilite(1416)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a> = <a class="function" onClick="logFunction('forum_get_post_full')" href="../../_functions/forum_get_post_full.html" onMouseOver="funcPopup(event,'forum_get_post_full')">forum_get_post_full</a>(<a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('firstpost')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/firstpost.html">firstpost</a>)) {
<a name="l450"><span class="linenum"> 450</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('notexists', 'forum');
<a name="l451"><span class="linenum"> 451</span></a>          }
<a name="l452"><span class="linenum"> 452</span></a>  
<a name="l453"><span class="linenum"> 453</span></a>  <span class="comment">        // This function check groups, qanda, timed discussions, etc.</span>
<a name="l454"><span class="linenum"> 454</span></a>          if (!<a class="function" onClick="logFunction('forum_user_can_see_post')" href="../../_functions/forum_user_can_see_post.html" onMouseOver="funcPopup(event,'forum_user_can_see_post')">forum_user_can_see_post</a>(<a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>, <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>, <a class="var it1416" onMouseOver="hilite(1416)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>, null, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>)) {
<a name="l455"><span class="linenum"> 455</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('noviewdiscussionspermission', 'forum');
<a name="l456"><span class="linenum"> 456</span></a>          }
<a name="l457"><span class="linenum"> 457</span></a>  
<a name="l458"><span class="linenum"> 458</span></a>          <a class="var it3124" onMouseOver="hilite(3124)" onMouseOut="lolite()" onClick="logVariable('canviewfullname')" href="../../_variables/canviewfullname.html">$canviewfullname</a> = <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:viewfullnames', <a class="var it1418" onMouseOver="hilite(1418)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>);
<a name="l459"><span class="linenum"> 459</span></a>  
<a name="l460"><span class="linenum"> 460</span></a>  <span class="comment">        // We will add this field in the response.</span>
<a name="l461"><span class="linenum"> 461</span></a>          <a class="var it22498" onMouseOver="hilite(22498)" onMouseOut="lolite()" onClick="logVariable('canreply')" href="../../_variables/canreply.html">$canreply</a> = <a class="function" onClick="logFunction('forum_user_can_post')" href="../../_functions/forum_user_can_post.html" onMouseOver="funcPopup(event,'forum_user_can_post')">forum_user_can_post</a>(<a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>, <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it1418" onMouseOver="hilite(1418)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>);
<a name="l462"><span class="linenum"> 462</span></a>  
<a name="l463"><span class="linenum"> 463</span></a>          <a class="var it20844" onMouseOver="hilite(20844)" onMouseOut="lolite()" onClick="logVariable('forumtracked')" href="../../_variables/forumtracked.html">$forumtracked</a> = <a class="function" onClick="logFunction('forum_tp_is_tracked')" href="../../_functions/forum_tp_is_tracked.html" onMouseOver="funcPopup(event,'forum_tp_is_tracked')">forum_tp_is_tracked</a>(<a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>);
<a name="l464"><span class="linenum"> 464</span></a>  
<a name="l465"><span class="linenum"> 465</span></a>          <a class="var it124" onMouseOver="hilite(124)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a> = 'p.' . <a class="var it17854" onMouseOver="hilite(17854)" onMouseOut="lolite()" onClick="logVariable('sortby')" href="../../_variables/sortby.html">$sortby</a> . ' ' . <a class="var it12268" onMouseOver="hilite(12268)" onMouseOut="lolite()" onClick="logVariable('sortdirection')" href="../../_variables/sortdirection.html">$sortdirection</a>;
<a name="l466"><span class="linenum"> 466</span></a>          <a class="var it6129" onMouseOver="hilite(6129)" onMouseOut="lolite()" onClick="logVariable('posts')" href="../../_variables/posts.html">$posts</a> = <a class="function" onClick="logFunction('forum_get_all_discussion_posts')" href="../../_functions/forum_get_all_discussion_posts.html" onMouseOver="funcPopup(event,'forum_get_all_discussion_posts')">forum_get_all_discussion_posts</a>(<a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('id')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it124" onMouseOver="hilite(124)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>, <a class="var it20844" onMouseOver="hilite(20844)" onMouseOut="lolite()" onClick="logVariable('forumtracked')" href="../../_variables/forumtracked.html">$forumtracked</a>);
<a name="l467"><span class="linenum"> 467</span></a>  
<a name="l468"><span class="linenum"> 468</span></a>          foreach (<a class="var it6129" onMouseOver="hilite(6129)" onMouseOut="lolite()" onClick="logVariable('posts')" href="../../_variables/posts.html">$posts</a> as <a class="var it9840" onMouseOver="hilite(9840)" onMouseOut="lolite()" onClick="logVariable('pid')" href="../../_variables/pid.html">$pid</a> =&gt; <a class="var it1416" onMouseOver="hilite(1416)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>) {
<a name="l469"><span class="linenum"> 469</span></a>  
<a name="l470"><span class="linenum"> 470</span></a>              if (!<a class="function" onClick="logFunction('forum_user_can_see_post')" href="../../_functions/forum_user_can_see_post.html" onMouseOver="funcPopup(event,'forum_user_can_see_post')">forum_user_can_see_post</a>(<a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>, <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>, <a class="var it1416" onMouseOver="hilite(1416)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>, null, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>)) {
<a name="l471"><span class="linenum"> 471</span></a>                  <a class="var it3122" onMouseOver="hilite(3122)" onMouseOut="lolite()" onClick="logVariable('warning')" href="../../_variables/warning.html">$warning</a> = array();
<a name="l472"><span class="linenum"> 472</span></a>                  <a class="var it3122" onMouseOver="hilite(3122)" onMouseOut="lolite()" onClick="logVariable('warning')" href="../../_variables/warning.html">$warning</a>['item'] = 'post';
<a name="l473"><span class="linenum"> 473</span></a>                  <a class="var it3122" onMouseOver="hilite(3122)" onMouseOut="lolite()" onClick="logVariable('warning')" href="../../_variables/warning.html">$warning</a>['itemid'] = <a class="var it1416" onMouseOver="hilite(1416)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('id')" class="var it39954" onMouseOver="hilite(39954)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l474"><span class="linenum"> 474</span></a>                  <a class="var it3122" onMouseOver="hilite(3122)" onMouseOut="lolite()" onClick="logVariable('warning')" href="../../_variables/warning.html">$warning</a>['warningcode'] = '1';
<a name="l475"><span class="linenum"> 475</span></a>                  <a class="var it3122" onMouseOver="hilite(3122)" onMouseOut="lolite()" onClick="logVariable('warning')" href="../../_variables/warning.html">$warning</a>['message'] = 'You can\'t see this post';
<a name="l476"><span class="linenum"> 476</span></a>                  <a class="var it2962" onMouseOver="hilite(2962)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../_variables/warnings.html">$warnings</a>[] = <a class="var it3122" onMouseOver="hilite(3122)" onMouseOut="lolite()" onClick="logVariable('warning')" href="../../_variables/warning.html">$warning</a>;
<a name="l477"><span class="linenum"> 477</span></a>                  continue;
<a name="l478"><span class="linenum"> 478</span></a>              }
<a name="l479"><span class="linenum"> 479</span></a>  
<a name="l480"><span class="linenum"> 480</span></a>  <span class="comment">            // Function forum_get_all_discussion_posts adds postread field.</span>
<a name="l481"><span class="linenum"> 481</span></a>  <span class="comment">            // Note that the value returned can be a boolean or an integer. The WS expects a boolean.</span>
<a name="l482"><span class="linenum"> 482</span></a>              if (empty(<a class="var it1416" onMouseOver="hilite(1416)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('postread')" class="var it39954" onMouseOver="hilite(39954)" onMouseOut="lolite()" href="../../_variables/postread.html">postread</a>)) {
<a name="l483"><span class="linenum"> 483</span></a>                  <a class="var it6129" onMouseOver="hilite(6129)" onMouseOut="lolite()" onClick="logVariable('posts')" href="../../_variables/posts.html">$posts</a>[<a class="var it9840" onMouseOver="hilite(9840)" onMouseOut="lolite()" onClick="logVariable('pid')" href="../../_variables/pid.html">$pid</a>]-&gt;postread = false;
<a name="l484"><span class="linenum"> 484</span></a>              } else {
<a name="l485"><span class="linenum"> 485</span></a>                  <a class="var it6129" onMouseOver="hilite(6129)" onMouseOut="lolite()" onClick="logVariable('posts')" href="../../_variables/posts.html">$posts</a>[<a class="var it9840" onMouseOver="hilite(9840)" onMouseOut="lolite()" onClick="logVariable('pid')" href="../../_variables/pid.html">$pid</a>]-&gt;postread = true;
<a name="l486"><span class="linenum"> 486</span></a>              }
<a name="l487"><span class="linenum"> 487</span></a>  
<a name="l488"><span class="linenum"> 488</span></a>              <a class="var it6129" onMouseOver="hilite(6129)" onMouseOut="lolite()" onClick="logVariable('posts')" href="../../_variables/posts.html">$posts</a>[<a class="var it9840" onMouseOver="hilite(9840)" onMouseOut="lolite()" onClick="logVariable('pid')" href="../../_variables/pid.html">$pid</a>]-&gt;canreply = <a class="var it22498" onMouseOver="hilite(22498)" onMouseOut="lolite()" onClick="logVariable('canreply')" href="../../_variables/canreply.html">$canreply</a>;
<a name="l489"><span class="linenum"> 489</span></a>              if (!empty(<a class="var it6129" onMouseOver="hilite(6129)" onMouseOut="lolite()" onClick="logVariable('posts')" href="../../_variables/posts.html">$posts</a>[<a class="var it9840" onMouseOver="hilite(9840)" onMouseOut="lolite()" onClick="logVariable('pid')" href="../../_variables/pid.html">$pid</a>]-&gt;children)) {
<a name="l490"><span class="linenum"> 490</span></a>                  <a class="var it6129" onMouseOver="hilite(6129)" onMouseOut="lolite()" onClick="logVariable('posts')" href="../../_variables/posts.html">$posts</a>[<a class="var it9840" onMouseOver="hilite(9840)" onMouseOut="lolite()" onClick="logVariable('pid')" href="../../_variables/pid.html">$pid</a>]-&gt;children = <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it6129" onMouseOver="hilite(6129)" onMouseOut="lolite()" onClick="logVariable('posts')" href="../../_variables/posts.html">$posts</a>[<a class="var it9840" onMouseOver="hilite(9840)" onMouseOut="lolite()" onClick="logVariable('pid')" href="../../_variables/pid.html">$pid</a>]-&gt;children);
<a name="l491"><span class="linenum"> 491</span></a>              } else {
<a name="l492"><span class="linenum"> 492</span></a>                  <a class="var it6129" onMouseOver="hilite(6129)" onMouseOut="lolite()" onClick="logVariable('posts')" href="../../_variables/posts.html">$posts</a>[<a class="var it9840" onMouseOver="hilite(9840)" onMouseOut="lolite()" onClick="logVariable('pid')" href="../../_variables/pid.html">$pid</a>]-&gt;children = array();
<a name="l493"><span class="linenum"> 493</span></a>              }
<a name="l494"><span class="linenum"> 494</span></a>  
<a name="l495"><span class="linenum"> 495</span></a>              <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = new stdclass();
<a name="l496"><span class="linenum"> 496</span></a>              <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it1416" onMouseOver="hilite(1416)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('userid')" class="var it39954" onMouseOver="hilite(39954)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>;
<a name="l497"><span class="linenum"> 497</span></a>              <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="function" onClick="logFunction('username_load_fields_from_object')" href="../../_functions/username_load_fields_from_object.html" onMouseOver="funcPopup(event,'username_load_fields_from_object')">username_load_fields_from_object</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it1416" onMouseOver="hilite(1416)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>);
<a name="l498"><span class="linenum"> 498</span></a>              <a class="var it1416" onMouseOver="hilite(1416)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('userfullname')" class="var it39954" onMouseOver="hilite(39954)" onMouseOut="lolite()" href="../../_variables/userfullname.html">userfullname</a> = <a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it3124" onMouseOver="hilite(3124)" onMouseOut="lolite()" onClick="logVariable('canviewfullname')" href="../../_variables/canviewfullname.html">$canviewfullname</a>);
<a name="l499"><span class="linenum"> 499</span></a>  
<a name="l500"><span class="linenum"> 500</span></a>  <span class="comment">            // We can have post written by users that are deleted. In this case, those users don't have a valid context.</span>
<a name="l501"><span class="linenum"> 501</span></a>              <a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../../_variables/usercontext.html">$usercontext</a> = <a class="class" onClick="logClass('context_user')" href="../../_classes/context_user.html" onMouseOver="classPopup(event,'context_user')">context_user</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>);
<a name="l502"><span class="linenum"> 502</span></a>              if (<a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../../_variables/usercontext.html">$usercontext</a>) {
<a name="l503"><span class="linenum"> 503</span></a>                  <a class="var it1416" onMouseOver="hilite(1416)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('userpictureurl')" class="var it39954" onMouseOver="hilite(39954)" onMouseOut="lolite()" href="../../_variables/userpictureurl.html">userpictureurl</a> = <a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>::<a class="function" onClick="logFunction('make_webservice_pluginfile_url')" href="../../_functions/make_webservice_pluginfile_url.html" onMouseOver="funcPopup(event,'make_webservice_pluginfile_url')">make_webservice_pluginfile_url</a>(
<a name="l504"><span class="linenum"> 504</span></a>                          <a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../../_variables/usercontext.html">$usercontext</a>-&gt;<a onClick="logVariable('id')" class="var it39494" onMouseOver="hilite(39494)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'user', 'icon', null, '/', 'f1')-&gt;<a class="function" onClick="logFunction('out')" href="../../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(false);
<a name="l505"><span class="linenum"> 505</span></a>              } else {
<a name="l506"><span class="linenum"> 506</span></a>                  <a class="var it1416" onMouseOver="hilite(1416)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('userpictureurl')" class="var it39954" onMouseOver="hilite(39954)" onMouseOut="lolite()" href="../../_variables/userpictureurl.html">userpictureurl</a> = '';
<a name="l507"><span class="linenum"> 507</span></a>              }
<a name="l508"><span class="linenum"> 508</span></a>  
<a name="l509"><span class="linenum"> 509</span></a>  <span class="comment">            // Rewrite embedded images URLs.</span>
<a name="l510"><span class="linenum"> 510</span></a>              <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it1416" onMouseOver="hilite(1416)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('message')" class="var it39954" onMouseOver="hilite(39954)" onMouseOut="lolite()" href="../../_variables/message.html">message</a>, <a class="var it1416" onMouseOver="hilite(1416)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('messageformat')" class="var it39954" onMouseOver="hilite(39954)" onMouseOut="lolite()" href="../../_variables/messageformat.html">messageformat</a>) =
<a name="l511"><span class="linenum"> 511</span></a>                  <a class="function" onClick="logFunction('external_format_text')" href="../../_functions/external_format_text.html" onMouseOver="funcPopup(event,'external_format_text')">external_format_text</a>(<a class="var it1416" onMouseOver="hilite(1416)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('message')" class="var it39954" onMouseOver="hilite(39954)" onMouseOut="lolite()" href="../../_variables/message.html">message</a>, <a class="var it1416" onMouseOver="hilite(1416)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('messageformat')" class="var it39954" onMouseOver="hilite(39954)" onMouseOut="lolite()" href="../../_variables/messageformat.html">messageformat</a>, <a class="var it1418" onMouseOver="hilite(1418)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>-&gt;<a onClick="logVariable('id')" class="var it39650" onMouseOver="hilite(39650)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_forum', 'post', <a class="var it1416" onMouseOver="hilite(1416)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('id')" class="var it39954" onMouseOver="hilite(39954)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l512"><span class="linenum"> 512</span></a>  
<a name="l513"><span class="linenum"> 513</span></a>  <span class="comment">            // List attachments.</span>
<a name="l514"><span class="linenum"> 514</span></a>              if (!empty(<a class="var it1416" onMouseOver="hilite(1416)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('attachment')" class="var it39954" onMouseOver="hilite(39954)" onMouseOut="lolite()" href="../../_variables/attachment.html">attachment</a>)) {
<a name="l515"><span class="linenum"> 515</span></a>                  <a class="var it1416" onMouseOver="hilite(1416)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('attachments')" class="var it39954" onMouseOver="hilite(39954)" onMouseOut="lolite()" href="../../_variables/attachments.html">attachments</a> = array();
<a name="l516"><span class="linenum"> 516</span></a>  
<a name="l517"><span class="linenum"> 517</span></a>                  <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l518"><span class="linenum"> 518</span></a>                  if (<a class="var it595" onMouseOver="hilite(595)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a> = <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_area_files')" href="../../_functions/get_area_files.html" onMouseOver="funcPopup(event,'get_area_files')">get_area_files</a>(<a class="var it1418" onMouseOver="hilite(1418)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>-&gt;<a onClick="logVariable('id')" class="var it39650" onMouseOver="hilite(39650)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_forum', 'attachment', <a class="var it1416" onMouseOver="hilite(1416)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('id')" class="var it39954" onMouseOver="hilite(39954)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, &quot;filename&quot;, false)) {
<a name="l519"><span class="linenum"> 519</span></a>                      foreach (<a class="var it595" onMouseOver="hilite(595)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a> as <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>) {
<a name="l520"><span class="linenum"> 520</span></a>                          <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a> = <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_filename')" href="../../_functions/get_filename.html" onMouseOver="funcPopup(event,'get_filename')">get_filename</a>();
<a name="l521"><span class="linenum"> 521</span></a>                          <a class="var it582" onMouseOver="hilite(582)" onMouseOut="lolite()" onClick="logVariable('fileurl')" href="../../_variables/fileurl.html">$fileurl</a> = <a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>::<a class="function" onClick="logFunction('make_webservice_pluginfile_url')" href="../../_functions/make_webservice_pluginfile_url.html" onMouseOver="funcPopup(event,'make_webservice_pluginfile_url')">make_webservice_pluginfile_url</a>(
<a name="l522"><span class="linenum"> 522</span></a>                                          <a class="var it1418" onMouseOver="hilite(1418)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>-&gt;<a onClick="logVariable('id')" class="var it39650" onMouseOver="hilite(39650)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_forum', 'attachment', <a class="var it1416" onMouseOver="hilite(1416)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('id')" class="var it39954" onMouseOver="hilite(39954)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, '/', <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>);
<a name="l523"><span class="linenum"> 523</span></a>  
<a name="l524"><span class="linenum"> 524</span></a>                          <a class="var it1416" onMouseOver="hilite(1416)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>-&gt;<a onClick="logVariable('attachments')" class="var it39954" onMouseOver="hilite(39954)" onMouseOut="lolite()" href="../../_variables/attachments.html">attachments</a>[] = array(
<a name="l525"><span class="linenum"> 525</span></a>                              'filename' =&gt; <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>,
<a name="l526"><span class="linenum"> 526</span></a>                              'mimetype' =&gt; <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_mimetype')" href="../../_functions/get_mimetype.html" onMouseOver="funcPopup(event,'get_mimetype')">get_mimetype</a>(),
<a name="l527"><span class="linenum"> 527</span></a>                              'fileurl'  =&gt; <a class="var it582" onMouseOver="hilite(582)" onMouseOut="lolite()" onClick="logVariable('fileurl')" href="../../_variables/fileurl.html">$fileurl</a>-&gt;<a class="function" onClick="logFunction('out')" href="../../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(false)
<a name="l528"><span class="linenum"> 528</span></a>                          );
<a name="l529"><span class="linenum"> 529</span></a>                      }
<a name="l530"><span class="linenum"> 530</span></a>                  }
<a name="l531"><span class="linenum"> 531</span></a>              }
<a name="l532"><span class="linenum"> 532</span></a>  
<a name="l533"><span class="linenum"> 533</span></a>              <a class="var it6129" onMouseOver="hilite(6129)" onMouseOut="lolite()" onClick="logVariable('posts')" href="../../_variables/posts.html">$posts</a>[<a class="var it9840" onMouseOver="hilite(9840)" onMouseOut="lolite()" onClick="logVariable('pid')" href="../../_variables/pid.html">$pid</a>] = (array) <a class="var it1416" onMouseOver="hilite(1416)" onMouseOut="lolite()" onClick="logVariable('post')" href="../../_variables/post.html">$post</a>;
<a name="l534"><span class="linenum"> 534</span></a>          }
<a name="l535"><span class="linenum"> 535</span></a>  
<a name="l536"><span class="linenum"> 536</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = array();
<a name="l537"><span class="linenum"> 537</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>['posts'] = <a class="var it6129" onMouseOver="hilite(6129)" onMouseOut="lolite()" onClick="logVariable('posts')" href="../../_variables/posts.html">$posts</a>;
<a name="l538"><span class="linenum"> 538</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>['warnings'] = <a class="var it2962" onMouseOver="hilite(2962)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../_variables/warnings.html">$warnings</a>;
<a name="l539"><span class="linenum"> 539</span></a>          return <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l540"><span class="linenum"> 540</span></a>      }
<a name="l541"><span class="linenum"> 541</span></a>  
<a name="l542"><span class="linenum"> 542</span></a>      <span class="comment">/**</span>
<a name="l543"><span class="linenum"> 543</span></a>  <span class="comment">     * Describes the get_forum_discussion_posts return value.</span>
<a name="l544"><span class="linenum"> 544</span></a>  <span class="comment">     *</span>
<a name="l545"><span class="linenum"> 545</span></a>  <span class="comment">     * @return external_single_structure</span>
<a name="l546"><span class="linenum"> 546</span></a>  <span class="comment">     * @since Moodle 2.7</span>
<a name="l547"><span class="linenum"> 547</span></a>  <span class="comment">     */</span>
<a name="l548"><span class="linenum"> 548</span></a>      public static function <a class="function" onClick="logFunction('get_forum_discussion_posts_returns')" href="../../_functions/get_forum_discussion_posts_returns.html" onMouseOver="funcPopup(event,'get_forum_discussion_posts_returns')">get_forum_discussion_posts_returns</a>() {
<a name="l549"><span class="linenum"> 549</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l550"><span class="linenum"> 550</span></a>              array(
<a name="l551"><span class="linenum"> 551</span></a>                  'posts' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_multiple_structure')" href="../../_classes/external_multiple_structure.html" onMouseOver="classPopup(event,'external_multiple_structure')">external_multiple_structure</a>(
<a name="l552"><span class="linenum"> 552</span></a>                          <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l553"><span class="linenum"> 553</span></a>                              array(
<a name="l554"><span class="linenum"> 554</span></a>                                  'id' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Post id'),
<a name="l555"><span class="linenum"> 555</span></a>                                  'discussion' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Discussion id'),
<a name="l556"><span class="linenum"> 556</span></a>                                  'parent' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Parent id'),
<a name="l557"><span class="linenum"> 557</span></a>                                  'userid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'User id'),
<a name="l558"><span class="linenum"> 558</span></a>                                  'created' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Creation time'),
<a name="l559"><span class="linenum"> 559</span></a>                                  'modified' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Time modified'),
<a name="l560"><span class="linenum"> 560</span></a>                                  'mailed' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Mailed?'),
<a name="l561"><span class="linenum"> 561</span></a>                                  'subject' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'The post subject'),
<a name="l562"><span class="linenum"> 562</span></a>                                  'message' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'The post message'),
<a name="l563"><span class="linenum"> 563</span></a>                                  'messageformat' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_format_value')" href="../../_classes/external_format_value.html" onMouseOver="classPopup(event,'external_format_value')">external_format_value</a>('message'),
<a name="l564"><span class="linenum"> 564</span></a>                                  'messagetrust' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Can we trust?'),
<a name="l565"><span class="linenum"> 565</span></a>                                  'attachment' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'Has attachments?'),
<a name="l566"><span class="linenum"> 566</span></a>                                  'attachments' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_multiple_structure')" href="../../_classes/external_multiple_structure.html" onMouseOver="classPopup(event,'external_multiple_structure')">external_multiple_structure</a>(
<a name="l567"><span class="linenum"> 567</span></a>                                      <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l568"><span class="linenum"> 568</span></a>                                          array (
<a name="l569"><span class="linenum"> 569</span></a>                                              'filename' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_FILE')" href="../../_constants/PARAM_FILE.html" onMouseOver="constPopup(event,'PARAM_FILE')">PARAM_FILE</a>, 'file name'),
<a name="l570"><span class="linenum"> 570</span></a>                                              'mimetype' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'mime type'),
<a name="l571"><span class="linenum"> 571</span></a>                                              'fileurl'  =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_URL')" href="../../_constants/PARAM_URL.html" onMouseOver="constPopup(event,'PARAM_URL')">PARAM_URL</a>, 'file download url')
<a name="l572"><span class="linenum"> 572</span></a>                                          )
<a name="l573"><span class="linenum"> 573</span></a>                                      ), 'attachments', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>
<a name="l574"><span class="linenum"> 574</span></a>                                  ),
<a name="l575"><span class="linenum"> 575</span></a>                                  'totalscore' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'The post message total score'),
<a name="l576"><span class="linenum"> 576</span></a>                                  'mailnow' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Mail now?'),
<a name="l577"><span class="linenum"> 577</span></a>                                  'children' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_multiple_structure')" href="../../_classes/external_multiple_structure.html" onMouseOver="classPopup(event,'external_multiple_structure')">external_multiple_structure</a>(<span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'children post id')),
<a name="l578"><span class="linenum"> 578</span></a>                                  'canreply' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_BOOL')" href="../../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>, 'The user can reply to posts?'),
<a name="l579"><span class="linenum"> 579</span></a>                                  'postread' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_BOOL')" href="../../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>, 'The post was read'),
<a name="l580"><span class="linenum"> 580</span></a>                                  'userfullname' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'Post author full name'),
<a name="l581"><span class="linenum"> 581</span></a>                                  'userpictureurl' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_URL')" href="../../_constants/PARAM_URL.html" onMouseOver="constPopup(event,'PARAM_URL')">PARAM_URL</a>, 'Post author picture.', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>)
<a name="l582"><span class="linenum"> 582</span></a>                              ), 'post'
<a name="l583"><span class="linenum"> 583</span></a>                          )
<a name="l584"><span class="linenum"> 584</span></a>                      ),
<a name="l585"><span class="linenum"> 585</span></a>                  'warnings' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_warnings')" href="../../_classes/external_warnings.html" onMouseOver="classPopup(event,'external_warnings')">external_warnings</a>()
<a name="l586"><span class="linenum"> 586</span></a>              )
<a name="l587"><span class="linenum"> 587</span></a>          );
<a name="l588"><span class="linenum"> 588</span></a>      }
<a name="l589"><span class="linenum"> 589</span></a>  
<a name="l590"><span class="linenum"> 590</span></a>      <span class="comment">/**</span>
<a name="l591"><span class="linenum"> 591</span></a>  <span class="comment">     * Describes the parameters for get_forum_discussions_paginated.</span>
<a name="l592"><span class="linenum"> 592</span></a>  <span class="comment">     *</span>
<a name="l593"><span class="linenum"> 593</span></a>  <span class="comment">     * @return external_external_function_parameters</span>
<a name="l594"><span class="linenum"> 594</span></a>  <span class="comment">     * @since Moodle 2.8</span>
<a name="l595"><span class="linenum"> 595</span></a>  <span class="comment">     */</span>
<a name="l596"><span class="linenum"> 596</span></a>      public static function <a class="function" onClick="logFunction('get_forum_discussions_paginated_parameters')" href="../../_functions/get_forum_discussions_paginated_parameters.html" onMouseOver="funcPopup(event,'get_forum_discussions_paginated_parameters')">get_forum_discussions_paginated_parameters</a>() {
<a name="l597"><span class="linenum"> 597</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_function_parameters')" href="../../_classes/external_function_parameters.html" onMouseOver="classPopup(event,'external_function_parameters')">external_function_parameters</a> (
<a name="l598"><span class="linenum"> 598</span></a>              array(
<a name="l599"><span class="linenum"> 599</span></a>                  'forumid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'forum instance id', <a class="constant" onClick="logConstant('VALUE_REQUIRED')" href="../../_constants/VALUE_REQUIRED.html" onMouseOver="constPopup(event,'VALUE_REQUIRED')">VALUE_REQUIRED</a>),
<a name="l600"><span class="linenum"> 600</span></a>                  'sortby' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_ALPHA')" href="../../_constants/PARAM_ALPHA.html" onMouseOver="constPopup(event,'PARAM_ALPHA')">PARAM_ALPHA</a>,
<a name="l601"><span class="linenum"> 601</span></a>                      'sort by this element: id, timemodified, timestart or timeend', <a class="constant" onClick="logConstant('VALUE_DEFAULT')" href="../../_constants/VALUE_DEFAULT.html" onMouseOver="constPopup(event,'VALUE_DEFAULT')">VALUE_DEFAULT</a>, 'timemodified'),
<a name="l602"><span class="linenum"> 602</span></a>                  'sortdirection' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_ALPHA')" href="../../_constants/PARAM_ALPHA.html" onMouseOver="constPopup(event,'PARAM_ALPHA')">PARAM_ALPHA</a>, 'sort direction: ASC or DESC', <a class="constant" onClick="logConstant('VALUE_DEFAULT')" href="../../_constants/VALUE_DEFAULT.html" onMouseOver="constPopup(event,'VALUE_DEFAULT')">VALUE_DEFAULT</a>, 'DESC'),
<a name="l603"><span class="linenum"> 603</span></a>                  'page' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'current page', <a class="constant" onClick="logConstant('VALUE_DEFAULT')" href="../../_constants/VALUE_DEFAULT.html" onMouseOver="constPopup(event,'VALUE_DEFAULT')">VALUE_DEFAULT</a>, -1),
<a name="l604"><span class="linenum"> 604</span></a>                  'perpage' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'items per page', <a class="constant" onClick="logConstant('VALUE_DEFAULT')" href="../../_constants/VALUE_DEFAULT.html" onMouseOver="constPopup(event,'VALUE_DEFAULT')">VALUE_DEFAULT</a>, 0),
<a name="l605"><span class="linenum"> 605</span></a>              )
<a name="l606"><span class="linenum"> 606</span></a>          );
<a name="l607"><span class="linenum"> 607</span></a>      }
<a name="l608"><span class="linenum"> 608</span></a>  
<a name="l609"><span class="linenum"> 609</span></a>      <span class="comment">/**</span>
<a name="l610"><span class="linenum"> 610</span></a>  <span class="comment">     * Returns a list of forum discussions optionally sorted and paginated.</span>
<a name="l611"><span class="linenum"> 611</span></a>  <span class="comment">     *</span>
<a name="l612"><span class="linenum"> 612</span></a>  <span class="comment">     * @param int $forumid the forum instance id</span>
<a name="l613"><span class="linenum"> 613</span></a>  <span class="comment">     * @param string $sortby sort by this element (id, timemodified, timestart or timeend)</span>
<a name="l614"><span class="linenum"> 614</span></a>  <span class="comment">     * @param string $sortdirection sort direction: ASC or DESC</span>
<a name="l615"><span class="linenum"> 615</span></a>  <span class="comment">     * @param int $page page number</span>
<a name="l616"><span class="linenum"> 616</span></a>  <span class="comment">     * @param int $perpage items per page</span>
<a name="l617"><span class="linenum"> 617</span></a>  <span class="comment">     *</span>
<a name="l618"><span class="linenum"> 618</span></a>  <span class="comment">     * @return array the forum discussion details including warnings</span>
<a name="l619"><span class="linenum"> 619</span></a>  <span class="comment">     * @since Moodle 2.8</span>
<a name="l620"><span class="linenum"> 620</span></a>  <span class="comment">     */</span>
<a name="l621"><span class="linenum"> 621</span></a>      public static function <a class="function" onClick="logFunction('get_forum_discussions_paginated')" href="../../_functions/get_forum_discussions_paginated.html" onMouseOver="funcPopup(event,'get_forum_discussions_paginated')">get_forum_discussions_paginated</a>(<a class="var it8129" onMouseOver="hilite(8129)" onMouseOut="lolite()" onClick="logVariable('forumid')" href="../../_variables/forumid.html">$forumid</a>, <a class="var it17854" onMouseOver="hilite(17854)" onMouseOut="lolite()" onClick="logVariable('sortby')" href="../../_variables/sortby.html">$sortby</a> = 'timemodified', <a class="var it12268" onMouseOver="hilite(12268)" onMouseOut="lolite()" onClick="logVariable('sortdirection')" href="../../_variables/sortdirection.html">$sortdirection</a> = 'DESC',
<a name="l622"><span class="linenum"> 622</span></a>                                                      <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = -1, <a class="var it3060" onMouseOver="hilite(3060)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../../_variables/perpage.html">$perpage</a> = 0) {
<a name="l623"><span class="linenum"> 623</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l624"><span class="linenum"> 624</span></a>  
<a name="l625"><span class="linenum"> 625</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . "<a class="filename" href="../../mod/forum/lib.php.html">/mod/forum/lib.php</a>");
<a name="l626"><span class="linenum"> 626</span></a>  
<a name="l627"><span class="linenum"> 627</span></a>          <a class="var it2962" onMouseOver="hilite(2962)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../_variables/warnings.html">$warnings</a> = array();
<a name="l628"><span class="linenum"> 628</span></a>  
<a name="l629"><span class="linenum"> 629</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = self::<a class="function" onClick="logFunction('validate_parameters')" href="../../_functions/validate_parameters.html" onMouseOver="funcPopup(event,'validate_parameters')">validate_parameters</a>(self::<a class="function" onClick="logFunction('get_forum_discussions_paginated_parameters')" href="../../_functions/get_forum_discussions_paginated_parameters.html" onMouseOver="funcPopup(event,'get_forum_discussions_paginated_parameters')">get_forum_discussions_paginated_parameters</a>(),
<a name="l630"><span class="linenum"> 630</span></a>              array(
<a name="l631"><span class="linenum"> 631</span></a>                  'forumid' =&gt; <a class="var it8129" onMouseOver="hilite(8129)" onMouseOut="lolite()" onClick="logVariable('forumid')" href="../../_variables/forumid.html">$forumid</a>,
<a name="l632"><span class="linenum"> 632</span></a>                  'sortby' =&gt; <a class="var it17854" onMouseOver="hilite(17854)" onMouseOut="lolite()" onClick="logVariable('sortby')" href="../../_variables/sortby.html">$sortby</a>,
<a name="l633"><span class="linenum"> 633</span></a>                  'sortdirection' =&gt; <a class="var it12268" onMouseOver="hilite(12268)" onMouseOut="lolite()" onClick="logVariable('sortdirection')" href="../../_variables/sortdirection.html">$sortdirection</a>,
<a name="l634"><span class="linenum"> 634</span></a>                  'page' =&gt; <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>,
<a name="l635"><span class="linenum"> 635</span></a>                  'perpage' =&gt; <a class="var it3060" onMouseOver="hilite(3060)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../../_variables/perpage.html">$perpage</a>
<a name="l636"><span class="linenum"> 636</span></a>              )
<a name="l637"><span class="linenum"> 637</span></a>          );
<a name="l638"><span class="linenum"> 638</span></a>  
<a name="l639"><span class="linenum"> 639</span></a>  <span class="comment">        // Compact/extract functions are not recommended.</span>
<a name="l640"><span class="linenum"> 640</span></a>          <a class="var it8129" onMouseOver="hilite(8129)" onMouseOut="lolite()" onClick="logVariable('forumid')" href="../../_variables/forumid.html">$forumid</a>        = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['forumid'];
<a name="l641"><span class="linenum"> 641</span></a>          <a class="var it17854" onMouseOver="hilite(17854)" onMouseOut="lolite()" onClick="logVariable('sortby')" href="../../_variables/sortby.html">$sortby</a>         = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['sortby'];
<a name="l642"><span class="linenum"> 642</span></a>          <a class="var it12268" onMouseOver="hilite(12268)" onMouseOut="lolite()" onClick="logVariable('sortdirection')" href="../../_variables/sortdirection.html">$sortdirection</a>  = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['sortdirection'];
<a name="l643"><span class="linenum"> 643</span></a>          <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>           = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['page'];
<a name="l644"><span class="linenum"> 644</span></a>          <a class="var it3060" onMouseOver="hilite(3060)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../../_variables/perpage.html">$perpage</a>        = <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['perpage'];
<a name="l645"><span class="linenum"> 645</span></a>  
<a name="l646"><span class="linenum"> 646</span></a>          <a class="var it32411" onMouseOver="hilite(32411)" onMouseOut="lolite()" onClick="logVariable('sortallowedvalues')" href="../../_variables/sortallowedvalues.html">$sortallowedvalues</a> = array('id', 'timemodified', 'timestart', 'timeend');
<a name="l647"><span class="linenum"> 647</span></a>          if (!<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it17854" onMouseOver="hilite(17854)" onMouseOut="lolite()" onClick="logVariable('sortby')" href="../../_variables/sortby.html">$sortby</a>, <a class="var it32411" onMouseOver="hilite(32411)" onMouseOut="lolite()" onClick="logVariable('sortallowedvalues')" href="../../_variables/sortallowedvalues.html">$sortallowedvalues</a>)) {
<a name="l648"><span class="linenum"> 648</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('invalid_parameter_exception')" href="../../_classes/invalid_parameter_exception.html" onMouseOver="classPopup(event,'invalid_parameter_exception')">invalid_parameter_exception</a>('Invalid value for sortby <a class="function" onClick="logFunction('parameter')" href="../../_functions/parameter.html" onMouseOver="funcPopup(event,'parameter')">parameter</a> (value: ' . <a class="var it17854" onMouseOver="hilite(17854)" onMouseOut="lolite()" onClick="logVariable('sortby')" href="../../_variables/sortby.html">$sortby</a> . '),' .
<a name="l649"><span class="linenum"> 649</span></a>                  'allowed values are: ' . <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(',', <a class="var it32411" onMouseOver="hilite(32411)" onMouseOut="lolite()" onClick="logVariable('sortallowedvalues')" href="../../_variables/sortallowedvalues.html">$sortallowedvalues</a>));
<a name="l650"><span class="linenum"> 650</span></a>          }
<a name="l651"><span class="linenum"> 651</span></a>  
<a name="l652"><span class="linenum"> 652</span></a>          <a class="var it12268" onMouseOver="hilite(12268)" onMouseOut="lolite()" onClick="logVariable('sortdirection')" href="../../_variables/sortdirection.html">$sortdirection</a> = <a class="phpfunction" onClick="logFunction('strtoupper')" href="../../_functions/strtoupper.html" onMouseOver="phpfuncPopup(event,'strtoupper')">strtoupper</a>(<a class="var it12268" onMouseOver="hilite(12268)" onMouseOut="lolite()" onClick="logVariable('sortdirection')" href="../../_variables/sortdirection.html">$sortdirection</a>);
<a name="l653"><span class="linenum"> 653</span></a>          <a class="var it32412" onMouseOver="hilite(32412)" onMouseOut="lolite()" onClick="logVariable('directionallowedvalues')" href="../../_variables/directionallowedvalues.html">$directionallowedvalues</a> = array('ASC', 'DESC');
<a name="l654"><span class="linenum"> 654</span></a>          if (!<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it12268" onMouseOver="hilite(12268)" onMouseOut="lolite()" onClick="logVariable('sortdirection')" href="../../_variables/sortdirection.html">$sortdirection</a>, <a class="var it32412" onMouseOver="hilite(32412)" onMouseOut="lolite()" onClick="logVariable('directionallowedvalues')" href="../../_variables/directionallowedvalues.html">$directionallowedvalues</a>)) {
<a name="l655"><span class="linenum"> 655</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('invalid_parameter_exception')" href="../../_classes/invalid_parameter_exception.html" onMouseOver="classPopup(event,'invalid_parameter_exception')">invalid_parameter_exception</a>('Invalid value for sortdirection <a class="function" onClick="logFunction('parameter')" href="../../_functions/parameter.html" onMouseOver="funcPopup(event,'parameter')">parameter</a> (value: ' . <a class="var it12268" onMouseOver="hilite(12268)" onMouseOut="lolite()" onClick="logVariable('sortdirection')" href="../../_variables/sortdirection.html">$sortdirection</a> . '),' .
<a name="l656"><span class="linenum"> 656</span></a>                  'allowed values are: ' . <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(',', <a class="var it32412" onMouseOver="hilite(32412)" onMouseOut="lolite()" onClick="logVariable('directionallowedvalues')" href="../../_variables/directionallowedvalues.html">$directionallowedvalues</a>));
<a name="l657"><span class="linenum"> 657</span></a>          }
<a name="l658"><span class="linenum"> 658</span></a>  
<a name="l659"><span class="linenum"> 659</span></a>          <a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('forum', array('id' =&gt; <a class="var it8129" onMouseOver="hilite(8129)" onMouseOut="lolite()" onClick="logVariable('forumid')" href="../../_variables/forumid.html">$forumid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l660"><span class="linenum"> 660</span></a>          <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id' =&gt; <a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('course')" class="var it39537" onMouseOver="hilite(39537)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l661"><span class="linenum"> 661</span></a>          <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('forum', <a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>-&gt;<a onClick="logVariable('id')" class="var it39537" onMouseOver="hilite(39537)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, false, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l662"><span class="linenum"> 662</span></a>  
<a name="l663"><span class="linenum"> 663</span></a>  <span class="comment">        // Validate the module context. It checks everything that affects the module visibility (including groupings, etc..).</span>
<a name="l664"><span class="linenum"> 664</span></a>          <a class="var it1418" onMouseOver="hilite(1418)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l665"><span class="linenum"> 665</span></a>          self::<a class="function" onClick="logFunction('validate_context')" href="../../_functions/validate_context.html" onMouseOver="funcPopup(event,'validate_context')">validate_context</a>(<a class="var it1418" onMouseOver="hilite(1418)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>);
<a name="l666"><span class="linenum"> 666</span></a>  
<a name="l667"><span class="linenum"> 667</span></a>  <span class="comment">        // Check they have the view forum capability.</span>
<a name="l668"><span class="linenum"> 668</span></a>          <a class="function" onClick="logFunction('require_capability')" href="../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/forum:viewdiscussion', <a class="var it1418" onMouseOver="hilite(1418)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>, null, true, 'noviewdiscussionspermission', 'forum');
<a name="l669"><span class="linenum"> 669</span></a>  
<a name="l670"><span class="linenum"> 670</span></a>          <a class="var it124" onMouseOver="hilite(124)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a> = 'd.' . <a class="var it17854" onMouseOver="hilite(17854)" onMouseOut="lolite()" onClick="logVariable('sortby')" href="../../_variables/sortby.html">$sortby</a> . ' ' . <a class="var it12268" onMouseOver="hilite(12268)" onMouseOut="lolite()" onClick="logVariable('sortdirection')" href="../../_variables/sortdirection.html">$sortdirection</a>;
<a name="l671"><span class="linenum"> 671</span></a>          <a class="var it2556" onMouseOver="hilite(2556)" onMouseOut="lolite()" onClick="logVariable('discussions')" href="../../_variables/discussions.html">$discussions</a> = <a class="function" onClick="logFunction('forum_get_discussions')" href="../../_functions/forum_get_discussions.html" onMouseOver="funcPopup(event,'forum_get_discussions')">forum_get_discussions</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it124" onMouseOver="hilite(124)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>, true, -1, -1, true, <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>, <a class="var it3060" onMouseOver="hilite(3060)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../../_variables/perpage.html">$perpage</a>);
<a name="l672"><span class="linenum"> 672</span></a>  
<a name="l673"><span class="linenum"> 673</span></a>          if (<a class="var it2556" onMouseOver="hilite(2556)" onMouseOut="lolite()" onClick="logVariable('discussions')" href="../../_variables/discussions.html">$discussions</a>) {
<a name="l674"><span class="linenum"> 674</span></a>              <a class="var it3124" onMouseOver="hilite(3124)" onMouseOut="lolite()" onClick="logVariable('canviewfullname')" href="../../_variables/canviewfullname.html">$canviewfullname</a> = <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:viewfullnames', <a class="var it1418" onMouseOver="hilite(1418)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>);
<a name="l675"><span class="linenum"> 675</span></a>  
<a name="l676"><span class="linenum"> 676</span></a>  <span class="comment">            // Get the unreads array, this takes a forum id and returns data for all discussions.</span>
<a name="l677"><span class="linenum"> 677</span></a>              <a class="var it23137" onMouseOver="hilite(23137)" onMouseOut="lolite()" onClick="logVariable('unreads')" href="../../_variables/unreads.html">$unreads</a> = array();
<a name="l678"><span class="linenum"> 678</span></a>              if (<a class="var it23161" onMouseOver="hilite(23161)" onMouseOut="lolite()" onClick="logVariable('cantrack')" href="../../_variables/cantrack.html">$cantrack</a> = <a class="function" onClick="logFunction('forum_tp_can_track_forums')" href="../../_functions/forum_tp_can_track_forums.html" onMouseOver="funcPopup(event,'forum_tp_can_track_forums')">forum_tp_can_track_forums</a>(<a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>)) {
<a name="l679"><span class="linenum"> 679</span></a>                  if (<a class="var it20844" onMouseOver="hilite(20844)" onMouseOut="lolite()" onClick="logVariable('forumtracked')" href="../../_variables/forumtracked.html">$forumtracked</a> = <a class="function" onClick="logFunction('forum_tp_is_tracked')" href="../../_functions/forum_tp_is_tracked.html" onMouseOver="funcPopup(event,'forum_tp_is_tracked')">forum_tp_is_tracked</a>(<a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>)) {
<a name="l680"><span class="linenum"> 680</span></a>                      <a class="var it23137" onMouseOver="hilite(23137)" onMouseOut="lolite()" onClick="logVariable('unreads')" href="../../_variables/unreads.html">$unreads</a> = <a class="function" onClick="logFunction('forum_get_discussions_unread')" href="../../_functions/forum_get_discussions_unread.html" onMouseOver="funcPopup(event,'forum_get_discussions_unread')">forum_get_discussions_unread</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l681"><span class="linenum"> 681</span></a>                  }
<a name="l682"><span class="linenum"> 682</span></a>              }
<a name="l683"><span class="linenum"> 683</span></a>  <span class="comment">            // The forum function returns the replies for all the discussions in a given forum.</span>
<a name="l684"><span class="linenum"> 684</span></a>              <a class="var it8197" onMouseOver="hilite(8197)" onMouseOut="lolite()" onClick="logVariable('replies')" href="../../_variables/replies.html">$replies</a> = <a class="function" onClick="logFunction('forum_count_discussion_replies')" href="../../_functions/forum_count_discussion_replies.html" onMouseOver="funcPopup(event,'forum_count_discussion_replies')">forum_count_discussion_replies</a>(<a class="var it8129" onMouseOver="hilite(8129)" onMouseOut="lolite()" onClick="logVariable('forumid')" href="../../_variables/forumid.html">$forumid</a>, <a class="var it124" onMouseOver="hilite(124)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>, -1, <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>, <a class="var it3060" onMouseOver="hilite(3060)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../../_variables/perpage.html">$perpage</a>);
<a name="l685"><span class="linenum"> 685</span></a>  
<a name="l686"><span class="linenum"> 686</span></a>              foreach (<a class="var it2556" onMouseOver="hilite(2556)" onMouseOut="lolite()" onClick="logVariable('discussions')" href="../../_variables/discussions.html">$discussions</a> as <a class="var it23188" onMouseOver="hilite(23188)" onMouseOut="lolite()" onClick="logVariable('did')" href="../../_variables/did.html">$did</a> =&gt; <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>) {
<a name="l687"><span class="linenum"> 687</span></a>  <span class="comment">                // This function checks for qanda forums.</span>
<a name="l688"><span class="linenum"> 688</span></a>                  if (!<a class="function" onClick="logFunction('forum_user_can_see_discussion')" href="../../_functions/forum_user_can_see_discussion.html" onMouseOver="funcPopup(event,'forum_user_can_see_discussion')">forum_user_can_see_discussion</a>(<a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>, <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>, <a class="var it1418" onMouseOver="hilite(1418)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>)) {
<a name="l689"><span class="linenum"> 689</span></a>                      <a class="var it3122" onMouseOver="hilite(3122)" onMouseOut="lolite()" onClick="logVariable('warning')" href="../../_variables/warning.html">$warning</a> = array();
<a name="l690"><span class="linenum"> 690</span></a>  <span class="comment">                    // Function forum_get_discussions returns forum_posts ids not forum_discussions ones.</span>
<a name="l691"><span class="linenum"> 691</span></a>                      <a class="var it3122" onMouseOver="hilite(3122)" onMouseOut="lolite()" onClick="logVariable('warning')" href="../../_variables/warning.html">$warning</a>['item'] = 'post';
<a name="l692"><span class="linenum"> 692</span></a>                      <a class="var it3122" onMouseOver="hilite(3122)" onMouseOut="lolite()" onClick="logVariable('warning')" href="../../_variables/warning.html">$warning</a>['itemid'] = <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('id')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l693"><span class="linenum"> 693</span></a>                      <a class="var it3122" onMouseOver="hilite(3122)" onMouseOut="lolite()" onClick="logVariable('warning')" href="../../_variables/warning.html">$warning</a>['warningcode'] = '1';
<a name="l694"><span class="linenum"> 694</span></a>                      <a class="var it3122" onMouseOver="hilite(3122)" onMouseOut="lolite()" onClick="logVariable('warning')" href="../../_variables/warning.html">$warning</a>['message'] = 'You can\'t see this discussion';
<a name="l695"><span class="linenum"> 695</span></a>                      <a class="var it2962" onMouseOver="hilite(2962)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../_variables/warnings.html">$warnings</a>[] = <a class="var it3122" onMouseOver="hilite(3122)" onMouseOut="lolite()" onClick="logVariable('warning')" href="../../_variables/warning.html">$warning</a>;
<a name="l696"><span class="linenum"> 696</span></a>                      continue;
<a name="l697"><span class="linenum"> 697</span></a>                  }
<a name="l698"><span class="linenum"> 698</span></a>  
<a name="l699"><span class="linenum"> 699</span></a>                  <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('numunread')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/numunread.html">numunread</a> = 0;
<a name="l700"><span class="linenum"> 700</span></a>                  if (<a class="var it23161" onMouseOver="hilite(23161)" onMouseOut="lolite()" onClick="logVariable('cantrack')" href="../../_variables/cantrack.html">$cantrack</a> &amp;&amp; <a class="var it20844" onMouseOver="hilite(20844)" onMouseOut="lolite()" onClick="logVariable('forumtracked')" href="../../_variables/forumtracked.html">$forumtracked</a>) {
<a name="l701"><span class="linenum"> 701</span></a>                      if (isset(<a class="var it23137" onMouseOver="hilite(23137)" onMouseOut="lolite()" onClick="logVariable('unreads')" href="../../_variables/unreads.html">$unreads</a>[<a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('discussion')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/discussion.html">discussion</a>])) {
<a name="l702"><span class="linenum"> 702</span></a>                          <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('numunread')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/numunread.html">numunread</a> = (int) <a class="var it23137" onMouseOver="hilite(23137)" onMouseOut="lolite()" onClick="logVariable('unreads')" href="../../_variables/unreads.html">$unreads</a>[<a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('discussion')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/discussion.html">discussion</a>];
<a name="l703"><span class="linenum"> 703</span></a>                      }
<a name="l704"><span class="linenum"> 704</span></a>                  }
<a name="l705"><span class="linenum"> 705</span></a>  
<a name="l706"><span class="linenum"> 706</span></a>                  <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('numreplies')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/numreplies.html">numreplies</a> = 0;
<a name="l707"><span class="linenum"> 707</span></a>                  if (!empty(<a class="var it8197" onMouseOver="hilite(8197)" onMouseOut="lolite()" onClick="logVariable('replies')" href="../../_variables/replies.html">$replies</a>[<a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('discussion')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/discussion.html">discussion</a>])) {
<a name="l708"><span class="linenum"> 708</span></a>                      <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('numreplies')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/numreplies.html">numreplies</a> = (int) <a class="var it8197" onMouseOver="hilite(8197)" onMouseOut="lolite()" onClick="logVariable('replies')" href="../../_variables/replies.html">$replies</a>[<a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('discussion')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/discussion.html">discussion</a>]-&gt;replies;
<a name="l709"><span class="linenum"> 709</span></a>                  }
<a name="l710"><span class="linenum"> 710</span></a>  
<a name="l711"><span class="linenum"> 711</span></a>  <span class="comment">                // Load user objects from the results of the query.</span>
<a name="l712"><span class="linenum"> 712</span></a>                  <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = new stdclass();
<a name="l713"><span class="linenum"> 713</span></a>                  <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('userid')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>;
<a name="l714"><span class="linenum"> 714</span></a>                  <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="function" onClick="logFunction('username_load_fields_from_object')" href="../../_functions/username_load_fields_from_object.html" onMouseOver="funcPopup(event,'username_load_fields_from_object')">username_load_fields_from_object</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>);
<a name="l715"><span class="linenum"> 715</span></a>                  <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('userfullname')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/userfullname.html">userfullname</a> = <a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it3124" onMouseOver="hilite(3124)" onMouseOut="lolite()" onClick="logVariable('canviewfullname')" href="../../_variables/canviewfullname.html">$canviewfullname</a>);
<a name="l716"><span class="linenum"> 716</span></a>  
<a name="l717"><span class="linenum"> 717</span></a>  <span class="comment">                // We can have post written by users that are deleted. In this case, those users don't have a valid context.</span>
<a name="l718"><span class="linenum"> 718</span></a>                  <a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../../_variables/usercontext.html">$usercontext</a> = <a class="class" onClick="logClass('context_user')" href="../../_classes/context_user.html" onMouseOver="classPopup(event,'context_user')">context_user</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>);
<a name="l719"><span class="linenum"> 719</span></a>                  if (<a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../../_variables/usercontext.html">$usercontext</a>) {
<a name="l720"><span class="linenum"> 720</span></a>                      <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('userpictureurl')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/userpictureurl.html">userpictureurl</a> = <a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>::<a class="function" onClick="logFunction('make_webservice_pluginfile_url')" href="../../_functions/make_webservice_pluginfile_url.html" onMouseOver="funcPopup(event,'make_webservice_pluginfile_url')">make_webservice_pluginfile_url</a>(
<a name="l721"><span class="linenum"> 721</span></a>                          <a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../../_variables/usercontext.html">$usercontext</a>-&gt;<a onClick="logVariable('id')" class="var it39494" onMouseOver="hilite(39494)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'user', 'icon', null, '/', 'f1')-&gt;<a class="function" onClick="logFunction('out')" href="../../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(false);
<a name="l722"><span class="linenum"> 722</span></a>                  } else {
<a name="l723"><span class="linenum"> 723</span></a>                      <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('userpictureurl')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/userpictureurl.html">userpictureurl</a> = '';
<a name="l724"><span class="linenum"> 724</span></a>                  }
<a name="l725"><span class="linenum"> 725</span></a>  
<a name="l726"><span class="linenum"> 726</span></a>                  <a class="var it5799" onMouseOver="hilite(5799)" onMouseOut="lolite()" onClick="logVariable('usermodified')" href="../../_variables/usermodified.html">$usermodified</a> = new stdclass();
<a name="l727"><span class="linenum"> 727</span></a>                  <a class="var it5799" onMouseOver="hilite(5799)" onMouseOut="lolite()" onClick="logVariable('usermodified')" href="../../_variables/usermodified.html">$usermodified</a>-&gt;<a onClick="logVariable('id')" class="var it40688" onMouseOver="hilite(40688)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('usermodified')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/usermodified.html">usermodified</a>;
<a name="l728"><span class="linenum"> 728</span></a>                  <a class="var it5799" onMouseOver="hilite(5799)" onMouseOut="lolite()" onClick="logVariable('usermodified')" href="../../_variables/usermodified.html">$usermodified</a> = <a class="function" onClick="logFunction('username_load_fields_from_object')" href="../../_functions/username_load_fields_from_object.html" onMouseOver="funcPopup(event,'username_load_fields_from_object')">username_load_fields_from_object</a>(<a class="var it5799" onMouseOver="hilite(5799)" onMouseOut="lolite()" onClick="logVariable('usermodified')" href="../../_variables/usermodified.html">$usermodified</a>, <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>, 'um');
<a name="l729"><span class="linenum"> 729</span></a>                  <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('usermodifiedfullname')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/usermodifiedfullname.html">usermodifiedfullname</a> = <a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it5799" onMouseOver="hilite(5799)" onMouseOut="lolite()" onClick="logVariable('usermodified')" href="../../_variables/usermodified.html">$usermodified</a>, <a class="var it3124" onMouseOver="hilite(3124)" onMouseOut="lolite()" onClick="logVariable('canviewfullname')" href="../../_variables/canviewfullname.html">$canviewfullname</a>);
<a name="l730"><span class="linenum"> 730</span></a>  
<a name="l731"><span class="linenum"> 731</span></a>  <span class="comment">                // We can have post written by users that are deleted. In this case, those users don't have a valid context.</span>
<a name="l732"><span class="linenum"> 732</span></a>                  <a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../../_variables/usercontext.html">$usercontext</a> = <a class="class" onClick="logClass('context_user')" href="../../_classes/context_user.html" onMouseOver="classPopup(event,'context_user')">context_user</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it5799" onMouseOver="hilite(5799)" onMouseOut="lolite()" onClick="logVariable('usermodified')" href="../../_variables/usermodified.html">$usermodified</a>-&gt;<a onClick="logVariable('id')" class="var it40688" onMouseOver="hilite(40688)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>);
<a name="l733"><span class="linenum"> 733</span></a>                  if (<a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../../_variables/usercontext.html">$usercontext</a>) {
<a name="l734"><span class="linenum"> 734</span></a>                      <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('usermodifiedpictureurl')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/usermodifiedpictureurl.html">usermodifiedpictureurl</a> = <a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>::<a class="function" onClick="logFunction('make_webservice_pluginfile_url')" href="../../_functions/make_webservice_pluginfile_url.html" onMouseOver="funcPopup(event,'make_webservice_pluginfile_url')">make_webservice_pluginfile_url</a>(
<a name="l735"><span class="linenum"> 735</span></a>                          <a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../../_variables/usercontext.html">$usercontext</a>-&gt;<a onClick="logVariable('id')" class="var it39494" onMouseOver="hilite(39494)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'user', 'icon', null, '/', 'f1')-&gt;<a class="function" onClick="logFunction('out')" href="../../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(false);
<a name="l736"><span class="linenum"> 736</span></a>                  } else {
<a name="l737"><span class="linenum"> 737</span></a>                      <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('usermodifiedpictureurl')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/usermodifiedpictureurl.html">usermodifiedpictureurl</a> = '';
<a name="l738"><span class="linenum"> 738</span></a>                  }
<a name="l739"><span class="linenum"> 739</span></a>  
<a name="l740"><span class="linenum"> 740</span></a>  <span class="comment">                // Rewrite embedded images URLs.</span>
<a name="l741"><span class="linenum"> 741</span></a>                  <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('message')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/message.html">message</a>, <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('messageformat')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/messageformat.html">messageformat</a>) =
<a name="l742"><span class="linenum"> 742</span></a>                      <a class="function" onClick="logFunction('external_format_text')" href="../../_functions/external_format_text.html" onMouseOver="funcPopup(event,'external_format_text')">external_format_text</a>(<a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('message')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/message.html">message</a>, <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('messageformat')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/messageformat.html">messageformat</a>,
<a name="l743"><span class="linenum"> 743</span></a>                                              <a class="var it1418" onMouseOver="hilite(1418)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>-&gt;<a onClick="logVariable('id')" class="var it39650" onMouseOver="hilite(39650)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_forum', 'post', <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('id')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l744"><span class="linenum"> 744</span></a>  
<a name="l745"><span class="linenum"> 745</span></a>  <span class="comment">                // List attachments.</span>
<a name="l746"><span class="linenum"> 746</span></a>                  if (!empty(<a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('attachment')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/attachment.html">attachment</a>)) {
<a name="l747"><span class="linenum"> 747</span></a>                      <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('attachments')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/attachments.html">attachments</a> = array();
<a name="l748"><span class="linenum"> 748</span></a>  
<a name="l749"><span class="linenum"> 749</span></a>                      <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l750"><span class="linenum"> 750</span></a>                      if (<a class="var it595" onMouseOver="hilite(595)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a> = <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_area_files')" href="../../_functions/get_area_files.html" onMouseOver="funcPopup(event,'get_area_files')">get_area_files</a>(<a class="var it1418" onMouseOver="hilite(1418)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>-&gt;<a onClick="logVariable('id')" class="var it39650" onMouseOver="hilite(39650)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_forum', 'attachment',
<a name="l751"><span class="linenum"> 751</span></a>                                                          <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('id')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, &quot;filename&quot;, false)) {
<a name="l752"><span class="linenum"> 752</span></a>                          foreach (<a class="var it595" onMouseOver="hilite(595)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a> as <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>) {
<a name="l753"><span class="linenum"> 753</span></a>                              <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a> = <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_filename')" href="../../_functions/get_filename.html" onMouseOver="funcPopup(event,'get_filename')">get_filename</a>();
<a name="l754"><span class="linenum"> 754</span></a>  
<a name="l755"><span class="linenum"> 755</span></a>                              <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('attachments')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/attachments.html">attachments</a>[] = array(
<a name="l756"><span class="linenum"> 756</span></a>                                  'filename' =&gt; <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>,
<a name="l757"><span class="linenum"> 757</span></a>                                  'mimetype' =&gt; <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_mimetype')" href="../../_functions/get_mimetype.html" onMouseOver="funcPopup(event,'get_mimetype')">get_mimetype</a>(),
<a name="l758"><span class="linenum"> 758</span></a>                                  'fileurl'  =&gt; <a class="function" onClick="logFunction('file_encode_url')" href="../../_functions/file_encode_url.html" onMouseOver="funcPopup(event,'file_encode_url')">file_encode_url</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>.'<a class="filename" href="../../webservice/pluginfile.php.html">/webservice/pluginfile.php</a>',
<a name="l759"><span class="linenum"> 759</span></a>                                                  '/'.<a class="var it1418" onMouseOver="hilite(1418)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>-&gt;<a onClick="logVariable('id')" class="var it39650" onMouseOver="hilite(39650)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>.'/mod_forum/attachment/'.<a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('id')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>.'/'.<a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>)
<a name="l760"><span class="linenum"> 760</span></a>                              );
<a name="l761"><span class="linenum"> 761</span></a>                          }
<a name="l762"><span class="linenum"> 762</span></a>                      }
<a name="l763"><span class="linenum"> 763</span></a>                  }
<a name="l764"><span class="linenum"> 764</span></a>  
<a name="l765"><span class="linenum"> 765</span></a>                  <a class="var it2556" onMouseOver="hilite(2556)" onMouseOut="lolite()" onClick="logVariable('discussions')" href="../../_variables/discussions.html">$discussions</a>[<a class="var it23188" onMouseOver="hilite(23188)" onMouseOut="lolite()" onClick="logVariable('did')" href="../../_variables/did.html">$did</a>] = (array) <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>;
<a name="l766"><span class="linenum"> 766</span></a>              }
<a name="l767"><span class="linenum"> 767</span></a>          }
<a name="l768"><span class="linenum"> 768</span></a>  
<a name="l769"><span class="linenum"> 769</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = array();
<a name="l770"><span class="linenum"> 770</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>['discussions'] = <a class="var it2556" onMouseOver="hilite(2556)" onMouseOut="lolite()" onClick="logVariable('discussions')" href="../../_variables/discussions.html">$discussions</a>;
<a name="l771"><span class="linenum"> 771</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>['warnings'] = <a class="var it2962" onMouseOver="hilite(2962)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../_variables/warnings.html">$warnings</a>;
<a name="l772"><span class="linenum"> 772</span></a>          return <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l773"><span class="linenum"> 773</span></a>  
<a name="l774"><span class="linenum"> 774</span></a>      }
<a name="l775"><span class="linenum"> 775</span></a>  
<a name="l776"><span class="linenum"> 776</span></a>      <span class="comment">/**</span>
<a name="l777"><span class="linenum"> 777</span></a>  <span class="comment">     * Describes the get_forum_discussions_paginated return value.</span>
<a name="l778"><span class="linenum"> 778</span></a>  <span class="comment">     *</span>
<a name="l779"><span class="linenum"> 779</span></a>  <span class="comment">     * @return external_single_structure</span>
<a name="l780"><span class="linenum"> 780</span></a>  <span class="comment">     * @since Moodle 2.8</span>
<a name="l781"><span class="linenum"> 781</span></a>  <span class="comment">     */</span>
<a name="l782"><span class="linenum"> 782</span></a>      public static function <a class="function" onClick="logFunction('get_forum_discussions_paginated_returns')" href="../../_functions/get_forum_discussions_paginated_returns.html" onMouseOver="funcPopup(event,'get_forum_discussions_paginated_returns')">get_forum_discussions_paginated_returns</a>() {
<a name="l783"><span class="linenum"> 783</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l784"><span class="linenum"> 784</span></a>              array(
<a name="l785"><span class="linenum"> 785</span></a>                  'discussions' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_multiple_structure')" href="../../_classes/external_multiple_structure.html" onMouseOver="classPopup(event,'external_multiple_structure')">external_multiple_structure</a>(
<a name="l786"><span class="linenum"> 786</span></a>                          <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l787"><span class="linenum"> 787</span></a>                              array(
<a name="l788"><span class="linenum"> 788</span></a>                                  'id' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Post id'),
<a name="l789"><span class="linenum"> 789</span></a>                                  'name' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'Discussion name'),
<a name="l790"><span class="linenum"> 790</span></a>                                  'groupid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Group id'),
<a name="l791"><span class="linenum"> 791</span></a>                                  'timemodified' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Time modified'),
<a name="l792"><span class="linenum"> 792</span></a>                                  'usermodified' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'The id of the user who last modified'),
<a name="l793"><span class="linenum"> 793</span></a>                                  'timestart' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Time discussion can start'),
<a name="l794"><span class="linenum"> 794</span></a>                                  'timeend' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Time discussion ends'),
<a name="l795"><span class="linenum"> 795</span></a>                                  'discussion' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Discussion id'),
<a name="l796"><span class="linenum"> 796</span></a>                                  'parent' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Parent id'),
<a name="l797"><span class="linenum"> 797</span></a>                                  'userid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'User who started the discussion id'),
<a name="l798"><span class="linenum"> 798</span></a>                                  'created' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Creation time'),
<a name="l799"><span class="linenum"> 799</span></a>                                  'modified' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Time modified'),
<a name="l800"><span class="linenum"> 800</span></a>                                  'mailed' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Mailed?'),
<a name="l801"><span class="linenum"> 801</span></a>                                  'subject' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'The post subject'),
<a name="l802"><span class="linenum"> 802</span></a>                                  'message' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'The post message'),
<a name="l803"><span class="linenum"> 803</span></a>                                  'messageformat' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_format_value')" href="../../_classes/external_format_value.html" onMouseOver="classPopup(event,'external_format_value')">external_format_value</a>('message'),
<a name="l804"><span class="linenum"> 804</span></a>                                  'messagetrust' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Can we trust?'),
<a name="l805"><span class="linenum"> 805</span></a>                                  'attachment' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'Has attachments?'),
<a name="l806"><span class="linenum"> 806</span></a>                                  'attachments' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_multiple_structure')" href="../../_classes/external_multiple_structure.html" onMouseOver="classPopup(event,'external_multiple_structure')">external_multiple_structure</a>(
<a name="l807"><span class="linenum"> 807</span></a>                                      <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l808"><span class="linenum"> 808</span></a>                                          array (
<a name="l809"><span class="linenum"> 809</span></a>                                              'filename' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_FILE')" href="../../_constants/PARAM_FILE.html" onMouseOver="constPopup(event,'PARAM_FILE')">PARAM_FILE</a>, 'file name'),
<a name="l810"><span class="linenum"> 810</span></a>                                              'mimetype' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'mime type'),
<a name="l811"><span class="linenum"> 811</span></a>                                              'fileurl'  =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_URL')" href="../../_constants/PARAM_URL.html" onMouseOver="constPopup(event,'PARAM_URL')">PARAM_URL</a>, 'file download url')
<a name="l812"><span class="linenum"> 812</span></a>                                          )
<a name="l813"><span class="linenum"> 813</span></a>                                      ), 'attachments', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>
<a name="l814"><span class="linenum"> 814</span></a>                                  ),
<a name="l815"><span class="linenum"> 815</span></a>                                  'totalscore' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'The post message total score'),
<a name="l816"><span class="linenum"> 816</span></a>                                  'mailnow' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'Mail now?'),
<a name="l817"><span class="linenum"> 817</span></a>                                  'userfullname' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'Post author full name'),
<a name="l818"><span class="linenum"> 818</span></a>                                  'usermodifiedfullname' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'Post modifier full name'),
<a name="l819"><span class="linenum"> 819</span></a>                                  'userpictureurl' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_URL')" href="../../_constants/PARAM_URL.html" onMouseOver="constPopup(event,'PARAM_URL')">PARAM_URL</a>, 'Post author picture.'),
<a name="l820"><span class="linenum"> 820</span></a>                                  'usermodifiedpictureurl' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_URL')" href="../../_constants/PARAM_URL.html" onMouseOver="constPopup(event,'PARAM_URL')">PARAM_URL</a>, 'Post modifier picture.'),
<a name="l821"><span class="linenum"> 821</span></a>                                  'numreplies' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'The number of replies in the discussion'),
<a name="l822"><span class="linenum"> 822</span></a>                                  'numunread' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'The number of unread discussions.')
<a name="l823"><span class="linenum"> 823</span></a>                              ), 'post'
<a name="l824"><span class="linenum"> 824</span></a>                          )
<a name="l825"><span class="linenum"> 825</span></a>                      ),
<a name="l826"><span class="linenum"> 826</span></a>                  'warnings' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_warnings')" href="../../_classes/external_warnings.html" onMouseOver="classPopup(event,'external_warnings')">external_warnings</a>()
<a name="l827"><span class="linenum"> 827</span></a>              )
<a name="l828"><span class="linenum"> 828</span></a>          );
<a name="l829"><span class="linenum"> 829</span></a>      }
<a name="l830"><span class="linenum"> 830</span></a>  
<a name="l831"><span class="linenum"> 831</span></a>      <span class="comment">/**</span>
<a name="l832"><span class="linenum"> 832</span></a>  <span class="comment">     * Returns description of method parameters</span>
<a name="l833"><span class="linenum"> 833</span></a>  <span class="comment">     *</span>
<a name="l834"><span class="linenum"> 834</span></a>  <span class="comment">     * @return external_function_parameters</span>
<a name="l835"><span class="linenum"> 835</span></a>  <span class="comment">     * @since Moodle 2.9</span>
<a name="l836"><span class="linenum"> 836</span></a>  <span class="comment">     */</span>
<a name="l837"><span class="linenum"> 837</span></a>      public static function <a class="function" onClick="logFunction('view_forum_parameters')" href="../../_functions/view_forum_parameters.html" onMouseOver="funcPopup(event,'view_forum_parameters')">view_forum_parameters</a>() {
<a name="l838"><span class="linenum"> 838</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_function_parameters')" href="../../_classes/external_function_parameters.html" onMouseOver="classPopup(event,'external_function_parameters')">external_function_parameters</a>(
<a name="l839"><span class="linenum"> 839</span></a>              array(
<a name="l840"><span class="linenum"> 840</span></a>                  'forumid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'forum instance id')
<a name="l841"><span class="linenum"> 841</span></a>              )
<a name="l842"><span class="linenum"> 842</span></a>          );
<a name="l843"><span class="linenum"> 843</span></a>      }
<a name="l844"><span class="linenum"> 844</span></a>  
<a name="l845"><span class="linenum"> 845</span></a>      <span class="comment">/**</span>
<a name="l846"><span class="linenum"> 846</span></a>  <span class="comment">     * Simulate the forum/view.php web interface page: trigger events, completion, etc...</span>
<a name="l847"><span class="linenum"> 847</span></a>  <span class="comment">     *</span>
<a name="l848"><span class="linenum"> 848</span></a>  <span class="comment">     * @param int $forumid the forum instance id</span>
<a name="l849"><span class="linenum"> 849</span></a>  <span class="comment">     * @return array of warnings and status result</span>
<a name="l850"><span class="linenum"> 850</span></a>  <span class="comment">     * @since Moodle 2.9</span>
<a name="l851"><span class="linenum"> 851</span></a>  <span class="comment">     * @throws moodle_exception</span>
<a name="l852"><span class="linenum"> 852</span></a>  <span class="comment">     */</span>
<a name="l853"><span class="linenum"> 853</span></a>      public static function <a class="function" onClick="logFunction('view_forum')" href="../../_functions/view_forum.html" onMouseOver="funcPopup(event,'view_forum')">view_forum</a>(<a class="var it8129" onMouseOver="hilite(8129)" onMouseOut="lolite()" onClick="logVariable('forumid')" href="../../_variables/forumid.html">$forumid</a>) {
<a name="l854"><span class="linenum"> 854</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l855"><span class="linenum"> 855</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . "<a class="filename" href="../../mod/forum/lib.php.html">/mod/forum/lib.php</a>");
<a name="l856"><span class="linenum"> 856</span></a>  
<a name="l857"><span class="linenum"> 857</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = self::<a class="function" onClick="logFunction('validate_parameters')" href="../../_functions/validate_parameters.html" onMouseOver="funcPopup(event,'validate_parameters')">validate_parameters</a>(self::<a class="function" onClick="logFunction('view_forum_parameters')" href="../../_functions/view_forum_parameters.html" onMouseOver="funcPopup(event,'view_forum_parameters')">view_forum_parameters</a>(),
<a name="l858"><span class="linenum"> 858</span></a>                                              array(
<a name="l859"><span class="linenum"> 859</span></a>                                                  'forumid' =&gt; <a class="var it8129" onMouseOver="hilite(8129)" onMouseOut="lolite()" onClick="logVariable('forumid')" href="../../_variables/forumid.html">$forumid</a>
<a name="l860"><span class="linenum"> 860</span></a>                                              ));
<a name="l861"><span class="linenum"> 861</span></a>          <a class="var it2962" onMouseOver="hilite(2962)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../_variables/warnings.html">$warnings</a> = array();
<a name="l862"><span class="linenum"> 862</span></a>  
<a name="l863"><span class="linenum"> 863</span></a>  <span class="comment">        // Request and permission validation.</span>
<a name="l864"><span class="linenum"> 864</span></a>          <a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('forum', array('id' =&gt; <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['forumid']), 'id', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l865"><span class="linenum"> 865</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>) = <a class="function" onClick="logFunction('get_course_and_cm_from_instance')" href="../../_functions/get_course_and_cm_from_instance.html" onMouseOver="funcPopup(event,'get_course_and_cm_from_instance')">get_course_and_cm_from_instance</a>(<a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>, 'forum');
<a name="l866"><span class="linenum"> 866</span></a>  
<a name="l867"><span class="linenum"> 867</span></a>          <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l868"><span class="linenum"> 868</span></a>          self::<a class="function" onClick="logFunction('validate_context')" href="../../_functions/validate_context.html" onMouseOver="funcPopup(event,'validate_context')">validate_context</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l869"><span class="linenum"> 869</span></a>  
<a name="l870"><span class="linenum"> 870</span></a>          <a class="function" onClick="logFunction('require_capability')" href="../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/forum:viewdiscussion', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, null, true, 'noviewdiscussionspermission', 'forum');
<a name="l871"><span class="linenum"> 871</span></a>  
<a name="l872"><span class="linenum"> 872</span></a>  <span class="comment">        // Call the forum/lib API.</span>
<a name="l873"><span class="linenum"> 873</span></a>          <a class="function" onClick="logFunction('forum_view')" href="../../_functions/forum_view.html" onMouseOver="funcPopup(event,'forum_view')">forum_view</a>(<a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l874"><span class="linenum"> 874</span></a>  
<a name="l875"><span class="linenum"> 875</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = array();
<a name="l876"><span class="linenum"> 876</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>['status'] = true;
<a name="l877"><span class="linenum"> 877</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>['warnings'] = <a class="var it2962" onMouseOver="hilite(2962)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../_variables/warnings.html">$warnings</a>;
<a name="l878"><span class="linenum"> 878</span></a>          return <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l879"><span class="linenum"> 879</span></a>      }
<a name="l880"><span class="linenum"> 880</span></a>  
<a name="l881"><span class="linenum"> 881</span></a>      <span class="comment">/**</span>
<a name="l882"><span class="linenum"> 882</span></a>  <span class="comment">     * Returns description of method result value</span>
<a name="l883"><span class="linenum"> 883</span></a>  <span class="comment">     *</span>
<a name="l884"><span class="linenum"> 884</span></a>  <span class="comment">     * @return external_description</span>
<a name="l885"><span class="linenum"> 885</span></a>  <span class="comment">     * @since Moodle 2.9</span>
<a name="l886"><span class="linenum"> 886</span></a>  <span class="comment">     */</span>
<a name="l887"><span class="linenum"> 887</span></a>      public static function <a class="function" onClick="logFunction('view_forum_returns')" href="../../_functions/view_forum_returns.html" onMouseOver="funcPopup(event,'view_forum_returns')">view_forum_returns</a>() {
<a name="l888"><span class="linenum"> 888</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l889"><span class="linenum"> 889</span></a>              array(
<a name="l890"><span class="linenum"> 890</span></a>                  'status' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_BOOL')" href="../../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>, 'status: true if success'),
<a name="l891"><span class="linenum"> 891</span></a>                  'warnings' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_warnings')" href="../../_classes/external_warnings.html" onMouseOver="classPopup(event,'external_warnings')">external_warnings</a>()
<a name="l892"><span class="linenum"> 892</span></a>              )
<a name="l893"><span class="linenum"> 893</span></a>          );
<a name="l894"><span class="linenum"> 894</span></a>      }
<a name="l895"><span class="linenum"> 895</span></a>  
<a name="l896"><span class="linenum"> 896</span></a>      <span class="comment">/**</span>
<a name="l897"><span class="linenum"> 897</span></a>  <span class="comment">     * Returns description of method parameters</span>
<a name="l898"><span class="linenum"> 898</span></a>  <span class="comment">     *</span>
<a name="l899"><span class="linenum"> 899</span></a>  <span class="comment">     * @return external_function_parameters</span>
<a name="l900"><span class="linenum"> 900</span></a>  <span class="comment">     * @since Moodle 2.9</span>
<a name="l901"><span class="linenum"> 901</span></a>  <span class="comment">     */</span>
<a name="l902"><span class="linenum"> 902</span></a>      public static function <a class="function" onClick="logFunction('view_forum_discussion_parameters')" href="../../_functions/view_forum_discussion_parameters.html" onMouseOver="funcPopup(event,'view_forum_discussion_parameters')">view_forum_discussion_parameters</a>() {
<a name="l903"><span class="linenum"> 903</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_function_parameters')" href="../../_classes/external_function_parameters.html" onMouseOver="classPopup(event,'external_function_parameters')">external_function_parameters</a>(
<a name="l904"><span class="linenum"> 904</span></a>              array(
<a name="l905"><span class="linenum"> 905</span></a>                  'discussionid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'discussion id')
<a name="l906"><span class="linenum"> 906</span></a>              )
<a name="l907"><span class="linenum"> 907</span></a>          );
<a name="l908"><span class="linenum"> 908</span></a>      }
<a name="l909"><span class="linenum"> 909</span></a>  
<a name="l910"><span class="linenum"> 910</span></a>      <span class="comment">/**</span>
<a name="l911"><span class="linenum"> 911</span></a>  <span class="comment">     * Simulate the forum/discuss.php web interface page: trigger events</span>
<a name="l912"><span class="linenum"> 912</span></a>  <span class="comment">     *</span>
<a name="l913"><span class="linenum"> 913</span></a>  <span class="comment">     * @param int $discussionid the discussion id</span>
<a name="l914"><span class="linenum"> 914</span></a>  <span class="comment">     * @return array of warnings and status result</span>
<a name="l915"><span class="linenum"> 915</span></a>  <span class="comment">     * @since Moodle 2.9</span>
<a name="l916"><span class="linenum"> 916</span></a>  <span class="comment">     * @throws moodle_exception</span>
<a name="l917"><span class="linenum"> 917</span></a>  <span class="comment">     */</span>
<a name="l918"><span class="linenum"> 918</span></a>      public static function <a class="function" onClick="logFunction('view_forum_discussion')" href="../../_functions/view_forum_discussion.html" onMouseOver="funcPopup(event,'view_forum_discussion')">view_forum_discussion</a>(<a class="var it8130" onMouseOver="hilite(8130)" onMouseOut="lolite()" onClick="logVariable('discussionid')" href="../../_variables/discussionid.html">$discussionid</a>) {
<a name="l919"><span class="linenum"> 919</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l920"><span class="linenum"> 920</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . "<a class="filename" href="../../mod/forum/lib.php.html">/mod/forum/lib.php</a>");
<a name="l921"><span class="linenum"> 921</span></a>  
<a name="l922"><span class="linenum"> 922</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = self::<a class="function" onClick="logFunction('validate_parameters')" href="../../_functions/validate_parameters.html" onMouseOver="funcPopup(event,'validate_parameters')">validate_parameters</a>(self::<a class="function" onClick="logFunction('view_forum_discussion_parameters')" href="../../_functions/view_forum_discussion_parameters.html" onMouseOver="funcPopup(event,'view_forum_discussion_parameters')">view_forum_discussion_parameters</a>(),
<a name="l923"><span class="linenum"> 923</span></a>                                              array(
<a name="l924"><span class="linenum"> 924</span></a>                                                  'discussionid' =&gt; <a class="var it8130" onMouseOver="hilite(8130)" onMouseOut="lolite()" onClick="logVariable('discussionid')" href="../../_variables/discussionid.html">$discussionid</a>
<a name="l925"><span class="linenum"> 925</span></a>                                              ));
<a name="l926"><span class="linenum"> 926</span></a>          <a class="var it2962" onMouseOver="hilite(2962)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../_variables/warnings.html">$warnings</a> = array();
<a name="l927"><span class="linenum"> 927</span></a>  
<a name="l928"><span class="linenum"> 928</span></a>          <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('forum_discussions', array('id' =&gt; <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['discussionid']), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l929"><span class="linenum"> 929</span></a>          <a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('forum', array('id' =&gt; <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>-&gt;<a onClick="logVariable('forum')" class="var it39950" onMouseOver="hilite(39950)" onMouseOut="lolite()" href="../../_variables/forum.html">forum</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l930"><span class="linenum"> 930</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>) = <a class="function" onClick="logFunction('get_course_and_cm_from_instance')" href="../../_functions/get_course_and_cm_from_instance.html" onMouseOver="funcPopup(event,'get_course_and_cm_from_instance')">get_course_and_cm_from_instance</a>(<a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>, 'forum');
<a name="l931"><span class="linenum"> 931</span></a>  
<a name="l932"><span class="linenum"> 932</span></a>  <span class="comment">        // Validate the module context. It checks everything that affects the module visibility (including groupings, etc..).</span>
<a name="l933"><span class="linenum"> 933</span></a>          <a class="var it1418" onMouseOver="hilite(1418)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l934"><span class="linenum"> 934</span></a>          self::<a class="function" onClick="logFunction('validate_context')" href="../../_functions/validate_context.html" onMouseOver="funcPopup(event,'validate_context')">validate_context</a>(<a class="var it1418" onMouseOver="hilite(1418)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>);
<a name="l935"><span class="linenum"> 935</span></a>  
<a name="l936"><span class="linenum"> 936</span></a>          <a class="function" onClick="logFunction('require_capability')" href="../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/forum:viewdiscussion', <a class="var it1418" onMouseOver="hilite(1418)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>, null, true, 'noviewdiscussionspermission', 'forum');
<a name="l937"><span class="linenum"> 937</span></a>  
<a name="l938"><span class="linenum"> 938</span></a>  <span class="comment">        // Call the forum/lib API.</span>
<a name="l939"><span class="linenum"> 939</span></a>          <a class="function" onClick="logFunction('forum_discussion_view')" href="../../_functions/forum_discussion_view.html" onMouseOver="funcPopup(event,'forum_discussion_view')">forum_discussion_view</a>(<a class="var it1418" onMouseOver="hilite(1418)" onMouseOut="lolite()" onClick="logVariable('modcontext')" href="../../_variables/modcontext.html">$modcontext</a>, <a class="var it78" onMouseOver="hilite(78)" onMouseOut="lolite()" onClick="logVariable('forum')" href="../../_variables/forum.html">$forum</a>, <a class="var it77" onMouseOver="hilite(77)" onMouseOut="lolite()" onClick="logVariable('discussion')" href="../../_variables/discussion.html">$discussion</a>);
<a name="l940"><span class="linenum"> 940</span></a>  
<a name="l941"><span class="linenum"> 941</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = array();
<a name="l942"><span class="linenum"> 942</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>['status'] = true;
<a name="l943"><span class="linenum"> 943</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>['warnings'] = <a class="var it2962" onMouseOver="hilite(2962)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../../_variables/warnings.html">$warnings</a>;
<a name="l944"><span class="linenum"> 944</span></a>          return <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l945"><span class="linenum"> 945</span></a>      }
<a name="l946"><span class="linenum"> 946</span></a>  
<a name="l947"><span class="linenum"> 947</span></a>      <span class="comment">/**</span>
<a name="l948"><span class="linenum"> 948</span></a>  <span class="comment">     * Returns description of method result value</span>
<a name="l949"><span class="linenum"> 949</span></a>  <span class="comment">     *</span>
<a name="l950"><span class="linenum"> 950</span></a>  <span class="comment">     * @return external_description</span>
<a name="l951"><span class="linenum"> 951</span></a>  <span class="comment">     * @since Moodle 2.9</span>
<a name="l952"><span class="linenum"> 952</span></a>  <span class="comment">     */</span>
<a name="l953"><span class="linenum"> 953</span></a>      public static function <a class="function" onClick="logFunction('view_forum_discussion_returns')" href="../../_functions/view_forum_discussion_returns.html" onMouseOver="funcPopup(event,'view_forum_discussion_returns')">view_forum_discussion_returns</a>() {
<a name="l954"><span class="linenum"> 954</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l955"><span class="linenum"> 955</span></a>              array(
<a name="l956"><span class="linenum"> 956</span></a>                  'status' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_BOOL')" href="../../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>, 'status: true if success'),
<a name="l957"><span class="linenum"> 957</span></a>                  'warnings' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_warnings')" href="../../_classes/external_warnings.html" onMouseOver="classPopup(event,'external_warnings')">external_warnings</a>()
<a name="l958"><span class="linenum"> 958</span></a>              )
<a name="l959"><span class="linenum"> 959</span></a>          );
<a name="l960"><span class="linenum"> 960</span></a>      }
<a name="l961"><span class="linenum"> 961</span></a>  
<a name="l962"><span class="linenum"> 962</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'view_forum_parameters': ['view_forum_parameters', 'Returns description of method parameters ', [['mod/forum','externallib.php',831]], 1],
'groups_get_user_groups': ['groups_get_user_groups', 'Returns info about user\'s groups in course. ', [['lib','grouplib.php',290]], 20],
'get_filename': ['get_filename', 'Returns file name or \'.\' in case of directories. ', [['lib/filestorage','stored_file.php',699],['lib/filebrowser','virtual_root_file.php',227],['lib','medialib.php',169]], 223],
'forum_tp_can_track_forums': ['forum_tp_can_track_forums', 'Determine if a user can track forums and optionally a particular forum. Checks the site settings, the user settings and the forum settings (if requested). ', [['mod/forum','lib.php',6432]], 26],
'forum_get_all_discussion_posts': ['forum_get_all_discussion_posts', 'Gets all posts in discussion including top parent. ', [['mod/forum','lib.php',1896]], 5],
'view_forum_discussion_returns': ['view_forum_discussion_returns', 'Returns description of method result value ', [['mod/forum','externallib.php',947]], 0],
'get_area_files': ['get_area_files', 'Returns all area files (optionally limited by itemid) ', [['lib/filestorage','file_storage.php',530]], 174],
'forum_count_discussion_replies': ['forum_count_discussion_replies', 'Returns an array of counts of replies to each discussion ', [['mod/forum','lib.php',2440]], 13],
'validate_context': ['validate_context', 'Makes sure user may execute functions in this context. ', [['lib','externallib.php',343]], 104],
'fullname': ['fullname', 'Returns a persons full name ', [['lib','moodlelib.php',3234],['mod/assign','locallib.php',3440]], 532],
'parameter': ['parameter', '', [['lib/adodb','adodb.inc.php',865],['lib/adodb/drivers','adodb-odbtp.inc.php',509],['lib/adodb/drivers','adodb-mssql.inc.php',706],['lib/adodb/drivers','adodb-oci8.inc.php',1019]], 21],
'forum_user_can_see_discussion': ['forum_user_can_see_discussion', '', [['mod/forum','lib.php',5101]], 5],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',884],['lib','accesslib.php',346]], 1929],
'view_forum': ['view_forum', 'Simulate the forum/view.php web interface page: trigger events, completion, etc... ', [['mod/forum','externallib.php',845]], 0],
'get_cm': ['get_cm', 'Obtains a single course-module object (for a course-module that is on this course). ', [['lib','modinfolib.php',222],['mod/quiz','attemptlib.php',215],['mod/quiz','attemptlib.php',701],['comment','lib.php',1006]], 96],
'get_records_select': ['get_records_select', 'Get a number of records as an array of objects which match a particular WHERE clause. ', [['lib/dml','moodle_database.php',1283]], 163],
'make_webservice_pluginfile_url': ['make_webservice_pluginfile_url', 'Factory method for creation of url pointing to plugin file. This method is the same that make_pluginfile_url but pointing to the webservice pluginfile.php script. It should be used only in external functions. ', [['lib','weblib.php',751]], 16],
'forum_get_discussions_unread': ['forum_get_discussions_unread', '', [['mod/forum','lib.php',2798]], 3],
'forum_discussion_view': ['forum_discussion_view', 'Trigger the discussion viewed event ', [['mod/forum','lib.php',7793]], 3],
'get_forum_discussion_posts_parameters': ['get_forum_discussion_posts_parameters', 'Describes the parameters for get_forum_discussion_posts. ', [['mod/forum','externallib.php',377]], 1],
'get_forum_discussions_paginated_parameters': ['get_forum_discussions_paginated_parameters', 'Describes the parameters for get_forum_discussions_paginated. ', [['mod/forum','externallib.php',590]], 1],
'get_forums_by_courses_returns': ['get_forums_by_courses_returns', 'Describes the get_forum return value. ', [['mod/forum','externallib.php',124]], 4],
'get_record': ['get_record', 'Get a single database record as an object where all the given conditions met. ', [['lib/dml','moodle_database.php',1413]], 2960],
'require_capability': ['require_capability', 'Adds a required capability which all results will be checked against ', [['backup/util/ui','restore_ui_components.php',157],['mod/quiz','attemptlib.php',306],['mod/quiz','attemptlib.php',891],['lib','accesslib.php',764]], 628],
'get_forum_discussion_posts_returns': ['get_forum_discussion_posts_returns', 'Describes the get_forum_discussion_posts return value. ', [['mod/forum','externallib.php',542]], 2],
'view_forum_discussion_parameters': ['view_forum_discussion_parameters', 'Returns description of method parameters ', [['mod/forum','externallib.php',896]], 1],
'get_forums_by_courses_parameters': ['get_forums_by_courses_parameters', 'Describes the parameters for get_forum. ', [['mod/forum','externallib.php',32]], 1],
'forum_user_can_see_post': ['forum_user_can_see_post', '', [['mod/forum','lib.php',5155]], 13],
'view_forum_returns': ['view_forum_returns', 'Returns description of method result value ', [['mod/forum','externallib.php',881]], 0],
'forum_get_post_full': ['forum_get_post_full', 'Gets a post with all info ready for forum_print_post Most of these joins are just to get the forum id ', [['mod/forum','lib.php',1876]], 11],
'get_instances_of': ['get_instances_of', 'Obtains all instances of a particular module on this course. ', [['lib','modinfolib.php',261]], 28],
'username_load_fields_from_object': ['username_load_fields_from_object', 'Reduces lines of duplicated code for getting user name fields. ', [['lib','moodlelib.php',3403]], 27],
'forum_user_can_post': ['forum_user_can_post', 'This function checks whether the user can reply to posts in a forum discussion. Use forum_user_can_post_discussion() to check whether the user can start discussions. ', [['mod/forum','lib.php',4954]], 11],
'get_mimetype': ['get_mimetype', 'Gets mimetype ', [['lib/portfolio','caller.php',453],['lib/filestorage','stored_file.php',738],['lib/filebrowser','virtual_root_file.php',254],['lib/filebrowser','file_info.php',277],['lib','medialib.php',192],['lib/filebrowser','file_info_stored.php',240]], 56],
'validate_parameters': ['validate_parameters', 'Validates submitted function parameters, if anything is incorrect invalid_parameter_exception is thrown. This is a simple recursive method which is intended to be called from each implementation method of external API. ', [['lib','externallib.php',174]], 128],
'get_fast_modinfo': ['get_fast_modinfo', 'Returns reference to full info about modules in course (including visibility). Cached and as fast as possible (0 or 1 db query). ', [['lib','modinfolib.php',2001]], 277],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 1891],
'out': ['out', 'Returns the string ', [['lib','moodlelib.php',9451],['lib','weblib.php',547],['lib','tablelib.php',1526],['lib','csslib.php',1540],['lib','csslib.php',1698],['lib','csslib.php',2078],['lib','csslib.php',2162],['lib','csslib.php',2306],['lib','csslib.php',2495],['lib','csslib.php',3240],['report/loglive/classes','table_log_ajax.php',37]], 549],
'get_all_instances_in_courses': ['get_all_instances_in_courses', 'Returns an array of all the active instances of a particular module in given courses, sorted in the order they are defined ', [['lib','datalib.php',1413]], 13],
'get_coursemodule_from_instance': ['get_coursemodule_from_instance', 'Given an instance number of a module, finds the coursemodule description ', [['lib','datalib.php',1331]], 365],
'get_forum_discussions_paginated': ['get_forum_discussions_paginated', 'Returns a list of forum discussions optionally sorted and paginated. ', [['mod/forum','externallib.php',609]], 3],
'file_encode_url': ['file_encode_url', 'Encodes file serving url ', [['lib','filelib.php',42]], 30],
'forum_tp_is_tracked': ['forum_tp_is_tracked', 'Tells whether a specific forum is tracked by the user. A user can optionally be specified. If not specified, the current user is assumed. ', [['mod/forum','lib.php',6488]], 34],
'instance': ['instance', 'Retrieve sole instance of the registry. ', [['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29],['lib/classes','useragent.php',101],['backup/cc','validator.php',35],['lib/portfolio','exporter.php',251],['lib/tests','update_deployer_test.php',69],['lib/tests','string_manager_standard_test.php',124],['lib','modinfolib.php',373],['','mdeploy.php',96],['cache','disabledlib.php',171],['cache','disabledlib.php',296],['admin/tool/installaddon/classes','validator.php',85],['cache/classes','config.php',87],['course/format','lib.php',156],['lib','accesslib.php',6184],['lib','accesslib.php',6436],['lib','accesslib.php',6614],['lib','accesslib.php',6868],['lib','accesslib.php',7129],['lib','accesslib.php',7341],['cache','locallib.php',52],['lib/htmlpurifier','HTMLPurifier.php',251],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['cache/classes','helper.php',76],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['lib/classes','plugin_manager.php',83],['lib','filterlib.php',81],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/classes/update','deployer.php',54],['admin/tool/installaddon/classes','pluginfo_client.php',37],['admin/tool/installaddon/classes','installer.php',40],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443]], 3942],
'forum_get_discussions': ['forum_get_discussions', 'Get all discussions in a forum ', [['mod/forum','lib.php',2582]], 5],
'get_forum_discussions': ['get_forum_discussions', 'Returns a list of forum discussions as well as a summary of the discussion in a provided list of forums. ', [['mod/forum','externallib.php',183]], 4],
'get_forum_discussions_returns': ['get_forum_discussions_returns', 'Describes the get_forum_discussions return value. ', [['mod/forum','externallib.php',334]], 2],
'forum_count_discussions': ['forum_count_discussions', '', [['mod/forum','lib.php',2505]], 3],
'fields': ['fields', 'Get the value of a field in the current row by column name. Will not work if ADODB_FETCH_MODE is set to ADODB_FETCH_NUM. ', [['lib/adodb','adodb.inc.php',3469],['lib/adodb','adodb.inc.php',4073],['lib/adodb/drivers','adodb-odbtp.inc.php',718],['lib/adodb/drivers','adodb-sqlite.inc.php',369],['lib/adodb/drivers','adodb-pdo.inc.php',611],['lib/adodb/drivers','adodb-mysqli.inc.php',963],['lib/adodb/drivers','adodb-mssql.inc.php',904],['mod/quiz/classes','admin_review_setting.php',65],['lib/adodb/drivers','adodb-postgres64.inc.php',951],['lib/adodb/drivers','adodb-oracle.inc.php',265],['lib/adodb/drivers','adodb-ado.inc.php',373],['lib','outputcomponents.php',235],['lib/adodb/drivers','adodb-ado5.inc.php',410],['lib/adodb/drivers','adodb-db2.inc.php',754],['lib/adodb/drivers','adodb-sqlite3.inc.php',399],['lib/adodb/drivers','adodb-mssqlnative.inc.php',888],['lib/adodb/drivers','adodb-ibase.inc.php',833],['lib/adodb/drivers','adodb-oci8po.inc.php',91],['lib/adodb/drivers','adodb-ads.inc.php',690],['lib/adodb/drivers','adodb-odbc.inc.php',642],['lib/adodb/drivers','adodb-mysql.inc.php',764],['lib/adodb/drivers','adodb-oci8.inc.php',1549]], 145],
'forum_view': ['forum_view', 'Mark the activity completed (if required) and trigger the course_module_viewed event. ', [['mod/forum','lib.php',7764]], 3],
'get_forum_discussion_posts': ['get_forum_discussion_posts', 'Returns a list of forum posts for a discussion ', [['mod/forum','externallib.php',394]], 2],
'groups_get_activity_groupmode': ['groups_get_activity_groupmode', 'Returns effective groupmode used in activity, course setting overrides activity setting if groupmodeforce enabled. ', [['lib','grouplib.php',468]], 133],
'external_format_text': ['external_format_text', 'Format the text to be returned properly as requested by the either the web service server, either by an internally call. The caller can change the format (raw, filter, file, fileurl) with the external_settings singleton All web service servers must set this singleton when parsing the $_GET and $_POST. ', [['lib','externallib.php',721]], 31],
'get_in_or_equal': ['get_in_or_equal', 'Constructs \'IN()\' or \'=\' sql fragment ', [['lib/dml','oci_native_moodle_database.php',1583],['lib/dml','moodle_database.php',678]], 375],
'get_course': ['get_course', 'Gets a course object from database. If the course id corresponds to an already-loaded $COURSE or $SITE object, then the loaded object will be used, saving a database query. ', [['lib','datalib.php',568],['lib','modinfolib.php',180],['lib','modinfolib.php',1439],['lib','modinfolib.php',2730],['availability/classes','info.php',70],['mod/assign','locallib.php',1256],['enrol','locallib.php',897],['course/format','lib.php',231],['mod/quiz','attemptlib.php',180],['mod/quiz','attemptlib.php',681],['admin/tool/uploadcourse/classes','processor.php',232]], 268],
'get_forum_discussions_paginated_returns': ['get_forum_discussions_paginated_returns', 'Describes the get_forum_discussions_paginated return value. ', [['mod/forum','externallib.php',776]], 1],
'get_forums_by_courses': ['get_forums_by_courses', 'Returns a list of forums in a provided list of courses, if no list is provided all forums that the user can view will be returned. ', [['mod/forum','externallib.php',47]], 4],
'get_course_and_cm_from_instance': ['get_course_and_cm_from_instance', 'Efficiently retrieves the $course (stdclass) and $cm (cm_info) objects, given an instance id or record and module name. ', [['lib','modinfolib.php',2123]], 12],
'get_field': ['get_field', 'Get the right field name to fetch a stat for these attempts that is calculated for more than one $whichattempts (count or avg). ', [['mod/quiz/report/statistics/classes','calculated.php',109],['lib/dml','moodle_database.php',1497],['user/filters','lib.php',124],['lib/behat','behat_field_manager.php',243]], 485],
'enrol_get_my_courses': ['enrol_get_my_courses', 'Returns list of courses current $USER is enrolled in and can access ', [['lib','enrollib.php',512]], 16],
'get_file_storage': ['get_file_storage', 'Returns local file storage instance ', [['lib','moodlelib.php',5950]], 486],
'view_forum_discussion': ['view_forum_discussion', 'Simulate the forum/discuss.php web interface page: trigger events ', [['mod/forum','externallib.php',910]], 0],
'get_forum_discussions_parameters': ['get_forum_discussions_parameters', 'Describes the parameters for get_forum_discussions. ', [['mod/forum','externallib.php',164]], 1],
'in_array': ['in_array', '', [], 1173],
'implode': ['implode', '', [], 1259],
'array_unshift': ['array_unshift', '', [], 114],
'strtoupper': ['strtoupper', '', [], 576],
'array_keys': ['array_keys', '', [], 1152],
'defined': ['defined', '', [], 4098]};
CLASS_DATA={
'external_single_structure': ['external_single_structure', 'Associative array description class ', [['lib','externallib.php',475]], 238],
'external_value': ['external_value', 'Scalar value description class ', [['lib','externallib.php',441]], 1255],
'external_format_value': ['external_format_value', 'A pre-filled external_value class for text format. ', [['lib','externallib.php',670]], 52],
'external_api': ['external_api', 'Base class for external api methods. ', [['lib','externallib.php',139]], 302],
'invalid_parameter_exception': ['invalid_parameter_exception', 'Exception indicating malformed parameter problem. This exception is not supposed to be thrown when processing user submitted data in forms. It is more suitable for WS and other low level stuff. ', [['lib','setuplib.php',234]], 58],
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',240]], 2887],
'mod_forum_external': ['mod_forum_external', '', [['mod/forum','externallib.php',30]], 24],
'external_multiple_structure': ['external_multiple_structure', 'Bulk array description class. ', [['lib','externallib.php',504]], 212],
'context_course': ['context_course', 'Course context class ', [['lib','accesslib.php',6766]], 1197],
'user_picture': ['user_picture', 'Data structure representing a user picture. ', [['lib','outputcomponents.php',142]], 135],
'external_warnings': ['external_warnings', 'Standard Moodle web service warnings ', [['lib','externallib.php',639]], 50],
'context_module': ['context_module', 'Course module context class ', [['lib','accesslib.php',6988]], 942],
'context_user': ['context_user', 'User context class ', [['lib','accesslib.php',6347]], 288],
'moodle_exception': ['moodle_exception', 'Base Moodle Exception class ', [['lib','setuplib.php',68]], 478],
'external_function_parameters': ['external_function_parameters', 'Description of top level - PHP function parameters. ', [['lib','externallib.php',533]], 126]};
CONST_DATA={
'PARAM_URL': ['PARAM_URL', '', [['lib','moodlelib.php',239]], 121],
'PARAM_INT': ['PARAM_INT', '', [['lib','moodlelib.php',156]], 2948],
'PARAM_ALPHA': ['PARAM_ALPHA', '', [['lib','moodlelib.php',77]], 377],
'VALUE_OPTIONAL': ['VALUE_OPTIONAL', '', [['lib','moodlelib.php',337]], 409],
'IGNORE_MISSING': ['IGNORE_MISSING', '', [['lib','dmllib.php',48]], 204],
'VALUE_REQUIRED': ['VALUE_REQUIRED', '', [['lib','moodlelib.php',332]], 32],
'NULL_NOT_ALLOWED': ['NULL_NOT_ALLOWED', '', [['lib','moodlelib.php',347]], 27],
'PARAM_TEXT': ['PARAM_TEXT', '', [['lib','moodlelib.php',228]], 476],
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1252],
'VISIBLEGROUPS': ['VISIBLEGROUPS', '', [['lib','grouplib.php',39]], 96],
'PARAM_FILE': ['PARAM_FILE', '', [['lib','moodlelib.php',133]], 122],
'PARAM_RAW': ['PARAM_RAW', '', [['lib','moodlelib.php',193]], 692],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',138],['','install.php',93],['lib','setup.php',386]], 3532],
'PARAM_BOOL': ['PARAM_BOOL', '', [['lib','moodlelib.php',108]], 502],
'VALUE_DEFAULT': ['VALUE_DEFAULT', '', [['lib','moodlelib.php',342]], 129]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
