<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /mod/assignment/backup/moodle2/restore_assignment_stepslib.php source</title>
    <link rel="stylesheet" href="../../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../../';
subdir='mod/assignment/backup/moodle2';
filename='restore_assignment_stepslib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/mod/assignment/backup/moodle2/</a> -> <a href="restore_assignment_stepslib.php.html">restore_assignment_stepslib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="restore_assignment_stepslib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="restore_assignment_stepslib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">//</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">//</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">//</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment">/**</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * @package    mod_assignment</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @subpackage backup-moodle2</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @copyright 2010 onwards Eloy Lafuente (stronk7) {@link http://stronk7.com}</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> */</span>
<a name="l24"><span class="linenum">  24</span></a>  
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment">/**</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment"> * Define all the restore steps that will be used by the restore_assignment_activity_task</span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment"> */</span>
<a name="l28"><span class="linenum">  28</span></a>  
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment">/**</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> * Structure step to restore one assignment activity</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> */</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('restore_assignment_activity_structure_step')" href="../../../../_classes/restore_assignment_activity_structure_step.html" onMouseOver="classPopup(event,'restore_assignment_activity_structure_step')">restore_assignment_activity_structure_step</a> extends restore_activity_structure_step {
<a name="l33"><span class="linenum">  33</span></a>  
<a name="l34"><span class="linenum">  34</span></a>      protected function <a class="function" onClick="logFunction('define_structure')" href="../../../../_functions/define_structure.html" onMouseOver="funcPopup(event,'define_structure')">define_structure</a>() {
<a name="l35"><span class="linenum">  35</span></a>  
<a name="l36"><span class="linenum">  36</span></a>          <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('paths')" href="../../../../_variables/paths.html">$paths</a> = array();
<a name="l37"><span class="linenum">  37</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('userinfo')" href="../../../../_variables/userinfo.html">$userinfo</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_setting_value')" href="../../../../_functions/get_setting_value.html" onMouseOver="funcPopup(event,'get_setting_value')">get_setting_value</a>('userinfo');
<a name="l38"><span class="linenum">  38</span></a>  
<a name="l39"><span class="linenum">  39</span></a>          <a class="var it284" onMouseOver="hilite(284)" onMouseOut="lolite()" onClick="logVariable('assignment')" href="../../../../_variables/assignment.html">$assignment</a> = <span class="keyword">new </span><a class="class" onClick="logClass('restore_path_element')" href="../../../../_classes/restore_path_element.html" onMouseOver="classPopup(event,'restore_path_element')">restore_path_element</a>('assignment', '/activity/assignment');
<a name="l40"><span class="linenum">  40</span></a>          <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('paths')" href="../../../../_variables/paths.html">$paths</a>[] = <a class="var it284" onMouseOver="hilite(284)" onMouseOut="lolite()" onClick="logVariable('assignment')" href="../../../../_variables/assignment.html">$assignment</a>;
<a name="l41"><span class="linenum">  41</span></a>  
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment">        // Apply for 'assignment' subplugins optional paths at assignment level</span>
<a name="l43"><span class="linenum">  43</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_subplugin_structure')" href="../../../../_functions/add_subplugin_structure.html" onMouseOver="funcPopup(event,'add_subplugin_structure')">add_subplugin_structure</a>('assignment', <a class="var it284" onMouseOver="hilite(284)" onMouseOut="lolite()" onClick="logVariable('assignment')" href="../../../../_variables/assignment.html">$assignment</a>);
<a name="l44"><span class="linenum">  44</span></a>  
<a name="l45"><span class="linenum">  45</span></a>          if (<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('userinfo')" href="../../../../_variables/userinfo.html">$userinfo</a>) {
<a name="l46"><span class="linenum">  46</span></a>              <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a> = <span class="keyword">new </span><a class="class" onClick="logClass('restore_path_element')" href="../../../../_classes/restore_path_element.html" onMouseOver="classPopup(event,'restore_path_element')">restore_path_element</a>('assignment_submission', '/activity/assignment/submissions/submission');
<a name="l47"><span class="linenum">  47</span></a>              <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('paths')" href="../../../../_variables/paths.html">$paths</a>[] = <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>;
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment">            // Apply for 'assignment' subplugins optional stuff at submission level</span>
<a name="l49"><span class="linenum">  49</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_subplugin_structure')" href="../../../../_functions/add_subplugin_structure.html" onMouseOver="funcPopup(event,'add_subplugin_structure')">add_subplugin_structure</a>('assignment', <a class="var it5006" onMouseOver="hilite(5006)" onMouseOut="lolite()" onClick="logVariable('submission')" href="../../../../_variables/submission.html">$submission</a>);
<a name="l50"><span class="linenum">  50</span></a>          }
<a name="l51"><span class="linenum">  51</span></a>  
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment">        // Return the paths wrapped into standard activity structure</span>
<a name="l53"><span class="linenum">  53</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('prepare_activity_structure')" href="../../../../_functions/prepare_activity_structure.html" onMouseOver="funcPopup(event,'prepare_activity_structure')">prepare_activity_structure</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('paths')" href="../../../../_variables/paths.html">$paths</a>);
<a name="l54"><span class="linenum">  54</span></a>      }
<a name="l55"><span class="linenum">  55</span></a>  
<a name="l56"><span class="linenum">  56</span></a>      protected function <a class="function" onClick="logFunction('process_assignment')" href="../../../../_functions/process_assignment.html" onMouseOver="funcPopup(event,'process_assignment')">process_assignment</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>) {
<a name="l57"><span class="linenum">  57</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>;
<a name="l58"><span class="linenum">  58</span></a>  
<a name="l59"><span class="linenum">  59</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a> = (object)<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>;
<a name="l60"><span class="linenum">  60</span></a>          <a class="var it6" onMouseOver="hilite(6)" onMouseOut="lolite()" onClick="logVariable('oldid')" href="../../../../_variables/oldid.html">$oldid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>;
<a name="l61"><span class="linenum">  61</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('course')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/course.html">course</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_courseid')" href="../../../../_functions/get_courseid.html" onMouseOver="funcPopup(event,'get_courseid')">get_courseid</a>();
<a name="l62"><span class="linenum">  62</span></a>  
<a name="l63"><span class="linenum">  63</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timedue')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/timedue.html">timedue</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('apply_date_offset')" href="../../../../_functions/apply_date_offset.html" onMouseOver="funcPopup(event,'apply_date_offset')">apply_date_offset</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timedue')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/timedue.html">timedue</a>);
<a name="l64"><span class="linenum">  64</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timeavailable')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/timeavailable.html">timeavailable</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('apply_date_offset')" href="../../../../_functions/apply_date_offset.html" onMouseOver="funcPopup(event,'apply_date_offset')">apply_date_offset</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timeavailable')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/timeavailable.html">timeavailable</a>);
<a name="l65"><span class="linenum">  65</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/timemodified.html">timemodified</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('apply_date_offset')" href="../../../../_functions/apply_date_offset.html" onMouseOver="funcPopup(event,'apply_date_offset')">apply_date_offset</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/timemodified.html">timemodified</a>);
<a name="l66"><span class="linenum">  66</span></a>  
<a name="l67"><span class="linenum">  67</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('grade')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/grade.html">grade</a> &lt; 0) { // scale found, get mapping
<a name="l68"><span class="linenum">  68</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('grade')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/grade.html">grade</a> = -(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_mappingid')" href="../../../../_functions/get_mappingid.html" onMouseOver="funcPopup(event,'get_mappingid')">get_mappingid</a>('scale', <a class="phpfunction" onClick="logFunction('abs')" href="../../../../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('grade')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/grade.html">grade</a>)));
<a name="l69"><span class="linenum">  69</span></a>          }
<a name="l70"><span class="linenum">  70</span></a>  
<a name="l71"><span class="linenum">  71</span></a>  <span class="comment">        // insert the assignment record</span>
<a name="l72"><span class="linenum">  72</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('newitemid')" href="../../../../_variables/newitemid.html">$newitemid</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('assignment', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>);
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment">        // immediately after inserting &quot;activity&quot; record, call this</span>
<a name="l74"><span class="linenum">  74</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('apply_activity_instance')" href="../../../../_functions/apply_activity_instance.html" onMouseOver="funcPopup(event,'apply_activity_instance')">apply_activity_instance</a>(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('newitemid')" href="../../../../_variables/newitemid.html">$newitemid</a>);
<a name="l75"><span class="linenum">  75</span></a>  
<a name="l76"><span class="linenum">  76</span></a>  <span class="comment">        // Hide unsupported sub-plugins</span>
<a name="l77"><span class="linenum">  77</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_valid_assignment_subplugin')" href="../../../../_functions/is_valid_assignment_subplugin.html" onMouseOver="funcPopup(event,'is_valid_assignment_subplugin')">is_valid_assignment_subplugin</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('assignmenttype')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/assignmenttype.html">assignmenttype</a>)) {
<a name="l78"><span class="linenum">  78</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course_modules', 'visible', 0, array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_task')" href="../../../../_functions/get_task.html" onMouseOver="funcPopup(event,'get_task')">get_task</a>()-&gt;<a class="function" onClick="logFunction('get_moduleid')" href="../../../../_functions/get_moduleid.html" onMouseOver="funcPopup(event,'get_moduleid')">get_moduleid</a>()));
<a name="l79"><span class="linenum">  79</span></a>          }
<a name="l80"><span class="linenum">  80</span></a>      }
<a name="l81"><span class="linenum">  81</span></a>  
<a name="l82"><span class="linenum">  82</span></a>      protected function <a class="function" onClick="logFunction('process_assignment_submission')" href="../../../../_functions/process_assignment_submission.html" onMouseOver="funcPopup(event,'process_assignment_submission')">process_assignment_submission</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>) {
<a name="l83"><span class="linenum">  83</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>;
<a name="l84"><span class="linenum">  84</span></a>  
<a name="l85"><span class="linenum">  85</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a> = (object)<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>;
<a name="l86"><span class="linenum">  86</span></a>          <a class="var it6" onMouseOver="hilite(6)" onMouseOut="lolite()" onClick="logVariable('oldid')" href="../../../../_variables/oldid.html">$oldid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>;
<a name="l87"><span class="linenum">  87</span></a>  
<a name="l88"><span class="linenum">  88</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('assignment')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/assignment.html">assignment</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_new_parentid')" href="../../../../_functions/get_new_parentid.html" onMouseOver="funcPopup(event,'get_new_parentid')">get_new_parentid</a>('assignment');
<a name="l89"><span class="linenum">  89</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timecreated')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/timecreated.html">timecreated</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('apply_date_offset')" href="../../../../_functions/apply_date_offset.html" onMouseOver="funcPopup(event,'apply_date_offset')">apply_date_offset</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timecreated')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/timecreated.html">timecreated</a>);
<a name="l90"><span class="linenum">  90</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/timemodified.html">timemodified</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('apply_date_offset')" href="../../../../_functions/apply_date_offset.html" onMouseOver="funcPopup(event,'apply_date_offset')">apply_date_offset</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/timemodified.html">timemodified</a>);
<a name="l91"><span class="linenum">  91</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timemarked')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/timemarked.html">timemarked</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('apply_date_offset')" href="../../../../_functions/apply_date_offset.html" onMouseOver="funcPopup(event,'apply_date_offset')">apply_date_offset</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timemarked')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/timemarked.html">timemarked</a>);
<a name="l92"><span class="linenum">  92</span></a>  
<a name="l93"><span class="linenum">  93</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('userid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/userid.html">userid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_mappingid')" href="../../../../_functions/get_mappingid.html" onMouseOver="funcPopup(event,'get_mappingid')">get_mappingid</a>('user', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('userid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/userid.html">userid</a>);
<a name="l94"><span class="linenum">  94</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('teacher')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/teacher.html">teacher</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_mappingid')" href="../../../../_functions/get_mappingid.html" onMouseOver="funcPopup(event,'get_mappingid')">get_mappingid</a>('user', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('teacher')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/teacher.html">teacher</a>);
<a name="l95"><span class="linenum">  95</span></a>  
<a name="l96"><span class="linenum">  96</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('newitemid')" href="../../../../_variables/newitemid.html">$newitemid</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('assignment_submissions', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>);
<a name="l97"><span class="linenum">  97</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_mapping')" href="../../../../_functions/set_mapping.html" onMouseOver="funcPopup(event,'set_mapping')">set_mapping</a>('assignment_submission', <a class="var it6" onMouseOver="hilite(6)" onMouseOut="lolite()" onClick="logVariable('oldid')" href="../../../../_variables/oldid.html">$oldid</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('newitemid')" href="../../../../_variables/newitemid.html">$newitemid</a>, true); <span class="comment">// Going to have files</span>
<a name="l98"><span class="linenum">  98</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_mapping')" href="../../../../_functions/set_mapping.html" onMouseOver="funcPopup(event,'set_mapping')">set_mapping</a>(restore_gradingform_plugin::<a class="function" onClick="logFunction('itemid_mapping')" href="../../../../_functions/itemid_mapping.html" onMouseOver="funcPopup(event,'itemid_mapping')">itemid_mapping</a>('submission'), <a class="var it6" onMouseOver="hilite(6)" onMouseOut="lolite()" onClick="logVariable('oldid')" href="../../../../_variables/oldid.html">$oldid</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('newitemid')" href="../../../../_variables/newitemid.html">$newitemid</a>);
<a name="l99"><span class="linenum">  99</span></a>      }
<a name="l100"><span class="linenum"> 100</span></a>  
<a name="l101"><span class="linenum"> 101</span></a>      <span class="comment">/**</span>
<a name="l102"><span class="linenum"> 102</span></a>  <span class="comment">     * This function will attempt to upgrade the newly restored assignment to an instance of mod_assign if</span>
<a name="l103"><span class="linenum"> 103</span></a>  <span class="comment">     * mod_assignment is currently disabled and mod_assign is enabled and mod_assign says it can upgrade this assignment.</span>
<a name="l104"><span class="linenum"> 104</span></a>  <span class="comment">     *</span>
<a name="l105"><span class="linenum"> 105</span></a>  <span class="comment">     * @return none</span>
<a name="l106"><span class="linenum"> 106</span></a>  <span class="comment">     */</span>
<a name="l107"><span class="linenum"> 107</span></a>      private function <a class="function" onClick="logFunction('upgrade_mod_assign')" href="../../../../_functions/upgrade_mod_assign.html" onMouseOver="funcPopup(event,'upgrade_mod_assign')">upgrade_mod_assign</a>() {
<a name="l108"><span class="linenum"> 108</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>;
<a name="l109"><span class="linenum"> 109</span></a>  
<a name="l110"><span class="linenum"> 110</span></a>  <span class="comment">        // The current module must exist.</span>
<a name="l111"><span class="linenum"> 111</span></a>          <a class="var it5911" onMouseOver="hilite(5911)" onMouseOut="lolite()" onClick="logVariable('pluginmanager')" href="../../../../_variables/pluginmanager.html">$pluginmanager</a> = <a class="class" onClick="logClass('core_plugin_manager')" href="../../../../_classes/core_plugin_manager.html" onMouseOver="classPopup(event,'core_plugin_manager')">core_plugin_manager</a>::<a class="function" onClick="logFunction('instance')" href="../../../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l112"><span class="linenum"> 112</span></a>  
<a name="l113"><span class="linenum"> 113</span></a>          <a class="var it1345" onMouseOver="hilite(1345)" onMouseOut="lolite()" onClick="logVariable('plugininfo')" href="../../../../_variables/plugininfo.html">$plugininfo</a> = <a class="var it5911" onMouseOver="hilite(5911)" onMouseOut="lolite()" onClick="logVariable('pluginmanager')" href="../../../../_variables/pluginmanager.html">$pluginmanager</a>-&gt;<a class="function" onClick="logFunction('get_plugin_info')" href="../../../../_functions/get_plugin_info.html" onMouseOver="funcPopup(event,'get_plugin_info')">get_plugin_info</a>('mod_assign');
<a name="l114"><span class="linenum"> 114</span></a>  
<a name="l115"><span class="linenum"> 115</span></a>  <span class="comment">        // Check that the assignment module is installed.</span>
<a name="l116"><span class="linenum"> 116</span></a>          if (<a class="var it1345" onMouseOver="hilite(1345)" onMouseOut="lolite()" onClick="logVariable('plugininfo')" href="../../../../_variables/plugininfo.html">$plugininfo</a> &amp;&amp; <a class="var it1345" onMouseOver="hilite(1345)" onMouseOut="lolite()" onClick="logVariable('plugininfo')" href="../../../../_variables/plugininfo.html">$plugininfo</a>-&gt;<a class="function" onClick="logFunction('is_installed_and_upgraded')" href="../../../../_functions/is_installed_and_upgraded.html" onMouseOver="funcPopup(event,'is_installed_and_upgraded')">is_installed_and_upgraded</a>()) {
<a name="l117"><span class="linenum"> 117</span></a>  <span class="comment">            // Include the required mod assign upgrade code.</span>
<a name="l118"><span class="linenum"> 118</span></a>              require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../../../mod/assign/upgradelib.php.html">/mod/assign/upgradelib.php</a>');
<a name="l119"><span class="linenum"> 119</span></a>              require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../../../mod/assign/locallib.php.html">/mod/assign/locallib.php</a>');
<a name="l120"><span class="linenum"> 120</span></a>  
<a name="l121"><span class="linenum"> 121</span></a>  <span class="comment">            // Get the id and type of this assignment.</span>
<a name="l122"><span class="linenum"> 122</span></a>              <a class="var it5393" onMouseOver="hilite(5393)" onMouseOut="lolite()" onClick="logVariable('newinstance')" href="../../../../_variables/newinstance.html">$newinstance</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('task')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/task.html">task</a>-&gt;<a class="function" onClick="logFunction('get_activityid')" href="../../../../_functions/get_activityid.html" onMouseOver="funcPopup(event,'get_activityid')">get_activityid</a>();
<a name="l123"><span class="linenum"> 123</span></a>  
<a name="l124"><span class="linenum"> 124</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('assignment', array('id'=&gt;<a class="var it5393" onMouseOver="hilite(5393)" onMouseOut="lolite()" onClick="logVariable('newinstance')" href="../../../../_variables/newinstance.html">$newinstance</a>), 'assignmenttype', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l125"><span class="linenum"> 125</span></a>              <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../../_variables/type.html">$type</a> = <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('assignmenttype')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/assignmenttype.html">assignmenttype</a>;
<a name="l126"><span class="linenum"> 126</span></a>  
<a name="l127"><span class="linenum"> 127</span></a>              <a class="var it31361" onMouseOver="hilite(31361)" onMouseOut="lolite()" onClick="logVariable('subplugininfo')" href="../../../../_variables/subplugininfo.html">$subplugininfo</a> = <a class="var it5911" onMouseOver="hilite(5911)" onMouseOut="lolite()" onClick="logVariable('pluginmanager')" href="../../../../_variables/pluginmanager.html">$pluginmanager</a>-&gt;<a class="function" onClick="logFunction('get_plugin_info')" href="../../../../_functions/get_plugin_info.html" onMouseOver="funcPopup(event,'get_plugin_info')">get_plugin_info</a>('assignment_' . <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../../_variables/type.html">$type</a>);
<a name="l128"><span class="linenum"> 128</span></a>  
<a name="l129"><span class="linenum"> 129</span></a>  <span class="comment">            // See if it is possible to upgrade.</span>
<a name="l130"><span class="linenum"> 130</span></a>              if (<a class="class" onClick="logClass('assign')" href="../../../../_classes/assign.html" onMouseOver="classPopup(event,'assign')">assign</a>::<a class="function" onClick="logFunction('can_upgrade_assignment')" href="../../../../_functions/can_upgrade_assignment.html" onMouseOver="funcPopup(event,'can_upgrade_assignment')">can_upgrade_assignment</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../../_variables/type.html">$type</a>, <a class="var it31361" onMouseOver="hilite(31361)" onMouseOut="lolite()" onClick="logVariable('subplugininfo')" href="../../../../_variables/subplugininfo.html">$subplugininfo</a>-&gt;<a onClick="logVariable('versiondb')" class="var it45786" onMouseOver="hilite(45786)" onMouseOut="lolite()" href="../../../../_variables/versiondb.html">versiondb</a>)) {
<a name="l131"><span class="linenum"> 131</span></a>                  <a class="var it27071" onMouseOver="hilite(27071)" onMouseOut="lolite()" onClick="logVariable('assignment_upgrader')" href="../../../../_variables/assignment_upgrader.html">$assignment_upgrader</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign_upgrade_manager')" href="../../../../_classes/assign_upgrade_manager.html" onMouseOver="classPopup(event,'assign_upgrade_manager')">assign_upgrade_manager</a>();
<a name="l132"><span class="linenum"> 132</span></a>                  <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../../../../_variables/log.html">$log</a> = '';
<a name="l133"><span class="linenum"> 133</span></a>                  <a class="var it432" onMouseOver="hilite(432)" onMouseOut="lolite()" onClick="logVariable('success')" href="../../../../_variables/success.html">$success</a> = <a class="var it27071" onMouseOver="hilite(27071)" onMouseOut="lolite()" onClick="logVariable('assignment_upgrader')" href="../../../../_variables/assignment_upgrader.html">$assignment_upgrader</a>-&gt;<a class="function" onClick="logFunction('upgrade_assignment')" href="../../../../_functions/upgrade_assignment.html" onMouseOver="funcPopup(event,'upgrade_assignment')">upgrade_assignment</a>(<a class="var it5393" onMouseOver="hilite(5393)" onMouseOut="lolite()" onClick="logVariable('newinstance')" href="../../../../_variables/newinstance.html">$newinstance</a>, <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../../../../_variables/log.html">$log</a>);
<a name="l134"><span class="linenum"> 134</span></a>                  if (!<a class="var it432" onMouseOver="hilite(432)" onMouseOut="lolite()" onClick="logVariable('success')" href="../../../../_variables/success.html">$success</a>) {
<a name="l135"><span class="linenum"> 135</span></a>                      throw <span class="keyword">new </span><a class="class" onClick="logClass('restore_step_exception')" href="../../../../_classes/restore_step_exception.html" onMouseOver="classPopup(event,'restore_step_exception')">restore_step_exception</a>('mod_assign_upgrade_failed', <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../../../../_variables/log.html">$log</a>);
<a name="l136"><span class="linenum"> 136</span></a>                  }
<a name="l137"><span class="linenum"> 137</span></a>              }
<a name="l138"><span class="linenum"> 138</span></a>          }
<a name="l139"><span class="linenum"> 139</span></a>      }
<a name="l140"><span class="linenum"> 140</span></a>  
<a name="l141"><span class="linenum"> 141</span></a>      protected function <a class="function" onClick="logFunction('after_execute')" href="../../../../_functions/after_execute.html" onMouseOver="funcPopup(event,'after_execute')">after_execute</a>() {
<a name="l142"><span class="linenum"> 142</span></a>  <span class="comment">        // Add assignment related files, no need to match by itemname (just internally handled context)</span>
<a name="l143"><span class="linenum"> 143</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_related_files')" href="../../../../_functions/add_related_files.html" onMouseOver="funcPopup(event,'add_related_files')">add_related_files</a>('mod_assignment', 'intro', null);
<a name="l144"><span class="linenum"> 144</span></a>  <span class="comment">        // Add assignment submission files, matching by assignment_submission itemname</span>
<a name="l145"><span class="linenum"> 145</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_related_files')" href="../../../../_functions/add_related_files.html" onMouseOver="funcPopup(event,'add_related_files')">add_related_files</a>('mod_assignment', 'submission', 'assignment_submission');
<a name="l146"><span class="linenum"> 146</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_related_files')" href="../../../../_functions/add_related_files.html" onMouseOver="funcPopup(event,'add_related_files')">add_related_files</a>('mod_assignment', 'response', 'assignment_submission');
<a name="l147"><span class="linenum"> 147</span></a>      }
<a name="l148"><span class="linenum"> 148</span></a>  
<a name="l149"><span class="linenum"> 149</span></a>      <span class="comment">/**</span>
<a name="l150"><span class="linenum"> 150</span></a>  <span class="comment">     * Hook to execute assignment upgrade after restore.</span>
<a name="l151"><span class="linenum"> 151</span></a>  <span class="comment">     */</span>
<a name="l152"><span class="linenum"> 152</span></a>      protected function <a class="function" onClick="logFunction('after_restore')" href="../../../../_functions/after_restore.html" onMouseOver="funcPopup(event,'after_restore')">after_restore</a>() {
<a name="l153"><span class="linenum"> 153</span></a>  
<a name="l154"><span class="linenum"> 154</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_task')" href="../../../../_functions/get_task.html" onMouseOver="funcPopup(event,'get_task')">get_task</a>()-&gt;<a class="function" onClick="logFunction('get_mode')" href="../../../../_functions/get_mode.html" onMouseOver="funcPopup(event,'get_mode')">get_mode</a>() != backup::MODE_IMPORT) {
<a name="l155"><span class="linenum"> 155</span></a>  <span class="comment">            // Moodle 2.2 assignment upgrade</span>
<a name="l156"><span class="linenum"> 156</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('upgrade_mod_assign')" href="../../../../_functions/upgrade_mod_assign.html" onMouseOver="funcPopup(event,'upgrade_mod_assign')">upgrade_mod_assign</a>();
<a name="l157"><span class="linenum"> 157</span></a>          }
<a name="l158"><span class="linenum"> 158</span></a>      }
<a name="l159"><span class="linenum"> 159</span></a>  
<a name="l160"><span class="linenum"> 160</span></a>      <span class="comment">/**</span>
<a name="l161"><span class="linenum"> 161</span></a>  <span class="comment">     * Determine if a sub-plugin is supported or not</span>
<a name="l162"><span class="linenum"> 162</span></a>  <span class="comment">     *</span>
<a name="l163"><span class="linenum"> 163</span></a>  <span class="comment">     * @param string $type</span>
<a name="l164"><span class="linenum"> 164</span></a>  <span class="comment">     * @return bool</span>
<a name="l165"><span class="linenum"> 165</span></a>  <span class="comment">     */</span>
<a name="l166"><span class="linenum"> 166</span></a>      protected function <a class="function" onClick="logFunction('is_valid_assignment_subplugin')" href="../../../../_functions/is_valid_assignment_subplugin.html" onMouseOver="funcPopup(event,'is_valid_assignment_subplugin')">is_valid_assignment_subplugin</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../../_variables/type.html">$type</a>) {
<a name="l167"><span class="linenum"> 167</span></a>          static <a class="var it2231" onMouseOver="hilite(2231)" onMouseOut="lolite()" onClick="logVariable('subplugins')" href="../../../../_variables/subplugins.html">$subplugins</a> = null;
<a name="l168"><span class="linenum"> 168</span></a>  
<a name="l169"><span class="linenum"> 169</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it2231" onMouseOver="hilite(2231)" onMouseOut="lolite()" onClick="logVariable('subplugins')" href="../../../../_variables/subplugins.html">$subplugins</a>)) {
<a name="l170"><span class="linenum"> 170</span></a>              <a class="var it2231" onMouseOver="hilite(2231)" onMouseOut="lolite()" onClick="logVariable('subplugins')" href="../../../../_variables/subplugins.html">$subplugins</a> = <a class="function" onClick="logFunction('get_plugin_list')" href="../../../../_functions/get_plugin_list.html" onMouseOver="funcPopup(event,'get_plugin_list')">get_plugin_list</a>('assignment');
<a name="l171"><span class="linenum"> 171</span></a>          }
<a name="l172"><span class="linenum"> 172</span></a>          return <a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../../_variables/type.html">$type</a>, <a class="var it2231" onMouseOver="hilite(2231)" onMouseOut="lolite()" onClick="logVariable('subplugins')" href="../../../../_variables/subplugins.html">$subplugins</a>);
<a name="l173"><span class="linenum"> 173</span></a>      }
<a name="l174"><span class="linenum"> 174</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'set_mapping': ['set_mapping', 'To send ids pairs to backup_ids_table and to store them into paths ', [['backup/moodle2','restore_plugin.class.php',169],['backup/moodle2','restore_subplugin.class.php',101],['backup/util/plan','restore_structure_step.class.php',158]], 131],
'get_plugin_list': ['get_plugin_list', 'Use when listing real plugins of one type. ', [['lib','deprecatedlib.php',150],['lib/classes','component.php',796],['admin/tool/monitor/classes','eventlist.php',176]], 191],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'upgrade_mod_assign': ['upgrade_mod_assign', 'This function will attempt to upgrade the newly restored assignment to an instance of mod_assign if mod_assignment is currently disabled and mod_assign is enabled and mod_assign says it can upgrade this assignment. ', [['mod/assignment/backup/moodle2','restore_assignment_stepslib.php',101]], 1],
'process_assignment_submission': ['process_assignment_submission', '', [['mod/assignment/backup/moodle2','restore_assignment_stepslib.php',82],['mod/assignment/backup/moodle1','lib.php',125]], 0],
'itemid_mapping': ['itemid_mapping', 'Helper method returning the mapping identifierto use for grading form instance\'s itemid field ', [['backup/moodle2','restore_gradingform_plugin.class.php',39]], 3],
'is_valid_assignment_subplugin': ['is_valid_assignment_subplugin', 'Determine if a sub-plugin is supported or not ', [['mod/assignment/backup/moodle2','restore_assignment_stepslib.php',160]], 1],
'process_assignment': ['process_assignment', 'Assign roles ', [['backup/moodle2','restore_stepslib.php',2009],['mod/assignment/backup/moodle2','restore_assignment_stepslib.php',56],['mod/assignment/backup/moodle1','lib.php',75]], 0],
'instance': ['instance', 'Returns an instance of the cache_factor method. ', [['cache','disabledlib.php',171],['cache','disabledlib.php',296],['lib/classes','useragent.php',101],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['search/classes','manager.php',109],['cache','locallib.php',52],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['lib/classes','plugin_manager.php',103],['lib/htmlpurifier','HTMLPurifier.php',251],['course/format','lib.php',156],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['admin/tool/installaddon/classes','installer.php',40],['lib','modinfolib.php',373],['cache/classes','helper.php',76],['lib/tests','string_manager_standard_test.php',124],['lib/portfolio','exporter.php',251],['lib/classes/update','validator.php',88],['search/classes','document_factory.php',49],['lib','accesslib.php',6235],['lib','accesslib.php',6487],['lib','accesslib.php',6665],['lib','accesslib.php',6919],['lib','accesslib.php',7180],['lib','accesslib.php',7392],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443],['lib','filterlib.php',80],['search/tests/fixtures','testable_core_search.php',43],['lib/tests/fixtures','testable_update_checker.php',45],['backup/cc','validator.php',35],['cache/classes','config.php',87],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29]], 4647],
'is_installed_and_upgraded': ['is_installed_and_upgraded', 'Is this plugin already installed and updated? ', [['lib/classes/plugininfo','base.php',150]], 28],
'get_setting_value': ['get_setting_value', 'Returns the value of one (task/plan) setting ', [['backup/moodle2','backup_plugin.class.php',68],['backup/moodle2','restore_plugin.class.php',230],['backup/util/ui','base_ui.class.php',330],['backup/moodle2','restore_subplugin.class.php',169],['backup/moodle2','backup_subplugin.class.php',68],['backup/util/plan','base_step.class.php',98],['backup/util/plan','base_task.class.php',105]], 142],
'after_restore': ['after_restore', 'This function, executed after all the tasks in the plan have been executed, will perform the recode of the target quiz for the block. This must be done here and not in normal execution steps because the quiz can be restored after the block. ', [['blocks/quiz_results/backup/moodle2','restore_quiz_results_block_task.class.php',50],['backup/moodle2','restore_stepslib.php',3688],['backup/moodle2','restore_stepslib.php',4141],['mod/forum/backup/moodle2','restore_forum_stepslib.php',217],['blocks/activity_results/backup/moodle2','restore_activity_results_block_task.class.php',62],['backup/util/plan','restore_structure_step.class.php',464],['blocks/tags/backup/moodle2','restore_tags_block_task.class.php',47],['blocks/glossary_random/backup/moodle2','restore_glossary_random_block_task.class.php',46],['mod/assignment/backup/moodle2','restore_assignment_stepslib.php',149]], 2],
'apply_activity_instance': ['apply_activity_instance', 'This must be invoked immediately after creating the "module" activity record (forum, choice...) and will adjust the new activity id (the instance) in various places ', [['backup/moodle2','restore_stepslib.php',4259]], 22],
'get_new_parentid': ['get_new_parentid', 'Returns the latest (parent) new id mapped by one pathelement ', [['backup/moodle2','restore_plugin.class.php',189],['backup/moodle2','restore_subplugin.class.php',121],['backup/util/plan','restore_structure_step.class.php',196]], 148],
'after_execute': ['after_execute', '', [['mod/survey/backup/moodle2','restore_survey_stepslib.php',91],['mod/page/backup/moodle2','restore_page_stepslib.php',56],['mod/workshop/backup/moodle2','restore_workshop_stepslib.php',210],['mod/chat/backup/moodle2','restore_chat_stepslib.php',78],['backup/moodle2','restore_stepslib.php',372],['backup/moodle2','restore_stepslib.php',1272],['backup/moodle2','restore_stepslib.php',1418],['backup/moodle2','restore_stepslib.php',1487],['backup/moodle2','restore_stepslib.php',1742],['backup/moodle2','restore_stepslib.php',1929],['backup/moodle2','restore_stepslib.php',2605],['backup/moodle2','restore_stepslib.php',2701],['backup/moodle2','restore_stepslib.php',3540],['backup/moodle2','restore_stepslib.php',4474],['backup/moodle2','restore_stepslib.php',5232],['mod/scorm/backup/moodle2','restore_scorm_stepslib.php',190],['mod/url/backup/moodle2','restore_url_stepslib.php',56],['mod/imscp/backup/moodle2','restore_imscp_stepslib.php',57],['mod/forum/backup/moodle2','restore_forum_stepslib.php',208],['mod/wiki/backup/moodle2','restore_wiki_stepslib.php',174],['mod/folder/backup/moodle2','restore_folder_stepslib.php',62],['backup/util/plan','restore_structure_step.class.php',453],['mod/resource/backup/moodle2','restore_resource_stepslib.php',57],['mod/lti/backup/moodle2','restore_lti_stepslib.php',93],['mod/data/backup/moodle2','restore_data_stepslib.php',154],['mod/assignment/backup/moodle2','restore_assignment_stepslib.php',141],['mod/quiz/backup/moodle2','restore_quiz_stepslib.php',417],['mod/label/backup/moodle2','restore_label_stepslib.php',56],['mod/glossary/backup/moodle2','restore_glossary_stepslib.php',159],['mod/assign/backup/moodle2','restore_assign_stepslib.php',337],['mod/book/backup/moodle2','restore_book_stepslib.php',75],['mod/lesson/backup/moodle2','restore_lesson_stepslib.php',240],['mod/feedback/backup/moodle2','restore_feedback_stepslib.php',119],['mod/choice/backup/moodle2','restore_choice_stepslib.php',94]], 3],
'get_mode': ['get_mode', 'Current feedback mode, see constants on the top of this class ', [['mod/feedback/classes','complete_form.php',226],['backup/util/plan','backup_plan.class.php',74],['mod/assignment/backup/moodle2','restore_assignment_activity_task.class.php',113],['cache/classes','definition.php',634],['backup/util/plan','restore_plan.class.php',85],['backup/controller','backup_controller.class.php',279],['backup/controller','restore_controller.class.php',281]], 36],
'prepare_activity_structure': ['prepare_activity_structure', 'Adds support for the \'activity\' path that is common to all the activities and will be processed globally here ', [['backup/moodle2','restore_stepslib.php',4238],['backup/moodle2','backup_stepslib.php',98]], 45],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'get_task': ['get_task', 'As far as backup structure steps are implementing backup_plugin stuff, they need to have the parent task available for wrapping purposes (get course/context....) ', [['backup/util/plan','backup_structure_step.class.php',118],['backup/util/plan','restore_structure_step.class.php',248]], 31],
'get_mappingid': ['get_mappingid', 'Return the new id of a mapping for the given itemname ', [['backup/moodle2','restore_plugin.class.php',196],['backup/moodle2','restore_subplugin.class.php',128],['backup/util/plan','restore_structure_step.class.php',203]], 224],
'get_activityid': ['get_activityid', '', [['backup/moodle2','restore_activity_task.class.php',107],['backup/moodle2','backup_activity_task.class.php',96]], 13],
'get_courseid': ['get_courseid', 'Id of the current course (for site feedbacks only) ', [['mod/feedback/classes','structure.php',80],['course/format','lib.php',222],['mod/quiz','attemptlib.php',175],['mod/quiz','attemptlib.php',717],['backup/util/plan','backup_plan.class.php',78],['comment','lib.php',1002],['mod/quiz/classes','structure.php',228],['question/classes/bank','view.php',217],['backup/util/plan','restore_plan.class.php',81],['backup/controller','backup_controller.class.php',267],['backup/util/plan','base_step.class.php',105],['backup/controller','restore_controller.class.php',269],['backup/util/plan','base_task.class.php',109]], 244],
'get_moduleid': ['get_moduleid', '', [['backup/moodle2','backup_block_task.class.php',88],['backup/moodle2','restore_activity_task.class.php',99],['backup/moodle2','backup_activity_task.class.php',75]], 16],
'upgrade_assignment': ['upgrade_assignment', 'This function converts all of the base settings for an instance of the old assignment to the new format. Then it calls each of the plugins to see if they can help upgrade this assignment. ', [['mod/assign','upgradelib.php',47]], 6],
'get_plugin_info': ['get_plugin_info', 'Returns information about the known plugin, or null ', [['lib/classes','plugin_manager.php',651],['lib/classes/update','api.php',77]], 43],
'add_subplugin_structure': ['add_subplugin_structure', 'Add subplugin structure for a given plugin to any element in the structure backup tree. ', [['backup/util/plan','backup_structure_step.class.php',165],['backup/util/plan/tests/fixtures','plan_fixtures.php',136],['backup/util/plan/tests/fixtures','plan_fixtures.php',153],['backup/util/plan','restore_structure_step.class.php',297]], 46],
'define_structure': ['define_structure', '', [['mod/survey/backup/moodle2','restore_survey_stepslib.php',34],['mod/page/backup/moodle2','restore_page_stepslib.php',34],['mod/feedback/backup/moodle2','backup_feedback_stepslib.php',33],['mod/lti/backup/moodle2','backup_lti_stepslib.php',56],['mod/book/backup/moodle2','backup_book_stepslib.php',32],['mod/workshop/backup/moodle2','restore_workshop_stepslib.php',33],['mod/label/backup/moodle2','backup_label_stepslib.php',33],['mod/resource/backup/moodle2','backup_resource_stepslib.php',33],['mod/chat/backup/moodle2','restore_chat_stepslib.php',33],['mod/assignment/backup/moodle2','backup_assignment_stepslib.php',34],['backup/moodle2','restore_stepslib.php',143],['backup/moodle2','restore_stepslib.php',725],['backup/moodle2','restore_stepslib.php',1034],['backup/moodle2','restore_stepslib.php',1157],['backup/moodle2','restore_stepslib.php',1292],['backup/moodle2','restore_stepslib.php',1369],['backup/moodle2','restore_stepslib.php',1431],['backup/moodle2','restore_stepslib.php',1545],['backup/moodle2','restore_stepslib.php',1771],['backup/moodle2','restore_stepslib.php',1996],['backup/moodle2','restore_stepslib.php',2151],['backup/moodle2','restore_stepslib.php',2335],['backup/moodle2','restore_stepslib.php',2390],['backup/moodle2','restore_stepslib.php',2473],['backup/moodle2','restore_stepslib.php',2616],['backup/moodle2','restore_stepslib.php',2765],['backup/moodle2','restore_stepslib.php',3020],['backup/moodle2','restore_stepslib.php',3150],['backup/moodle2','restore_stepslib.php',3194],['backup/moodle2','restore_stepslib.php',3341],['backup/moodle2','restore_stepslib.php',3435],['backup/moodle2','restore_stepslib.php',3567],['backup/moodle2','restore_stepslib.php',3721],['backup/moodle2','restore_stepslib.php',3767],['backup/moodle2','restore_stepslib.php',3930],['backup/moodle2','restore_stepslib.php',4194],['backup/moodle2','restore_stepslib.php',4287],['mod/url/backup/moodle2','backup_url_stepslib.php',33],['mod/scorm/backup/moodle2','restore_scorm_stepslib.php',33],['mod/scorm/backup/moodle2','backup_scorm_stepslib.php',33],['mod/assign/backup/moodle2','backup_assign_stepslib.php',36],['mod/url/backup/moodle2','restore_url_stepslib.php',34],['mod/lesson/backup/moodle2','backup_lesson_stepslib.php',65],['mod/imscp/backup/moodle2','restore_imscp_stepslib.php',34],['mod/workshop/backup/moodle2','backup_workshop_stepslib.php',36],['mod/glossary/backup/moodle2','backup_glossary_stepslib.php',34],['mod/forum/backup/moodle2','restore_forum_stepslib.php',34],['backup/util/plan/tests/fixtures','plan_fixtures.php',120],['backup/util/plan/tests/fixtures','plan_fixtures.php',142],['mod/wiki/backup/moodle2','restore_wiki_stepslib.php',34],['mod/folder/backup/moodle2','restore_folder_stepslib.php',34],['blocks/rss_client/backup/moodle2','restore_rss_client_stepslib.php',33],['blocks/rss_client/backup/moodle2','backup_rss_client_stepslib.php',33],['mod/resource/backup/moodle2','restore_resource_stepslib.php',34],['mod/lti/backup/moodle2','restore_lti_stepslib.php',56],['mod/survey/backup/moodle2','backup_survey_stepslib.php',34],['mod/choice/backup/moodle2','backup_choice_stepslib.php',34],['mod/data/backup/moodle2','restore_data_stepslib.php',34],['mod/assignment/backup/moodle2','restore_assignment_stepslib.php',34],['backup/moodle2','backup_stepslib.php',260],['backup/moodle2','backup_stepslib.php',322],['backup/moodle2','backup_stepslib.php',370],['backup/moodle2','backup_stepslib.php',480],['backup/moodle2','backup_stepslib.php',537],['backup/moodle2','backup_stepslib.php',594],['backup/moodle2','backup_stepslib.php',628],['backup/moodle2','backup_stepslib.php',664],['backup/moodle2','backup_stepslib.php',701],['backup/moodle2','backup_stepslib.php',741],['backup/moodle2','backup_stepslib.php',782],['backup/moodle2','backup_stepslib.php',851],['backup/moodle2','backup_stepslib.php',907],['backup/moodle2','backup_stepslib.php',1049],['backup/moodle2','backup_stepslib.php',1107],['backup/moodle2','backup_stepslib.php',1139],['backup/moodle2','backup_stepslib.php',1229],['backup/moodle2','backup_stepslib.php',1391],['backup/moodle2','backup_stepslib.php',1450],['backup/moodle2','backup_stepslib.php',1484],['backup/moodle2','backup_stepslib.php',1520],['backup/moodle2','backup_stepslib.php',1547],['backup/moodle2','backup_stepslib.php',1614],['backup/moodle2','backup_stepslib.php',1657],['backup/moodle2','backup_stepslib.php',1720],['backup/moodle2','backup_stepslib.php',1758],['backup/moodle2','backup_stepslib.php',2178],['backup/moodle2','backup_stepslib.php',2315],['backup/moodle2','backup_stepslib.php',2393],['backup/moodle2','backup_stepslib.php',2485],['backup/moodle2','backup_stepslib.php',2545],['mod/imscp/backup/moodle2','backup_imscp_stepslib.php',35],['mod/folder/backup/moodle2','backup_folder_stepslib.php',33],['mod/chat/backup/moodle2','backup_chat_stepslib.php',28],['mod/quiz/backup/moodle2','restore_quiz_stepslib.php',49],['mod/label/backup/moodle2','restore_label_stepslib.php',34],['mod/forum/backup/moodle2','backup_forum_stepslib.php',34],['mod/quiz/backup/moodle2','backup_quiz_stepslib.php',36],['mod/glossary/backup/moodle2','restore_glossary_stepslib.php',34],['mod/assign/backup/moodle2','restore_assign_stepslib.php',42],['mod/book/backup/moodle2','restore_book_stepslib.php',32],['mod/lesson/backup/moodle2','restore_lesson_stepslib.php',37],['mod/feedback/backup/moodle2','restore_feedback_stepslib.php',33],['mod/choice/backup/moodle2','restore_choice_stepslib.php',34],['mod/wiki/backup/moodle2','backup_wiki_stepslib.php',34],['mod/page/backup/moodle2','backup_page_stepslib.php',36],['mod/data/backup/moodle2','backup_data_stepslib.php',34]], 4],
'set_field': ['set_field', 'Set a single field in every table record where all the given conditions met. ', [['lib/dml','moodle_database.php',1737],['availability/condition/profile/tests','condition_test.php',349]], 485],
'can_upgrade_assignment': ['can_upgrade_assignment', 'This function is a static wrapper around can_upgrade. ', [['mod/assign','locallib.php',7554]], 4],
'apply_date_offset': ['apply_date_offset', 'Apply course startdate offset based in original course startdate and course_offset_startdate setting Note we are using one static cache here, but *by restoreid*, so it\'s ok for concurrence/multiple executions in the same request ', [['backup/moodle2','restore_plugin.class.php',221],['backup/moodle2','restore_subplugin.class.php',153],['backup/util/plan','restore_step.class.php',49]], 148],
'add_related_files': ['add_related_files', 'Add all the existing file, given their component and filearea and one backup_ids itemname to match with ', [['backup/moodle2','restore_plugin.class.php',214],['backup/moodle2','restore_subplugin.class.php',146],['backup/util/plan','restore_structure_step.class.php',222]], 86],
'abs': ['abs', '', [], 560],
'is_null': ['is_null', '', [], 2003],
'array_key_exists': ['array_key_exists', '', [], 1445]};
CLASS_DATA={
'assign_upgrade_manager': ['assign_upgrade_manager', 'Class to manage upgrades from mod_assignment to mod_assign ', [['mod/assign','upgradelib.php',38]], 6],
'restore_step_exception': ['restore_step_exception', '', [['backup/util/plan','restore_step.class.php',102]], 43],
'restore_path_element': ['restore_path_element', 'Class representing one path to be restored from XML file ', [['backup/util/structure','restore_path_element.class.php',27]], 232],
'assign': ['assign', 'Standard base class for mod_assign (assignment types). ', [['mod/assign','locallib.php',82]], 76],
'core_plugin_manager': ['core_plugin_manager', 'Singleton class providing general plugins management functionality. ', [['lib/classes','plugin_manager.php',31]], 211],
'restore_assignment_activity_structure_step': ['restore_assignment_activity_structure_step', 'Structure step to restore one assignment activity ', [['mod/assignment/backup/moodle2','restore_assignment_stepslib.php',29]], 1]};
CONST_DATA={
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1384]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
