<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /tag/classes/tag.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='tag/classes';
filename='tag.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/tag/classes/</a> -> <a href="tag.php.html">tag.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="tag.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="tag.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Contains class core_tag_tag</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package   core_tag</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @copyright  2015 Marina Glancy</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> */</span>
<a name="l24"><span class="linenum">  24</span></a>  
<a name="l25"><span class="linenum">  25</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment">/**</span>
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment"> * Represents one tag and also contains lots of useful tag-related methods as static functions.</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> *</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> * Tags can be added to any database records.</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> * $itemtype refers to the DB table name</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * $itemid refers to id field in this DB table</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> * $component is the component that is responsible for the tag instance</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> * $context is the affected context</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment"> *</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment"> * BASIC INSTRUCTIONS :</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment"> *  - to &quot;tag a blog post&quot; (for example):</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment"> *        core_tag_tag::set_item_tags('post', 'core', $blogpost-&gt;id, $context, $arrayoftags);</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment"> *</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment"> *  - to &quot;remove all the tags on a blog post&quot;:</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment"> *        core_tag_tag::remove_all_item_tags('post', 'core', $blogpost-&gt;id);</span>
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment"> *</span>
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment"> * set_item_tags() will create tags that do not exist yet.</span>
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment"> *</span>
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment"> * @property-read int $id</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment"> * @property-read string $name</span>
<a name="l47"><span class="linenum">  47</span></a>  <span class="comment"> * @property-read string $rawname</span>
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment"> * @property-read int $tagcollid</span>
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment"> * @property-read int $userid</span>
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment"> * @property-read int $isstandard</span>
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment"> * @property-read string $description</span>
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment"> * @property-read int $descriptionformat</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment"> * @property-read int $flag 0 if not flagged or positive integer if flagged</span>
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment"> * @property-read int $timemodified</span>
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment"> *</span>
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment"> * @package   core_tag</span>
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment"> * @copyright  2015 Marina Glancy</span>
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment"> */</span>
<a name="l60"><span class="linenum">  60</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('core_tag_tag')" href="../../_classes/core_tag_tag.html" onMouseOver="classPopup(event,'core_tag_tag')">core_tag_tag</a> {
<a name="l61"><span class="linenum">  61</span></a>  
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment">    /** @var stdClass data about the tag */</span>
<a name="l63"><span class="linenum">  63</span></a>      protected <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a> = null;
<a name="l64"><span class="linenum">  64</span></a>  
<a name="l65"><span class="linenum">  65</span></a>  <span class="comment">    /** @var int indicates that both standard and not standard tags can be used (or should be returned) */</span>
<a name="l66"><span class="linenum">  66</span></a>      const BOTH_STANDARD_AND_NOT = 0;
<a name="l67"><span class="linenum">  67</span></a>  
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment">    /** @var int indicates that only standard tags can be used (or must be returned) */</span>
<a name="l69"><span class="linenum">  69</span></a>      const STANDARD_ONLY = 1;
<a name="l70"><span class="linenum">  70</span></a>  
<a name="l71"><span class="linenum">  71</span></a>  <span class="comment">    /** @var int indicates that only non-standard tags should be returned - this does not really have use cases, left for BC  */</span>
<a name="l72"><span class="linenum">  72</span></a>      const NOT_STANDARD_ONLY = -1;
<a name="l73"><span class="linenum">  73</span></a>  
<a name="l74"><span class="linenum">  74</span></a>  <span class="comment">    /** @var int option to hide standard tags when editing item tags */</span>
<a name="l75"><span class="linenum">  75</span></a>      const HIDE_STANDARD = 2;
<a name="l76"><span class="linenum">  76</span></a>  
<a name="l77"><span class="linenum">  77</span></a>      <span class="comment">/**</span>
<a name="l78"><span class="linenum">  78</span></a>  <span class="comment">     * Constructor. Use functions get(), get_by_name(), etc.</span>
<a name="l79"><span class="linenum">  79</span></a>  <span class="comment">     *</span>
<a name="l80"><span class="linenum">  80</span></a>  <span class="comment">     * @param stdClass $record</span>
<a name="l81"><span class="linenum">  81</span></a>  <span class="comment">     */</span>
<a name="l82"><span class="linenum">  82</span></a>      protected function <a class="function" onClick="logFunction('__construct')" href="../../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>) {
<a name="l83"><span class="linenum">  83</span></a>          if (empty(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l84"><span class="linenum">  84</span></a>              throw new coding_exeption(&quot;Record must contain at least field 'id'&quot;);
<a name="l85"><span class="linenum">  85</span></a>          }
<a name="l86"><span class="linenum">  86</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/record.html">record</a> = <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>;
<a name="l87"><span class="linenum">  87</span></a>      }
<a name="l88"><span class="linenum">  88</span></a>  
<a name="l89"><span class="linenum">  89</span></a>      <span class="comment">/**</span>
<a name="l90"><span class="linenum">  90</span></a>  <span class="comment">     * Magic getter</span>
<a name="l91"><span class="linenum">  91</span></a>  <span class="comment">     *</span>
<a name="l92"><span class="linenum">  92</span></a>  <span class="comment">     * @param string $name</span>
<a name="l93"><span class="linenum">  93</span></a>  <span class="comment">     * @return mixed</span>
<a name="l94"><span class="linenum">  94</span></a>  <span class="comment">     */</span>
<a name="l95"><span class="linenum">  95</span></a>      public function <a class="function" onClick="logFunction('__get')" href="../../_functions/__get.html" onMouseOver="funcPopup(event,'__get')">__get</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>) {
<a name="l96"><span class="linenum">  96</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/record.html">record</a>-&gt;<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>;
<a name="l97"><span class="linenum">  97</span></a>      }
<a name="l98"><span class="linenum">  98</span></a>  
<a name="l99"><span class="linenum">  99</span></a>      <span class="comment">/**</span>
<a name="l100"><span class="linenum"> 100</span></a>  <span class="comment">     * Magic isset method</span>
<a name="l101"><span class="linenum"> 101</span></a>  <span class="comment">     *</span>
<a name="l102"><span class="linenum"> 102</span></a>  <span class="comment">     * @param string $name</span>
<a name="l103"><span class="linenum"> 103</span></a>  <span class="comment">     * @return bool</span>
<a name="l104"><span class="linenum"> 104</span></a>  <span class="comment">     */</span>
<a name="l105"><span class="linenum"> 105</span></a>      public function <a class="function" onClick="logFunction('__isset')" href="../../_functions/__isset.html" onMouseOver="funcPopup(event,'__isset')">__isset</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>) {
<a name="l106"><span class="linenum"> 106</span></a>          return isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/record.html">record</a>-&gt;<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>);
<a name="l107"><span class="linenum"> 107</span></a>      }
<a name="l108"><span class="linenum"> 108</span></a>  
<a name="l109"><span class="linenum"> 109</span></a>      <span class="comment">/**</span>
<a name="l110"><span class="linenum"> 110</span></a>  <span class="comment">     * Converts to object</span>
<a name="l111"><span class="linenum"> 111</span></a>  <span class="comment">     *</span>
<a name="l112"><span class="linenum"> 112</span></a>  <span class="comment">     * @return stdClass</span>
<a name="l113"><span class="linenum"> 113</span></a>  <span class="comment">     */</span>
<a name="l114"><span class="linenum"> 114</span></a>      public function <a class="function" onClick="logFunction('to_object')" href="../../_functions/to_object.html" onMouseOver="funcPopup(event,'to_object')">to_object</a>() {
<a name="l115"><span class="linenum"> 115</span></a>          return <a class="function" onClick="logFunction('fullclone')" href="../../_functions/fullclone.html" onMouseOver="funcPopup(event,'fullclone')">fullclone</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/record.html">record</a>);
<a name="l116"><span class="linenum"> 116</span></a>      }
<a name="l117"><span class="linenum"> 117</span></a>  
<a name="l118"><span class="linenum"> 118</span></a>      <span class="comment">/**</span>
<a name="l119"><span class="linenum"> 119</span></a>  <span class="comment">     * Returns tag name ready to be displayed</span>
<a name="l120"><span class="linenum"> 120</span></a>  <span class="comment">     *</span>
<a name="l121"><span class="linenum"> 121</span></a>  <span class="comment">     * @param bool $ashtml (default true) if true will return htmlspecialchars encoded string</span>
<a name="l122"><span class="linenum"> 122</span></a>  <span class="comment">     * @return string</span>
<a name="l123"><span class="linenum"> 123</span></a>  <span class="comment">     */</span>
<a name="l124"><span class="linenum"> 124</span></a>      public function <a class="function" onClick="logFunction('get_display_name')" href="../../_functions/get_display_name.html" onMouseOver="funcPopup(event,'get_display_name')">get_display_name</a>(<a class="var it36892" onMouseOver="hilite(36892)" onMouseOut="lolite()" onClick="logVariable('ashtml')" href="../../_variables/ashtml.html">$ashtml</a> = true) {
<a name="l125"><span class="linenum"> 125</span></a>          return static::<a class="function" onClick="logFunction('make_display_name')" href="../../_functions/make_display_name.html" onMouseOver="funcPopup(event,'make_display_name')">make_display_name</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/record.html">record</a>, <a class="var it36892" onMouseOver="hilite(36892)" onMouseOut="lolite()" onClick="logVariable('ashtml')" href="../../_variables/ashtml.html">$ashtml</a>);
<a name="l126"><span class="linenum"> 126</span></a>      }
<a name="l127"><span class="linenum"> 127</span></a>  
<a name="l128"><span class="linenum"> 128</span></a>      <span class="comment">/**</span>
<a name="l129"><span class="linenum"> 129</span></a>  <span class="comment">     * Prepares tag name ready to be displayed</span>
<a name="l130"><span class="linenum"> 130</span></a>  <span class="comment">     *</span>
<a name="l131"><span class="linenum"> 131</span></a>  <span class="comment">     * @param stdClass|core_tag_tag $tag record from db table tag, must contain properties name and rawname</span>
<a name="l132"><span class="linenum"> 132</span></a>  <span class="comment">     * @param bool $ashtml (default true) if true will return htmlspecialchars encoded string</span>
<a name="l133"><span class="linenum"> 133</span></a>  <span class="comment">     * @return string</span>
<a name="l134"><span class="linenum"> 134</span></a>  <span class="comment">     */</span>
<a name="l135"><span class="linenum"> 135</span></a>      public static function <a class="function" onClick="logFunction('make_display_name')" href="../../_functions/make_display_name.html" onMouseOver="funcPopup(event,'make_display_name')">make_display_name</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>, <a class="var it36892" onMouseOver="hilite(36892)" onMouseOut="lolite()" onClick="logVariable('ashtml')" href="../../_variables/ashtml.html">$ashtml</a> = true) {
<a name="l136"><span class="linenum"> 136</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l137"><span class="linenum"> 137</span></a>  
<a name="l138"><span class="linenum"> 138</span></a>          if (empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('keeptagnamecase')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/keeptagnamecase.html">keeptagnamecase</a>)) {
<a name="l139"><span class="linenum"> 139</span></a>  <span class="comment">            // This is the normalized tag name.</span>
<a name="l140"><span class="linenum"> 140</span></a>              <a class="var it2390" onMouseOver="hilite(2390)" onMouseOut="lolite()" onClick="logVariable('tagname')" href="../../_variables/tagname.html">$tagname</a> = <a class="class" onClick="logClass('core_text')" href="../../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="function" onClick="logFunction('strtotitle')" href="../../_functions/strtotitle.html" onMouseOver="funcPopup(event,'strtotitle')">strtotitle</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>-&gt;<a onClick="logVariable('name')" class="var it43262" onMouseOver="hilite(43262)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>);
<a name="l141"><span class="linenum"> 141</span></a>          } else {
<a name="l142"><span class="linenum"> 142</span></a>  <span class="comment">            // Original casing of the tag name.</span>
<a name="l143"><span class="linenum"> 143</span></a>              <a class="var it2390" onMouseOver="hilite(2390)" onMouseOut="lolite()" onClick="logVariable('tagname')" href="../../_variables/tagname.html">$tagname</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>-&gt;<a onClick="logVariable('rawname')" class="var it43262" onMouseOver="hilite(43262)" onMouseOut="lolite()" href="../../_variables/rawname.html">rawname</a>;
<a name="l144"><span class="linenum"> 144</span></a>          }
<a name="l145"><span class="linenum"> 145</span></a>  
<a name="l146"><span class="linenum"> 146</span></a>  <span class="comment">        // Clean up a bit just in case the rules change again.</span>
<a name="l147"><span class="linenum"> 147</span></a>          <a class="var it2390" onMouseOver="hilite(2390)" onMouseOut="lolite()" onClick="logVariable('tagname')" href="../../_variables/tagname.html">$tagname</a> = <a class="function" onClick="logFunction('clean_param')" href="../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it2390" onMouseOver="hilite(2390)" onMouseOut="lolite()" onClick="logVariable('tagname')" href="../../_variables/tagname.html">$tagname</a>, <a class="constant" onClick="logConstant('PARAM_TAG')" href="../../_constants/PARAM_TAG.html" onMouseOver="constPopup(event,'PARAM_TAG')">PARAM_TAG</a>);
<a name="l148"><span class="linenum"> 148</span></a>  
<a name="l149"><span class="linenum"> 149</span></a>          return <a class="var it36892" onMouseOver="hilite(36892)" onMouseOut="lolite()" onClick="logVariable('ashtml')" href="../../_variables/ashtml.html">$ashtml</a> ? <a class="phpfunction" onClick="logFunction('htmlspecialchars')" href="../../_functions/htmlspecialchars.html" onMouseOver="phpfuncPopup(event,'htmlspecialchars')">htmlspecialchars</a>(<a class="var it2390" onMouseOver="hilite(2390)" onMouseOut="lolite()" onClick="logVariable('tagname')" href="../../_variables/tagname.html">$tagname</a>) : <a class="var it2390" onMouseOver="hilite(2390)" onMouseOut="lolite()" onClick="logVariable('tagname')" href="../../_variables/tagname.html">$tagname</a>;
<a name="l150"><span class="linenum"> 150</span></a>      }
<a name="l151"><span class="linenum"> 151</span></a>  
<a name="l152"><span class="linenum"> 152</span></a>      <span class="comment">/**</span>
<a name="l153"><span class="linenum"> 153</span></a>  <span class="comment">     * Adds one or more tag in the database.  This function should not be called directly : you should</span>
<a name="l154"><span class="linenum"> 154</span></a>  <span class="comment">     * use tag_set.</span>
<a name="l155"><span class="linenum"> 155</span></a>  <span class="comment">     *</span>
<a name="l156"><span class="linenum"> 156</span></a>  <span class="comment">     * @param   int      $tagcollid</span>
<a name="l157"><span class="linenum"> 157</span></a>  <span class="comment">     * @param   string|array $tags     one tag, or an array of tags, to be created</span>
<a name="l158"><span class="linenum"> 158</span></a>  <span class="comment">     * @param   bool     $isstandard type of tag to be created. A standard tag is kept even if there are no records tagged with it.</span>
<a name="l159"><span class="linenum"> 159</span></a>  <span class="comment">     * @return  array    tag objects indexed by their lowercase normalized names. Any boolean false in the array</span>
<a name="l160"><span class="linenum"> 160</span></a>  <span class="comment">     *                             indicates an error while adding the tag.</span>
<a name="l161"><span class="linenum"> 161</span></a>  <span class="comment">     */</span>
<a name="l162"><span class="linenum"> 162</span></a>      protected static function <a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it226" onMouseOver="hilite(226)" onMouseOut="lolite()" onClick="logVariable('tagcollid')" href="../../_variables/tagcollid.html">$tagcollid</a>, <a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a>, <a class="var it12378" onMouseOver="hilite(12378)" onMouseOut="lolite()" onClick="logVariable('isstandard')" href="../../_variables/isstandard.html">$isstandard</a> = false) {
<a name="l163"><span class="linenum"> 163</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l164"><span class="linenum"> 164</span></a>  
<a name="l165"><span class="linenum"> 165</span></a>          <a class="var it2656" onMouseOver="hilite(2656)" onMouseOut="lolite()" onClick="logVariable('tagobject')" href="../../_variables/tagobject.html">$tagobject</a> = new stdClass();
<a name="l166"><span class="linenum"> 166</span></a>          <a class="var it2656" onMouseOver="hilite(2656)" onMouseOut="lolite()" onClick="logVariable('tagobject')" href="../../_variables/tagobject.html">$tagobject</a>-&gt;<a onClick="logVariable('isstandard')" class="var it43731" onMouseOver="hilite(43731)" onMouseOut="lolite()" href="../../_variables/isstandard.html">isstandard</a>   = <a class="var it12378" onMouseOver="hilite(12378)" onMouseOut="lolite()" onClick="logVariable('isstandard')" href="../../_variables/isstandard.html">$isstandard</a> ? 1 : 0;
<a name="l167"><span class="linenum"> 167</span></a>          <a class="var it2656" onMouseOver="hilite(2656)" onMouseOut="lolite()" onClick="logVariable('tagobject')" href="../../_variables/tagobject.html">$tagobject</a>-&gt;<a onClick="logVariable('userid')" class="var it43731" onMouseOver="hilite(43731)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>       = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l168"><span class="linenum"> 168</span></a>          <a class="var it2656" onMouseOver="hilite(2656)" onMouseOut="lolite()" onClick="logVariable('tagobject')" href="../../_variables/tagobject.html">$tagobject</a>-&gt;<a onClick="logVariable('timemodified')" class="var it43731" onMouseOver="hilite(43731)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l169"><span class="linenum"> 169</span></a>          <a class="var it2656" onMouseOver="hilite(2656)" onMouseOut="lolite()" onClick="logVariable('tagobject')" href="../../_variables/tagobject.html">$tagobject</a>-&gt;<a onClick="logVariable('tagcollid')" class="var it43731" onMouseOver="hilite(43731)" onMouseOut="lolite()" href="../../_variables/tagcollid.html">tagcollid</a>    = <a class="var it226" onMouseOver="hilite(226)" onMouseOut="lolite()" onClick="logVariable('tagcollid')" href="../../_variables/tagcollid.html">$tagcollid</a>;
<a name="l170"><span class="linenum"> 170</span></a>  
<a name="l171"><span class="linenum"> 171</span></a>          <a class="var it2653" onMouseOver="hilite(2653)" onMouseOut="lolite()" onClick="logVariable('rv')" href="../../_variables/rv.html">$rv</a> = array();
<a name="l172"><span class="linenum"> 172</span></a>          foreach (<a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a> as <a class="var it36893" onMouseOver="hilite(36893)" onMouseOut="lolite()" onClick="logVariable('veryrawname')" href="../../_variables/veryrawname.html">$veryrawname</a>) {
<a name="l173"><span class="linenum"> 173</span></a>              <a class="var it2648" onMouseOver="hilite(2648)" onMouseOut="lolite()" onClick="logVariable('rawname')" href="../../_variables/rawname.html">$rawname</a> = <a class="function" onClick="logFunction('clean_param')" href="../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it36893" onMouseOver="hilite(36893)" onMouseOut="lolite()" onClick="logVariable('veryrawname')" href="../../_variables/veryrawname.html">$veryrawname</a>, <a class="constant" onClick="logConstant('PARAM_TAG')" href="../../_constants/PARAM_TAG.html" onMouseOver="constPopup(event,'PARAM_TAG')">PARAM_TAG</a>);
<a name="l174"><span class="linenum"> 174</span></a>              if (!<a class="var it2648" onMouseOver="hilite(2648)" onMouseOut="lolite()" onClick="logVariable('rawname')" href="../../_variables/rawname.html">$rawname</a>) {
<a name="l175"><span class="linenum"> 175</span></a>                  <a class="var it2653" onMouseOver="hilite(2653)" onMouseOut="lolite()" onClick="logVariable('rv')" href="../../_variables/rv.html">$rv</a>[<a class="var it2648" onMouseOver="hilite(2648)" onMouseOut="lolite()" onClick="logVariable('rawname')" href="../../_variables/rawname.html">$rawname</a>] = false;
<a name="l176"><span class="linenum"> 176</span></a>              } else {
<a name="l177"><span class="linenum"> 177</span></a>                  <a class="var it2319" onMouseOver="hilite(2319)" onMouseOut="lolite()" onClick="logVariable('obj')" href="../../_variables/obj.html">$obj</a> = (object)(array)<a class="var it2656" onMouseOver="hilite(2656)" onMouseOut="lolite()" onClick="logVariable('tagobject')" href="../../_variables/tagobject.html">$tagobject</a>;
<a name="l178"><span class="linenum"> 178</span></a>                  <a class="var it2319" onMouseOver="hilite(2319)" onMouseOut="lolite()" onClick="logVariable('obj')" href="../../_variables/obj.html">$obj</a>-&gt;<a onClick="logVariable('rawname')" class="var it43038" onMouseOver="hilite(43038)" onMouseOut="lolite()" href="../../_variables/rawname.html">rawname</a> = <a class="var it2648" onMouseOver="hilite(2648)" onMouseOut="lolite()" onClick="logVariable('rawname')" href="../../_variables/rawname.html">$rawname</a>;
<a name="l179"><span class="linenum"> 179</span></a>                  <a class="var it2319" onMouseOver="hilite(2319)" onMouseOut="lolite()" onClick="logVariable('obj')" href="../../_variables/obj.html">$obj</a>-&gt;<a onClick="logVariable('name')" class="var it43038" onMouseOver="hilite(43038)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>    = <a class="class" onClick="logClass('core_text')" href="../../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="phpfunction" onClick="logFunction('strtolower')" href="../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="var it2648" onMouseOver="hilite(2648)" onMouseOut="lolite()" onClick="logVariable('rawname')" href="../../_variables/rawname.html">$rawname</a>);
<a name="l180"><span class="linenum"> 180</span></a>                  <a class="var it2319" onMouseOver="hilite(2319)" onMouseOut="lolite()" onClick="logVariable('obj')" href="../../_variables/obj.html">$obj</a>-&gt;<a onClick="logVariable('id')" class="var it43038" onMouseOver="hilite(43038)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>      = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('tag', <a class="var it2319" onMouseOver="hilite(2319)" onMouseOut="lolite()" onClick="logVariable('obj')" href="../../_variables/obj.html">$obj</a>);
<a name="l181"><span class="linenum"> 181</span></a>                  <a class="var it2653" onMouseOver="hilite(2653)" onMouseOut="lolite()" onClick="logVariable('rv')" href="../../_variables/rv.html">$rv</a>[<a class="var it2319" onMouseOver="hilite(2319)" onMouseOut="lolite()" onClick="logVariable('obj')" href="../../_variables/obj.html">$obj</a>-&gt;<a onClick="logVariable('name')" class="var it43038" onMouseOver="hilite(43038)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>] = new static(<a class="var it2319" onMouseOver="hilite(2319)" onMouseOut="lolite()" onClick="logVariable('obj')" href="../../_variables/obj.html">$obj</a>);
<a name="l182"><span class="linenum"> 182</span></a>  
<a name="l183"><span class="linenum"> 183</span></a>                  \core\event\<a class="class" onClick="logClass('tag_created')" href="../../_classes/tag_created.html" onMouseOver="classPopup(event,'tag_created')">tag_created</a>::<a class="function" onClick="logFunction('create_from_tag')" href="../../_functions/create_from_tag.html" onMouseOver="funcPopup(event,'create_from_tag')">create_from_tag</a>(<a class="var it2653" onMouseOver="hilite(2653)" onMouseOut="lolite()" onClick="logVariable('rv')" href="../../_variables/rv.html">$rv</a>[<a class="var it2319" onMouseOver="hilite(2319)" onMouseOut="lolite()" onClick="logVariable('obj')" href="../../_variables/obj.html">$obj</a>-&gt;<a onClick="logVariable('name')" class="var it43038" onMouseOver="hilite(43038)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>])-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l184"><span class="linenum"> 184</span></a>              }
<a name="l185"><span class="linenum"> 185</span></a>          }
<a name="l186"><span class="linenum"> 186</span></a>  
<a name="l187"><span class="linenum"> 187</span></a>          return <a class="var it2653" onMouseOver="hilite(2653)" onMouseOut="lolite()" onClick="logVariable('rv')" href="../../_variables/rv.html">$rv</a>;
<a name="l188"><span class="linenum"> 188</span></a>      }
<a name="l189"><span class="linenum"> 189</span></a>  
<a name="l190"><span class="linenum"> 190</span></a>      <span class="comment">/**</span>
<a name="l191"><span class="linenum"> 191</span></a>  <span class="comment">     * Simple function to just return a single tag object by its id</span>
<a name="l192"><span class="linenum"> 192</span></a>  <span class="comment">     *</span>
<a name="l193"><span class="linenum"> 193</span></a>  <span class="comment">     * @param    int    $id</span>
<a name="l194"><span class="linenum"> 194</span></a>  <span class="comment">     * @param    string $returnfields which fields do we want returned from table {tag}.</span>
<a name="l195"><span class="linenum"> 195</span></a>  <span class="comment">     *                        Default value is 'id,name,rawname,tagcollid',</span>
<a name="l196"><span class="linenum"> 196</span></a>  <span class="comment">     *                        specify '*' to include all fields.</span>
<a name="l197"><span class="linenum"> 197</span></a>  <span class="comment">     * @param int $strictness IGNORE_MISSING means compatible mode, false returned if record not found, debug message if more found;</span>
<a name="l198"><span class="linenum"> 198</span></a>  <span class="comment">     *                        IGNORE_MULTIPLE means return first, ignore multiple records found(not recommended);</span>
<a name="l199"><span class="linenum"> 199</span></a>  <span class="comment">     *                        MUST_EXIST means throw exception if no record or multiple records found</span>
<a name="l200"><span class="linenum"> 200</span></a>  <span class="comment">     * @return   core_tag_tag|false  tag object</span>
<a name="l201"><span class="linenum"> 201</span></a>  <span class="comment">     */</span>
<a name="l202"><span class="linenum"> 202</span></a>      public static function <a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>, <a class="var it2682" onMouseOver="hilite(2682)" onMouseOut="lolite()" onClick="logVariable('returnfields')" href="../../_variables/returnfields.html">$returnfields</a> = 'id, name, rawname, tagcollid', <a class="var it1289" onMouseOver="hilite(1289)" onMouseOut="lolite()" onClick="logVariable('strictness')" href="../../_variables/strictness.html">$strictness</a> = <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>) {
<a name="l203"><span class="linenum"> 203</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l204"><span class="linenum"> 204</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('tag', array('id' =&gt; <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>), <a class="var it2682" onMouseOver="hilite(2682)" onMouseOut="lolite()" onClick="logVariable('returnfields')" href="../../_variables/returnfields.html">$returnfields</a>, <a class="var it1289" onMouseOver="hilite(1289)" onMouseOut="lolite()" onClick="logVariable('strictness')" href="../../_variables/strictness.html">$strictness</a>);
<a name="l205"><span class="linenum"> 205</span></a>          if (<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>) {
<a name="l206"><span class="linenum"> 206</span></a>              return new static(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>);
<a name="l207"><span class="linenum"> 207</span></a>          }
<a name="l208"><span class="linenum"> 208</span></a>          return false;
<a name="l209"><span class="linenum"> 209</span></a>      }
<a name="l210"><span class="linenum"> 210</span></a>  
<a name="l211"><span class="linenum"> 211</span></a>      <span class="comment">/**</span>
<a name="l212"><span class="linenum"> 212</span></a>  <span class="comment">     * Simple function to just return a single tag object by its id</span>
<a name="l213"><span class="linenum"> 213</span></a>  <span class="comment">     *</span>
<a name="l214"><span class="linenum"> 214</span></a>  <span class="comment">     * @param    int[]  $ids</span>
<a name="l215"><span class="linenum"> 215</span></a>  <span class="comment">     * @param    string $returnfields which fields do we want returned from table {tag}.</span>
<a name="l216"><span class="linenum"> 216</span></a>  <span class="comment">     *                        Default value is 'id,name,rawname,tagcollid',</span>
<a name="l217"><span class="linenum"> 217</span></a>  <span class="comment">     *                        specify '*' to include all fields.</span>
<a name="l218"><span class="linenum"> 218</span></a>  <span class="comment">     * @return   core_tag_tag[] array of retrieved tags</span>
<a name="l219"><span class="linenum"> 219</span></a>  <span class="comment">     */</span>
<a name="l220"><span class="linenum"> 220</span></a>      public static function <a class="function" onClick="logFunction('get_bulk')" href="../../_functions/get_bulk.html" onMouseOver="funcPopup(event,'get_bulk')">get_bulk</a>(<a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../../_variables/ids.html">$ids</a>, <a class="var it2682" onMouseOver="hilite(2682)" onMouseOut="lolite()" onClick="logVariable('returnfields')" href="../../_variables/returnfields.html">$returnfields</a> = 'id, name, rawname, tagcollid') {
<a name="l221"><span class="linenum"> 221</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l222"><span class="linenum"> 222</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = array();
<a name="l223"><span class="linenum"> 223</span></a>          if (empty(<a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../../_variables/ids.html">$ids</a>)) {
<a name="l224"><span class="linenum"> 224</span></a>              return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l225"><span class="linenum"> 225</span></a>          }
<a name="l226"><span class="linenum"> 226</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../../_variables/ids.html">$ids</a>);
<a name="l227"><span class="linenum"> 227</span></a>          <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>('tag', 'id '.<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, '', <a class="var it2682" onMouseOver="hilite(2682)" onMouseOut="lolite()" onClick="logVariable('returnfields')" href="../../_variables/returnfields.html">$returnfields</a>);
<a name="l228"><span class="linenum"> 228</span></a>          foreach (<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a> as <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>) {
<a name="l229"><span class="linenum"> 229</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>[<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = new static(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>);
<a name="l230"><span class="linenum"> 230</span></a>          }
<a name="l231"><span class="linenum"> 231</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l232"><span class="linenum"> 232</span></a>      }
<a name="l233"><span class="linenum"> 233</span></a>  
<a name="l234"><span class="linenum"> 234</span></a>      <span class="comment">/**</span>
<a name="l235"><span class="linenum"> 235</span></a>  <span class="comment">     * Simple function to just return a single tag object by tagcollid and name</span>
<a name="l236"><span class="linenum"> 236</span></a>  <span class="comment">     *</span>
<a name="l237"><span class="linenum"> 237</span></a>  <span class="comment">     * @param int $tagcollid tag collection to use,</span>
<a name="l238"><span class="linenum"> 238</span></a>  <span class="comment">     *        if 0 is given we will try to guess the tag collection and return the first match</span>
<a name="l239"><span class="linenum"> 239</span></a>  <span class="comment">     * @param string $name tag name</span>
<a name="l240"><span class="linenum"> 240</span></a>  <span class="comment">     * @param string $returnfields which fields do we want returned. This is a comma separated string</span>
<a name="l241"><span class="linenum"> 241</span></a>  <span class="comment">     *         containing any combination of 'id', 'name', 'rawname', 'tagcollid' or '*' to include all fields.</span>
<a name="l242"><span class="linenum"> 242</span></a>  <span class="comment">     * @param int $strictness IGNORE_MISSING means compatible mode, false returned if record not found, debug message if more found;</span>
<a name="l243"><span class="linenum"> 243</span></a>  <span class="comment">     *                        IGNORE_MULTIPLE means return first, ignore multiple records found(not recommended);</span>
<a name="l244"><span class="linenum"> 244</span></a>  <span class="comment">     *                        MUST_EXIST means throw exception if no record or multiple records found</span>
<a name="l245"><span class="linenum"> 245</span></a>  <span class="comment">     * @return core_tag_tag|false tag object</span>
<a name="l246"><span class="linenum"> 246</span></a>  <span class="comment">     */</span>
<a name="l247"><span class="linenum"> 247</span></a>      public static function <a class="function" onClick="logFunction('get_by_name')" href="../../_functions/get_by_name.html" onMouseOver="funcPopup(event,'get_by_name')">get_by_name</a>(<a class="var it226" onMouseOver="hilite(226)" onMouseOut="lolite()" onClick="logVariable('tagcollid')" href="../../_variables/tagcollid.html">$tagcollid</a>, <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, <a class="var it2682" onMouseOver="hilite(2682)" onMouseOut="lolite()" onClick="logVariable('returnfields')" href="../../_variables/returnfields.html">$returnfields</a>='id, name, rawname, tagcollid',
<a name="l248"><span class="linenum"> 248</span></a>                          <a class="var it1289" onMouseOver="hilite(1289)" onMouseOut="lolite()" onClick="logVariable('strictness')" href="../../_variables/strictness.html">$strictness</a> = <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>) {
<a name="l249"><span class="linenum"> 249</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l250"><span class="linenum"> 250</span></a>          if (<a class="var it226" onMouseOver="hilite(226)" onMouseOut="lolite()" onClick="logVariable('tagcollid')" href="../../_variables/tagcollid.html">$tagcollid</a> == 0) {
<a name="l251"><span class="linenum"> 251</span></a>              <a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a> = static::<a class="function" onClick="logFunction('guess_by_name')" href="../../_functions/guess_by_name.html" onMouseOver="funcPopup(event,'guess_by_name')">guess_by_name</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, <a class="var it2682" onMouseOver="hilite(2682)" onMouseOut="lolite()" onClick="logVariable('returnfields')" href="../../_variables/returnfields.html">$returnfields</a>);
<a name="l252"><span class="linenum"> 252</span></a>              if (<a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a>) {
<a name="l253"><span class="linenum"> 253</span></a>                  <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a>);
<a name="l254"><span class="linenum"> 254</span></a>                  return <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>;
<a name="l255"><span class="linenum"> 255</span></a>              } else if (<a class="var it1289" onMouseOver="hilite(1289)" onMouseOut="lolite()" onClick="logVariable('strictness')" href="../../_variables/strictness.html">$strictness</a> == <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>) {
<a name="l256"><span class="linenum"> 256</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('dml_missing_record_exception')" href="../../_classes/dml_missing_record_exception.html" onMouseOver="classPopup(event,'dml_missing_record_exception')">dml_missing_record_exception</a>('tag', 'name=?', array(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>));
<a name="l257"><span class="linenum"> 257</span></a>              }
<a name="l258"><span class="linenum"> 258</span></a>              return false;
<a name="l259"><span class="linenum"> 259</span></a>          }
<a name="l260"><span class="linenum"> 260</span></a>          <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = <a class="class" onClick="logClass('core_text')" href="../../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="phpfunction" onClick="logFunction('strtolower')" href="../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>);   <span class="comment">// To cope with input that might just be wrong case.</span>
<a name="l261"><span class="linenum"> 261</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('name' =&gt; <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, 'tagcollid' =&gt; <a class="var it226" onMouseOver="hilite(226)" onMouseOut="lolite()" onClick="logVariable('tagcollid')" href="../../_variables/tagcollid.html">$tagcollid</a>);
<a name="l262"><span class="linenum"> 262</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('tag', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="var it2682" onMouseOver="hilite(2682)" onMouseOut="lolite()" onClick="logVariable('returnfields')" href="../../_variables/returnfields.html">$returnfields</a>, <a class="var it1289" onMouseOver="hilite(1289)" onMouseOut="lolite()" onClick="logVariable('strictness')" href="../../_variables/strictness.html">$strictness</a>);
<a name="l263"><span class="linenum"> 263</span></a>          if (<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>) {
<a name="l264"><span class="linenum"> 264</span></a>              return new static(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>);
<a name="l265"><span class="linenum"> 265</span></a>          }
<a name="l266"><span class="linenum"> 266</span></a>          return false;
<a name="l267"><span class="linenum"> 267</span></a>      }
<a name="l268"><span class="linenum"> 268</span></a>  
<a name="l269"><span class="linenum"> 269</span></a>      <span class="comment">/**</span>
<a name="l270"><span class="linenum"> 270</span></a>  <span class="comment">     * Looking in all tag collections for the tag with the given name</span>
<a name="l271"><span class="linenum"> 271</span></a>  <span class="comment">     *</span>
<a name="l272"><span class="linenum"> 272</span></a>  <span class="comment">     * @param string $name tag name</span>
<a name="l273"><span class="linenum"> 273</span></a>  <span class="comment">     * @param string $returnfields</span>
<a name="l274"><span class="linenum"> 274</span></a>  <span class="comment">     * @return array array of core_tag_tag instances</span>
<a name="l275"><span class="linenum"> 275</span></a>  <span class="comment">     */</span>
<a name="l276"><span class="linenum"> 276</span></a>      public static function <a class="function" onClick="logFunction('guess_by_name')" href="../../_functions/guess_by_name.html" onMouseOver="funcPopup(event,'guess_by_name')">guess_by_name</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, <a class="var it2682" onMouseOver="hilite(2682)" onMouseOut="lolite()" onClick="logVariable('returnfields')" href="../../_variables/returnfields.html">$returnfields</a>='id, name, rawname, tagcollid') {
<a name="l277"><span class="linenum"> 277</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l278"><span class="linenum"> 278</span></a>          if (empty(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>)) {
<a name="l279"><span class="linenum"> 279</span></a>              return array();
<a name="l280"><span class="linenum"> 280</span></a>          }
<a name="l281"><span class="linenum"> 281</span></a>          <a class="var it6198" onMouseOver="hilite(6198)" onMouseOut="lolite()" onClick="logVariable('tagcolls')" href="../../_variables/tagcolls.html">$tagcolls</a> = <a class="class" onClick="logClass('core_tag_collection')" href="../../_classes/core_tag_collection.html" onMouseOver="classPopup(event,'core_tag_collection')">core_tag_collection</a>::<a class="function" onClick="logFunction('get_collections')" href="../../_functions/get_collections.html" onMouseOver="funcPopup(event,'get_collections')">get_collections</a>();
<a name="l282"><span class="linenum"> 282</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it6198" onMouseOver="hilite(6198)" onMouseOut="lolite()" onClick="logVariable('tagcolls')" href="../../_variables/tagcolls.html">$tagcolls</a>), <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>);
<a name="l283"><span class="linenum"> 283</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['name'] = <a class="class" onClick="logClass('core_text')" href="../../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="phpfunction" onClick="logFunction('strtolower')" href="../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>);
<a name="l284"><span class="linenum"> 284</span></a>          <a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>('tag', 'name = :name AND tagcollid ' . <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, '', <a class="var it2682" onMouseOver="hilite(2682)" onMouseOut="lolite()" onClick="logVariable('returnfields')" href="../../_variables/returnfields.html">$returnfields</a>);
<a name="l285"><span class="linenum"> 285</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a>) &gt; 1) {
<a name="l286"><span class="linenum"> 286</span></a>  <span class="comment">            // Sort in the same order as tag collections.</span>
<a name="l287"><span class="linenum"> 287</span></a>              <a class="phpfunction" onClick="logFunction('uasort')" href="../../_functions/uasort.html" onMouseOver="phpfuncPopup(event,'uasort')">uasort</a>(<a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a>, <a class="phpfunction" onClick="logFunction('create_function')" href="../../_functions/create_function.html" onMouseOver="phpfuncPopup(event,'create_function')">create_function</a>('<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>,<a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('b')" href="../../_variables/b.html">$b</a>', '<a class="var it6198" onMouseOver="hilite(6198)" onMouseOut="lolite()" onClick="logVariable('tagcolls')" href="../../_variables/tagcolls.html">$tagcolls</a> = <a class="class" onClick="logClass('core_tag_collection')" href="../../_classes/core_tag_collection.html" onMouseOver="classPopup(event,'core_tag_collection')">core_tag_collection</a>::<a class="function" onClick="logFunction('get_collections')" href="../../_functions/get_collections.html" onMouseOver="funcPopup(event,'get_collections')">get_collections</a>(); ' .
<a name="l288"><span class="linenum"> 288</span></a>                  'return <a class="var it6198" onMouseOver="hilite(6198)" onMouseOut="lolite()" onClick="logVariable('tagcolls')" href="../../_variables/tagcolls.html">$tagcolls</a>[<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('tagcollid')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../../_variables/tagcollid.html">tagcollid</a>]-&gt;sortorder &lt; <a class="var it6198" onMouseOver="hilite(6198)" onMouseOut="lolite()" onClick="logVariable('tagcolls')" href="../../_variables/tagcolls.html">$tagcolls</a>[<a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('b')" href="../../_variables/b.html">$b</a>-&gt;<a onClick="logVariable('tagcollid')" class="var it43356" onMouseOver="hilite(43356)" onMouseOut="lolite()" href="../../_variables/tagcollid.html">tagcollid</a>]-&gt;sortorder ? -1 : 1;'));
<a name="l289"><span class="linenum"> 289</span></a>          }
<a name="l290"><span class="linenum"> 290</span></a>          <a class="var it2653" onMouseOver="hilite(2653)" onMouseOut="lolite()" onClick="logVariable('rv')" href="../../_variables/rv.html">$rv</a> = array();
<a name="l291"><span class="linenum"> 291</span></a>          foreach (<a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a> as <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a> =&gt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>) {
<a name="l292"><span class="linenum"> 292</span></a>              <a class="var it2653" onMouseOver="hilite(2653)" onMouseOut="lolite()" onClick="logVariable('rv')" href="../../_variables/rv.html">$rv</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>] = new static(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>);
<a name="l293"><span class="linenum"> 293</span></a>          }
<a name="l294"><span class="linenum"> 294</span></a>          return <a class="var it2653" onMouseOver="hilite(2653)" onMouseOut="lolite()" onClick="logVariable('rv')" href="../../_variables/rv.html">$rv</a>;
<a name="l295"><span class="linenum"> 295</span></a>      }
<a name="l296"><span class="linenum"> 296</span></a>  
<a name="l297"><span class="linenum"> 297</span></a>      <span class="comment">/**</span>
<a name="l298"><span class="linenum"> 298</span></a>  <span class="comment">     * Returns the list of tag objects by tag collection id and the list of tag names</span>
<a name="l299"><span class="linenum"> 299</span></a>  <span class="comment">     *</span>
<a name="l300"><span class="linenum"> 300</span></a>  <span class="comment">     * @param    int   $tagcollid</span>
<a name="l301"><span class="linenum"> 301</span></a>  <span class="comment">     * @param    array $tags array of tags to look for</span>
<a name="l302"><span class="linenum"> 302</span></a>  <span class="comment">     * @param    string $returnfields list of DB fields to return, must contain 'id', 'name' and 'rawname'</span>
<a name="l303"><span class="linenum"> 303</span></a>  <span class="comment">     * @return   array tag-indexed array of objects. No value for a key means the tag wasn't found.</span>
<a name="l304"><span class="linenum"> 304</span></a>  <span class="comment">     */</span>
<a name="l305"><span class="linenum"> 305</span></a>      public static function <a class="function" onClick="logFunction('get_by_name_bulk')" href="../../_functions/get_by_name_bulk.html" onMouseOver="funcPopup(event,'get_by_name_bulk')">get_by_name_bulk</a>(<a class="var it226" onMouseOver="hilite(226)" onMouseOut="lolite()" onClick="logVariable('tagcollid')" href="../../_variables/tagcollid.html">$tagcollid</a>, <a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a>, <a class="var it2682" onMouseOver="hilite(2682)" onMouseOut="lolite()" onClick="logVariable('returnfields')" href="../../_variables/returnfields.html">$returnfields</a> = 'id, name, rawname, tagcollid') {
<a name="l306"><span class="linenum"> 306</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l307"><span class="linenum"> 307</span></a>  
<a name="l308"><span class="linenum"> 308</span></a>          if (empty(<a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a>)) {
<a name="l309"><span class="linenum"> 309</span></a>              return array();
<a name="l310"><span class="linenum"> 310</span></a>          }
<a name="l311"><span class="linenum"> 311</span></a>  
<a name="l312"><span class="linenum"> 312</span></a>          <a class="var it36894" onMouseOver="hilite(36894)" onMouseOut="lolite()" onClick="logVariable('cleantags')" href="../../_variables/cleantags.html">$cleantags</a> = self::<a class="function" onClick="logFunction('normalize')" href="../../_functions/normalize.html" onMouseOver="funcPopup(event,'normalize')">normalize</a>(self::<a class="function" onClick="logFunction('normalize')" href="../../_functions/normalize.html" onMouseOver="funcPopup(event,'normalize')">normalize</a>(<a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a>, false)); <span class="comment">// Format: rawname =&gt; normalised name.</span>
<a name="l313"><span class="linenum"> 313</span></a>  
<a name="l314"><span class="linenum"> 314</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it36895" onMouseOver="hilite(36895)" onMouseOut="lolite()" onClick="logVariable('namesql')" href="../../_variables/namesql.html">$namesql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="phpfunction" onClick="logFunction('array_values')" href="../../_functions/array_values.html" onMouseOver="phpfuncPopup(event,'array_values')">array_values</a>(<a class="var it36894" onMouseOver="hilite(36894)" onMouseOut="lolite()" onClick="logVariable('cleantags')" href="../../_variables/cleantags.html">$cleantags</a>));
<a name="l315"><span class="linenum"> 315</span></a>          <a class="phpfunction" onClick="logFunction('array_unshift')" href="../../_functions/array_unshift.html" onMouseOver="phpfuncPopup(event,'array_unshift')">array_unshift</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="var it226" onMouseOver="hilite(226)" onMouseOut="lolite()" onClick="logVariable('tagcollid')" href="../../_variables/tagcollid.html">$tagcollid</a>);
<a name="l316"><span class="linenum"> 316</span></a>  
<a name="l317"><span class="linenum"> 317</span></a>          <a class="var it2343" onMouseOver="hilite(2343)" onMouseOut="lolite()" onClick="logVariable('recordset')" href="../../_variables/recordset.html">$recordset</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(&quot;SELECT <a class="var it2682" onMouseOver="hilite(2682)" onMouseOut="lolite()" onClick="logVariable('returnfields')" href="../../_variables/returnfields.html">$returnfields</a> FROM {tag} WHERE tagcollid = ? AND name <a class="var it36895" onMouseOver="hilite(36895)" onMouseOut="lolite()" onClick="logVariable('namesql')" href="../../_variables/namesql.html">$namesql</a>&quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l318"><span class="linenum"> 318</span></a>  
<a name="l319"><span class="linenum"> 319</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = array_fill_keys(<a class="var it36894" onMouseOver="hilite(36894)" onMouseOut="lolite()" onClick="logVariable('cleantags')" href="../../_variables/cleantags.html">$cleantags</a>, null);
<a name="l320"><span class="linenum"> 320</span></a>          foreach (<a class="var it2343" onMouseOver="hilite(2343)" onMouseOut="lolite()" onClick="logVariable('recordset')" href="../../_variables/recordset.html">$recordset</a> as <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>) {
<a name="l321"><span class="linenum"> 321</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>[<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('name')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>] = new static(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>);
<a name="l322"><span class="linenum"> 322</span></a>          }
<a name="l323"><span class="linenum"> 323</span></a>          <a class="var it2343" onMouseOver="hilite(2343)" onMouseOut="lolite()" onClick="logVariable('recordset')" href="../../_variables/recordset.html">$recordset</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l324"><span class="linenum"> 324</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l325"><span class="linenum"> 325</span></a>      }
<a name="l326"><span class="linenum"> 326</span></a>  
<a name="l327"><span class="linenum"> 327</span></a>  
<a name="l328"><span class="linenum"> 328</span></a>      <span class="comment">/**</span>
<a name="l329"><span class="linenum"> 329</span></a>  <span class="comment">     * Function that normalizes a list of tag names.</span>
<a name="l330"><span class="linenum"> 330</span></a>  <span class="comment">     *</span>
<a name="l331"><span class="linenum"> 331</span></a>  <span class="comment">     * @param   array        $rawtags array of tags</span>
<a name="l332"><span class="linenum"> 332</span></a>  <span class="comment">     * @param   bool         $tolowercase convert to lower case?</span>
<a name="l333"><span class="linenum"> 333</span></a>  <span class="comment">     * @return  array        lowercased normalized tags, indexed by the normalized tag, in the same order as the original array.</span>
<a name="l334"><span class="linenum"> 334</span></a>  <span class="comment">     *                       (Eg: 'Banana' =&gt; 'banana').</span>
<a name="l335"><span class="linenum"> 335</span></a>  <span class="comment">     */</span>
<a name="l336"><span class="linenum"> 336</span></a>      public static function <a class="function" onClick="logFunction('normalize')" href="../../_functions/normalize.html" onMouseOver="funcPopup(event,'normalize')">normalize</a>(<a class="var it2679" onMouseOver="hilite(2679)" onMouseOut="lolite()" onClick="logVariable('rawtags')" href="../../_variables/rawtags.html">$rawtags</a>, <a class="var it36896" onMouseOver="hilite(36896)" onMouseOut="lolite()" onClick="logVariable('tolowercase')" href="../../_variables/tolowercase.html">$tolowercase</a> = true) {
<a name="l337"><span class="linenum"> 337</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = array();
<a name="l338"><span class="linenum"> 338</span></a>          foreach (<a class="var it2679" onMouseOver="hilite(2679)" onMouseOut="lolite()" onClick="logVariable('rawtags')" href="../../_variables/rawtags.html">$rawtags</a> as <a class="var it36897" onMouseOver="hilite(36897)" onMouseOut="lolite()" onClick="logVariable('rawtag')" href="../../_variables/rawtag.html">$rawtag</a>) {
<a name="l339"><span class="linenum"> 339</span></a>              <a class="var it36897" onMouseOver="hilite(36897)" onMouseOut="lolite()" onClick="logVariable('rawtag')" href="../../_variables/rawtag.html">$rawtag</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it36897" onMouseOver="hilite(36897)" onMouseOut="lolite()" onClick="logVariable('rawtag')" href="../../_variables/rawtag.html">$rawtag</a>);
<a name="l340"><span class="linenum"> 340</span></a>              if (<a class="phpfunction" onClick="logFunction('strval')" href="../../_functions/strval.html" onMouseOver="phpfuncPopup(event,'strval')">strval</a>(<a class="var it36897" onMouseOver="hilite(36897)" onMouseOut="lolite()" onClick="logVariable('rawtag')" href="../../_variables/rawtag.html">$rawtag</a>) !== '') {
<a name="l341"><span class="linenum"> 341</span></a>                  <a class="var it1113" onMouseOver="hilite(1113)" onMouseOut="lolite()" onClick="logVariable('clean')" href="../../_variables/clean.html">$clean</a> = <a class="function" onClick="logFunction('clean_param')" href="../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it36897" onMouseOver="hilite(36897)" onMouseOut="lolite()" onClick="logVariable('rawtag')" href="../../_variables/rawtag.html">$rawtag</a>, <a class="constant" onClick="logConstant('PARAM_TAG')" href="../../_constants/PARAM_TAG.html" onMouseOver="constPopup(event,'PARAM_TAG')">PARAM_TAG</a>);
<a name="l342"><span class="linenum"> 342</span></a>                  if (<a class="var it36896" onMouseOver="hilite(36896)" onMouseOut="lolite()" onClick="logVariable('tolowercase')" href="../../_variables/tolowercase.html">$tolowercase</a>) {
<a name="l343"><span class="linenum"> 343</span></a>                      <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>[<a class="var it36897" onMouseOver="hilite(36897)" onMouseOut="lolite()" onClick="logVariable('rawtag')" href="../../_variables/rawtag.html">$rawtag</a>] = <a class="class" onClick="logClass('core_text')" href="../../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="phpfunction" onClick="logFunction('strtolower')" href="../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="var it1113" onMouseOver="hilite(1113)" onMouseOut="lolite()" onClick="logVariable('clean')" href="../../_variables/clean.html">$clean</a>);
<a name="l344"><span class="linenum"> 344</span></a>                  } else {
<a name="l345"><span class="linenum"> 345</span></a>                      <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>[<a class="var it36897" onMouseOver="hilite(36897)" onMouseOut="lolite()" onClick="logVariable('rawtag')" href="../../_variables/rawtag.html">$rawtag</a>] = <a class="var it1113" onMouseOver="hilite(1113)" onMouseOut="lolite()" onClick="logVariable('clean')" href="../../_variables/clean.html">$clean</a>;
<a name="l346"><span class="linenum"> 346</span></a>                  }
<a name="l347"><span class="linenum"> 347</span></a>              }
<a name="l348"><span class="linenum"> 348</span></a>          }
<a name="l349"><span class="linenum"> 349</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l350"><span class="linenum"> 350</span></a>      }
<a name="l351"><span class="linenum"> 351</span></a>  
<a name="l352"><span class="linenum"> 352</span></a>      <span class="comment">/**</span>
<a name="l353"><span class="linenum"> 353</span></a>  <span class="comment">     * Retrieves tags and/or creates them if do not exist yet</span>
<a name="l354"><span class="linenum"> 354</span></a>  <span class="comment">     *</span>
<a name="l355"><span class="linenum"> 355</span></a>  <span class="comment">     * @param int $tagcollid</span>
<a name="l356"><span class="linenum"> 356</span></a>  <span class="comment">     * @param array $tags array of raw tag names, do not have to be normalised</span>
<a name="l357"><span class="linenum"> 357</span></a>  <span class="comment">     * @param bool $isstandard create as standard tag (default false)</span>
<a name="l358"><span class="linenum"> 358</span></a>  <span class="comment">     * @return core_tag_tag[] array of tag objects indexed with lowercase normalised tag name</span>
<a name="l359"><span class="linenum"> 359</span></a>  <span class="comment">     */</span>
<a name="l360"><span class="linenum"> 360</span></a>      public static function <a class="function" onClick="logFunction('create_if_missing')" href="../../_functions/create_if_missing.html" onMouseOver="funcPopup(event,'create_if_missing')">create_if_missing</a>(<a class="var it226" onMouseOver="hilite(226)" onMouseOut="lolite()" onClick="logVariable('tagcollid')" href="../../_variables/tagcollid.html">$tagcollid</a>, <a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a>, <a class="var it12378" onMouseOver="hilite(12378)" onMouseOut="lolite()" onClick="logVariable('isstandard')" href="../../_variables/isstandard.html">$isstandard</a> = false) {
<a name="l361"><span class="linenum"> 361</span></a>          <a class="var it36894" onMouseOver="hilite(36894)" onMouseOut="lolite()" onClick="logVariable('cleantags')" href="../../_variables/cleantags.html">$cleantags</a> = self::<a class="function" onClick="logFunction('normalize')" href="../../_functions/normalize.html" onMouseOver="funcPopup(event,'normalize')">normalize</a>(<a class="phpfunction" onClick="logFunction('array_filter')" href="../../_functions/array_filter.html" onMouseOver="phpfuncPopup(event,'array_filter')">array_filter</a>(self::<a class="function" onClick="logFunction('normalize')" href="../../_functions/normalize.html" onMouseOver="funcPopup(event,'normalize')">normalize</a>(<a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a>, false))); <span class="comment">// Array rawname =&gt; normalised name .</span>
<a name="l362"><span class="linenum"> 362</span></a>  
<a name="l363"><span class="linenum"> 363</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = static::<a class="function" onClick="logFunction('get_by_name_bulk')" href="../../_functions/get_by_name_bulk.html" onMouseOver="funcPopup(event,'get_by_name_bulk')">get_by_name_bulk</a>(<a class="var it226" onMouseOver="hilite(226)" onMouseOut="lolite()" onClick="logVariable('tagcollid')" href="../../_variables/tagcollid.html">$tagcollid</a>, <a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a>, '*');
<a name="l364"><span class="linenum"> 364</span></a>          <a class="var it10898" onMouseOver="hilite(10898)" onMouseOut="lolite()" onClick="logVariable('existing')" href="../../_variables/existing.html">$existing</a> = <a class="phpfunction" onClick="logFunction('array_filter')" href="../../_functions/array_filter.html" onMouseOver="phpfuncPopup(event,'array_filter')">array_filter</a>(<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l365"><span class="linenum"> 365</span></a>          <a class="var it5327" onMouseOver="hilite(5327)" onMouseOut="lolite()" onClick="logVariable('missing')" href="../../_variables/missing.html">$missing</a> = array_diff_key(<a class="phpfunction" onClick="logFunction('array_flip')" href="../../_functions/array_flip.html" onMouseOver="phpfuncPopup(event,'array_flip')">array_flip</a>(<a class="var it36894" onMouseOver="hilite(36894)" onMouseOut="lolite()" onClick="logVariable('cleantags')" href="../../_variables/cleantags.html">$cleantags</a>), <a class="var it10898" onMouseOver="hilite(10898)" onMouseOut="lolite()" onClick="logVariable('existing')" href="../../_variables/existing.html">$existing</a>); <span class="comment">// Array normalised name =&gt; rawname.</span>
<a name="l366"><span class="linenum"> 366</span></a>          if (<a class="var it5327" onMouseOver="hilite(5327)" onMouseOut="lolite()" onClick="logVariable('missing')" href="../../_variables/missing.html">$missing</a>) {
<a name="l367"><span class="linenum"> 367</span></a>              <a class="var it12537" onMouseOver="hilite(12537)" onMouseOut="lolite()" onClick="logVariable('newtags')" href="../../_variables/newtags.html">$newtags</a> = static::<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it226" onMouseOver="hilite(226)" onMouseOut="lolite()" onClick="logVariable('tagcollid')" href="../../_variables/tagcollid.html">$tagcollid</a>, <a class="phpfunction" onClick="logFunction('array_values')" href="../../_functions/array_values.html" onMouseOver="phpfuncPopup(event,'array_values')">array_values</a>(<a class="var it5327" onMouseOver="hilite(5327)" onMouseOut="lolite()" onClick="logVariable('missing')" href="../../_variables/missing.html">$missing</a>), <a class="var it12378" onMouseOver="hilite(12378)" onMouseOut="lolite()" onClick="logVariable('isstandard')" href="../../_variables/isstandard.html">$isstandard</a>);
<a name="l368"><span class="linenum"> 368</span></a>              foreach (<a class="var it12537" onMouseOver="hilite(12537)" onMouseOut="lolite()" onClick="logVariable('newtags')" href="../../_variables/newtags.html">$newtags</a> as <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>) {
<a name="l369"><span class="linenum"> 369</span></a>                  <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>[<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>-&gt;<a onClick="logVariable('name')" class="var it43262" onMouseOver="hilite(43262)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>] = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>;
<a name="l370"><span class="linenum"> 370</span></a>              }
<a name="l371"><span class="linenum"> 371</span></a>          }
<a name="l372"><span class="linenum"> 372</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l373"><span class="linenum"> 373</span></a>      }
<a name="l374"><span class="linenum"> 374</span></a>  
<a name="l375"><span class="linenum"> 375</span></a>      <span class="comment">/**</span>
<a name="l376"><span class="linenum"> 376</span></a>  <span class="comment">     * Creates a URL to view a tag</span>
<a name="l377"><span class="linenum"> 377</span></a>  <span class="comment">     *</span>
<a name="l378"><span class="linenum"> 378</span></a>  <span class="comment">     * @param int $tagcollid</span>
<a name="l379"><span class="linenum"> 379</span></a>  <span class="comment">     * @param string $name</span>
<a name="l380"><span class="linenum"> 380</span></a>  <span class="comment">     * @param int $exclusivemode</span>
<a name="l381"><span class="linenum"> 381</span></a>  <span class="comment">     * @param int $fromctx context id where this tag cloud is displayed</span>
<a name="l382"><span class="linenum"> 382</span></a>  <span class="comment">     * @param int $ctx context id for tag view link</span>
<a name="l383"><span class="linenum"> 383</span></a>  <span class="comment">     * @param int $rec recursive argument for tag view link</span>
<a name="l384"><span class="linenum"> 384</span></a>  <span class="comment">     * @return \moodle_url</span>
<a name="l385"><span class="linenum"> 385</span></a>  <span class="comment">     */</span>
<a name="l386"><span class="linenum"> 386</span></a>      public static function <a class="function" onClick="logFunction('make_url')" href="../../_functions/make_url.html" onMouseOver="funcPopup(event,'make_url')">make_url</a>(<a class="var it226" onMouseOver="hilite(226)" onMouseOut="lolite()" onClick="logVariable('tagcollid')" href="../../_variables/tagcollid.html">$tagcollid</a>, <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, <a class="var it1066" onMouseOver="hilite(1066)" onMouseOut="lolite()" onClick="logVariable('exclusivemode')" href="../../_variables/exclusivemode.html">$exclusivemode</a> = 0, <a class="var it1067" onMouseOver="hilite(1067)" onMouseOut="lolite()" onClick="logVariable('fromctx')" href="../../_variables/fromctx.html">$fromctx</a> = 0, <a class="var it1068" onMouseOver="hilite(1068)" onMouseOut="lolite()" onClick="logVariable('ctx')" href="../../_variables/ctx.html">$ctx</a> = 0, <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../_variables/rec.html">$rec</a> = 1) {
<a name="l387"><span class="linenum"> 387</span></a>          <a class="var it30327" onMouseOver="hilite(30327)" onMouseOut="lolite()" onClick="logVariable('coll')" href="../../_variables/coll.html">$coll</a> = <a class="class" onClick="logClass('core_tag_collection')" href="../../_classes/core_tag_collection.html" onMouseOver="classPopup(event,'core_tag_collection')">core_tag_collection</a>::<a class="function" onClick="logFunction('get_by_id')" href="../../_functions/get_by_id.html" onMouseOver="funcPopup(event,'get_by_id')">get_by_id</a>(<a class="var it226" onMouseOver="hilite(226)" onMouseOut="lolite()" onClick="logVariable('tagcollid')" href="../../_variables/tagcollid.html">$tagcollid</a>);
<a name="l388"><span class="linenum"> 388</span></a>          if (!empty(<a class="var it30327" onMouseOver="hilite(30327)" onMouseOut="lolite()" onClick="logVariable('coll')" href="../../_variables/coll.html">$coll</a>-&gt;<a onClick="logVariable('customurl')" class="var it45533" onMouseOver="hilite(45533)" onMouseOut="lolite()" href="../../_variables/customurl.html">customurl</a>)) {
<a name="l389"><span class="linenum"> 389</span></a>              <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = '/' . <a class="phpfunction" onClick="logFunction('ltrim')" href="../../_functions/ltrim.html" onMouseOver="phpfuncPopup(event,'ltrim')">ltrim</a>(<a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it30327" onMouseOver="hilite(30327)" onMouseOut="lolite()" onClick="logVariable('coll')" href="../../_variables/coll.html">$coll</a>-&gt;<a onClick="logVariable('customurl')" class="var it45533" onMouseOver="hilite(45533)" onMouseOut="lolite()" href="../../_variables/customurl.html">customurl</a>), '/');
<a name="l390"><span class="linenum"> 390</span></a>          } else {
<a name="l391"><span class="linenum"> 391</span></a>              <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = '<a class="filename" href="../../tag/index.php.html">/tag/index.php</a>';
<a name="l392"><span class="linenum"> 392</span></a>          }
<a name="l393"><span class="linenum"> 393</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('tc' =&gt; <a class="var it226" onMouseOver="hilite(226)" onMouseOut="lolite()" onClick="logVariable('tagcollid')" href="../../_variables/tagcollid.html">$tagcollid</a>, 'tag' =&gt; <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>);
<a name="l394"><span class="linenum"> 394</span></a>          if (<a class="var it1066" onMouseOver="hilite(1066)" onMouseOut="lolite()" onClick="logVariable('exclusivemode')" href="../../_variables/exclusivemode.html">$exclusivemode</a>) {
<a name="l395"><span class="linenum"> 395</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['excl'] = 1;
<a name="l396"><span class="linenum"> 396</span></a>          }
<a name="l397"><span class="linenum"> 397</span></a>          if (<a class="var it1067" onMouseOver="hilite(1067)" onMouseOut="lolite()" onClick="logVariable('fromctx')" href="../../_variables/fromctx.html">$fromctx</a>) {
<a name="l398"><span class="linenum"> 398</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['from'] = <a class="var it1067" onMouseOver="hilite(1067)" onMouseOut="lolite()" onClick="logVariable('fromctx')" href="../../_variables/fromctx.html">$fromctx</a>;
<a name="l399"><span class="linenum"> 399</span></a>          }
<a name="l400"><span class="linenum"> 400</span></a>          if (<a class="var it1068" onMouseOver="hilite(1068)" onMouseOut="lolite()" onClick="logVariable('ctx')" href="../../_variables/ctx.html">$ctx</a>) {
<a name="l401"><span class="linenum"> 401</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['ctx'] = <a class="var it1068" onMouseOver="hilite(1068)" onMouseOut="lolite()" onClick="logVariable('ctx')" href="../../_variables/ctx.html">$ctx</a>;
<a name="l402"><span class="linenum"> 402</span></a>          }
<a name="l403"><span class="linenum"> 403</span></a>          if (!<a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../_variables/rec.html">$rec</a>) {
<a name="l404"><span class="linenum"> 404</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['rec'] = 0;
<a name="l405"><span class="linenum"> 405</span></a>          }
<a name="l406"><span class="linenum"> 406</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l407"><span class="linenum"> 407</span></a>      }
<a name="l408"><span class="linenum"> 408</span></a>  
<a name="l409"><span class="linenum"> 409</span></a>      <span class="comment">/**</span>
<a name="l410"><span class="linenum"> 410</span></a>  <span class="comment">     * Returns URL to view the tag</span>
<a name="l411"><span class="linenum"> 411</span></a>  <span class="comment">     *</span>
<a name="l412"><span class="linenum"> 412</span></a>  <span class="comment">     * @param int $exclusivemode</span>
<a name="l413"><span class="linenum"> 413</span></a>  <span class="comment">     * @param int $fromctx context id where this tag cloud is displayed</span>
<a name="l414"><span class="linenum"> 414</span></a>  <span class="comment">     * @param int $ctx context id for tag view link</span>
<a name="l415"><span class="linenum"> 415</span></a>  <span class="comment">     * @param int $rec recursive argument for tag view link</span>
<a name="l416"><span class="linenum"> 416</span></a>  <span class="comment">     * @return \moodle_url</span>
<a name="l417"><span class="linenum"> 417</span></a>  <span class="comment">     */</span>
<a name="l418"><span class="linenum"> 418</span></a>      public function <a class="function" onClick="logFunction('get_view_url')" href="../../_functions/get_view_url.html" onMouseOver="funcPopup(event,'get_view_url')">get_view_url</a>(<a class="var it1066" onMouseOver="hilite(1066)" onMouseOut="lolite()" onClick="logVariable('exclusivemode')" href="../../_variables/exclusivemode.html">$exclusivemode</a> = 0, <a class="var it1067" onMouseOver="hilite(1067)" onMouseOut="lolite()" onClick="logVariable('fromctx')" href="../../_variables/fromctx.html">$fromctx</a> = 0, <a class="var it1068" onMouseOver="hilite(1068)" onMouseOut="lolite()" onClick="logVariable('ctx')" href="../../_variables/ctx.html">$ctx</a> = 0, <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../_variables/rec.html">$rec</a> = 1) {
<a name="l419"><span class="linenum"> 419</span></a>          return static::<a class="function" onClick="logFunction('make_url')" href="../../_functions/make_url.html" onMouseOver="funcPopup(event,'make_url')">make_url</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/record.html">record</a>-&gt;tagcollid, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/record.html">record</a>-&gt;rawname,
<a name="l420"><span class="linenum"> 420</span></a>              <a class="var it1066" onMouseOver="hilite(1066)" onMouseOut="lolite()" onClick="logVariable('exclusivemode')" href="../../_variables/exclusivemode.html">$exclusivemode</a>, <a class="var it1067" onMouseOver="hilite(1067)" onMouseOut="lolite()" onClick="logVariable('fromctx')" href="../../_variables/fromctx.html">$fromctx</a>, <a class="var it1068" onMouseOver="hilite(1068)" onMouseOut="lolite()" onClick="logVariable('ctx')" href="../../_variables/ctx.html">$ctx</a>, <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../_variables/rec.html">$rec</a>);
<a name="l421"><span class="linenum"> 421</span></a>      }
<a name="l422"><span class="linenum"> 422</span></a>  
<a name="l423"><span class="linenum"> 423</span></a>      <span class="comment">/**</span>
<a name="l424"><span class="linenum"> 424</span></a>  <span class="comment">     * Validates that the required fields were retrieved and retrieves them if missing</span>
<a name="l425"><span class="linenum"> 425</span></a>  <span class="comment">     *</span>
<a name="l426"><span class="linenum"> 426</span></a>  <span class="comment">     * @param array $list array of the fields that need to be validated</span>
<a name="l427"><span class="linenum"> 427</span></a>  <span class="comment">     * @param string $caller name of the function that requested it, for the debugging message</span>
<a name="l428"><span class="linenum"> 428</span></a>  <span class="comment">     */</span>
<a name="l429"><span class="linenum"> 429</span></a>      protected function <a class="function" onClick="logFunction('ensure_fields_exist')" href="../../_functions/ensure_fields_exist.html" onMouseOver="funcPopup(event,'ensure_fields_exist')">ensure_fields_exist</a>(<a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../../_variables/list.html">$list</a>, <a class="var it1190" onMouseOver="hilite(1190)" onMouseOut="lolite()" onClick="logVariable('caller')" href="../../_variables/caller.html">$caller</a>) {
<a name="l430"><span class="linenum"> 430</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l431"><span class="linenum"> 431</span></a>          <a class="var it5327" onMouseOver="hilite(5327)" onMouseOut="lolite()" onClick="logVariable('missing')" href="../../_variables/missing.html">$missing</a> = <a class="phpfunction" onClick="logFunction('array_diff')" href="../../_functions/array_diff.html" onMouseOver="phpfuncPopup(event,'array_diff')">array_diff</a>(<a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../../_variables/list.html">$list</a>, <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>((array)<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/record.html">record</a>));
<a name="l432"><span class="linenum"> 432</span></a>          if (<a class="var it5327" onMouseOver="hilite(5327)" onMouseOut="lolite()" onClick="logVariable('missing')" href="../../_variables/missing.html">$missing</a>) {
<a name="l433"><span class="linenum"> 433</span></a>              <a class="function" onClick="logFunction('debugging')" href="../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('core_tag_tag::' . <a class="var it1190" onMouseOver="hilite(1190)" onMouseOut="lolite()" onClick="logVariable('caller')" href="../../_variables/caller.html">$caller</a> . '() must be called on fully retrieved tag object. Missing fields: '.
<a name="l434"><span class="linenum"> 434</span></a>                      <a class="function" onClick="logFunction('join')" href="../../_functions/join.html" onMouseOver="funcPopup(event,'join')">join</a>(', ', <a class="var it5327" onMouseOver="hilite(5327)" onMouseOut="lolite()" onClick="logVariable('missing')" href="../../_variables/missing.html">$missing</a>), <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l435"><span class="linenum"> 435</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/record.html">record</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('tag', array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/record.html">record</a>-&gt;id), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l436"><span class="linenum"> 436</span></a>          }
<a name="l437"><span class="linenum"> 437</span></a>      }
<a name="l438"><span class="linenum"> 438</span></a>  
<a name="l439"><span class="linenum"> 439</span></a>      <span class="comment">/**</span>
<a name="l440"><span class="linenum"> 440</span></a>  <span class="comment">     * Deletes the tag instance given the record from tag_instance DB table</span>
<a name="l441"><span class="linenum"> 441</span></a>  <span class="comment">     *</span>
<a name="l442"><span class="linenum"> 442</span></a>  <span class="comment">     * @param stdClass $taginstance</span>
<a name="l443"><span class="linenum"> 443</span></a>  <span class="comment">     * @param bool $fullobject whether $taginstance contains all fields from DB table tag_instance</span>
<a name="l444"><span class="linenum"> 444</span></a>  <span class="comment">     *          (in this case it is safe to add a record snapshot to the event)</span>
<a name="l445"><span class="linenum"> 445</span></a>  <span class="comment">     * @return bool</span>
<a name="l446"><span class="linenum"> 446</span></a>  <span class="comment">     */</span>
<a name="l447"><span class="linenum"> 447</span></a>      protected function <a class="function" onClick="logFunction('delete_instance_as_record')" href="../../_functions/delete_instance_as_record.html" onMouseOver="funcPopup(event,'delete_instance_as_record')">delete_instance_as_record</a>(<a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>, <a class="var it36898" onMouseOver="hilite(36898)" onMouseOut="lolite()" onClick="logVariable('fullobject')" href="../../_variables/fullobject.html">$fullobject</a> = false) {
<a name="l448"><span class="linenum"> 448</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l449"><span class="linenum"> 449</span></a>  
<a name="l450"><span class="linenum"> 450</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_fields_exist')" href="../../_functions/ensure_fields_exist.html" onMouseOver="funcPopup(event,'ensure_fields_exist')">ensure_fields_exist</a>(array('name', 'rawname', 'isstandard'), 'delete_instance_as_record');
<a name="l451"><span class="linenum"> 451</span></a>  
<a name="l452"><span class="linenum"> 452</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('tag_instance', array('id' =&gt; <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>-&gt;<a onClick="logVariable('id')" class="var it43266" onMouseOver="hilite(43266)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l453"><span class="linenum"> 453</span></a>  
<a name="l454"><span class="linenum"> 454</span></a>  <span class="comment">        // We can not fire an event with 'null' as the contextid.</span>
<a name="l455"><span class="linenum"> 455</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>-&gt;<a onClick="logVariable('contextid')" class="var it43266" onMouseOver="hilite(43266)" onMouseOut="lolite()" href="../../_variables/contextid.html">contextid</a>)) {
<a name="l456"><span class="linenum"> 456</span></a>              <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>-&gt;<a onClick="logVariable('contextid')" class="var it43266" onMouseOver="hilite(43266)" onMouseOut="lolite()" href="../../_variables/contextid.html">contextid</a> = <a class="class" onClick="logClass('context_system')" href="../../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>()-&gt;id;
<a name="l457"><span class="linenum"> 457</span></a>          }
<a name="l458"><span class="linenum"> 458</span></a>  
<a name="l459"><span class="linenum"> 459</span></a>  <span class="comment">        // Trigger tag removed event.</span>
<a name="l460"><span class="linenum"> 460</span></a>          <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>-&gt;<a onClick="logVariable('tagid')" class="var it43266" onMouseOver="hilite(43266)" onMouseOut="lolite()" href="../../_variables/tagid.html">tagid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l461"><span class="linenum"> 461</span></a>          \core\event\<a class="class" onClick="logClass('tag_removed')" href="../../_classes/tag_removed.html" onMouseOver="classPopup(event,'tag_removed')">tag_removed</a>::<a class="function" onClick="logFunction('create_from_tag_instance')" href="../../_functions/create_from_tag_instance.html" onMouseOver="funcPopup(event,'create_from_tag_instance')">create_from_tag_instance</a>(<a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('name')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rawname')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/rawname.html">rawname</a>, <a class="var it36898" onMouseOver="hilite(36898)" onMouseOut="lolite()" onClick="logVariable('fullobject')" href="../../_variables/fullobject.html">$fullobject</a>)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l462"><span class="linenum"> 462</span></a>  
<a name="l463"><span class="linenum"> 463</span></a>  <span class="comment">        // If there are no other instances of the tag then consider deleting the tag as well.</span>
<a name="l464"><span class="linenum"> 464</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('isstandard')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/isstandard.html">isstandard</a>) {
<a name="l465"><span class="linenum"> 465</span></a>              if (!<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('tag_instance', array('tagid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>))) {
<a name="l466"><span class="linenum"> 466</span></a>                  self::<a class="function" onClick="logFunction('delete_tags')" href="../../_functions/delete_tags.html" onMouseOver="funcPopup(event,'delete_tags')">delete_tags</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l467"><span class="linenum"> 467</span></a>              }
<a name="l468"><span class="linenum"> 468</span></a>          }
<a name="l469"><span class="linenum"> 469</span></a>  
<a name="l470"><span class="linenum"> 470</span></a>          return true;
<a name="l471"><span class="linenum"> 471</span></a>      }
<a name="l472"><span class="linenum"> 472</span></a>  
<a name="l473"><span class="linenum"> 473</span></a>      <span class="comment">/**</span>
<a name="l474"><span class="linenum"> 474</span></a>  <span class="comment">     * Delete one instance of a tag.  If the last instance was deleted, it will also delete the tag, unless it is standard.</span>
<a name="l475"><span class="linenum"> 475</span></a>  <span class="comment">     *</span>
<a name="l476"><span class="linenum"> 476</span></a>  <span class="comment">     * @param    string $component component responsible for tagging. For BC it can be empty but in this case the</span>
<a name="l477"><span class="linenum"> 477</span></a>  <span class="comment">     *                  query will be slow because DB index will not be used.</span>
<a name="l478"><span class="linenum"> 478</span></a>  <span class="comment">     * @param    string $itemtype the type of the record for which to remove the instance</span>
<a name="l479"><span class="linenum"> 479</span></a>  <span class="comment">     * @param    int    $itemid   the id of the record for which to remove the instance</span>
<a name="l480"><span class="linenum"> 480</span></a>  <span class="comment">     * @param    int    $tiuserid tag instance user id, only needed for tag areas with user tagging (such as core/course)</span>
<a name="l481"><span class="linenum"> 481</span></a>  <span class="comment">     */</span>
<a name="l482"><span class="linenum"> 482</span></a>      protected function <a class="function" onClick="logFunction('delete_instance')" href="../../_functions/delete_instance.html" onMouseOver="funcPopup(event,'delete_instance')">delete_instance</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>, <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>, <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>, <a class="var it36899" onMouseOver="hilite(36899)" onMouseOut="lolite()" onClick="logVariable('tiuserid')" href="../../_variables/tiuserid.html">$tiuserid</a> = 0) {
<a name="l483"><span class="linenum"> 483</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l484"><span class="linenum"> 484</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('tagid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l485"><span class="linenum"> 485</span></a>                  'itemtype' =&gt; <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>, 'itemid' =&gt; <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>);
<a name="l486"><span class="linenum"> 486</span></a>          if (<a class="var it36899" onMouseOver="hilite(36899)" onMouseOut="lolite()" onClick="logVariable('tiuserid')" href="../../_variables/tiuserid.html">$tiuserid</a>) {
<a name="l487"><span class="linenum"> 487</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['tiuserid'] = <a class="var it36899" onMouseOver="hilite(36899)" onMouseOut="lolite()" onClick="logVariable('tiuserid')" href="../../_variables/tiuserid.html">$tiuserid</a>;
<a name="l488"><span class="linenum"> 488</span></a>          }
<a name="l489"><span class="linenum"> 489</span></a>          if (<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>) {
<a name="l490"><span class="linenum"> 490</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['component'] = <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>;
<a name="l491"><span class="linenum"> 491</span></a>          }
<a name="l492"><span class="linenum"> 492</span></a>  
<a name="l493"><span class="linenum"> 493</span></a>          <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('tag_instance', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l494"><span class="linenum"> 494</span></a>          if (!<a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>) {
<a name="l495"><span class="linenum"> 495</span></a>              return;
<a name="l496"><span class="linenum"> 496</span></a>          }
<a name="l497"><span class="linenum"> 497</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('delete_instance_as_record')" href="../../_functions/delete_instance_as_record.html" onMouseOver="funcPopup(event,'delete_instance_as_record')">delete_instance_as_record</a>(<a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>, true);
<a name="l498"><span class="linenum"> 498</span></a>      }
<a name="l499"><span class="linenum"> 499</span></a>  
<a name="l500"><span class="linenum"> 500</span></a>      <span class="comment">/**</span>
<a name="l501"><span class="linenum"> 501</span></a>  <span class="comment">     * Bulk delete all tag instances for a component or tag area</span>
<a name="l502"><span class="linenum"> 502</span></a>  <span class="comment">     *</span>
<a name="l503"><span class="linenum"> 503</span></a>  <span class="comment">     * @param string $component</span>
<a name="l504"><span class="linenum"> 504</span></a>  <span class="comment">     * @param string $itemtype (optional)</span>
<a name="l505"><span class="linenum"> 505</span></a>  <span class="comment">     * @param int $contextid (optional)</span>
<a name="l506"><span class="linenum"> 506</span></a>  <span class="comment">     */</span>
<a name="l507"><span class="linenum"> 507</span></a>      public static function <a class="function" onClick="logFunction('delete_instances')" href="../../_functions/delete_instances.html" onMouseOver="funcPopup(event,'delete_instances')">delete_instances</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>, <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a> = null, <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a> = null) {
<a name="l508"><span class="linenum"> 508</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l509"><span class="linenum"> 509</span></a>  
<a name="l510"><span class="linenum"> 510</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT ti.*, t.name, t.rawname, t.isstandard
<a name="l511"><span class="linenum"> 511</span></a>                    FROM {tag_instance} ti
<a name="l512"><span class="linenum"> 512</span></a>                    JOIN {tag} t
<a name="l513"><span class="linenum"> 513</span></a>                      ON ti.tagid = t.id
<a name="l514"><span class="linenum"> 514</span></a>                   WHERE ti.component = :component&quot;;
<a name="l515"><span class="linenum"> 515</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('component' =&gt; <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>);
<a name="l516"><span class="linenum"> 516</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>)) {
<a name="l517"><span class="linenum"> 517</span></a>              <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> .= &quot; AND ti.contextid = :contextid&quot;;
<a name="l518"><span class="linenum"> 518</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['contextid'] = <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>;
<a name="l519"><span class="linenum"> 519</span></a>          }
<a name="l520"><span class="linenum"> 520</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>)) {
<a name="l521"><span class="linenum"> 521</span></a>              <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> .= &quot; AND ti.itemtype = :itemtype&quot;;
<a name="l522"><span class="linenum"> 522</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['itemtype'] = <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>;
<a name="l523"><span class="linenum"> 523</span></a>          }
<a name="l524"><span class="linenum"> 524</span></a>          if (<a class="var it24585" onMouseOver="hilite(24585)" onMouseOut="lolite()" onClick="logVariable('taginstances')" href="../../_variables/taginstances.html">$taginstances</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>)) {
<a name="l525"><span class="linenum"> 525</span></a>  <span class="comment">            // Now remove all the tag instances.</span>
<a name="l526"><span class="linenum"> 526</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('tag_instance', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l527"><span class="linenum"> 527</span></a>  <span class="comment">            // Save the system context in case the 'contextid' column in the 'tag_instance' table is null.</span>
<a name="l528"><span class="linenum"> 528</span></a>              <a class="var it23648" onMouseOver="hilite(23648)" onMouseOut="lolite()" onClick="logVariable('syscontextid')" href="../../_variables/syscontextid.html">$syscontextid</a> = <a class="class" onClick="logClass('context_system')" href="../../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>()-&gt;id;
<a name="l529"><span class="linenum"> 529</span></a>  <span class="comment">            // Loop through the tag instances and fire an 'tag_removed' event.</span>
<a name="l530"><span class="linenum"> 530</span></a>              foreach (<a class="var it24585" onMouseOver="hilite(24585)" onMouseOut="lolite()" onClick="logVariable('taginstances')" href="../../_variables/taginstances.html">$taginstances</a> as <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>) {
<a name="l531"><span class="linenum"> 531</span></a>  <span class="comment">                // We can not fire an event with 'null' as the contextid.</span>
<a name="l532"><span class="linenum"> 532</span></a>                  if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>-&gt;<a onClick="logVariable('contextid')" class="var it43266" onMouseOver="hilite(43266)" onMouseOut="lolite()" href="../../_variables/contextid.html">contextid</a>)) {
<a name="l533"><span class="linenum"> 533</span></a>                      <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>-&gt;<a onClick="logVariable('contextid')" class="var it43266" onMouseOver="hilite(43266)" onMouseOut="lolite()" href="../../_variables/contextid.html">contextid</a> = <a class="var it23648" onMouseOver="hilite(23648)" onMouseOut="lolite()" onClick="logVariable('syscontextid')" href="../../_variables/syscontextid.html">$syscontextid</a>;
<a name="l534"><span class="linenum"> 534</span></a>                  }
<a name="l535"><span class="linenum"> 535</span></a>  
<a name="l536"><span class="linenum"> 536</span></a>  <span class="comment">                // Trigger tag removed event.</span>
<a name="l537"><span class="linenum"> 537</span></a>                  \core\event\<a class="class" onClick="logClass('tag_removed')" href="../../_classes/tag_removed.html" onMouseOver="classPopup(event,'tag_removed')">tag_removed</a>::<a class="function" onClick="logFunction('create_from_tag_instance')" href="../../_functions/create_from_tag_instance.html" onMouseOver="funcPopup(event,'create_from_tag_instance')">create_from_tag_instance</a>(<a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>, <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>-&gt;<a onClick="logVariable('name')" class="var it43266" onMouseOver="hilite(43266)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>,
<a name="l538"><span class="linenum"> 538</span></a>                          <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>-&gt;<a onClick="logVariable('rawname')" class="var it43266" onMouseOver="hilite(43266)" onMouseOut="lolite()" href="../../_variables/rawname.html">rawname</a>, true)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l539"><span class="linenum"> 539</span></a>              }
<a name="l540"><span class="linenum"> 540</span></a>          }
<a name="l541"><span class="linenum"> 541</span></a>      }
<a name="l542"><span class="linenum"> 542</span></a>  
<a name="l543"><span class="linenum"> 543</span></a>      <span class="comment">/**</span>
<a name="l544"><span class="linenum"> 544</span></a>  <span class="comment">     * Adds a tag instance</span>
<a name="l545"><span class="linenum"> 545</span></a>  <span class="comment">     *</span>
<a name="l546"><span class="linenum"> 546</span></a>  <span class="comment">     * @param string $component</span>
<a name="l547"><span class="linenum"> 547</span></a>  <span class="comment">     * @param string $itemtype</span>
<a name="l548"><span class="linenum"> 548</span></a>  <span class="comment">     * @param string $itemid</span>
<a name="l549"><span class="linenum"> 549</span></a>  <span class="comment">     * @param context $context</span>
<a name="l550"><span class="linenum"> 550</span></a>  <span class="comment">     * @param int $ordering</span>
<a name="l551"><span class="linenum"> 551</span></a>  <span class="comment">     * @param int $tiuserid tag instance user id, only needed for tag areas with user tagging (such as core/course)</span>
<a name="l552"><span class="linenum"> 552</span></a>  <span class="comment">     * @return int id of tag_instance</span>
<a name="l553"><span class="linenum"> 553</span></a>  <span class="comment">     */</span>
<a name="l554"><span class="linenum"> 554</span></a>      protected function <a class="function" onClick="logFunction('add_instance')" href="../../_functions/add_instance.html" onMouseOver="funcPopup(event,'add_instance')">add_instance</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>, <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>, <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>, context <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it2657" onMouseOver="hilite(2657)" onMouseOut="lolite()" onClick="logVariable('ordering')" href="../../_variables/ordering.html">$ordering</a>, <a class="var it36899" onMouseOver="hilite(36899)" onMouseOut="lolite()" onClick="logVariable('tiuserid')" href="../../_variables/tiuserid.html">$tiuserid</a> = 0) {
<a name="l555"><span class="linenum"> 555</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l556"><span class="linenum"> 556</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_fields_exist')" href="../../_functions/ensure_fields_exist.html" onMouseOver="funcPopup(event,'ensure_fields_exist')">ensure_fields_exist</a>(array('name', 'rawname'), 'add_instance');
<a name="l557"><span class="linenum"> 557</span></a>  
<a name="l558"><span class="linenum"> 558</span></a>          <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a> = new StdClass;
<a name="l559"><span class="linenum"> 559</span></a>          <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>-&gt;<a onClick="logVariable('tagid')" class="var it43266" onMouseOver="hilite(43266)" onMouseOut="lolite()" href="../../_variables/tagid.html">tagid</a>        = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l560"><span class="linenum"> 560</span></a>          <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>-&gt;<a onClick="logVariable('component')" class="var it43266" onMouseOver="hilite(43266)" onMouseOut="lolite()" href="../../_variables/component.html">component</a>    = <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a> ? <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a> : '';
<a name="l561"><span class="linenum"> 561</span></a>          <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>-&gt;<a onClick="logVariable('itemid')" class="var it43266" onMouseOver="hilite(43266)" onMouseOut="lolite()" href="../../_variables/itemid.html">itemid</a>       = <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>;
<a name="l562"><span class="linenum"> 562</span></a>          <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>-&gt;<a onClick="logVariable('itemtype')" class="var it43266" onMouseOver="hilite(43266)" onMouseOut="lolite()" href="../../_variables/itemtype.html">itemtype</a>     = <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>;
<a name="l563"><span class="linenum"> 563</span></a>          <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>-&gt;<a onClick="logVariable('contextid')" class="var it43266" onMouseOver="hilite(43266)" onMouseOut="lolite()" href="../../_variables/contextid.html">contextid</a>    = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l564"><span class="linenum"> 564</span></a>          <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>-&gt;<a onClick="logVariable('ordering')" class="var it43266" onMouseOver="hilite(43266)" onMouseOut="lolite()" href="../../_variables/ordering.html">ordering</a>     = <a class="var it2657" onMouseOver="hilite(2657)" onMouseOut="lolite()" onClick="logVariable('ordering')" href="../../_variables/ordering.html">$ordering</a>;
<a name="l565"><span class="linenum"> 565</span></a>          <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>-&gt;<a onClick="logVariable('timecreated')" class="var it43266" onMouseOver="hilite(43266)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a>  = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l566"><span class="linenum"> 566</span></a>          <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>-&gt;<a onClick="logVariable('timemodified')" class="var it43266" onMouseOver="hilite(43266)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>-&gt;<a onClick="logVariable('timecreated')" class="var it43266" onMouseOver="hilite(43266)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a>;
<a name="l567"><span class="linenum"> 567</span></a>          <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>-&gt;<a onClick="logVariable('tiuserid')" class="var it43266" onMouseOver="hilite(43266)" onMouseOut="lolite()" href="../../_variables/tiuserid.html">tiuserid</a>     = <a class="var it36899" onMouseOver="hilite(36899)" onMouseOut="lolite()" onClick="logVariable('tiuserid')" href="../../_variables/tiuserid.html">$tiuserid</a>;
<a name="l568"><span class="linenum"> 568</span></a>  
<a name="l569"><span class="linenum"> 569</span></a>          <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>-&gt;<a onClick="logVariable('id')" class="var it43266" onMouseOver="hilite(43266)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('tag_instance', <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>);
<a name="l570"><span class="linenum"> 570</span></a>  
<a name="l571"><span class="linenum"> 571</span></a>  <span class="comment">        // Trigger tag added event.</span>
<a name="l572"><span class="linenum"> 572</span></a>          \core\event\<a class="class" onClick="logClass('tag_added')" href="../../_classes/tag_added.html" onMouseOver="classPopup(event,'tag_added')">tag_added</a>::<a class="function" onClick="logFunction('create_from_tag_instance')" href="../../_functions/create_from_tag_instance.html" onMouseOver="funcPopup(event,'create_from_tag_instance')">create_from_tag_instance</a>(<a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('name')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rawname')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/rawname.html">rawname</a>, true)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l573"><span class="linenum"> 573</span></a>  
<a name="l574"><span class="linenum"> 574</span></a>          return <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>-&gt;<a onClick="logVariable('id')" class="var it43266" onMouseOver="hilite(43266)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l575"><span class="linenum"> 575</span></a>      }
<a name="l576"><span class="linenum"> 576</span></a>  
<a name="l577"><span class="linenum"> 577</span></a>      <span class="comment">/**</span>
<a name="l578"><span class="linenum"> 578</span></a>  <span class="comment">     * Updates the ordering on tag instance</span>
<a name="l579"><span class="linenum"> 579</span></a>  <span class="comment">     *</span>
<a name="l580"><span class="linenum"> 580</span></a>  <span class="comment">     * @param int $instanceid</span>
<a name="l581"><span class="linenum"> 581</span></a>  <span class="comment">     * @param int $ordering</span>
<a name="l582"><span class="linenum"> 582</span></a>  <span class="comment">     */</span>
<a name="l583"><span class="linenum"> 583</span></a>      protected function <a class="function" onClick="logFunction('update_instance_ordering')" href="../../_functions/update_instance_ordering.html" onMouseOver="funcPopup(event,'update_instance_ordering')">update_instance_ordering</a>(<a class="var it1184" onMouseOver="hilite(1184)" onMouseOut="lolite()" onClick="logVariable('instanceid')" href="../../_variables/instanceid.html">$instanceid</a>, <a class="var it2657" onMouseOver="hilite(2657)" onMouseOut="lolite()" onClick="logVariable('ordering')" href="../../_variables/ordering.html">$ordering</a>) {
<a name="l584"><span class="linenum"> 584</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l585"><span class="linenum"> 585</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = new stdClass();
<a name="l586"><span class="linenum"> 586</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it1184" onMouseOver="hilite(1184)" onMouseOut="lolite()" onClick="logVariable('instanceid')" href="../../_variables/instanceid.html">$instanceid</a>;
<a name="l587"><span class="linenum"> 587</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('ordering')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/ordering.html">ordering</a> = <a class="var it2657" onMouseOver="hilite(2657)" onMouseOut="lolite()" onClick="logVariable('ordering')" href="../../_variables/ordering.html">$ordering</a>;
<a name="l588"><span class="linenum"> 588</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l589"><span class="linenum"> 589</span></a>  
<a name="l590"><span class="linenum"> 590</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('tag_instance', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l591"><span class="linenum"> 591</span></a>      }
<a name="l592"><span class="linenum"> 592</span></a>  
<a name="l593"><span class="linenum"> 593</span></a>      <span class="comment">/**</span>
<a name="l594"><span class="linenum"> 594</span></a>  <span class="comment">     * Get the array of core_tag_tag objects associated with an item (instances).</span>
<a name="l595"><span class="linenum"> 595</span></a>  <span class="comment">     *</span>
<a name="l596"><span class="linenum"> 596</span></a>  <span class="comment">     * Use {@link core_tag_tag::get_item_tags_array()} if you wish to get the same data as simple array.</span>
<a name="l597"><span class="linenum"> 597</span></a>  <span class="comment">     *</span>
<a name="l598"><span class="linenum"> 598</span></a>  <span class="comment">     * @param string $component component responsible for tagging. For BC it can be empty but in this case the</span>
<a name="l599"><span class="linenum"> 599</span></a>  <span class="comment">     *               query will be slow because DB index will not be used.</span>
<a name="l600"><span class="linenum"> 600</span></a>  <span class="comment">     * @param string $itemtype type of the tagged item</span>
<a name="l601"><span class="linenum"> 601</span></a>  <span class="comment">     * @param int $itemid</span>
<a name="l602"><span class="linenum"> 602</span></a>  <span class="comment">     * @param int $standardonly wether to return only standard tags or any</span>
<a name="l603"><span class="linenum"> 603</span></a>  <span class="comment">     * @param int $tiuserid tag instance user id, only needed for tag areas with user tagging</span>
<a name="l604"><span class="linenum"> 604</span></a>  <span class="comment">     * @return core_tag_tag[] each object contains additional fields taginstanceid, taginstancecontextid and ordering</span>
<a name="l605"><span class="linenum"> 605</span></a>  <span class="comment">     */</span>
<a name="l606"><span class="linenum"> 606</span></a>      public static function <a class="function" onClick="logFunction('get_item_tags')" href="../../_functions/get_item_tags.html" onMouseOver="funcPopup(event,'get_item_tags')">get_item_tags</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>, <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>, <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>, <a class="var it2652" onMouseOver="hilite(2652)" onMouseOut="lolite()" onClick="logVariable('standardonly')" href="../../_variables/standardonly.html">$standardonly</a> = self::BOTH_STANDARD_AND_NOT,
<a name="l607"><span class="linenum"> 607</span></a>              <a class="var it36899" onMouseOver="hilite(36899)" onMouseOut="lolite()" onClick="logVariable('tiuserid')" href="../../_variables/tiuserid.html">$tiuserid</a> = 0) {
<a name="l608"><span class="linenum"> 608</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l609"><span class="linenum"> 609</span></a>  
<a name="l610"><span class="linenum"> 610</span></a>          if (static::<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>, <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>) === false) {
<a name="l611"><span class="linenum"> 611</span></a>  <span class="comment">            // Tagging area is properly defined but not enabled - return empty array.</span>
<a name="l612"><span class="linenum"> 612</span></a>              return array();
<a name="l613"><span class="linenum"> 613</span></a>          }
<a name="l614"><span class="linenum"> 614</span></a>  
<a name="l615"><span class="linenum"> 615</span></a>          <a class="var it2652" onMouseOver="hilite(2652)" onMouseOut="lolite()" onClick="logVariable('standardonly')" href="../../_variables/standardonly.html">$standardonly</a> = (int)<a class="var it2652" onMouseOver="hilite(2652)" onMouseOut="lolite()" onClick="logVariable('standardonly')" href="../../_variables/standardonly.html">$standardonly</a>; <span class="comment">// In case somebody passed bool.</span>
<a name="l616"><span class="linenum"> 616</span></a>  
<a name="l617"><span class="linenum"> 617</span></a>  <span class="comment">        // Note: if the fields in this query are changed, you need to do the same changes in core_tag_tag::get_correlated_tags().</span>
<a name="l618"><span class="linenum"> 618</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT ti.id AS taginstanceid, tg.id, tg.isstandard, tg.name, tg.rawname, tg.flag,
<a name="l619"><span class="linenum"> 619</span></a>                      tg.tagcollid, ti.ordering, ti.contextid AS taginstancecontextid
<a name="l620"><span class="linenum"> 620</span></a>                    FROM {tag_instance} ti
<a name="l621"><span class="linenum"> 621</span></a>                    JOIN {tag} tg ON tg.id = ti.tagid
<a name="l622"><span class="linenum"> 622</span></a>                    WHERE ti.itemtype = :itemtype AND ti.itemid = :itemid &quot;.
<a name="l623"><span class="linenum"> 623</span></a>                  (<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a> ? &quot;AND ti.component = :component &quot; : &quot;&quot;).
<a name="l624"><span class="linenum"> 624</span></a>                  (<a class="var it36899" onMouseOver="hilite(36899)" onMouseOut="lolite()" onClick="logVariable('tiuserid')" href="../../_variables/tiuserid.html">$tiuserid</a> ? &quot;AND ti.tiuserid = :tiuserid &quot; : &quot;&quot;).
<a name="l625"><span class="linenum"> 625</span></a>                  ((<a class="var it2652" onMouseOver="hilite(2652)" onMouseOut="lolite()" onClick="logVariable('standardonly')" href="../../_variables/standardonly.html">$standardonly</a> == self::STANDARD_ONLY) ? &quot;AND tg.isstandard = 1 &quot; : &quot;&quot;).
<a name="l626"><span class="linenum"> 626</span></a>                  ((<a class="var it2652" onMouseOver="hilite(2652)" onMouseOut="lolite()" onClick="logVariable('standardonly')" href="../../_variables/standardonly.html">$standardonly</a> == self::NOT_STANDARD_ONLY) ? &quot;AND tg.isstandard = 0 &quot; : &quot;&quot;).
<a name="l627"><span class="linenum"> 627</span></a>                 &quot;ORDER BY ti.ordering ASC, ti.id&quot;;
<a name="l628"><span class="linenum"> 628</span></a>  
<a name="l629"><span class="linenum"> 629</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array();
<a name="l630"><span class="linenum"> 630</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['itemtype'] = <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>;
<a name="l631"><span class="linenum"> 631</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['itemid'] = <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>;
<a name="l632"><span class="linenum"> 632</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['component'] = <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>;
<a name="l633"><span class="linenum"> 633</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['tiuserid'] = <a class="var it36899" onMouseOver="hilite(36899)" onMouseOut="lolite()" onClick="logVariable('tiuserid')" href="../../_variables/tiuserid.html">$tiuserid</a>;
<a name="l634"><span class="linenum"> 634</span></a>  
<a name="l635"><span class="linenum"> 635</span></a>          <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l636"><span class="linenum"> 636</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = array();
<a name="l637"><span class="linenum"> 637</span></a>          foreach (<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a> as <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a> =&gt; <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>) {
<a name="l638"><span class="linenum"> 638</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>] = new static(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>);
<a name="l639"><span class="linenum"> 639</span></a>          }
<a name="l640"><span class="linenum"> 640</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l641"><span class="linenum"> 641</span></a>      }
<a name="l642"><span class="linenum"> 642</span></a>  
<a name="l643"><span class="linenum"> 643</span></a>      <span class="comment">/**</span>
<a name="l644"><span class="linenum"> 644</span></a>  <span class="comment">     * Returns the list of display names of the tags that are associated with an item</span>
<a name="l645"><span class="linenum"> 645</span></a>  <span class="comment">     *</span>
<a name="l646"><span class="linenum"> 646</span></a>  <span class="comment">     * This method is usually used to prefill the form data for the 'tags' form element</span>
<a name="l647"><span class="linenum"> 647</span></a>  <span class="comment">     *</span>
<a name="l648"><span class="linenum"> 648</span></a>  <span class="comment">     * @param string $component component responsible for tagging. For BC it can be empty but in this case the</span>
<a name="l649"><span class="linenum"> 649</span></a>  <span class="comment">     *               query will be slow because DB index will not be used.</span>
<a name="l650"><span class="linenum"> 650</span></a>  <span class="comment">     * @param string $itemtype type of the tagged item</span>
<a name="l651"><span class="linenum"> 651</span></a>  <span class="comment">     * @param int $itemid</span>
<a name="l652"><span class="linenum"> 652</span></a>  <span class="comment">     * @param int $standardonly wether to return only standard tags or any</span>
<a name="l653"><span class="linenum"> 653</span></a>  <span class="comment">     * @param int $tiuserid tag instance user id, only needed for tag areas with user tagging</span>
<a name="l654"><span class="linenum"> 654</span></a>  <span class="comment">     * @param bool $ashtml (default true) if true will return htmlspecialchars encoded tag names</span>
<a name="l655"><span class="linenum"> 655</span></a>  <span class="comment">     * @return string[] array of tags display names</span>
<a name="l656"><span class="linenum"> 656</span></a>  <span class="comment">     */</span>
<a name="l657"><span class="linenum"> 657</span></a>      public static function <a class="function" onClick="logFunction('get_item_tags_array')" href="../../_functions/get_item_tags_array.html" onMouseOver="funcPopup(event,'get_item_tags_array')">get_item_tags_array</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>, <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>, <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>, <a class="var it2652" onMouseOver="hilite(2652)" onMouseOut="lolite()" onClick="logVariable('standardonly')" href="../../_variables/standardonly.html">$standardonly</a> = self::BOTH_STANDARD_AND_NOT,
<a name="l658"><span class="linenum"> 658</span></a>              <a class="var it36899" onMouseOver="hilite(36899)" onMouseOut="lolite()" onClick="logVariable('tiuserid')" href="../../_variables/tiuserid.html">$tiuserid</a> = 0, <a class="var it36892" onMouseOver="hilite(36892)" onMouseOut="lolite()" onClick="logVariable('ashtml')" href="../../_variables/ashtml.html">$ashtml</a> = true) {
<a name="l659"><span class="linenum"> 659</span></a>          <a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a> = array();
<a name="l660"><span class="linenum"> 660</span></a>          foreach (static::<a class="function" onClick="logFunction('get_item_tags')" href="../../_functions/get_item_tags.html" onMouseOver="funcPopup(event,'get_item_tags')">get_item_tags</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>, <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>, <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>, <a class="var it2652" onMouseOver="hilite(2652)" onMouseOut="lolite()" onClick="logVariable('standardonly')" href="../../_variables/standardonly.html">$standardonly</a>, <a class="var it36899" onMouseOver="hilite(36899)" onMouseOut="lolite()" onClick="logVariable('tiuserid')" href="../../_variables/tiuserid.html">$tiuserid</a>) as <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>) {
<a name="l661"><span class="linenum"> 661</span></a>              <a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a>[<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>-&gt;<a onClick="logVariable('id')" class="var it43262" onMouseOver="hilite(43262)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>-&gt;<a class="function" onClick="logFunction('get_display_name')" href="../../_functions/get_display_name.html" onMouseOver="funcPopup(event,'get_display_name')">get_display_name</a>(<a class="var it36892" onMouseOver="hilite(36892)" onMouseOut="lolite()" onClick="logVariable('ashtml')" href="../../_variables/ashtml.html">$ashtml</a>);
<a name="l662"><span class="linenum"> 662</span></a>          }
<a name="l663"><span class="linenum"> 663</span></a>          return <a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a>;
<a name="l664"><span class="linenum"> 664</span></a>      }
<a name="l665"><span class="linenum"> 665</span></a>  
<a name="l666"><span class="linenum"> 666</span></a>      <span class="comment">/**</span>
<a name="l667"><span class="linenum"> 667</span></a>  <span class="comment">     * Sets the list of tag instances for one item (table record).</span>
<a name="l668"><span class="linenum"> 668</span></a>  <span class="comment">     *</span>
<a name="l669"><span class="linenum"> 669</span></a>  <span class="comment">     * Extra exsisting instances are removed, new ones are added. New tags are created if needed.</span>
<a name="l670"><span class="linenum"> 670</span></a>  <span class="comment">     *</span>
<a name="l671"><span class="linenum"> 671</span></a>  <span class="comment">     * This method can not be used for setting tags relations, please use set_related_tags()</span>
<a name="l672"><span class="linenum"> 672</span></a>  <span class="comment">     *</span>
<a name="l673"><span class="linenum"> 673</span></a>  <span class="comment">     * @param string $component component responsible for tagging</span>
<a name="l674"><span class="linenum"> 674</span></a>  <span class="comment">     * @param string $itemtype type of the tagged item</span>
<a name="l675"><span class="linenum"> 675</span></a>  <span class="comment">     * @param int $itemid</span>
<a name="l676"><span class="linenum"> 676</span></a>  <span class="comment">     * @param context $context</span>
<a name="l677"><span class="linenum"> 677</span></a>  <span class="comment">     * @param array $tagnames</span>
<a name="l678"><span class="linenum"> 678</span></a>  <span class="comment">     * @param int $tiuserid tag instance user id, only needed for tag areas with user tagging (such as core/course)</span>
<a name="l679"><span class="linenum"> 679</span></a>  <span class="comment">     */</span>
<a name="l680"><span class="linenum"> 680</span></a>      public static function <a class="function" onClick="logFunction('set_item_tags')" href="../../_functions/set_item_tags.html" onMouseOver="funcPopup(event,'set_item_tags')">set_item_tags</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>, <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>, <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>, context <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it24580" onMouseOver="hilite(24580)" onMouseOut="lolite()" onClick="logVariable('tagnames')" href="../../_variables/tagnames.html">$tagnames</a>, <a class="var it36899" onMouseOver="hilite(36899)" onMouseOut="lolite()" onClick="logVariable('tiuserid')" href="../../_variables/tiuserid.html">$tiuserid</a> = 0) {
<a name="l681"><span class="linenum"> 681</span></a>          if (<a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a> === 'tag') {
<a name="l682"><span class="linenum"> 682</span></a>              if (<a class="var it36899" onMouseOver="hilite(36899)" onMouseOut="lolite()" onClick="logVariable('tiuserid')" href="../../_variables/tiuserid.html">$tiuserid</a>) {
<a name="l683"><span class="linenum"> 683</span></a>                  throw new coding_exeption('Related tags can not have tag instance userid');
<a name="l684"><span class="linenum"> 684</span></a>              }
<a name="l685"><span class="linenum"> 685</span></a>              <a class="function" onClick="logFunction('debugging')" href="../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('You can not use <a class="function" onClick="logFunction('set_item_tags')" href="../../_functions/set_item_tags.html" onMouseOver="funcPopup(event,'set_item_tags')">set_item_tags</a>() for tagging a tag, please use <a class="function" onClick="logFunction('set_related_tags')" href="../../_functions/set_related_tags.html" onMouseOver="funcPopup(event,'set_related_tags')">set_related_tags</a>()', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l686"><span class="linenum"> 686</span></a>              static::<a class="function" onClick="logFunction('get')" href="../../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>, '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>)-&gt;<a class="function" onClick="logFunction('set_related_tags')" href="../../_functions/set_related_tags.html" onMouseOver="funcPopup(event,'set_related_tags')">set_related_tags</a>(<a class="var it24580" onMouseOver="hilite(24580)" onMouseOut="lolite()" onClick="logVariable('tagnames')" href="../../_variables/tagnames.html">$tagnames</a>);
<a name="l687"><span class="linenum"> 687</span></a>              return;
<a name="l688"><span class="linenum"> 688</span></a>          }
<a name="l689"><span class="linenum"> 689</span></a>  
<a name="l690"><span class="linenum"> 690</span></a>          if (<a class="var it24580" onMouseOver="hilite(24580)" onMouseOut="lolite()" onClick="logVariable('tagnames')" href="../../_variables/tagnames.html">$tagnames</a> !== null &amp;&amp; static::<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>, <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>) === false) {
<a name="l691"><span class="linenum"> 691</span></a>  <span class="comment">            // Tagging area is properly defined but not enabled - do nothing.</span>
<a name="l692"><span class="linenum"> 692</span></a>  <span class="comment">            // Unless we are deleting the item tags ($tagnames === null), in which case proceed with deleting.</span>
<a name="l693"><span class="linenum"> 693</span></a>              return;
<a name="l694"><span class="linenum"> 694</span></a>          }
<a name="l695"><span class="linenum"> 695</span></a>  
<a name="l696"><span class="linenum"> 696</span></a>  <span class="comment">        // Apply clean_param() to all tags.</span>
<a name="l697"><span class="linenum"> 697</span></a>          if (<a class="var it24580" onMouseOver="hilite(24580)" onMouseOut="lolite()" onClick="logVariable('tagnames')" href="../../_variables/tagnames.html">$tagnames</a>) {
<a name="l698"><span class="linenum"> 698</span></a>              <a class="var it226" onMouseOver="hilite(226)" onMouseOut="lolite()" onClick="logVariable('tagcollid')" href="../../_variables/tagcollid.html">$tagcollid</a> = <a class="class" onClick="logClass('core_tag_area')" href="../../_classes/core_tag_area.html" onMouseOver="classPopup(event,'core_tag_area')">core_tag_area</a>::<a class="function" onClick="logFunction('get_collection')" href="../../_functions/get_collection.html" onMouseOver="funcPopup(event,'get_collection')">get_collection</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>, <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>);
<a name="l699"><span class="linenum"> 699</span></a>              <a class="var it2655" onMouseOver="hilite(2655)" onMouseOut="lolite()" onClick="logVariable('tagobjects')" href="../../_variables/tagobjects.html">$tagobjects</a> = static::<a class="function" onClick="logFunction('create_if_missing')" href="../../_functions/create_if_missing.html" onMouseOver="funcPopup(event,'create_if_missing')">create_if_missing</a>(<a class="var it226" onMouseOver="hilite(226)" onMouseOut="lolite()" onClick="logVariable('tagcollid')" href="../../_variables/tagcollid.html">$tagcollid</a>, <a class="var it24580" onMouseOver="hilite(24580)" onMouseOut="lolite()" onClick="logVariable('tagnames')" href="../../_variables/tagnames.html">$tagnames</a>);
<a name="l700"><span class="linenum"> 700</span></a>          } else {
<a name="l701"><span class="linenum"> 701</span></a>              <a class="var it2655" onMouseOver="hilite(2655)" onMouseOut="lolite()" onClick="logVariable('tagobjects')" href="../../_variables/tagobjects.html">$tagobjects</a> = array();
<a name="l702"><span class="linenum"> 702</span></a>          }
<a name="l703"><span class="linenum"> 703</span></a>  
<a name="l704"><span class="linenum"> 704</span></a>          <a class="var it36900" onMouseOver="hilite(36900)" onMouseOut="lolite()" onClick="logVariable('currenttags')" href="../../_variables/currenttags.html">$currenttags</a> = static::<a class="function" onClick="logFunction('get_item_tags')" href="../../_functions/get_item_tags.html" onMouseOver="funcPopup(event,'get_item_tags')">get_item_tags</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>, <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>, <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>, self::BOTH_STANDARD_AND_NOT, <a class="var it36899" onMouseOver="hilite(36899)" onMouseOut="lolite()" onClick="logVariable('tiuserid')" href="../../_variables/tiuserid.html">$tiuserid</a>);
<a name="l705"><span class="linenum"> 705</span></a>  
<a name="l706"><span class="linenum"> 706</span></a>  <span class="comment">        // For data coherence reasons, it's better to remove deleted tags</span>
<a name="l707"><span class="linenum"> 707</span></a>  <span class="comment">        // before adding new data: ordering could be duplicated.</span>
<a name="l708"><span class="linenum"> 708</span></a>          foreach (<a class="var it36900" onMouseOver="hilite(36900)" onMouseOut="lolite()" onClick="logVariable('currenttags')" href="../../_variables/currenttags.html">$currenttags</a> as <a class="var it27060" onMouseOver="hilite(27060)" onMouseOut="lolite()" onClick="logVariable('currenttag')" href="../../_variables/currenttag.html">$currenttag</a>) {
<a name="l709"><span class="linenum"> 709</span></a>              if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it27060" onMouseOver="hilite(27060)" onMouseOut="lolite()" onClick="logVariable('currenttag')" href="../../_variables/currenttag.html">$currenttag</a>-&gt;<a onClick="logVariable('name')" class="var it45534" onMouseOver="hilite(45534)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>, <a class="var it2655" onMouseOver="hilite(2655)" onMouseOut="lolite()" onClick="logVariable('tagobjects')" href="../../_variables/tagobjects.html">$tagobjects</a>)) {
<a name="l710"><span class="linenum"> 710</span></a>                  <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a> = (object)array('id' =&gt; <a class="var it27060" onMouseOver="hilite(27060)" onMouseOut="lolite()" onClick="logVariable('currenttag')" href="../../_variables/currenttag.html">$currenttag</a>-&gt;<a onClick="logVariable('taginstanceid')" class="var it45534" onMouseOver="hilite(45534)" onMouseOut="lolite()" href="../../_variables/taginstanceid.html">taginstanceid</a>,
<a name="l711"><span class="linenum"> 711</span></a>                      'itemtype' =&gt; <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>, 'itemid' =&gt; <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>,
<a name="l712"><span class="linenum"> 712</span></a>                      'contextid' =&gt; <a class="var it27060" onMouseOver="hilite(27060)" onMouseOut="lolite()" onClick="logVariable('currenttag')" href="../../_variables/currenttag.html">$currenttag</a>-&gt;<a onClick="logVariable('taginstancecontextid')" class="var it45534" onMouseOver="hilite(45534)" onMouseOut="lolite()" href="../../_variables/taginstancecontextid.html">taginstancecontextid</a>, 'tiuserid' =&gt; <a class="var it36899" onMouseOver="hilite(36899)" onMouseOut="lolite()" onClick="logVariable('tiuserid')" href="../../_variables/tiuserid.html">$tiuserid</a>);
<a name="l713"><span class="linenum"> 713</span></a>                  <a class="var it27060" onMouseOver="hilite(27060)" onMouseOut="lolite()" onClick="logVariable('currenttag')" href="../../_variables/currenttag.html">$currenttag</a>-&gt;<a class="function" onClick="logFunction('delete_instance_as_record')" href="../../_functions/delete_instance_as_record.html" onMouseOver="funcPopup(event,'delete_instance_as_record')">delete_instance_as_record</a>(<a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>, false);
<a name="l714"><span class="linenum"> 714</span></a>              }
<a name="l715"><span class="linenum"> 715</span></a>          }
<a name="l716"><span class="linenum"> 716</span></a>  
<a name="l717"><span class="linenum"> 717</span></a>          <a class="var it2657" onMouseOver="hilite(2657)" onMouseOut="lolite()" onClick="logVariable('ordering')" href="../../_variables/ordering.html">$ordering</a> = -1;
<a name="l718"><span class="linenum"> 718</span></a>          foreach (<a class="var it2655" onMouseOver="hilite(2655)" onMouseOut="lolite()" onClick="logVariable('tagobjects')" href="../../_variables/tagobjects.html">$tagobjects</a> as <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> =&gt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>) {
<a name="l719"><span class="linenum"> 719</span></a>              <a class="var it2657" onMouseOver="hilite(2657)" onMouseOut="lolite()" onClick="logVariable('ordering')" href="../../_variables/ordering.html">$ordering</a>++;
<a name="l720"><span class="linenum"> 720</span></a>              foreach (<a class="var it36900" onMouseOver="hilite(36900)" onMouseOut="lolite()" onClick="logVariable('currenttags')" href="../../_variables/currenttags.html">$currenttags</a> as <a class="var it27060" onMouseOver="hilite(27060)" onMouseOut="lolite()" onClick="logVariable('currenttag')" href="../../_variables/currenttag.html">$currenttag</a>) {
<a name="l721"><span class="linenum"> 721</span></a>                  if (<a class="phpfunction" onClick="logFunction('strval')" href="../../_functions/strval.html" onMouseOver="phpfuncPopup(event,'strval')">strval</a>(<a class="var it27060" onMouseOver="hilite(27060)" onMouseOut="lolite()" onClick="logVariable('currenttag')" href="../../_variables/currenttag.html">$currenttag</a>-&gt;<a onClick="logVariable('name')" class="var it45534" onMouseOver="hilite(45534)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>) === <a class="phpfunction" onClick="logFunction('strval')" href="../../_functions/strval.html" onMouseOver="phpfuncPopup(event,'strval')">strval</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>)) {
<a name="l722"><span class="linenum"> 722</span></a>                      if (<a class="var it27060" onMouseOver="hilite(27060)" onMouseOut="lolite()" onClick="logVariable('currenttag')" href="../../_variables/currenttag.html">$currenttag</a>-&gt;<a onClick="logVariable('ordering')" class="var it45534" onMouseOver="hilite(45534)" onMouseOut="lolite()" href="../../_variables/ordering.html">ordering</a> != <a class="var it2657" onMouseOver="hilite(2657)" onMouseOut="lolite()" onClick="logVariable('ordering')" href="../../_variables/ordering.html">$ordering</a>) {
<a name="l723"><span class="linenum"> 723</span></a>                          <a class="var it27060" onMouseOver="hilite(27060)" onMouseOut="lolite()" onClick="logVariable('currenttag')" href="../../_variables/currenttag.html">$currenttag</a>-&gt;<a class="function" onClick="logFunction('update_instance_ordering')" href="../../_functions/update_instance_ordering.html" onMouseOver="funcPopup(event,'update_instance_ordering')">update_instance_ordering</a>(<a class="var it27060" onMouseOver="hilite(27060)" onMouseOut="lolite()" onClick="logVariable('currenttag')" href="../../_variables/currenttag.html">$currenttag</a>-&gt;<a onClick="logVariable('taginstanceid')" class="var it45534" onMouseOver="hilite(45534)" onMouseOut="lolite()" href="../../_variables/taginstanceid.html">taginstanceid</a>, <a class="var it2657" onMouseOver="hilite(2657)" onMouseOut="lolite()" onClick="logVariable('ordering')" href="../../_variables/ordering.html">$ordering</a>);
<a name="l724"><span class="linenum"> 724</span></a>                      }
<a name="l725"><span class="linenum"> 725</span></a>                      continue 2;
<a name="l726"><span class="linenum"> 726</span></a>                  }
<a name="l727"><span class="linenum"> 727</span></a>              }
<a name="l728"><span class="linenum"> 728</span></a>              <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>-&gt;<a class="function" onClick="logFunction('add_instance')" href="../../_functions/add_instance.html" onMouseOver="funcPopup(event,'add_instance')">add_instance</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>, <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>, <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it2657" onMouseOver="hilite(2657)" onMouseOut="lolite()" onClick="logVariable('ordering')" href="../../_variables/ordering.html">$ordering</a>, <a class="var it36899" onMouseOver="hilite(36899)" onMouseOut="lolite()" onClick="logVariable('tiuserid')" href="../../_variables/tiuserid.html">$tiuserid</a>);
<a name="l729"><span class="linenum"> 729</span></a>          }
<a name="l730"><span class="linenum"> 730</span></a>      }
<a name="l731"><span class="linenum"> 731</span></a>  
<a name="l732"><span class="linenum"> 732</span></a>      <span class="comment">/**</span>
<a name="l733"><span class="linenum"> 733</span></a>  <span class="comment">     * Removes all tags from an item.</span>
<a name="l734"><span class="linenum"> 734</span></a>  <span class="comment">     *</span>
<a name="l735"><span class="linenum"> 735</span></a>  <span class="comment">     * All tags will be removed even if tagging is disabled in this area. This is</span>
<a name="l736"><span class="linenum"> 736</span></a>  <span class="comment">     * usually called when the item itself has been deleted.</span>
<a name="l737"><span class="linenum"> 737</span></a>  <span class="comment">     *</span>
<a name="l738"><span class="linenum"> 738</span></a>  <span class="comment">     * @param string $component component responsible for tagging</span>
<a name="l739"><span class="linenum"> 739</span></a>  <span class="comment">     * @param string $itemtype type of the tagged item</span>
<a name="l740"><span class="linenum"> 740</span></a>  <span class="comment">     * @param int $itemid</span>
<a name="l741"><span class="linenum"> 741</span></a>  <span class="comment">     * @param int $tiuserid tag instance user id, only needed for tag areas with user tagging (such as core/course)</span>
<a name="l742"><span class="linenum"> 742</span></a>  <span class="comment">     */</span>
<a name="l743"><span class="linenum"> 743</span></a>      public static function <a class="function" onClick="logFunction('remove_all_item_tags')" href="../../_functions/remove_all_item_tags.html" onMouseOver="funcPopup(event,'remove_all_item_tags')">remove_all_item_tags</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>, <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>, <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>, <a class="var it36899" onMouseOver="hilite(36899)" onMouseOut="lolite()" onClick="logVariable('tiuserid')" href="../../_variables/tiuserid.html">$tiuserid</a> = 0) {
<a name="l744"><span class="linenum"> 744</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_system')" href="../../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(); <span class="comment">// Context will not be used.</span>
<a name="l745"><span class="linenum"> 745</span></a>          static::<a class="function" onClick="logFunction('set_item_tags')" href="../../_functions/set_item_tags.html" onMouseOver="funcPopup(event,'set_item_tags')">set_item_tags</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>, <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>, <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, null, <a class="var it36899" onMouseOver="hilite(36899)" onMouseOut="lolite()" onClick="logVariable('tiuserid')" href="../../_variables/tiuserid.html">$tiuserid</a>);
<a name="l746"><span class="linenum"> 746</span></a>      }
<a name="l747"><span class="linenum"> 747</span></a>  
<a name="l748"><span class="linenum"> 748</span></a>      <span class="comment">/**</span>
<a name="l749"><span class="linenum"> 749</span></a>  <span class="comment">     * Adds a tag to an item, without overwriting the current tags.</span>
<a name="l750"><span class="linenum"> 750</span></a>  <span class="comment">     *</span>
<a name="l751"><span class="linenum"> 751</span></a>  <span class="comment">     * If the tag has already been added to the record, no changes are made.</span>
<a name="l752"><span class="linenum"> 752</span></a>  <span class="comment">     *</span>
<a name="l753"><span class="linenum"> 753</span></a>  <span class="comment">     * @param string $component the component that was tagged</span>
<a name="l754"><span class="linenum"> 754</span></a>  <span class="comment">     * @param string $itemtype the type of record to tag ('post' for blogs, 'user' for users, etc.)</span>
<a name="l755"><span class="linenum"> 755</span></a>  <span class="comment">     * @param int $itemid the id of the record to tag</span>
<a name="l756"><span class="linenum"> 756</span></a>  <span class="comment">     * @param context $context the context of where this tag was assigned</span>
<a name="l757"><span class="linenum"> 757</span></a>  <span class="comment">     * @param string $tagname the tag to add</span>
<a name="l758"><span class="linenum"> 758</span></a>  <span class="comment">     * @param int $tiuserid tag instance user id, only needed for tag areas with user tagging (such as core/course)</span>
<a name="l759"><span class="linenum"> 759</span></a>  <span class="comment">     * @return int id of tag_instance that was either created or already existed or null if tagging is not enabled</span>
<a name="l760"><span class="linenum"> 760</span></a>  <span class="comment">     */</span>
<a name="l761"><span class="linenum"> 761</span></a>      public static function <a class="function" onClick="logFunction('add_item_tag')" href="../../_functions/add_item_tag.html" onMouseOver="funcPopup(event,'add_item_tag')">add_item_tag</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>, <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>, <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>, context <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it2390" onMouseOver="hilite(2390)" onMouseOut="lolite()" onClick="logVariable('tagname')" href="../../_variables/tagname.html">$tagname</a>, <a class="var it36899" onMouseOver="hilite(36899)" onMouseOut="lolite()" onClick="logVariable('tiuserid')" href="../../_variables/tiuserid.html">$tiuserid</a> = 0) {
<a name="l762"><span class="linenum"> 762</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l763"><span class="linenum"> 763</span></a>  
<a name="l764"><span class="linenum"> 764</span></a>          if (static::<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>, <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>) === false) {
<a name="l765"><span class="linenum"> 765</span></a>  <span class="comment">            // Tagging area is properly defined but not enabled - do nothing.</span>
<a name="l766"><span class="linenum"> 766</span></a>              return null;
<a name="l767"><span class="linenum"> 767</span></a>          }
<a name="l768"><span class="linenum"> 768</span></a>  
<a name="l769"><span class="linenum"> 769</span></a>          <a class="var it2648" onMouseOver="hilite(2648)" onMouseOut="lolite()" onClick="logVariable('rawname')" href="../../_variables/rawname.html">$rawname</a> = <a class="function" onClick="logFunction('clean_param')" href="../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it2390" onMouseOver="hilite(2390)" onMouseOut="lolite()" onClick="logVariable('tagname')" href="../../_variables/tagname.html">$tagname</a>, <a class="constant" onClick="logConstant('PARAM_TAG')" href="../../_constants/PARAM_TAG.html" onMouseOver="constPopup(event,'PARAM_TAG')">PARAM_TAG</a>);
<a name="l770"><span class="linenum"> 770</span></a>          <a class="var it36902" onMouseOver="hilite(36902)" onMouseOut="lolite()" onClick="logVariable('normalisedname')" href="../../_variables/normalisedname.html">$normalisedname</a> = <a class="class" onClick="logClass('core_text')" href="../../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="phpfunction" onClick="logFunction('strtolower')" href="../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="var it2648" onMouseOver="hilite(2648)" onMouseOut="lolite()" onClick="logVariable('rawname')" href="../../_variables/rawname.html">$rawname</a>);
<a name="l771"><span class="linenum"> 771</span></a>          <a class="var it226" onMouseOver="hilite(226)" onMouseOut="lolite()" onClick="logVariable('tagcollid')" href="../../_variables/tagcollid.html">$tagcollid</a> = <a class="class" onClick="logClass('core_tag_area')" href="../../_classes/core_tag_area.html" onMouseOver="classPopup(event,'core_tag_area')">core_tag_area</a>::<a class="function" onClick="logFunction('get_collection')" href="../../_functions/get_collection.html" onMouseOver="funcPopup(event,'get_collection')">get_collection</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>, <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>);
<a name="l772"><span class="linenum"> 772</span></a>  
<a name="l773"><span class="linenum"> 773</span></a>          <a class="var it5330" onMouseOver="hilite(5330)" onMouseOut="lolite()" onClick="logVariable('usersql')" href="../../_variables/usersql.html">$usersql</a> = <a class="var it36899" onMouseOver="hilite(36899)" onMouseOut="lolite()" onClick="logVariable('tiuserid')" href="../../_variables/tiuserid.html">$tiuserid</a> ? &quot; AND ti.tiuserid = :tiuserid &quot; : &quot;&quot;;
<a name="l774"><span class="linenum"> 774</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = 'SELECT t.*, ti.id AS taginstanceid
<a name="l775"><span class="linenum"> 775</span></a>                  FROM {tag} t
<a name="l776"><span class="linenum"> 776</span></a>                  LEFT JOIN {tag_instance} ti ON ti.tagid = t.id AND ti.itemtype = :itemtype '.
<a name="l777"><span class="linenum"> 777</span></a>                  <a class="var it5330" onMouseOver="hilite(5330)" onMouseOut="lolite()" onClick="logVariable('usersql')" href="../../_variables/usersql.html">$usersql</a> .
<a name="l778"><span class="linenum"> 778</span></a>                  'AND ti.itemid = :itemid AND ti.component = :component
<a name="l779"><span class="linenum"> 779</span></a>                  WHERE t.name = :name AND t.tagcollid = :tagcollid';
<a name="l780"><span class="linenum"> 780</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('name' =&gt; <a class="var it36902" onMouseOver="hilite(36902)" onMouseOut="lolite()" onClick="logVariable('normalisedname')" href="../../_variables/normalisedname.html">$normalisedname</a>, 'tagcollid' =&gt; <a class="var it226" onMouseOver="hilite(226)" onMouseOut="lolite()" onClick="logVariable('tagcollid')" href="../../_variables/tagcollid.html">$tagcollid</a>, 'itemtype' =&gt; <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>,
<a name="l781"><span class="linenum"> 781</span></a>              'itemid' =&gt; <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>, 'component' =&gt; <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>, 'tiuserid' =&gt; <a class="var it36899" onMouseOver="hilite(36899)" onMouseOut="lolite()" onClick="logVariable('tiuserid')" href="../../_variables/tiuserid.html">$tiuserid</a>);
<a name="l782"><span class="linenum"> 782</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record_sql')" href="../../_functions/get_record_sql.html" onMouseOver="funcPopup(event,'get_record_sql')">get_record_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l783"><span class="linenum"> 783</span></a>          if (<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>) {
<a name="l784"><span class="linenum"> 784</span></a>              if (<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('taginstanceid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/taginstanceid.html">taginstanceid</a>) {
<a name="l785"><span class="linenum"> 785</span></a>  <span class="comment">                // Tag was already added to the item, nothing to do here.</span>
<a name="l786"><span class="linenum"> 786</span></a>                  return <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('taginstanceid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/taginstanceid.html">taginstanceid</a>;
<a name="l787"><span class="linenum"> 787</span></a>              }
<a name="l788"><span class="linenum"> 788</span></a>              <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a> = new static(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>);
<a name="l789"><span class="linenum"> 789</span></a>          } else {
<a name="l790"><span class="linenum"> 790</span></a>  <span class="comment">            // The tag does not exist yet, create it.</span>
<a name="l791"><span class="linenum"> 791</span></a>              <a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a> = static::<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it226" onMouseOver="hilite(226)" onMouseOut="lolite()" onClick="logVariable('tagcollid')" href="../../_variables/tagcollid.html">$tagcollid</a>, array(<a class="var it2390" onMouseOver="hilite(2390)" onMouseOut="lolite()" onClick="logVariable('tagname')" href="../../_variables/tagname.html">$tagname</a>));
<a name="l792"><span class="linenum"> 792</span></a>              <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a>);
<a name="l793"><span class="linenum"> 793</span></a>          }
<a name="l794"><span class="linenum"> 794</span></a>  
<a name="l795"><span class="linenum"> 795</span></a>          <a class="var it2657" onMouseOver="hilite(2657)" onMouseOut="lolite()" onClick="logVariable('ordering')" href="../../_variables/ordering.html">$ordering</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field_sql')" href="../../_functions/get_field_sql.html" onMouseOver="funcPopup(event,'get_field_sql')">get_field_sql</a>('SELECT <a class="phpfunction" onClick="logFunction('MAX')" href="../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">MAX</a>(ordering) FROM {tag_instance} ti
<a name="l796"><span class="linenum"> 796</span></a>                  WHERE ti.itemtype = :itemtype AND ti.itemid = itemid AND
<a name="l797"><span class="linenum"> 797</span></a>                  ti.component = :component' . <a class="var it5330" onMouseOver="hilite(5330)" onMouseOut="lolite()" onClick="logVariable('usersql')" href="../../_variables/usersql.html">$usersql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l798"><span class="linenum"> 798</span></a>  
<a name="l799"><span class="linenum"> 799</span></a>          return <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>-&gt;<a class="function" onClick="logFunction('add_instance')" href="../../_functions/add_instance.html" onMouseOver="funcPopup(event,'add_instance')">add_instance</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>, <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>, <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it2657" onMouseOver="hilite(2657)" onMouseOut="lolite()" onClick="logVariable('ordering')" href="../../_variables/ordering.html">$ordering</a> + 1, <a class="var it36899" onMouseOver="hilite(36899)" onMouseOut="lolite()" onClick="logVariable('tiuserid')" href="../../_variables/tiuserid.html">$tiuserid</a>);
<a name="l800"><span class="linenum"> 800</span></a>      }
<a name="l801"><span class="linenum"> 801</span></a>  
<a name="l802"><span class="linenum"> 802</span></a>      <span class="comment">/**</span>
<a name="l803"><span class="linenum"> 803</span></a>  <span class="comment">     * Removes the tag from an item without changing the other tags</span>
<a name="l804"><span class="linenum"> 804</span></a>  <span class="comment">     *</span>
<a name="l805"><span class="linenum"> 805</span></a>  <span class="comment">     * @param string $component the component that was tagged</span>
<a name="l806"><span class="linenum"> 806</span></a>  <span class="comment">     * @param string $itemtype the type of record to tag ('post' for blogs, 'user' for users, etc.)</span>
<a name="l807"><span class="linenum"> 807</span></a>  <span class="comment">     * @param int $itemid the id of the record to tag</span>
<a name="l808"><span class="linenum"> 808</span></a>  <span class="comment">     * @param string $tagname the tag to remove</span>
<a name="l809"><span class="linenum"> 809</span></a>  <span class="comment">     * @param int $tiuserid tag instance user id, only needed for tag areas with user tagging (such as core/course)</span>
<a name="l810"><span class="linenum"> 810</span></a>  <span class="comment">     */</span>
<a name="l811"><span class="linenum"> 811</span></a>      public static function <a class="function" onClick="logFunction('remove_item_tag')" href="../../_functions/remove_item_tag.html" onMouseOver="funcPopup(event,'remove_item_tag')">remove_item_tag</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>, <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>, <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>, <a class="var it2390" onMouseOver="hilite(2390)" onMouseOut="lolite()" onClick="logVariable('tagname')" href="../../_variables/tagname.html">$tagname</a>, <a class="var it36899" onMouseOver="hilite(36899)" onMouseOut="lolite()" onClick="logVariable('tiuserid')" href="../../_variables/tiuserid.html">$tiuserid</a> = 0) {
<a name="l812"><span class="linenum"> 812</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l813"><span class="linenum"> 813</span></a>  
<a name="l814"><span class="linenum"> 814</span></a>          if (static::<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>, <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>) === false) {
<a name="l815"><span class="linenum"> 815</span></a>  <span class="comment">            // Tagging area is properly defined but not enabled - do nothing.</span>
<a name="l816"><span class="linenum"> 816</span></a>              return array();
<a name="l817"><span class="linenum"> 817</span></a>          }
<a name="l818"><span class="linenum"> 818</span></a>  
<a name="l819"><span class="linenum"> 819</span></a>          <a class="var it2648" onMouseOver="hilite(2648)" onMouseOut="lolite()" onClick="logVariable('rawname')" href="../../_variables/rawname.html">$rawname</a> = <a class="function" onClick="logFunction('clean_param')" href="../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it2390" onMouseOver="hilite(2390)" onMouseOut="lolite()" onClick="logVariable('tagname')" href="../../_variables/tagname.html">$tagname</a>, <a class="constant" onClick="logConstant('PARAM_TAG')" href="../../_constants/PARAM_TAG.html" onMouseOver="constPopup(event,'PARAM_TAG')">PARAM_TAG</a>);
<a name="l820"><span class="linenum"> 820</span></a>          <a class="var it36902" onMouseOver="hilite(36902)" onMouseOut="lolite()" onClick="logVariable('normalisedname')" href="../../_variables/normalisedname.html">$normalisedname</a> = <a class="class" onClick="logClass('core_text')" href="../../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="phpfunction" onClick="logFunction('strtolower')" href="../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="var it2648" onMouseOver="hilite(2648)" onMouseOut="lolite()" onClick="logVariable('rawname')" href="../../_variables/rawname.html">$rawname</a>);
<a name="l821"><span class="linenum"> 821</span></a>  
<a name="l822"><span class="linenum"> 822</span></a>          <a class="var it5330" onMouseOver="hilite(5330)" onMouseOut="lolite()" onClick="logVariable('usersql')" href="../../_variables/usersql.html">$usersql</a> = <a class="var it36899" onMouseOver="hilite(36899)" onMouseOut="lolite()" onClick="logVariable('tiuserid')" href="../../_variables/tiuserid.html">$tiuserid</a> ? &quot; AND tiuserid = :tiuserid &quot; : &quot;&quot;;
<a name="l823"><span class="linenum"> 823</span></a>          <a class="var it36903" onMouseOver="hilite(36903)" onMouseOut="lolite()" onClick="logVariable('componentsql')" href="../../_variables/componentsql.html">$componentsql</a> = <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a> ? &quot; AND ti.component = :component &quot; : &quot;&quot;;
<a name="l824"><span class="linenum"> 824</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = 'SELECT t.*, ti.id AS taginstanceid, ti.contextid AS taginstancecontextid, ti.ordering
<a name="l825"><span class="linenum"> 825</span></a>                  FROM {tag} t JOIN {tag_instance} ti ON ti.tagid = t.id ' . <a class="var it5330" onMouseOver="hilite(5330)" onMouseOut="lolite()" onClick="logVariable('usersql')" href="../../_variables/usersql.html">$usersql</a> . '
<a name="l826"><span class="linenum"> 826</span></a>                  WHERE t.name = :name AND ti.itemtype = :itemtype
<a name="l827"><span class="linenum"> 827</span></a>                  AND ti.itemid = :itemid ' . <a class="var it36903" onMouseOver="hilite(36903)" onMouseOut="lolite()" onClick="logVariable('componentsql')" href="../../_variables/componentsql.html">$componentsql</a>;
<a name="l828"><span class="linenum"> 828</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('name' =&gt; <a class="var it36902" onMouseOver="hilite(36902)" onMouseOut="lolite()" onClick="logVariable('normalisedname')" href="../../_variables/normalisedname.html">$normalisedname</a>,
<a name="l829"><span class="linenum"> 829</span></a>              'itemtype' =&gt; <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>, 'itemid' =&gt; <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>, 'component' =&gt; <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>,
<a name="l830"><span class="linenum"> 830</span></a>              'tiuserid' =&gt; <a class="var it36899" onMouseOver="hilite(36899)" onMouseOut="lolite()" onClick="logVariable('tiuserid')" href="../../_variables/tiuserid.html">$tiuserid</a>);
<a name="l831"><span class="linenum"> 831</span></a>          if (<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record_sql')" href="../../_functions/get_record_sql.html" onMouseOver="funcPopup(event,'get_record_sql')">get_record_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>)) {
<a name="l832"><span class="linenum"> 832</span></a>              <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a> = (object)array('id' =&gt; <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('taginstanceid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/taginstanceid.html">taginstanceid</a>,
<a name="l833"><span class="linenum"> 833</span></a>                  'itemtype' =&gt; <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>, 'itemid' =&gt; <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>,
<a name="l834"><span class="linenum"> 834</span></a>                  'contextid' =&gt; <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('taginstancecontextid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/taginstancecontextid.html">taginstancecontextid</a>, 'tiuserid' =&gt; <a class="var it36899" onMouseOver="hilite(36899)" onMouseOut="lolite()" onClick="logVariable('tiuserid')" href="../../_variables/tiuserid.html">$tiuserid</a>);
<a name="l835"><span class="linenum"> 835</span></a>              <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a> = new static(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>);
<a name="l836"><span class="linenum"> 836</span></a>              <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>-&gt;<a class="function" onClick="logFunction('delete_instance_as_record')" href="../../_functions/delete_instance_as_record.html" onMouseOver="funcPopup(event,'delete_instance_as_record')">delete_instance_as_record</a>(<a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>, false);
<a name="l837"><span class="linenum"> 837</span></a>              <a class="var it36903" onMouseOver="hilite(36903)" onMouseOut="lolite()" onClick="logVariable('componentsql')" href="../../_variables/componentsql.html">$componentsql</a> = <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a> ? &quot; AND component = :component &quot; : &quot;&quot;;
<a name="l838"><span class="linenum"> 838</span></a>              <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;UPDATE {tag_instance} SET ordering = ordering - 1
<a name="l839"><span class="linenum"> 839</span></a>                      WHERE itemtype = :itemtype
<a name="l840"><span class="linenum"> 840</span></a>                  AND itemid = :itemid <a class="var it36903" onMouseOver="hilite(36903)" onMouseOut="lolite()" onClick="logVariable('componentsql')" href="../../_variables/componentsql.html">$componentsql</a> <a class="var it5330" onMouseOver="hilite(5330)" onMouseOut="lolite()" onClick="logVariable('usersql')" href="../../_variables/usersql.html">$usersql</a>
<a name="l841"><span class="linenum"> 841</span></a>                  AND ordering &gt; :ordering&quot;;
<a name="l842"><span class="linenum"> 842</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['ordering'] = <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('ordering')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/ordering.html">ordering</a>;
<a name="l843"><span class="linenum"> 843</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('execute')" href="../../_functions/execute.html" onMouseOver="funcPopup(event,'execute')">execute</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l844"><span class="linenum"> 844</span></a>          }
<a name="l845"><span class="linenum"> 845</span></a>      }
<a name="l846"><span class="linenum"> 846</span></a>  
<a name="l847"><span class="linenum"> 847</span></a>      <span class="comment">/**</span>
<a name="l848"><span class="linenum"> 848</span></a>  <span class="comment">     * Allows to move all tag instances from one context to another</span>
<a name="l849"><span class="linenum"> 849</span></a>  <span class="comment">     *</span>
<a name="l850"><span class="linenum"> 850</span></a>  <span class="comment">     * @param string $component the component that was tagged</span>
<a name="l851"><span class="linenum"> 851</span></a>  <span class="comment">     * @param string $itemtype the type of record to tag ('post' for blogs, 'user' for users, etc.)</span>
<a name="l852"><span class="linenum"> 852</span></a>  <span class="comment">     * @param context $oldcontext</span>
<a name="l853"><span class="linenum"> 853</span></a>  <span class="comment">     * @param context $newcontext</span>
<a name="l854"><span class="linenum"> 854</span></a>  <span class="comment">     */</span>
<a name="l855"><span class="linenum"> 855</span></a>      public static function <a class="function" onClick="logFunction('move_context')" href="../../_functions/move_context.html" onMouseOver="funcPopup(event,'move_context')">move_context</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>, <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>, <a class="var it7759" onMouseOver="hilite(7759)" onMouseOut="lolite()" onClick="logVariable('oldcontext')" href="../../_variables/oldcontext.html">$oldcontext</a>, <a class="var it12558" onMouseOver="hilite(12558)" onMouseOut="lolite()" onClick="logVariable('newcontext')" href="../../_variables/newcontext.html">$newcontext</a>) {
<a name="l856"><span class="linenum"> 856</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l857"><span class="linenum"> 857</span></a>          if (<a class="var it7759" onMouseOver="hilite(7759)" onMouseOut="lolite()" onClick="logVariable('oldcontext')" href="../../_variables/oldcontext.html">$oldcontext</a> instanceof context) {
<a name="l858"><span class="linenum"> 858</span></a>              <a class="var it7759" onMouseOver="hilite(7759)" onMouseOut="lolite()" onClick="logVariable('oldcontext')" href="../../_variables/oldcontext.html">$oldcontext</a> = <a class="var it7759" onMouseOver="hilite(7759)" onMouseOut="lolite()" onClick="logVariable('oldcontext')" href="../../_variables/oldcontext.html">$oldcontext</a>-&gt;<a onClick="logVariable('id')" class="var it43400" onMouseOver="hilite(43400)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l859"><span class="linenum"> 859</span></a>          }
<a name="l860"><span class="linenum"> 860</span></a>          if (<a class="var it12558" onMouseOver="hilite(12558)" onMouseOut="lolite()" onClick="logVariable('newcontext')" href="../../_variables/newcontext.html">$newcontext</a> instanceof context) {
<a name="l861"><span class="linenum"> 861</span></a>              <a class="var it12558" onMouseOver="hilite(12558)" onMouseOut="lolite()" onClick="logVariable('newcontext')" href="../../_variables/newcontext.html">$newcontext</a> = <a class="var it12558" onMouseOver="hilite(12558)" onMouseOut="lolite()" onClick="logVariable('newcontext')" href="../../_variables/newcontext.html">$newcontext</a>-&gt;<a onClick="logVariable('id')" class="var it44345" onMouseOver="hilite(44345)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l862"><span class="linenum"> 862</span></a>          }
<a name="l863"><span class="linenum"> 863</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('tag_instance', 'contextid', <a class="var it12558" onMouseOver="hilite(12558)" onMouseOut="lolite()" onClick="logVariable('newcontext')" href="../../_variables/newcontext.html">$newcontext</a>,
<a name="l864"><span class="linenum"> 864</span></a>                  array('component' =&gt; <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>, 'itemtype' =&gt; <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>, 'contextid' =&gt; <a class="var it7759" onMouseOver="hilite(7759)" onMouseOut="lolite()" onClick="logVariable('oldcontext')" href="../../_variables/oldcontext.html">$oldcontext</a>));
<a name="l865"><span class="linenum"> 865</span></a>      }
<a name="l866"><span class="linenum"> 866</span></a>  
<a name="l867"><span class="linenum"> 867</span></a>      <span class="comment">/**</span>
<a name="l868"><span class="linenum"> 868</span></a>  <span class="comment">     * Moves all tags of the specified items to the new context</span>
<a name="l869"><span class="linenum"> 869</span></a>  <span class="comment">     *</span>
<a name="l870"><span class="linenum"> 870</span></a>  <span class="comment">     * @param string $component the component that was tagged</span>
<a name="l871"><span class="linenum"> 871</span></a>  <span class="comment">     * @param string $itemtype the type of record to tag ('post' for blogs, 'user' for users, etc.)</span>
<a name="l872"><span class="linenum"> 872</span></a>  <span class="comment">     * @param array $itemids</span>
<a name="l873"><span class="linenum"> 873</span></a>  <span class="comment">     * @param context|int $newcontext target context to move tags to</span>
<a name="l874"><span class="linenum"> 874</span></a>  <span class="comment">     */</span>
<a name="l875"><span class="linenum"> 875</span></a>      public static function <a class="function" onClick="logFunction('change_items_context')" href="../../_functions/change_items_context.html" onMouseOver="funcPopup(event,'change_items_context')">change_items_context</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>, <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>, <a class="var it5688" onMouseOver="hilite(5688)" onMouseOut="lolite()" onClick="logVariable('itemids')" href="../../_variables/itemids.html">$itemids</a>, <a class="var it12558" onMouseOver="hilite(12558)" onMouseOut="lolite()" onClick="logVariable('newcontext')" href="../../_variables/newcontext.html">$newcontext</a>) {
<a name="l876"><span class="linenum"> 876</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l877"><span class="linenum"> 877</span></a>          if (empty(<a class="var it5688" onMouseOver="hilite(5688)" onMouseOut="lolite()" onClick="logVariable('itemids')" href="../../_variables/itemids.html">$itemids</a>)) {
<a name="l878"><span class="linenum"> 878</span></a>              return;
<a name="l879"><span class="linenum"> 879</span></a>          }
<a name="l880"><span class="linenum"> 880</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it5688" onMouseOver="hilite(5688)" onMouseOut="lolite()" onClick="logVariable('itemids')" href="../../_variables/itemids.html">$itemids</a>)) {
<a name="l881"><span class="linenum"> 881</span></a>              <a class="var it5688" onMouseOver="hilite(5688)" onMouseOut="lolite()" onClick="logVariable('itemids')" href="../../_variables/itemids.html">$itemids</a> = array(<a class="var it5688" onMouseOver="hilite(5688)" onMouseOut="lolite()" onClick="logVariable('itemids')" href="../../_variables/itemids.html">$itemids</a>);
<a name="l882"><span class="linenum"> 882</span></a>          }
<a name="l883"><span class="linenum"> 883</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it5688" onMouseOver="hilite(5688)" onMouseOut="lolite()" onClick="logVariable('itemids')" href="../../_variables/itemids.html">$itemids</a>, <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>);
<a name="l884"><span class="linenum"> 884</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['component'] = <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>;
<a name="l885"><span class="linenum"> 885</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['itemtype'] = <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>;
<a name="l886"><span class="linenum"> 886</span></a>          if (<a class="var it12558" onMouseOver="hilite(12558)" onMouseOut="lolite()" onClick="logVariable('newcontext')" href="../../_variables/newcontext.html">$newcontext</a> instanceof context) {
<a name="l887"><span class="linenum"> 887</span></a>              <a class="var it12558" onMouseOver="hilite(12558)" onMouseOut="lolite()" onClick="logVariable('newcontext')" href="../../_variables/newcontext.html">$newcontext</a> = <a class="var it12558" onMouseOver="hilite(12558)" onMouseOut="lolite()" onClick="logVariable('newcontext')" href="../../_variables/newcontext.html">$newcontext</a>-&gt;<a onClick="logVariable('id')" class="var it44345" onMouseOver="hilite(44345)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l888"><span class="linenum"> 888</span></a>          }
<a name="l889"><span class="linenum"> 889</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field_select')" href="../../_functions/set_field_select.html" onMouseOver="funcPopup(event,'set_field_select')">set_field_select</a>('tag_instance', 'contextid', <a class="var it12558" onMouseOver="hilite(12558)" onMouseOut="lolite()" onClick="logVariable('newcontext')" href="../../_variables/newcontext.html">$newcontext</a>,
<a name="l890"><span class="linenum"> 890</span></a>              'component = :component AND itemtype = :itemtype AND itemid ' . <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l891"><span class="linenum"> 891</span></a>      }
<a name="l892"><span class="linenum"> 892</span></a>  
<a name="l893"><span class="linenum"> 893</span></a>      <span class="comment">/**</span>
<a name="l894"><span class="linenum"> 894</span></a>  <span class="comment">     * Updates the information about the tag</span>
<a name="l895"><span class="linenum"> 895</span></a>  <span class="comment">     *</span>
<a name="l896"><span class="linenum"> 896</span></a>  <span class="comment">     * @param array|stdClass $data data to update, may contain: isstandard, description, descriptionformat, rawname</span>
<a name="l897"><span class="linenum"> 897</span></a>  <span class="comment">     * @return bool whether the tag was updated. False may be returned if: all new values match the existing,</span>
<a name="l898"><span class="linenum"> 898</span></a>  <span class="comment">     *         or it was attempted to rename the tag to the name that is already used.</span>
<a name="l899"><span class="linenum"> 899</span></a>  <span class="comment">     */</span>
<a name="l900"><span class="linenum"> 900</span></a>      public function <a class="function" onClick="logFunction('update')" href="../../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) {
<a name="l901"><span class="linenum"> 901</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('COURSE')" href="../../_variables/COURSE.html">$COURSE</a>;
<a name="l902"><span class="linenum"> 902</span></a>  
<a name="l903"><span class="linenum"> 903</span></a>          <a class="var it12374" onMouseOver="hilite(12374)" onMouseOut="lolite()" onClick="logVariable('allowedfields')" href="../../_variables/allowedfields.html">$allowedfields</a> = array('isstandard', 'description', 'descriptionformat', 'rawname');
<a name="l904"><span class="linenum"> 904</span></a>  
<a name="l905"><span class="linenum"> 905</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = (array)<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>;
<a name="l906"><span class="linenum"> 906</span></a>          if (<a class="var it3379" onMouseOver="hilite(3379)" onMouseOut="lolite()" onClick="logVariable('extrafields')" href="../../_variables/extrafields.html">$extrafields</a> = <a class="phpfunction" onClick="logFunction('array_diff')" href="../../_functions/array_diff.html" onMouseOver="phpfuncPopup(event,'array_diff')">array_diff</a>(<a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>), <a class="var it12374" onMouseOver="hilite(12374)" onMouseOut="lolite()" onClick="logVariable('allowedfields')" href="../../_variables/allowedfields.html">$allowedfields</a>)) {
<a name="l907"><span class="linenum"> 907</span></a>              <a class="function" onClick="logFunction('debugging')" href="../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('The <a class="function" onClick="logFunction('field')" href="../../_functions/field.html" onMouseOver="funcPopup(event,'field')">field</a>(s) '.<a class="function" onClick="logFunction('join')" href="../../_functions/join.html" onMouseOver="funcPopup(event,'join')">join</a>(', ', <a class="var it3379" onMouseOver="hilite(3379)" onMouseOut="lolite()" onClick="logVariable('extrafields')" href="../../_variables/extrafields.html">$extrafields</a>).' will be ignored when updating the tag',
<a name="l908"><span class="linenum"> 908</span></a>                      <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l909"><span class="linenum"> 909</span></a>          }
<a name="l910"><span class="linenum"> 910</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = array_intersect_key(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, array_fill_keys(<a class="var it12374" onMouseOver="hilite(12374)" onMouseOut="lolite()" onClick="logVariable('allowedfields')" href="../../_variables/allowedfields.html">$allowedfields</a>, 1));
<a name="l911"><span class="linenum"> 911</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_fields_exist')" href="../../_functions/ensure_fields_exist.html" onMouseOver="funcPopup(event,'ensure_fields_exist')">ensure_fields_exist</a>(<a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(array('tagcollid', 'userid', 'name', 'rawname'), <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>)), 'update');
<a name="l912"><span class="linenum"> 912</span></a>  
<a name="l913"><span class="linenum"> 913</span></a>  <span class="comment">        // Validate the tag name.</span>
<a name="l914"><span class="linenum"> 914</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('rawname', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>)) {
<a name="l915"><span class="linenum"> 915</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>['rawname'] = <a class="function" onClick="logFunction('clean_param')" href="../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>['rawname'], <a class="constant" onClick="logConstant('PARAM_TAG')" href="../../_constants/PARAM_TAG.html" onMouseOver="constPopup(event,'PARAM_TAG')">PARAM_TAG</a>);
<a name="l916"><span class="linenum"> 916</span></a>              <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = <a class="class" onClick="logClass('core_text')" href="../../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="phpfunction" onClick="logFunction('strtolower')" href="../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>['rawname']);
<a name="l917"><span class="linenum"> 917</span></a>  
<a name="l918"><span class="linenum"> 918</span></a>              if (!<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> || <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>['rawname'] === <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rawname')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/rawname.html">rawname</a>) {
<a name="l919"><span class="linenum"> 919</span></a>                  unset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>['rawname']);
<a name="l920"><span class="linenum"> 920</span></a>              } else if (<a class="var it10898" onMouseOver="hilite(10898)" onMouseOut="lolite()" onClick="logVariable('existing')" href="../../_variables/existing.html">$existing</a> = static::<a class="function" onClick="logFunction('get_by_name')" href="../../_functions/get_by_name.html" onMouseOver="funcPopup(event,'get_by_name')">get_by_name</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tagcollid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/tagcollid.html">tagcollid</a>, <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, 'id')) {
<a name="l921"><span class="linenum"> 921</span></a>  <span class="comment">                // Prevent the rename if a tag with that name already exists.</span>
<a name="l922"><span class="linenum"> 922</span></a>                  if (<a class="var it10898" onMouseOver="hilite(10898)" onMouseOut="lolite()" onClick="logVariable('existing')" href="../../_variables/existing.html">$existing</a>-&gt;<a onClick="logVariable('id')" class="var it43440" onMouseOver="hilite(43440)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> != <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l923"><span class="linenum"> 923</span></a>                      throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('namesalreadybeeingused', 'core_tag');
<a name="l924"><span class="linenum"> 924</span></a>                  }
<a name="l925"><span class="linenum"> 925</span></a>              }
<a name="l926"><span class="linenum"> 926</span></a>              if (isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>['rawname'])) {
<a name="l927"><span class="linenum"> 927</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>['name'] = <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>;
<a name="l928"><span class="linenum"> 928</span></a>              }
<a name="l929"><span class="linenum"> 929</span></a>          }
<a name="l930"><span class="linenum"> 930</span></a>  
<a name="l931"><span class="linenum"> 931</span></a>  <span class="comment">        // Validate the tag type.</span>
<a name="l932"><span class="linenum"> 932</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('isstandard', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>)) {
<a name="l933"><span class="linenum"> 933</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>['isstandard'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>['isstandard'] ? 1 : 0;
<a name="l934"><span class="linenum"> 934</span></a>          }
<a name="l935"><span class="linenum"> 935</span></a>  
<a name="l936"><span class="linenum"> 936</span></a>  <span class="comment">        // Find only the attributes that need to be changed.</span>
<a name="l937"><span class="linenum"> 937</span></a>          <a class="var it36904" onMouseOver="hilite(36904)" onMouseOut="lolite()" onClick="logVariable('originalname')" href="../../_variables/originalname.html">$originalname</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('name')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>;
<a name="l938"><span class="linenum"> 938</span></a>          foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> =&gt; <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>) {
<a name="l939"><span class="linenum"> 939</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/record.html">record</a>-&gt;<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> !== <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>) {
<a name="l940"><span class="linenum"> 940</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('record')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/record.html">record</a>-&gt;<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> = <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>;
<a name="l941"><span class="linenum"> 941</span></a>              } else {
<a name="l942"><span class="linenum"> 942</span></a>                  unset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>]);
<a name="l943"><span class="linenum"> 943</span></a>              }
<a name="l944"><span class="linenum"> 944</span></a>          }
<a name="l945"><span class="linenum"> 945</span></a>          if (empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>)) {
<a name="l946"><span class="linenum"> 946</span></a>              return false;
<a name="l947"><span class="linenum"> 947</span></a>          }
<a name="l948"><span class="linenum"> 948</span></a>  
<a name="l949"><span class="linenum"> 949</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>['id'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l950"><span class="linenum"> 950</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>['timemodified'] = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l951"><span class="linenum"> 951</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('tag', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l952"><span class="linenum"> 952</span></a>  
<a name="l953"><span class="linenum"> 953</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('tag_updated')" href="../../_classes/tag_updated.html" onMouseOver="classPopup(event,'tag_updated')">tag_updated</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l954"><span class="linenum"> 954</span></a>              'objectid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l955"><span class="linenum"> 955</span></a>              'relateduserid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('userid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>,
<a name="l956"><span class="linenum"> 956</span></a>              'context' =&gt; <a class="class" onClick="logClass('context_system')" href="../../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(),
<a name="l957"><span class="linenum"> 957</span></a>              'other' =&gt; array(
<a name="l958"><span class="linenum"> 958</span></a>                  'name' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('name')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>,
<a name="l959"><span class="linenum"> 959</span></a>                  'rawname' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;rawname
<a name="l960"><span class="linenum"> 960</span></a>              )
<a name="l961"><span class="linenum"> 961</span></a>          ));
<a name="l962"><span class="linenum"> 962</span></a>          if (isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>['rawname'])) {
<a name="l963"><span class="linenum"> 963</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('set_legacy_logdata')" href="../../_functions/set_legacy_logdata.html" onMouseOver="funcPopup(event,'set_legacy_logdata')">set_legacy_logdata</a>(array(<a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('COURSE')" href="../../_variables/COURSE.html">$COURSE</a>-&gt;<a onClick="logVariable('id')" class="var it43316" onMouseOver="hilite(43316)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'tag', 'update', 'index.php?id='. <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l964"><span class="linenum"> 964</span></a>                  <a class="var it36904" onMouseOver="hilite(36904)" onMouseOut="lolite()" onClick="logVariable('originalname')" href="../../_variables/originalname.html">$originalname</a> . '-&gt;'. <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('name')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>));
<a name="l965"><span class="linenum"> 965</span></a>          }
<a name="l966"><span class="linenum"> 966</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l967"><span class="linenum"> 967</span></a>          return true;
<a name="l968"><span class="linenum"> 968</span></a>      }
<a name="l969"><span class="linenum"> 969</span></a>  
<a name="l970"><span class="linenum"> 970</span></a>      <span class="comment">/**</span>
<a name="l971"><span class="linenum"> 971</span></a>  <span class="comment">     * Flag a tag as inappropriate</span>
<a name="l972"><span class="linenum"> 972</span></a>  <span class="comment">     */</span>
<a name="l973"><span class="linenum"> 973</span></a>      public function <a class="function" onClick="logFunction('flag')" href="../../_functions/flag.html" onMouseOver="funcPopup(event,'flag')">flag</a>() {
<a name="l974"><span class="linenum"> 974</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l975"><span class="linenum"> 975</span></a>  
<a name="l976"><span class="linenum"> 976</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_fields_exist')" href="../../_functions/ensure_fields_exist.html" onMouseOver="funcPopup(event,'ensure_fields_exist')">ensure_fields_exist</a>(array('name', 'userid', 'rawname', 'flag'), 'flag');
<a name="l977"><span class="linenum"> 977</span></a>  
<a name="l978"><span class="linenum"> 978</span></a>  <span class="comment">        // Update all the tags to flagged.</span>
<a name="l979"><span class="linenum"> 979</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l980"><span class="linenum"> 980</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('flag')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/flag.html">flag</a>++;
<a name="l981"><span class="linenum"> 981</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('tag', array('timemodified' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a>,
<a name="l982"><span class="linenum"> 982</span></a>              'flag' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('flag')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/flag.html">flag</a>, 'id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l983"><span class="linenum"> 983</span></a>  
<a name="l984"><span class="linenum"> 984</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('tag_flagged')" href="../../_classes/tag_flagged.html" onMouseOver="classPopup(event,'tag_flagged')">tag_flagged</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l985"><span class="linenum"> 985</span></a>              'objectid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l986"><span class="linenum"> 986</span></a>              'relateduserid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('userid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>,
<a name="l987"><span class="linenum"> 987</span></a>              'context' =&gt; <a class="class" onClick="logClass('context_system')" href="../../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(),
<a name="l988"><span class="linenum"> 988</span></a>              'other' =&gt; array(
<a name="l989"><span class="linenum"> 989</span></a>                  'name' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('name')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>,
<a name="l990"><span class="linenum"> 990</span></a>                  'rawname' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;rawname
<a name="l991"><span class="linenum"> 991</span></a>              )
<a name="l992"><span class="linenum"> 992</span></a>  
<a name="l993"><span class="linenum"> 993</span></a>          ));
<a name="l994"><span class="linenum"> 994</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l995"><span class="linenum"> 995</span></a>      }
<a name="l996"><span class="linenum"> 996</span></a>  
<a name="l997"><span class="linenum"> 997</span></a>      <span class="comment">/**</span>
<a name="l998"><span class="linenum"> 998</span></a>  <span class="comment">     * Remove the inappropriate flag on a tag.</span>
<a name="l999"><span class="linenum"> 999</span></a>  <span class="comment">     */</span>
<a name="l1000"><span class="linenum">1000</span></a>      public function <a class="function" onClick="logFunction('reset_flag')" href="../../_functions/reset_flag.html" onMouseOver="funcPopup(event,'reset_flag')">reset_flag</a>() {
<a name="l1001"><span class="linenum">1001</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1002"><span class="linenum">1002</span></a>  
<a name="l1003"><span class="linenum">1003</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_fields_exist')" href="../../_functions/ensure_fields_exist.html" onMouseOver="funcPopup(event,'ensure_fields_exist')">ensure_fields_exist</a>(array('name', 'userid', 'rawname', 'flag'), 'flag');
<a name="l1004"><span class="linenum">1004</span></a>  
<a name="l1005"><span class="linenum">1005</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('flag')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/flag.html">flag</a>) {
<a name="l1006"><span class="linenum">1006</span></a>  <span class="comment">            // Nothing to do.</span>
<a name="l1007"><span class="linenum">1007</span></a>              return false;
<a name="l1008"><span class="linenum">1008</span></a>          }
<a name="l1009"><span class="linenum">1009</span></a>  
<a name="l1010"><span class="linenum">1010</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l1011"><span class="linenum">1011</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('flag')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/flag.html">flag</a> = 0;
<a name="l1012"><span class="linenum">1012</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('tag', array('timemodified' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a>,
<a name="l1013"><span class="linenum">1013</span></a>              'flag' =&gt; 0, 'id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l1014"><span class="linenum">1014</span></a>  
<a name="l1015"><span class="linenum">1015</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('tag_unflagged')" href="../../_classes/tag_unflagged.html" onMouseOver="classPopup(event,'tag_unflagged')">tag_unflagged</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l1016"><span class="linenum">1016</span></a>              'objectid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l1017"><span class="linenum">1017</span></a>              'relateduserid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('userid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>,
<a name="l1018"><span class="linenum">1018</span></a>              'context' =&gt; <a class="class" onClick="logClass('context_system')" href="../../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(),
<a name="l1019"><span class="linenum">1019</span></a>              'other' =&gt; array(
<a name="l1020"><span class="linenum">1020</span></a>                  'name' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('name')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>,
<a name="l1021"><span class="linenum">1021</span></a>                  'rawname' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;rawname
<a name="l1022"><span class="linenum">1022</span></a>              )
<a name="l1023"><span class="linenum">1023</span></a>          ));
<a name="l1024"><span class="linenum">1024</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l1025"><span class="linenum">1025</span></a>      }
<a name="l1026"><span class="linenum">1026</span></a>  
<a name="l1027"><span class="linenum">1027</span></a>      <span class="comment">/**</span>
<a name="l1028"><span class="linenum">1028</span></a>  <span class="comment">     * Sets the list of tags related to this one.</span>
<a name="l1029"><span class="linenum">1029</span></a>  <span class="comment">     *</span>
<a name="l1030"><span class="linenum">1030</span></a>  <span class="comment">     * Tag relations are recorded by two instances linking two tags to each other.</span>
<a name="l1031"><span class="linenum">1031</span></a>  <span class="comment">     * For tag relations ordering is not used and may be random.</span>
<a name="l1032"><span class="linenum">1032</span></a>  <span class="comment">     *</span>
<a name="l1033"><span class="linenum">1033</span></a>  <span class="comment">     * @param array $tagnames</span>
<a name="l1034"><span class="linenum">1034</span></a>  <span class="comment">     */</span>
<a name="l1035"><span class="linenum">1035</span></a>      public function <a class="function" onClick="logFunction('set_related_tags')" href="../../_functions/set_related_tags.html" onMouseOver="funcPopup(event,'set_related_tags')">set_related_tags</a>(<a class="var it24580" onMouseOver="hilite(24580)" onMouseOut="lolite()" onClick="logVariable('tagnames')" href="../../_variables/tagnames.html">$tagnames</a>) {
<a name="l1036"><span class="linenum">1036</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_system')" href="../../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l1037"><span class="linenum">1037</span></a>          <a class="var it2655" onMouseOver="hilite(2655)" onMouseOut="lolite()" onClick="logVariable('tagobjects')" href="../../_variables/tagobjects.html">$tagobjects</a> = <a class="var it24580" onMouseOver="hilite(24580)" onMouseOut="lolite()" onClick="logVariable('tagnames')" href="../../_variables/tagnames.html">$tagnames</a> ? static::<a class="function" onClick="logFunction('create_if_missing')" href="../../_functions/create_if_missing.html" onMouseOver="funcPopup(event,'create_if_missing')">create_if_missing</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tagcollid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/tagcollid.html">tagcollid</a>, <a class="var it24580" onMouseOver="hilite(24580)" onMouseOut="lolite()" onClick="logVariable('tagnames')" href="../../_variables/tagnames.html">$tagnames</a>) : array();
<a name="l1038"><span class="linenum">1038</span></a>          unset(<a class="var it2655" onMouseOver="hilite(2655)" onMouseOut="lolite()" onClick="logVariable('tagobjects')" href="../../_variables/tagobjects.html">$tagobjects</a>[<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('name')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>]); <span class="comment">// Never link to itself.</span>
<a name="l1039"><span class="linenum">1039</span></a>  
<a name="l1040"><span class="linenum">1040</span></a>          <a class="var it36900" onMouseOver="hilite(36900)" onMouseOut="lolite()" onClick="logVariable('currenttags')" href="../../_variables/currenttags.html">$currenttags</a> = static::<a class="function" onClick="logFunction('get_item_tags')" href="../../_functions/get_item_tags.html" onMouseOver="funcPopup(event,'get_item_tags')">get_item_tags</a>('core', 'tag', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1041"><span class="linenum">1041</span></a>  
<a name="l1042"><span class="linenum">1042</span></a>  <span class="comment">        // For data coherence reasons, it's better to remove deleted tags</span>
<a name="l1043"><span class="linenum">1043</span></a>  <span class="comment">        // before adding new data: ordering could be duplicated.</span>
<a name="l1044"><span class="linenum">1044</span></a>          foreach (<a class="var it36900" onMouseOver="hilite(36900)" onMouseOut="lolite()" onClick="logVariable('currenttags')" href="../../_variables/currenttags.html">$currenttags</a> as <a class="var it27060" onMouseOver="hilite(27060)" onMouseOut="lolite()" onClick="logVariable('currenttag')" href="../../_variables/currenttag.html">$currenttag</a>) {
<a name="l1045"><span class="linenum">1045</span></a>              if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it27060" onMouseOver="hilite(27060)" onMouseOut="lolite()" onClick="logVariable('currenttag')" href="../../_variables/currenttag.html">$currenttag</a>-&gt;<a onClick="logVariable('name')" class="var it45534" onMouseOver="hilite(45534)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>, <a class="var it2655" onMouseOver="hilite(2655)" onMouseOut="lolite()" onClick="logVariable('tagobjects')" href="../../_variables/tagobjects.html">$tagobjects</a>)) {
<a name="l1046"><span class="linenum">1046</span></a>                  <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a> = (object)array('id' =&gt; <a class="var it27060" onMouseOver="hilite(27060)" onMouseOut="lolite()" onClick="logVariable('currenttag')" href="../../_variables/currenttag.html">$currenttag</a>-&gt;<a onClick="logVariable('taginstanceid')" class="var it45534" onMouseOver="hilite(45534)" onMouseOut="lolite()" href="../../_variables/taginstanceid.html">taginstanceid</a>,
<a name="l1047"><span class="linenum">1047</span></a>                      'itemtype' =&gt; 'tag', 'itemid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l1048"><span class="linenum">1048</span></a>                      'contextid' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1049"><span class="linenum">1049</span></a>                  <a class="var it27060" onMouseOver="hilite(27060)" onMouseOut="lolite()" onClick="logVariable('currenttag')" href="../../_variables/currenttag.html">$currenttag</a>-&gt;<a class="function" onClick="logFunction('delete_instance_as_record')" href="../../_functions/delete_instance_as_record.html" onMouseOver="funcPopup(event,'delete_instance_as_record')">delete_instance_as_record</a>(<a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>, false);
<a name="l1050"><span class="linenum">1050</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('delete_instance')" href="../../_functions/delete_instance.html" onMouseOver="funcPopup(event,'delete_instance')">delete_instance</a>('core', 'tag', <a class="var it27060" onMouseOver="hilite(27060)" onMouseOut="lolite()" onClick="logVariable('currenttag')" href="../../_variables/currenttag.html">$currenttag</a>-&gt;<a onClick="logVariable('id')" class="var it45534" onMouseOver="hilite(45534)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1051"><span class="linenum">1051</span></a>              }
<a name="l1052"><span class="linenum">1052</span></a>          }
<a name="l1053"><span class="linenum">1053</span></a>  
<a name="l1054"><span class="linenum">1054</span></a>          foreach (<a class="var it2655" onMouseOver="hilite(2655)" onMouseOut="lolite()" onClick="logVariable('tagobjects')" href="../../_variables/tagobjects.html">$tagobjects</a> as <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> =&gt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>) {
<a name="l1055"><span class="linenum">1055</span></a>              foreach (<a class="var it36900" onMouseOver="hilite(36900)" onMouseOut="lolite()" onClick="logVariable('currenttags')" href="../../_variables/currenttags.html">$currenttags</a> as <a class="var it27060" onMouseOver="hilite(27060)" onMouseOut="lolite()" onClick="logVariable('currenttag')" href="../../_variables/currenttag.html">$currenttag</a>) {
<a name="l1056"><span class="linenum">1056</span></a>                  if (<a class="var it27060" onMouseOver="hilite(27060)" onMouseOut="lolite()" onClick="logVariable('currenttag')" href="../../_variables/currenttag.html">$currenttag</a>-&gt;<a onClick="logVariable('name')" class="var it45534" onMouseOver="hilite(45534)" onMouseOut="lolite()" href="../../_variables/name.html">name</a> === <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>) {
<a name="l1057"><span class="linenum">1057</span></a>                      continue 2;
<a name="l1058"><span class="linenum">1058</span></a>                  }
<a name="l1059"><span class="linenum">1059</span></a>              }
<a name="l1060"><span class="linenum">1060</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_instance')" href="../../_functions/add_instance.html" onMouseOver="funcPopup(event,'add_instance')">add_instance</a>('core', 'tag', <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>-&gt;<a onClick="logVariable('id')" class="var it43262" onMouseOver="hilite(43262)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, 0);
<a name="l1061"><span class="linenum">1061</span></a>              <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>-&gt;<a class="function" onClick="logFunction('add_instance')" href="../../_functions/add_instance.html" onMouseOver="funcPopup(event,'add_instance')">add_instance</a>('core', 'tag', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, 0);
<a name="l1062"><span class="linenum">1062</span></a>              <a class="var it36900" onMouseOver="hilite(36900)" onMouseOut="lolite()" onClick="logVariable('currenttags')" href="../../_variables/currenttags.html">$currenttags</a>[] = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>;
<a name="l1063"><span class="linenum">1063</span></a>          }
<a name="l1064"><span class="linenum">1064</span></a>      }
<a name="l1065"><span class="linenum">1065</span></a>  
<a name="l1066"><span class="linenum">1066</span></a>      <span class="comment">/**</span>
<a name="l1067"><span class="linenum">1067</span></a>  <span class="comment">     * Adds to the list of related tags without removing existing</span>
<a name="l1068"><span class="linenum">1068</span></a>  <span class="comment">     *</span>
<a name="l1069"><span class="linenum">1069</span></a>  <span class="comment">     * Tag relations are recorded by two instances linking two tags to each other.</span>
<a name="l1070"><span class="linenum">1070</span></a>  <span class="comment">     * For tag relations ordering is not used and may be random.</span>
<a name="l1071"><span class="linenum">1071</span></a>  <span class="comment">     *</span>
<a name="l1072"><span class="linenum">1072</span></a>  <span class="comment">     * @param array $tagnames</span>
<a name="l1073"><span class="linenum">1073</span></a>  <span class="comment">     */</span>
<a name="l1074"><span class="linenum">1074</span></a>      public function <a class="function" onClick="logFunction('add_related_tags')" href="../../_functions/add_related_tags.html" onMouseOver="funcPopup(event,'add_related_tags')">add_related_tags</a>(<a class="var it24580" onMouseOver="hilite(24580)" onMouseOut="lolite()" onClick="logVariable('tagnames')" href="../../_variables/tagnames.html">$tagnames</a>) {
<a name="l1075"><span class="linenum">1075</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_system')" href="../../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l1076"><span class="linenum">1076</span></a>          <a class="var it2655" onMouseOver="hilite(2655)" onMouseOut="lolite()" onClick="logVariable('tagobjects')" href="../../_variables/tagobjects.html">$tagobjects</a> = static::<a class="function" onClick="logFunction('create_if_missing')" href="../../_functions/create_if_missing.html" onMouseOver="funcPopup(event,'create_if_missing')">create_if_missing</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tagcollid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/tagcollid.html">tagcollid</a>, <a class="var it24580" onMouseOver="hilite(24580)" onMouseOut="lolite()" onClick="logVariable('tagnames')" href="../../_variables/tagnames.html">$tagnames</a>);
<a name="l1077"><span class="linenum">1077</span></a>  
<a name="l1078"><span class="linenum">1078</span></a>          <a class="var it36900" onMouseOver="hilite(36900)" onMouseOut="lolite()" onClick="logVariable('currenttags')" href="../../_variables/currenttags.html">$currenttags</a> = static::<a class="function" onClick="logFunction('get_item_tags')" href="../../_functions/get_item_tags.html" onMouseOver="funcPopup(event,'get_item_tags')">get_item_tags</a>('core', 'tag', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1079"><span class="linenum">1079</span></a>  
<a name="l1080"><span class="linenum">1080</span></a>          foreach (<a class="var it2655" onMouseOver="hilite(2655)" onMouseOut="lolite()" onClick="logVariable('tagobjects')" href="../../_variables/tagobjects.html">$tagobjects</a> as <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> =&gt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>) {
<a name="l1081"><span class="linenum">1081</span></a>              foreach (<a class="var it36900" onMouseOver="hilite(36900)" onMouseOut="lolite()" onClick="logVariable('currenttags')" href="../../_variables/currenttags.html">$currenttags</a> as <a class="var it27060" onMouseOver="hilite(27060)" onMouseOut="lolite()" onClick="logVariable('currenttag')" href="../../_variables/currenttag.html">$currenttag</a>) {
<a name="l1082"><span class="linenum">1082</span></a>                  if (<a class="var it27060" onMouseOver="hilite(27060)" onMouseOut="lolite()" onClick="logVariable('currenttag')" href="../../_variables/currenttag.html">$currenttag</a>-&gt;<a onClick="logVariable('name')" class="var it45534" onMouseOver="hilite(45534)" onMouseOut="lolite()" href="../../_variables/name.html">name</a> === <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>) {
<a name="l1083"><span class="linenum">1083</span></a>                      continue 2;
<a name="l1084"><span class="linenum">1084</span></a>                  }
<a name="l1085"><span class="linenum">1085</span></a>              }
<a name="l1086"><span class="linenum">1086</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_instance')" href="../../_functions/add_instance.html" onMouseOver="funcPopup(event,'add_instance')">add_instance</a>('core', 'tag', <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>-&gt;<a onClick="logVariable('id')" class="var it43262" onMouseOver="hilite(43262)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, 0);
<a name="l1087"><span class="linenum">1087</span></a>              <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>-&gt;<a class="function" onClick="logFunction('add_instance')" href="../../_functions/add_instance.html" onMouseOver="funcPopup(event,'add_instance')">add_instance</a>('core', 'tag', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, 0);
<a name="l1088"><span class="linenum">1088</span></a>              <a class="var it36900" onMouseOver="hilite(36900)" onMouseOut="lolite()" onClick="logVariable('currenttags')" href="../../_variables/currenttags.html">$currenttags</a>[] = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>;
<a name="l1089"><span class="linenum">1089</span></a>          }
<a name="l1090"><span class="linenum">1090</span></a>      }
<a name="l1091"><span class="linenum">1091</span></a>  
<a name="l1092"><span class="linenum">1092</span></a>      <span class="comment">/**</span>
<a name="l1093"><span class="linenum">1093</span></a>  <span class="comment">     * Returns the correlated tags of a tag, retrieved from the tag_correlation table.</span>
<a name="l1094"><span class="linenum">1094</span></a>  <span class="comment">     *</span>
<a name="l1095"><span class="linenum">1095</span></a>  <span class="comment">     * Correlated tags are calculated in cron based on existing tag instances.</span>
<a name="l1096"><span class="linenum">1096</span></a>  <span class="comment">     *</span>
<a name="l1097"><span class="linenum">1097</span></a>  <span class="comment">     * @param bool $keepduplicates if true, will return one record for each existing</span>
<a name="l1098"><span class="linenum">1098</span></a>  <span class="comment">     *      tag instance which may result in duplicates of the actual tags</span>
<a name="l1099"><span class="linenum">1099</span></a>  <span class="comment">     * @return core_tag_tag[] an array of tag objects</span>
<a name="l1100"><span class="linenum">1100</span></a>  <span class="comment">     */</span>
<a name="l1101"><span class="linenum">1101</span></a>      public function <a class="function" onClick="logFunction('get_correlated_tags')" href="../../_functions/get_correlated_tags.html" onMouseOver="funcPopup(event,'get_correlated_tags')">get_correlated_tags</a>(<a class="var it36905" onMouseOver="hilite(36905)" onMouseOut="lolite()" onClick="logVariable('keepduplicates')" href="../../_variables/keepduplicates.html">$keepduplicates</a> = false) {
<a name="l1102"><span class="linenum">1102</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1103"><span class="linenum">1103</span></a>  
<a name="l1104"><span class="linenum">1104</span></a>          <a class="var it36906" onMouseOver="hilite(36906)" onMouseOut="lolite()" onClick="logVariable('correlated')" href="../../_variables/correlated.html">$correlated</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('tag_correlation', 'correlatedtags', array('tagid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l1105"><span class="linenum">1105</span></a>  
<a name="l1106"><span class="linenum">1106</span></a>          if (!<a class="var it36906" onMouseOver="hilite(36906)" onMouseOut="lolite()" onClick="logVariable('correlated')" href="../../_variables/correlated.html">$correlated</a>) {
<a name="l1107"><span class="linenum">1107</span></a>              return array();
<a name="l1108"><span class="linenum">1108</span></a>          }
<a name="l1109"><span class="linenum">1109</span></a>          <a class="var it36906" onMouseOver="hilite(36906)" onMouseOut="lolite()" onClick="logVariable('correlated')" href="../../_variables/correlated.html">$correlated</a> = <a class="phpfunction" onClick="logFunction('preg_split')" href="../../_functions/preg_split.html" onMouseOver="phpfuncPopup(event,'preg_split')">preg_split</a>('/\s*,\s*/', <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it36906" onMouseOver="hilite(36906)" onMouseOut="lolite()" onClick="logVariable('correlated')" href="../../_variables/correlated.html">$correlated</a>), -1, PREG_SPLIT_NO_EMPTY);
<a name="l1110"><span class="linenum">1110</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it36906" onMouseOver="hilite(36906)" onMouseOut="lolite()" onClick="logVariable('correlated')" href="../../_variables/correlated.html">$correlated</a>);
<a name="l1111"><span class="linenum">1111</span></a>  
<a name="l1112"><span class="linenum">1112</span></a>  <span class="comment">        // This is (and has to) return the same fields as the query in core_tag_tag::get_item_tags().</span>
<a name="l1113"><span class="linenum">1113</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT ti.id AS taginstanceid, tg.id, tg.isstandard, tg.name, tg.rawname, tg.flag,
<a name="l1114"><span class="linenum">1114</span></a>                  tg.tagcollid, ti.ordering, ti.contextid AS taginstancecontextid
<a name="l1115"><span class="linenum">1115</span></a>                FROM {tag} tg
<a name="l1116"><span class="linenum">1116</span></a>          INNER JOIN {tag_instance} ti ON tg.id = ti.tagid
<a name="l1117"><span class="linenum">1117</span></a>               WHERE tg.id <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a> AND tg.id &lt;&gt; ? AND tg.tagcollid = ?
<a name="l1118"><span class="linenum">1118</span></a>            ORDER BY ti.ordering ASC, ti.id&quot;;
<a name="l1119"><span class="linenum">1119</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1120"><span class="linenum">1120</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tagcollid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/tagcollid.html">tagcollid</a>;
<a name="l1121"><span class="linenum">1121</span></a>          <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1122"><span class="linenum">1122</span></a>          <a class="var it20876" onMouseOver="hilite(20876)" onMouseOut="lolite()" onClick="logVariable('seen')" href="../../_variables/seen.html">$seen</a> = array();
<a name="l1123"><span class="linenum">1123</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = array();
<a name="l1124"><span class="linenum">1124</span></a>          foreach (<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a> as <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a> =&gt; <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>) {
<a name="l1125"><span class="linenum">1125</span></a>              if (!<a class="var it36905" onMouseOver="hilite(36905)" onMouseOut="lolite()" onClick="logVariable('keepduplicates')" href="../../_variables/keepduplicates.html">$keepduplicates</a> &amp;&amp; !empty(<a class="var it20876" onMouseOver="hilite(20876)" onMouseOut="lolite()" onClick="logVariable('seen')" href="../../_variables/seen.html">$seen</a>[<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>])) {
<a name="l1126"><span class="linenum">1126</span></a>                  continue;
<a name="l1127"><span class="linenum">1127</span></a>              }
<a name="l1128"><span class="linenum">1128</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>] = new static(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>);
<a name="l1129"><span class="linenum">1129</span></a>              <a class="var it20876" onMouseOver="hilite(20876)" onMouseOut="lolite()" onClick="logVariable('seen')" href="../../_variables/seen.html">$seen</a>[<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = true;
<a name="l1130"><span class="linenum">1130</span></a>          }
<a name="l1131"><span class="linenum">1131</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l1132"><span class="linenum">1132</span></a>      }
<a name="l1133"><span class="linenum">1133</span></a>  
<a name="l1134"><span class="linenum">1134</span></a>      <span class="comment">/**</span>
<a name="l1135"><span class="linenum">1135</span></a>  <span class="comment">     * Returns tags that this tag was manually set as related to</span>
<a name="l1136"><span class="linenum">1136</span></a>  <span class="comment">     *</span>
<a name="l1137"><span class="linenum">1137</span></a>  <span class="comment">     * @return core_tag_tag[]</span>
<a name="l1138"><span class="linenum">1138</span></a>  <span class="comment">     */</span>
<a name="l1139"><span class="linenum">1139</span></a>      public function <a class="function" onClick="logFunction('get_manual_related_tags')" href="../../_functions/get_manual_related_tags.html" onMouseOver="funcPopup(event,'get_manual_related_tags')">get_manual_related_tags</a>() {
<a name="l1140"><span class="linenum">1140</span></a>          return self::<a class="function" onClick="logFunction('get_item_tags')" href="../../_functions/get_item_tags.html" onMouseOver="funcPopup(event,'get_item_tags')">get_item_tags</a>('core', 'tag', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1141"><span class="linenum">1141</span></a>      }
<a name="l1142"><span class="linenum">1142</span></a>  
<a name="l1143"><span class="linenum">1143</span></a>      <span class="comment">/**</span>
<a name="l1144"><span class="linenum">1144</span></a>  <span class="comment">     * Returns tags related to a tag</span>
<a name="l1145"><span class="linenum">1145</span></a>  <span class="comment">     *</span>
<a name="l1146"><span class="linenum">1146</span></a>  <span class="comment">     * Related tags of a tag come from two sources:</span>
<a name="l1147"><span class="linenum">1147</span></a>  <span class="comment">     *   - manually added related tags, which are tag_instance entries for that tag</span>
<a name="l1148"><span class="linenum">1148</span></a>  <span class="comment">     *   - correlated tags, which are calculated</span>
<a name="l1149"><span class="linenum">1149</span></a>  <span class="comment">     *</span>
<a name="l1150"><span class="linenum">1150</span></a>  <span class="comment">     * @return core_tag_tag[] an array of tag objects</span>
<a name="l1151"><span class="linenum">1151</span></a>  <span class="comment">     */</span>
<a name="l1152"><span class="linenum">1152</span></a>      public function <a class="function" onClick="logFunction('get_related_tags')" href="../../_functions/get_related_tags.html" onMouseOver="funcPopup(event,'get_related_tags')">get_related_tags</a>() {
<a name="l1153"><span class="linenum">1153</span></a>          <a class="var it15755" onMouseOver="hilite(15755)" onMouseOut="lolite()" onClick="logVariable('manual')" href="../../_variables/manual.html">$manual</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_manual_related_tags')" href="../../_functions/get_manual_related_tags.html" onMouseOver="funcPopup(event,'get_manual_related_tags')">get_manual_related_tags</a>();
<a name="l1154"><span class="linenum">1154</span></a>          <a class="var it36907" onMouseOver="hilite(36907)" onMouseOut="lolite()" onClick="logVariable('automatic')" href="../../_variables/automatic.html">$automatic</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_correlated_tags')" href="../../_functions/get_correlated_tags.html" onMouseOver="funcPopup(event,'get_correlated_tags')">get_correlated_tags</a>();
<a name="l1155"><span class="linenum">1155</span></a>          <a class="var it2670" onMouseOver="hilite(2670)" onMouseOut="lolite()" onClick="logVariable('relatedtags')" href="../../_variables/relatedtags.html">$relatedtags</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it15755" onMouseOver="hilite(15755)" onMouseOut="lolite()" onClick="logVariable('manual')" href="../../_variables/manual.html">$manual</a>, <a class="var it36907" onMouseOver="hilite(36907)" onMouseOut="lolite()" onClick="logVariable('automatic')" href="../../_variables/automatic.html">$automatic</a>);
<a name="l1156"><span class="linenum">1156</span></a>  
<a name="l1157"><span class="linenum">1157</span></a>  <span class="comment">        // Remove duplicated tags (multiple instances of the same tag).</span>
<a name="l1158"><span class="linenum">1158</span></a>          <a class="var it20876" onMouseOver="hilite(20876)" onMouseOut="lolite()" onClick="logVariable('seen')" href="../../_variables/seen.html">$seen</a> = array();
<a name="l1159"><span class="linenum">1159</span></a>          foreach (<a class="var it2670" onMouseOver="hilite(2670)" onMouseOut="lolite()" onClick="logVariable('relatedtags')" href="../../_variables/relatedtags.html">$relatedtags</a> as <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a> =&gt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>) {
<a name="l1160"><span class="linenum">1160</span></a>              if (isset(<a class="var it20876" onMouseOver="hilite(20876)" onMouseOut="lolite()" onClick="logVariable('seen')" href="../../_variables/seen.html">$seen</a>[<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>-&gt;<a onClick="logVariable('id')" class="var it43262" onMouseOver="hilite(43262)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>])) {
<a name="l1161"><span class="linenum">1161</span></a>                  unset(<a class="var it2670" onMouseOver="hilite(2670)" onMouseOut="lolite()" onClick="logVariable('relatedtags')" href="../../_variables/relatedtags.html">$relatedtags</a>[<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../_variables/instance.html">$instance</a>]);
<a name="l1162"><span class="linenum">1162</span></a>              } else {
<a name="l1163"><span class="linenum">1163</span></a>                  <a class="var it20876" onMouseOver="hilite(20876)" onMouseOut="lolite()" onClick="logVariable('seen')" href="../../_variables/seen.html">$seen</a>[<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>-&gt;<a onClick="logVariable('id')" class="var it43262" onMouseOver="hilite(43262)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = 1;
<a name="l1164"><span class="linenum">1164</span></a>              }
<a name="l1165"><span class="linenum">1165</span></a>          }
<a name="l1166"><span class="linenum">1166</span></a>  
<a name="l1167"><span class="linenum">1167</span></a>          return <a class="var it2670" onMouseOver="hilite(2670)" onMouseOut="lolite()" onClick="logVariable('relatedtags')" href="../../_variables/relatedtags.html">$relatedtags</a>;
<a name="l1168"><span class="linenum">1168</span></a>      }
<a name="l1169"><span class="linenum">1169</span></a>  
<a name="l1170"><span class="linenum">1170</span></a>      <span class="comment">/**</span>
<a name="l1171"><span class="linenum">1171</span></a>  <span class="comment">     * Find all items tagged with a tag of a given type ('post', 'user', etc.)</span>
<a name="l1172"><span class="linenum">1172</span></a>  <span class="comment">     *</span>
<a name="l1173"><span class="linenum">1173</span></a>  <span class="comment">     * @param    string   $component component responsible for tagging. For BC it can be empty but in this case the</span>
<a name="l1174"><span class="linenum">1174</span></a>  <span class="comment">     *                    query will be slow because DB index will not be used.</span>
<a name="l1175"><span class="linenum">1175</span></a>  <span class="comment">     * @param    string   $itemtype  type to restrict search to</span>
<a name="l1176"><span class="linenum">1176</span></a>  <span class="comment">     * @param    int      $limitfrom (optional, required if $limitnum is set) return a subset of records, starting at this point.</span>
<a name="l1177"><span class="linenum">1177</span></a>  <span class="comment">     * @param    int      $limitnum  (optional, required if $limitfrom is set) return a subset comprising this many records.</span>
<a name="l1178"><span class="linenum">1178</span></a>  <span class="comment">     * @param    string   $subquery additional query to be appended to WHERE clause, refer to the itemtable as 'it'</span>
<a name="l1179"><span class="linenum">1179</span></a>  <span class="comment">     * @param    array    $params additional parameters for the DB query</span>
<a name="l1180"><span class="linenum">1180</span></a>  <span class="comment">     * @return   array of matching objects, indexed by record id, from the table containing the type requested</span>
<a name="l1181"><span class="linenum">1181</span></a>  <span class="comment">     */</span>
<a name="l1182"><span class="linenum">1182</span></a>      public function <a class="function" onClick="logFunction('get_tagged_items')" href="../../_functions/get_tagged_items.html" onMouseOver="funcPopup(event,'get_tagged_items')">get_tagged_items</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>, <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>, <a class="var it1013" onMouseOver="hilite(1013)" onMouseOut="lolite()" onClick="logVariable('limitfrom')" href="../../_variables/limitfrom.html">$limitfrom</a> = '', <a class="var it1014" onMouseOver="hilite(1014)" onMouseOut="lolite()" onClick="logVariable('limitnum')" href="../../_variables/limitnum.html">$limitnum</a> = '', <a class="var it12903" onMouseOver="hilite(12903)" onMouseOut="lolite()" onClick="logVariable('subquery')" href="../../_variables/subquery.html">$subquery</a> = '', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array()) {
<a name="l1183"><span class="linenum">1183</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1184"><span class="linenum">1184</span></a>  
<a name="l1185"><span class="linenum">1185</span></a>          if (empty(<a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>) || !<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_manager')" href="../../_functions/get_manager.html" onMouseOver="funcPopup(event,'get_manager')">get_manager</a>()-&gt;<a class="function" onClick="logFunction('table_exists')" href="../../_functions/table_exists.html" onMouseOver="funcPopup(event,'table_exists')">table_exists</a>(<a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>)) {
<a name="l1186"><span class="linenum">1186</span></a>              return array();
<a name="l1187"><span class="linenum">1187</span></a>          }
<a name="l1188"><span class="linenum">1188</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> ? <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> : array();
<a name="l1189"><span class="linenum">1189</span></a>  
<a name="l1190"><span class="linenum">1190</span></a>          <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a> = &quot;SELECT it.*
<a name="l1191"><span class="linenum">1191</span></a>                      FROM {&quot;.<a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>.&quot;} it INNER JOIN {tag_instance} tt ON it.id = tt.itemid
<a name="l1192"><span class="linenum">1192</span></a>                     WHERE tt.itemtype = :itemtype AND tt.tagid = :tagid&quot;;
<a name="l1193"><span class="linenum">1193</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['itemtype'] = <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>;
<a name="l1194"><span class="linenum">1194</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['tagid'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1195"><span class="linenum">1195</span></a>          if (<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>) {
<a name="l1196"><span class="linenum">1196</span></a>              <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a> .= ' AND tt.component = :component';
<a name="l1197"><span class="linenum">1197</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['component'] = <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>;
<a name="l1198"><span class="linenum">1198</span></a>          }
<a name="l1199"><span class="linenum">1199</span></a>          if (<a class="var it12903" onMouseOver="hilite(12903)" onMouseOut="lolite()" onClick="logVariable('subquery')" href="../../_variables/subquery.html">$subquery</a>) {
<a name="l1200"><span class="linenum">1200</span></a>              <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a> .= ' AND ' . <a class="var it12903" onMouseOver="hilite(12903)" onMouseOut="lolite()" onClick="logVariable('subquery')" href="../../_variables/subquery.html">$subquery</a>;
<a name="l1201"><span class="linenum">1201</span></a>          }
<a name="l1202"><span class="linenum">1202</span></a>          <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a> .= ' ORDER BY it.id';
<a name="l1203"><span class="linenum">1203</span></a>  
<a name="l1204"><span class="linenum">1204</span></a>          return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="var it1013" onMouseOver="hilite(1013)" onMouseOut="lolite()" onClick="logVariable('limitfrom')" href="../../_variables/limitfrom.html">$limitfrom</a>, <a class="var it1014" onMouseOver="hilite(1014)" onMouseOut="lolite()" onClick="logVariable('limitnum')" href="../../_variables/limitnum.html">$limitnum</a>);
<a name="l1205"><span class="linenum">1205</span></a>      }
<a name="l1206"><span class="linenum">1206</span></a>  
<a name="l1207"><span class="linenum">1207</span></a>      <span class="comment">/**</span>
<a name="l1208"><span class="linenum">1208</span></a>  <span class="comment">     * Count how many items are tagged with a specific tag.</span>
<a name="l1209"><span class="linenum">1209</span></a>  <span class="comment">     *</span>
<a name="l1210"><span class="linenum">1210</span></a>  <span class="comment">     * @param    string   $component component responsible for tagging. For BC it can be empty but in this case the</span>
<a name="l1211"><span class="linenum">1211</span></a>  <span class="comment">     *                    query will be slow because DB index will not be used.</span>
<a name="l1212"><span class="linenum">1212</span></a>  <span class="comment">     * @param    string   $itemtype  type to restrict search to</span>
<a name="l1213"><span class="linenum">1213</span></a>  <span class="comment">     * @param    string   $subquery additional query to be appended to WHERE clause, refer to the itemtable as 'it'</span>
<a name="l1214"><span class="linenum">1214</span></a>  <span class="comment">     * @param    array    $params additional parameters for the DB query</span>
<a name="l1215"><span class="linenum">1215</span></a>  <span class="comment">     * @return   int      number of mathing tags.</span>
<a name="l1216"><span class="linenum">1216</span></a>  <span class="comment">     */</span>
<a name="l1217"><span class="linenum">1217</span></a>      public function <a class="function" onClick="logFunction('count_tagged_items')" href="../../_functions/count_tagged_items.html" onMouseOver="funcPopup(event,'count_tagged_items')">count_tagged_items</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>, <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>, <a class="var it12903" onMouseOver="hilite(12903)" onMouseOut="lolite()" onClick="logVariable('subquery')" href="../../_variables/subquery.html">$subquery</a> = '', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array()) {
<a name="l1218"><span class="linenum">1218</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1219"><span class="linenum">1219</span></a>  
<a name="l1220"><span class="linenum">1220</span></a>          if (empty(<a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>) || !<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_manager')" href="../../_functions/get_manager.html" onMouseOver="funcPopup(event,'get_manager')">get_manager</a>()-&gt;<a class="function" onClick="logFunction('table_exists')" href="../../_functions/table_exists.html" onMouseOver="funcPopup(event,'table_exists')">table_exists</a>(<a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>)) {
<a name="l1221"><span class="linenum">1221</span></a>              return 0;
<a name="l1222"><span class="linenum">1222</span></a>          }
<a name="l1223"><span class="linenum">1223</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> ? <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> : array();
<a name="l1224"><span class="linenum">1224</span></a>  
<a name="l1225"><span class="linenum">1225</span></a>          <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a> = &quot;SELECT <a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(it.id)
<a name="l1226"><span class="linenum">1226</span></a>                      FROM {&quot;.<a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>.&quot;} it INNER JOIN {tag_instance} tt ON it.id = tt.itemid
<a name="l1227"><span class="linenum">1227</span></a>                     WHERE tt.itemtype = :itemtype AND tt.tagid = :tagid&quot;;
<a name="l1228"><span class="linenum">1228</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['itemtype'] = <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>;
<a name="l1229"><span class="linenum">1229</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['tagid'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1230"><span class="linenum">1230</span></a>          if (<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>) {
<a name="l1231"><span class="linenum">1231</span></a>              <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a> .= ' AND tt.component = :component';
<a name="l1232"><span class="linenum">1232</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['component'] = <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>;
<a name="l1233"><span class="linenum">1233</span></a>          }
<a name="l1234"><span class="linenum">1234</span></a>          if (<a class="var it12903" onMouseOver="hilite(12903)" onMouseOut="lolite()" onClick="logVariable('subquery')" href="../../_variables/subquery.html">$subquery</a>) {
<a name="l1235"><span class="linenum">1235</span></a>              <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a> .= ' AND ' . <a class="var it12903" onMouseOver="hilite(12903)" onMouseOut="lolite()" onClick="logVariable('subquery')" href="../../_variables/subquery.html">$subquery</a>;
<a name="l1236"><span class="linenum">1236</span></a>          }
<a name="l1237"><span class="linenum">1237</span></a>  
<a name="l1238"><span class="linenum">1238</span></a>          return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field_sql')" href="../../_functions/get_field_sql.html" onMouseOver="funcPopup(event,'get_field_sql')">get_field_sql</a>(<a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1239"><span class="linenum">1239</span></a>      }
<a name="l1240"><span class="linenum">1240</span></a>  
<a name="l1241"><span class="linenum">1241</span></a>      <span class="comment">/**</span>
<a name="l1242"><span class="linenum">1242</span></a>  <span class="comment">     * Determine if an item is tagged with a specific tag</span>
<a name="l1243"><span class="linenum">1243</span></a>  <span class="comment">     *</span>
<a name="l1244"><span class="linenum">1244</span></a>  <span class="comment">     * Note that this is a static method and not a method of core_tag object because the tag might not exist yet,</span>
<a name="l1245"><span class="linenum">1245</span></a>  <span class="comment">     * for example user searches for &quot;php&quot; and we offer him to add &quot;php&quot; to his interests.</span>
<a name="l1246"><span class="linenum">1246</span></a>  <span class="comment">     *</span>
<a name="l1247"><span class="linenum">1247</span></a>  <span class="comment">     * @param   string   $component component responsible for tagging. For BC it can be empty but in this case the</span>
<a name="l1248"><span class="linenum">1248</span></a>  <span class="comment">     *                   query will be slow because DB index will not be used.</span>
<a name="l1249"><span class="linenum">1249</span></a>  <span class="comment">     * @param   string   $itemtype    the record type to look for</span>
<a name="l1250"><span class="linenum">1250</span></a>  <span class="comment">     * @param   int      $itemid      the record id to look for</span>
<a name="l1251"><span class="linenum">1251</span></a>  <span class="comment">     * @param   string   $tagname     a tag name</span>
<a name="l1252"><span class="linenum">1252</span></a>  <span class="comment">     * @return  int                   1 if it is tagged, 0 otherwise</span>
<a name="l1253"><span class="linenum">1253</span></a>  <span class="comment">     */</span>
<a name="l1254"><span class="linenum">1254</span></a>      public static function <a class="function" onClick="logFunction('is_item_tagged_with')" href="../../_functions/is_item_tagged_with.html" onMouseOver="funcPopup(event,'is_item_tagged_with')">is_item_tagged_with</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>, <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>, <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>, <a class="var it2390" onMouseOver="hilite(2390)" onMouseOut="lolite()" onClick="logVariable('tagname')" href="../../_variables/tagname.html">$tagname</a>) {
<a name="l1255"><span class="linenum">1255</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1256"><span class="linenum">1256</span></a>          <a class="var it226" onMouseOver="hilite(226)" onMouseOut="lolite()" onClick="logVariable('tagcollid')" href="../../_variables/tagcollid.html">$tagcollid</a> = <a class="class" onClick="logClass('core_tag_area')" href="../../_classes/core_tag_area.html" onMouseOver="classPopup(event,'core_tag_area')">core_tag_area</a>::<a class="function" onClick="logFunction('get_collection')" href="../../_functions/get_collection.html" onMouseOver="funcPopup(event,'get_collection')">get_collection</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>, <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>);
<a name="l1257"><span class="linenum">1257</span></a>          <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a> = 'SELECT 1 FROM {tag} t
<a name="l1258"><span class="linenum">1258</span></a>                      JOIN {tag_instance} ti ON ti.tagid = t.id
<a name="l1259"><span class="linenum">1259</span></a>                      WHERE t.name = ? AND t.tagcollid = ? AND ti.itemtype = ? AND ti.itemid = ?';
<a name="l1260"><span class="linenum">1260</span></a>          <a class="var it23463" onMouseOver="hilite(23463)" onMouseOut="lolite()" onClick="logVariable('cleanname')" href="../../_variables/cleanname.html">$cleanname</a> = <a class="class" onClick="logClass('core_text')" href="../../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="phpfunction" onClick="logFunction('strtolower')" href="../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="function" onClick="logFunction('clean_param')" href="../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it2390" onMouseOver="hilite(2390)" onMouseOut="lolite()" onClick="logVariable('tagname')" href="../../_variables/tagname.html">$tagname</a>, <a class="constant" onClick="logConstant('PARAM_TAG')" href="../../_constants/PARAM_TAG.html" onMouseOver="constPopup(event,'PARAM_TAG')">PARAM_TAG</a>));
<a name="l1261"><span class="linenum">1261</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array(<a class="var it23463" onMouseOver="hilite(23463)" onMouseOut="lolite()" onClick="logVariable('cleanname')" href="../../_variables/cleanname.html">$cleanname</a>, <a class="var it226" onMouseOver="hilite(226)" onMouseOut="lolite()" onClick="logVariable('tagcollid')" href="../../_variables/tagcollid.html">$tagcollid</a>, <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>, <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>);
<a name="l1262"><span class="linenum">1262</span></a>          if (<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>) {
<a name="l1263"><span class="linenum">1263</span></a>              <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a> .= ' AND ti.component = ?';
<a name="l1264"><span class="linenum">1264</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[] = <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>;
<a name="l1265"><span class="linenum">1265</span></a>          }
<a name="l1266"><span class="linenum">1266</span></a>          return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists_sql')" href="../../_functions/record_exists_sql.html" onMouseOver="funcPopup(event,'record_exists_sql')">record_exists_sql</a>(<a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) ? 1 : 0;
<a name="l1267"><span class="linenum">1267</span></a>      }
<a name="l1268"><span class="linenum">1268</span></a>  
<a name="l1269"><span class="linenum">1269</span></a>      <span class="comment">/**</span>
<a name="l1270"><span class="linenum">1270</span></a>  <span class="comment">     * Returns whether the tag area is enabled</span>
<a name="l1271"><span class="linenum">1271</span></a>  <span class="comment">     *</span>
<a name="l1272"><span class="linenum">1272</span></a>  <span class="comment">     * @param string $component component responsible for tagging</span>
<a name="l1273"><span class="linenum">1273</span></a>  <span class="comment">     * @param string $itemtype what is being tagged, for example, 'post', 'course', 'user', etc.</span>
<a name="l1274"><span class="linenum">1274</span></a>  <span class="comment">     * @return bool|null</span>
<a name="l1275"><span class="linenum">1275</span></a>  <span class="comment">     */</span>
<a name="l1276"><span class="linenum">1276</span></a>      public static function <a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>, <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>) {
<a name="l1277"><span class="linenum">1277</span></a>          return <a class="class" onClick="logClass('core_tag_area')" href="../../_classes/core_tag_area.html" onMouseOver="classPopup(event,'core_tag_area')">core_tag_area</a>::<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>, <a class="var it976" onMouseOver="hilite(976)" onMouseOut="lolite()" onClick="logVariable('itemtype')" href="../../_variables/itemtype.html">$itemtype</a>);
<a name="l1278"><span class="linenum">1278</span></a>      }
<a name="l1279"><span class="linenum">1279</span></a>  
<a name="l1280"><span class="linenum">1280</span></a>      <span class="comment">/**</span>
<a name="l1281"><span class="linenum">1281</span></a>  <span class="comment">     * Retrieves contents of tag area for the tag/index.php page</span>
<a name="l1282"><span class="linenum">1282</span></a>  <span class="comment">     *</span>
<a name="l1283"><span class="linenum">1283</span></a>  <span class="comment">     * @param stdClass $tagarea</span>
<a name="l1284"><span class="linenum">1284</span></a>  <span class="comment">     * @param bool $exclusivemode if set to true it means that no other entities tagged with this tag</span>
<a name="l1285"><span class="linenum">1285</span></a>  <span class="comment">     *             are displayed on the page and the per-page limit may be bigger</span>
<a name="l1286"><span class="linenum">1286</span></a>  <span class="comment">     * @param int $fromctx context id where the link was displayed, may be used by callbacks</span>
<a name="l1287"><span class="linenum">1287</span></a>  <span class="comment">     *            to display items in the same context first</span>
<a name="l1288"><span class="linenum">1288</span></a>  <span class="comment">     * @param int $ctx context id where to search for records</span>
<a name="l1289"><span class="linenum">1289</span></a>  <span class="comment">     * @param bool $rec search in subcontexts as well</span>
<a name="l1290"><span class="linenum">1290</span></a>  <span class="comment">     * @param int $page 0-based number of page being displayed</span>
<a name="l1291"><span class="linenum">1291</span></a>  <span class="comment">     * @return \core_tag\output\tagindex</span>
<a name="l1292"><span class="linenum">1292</span></a>  <span class="comment">     */</span>
<a name="l1293"><span class="linenum">1293</span></a>      public function <a class="function" onClick="logFunction('get_tag_index')" href="../../_functions/get_tag_index.html" onMouseOver="funcPopup(event,'get_tag_index')">get_tag_index</a>(<a class="var it3792" onMouseOver="hilite(3792)" onMouseOut="lolite()" onClick="logVariable('tagarea')" href="../../_variables/tagarea.html">$tagarea</a>, <a class="var it1066" onMouseOver="hilite(1066)" onMouseOut="lolite()" onClick="logVariable('exclusivemode')" href="../../_variables/exclusivemode.html">$exclusivemode</a>, <a class="var it1067" onMouseOver="hilite(1067)" onMouseOut="lolite()" onClick="logVariable('fromctx')" href="../../_variables/fromctx.html">$fromctx</a>, <a class="var it1068" onMouseOver="hilite(1068)" onMouseOut="lolite()" onClick="logVariable('ctx')" href="../../_variables/ctx.html">$ctx</a>, <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../_variables/rec.html">$rec</a>, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = 0) {
<a name="l1294"><span class="linenum">1294</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l1295"><span class="linenum">1295</span></a>          if (!empty(<a class="var it3792" onMouseOver="hilite(3792)" onMouseOut="lolite()" onClick="logVariable('tagarea')" href="../../_variables/tagarea.html">$tagarea</a>-&gt;<a onClick="logVariable('callback')" class="var it43705" onMouseOver="hilite(43705)" onMouseOut="lolite()" href="../../_variables/callback.html">callback</a>)) {
<a name="l1296"><span class="linenum">1296</span></a>              if (!empty(<a class="var it3792" onMouseOver="hilite(3792)" onMouseOut="lolite()" onClick="logVariable('tagarea')" href="../../_variables/tagarea.html">$tagarea</a>-&gt;<a onClick="logVariable('callbackfile')" class="var it43705" onMouseOver="hilite(43705)" onMouseOut="lolite()" href="../../_variables/callbackfile.html">callbackfile</a>)) {
<a name="l1297"><span class="linenum">1297</span></a>                  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '/' . <a class="phpfunction" onClick="logFunction('ltrim')" href="../../_functions/ltrim.html" onMouseOver="phpfuncPopup(event,'ltrim')">ltrim</a>(<a class="var it3792" onMouseOver="hilite(3792)" onMouseOut="lolite()" onClick="logVariable('tagarea')" href="../../_variables/tagarea.html">$tagarea</a>-&gt;<a onClick="logVariable('callbackfile')" class="var it43705" onMouseOver="hilite(43705)" onMouseOut="lolite()" href="../../_variables/callbackfile.html">callbackfile</a>, '/'));
<a name="l1298"><span class="linenum">1298</span></a>              }
<a name="l1299"><span class="linenum">1299</span></a>              <a class="var it2214" onMouseOver="hilite(2214)" onMouseOut="lolite()" onClick="logVariable('callback')" href="../../_variables/callback.html">$callback</a> = <a class="var it3792" onMouseOver="hilite(3792)" onMouseOut="lolite()" onClick="logVariable('tagarea')" href="../../_variables/tagarea.html">$tagarea</a>-&gt;<a onClick="logVariable('callback')" class="var it43705" onMouseOver="hilite(43705)" onMouseOut="lolite()" href="../../_variables/callback.html">callback</a>;
<a name="l1300"><span class="linenum">1300</span></a>              return <a class="phpfunction" onClick="logFunction('call_user_func_array')" href="../../_functions/call_user_func_array.html" onMouseOver="phpfuncPopup(event,'call_user_func_array')">call_user_func_array</a>(<a class="var it2214" onMouseOver="hilite(2214)" onMouseOut="lolite()" onClick="logVariable('callback')" href="../../_variables/callback.html">$callback</a>, [<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>, <a class="var it1066" onMouseOver="hilite(1066)" onMouseOut="lolite()" onClick="logVariable('exclusivemode')" href="../../_variables/exclusivemode.html">$exclusivemode</a>, <a class="var it1067" onMouseOver="hilite(1067)" onMouseOut="lolite()" onClick="logVariable('fromctx')" href="../../_variables/fromctx.html">$fromctx</a>, <a class="var it1068" onMouseOver="hilite(1068)" onMouseOut="lolite()" onClick="logVariable('ctx')" href="../../_variables/ctx.html">$ctx</a>, <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../_variables/rec.html">$rec</a>, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>]);
<a name="l1301"><span class="linenum">1301</span></a>          }
<a name="l1302"><span class="linenum">1302</span></a>          return null;
<a name="l1303"><span class="linenum">1303</span></a>      }
<a name="l1304"><span class="linenum">1304</span></a>  
<a name="l1305"><span class="linenum">1305</span></a>      <span class="comment">/**</span>
<a name="l1306"><span class="linenum">1306</span></a>  <span class="comment">     * Returns formatted description of the tag</span>
<a name="l1307"><span class="linenum">1307</span></a>  <span class="comment">     *</span>
<a name="l1308"><span class="linenum">1308</span></a>  <span class="comment">     * @param array $options</span>
<a name="l1309"><span class="linenum">1309</span></a>  <span class="comment">     * @return string</span>
<a name="l1310"><span class="linenum">1310</span></a>  <span class="comment">     */</span>
<a name="l1311"><span class="linenum">1311</span></a>      public function <a class="function" onClick="logFunction('get_formatted_description')" href="../../_functions/get_formatted_description.html" onMouseOver="funcPopup(event,'get_formatted_description')">get_formatted_description</a>(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = array()) {
<a name="l1312"><span class="linenum">1312</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>) ? array() : (array)<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>;
<a name="l1313"><span class="linenum">1313</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> += array('para' =&gt; false, 'overflowdiv' =&gt; true);
<a name="l1314"><span class="linenum">1314</span></a>          <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('description')" href="../../_variables/description.html">$description</a> = <a class="function" onClick="logFunction('file_rewrite_pluginfile_urls')" href="../../_functions/file_rewrite_pluginfile_urls.html" onMouseOver="funcPopup(event,'file_rewrite_pluginfile_urls')">file_rewrite_pluginfile_urls</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('description')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/description.html">description</a>, '<a class="filename" href="../../pluginfile.php.html">pluginfile.php</a>',
<a name="l1315"><span class="linenum">1315</span></a>                  <a class="class" onClick="logClass('context_system')" href="../../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>()-&gt;id, 'tag', 'description', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1316"><span class="linenum">1316</span></a>          return <a class="function" onClick="logFunction('format_text')" href="../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('description')" href="../../_variables/description.html">$description</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('descriptionformat')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/descriptionformat.html">descriptionformat</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>);
<a name="l1317"><span class="linenum">1317</span></a>      }
<a name="l1318"><span class="linenum">1318</span></a>  
<a name="l1319"><span class="linenum">1319</span></a>      <span class="comment">/**</span>
<a name="l1320"><span class="linenum">1320</span></a>  <span class="comment">     * Returns the list of tag links available for the current user (edit, flag, etc.)</span>
<a name="l1321"><span class="linenum">1321</span></a>  <span class="comment">     *</span>
<a name="l1322"><span class="linenum">1322</span></a>  <span class="comment">     * @return array</span>
<a name="l1323"><span class="linenum">1323</span></a>  <span class="comment">     */</span>
<a name="l1324"><span class="linenum">1324</span></a>      public function <a class="function" onClick="logFunction('get_links')" href="../../_functions/get_links.html" onMouseOver="funcPopup(event,'get_links')">get_links</a>() {
<a name="l1325"><span class="linenum">1325</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l1326"><span class="linenum">1326</span></a>          <a class="var it1003" onMouseOver="hilite(1003)" onMouseOut="lolite()" onClick="logVariable('links')" href="../../_variables/links.html">$links</a> = array();
<a name="l1327"><span class="linenum">1327</span></a>  
<a name="l1328"><span class="linenum">1328</span></a>          if (!<a class="function" onClick="logFunction('isloggedin')" href="../../_functions/isloggedin.html" onMouseOver="funcPopup(event,'isloggedin')">isloggedin</a>() || <a class="function" onClick="logFunction('isguestuser')" href="../../_functions/isguestuser.html" onMouseOver="funcPopup(event,'isguestuser')">isguestuser</a>()) {
<a name="l1329"><span class="linenum">1329</span></a>              return <a class="var it1003" onMouseOver="hilite(1003)" onMouseOut="lolite()" onClick="logVariable('links')" href="../../_variables/links.html">$links</a>;
<a name="l1330"><span class="linenum">1330</span></a>          }
<a name="l1331"><span class="linenum">1331</span></a>  
<a name="l1332"><span class="linenum">1332</span></a>          <a class="var it2390" onMouseOver="hilite(2390)" onMouseOut="lolite()" onClick="logVariable('tagname')" href="../../_variables/tagname.html">$tagname</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_display_name')" href="../../_functions/get_display_name.html" onMouseOver="funcPopup(event,'get_display_name')">get_display_name</a>();
<a name="l1333"><span class="linenum">1333</span></a>          <a class="var it221" onMouseOver="hilite(221)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../../_variables/systemcontext.html">$systemcontext</a> = <a class="class" onClick="logClass('context_system')" href="../../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l1334"><span class="linenum">1334</span></a>  
<a name="l1335"><span class="linenum">1335</span></a>  <span class="comment">        // Add a link for users to add/remove this from their interests.</span>
<a name="l1336"><span class="linenum">1336</span></a>          if (static::<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>('core', 'user') &amp;&amp; <a class="class" onClick="logClass('core_tag_area')" href="../../_classes/core_tag_area.html" onMouseOver="classPopup(event,'core_tag_area')">core_tag_area</a>::<a class="function" onClick="logFunction('get_collection')" href="../../_functions/get_collection.html" onMouseOver="funcPopup(event,'get_collection')">get_collection</a>('core', 'user') == <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tagcollid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/tagcollid.html">tagcollid</a>) {
<a name="l1337"><span class="linenum">1337</span></a>              if (static::<a class="function" onClick="logFunction('is_item_tagged_with')" href="../../_functions/is_item_tagged_with.html" onMouseOver="funcPopup(event,'is_item_tagged_with')">is_item_tagged_with</a>('core', 'user', <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('name')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>)) {
<a name="l1338"><span class="linenum">1338</span></a>                  <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../tag/user.php.html">/tag/user.php</a>', array('action' =&gt; 'removeinterest',
<a name="l1339"><span class="linenum">1339</span></a>                      'sesskey' =&gt; <a class="function" onClick="logFunction('sesskey')" href="../../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>(), 'tag' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rawname')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/rawname.html">rawname</a>));
<a name="l1340"><span class="linenum">1340</span></a>                  <a class="var it1003" onMouseOver="hilite(1003)" onMouseOut="lolite()" onClick="logVariable('links')" href="../../_variables/links.html">$links</a>[] = <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('removetagfrommyinterests', 'tag', <a class="var it2390" onMouseOver="hilite(2390)" onMouseOut="lolite()" onClick="logVariable('tagname')" href="../../_variables/tagname.html">$tagname</a>),
<a name="l1341"><span class="linenum">1341</span></a>                          array('class' =&gt; 'removefrommyinterests'));
<a name="l1342"><span class="linenum">1342</span></a>              } else {
<a name="l1343"><span class="linenum">1343</span></a>                  <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../tag/user.php.html">/tag/user.php</a>', array('action' =&gt; 'addinterest',
<a name="l1344"><span class="linenum">1344</span></a>                      'sesskey' =&gt; <a class="function" onClick="logFunction('sesskey')" href="../../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>(), 'tag' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rawname')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/rawname.html">rawname</a>));
<a name="l1345"><span class="linenum">1345</span></a>                  <a class="var it1003" onMouseOver="hilite(1003)" onMouseOut="lolite()" onClick="logVariable('links')" href="../../_variables/links.html">$links</a>[] = <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('addtagtomyinterests', 'tag', <a class="var it2390" onMouseOver="hilite(2390)" onMouseOut="lolite()" onClick="logVariable('tagname')" href="../../_variables/tagname.html">$tagname</a>),
<a name="l1346"><span class="linenum">1346</span></a>                          array('class' =&gt; 'addtomyinterests'));
<a name="l1347"><span class="linenum">1347</span></a>              }
<a name="l1348"><span class="linenum">1348</span></a>          }
<a name="l1349"><span class="linenum">1349</span></a>  
<a name="l1350"><span class="linenum">1350</span></a>  <span class="comment">        // Flag as inappropriate link.  Only people with moodle/tag:flag capability.</span>
<a name="l1351"><span class="linenum">1351</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/tag:flag', <a class="var it221" onMouseOver="hilite(221)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../../_variables/systemcontext.html">$systemcontext</a>)) {
<a name="l1352"><span class="linenum">1352</span></a>              <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../tag/user.php.html">/tag/user.php</a>', array('action' =&gt; 'flaginappropriate',
<a name="l1353"><span class="linenum">1353</span></a>                  'sesskey' =&gt; <a class="function" onClick="logFunction('sesskey')" href="../../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>(), 'id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l1354"><span class="linenum">1354</span></a>              <a class="var it1003" onMouseOver="hilite(1003)" onMouseOut="lolite()" onClick="logVariable('links')" href="../../_variables/links.html">$links</a>[] = <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('flagasinappropriate', 'tag', <a class="var it2390" onMouseOver="hilite(2390)" onMouseOut="lolite()" onClick="logVariable('tagname')" href="../../_variables/tagname.html">$tagname</a>),
<a name="l1355"><span class="linenum">1355</span></a>                          array('class' =&gt; 'flagasinappropriate'));
<a name="l1356"><span class="linenum">1356</span></a>          }
<a name="l1357"><span class="linenum">1357</span></a>  
<a name="l1358"><span class="linenum">1358</span></a>  <span class="comment">        // Edit tag: Only people with moodle/tag:edit capability who either have it as an interest or can manage tags.</span>
<a name="l1359"><span class="linenum">1359</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/tag:edit', <a class="var it221" onMouseOver="hilite(221)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../../_variables/systemcontext.html">$systemcontext</a>) ||
<a name="l1360"><span class="linenum">1360</span></a>                  <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/tag:manage', <a class="var it221" onMouseOver="hilite(221)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../../_variables/systemcontext.html">$systemcontext</a>)) {
<a name="l1361"><span class="linenum">1361</span></a>              <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../tag/edit.php.html">/tag/edit.php</a>', array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l1362"><span class="linenum">1362</span></a>              <a class="var it1003" onMouseOver="hilite(1003)" onMouseOut="lolite()" onClick="logVariable('links')" href="../../_variables/links.html">$links</a>[] = <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('edittag', 'tag'),
<a name="l1363"><span class="linenum">1363</span></a>                          array('class' =&gt; 'edittag'));
<a name="l1364"><span class="linenum">1364</span></a>          }
<a name="l1365"><span class="linenum">1365</span></a>  
<a name="l1366"><span class="linenum">1366</span></a>          return <a class="var it1003" onMouseOver="hilite(1003)" onMouseOut="lolite()" onClick="logVariable('links')" href="../../_variables/links.html">$links</a>;
<a name="l1367"><span class="linenum">1367</span></a>      }
<a name="l1368"><span class="linenum">1368</span></a>  
<a name="l1369"><span class="linenum">1369</span></a>      <span class="comment">/**</span>
<a name="l1370"><span class="linenum">1370</span></a>  <span class="comment">     * Delete one or more tag, and all their instances if there are any left.</span>
<a name="l1371"><span class="linenum">1371</span></a>  <span class="comment">     *</span>
<a name="l1372"><span class="linenum">1372</span></a>  <span class="comment">     * @param    int|array    $tagids one tagid (int), or one array of tagids to delete</span>
<a name="l1373"><span class="linenum">1373</span></a>  <span class="comment">     * @return   bool     true on success, false otherwise</span>
<a name="l1374"><span class="linenum">1374</span></a>  <span class="comment">     */</span>
<a name="l1375"><span class="linenum">1375</span></a>      public static function <a class="function" onClick="logFunction('delete_tags')" href="../../_functions/delete_tags.html" onMouseOver="funcPopup(event,'delete_tags')">delete_tags</a>(<a class="var it2662" onMouseOver="hilite(2662)" onMouseOut="lolite()" onClick="logVariable('tagids')" href="../../_variables/tagids.html">$tagids</a>) {
<a name="l1376"><span class="linenum">1376</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1377"><span class="linenum">1377</span></a>  
<a name="l1378"><span class="linenum">1378</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it2662" onMouseOver="hilite(2662)" onMouseOut="lolite()" onClick="logVariable('tagids')" href="../../_variables/tagids.html">$tagids</a>)) {
<a name="l1379"><span class="linenum">1379</span></a>              <a class="var it2662" onMouseOver="hilite(2662)" onMouseOut="lolite()" onClick="logVariable('tagids')" href="../../_variables/tagids.html">$tagids</a> = array(<a class="var it2662" onMouseOver="hilite(2662)" onMouseOut="lolite()" onClick="logVariable('tagids')" href="../../_variables/tagids.html">$tagids</a>);
<a name="l1380"><span class="linenum">1380</span></a>          }
<a name="l1381"><span class="linenum">1381</span></a>          if (empty(<a class="var it2662" onMouseOver="hilite(2662)" onMouseOut="lolite()" onClick="logVariable('tagids')" href="../../_variables/tagids.html">$tagids</a>)) {
<a name="l1382"><span class="linenum">1382</span></a>              return;
<a name="l1383"><span class="linenum">1383</span></a>          }
<a name="l1384"><span class="linenum">1384</span></a>  
<a name="l1385"><span class="linenum">1385</span></a>  <span class="comment">        // Use the tagids to create a select statement to be used later.</span>
<a name="l1386"><span class="linenum">1386</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it36908" onMouseOver="hilite(36908)" onMouseOut="lolite()" onClick="logVariable('tagsql')" href="../../_variables/tagsql.html">$tagsql</a>, <a class="var it36909" onMouseOver="hilite(36909)" onMouseOut="lolite()" onClick="logVariable('tagparams')" href="../../_variables/tagparams.html">$tagparams</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it2662" onMouseOver="hilite(2662)" onMouseOut="lolite()" onClick="logVariable('tagids')" href="../../_variables/tagids.html">$tagids</a>);
<a name="l1387"><span class="linenum">1387</span></a>  
<a name="l1388"><span class="linenum">1388</span></a>  <span class="comment">        // Store the tags and tag instances we are going to delete.</span>
<a name="l1389"><span class="linenum">1389</span></a>          <a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>('tag', 'id ' . <a class="var it36908" onMouseOver="hilite(36908)" onMouseOut="lolite()" onClick="logVariable('tagsql')" href="../../_variables/tagsql.html">$tagsql</a>, <a class="var it36909" onMouseOver="hilite(36909)" onMouseOut="lolite()" onClick="logVariable('tagparams')" href="../../_variables/tagparams.html">$tagparams</a>);
<a name="l1390"><span class="linenum">1390</span></a>          <a class="var it24585" onMouseOver="hilite(24585)" onMouseOut="lolite()" onClick="logVariable('taginstances')" href="../../_variables/taginstances.html">$taginstances</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>('tag_instance', 'tagid ' . <a class="var it36908" onMouseOver="hilite(36908)" onMouseOut="lolite()" onClick="logVariable('tagsql')" href="../../_variables/tagsql.html">$tagsql</a>, <a class="var it36909" onMouseOver="hilite(36909)" onMouseOut="lolite()" onClick="logVariable('tagparams')" href="../../_variables/tagparams.html">$tagparams</a>);
<a name="l1391"><span class="linenum">1391</span></a>  
<a name="l1392"><span class="linenum">1392</span></a>  <span class="comment">        // Delete all the tag instances.</span>
<a name="l1393"><span class="linenum">1393</span></a>          <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../_variables/select.html">$select</a> = 'WHERE tagid ' . <a class="var it36908" onMouseOver="hilite(36908)" onMouseOut="lolite()" onClick="logVariable('tagsql')" href="../../_variables/tagsql.html">$tagsql</a>;
<a name="l1394"><span class="linenum">1394</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;DELETE FROM {tag_instance} <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../_variables/select.html">$select</a>&quot;;
<a name="l1395"><span class="linenum">1395</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('execute')" href="../../_functions/execute.html" onMouseOver="funcPopup(event,'execute')">execute</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it36909" onMouseOver="hilite(36909)" onMouseOut="lolite()" onClick="logVariable('tagparams')" href="../../_variables/tagparams.html">$tagparams</a>);
<a name="l1396"><span class="linenum">1396</span></a>  
<a name="l1397"><span class="linenum">1397</span></a>  <span class="comment">        // Delete all the tag correlations.</span>
<a name="l1398"><span class="linenum">1398</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;DELETE FROM {tag_correlation} <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../_variables/select.html">$select</a>&quot;;
<a name="l1399"><span class="linenum">1399</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('execute')" href="../../_functions/execute.html" onMouseOver="funcPopup(event,'execute')">execute</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it36909" onMouseOver="hilite(36909)" onMouseOut="lolite()" onClick="logVariable('tagparams')" href="../../_variables/tagparams.html">$tagparams</a>);
<a name="l1400"><span class="linenum">1400</span></a>  
<a name="l1401"><span class="linenum">1401</span></a>  <span class="comment">        // Delete all the tags.</span>
<a name="l1402"><span class="linenum">1402</span></a>          <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../_variables/select.html">$select</a> = 'WHERE id ' . <a class="var it36908" onMouseOver="hilite(36908)" onMouseOut="lolite()" onClick="logVariable('tagsql')" href="../../_variables/tagsql.html">$tagsql</a>;
<a name="l1403"><span class="linenum">1403</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;DELETE FROM {tag} <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../_variables/select.html">$select</a>&quot;;
<a name="l1404"><span class="linenum">1404</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('execute')" href="../../_functions/execute.html" onMouseOver="funcPopup(event,'execute')">execute</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it36909" onMouseOver="hilite(36909)" onMouseOut="lolite()" onClick="logVariable('tagparams')" href="../../_variables/tagparams.html">$tagparams</a>);
<a name="l1405"><span class="linenum">1405</span></a>  
<a name="l1406"><span class="linenum">1406</span></a>  <span class="comment">        // Fire an event that these items were untagged.</span>
<a name="l1407"><span class="linenum">1407</span></a>          if (<a class="var it24585" onMouseOver="hilite(24585)" onMouseOut="lolite()" onClick="logVariable('taginstances')" href="../../_variables/taginstances.html">$taginstances</a>) {
<a name="l1408"><span class="linenum">1408</span></a>  <span class="comment">            // Save the system context in case the 'contextid' column in the 'tag_instance' table is null.</span>
<a name="l1409"><span class="linenum">1409</span></a>              <a class="var it23648" onMouseOver="hilite(23648)" onMouseOut="lolite()" onClick="logVariable('syscontextid')" href="../../_variables/syscontextid.html">$syscontextid</a> = <a class="class" onClick="logClass('context_system')" href="../../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>()-&gt;id;
<a name="l1410"><span class="linenum">1410</span></a>  <span class="comment">            // Loop through the tag instances and fire a 'tag_removed'' event.</span>
<a name="l1411"><span class="linenum">1411</span></a>              foreach (<a class="var it24585" onMouseOver="hilite(24585)" onMouseOut="lolite()" onClick="logVariable('taginstances')" href="../../_variables/taginstances.html">$taginstances</a> as <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>) {
<a name="l1412"><span class="linenum">1412</span></a>  <span class="comment">                // We can not fire an event with 'null' as the contextid.</span>
<a name="l1413"><span class="linenum">1413</span></a>                  if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>-&gt;<a onClick="logVariable('contextid')" class="var it43266" onMouseOver="hilite(43266)" onMouseOut="lolite()" href="../../_variables/contextid.html">contextid</a>)) {
<a name="l1414"><span class="linenum">1414</span></a>                      <a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>-&gt;<a onClick="logVariable('contextid')" class="var it43266" onMouseOver="hilite(43266)" onMouseOut="lolite()" href="../../_variables/contextid.html">contextid</a> = <a class="var it23648" onMouseOver="hilite(23648)" onMouseOut="lolite()" onClick="logVariable('syscontextid')" href="../../_variables/syscontextid.html">$syscontextid</a>;
<a name="l1415"><span class="linenum">1415</span></a>                  }
<a name="l1416"><span class="linenum">1416</span></a>  
<a name="l1417"><span class="linenum">1417</span></a>  <span class="comment">                // Trigger tag removed event.</span>
<a name="l1418"><span class="linenum">1418</span></a>                  \core\event\<a class="class" onClick="logClass('tag_removed')" href="../../_classes/tag_removed.html" onMouseOver="classPopup(event,'tag_removed')">tag_removed</a>::<a class="function" onClick="logFunction('create_from_tag_instance')" href="../../_functions/create_from_tag_instance.html" onMouseOver="funcPopup(event,'create_from_tag_instance')">create_from_tag_instance</a>(<a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>,
<a name="l1419"><span class="linenum">1419</span></a>                      <a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a>[<a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>-&gt;<a onClick="logVariable('tagid')" class="var it43266" onMouseOver="hilite(43266)" onMouseOut="lolite()" href="../../_variables/tagid.html">tagid</a>]-&gt;name, <a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a>[<a class="var it2661" onMouseOver="hilite(2661)" onMouseOut="lolite()" onClick="logVariable('taginstance')" href="../../_variables/taginstance.html">$taginstance</a>-&gt;<a onClick="logVariable('tagid')" class="var it43266" onMouseOver="hilite(43266)" onMouseOut="lolite()" href="../../_variables/tagid.html">tagid</a>]-&gt;rawname,
<a name="l1420"><span class="linenum">1420</span></a>                      true)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l1421"><span class="linenum">1421</span></a>              }
<a name="l1422"><span class="linenum">1422</span></a>          }
<a name="l1423"><span class="linenum">1423</span></a>  
<a name="l1424"><span class="linenum">1424</span></a>  <span class="comment">        // Fire an event that these tags were deleted.</span>
<a name="l1425"><span class="linenum">1425</span></a>          if (<a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a>) {
<a name="l1426"><span class="linenum">1426</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_system')" href="../../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l1427"><span class="linenum">1427</span></a>              foreach (<a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a> as <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>) {
<a name="l1428"><span class="linenum">1428</span></a>  <span class="comment">                // Delete all files associated with this tag.</span>
<a name="l1429"><span class="linenum">1429</span></a>                  <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l1430"><span class="linenum">1430</span></a>                  <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_area_files')" href="../../_functions/get_area_files.html" onMouseOver="funcPopup(event,'get_area_files')">get_area_files</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'tag', 'description', <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>-&gt;<a onClick="logVariable('id')" class="var it43262" onMouseOver="hilite(43262)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1431"><span class="linenum">1431</span></a>                  foreach (<a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a> as <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>) {
<a name="l1432"><span class="linenum">1432</span></a>                      <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>();
<a name="l1433"><span class="linenum">1433</span></a>                  }
<a name="l1434"><span class="linenum">1434</span></a>  
<a name="l1435"><span class="linenum">1435</span></a>  <span class="comment">                // Trigger an event for deleting this tag.</span>
<a name="l1436"><span class="linenum">1436</span></a>                  <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('tag_deleted')" href="../../_classes/tag_deleted.html" onMouseOver="classPopup(event,'tag_deleted')">tag_deleted</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l1437"><span class="linenum">1437</span></a>                      'objectid' =&gt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>-&gt;<a onClick="logVariable('id')" class="var it43262" onMouseOver="hilite(43262)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l1438"><span class="linenum">1438</span></a>                      'relateduserid' =&gt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>-&gt;<a onClick="logVariable('userid')" class="var it43262" onMouseOver="hilite(43262)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>,
<a name="l1439"><span class="linenum">1439</span></a>                      'context' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>,
<a name="l1440"><span class="linenum">1440</span></a>                      'other' =&gt; array(
<a name="l1441"><span class="linenum">1441</span></a>                          'name' =&gt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>-&gt;<a onClick="logVariable('name')" class="var it43262" onMouseOver="hilite(43262)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>,
<a name="l1442"><span class="linenum">1442</span></a>                          'rawname' =&gt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>-&gt;rawname
<a name="l1443"><span class="linenum">1443</span></a>                      )
<a name="l1444"><span class="linenum">1444</span></a>                  ));
<a name="l1445"><span class="linenum">1445</span></a>                  <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('tag', <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>);
<a name="l1446"><span class="linenum">1446</span></a>                  <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l1447"><span class="linenum">1447</span></a>              }
<a name="l1448"><span class="linenum">1448</span></a>          }
<a name="l1449"><span class="linenum">1449</span></a>  
<a name="l1450"><span class="linenum">1450</span></a>          return true;
<a name="l1451"><span class="linenum">1451</span></a>      }
<a name="l1452"><span class="linenum">1452</span></a>  
<a name="l1453"><span class="linenum">1453</span></a>      <span class="comment">/**</span>
<a name="l1454"><span class="linenum">1454</span></a>  <span class="comment">     * Combine together correlated tags of several tags</span>
<a name="l1455"><span class="linenum">1455</span></a>  <span class="comment">     *</span>
<a name="l1456"><span class="linenum">1456</span></a>  <span class="comment">     * This is a help method for method combine_tags()</span>
<a name="l1457"><span class="linenum">1457</span></a>  <span class="comment">     *</span>
<a name="l1458"><span class="linenum">1458</span></a>  <span class="comment">     * @param core_tag_tag[] $tags</span>
<a name="l1459"><span class="linenum">1459</span></a>  <span class="comment">     */</span>
<a name="l1460"><span class="linenum">1460</span></a>      protected function <a class="function" onClick="logFunction('combine_correlated_tags')" href="../../_functions/combine_correlated_tags.html" onMouseOver="funcPopup(event,'combine_correlated_tags')">combine_correlated_tags</a>(<a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a>) {
<a name="l1461"><span class="linenum">1461</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1462"><span class="linenum">1462</span></a>          <a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../../_variables/ids.html">$ids</a> = <a class="phpfunction" onClick="logFunction('array_map')" href="../../_functions/array_map.html" onMouseOver="phpfuncPopup(event,'array_map')">array_map</a>(function(<a class="var it873" onMouseOver="hilite(873)" onMouseOut="lolite()" onClick="logVariable('t')" href="../../_variables/t.html">$t</a>) {
<a name="l1463"><span class="linenum">1463</span></a>              return <a class="var it873" onMouseOver="hilite(873)" onMouseOut="lolite()" onClick="logVariable('t')" href="../../_variables/t.html">$t</a>-&gt;<a onClick="logVariable('id')" class="var it43270" onMouseOver="hilite(43270)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1464"><span class="linenum">1464</span></a>          }, <a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a>);
<a name="l1465"><span class="linenum">1465</span></a>  
<a name="l1466"><span class="linenum">1466</span></a>  <span class="comment">        // Retrieve the correlated tags of this tag and correlated tags of all tags to be merged in one query</span>
<a name="l1467"><span class="linenum">1467</span></a>  <span class="comment">        // but store them separately. Calculate the list of correlated tags that need to be added to the current.</span>
<a name="l1468"><span class="linenum">1468</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../../_variables/ids.html">$ids</a>);
<a name="l1469"><span class="linenum">1469</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1470"><span class="linenum">1470</span></a>          <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>('tag_correlation', 'tagid '.<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>.' OR tagid = ?',
<a name="l1471"><span class="linenum">1471</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, '', 'tagid, id, correlatedtags');
<a name="l1472"><span class="linenum">1472</span></a>          <a class="var it36906" onMouseOver="hilite(36906)" onMouseOut="lolite()" onClick="logVariable('correlated')" href="../../_variables/correlated.html">$correlated</a> = array();
<a name="l1473"><span class="linenum">1473</span></a>          <a class="var it36910" onMouseOver="hilite(36910)" onMouseOut="lolite()" onClick="logVariable('mycorrelated')" href="../../_variables/mycorrelated.html">$mycorrelated</a> = array();
<a name="l1474"><span class="linenum">1474</span></a>          foreach (<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a> as <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>) {
<a name="l1475"><span class="linenum">1475</span></a>              <a class="var it6549" onMouseOver="hilite(6549)" onMouseOut="lolite()" onClick="logVariable('taglist')" href="../../_variables/taglist.html">$taglist</a> = <a class="phpfunction" onClick="logFunction('preg_split')" href="../../_functions/preg_split.html" onMouseOver="phpfuncPopup(event,'preg_split')">preg_split</a>('/\s*,\s*/', <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('correlatedtags')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/correlatedtags.html">correlatedtags</a>), -1, PREG_SPLIT_NO_EMPTY);
<a name="l1476"><span class="linenum">1476</span></a>              if (<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('tagid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/tagid.html">tagid</a> == <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l1477"><span class="linenum">1477</span></a>                  <a class="var it36910" onMouseOver="hilite(36910)" onMouseOut="lolite()" onClick="logVariable('mycorrelated')" href="../../_variables/mycorrelated.html">$mycorrelated</a> = <a class="var it6549" onMouseOver="hilite(6549)" onMouseOut="lolite()" onClick="logVariable('taglist')" href="../../_variables/taglist.html">$taglist</a>;
<a name="l1478"><span class="linenum">1478</span></a>              } else {
<a name="l1479"><span class="linenum">1479</span></a>                  <a class="var it36906" onMouseOver="hilite(36906)" onMouseOut="lolite()" onClick="logVariable('correlated')" href="../../_variables/correlated.html">$correlated</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it36906" onMouseOver="hilite(36906)" onMouseOut="lolite()" onClick="logVariable('correlated')" href="../../_variables/correlated.html">$correlated</a>, <a class="var it6549" onMouseOver="hilite(6549)" onMouseOut="lolite()" onClick="logVariable('taglist')" href="../../_variables/taglist.html">$taglist</a>);
<a name="l1480"><span class="linenum">1480</span></a>              }
<a name="l1481"><span class="linenum">1481</span></a>          }
<a name="l1482"><span class="linenum">1482</span></a>          <a class="phpfunction" onClick="logFunction('array_unique')" href="../../_functions/array_unique.html" onMouseOver="phpfuncPopup(event,'array_unique')">array_unique</a>(<a class="var it36906" onMouseOver="hilite(36906)" onMouseOut="lolite()" onClick="logVariable('correlated')" href="../../_variables/correlated.html">$correlated</a>);
<a name="l1483"><span class="linenum">1483</span></a>  <span class="comment">        // Strip out from $correlated the ids of the tags that are already in $mycorrelated</span>
<a name="l1484"><span class="linenum">1484</span></a>  <span class="comment">        // or are one of the tags that are going to be combined.</span>
<a name="l1485"><span class="linenum">1485</span></a>          <a class="var it36906" onMouseOver="hilite(36906)" onMouseOut="lolite()" onClick="logVariable('correlated')" href="../../_variables/correlated.html">$correlated</a> = <a class="phpfunction" onClick="logFunction('array_diff')" href="../../_functions/array_diff.html" onMouseOver="phpfuncPopup(event,'array_diff')">array_diff</a>(<a class="var it36906" onMouseOver="hilite(36906)" onMouseOut="lolite()" onClick="logVariable('correlated')" href="../../_variables/correlated.html">$correlated</a>, [<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>], <a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../../_variables/ids.html">$ids</a>, <a class="var it36910" onMouseOver="hilite(36910)" onMouseOut="lolite()" onClick="logVariable('mycorrelated')" href="../../_variables/mycorrelated.html">$mycorrelated</a>);
<a name="l1486"><span class="linenum">1486</span></a>  
<a name="l1487"><span class="linenum">1487</span></a>          if (empty(<a class="var it36906" onMouseOver="hilite(36906)" onMouseOut="lolite()" onClick="logVariable('correlated')" href="../../_variables/correlated.html">$correlated</a>)) {
<a name="l1488"><span class="linenum">1488</span></a>  <span class="comment">            // Nothing to do, ignore situation when current tag is correlated to one of the merged tags - they will</span>
<a name="l1489"><span class="linenum">1489</span></a>  <span class="comment">            // be deleted later and get_tag_correlation() will not return them. Next cron will clean everything up.</span>
<a name="l1490"><span class="linenum">1490</span></a>              return;
<a name="l1491"><span class="linenum">1491</span></a>          }
<a name="l1492"><span class="linenum">1492</span></a>  
<a name="l1493"><span class="linenum">1493</span></a>  <span class="comment">        // Update correlated tags of this tag.</span>
<a name="l1494"><span class="linenum">1494</span></a>          <a class="var it36911" onMouseOver="hilite(36911)" onMouseOut="lolite()" onClick="logVariable('newcorrelatedlist')" href="../../_variables/newcorrelatedlist.html">$newcorrelatedlist</a> = <a class="function" onClick="logFunction('join')" href="../../_functions/join.html" onMouseOver="funcPopup(event,'join')">join</a>(',', <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it36910" onMouseOver="hilite(36910)" onMouseOut="lolite()" onClick="logVariable('mycorrelated')" href="../../_variables/mycorrelated.html">$mycorrelated</a>, <a class="var it36906" onMouseOver="hilite(36906)" onMouseOut="lolite()" onClick="logVariable('correlated')" href="../../_variables/correlated.html">$correlated</a>));
<a name="l1495"><span class="linenum">1495</span></a>          if (isset(<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a>[<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>])) {
<a name="l1496"><span class="linenum">1496</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('tag_correlation', array('id' =&gt; <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a>[<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>]-&gt;id, 'correlatedtags' =&gt; <a class="var it36911" onMouseOver="hilite(36911)" onMouseOut="lolite()" onClick="logVariable('newcorrelatedlist')" href="../../_variables/newcorrelatedlist.html">$newcorrelatedlist</a>));
<a name="l1497"><span class="linenum">1497</span></a>          } else {
<a name="l1498"><span class="linenum">1498</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('tag_correlation', array('tagid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'correlatedtags' =&gt; <a class="var it36911" onMouseOver="hilite(36911)" onMouseOut="lolite()" onClick="logVariable('newcorrelatedlist')" href="../../_variables/newcorrelatedlist.html">$newcorrelatedlist</a>));
<a name="l1499"><span class="linenum">1499</span></a>          }
<a name="l1500"><span class="linenum">1500</span></a>  
<a name="l1501"><span class="linenum">1501</span></a>  <span class="comment">        // Add this tag to the list of correlated tags of each tag in $correlated.</span>
<a name="l1502"><span class="linenum">1502</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it36906" onMouseOver="hilite(36906)" onMouseOut="lolite()" onClick="logVariable('correlated')" href="../../_variables/correlated.html">$correlated</a>);
<a name="l1503"><span class="linenum">1503</span></a>          <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>('tag_correlation', 'tagid '.<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, '', 'tagid, id, correlatedtags');
<a name="l1504"><span class="linenum">1504</span></a>          foreach (<a class="var it36906" onMouseOver="hilite(36906)" onMouseOut="lolite()" onClick="logVariable('correlated')" href="../../_variables/correlated.html">$correlated</a> as <a class="var it2128" onMouseOver="hilite(2128)" onMouseOut="lolite()" onClick="logVariable('tagid')" href="../../_variables/tagid.html">$tagid</a>) {
<a name="l1505"><span class="linenum">1505</span></a>              if (isset(<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a>[<a class="var it2128" onMouseOver="hilite(2128)" onMouseOut="lolite()" onClick="logVariable('tagid')" href="../../_variables/tagid.html">$tagid</a>])) {
<a name="l1506"><span class="linenum">1506</span></a>                  <a class="var it36911" onMouseOver="hilite(36911)" onMouseOut="lolite()" onClick="logVariable('newcorrelatedlist')" href="../../_variables/newcorrelatedlist.html">$newcorrelatedlist</a> = <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a>[<a class="var it2128" onMouseOver="hilite(2128)" onMouseOut="lolite()" onClick="logVariable('tagid')" href="../../_variables/tagid.html">$tagid</a>]-&gt;correlatedtags . ',' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1507"><span class="linenum">1507</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('tag_correlation', array('id' =&gt; <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a>[<a class="var it2128" onMouseOver="hilite(2128)" onMouseOut="lolite()" onClick="logVariable('tagid')" href="../../_variables/tagid.html">$tagid</a>]-&gt;id, 'correlatedtags' =&gt; <a class="var it36911" onMouseOver="hilite(36911)" onMouseOut="lolite()" onClick="logVariable('newcorrelatedlist')" href="../../_variables/newcorrelatedlist.html">$newcorrelatedlist</a>));
<a name="l1508"><span class="linenum">1508</span></a>              } else {
<a name="l1509"><span class="linenum">1509</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('tag_correlation', array('tagid' =&gt; <a class="var it2128" onMouseOver="hilite(2128)" onMouseOut="lolite()" onClick="logVariable('tagid')" href="../../_variables/tagid.html">$tagid</a>, 'correlatedtags' =&gt; '' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l1510"><span class="linenum">1510</span></a>              }
<a name="l1511"><span class="linenum">1511</span></a>          }
<a name="l1512"><span class="linenum">1512</span></a>      }
<a name="l1513"><span class="linenum">1513</span></a>  
<a name="l1514"><span class="linenum">1514</span></a>      <span class="comment">/**</span>
<a name="l1515"><span class="linenum">1515</span></a>  <span class="comment">     * Combines several other tags into this one</span>
<a name="l1516"><span class="linenum">1516</span></a>  <span class="comment">     *</span>
<a name="l1517"><span class="linenum">1517</span></a>  <span class="comment">     * Combining rules:</span>
<a name="l1518"><span class="linenum">1518</span></a>  <span class="comment">     * - current tag becomes the &quot;main&quot; one, all instances</span>
<a name="l1519"><span class="linenum">1519</span></a>  <span class="comment">     *   pointing to other tags are changed to point to it.</span>
<a name="l1520"><span class="linenum">1520</span></a>  <span class="comment">     * - if any of the tags is standard, the &quot;main&quot; tag becomes standard too</span>
<a name="l1521"><span class="linenum">1521</span></a>  <span class="comment">     * - all tags except for the current (&quot;main&quot;) are deleted, even when they are standard</span>
<a name="l1522"><span class="linenum">1522</span></a>  <span class="comment">     *</span>
<a name="l1523"><span class="linenum">1523</span></a>  <span class="comment">     * @param core_tag_tag[] $tags tags to combine into this one</span>
<a name="l1524"><span class="linenum">1524</span></a>  <span class="comment">     */</span>
<a name="l1525"><span class="linenum">1525</span></a>      public function <a class="function" onClick="logFunction('combine_tags')" href="../../_functions/combine_tags.html" onMouseOver="funcPopup(event,'combine_tags')">combine_tags</a>(<a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a>) {
<a name="l1526"><span class="linenum">1526</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1527"><span class="linenum">1527</span></a>  
<a name="l1528"><span class="linenum">1528</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_fields_exist')" href="../../_functions/ensure_fields_exist.html" onMouseOver="funcPopup(event,'ensure_fields_exist')">ensure_fields_exist</a>(array('id', 'tagcollid', 'isstandard', 'name', 'rawname'), 'combine_tags');
<a name="l1529"><span class="linenum">1529</span></a>  
<a name="l1530"><span class="linenum">1530</span></a>  <span class="comment">        // Retrieve all tag objects, find if there are any standard tags in the set.</span>
<a name="l1531"><span class="linenum">1531</span></a>          <a class="var it12378" onMouseOver="hilite(12378)" onMouseOut="lolite()" onClick="logVariable('isstandard')" href="../../_variables/isstandard.html">$isstandard</a> = false;
<a name="l1532"><span class="linenum">1532</span></a>          <a class="var it36912" onMouseOver="hilite(36912)" onMouseOut="lolite()" onClick="logVariable('tagstocombine')" href="../../_variables/tagstocombine.html">$tagstocombine</a> = array();
<a name="l1533"><span class="linenum">1533</span></a>          <a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../../_variables/ids.html">$ids</a> = array();
<a name="l1534"><span class="linenum">1534</span></a>          <a class="var it2670" onMouseOver="hilite(2670)" onMouseOut="lolite()" onClick="logVariable('relatedtags')" href="../../_variables/relatedtags.html">$relatedtags</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_manual_related_tags')" href="../../_functions/get_manual_related_tags.html" onMouseOver="funcPopup(event,'get_manual_related_tags')">get_manual_related_tags</a>();
<a name="l1535"><span class="linenum">1535</span></a>          foreach (<a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../../_variables/tags.html">$tags</a> as <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>) {
<a name="l1536"><span class="linenum">1536</span></a>              <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>-&gt;<a class="function" onClick="logFunction('ensure_fields_exist')" href="../../_functions/ensure_fields_exist.html" onMouseOver="funcPopup(event,'ensure_fields_exist')">ensure_fields_exist</a>(array('id', 'tagcollid', 'isstandard', 'tagcollid', 'name', 'rawname'), 'combine_tags');
<a name="l1537"><span class="linenum">1537</span></a>              if (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a> &amp;&amp; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>-&gt;<a onClick="logVariable('id')" class="var it43262" onMouseOver="hilite(43262)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> != <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> &amp;&amp; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>-&gt;<a onClick="logVariable('tagcollid')" class="var it43262" onMouseOver="hilite(43262)" onMouseOut="lolite()" href="../../_variables/tagcollid.html">tagcollid</a> == <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tagcollid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/tagcollid.html">tagcollid</a>) {
<a name="l1538"><span class="linenum">1538</span></a>                  <a class="var it12378" onMouseOver="hilite(12378)" onMouseOut="lolite()" onClick="logVariable('isstandard')" href="../../_variables/isstandard.html">$isstandard</a> = <a class="var it12378" onMouseOver="hilite(12378)" onMouseOut="lolite()" onClick="logVariable('isstandard')" href="../../_variables/isstandard.html">$isstandard</a> || <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>-&gt;<a onClick="logVariable('isstandard')" class="var it43262" onMouseOver="hilite(43262)" onMouseOut="lolite()" href="../../_variables/isstandard.html">isstandard</a>;
<a name="l1539"><span class="linenum">1539</span></a>                  <a class="var it36912" onMouseOver="hilite(36912)" onMouseOut="lolite()" onClick="logVariable('tagstocombine')" href="../../_variables/tagstocombine.html">$tagstocombine</a>[<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>-&gt;<a onClick="logVariable('name')" class="var it43262" onMouseOver="hilite(43262)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>] = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>;
<a name="l1540"><span class="linenum">1540</span></a>                  <a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../../_variables/ids.html">$ids</a>[] = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>-&gt;<a onClick="logVariable('id')" class="var it43262" onMouseOver="hilite(43262)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1541"><span class="linenum">1541</span></a>                  <a class="var it2670" onMouseOver="hilite(2670)" onMouseOut="lolite()" onClick="logVariable('relatedtags')" href="../../_variables/relatedtags.html">$relatedtags</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it2670" onMouseOver="hilite(2670)" onMouseOut="lolite()" onClick="logVariable('relatedtags')" href="../../_variables/relatedtags.html">$relatedtags</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>-&gt;<a class="function" onClick="logFunction('get_manual_related_tags')" href="../../_functions/get_manual_related_tags.html" onMouseOver="funcPopup(event,'get_manual_related_tags')">get_manual_related_tags</a>());
<a name="l1542"><span class="linenum">1542</span></a>              }
<a name="l1543"><span class="linenum">1543</span></a>          }
<a name="l1544"><span class="linenum">1544</span></a>  
<a name="l1545"><span class="linenum">1545</span></a>          if (empty(<a class="var it36912" onMouseOver="hilite(36912)" onMouseOut="lolite()" onClick="logVariable('tagstocombine')" href="../../_variables/tagstocombine.html">$tagstocombine</a>)) {
<a name="l1546"><span class="linenum">1546</span></a>  <span class="comment">            // Nothing to do.</span>
<a name="l1547"><span class="linenum">1547</span></a>              return;
<a name="l1548"><span class="linenum">1548</span></a>          }
<a name="l1549"><span class="linenum">1549</span></a>  
<a name="l1550"><span class="linenum">1550</span></a>  <span class="comment">        // Combine all manually set related tags, exclude itself all the tags it is about to be combined with.</span>
<a name="l1551"><span class="linenum">1551</span></a>          if (<a class="var it2670" onMouseOver="hilite(2670)" onMouseOut="lolite()" onClick="logVariable('relatedtags')" href="../../_variables/relatedtags.html">$relatedtags</a>) {
<a name="l1552"><span class="linenum">1552</span></a>              <a class="var it2670" onMouseOver="hilite(2670)" onMouseOut="lolite()" onClick="logVariable('relatedtags')" href="../../_variables/relatedtags.html">$relatedtags</a> = <a class="phpfunction" onClick="logFunction('array_map')" href="../../_functions/array_map.html" onMouseOver="phpfuncPopup(event,'array_map')">array_map</a>(function(<a class="var it873" onMouseOver="hilite(873)" onMouseOut="lolite()" onClick="logVariable('t')" href="../../_variables/t.html">$t</a>) {
<a name="l1553"><span class="linenum">1553</span></a>                  return <a class="var it873" onMouseOver="hilite(873)" onMouseOut="lolite()" onClick="logVariable('t')" href="../../_variables/t.html">$t</a>-&gt;<a onClick="logVariable('name')" class="var it43270" onMouseOver="hilite(43270)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>;
<a name="l1554"><span class="linenum">1554</span></a>              }, <a class="var it2670" onMouseOver="hilite(2670)" onMouseOut="lolite()" onClick="logVariable('relatedtags')" href="../../_variables/relatedtags.html">$relatedtags</a>);
<a name="l1555"><span class="linenum">1555</span></a>              <a class="phpfunction" onClick="logFunction('array_unique')" href="../../_functions/array_unique.html" onMouseOver="phpfuncPopup(event,'array_unique')">array_unique</a>(<a class="var it2670" onMouseOver="hilite(2670)" onMouseOut="lolite()" onClick="logVariable('relatedtags')" href="../../_variables/relatedtags.html">$relatedtags</a>);
<a name="l1556"><span class="linenum">1556</span></a>              <a class="var it2670" onMouseOver="hilite(2670)" onMouseOut="lolite()" onClick="logVariable('relatedtags')" href="../../_variables/relatedtags.html">$relatedtags</a> = <a class="phpfunction" onClick="logFunction('array_diff')" href="../../_functions/array_diff.html" onMouseOver="phpfuncPopup(event,'array_diff')">array_diff</a>(<a class="var it2670" onMouseOver="hilite(2670)" onMouseOut="lolite()" onClick="logVariable('relatedtags')" href="../../_variables/relatedtags.html">$relatedtags</a>, [<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('name')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>], <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it36912" onMouseOver="hilite(36912)" onMouseOut="lolite()" onClick="logVariable('tagstocombine')" href="../../_variables/tagstocombine.html">$tagstocombine</a>));
<a name="l1557"><span class="linenum">1557</span></a>          }
<a name="l1558"><span class="linenum">1558</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_related_tags')" href="../../_functions/set_related_tags.html" onMouseOver="funcPopup(event,'set_related_tags')">set_related_tags</a>(<a class="var it2670" onMouseOver="hilite(2670)" onMouseOut="lolite()" onClick="logVariable('relatedtags')" href="../../_variables/relatedtags.html">$relatedtags</a>);
<a name="l1559"><span class="linenum">1559</span></a>  
<a name="l1560"><span class="linenum">1560</span></a>  <span class="comment">        // Combine all correlated tags, exclude itself all the tags it is about to be combined with.</span>
<a name="l1561"><span class="linenum">1561</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('combine_correlated_tags')" href="../../_functions/combine_correlated_tags.html" onMouseOver="funcPopup(event,'combine_correlated_tags')">combine_correlated_tags</a>(<a class="var it36912" onMouseOver="hilite(36912)" onMouseOut="lolite()" onClick="logVariable('tagstocombine')" href="../../_variables/tagstocombine.html">$tagstocombine</a>);
<a name="l1562"><span class="linenum">1562</span></a>  
<a name="l1563"><span class="linenum">1563</span></a>  <span class="comment">        // If any of the duplicate tags are standard, mark this one as standard too.</span>
<a name="l1564"><span class="linenum">1564</span></a>          if (<a class="var it12378" onMouseOver="hilite(12378)" onMouseOut="lolite()" onClick="logVariable('isstandard')" href="../../_variables/isstandard.html">$isstandard</a> &amp;&amp; !<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('isstandard')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/isstandard.html">isstandard</a>) {
<a name="l1565"><span class="linenum">1565</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update')" href="../../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>(array('isstandard' =&gt; 1));
<a name="l1566"><span class="linenum">1566</span></a>          }
<a name="l1567"><span class="linenum">1567</span></a>  
<a name="l1568"><span class="linenum">1568</span></a>  <span class="comment">        // Go through all instances of each tag that needs to be combined and make them point to this tag instead.</span>
<a name="l1569"><span class="linenum">1569</span></a>  <span class="comment">        // We go though the list one by one because otherwise looking-for-duplicates logic would be too complicated.</span>
<a name="l1570"><span class="linenum">1570</span></a>          foreach (<a class="var it36912" onMouseOver="hilite(36912)" onMouseOut="lolite()" onClick="logVariable('tagstocombine')" href="../../_variables/tagstocombine.html">$tagstocombine</a> as <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>) {
<a name="l1571"><span class="linenum">1571</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('tagid' =&gt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>-&gt;<a onClick="logVariable('id')" class="var it43262" onMouseOver="hilite(43262)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mainid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1572"><span class="linenum">1572</span></a>              <a class="var it36913" onMouseOver="hilite(36913)" onMouseOut="lolite()" onClick="logVariable('mainsql')" href="../../_variables/mainsql.html">$mainsql</a> = 'SELECT ti.*, t.name, t.rawname, tim.id AS alreadyhasmaintag '
<a name="l1573"><span class="linenum">1573</span></a>                      . 'FROM {tag_instance} ti '
<a name="l1574"><span class="linenum">1574</span></a>                      . 'LEFT JOIN {tag} t ON t.id = ti.tagid '
<a name="l1575"><span class="linenum">1575</span></a>                      . 'LEFT JOIN {tag_instance} tim ON ti.component = tim.component AND '
<a name="l1576"><span class="linenum">1576</span></a>                      . '    ti.itemtype = tim.itemtype AND ti.itemid = tim.itemid AND '
<a name="l1577"><span class="linenum">1577</span></a>                      . '    ti.tiuserid = tim.tiuserid AND tim.tagid = :mainid '
<a name="l1578"><span class="linenum">1578</span></a>                      . 'WHERE ti.tagid = :tagid';
<a name="l1579"><span class="linenum">1579</span></a>  
<a name="l1580"><span class="linenum">1580</span></a>              <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it36913" onMouseOver="hilite(36913)" onMouseOut="lolite()" onClick="logVariable('mainsql')" href="../../_variables/mainsql.html">$mainsql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1581"><span class="linenum">1581</span></a>              foreach (<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a> as <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>) {
<a name="l1582"><span class="linenum">1582</span></a>                  if (<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('alreadyhasmaintag')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/alreadyhasmaintag.html">alreadyhasmaintag</a>) {
<a name="l1583"><span class="linenum">1583</span></a>  <span class="comment">                    // Item is tagged with both main tag and the duplicate tag.</span>
<a name="l1584"><span class="linenum">1584</span></a>  <span class="comment">                    // Remove instance pointing to the duplicate tag.</span>
<a name="l1585"><span class="linenum">1585</span></a>                      <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>-&gt;<a class="function" onClick="logFunction('delete_instance_as_record')" href="../../_functions/delete_instance_as_record.html" onMouseOver="funcPopup(event,'delete_instance_as_record')">delete_instance_as_record</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>, false);
<a name="l1586"><span class="linenum">1586</span></a>                      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;UPDATE {tag_instance} SET ordering = ordering - 1
<a name="l1587"><span class="linenum">1587</span></a>                              WHERE itemtype = :itemtype
<a name="l1588"><span class="linenum">1588</span></a>                          AND itemid = :itemid AND component = :component AND tiuserid = :tiuserid
<a name="l1589"><span class="linenum">1589</span></a>                          AND ordering &gt; :ordering&quot;;
<a name="l1590"><span class="linenum">1590</span></a>                      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('execute')" href="../../_functions/execute.html" onMouseOver="funcPopup(event,'execute')">execute</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, (array)<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>);
<a name="l1591"><span class="linenum">1591</span></a>                  } else {
<a name="l1592"><span class="linenum">1592</span></a>  <span class="comment">                    // Item is tagged only with duplicate tag but not the main tag.</span>
<a name="l1593"><span class="linenum">1593</span></a>  <span class="comment">                    // Replace tagid in the instance pointing to the duplicate tag with this tag.</span>
<a name="l1594"><span class="linenum">1594</span></a>                      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('tag_instance', array('id' =&gt; <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'tagid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l1595"><span class="linenum">1595</span></a>                      \core\event\<a class="class" onClick="logClass('tag_removed')" href="../../_classes/tag_removed.html" onMouseOver="classPopup(event,'tag_removed')">tag_removed</a>::<a class="function" onClick="logFunction('create_from_tag_instance')" href="../../_functions/create_from_tag_instance.html" onMouseOver="funcPopup(event,'create_from_tag_instance')">create_from_tag_instance</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>, <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('name')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>, <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('rawname')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/rawname.html">rawname</a>)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l1596"><span class="linenum">1596</span></a>                      <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('tagid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/tagid.html">tagid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1597"><span class="linenum">1597</span></a>                      \core\event\<a class="class" onClick="logClass('tag_added')" href="../../_classes/tag_added.html" onMouseOver="classPopup(event,'tag_added')">tag_added</a>::<a class="function" onClick="logFunction('create_from_tag_instance')" href="../../_functions/create_from_tag_instance.html" onMouseOver="funcPopup(event,'create_from_tag_instance')">create_from_tag_instance</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('name')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rawname')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/rawname.html">rawname</a>)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l1598"><span class="linenum">1598</span></a>                  }
<a name="l1599"><span class="linenum">1599</span></a>              }
<a name="l1600"><span class="linenum">1600</span></a>          }
<a name="l1601"><span class="linenum">1601</span></a>  
<a name="l1602"><span class="linenum">1602</span></a>  <span class="comment">        // Finally delete all tags that we combined into the current one.</span>
<a name="l1603"><span class="linenum">1603</span></a>          self::<a class="function" onClick="logFunction('delete_tags')" href="../../_functions/delete_tags.html" onMouseOver="funcPopup(event,'delete_tags')">delete_tags</a>(<a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../../_variables/ids.html">$ids</a>);
<a name="l1604"><span class="linenum">1604</span></a>      }
<a name="l1605"><span class="linenum">1605</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'strtotitle': ['strtotitle', 'Convert a UTF-8 encoded string to title/proper case (uppercase every first character in each word, lower case all other characters) ', [['lib/phpexcel/PHPExcel/Shared','String.php',620],['lib/classes','text.php',699]], 5],
'close': ['close', 'Close archive, write changes to disk. ', [['lib/filestorage','zip_archive.php',183],['lib/dml','mssql_native_moodle_recordset.php',87],['auth/fc','fcFPP.php',78],['lib/dml','mysqli_native_moodle_recordset.php',86],['lib/spout/src/Spout/Reader','ReaderInterface.php',30],['lib/spout/src/Spout/Writer/ODS/Internal','Workbook.php',81],['lib/dml','pdo_moodle_recordset.php',79],['lib','csvlib.class.php',256],['lib/horde/framework/Horde/Socket','Client.php',135],['backup/util/helper','backup_null_iterator.class.php',53],['admin/tool/uploaduser','locallib.php',149],['lib/tcpdf','tcpdf.php',2943],['lib/phpunit/classes','phpmailer_sink.php',41],['lib/phpmailer','class.smtp.php',582],['lib/dml','sqlsrv_native_moodle_recordset.php',133],['lib/classes/dml','recordset_walk.php',153],['lib/spout/src/Spout/Writer/XLSX/Helper','SharedStringsHelper.php',84],['grade/export','lib.php',689],['lib','excellib.class.php',93],['backup/util/loggers','file_logger.class.php',69],['grade','lib.php',324],['backup/util/helper','backup_array_iterator.class.php',63],['lib/horde/framework/Horde/Imap/Client','Base.php',1846],['mod/assign/feedback/offline','importgradeslib.php',204],['lib/dml','oci_native_moodle_recordset.php',80],['lib/adodb','adodb.inc.php',2361],['lib/adodb','adodb.inc.php',3090],['lib/adodb','adodb.inc.php',3870],['lib/google/src/Google/Logger','File.php',132],['lib/phpunit/classes','event_sink.php',39],['lib/horde/framework/Horde','Stream.php',585],['backup/util/loggers','base_logger.class.php',89],['lib/phpexcel/PHPExcel/Shared','ZipArchive.php',71],['question/engine/tests','helpers.php',1241],['lib/spout/src/Spout/Writer','AbstractWriter.php',312],['lib','odslib.class.php',71],['lib/spout/src/Spout/Writer/Common/Internal','WorksheetInterface.php',34],['lib/spout/src/Spout/Writer/ODS/Internal','Worksheet.php',214],['lib/spout/src/Spout/Writer','WriterInterface.php',84],['lib/spout/src/Spout/Writer/XLSX/Internal','Worksheet.php',174],['lib/spout/src/Spout/Reader','AbstractReader.php',183],['lib/phpunit/classes','message_sink.php',39],['lib/spout/src/Spout/Writer/Common/Internal','WorkbookInterface.php',65],['lib/spout/src/Spout/Writer/XLSX/Internal','Workbook.php',95],['lib/pear/Net','GeoIP.php',556],['lib/tests','completionlib_test.php',907],['lib/pear/Auth','RADIUS.php',550],['lib/pear/Auth','RADIUS.php',710],['lib/pear/Auth','RADIUS.php',829],['lib','webdavlib.php',176],['lib/dml','pgsql_native_moodle_recordset.php',107]], 1128],
'__get': ['__get', '', [['lib/horde/framework/Horde/Imap/Client','Url.php',196],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',84],['lib/minify/lib','JSMinPlus.php',1686],['lib/horde/framework/Horde/Imap/Client/Auth','DigestMD5.php',121],['user/classes/output/myprofile','category.php',185],['lib/adodb','adodb-active-record.inc.php',295],['lib/horde/framework/Horde/Mail/Rfc822','List.php',75],['admin/tool/monitor/classes','rule.php',166],['lib/horde/framework/Horde/Socket','Client.php',91],['lib/horde/framework/Horde/Mail/Rfc822','Group.php',85],['lib/horde/framework/Horde/Imap/Client/Interaction','Command.php',92],['lib/simplepie/library/SimplePie','IRI.php',168],['lib/horde/framework/Horde','Variables.php',150],['mod/lesson','locallib.php',2028],['lib','modinfolib.php',124],['lib','modinfolib.php',1138],['lib','modinfolib.php',2577],['lib','adminlib.php',1071],['lib/dml','database_column_info.php',87],['lib/classes/message/inbound','handler.php',79],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',72],['lib','navigationlib.php',5107],['lib/classes/plugininfo','block.php',44],['lib/classes/message','message.php',187],['lib/horde/framework/Horde/Crypt','Blowfish.php',86],['lib/horde/framework/Horde/Imap/Client','Ids.php',92],['lib/horde/framework/Horde/Support','Array.php',116],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',85],['admin/tool/monitor/classes','subscription.php',54],['lib','pagelib.php',761],['user/classes/output/myprofile','tree.php',144],['lib/horde/framework/Horde','Stream.php',74],['lib/adodb','adodb-active-recordx.inc.php',341],['lib','accesslib.php',5286],['lib/mustache/src/Mustache','HelperCollection.php',67],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',63],['lib/minify/lib/MrClay/Cli','Arg.php',170],['tag/classes/output','tagindex.php',123],['calendar/tests','rrule_manager_tests.php',523],['lib/horde/framework/Horde/Imap/Client/Data','Namespace.php',67],['lib/horde/framework/Horde/Support','ObjectStub.php',41],['lib/classes/plugininfo','mod.php',43],['course','lib.php',3089],['lib/classes/plugininfo','base.php',177],['lib/classes/event','base.php',909],['lib/horde/framework/Horde/Imap/Client/Exception','ServerResponse.php',69],['lib','coursecatlib.php',131],['lib','coursecatlib.php',2943],['tag/classes','tag.php',89],['lib/google/src/Google','Model.php',49],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',70],['calendar','lib.php',2077],['lib/horde/framework/Horde/Mail/Rfc822','Address.php',108],['lib/htmlpurifier/HTMLPurifier','Token.php',48],['mod/quiz','renderer.php',1349],['lib/horde/framework/Horde/Imap/Client/Data','Sync.php',255],['user/classes/output/myprofile','node.php',106],['lib/horde/framework/Horde/Stream','TempString.php',65],['lib/horde/framework/Horde/Support','Stub.php',41],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',56],['lib/pear/Net/GeoIP','Location.php',158]], 20],
'instance': ['instance', 'Returns an instance of the cache_factor method. ', [['cache','disabledlib.php',171],['cache','disabledlib.php',296],['lib/classes','useragent.php',101],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['search/classes','manager.php',109],['cache','locallib.php',52],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['lib/classes','plugin_manager.php',103],['lib/htmlpurifier','HTMLPurifier.php',251],['course/format','lib.php',156],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['admin/tool/installaddon/classes','installer.php',40],['lib','modinfolib.php',373],['cache/classes','helper.php',76],['lib/tests','string_manager_standard_test.php',124],['lib/portfolio','exporter.php',251],['lib/classes/update','validator.php',88],['search/classes','document_factory.php',49],['lib','accesslib.php',6235],['lib','accesslib.php',6487],['lib','accesslib.php',6665],['lib','accesslib.php',6919],['lib','accesslib.php',7180],['lib','accesslib.php',7392],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443],['lib','filterlib.php',80],['search/tests/fixtures','testable_core_search.php',43],['lib/tests/fixtures','testable_update_checker.php',45],['backup/cc','validator.php',35],['cache/classes','config.php',87],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29]], 4647],
'create': ['create', 'Auto-scan an incoming line to determine the response type. ', [['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',65],['lib/google/src/Google/Service','Partners.php',492],['lib/simplepie/library/SimplePie','Cache.php',95],['lib/google/src/Google/Service','YouTubeReporting.php',237],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',81],['lib/google/src/Google/Service','MapsEngine.php',1677],['lib/google/src/Google/Service','MapsEngine.php',1977],['lib/google/src/Google/Service','MapsEngine.php',2253],['lib/google/src/Google/Service','MapsEngine.php',2330],['lib/google/src/Google/Service','MapsEngine.php',2898],['lib/spout/src/Spout/Writer','WriterFactory.php',18],['lib/google/src/Google/Service','Dns.php',290],['lib/google/src/Google/Service','Dns.php',363],['lib/google/src/Google/Service','Appengine.php',438],['tag/classes','collection.php',188],['lib/adodb','adodb-xmlschema.inc.php',152],['lib/adodb','adodb-xmlschema.inc.php',473],['lib/adodb','adodb-xmlschema.inc.php',738],['lib/adodb','adodb-xmlschema.inc.php',884],['lib/adodb','adodb-xmlschema.inc.php',1129],['mod/quiz','attemptlib.php',100],['mod/quiz','attemptlib.php',596],['lib','weblib.php',3206],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',58],['lib/google/src/Google/Service','Dataflow.php',273],['lib/simplepie/library/SimplePie','Registry.php',153],['competency/classes','persistent.php',387],['lib/google/src/Google/Service','Cloudresourcemanager.php',373],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',270],['lib/google/src/Google/Service','TagManager.php',1007],['lib/google/src/Google/Service','TagManager.php',1097],['lib/google/src/Google/Service','TagManager.php',1249],['lib/google/src/Google/Service','TagManager.php',1342],['lib/google/src/Google/Service','TagManager.php',1436],['lib/google/src/Google/Service','TagManager.php',1530],['lib/google/src/Google/Service','TagManager.php',1681],['mod/lesson','locallib.php',1011],['mod/lesson','locallib.php',2163],['mod/lesson','locallib.php',3212],['lib','modinfolib.php',1732],['repository','lib.php',206],['repository','lib.php',1910],['lib','navigationlib.php',268],['lib/htmlpurifier/HTMLPurifier','Config.php',114],['lib/google/src/Google/Service','Container.php',284],['lib/google/src/Google/Service','Genomics.php',632],['lib/google/src/Google/Service','Genomics.php',721],['lib/google/src/Google/Service','Genomics.php',1312],['lib/google/src/Google/Service','Genomics.php',1427],['lib/google/src/Google/Service','Games.php',1649],['lib/google/src/Google/Service','Games.php',2013],['lib/google/src/Google/Service','Fitness.php',377],['lib/google/src/Google/Service','Gmail.php',747],['lib/google/src/Google/Service','Gmail.php',905],['mod/quiz/classes','structure.php',65],['lib/htmlpurifier/HTMLPurifier','ElementDef.php',135],['lib/adodb','adodb-xmlschema03.inc.php',170],['lib/adodb','adodb-xmlschema03.inc.php',514],['lib/adodb','adodb-xmlschema03.inc.php',779],['lib/adodb','adodb-xmlschema03.inc.php',930],['lib/adodb','adodb-xmlschema03.inc.php',1228],['lib/google/src/Google/Service','Proximitybeacon.php',500],['tag/classes','area.php',205],['course','lib.php',3003],['question/type/ddmarker','shapes.php',170],['lib/classes/event','base.php',149],['lib','coursecatlib.php',325],['repository/filesystem','lib.php',498],['lib/google/src/Google/Service','Storagetransfer.php',281],['calendar','lib.php',2686],['lib/htmlpurifier/HTMLPurifier','Lexer.php',53],['lib/google/src/Google/Service','Classroom.php',445],['lib/google/src/Google/Service','Classroom.php',596],['lib/google/src/Google/Service','Classroom.php',673],['lib/google/src/Google/Service','Classroom.php',783],['lib/google/src/Google/Service','Classroom.php',912],['lib/spout/src/Spout/Reader','ReaderFactory.php',18],['lib/google/src/Google/Service','Pubsub.php',220],['lib/google/src/Google/Service','Pubsub.php',365],['lib/google/src/Google/Service','CloudMonitoring.php',258]], 3276],
'create_from_tag_instance': ['create_from_tag_instance', 'Creates an event from taginstance object ', [['lib/classes/event','tag_added.php',77],['lib/classes/event','tag_removed.php',77]], 7],
'normalize': ['normalize', 'Given a relative module name, like ./something, normalize it to a real name that can be mapped to a path. ', [['lib/requirejs','require.js',259],['lib/google/src/Google','Utils.php',103],['tag/classes','tag.php',328],['lib/htmlpurifier/HTMLPurifier','Lexer.php',285],['lib/htmlpurifier/HTMLPurifier','PercentEncoder.php',72]], 43],
'add_instance': ['add_instance', 'Add new instance of enrol plugin. ', [['enrol/manual','lib.php',147],['lib','enrollib.php',1745],['enrol/self','lib.php',958],['enrol/cohort','lib.php',99],['mod/assign','locallib.php',600],['tag/classes','tag.php',543],['enrol/lti','lib.php',88],['enrol/paypal','lib.php',124],['enrol/guest','lib.php',247],['enrol/meta','lib.php',131]], 91],
'get_by_name': ['get_by_name', 'Simple function to just return a single tag object by tagcollid and name ', [['tag/classes','tag.php',234]], 46],
'get_area_files': ['get_area_files', 'Returns all area files (optionally limited by itemid) ', [['lib/filestorage','file_storage.php',782],['lib','externallib.php',1134]], 216],
'combine_correlated_tags': ['combine_correlated_tags', 'Combine together correlated tags of several tags ', [['tag/classes','tag.php',1453]], 1],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'get_tagged_items': ['get_tagged_items', 'Find all items tagged with a tag of a given type (\'post\', \'user\', etc.) ', [['tag/classes','tag.php',1170]], 4],
'get_records_sql': ['get_records_sql', 'Get a number of records as an array of objects. ', [['lib/dml','pdo_moodle_database.php',309],['lib/dml','oci_native_moodle_database.php',1145],['lib/dml','pgsql_native_moodle_database.php',732],['lib/dml','mssql_native_moodle_database.php',805],['lib/dml','mysqli_native_moodle_database.php',1057],['lib/dml','sqlsrv_native_moodle_database.php',890],['lib/dml/tests','dml_test.php',5545]], 700],
'set_field_select': ['set_field_select', 'Set a single field in every table row where the select statement evaluates to true. ', [['lib/dml','pdo_moodle_database.php',492],['lib/dml','oci_native_moodle_database.php',1436],['lib/dml','pgsql_native_moodle_database.php',1121],['lib/dml','mssql_native_moodle_database.php',1097],['lib/dml','mysqli_native_moodle_database.php',1435],['lib/dml','sqlsrv_native_moodle_database.php',1178],['lib/dml/tests','dml_test.php',5552]], 67],
'ensure_fields_exist': ['ensure_fields_exist', 'Validates that the required fields were retrieved and retrieves them if missing ', [['tag/classes','tag.php',423]], 7],
'get_collection': ['get_collection', 'Returns the id of the tag collection that should be used for storing tags of this itemtype ', [['tag/classes','area.php',125]], 11],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'format_text': ['format_text', 'Formats a text string coming from the search engine. ', [['search/classes','document.php',606],['lib/classes','grading_external.php',182],['search/engine/solr/classes','document.php',129],['lib','weblib.php',1158],['lib','tablelib.php',860],['lib','tablelib.php',1667],['question/type','questionbase.php',345]], 322],
'add_record_snapshot': ['add_record_snapshot', 'Add cached data that will be most probably used in event observers. ', [['lib/classes/event','base.php',840]], 332],
'debugging': ['debugging', 'Standard Debugging Function ', [['lib','weblib.php',3012]], 1007],
'get_record_sql': ['get_record_sql', 'Get a single database record as an object using a SQL statement. ', [['lib/dml','oci_native_moodle_database.php',1076],['lib/dml','moodle_database.php',1506]], 157],
'__isset': ['__isset', 'Overload __isset() to provide access via properties ', [['lib/simplepie/library/SimplePie','IRI.php',221],['lib/horde/framework/Horde','Variables.php',111],['mod/lesson','locallib.php',2044],['lib','modinfolib.php',140],['lib','modinfolib.php',1178],['lib','modinfolib.php',2545],['lib','adminlib.php',1101],['lib/dml','database_column_info.php',102],['lib/classes/message','message.php',218],['lib/horde/framework/Horde/Support','Array.php',128],['admin/tool/monitor/classes','subscription.php',68],['lib','accesslib.php',5305],['lib/mustache/src/Mustache','HelperCollection.php',99],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',170],['tag/classes/output','tagindex.php',133],['lib/horde/framework/Horde/Imap/Client/Data','Namespace.php',115],['lib/horde/framework/Horde/Support','ObjectStub.php',57],['course','lib.php',3099],['lib/classes/event','base.php',942],['lib','coursecatlib.php',155],['lib','coursecatlib.php',2933],['tag/classes','tag.php',99],['lib/google/src/Google','Model.php',286],['calendar','lib.php',2096],['lib/horde/framework/Horde/Support','Stub.php',53],['lib/pear/Net/GeoIP','Location.php',187]], 2],
'get_bulk': ['get_bulk', 'Simple function to just return a single tag object by its id ', [['tag/classes','tag.php',211]], 1],
'to_object': ['to_object', 'Converts to object ', [['tag/classes','tag.php',109]], 9],
'make_url': ['make_url', 'Build a request URL. ', [['lib','boxlib.php',128],['tag/classes','tag.php',375]], 17],
'create_if_missing': ['create_if_missing', 'Retrieves tags and/or creates them if do not exist yet ', [['tag/classes','tag.php',352]], 10],
'table_exists': ['table_exists', 'Given one xmldb_table, checks if it exists in DB (true/false). ', [['lib/ddl','sql_generator.php',215],['lib/ddl','database_manager.php',90]], 131],
'create_from_tag': ['create_from_tag', 'Creates an event from tag object ', [['lib/classes/event','tag_created.php',55]], 3],
'set_legacy_logdata': ['set_legacy_logdata', 'Return the legacy event log data. ', [['lib/classes/event','webservice_function_called.php',87],['mod/workshop/classes/event','assessable_uploaded.php',122],['lib/classes/event','role_capabilities_updated.php',83],['mod/assign/classes/event','base.php',99],['lib/classes/event','course_resources_list_viewed.php',78],['lib/classes/event','tag_updated.php',76],['lib/classes/event','course_updated.php',103],['lib/classes/event','course_category_updated.php',78],['lib/classes/event','webservice_login_failed.php',91],['lib/classes/event','content_viewed.php',98]], 55],
'make_display_name': ['make_display_name', 'Prepares tag name ready to be displayed ', [['tag/classes','tag.php',128]], 11],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'set_item_tags': ['set_item_tags', 'Sets the list of tag instances for one item (table record). ', [['tag/classes','tag.php',666]], 57],
'get_in_or_equal': ['get_in_or_equal', 'Constructs \'IN()\' or \'=\' sql fragment ', [['lib/dml','oci_native_moodle_database.php',1635],['lib/dml','moodle_database.php',711]], 438],
'delete': ['delete', 'Deletes an item from the cache store. ', [['cache/stores/static','lib.php',374],['cache','disabledlib.php',102],['lib/google/src/Google/Service','AdSense.php',1258],['lib/google/src/Google/Service','AdSense.php',1730],['lib/grade','grade_item.php',396],['lib/google/src/Google/Service','Replicapool.php',378],['lib/google/src/Google/Service','Tasks.php',310],['lib/google/src/Google/Service','Tasks.php',428],['lib/google/src/Google/Service','AndroidPublisher.php',1230],['lib/google/src/Google/Service','AndroidPublisher.php',1310],['lib/google/src/Google/Service','AndroidPublisher.php',1668],['lib/google/src/Google/Service','AndroidPublisher.php',1763],['lib/google/src/Google/Service','AndroidPublisher.php',2083],['lib/google/src/Google/Service','YouTubeReporting.php',255],['lib/google/src/Google/Service','Reseller.php',441],['lib/google/src/Google/Cache','Memcache.php',144],['lib','filelib.php',3481],['lib/google/src/Google/Service','Computeaccounts.php',418],['lib/google/src/Google/Service','Computeaccounts.php',497],['lib/google/src/Google/Service','Computeaccounts.php',668],['lib/grade','grade_category.php',281],['lib/grade','grade_scale.php',136],['lib/adodb','adodb-active-record.inc.php',901],['lib/grade','grade_object.php',270],['lib/google/src/Google/Service','YouTubeAnalytics.php',352],['lib/google/src/Google/Service','YouTubeAnalytics.php',447],['lib/google/src/Google/Service','MapsEngine.php',1693],['lib/google/src/Google/Service','MapsEngine.php',1991],['lib/google/src/Google/Service','MapsEngine.php',2344],['lib/google/src/Google/Service','MapsEngine.php',2651],['lib/google/src/Google/Service','MapsEngine.php',2912],['completion','data_object.php',273],['lib/google/src/Google/Cache','File.php',115],['cache/classes','dummystore.php',198],['lib/google/src/Google/Service','Dns.php',378],['cache/classes','loaders.php',792],['cache/classes','loaders.php',1471],['cache/classes','loaders.php',1841],['lib/google/src/Google/Service','Appengine.php',352],['lib/google/src/Google/Service','Appengine.php',455],['tag/classes','collection.php',260],['lib/filebrowser','file_info.php',418],['lib/google/src/Google/Service','AdExchangeBuyer.php',938],['lib/google/src/Google/Service','AdExchangeBuyer.php',1137],['lib/google/src/Google/Service','AdExchangeBuyer.php',1561],['lib/filebrowser','virtual_root_file.php',69],['lib/google/src/Google/Service','Books.php',1946],['lib/grade','grade_grade.php',1024],['lib/grade','grade_outcome.php',97],['lib/google/src/Google/Service','Analytics.php',2165],['lib/google/src/Google/Service','Analytics.php',2534],['lib/google/src/Google/Service','Analytics.php',2655],['lib/google/src/Google/Service','Analytics.php',2872],['lib/google/src/Google/Service','Analytics.php',3001],['lib/google/src/Google/Service','Analytics.php',3092],['lib/google/src/Google/Service','Analytics.php',3406],['lib/google/src/Google/Service','Analytics.php',3631],['lib/google/src/Google/Service','DeploymentManager.php',452],['lib/google/src/Google/Service','Blogger.php',1065],['lib/google/src/Google/Service','Blogger.php',1227],['lib/google/src/Google/Service','Blogger.php',1451],['lib/filebrowser','file_info_stored.php',631],['competency/classes','persistent.php',510],['lib/google/src/Google/Service','CloudUserAccounts.php',528],['lib/google/src/Google/Service','CloudUserAccounts.php',628],['lib/google/src/Google/Service','CloudUserAccounts.php',893],['lib/google/src/Google/Service','Cloudresourcemanager.php',390],['lib/htmlpurifier/HTMLPurifier','Zipper.php',89],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',960],['lib/google/src/Google/Service','TagManager.php',1022],['lib/google/src/Google/Service','TagManager.php',1113],['lib/google/src/Google/Service','TagManager.php',1265],['lib/google/src/Google/Service','TagManager.php',1358],['lib/google/src/Google/Service','TagManager.php',1452],['lib/google/src/Google/Service','TagManager.php',1546],['lib/google/src/Google/Service','TagManager.php',1696],['mod/lesson','locallib.php',1037],['mod/lesson','locallib.php',2271],['repository','lib.php',427],['repository','lib.php',1962],['admin/tool/uploadcourse/classes','course.php',226],['lib','badgeslib.php',640],['lib/google/src/Google/Service','Bigquery.php',531],['lib/google/src/Google/Service','Bigquery.php',863],['lib/google/src/Google/Service','ShoppingContent.php',1050],['lib/google/src/Google/Service','ShoppingContent.php',1448],['lib/google/src/Google/Service','ShoppingContent.php',1970],['lib/google/src/Google/Service','Webmasters.php',355],['lib/google/src/Google/Service','Webmasters.php',449],['lib/google/src/Google/Service','Clouddebugger.php',384],['lib/filestorage','stored_file.php',323],['lib/google/src/Google/Service','Container.php',309],['lib/google/src/Google/Service','Storage.php',1042],['lib/google/src/Google/Service','Storage.php',1157],['lib/google/src/Google/Service','Storage.php',1332],['lib/google/src/Google/Service','Storage.php',1454],['lib/google/src/Google/Service','Storage.php',1681],['cache/stores/memcache','lib.php',401],['lib/google/src/Google/Service','Genomics.php',646],['lib/google/src/Google/Service','Genomics.php',735],['lib/google/src/Google/Service','Genomics.php',903],['lib/google/src/Google/Service','Genomics.php',971],['lib/google/src/Google/Service','Genomics.php',1326],['lib/google/src/Google/Service','Genomics.php',1443],['lib/google/src/Google/Service','Licensing.php',224],['lib/google/src/Google/Service','Fitness.php',400],['lib/google/src/Google/Service','Fitness.php',512],['lib/google/src/Google/Service','Fitness.php',647],['comment','lib.php',790],['lib/google/src/Google/Service','Gmail.php',763],['lib/google/src/Google/Service','Gmail.php',921],['lib/google/src/Google/Service','Gmail.php',1014],['lib/google/src/Google/Service','Gmail.php',1234],['lib/google/src/Google/Service','Taskqueue.php',293],['lib/adodb','adodb-active-recordx.inc.php',1016],['lib','accesslib.php',5580],['cache/classes','interfaces.php',161],['lib/google/src/Google/Service','Autoscaler.php',315],['lib/google/src/Google/Service','Autoscaler.php',429],['lib/google/src/Google/Service','Prediction.php',262],['lib/google/src/Google/Service','SiteVerification.php',139],['lib/google/src/Google/Service','Drive.php',1522],['lib/google/src/Google/Service','Drive.php',1603],['lib/google/src/Google/Service','Drive.php',1748],['lib/google/src/Google/Service','Drive.php',2040],['lib/google/src/Google/Service','Drive.php',2110],['lib/google/src/Google/Service','Drive.php',2240],['lib/google/src/Google/Service','Drive.php',2403],['lib/google/src/Google/Service','Drive.php',2523],['lib/google/src/Google/Service','Proximitybeacon.php',522],['lib/google/src/Google/Service','Directory.php',1683],['lib/google/src/Google/Service','Directory.php',1916],['lib/google/src/Google/Service','Directory.php',1989],['lib/google/src/Google/Service','Directory.php',2059],['lib/google/src/Google/Service','Directory.php',2169],['lib/google/src/Google/Service','Directory.php',2224],['lib/google/src/Google/Service','Directory.php',2351],['lib/google/src/Google/Service','Directory.php',2420],['lib/google/src/Google/Service','Directory.php',2517],['lib/google/src/Google/Service','Directory.php',2652],['lib/google/src/Google/Service','Directory.php',2731],['lib/google/src/Google/Service','Directory.php',2836],['lib/google/src/Google/Service','Directory.php',2938],['lib/google/src/Google/Service','Directory.php',2999],['lib/google/src/Google/Service','Directory.php',3199],['lib/google/src/Google/Service','Directory.php',3274],['lib/google/src/Google/Service','Fusiontables.php',645],['lib/google/src/Google/Service','Fusiontables.php',812],['lib/google/src/Google/Service','Fusiontables.php',937],['lib/google/src/Google/Service','Fusiontables.php',1126],['lib/google/src/Google/Service','Fusiontables.php',1188],['lib/google/src/Google/Service','AdSenseHost.php',734],['lib/google/src/Google/Service','AdSenseHost.php',1010],['lib/google/src/Google/Service','AdSenseHost.php',1168],['lib/google/src/Google/Service','Mirror.php',425],['lib/google/src/Google/Service','Mirror.php',593],['lib/google/src/Google/Service','Mirror.php',661],['lib/google/src/Google/Service','Mirror.php',772],['tag/classes','area.php',187],['lib/google/src/Google/Service','AndroidEnterprise.php',988],['lib/google/src/Google/Service','AndroidEnterprise.php',1092],['lib/google/src/Google/Service','AndroidEnterprise.php',1280],['lib/google/src/Google/Service','AndroidEnterprise.php',1415],['lib/google/src/Google/Service','AndroidEnterprise.php',1597],['course','lib.php',3263],['mnet','peer.php',118],['search/tests/fixtures','mock_search_engine.php',48],['lib/google/src/Google/Service','Calendar.php',903],['lib/google/src/Google/Service','Calendar.php',1071],['lib/google/src/Google/Service','Calendar.php',1269],['lib/google/src/Google/Service','Calendar.php',1412],['cache/stores/session','lib.php',417],['blog','locallib.php',322],['lib/google/src/Google/Service','Storagetransfer.php',381],['cache/stores/mongodb','lib.php',361],['lib/google/src/Google/Cache','Null.php',53],['lib/google/src/Google/Service','GamesConfiguration.php',251],['lib/google/src/Google/Service','GamesConfiguration.php',390],['cache/stores/file','lib.php',393],['badges/criteria','award_criteria.php',330],['cache/stores/memcached','lib.php',402],['lib/google/src/Google/Service','AppState.php',154],['lib/google/src/Google/Service','Resourceviews.php',423],['lib/portfolio','plugin.php',692],['calendar','lib.php',2423],['lib/google/src/Google/Service','Classroom.php',466],['lib/google/src/Google/Service','Classroom.php',615],['lib/google/src/Google/Service','Classroom.php',701],['lib/google/src/Google/Service','Classroom.php',806],['lib/google/src/Google/Service','Classroom.php',934],['lib/google/src/Google/Service','SQLAdmin.php',786],['lib/google/src/Google/Service','SQLAdmin.php',856],['lib/google/src/Google/Service','SQLAdmin.php',1023],['lib/google/src/Google/Service','SQLAdmin.php',1368],['lib/google/src/Google/Service','SQLAdmin.php',1483],['badges/criteria','award_criteria_manual.php',220],['search/engine/solr/classes','engine.php',1045],['lib/google/src/Google/Service','Compute.php',4021],['lib/google/src/Google/Service','Compute.php',4149],['lib/google/src/Google/Service','Compute.php',4284],['lib/google/src/Google/Service','Compute.php',4571],['lib/google/src/Google/Service','Compute.php',4671],['lib/google/src/Google/Service','Compute.php',4829],['lib/google/src/Google/Service','Compute.php',4942],['lib/google/src/Google/Service','Compute.php',5033],['lib/google/src/Google/Service','Compute.php',5174],['lib/google/src/Google/Service','Compute.php',5248],['lib/google/src/Google/Service','Compute.php',5378],['lib/google/src/Google/Service','Compute.php',5508],['lib/google/src/Google/Service','Compute.php',5683],['lib/google/src/Google/Service','Compute.php',5984],['lib/google/src/Google/Service','Compute.php',6156],['lib/google/src/Google/Service','Compute.php',6316],['lib/google/src/Google/Service','Compute.php',6717],['lib/google/src/Google/Service','Compute.php',6898],['lib/google/src/Google/Service','Compute.php',7037],['lib/google/src/Google/Service','Compute.php',7128],['lib/google/src/Google/Service','Compute.php',7208],['lib/google/src/Google/Service','Compute.php',7299],['lib/google/src/Google/Service','Compute.php',7409],['lib/google/src/Google/Service','Compute.php',7570],['lib/google/src/Google/Service','Compute.php',7734],['lib/google/src/Google/Service','Compute.php',7938],['lib/google/src/Google/Service','Compute.php',8035],['lib/google/src/Google/Service','Compute.php',8210],['lib/google/src/Google/Service','Compute.php',8305],['lib/google/src/Google/Service','Pubsub.php',240],['lib/google/src/Google/Service','Pubsub.php',379],['lib/google/src/Google/Service','YouTube.php',1810],['lib/google/src/Google/Service','YouTube.php',2061],['lib/google/src/Google/Service','YouTube.php',2459],['lib/google/src/Google/Service','YouTube.php',2889],['lib/google/src/Google/Service','YouTube.php',3187],['lib/google/src/Google/Service','YouTube.php',3419],['lib/google/src/Google/Service','YouTube.php',3559],['lib/google/src/Google/Service','YouTube.php',3928],['lib/google/src/Google/Service','YouTube.php',4158],['lib/google/src/Google/Cache','Apc.php',105],['lib/google/src/Google/Service','Dfareporting.php',5000],['lib/google/src/Google/Service','Dfareporting.php',5566],['lib/google/src/Google/Service','Dfareporting.php',5753],['lib/google/src/Google/Service','Dfareporting.php',5877],['lib/google/src/Google/Service','Dfareporting.php',6397],['lib/google/src/Google/Service','Dfareporting.php',6578],['lib/google/src/Google/Service','Dfareporting.php',6731],['lib/google/src/Google/Service','Dfareporting.php',6996],['lib/google/src/Google/Service','Dfareporting.php',7503],['lib/google/src/Google/Service','Dfareporting.php',8102],['lib/google/src/Google/Service','Dfareporting.php',8768],['lib/google/src/Google/Service','Manager.php',244],['lib/google/src/Google/Service','Manager.php',324],['lib/google/src/Google/Service','CloudMonitoring.php',274],['lib','webdavlib.php',691]], 317],
'__construct': ['__construct', '', [['lib/adodb/drivers','adodb-odbc_mssql.inc.php',50],['lib/adodb/drivers','adodb-odbc_mssql.inc.php',359],['question/classes/statistics/responses','analyser.php',69],['auth/radius','auth.php',38],['lib/xmldb','xmldb_file.php',43],['lib/lessphp/Tree/Mixin','Definition.php',18],['cache/stores/static','lib.php',127],['lib/classes/session','file.php',40],['lib/htmlpurifier/HTMLPurifier/Lexer','DOMLex.php',35],['backup/util/ui','base_moodleform.class.php',68],['lib/simplepie/library/SimplePie','Author.php',81],['lib/filestorage','zip_archive.php',66],['backup/util/structure','restore_path_element.class.php',47],['backup/util/structure','restore_path_element.class.php',128],['lib/htmlpurifier/HTMLPurifier/ChildDef','Chameleon.php',36],['lib/phpexcel/PHPExcel','HashTable.php',44],['mod/quiz/tests','repaginate_test.php',39],['lib/form','modvisible.php',43],['lib/phpexcel/PHPExcel/Worksheet','Row.php',44],['cache','disabledlib.php',44],['lib/phpexcel/PHPExcel/Worksheet','Dimension.php',58],['lib/mustache/src/Mustache/Cache','FilesystemCache.php',27],['question/type/ddwtos','question.php',61],['mnet/xmlrpc','client.php',25],['lib/horde/framework/Horde/Imap/Client','Url.php',112],['lib/classes','useragent.php',115],['lib/pear/HTML/QuickForm','advcheckbox.php',66],['lib/classes/update','checker_exception.php',37],['lib/phpexcel/PHPExcel/Reader','Excel2007.php',53],['lib/jabber/XMPP','XMPP.php',101],['lib/form','radio.php',44],['lib/spout/src/Spout/Reader/XLSX/Helper','StyleHelper.php',45],['auth/cas/CAS/CAS/ProxiedService/Http','Abstract.php',58],['lib/phpexcel/PHPExcel/Style','Border.php',67],['lib/htmlpurifier/HTMLPurifier','HTMLDefinition.php',182],['lib/adodb/drivers','adodb-oci8quercus.inc.php',31],['lib/adodb/drivers','adodb-oci8quercus.inc.php',45],['lib/spout/src/Spout/Reader/XLSX','SheetIterator.php',29],['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',91],['lib/phpexcel/PHPExcel','DocumentProperties.php',123],['lib/typo3','class.t3lib_cs.php',509],['mod/workshop/allocation/scheduled','lib.php',48],['lib/adodb/drivers','adodb-netezza.inc.php',53],['lib/adodb/drivers','adodb-netezza.inc.php',144],['mod/feedback/classes','complete_form.php',58],['search/classes','document.php',188],['webservice/rest','locallib.php',40],['lib/dml','mssql_native_moodle_recordset.php',34],['mod/assign/feedback/editpdf/fpdi','fpdi_pdf_parser.php',57],['lib/htmlpurifier/HTMLPurifier','TokenFactory.php',43],['backup/moodle2','backup_block_task.class.php',43],['lib/lessphp/Tree','Negative.php',14],['lib/minify/lib/Minify/Cache','APC.php',19],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',54],['lib/pear/HTML/QuickForm','header.php',33],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','InMemoryStrategy.php',26],['lib/phpexcel/PHPExcel/Worksheet','RowCellIterator.php',51],['lib/simplepie/library/SimplePie/XML/Declaration','Parser.php',110],['lib/phpexcel/PHPExcel/Worksheet','ColumnIterator.php',60],['lib/spout/src/Spout/Reader/ODS','Sheet.php',33],['question/type/calculated/tests','helper.php',205],['lib/adodb/drivers','adodb-odbtp.inc.php',38],['lib/adodb/drivers','adodb-odbtp.inc.php',673],['lib/adodb/drivers','adodb-odbtp.inc.php',796],['lib/adodb/drivers','adodb-odbtp.inc.php',806],['lib/adodb/drivers','adodb-odbtp.inc.php',816],['lib/adodb/drivers','adodb-odbtp.inc.php',826],['lib/adodb/drivers','adodb-odbtp.inc.php',836],['enrol/lti/ims-blti','blti.php',28],['backup/cc','cc2moodle.php',105],['mod/chat','locallib.php',181],['mod/chat','locallib.php',229],['user/filters','simpleselect.php',45],['lib/phpexcel/PHPExcel/CachedObjectStorage','Memcache.php',244],['lib/dml','pdo_moodle_database.php',42],['lib/adodb/drivers','adodb-sqlite3.inc.php',36],['lib/adodb/drivers','adodb-sqlite3.inc.php',350],['lib/pear/HTML/QuickForm','static.php',44],['competency/classes/external','comment_area_exporter.php',48],['lib/lessphp/Tree','Selector.php',31],['auth/cas/CAS/CAS','TypeMismatchException.php',43],['auth/fc','fcFPP.php',33],['lib/xmldb','xmldb_key.php',43],['grade/grading/form/rubric','rubriceditor.php',56],['lib/google/src/Google/Service','Cloudlatencytest.php',40],['course','moodleform_mod.php',69],['auth/nntp','auth.php',35],['grade/report/grader','lib.php',111],['admin/tool/generator/classes','course_backend.php',116],['lib/minify/lib','FirePHP.php',189],['lib/adodb/drivers','adodb-sqlitepo.inc.php',38],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',67],['lib/phpexcel/PHPExcel/CachedObjectStorage','CacheBase.php',66],['lib/lessphp/Tree','Rule.php',24],['lib/behat/features/bootstrap','behat_init_context.php',45],['lib','dmllib.php',69],['lib','dmllib.php',84],['lib','dmllib.php',104],['lib','dmllib.php',129],['lib','dmllib.php',159],['lib','dmllib.php',187],['lib','dmllib.php',240],['lib','dmllib.php',270],['lib/google/src/Google/Service','DataTransfer.php',44],['lib/google/src/Google/Http','Batch.php',42],['backup/util/structure','base_processor.class.php',49],['admin/tool/lpmigrate/classes','framework_mapper.php',50],['lib/phpexcel/PHPExcel/Reader','OOCalc.php',46],['lib/lessphp/Tree','NameValue.php',22],['mod/quiz/classes','admin_review_setting.php',82],['lib/htmlpurifier/HTMLPurifier','Generator.php',67],['mod/quiz/report','attemptsreport_table.php',76],['blocks/lp/classes/output','summary.php',59],['lib/google/src/Google/IO','Stream.php',45],['lib/google/src/Google/Service','Freebase.php',38],['grade/tests','reportlib_test.php',36],['search/classes','manager.php',100],['question/behaviour/adaptive','behaviour.php',310],['admin/tool/lp/classes/form','framework_autocomplete.php',48],['lib/minify/lib','JSMinPlus.php',193],['lib/minify/lib','JSMinPlus.php',726],['lib/minify/lib','JSMinPlus.php',1638],['lib/minify/lib','JSMinPlus.php',1656],['lib/minify/lib','JSMinPlus.php',1748],['lib/simplepie/library/SimplePie','Copyright.php',73],['lib/phpexcel/PHPExcel/Style','Conditional.php',93],['lib/google/src/Google/Task','Runner.php',76],['backup/util/settings/root','root_backup_setting.class.php',34],['lib','componentlib.class.php',179],['lib','componentlib.class.php',610],['lib','componentlib.class.php',834],['lib/google/src/Google/Service','AdSense.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef','Clone.php',18],['lib/spout/src/Spout/Reader/CSV','Sheet.php',24],['lib/filebrowser','file_info_context_system.php',37],['lib/grade','grade_item.php',260],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nstring.php',27],['repository/boxnet','lib.php',56],['auth/email','auth.php',34],['mod/wiki/editors','wikifiletable.php',40],['lib/google/src/Google/Service','Replicapool.php',51],['lib/dtl','database_exporter.php',55],['lib/horde/framework/Horde/Imap/Client/Namespace','List.php',34],['lib/phpexcel/PHPExcel/Writer','CSV.php',79],['lib/google/src/Google/Service','Tasks.php',44],['lib/dml','mysqli_native_moodle_recordset.php',42],['lib/google/src/Google/Service','GamesManagement.php',50],['lib/minify/lib/Minify','Source.php',43],['lib/jabber/XMPP','Roster.php',48],['lib/lessphp/Tree','Element.php',19],['lib/classes','string_manager_install.php',43],['question/type','questiontypebase.php',55],['question/type','questiontypebase.php',1442],['lib/form','filemanager.php',54],['lib/form','filemanager.php',316],['lib/htmlpurifier/HTMLPurifier/ChildDef','Custom.php',36],['backup/util/ui','renderer.php',813],['lib/simplepie/library/SimplePie','Rating.php',73],['lib/phpexcel/PHPExcel/Cell','Hyperlink.php',44],['question/classes/statistics/questions','calculator.php',66],['backup/moodle2','backup_xml_transformer.class.php',50],['lib/google/src/Google/Service','Resource.php',62],['lib/form','autocomplete.php',56],['lib/phpexcel/PHPExcel/Worksheet','RowIterator.php',60],['mod/lesson/classes','file_info.php',45],['question/type/tests','question_first_matching_answer_grading_strategy_test.php',40],['lib/google/src/Google/Service','Partners.php',43],['cache','lib.php',66],['cache','lib.php',109],['cache','lib.php',138],['cache','lib.php',183],['grade/edit/tree','lib.php',57],['grade/edit/tree','lib.php',635],['grade/edit/tree','lib.php',668],['grade/edit/tree','lib.php',834],['lib/simplepie/library/SimplePie','Cache.php',69],['mod/wiki/diff','difflib.php',277],['mod/wiki/diff','difflib.php',381],['mod/wiki/diff','difflib.php',478],['lib/pear/HTML/QuickForm','select.php',58],['lib/classes/output','mustache_javascript_helper.php',40],['lib/phpexcel/PHPExcel/Reader/Excel2007','Theme.php',68],['mod/data','export_form.php',16],['lib/pear/HTML/QuickForm','autocomplete.php',67],['question/type/shortanswer','question.php',44],['lib/google/src/Google/Service','AndroidPublisher.php',52],['lib/google/src/Google/Verifier','Pem.php',31],['lib/classes/antivirus','scanner.php',41],['lib/phpexcel/PHPExcel/Reader','Excel5.php',414],['lib/horde/framework/Horde/Imap/Client/Auth','DigestMD5.php',69],['lib/classes/output','mustache_filesystem_loader.php',39],['lib/classes/output','inplace_editable.php',107],['lib/adodb/drivers','adodb-informix.inc.php',37],['competency/classes','competency_rule.php',45],['lib/phpexcel/PHPExcel','RichText.php',37],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',59],['lib/pear/HTML/QuickForm','input.php',38],['repository/picasa','lib.php',41],['mod/feedback/classes','structure.php',48],['backup/util/plan','backup_structure_step.class.php',38],['question/classes/bank','random_question_loader.php',61],['mod/quiz/report/statistics/classes','calculated.php',43],['lib/horde/framework/Horde/Stream','String.php',27],['backup/util/helper','restore_decode_content.class.php',50],['backup/util/helper','restore_decode_content.class.php',125],['mod/workshop/backup/moodle1','lib.php',308],['lib/google/src/Google/Service','YouTubeReporting.php',47],['grade/export/txt','grade_export_txt.php',27],['lib/mustache/src/Mustache/Exception','SyntaxException.php',23],['lib/tcpdf','tcpdf_barcodes_2d.php',58],['mod/imscp','locallib.php',289],['lib/form','selectyesno.php',42],['lib/horde/framework/Horde/Mail/Transport','Smtphorde.php',62],['mod/lti/service/toolsettings/classes/local/service','toolsettings.php',41],['mod/lti/service/profile/classes/local/service','profile.php',41],['repository/flickr_public','lib.php',49],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','BackgroundPosition.php',57],['admin/tool/lp/classes/output','template_cohorts_table.php',53],['lib/simplepie/library','SimplePie.php',611],['lib/horde/framework/Horde/Imap/Client/Base','Debug.php',55],['lib/google/src/Google/Service','Reseller.php',44],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Border.php',18],['lib/testing/generator','component_generator_base.php',45],['lib/horde/framework/Horde/Translation/Handler','Gettext.php',34],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooter.php',175],['lib/classes','plugin_manager.php',91],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',28],['lib/horde/framework/Horde/Support','CombineStream.php',29],['lib/xmldb','xmldb_field.php',84],['lib/adodb/drivers','adodb-ibase.inc.php',59],['lib/adodb/drivers','adodb-ibase.inc.php',764],['lib/htmlpurifier/HTMLPurifier/AttrDef','URI.php',23],['admin/roles/classes','view_role_definition_table.php',28],['lib/google/src/Google/Cache','Memcache.php',44],['lib/pear/HTML/QuickForm','radio.php',48],['lib/filebrowser','file_info_context_coursecat.php',39],['lib/spout/src/Spout/Writer/ODS/Internal','Workbook.php',37],['mod/workshop/eval/best','lib.php',44],['lib/phpexcel/PHPExcel/Writer/PDF','DomPDF.php',38],['grade/report','lib.php',156],['lib','csslib.php',1501],['lib','csslib.php',1587],['lib','csslib.php',2068],['lib','csslib.php',2136],['lib','csslib.php',2242],['availability/classes','info_module.php',40],['mod/book','locallib.php',414],['question/engine','datalib.php',68],['question/engine','datalib.php',1331],['question/engine','datalib.php',1632],['question/engine','datalib.php',1740],['question/engine','datalib.php',1870],['question/engine','datalib.php',1941],['webservice','lib.php',745],['webservice','lib.php',841],['lib/adodb/drivers','adodb-informix72.inc.php',59],['lib/adodb/drivers','adodb-informix72.inc.php',399],['lib/adodb','adodb-pager.inc.php',60],['user/classes/output/myprofile','category.php',68],['lib/lessphp/Visitor','extendFinder.php',15],['backup/util/settings','base_setting.class.php',89],['backup/util/settings','base_setting.class.php',556],['lib','filelib.php',2720],['lib','filelib.php',3601],['lib/phpunit/classes','database_driver_testcase.php',55],['lib/phpexcel/PHPExcel/Shared/OLE/PPS','File.php',32],['report/competency/classes/output','report.php',56],['lib/google/src/Google/Service','Computeaccounts.php',49],['question/type','edit_question_form.php',96],['lib/filebrowser','file_info_context_user.php',39],['admin/tool/lp/classes/output','template_plans_page.php',37],['lib/phpexcel/PHPExcel','Style.php',93],['lib/minify/lib/Minify','HTML.php',49],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ListStyle.php',20],['lib/form','password.php',44],['backup','backup.class.php',146],['mod/feedback/classes','course_select_form.php',39],['lib/google/src/Google/Auth','AppIdentity.php',39],['lib/adodb','adodb-active-record.inc.php',121],['lib/phpexcel/PHPExcel','Chart.php',169],['lib/horde/framework/Horde/Mail/Rfc822','List.php',61],['admin/roles/classes','allow_switch_page.php',33],['lib/grade','grade_object.php',80],['lib/google/src/Google/IO','Exception.php',29],['auth/lti','auth.php',38],['mod/quiz/report/statistics/classes','calculator.php',39],['lib/htmlpurifier','HTMLPurifier.php',104],['admin/tool/lp/classes/output','user_competency_summary_in_plan.php',47],['mod/assign/feedback/editpdf/classes','widget.php',53],['lib/evalmath','evalmath.class.php',120],['lib/form','url.php',46],['lib/dml','pdo_moodle_recordset.php',41],['lib/htmlpurifier/HTMLPurifier/TagTransform','Simple.php',19],['backup/cc/cc_lib','xmlbase.php',52],['badges/lib','bakerlib.php',52],['lib/google/src/Google/Signer','P12.php',35],['availability/classes','info_section.php',40],['lib/form','static.php',47],['backup/converter','convertlib.php',52],['backup/converter','convertlib.php',277],['lib/google/src/Google/Service','YouTubeAnalytics.php',56],['admin/roles/classes','check_capability_table.php',40],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',14],['lib/adodb/drivers','adodb-postgres64.inc.php',127],['lib/adodb/drivers','adodb-postgres64.inc.php',919],['backup/util/helper','restore_prechecks_helper.class.php',213],['user/profile','lib.php',59],['lib/google/src/Google/Service','Admin.php',40],['lib/spout/src/Spout/Reader/CSV','RowIterator.php',62],['lib/google/src/Google/Service','MapsEngine.php',66],['lib','listlib.php',82],['lib','listlib.php',485],['lib/phpexcel/PHPExcel/Writer','HTML.php',128],['backup/moodle2','restore_activity_task.class.php',48],['lib/htmlpurifier/HTMLPurifier','HTMLModuleManager.php',68],['lib/simplepie/library/SimplePie','Source.php',61],['completion','data_object.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','ID.php',28],['grade/report/singleview/classes/local/ui','dropdown_attribute.php',49],['lib/horde/framework/Horde/Support','Stack.php',18],['lib/google/src/Google/Cache','File.php',41],['lib/horde/framework/Horde/Mail/Transport','Mock.php',76],['backup/util/ui','backup_moodleform.class.php',41],['availability/condition/grouping/classes','condition.php',46],['lib/classes/session','memcache.php',50],['cache/classes','dummystore.php',62],['badges/classes','assertion.php',49],['lib/xhprof/xhprof_lib/utils','xhprof_runs.php',87],['availability/tests/fixtures','mock_condition.php',52],['lib/mustache/src/Mustache/Loader','FilesystemLoader.php',33],['mod/quiz/report','attemptsreport_options.php',95],['lib/phpexcel/PHPExcel/Writer/PDF','tcPDF.php',39],['lib/minify/lib/Minify/CSS','Compressor.php',51],['lib/google/src/Google/Service','Dns.php',53],['question/type/calculatedmulti','edit_calculatedmulti_form.php',47],['backup/moodle2','restore_block_task.class.php',45],['lib/phpexcel/PHPExcel/Worksheet','AutoFilter.php',54],['lib/form','recaptcha.php',48],['lib','csvlib.class.php',64],['lib','csvlib.class.php',398],['lib/simplepie/library/SimplePie/Cache','File.php',82],['lib/phpexcel/PHPExcel/Chart','Legend.php',75],['lib/phpexcel/PHPExcel','WorksheetIterator.php',44],['cache/classes','loaders.php',196],['cache/classes','loaders.php',1189],['cache/classes','loaders.php',1586],['lib/google/src/Google/Service','Appengine.php',44],['admin/tool/lp/classes/output','template_cohorts_page.php',37],['search/classes','engine.php',77],['backup/cc/cc_lib','cc_assesment_essay.php',25],['lib/classes/progress','display.php',48],['lib/lessphp/Tree','Call.php',19],['course/format','lib.php',78],['question/type/calculated','datasetdefinitions_form.php',53],['lib/google/src/Google/Service','Translate.php',40],['enrol/database','settingslib.php',34],['lib/lessphp/Tree/Mixin','Call.php',14],['admin/tool/log/store/standard/classes/log','store.php',37],['lib/google/src/Google/Service','Urlshortener.php',40],['lib/horde/framework/Horde/Imap/Client','Socket.php',168],['lib/tests','collator_test.php',310],['lib/google/src/Google/Auth','Simple.php',31],['backup/cc/cc_lib','cc_manifest.php',45],['lib/bennu','iCalendar_properties.php',28],['lib/bennu','iCalendar_properties.php',220],['lib/bennu','iCalendar_properties.php',238],['lib/bennu','iCalendar_properties.php',259],['lib/bennu','iCalendar_properties.php',275],['lib/bennu','iCalendar_properties.php',296],['lib/bennu','iCalendar_properties.php',343],['lib/bennu','iCalendar_properties.php',358],['lib/bennu','iCalendar_properties.php',376],['lib/bennu','iCalendar_properties.php',391],['lib/bennu','iCalendar_properties.php',406],['lib/bennu','iCalendar_properties.php',447],['lib/bennu','iCalendar_properties.php',462],['lib/bennu','iCalendar_properties.php',485],['lib/bennu','iCalendar_properties.php',509],['lib/bennu','iCalendar_properties.php',524],['lib/bennu','iCalendar_properties.php',555],['lib/bennu','iCalendar_properties.php',573],['lib/bennu','iCalendar_properties.php',594],['lib/bennu','iCalendar_properties.php',637],['lib/bennu','iCalendar_properties.php',680],['lib/bennu','iCalendar_properties.php',724],['lib/bennu','iCalendar_properties.php',747],['lib/bennu','iCalendar_properties.php',782],['lib/bennu','iCalendar_properties.php',808],['lib/bennu','iCalendar_properties.php',849],['lib/bennu','iCalendar_properties.php',864],['lib/bennu','iCalendar_properties.php',905],['lib/bennu','iCalendar_properties.php',938],['lib/bennu','iCalendar_properties.php',952],['lib/bennu','iCalendar_properties.php',965],['lib/bennu','iCalendar_properties.php',987],['lib/bennu','iCalendar_properties.php',1017],['lib/bennu','iCalendar_properties.php',1031],['lib/bennu','iCalendar_properties.php',1061],['lib/bennu','iCalendar_properties.php',1075],['lib/bennu','iCalendar_properties.php',1098],['lib/bennu','iCalendar_properties.php',1110],['lib/bennu','iCalendar_properties.php',1139],['lib/bennu','iCalendar_properties.php',1160],['lib/bennu','iCalendar_properties.php',1181],['lib/bennu','iCalendar_properties.php',1203],['lib/bennu','iCalendar_properties.php',1227],['lib/bennu','iCalendar_properties.php',1260],['lib/bennu','iCalendar_properties.php',1386],['lib/bennu','iCalendar_properties.php',1407],['lib/bennu','iCalendar_properties.php',1429],['lib/bennu','iCalendar_properties.php',1450],['lib/mustache/src/Mustache/Exception','UnknownTemplateException.php',22],['lib/phpmailer','moodle_phpmailer.php',47],['availability/tests/fixtures','mock_info.php',40],['lib/horde/framework/Horde/Mail/Transport','Smtpmx.php',138],['admin/tool/lp/classes/form','persistent.php',68],['lib/adodb/drivers','adodb-mysqlt.inc.php',32],['lib/adodb/drivers','adodb-mysqlt.inc.php',96],['webservice/tests','lib_test.php',213],['lib/horde/framework/Horde/Imap/Client/Data/Format','Mailbox.php',35],['filter','local_settings_form.php',33],['mod/quiz/accessrule','accessrulebase.php',52],['lib/horde/framework/Horde/Exception','Wrapped.php',16],['mod/assign/feedback/editpdf/fpdi','pdf_parser.php',170],['lib/lessphp/Tree','Dimension.php',15],['lib/minify/lib/HTTP','ConditionalGet.php',109],['lib/adodb/perf','perf-oci8.inc.php',203],['lib/phpexcel','PHPExcel.php',361],['backup/util/helper','restore_questions_parser_processor.class.php',42],['backup/moodle2','backup_plugin.class.php',44],['lib/classes/antivirus','scanner_exception.php',38],['webservice/xmlrpc','lib.php',43],['report/loglive/classes','renderable.php',73],['course','dnduploadlib.php',109],['course','dnduploadlib.php',407],['lib/filebrowser','file_info.php',43],['lib/adodb/drivers','adodb-access.inc.php',34],['lib/adodb/drivers','adodb-access.inc.php',83],['mod/feedback/classes','responses_table.php',54],['lib/editor/tinymce','adminlib.php',36],['admin/tool/monitor/classes','rule.php',44],['lib/google/src/Google/Service','AdExchangeBuyer.php',55],['lib/filebrowser','virtual_root_file.php',45],['lib/phpexcel/PHPExcel/RichText','Run.php',35],['admin/tool/monitor/classes/output/managesubs','subs.php',51],['auth/cas/CAS/CAS','ProxyChain.php',48],['lib/htmlpurifier/HTMLPurifier','DefinitionCache.php',22],['lib/google/src/Google/Service','CivicInfo.php',40],['mod/feedback/classes/output','summary.php',52],['lib/minify/lib/Minify','Build.php',77],['lib/adodb/drivers','adodb-ado_mssql.inc.php',146],['lib/adodb/drivers','adodb-odbc.inc.php',44],['lib/adodb/drivers','adodb-odbc.inc.php',611],['lib','moodlelib.php',9421],['lib','moodlelib.php',9632],['user/selector','lib.php',85],['user/selector','lib.php',674],['admin/tool/lp/classes/output','plan_page.php',49],['repository/dropbox','lib.php',49],['lib/horde/framework/Horde/Mime','Part.php',261],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','CachingStrategyFactory.php',56],['lib/phpexcel/PHPExcel/Chart','Layout.php',143],['lib/mustache/src/Mustache/Loader','CascadingLoader.php',20],['lib/phpexcel/PHPExcel/Shared/JAMA','EigenvalueDecomposition.php',777],['lib/google/src/Google/Service','Books.php',60],['lib/google/src/Google/Service','Oauth2.php',50],['admin/tool/log/classes/log','store.php',30],['admin/tool/recyclebin/classes','category_bin.php',45],['lib/phpexcel/PHPExcel/Style','Color.php',64],['lib/phpexcel/PHPExcel/Worksheet','SheetView.php',69],['lib/htmlpurifier/HTMLPurifier/Token','Text.php',34],['lib/classes/update','checker.php',50],['lib/horde/framework/Horde/Socket','Client.php',52],['lib/phpexcel/PHPExcel/CachedObjectStorage','APC.php',243],['lib/horde/framework/Horde/Imap/Client/Cache','Backend.php',33],['lib/phpexcel/PHPExcel/Chart','Title.php',45],['lib/horde/framework/Horde/Imap/Client/Data','Format.php',32],['lib/adodb/drivers','adodb-text.inc.php',93],['lib/adodb/drivers','adodb-text.inc.php',379],['lib/phpexcel/PHPExcel','Calculation.php',2071],['lib/adodb/drivers','adodb-sqlite.inc.php',36],['lib/adodb/drivers','adodb-sqlite.inc.php',367],['lib/google/src/Google/Service','Analytics.php',77],['blocks/lp/classes/output','plans_to_review_page.php',48],['lib/google/src/Google/Service','Coordinate.php',48],['availability/condition/group/classes','condition.php',43],['lib/lessphp/Exception','Chunk.php',19],['lib/htmlpurifier/HTMLPurifier','PropertyListIterator.php',22],['backup/cc/cc_lib','cc_resources.php',102],['lib/horde/framework/Horde/Mail/Rfc822','Group.php',45],['backup/util/structure','base_optigroup.class.php',35],['backup/util/structure','base_optigroup.class.php',169],['question/classes/statistics/questions','calculated.php',181],['lib/horde/framework/Horde/Imap/Client/Interaction','Command.php',72],['lib/htmlpurifier/HTMLPurifier/Strategy','Core.php',8],['lib/htmlpurifier/HTMLPurifier/Filter','ExtractStyleBlocks.php',57],['backup/cc/cc_lib','cc_converter_url.php',29],['lib/xmldb','xmldb_structure.php',40],['lib/ddl','sqlite_sql_generator.php',73],['lib/pear/HTML/QuickForm','Renderer.php',31],['backup/util/helper','restore_moodlexml_parser_processor.class.php',38],['lib/pear/HTML/QuickForm','file.php',54],['lib/minify/lib/Minify/Cache','File.php',9],['lib/pear/HTML/QuickForm','xbutton.php',39],['lib/htmlpurifier','locallib.php',134],['admin/tool/recyclebin/classes','course_bin.php',45],['backup/util/plan','backup_task.class.php',32],['backup/util/plan','backup_task.class.php',56],['lib/phpexcel/PHPExcel/CachedObjectStorage','PHPTemp.php',174],['backup/util/helper','backup_helper.class.php',381],['lib/form','htmleditor.php',48],['lib','oauthlib.php',65],['lib','oauthlib.php',409],['auth/cas/CAS/CAS/PGTStorage','File.php',105],['auth/cas/CAS/CAS/ProxiedService','Imap.php',51],['repository/skydrive','lib.php',42],['lib/htmlpurifier/HTMLPurifier','ErrorCollector.php',57],['lib/classes/lock','postgres_lock_factory.php',81],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite.php',260],['lib/horde/framework/Horde/Support','ConsistentHash.php',56],['lib/horde/framework/Horde/Exception','Pear.php',22],['lib/portfolio','exceptions.php',50],['backup/moodle2','restore_plugin.class.php',43],['lib/phpexcel/PHPExcel/CachedObjectStorage','DiscISAM.php',177],['lib/google/src/Google/Service','DoubleClickBidManager.php',40],['lib/minify/lib/Minify/JS','ClosureCompiler.php',101],['lib/horde/framework/Horde/Imap/Client/Data/Format','String.php',38],['lib/form','dateselector.php',70],['lib/spout/src/Spout/Common/Helper','EncodingHelper.php',38],['report/competency/classes/output','user_course_navigation.php',51],['lib/adodb/drivers','adodb-postgres7.inc.php',98],['lib/adodb/drivers','adodb-postgres7.inc.php',311],['lib/adodb/drivers','adodb-postgres7.inc.php',342],['lib/lessphp/Tree','Alpha.php',13],['mod/lti/service/memberships/classes/local/resource','linkmemberships.php',46],['lib/tcpdf','tcpdf.php',1822],['lib/adodb/drivers','adodb-sybase.inc.php',47],['lib/adodb/drivers','adodb-sybase.inc.php',313],['lib/adodb/drivers','adodb-sybase.inc.php',394],['lib/phpexcel/PHPExcel/Chart','PlotArea.php',44],['lib/phpexcel/PHPExcel/Chart','DataSeries.php',136],['mod/lesson','editpage_form.php',41],['question/classes/statistics/responses','analysis_for_question.php',58],['lib/horde/framework/Horde','Domhtml.php',53],['lib','formslib.php',142],['lib','formslib.php',1442],['lib','formslib.php',2653],['rating','lib.php',114],['rating','lib.php',1070],['lib/phpexcel/PHPExcel/Worksheet','Column.php',44],['lib/google/src/Google/Service','Script.php',67],['lib/adodb','adodb-xmlschema.inc.php',118],['lib/adodb','adodb-xmlschema.inc.php',245],['lib/adodb','adodb-xmlschema.inc.php',637],['lib/adodb','adodb-xmlschema.inc.php',781],['lib/adodb','adodb-xmlschema.inc.php',982],['lib/adodb','adodb-xmlschema.inc.php',1295],['lib/google/src/Google/Service','DeploymentManager.php',54],['mod/quiz','attemptlib.php',41],['mod/quiz','attemptlib.php',82],['mod/quiz','attemptlib.php',546],['mod/quiz','attemptlib.php',2337],['mod/quiz','attemptlib.php',2392],['backup/cc/cc_lib','cc_converter_forum.php',29],['lib','boxlib.php',264],['lib/simplepie/library/SimplePie','Restriction.php',81],['admin/roles/classes','allow_assign_page.php',31],['lib/adodb/drivers','adodb-pdo.inc.php',90],['lib/adodb/drivers','adodb-pdo.inc.php',553],['lib/adodb/drivers','adodb-pdo.inc.php',630],['tag/classes/output','tagareacollection.php',40],['admin/tool/lp/classes','template_statistics.php',62],['lib','weblib.php',313],['lib','weblib.php',3183],['lib','weblib.php',3483],['lib','weblib.php',3518],['lib','weblib.php',3593],['backup/cc/cc_lib','cc_converter_basiclti.php',29],['lib/html2text','Html2Text.php',232],['mod/assign/feedback/editpdf/classes','annotation.php',66],['lib/pear/HTML/QuickForm/Renderer','Array.php',143],['question/engine','lib.php',774],['question/engine','lib.php',1011],['question/engine','lib.php',1059],['lib/jabber/XMPP','XMLObj.php',76],['lib/horde/framework/Horde/Exception','PermissionDenied.php',15],['lib/editor/atto','adminlib.php',109],['lib/pear/HTML/QuickForm/Renderer','Tableless.php',116],['grade/report/history/classes/output','tablelog.php',72],['lib/google/src/Google/IO','Curl.php',38],['lib/editor/tinymce/plugins/spellchecker/classes/utils','Logger.php',31],['lib/pear/HTML/QuickForm','hiddenselect.php',41],['backup/util/ui','backup_ui_setting.class.php',70],['backup/util/ui','backup_ui_setting.class.php',200],['backup/util/ui','backup_ui_setting.class.php',398],['backup/util/ui','backup_ui_setting.class.php',504],['backup/util/ui','backup_ui_setting.class.php',583],['lib/adodb/drivers','adodb-mysqlpo.inc.php',35],['lib/adodb/drivers','adodb-mysqlpo.inc.php',82],['lib/adodb/drivers','adodb-mysqlpo.inc.php',119],['lib/google/src/Google/Service','Blogger.php',50],['backup/util/xml/output','file_xml_output.class.php',37],['lib/form','tags.php',75],['admin/tool/installaddon/classes','installer.php',219],['lib/htmlpurifier/HTMLPurifier/AttrDef','Enum.php',30],['lib/simplepie/library/SimplePie','IRI.php',252],['comment','locallib.php',39],['question/engine','states.php',61],['lib/spout/src/Spout/Reader/XLSX/Helper','CellValueFormatter.php',52],['lib/google/src/Google/Service','Dataflow.php',45],['mod/data','locallib.php',66],['mod/data','locallib.php',433],['lib/horde/framework/Horde','Variables.php',60],['backup/util/ui','base_ui.class.php',84],['lib/simplepie/library/SimplePie','Registry.php',99],['cache/locks/file','lib.php',66],['question/classes/statistics/responses','analysis_for_class.php',68],['lib/filebrowser','file_info_stored.php',51],['tag/classes/output','tagcollname.php',42],['competency/classes','persistent.php',54],['admin/tool/lp/classes/output','competency_plan_navigation.php',54],['lib/phpexcel/PHPExcel/Cell','DataValidation.php',146],['lib/pear/HTML/QuickForm','textarea.php',48],['lib/lessphp','Visitor.php',14],['lib/google/src/Google/Service','CloudUserAccounts.php',52],['question/classes/bank','column_base.php',44],['lib/minify/lib/MrClay','Cli.php',74],['lib','outputcomponents.php',80],['lib','outputcomponents.php',204],['lib','outputcomponents.php',469],['lib','outputcomponents.php',523],['lib','outputcomponents.php',589],['lib','outputcomponents.php',665],['lib','outputcomponents.php',783],['lib','outputcomponents.php',925],['lib','outputcomponents.php',1009],['lib','outputcomponents.php',2183],['lib','outputcomponents.php',2222],['lib','outputcomponents.php',2295],['lib','outputcomponents.php',2376],['lib','outputcomponents.php',2579],['lib','outputcomponents.php',2627],['lib','outputcomponents.php',2687],['lib','outputcomponents.php',2860],['lib','outputcomponents.php',3030],['lib','outputcomponents.php',3134],['lib','outputcomponents.php',3201],['lib','outputcomponents.php',3329],['lib','outputcomponents.php',3613],['lib','outputcomponents.php',3642],['lib','outputcomponents.php',3668],['lib','outputcomponents.php',3690],['lib','outputcomponents.php',3719],['lib','outputcomponents.php',3751],['lib/google/src/Google/Service','Pagespeedonline.php',39],['lib/phpexcel/PHPExcel','Cell.php',114],['lib/dml','sqlsrv_native_moodle_recordset.php',40],['repository/wikimedia','wikimedia.php',35],['lib/phpexcel/PHPExcel/Style','Fill.php',81],['lib/google/src/Google/Service','Cloudresourcemanager.php',42],['lib/editor/tinymce/classes','plugin.php',49],['mod/wiki/parser/markups','html.php',21],['lib/simplepie/library/SimplePie/Parse','Date.php',536],['lib/horde/framework/Horde/Support','Inflector.php',115],['question/type/gapselect','question.php',55],['lib/google/src/Google','Config.php',33],['badges/criteria','award_criteria_activity.php',45],['backup/util/xml/output','xml_output.class.php',52],['backup/util/xml/output','xml_output.class.php',158],['course/format/topics','renderer.php',38],['lib/adodb/drivers','adodb-oci8po.inc.php',33],['lib/adodb/drivers','adodb-oci8po.inc.php',99],['mod/workshop/allocation/random','lib.php',52],['mod/workshop/allocation/random','lib.php',727],['backup/util/structure','base_final_element.class.php',38],['backup/util/structure','base_final_element.class.php',239],['backup/util/structure','base_final_element.class.php',256],['lib/htmlpurifier/HTMLPurifier','Zipper.php',25],['lib/horde/framework/Horde/Imap/Client/Data','Thread.php',41],['lib/mustache/src/Mustache/Exception','UnknownHelperException.php',22],['backup/util/settings/activity','activity_backup_setting.class.php',25],['lib/filestorage','tgz_packer.php',749],['lib/filestorage','tgz_packer.php',831],['tag/classes','index_builder.php',96],['lib/pear/HTML/QuickForm','reset.php',37],['lib/classes/lock','lock.php',55],['admin/roles/classes','assign_user_selector_base.php',40],['backup/util/output','output_controller.class.php',44],['question/type/randomsamatch','question.php',114],['lib/google/src/Google/Service','Customsearch.php',38],['lib/lessphp/Tree','Extend.php',28],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',215],['lib/google/src/Google/Service','TagManager.php',67],['question/type/gapselect/tests','edit_form_test.php',41],['mod/lesson','locallib.php',2004],['mod/lesson','locallib.php',2611],['backup/util/helper','restore_structure_parser_processor.class.php',41],['course','renderer.php',52],['backup/util/xml/parser/processors','selective_exact_parser_processor.class.php',35],['lib','modinfolib.php',429],['lib','modinfolib.php',1665],['lib','modinfolib.php',2492],['lib','tablelib.php',128],['lib','tablelib.php',1468],['lib','tablelib.php',1633],['lib','tablelib.php',1698],['user/filters','cohort.php',36],['user/filters','text.php',37],['lib','outputrenderers.php',120],['lib','outputrenderers.php',285],['lib','outputrenderers.php',408],['lib','outputrenderers.php',4578],['lib','outputrenderers.php',4831],['repository','lib.php',116],['repository','lib.php',533],['lib','adminlib.php',791],['lib','adminlib.php',1138],['lib','adminlib.php',1212],['lib','adminlib.php',1355],['lib','adminlib.php',1556],['lib','adminlib.php',1928],['lib','adminlib.php',2040],['lib','adminlib.php',2106],['lib','adminlib.php',2199],['lib','adminlib.php',2260],['lib','adminlib.php',2302],['lib','adminlib.php',2341],['lib','adminlib.php',2429],['lib','adminlib.php',2463],['lib','adminlib.php',2621],['lib','adminlib.php',2706],['lib','adminlib.php',2935],['lib','adminlib.php',3091],['lib','adminlib.php',3233],['lib','adminlib.php',3324],['lib','adminlib.php',3488],['lib','adminlib.php',3571],['lib','adminlib.php',3682],['lib','adminlib.php',3833],['lib','adminlib.php',4067],['lib','adminlib.php',4134],['lib','adminlib.php',4352],['lib','adminlib.php',4381],['lib','adminlib.php',4410],['lib','adminlib.php',4434],['lib','adminlib.php',4464],['lib','adminlib.php',4500],['lib','adminlib.php',4535],['lib','adminlib.php',4567],['lib','adminlib.php',4657],['lib','adminlib.php',4690],['lib','adminlib.php',4748],['lib','adminlib.php',4790],['lib','adminlib.php',4814],['lib','adminlib.php',4840],['lib','adminlib.php',4863],['lib','adminlib.php',4880],['lib','adminlib.php',4925],['lib','adminlib.php',4943],['lib','adminlib.php',5002],['lib','adminlib.php',5045],['lib','adminlib.php',5080],['lib','adminlib.php',5123],['lib','adminlib.php',5206],['lib','adminlib.php',5336],['lib','adminlib.php',5378],['lib','adminlib.php',5423],['lib','adminlib.php',5480],['lib','adminlib.php',5496],['lib','adminlib.php',5552],['lib','adminlib.php',5777],['lib','adminlib.php',5831],['lib','adminlib.php',5885],['lib','adminlib.php',5902],['lib','adminlib.php',5950],['lib','adminlib.php',5992],['lib','adminlib.php',6043],['lib','adminlib.php',6099],['lib','adminlib.php',6328],['lib','adminlib.php',6508],['lib','adminlib.php',6688],['lib','adminlib.php',6782],['lib','adminlib.php',6931],['lib','adminlib.php',7088],['lib','adminlib.php',7712],['lib','adminlib.php',8147],['lib','adminlib.php',8330],['lib','adminlib.php',8617],['lib','adminlib.php',8764],['lib','adminlib.php',8924],['lib','adminlib.php',9071],['lib','adminlib.php',9235],['lib','adminlib.php',9428],['lib','adminlib.php',9482],['lib','adminlib.php',9544],['lib','adminlib.php',9589],['lib','adminlib.php',9626],['backup/cc/cc_lib','cc_organization.php',47],['backup/cc/cc_lib','cc_organization.php',145],['lib/phpexcel/PHPExcel/Chart','DataSeriesValues.php',81],['lib/horde/framework/Horde/Mail/Rfc822','Identification.php',34],['question/type/numerical','questiontype.php',507],['auth/mnet','auth.php',35],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',68],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',29],['auth/imap','auth.php',35],['tag/classes/output','taglist.php',54],['lib','pdflib.php',161],['lib/phpexcel/PHPExcel/RichText','TextElement.php',35],['lib/dml','database_column_info.php',112],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportExtension.php',33],['mod/wiki/editors','wikieditor.php',36],['lib/lessphp/SourceMap','Base64VLQ.php',67],['repository/s3','lib.php',44],['admin/tool/uploadcourse/classes','course.php',111],['lib/google/src/Google/Service','Replicapoolupdater.php',51],['lib/horde/framework/Horde/Imap/Client/Data/Format','Date.php',25],['lib/bennu','iCalendar_components.php',21],['lib/bennu','iCalendar_components.php',333],['lib/bennu','iCalendar_components.php',355],['lib/bennu','iCalendar_components.php',433],['lib/bennu','iCalendar_components.php',513],['lib/bennu','iCalendar_components.php',551],['lib/bennu','iCalendar_components.php',602],['lib/bennu','iCalendar_components.php',659],['lib/bennu','iCalendar_components.php',679],['lib/phpexcel/PHPExcel/Calculation','FormulaToken.php',102],['mod/feedback/item','feedback_item_class.php',28],['lib/adodb/drivers','adodb-mssql_n.inc.php',245],['lib','badgeslib.php',133],['lib/pear/HTML/QuickForm','text.php',38],['lib/simplepie/library/SimplePie','Enclosure.php',219],['calendar/classes','rrule_manager.php',182],['auth/webservice','auth.php',35],['lib','outputrequirementslib.php',171],['mod/lti/service/toolsettings/classes/local/resource','contextsettings.php',44],['lib','questionlib.php',1261],['lib','questionlib.php',1505],['lib','uploadlib.php',40],['lib/spout/src/Spout/Writer/Common/Helper','ZipHelper.php',28],['lib/google/src/Google/Service','Cloudsearch.php',40],['backup/util/structure','backup_nested_element.class.php',44],['lib/spout/src/Spout/Writer/Common','Sheet.php',39],['question/behaviour','behaviourbase.php',50],['blocks/rss_client/classes/output','footer.php',47],['lib/dtl','file_xml_database_importer.php',34],['admin/roles/classes','capability_table_with_risks.php',45],['lib/adodb/drivers','adodb-mssql.inc.php',110],['lib/adodb/drivers','adodb-mssql.inc.php',870],['lib/adodb/drivers','adodb-mssql.inc.php',1077],['lib/google/src/Google/Service','Bigquery.php',62],['lib/google/src/Google/Service','ShoppingContent.php',50],['mod/lti','OAuth.php',73],['mod/lti','OAuth.php',89],['mod/lti','OAuth.php',244],['mod/lti','OAuth.php',499],['repository/equella','lib.php',42],['lib/phpexcel/PHPExcel/Worksheet','PageMargins.php',80],['backup/cc/cc_lib','cc_converter_quiz.php',33],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',60],['lib/phpexcel/PHPExcel/Shared/trend','polynomialBestFitClass.php',199],['backup/util/helper','restore_decode_processor.class.php',47],['backup/util/helper','restore_decode_processor.class.php',182],['cache/classes','helper.php',90],['lib/simplepie/library/SimplePie','Credit.php',81],['lib/classes','chart_series.php',62],['lib/classes/dml','recordset_walk.php',64],['lib/google/src/Google/Service','Webmasters.php',47],['lib/tcpdf/include/barcodes','qrcode.php',631],['backup/moodle2','backup_settingslib.php',42],['backup/moodle2','backup_settingslib.php',138],['lib/spout/src/Spout/Writer/XLSX/Helper','SharedStringsHelper.php',40],['course/tests/fixtures','course_capability_assignment.php',60],['mod/forum/classes','subscriber_selector_base.php',53],['lib','blocklib.php',54],['lib','blocklib.php',152],['report/loglive/classes','table_log.php',50],['lib','navigationlib.php',147],['lib','navigationlib.php',1015],['lib','navigationlib.php',2825],['lib','navigationlib.php',3086],['lib','navigationlib.php',3412],['lib','navigationlib.php',3459],['lib','navigationlib.php',4888],['lib','navigationlib.php',5070],['lib/phpexcel/PHPExcel/Shared/JAMA','CholeskyDecomposition.php',41],['grade/report/history/classes/output','user_button.php',40],['user/filters','courserole.php',34],['lib/phpexcel/PHPExcel','IOFactory.php',69],['lib/lessphp/Tree','Color.php',15],['lib/phpexcel/PHPExcel/Worksheet','MemoryDrawing.php',70],['lib/adodb/drivers','adodb-vfp.inc.php',72],['lib/horde/framework/Horde/Support','Backtrace.php',20],['lib/google/src/Google/Service','Clouddebugger.php',50],['lib/horde/framework/Horde/Exception','NotFound.php',15],['admin/tool/lp/classes/output','user_competency_course_navigation.php',55],['lib/lessphp/Tree','UnicodeDescriptor.php',14],['lib/phpexcel/PHPExcel/Worksheet','PageSetup.php',277],['grade/report/singleview/classes/local/ui','bulk_insert.php',40],['lib','mathslib.php',45],['lib/filestorage','tgz_extractor.php',119],['lib/horde/framework/Horde/Imap/Client/Interaction/Command','Continuation.php',42],['lib/horde/framework/Horde/Imap/Client','Exception.php',247],['filter/emoticon/tests','filter_test.php',68],['mnet/xmlrpc','xmlparser.php',15],['lib/spout/src/Spout/Reader/XLSX','Sheet.php',31],['admin/roles/classes','capability_table_base.php',51],['lib/simplepie/library/SimplePie','Item.php',82],['lib/form','selectgroups.php',57],['auth/shibboleth','auth.php',38],['admin/tool/langimport/classes','controller.php',48],['lib/form','warning.php',49],['lib/filestorage','stored_file.php',63],['grade/grading/form/guide','guideeditor.php',49],['lib/pear/HTML/QuickForm','group.php',80],['backup/moodle2','restore_subplugin.class.php',45],['grade/export','lib.php',60],['grade/export','lib.php',625],['lib/phpexcel/PHPExcel/Style','NumberFormat.php',98],['backup/moodle2','backup_section_task.class.php',40],['lib/htmlpurifier/HTMLPurifier','Config.php',100],['lib','flickrlib.php',53],['mod/assign/classes/output','grading_app.php',59],['grade/report/singleview/classes/local/ui','grade_attribute_format.php',47],['user/profile/field/menu','field.class.php',39],['lib/spout/src/Spout/Writer/Common/Internal','AbstractWorkbook.php',30],['lib/portfolio','exporter.php',113],['lib','ddllib.php',80],['lib','ddllib.php',93],['lib','ddllib.php',107],['lib','ddllib.php',126],['lib','ddllib.php',140],['lib/horde/framework/Horde/Crypt','Blowfish.php',54],['lib/horde/framework/Horde','Secret.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef','Integer.php',36],['lib/classes/update','info.php',48],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','ValidatorAtom.php',31],['lib/lessphp/Tree','Anonymous.php',21],['admin/tool/lp/classes','course_competencies_form_element.php',43],['lib/lessphp/Tree','Comment.php',17],['auth/cas/CAS/CAS','OutOfSequenceBeforeAuthenticationCallException.php',47],['question/type/calculatedsimple','edit_calculatedsimple_form.php',72],['lib/adodb/drivers','adodb-mysql.inc.php',54],['lib/adodb/drivers','adodb-mysql.inc.php',717],['lib/adodb/drivers','adodb-mysql.inc.php',880],['enrol/ldap','lib.php',43],['mod/quiz/report/statistics','statistics_table.php',45],['lib/form','listing.php',68],['lib/google/src/Google/Service','Container.php',43],['mod/quiz','accessmanager.php',45],['lib/classes/message/inbound','processing_failed_exception.php',36],['blocks/online_users/classes','fetcher.php',45],['lib/pear/HTML/QuickForm','checkbox.php',48],['auth/cas/CAS/CAS','OutOfSequenceBeforeProxyException.php',48],['mod/lti/service/toolproxy/classes/local/service','toolproxy.php',41],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','URI.php',15],['lib/classes','chart_axis.php',65],['mod/glossary/classes','entry_query_builder.php',83],['mod/feedback/item/label','lib.php',26],['lib/adodb/drivers','adodb-mssqlnative.inc.php',131],['lib/adodb/drivers','adodb-mssqlnative.inc.php',847],['lib/adodb/drivers','adodb-mssqlnative.inc.php',1099],['lib/horde/framework/Horde/Imap/Client','Ids.php',78],['lib/form','editor.php',62],['lib','environmentlib.php',1258],['mod/workshop','fileinfolib.php',43],['mod/workshop','fileinfolib.php',198],['mod/feedback/classes','templates_table.php',39],['tag/classes','manage_table.php',44],['lib/adodb/drivers','adodb-odbc_db2.inc.php',115],['lib/adodb/drivers','adodb-odbc_db2.inc.php',309],['backup/cc/cc_lib/gral_lib','cssparser.php',21],['lib/horde/framework/Horde/Support','Array.php',21],['lib/google/src/Google/Service','GroupsMigration.php',40],['admin/tool/lp/classes/output','user_evidence_list_page.php',61],['lib/google/src/Google/Service','Audit.php',39],['lib/simplepie/library/SimplePie','File.php',68],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',62],['enrol/lti/classes','manage_table.php',62],['lib/simplepie/library/SimplePie/Content/Type','Sniffer.php',69],['question/type','questionbase.php',124],['question/type','questionbase.php',438],['question/type','questionbase.php',531],['question/type','questionbase.php',750],['question/type','questionbase.php',835],['question/type','questionbase.php',868],['question/type','questionbase.php',914],['question/type','questionbase.php',1013],['question/type/ddimageortext','question.php',64],['question/type/ddimageortext','question.php',122],['lib','excellib.class.php',47],['lib','excellib.class.php',155],['lib','excellib.class.php',456],['lib/minify/lib','CSSmin.php',43],['lib/dml','moodle_temptables.php',51],['lib/minify/lib/Minify/Cache','ZendPlatform.php',23],['backup/util/xml/parser','progressive_parser.class.php',79],['backup/util/xml/parser','progressive_parser.class.php',305],['blocks/rss_client/classes/output','block.php',47],['question/type/ddmarker','question.php',417],['question/type/ddmarker','question.php',469],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Percentage.php',18],['admin/tool/lp/classes/output','user_competency_summary_in_course.php',51],['backup/util/helper','convert_helper.class.php',378],['lib/classes/update','validator.php',265],['lib/lessphp/Tree','Attribute.php',16],['admin/tool/generator/classes','backend.php',84],['backup/util/loggers','file_logger.class.php',35],['lib/adodb','adodb-exceptions.inc.php',30],['lib/google/src/Google','Client.php',70],['user/filters','profilefield.php',36],['backup/util/helper','restore_inforef_parser_processor.class.php',37],['cache/tests/fixtures','lib.php',326],['mod/lti/service/profile/classes/local/resource','profile.php',43],['competency/classes','invalid_persistent_exception.php',38],['backup/util/plan','backup_plan.class.php',36],['backup/util/plan','backup_plan.class.php',130],['lib/phpexcel/PHPExcel/Writer/Excel2007','WriterPart.php',63],['backup/util/settings','setting_dependency.class.php',68],['backup/util/settings','setting_dependency.class.php',175],['backup/util/settings','setting_dependency.class.php',328],['backup/util/settings','setting_dependency.class.php',439],['backup/util/settings','setting_dependency.class.php',465],['backup/util/settings','setting_dependency.class.php',491],['backup/util/settings','setting_dependency.class.php',556],['backup/util/xml','xml_writer.class.php',57],['backup/util/xml','xml_writer.class.php',284],['enrol/imsenterprise','locallib.php',38],['enrol/imsenterprise','locallib.php',115],['lib/dml','moodle_database.php',139],['search/classes','base.php',69],['admin/tool/lp/classes/output','competency_summary.php',54],['lib','upgradelib.php',45],['lib','upgradelib.php',61],['lib','upgradelib.php',76],['lib','upgradelib.php',94],['lib','upgradelib.php',111],['lib/htmlpurifier/HTMLPurifier/AttrTransform','NameSync.php',11],['mod/workshop/form/rubric','lib.php',105],['grade','lib.php',103],['grade','lib.php',927],['grade','lib.php',1089],['grade','lib.php',2053],['grade','lib.php',2213],['lib/horde/framework/Horde/Imap/Client/Data','Acl.php',32],['lib/phpexcel/PHPExcel/Reader/Excel5','RC4.php',35],['lib/google/src/Google/Service','Datastore.php',46],['admin/tool/lpmigrate/classes','framework_processor.php',98],['lib/dtl','database_importer.php',61],['lib/horde/framework/Horde/Imap/Client/Password','Xoauth2.php',44],['badges/lib','awardlib.php',55],['backup/util/helper','backup_array_iterator.class.php',39],['admin/tool/monitor/classes','subscription.php',43],['question/type/calculated','edit_calculated_form.php',51],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','FileBasedStrategy.php',57],['lib/form','datetimeselector.php',72],['lib/horde/framework/Horde/Imap/Client','Base.php',153],['lib/classes','collator.php',58],['admin/tool/lp/classes','course_competency_statistics.php',48],['lib/google/src/Google/Service','Storage.php',57],['lib/spout/src/Spout/Reader/CSV','SheetIterator.php',28],['lib/lessphp/Tree','Paren.php',14],['mod/lti/classes','service_exception_handler.php',63],['lib/tcpdf/include/barcodes','pdf417.php',523],['mod/assign/feedback/offline','importgradeslib.php',66],['lib/filestorage','file_exceptions.php',36],['lib/filestorage','file_exceptions.php',57],['lib/filestorage','file_exceptions.php',89],['lib/filestorage','file_exceptions.php',108],['lib/filestorage','file_exceptions.php',129],['lib/horde/framework/Horde/Mail/Transport','Smtp.php',100],['lib/htmlpurifier/HTMLPurifier/ConfigSchema/Interchange','Id.php',17],['question/engine/upgrade','upgradelib.php',283],['question/engine/upgrade','upgradelib.php',384],['question/type/numerical','question.php',323],['lib/pear/PEAR','Exception.php',107],['course/format','renderer.php',44],['lib/dml','oci_native_moodle_recordset.php',34],['question/behaviour','behaviourtypebase.php',133],['lib/pear/HTML','QuickForm.php',246],['lib/pear/HTML','QuickForm.php',1979],['backup/util/structure','base_atom.class.php',41],['backup/util/structure','base_atom.class.php',114],['backup/util/structure','base_atom.class.php',135],['backup/util/structure','base_atom.class.php',156],['lib/horde/framework/Horde/Imap/Client/Data','BaseSubject.php',39],['lib/google/src/Google/Auth','LoginTicket.php',37],['lib/adodb/drivers','adodb-csv.inc.php',41],['lib/adodb/drivers','adodb-csv.inc.php',196],['user/filters','yesno.php',33],['mod/wiki/parser','parser.php',98],['lib/htmlpurifier/HTMLPurifier/Token','Comment.php',19],['lib/phpexcel/PHPExcel/Calculation','FormulaParser.php',87],['backup/cc/cc_lib','cc_assesment_truefalse.php',27],['lib/htmlpurifier/HTMLPurifier','Encoder.php',10],['admin/tool/lpmigrate/classes/form','migrate_framework.php',45],['backup/util/xml/parser/tests','parser_test.php',797],['lib/htmlpurifier/HTMLPurifier/AttrTransform','EnumToCSS.php',34],['lib/tests','medialib_test.php',644],['lib/google/src/Google/Service','QPXExpress.php',39],['tag/classes/output','tagname.php',41],['lib/mustache/src/Mustache','Context.php',20],['lib/adodb/drivers','adodb-oracle.inc.php',32],['lib/adodb/drivers','adodb-oracle.inc.php',224],['backup/moodle2','restore_section_task.class.php',42],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Composite.php',25],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Nofollow.php',16],['mod/forum/classes/output','forum_post.php',110],['admin/tool/assignmentupgrade','locallib.php',50],['admin/tool/assignmentupgrade','locallib.php',93],['repository/googledocs','lib.php',65],['cache/stores/memcache','lib.php',120],['lib/filestorage','file_storage.php',78],['admin/tool/monitor/classes/output/managerules','renderable.php',56],['mod/lti/service/toolsettings/classes/local/resource','linksettings.php',45],['lib/form','duration.php',55],['lib','outputlib.php',480],['lib','outputlib.php',2038],['filter/tex','latex.php',13],['backup/moodle2','backup_course_task.class.php',39],['lib/adodb','adodb.inc.php',310],['lib/adodb','adodb.inc.php',3035],['lib/adodb','adodb.inc.php',3160],['lib/adodb','adodb.inc.php',3242],['lib/adodb','adodb.inc.php',4353],['lib/horde/framework/Horde/Support','Randomid.php',26],['lib/google/src/Google/Logger','File.php',51],['admin/roles/classes','allow_role_page.php',37],['mod/quiz/report/overview','overview_table.php',41],['lib/lessphp/Tree','Keyword.php',17],['lib/htmlpurifier/HTMLPurifier/Node','Comment.php',19],['question/type/ddmarker','questiontype.php',48],['mod/folder','renderer.php',159],['lib','portfoliolib.php',101],['tag/classes/output','tagcollsearchable.php',40],['webservice/soap/classes','wsdl.php',88],['lib/lessphp/Exception','Parser.php',30],['badges','renderer.php',973],['badges','renderer.php',1014],['badges','renderer.php',1078],['badges','renderer.php',1111],['badges','renderer.php',1137],['competency/classes/external','exporter.php',56],['mod/lti/service/toolproxy/classes/local/resource','toolproxy.php',47],['lib/google/src/Google/Service','Genomics.php',63],['lib/phpexcel/PHPExcel/Writer','PDF.php',38],['lib/phpexcel/PHPExcel/Shared/trend','exponentialBestFitClass.php',125],['lib/google/src/Google/Service','Games.php',60],['backup/converter/moodle1','lib.php',725],['backup/converter/moodle1','lib.php',865],['backup/converter/moodle1','lib.php',1145],['backup/converter/moodle1','lib.php',1190],['backup/converter/moodle1','lib.php',1480],['backup/util/helper','restore_logs_processor.class.php',45],['backup/util/helper','restore_logs_processor.class.php',141],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Input.php',14],['lib/google/src/Google/Service','Licensing.php',40],['mod/workshop/form/comments','lib.php',99],['backup/util/settings/section','section_backup_setting.class.php',25],['lib/htmlpurifier/HTMLPurifier','Doctype.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Font.php',22],['lib/google/src/Google/Service','Fitness.php',58],['blocks/private_files','renderer.php',83],['lib/phpexcel/PHPExcel/Worksheet','ColumnCellIterator.php',51],['enrol/flatfile','adminlib.php',35],['lib/xmldb','xmldb_object.php',55],['lib/google/src/Google/Service','Reports.php',47],['question/classes/statistics/responses','analysis_for_actual_response.php',70],['auth/pam','auth.php',53],['lib/horde/framework/Horde','Stream.php',50],['comment','lib.php',100],['lib/htmlpurifier/HTMLPurifier','URIParser.php',10],['lib/htmlpurifier/HTMLPurifier/Node','Text.php',35],['lib/phpexcel/PHPExcel/Worksheet','RowDimension.php',53],['lib/google/src/Google/Service','Gmail.php',64],['lib/google/src/Google/Service','Taskqueue.php',44],['lib/minify/lib/Minify','ImportProcessor.php',48],['lib/horde/framework/Horde/Mime','Related.php',32],['blocks','moodleblock.class.php',111],['lib/tcpdf','tcpdf_parser.php',92],['backup/util/plan','restore_structure_step.class.php',46],['blocks/rss_client/classes/output','channel_image.php',61],['lib/pear/HTML/QuickForm','hierselect.php',105],['question/type/numerical/tests','form_test.php',40],['badges/lib','backpacklib.php',40],['mod/workshop/allocation/manual','lib.php',51],['mod/quiz/report/responses','last_responses_table.php',39],['lib/simplepie','autoloader.php',62],['lib/spout/src/Spout/Common/Helper','StringHelper.php',21],['lib/phpexcel/PHPExcel/Worksheet','BaseDrawing.php',121],['lib/pear/Crypt','CHAP.php',82],['lib/pear/Crypt','CHAP.php',170],['lib/pear/Crypt','CHAP.php',424],['lib/spout/src/Spout/Writer/Common/Helper','AbstractStyleHelper.php',22],['backup/util/xml/parser/processors','progressive_parser_processor.class.php',57],['mod/quiz/classes/question','qubaids_for_users_attempts.php',37],['lib/spout/src/Spout/Reader/XLSX','RowIterator.php',63],['lib/phpexcel/PHPExcel/Reader/Excel5','Escher.php',77],['lib/simplepie/library/SimplePie','gzdecode.php',186],['mod/wiki','renderer.php',540],['lib/adodb','adodb-active-recordx.inc.php',138],['availability/classes','result.php',46],['lib','accesslib.php',5352],['lib','accesslib.php',5897],['lib','accesslib.php',6167],['lib','accesslib.php',6408],['lib','accesslib.php',6595],['lib','accesslib.php',6827],['lib','accesslib.php',7049],['lib','accesslib.php',7291],['lib/phpexcel/PHPExcel/Shared/OLE','PPS.php',110],['grade/grading/form','lib.php',82],['grade/grading/form','lib.php',766],['question/engine','questionusage.php',78],['question/engine','questionusage.php',973],['auth/manual','auth.php',46],['question/engine/upgrade','behaviourconverters.php',78],['mod/wiki/diff','diff_nwiki.php',35],['mod/wiki/diff','diff_nwiki.php',50],['mod/wiki/diff','diff_nwiki.php',63],['mod/wiki/diff','diff_nwiki.php',76],['mod/wiki/diff','diff_nwiki.php',495],['mod/wiki/diff','diff_nwiki.php',640],['mod/wiki/diff','diff_nwiki.php',850],['mod/wiki/diff','diff_nwiki.php',901],['mod/wiki/diff','diff_nwiki.php',953],['lib/adodb/drivers','adodb-proxy.inc.php',28],['lib/classes/lock','file_lock_factory.php',57],['lib/google/src/Google/Auth','OAuth2.php',55],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Pixels.php',17],['lib/filebrowser','file_info_context_module.php',47],['auth/none','auth.php',34],['lib/simplepie/library/SimplePie/Cache','Base.php',70],['lib/htmlpurifier/HTMLPurifier','Queue.php',24],['lib/horde/framework/Horde/Text','Flowed.php',75],['admin/tool/log/store/legacy/classes/log','store.php',33],['lib/mustache/src/Mustache','HelperCollection.php',19],['backup/util/structure','backup_structure_processor.class.php',45],['backup/util/structure','backup_structure_processor.class.php',133],['admin/tool/lp/classes/output','related_competencies.php',47],['mod/quiz/classes/question/bank','custom_view.php',44],['files','renderer.php',1083],['lib/form','text.php',47],['lib/phpexcel/PHPExcel/Shared/trend','bestFitClass.php',398],['backup/cc','cc112moodle.php',59],['admin/tool/cohortroles/classes/output','cohort_role_assignments_table.php',45],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',46],['lib/google/src/Google/Service','Logging.php',39],['lib/lessphp/Tree','Expression.php',16],['mod/lti/classes/local/ltiservice','service_base.php',63],['lib/phpexcel/PHPExcel/Reader','HTML.php',118],['search/engine/solr/classes','schema.php',60],['backup/util/xml/parser/processors','simplified_parser_processor.class.php',46],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',50],['lib/adodb/drivers','adodb-ado5.inc.php',42],['lib/adodb/drivers','adodb-ado5.inc.php',380],['mod/assign/feedback/editpdf/classes','comment.php',58],['cache/classes','interfaces.php',473],['lib/phpexcel/PHPExcel/Worksheet','Protection.php',157],['repository/merlot','lib.php',37],['lib/adodb/drivers','adodb-firebird.inc.php',69],['backup/util/settings','backup_setting.class.php',43],['lib/adodb/drivers','adodb-fbsql.inc.php',28],['lib/adodb/drivers','adodb-fbsql.inc.php',167],['mnet/xmlrpc','serverlib.php',674],['webservice/soap','lib.php',45],['admin/tool/log/store/database/classes/log','store.php',47],['lib/google/src/Google/Service','Doubleclicksearch.php',43],['lib/form','passwordunmask.php',46],['lib/lessphp/Tree','Variable.php',20],['report/log/classes','renderable.php',96],['mod/lti/service/toolsettings/classes/local/resource','systemsettings.php',43],['question/classes/bank','view.php',70],['grade/report/singleview/classes/local/ui','range.php',38],['lib/simplepie/library/SimplePie/Cache','MySQL.php',80],['admin/roles/classes','define_role_table_basic.php',31],['backup/cc/cc_lib','cc_converter_resource.php',28],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',78],['blocks/rss_client','editfeed.php',36],['admin/tool/lpmigrate/classes/output','migrate_framework_results.php',55],['blocks/lp/classes/output','competencies_to_review_page.php',49],['lib/horde/framework/Horde/Crypt/Blowfish/Php','Base.php',318],['backup/util/loggers','base_logger.class.php',42],['backup/util/loggers','base_logger.class.php',187],['mod/assign/feedback/file','renderable.php',44],['backup/cc/cc_lib','cc_utils.php',313],['backup/cc/cc_lib','cc_utils.php',381],['backup/cc/cc_lib','cc_utils.php',437],['lib/adodb/drivers','adodb-db2.inc.php',66],['lib/adodb/drivers','adodb-db2.inc.php',731],['lib/adodb','adodb-xmlschema03.inc.php',136],['lib/adodb','adodb-xmlschema03.inc.php',270],['lib/adodb','adodb-xmlschema03.inc.php',678],['lib/adodb','adodb-xmlschema03.inc.php',823],['lib/adodb','adodb-xmlschema03.inc.php',1081],['lib/adodb','adodb-xmlschema03.inc.php',1399],['repository/youtube','lib.php',58],['lib/phpexcel/PHPExcel/Writer/PDF','mPDF.php',38],['auth/cas/CAS/CAS','GracefullTerminationException.php',48],['lib/adodb/drivers','adodb-sybase_ase.inc.php',25],['lib/adodb/drivers','adodb-sybase_ase.inc.php',115],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Background.php',20],['lib/adodb','adodb-memcache.lib.inc.php',53],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','FrameTarget.php',19],['lib/phpexcel/PHPExcel/Writer','Excel2007.php',118],['lib/minify/lib/MrClay/Cli','Arg.php',82],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter','Column.php',117],['lib/simplepie','moodle_simplepie.php',50],['lib/simplepie','moodle_simplepie.php',121],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','FontFamily.php',11],['lib/simplepie/library/SimplePie/Decode/HTML','Entities.php',80],['lib/spout/src/Spout/Common/Helper','FileSystemHelper.php',22],['lib/pear/HTML/QuickForm','button.php',37],['lib/google/src/Google/Service','Autoscaler.php',46],['lib/mustache/src/Mustache','Engine.php',63],['lib/google/src/Google/Http','MediaFileUpload.php',75],['lib/phpexcel/PHPExcel','Worksheet.php',327],['mod/assign','gradingtable.php',68],['lib/google/src/Google/Service','AdExchangeSeller.php',53],['question/engine/tests','helpers.php',582],['question/engine/tests','helpers.php',594],['question/engine/tests','helpers.php',608],['question/engine/tests','helpers.php',623],['question/engine/tests','helpers.php',637],['question/engine/tests','helpers.php',652],['question/engine/tests','helpers.php',665],['question/engine/tests','helpers.php',676],['question/engine/tests','helpers.php',1196],['repository/webdav','lib.php',38],['tag/classes/output','tagisstandard.php',39],['lib/google/src/Google/Service','Appsactivity.php',52],['badges/criteria','award_criteria_course.php',47],['lib','searchlib.php',53],['lib','searchlib.php',95],['lib/lessphp/Output','Mapped.php',39],['availability/classes','tree.php',118],['lib/lessphp/Tree','Javascript.php',20],['lib/horde/framework/Horde/Imap/Client','Cache.php',53],['lib/htmlpurifier/HTMLPurifier','AttrCollections.php',16],['lib/mustache/src/Mustache/Loader','InlineLoader.php',56],['repository/url','lib.php',46],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite3.php',293],['lib/lessphp/Tree','Ruleset.php',45],['tag/classes/output','tagindex.php',52],['backup/util/ui','backup_ui_stage.class.php',43],['backup/util/ui','backup_ui_stage.class.php',79],['backup/util/ui','backup_ui_stage.class.php',234],['backup/util/ui','backup_ui_stage.class.php',387],['backup/util/ui','backup_ui_stage.class.php',516],['backup/util/ui','backup_ui_stage.class.php',575],['grade/report/singleview/classes/local/screen','screen.php',67],['lib/tcpdf/include/barcodes','datamatrix.php',229],['lib/horde/framework/Horde/Imap/Client/Socket','Catenate.php',37],['lib/google/src/Google/Service','Prediction.php',51],['lib/classes/output','notification.php',101],['lib/lessphp/Tree','Unit.php',16],['backup/util/settings/course','course_backup_setting.class.php',25],['lib/spout/src/Spout/Writer','AbstractWriter.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','DenyElementDecorator.php',21],['lib','outputfactories.php',120],['lib','outputfactories.php',367],['lib','dtllib.php',66],['mod/assign','assignmentplugin.php',50],['mnet/service/enrol','locallib.php',48],['mnet/service/enrol','locallib.php',466],['mnet/service/enrol','locallib.php',537],['backup/cc/cc_lib','cc_version11.php',57],['availability/condition/completion/classes','condition.php',48],['admin/roles/classes','allow_override_page.php',31],['mod/workshop/allocation','lib.php',103],['lib/htmlpurifier/HTMLPurifier/AttrTransform','BoolToCSS.php',24],['lib/horde/framework/Horde/Imap/Client/Base','Mailbox.php',59],['lib/spout/src/Spout/Reader/Wrapper','SimpleXMLElement.php',23],['lib/google/src/Google/Service','SiteVerification.php',43],['lib/phpexcel/PHPExcel/Calculation','Function.php',64],['availability/classes','capability_checker.php',49],['lib/google/src/Google/Service','Drive.php',76],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',12],['lib/phpexcel/PHPExcel/Shared/JAMA','LUDecomposition.php',56],['lib','setuplib.php',67],['lib','setuplib.php',113],['lib','setuplib.php',165],['lib','setuplib.php',184],['lib','setuplib.php',199],['lib','setuplib.php',219],['lib','setuplib.php',249],['lib','setuplib.php',271],['lib','setuplib.php',287],['lib','setuplib.php',309],['lib','setuplib.php',328],['lib','setuplib.php',346],['lib/form','textarea.php',50],['webservice/soap','locallib.php',57],['availability/classes','info.php',55],['lib/tcpdf','tcpdf_barcodes_1d.php',58],['lib/spout/src/Spout/Reader/XLSX/Helper','SheetHelper.php',49],['filter/urltolink/tests','filter_test.php',209],['lib/simplepie/library/SimplePie','Category.php',81],['admin/tool/lp/classes/output','manage_competencies_page.php',65],['lib/markdown','Markdown.php',99],['mod/assign','locallib.php',160],['mod/assign','locallib.php',8131],['lib/adodb/drivers','adodb-ldap.inc.php',48],['lib/adodb/drivers','adodb-ldap.inc.php',297],['lib/editor/tinymce/plugins/spellchecker/classes/utils','JSON.php',32],['lib/editor/tinymce/plugins/spellchecker/classes/utils','JSON.php',373],['lib','odslib.class.php',42],['lib','odslib.class.php',124],['lib','odslib.class.php',422],['lib','odslib.class.php',827],['lib/horde/framework/Horde/Crypt/Blowfish','Base.php',56],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',36],['grade/report/singleview/classes/local/ui','checkbox_attribute.php',42],['lib/lessphp/Tree','Quoted.php',20],['mod/lesson','mod_form.php',36],['blocks/rss_client/classes/output','item.php',89],['lib/google/src/Google/Service','IdentityToolkit.php',38],['lib/horde/framework/Horde/Stream','Temp.php',25],['tag/classes/output','tagflag.php',39],['admin/tool/monitor/classes/output/managesubs','rules.php',56],['lib/htmlpurifier/HTMLPurifier/ChildDef','Table.php',57],['lib/behat/form_field','behat_form_field.php',59],['lib/phpexcel/PHPExcel/Worksheet/Drawing','Shadow.php',93],['lib/spout/src/Spout/Reader/ODS/Helper','CellValueFormatter.php',42],['tag/classes','collections_table.php',36],['lib/google/src/Google/Service','Spectrum.php',38],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Length.php',19],['admin/tool/lp/classes/output','user_competency_summary.php',49],['lib/phpexcel/PHPExcel','NamedRange.php',65],['lib/pear/HTML/QuickForm','image.php',36],['lib/htmlpurifier/HTMLPurifier/AttrDef/URI','Host.php',15],['lib/form','searchableselector.php',44],['lib/phpexcel/PHPExcel/Shared/JAMA','SingularValueDecomposition.php',52],['lib/adodb/drivers','adodb-oci805.inc.php',51],['lib/google/src/Google','Service.php',28],['lib/google/src/Google/IO','Abstract.php',50],['lib/spout/src/Spout/Writer/ODS/Internal','Worksheet.php',46],['lib/form','header.php',45],['question/type/randomsamatch/tests','helper.php',121],['mod/workshop/form/accumulative','lib.php',99],['lib/phpexcel/PHPExcel/Shared/trend','linearBestFitClass.php',89],['lib/form','submit.php',41],['report/log/classes','table_log.php',45],['admin/roles/classes','admins_potential_selector.php',30],['question/classes/engine/variants','least_used_strategy.php',51],['question/engine/upgrade','logger.php',42],['question/engine/upgrade','logger.php',87],['mod/data','lib.php',68],['mod/data','lib.php',2278],['mod/data','lib.php',2552],['mod/data','lib.php',2573],['backup/util/xml/parser/processors','grouped_parser_processor.class.php',67],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportPop3.php',26],['mod/scorm','renderer.php',129],['lib/phpunit/classes','advanced_testcase.php',45],['lib/spout/src/Spout/Reader/ODS','SheetIterator.php',41],['backup/cc/cc_lib','cc_version1.php',57],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','LinkTypes.php',21],['tag/classes','areas_table.php',36],['lib/phpexcel/PHPExcel/Shared/trend','powerBestFitClass.php',125],['lib/portfolio/formats/leap2a','lib.php',62],['lib/portfolio/formats/leap2a','lib.php',258],['lib/portfolio/formats/leap2a','lib.php',503],['lib/google/src/Google/Service','Proximitybeacon.php',42],['lib/pear','PEAR.php',139],['lib/pear','PEAR.php',818],['competency/classes/external','persistent_exporter.php',42],['lib/google/src/Google/Service','Groupssettings.php',40],['lib/phpexcel/PHPExcel/Reader','CSV.php',87],['lib/horde/framework/Horde/Exception','LastError.php',16],['lib/google/src/Google/Service','Directory.php',134],['lib/google/src/Google/Service','Fusiontables.php',48],['question/type/missingtype','edit_missingtype_form.php',38],['lib/google/src/Google/Service','AdSenseHost.php',49],['lib/lessphp/Tree','Directive.php',20],['auth/ldap','auth.php',119],['auth/cas/CAS/CAS','CookieJar.php',46],['lib/phpexcel/PHPExcel/CachedObjectStorage','Wincache.php',245],['availability/condition/date/classes','condition.php',52],['lib/horde/framework/Horde/Mime','Mail.php',93],['lib','outputactions.php',60],['lib','outputactions.php',91],['lib','outputactions.php',148],['lib/horde/framework/Horde/Crypt/Blowfish','Mcrypt.php',47],['lib/classes','string_manager_standard.php',53],['repository/skydrive','microsoftliveapi.php',50],['user/filters','globalrole.php',35],['enrol/lti/ims-blti','OAuth.php',16],['enrol/lti/ims-blti','OAuth.php',32],['enrol/lti/ims-blti','OAuth.php',187],['enrol/lti/ims-blti','OAuth.php',451],['course/classes/output','course_module_name.php',46],['lib/google/src/Google/Service','Plus.php',52],['lib/horde/framework/Horde/Mime','Mdn.php',35],['lib/pear/HTML/QuickForm','html.php',36],['repository/s3','S3.php',193],['repository/s3','S3.php',2018],['repository/s3','S3.php',2374],['lib/spout/src/Spout/Reader/XLSX/Helper','SharedStringsHelper.php',39],['question/classes/bank/search','hidden_condition.php',42],['lib/htmlpurifier/HTMLPurifier/ChildDef','Empty.php',22],['lib/pear/HTML/QuickForm','element.php',73],['question/classes/statistics/responses','analysis_for_subpart.php',50],['admin/tool/log/classes','setting_managestores.php',30],['lib/google/src/Google/Service','Mirror.php',49],['lib/adodb/drivers','adodb-db2ora.inc.php',80],['lib/minify/lib/HTTP','Encoder.php',75],['mod/feedback/classes','completion.php',47],['admin/tool/uploadcourse/classes','processor.php',122],['lib/lessphp','Parser.php',78],['lib/adodb/drivers','adodb-sapdb.inc.php',36],['lib/adodb/drivers','adodb-sapdb.inc.php',179],['lib/ddl','sql_generator.php',175],['lib/google/src/Google/Service','AndroidEnterprise.php',51],['admin/tool/lp/classes/output','template_competencies_page.php',70],['lib/horde/framework/Horde/Support','ObjectStub.php',29],['mod/assignment/backup/moodle1','lib.php',223],['blocks','edit_form.php',47],['lib/simplepie/library/SimplePie/Cache','Memcache.php',81],['mod/quiz/report/statistics','statistics_question_table.php',49],['mod/workshop/form/numerrors','lib.php',102],['mod/quiz/classes','repaginate.php',49],['lib/classes/session','memcached.php',51],['lib/phpexcel/PHPExcel/Shared/OLE/PPS','Root.php',43],['lib/phpexcel/PHPExcel/Writer/PDF','Core.php',206],['mod/workshop','mod_form.php',43],['mod/assign/feedback/editpdf/fpdi','pdf_context.php',48],['availability/condition/profile/classes','condition.php',73],['lib/horde/framework/Horde/Imap/Client','DateTime.php',29],['auth/cas/CAS/CAS','Client.php',862],['lib/xhprof','xhprof_moodle.php',788],['lib/dtl','file_xml_database_exporter.php',36],['course','lib.php',3061],['lib/adodb/drivers','adodb-mssqlpo.inc.php',54],['lib/xmldb','xmldb_table.php',49],['lib/adodb/perf','perf-postgres.inc.php',92],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Filter.php',15],['question/type/ddmarker','shapes.php',40],['question/type/ddmarker','shapes.php',203],['question/type/ddmarker','shapes.php',267],['question/type/ddmarker','shapes.php',332],['question/type/ddmarker','shapes.php',470],['mod/lti/classes/local/ltiservice','response.php',58],['backup/util/helper','restore_users_parser_processor.class.php',43],['lib/pear/HTML','Common.php',79],['mod/glossary','locallib.php',481],['lib/adodb/perf','perf-mssqlnative.inc.php',70],['lib/adodb/perf','perf-mssql.inc.php',70],['backup/util/plan','base_plan.class.php',39],['backup/util/plan','base_plan.class.php',215],['backup/util/plan','restore_task.class.php',32],['backup/util/plan','restore_task.class.php',121],['lib/classes/event','base.php',124],['lib/form','checkbox.php',46],['admin/roles/classes','permissions_table.php',38],['lib/pear/HTML/QuickForm','submit.php',37],['auth/fc','auth.php',37],['enrol/ldap','settingslib.php',32],['enrol/ldap','settingslib.php',90],['enrol/ldap','settingslib.php',204],['lib/minify/lib/Minify/Cache','Memcache.php',22],['lib/lessphp/Tree','Condition.php',18],['admin/tool/lp/classes/output','plans_page.php',59],['lib/mustache/src/Mustache','Autoloader.php',19],['lib/spout/src/Spout/Writer/XLSX/Internal','Worksheet.php',52],['lib/phpexcel/PHPExcel','Comment.php',93],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','AlphaValue.php',6],['lib/lessphp/Tree','Url.php',17],['mod/lesson','override_form.php',58],['lib/form','button.php',45],['admin/tool/lp/classes/output','manage_templates_page.php',56],['lib/google/src/Google/Service','Playmoviespartner.php',44],['backup/util/ui','base_ui_stage.class.php',67],['backup/cc/cc_lib','cc_converters.php',75],['lib/dtl','database_mover.php',33],['enrol','locallib.php',125],['enrol','locallib.php',1256],['enrol','locallib.php',1379],['enrol','locallib.php',1430],['enrol','locallib.php',1463],['lib/htmlpurifier/HTMLPurifier','URI.php',58],['backup/moodle2','restore_course_task.class.php',41],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',40],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',221],['lib','xmlize.php',31],['lib','googleapi.php',52],['lib','googleapi.php',243],['grade/report/singleview/classes/local/ui','element.php',47],['lib/html2text','lib.php',43],['user/filters','lib.php',52],['user/filters','lib.php',272],['auth/cas/CAS/CAS/PGTStorage','Db.php',122],['lib/classes/lock','db_record_lock_factory.php',61],['lib/pear/HTML/QuickForm','link.php',47],['backup/cc/cc_lib','cc_asssesment.php',290],['backup/cc/cc_lib','cc_asssesment.php',345],['backup/cc/cc_lib','cc_asssesment.php',364],['backup/cc/cc_lib','cc_asssesment.php',415],['backup/cc/cc_lib','cc_asssesment.php',476],['backup/cc/cc_lib','cc_asssesment.php',486],['backup/cc/cc_lib','cc_asssesment.php',561],['backup/cc/cc_lib','cc_asssesment.php',585],['backup/cc/cc_lib','cc_asssesment.php',635],['backup/cc/cc_lib','cc_asssesment.php',668],['backup/cc/cc_lib','cc_asssesment.php',693],['backup/cc/cc_lib','cc_asssesment.php',788],['backup/cc/cc_lib','cc_asssesment.php',814],['backup/cc/cc_lib','cc_asssesment.php',838],['backup/cc/cc_lib','cc_asssesment.php',965],['backup/cc/cc_lib','cc_asssesment.php',971],['backup/cc/cc_lib','cc_asssesment.php',986],['backup/cc/cc_lib','cc_asssesment.php',1003],['backup/cc/cc_lib','cc_asssesment.php',1017],['backup/cc/cc_lib','cc_asssesment.php',1045],['backup/cc/cc_lib','cc_asssesment.php',1186],['backup/cc/cc_lib','cc_asssesment.php',1263],['backup/cc/cc_lib','cc_asssesment.php',1317],['backup/cc/cc_lib','cc_asssesment.php',1389],['backup/cc/cc_lib','cc_asssesment.php',1451],['backup/cc/cc_lib','cc_asssesment.php',1558],['backup/cc/cc_lib','cc_asssesment.php',1620],['backup/cc/cc_lib','cc_asssesment.php',1648],['backup/cc/cc_lib','cc_asssesment.php',1716],['backup/cc/cc_lib','cc_asssesment.php',2155],['backup/cc/cc_lib','cc_asssesment.php',2264],['backup/cc/cc_lib','cc_asssesment.php',2469],['lib/phpunit/classes','hint_resultprinter.php',37],['lib/horde/framework/Horde/Mail/Transport','Mail.php',53],['auth/pop3','auth.php',35],['lib/adodb/drivers','adodb-oci8.inc.php',106],['lib/adodb/drivers','adodb-oci8.inc.php',1539],['lib/adodb/drivers','adodb-oci8.inc.php',1805],['lib/classes/session','database.php',52],['backup/util/ui','restore_ui_components.php',81],['backup/util/ui','restore_ui_components.php',287],['backup/util/ui','restore_ui_components.php',382],['question/classes/bank/search','category_condition.php',60],['lib/google/src/Google/Auth','AssertionCredentials.php',53],['backup/util/plan','restore_plan.class.php',43],['backup/util/plan','restore_plan.class.php',203],['backup/util/xml/parser/processors','findpaths_parser_processor.class.php',35],['lib/phpexcel/PHPExcel/CalcEngine','Logger.php',63],['lib/jabber/XMPP','Log.php',67],['lib/horde/framework/Horde/Imap/Client/Exception','ServerResponse.php',44],['lib/lessphp/Tree','Assignment.php',15],['lib/dtl','string_xml_database_importer.php',34],['admin/tool/lp/classes/output','manage_competency_frameworks_page.php',62],['question/type/calculated','question.php',188],['question/type/calculated','question.php',303],['repository/recent','lib.php',39],['grade/report/singleview/classes/local/ui','text_attribute.php',42],['admin/webservice','lib.php',38],['lib','coursecatlib.php',194],['lib','coursecatlib.php',2782],['lib/google/src/Google/Service','Cloudtrace.php',43],['lib','filterlib.php',73],['lib','filterlib.php',377],['lib','filterlib.php',456],['lib/classes/lock','lock_factory.php',39],['lib/filebrowser','file_info_context_course.php',39],['lib/filebrowser','file_info_context_course.php',492],['lib/filebrowser','file_info_context_course.php',596],['lib/filebrowser','file_info_context_course.php',745],['enrol','renderer.php',426],['enrol','renderer.php',723],['question/classes/statistics/questions','calculated_for_subquestion.php',57],['backup/moodle2','backup_format_plugin.class.php',40],['admin/tool/lp/classes','course_competency_rule_form_element.php',45],['auth/cas/CAS/CAS','ProxyTicketException.php',46],['lib/phpunit/classes','basic_testcase.php',39],['lib/spout/src/Spout/Reader/ODS','RowIterator.php',49],['backup/util/dbops','backup_dbops.class.php',37],['admin/tool/customlang','locallib.php',44],['admin/tool/customlang','locallib.php',405],['admin/tool/customlang','locallib.php',471],['backup/util/structure','backup_optigroup_element.class.php',51],['mod/quiz/report/grading','gradingsettings_form.php',44],['backup/util/plan','restore_step.class.php',32],['backup/util/plan','restore_step.class.php',104],['lib/form','hidden.php',44],['repository/filesystem','lib.php',48],['backup/controller','backup_controller.class.php',68],['backup/controller','backup_controller.class.php',409],['backup/util/helper','restore_log_rule.class.php',62],['tag/classes','tag.php',77],['lib/htmlpurifier/HTMLPurifier/AttrTransform','SafeParam.php',27],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',38],['lib/spout/src/Spout/Writer/Style','StyleBuilder.php',19],['lib/dml','sqlsrv_native_moodle_database.php',53],['user/filters','date.php',40],['auth/nologin','auth.php',35],['lib/google/src/Google','Model.php',35],['lib/horde/framework/Horde/Imap/Client/Socket','ClientSort.php',37],['lib/horde/framework/Horde/Imap/Client/Exception','SearchCharset.php',34],['lib/horde/framework/Horde/Support','StringStream.php',30],['lib/adodb/drivers','adodb-mysqli.inc.php',66],['lib/adodb/drivers','adodb-mysqli.inc.php',887],['lib/adodb/drivers','adodb-mysqli.inc.php',1193],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ImportantDecorator.php',21],['lib/form','questioncategory.php',46],['lib/mustache/src/Mustache','Template.php',29],['backup/util/structure','base_nested_element.class.php',44],['backup/util/structure','base_nested_element.class.php',258],['lib/google/src/Google/Logger','Abstract.php',123],['backup/cc/cc_lib','cc_general.php',38],['lib/phpexcel/PHPExcel','ReferenceHelper.php',58],['lib/pear/HTML/QuickForm','password.php',37],['lib/dml','moodle_transaction.php',40],['lib/phpexcel/PHPExcel/Reader','Excel2003XML.php',53],['lib/htmlpurifier/HTMLPurifier/AttrDef','Switch.php',29],['repository/flickr','lib.php',51],['lib/form','grading.php',57],['lib/classes/update','api.php',71],['backup/cc/cc_lib','cc_converter_lti.php',29],['backup/moodle2','backup_subplugin.class.php',44],['lib/portfolio','caller.php',67],['lib/classes/progress','display_if_slow.php',60],['lib/adodb/perf','perf-informix.inc.php',66],['lib/classes','chart_base.php',52],['lib/lessphp/Tree','Media.php',18],['lib/spout/src/Spout/Common/Escaper','XLSX.php',19],['grade/export/ods','grade_export_ods.php',24],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Length.php',23],['lib/google/src/Google/Service','Calendar.php',50],['lib/form','group.php',44],['lib/phpexcel/PHPExcel/Writer','OpenDocument.php',44],['lib/pear/HTML/QuickForm/Renderer','Object.php',75],['admin/tool/lp/classes/output','user_evidence_page.php',48],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',54],['grade/export/xls','grade_export_xls.php',24],['lib/classes/output','mustache_pix_helper.php',43],['lib/horde/framework/Horde/Imap/Client/Mailbox','List.php',46],['lib/google/src/Google/Auth','ComputeEngine.php',35],['cache/stores/session','lib.php',131],['lib/mustache/src/Mustache/Logger','StreamLogger.php',44],['admin/tool/log/store/database/backup/moodle2','backup_logstore_database_nested_element.php',43],['user','renderer.php',220],['lib/htmlpurifier/HTMLPurifier/ChildDef','Required.php',23],['availability/condition/grade/classes','condition.php',46],['lib/lessphp/Tree','RulesetCall.php',14],['blocks/rss_client/classes/output','feed.php',75],['lib/form','select.php',47],['lib/htmlpurifier/HTMLPurifier','ContentSets.php',33],['lib/lessphp/Visitor','toCSS.php',13],['lib','outputfragmentrequirementslib.php',40],['backup/util/ui','restore_moodleform.class.php',34],['lib/google/src/Google/Service','Cloudbilling.php',43],['lib/google/src/Google/Service','PlusDomains.php',72],['lib','externallib.php',37],['lib','externallib.php',531],['lib','externallib.php',562],['lib','externallib.php',593],['lib','externallib.php',622],['lib','externallib.php',648],['lib','externallib.php',778],['lib','externallib.php',813],['lib','externallib.php',984],['lib','externallib.php',1177],['blog','locallib.php',71],['blog','locallib.php',564],['blog','locallib.php',847],['blog','locallib.php',892],['blog','locallib.php',965],['blog','locallib.php',1016],['blog','locallib.php',1041],['blog','locallib.php',1051],['blog','locallib.php',1063],['blog','locallib.php',1084],['lib/phpexcel/PHPExcel/Worksheet','ColumnDimension.php',53],['auth/cas','auth.php',39],['lib','lexer.php',41],['lib','lexer.php',145],['lib','lexer.php',217],['lib/phpexcel/PHPExcel/Shared/JAMA','QRDecomposition.php',48],['lib/google/src/Google/Service','Exception.php',34],['lib/htmlpurifier/HTMLPurifier','Printer.php',21],['tag/classes/output','tagcloud.php',49],['lib/google/src/Google/Service','Storagetransfer.php',44],['user/filters','select.php',46],['cache/stores/mongodb','lib.php',116],['admin/tool/lp/classes/output','course_competencies_page.php',73],['lib/google/src/Google/Cache','Null.php',28],['lib','graphlib.php',1176],['lib/phpexcel/PHPExcel/Style','Protection.php',49],['lib/google/src/Google/Service','GamesConfiguration.php',42],['repository/dropbox','locallib.php',46],['lib/phpexcel/PHPExcel/Style','Alignment.php',100],['lib/htmlpurifier/HTMLPurifier','Language.php',63],['cache/stores/file','lib.php',117],['tag/classes/output','tagareashowstandard.php',41],['question/type/multianswer','edit_multianswer_form.php',63],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Bool.php',22],['mod/assign','renderable.php',41],['mod/assign','renderable.php',71],['mod/assign','renderable.php',103],['mod/assign','renderable.php',139],['mod/assign','renderable.php',191],['mod/assign','renderable.php',242],['mod/assign','renderable.php',291],['mod/assign','renderable.php',395],['mod/assign','renderable.php',531],['mod/assign','renderable.php',586],['mod/assign','renderable.php',670],['mod/assign','renderable.php',707],['mod/assign','renderable.php',747],['mod/assign','renderable.php',800],['mod/assign','renderable.php',854],['lib/form','selectwithlink.php',56],['backup/moodle2','backup_activity_task.class.php',45],['lib/phpmailer','class.phpmailer.php',633],['lib/horde/framework/Horde/Imap/Client/Data','AclRights.php',39],['auth/db','auth.php',36],['lib/lessphp/Tree','Value.php',14],['lib/form','course.php',62],['question/engine','questionattemptstep.php',97],['question/engine','questionattemptstep.php',608],['cohort','locallib.php',37],['cohort','locallib.php',101],['badges/criteria','award_criteria.php',127],['lib/adodb/perf','perf-mysql.inc.php',86],['cache/stores/memcached','lib.php',133],['grade/report/singleview/classes/local/ui','empty_element.php',38],['lib/google/src/Google/Service','AppState.php',40],['lib/adodb/drivers','adodb-odbc_oracle.inc.php',107],['lib/pear/HTML/QuickForm/Renderer','Default.php',139],['tag/classes/output','tag.php',46],['question','previewlib.php',122],['backup/util/loggers','database_logger.class.php',40],['mod/forum/classes','potential_subscriber_selector.php',47],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','InterchangeBuilder.php',15],['lib/phpexcel/PHPExcel/Reader','SYLK.php',67],['lib/form','submitlink.php',47],['backup/util/dbops','restore_dbops.class.php',1788],['lib/xmldb','xmldb_index.php',56],['question','category_class.php',58],['question','category_class.php',160],['lib/google/src/Google/Service','Webfonts.php',38],['webservice/xmlrpc','locallib.php',41],['admin/roles/classes','check_users_selector.php',38],['lib/htmlpurifier/HTMLPurifier/AttrTransform','ImgSpace.php',24],['user/profile/field/checkbox','field.class.php',33],['lib/form','cancel.php',47],['lib/google/src/Google/Service','Resourceviews.php',57],['lib/phpexcel/PHPExcel/Style','Font.php',100],['lib/portfolio','plugin.php',445],['calendar','lib.php',2003],['calendar','lib.php',2774],['mod/wiki','pagelib.php',93],['mod/wiki','pagelib.php',380],['mod/wiki','pagelib.php',981],['mod/wiki','pagelib.php',1190],['mod/wiki','pagelib.php',2194],['mod/wiki','pagelib.php',2422],['tag/classes/output','tagfeed.php',43],['tag/classes/output','tagareaenabled.php',38],['backup/util/xml/parser/processors','selective_like_parser_processor.class.php',35],['mod/workshop','locallib.php',183],['mod/workshop','locallib.php',2976],['mod/workshop','locallib.php',3411],['mod/workshop','locallib.php',3647],['mod/workshop','locallib.php',3889],['mod/workshop','locallib.php',3975],['mod/workshop','locallib.php',4060],['mod/workshop','locallib.php',4079],['lib/form','advcheckbox.php',48],['backup/cc/cc_lib','cc_assesment_sfib.php',27],['cohort/classes/output','cohortidnumber.php',37],['lib/adodb/drivers','adodb-ado.inc.php',42],['lib/adodb/drivers','adodb-ado.inc.php',346],['lib/form','filepicker.php',53],['mod/assign','adminlib.php',41],['mod/assign','adminlib.php',102],['lib/tests/fixtures','test_renderer_factory.php',41],['backup/cc/cc_lib','cc_converter_label.php',28],['lib/htmlpurifier/HTMLPurifier','Lexer.php',152],['grade/report/singleview','lib.php',69],['backup/cc/cc_lib','cc_converter_page.php',28],['lib/google/src/Google/Logger','Psr.php',39],['lib/simplepie/library/SimplePie/HTTP','Parser.php',131],['backup/util/plan','backup_step.class.php',32],['backup/util/plan','backup_step.class.php',55],['lib/lessphp/Tree','Import.php',30],['lib/jabber/XMPP','XMPP_Old.php',45],['lib/phpexcel/PHPExcel/Worksheet','Drawing.php',37],['lib/google/src/Google/Service','Classroom.php',60],['lib/phpexcel/PHPExcel/Chart/Renderer','jpgraph.php',875],['admin/tool/lp/classes/external','competency_path_exporter.php',38],['cohort/classes/output','cohortname.php',37],['grade/report/overview','lib.php',76],['lib/horde/framework/Horde/Mail/Rfc822','Address.php',66],['admin/roles/classes','admins_existing_selector.php',30],['lib/phpunit/classes','arraydataset.php',45],['question/engine','questionattempt.php',166],['question/engine','questionattempt.php',1532],['question/engine','questionattempt.php',1618],['question/engine','questionattempt.php',1703],['lib/horde/framework/Horde/Support','Uuid.php',23],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nil.php',27],['webservice/rest','lib.php',47],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooterDrawing.php',79],['backup/util/xml/output','memory_xml_output.class.php',37],['repository/flickr_public','image.php',34],['mod/lti/classes/local/ltiservice','resource_base.php',62],['admin/tool/lp/classes/output','template_plans_table.php',53],['mod/quiz','mod_form.php',48],['lib/simplepie/library/SimplePie','Caption.php',98],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Multiple.php',33],['lib/htmlpurifier/HTMLPurifier','PercentEncoder.php',20],['lib/phpexcel/PHPExcel/Calculation','ExceptionHandler.php',30],['lib/htmlpurifier/HTMLPurifier/Token','Tag.php',33],['backup/moodle2','backup_theme_plugin.class.php',61],['mod/chat','chatd.php',78],['mod/chat','chatd.php',103],['lib/phpexcel/PHPExcel','DocumentSecurity.php',65],['lib/htmlpurifier/HTMLPurifier','URIDefinition.php',21],['lib/spout/src/Spout/Writer/XLSX/Internal','Workbook.php',45],['lib/phpexcel/PHPExcel/Shared','XMLWriter.php',49],['lib/lessphp/Tree','Operation.php',19],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',461],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',1699],['backup/cc/cc_lib','cc_converter_folder.php',28],['backup/util/helper','restore_roles_parser_processor.class.php',39],['lib/simplepie/library/SimplePie','Locator.php',68],['lib/google/src/Google/Service','SQLAdmin.php',50],['lib/lessphp/Tree','DetachedRuleset.php',15],['admin/tool/assignmentupgrade','upgradableassignmentstable.php',49],['backup/cc','validator.php',30],['backup/cc','validator.php',116],['backup/cc','validator.php',202],['backup/cc','validator.php',230],['backup/cc','validator.php',236],['backup/cc','validator.php',242],['backup/cc','validator.php',248],['backup/cc','validator.php',254],['backup/cc','validator.php',260],['lib/horde/framework/Horde/Imap/Client/Interaction','Client.php',34],['mod/quiz','override_form.php',58],['auth/cas/CAS/CAS/PGTStorage','AbstractStorage.php',57],['lib/htmlpurifier/HTMLPurifier','Length.php',41],['backup/util/helper','restore_decode_rule.class.php',47],['backup/util/helper','restore_decode_rule.class.php',192],['lib/horde/framework/Horde/Imap/Client/Data','Sync.php',133],['lib/phpexcel/PHPExcel/Shared/trend','logarithmicBestFitClass.php',97],['lib/adodb/perf','perf-db2.inc.php',61],['lib/phpexcel/PHPExcel/Style','Supervisor.php',44],['lib/htmlpurifier/HTMLPurifier/AttrTransform','TargetBlank.php',17],['lib/ddl','database_manager.php',48],['lib/mustache/src/Mustache/Exception','UnknownFilterException.php',22],['admin/roles/classes','define_role_table_advanced.php',46],['lib/dml','oci_native_moodle_temptables.php',40],['lib/horde/framework/Horde/Stream','Existing.php',28],['enrol/manual','locallib.php',37],['enrol/manual','locallib.php',102],['availability/classes','multiple_messages.php',56],['lib/phpexcel/PHPExcel/Reader','Gnumeric.php',55],['admin/roles/classes','override_permissions_table_advanced.php',31],['lib/pear/Net','GeoIP.php',323],['lib/mustache/src/Mustache/Loader','ArrayLoader.php',31],['lib/form','modgrade.php',78],['admin/tool/log/store/database/backup/moodle2','restore_logstore_database_subplugin.class.php',40],['cache/classes','config.php',80],['lib/pear/HTML/QuickForm','hidden.php',37],['question/type/calculated','datasetitems_form.php',72],['lib/tests','navigationlib_test.php',554],['lib/tests','navigationlib_test.php',612],['lib/tests','navigationlib_test.php',639],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Number.php',18],['lib/tests','completionlib_test.php',882],['admin/tool/generator/classes','site_backend.php',58],['lib/jabber/XMPP','XMLStream.php',171],['lib/simplepie/library/SimplePie','Sanitize.php',75],['cache/classes','factory.php',149],['lib/minify/lib/Minify/Cache','WinCache.php',20],['user/classes/output/myprofile','node.php',82],['lib/horde/framework/Horde/Stream','TempString.php',40],['lib/adodb/drivers','adodb-borland_ibase.inc.php',83],['mod/forum','locallib.php',55],['mod/forum','locallib.php',419],['mod/lti/service/memberships/classes/local/resource','contextmemberships.php',44],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter/Column','Rule.php',262],['lib/classes/update','code_manager.php',57],['search/engine/solr/classes','engine.php',103],['lib/horde/framework/Horde/Imap/Client/Interaction/Server','Tagged.php',36],['lib/google/src/Google/Service','Compute.php',89],['lib/phpexcel/PHPExcel/Style','Borders.php',113],['lib','completionlib.php',243],['lib/google/src/Google/Service','Pubsub.php',44],['lib/adodb/drivers','adodb-ads.inc.php',69],['lib/adodb/drivers','adodb-ads.inc.php',657],['lib/markdown','MarkdownExtra.php',56],['lib/minify/lib/Minify/Cache','XCache.php',22],['lib/google/src/Google/Service','YouTube.php',75],['lib/lessphp','Functions.php',15],['auth/cas/CAS/CAS','AuthenticationException.php',53],['mod/quiz','locallib.php',1923],['competency/classes/external','stored_file_exporter.php',45],['user/filters','checkbox.php',51],['backup/moodle2','restore_settingslib.php',86],['backup/moodle2','restore_settingslib.php',149],['lib/htmlpurifier/HTMLPurifier/Node','Element.php',39],['lib/pear/HTML/QuickForm','date.php',260],['lib/lessphp/SourceMap','Generator.php',82],['backup/util/plan','base_step.class.php',35],['backup/util/plan','base_step.class.php',127],['mod/lti/service/memberships/classes/local/service','memberships.php',50],['lib/google/src/Google/Cache','Apc.php',37],['backup/util/ui','restore_ui_stage.class.php',42],['backup/util/ui','restore_ui_stage.class.php',265],['backup/util/ui','restore_ui_stage.class.php',452],['backup/util/ui','restore_ui_stage.class.php',592],['backup/util/ui','restore_ui_stage.class.php',704],['backup/util/ui','restore_ui_stage.class.php',852],['backup/util/ui','restore_ui_stage.class.php',959],['backup/util/ui','restore_ui_stage.class.php',1100],['lib/pear/Auth','RADIUS.php',120],['lib/pear/Auth','RADIUS.php',579],['lib/pear/Auth','RADIUS.php',672],['lib/pear/Auth','RADIUS.php',879],['lib/adodb/drivers','adodb-ado_access.inc.php',46],['admin/tool/xmldb/actions','XMLDBAction.class.php',56],['backup/converter/moodle1','handlerlib.php',120],['backup/converter/moodle1','handlerlib.php',1710],['backup/converter/moodle1','handlerlib.php',1902],['backup/converter/moodle1','handlerlib.php',2155],['backup/controller','restore_controller.class.php',63],['backup/controller','restore_controller.class.php',519],['lib/google/src/Google/Http','Request.php',58],['lib/google/src/Google/Service','Dfareporting.php',99],['lib/google/src/Google/Service','Manager.php',60],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',73],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','Validator.php',30],['lib/google/src/Google/Service','CloudMonitoring.php',45],['lib/editor/tinymce/plugins/spellchecker/classes','SpellChecker.php',11],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',44],['lib/horde/framework/Horde/Mail/Transport','Sendmail.php',65],['lib','webdavlib.php',84],['lib/dml','pgsql_native_moodle_recordset.php',43],['lib/horde/framework/Horde/Support','Guid.php',24],['lib/mustache/src/Mustache','LambdaHelper.php',25],['question/engine/upgrade/tests','helper.php',45],['admin/tool/uploadcourse/classes','tracker.php',72],['grade/report/user','lib.php',188],['lib/adodb/drivers','adodb-sqlanywhere.inc.php',156],['auth/cas/CAS/CAS','OutOfSequenceBeforeClientException.php',47],['backup/util/plan','base_task.class.php',40],['backup/util/plan','base_task.class.php',277],['lib/adodb/drivers','adodb-db2oci.inc.php',220]], 1102],
'get_manual_related_tags': ['get_manual_related_tags', 'Returns tags that this tag was manually set as related to ', [['tag/classes','tag.php',1134]], 6],
'get_display_name': ['get_display_name', 'Returns the formatted name of the item for the complete form or response view ', [['mod/feedback/item','feedback_item_class.php',149],['mod/feedback/item/label','lib.php',167],['tag/classes','tag.php',118],['mod/feedback/item/captcha','lib.php',101]], 18],
'add_related_tags': ['add_related_tags', 'Adds to the list of related tags without removing existing ', [['tag/classes','tag.php',1066]], 2],
'get_field': ['get_field', 'Gets an instance of the form field. ', [['lib/behat','behat_field_manager.php',248],['mod/quiz/report/statistics/classes','calculated.php',109],['lib/dml','moodle_database.php',1546],['user/filters','lib.php',124]], 536],
'file_rewrite_pluginfile_urls': ['file_rewrite_pluginfile_urls', 'Convert encoded URLs in $text from the @@PLUGINFILE@@/... form to an actual URL. Passing a new option reverse = true in the $options var will make the function to convert actual URLs in $text to encoded URLs in the @@PLUGINFILE@@ form. ', [['lib','filelib.php',446]], 96],
'get_view_url': ['get_view_url', 'The URL to use for the specified course (with section) ', [['course/format/weeks','lib.php',89],['course/format','lib.php',398],['course/format','lib.php',1124],['course/format','formatlegacy.php',72],['course/format/social','lib.php',38],['course/format/singleactivity','lib.php',39],['course/format/topics','lib.php',86],['tag/classes','tag.php',409]], 10],
'set_related_tags': ['set_related_tags', 'Sets the list of tags related to this one. ', [['tag/classes','tag.php',1027]], 13],
'join': ['join', 'Join a room. For internal use by the Games SDK only. Calling this method directly is unsupported. (rooms.join) ', [['lib/google/src/Google/Service','Games.php',1716],['lib/google/src/Google/Service','Games.php',2100]], 1030],
'trigger': ['trigger', '', [['lib/evalmath','evalmath.class.php',448],['lib/classes/event','base.php',765]], 964],
'move_context': ['move_context', 'Allows to move all tag instances from one context to another ', [['tag/classes','tag.php',847]], 1],
'get_by_id': ['get_by_id', 'Returns the tag collection object ', [['tag/classes','collection.php',80],['tag/classes','area.php',73]], 4],
'clean_param': ['clean_param', 'Used by {@link optional_param()} and {@link required_param()} to clean the variables and/or cast to specific types, based on an options field. <code> $course->format = clean_param($course->format, PARAM_ALPHA); $selectedgradeitem = clean_param($selectedgradeitem, PARAM_INT); </code> ', [['lib','moodlelib.php',769]], 635],
'sesskey': ['sesskey', 'Makes sure that $USER->sesskey exists, if $USER itself exists. It sets a new sesskey if one does not already exist, but does not overwrite existing sesskeys. Returns the sesskey string if $USER exists, or boolean false if not. ', [['lib','sessionlib.php',28]], 641],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',922],['lib','accesslib.php',344]], 2064],
'combine_tags': ['combine_tags', 'Combines several other tags into this one ', [['tag/classes','tag.php',1514]], 6],
'get_correlated_tags': ['get_correlated_tags', 'Returns the correlated tags of a tag, retrieved from the tag_correlation table. ', [['tag/classes','tag.php',1092]], 11],
'guess_by_name': ['guess_by_name', 'Looking in all tag collections for the tag with the given name ', [['tag/classes','tag.php',269]], 4],
'delete_instance_as_record': ['delete_instance_as_record', 'Deletes the tag instance given the record from tag_instance DB table ', [['tag/classes','tag.php',439]], 5],
'delete_instance': ['delete_instance', 'Delete all data related to a given workshop module instance ', [['mod/workshop/eval','lib.php',59],['mod/workshop/allocation/scheduled','lib.php',200],['mod/workshop/eval/best','lib.php',125],['mod/workshop/form','lib.php',118],['lib','enrollib.php',1849],['mod/workshop/allocation/random','lib.php',243],['mod/assign/submission/file','locallib.php',447],['mod/workshop/form/rubric','lib.php',405],['mod/assign/feedback/comments','locallib.php',485],['mod/workshop/form/comments','lib.php',360],['mod/workshop/allocation/manual','lib.php',349],['lib','accesslib.php',6111],['mod/assign','assignmentplugin.php',525],['mod/workshop/allocation','lib.php',62],['mod/assign','locallib.php',715],['mod/workshop/form/accumulative','lib.php',375],['mod/workshop/form/numerrors','lib.php',394],['mod/assign/submission/onlinetext','locallib.php',550],['mod/assign/feedback/file','locallib.php',320],['mod/assign/feedback/editpdf','locallib.php',324],['tag/classes','tag.php',473],['enrol/lti','lib.php',145]], 37],
'delete_instances': ['delete_instances', 'Bulk delete all tag instances for a component or tag area ', [['tag/classes','tag.php',500]], 7],
'record_exists': ['record_exists', 'Check if a record exists by ID. ', [['competency/classes','persistent.php',842],['lib/dml','moodle_database.php',1817]], 901],
'get_collections': ['get_collections', 'Returns the list of tag collections defined in the system. ', [['tag/classes','collection.php',39],['badges/lib','backpacklib.php',93]], 18],
'get_links': ['get_links', 'Get all links for the feed ', [['lib/simplepie/library','SimplePie.php',2319],['lib/simplepie/library/SimplePie','Source.php',385],['lib/simplepie/library/SimplePie','Item.php',966],['plagiarism','lib.php',51],['tag/classes','tag.php',1319],['lib/simplepie/library/SimplePie','Locator.php',264]], 6],
'add_item_tag': ['add_item_tag', 'Adds a tag to an item, without overwriting the current tags. ', [['tag/classes','tag.php',748]], 14],
'remove_all_item_tags': ['remove_all_item_tags', 'Removes all tags from an item. ', [['tag/classes','tag.php',732]], 11],
'is_item_tagged_with': ['is_item_tagged_with', 'Determine if an item is tagged with a specific tag ', [['tag/classes','tag.php',1241]], 5],
'get_file_storage': ['get_file_storage', 'Returns local file storage instance ', [['lib','moodlelib.php',6144]], 546],
'reset_flag': ['reset_flag', 'Remove the inappropriate flag on a tag. ', [['tag/classes','tag.php',997]], 4],
'fullclone': ['fullclone', 'This function will make a complete copy of anything it\'s given, regardless of whether it\'s an object or not. ', [['lib','moodlelib.php',8726]], 26],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pdo_moodle_database.php',461],['lib/dml','oci_native_moodle_database.php',1404],['lib/dml','pgsql_native_moodle_database.php',1089],['lib/dml','mssql_native_moodle_database.php',1067],['lib/dml','mysqli_native_moodle_database.php',1405],['lib/dml','sqlsrv_native_moodle_database.php',1148],['lib/dml/tests','dml_test.php',5551]], 650],
'get_formatted_description': ['get_formatted_description', 'Formats the definition description for display on page ', [['grade/grading/form','lib.php',368],['grade/grading/form/rubric','lib.php',462],['tag/classes','tag.php',1305],['grade/grading/form/guide','lib.php',468]], 8],
'is_enabled': ['is_enabled', 'Tools cannot be disabled. ', [['lib/classes/plugininfo','tool.php',39],['admin/tool/recyclebin/classes','category_bin.php',54],['admin/tool/log/classes/plugininfo','logstore.php',35],['admin/tool/recyclebin/classes','course_bin.php',54],['mod/assign/feedback/offline','locallib.php',380],['admin/tool/recyclebin/classes','base_bin.php',38],['lib','adminlib.php',1955],['search/classes','base.php',190],['lib','medialib.php',318],['lib','medialib.php',635],['lib','medialib.php',1268],['admin/tool/health','index.php',393],['lib/classes/plugininfo','mnetservice.php',33],['lib/classes/message/inbound','manager.php',37],['mod/assignment/classes/plugininfo','assignment.php',32],['competency/classes','api.php',49],['mod/assign','assignmentplugin.php',223],['lib/classes/plugininfo','orphaned.php',37],['search/tests/fixtures','mock_search_area.php',38],['tag/classes','area.php',106],['lib/classes/plugininfo','base.php',383],['mod/assign/feedback/editpdf','locallib.php',340],['tag/classes','tag.php',1269],['mod/assign/submission/comments','locallib.php',172],['lib','completionlib.php',269]], 276],
'isguestuser': ['isguestuser', 'Determines if a user is logged in as real guest user with username \'guest\'. ', [['lib','accesslib.php',1923]], 260],
'get_tag_index': ['get_tag_index', 'Retrieves contents of tag area for the tag/index.php page ', [['tag/classes','tag.php',1280]], 2],
'delete_records': ['delete_records', 'Delete the records from a table where all the given conditions met. If conditions not specified, table is truncated. ', [['lib/dml','sqlite3_pdo_moodle_database.php',345],['lib/dml','moodle_database.php',1864]], 773],
'add': ['add', 'Add HashTable item ', [['lib/phpexcel/PHPExcel','HashTable.php',78],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',95],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',109],['lib/google/src/Google/Http','Batch.php',52],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',37],['lib','csslib.php',1508],['lib/horde/framework/Horde/Mail/Rfc822','List.php',116],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',33],['lib/horde/framework/Horde/Support','ConsistentHash.php',148],['lib/horde/framework/Horde','Variables.php',297],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',29],['lib','outputcomponents.php',2705],['lib','outputcomponents.php',3380],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',436],['lib','adminlib.php',735],['lib','adminlib.php',894],['lib','adminlib.php',1446],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',27],['lib/xhprof/xhprof_html/jquery','jquery-1.2.6.js',3450],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',80],['lib/google/src/Google/Service','Webmasters.php',436],['lib','navigationlib.php',304],['lib','navigationlib.php',761],['lib','navigationlib.php',3305],['lib','navigationlib.php',3583],['lib/horde/framework/Horde/Imap/Client','Ids.php',155],['backup/cc/cc_lib/gral_lib','cssparser.php',121],['lib/xhprof/xhprof_html/jquery','jquery.autocomplete.js',428],['lib/horde/framework/Horde','Stream.php',116],['comment','lib.php',679],['lib/mustache/src/Mustache','HelperCollection.php',56],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',207],['backup/cc/cc_lib','cc_utils.php',395],['backup/cc/cc_lib','cc_utils.php',454],['lib/lessphp/Output','Mapped.php',50],['lib','licenselib.php',32],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',50],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',74],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',14],['lib/horde/framework/Horde/Mail/Rfc822','GroupList.php',25],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',31],['tag/classes','tag.php',152],['blog','locallib.php',242],['lib/classes','notification.php',50],['lib/lessphp','Output.php',18],['tag/classes/output','tagfeed.php',61],['backup/cc','validator.php',51],['lib/horde/framework/Horde/Stream','TempString.php',118],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',11]], 6188],
'delete_tags': ['delete_tags', 'Delete one or more tag, and all their instances if there are any left. ', [['tag/classes','tag.php',1369]], 8],
'get_field_sql': ['get_field_sql', 'Get a single field value (first field) using a SQL statement. ', [['lib/dml','moodle_database.php',1588]], 138],
'get_recordset_sql': ['get_recordset_sql', 'Get a number of records as an moodle_recordset.  $sql must be a complete SQL query. Since this method is a little less readable, use of it should be restricted to code where it\'s possible there might be large datasets being returned.  For known small datasets use get_records_sql - it leads to simpler code. ', [['lib/dml','pdo_moodle_database.php',252],['lib/dml','oci_native_moodle_database.php',1106],['lib/dml','pgsql_native_moodle_database.php',688],['lib/dml','mssql_native_moodle_database.php',736],['lib/dml','mysqli_native_moodle_database.php',993],['lib/dml','sqlsrv_native_moodle_database.php',811],['lib/dml/tests','dml_test.php',5544]], 283],
'get_manager': ['get_manager', 'Returns the sql generator used for db manipulation. Used mostly in upgrade.php scripts. ', [['lib/dml','moodle_database.php',1080]], 229],
'get': ['get', 'Retrieves a variable reference from the context. ', [['lib/htmlpurifier/HTMLPurifier','Context.php',36],['cache/stores/static','lib.php',220],['cache','disabledlib.php',55],['search/classes','document.php',299],['lib/lessphp','Cache.php',27],['lib/google/src/Google/Service','DataTransfer.php',162],['lib/google/src/Google/Service','DataTransfer.php',208],['lib/minify/lib','JSMinPlus.php',1827],['lib/google/src/Google/Service','AdSense.php',1076],['lib/google/src/Google/Service','AdSense.php',1155],['lib/google/src/Google/Service','AdSense.php',1303],['lib/google/src/Google/Service','AdSense.php',1519],['lib/google/src/Google/Service','AdSense.php',1631],['lib/google/src/Google/Service','AdSense.php',1773],['lib/google/src/Google/Service','AdSense.php',2047],['lib/google/src/Google/Service','Replicapool.php',420],['lib/google/src/Google/Service','Replicapool.php',575],['lib/google/src/Google/Service','Tasks.php',323],['lib/google/src/Google/Service','Tasks.php',442],['lib/google/src/Google/Service','Partners.php',362],['lib/google/src/Google/Service','AndroidPublisher.php',1247],['lib/google/src/Google/Service','AndroidPublisher.php',1349],['lib/google/src/Google/Service','AndroidPublisher.php',1510],['lib/google/src/Google/Service','AndroidPublisher.php',1573],['lib/google/src/Google/Service','AndroidPublisher.php',1796],['lib/google/src/Google/Service','AndroidPublisher.php',1884],['lib/google/src/Google/Service','AndroidPublisher.php',1948],['lib/google/src/Google/Service','AndroidPublisher.php',2098],['lib/google/src/Google/Service','AndroidPublisher.php',2223],['lib/google/src/Google/Service','AndroidPublisher.php',2293],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',146],['lib/google/src/Google/Service','YouTubeReporting.php',273],['lib/google/src/Google/Service','YouTubeReporting.php',326],['lib/google/src/Google/Service','Reseller.php',295],['lib/google/src/Google/Service','Reseller.php',458],['lib/google/src/Google/Cache','Memcache.php',74],['lib','filelib.php',3382],['lib','filelib.php',3630],['lib/google/src/Google/Service','Computeaccounts.php',432],['lib/google/src/Google/Service','Computeaccounts.php',512],['lib/google/src/Google/Service','Computeaccounts.php',683],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',64],['lib/google/src/Google/Service','MapsEngine.php',1530],['lib/google/src/Google/Service','MapsEngine.php',1709],['lib/google/src/Google/Service','MapsEngine.php',2006],['lib/google/src/Google/Service','MapsEngine.php',2268],['lib/google/src/Google/Service','MapsEngine.php',2360],['lib/google/src/Google/Service','MapsEngine.php',2666],['lib/google/src/Google/Service','MapsEngine.php',2927],['lib/google/src/Google/Service','MapsEngine.php',3118],['lib/google/src/Google/Cache','File.php',47],['cache/classes','dummystore.php',141],['lib/google/src/Google/Service','Dns.php',307],['lib/google/src/Google/Service','Dns.php',393],['lib/google/src/Google/Service','Dns.php',444],['cache/classes','loaders.php',278],['cache/classes','loaders.php',1422],['cache/classes','loaders.php',1731],['lib/google/src/Google/Service','Appengine.php',320],['lib/google/src/Google/Service','Appengine.php',368],['lib/google/src/Google/Service','Appengine.php',472],['lib/google/src/Google/Service','Appengine.php',525],['lib/google/src/Google/Service','Urlshortener.php',109],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',74],['lib/google/src/Google/Service','AdExchangeBuyer.php',759],['lib/google/src/Google/Service','AdExchangeBuyer.php',829],['lib/google/src/Google/Service','AdExchangeBuyer.php',870],['lib/google/src/Google/Service','AdExchangeBuyer.php',952],['lib/google/src/Google/Service','AdExchangeBuyer.php',1041],['lib/google/src/Google/Service','AdExchangeBuyer.php',1111],['lib/google/src/Google/Service','AdExchangeBuyer.php',1251],['lib/google/src/Google/Service','AdExchangeBuyer.php',1293],['lib/google/src/Google/Service','AdExchangeBuyer.php',1417],['lib/google/src/Google/Service','AdExchangeBuyer.php',1471],['lib/google/src/Google/Service','AdExchangeBuyer.php',1576],['lib/google/src/Google/Service','Books.php',1456],['lib/google/src/Google/Service','Books.php',1625],['lib/google/src/Google/Service','Books.php',1677],['lib/google/src/Google/Service','Books.php',1752],['lib/google/src/Google/Service','Books.php',2086],['lib/google/src/Google/Service','Books.php',2205],['lib/google/src/Google/Service','Books.php',2262],['lib/google/src/Google/Service','Books.php',2345],['lib/google/src/Google/Service','Books.php',2418],['lib/google/src/Google/Service','Books.php',2450],['lib/google/src/Google/Service','Oauth2.php',165],['lib/google/src/Google/Service','Oauth2.php',202],['lib/google/src/Google/Service','Analytics.php',1988],['lib/google/src/Google/Service','Analytics.php',2037],['lib/google/src/Google/Service','Analytics.php',2084],['lib/google/src/Google/Service','Analytics.php',2308],['lib/google/src/Google/Service','Analytics.php',2422],['lib/google/src/Google/Service','Analytics.php',2550],['lib/google/src/Google/Service','Analytics.php',2670],['lib/google/src/Google/Service','Analytics.php',2763],['lib/google/src/Google/Service','Analytics.php',2889],['lib/google/src/Google/Service','Analytics.php',3108],['lib/google/src/Google/Service','Analytics.php',3245],['lib/google/src/Google/Service','Analytics.php',3336],['lib/google/src/Google/Service','Analytics.php',3422],['lib/google/src/Google/Service','Analytics.php',3533],['lib/google/src/Google/Service','Coordinate.php',509],['lib/google/src/Google/Service','Coordinate.php',689],['lib','oauthlib.php',302],['lib/horde/framework/Horde/Support','ConsistentHash.php',69],['lib/google/src/Google/Service','DeploymentManager.php',468],['lib/google/src/Google/Service','DeploymentManager.php',632],['lib/google/src/Google/Service','DeploymentManager.php',693],['lib/google/src/Google/Service','DeploymentManager.php',752],['lib/google/src/Google/Service','Blogger.php',945],['lib/google/src/Google/Service','Blogger.php',976],['lib/google/src/Google/Service','Blogger.php',1080],['lib/google/src/Google/Service','Blogger.php',1199],['lib/google/src/Google/Service','Blogger.php',1241],['lib/google/src/Google/Service','Blogger.php',1382],['lib/google/src/Google/Service','Blogger.php',1465],['lib/google/src/Google/Service','Blogger.php',1686],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',981],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',16595],['question/engine','states.php',116],['lib/google/src/Google/Service','Dataflow.php',292],['lib/horde/framework/Horde','Variables.php',135],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',58],['competency/classes','persistent.php',86],['lib/google/src/Google/Service','CloudUserAccounts.php',542],['lib/google/src/Google/Service','CloudUserAccounts.php',643],['lib/google/src/Google/Service','CloudUserAccounts.php',908],['lib/google/src/Google/Service','Cloudresourcemanager.php',248],['lib/google/src/Google/Service','Cloudresourcemanager.php',427],['lib/editor/tinymce/classes','plugin.php',447],['lib/simplepie/library/SimplePie/Parse','Date.php',567],['lib/google/src/Google/Service','TagManager.php',950],['lib/google/src/Google/Service','TagManager.php',1036],['lib/google/src/Google/Service','TagManager.php',1128],['lib/google/src/Google/Service','TagManager.php',1280],['lib/google/src/Google/Service','TagManager.php',1373],['lib/google/src/Google/Service','TagManager.php',1467],['lib/google/src/Google/Service','TagManager.php',1561],['lib/google/src/Google/Service','TagManager.php',1711],['mod/lesson','locallib.php',3248],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',163],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',34],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',68],['lib/google/src/Google/Service','Replicapoolupdater.php',338],['lib/google/src/Google/Service','Replicapoolupdater.php',489],['lib/google/src/Google/Service','Bigquery.php',552],['lib/google/src/Google/Service','Bigquery.php',668],['lib/google/src/Google/Service','Bigquery.php',879],['lib/google/src/Google/Service','ShoppingContent.php',1066],['lib/google/src/Google/Service','ShoppingContent.php',1183],['lib/google/src/Google/Service','ShoppingContent.php',1283],['lib/google/src/Google/Service','ShoppingContent.php',1346],['lib/google/src/Google/Service','ShoppingContent.php',1464],['lib/google/src/Google/Service','ShoppingContent.php',1578],['lib/google/src/Google/Service','ShoppingContent.php',1773],['lib/google/src/Google/Service','ShoppingContent.php',1986],['lib/google/src/Google/Service','ShoppingContent.php',2063],['lib/google/src/Google/Service','Webmasters.php',371],['lib/google/src/Google/Service','Webmasters.php',464],['lib/google/src/Google/Service','Webmasters.php',540],['lib','navigationlib.php',384],['lib','navigationlib.php',836],['lib','navigationlib.php',2704],['lib','navigationlib.php',3139],['lib/google/src/Google/Service','Clouddebugger.php',399],['lib/htmlpurifier/HTMLPurifier','Config.php',161],['lib/portfolio','exporter.php',134],['lib/google/src/Google/Service','Container.php',329],['lib/google/src/Google/Service','Container.php',396],['backup/cc/cc_lib/gral_lib','cssparser.php',147],['lib/horde/framework/Horde/Support','Array.php',30],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',46],['lib/google/src/Google/Service','Storage.php',1059],['lib/google/src/Google/Service','Storage.php',1175],['lib/google/src/Google/Service','Storage.php',1349],['lib/google/src/Google/Service','Storage.php',1476],['lib/google/src/Google/Service','Storage.php',1709],['cache/stores/memcache','lib.php',312],['lib/google/src/Google/Service','Genomics.php',660],['lib/google/src/Google/Service','Genomics.php',749],['lib/google/src/Google/Service','Genomics.php',918],['lib/google/src/Google/Service','Genomics.php',1007],['lib/google/src/Google/Service','Genomics.php',1185],['lib/google/src/Google/Service','Genomics.php',1268],['lib/google/src/Google/Service','Genomics.php',1340],['lib/google/src/Google/Service','Genomics.php',1475],['lib/google/src/Google/Service','Games.php',1220],['lib/google/src/Google/Service','Games.php',1339],['lib/google/src/Google/Service','Games.php',1441],['lib/google/src/Google/Service','Games.php',1699],['lib/google/src/Google/Service','Games.php',1806],['lib/google/src/Google/Service','Games.php',1948],['lib/google/src/Google/Service','Games.php',2082],['lib/google/src/Google/Service','Licensing.php',239],['lib/google/src/Google/Service','Fitness.php',417],['lib/google/src/Google/Service','Fitness.php',543],['lib/google/src/Google/Service','Reports.php',375],['lib/google/src/Google/Service','Reports.php',409],['lib/google/src/Google/Service','Gmail.php',779],['lib/google/src/Google/Service','Gmail.php',937],['lib/google/src/Google/Service','Gmail.php',1030],['lib/google/src/Google/Service','Gmail.php',1206],['lib/google/src/Google/Service','Gmail.php',1250],['lib/google/src/Google/Service','Taskqueue.php',264],['lib/google/src/Google/Service','Taskqueue.php',308],['lib/mustache/src/Mustache','HelperCollection.php',81],['cache/classes','interfaces.php',41],['lib/google/src/Google/Service','Doubleclicksearch.php',257],['lib/google/src/Google/Service','Doubleclicksearch.php',381],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',105],['lib/google/src/Google/Service','Autoscaler.php',331],['lib/google/src/Google/Service','Autoscaler.php',445],['lib/google/src/Google/Service','AdExchangeSeller.php',444],['lib/google/src/Google/Service','AdExchangeSeller.php',552],['lib/google/src/Google/Service','AdExchangeSeller.php',666],['lib/horde/framework/Horde/Imap/Client','Cache.php',88],['lib/google/src/Google/Service','Prediction.php',276],['lib/behat/classes','behat_context_helper.php',63],['lib/google/src/Google/Service','SiteVerification.php',152],['lib/google/src/Google/Service','Drive.php',1333],['lib/google/src/Google/Service','Drive.php',1369],['lib/google/src/Google/Service','Drive.php',1422],['lib/google/src/Google/Service','Drive.php',1536],['lib/google/src/Google/Service','Drive.php',1617],['lib/google/src/Google/Service','Drive.php',1792],['lib/google/src/Google/Service','Drive.php',2054],['lib/google/src/Google/Service','Drive.php',2124],['lib/google/src/Google/Service','Drive.php',2256],['lib/google/src/Google/Service','Drive.php',2350],['lib/google/src/Google/Service','Drive.php',2418],['lib/google/src/Google/Service','Drive.php',2537],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',79],['lib/google/src/Google/Service','Proximitybeacon.php',348],['lib/google/src/Google/Service','Groupssettings.php',108],['lib/google/src/Google/Service','Directory.php',1698],['lib/google/src/Google/Service','Directory.php',1766],['lib/google/src/Google/Service','Directory.php',1860],['lib/google/src/Google/Service','Directory.php',1930],['lib/google/src/Google/Service','Directory.php',2003],['lib/google/src/Google/Service','Directory.php',2072],['lib/google/src/Google/Service','Directory.php',2238],['lib/google/src/Google/Service','Directory.php',2365],['lib/google/src/Google/Service','Directory.php',2435],['lib/google/src/Google/Service','Directory.php',2531],['lib/google/src/Google/Service','Directory.php',2666],['lib/google/src/Google/Service','Directory.php',2745],['lib/google/src/Google/Service','Directory.php',2850],['lib/google/src/Google/Service','Directory.php',2954],['lib/google/src/Google/Service','Directory.php',3012],['lib/google/src/Google/Service','Directory.php',3287],['lib/google/src/Google/Service','Fusiontables.php',659],['lib/google/src/Google/Service','Fusiontables.php',826],['lib/google/src/Google/Service','Fusiontables.php',950],['lib/google/src/Google/Service','Fusiontables.php',1141],['lib/google/src/Google/Service','Fusiontables.php',1202],['lib/google/src/Google/Service','AdSenseHost.php',645],['lib/google/src/Google/Service','AdSenseHost.php',686],['lib/google/src/Google/Service','AdSenseHost.php',751],['lib/google/src/Google/Service','AdSenseHost.php',918],['lib/google/src/Google/Service','AdSenseHost.php',1026],['lib/google/src/Google/Service','Plus.php',343],['lib/google/src/Google/Service','Plus.php',418],['lib/google/src/Google/Service','Plus.php',525],['lib/google/src/Google/Service','Mirror.php',438],['lib/google/src/Google/Service','Mirror.php',523],['lib/google/src/Google/Service','Mirror.php',563],['lib/google/src/Google/Service','Mirror.php',674],['lib/google/src/Google/Service','Mirror.php',786],['lib/google/src/Google/Service','AndroidEnterprise.php',1002],['lib/google/src/Google/Service','AndroidEnterprise.php',1109],['lib/google/src/Google/Service','AndroidEnterprise.php',1196],['lib/google/src/Google/Service','AndroidEnterprise.php',1312],['lib/google/src/Google/Service','AndroidEnterprise.php',1432],['lib/google/src/Google/Service','AndroidEnterprise.php',1524],['lib/google/src/Google/Service','AndroidEnterprise.php',1616],['lib/google/src/Google/Service','AndroidEnterprise.php',1705],['lib/google/src/Google/Service','AndroidEnterprise.php',1777],['lib/google/src/Google/Service','AndroidEnterprise.php',1879],['lib/htmlpurifier/HTMLPurifier','DoctypeRegistry.php',76],['lib/testing/classes','nasty_strings.php',73],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',52],['lib/google/src/Google/Service','Playmoviespartner.php',411],['lib/google/src/Google/Service','Playmoviespartner.php',475],['lib/google/src/Google/Service','Playmoviespartner.php',580],['lib','coursecatlib.php',212],['lib/google/src/Google/Service','Cloudtrace.php',217],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/media/js','media.js',7],['tag/classes','tag.php',190],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',65],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Null.php',27],['competency/classes','url.php',55],['lib/portfolio','caller.php',170],['lib/portfolio','caller.php',538],['lib/google/src/Google/Service','Calendar.php',919],['lib/google/src/Google/Service','Calendar.php',1086],['lib/google/src/Google/Service','Calendar.php',1285],['lib/google/src/Google/Service','Calendar.php',1387],['lib/google/src/Google/Service','Calendar.php',1431],['lib/google/src/Google/Service','Calendar.php',1873],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',78],['cache/stores/session','lib.php',225],['lib/google/src/Google/Service','Cloudbilling.php',162],['lib/google/src/Google/Service','PlusDomains.php',468],['lib/google/src/Google/Service','PlusDomains.php',593],['lib/google/src/Google/Service','PlusDomains.php',719],['lib/google/src/Google/Service','PlusDomains.php',813],['lib/google/src/Google/Service','Storagetransfer.php',248],['lib/google/src/Google/Service','Storagetransfer.php',295],['lib/google/src/Google/Service','Storagetransfer.php',396],['cache/stores/mongodb','lib.php',252],['lib/google/src/Google/Cache','Null.php',36],['lib/google/src/Google/Service','GamesConfiguration.php',265],['lib/google/src/Google/Service','GamesConfiguration.php',404],['cache/stores/file','lib.php',330],['cache/stores/memcached','lib.php',319],['lib/google/src/Google/Service','AppState.php',171],['lib/google/src/Google/Service','Resourceviews.php',354],['lib/google/src/Google/Service','Resourceviews.php',439],['lib/portfolio','plugin.php',631],['lib/google/src/Google/Service','Classroom.php',484],['lib/google/src/Google/Service','Classroom.php',724],['lib/google/src/Google/Service','Classroom.php',830],['lib/google/src/Google/Service','Classroom.php',951],['lib/google/src/Google/Service','Classroom.php',1010],['lib/google/src/Google/Service','SQLAdmin.php',804],['lib/google/src/Google/Service','SQLAdmin.php',874],['lib/google/src/Google/Service','SQLAdmin.php',1076],['lib/google/src/Google/Service','SQLAdmin.php',1298],['lib/google/src/Google/Service','SQLAdmin.php',1387],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',67],['lib/google/src/Google/Service','Compute.php',4037],['lib/google/src/Google/Service','Compute.php',4166],['lib/google/src/Google/Service','Compute.php',4299],['lib/google/src/Google/Service','Compute.php',4460],['lib/google/src/Google/Service','Compute.php',4590],['lib/google/src/Google/Service','Compute.php',4686],['lib/google/src/Google/Service','Compute.php',4845],['lib/google/src/Google/Service','Compute.php',4957],['lib/google/src/Google/Service','Compute.php',5048],['lib/google/src/Google/Service','Compute.php',5188],['lib/google/src/Google/Service','Compute.php',5264],['lib/google/src/Google/Service','Compute.php',5394],['lib/google/src/Google/Service','Compute.php',5542],['lib/google/src/Google/Service','Compute.php',5726],['lib/google/src/Google/Service','Compute.php',6001],['lib/google/src/Google/Service','Compute.php',6171],['lib/google/src/Google/Service','Compute.php',6369],['lib/google/src/Google/Service','Compute.php',6595],['lib/google/src/Google/Service','Compute.php',6655],['lib/google/src/Google/Service','Compute.php',6732],['lib/google/src/Google/Service','Compute.php',6808],['lib/google/src/Google/Service','Compute.php',6914],['lib/google/src/Google/Service','Compute.php',6977],['lib/google/src/Google/Service','Compute.php',7052],['lib/google/src/Google/Service','Compute.php',7148],['lib/google/src/Google/Service','Compute.php',7223],['lib/google/src/Google/Service','Compute.php',7315],['lib/google/src/Google/Service','Compute.php',7425],['lib/google/src/Google/Service','Compute.php',7586],['lib/google/src/Google/Service','Compute.php',7750],['lib/google/src/Google/Service','Compute.php',7955],['lib/google/src/Google/Service','Compute.php',8050],['lib/google/src/Google/Service','Compute.php',8226],['lib/google/src/Google/Service','Compute.php',8321],['lib/google/src/Google/Service','Compute.php',8384],['lib/google/src/Google/Service','Pubsub.php',255],['lib/google/src/Google/Service','Pubsub.php',394],['lib/google/src/Google/Cache','Apc.php',52],['lib/google/src/Google/Service','Dfareporting.php',4559],['lib/google/src/Google/Service','Dfareporting.php',4587],['lib/google/src/Google/Service','Dfareporting.php',4629],['lib/google/src/Google/Service','Dfareporting.php',4671],['lib/google/src/Google/Service','Dfareporting.php',4779],['lib/google/src/Google/Service','Dfareporting.php',4867],['lib/google/src/Google/Service','Dfareporting.php',5014],['lib/google/src/Google/Service','Dfareporting.php',5117],['lib/google/src/Google/Service','Dfareporting.php',5308],['lib/google/src/Google/Service','Dfareporting.php',5427],['lib/google/src/Google/Service','Dfareporting.php',5525],['lib/google/src/Google/Service','Dfareporting.php',5580],['lib/google/src/Google/Service','Dfareporting.php',5683],['lib/google/src/Google/Service','Dfareporting.php',5769],['lib/google/src/Google/Service','Dfareporting.php',5891],['lib/google/src/Google/Service','Dfareporting.php',5997],['lib/google/src/Google/Service','Dfareporting.php',6105],['lib/google/src/Google/Service','Dfareporting.php',6255],['lib/google/src/Google/Service','Dfareporting.php',6314],['lib/google/src/Google/Service','Dfareporting.php',6411],['lib/google/src/Google/Service','Dfareporting.php',6529],['lib/google/src/Google/Service','Dfareporting.php',6609],['lib/google/src/Google/Service','Dfareporting.php',6746],['lib/google/src/Google/Service','Dfareporting.php',6862],['lib/google/src/Google/Service','Dfareporting.php',6940],['lib/google/src/Google/Service','Dfareporting.php',7011],['lib/google/src/Google/Service','Dfareporting.php',7131],['lib/google/src/Google/Service','Dfareporting.php',7172],['lib/google/src/Google/Service','Dfareporting.php',7214],['lib/google/src/Google/Service','Dfareporting.php',7256],['lib/google/src/Google/Service','Dfareporting.php',7320],['lib/google/src/Google/Service','Dfareporting.php',7378],['lib/google/src/Google/Service','Dfareporting.php',7517],['lib/google/src/Google/Service','Dfareporting.php',7640],['lib/google/src/Google/Service','Dfareporting.php',7771],['lib/google/src/Google/Service','Dfareporting.php',7812],['lib/google/src/Google/Service','Dfareporting.php',7853],['lib/google/src/Google/Service','Dfareporting.php',7935],['lib/google/src/Google/Service','Dfareporting.php',7995],['lib/google/src/Google/Service','Dfareporting.php',8116],['lib/google/src/Google/Service','Dfareporting.php',8258],['lib/google/src/Google/Service','Dfareporting.php',8307],['lib/google/src/Google/Service','Dfareporting.php',8421],['lib/google/src/Google/Service','Dfareporting.php',8482],['lib/google/src/Google/Service','Dfareporting.php',8584],['lib/google/src/Google/Service','Dfareporting.php',8643],['lib/google/src/Google/Service','Dfareporting.php',8682],['lib/google/src/Google/Service','Dfareporting.php',8724],['lib/google/src/Google/Service','Dfareporting.php',8782],['lib/google/src/Google/Service','Manager.php',259],['lib/google/src/Google/Service','Manager.php',338],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',108],['lib','webdavlib.php',264]], 21532],
'execute': ['execute', 'Run langpack update ', [['admin/tool/langimport/classes/task','update_langpacks_task.php',44],['backup/converter/imscc1','lib.php',84],['lib/classes/task','blog_cron_task.php',40],['mod/workshop/allocation/scheduled','lib.php',128],['lib/classes/task','send_new_user_passwords_task.php',40],['admin/tool/log/store/standard/classes/task','cleanup_task.php',40],['lib/dml','pdo_moodle_database.php',227],['lib/classes/task','tag_cron_task.php',42],['enrol/imsenterprise/classes/task','cron_task.php',43],['lib/classes/task','completion_daily_task.php',42],['lib/google/src/Google/Http','Batch.php',61],['lib/dml','oci_native_moodle_database.php',1048],['lib/classes/task','context_cleanup_task.php',41],['backup/util/plan','backup_structure_step.class.php',50],['backup/util/ui','restore_ui.class.php',206],['webservice','lib.php',1319],['lib/classes/task','stats_cron_task.php',40],['lib/htmlpurifier/HTMLPurifier/Strategy','ValidateAttributes.php',16],['lib/htmlpurifier/HTMLPurifier/Strategy','RemoveForeignElements.php',20],['lib/classes/task','legacy_plugin_cron_task.php',42],['backup/moodle2','restore_activity_task.class.php',189],['lib/classes/task','portfolio_cron_task.php',40],['lib/google/src/Google/Http','REST.php',27],['lib/htmlpurifier/HTMLPurifier/Strategy','MakeWellFormed.php',66],['backup/converter/imscc11','backuplib.php',42],['lib/classes/task','question_cron_task.php',40],['lib/classes/task','cache_cron_task.php',40],['admin/tool/log/store/legacy/classes/task','cleanup_task.php',40],['mod/lti/service/memberships/classes/local/resource','linkmemberships.php',62],['admin/tool/messageinbound/classes/task','cleanup_task.php',47],['lib/adodb/drivers','adodb-pdo.inc.php',559],['lib/editor/atto/classes/task','autosave_cleanup_task.php',42],['admin/tool/recyclebin/classes/task','cleanup_category_bin.php',43],['lib/classes/task','completion_regular_task.php',42],['lib/adodb/drivers','adodb-oci8po.inc.php',54],['lib/classes/task','events_cron_task.php',40],['mod/workshop/allocation/random','lib.php',83],['mod/assign/feedback/editpdf/classes/task','convert_submissions.php',47],['auth/cas/classes/task','sync_task.php',43],['admin/tool/recyclebin/classes/task','cleanup_course_bin.php',43],['mod/lti/service/toolsettings/classes/local/resource','contextsettings.php',62],['backup/util/helper','restore_decode_processor.class.php',73],['lib/behat','behat_base.php',840],['enrol/flatfile/classes/task','flatfile_sync_task.php',46],['lib/classes/task','registration_cron_task.php',40],['backup/moodle2','backup_section_task.class.php',97],['lib/classes/task','check_for_updates_task.php',40],['backup/util/plan/tests/fixtures','plan_fixtures.php',48],['backup/util/plan/tests/fixtures','plan_fixtures.php',56],['mod/forum/classes/task','cron_task.php',39],['lib/classes/task','send_failed_login_notifications_task.php',43],['enrol/lti/classes/task','sync_grades.php',45],['lib/dml','pgsql_native_moodle_database.php',665],['lib/htmlpurifier/HTMLPurifier/Strategy','Composite.php',21],['lib/classes/update','validator.php',117],['lib/google/src/Google','Client.php',574],['lib/dml','mssql_native_moodle_database.php',711],['mod/lti/service/profile/classes/local/resource','profile.php',76],['backup/util/plan','backup_plan.class.php',112],['lib/dml','mysqli_native_moodle_database.php',963],['backup/util/ui','backup_ui.class.php',122],['admin/tool/monitor/classes/task','clean_events.php',41],['backup/converter/moodle1','backuplib.php',10],['backup/converter/imscc11','lib.php',85],['lib/classes/task','grade_cron_task.php',40],['lib/classes/task','file_temp_cleanup_task.php',40],['backup/moodle2','restore_section_task.class.php',87],['mod/lti/service/toolsettings/classes/local/resource','linksettings.php',63],['filter/tex','latex.php',70],['lib/adodb','adodb.inc.php',1088],['lib/classes/task','plagiarism_cron_task.php',40],['mod/lti/service/toolproxy/classes/local/resource','toolproxy.php',62],['backup/converter/moodle1','lib.php',142],['backup/util/plan','restore_structure_step.class.php',62],['lib/classes/task','search_index_task.php',44],['enrol/lti/classes/task','sync_members.php',55],['lib/classes/task','session_cleanup_task.php',40],['mod/lti/service/toolsettings/classes/local/resource','systemsettings.php',61],['lib/classes/task','backup_cleanup_task.php',40],['lib/classes/task','delete_unconfirmed_users_task.php',40],['backup/converter/imscc1','backuplib.php',10],['lib/classes/task','badges_cron_task.php',40],['admin/tool/uploadcourse/classes','processor.php',174],['lib/classes/task','calendar_cron_task.php',40],['backup/util/plan','base_plan.class.php',158],['auth/ldap/classes/task','sync_task.php',43],['lib/adodb/drivers','adodb-oci8.inc.php',920],['backup/util/plan','restore_plan.class.php',159],['lib/tests/fixtures','task_fixtures.php',30],['lib/tests/fixtures','task_fixtures.php',39],['lib/tests/fixtures','task_fixtures.php',48],['lib/tests/fixtures','task_fixtures.php',57],['lib/dml','sqlsrv_native_moodle_database.php',795],['lib/classes/task','create_contexts_task.php',40],['lib/classes/task','file_trash_cleanup_task.php',40],['admin/tool/cohortroles/classes/task','cohort_role_sync.php',46],['lib/classes/task','complete_plans_task.php',52],['lib/classes/task','messaging_cleanup_task.php',40],['backup/util/plan','backup_execution_step.class.php',25],['lib/classes/task','cache_cleanup_task.php',40],['backup/moodle2','backup_activity_task.class.php',211],['filter/tex','texdebug.php',287],['lib/classes/task','password_reset_cleanup_task.php',40],['lib/classes/task','search_optimize_task.php',47],['mod/assign','adminlib.php',342],['lib/classes/task','delete_incomplete_users_task.php',40],['lib/classes/task','automated_backup_task.php',40],['admin/tool/messageinbound/classes/task','pickup_task.php',47],['backup/util/plan','restore_execution_step.class.php',25],['lib/classes/task','sync_plans_from_template_cohorts_task.php',50],['admin/tool/monitor/classes','notification_task.php',39],['lib/dml/tests','dml_test.php',5543],['lib/htmlpurifier/HTMLPurifier/Strategy','FixNesting.php',41],['mod/lti/service/memberships/classes/local/resource','contextmemberships.php',60],['admin/tool/monitor/classes/task','check_subscriptions.php',60],['backup/util/interfaces','executable.class.php',32],['backup/util/plan','base_task.class.php',162]], 1058],
'update': ['update', 'In addition to update() as defined in grade_object, handle the grade_outcome and grade_scale objects. Force regrading if necessary, rounds the float numbers using php function, the reason is we need to compare the db value with computed number to skip regrading if possible. ', [['lib/grade','grade_item.php',274],['lib/google/src/Google/Service','Tasks.php',386],['lib/google/src/Google/Service','Tasks.php',556],['lib/google/src/Google/Service','AndroidPublisher.php',1413],['lib/google/src/Google/Service','AndroidPublisher.php',1545],['lib/google/src/Google/Service','AndroidPublisher.php',1615],['lib/google/src/Google/Service','AndroidPublisher.php',1853],['lib/google/src/Google/Service','AndroidPublisher.php',1919],['lib/google/src/Google/Service','AndroidPublisher.php',2003],['lib/google/src/Google/Service','AndroidPublisher.php',2177],['lib/google/src/Google/Service','Reseller.php',344],['lib/grade','grade_category.php',226],['lib/grade','grade_scale.php',125],['lib/adodb','adodb-active-record.inc.php',1004],['lib/grade','grade_object.php',238],['lib/google/src/Google/Service','YouTubeAnalytics.php',534],['completion','data_object.php',252],['mod/lesson/pagetypes','matching.php',308],['tag/classes','collection.php',215],['lib/google/src/Google/Service','AdExchangeBuyer.php',802],['lib/google/src/Google/Service','AdExchangeBuyer.php',906],['lib/google/src/Google/Service','AdExchangeBuyer.php',1013],['lib/google/src/Google/Service','AdExchangeBuyer.php',1181],['lib/google/src/Google/Service','AdExchangeBuyer.php',1357],['lib/google/src/Google/Service','AdExchangeBuyer.php',1640],['lib/google/src/Google/Service','Books.php',2025],['lib/grade','grade_grade.php',1009],['lib/grade','grade_outcome.php',144],['lib/google/src/Google/Service','Analytics.php',2215],['lib/google/src/Google/Service','Analytics.php',2388],['lib/google/src/Google/Service','Analytics.php',2501],['lib/google/src/Google/Service','Analytics.php',2626],['lib/google/src/Google/Service','Analytics.php',2736],['lib/google/src/Google/Service','Analytics.php',2843],['lib/google/src/Google/Service','Analytics.php',2971],['lib/google/src/Google/Service','Analytics.php',3062],['lib/google/src/Google/Service','Analytics.php',3185],['lib/google/src/Google/Service','Analytics.php',3502],['lib/google/src/Google/Service','Analytics.php',3604],['lib/google/src/Google/Service','Analytics.php',3686],['lib/google/src/Google/Service','Coordinate.php',611],['lib/google/src/Google/Service','Coordinate.php',727],['lib/google/src/Google/Service','DeploymentManager.php',589],['tag/classes/output','tagareacollection.php',68],['lib','weblib.php',3312],['lib/google/src/Google/Service','Blogger.php',1349],['lib/google/src/Google/Service','Blogger.php',1647],['lib/google/src/Google/Service','Dataflow.php',350],['tag/classes/output','tagcollname.php',58],['competency/classes','persistent.php',452],['lib/google/src/Google/Service','Cloudresourcemanager.php',344],['lib/google/src/Google/Service','Cloudresourcemanager.php',555],['lib/google/src/Google/Service','TagManager.php',977],['lib/google/src/Google/Service','TagManager.php',1066],['lib/google/src/Google/Service','TagManager.php',1159],['lib/google/src/Google/Service','TagManager.php',1219],['lib/google/src/Google/Service','TagManager.php',1311],['lib/google/src/Google/Service','TagManager.php',1405],['lib/google/src/Google/Service','TagManager.php',1499],['lib/google/src/Google/Service','TagManager.php',1650],['lib/google/src/Google/Service','TagManager.php',1743],['mod/lesson','locallib.php',2691],['lib/google/src/Google/Service','Bigquery.php',621],['lib/google/src/Google/Service','Bigquery.php',953],['lib/google/src/Google/Service','ShoppingContent.php',1136],['lib/google/src/Google/Service','ShoppingContent.php',1238],['lib/google/src/Google/Service','ShoppingContent.php',1401],['lib/google/src/Google/Service','ShoppingContent.php',1534],['mod/lesson/pagetypes','truefalse.php',163],['lib/google/src/Google/Service','Clouddebugger.php',307],['lib/filestorage','stored_file.php',103],['lib/google/src/Google/Service','Container.php',366],['lib/horde/framework/Horde/Support','Array.php',70],['lib/google/src/Google/Service','Storage.php',1127],['lib/google/src/Google/Service','Storage.php',1268],['lib/google/src/Google/Service','Storage.php',1423],['lib/google/src/Google/Service','Storage.php',1564],['lib/google/src/Google/Service','Storage.php',1904],['tag/classes/output','tagname.php',56],['tag/classes/output','tagcollsearchable.php',72],['lib/google/src/Google/Service','Games.php',1508],['lib/google/src/Google/Service','Licensing.php',335],['lib/google/src/Google/Service','Fitness.php',478],['lib/google/src/Google/Service','Fitness.php',691],['lib/google/src/Google/Service','Gmail.php',833],['lib/google/src/Google/Service','Gmail.php',986],['lib/google/src/Google/Service','Taskqueue.php',398],['lib/adodb','adodb-active-recordx.inc.php',1136],['grade/grading/form','lib.php',905],['lib/google/src/Google/Service','Doubleclicksearch.php',326],['lib/google/src/Google/Service','Autoscaler.php',400],['tag/classes/output','tagisstandard.php',70],['lib/google/src/Google/Service','Prediction.php',339],['lib/google/src/Google/Service','SiteVerification.php',227],['lib/google/src/Google/Service','Drive.php',1691],['lib/google/src/Google/Service','Drive.php',1961],['lib/google/src/Google/Service','Drive.php',2208],['lib/google/src/Google/Service','Drive.php',2320],['lib/google/src/Google/Service','Drive.php',2370],['lib/google/src/Google/Service','Drive.php',2494],['lib/google/src/Google/Service','Drive.php',2582],['tag/classes/output','tagflag.php',71],['lib/google/src/Google/Service','Proximitybeacon.php',440],['lib/google/src/Google/Service','Groupssettings.php',138],['lib/google/src/Google/Service','Directory.php',1829],['lib/google/src/Google/Service','Directory.php',1889],['lib/google/src/Google/Service','Directory.php',2141],['lib/google/src/Google/Service','Directory.php',2306],['lib/google/src/Google/Service','Directory.php',2489],['lib/google/src/Google/Service','Directory.php',2597],['lib/google/src/Google/Service','Directory.php',2808],['lib/google/src/Google/Service','Directory.php',2910],['lib/google/src/Google/Service','Directory.php',3131],['lib/google/src/Google/Service','Directory.php',3317],['lib/google/src/Google/Service','Fusiontables.php',727],['lib/google/src/Google/Service','Fusiontables.php',892],['lib/google/src/Google/Service','Fusiontables.php',1094],['lib/google/src/Google/Service','Fusiontables.php',1269],['lib/google/src/Google/Service','AdSenseHost.php',846],['lib/google/src/Google/Service','AdSenseHost.php',1097],['course/classes/output','course_module_name.php',81],['lib/google/src/Google/Service','Mirror.php',496],['lib/google/src/Google/Service','Mirror.php',634],['lib/google/src/Google/Service','Mirror.php',745],['tag/classes','area.php',226],['lib/google/src/Google/Service','AndroidEnterprise.php',1064],['lib/google/src/Google/Service','AndroidEnterprise.php',1165],['lib/google/src/Google/Service','AndroidEnterprise.php',1489],['lib/google/src/Google/Service','AndroidEnterprise.php',1672],['grade/grading/form/rubric','lib.php',828],['lib/xhprof/xhprof_html/jquery','jquery.tooltip.js',200],['mod/lesson/pagetypes','essay.php',158],['lib','coursecatlib.php',438],['tag/classes','tag.php',893],['lib/google/src/Google/Service','Calendar.php',1006],['lib/google/src/Google/Service','Calendar.php',1181],['lib/google/src/Google/Service','Calendar.php',1333],['lib/google/src/Google/Service','Calendar.php',1714],['lib/google/src/Google/Service','PlusDomains.php',692],['lib/google/src/Google/Service','GamesConfiguration.php',334],['lib/google/src/Google/Service','GamesConfiguration.php',473],['mod/lesson/pagetypes','branchtable.php',262],['tag/classes/output','tagareashowstandard.php',64],['lib/google/src/Google/Service','AppState.php',202],['calendar','lib.php',2206],['tag/classes/output','tagareaenabled.php',69],['cohort/classes/output','cohortidnumber.php',53],['lib/google/src/Google/Service','Classroom.php',564],['cohort/classes/output','cohortname.php',53],['lib/google/src/Google/Service','SQLAdmin.php',947],['lib/google/src/Google/Service','SQLAdmin.php',1267],['lib/google/src/Google/Service','SQLAdmin.php',1534],['grade/grading/form/guide','lib.php',836],['lib/google/src/Google/Service','Compute.php',4253],['lib/google/src/Google/Service','Compute.php',4398],['lib/google/src/Google/Service','Compute.php',4767],['lib/google/src/Google/Service','Compute.php',5348],['lib/google/src/Google/Service','Compute.php',5478],['lib/google/src/Google/Service','Compute.php',8131],['lib/google/src/Google/Service','YouTube.php',1959],['lib/google/src/Google/Service','YouTube.php',2194],['lib/google/src/Google/Service','YouTube.php',2303],['lib/google/src/Google/Service','YouTube.php',2429],['lib/google/src/Google/Service','YouTube.php',2570],['lib/google/src/Google/Service','YouTube.php',3111],['lib/google/src/Google/Service','YouTube.php',3348],['lib/google/src/Google/Service','YouTube.php',3518],['lib/google/src/Google/Service','YouTube.php',3708],['lib/google/src/Google/Service','YouTube.php',4400],['lib/google/src/Google/Service','Dfareporting.php',4752],['lib/google/src/Google/Service','Dfareporting.php',4840],['lib/google/src/Google/Service','Dfareporting.php',4973],['lib/google/src/Google/Service','Dfareporting.php',5090],['lib/google/src/Google/Service','Dfareporting.php',5204],['lib/google/src/Google/Service','Dfareporting.php',5400],['lib/google/src/Google/Service','Dfareporting.php',5656],['lib/google/src/Google/Service','Dfareporting.php',5848],['lib/google/src/Google/Service','Dfareporting.php',5970],['lib/google/src/Google/Service','Dfareporting.php',6078],['lib/google/src/Google/Service','Dfareporting.php',6196],['lib/google/src/Google/Service','Dfareporting.php',6502],['lib/google/src/Google/Service','Dfareporting.php',6704],['lib/google/src/Google/Service','Dfareporting.php',6834],['lib/google/src/Google/Service','Dfareporting.php',6912],['lib/google/src/Google/Service','Dfareporting.php',7077],['lib/google/src/Google/Service','Dfareporting.php',7476],['lib/google/src/Google/Service','Dfareporting.php',7594],['lib/google/src/Google/Service','Dfareporting.php',7744],['lib/google/src/Google/Service','Dfareporting.php',7968],['lib/google/src/Google/Service','Dfareporting.php',8075],['lib/google/src/Google/Service','Dfareporting.php',8202],['lib/google/src/Google/Service','Dfareporting.php',8394],['lib/google/src/Google/Service','Dfareporting.php',8557],['lib/google/src/Google/Service','Dfareporting.php',8861],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',72]], 498],
'record_exists_sql': ['record_exists_sql', 'Test whether a SQL SELECT statement returns any records. ', [['lib/dml','moodle_database.php',1846]], 52],
'count_tagged_items': ['count_tagged_items', 'Count how many items are tagged with a specific tag. ', [['tag/classes','tag.php',1207]], 3],
'set_field': ['set_field', 'Set a single field in every table record where all the given conditions met. ', [['lib/dml','moodle_database.php',1737],['availability/condition/profile/tests','condition_test.php',349]], 485],
'remove_item_tag': ['remove_item_tag', 'Removes the tag from an item without changing the other tags ', [['tag/classes','tag.php',802]], 8],
'change_items_context': ['change_items_context', 'Moves all tags of the specified items to the new context ', [['tag/classes','tag.php',867]], 2],
'get_records_select': ['get_records_select', 'Load a list of records based on a select query. ', [['competency/classes','persistent.php',751],['lib/dml','moodle_database.php',1332]], 166],
'flag': ['flag', 'Search for a flag/keywords. ', [['lib/horde/framework/Horde/Imap/Client/Search','Query.php',396],['tag/classes','tag.php',970]], 12],
'field': ['field', 'Get the field name corresponding to a given place. ', [['question/type/gapselect','questionbase.php',194],['question/type/multichoice','question.php',317],['question/type/match','question.php',200]], 84],
'update_instance_ordering': ['update_instance_ordering', 'Updates the ordering on tag instance ', [['tag/classes','tag.php',577]], 1],
'get_by_name_bulk': ['get_by_name_bulk', 'Returns the list of tag objects by tag collection id and the list of tag names ', [['tag/classes','tag.php',297]], 6],
'isloggedin': ['isloggedin', 'Determines if a user is currently logged in ', [['lib','accesslib.php',1910]], 184],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 2229],
'get_related_tags': ['get_related_tags', 'Returns tags related to a tag ', [['tag/classes','tag.php',1143]], 7],
'get_item_tags': ['get_item_tags', 'Get data for an item-level element ', [['lib/simplepie/library/SimplePie','Item.php',131],['tag/classes','tag.php',593]], 110],
'get_item_tags_array': ['get_item_tags_array', 'Returns the list of display names of the tags that are associated with an item ', [['tag/classes','tag.php',643]], 35],
'htmlspecialchars': ['htmlspecialchars', '', [], 215],
'strval': ['strval', '', [], 151],
'array_diff': ['array_diff', '', [], 102],
'ltrim': ['ltrim', '', [], 92],
'defined': ['defined', '', [], 4731],
'call_user_func_array': ['call_user_func_array', '', [], 94],
'array_merge': ['array_merge', '', [], 2944],
'array_unshift': ['array_unshift', '', [], 115],
'array_key_exists': ['array_key_exists', '', [], 1445],
'reset': ['reset', '', [], 1213],
'array_keys': ['array_keys', '', [], 1256],
'array_unique': ['array_unique', '', [], 171],
'is_null': ['is_null', '', [], 2003],
'uasort': ['uasort', '', [], 8],
'array_map': ['array_map', '', [], 169],
'create_function': ['create_function', '', [], 43],
'is_array': ['is_array', '', [], 1608],
'preg_split': ['preg_split', '', [], 146],
'trim': ['trim', '', [], 1948],
'array_values': ['array_values', '', [], 342],
'count': ['count', '', [], 4095],
'array_flip': ['array_flip', '', [], 131],
'time': ['time', '', [], 1959],
'max': ['max', '', [], 1266],
'strtolower': ['strtolower', '', [], 817],
'link': ['link', '', [], 695],
'array_filter': ['array_filter', '', [], 70]};
CLASS_DATA={
'tag_deleted': ['tag_deleted', 'Tag deleted event class. ', [['lib/classes/event','tag_deleted.php',29]], 1],
'tag_created': ['tag_created', 'Tag created event class. ', [['lib/classes/event','tag_created.php',29]], 3],
'tag_unflagged': ['tag_unflagged', 'Tag unflagged event. ', [['lib/classes/event','tag_unflagged.php',29]], 1],
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',238]], 3088],
'core_tag_area': ['core_tag_area', 'Class to manage tag areas ', [['tag/classes','area.php',27]], 48],
'tag_added': ['tag_added', 'Event class for when a tag has been added to an item. ', [['lib/classes/event','tag_added.php',29]], 2],
'tag_updated': ['tag_updated', 'Tag updated event. ', [['lib/classes/event','tag_updated.php',29]], 1],
'html_writer': ['html_writer', 'Simple html output class ', [['lib','outputcomponents.php',1062]], 5120],
'context_system': ['context_system', 'System context class ', [['lib','accesslib.php',6157]], 1147],
'moodle_exception': ['moodle_exception', 'Base Moodle Exception class ', [['lib','setuplib.php',75]], 606],
'core_text': ['core_text', 'defines string api\'s for manipulating strings ', [['lib/classes','text.php',27]], 566],
'tag_removed': ['tag_removed', 'Event class for when a tag has been removed from an item. ', [['lib/classes/event','tag_removed.php',29]], 5],
'core_tag_collection': ['core_tag_collection', 'Class to manage tag collections ', [['tag/classes','collection.php',27]], 79],
'tag_flagged': ['tag_flagged', 'Tag flagged event class. ', [['lib/classes/event','tag_flagged.php',29]], 1],
'core_tag_tag': ['core_tag_tag', 'Represents one tag and also contains lots of useful tag-related methods as static functions. ', [['tag/classes','tag.php',27]], 352],
'dml_missing_record_exception': ['dml_missing_record_exception', 'Caused by missing record that is required for normal operation. ', [['lib','dmllib.php',170]], 5]};
CONST_DATA={
'SQL_PARAMS_NAMED': ['SQL_PARAMS_NAMED', '', [['lib/dml','moodle_database.php',32]], 315],
'DEBUG_DEVELOPER': ['DEBUG_DEVELOPER', '', [['lib','setuplib.php',40]], 736],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153],
'PARAM_TAG': ['PARAM_TAG', '', [['lib','moodlelib.php',218]], 28],
'IGNORE_MISSING': ['IGNORE_MISSING', '', [['lib','dmllib.php',48]], 215],
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1384]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
