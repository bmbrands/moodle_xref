<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /group/lib.php source</title>
    <link rel="stylesheet" href="../sample.css" type="text/css">
    <link rel="stylesheet" href="../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../';
subdir='group';
filename='lib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/group/</a> -> <a href="lib.php.html">lib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="lib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="lib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment">/**</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * Extra library for groups and groupings.</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> *</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @copyright 2006 The Open University, J.White AT open.ac.uk, Petr Skoda (skodak)</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @package   core_group</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> */</span>
<a name="l25"><span class="linenum">  25</span></a>  
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment">/*</span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment"> * INTERNAL FUNCTIONS - to be used by moodle core only</span>
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment"> * require_once $CFG-&gt;dirroot.'/group/lib.php' must be used</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> */</span>
<a name="l30"><span class="linenum">  30</span></a>  
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment">/**</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * Adds a specified user to a group</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> *</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> * @param mixed $grouporid  The group id or group object</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment"> * @param mixed $userorid   The user id or user object</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment"> * @param string $component Optional component name e.g. 'enrol_imsenterprise'</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment"> * @param int $itemid Optional itemid associated with component</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment"> * @return bool True if user added successfully or the user is already a</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment"> * member of the group, false otherwise.</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment"> */</span>
<a name="l41"><span class="linenum">  41</span></a>  function <a class="function" onClick="logFunction('groups_add_member')" href="../_functions/groups_add_member.html" onMouseOver="funcPopup(event,'groups_add_member')">groups_add_member</a>(<a class="var it36614" onMouseOver="hilite(36614)" onMouseOut="lolite()" onClick="logVariable('grouporid')" href="../_variables/grouporid.html">$grouporid</a>, <a class="var it24994" onMouseOver="hilite(24994)" onMouseOut="lolite()" onClick="logVariable('userorid')" href="../_variables/userorid.html">$userorid</a>, <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>=null, <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a>=0) {
<a name="l42"><span class="linenum">  42</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l43"><span class="linenum">  43</span></a>  
<a name="l44"><span class="linenum">  44</span></a>      if (<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it24994" onMouseOver="hilite(24994)" onMouseOut="lolite()" onClick="logVariable('userorid')" href="../_variables/userorid.html">$userorid</a>)) {
<a name="l45"><span class="linenum">  45</span></a>          <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a> = <a class="var it24994" onMouseOver="hilite(24994)" onMouseOut="lolite()" onClick="logVariable('userorid')" href="../_variables/userorid.html">$userorid</a>-&gt;<a onClick="logVariable('id')" class="var it45369" onMouseOver="hilite(45369)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l46"><span class="linenum">  46</span></a>          <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>   = <a class="var it24994" onMouseOver="hilite(24994)" onMouseOut="lolite()" onClick="logVariable('userorid')" href="../_variables/userorid.html">$userorid</a>;
<a name="l47"><span class="linenum">  47</span></a>          if (!isset(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('deleted')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../_variables/deleted.html">deleted</a>)) {
<a name="l48"><span class="linenum">  48</span></a>              <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id'=&gt;<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l49"><span class="linenum">  49</span></a>          }
<a name="l50"><span class="linenum">  50</span></a>      } else {
<a name="l51"><span class="linenum">  51</span></a>          <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a> = <a class="var it24994" onMouseOver="hilite(24994)" onMouseOut="lolite()" onClick="logVariable('userorid')" href="../_variables/userorid.html">$userorid</a>;
<a name="l52"><span class="linenum">  52</span></a>          <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id'=&gt;<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l53"><span class="linenum">  53</span></a>      }
<a name="l54"><span class="linenum">  54</span></a>  
<a name="l55"><span class="linenum">  55</span></a>      if (<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('deleted')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../_variables/deleted.html">deleted</a>) {
<a name="l56"><span class="linenum">  56</span></a>          return false;
<a name="l57"><span class="linenum">  57</span></a>      }
<a name="l58"><span class="linenum">  58</span></a>  
<a name="l59"><span class="linenum">  59</span></a>      if (<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it36614" onMouseOver="hilite(36614)" onMouseOut="lolite()" onClick="logVariable('grouporid')" href="../_variables/grouporid.html">$grouporid</a>)) {
<a name="l60"><span class="linenum">  60</span></a>          <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a> = <a class="var it36614" onMouseOver="hilite(36614)" onMouseOut="lolite()" onClick="logVariable('grouporid')" href="../_variables/grouporid.html">$grouporid</a>-&gt;<a onClick="logVariable('id')" class="var it45370" onMouseOver="hilite(45370)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l61"><span class="linenum">  61</span></a>          <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>   = <a class="var it36614" onMouseOver="hilite(36614)" onMouseOut="lolite()" onClick="logVariable('grouporid')" href="../_variables/grouporid.html">$grouporid</a>;
<a name="l62"><span class="linenum">  62</span></a>      } else {
<a name="l63"><span class="linenum">  63</span></a>          <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a> = <a class="var it36614" onMouseOver="hilite(36614)" onMouseOut="lolite()" onClick="logVariable('grouporid')" href="../_variables/grouporid.html">$grouporid</a>;
<a name="l64"><span class="linenum">  64</span></a>          <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('groups', array('id'=&gt;<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l65"><span class="linenum">  65</span></a>      }
<a name="l66"><span class="linenum">  66</span></a>  
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">    // Check if the user a participant of the group course.</span>
<a name="l68"><span class="linenum">  68</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('courseid')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>);
<a name="l69"><span class="linenum">  69</span></a>      if (!<a class="function" onClick="logFunction('is_enrolled')" href="../_functions/is_enrolled.html" onMouseOver="funcPopup(event,'is_enrolled')">is_enrolled</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>)) {
<a name="l70"><span class="linenum">  70</span></a>          return false;
<a name="l71"><span class="linenum">  71</span></a>      }
<a name="l72"><span class="linenum">  72</span></a>  
<a name="l73"><span class="linenum">  73</span></a>      if (<a class="function" onClick="logFunction('groups_is_member')" href="../_functions/groups_is_member.html" onMouseOver="funcPopup(event,'groups_is_member')">groups_is_member</a>(<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>)) {
<a name="l74"><span class="linenum">  74</span></a>          return true;
<a name="l75"><span class="linenum">  75</span></a>      }
<a name="l76"><span class="linenum">  76</span></a>  
<a name="l77"><span class="linenum">  77</span></a>      <a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../_variables/member.html">$member</a> = new stdClass();
<a name="l78"><span class="linenum">  78</span></a>      <a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../_variables/member.html">$member</a>-&gt;<a onClick="logVariable('groupid')" class="var it43826" onMouseOver="hilite(43826)" onMouseOut="lolite()" href="../_variables/groupid.html">groupid</a>   = <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>;
<a name="l79"><span class="linenum">  79</span></a>      <a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../_variables/member.html">$member</a>-&gt;<a onClick="logVariable('userid')" class="var it43826" onMouseOver="hilite(43826)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>    = <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>;
<a name="l80"><span class="linenum">  80</span></a>      <a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../_variables/member.html">$member</a>-&gt;<a onClick="logVariable('timeadded')" class="var it43826" onMouseOver="hilite(43826)" onMouseOut="lolite()" href="../_variables/timeadded.html">timeadded</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l81"><span class="linenum">  81</span></a>      <a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../_variables/member.html">$member</a>-&gt;<a onClick="logVariable('component')" class="var it43826" onMouseOver="hilite(43826)" onMouseOut="lolite()" href="../_variables/component.html">component</a> = '';
<a name="l82"><span class="linenum">  82</span></a>      <a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../_variables/member.html">$member</a>-&gt;<a onClick="logVariable('itemid')" class="var it43826" onMouseOver="hilite(43826)" onMouseOut="lolite()" href="../_variables/itemid.html">itemid</a> = 0;
<a name="l83"><span class="linenum">  83</span></a>  
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment">    // Check the component exists if specified</span>
<a name="l85"><span class="linenum">  85</span></a>      if (!empty(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>)) {
<a name="l86"><span class="linenum">  86</span></a>          <a class="var it1519" onMouseOver="hilite(1519)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../_variables/dir.html">$dir</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_component_directory')" href="../_functions/get_component_directory.html" onMouseOver="funcPopup(event,'get_component_directory')">get_component_directory</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l87"><span class="linenum">  87</span></a>          if (<a class="var it1519" onMouseOver="hilite(1519)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../_variables/dir.html">$dir</a> &amp;&amp; <a class="phpfunction" onClick="logFunction('is_dir')" href="../_functions/is_dir.html" onMouseOver="phpfuncPopup(event,'is_dir')">is_dir</a>(<a class="var it1519" onMouseOver="hilite(1519)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../_variables/dir.html">$dir</a>)) {
<a name="l88"><span class="linenum">  88</span></a>  <span class="comment">            // Component exists and can be used</span>
<a name="l89"><span class="linenum">  89</span></a>              <a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../_variables/member.html">$member</a>-&gt;<a onClick="logVariable('component')" class="var it43826" onMouseOver="hilite(43826)" onMouseOut="lolite()" href="../_variables/component.html">component</a> = <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>;
<a name="l90"><span class="linenum">  90</span></a>              <a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../_variables/member.html">$member</a>-&gt;<a onClick="logVariable('itemid')" class="var it43826" onMouseOver="hilite(43826)" onMouseOut="lolite()" href="../_variables/itemid.html">itemid</a> = <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a>;
<a name="l91"><span class="linenum">  91</span></a>          } else {
<a name="l92"><span class="linenum">  92</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Invalid call to <a class="function" onClick="logFunction('groups_add_member')" href="../_functions/groups_add_member.html" onMouseOver="funcPopup(event,'groups_add_member')">groups_add_member</a>(). An invalid component was specified');
<a name="l93"><span class="linenum">  93</span></a>          }
<a name="l94"><span class="linenum">  94</span></a>      }
<a name="l95"><span class="linenum">  95</span></a>  
<a name="l96"><span class="linenum">  96</span></a>      if (<a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a> !== 0 &amp;&amp; empty(<a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../_variables/member.html">$member</a>-&gt;<a onClick="logVariable('component')" class="var it43826" onMouseOver="hilite(43826)" onMouseOut="lolite()" href="../_variables/component.html">component</a>)) {
<a name="l97"><span class="linenum">  97</span></a>  <span class="comment">        // An itemid can only be specified if a valid component was found</span>
<a name="l98"><span class="linenum">  98</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Invalid call to <a class="function" onClick="logFunction('groups_add_member')" href="../_functions/groups_add_member.html" onMouseOver="funcPopup(event,'groups_add_member')">groups_add_member</a>(). A component must be specified if an itemid is given');
<a name="l99"><span class="linenum">  99</span></a>      }
<a name="l100"><span class="linenum"> 100</span></a>  
<a name="l101"><span class="linenum"> 101</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('groups_members', <a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../_variables/member.html">$member</a>);
<a name="l102"><span class="linenum"> 102</span></a>  
<a name="l103"><span class="linenum"> 103</span></a>  <span class="comment">    // Update group info, and group object.</span>
<a name="l104"><span class="linenum"> 104</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('groups', 'timemodified', <a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../_variables/member.html">$member</a>-&gt;<a onClick="logVariable('timeadded')" class="var it43826" onMouseOver="hilite(43826)" onMouseOut="lolite()" href="../_variables/timeadded.html">timeadded</a>, array('id'=&gt;<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>));
<a name="l105"><span class="linenum"> 105</span></a>      <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../_variables/timemodified.html">timemodified</a> = <a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../_variables/member.html">$member</a>-&gt;<a onClick="logVariable('timeadded')" class="var it43826" onMouseOver="hilite(43826)" onMouseOut="lolite()" href="../_variables/timeadded.html">timeadded</a>;
<a name="l106"><span class="linenum"> 106</span></a>  
<a name="l107"><span class="linenum"> 107</span></a>  <span class="comment">    // Trigger group event.</span>
<a name="l108"><span class="linenum"> 108</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array(
<a name="l109"><span class="linenum"> 109</span></a>          'context' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>,
<a name="l110"><span class="linenum"> 110</span></a>          'objectid' =&gt; <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>,
<a name="l111"><span class="linenum"> 111</span></a>          'relateduserid' =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>,
<a name="l112"><span class="linenum"> 112</span></a>          'other' =&gt; array(
<a name="l113"><span class="linenum"> 113</span></a>              'component' =&gt; <a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../_variables/member.html">$member</a>-&gt;<a onClick="logVariable('component')" class="var it43826" onMouseOver="hilite(43826)" onMouseOut="lolite()" href="../_variables/component.html">component</a>,
<a name="l114"><span class="linenum"> 114</span></a>              'itemid' =&gt; <a class="var it16176" onMouseOver="hilite(16176)" onMouseOut="lolite()" onClick="logVariable('member')" href="../_variables/member.html">$member</a>-&gt;itemid
<a name="l115"><span class="linenum"> 115</span></a>          )
<a name="l116"><span class="linenum"> 116</span></a>      );
<a name="l117"><span class="linenum"> 117</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('group_member_added')" href="../_classes/group_member_added.html" onMouseOver="classPopup(event,'group_member_added')">group_member_added</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l118"><span class="linenum"> 118</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('groups', <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>);
<a name="l119"><span class="linenum"> 119</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l120"><span class="linenum"> 120</span></a>  
<a name="l121"><span class="linenum"> 121</span></a>      return true;
<a name="l122"><span class="linenum"> 122</span></a>  }
<a name="l123"><span class="linenum"> 123</span></a>  
<a name="l124"><span class="linenum"> 124</span></a>  <span class="comment">/**</span>
<a name="l125"><span class="linenum"> 125</span></a>  <span class="comment"> * Checks whether the current user is permitted (using the normal UI) to</span>
<a name="l126"><span class="linenum"> 126</span></a>  <span class="comment"> * remove a specific group member, assuming that they have access to remove</span>
<a name="l127"><span class="linenum"> 127</span></a>  <span class="comment"> * group members in general.</span>
<a name="l128"><span class="linenum"> 128</span></a>  <span class="comment"> *</span>
<a name="l129"><span class="linenum"> 129</span></a>  <span class="comment"> * For automatically-created group member entries, this checks with the</span>
<a name="l130"><span class="linenum"> 130</span></a>  <span class="comment"> * relevant plugin to see whether it is permitted. The default, if the plugin</span>
<a name="l131"><span class="linenum"> 131</span></a>  <span class="comment"> * doesn't provide a function, is true.</span>
<a name="l132"><span class="linenum"> 132</span></a>  <span class="comment"> *</span>
<a name="l133"><span class="linenum"> 133</span></a>  <span class="comment"> * For other entries (and any which have already been deleted/don't exist) it</span>
<a name="l134"><span class="linenum"> 134</span></a>  <span class="comment"> * just returns true.</span>
<a name="l135"><span class="linenum"> 135</span></a>  <span class="comment"> *</span>
<a name="l136"><span class="linenum"> 136</span></a>  <span class="comment"> * @param mixed $grouporid The group id or group object</span>
<a name="l137"><span class="linenum"> 137</span></a>  <span class="comment"> * @param mixed $userorid The user id or user object</span>
<a name="l138"><span class="linenum"> 138</span></a>  <span class="comment"> * @return bool True if permitted, false otherwise</span>
<a name="l139"><span class="linenum"> 139</span></a>  <span class="comment"> */</span>
<a name="l140"><span class="linenum"> 140</span></a>  function <a class="function" onClick="logFunction('groups_remove_member_allowed')" href="../_functions/groups_remove_member_allowed.html" onMouseOver="funcPopup(event,'groups_remove_member_allowed')">groups_remove_member_allowed</a>(<a class="var it36614" onMouseOver="hilite(36614)" onMouseOut="lolite()" onClick="logVariable('grouporid')" href="../_variables/grouporid.html">$grouporid</a>, <a class="var it24994" onMouseOver="hilite(24994)" onMouseOut="lolite()" onClick="logVariable('userorid')" href="../_variables/userorid.html">$userorid</a>) {
<a name="l141"><span class="linenum"> 141</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l142"><span class="linenum"> 142</span></a>  
<a name="l143"><span class="linenum"> 143</span></a>      if (<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it24994" onMouseOver="hilite(24994)" onMouseOut="lolite()" onClick="logVariable('userorid')" href="../_variables/userorid.html">$userorid</a>)) {
<a name="l144"><span class="linenum"> 144</span></a>          <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a> = <a class="var it24994" onMouseOver="hilite(24994)" onMouseOut="lolite()" onClick="logVariable('userorid')" href="../_variables/userorid.html">$userorid</a>-&gt;<a onClick="logVariable('id')" class="var it45369" onMouseOver="hilite(45369)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l145"><span class="linenum"> 145</span></a>      } else {
<a name="l146"><span class="linenum"> 146</span></a>          <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a> = <a class="var it24994" onMouseOver="hilite(24994)" onMouseOut="lolite()" onClick="logVariable('userorid')" href="../_variables/userorid.html">$userorid</a>;
<a name="l147"><span class="linenum"> 147</span></a>      }
<a name="l148"><span class="linenum"> 148</span></a>      if (<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it36614" onMouseOver="hilite(36614)" onMouseOut="lolite()" onClick="logVariable('grouporid')" href="../_variables/grouporid.html">$grouporid</a>)) {
<a name="l149"><span class="linenum"> 149</span></a>          <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a> = <a class="var it36614" onMouseOver="hilite(36614)" onMouseOut="lolite()" onClick="logVariable('grouporid')" href="../_variables/grouporid.html">$grouporid</a>-&gt;<a onClick="logVariable('id')" class="var it45370" onMouseOver="hilite(45370)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l150"><span class="linenum"> 150</span></a>      } else {
<a name="l151"><span class="linenum"> 151</span></a>          <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a> = <a class="var it36614" onMouseOver="hilite(36614)" onMouseOut="lolite()" onClick="logVariable('grouporid')" href="../_variables/grouporid.html">$grouporid</a>;
<a name="l152"><span class="linenum"> 152</span></a>      }
<a name="l153"><span class="linenum"> 153</span></a>  
<a name="l154"><span class="linenum"> 154</span></a>  <span class="comment">    // Get entry</span>
<a name="l155"><span class="linenum"> 155</span></a>      if (!(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../_variables/entry.html">$entry</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('groups_members',
<a name="l156"><span class="linenum"> 156</span></a>              array('groupid' =&gt; <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>, 'userid' =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>), '*', <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>))) {
<a name="l157"><span class="linenum"> 157</span></a>  <span class="comment">        // If the entry does not exist, they are allowed to remove it (this</span>
<a name="l158"><span class="linenum"> 158</span></a>  <span class="comment">        // is consistent with groups_remove_member below).</span>
<a name="l159"><span class="linenum"> 159</span></a>          return true;
<a name="l160"><span class="linenum"> 160</span></a>      }
<a name="l161"><span class="linenum"> 161</span></a>  
<a name="l162"><span class="linenum"> 162</span></a>  <span class="comment">    // If the entry does not have a component value, they can remove it</span>
<a name="l163"><span class="linenum"> 163</span></a>      if (empty(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('component')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../_variables/component.html">component</a>)) {
<a name="l164"><span class="linenum"> 164</span></a>          return true;
<a name="l165"><span class="linenum"> 165</span></a>      }
<a name="l166"><span class="linenum"> 166</span></a>  
<a name="l167"><span class="linenum"> 167</span></a>  <span class="comment">    // It has a component value, so we need to call a plugin function (if it</span>
<a name="l168"><span class="linenum"> 168</span></a>  <span class="comment">    // exists); the default is to allow removal</span>
<a name="l169"><span class="linenum"> 169</span></a>      return <a class="function" onClick="logFunction('component_callback')" href="../_functions/component_callback.html" onMouseOver="funcPopup(event,'component_callback')">component_callback</a>(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('component')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../_variables/component.html">component</a>, 'allow_group_member_remove',
<a name="l170"><span class="linenum"> 170</span></a>              array(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('itemid')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../_variables/itemid.html">itemid</a>, <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('groupid')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../_variables/groupid.html">groupid</a>, <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('userid')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>), true);
<a name="l171"><span class="linenum"> 171</span></a>  }
<a name="l172"><span class="linenum"> 172</span></a>  
<a name="l173"><span class="linenum"> 173</span></a>  <span class="comment">/**</span>
<a name="l174"><span class="linenum"> 174</span></a>  <span class="comment"> * Deletes the link between the specified user and group.</span>
<a name="l175"><span class="linenum"> 175</span></a>  <span class="comment"> *</span>
<a name="l176"><span class="linenum"> 176</span></a>  <span class="comment"> * @param mixed $grouporid  The group id or group object</span>
<a name="l177"><span class="linenum"> 177</span></a>  <span class="comment"> * @param mixed $userorid   The user id or user object</span>
<a name="l178"><span class="linenum"> 178</span></a>  <span class="comment"> * @return bool True if deletion was successful, false otherwise</span>
<a name="l179"><span class="linenum"> 179</span></a>  <span class="comment"> */</span>
<a name="l180"><span class="linenum"> 180</span></a>  function <a class="function" onClick="logFunction('groups_remove_member')" href="../_functions/groups_remove_member.html" onMouseOver="funcPopup(event,'groups_remove_member')">groups_remove_member</a>(<a class="var it36614" onMouseOver="hilite(36614)" onMouseOut="lolite()" onClick="logVariable('grouporid')" href="../_variables/grouporid.html">$grouporid</a>, <a class="var it24994" onMouseOver="hilite(24994)" onMouseOut="lolite()" onClick="logVariable('userorid')" href="../_variables/userorid.html">$userorid</a>) {
<a name="l181"><span class="linenum"> 181</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l182"><span class="linenum"> 182</span></a>  
<a name="l183"><span class="linenum"> 183</span></a>      if (<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it24994" onMouseOver="hilite(24994)" onMouseOut="lolite()" onClick="logVariable('userorid')" href="../_variables/userorid.html">$userorid</a>)) {
<a name="l184"><span class="linenum"> 184</span></a>          <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a> = <a class="var it24994" onMouseOver="hilite(24994)" onMouseOut="lolite()" onClick="logVariable('userorid')" href="../_variables/userorid.html">$userorid</a>-&gt;<a onClick="logVariable('id')" class="var it45369" onMouseOver="hilite(45369)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l185"><span class="linenum"> 185</span></a>      } else {
<a name="l186"><span class="linenum"> 186</span></a>          <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a> = <a class="var it24994" onMouseOver="hilite(24994)" onMouseOut="lolite()" onClick="logVariable('userorid')" href="../_variables/userorid.html">$userorid</a>;
<a name="l187"><span class="linenum"> 187</span></a>      }
<a name="l188"><span class="linenum"> 188</span></a>  
<a name="l189"><span class="linenum"> 189</span></a>      if (<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it36614" onMouseOver="hilite(36614)" onMouseOut="lolite()" onClick="logVariable('grouporid')" href="../_variables/grouporid.html">$grouporid</a>)) {
<a name="l190"><span class="linenum"> 190</span></a>          <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a> = <a class="var it36614" onMouseOver="hilite(36614)" onMouseOut="lolite()" onClick="logVariable('grouporid')" href="../_variables/grouporid.html">$grouporid</a>-&gt;<a onClick="logVariable('id')" class="var it45370" onMouseOver="hilite(45370)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l191"><span class="linenum"> 191</span></a>          <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>   = <a class="var it36614" onMouseOver="hilite(36614)" onMouseOut="lolite()" onClick="logVariable('grouporid')" href="../_variables/grouporid.html">$grouporid</a>;
<a name="l192"><span class="linenum"> 192</span></a>      } else {
<a name="l193"><span class="linenum"> 193</span></a>          <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a> = <a class="var it36614" onMouseOver="hilite(36614)" onMouseOut="lolite()" onClick="logVariable('grouporid')" href="../_variables/grouporid.html">$grouporid</a>;
<a name="l194"><span class="linenum"> 194</span></a>          <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('groups', array('id'=&gt;<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l195"><span class="linenum"> 195</span></a>      }
<a name="l196"><span class="linenum"> 196</span></a>  
<a name="l197"><span class="linenum"> 197</span></a>      if (!<a class="function" onClick="logFunction('groups_is_member')" href="../_functions/groups_is_member.html" onMouseOver="funcPopup(event,'groups_is_member')">groups_is_member</a>(<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>)) {
<a name="l198"><span class="linenum"> 198</span></a>          return true;
<a name="l199"><span class="linenum"> 199</span></a>      }
<a name="l200"><span class="linenum"> 200</span></a>  
<a name="l201"><span class="linenum"> 201</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('groups_members', array('groupid'=&gt;<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>, 'userid'=&gt;<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>));
<a name="l202"><span class="linenum"> 202</span></a>  
<a name="l203"><span class="linenum"> 203</span></a>  <span class="comment">    // Update group info.</span>
<a name="l204"><span class="linenum"> 204</span></a>      <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l205"><span class="linenum"> 205</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('groups', 'timemodified', <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>, array('id' =&gt; <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>));
<a name="l206"><span class="linenum"> 206</span></a>      <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../_variables/timemodified.html">timemodified</a> = <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>;
<a name="l207"><span class="linenum"> 207</span></a>  
<a name="l208"><span class="linenum"> 208</span></a>  <span class="comment">    // Trigger group event.</span>
<a name="l209"><span class="linenum"> 209</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array(
<a name="l210"><span class="linenum"> 210</span></a>          'context' =&gt; <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('courseid')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>),
<a name="l211"><span class="linenum"> 211</span></a>          'objectid' =&gt; <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>,
<a name="l212"><span class="linenum"> 212</span></a>          'relateduserid' =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>
<a name="l213"><span class="linenum"> 213</span></a>      );
<a name="l214"><span class="linenum"> 214</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('group_member_removed')" href="../_classes/group_member_removed.html" onMouseOver="classPopup(event,'group_member_removed')">group_member_removed</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l215"><span class="linenum"> 215</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('groups', <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>);
<a name="l216"><span class="linenum"> 216</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l217"><span class="linenum"> 217</span></a>  
<a name="l218"><span class="linenum"> 218</span></a>      return true;
<a name="l219"><span class="linenum"> 219</span></a>  }
<a name="l220"><span class="linenum"> 220</span></a>  
<a name="l221"><span class="linenum"> 221</span></a>  <span class="comment">/**</span>
<a name="l222"><span class="linenum"> 222</span></a>  <span class="comment"> * Add a new group</span>
<a name="l223"><span class="linenum"> 223</span></a>  <span class="comment"> *</span>
<a name="l224"><span class="linenum"> 224</span></a>  <span class="comment"> * @param stdClass $data group properties</span>
<a name="l225"><span class="linenum"> 225</span></a>  <span class="comment"> * @param stdClass $editform</span>
<a name="l226"><span class="linenum"> 226</span></a>  <span class="comment"> * @param array $editoroptions</span>
<a name="l227"><span class="linenum"> 227</span></a>  <span class="comment"> * @return id of group or false if error</span>
<a name="l228"><span class="linenum"> 228</span></a>  <span class="comment"> */</span>
<a name="l229"><span class="linenum"> 229</span></a>  function <a class="function" onClick="logFunction('groups_create_group')" href="../_functions/groups_create_group.html" onMouseOver="funcPopup(event,'groups_create_group')">groups_create_group</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>, <a class="var it5501" onMouseOver="hilite(5501)" onMouseOut="lolite()" onClick="logVariable('editform')" href="../_variables/editform.html">$editform</a> = false, <a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../_variables/editoroptions.html">$editoroptions</a> = false) {
<a name="l230"><span class="linenum"> 230</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l231"><span class="linenum"> 231</span></a>  
<a name="l232"><span class="linenum"> 232</span></a>  <span class="comment">    //check that courseid exists</span>
<a name="l233"><span class="linenum"> 233</span></a>      <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l234"><span class="linenum"> 234</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l235"><span class="linenum"> 235</span></a>  
<a name="l236"><span class="linenum"> 236</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timecreated')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/timecreated.html">timecreated</a>  = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l237"><span class="linenum"> 237</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/timemodified.html">timemodified</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timecreated')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/timecreated.html">timecreated</a>;
<a name="l238"><span class="linenum"> 238</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('name')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/name.html">name</a>         = <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('name')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/name.html">name</a>);
<a name="l239"><span class="linenum"> 239</span></a>      if (isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a>)) {
<a name="l240"><span class="linenum"> 240</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a>);
<a name="l241"><span class="linenum"> 241</span></a>          if (<a class="function" onClick="logFunction('groups_get_group_by_idnumber')" href="../_functions/groups_get_group_by_idnumber.html" onMouseOver="funcPopup(event,'groups_get_group_by_idnumber')">groups_get_group_by_idnumber</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a>)) {
<a name="l242"><span class="linenum"> 242</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('idnumbertaken');
<a name="l243"><span class="linenum"> 243</span></a>          }
<a name="l244"><span class="linenum"> 244</span></a>      }
<a name="l245"><span class="linenum"> 245</span></a>  
<a name="l246"><span class="linenum"> 246</span></a>      if (<a class="var it5501" onMouseOver="hilite(5501)" onMouseOut="lolite()" onClick="logVariable('editform')" href="../_variables/editform.html">$editform</a> and <a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../_variables/editoroptions.html">$editoroptions</a>) {
<a name="l247"><span class="linenum"> 247</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('description')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/description.html">description</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('description_editor')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/description_editor.html">description_editor</a>['text'];
<a name="l248"><span class="linenum"> 248</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('descriptionformat')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/descriptionformat.html">descriptionformat</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('description_editor')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/description_editor.html">description_editor</a>['format'];
<a name="l249"><span class="linenum"> 249</span></a>      }
<a name="l250"><span class="linenum"> 250</span></a>  
<a name="l251"><span class="linenum"> 251</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('groups', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>);
<a name="l252"><span class="linenum"> 252</span></a>  
<a name="l253"><span class="linenum"> 253</span></a>      if (<a class="var it5501" onMouseOver="hilite(5501)" onMouseOut="lolite()" onClick="logVariable('editform')" href="../_variables/editform.html">$editform</a> and <a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../_variables/editoroptions.html">$editoroptions</a>) {
<a name="l254"><span class="linenum"> 254</span></a>  <span class="comment">        // Update description from editor with fixed files</span>
<a name="l255"><span class="linenum"> 255</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a> = <a class="function" onClick="logFunction('file_postupdate_standard_editor')" href="../_functions/file_postupdate_standard_editor.html" onMouseOver="funcPopup(event,'file_postupdate_standard_editor')">file_postupdate_standard_editor</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>, 'description', <a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../_variables/editoroptions.html">$editoroptions</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, 'group', 'description', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l256"><span class="linenum"> 256</span></a>          <a class="var it36615" onMouseOver="hilite(36615)" onMouseOut="lolite()" onClick="logVariable('upd')" href="../_variables/upd.html">$upd</a> = new stdClass();
<a name="l257"><span class="linenum"> 257</span></a>          <a class="var it36615" onMouseOver="hilite(36615)" onMouseOut="lolite()" onClick="logVariable('upd')" href="../_variables/upd.html">$upd</a>-&gt;<a onClick="logVariable('id')" class="var it45371" onMouseOver="hilite(45371)" onMouseOut="lolite()" href="../_variables/id.html">id</a>                = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l258"><span class="linenum"> 258</span></a>          <a class="var it36615" onMouseOver="hilite(36615)" onMouseOut="lolite()" onClick="logVariable('upd')" href="../_variables/upd.html">$upd</a>-&gt;<a onClick="logVariable('description')" class="var it45371" onMouseOver="hilite(45371)" onMouseOut="lolite()" href="../_variables/description.html">description</a>       = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('description')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/description.html">description</a>;
<a name="l259"><span class="linenum"> 259</span></a>          <a class="var it36615" onMouseOver="hilite(36615)" onMouseOut="lolite()" onClick="logVariable('upd')" href="../_variables/upd.html">$upd</a>-&gt;<a onClick="logVariable('descriptionformat')" class="var it45371" onMouseOver="hilite(45371)" onMouseOut="lolite()" href="../_variables/descriptionformat.html">descriptionformat</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('descriptionformat')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/descriptionformat.html">descriptionformat</a>;
<a name="l260"><span class="linenum"> 260</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('groups', <a class="var it36615" onMouseOver="hilite(36615)" onMouseOut="lolite()" onClick="logVariable('upd')" href="../_variables/upd.html">$upd</a>);
<a name="l261"><span class="linenum"> 261</span></a>      }
<a name="l262"><span class="linenum"> 262</span></a>  
<a name="l263"><span class="linenum"> 263</span></a>      <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('groups', array('id'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l264"><span class="linenum"> 264</span></a>  
<a name="l265"><span class="linenum"> 265</span></a>      if (<a class="var it5501" onMouseOver="hilite(5501)" onMouseOut="lolite()" onClick="logVariable('editform')" href="../_variables/editform.html">$editform</a>) {
<a name="l266"><span class="linenum"> 266</span></a>          <a class="function" onClick="logFunction('groups_update_group_icon')" href="../_functions/groups_update_group_icon.html" onMouseOver="funcPopup(event,'groups_update_group_icon')">groups_update_group_icon</a>(<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>, <a class="var it5501" onMouseOver="hilite(5501)" onMouseOut="lolite()" onClick="logVariable('editform')" href="../_variables/editform.html">$editform</a>);
<a name="l267"><span class="linenum"> 267</span></a>      }
<a name="l268"><span class="linenum"> 268</span></a>  
<a name="l269"><span class="linenum"> 269</span></a>  <span class="comment">    // Invalidate the grouping cache for the course</span>
<a name="l270"><span class="linenum"> 270</span></a>      <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('invalidate_by_definition')" href="../_functions/invalidate_by_definition.html" onMouseOver="funcPopup(event,'invalidate_by_definition')">invalidate_by_definition</a>('core', 'groupdata', array(), array(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l271"><span class="linenum"> 271</span></a>  
<a name="l272"><span class="linenum"> 272</span></a>  <span class="comment">    // Trigger group event.</span>
<a name="l273"><span class="linenum"> 273</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array(
<a name="l274"><span class="linenum"> 274</span></a>          'context' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>,
<a name="l275"><span class="linenum"> 275</span></a>          'objectid' =&gt; <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>-&gt;id
<a name="l276"><span class="linenum"> 276</span></a>      );
<a name="l277"><span class="linenum"> 277</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('group_created')" href="../_classes/group_created.html" onMouseOver="classPopup(event,'group_created')">group_created</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l278"><span class="linenum"> 278</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('groups', <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>);
<a name="l279"><span class="linenum"> 279</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l280"><span class="linenum"> 280</span></a>  
<a name="l281"><span class="linenum"> 281</span></a>      return <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('id')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l282"><span class="linenum"> 282</span></a>  }
<a name="l283"><span class="linenum"> 283</span></a>  
<a name="l284"><span class="linenum"> 284</span></a>  <span class="comment">/**</span>
<a name="l285"><span class="linenum"> 285</span></a>  <span class="comment"> * Add a new grouping</span>
<a name="l286"><span class="linenum"> 286</span></a>  <span class="comment"> *</span>
<a name="l287"><span class="linenum"> 287</span></a>  <span class="comment"> * @param stdClass $data grouping properties</span>
<a name="l288"><span class="linenum"> 288</span></a>  <span class="comment"> * @param array $editoroptions</span>
<a name="l289"><span class="linenum"> 289</span></a>  <span class="comment"> * @return id of grouping or false if error</span>
<a name="l290"><span class="linenum"> 290</span></a>  <span class="comment"> */</span>
<a name="l291"><span class="linenum"> 291</span></a>  function <a class="function" onClick="logFunction('groups_create_grouping')" href="../_functions/groups_create_grouping.html" onMouseOver="funcPopup(event,'groups_create_grouping')">groups_create_grouping</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>, <a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../_variables/editoroptions.html">$editoroptions</a>=null) {
<a name="l292"><span class="linenum"> 292</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l293"><span class="linenum"> 293</span></a>  
<a name="l294"><span class="linenum"> 294</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timecreated')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/timecreated.html">timecreated</a>  = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l295"><span class="linenum"> 295</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/timemodified.html">timemodified</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timecreated')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/timecreated.html">timecreated</a>;
<a name="l296"><span class="linenum"> 296</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('name')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/name.html">name</a>         = <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('name')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/name.html">name</a>);
<a name="l297"><span class="linenum"> 297</span></a>      if (isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a>)) {
<a name="l298"><span class="linenum"> 298</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a>);
<a name="l299"><span class="linenum"> 299</span></a>          if (<a class="function" onClick="logFunction('groups_get_grouping_by_idnumber')" href="../_functions/groups_get_grouping_by_idnumber.html" onMouseOver="funcPopup(event,'groups_get_grouping_by_idnumber')">groups_get_grouping_by_idnumber</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a>)) {
<a name="l300"><span class="linenum"> 300</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('idnumbertaken');
<a name="l301"><span class="linenum"> 301</span></a>          }
<a name="l302"><span class="linenum"> 302</span></a>      }
<a name="l303"><span class="linenum"> 303</span></a>  
<a name="l304"><span class="linenum"> 304</span></a>      if (<a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../_variables/editoroptions.html">$editoroptions</a> !== null) {
<a name="l305"><span class="linenum"> 305</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('description')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/description.html">description</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('description_editor')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/description_editor.html">description_editor</a>['text'];
<a name="l306"><span class="linenum"> 306</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('descriptionformat')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/descriptionformat.html">descriptionformat</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('description_editor')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/description_editor.html">description_editor</a>['format'];
<a name="l307"><span class="linenum"> 307</span></a>      }
<a name="l308"><span class="linenum"> 308</span></a>  
<a name="l309"><span class="linenum"> 309</span></a>      <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('groupings', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>);
<a name="l310"><span class="linenum"> 310</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>;
<a name="l311"><span class="linenum"> 311</span></a>  
<a name="l312"><span class="linenum"> 312</span></a>      if (<a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../_variables/editoroptions.html">$editoroptions</a> !== null) {
<a name="l313"><span class="linenum"> 313</span></a>          <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('description')" href="../_variables/description.html">$description</a> = new stdClass;
<a name="l314"><span class="linenum"> 314</span></a>          <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('description')" href="../_variables/description.html">$description</a>-&gt;<a onClick="logVariable('id')" class="var it44243" onMouseOver="hilite(44243)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l315"><span class="linenum"> 315</span></a>          <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('description')" href="../_variables/description.html">$description</a>-&gt;<a onClick="logVariable('description_editor')" class="var it44243" onMouseOver="hilite(44243)" onMouseOut="lolite()" href="../_variables/description_editor.html">description_editor</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('description_editor')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/description_editor.html">description_editor</a>;
<a name="l316"><span class="linenum"> 316</span></a>          <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('description')" href="../_variables/description.html">$description</a> = <a class="function" onClick="logFunction('file_postupdate_standard_editor')" href="../_functions/file_postupdate_standard_editor.html" onMouseOver="funcPopup(event,'file_postupdate_standard_editor')">file_postupdate_standard_editor</a>(<a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('description')" href="../_variables/description.html">$description</a>, 'description', <a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../_variables/editoroptions.html">$editoroptions</a>, <a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../_variables/editoroptions.html">$editoroptions</a>['context'], 'grouping', 'description', <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('description')" href="../_variables/description.html">$description</a>-&gt;<a onClick="logVariable('id')" class="var it44243" onMouseOver="hilite(44243)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l317"><span class="linenum"> 317</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('groupings', <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('description')" href="../_variables/description.html">$description</a>);
<a name="l318"><span class="linenum"> 318</span></a>      }
<a name="l319"><span class="linenum"> 319</span></a>  
<a name="l320"><span class="linenum"> 320</span></a>  <span class="comment">    // Invalidate the grouping cache for the course</span>
<a name="l321"><span class="linenum"> 321</span></a>      <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('invalidate_by_definition')" href="../_functions/invalidate_by_definition.html" onMouseOver="funcPopup(event,'invalidate_by_definition')">invalidate_by_definition</a>('core', 'groupdata', array(), array(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>));
<a name="l322"><span class="linenum"> 322</span></a>  
<a name="l323"><span class="linenum"> 323</span></a>  <span class="comment">    // Trigger group event.</span>
<a name="l324"><span class="linenum"> 324</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array(
<a name="l325"><span class="linenum"> 325</span></a>          'context' =&gt; <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>),
<a name="l326"><span class="linenum"> 326</span></a>          'objectid' =&gt; <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>
<a name="l327"><span class="linenum"> 327</span></a>      );
<a name="l328"><span class="linenum"> 328</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('grouping_created')" href="../_classes/grouping_created.html" onMouseOver="classPopup(event,'grouping_created')">grouping_created</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l329"><span class="linenum"> 329</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l330"><span class="linenum"> 330</span></a>  
<a name="l331"><span class="linenum"> 331</span></a>      return <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>;
<a name="l332"><span class="linenum"> 332</span></a>  }
<a name="l333"><span class="linenum"> 333</span></a>  
<a name="l334"><span class="linenum"> 334</span></a>  <span class="comment">/**</span>
<a name="l335"><span class="linenum"> 335</span></a>  <span class="comment"> * Update the group icon from form data</span>
<a name="l336"><span class="linenum"> 336</span></a>  <span class="comment"> *</span>
<a name="l337"><span class="linenum"> 337</span></a>  <span class="comment"> * @param stdClass $group group information</span>
<a name="l338"><span class="linenum"> 338</span></a>  <span class="comment"> * @param stdClass $data</span>
<a name="l339"><span class="linenum"> 339</span></a>  <span class="comment"> * @param stdClass $editform</span>
<a name="l340"><span class="linenum"> 340</span></a>  <span class="comment"> */</span>
<a name="l341"><span class="linenum"> 341</span></a>  function <a class="function" onClick="logFunction('groups_update_group_icon')" href="../_functions/groups_update_group_icon.html" onMouseOver="funcPopup(event,'groups_update_group_icon')">groups_update_group_icon</a>(<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>, <a class="var it5501" onMouseOver="hilite(5501)" onMouseOut="lolite()" onClick="logVariable('editform')" href="../_variables/editform.html">$editform</a>) {
<a name="l342"><span class="linenum"> 342</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l343"><span class="linenum"> 343</span></a>      require_once(&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>/gdlib.php&quot;);
<a name="l344"><span class="linenum"> 344</span></a>  
<a name="l345"><span class="linenum"> 345</span></a>      <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l346"><span class="linenum"> 346</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('courseid')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l347"><span class="linenum"> 347</span></a>      <a class="var it35338" onMouseOver="hilite(35338)" onMouseOut="lolite()" onClick="logVariable('newpicture')" href="../_variables/newpicture.html">$newpicture</a> = <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('picture')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../_variables/picture.html">picture</a>;
<a name="l348"><span class="linenum"> 348</span></a>  
<a name="l349"><span class="linenum"> 349</span></a>      if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('deletepicture')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/deletepicture.html">deletepicture</a>)) {
<a name="l350"><span class="linenum"> 350</span></a>          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('delete_area_files')" href="../_functions/delete_area_files.html" onMouseOver="funcPopup(event,'delete_area_files')">delete_area_files</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'group', 'icon', <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('id')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l351"><span class="linenum"> 351</span></a>          <a class="var it35338" onMouseOver="hilite(35338)" onMouseOut="lolite()" onClick="logVariable('newpicture')" href="../_variables/newpicture.html">$newpicture</a> = 0;
<a name="l352"><span class="linenum"> 352</span></a>      } else if (<a class="var it21934" onMouseOver="hilite(21934)" onMouseOut="lolite()" onClick="logVariable('iconfile')" href="../_variables/iconfile.html">$iconfile</a> = <a class="var it5501" onMouseOver="hilite(5501)" onMouseOut="lolite()" onClick="logVariable('editform')" href="../_variables/editform.html">$editform</a>-&gt;<a class="function" onClick="logFunction('save_temp_file')" href="../_functions/save_temp_file.html" onMouseOver="funcPopup(event,'save_temp_file')">save_temp_file</a>('imagefile')) {
<a name="l353"><span class="linenum"> 353</span></a>          if (<a class="var it8010" onMouseOver="hilite(8010)" onMouseOut="lolite()" onClick="logVariable('rev')" href="../_variables/rev.html">$rev</a> = <a class="function" onClick="logFunction('process_new_icon')" href="../_functions/process_new_icon.html" onMouseOver="funcPopup(event,'process_new_icon')">process_new_icon</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, 'group', 'icon', <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('id')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it21934" onMouseOver="hilite(21934)" onMouseOut="lolite()" onClick="logVariable('iconfile')" href="../_variables/iconfile.html">$iconfile</a>)) {
<a name="l354"><span class="linenum"> 354</span></a>              <a class="var it35338" onMouseOver="hilite(35338)" onMouseOut="lolite()" onClick="logVariable('newpicture')" href="../_variables/newpicture.html">$newpicture</a> = <a class="var it8010" onMouseOver="hilite(8010)" onMouseOut="lolite()" onClick="logVariable('rev')" href="../_variables/rev.html">$rev</a>;
<a name="l355"><span class="linenum"> 355</span></a>          } else {
<a name="l356"><span class="linenum"> 356</span></a>              <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('delete_area_files')" href="../_functions/delete_area_files.html" onMouseOver="funcPopup(event,'delete_area_files')">delete_area_files</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'group', 'icon', <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('id')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l357"><span class="linenum"> 357</span></a>              <a class="var it35338" onMouseOver="hilite(35338)" onMouseOut="lolite()" onClick="logVariable('newpicture')" href="../_variables/newpicture.html">$newpicture</a> = 0;
<a name="l358"><span class="linenum"> 358</span></a>          }
<a name="l359"><span class="linenum"> 359</span></a>          @<a class="phpfunction" onClick="logFunction('unlink')" href="../_functions/unlink.html" onMouseOver="phpfuncPopup(event,'unlink')">unlink</a>(<a class="var it21934" onMouseOver="hilite(21934)" onMouseOut="lolite()" onClick="logVariable('iconfile')" href="../_variables/iconfile.html">$iconfile</a>);
<a name="l360"><span class="linenum"> 360</span></a>      }
<a name="l361"><span class="linenum"> 361</span></a>  
<a name="l362"><span class="linenum"> 362</span></a>      if (<a class="var it35338" onMouseOver="hilite(35338)" onMouseOut="lolite()" onClick="logVariable('newpicture')" href="../_variables/newpicture.html">$newpicture</a> != <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('picture')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../_variables/picture.html">picture</a>) {
<a name="l363"><span class="linenum"> 363</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('groups', 'picture', <a class="var it35338" onMouseOver="hilite(35338)" onMouseOut="lolite()" onClick="logVariable('newpicture')" href="../_variables/newpicture.html">$newpicture</a>, array('id' =&gt; <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('id')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l364"><span class="linenum"> 364</span></a>          <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('picture')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../_variables/picture.html">picture</a> = <a class="var it35338" onMouseOver="hilite(35338)" onMouseOut="lolite()" onClick="logVariable('newpicture')" href="../_variables/newpicture.html">$newpicture</a>;
<a name="l365"><span class="linenum"> 365</span></a>  
<a name="l366"><span class="linenum"> 366</span></a>  <span class="comment">        // Invalidate the group data as we've updated the group record.</span>
<a name="l367"><span class="linenum"> 367</span></a>          <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('invalidate_by_definition')" href="../_functions/invalidate_by_definition.html" onMouseOver="funcPopup(event,'invalidate_by_definition')">invalidate_by_definition</a>('core', 'groupdata', array(), array(<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('courseid')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>));
<a name="l368"><span class="linenum"> 368</span></a>      }
<a name="l369"><span class="linenum"> 369</span></a>  }
<a name="l370"><span class="linenum"> 370</span></a>  
<a name="l371"><span class="linenum"> 371</span></a>  <span class="comment">/**</span>
<a name="l372"><span class="linenum"> 372</span></a>  <span class="comment"> * Update group</span>
<a name="l373"><span class="linenum"> 373</span></a>  <span class="comment"> *</span>
<a name="l374"><span class="linenum"> 374</span></a>  <span class="comment"> * @param stdClass $data group properties (with magic quotes)</span>
<a name="l375"><span class="linenum"> 375</span></a>  <span class="comment"> * @param stdClass $editform</span>
<a name="l376"><span class="linenum"> 376</span></a>  <span class="comment"> * @param array $editoroptions</span>
<a name="l377"><span class="linenum"> 377</span></a>  <span class="comment"> * @return bool true or exception</span>
<a name="l378"><span class="linenum"> 378</span></a>  <span class="comment"> */</span>
<a name="l379"><span class="linenum"> 379</span></a>  function <a class="function" onClick="logFunction('groups_update_group')" href="../_functions/groups_update_group.html" onMouseOver="funcPopup(event,'groups_update_group')">groups_update_group</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>, <a class="var it5501" onMouseOver="hilite(5501)" onMouseOut="lolite()" onClick="logVariable('editform')" href="../_variables/editform.html">$editform</a> = false, <a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../_variables/editoroptions.html">$editoroptions</a> = false) {
<a name="l380"><span class="linenum"> 380</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l381"><span class="linenum"> 381</span></a>  
<a name="l382"><span class="linenum"> 382</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>);
<a name="l383"><span class="linenum"> 383</span></a>  
<a name="l384"><span class="linenum"> 384</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l385"><span class="linenum"> 385</span></a>      if (isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('name')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/name.html">name</a>)) {
<a name="l386"><span class="linenum"> 386</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('name')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('name')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/name.html">name</a>);
<a name="l387"><span class="linenum"> 387</span></a>      }
<a name="l388"><span class="linenum"> 388</span></a>      if (isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a>)) {
<a name="l389"><span class="linenum"> 389</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a>);
<a name="l390"><span class="linenum"> 390</span></a>          if ((<a class="var it10898" onMouseOver="hilite(10898)" onMouseOut="lolite()" onClick="logVariable('existing')" href="../_variables/existing.html">$existing</a> = <a class="function" onClick="logFunction('groups_get_group_by_idnumber')" href="../_functions/groups_get_group_by_idnumber.html" onMouseOver="funcPopup(event,'groups_get_group_by_idnumber')">groups_get_group_by_idnumber</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a>)) &amp;&amp; <a class="var it10898" onMouseOver="hilite(10898)" onMouseOut="lolite()" onClick="logVariable('existing')" href="../_variables/existing.html">$existing</a>-&gt;<a onClick="logVariable('id')" class="var it43440" onMouseOver="hilite(43440)" onMouseOut="lolite()" href="../_variables/id.html">id</a> != <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l391"><span class="linenum"> 391</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('idnumbertaken');
<a name="l392"><span class="linenum"> 392</span></a>          }
<a name="l393"><span class="linenum"> 393</span></a>      }
<a name="l394"><span class="linenum"> 394</span></a>  
<a name="l395"><span class="linenum"> 395</span></a>      if (<a class="var it5501" onMouseOver="hilite(5501)" onMouseOut="lolite()" onClick="logVariable('editform')" href="../_variables/editform.html">$editform</a> and <a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../_variables/editoroptions.html">$editoroptions</a>) {
<a name="l396"><span class="linenum"> 396</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a> = <a class="function" onClick="logFunction('file_postupdate_standard_editor')" href="../_functions/file_postupdate_standard_editor.html" onMouseOver="funcPopup(event,'file_postupdate_standard_editor')">file_postupdate_standard_editor</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>, 'description', <a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../_variables/editoroptions.html">$editoroptions</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, 'group', 'description', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l397"><span class="linenum"> 397</span></a>      }
<a name="l398"><span class="linenum"> 398</span></a>  
<a name="l399"><span class="linenum"> 399</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('groups', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>);
<a name="l400"><span class="linenum"> 400</span></a>  
<a name="l401"><span class="linenum"> 401</span></a>  <span class="comment">    // Invalidate the group data.</span>
<a name="l402"><span class="linenum"> 402</span></a>      <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('invalidate_by_definition')" href="../_functions/invalidate_by_definition.html" onMouseOver="funcPopup(event,'invalidate_by_definition')">invalidate_by_definition</a>('core', 'groupdata', array(), array(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>));
<a name="l403"><span class="linenum"> 403</span></a>  
<a name="l404"><span class="linenum"> 404</span></a>      <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('groups', array('id'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l405"><span class="linenum"> 405</span></a>  
<a name="l406"><span class="linenum"> 406</span></a>      if (<a class="var it5501" onMouseOver="hilite(5501)" onMouseOut="lolite()" onClick="logVariable('editform')" href="../_variables/editform.html">$editform</a>) {
<a name="l407"><span class="linenum"> 407</span></a>          <a class="function" onClick="logFunction('groups_update_group_icon')" href="../_functions/groups_update_group_icon.html" onMouseOver="funcPopup(event,'groups_update_group_icon')">groups_update_group_icon</a>(<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>, <a class="var it5501" onMouseOver="hilite(5501)" onMouseOut="lolite()" onClick="logVariable('editform')" href="../_variables/editform.html">$editform</a>);
<a name="l408"><span class="linenum"> 408</span></a>      }
<a name="l409"><span class="linenum"> 409</span></a>  
<a name="l410"><span class="linenum"> 410</span></a>  <span class="comment">    // Trigger group event.</span>
<a name="l411"><span class="linenum"> 411</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array(
<a name="l412"><span class="linenum"> 412</span></a>          'context' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>,
<a name="l413"><span class="linenum"> 413</span></a>          'objectid' =&gt; <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>-&gt;id
<a name="l414"><span class="linenum"> 414</span></a>      );
<a name="l415"><span class="linenum"> 415</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('group_updated')" href="../_classes/group_updated.html" onMouseOver="classPopup(event,'group_updated')">group_updated</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l416"><span class="linenum"> 416</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('groups', <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>);
<a name="l417"><span class="linenum"> 417</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l418"><span class="linenum"> 418</span></a>  
<a name="l419"><span class="linenum"> 419</span></a>      return true;
<a name="l420"><span class="linenum"> 420</span></a>  }
<a name="l421"><span class="linenum"> 421</span></a>  
<a name="l422"><span class="linenum"> 422</span></a>  <span class="comment">/**</span>
<a name="l423"><span class="linenum"> 423</span></a>  <span class="comment"> * Update grouping</span>
<a name="l424"><span class="linenum"> 424</span></a>  <span class="comment"> *</span>
<a name="l425"><span class="linenum"> 425</span></a>  <span class="comment"> * @param stdClass $data grouping properties (with magic quotes)</span>
<a name="l426"><span class="linenum"> 426</span></a>  <span class="comment"> * @param array $editoroptions</span>
<a name="l427"><span class="linenum"> 427</span></a>  <span class="comment"> * @return bool true or exception</span>
<a name="l428"><span class="linenum"> 428</span></a>  <span class="comment"> */</span>
<a name="l429"><span class="linenum"> 429</span></a>  function <a class="function" onClick="logFunction('groups_update_grouping')" href="../_functions/groups_update_grouping.html" onMouseOver="funcPopup(event,'groups_update_grouping')">groups_update_grouping</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>, <a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../_variables/editoroptions.html">$editoroptions</a>=null) {
<a name="l430"><span class="linenum"> 430</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l431"><span class="linenum"> 431</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l432"><span class="linenum"> 432</span></a>      if (isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('name')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/name.html">name</a>)) {
<a name="l433"><span class="linenum"> 433</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('name')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('name')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/name.html">name</a>);
<a name="l434"><span class="linenum"> 434</span></a>      }
<a name="l435"><span class="linenum"> 435</span></a>      if (isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a>)) {
<a name="l436"><span class="linenum"> 436</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a>);
<a name="l437"><span class="linenum"> 437</span></a>          if ((<a class="var it10898" onMouseOver="hilite(10898)" onMouseOut="lolite()" onClick="logVariable('existing')" href="../_variables/existing.html">$existing</a> = <a class="function" onClick="logFunction('groups_get_grouping_by_idnumber')" href="../_functions/groups_get_grouping_by_idnumber.html" onMouseOver="funcPopup(event,'groups_get_grouping_by_idnumber')">groups_get_grouping_by_idnumber</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/idnumber.html">idnumber</a>)) &amp;&amp; <a class="var it10898" onMouseOver="hilite(10898)" onMouseOut="lolite()" onClick="logVariable('existing')" href="../_variables/existing.html">$existing</a>-&gt;<a onClick="logVariable('id')" class="var it43440" onMouseOver="hilite(43440)" onMouseOut="lolite()" href="../_variables/id.html">id</a> != <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l438"><span class="linenum"> 438</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('idnumbertaken');
<a name="l439"><span class="linenum"> 439</span></a>          }
<a name="l440"><span class="linenum"> 440</span></a>      }
<a name="l441"><span class="linenum"> 441</span></a>      if (<a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../_variables/editoroptions.html">$editoroptions</a> !== null) {
<a name="l442"><span class="linenum"> 442</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a> = <a class="function" onClick="logFunction('file_postupdate_standard_editor')" href="../_functions/file_postupdate_standard_editor.html" onMouseOver="funcPopup(event,'file_postupdate_standard_editor')">file_postupdate_standard_editor</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>, 'description', <a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../_variables/editoroptions.html">$editoroptions</a>, <a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../_variables/editoroptions.html">$editoroptions</a>['context'], 'grouping', 'description', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l443"><span class="linenum"> 443</span></a>      }
<a name="l444"><span class="linenum"> 444</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('groupings', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>);
<a name="l445"><span class="linenum"> 445</span></a>  
<a name="l446"><span class="linenum"> 446</span></a>  <span class="comment">    // Invalidate the group data.</span>
<a name="l447"><span class="linenum"> 447</span></a>      <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('invalidate_by_definition')" href="../_functions/invalidate_by_definition.html" onMouseOver="funcPopup(event,'invalidate_by_definition')">invalidate_by_definition</a>('core', 'groupdata', array(), array(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>));
<a name="l448"><span class="linenum"> 448</span></a>  
<a name="l449"><span class="linenum"> 449</span></a>  <span class="comment">    // Trigger group event.</span>
<a name="l450"><span class="linenum"> 450</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array(
<a name="l451"><span class="linenum"> 451</span></a>          'context' =&gt; <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>),
<a name="l452"><span class="linenum"> 452</span></a>          'objectid' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;id
<a name="l453"><span class="linenum"> 453</span></a>      );
<a name="l454"><span class="linenum"> 454</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('grouping_updated')" href="../_classes/grouping_updated.html" onMouseOver="classPopup(event,'grouping_updated')">grouping_updated</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l455"><span class="linenum"> 455</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l456"><span class="linenum"> 456</span></a>  
<a name="l457"><span class="linenum"> 457</span></a>      return true;
<a name="l458"><span class="linenum"> 458</span></a>  }
<a name="l459"><span class="linenum"> 459</span></a>  
<a name="l460"><span class="linenum"> 460</span></a>  <span class="comment">/**</span>
<a name="l461"><span class="linenum"> 461</span></a>  <span class="comment"> * Delete a group best effort, first removing members and links with courses and groupings.</span>
<a name="l462"><span class="linenum"> 462</span></a>  <span class="comment"> * Removes group avatar too.</span>
<a name="l463"><span class="linenum"> 463</span></a>  <span class="comment"> *</span>
<a name="l464"><span class="linenum"> 464</span></a>  <span class="comment"> * @param mixed $grouporid The id of group to delete or full group object</span>
<a name="l465"><span class="linenum"> 465</span></a>  <span class="comment"> * @return bool True if deletion was successful, false otherwise</span>
<a name="l466"><span class="linenum"> 466</span></a>  <span class="comment"> */</span>
<a name="l467"><span class="linenum"> 467</span></a>  function <a class="function" onClick="logFunction('groups_delete_group')" href="../_functions/groups_delete_group.html" onMouseOver="funcPopup(event,'groups_delete_group')">groups_delete_group</a>(<a class="var it36614" onMouseOver="hilite(36614)" onMouseOut="lolite()" onClick="logVariable('grouporid')" href="../_variables/grouporid.html">$grouporid</a>) {
<a name="l468"><span class="linenum"> 468</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l469"><span class="linenum"> 469</span></a>      require_once(&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>/gdlib.php&quot;);
<a name="l470"><span class="linenum"> 470</span></a>  
<a name="l471"><span class="linenum"> 471</span></a>      if (<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it36614" onMouseOver="hilite(36614)" onMouseOut="lolite()" onClick="logVariable('grouporid')" href="../_variables/grouporid.html">$grouporid</a>)) {
<a name="l472"><span class="linenum"> 472</span></a>          <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a> = <a class="var it36614" onMouseOver="hilite(36614)" onMouseOut="lolite()" onClick="logVariable('grouporid')" href="../_variables/grouporid.html">$grouporid</a>-&gt;<a onClick="logVariable('id')" class="var it45370" onMouseOver="hilite(45370)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l473"><span class="linenum"> 473</span></a>          <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>   = <a class="var it36614" onMouseOver="hilite(36614)" onMouseOut="lolite()" onClick="logVariable('grouporid')" href="../_variables/grouporid.html">$grouporid</a>;
<a name="l474"><span class="linenum"> 474</span></a>      } else {
<a name="l475"><span class="linenum"> 475</span></a>          <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a> = <a class="var it36614" onMouseOver="hilite(36614)" onMouseOut="lolite()" onClick="logVariable('grouporid')" href="../_variables/grouporid.html">$grouporid</a>;
<a name="l476"><span class="linenum"> 476</span></a>          if (!<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('groups', array('id'=&gt;<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>))) {
<a name="l477"><span class="linenum"> 477</span></a>  <span class="comment">            //silently ignore attempts to delete missing already deleted groups ;-)</span>
<a name="l478"><span class="linenum"> 478</span></a>              return true;
<a name="l479"><span class="linenum"> 479</span></a>          }
<a name="l480"><span class="linenum"> 480</span></a>      }
<a name="l481"><span class="linenum"> 481</span></a>  
<a name="l482"><span class="linenum"> 482</span></a>  <span class="comment">    // delete group calendar events</span>
<a name="l483"><span class="linenum"> 483</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('event', array('groupid'=&gt;<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>));
<a name="l484"><span class="linenum"> 484</span></a>  <span class="comment">    //first delete usage in groupings_groups</span>
<a name="l485"><span class="linenum"> 485</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('groupings_groups', array('groupid'=&gt;<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>));
<a name="l486"><span class="linenum"> 486</span></a>  <span class="comment">    //delete members</span>
<a name="l487"><span class="linenum"> 487</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('groups_members', array('groupid'=&gt;<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>));
<a name="l488"><span class="linenum"> 488</span></a>  <span class="comment">    //group itself last</span>
<a name="l489"><span class="linenum"> 489</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('groups', array('id'=&gt;<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>));
<a name="l490"><span class="linenum"> 490</span></a>  
<a name="l491"><span class="linenum"> 491</span></a>  <span class="comment">    // Delete all files associated with this group</span>
<a name="l492"><span class="linenum"> 492</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('courseid')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>);
<a name="l493"><span class="linenum"> 493</span></a>      <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l494"><span class="linenum"> 494</span></a>      <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('delete_area_files')" href="../_functions/delete_area_files.html" onMouseOver="funcPopup(event,'delete_area_files')">delete_area_files</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'group', 'description', <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>);
<a name="l495"><span class="linenum"> 495</span></a>      <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('delete_area_files')" href="../_functions/delete_area_files.html" onMouseOver="funcPopup(event,'delete_area_files')">delete_area_files</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'group', 'icon', <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>);
<a name="l496"><span class="linenum"> 496</span></a>  
<a name="l497"><span class="linenum"> 497</span></a>  <span class="comment">    // Invalidate the grouping cache for the course</span>
<a name="l498"><span class="linenum"> 498</span></a>      <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('invalidate_by_definition')" href="../_functions/invalidate_by_definition.html" onMouseOver="funcPopup(event,'invalidate_by_definition')">invalidate_by_definition</a>('core', 'groupdata', array(), array(<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('courseid')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>));
<a name="l499"><span class="linenum"> 499</span></a>  
<a name="l500"><span class="linenum"> 500</span></a>  <span class="comment">    // Trigger group event.</span>
<a name="l501"><span class="linenum"> 501</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array(
<a name="l502"><span class="linenum"> 502</span></a>          'context' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>,
<a name="l503"><span class="linenum"> 503</span></a>          'objectid' =&gt; <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>
<a name="l504"><span class="linenum"> 504</span></a>      );
<a name="l505"><span class="linenum"> 505</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('group_deleted')" href="../_classes/group_deleted.html" onMouseOver="classPopup(event,'group_deleted')">group_deleted</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l506"><span class="linenum"> 506</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('groups', <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>);
<a name="l507"><span class="linenum"> 507</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l508"><span class="linenum"> 508</span></a>  
<a name="l509"><span class="linenum"> 509</span></a>      return true;
<a name="l510"><span class="linenum"> 510</span></a>  }
<a name="l511"><span class="linenum"> 511</span></a>  
<a name="l512"><span class="linenum"> 512</span></a>  <span class="comment">/**</span>
<a name="l513"><span class="linenum"> 513</span></a>  <span class="comment"> * Delete grouping</span>
<a name="l514"><span class="linenum"> 514</span></a>  <span class="comment"> *</span>
<a name="l515"><span class="linenum"> 515</span></a>  <span class="comment"> * @param int $groupingorid</span>
<a name="l516"><span class="linenum"> 516</span></a>  <span class="comment"> * @return bool success</span>
<a name="l517"><span class="linenum"> 517</span></a>  <span class="comment"> */</span>
<a name="l518"><span class="linenum"> 518</span></a>  function <a class="function" onClick="logFunction('groups_delete_grouping')" href="../_functions/groups_delete_grouping.html" onMouseOver="funcPopup(event,'groups_delete_grouping')">groups_delete_grouping</a>(<a class="var it36616" onMouseOver="hilite(36616)" onMouseOut="lolite()" onClick="logVariable('groupingorid')" href="../_variables/groupingorid.html">$groupingorid</a>) {
<a name="l519"><span class="linenum"> 519</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l520"><span class="linenum"> 520</span></a>  
<a name="l521"><span class="linenum"> 521</span></a>      if (<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it36616" onMouseOver="hilite(36616)" onMouseOut="lolite()" onClick="logVariable('groupingorid')" href="../_variables/groupingorid.html">$groupingorid</a>)) {
<a name="l522"><span class="linenum"> 522</span></a>          <a class="var it680" onMouseOver="hilite(680)" onMouseOut="lolite()" onClick="logVariable('groupingid')" href="../_variables/groupingid.html">$groupingid</a> = <a class="var it36616" onMouseOver="hilite(36616)" onMouseOut="lolite()" onClick="logVariable('groupingorid')" href="../_variables/groupingorid.html">$groupingorid</a>-&gt;<a onClick="logVariable('id')" class="var it45372" onMouseOver="hilite(45372)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l523"><span class="linenum"> 523</span></a>          <a class="var it661" onMouseOver="hilite(661)" onMouseOut="lolite()" onClick="logVariable('grouping')" href="../_variables/grouping.html">$grouping</a>   = <a class="var it36616" onMouseOver="hilite(36616)" onMouseOut="lolite()" onClick="logVariable('groupingorid')" href="../_variables/groupingorid.html">$groupingorid</a>;
<a name="l524"><span class="linenum"> 524</span></a>      } else {
<a name="l525"><span class="linenum"> 525</span></a>          <a class="var it680" onMouseOver="hilite(680)" onMouseOut="lolite()" onClick="logVariable('groupingid')" href="../_variables/groupingid.html">$groupingid</a> = <a class="var it36616" onMouseOver="hilite(36616)" onMouseOut="lolite()" onClick="logVariable('groupingorid')" href="../_variables/groupingorid.html">$groupingorid</a>;
<a name="l526"><span class="linenum"> 526</span></a>          if (!<a class="var it661" onMouseOver="hilite(661)" onMouseOut="lolite()" onClick="logVariable('grouping')" href="../_variables/grouping.html">$grouping</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('groupings', array('id'=&gt;<a class="var it36616" onMouseOver="hilite(36616)" onMouseOut="lolite()" onClick="logVariable('groupingorid')" href="../_variables/groupingorid.html">$groupingorid</a>))) {
<a name="l527"><span class="linenum"> 527</span></a>  <span class="comment">            //silently ignore attempts to delete missing already deleted groupings ;-)</span>
<a name="l528"><span class="linenum"> 528</span></a>              return true;
<a name="l529"><span class="linenum"> 529</span></a>          }
<a name="l530"><span class="linenum"> 530</span></a>      }
<a name="l531"><span class="linenum"> 531</span></a>  
<a name="l532"><span class="linenum"> 532</span></a>  <span class="comment">    //first delete usage in groupings_groups</span>
<a name="l533"><span class="linenum"> 533</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('groupings_groups', array('groupingid'=&gt;<a class="var it680" onMouseOver="hilite(680)" onMouseOut="lolite()" onClick="logVariable('groupingid')" href="../_variables/groupingid.html">$groupingid</a>));
<a name="l534"><span class="linenum"> 534</span></a>  <span class="comment">    // remove the default groupingid from course</span>
<a name="l535"><span class="linenum"> 535</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course', 'defaultgroupingid', 0, array('defaultgroupingid'=&gt;<a class="var it680" onMouseOver="hilite(680)" onMouseOut="lolite()" onClick="logVariable('groupingid')" href="../_variables/groupingid.html">$groupingid</a>));
<a name="l536"><span class="linenum"> 536</span></a>  <span class="comment">    // remove the groupingid from all course modules</span>
<a name="l537"><span class="linenum"> 537</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('course_modules', 'groupingid', 0, array('groupingid'=&gt;<a class="var it680" onMouseOver="hilite(680)" onMouseOut="lolite()" onClick="logVariable('groupingid')" href="../_variables/groupingid.html">$groupingid</a>));
<a name="l538"><span class="linenum"> 538</span></a>  <span class="comment">    //group itself last</span>
<a name="l539"><span class="linenum"> 539</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('groupings', array('id'=&gt;<a class="var it680" onMouseOver="hilite(680)" onMouseOut="lolite()" onClick="logVariable('groupingid')" href="../_variables/groupingid.html">$groupingid</a>));
<a name="l540"><span class="linenum"> 540</span></a>  
<a name="l541"><span class="linenum"> 541</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it661" onMouseOver="hilite(661)" onMouseOut="lolite()" onClick="logVariable('grouping')" href="../_variables/grouping.html">$grouping</a>-&gt;<a onClick="logVariable('courseid')" class="var it42931" onMouseOver="hilite(42931)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>);
<a name="l542"><span class="linenum"> 542</span></a>      <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l543"><span class="linenum"> 543</span></a>      <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../_variables/files.html">$files</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_area_files')" href="../_functions/get_area_files.html" onMouseOver="funcPopup(event,'get_area_files')">get_area_files</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'grouping', 'description', <a class="var it680" onMouseOver="hilite(680)" onMouseOut="lolite()" onClick="logVariable('groupingid')" href="../_variables/groupingid.html">$groupingid</a>);
<a name="l544"><span class="linenum"> 544</span></a>      foreach (<a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../_variables/files.html">$files</a> as <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>) {
<a name="l545"><span class="linenum"> 545</span></a>          <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>();
<a name="l546"><span class="linenum"> 546</span></a>      }
<a name="l547"><span class="linenum"> 547</span></a>  
<a name="l548"><span class="linenum"> 548</span></a>  <span class="comment">    // Invalidate the grouping cache for the course</span>
<a name="l549"><span class="linenum"> 549</span></a>      <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('invalidate_by_definition')" href="../_functions/invalidate_by_definition.html" onMouseOver="funcPopup(event,'invalidate_by_definition')">invalidate_by_definition</a>('core', 'groupdata', array(), array(<a class="var it661" onMouseOver="hilite(661)" onMouseOut="lolite()" onClick="logVariable('grouping')" href="../_variables/grouping.html">$grouping</a>-&gt;<a onClick="logVariable('courseid')" class="var it42931" onMouseOver="hilite(42931)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>));
<a name="l550"><span class="linenum"> 550</span></a>  
<a name="l551"><span class="linenum"> 551</span></a>  <span class="comment">    // Trigger group event.</span>
<a name="l552"><span class="linenum"> 552</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array(
<a name="l553"><span class="linenum"> 553</span></a>          'context' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>,
<a name="l554"><span class="linenum"> 554</span></a>          'objectid' =&gt; <a class="var it680" onMouseOver="hilite(680)" onMouseOut="lolite()" onClick="logVariable('groupingid')" href="../_variables/groupingid.html">$groupingid</a>
<a name="l555"><span class="linenum"> 555</span></a>      );
<a name="l556"><span class="linenum"> 556</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('grouping_deleted')" href="../_classes/grouping_deleted.html" onMouseOver="classPopup(event,'grouping_deleted')">grouping_deleted</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l557"><span class="linenum"> 557</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('groupings', <a class="var it661" onMouseOver="hilite(661)" onMouseOut="lolite()" onClick="logVariable('grouping')" href="../_variables/grouping.html">$grouping</a>);
<a name="l558"><span class="linenum"> 558</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l559"><span class="linenum"> 559</span></a>  
<a name="l560"><span class="linenum"> 560</span></a>      return true;
<a name="l561"><span class="linenum"> 561</span></a>  }
<a name="l562"><span class="linenum"> 562</span></a>  
<a name="l563"><span class="linenum"> 563</span></a>  <span class="comment">/**</span>
<a name="l564"><span class="linenum"> 564</span></a>  <span class="comment"> * Remove all users (or one user) from all groups in course</span>
<a name="l565"><span class="linenum"> 565</span></a>  <span class="comment"> *</span>
<a name="l566"><span class="linenum"> 566</span></a>  <span class="comment"> * @param int $courseid</span>
<a name="l567"><span class="linenum"> 567</span></a>  <span class="comment"> * @param int $userid 0 means all users</span>
<a name="l568"><span class="linenum"> 568</span></a>  <span class="comment"> * @param bool $unused - formerly $showfeedback, is no longer used.</span>
<a name="l569"><span class="linenum"> 569</span></a>  <span class="comment"> * @return bool success</span>
<a name="l570"><span class="linenum"> 570</span></a>  <span class="comment"> */</span>
<a name="l571"><span class="linenum"> 571</span></a>  function <a class="function" onClick="logFunction('groups_delete_group_members')" href="../_functions/groups_delete_group_members.html" onMouseOver="funcPopup(event,'groups_delete_group_members')">groups_delete_group_members</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>=0, <a class="var it1292" onMouseOver="hilite(1292)" onMouseOut="lolite()" onClick="logVariable('unused')" href="../_variables/unused.html">$unused</a>=false) {
<a name="l572"><span class="linenum"> 572</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l573"><span class="linenum"> 573</span></a>  
<a name="l574"><span class="linenum"> 574</span></a>  <span class="comment">    // Get the users in the course which are in a group.</span>
<a name="l575"><span class="linenum"> 575</span></a>      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT gm.id as gmid, gm.userid, g.*
<a name="l576"><span class="linenum"> 576</span></a>                FROM {groups_members} gm
<a name="l577"><span class="linenum"> 577</span></a>          INNER JOIN {groups} g
<a name="l578"><span class="linenum"> 578</span></a>                  ON gm.groupid = g.id
<a name="l579"><span class="linenum"> 579</span></a>               WHERE g.courseid = :courseid&quot;;
<a name="l580"><span class="linenum"> 580</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array();
<a name="l581"><span class="linenum"> 581</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['courseid'] = <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>;
<a name="l582"><span class="linenum"> 582</span></a>  <span class="comment">    // Check if we want to delete a specific user.</span>
<a name="l583"><span class="linenum"> 583</span></a>      if (<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>) {
<a name="l584"><span class="linenum"> 584</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> .= &quot; AND gm.userid = :userid&quot;;
<a name="l585"><span class="linenum"> 585</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['userid'] = <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>;
<a name="l586"><span class="linenum"> 586</span></a>      }
<a name="l587"><span class="linenum"> 587</span></a>      <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l588"><span class="linenum"> 588</span></a>      foreach (<a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a> as <a class="var it14167" onMouseOver="hilite(14167)" onMouseOut="lolite()" onClick="logVariable('usergroup')" href="../_variables/usergroup.html">$usergroup</a>) {
<a name="l589"><span class="linenum"> 589</span></a>          <a class="function" onClick="logFunction('groups_remove_member')" href="../_functions/groups_remove_member.html" onMouseOver="funcPopup(event,'groups_remove_member')">groups_remove_member</a>(<a class="var it14167" onMouseOver="hilite(14167)" onMouseOut="lolite()" onClick="logVariable('usergroup')" href="../_variables/usergroup.html">$usergroup</a>, <a class="var it14167" onMouseOver="hilite(14167)" onMouseOut="lolite()" onClick="logVariable('usergroup')" href="../_variables/usergroup.html">$usergroup</a>-&gt;<a onClick="logVariable('userid')" class="var it43374" onMouseOver="hilite(43374)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>);
<a name="l590"><span class="linenum"> 590</span></a>      }
<a name="l591"><span class="linenum"> 591</span></a>      <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l592"><span class="linenum"> 592</span></a>  
<a name="l593"><span class="linenum"> 593</span></a>  <span class="comment">    // TODO MDL-41312 Remove events_trigger_legacy('groups_members_removed').</span>
<a name="l594"><span class="linenum"> 594</span></a>  <span class="comment">    // This event is kept here for backwards compatibility, because it cannot be</span>
<a name="l595"><span class="linenum"> 595</span></a>  <span class="comment">    // translated to a new event as it is wrong.</span>
<a name="l596"><span class="linenum"> 596</span></a>      <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../_variables/eventdata.html">$eventdata</a> = new stdClass();
<a name="l597"><span class="linenum"> 597</span></a>      <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('courseid')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a> = <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>;
<a name="l598"><span class="linenum"> 598</span></a>      <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('userid')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>   = <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>;
<a name="l599"><span class="linenum"> 599</span></a>      <a class="function" onClick="logFunction('events_trigger_legacy')" href="../_functions/events_trigger_legacy.html" onMouseOver="funcPopup(event,'events_trigger_legacy')">events_trigger_legacy</a>('groups_members_removed', <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../_variables/eventdata.html">$eventdata</a>);
<a name="l600"><span class="linenum"> 600</span></a>  
<a name="l601"><span class="linenum"> 601</span></a>      return true;
<a name="l602"><span class="linenum"> 602</span></a>  }
<a name="l603"><span class="linenum"> 603</span></a>  
<a name="l604"><span class="linenum"> 604</span></a>  <span class="comment">/**</span>
<a name="l605"><span class="linenum"> 605</span></a>  <span class="comment"> * Remove all groups from all groupings in course</span>
<a name="l606"><span class="linenum"> 606</span></a>  <span class="comment"> *</span>
<a name="l607"><span class="linenum"> 607</span></a>  <span class="comment"> * @param int $courseid</span>
<a name="l608"><span class="linenum"> 608</span></a>  <span class="comment"> * @param bool $showfeedback</span>
<a name="l609"><span class="linenum"> 609</span></a>  <span class="comment"> * @return bool success</span>
<a name="l610"><span class="linenum"> 610</span></a>  <span class="comment"> */</span>
<a name="l611"><span class="linenum"> 611</span></a>  function <a class="function" onClick="logFunction('groups_delete_groupings_groups')" href="../_functions/groups_delete_groupings_groups.html" onMouseOver="funcPopup(event,'groups_delete_groupings_groups')">groups_delete_groupings_groups</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it2602" onMouseOver="hilite(2602)" onMouseOut="lolite()" onClick="logVariable('showfeedback')" href="../_variables/showfeedback.html">$showfeedback</a>=false) {
<a name="l612"><span class="linenum"> 612</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l613"><span class="linenum"> 613</span></a>  
<a name="l614"><span class="linenum"> 614</span></a>      <a class="var it32133" onMouseOver="hilite(32133)" onMouseOut="lolite()" onClick="logVariable('groupssql')" href="../_variables/groupssql.html">$groupssql</a> = &quot;SELECT id FROM {groups} g WHERE g.courseid = ?&quot;;
<a name="l615"><span class="linenum"> 615</span></a>      <a class="var it4821" onMouseOver="hilite(4821)" onMouseOut="lolite()" onClick="logVariable('results')" href="../_variables/results.html">$results</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_select')" href="../_functions/get_recordset_select.html" onMouseOver="funcPopup(event,'get_recordset_select')">get_recordset_select</a>('groupings_groups', &quot;groupid IN (<a class="var it32133" onMouseOver="hilite(32133)" onMouseOut="lolite()" onClick="logVariable('groupssql')" href="../_variables/groupssql.html">$groupssql</a>)&quot;,
<a name="l616"><span class="linenum"> 616</span></a>          array(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>), '', 'groupid, groupingid');
<a name="l617"><span class="linenum"> 617</span></a>  
<a name="l618"><span class="linenum"> 618</span></a>      foreach (<a class="var it4821" onMouseOver="hilite(4821)" onMouseOut="lolite()" onClick="logVariable('results')" href="../_variables/results.html">$results</a> as <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>) {
<a name="l619"><span class="linenum"> 619</span></a>          <a class="function" onClick="logFunction('groups_unassign_grouping')" href="../_functions/groups_unassign_grouping.html" onMouseOver="funcPopup(event,'groups_unassign_grouping')">groups_unassign_grouping</a>(<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('groupingid')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../_variables/groupingid.html">groupingid</a>, <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('groupid')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../_variables/groupid.html">groupid</a>, false);
<a name="l620"><span class="linenum"> 620</span></a>      }
<a name="l621"><span class="linenum"> 621</span></a>  
<a name="l622"><span class="linenum"> 622</span></a>  <span class="comment">    // Invalidate the grouping cache for the course</span>
<a name="l623"><span class="linenum"> 623</span></a>      <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('invalidate_by_definition')" href="../_functions/invalidate_by_definition.html" onMouseOver="funcPopup(event,'invalidate_by_definition')">invalidate_by_definition</a>('core', 'groupdata', array(), array(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>));
<a name="l624"><span class="linenum"> 624</span></a>  
<a name="l625"><span class="linenum"> 625</span></a>  <span class="comment">    // TODO MDL-41312 Remove events_trigger_legacy('groups_groupings_groups_removed').</span>
<a name="l626"><span class="linenum"> 626</span></a>  <span class="comment">    // This event is kept here for backwards compatibility, because it cannot be</span>
<a name="l627"><span class="linenum"> 627</span></a>  <span class="comment">    // translated to a new event as it is wrong.</span>
<a name="l628"><span class="linenum"> 628</span></a>      <a class="function" onClick="logFunction('events_trigger_legacy')" href="../_functions/events_trigger_legacy.html" onMouseOver="funcPopup(event,'events_trigger_legacy')">events_trigger_legacy</a>('groups_groupings_groups_removed', <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l629"><span class="linenum"> 629</span></a>  
<a name="l630"><span class="linenum"> 630</span></a>  <span class="comment">    // no need to show any feedback here - we delete usually first groupings and then groups</span>
<a name="l631"><span class="linenum"> 631</span></a>  
<a name="l632"><span class="linenum"> 632</span></a>      return true;
<a name="l633"><span class="linenum"> 633</span></a>  }
<a name="l634"><span class="linenum"> 634</span></a>  
<a name="l635"><span class="linenum"> 635</span></a>  <span class="comment">/**</span>
<a name="l636"><span class="linenum"> 636</span></a>  <span class="comment"> * Delete all groups from course</span>
<a name="l637"><span class="linenum"> 637</span></a>  <span class="comment"> *</span>
<a name="l638"><span class="linenum"> 638</span></a>  <span class="comment"> * @param int $courseid</span>
<a name="l639"><span class="linenum"> 639</span></a>  <span class="comment"> * @param bool $showfeedback</span>
<a name="l640"><span class="linenum"> 640</span></a>  <span class="comment"> * @return bool success</span>
<a name="l641"><span class="linenum"> 641</span></a>  <span class="comment"> */</span>
<a name="l642"><span class="linenum"> 642</span></a>  function <a class="function" onClick="logFunction('groups_delete_groups')" href="../_functions/groups_delete_groups.html" onMouseOver="funcPopup(event,'groups_delete_groups')">groups_delete_groups</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it2602" onMouseOver="hilite(2602)" onMouseOut="lolite()" onClick="logVariable('showfeedback')" href="../_variables/showfeedback.html">$showfeedback</a>=false) {
<a name="l643"><span class="linenum"> 643</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l644"><span class="linenum"> 644</span></a>  
<a name="l645"><span class="linenum"> 645</span></a>      <a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../_variables/groups.html">$groups</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset')" href="../_functions/get_recordset.html" onMouseOver="funcPopup(event,'get_recordset')">get_recordset</a>('groups', array('courseid' =&gt; <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>));
<a name="l646"><span class="linenum"> 646</span></a>      foreach (<a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../_variables/groups.html">$groups</a> as <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>) {
<a name="l647"><span class="linenum"> 647</span></a>          <a class="function" onClick="logFunction('groups_delete_group')" href="../_functions/groups_delete_group.html" onMouseOver="funcPopup(event,'groups_delete_group')">groups_delete_group</a>(<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>);
<a name="l648"><span class="linenum"> 648</span></a>      }
<a name="l649"><span class="linenum"> 649</span></a>  
<a name="l650"><span class="linenum"> 650</span></a>  <span class="comment">    // Invalidate the grouping cache for the course</span>
<a name="l651"><span class="linenum"> 651</span></a>      <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('invalidate_by_definition')" href="../_functions/invalidate_by_definition.html" onMouseOver="funcPopup(event,'invalidate_by_definition')">invalidate_by_definition</a>('core', 'groupdata', array(), array(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>));
<a name="l652"><span class="linenum"> 652</span></a>  
<a name="l653"><span class="linenum"> 653</span></a>  <span class="comment">    // TODO MDL-41312 Remove events_trigger_legacy('groups_groups_deleted').</span>
<a name="l654"><span class="linenum"> 654</span></a>  <span class="comment">    // This event is kept here for backwards compatibility, because it cannot be</span>
<a name="l655"><span class="linenum"> 655</span></a>  <span class="comment">    // translated to a new event as it is wrong.</span>
<a name="l656"><span class="linenum"> 656</span></a>      <a class="function" onClick="logFunction('events_trigger_legacy')" href="../_functions/events_trigger_legacy.html" onMouseOver="funcPopup(event,'events_trigger_legacy')">events_trigger_legacy</a>('groups_groups_deleted', <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l657"><span class="linenum"> 657</span></a>  
<a name="l658"><span class="linenum"> 658</span></a>      if (<a class="var it2602" onMouseOver="hilite(2602)" onMouseOut="lolite()" onClick="logVariable('showfeedback')" href="../_variables/showfeedback.html">$showfeedback</a>) {
<a name="l659"><span class="linenum"> 659</span></a>          echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('notification')" href="../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deleted').' - '.<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('groups', 'group'), 'notifysuccess');
<a name="l660"><span class="linenum"> 660</span></a>      }
<a name="l661"><span class="linenum"> 661</span></a>  
<a name="l662"><span class="linenum"> 662</span></a>      return true;
<a name="l663"><span class="linenum"> 663</span></a>  }
<a name="l664"><span class="linenum"> 664</span></a>  
<a name="l665"><span class="linenum"> 665</span></a>  <span class="comment">/**</span>
<a name="l666"><span class="linenum"> 666</span></a>  <span class="comment"> * Delete all groupings from course</span>
<a name="l667"><span class="linenum"> 667</span></a>  <span class="comment"> *</span>
<a name="l668"><span class="linenum"> 668</span></a>  <span class="comment"> * @param int $courseid</span>
<a name="l669"><span class="linenum"> 669</span></a>  <span class="comment"> * @param bool $showfeedback</span>
<a name="l670"><span class="linenum"> 670</span></a>  <span class="comment"> * @return bool success</span>
<a name="l671"><span class="linenum"> 671</span></a>  <span class="comment"> */</span>
<a name="l672"><span class="linenum"> 672</span></a>  function <a class="function" onClick="logFunction('groups_delete_groupings')" href="../_functions/groups_delete_groupings.html" onMouseOver="funcPopup(event,'groups_delete_groupings')">groups_delete_groupings</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it2602" onMouseOver="hilite(2602)" onMouseOut="lolite()" onClick="logVariable('showfeedback')" href="../_variables/showfeedback.html">$showfeedback</a>=false) {
<a name="l673"><span class="linenum"> 673</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l674"><span class="linenum"> 674</span></a>  
<a name="l675"><span class="linenum"> 675</span></a>      <a class="var it671" onMouseOver="hilite(671)" onMouseOut="lolite()" onClick="logVariable('groupings')" href="../_variables/groupings.html">$groupings</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_select')" href="../_functions/get_recordset_select.html" onMouseOver="funcPopup(event,'get_recordset_select')">get_recordset_select</a>('groupings', 'courseid = ?', array(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>));
<a name="l676"><span class="linenum"> 676</span></a>      foreach (<a class="var it671" onMouseOver="hilite(671)" onMouseOut="lolite()" onClick="logVariable('groupings')" href="../_variables/groupings.html">$groupings</a> as <a class="var it661" onMouseOver="hilite(661)" onMouseOut="lolite()" onClick="logVariable('grouping')" href="../_variables/grouping.html">$grouping</a>) {
<a name="l677"><span class="linenum"> 677</span></a>          <a class="function" onClick="logFunction('groups_delete_grouping')" href="../_functions/groups_delete_grouping.html" onMouseOver="funcPopup(event,'groups_delete_grouping')">groups_delete_grouping</a>(<a class="var it661" onMouseOver="hilite(661)" onMouseOut="lolite()" onClick="logVariable('grouping')" href="../_variables/grouping.html">$grouping</a>);
<a name="l678"><span class="linenum"> 678</span></a>      }
<a name="l679"><span class="linenum"> 679</span></a>  
<a name="l680"><span class="linenum"> 680</span></a>  <span class="comment">    // Invalidate the grouping cache for the course.</span>
<a name="l681"><span class="linenum"> 681</span></a>      <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('invalidate_by_definition')" href="../_functions/invalidate_by_definition.html" onMouseOver="funcPopup(event,'invalidate_by_definition')">invalidate_by_definition</a>('core', 'groupdata', array(), array(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>));
<a name="l682"><span class="linenum"> 682</span></a>  
<a name="l683"><span class="linenum"> 683</span></a>  <span class="comment">    // TODO MDL-41312 Remove events_trigger_legacy('groups_groupings_deleted').</span>
<a name="l684"><span class="linenum"> 684</span></a>  <span class="comment">    // This event is kept here for backwards compatibility, because it cannot be</span>
<a name="l685"><span class="linenum"> 685</span></a>  <span class="comment">    // translated to a new event as it is wrong.</span>
<a name="l686"><span class="linenum"> 686</span></a>      <a class="function" onClick="logFunction('events_trigger_legacy')" href="../_functions/events_trigger_legacy.html" onMouseOver="funcPopup(event,'events_trigger_legacy')">events_trigger_legacy</a>('groups_groupings_deleted', <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l687"><span class="linenum"> 687</span></a>  
<a name="l688"><span class="linenum"> 688</span></a>      if (<a class="var it2602" onMouseOver="hilite(2602)" onMouseOut="lolite()" onClick="logVariable('showfeedback')" href="../_variables/showfeedback.html">$showfeedback</a>) {
<a name="l689"><span class="linenum"> 689</span></a>          echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('notification')" href="../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deleted').' - '.<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('groupings', 'group'), 'notifysuccess');
<a name="l690"><span class="linenum"> 690</span></a>      }
<a name="l691"><span class="linenum"> 691</span></a>  
<a name="l692"><span class="linenum"> 692</span></a>      return true;
<a name="l693"><span class="linenum"> 693</span></a>  }
<a name="l694"><span class="linenum"> 694</span></a>  
<a name="l695"><span class="linenum"> 695</span></a>  <span class="comment">/* =================================== */</span>
<a name="l696"><span class="linenum"> 696</span></a>  <span class="comment">/* various functions used by groups UI */</span>
<a name="l697"><span class="linenum"> 697</span></a>  <span class="comment">/* =================================== */</span>
<a name="l698"><span class="linenum"> 698</span></a>  
<a name="l699"><span class="linenum"> 699</span></a>  <span class="comment">/**</span>
<a name="l700"><span class="linenum"> 700</span></a>  <span class="comment"> * Obtains a list of the possible roles that group members might come from,</span>
<a name="l701"><span class="linenum"> 701</span></a>  <span class="comment"> * on a course. Generally this includes only profile roles.</span>
<a name="l702"><span class="linenum"> 702</span></a>  <span class="comment"> *</span>
<a name="l703"><span class="linenum"> 703</span></a>  <span class="comment"> * @param context $context Context of course</span>
<a name="l704"><span class="linenum"> 704</span></a>  <span class="comment"> * @return Array of role ID integers, or false if error/none.</span>
<a name="l705"><span class="linenum"> 705</span></a>  <span class="comment"> */</span>
<a name="l706"><span class="linenum"> 706</span></a>  function <a class="function" onClick="logFunction('groups_get_possible_roles')" href="../_functions/groups_get_possible_roles.html" onMouseOver="funcPopup(event,'groups_get_possible_roles')">groups_get_possible_roles</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) {
<a name="l707"><span class="linenum"> 707</span></a>      <a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../_variables/roles.html">$roles</a> = <a class="function" onClick="logFunction('get_profile_roles')" href="../_functions/get_profile_roles.html" onMouseOver="funcPopup(event,'get_profile_roles')">get_profile_roles</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l708"><span class="linenum"> 708</span></a>      return <a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../_variables/roles.html">$roles</a>);
<a name="l709"><span class="linenum"> 709</span></a>  }
<a name="l710"><span class="linenum"> 710</span></a>  
<a name="l711"><span class="linenum"> 711</span></a>  
<a name="l712"><span class="linenum"> 712</span></a>  <span class="comment">/**</span>
<a name="l713"><span class="linenum"> 713</span></a>  <span class="comment"> * Gets potential group members for grouping</span>
<a name="l714"><span class="linenum"> 714</span></a>  <span class="comment"> *</span>
<a name="l715"><span class="linenum"> 715</span></a>  <span class="comment"> * @param int $courseid The id of the course</span>
<a name="l716"><span class="linenum"> 716</span></a>  <span class="comment"> * @param int $roleid The role to select users from</span>
<a name="l717"><span class="linenum"> 717</span></a>  <span class="comment"> * @param mixed $source restrict to cohort, grouping or group id</span>
<a name="l718"><span class="linenum"> 718</span></a>  <span class="comment"> * @param string $orderby The column to sort users by</span>
<a name="l719"><span class="linenum"> 719</span></a>  <span class="comment"> * @param int $notingroup restrict to users not in existing groups</span>
<a name="l720"><span class="linenum"> 720</span></a>  <span class="comment"> * @param bool $onlyactiveenrolments restrict to users who have an active enrolment in the course</span>
<a name="l721"><span class="linenum"> 721</span></a>  <span class="comment"> * @return array An array of the users</span>
<a name="l722"><span class="linenum"> 722</span></a>  <span class="comment"> */</span>
<a name="l723"><span class="linenum"> 723</span></a>  function <a class="function" onClick="logFunction('groups_get_potential_members')" href="../_functions/groups_get_potential_members.html" onMouseOver="funcPopup(event,'groups_get_potential_members')">groups_get_potential_members</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it788" onMouseOver="hilite(788)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../_variables/roleid.html">$roleid</a> = null, <a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a> = null,
<a name="l724"><span class="linenum"> 724</span></a>                                        <a class="var it5076" onMouseOver="hilite(5076)" onMouseOut="lolite()" onClick="logVariable('orderby')" href="../_variables/orderby.html">$orderby</a> = 'lastname ASC, firstname ASC',
<a name="l725"><span class="linenum"> 725</span></a>                                        <a class="var it35895" onMouseOver="hilite(35895)" onMouseOut="lolite()" onClick="logVariable('notingroup')" href="../_variables/notingroup.html">$notingroup</a> = null, <a class="var it36617" onMouseOver="hilite(36617)" onMouseOut="lolite()" onClick="logVariable('onlyactiveenrolments')" href="../_variables/onlyactiveenrolments.html">$onlyactiveenrolments</a> = false) {
<a name="l726"><span class="linenum"> 726</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l727"><span class="linenum"> 727</span></a>  
<a name="l728"><span class="linenum"> 728</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l729"><span class="linenum"> 729</span></a>  
<a name="l730"><span class="linenum"> 730</span></a>      <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it4199" onMouseOver="hilite(4199)" onMouseOut="lolite()" onClick="logVariable('esql')" href="../_variables/esql.html">$esql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>) = <a class="function" onClick="logFunction('get_enrolled_sql')" href="../_functions/get_enrolled_sql.html" onMouseOver="funcPopup(event,'get_enrolled_sql')">get_enrolled_sql</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, '', 0, <a class="var it36617" onMouseOver="hilite(36617)" onMouseOut="lolite()" onClick="logVariable('onlyactiveenrolments')" href="../_variables/onlyactiveenrolments.html">$onlyactiveenrolments</a>);
<a name="l731"><span class="linenum"> 731</span></a>  
<a name="l732"><span class="linenum"> 732</span></a>      <a class="var it36618" onMouseOver="hilite(36618)" onMouseOut="lolite()" onClick="logVariable('notingroupsql')" href="../_variables/notingroupsql.html">$notingroupsql</a> = &quot;&quot;;
<a name="l733"><span class="linenum"> 733</span></a>      if (<a class="var it35895" onMouseOver="hilite(35895)" onMouseOut="lolite()" onClick="logVariable('notingroup')" href="../_variables/notingroup.html">$notingroup</a>) {
<a name="l734"><span class="linenum"> 734</span></a>  <span class="comment">        // We want to eliminate users that are already associated with a course group.</span>
<a name="l735"><span class="linenum"> 735</span></a>          <a class="var it36618" onMouseOver="hilite(36618)" onMouseOut="lolite()" onClick="logVariable('notingroupsql')" href="../_variables/notingroupsql.html">$notingroupsql</a> = &quot;u.id NOT IN (SELECT userid
<a name="l736"><span class="linenum"> 736</span></a>                                           FROM {groups_members}
<a name="l737"><span class="linenum"> 737</span></a>                                          WHERE groupid IN (SELECT id
<a name="l738"><span class="linenum"> 738</span></a>                                                              FROM {groups}
<a name="l739"><span class="linenum"> 739</span></a>                                                             WHERE courseid = :courseid))&quot;;
<a name="l740"><span class="linenum"> 740</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['courseid'] = <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>;
<a name="l741"><span class="linenum"> 741</span></a>      }
<a name="l742"><span class="linenum"> 742</span></a>  
<a name="l743"><span class="linenum"> 743</span></a>      if (<a class="var it788" onMouseOver="hilite(788)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../_variables/roleid.html">$roleid</a>) {
<a name="l744"><span class="linenum"> 744</span></a>  <span class="comment">        // We are looking for all users with this role assigned in this context or higher.</span>
<a name="l745"><span class="linenum"> 745</span></a>          <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it4017" onMouseOver="hilite(4017)" onMouseOut="lolite()" onClick="logVariable('relatedctxsql')" href="../_variables/relatedctxsql.html">$relatedctxsql</a>, <a class="var it4018" onMouseOver="hilite(4018)" onMouseOut="lolite()" onClick="logVariable('relatedctxparams')" href="../_variables/relatedctxparams.html">$relatedctxparams</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a class="function" onClick="logFunction('get_parent_context_ids')" href="../_functions/get_parent_context_ids.html" onMouseOver="funcPopup(event,'get_parent_context_ids')">get_parent_context_ids</a>(true),
<a name="l746"><span class="linenum"> 746</span></a>                                                                         <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>,
<a name="l747"><span class="linenum"> 747</span></a>                                                                         'relatedctx');
<a name="l748"><span class="linenum"> 748</span></a>  
<a name="l749"><span class="linenum"> 749</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, <a class="var it4018" onMouseOver="hilite(4018)" onMouseOut="lolite()" onClick="logVariable('relatedctxparams')" href="../_variables/relatedctxparams.html">$relatedctxparams</a>, array('roleid' =&gt; <a class="var it788" onMouseOver="hilite(788)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../_variables/roleid.html">$roleid</a>));
<a name="l750"><span class="linenum"> 750</span></a>          <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a> = &quot;WHERE u.id IN (SELECT userid
<a name="l751"><span class="linenum"> 751</span></a>                                     FROM {role_assignments}
<a name="l752"><span class="linenum"> 752</span></a>                                    WHERE roleid = :roleid AND contextid <a class="var it4017" onMouseOver="hilite(4017)" onMouseOut="lolite()" onClick="logVariable('relatedctxsql')" href="../_variables/relatedctxsql.html">$relatedctxsql</a>)&quot;;
<a name="l753"><span class="linenum"> 753</span></a>          <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a> .= <a class="var it35895" onMouseOver="hilite(35895)" onMouseOut="lolite()" onClick="logVariable('notingroup')" href="../_variables/notingroup.html">$notingroup</a> ? &quot;AND <a class="var it36618" onMouseOver="hilite(36618)" onMouseOut="lolite()" onClick="logVariable('notingroupsql')" href="../_variables/notingroupsql.html">$notingroupsql</a>&quot; : &quot;&quot;;
<a name="l754"><span class="linenum"> 754</span></a>      } else if (<a class="var it35895" onMouseOver="hilite(35895)" onMouseOut="lolite()" onClick="logVariable('notingroup')" href="../_variables/notingroup.html">$notingroup</a>) {
<a name="l755"><span class="linenum"> 755</span></a>          <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a> = &quot;WHERE <a class="var it36618" onMouseOver="hilite(36618)" onMouseOut="lolite()" onClick="logVariable('notingroupsql')" href="../_variables/notingroupsql.html">$notingroupsql</a>&quot;;
<a name="l756"><span class="linenum"> 756</span></a>      } else {
<a name="l757"><span class="linenum"> 757</span></a>          <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a> = &quot;&quot;;
<a name="l758"><span class="linenum"> 758</span></a>      }
<a name="l759"><span class="linenum"> 759</span></a>  
<a name="l760"><span class="linenum"> 760</span></a>      <a class="var it36619" onMouseOver="hilite(36619)" onMouseOut="lolite()" onClick="logVariable('sourcejoin')" href="../_variables/sourcejoin.html">$sourcejoin</a> = &quot;&quot;;
<a name="l761"><span class="linenum"> 761</span></a>      if (is_int(<a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a>)) {
<a name="l762"><span class="linenum"> 762</span></a>          <a class="var it36619" onMouseOver="hilite(36619)" onMouseOut="lolite()" onClick="logVariable('sourcejoin')" href="../_variables/sourcejoin.html">$sourcejoin</a> .= &quot;JOIN {cohort_members} cm <a class="function" onClick="logFunction('ON')" href="../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (cm.userid = u.id AND cm.cohortid = :cohortid) &quot;;
<a name="l763"><span class="linenum"> 763</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['cohortid'] = <a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a>;
<a name="l764"><span class="linenum"> 764</span></a>      } else {
<a name="l765"><span class="linenum"> 765</span></a>  <span class="comment">        // Auto-create groups from an existing cohort membership.</span>
<a name="l766"><span class="linenum"> 766</span></a>          if (isset(<a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a>['cohortid'])) {
<a name="l767"><span class="linenum"> 767</span></a>              <a class="var it36619" onMouseOver="hilite(36619)" onMouseOut="lolite()" onClick="logVariable('sourcejoin')" href="../_variables/sourcejoin.html">$sourcejoin</a> .= &quot;JOIN {cohort_members} cm <a class="function" onClick="logFunction('ON')" href="../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (cm.userid = u.id AND cm.cohortid = :cohortid) &quot;;
<a name="l768"><span class="linenum"> 768</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['cohortid'] = <a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a>['cohortid'];
<a name="l769"><span class="linenum"> 769</span></a>          }
<a name="l770"><span class="linenum"> 770</span></a>  <span class="comment">        // Auto-create groups from an existing group membership.</span>
<a name="l771"><span class="linenum"> 771</span></a>          if (isset(<a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a>['groupid'])) {
<a name="l772"><span class="linenum"> 772</span></a>              <a class="var it36619" onMouseOver="hilite(36619)" onMouseOut="lolite()" onClick="logVariable('sourcejoin')" href="../_variables/sourcejoin.html">$sourcejoin</a> .= &quot;JOIN {groups_members} gp <a class="function" onClick="logFunction('ON')" href="../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (gp.userid = u.id AND gp.groupid = :groupid) &quot;;
<a name="l773"><span class="linenum"> 773</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['groupid'] = <a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a>['groupid'];
<a name="l774"><span class="linenum"> 774</span></a>          }
<a name="l775"><span class="linenum"> 775</span></a>  <span class="comment">        // Auto-create groups from an existing grouping membership.</span>
<a name="l776"><span class="linenum"> 776</span></a>          if (isset(<a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a>['groupingid'])) {
<a name="l777"><span class="linenum"> 777</span></a>              <a class="var it36619" onMouseOver="hilite(36619)" onMouseOut="lolite()" onClick="logVariable('sourcejoin')" href="../_variables/sourcejoin.html">$sourcejoin</a> .= &quot;JOIN {groupings_groups} gg ON gg.groupingid = :groupingid &quot;;
<a name="l778"><span class="linenum"> 778</span></a>              <a class="var it36619" onMouseOver="hilite(36619)" onMouseOut="lolite()" onClick="logVariable('sourcejoin')" href="../_variables/sourcejoin.html">$sourcejoin</a> .= &quot;JOIN {groups_members} gm <a class="function" onClick="logFunction('ON')" href="../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (gm.userid = u.id AND gm.groupid = gg.groupid) &quot;;
<a name="l779"><span class="linenum"> 779</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['groupingid'] = <a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a>['groupingid'];
<a name="l780"><span class="linenum"> 780</span></a>          }
<a name="l781"><span class="linenum"> 781</span></a>      }
<a name="l782"><span class="linenum"> 782</span></a>  
<a name="l783"><span class="linenum"> 783</span></a>      <a class="var it36620" onMouseOver="hilite(36620)" onMouseOut="lolite()" onClick="logVariable('allusernamefields')" href="../_variables/allusernamefields.html">$allusernamefields</a> = <a class="function" onClick="logFunction('get_all_user_name_fields')" href="../_functions/get_all_user_name_fields.html" onMouseOver="funcPopup(event,'get_all_user_name_fields')">get_all_user_name_fields</a>(true, 'u');
<a name="l784"><span class="linenum"> 784</span></a>      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT DISTINCT u.id, u.username, <a class="var it36620" onMouseOver="hilite(36620)" onMouseOut="lolite()" onClick="logVariable('allusernamefields')" href="../_variables/allusernamefields.html">$allusernamefields</a>, u.idnumber
<a name="l785"><span class="linenum"> 785</span></a>                FROM {user} u
<a name="l786"><span class="linenum"> 786</span></a>                <a class="function" onClick="logFunction('JOIN')" href="../_functions/join.html" onMouseOver="funcPopup(event,'join')">JOIN</a> (<a class="var it4199" onMouseOver="hilite(4199)" onMouseOut="lolite()" onClick="logVariable('esql')" href="../_variables/esql.html">$esql</a>) e ON e.id = u.id
<a name="l787"><span class="linenum"> 787</span></a>         <a class="var it36619" onMouseOver="hilite(36619)" onMouseOut="lolite()" onClick="logVariable('sourcejoin')" href="../_variables/sourcejoin.html">$sourcejoin</a>
<a name="l788"><span class="linenum"> 788</span></a>              <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../_variables/where.html">$where</a>
<a name="l789"><span class="linenum"> 789</span></a>            ORDER BY <a class="var it5076" onMouseOver="hilite(5076)" onMouseOut="lolite()" onClick="logVariable('orderby')" href="../_variables/orderby.html">$orderby</a>&quot;;
<a name="l790"><span class="linenum"> 790</span></a>  
<a name="l791"><span class="linenum"> 791</span></a>      return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l792"><span class="linenum"> 792</span></a>  
<a name="l793"><span class="linenum"> 793</span></a>  }
<a name="l794"><span class="linenum"> 794</span></a>  
<a name="l795"><span class="linenum"> 795</span></a>  <span class="comment">/**</span>
<a name="l796"><span class="linenum"> 796</span></a>  <span class="comment"> * Parse a group name for characters to replace</span>
<a name="l797"><span class="linenum"> 797</span></a>  <span class="comment"> *</span>
<a name="l798"><span class="linenum"> 798</span></a>  <span class="comment"> * @param string $format The format a group name will follow</span>
<a name="l799"><span class="linenum"> 799</span></a>  <span class="comment"> * @param int $groupnumber The number of the group to be used in the parsed format string</span>
<a name="l800"><span class="linenum"> 800</span></a>  <span class="comment"> * @return string the parsed format string</span>
<a name="l801"><span class="linenum"> 801</span></a>  <span class="comment"> */</span>
<a name="l802"><span class="linenum"> 802</span></a>  function <a class="function" onClick="logFunction('groups_parse_name')" href="../_functions/groups_parse_name.html" onMouseOver="funcPopup(event,'groups_parse_name')">groups_parse_name</a>(<a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>, <a class="var it36621" onMouseOver="hilite(36621)" onMouseOut="lolite()" onClick="logVariable('groupnumber')" href="../_variables/groupnumber.html">$groupnumber</a>) {
<a name="l803"><span class="linenum"> 803</span></a>      if (<a class="phpfunction" onClick="logFunction('strstr')" href="../_functions/strstr.html" onMouseOver="phpfuncPopup(event,'strstr')">strstr</a>(<a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>, '@') !== false) { // Convert <a class="var it36621" onMouseOver="hilite(36621)" onMouseOut="lolite()" onClick="logVariable('groupnumber')" href="../_variables/groupnumber.html">$groupnumber</a> to a character series
<a name="l804"><span class="linenum"> 804</span></a>          <a class="var it1847" onMouseOver="hilite(1847)" onMouseOut="lolite()" onClick="logVariable('letter')" href="../_variables/letter.html">$letter</a> = 'A';
<a name="l805"><span class="linenum"> 805</span></a>          for(<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>=0; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>&lt;<a class="var it36621" onMouseOver="hilite(36621)" onMouseOut="lolite()" onClick="logVariable('groupnumber')" href="../_variables/groupnumber.html">$groupnumber</a>; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>++) {
<a name="l806"><span class="linenum"> 806</span></a>              <a class="var it1847" onMouseOver="hilite(1847)" onMouseOut="lolite()" onClick="logVariable('letter')" href="../_variables/letter.html">$letter</a>++;
<a name="l807"><span class="linenum"> 807</span></a>          }
<a name="l808"><span class="linenum"> 808</span></a>          <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('@', <a class="var it1847" onMouseOver="hilite(1847)" onMouseOut="lolite()" onClick="logVariable('letter')" href="../_variables/letter.html">$letter</a>, <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>);
<a name="l809"><span class="linenum"> 809</span></a>      } else {
<a name="l810"><span class="linenum"> 810</span></a>          <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('#', <a class="var it36621" onMouseOver="hilite(36621)" onMouseOut="lolite()" onClick="logVariable('groupnumber')" href="../_variables/groupnumber.html">$groupnumber</a>+1, <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>);
<a name="l811"><span class="linenum"> 811</span></a>      }
<a name="l812"><span class="linenum"> 812</span></a>      return(<a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>);
<a name="l813"><span class="linenum"> 813</span></a>  }
<a name="l814"><span class="linenum"> 814</span></a>  
<a name="l815"><span class="linenum"> 815</span></a>  <span class="comment">/**</span>
<a name="l816"><span class="linenum"> 816</span></a>  <span class="comment"> * Assigns group into grouping</span>
<a name="l817"><span class="linenum"> 817</span></a>  <span class="comment"> *</span>
<a name="l818"><span class="linenum"> 818</span></a>  <span class="comment"> * @param int groupingid</span>
<a name="l819"><span class="linenum"> 819</span></a>  <span class="comment"> * @param int groupid</span>
<a name="l820"><span class="linenum"> 820</span></a>  <span class="comment"> * @param int $timeadded  The time the group was added to the grouping.</span>
<a name="l821"><span class="linenum"> 821</span></a>  <span class="comment"> * @param bool $invalidatecache If set to true the course group cache will be invalidated as well.</span>
<a name="l822"><span class="linenum"> 822</span></a>  <span class="comment"> * @return bool true or exception</span>
<a name="l823"><span class="linenum"> 823</span></a>  <span class="comment"> */</span>
<a name="l824"><span class="linenum"> 824</span></a>  function <a class="function" onClick="logFunction('groups_assign_grouping')" href="../_functions/groups_assign_grouping.html" onMouseOver="funcPopup(event,'groups_assign_grouping')">groups_assign_grouping</a>(<a class="var it680" onMouseOver="hilite(680)" onMouseOut="lolite()" onClick="logVariable('groupingid')" href="../_variables/groupingid.html">$groupingid</a>, <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>, <a class="var it7760" onMouseOver="hilite(7760)" onMouseOut="lolite()" onClick="logVariable('timeadded')" href="../_variables/timeadded.html">$timeadded</a> = null, <a class="var it36622" onMouseOver="hilite(36622)" onMouseOut="lolite()" onClick="logVariable('invalidatecache')" href="../_variables/invalidatecache.html">$invalidatecache</a> = true) {
<a name="l825"><span class="linenum"> 825</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l826"><span class="linenum"> 826</span></a>  
<a name="l827"><span class="linenum"> 827</span></a>      if (<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('groupings_groups', array('groupingid'=&gt;<a class="var it680" onMouseOver="hilite(680)" onMouseOut="lolite()" onClick="logVariable('groupingid')" href="../_variables/groupingid.html">$groupingid</a>, 'groupid'=&gt;<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>))) {
<a name="l828"><span class="linenum"> 828</span></a>          return true;
<a name="l829"><span class="linenum"> 829</span></a>      }
<a name="l830"><span class="linenum"> 830</span></a>      <a class="var it684" onMouseOver="hilite(684)" onMouseOut="lolite()" onClick="logVariable('assign')" href="../_variables/assign.html">$assign</a> = new stdClass();
<a name="l831"><span class="linenum"> 831</span></a>      <a class="var it684" onMouseOver="hilite(684)" onMouseOut="lolite()" onClick="logVariable('assign')" href="../_variables/assign.html">$assign</a>-&gt;<a onClick="logVariable('groupingid')" class="var it43084" onMouseOver="hilite(43084)" onMouseOut="lolite()" href="../_variables/groupingid.html">groupingid</a> = <a class="var it680" onMouseOver="hilite(680)" onMouseOut="lolite()" onClick="logVariable('groupingid')" href="../_variables/groupingid.html">$groupingid</a>;
<a name="l832"><span class="linenum"> 832</span></a>      <a class="var it684" onMouseOver="hilite(684)" onMouseOut="lolite()" onClick="logVariable('assign')" href="../_variables/assign.html">$assign</a>-&gt;<a onClick="logVariable('groupid')" class="var it43084" onMouseOver="hilite(43084)" onMouseOut="lolite()" href="../_variables/groupid.html">groupid</a>    = <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>;
<a name="l833"><span class="linenum"> 833</span></a>      if (<a class="var it7760" onMouseOver="hilite(7760)" onMouseOut="lolite()" onClick="logVariable('timeadded')" href="../_variables/timeadded.html">$timeadded</a> != null) {
<a name="l834"><span class="linenum"> 834</span></a>          <a class="var it684" onMouseOver="hilite(684)" onMouseOut="lolite()" onClick="logVariable('assign')" href="../_variables/assign.html">$assign</a>-&gt;<a onClick="logVariable('timeadded')" class="var it43084" onMouseOver="hilite(43084)" onMouseOut="lolite()" href="../_variables/timeadded.html">timeadded</a> = (integer)<a class="var it7760" onMouseOver="hilite(7760)" onMouseOut="lolite()" onClick="logVariable('timeadded')" href="../_variables/timeadded.html">$timeadded</a>;
<a name="l835"><span class="linenum"> 835</span></a>      } else {
<a name="l836"><span class="linenum"> 836</span></a>          <a class="var it684" onMouseOver="hilite(684)" onMouseOut="lolite()" onClick="logVariable('assign')" href="../_variables/assign.html">$assign</a>-&gt;<a onClick="logVariable('timeadded')" class="var it43084" onMouseOver="hilite(43084)" onMouseOut="lolite()" href="../_variables/timeadded.html">timeadded</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l837"><span class="linenum"> 837</span></a>      }
<a name="l838"><span class="linenum"> 838</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('groupings_groups', <a class="var it684" onMouseOver="hilite(684)" onMouseOut="lolite()" onClick="logVariable('assign')" href="../_variables/assign.html">$assign</a>);
<a name="l839"><span class="linenum"> 839</span></a>  
<a name="l840"><span class="linenum"> 840</span></a>      <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('groupings', 'courseid', array('id' =&gt; <a class="var it680" onMouseOver="hilite(680)" onMouseOut="lolite()" onClick="logVariable('groupingid')" href="../_variables/groupingid.html">$groupingid</a>));
<a name="l841"><span class="linenum"> 841</span></a>      if (<a class="var it36622" onMouseOver="hilite(36622)" onMouseOut="lolite()" onClick="logVariable('invalidatecache')" href="../_variables/invalidatecache.html">$invalidatecache</a>) {
<a name="l842"><span class="linenum"> 842</span></a>  <span class="comment">        // Invalidate the grouping cache for the course</span>
<a name="l843"><span class="linenum"> 843</span></a>          <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('invalidate_by_definition')" href="../_functions/invalidate_by_definition.html" onMouseOver="funcPopup(event,'invalidate_by_definition')">invalidate_by_definition</a>('core', 'groupdata', array(), array(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>));
<a name="l844"><span class="linenum"> 844</span></a>      }
<a name="l845"><span class="linenum"> 845</span></a>  
<a name="l846"><span class="linenum"> 846</span></a>  <span class="comment">    // Trigger event.</span>
<a name="l847"><span class="linenum"> 847</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array(
<a name="l848"><span class="linenum"> 848</span></a>          'context' =&gt; <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>),
<a name="l849"><span class="linenum"> 849</span></a>          'objectid' =&gt; <a class="var it680" onMouseOver="hilite(680)" onMouseOut="lolite()" onClick="logVariable('groupingid')" href="../_variables/groupingid.html">$groupingid</a>,
<a name="l850"><span class="linenum"> 850</span></a>          'other' =&gt; array('groupid' =&gt; <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>)
<a name="l851"><span class="linenum"> 851</span></a>      );
<a name="l852"><span class="linenum"> 852</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('grouping_group_assigned')" href="../_classes/grouping_group_assigned.html" onMouseOver="classPopup(event,'grouping_group_assigned')">grouping_group_assigned</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l853"><span class="linenum"> 853</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l854"><span class="linenum"> 854</span></a>  
<a name="l855"><span class="linenum"> 855</span></a>      return true;
<a name="l856"><span class="linenum"> 856</span></a>  }
<a name="l857"><span class="linenum"> 857</span></a>  
<a name="l858"><span class="linenum"> 858</span></a>  <span class="comment">/**</span>
<a name="l859"><span class="linenum"> 859</span></a>  <span class="comment"> * Unassigns group from grouping</span>
<a name="l860"><span class="linenum"> 860</span></a>  <span class="comment"> *</span>
<a name="l861"><span class="linenum"> 861</span></a>  <span class="comment"> * @param int groupingid</span>
<a name="l862"><span class="linenum"> 862</span></a>  <span class="comment"> * @param int groupid</span>
<a name="l863"><span class="linenum"> 863</span></a>  <span class="comment"> * @param bool $invalidatecache If set to true the course group cache will be invalidated as well.</span>
<a name="l864"><span class="linenum"> 864</span></a>  <span class="comment"> * @return bool success</span>
<a name="l865"><span class="linenum"> 865</span></a>  <span class="comment"> */</span>
<a name="l866"><span class="linenum"> 866</span></a>  function <a class="function" onClick="logFunction('groups_unassign_grouping')" href="../_functions/groups_unassign_grouping.html" onMouseOver="funcPopup(event,'groups_unassign_grouping')">groups_unassign_grouping</a>(<a class="var it680" onMouseOver="hilite(680)" onMouseOut="lolite()" onClick="logVariable('groupingid')" href="../_variables/groupingid.html">$groupingid</a>, <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>, <a class="var it36622" onMouseOver="hilite(36622)" onMouseOut="lolite()" onClick="logVariable('invalidatecache')" href="../_variables/invalidatecache.html">$invalidatecache</a> = true) {
<a name="l867"><span class="linenum"> 867</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l868"><span class="linenum"> 868</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('groupings_groups', array('groupingid'=&gt;<a class="var it680" onMouseOver="hilite(680)" onMouseOut="lolite()" onClick="logVariable('groupingid')" href="../_variables/groupingid.html">$groupingid</a>, 'groupid'=&gt;<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>));
<a name="l869"><span class="linenum"> 869</span></a>  
<a name="l870"><span class="linenum"> 870</span></a>      <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('groupings', 'courseid', array('id' =&gt; <a class="var it680" onMouseOver="hilite(680)" onMouseOut="lolite()" onClick="logVariable('groupingid')" href="../_variables/groupingid.html">$groupingid</a>));
<a name="l871"><span class="linenum"> 871</span></a>      if (<a class="var it36622" onMouseOver="hilite(36622)" onMouseOut="lolite()" onClick="logVariable('invalidatecache')" href="../_variables/invalidatecache.html">$invalidatecache</a>) {
<a name="l872"><span class="linenum"> 872</span></a>  <span class="comment">        // Invalidate the grouping cache for the course</span>
<a name="l873"><span class="linenum"> 873</span></a>          <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('invalidate_by_definition')" href="../_functions/invalidate_by_definition.html" onMouseOver="funcPopup(event,'invalidate_by_definition')">invalidate_by_definition</a>('core', 'groupdata', array(), array(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>));
<a name="l874"><span class="linenum"> 874</span></a>      }
<a name="l875"><span class="linenum"> 875</span></a>  
<a name="l876"><span class="linenum"> 876</span></a>  <span class="comment">    // Trigger event.</span>
<a name="l877"><span class="linenum"> 877</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array(
<a name="l878"><span class="linenum"> 878</span></a>          'context' =&gt; <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>),
<a name="l879"><span class="linenum"> 879</span></a>          'objectid' =&gt; <a class="var it680" onMouseOver="hilite(680)" onMouseOut="lolite()" onClick="logVariable('groupingid')" href="../_variables/groupingid.html">$groupingid</a>,
<a name="l880"><span class="linenum"> 880</span></a>          'other' =&gt; array('groupid' =&gt; <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>)
<a name="l881"><span class="linenum"> 881</span></a>      );
<a name="l882"><span class="linenum"> 882</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('grouping_group_unassigned')" href="../_classes/grouping_group_unassigned.html" onMouseOver="classPopup(event,'grouping_group_unassigned')">grouping_group_unassigned</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l883"><span class="linenum"> 883</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l884"><span class="linenum"> 884</span></a>  
<a name="l885"><span class="linenum"> 885</span></a>      return true;
<a name="l886"><span class="linenum"> 886</span></a>  }
<a name="l887"><span class="linenum"> 887</span></a>  
<a name="l888"><span class="linenum"> 888</span></a>  <span class="comment">/**</span>
<a name="l889"><span class="linenum"> 889</span></a>  <span class="comment"> * Lists users in a group based on their role on the course.</span>
<a name="l890"><span class="linenum"> 890</span></a>  <span class="comment"> * Returns false if there's an error or there are no users in the group.</span>
<a name="l891"><span class="linenum"> 891</span></a>  <span class="comment"> * Otherwise returns an array of role ID =&gt; role data, where role data includes:</span>
<a name="l892"><span class="linenum"> 892</span></a>  <span class="comment"> * (role) $id, $shortname, $name</span>
<a name="l893"><span class="linenum"> 893</span></a>  <span class="comment"> * $users: array of objects for each user which include the specified fields</span>
<a name="l894"><span class="linenum"> 894</span></a>  <span class="comment"> * Users who do not have a role are stored in the returned array with key '-'</span>
<a name="l895"><span class="linenum"> 895</span></a>  <span class="comment"> * and pseudo-role details (including a name, 'No role'). Users with multiple</span>
<a name="l896"><span class="linenum"> 896</span></a>  <span class="comment"> * roles, same deal with key '*' and name 'Multiple roles'. You can find out</span>
<a name="l897"><span class="linenum"> 897</span></a>  <span class="comment"> * which roles each has by looking in the $roles array of the user object.</span>
<a name="l898"><span class="linenum"> 898</span></a>  <span class="comment"> *</span>
<a name="l899"><span class="linenum"> 899</span></a>  <span class="comment"> * @param int $groupid</span>
<a name="l900"><span class="linenum"> 900</span></a>  <span class="comment"> * @param int $courseid Course ID (should match the group's course)</span>
<a name="l901"><span class="linenum"> 901</span></a>  <span class="comment"> * @param string $fields List of fields from user table prefixed with u, default 'u.*'</span>
<a name="l902"><span class="linenum"> 902</span></a>  <span class="comment"> * @param string $sort SQL ORDER BY clause, default (when null passed) is what comes from users_order_by_sql.</span>
<a name="l903"><span class="linenum"> 903</span></a>  <span class="comment"> * @param string $extrawheretest extra SQL conditions ANDed with the existing where clause.</span>
<a name="l904"><span class="linenum"> 904</span></a>  <span class="comment"> * @param array $whereorsortparams any parameters required by $extrawheretest (named parameters).</span>
<a name="l905"><span class="linenum"> 905</span></a>  <span class="comment"> * @return array Complex array as described above</span>
<a name="l906"><span class="linenum"> 906</span></a>  <span class="comment"> */</span>
<a name="l907"><span class="linenum"> 907</span></a>  function <a class="function" onClick="logFunction('groups_get_members_by_role')" href="../_functions/groups_get_members_by_role.html" onMouseOver="funcPopup(event,'groups_get_members_by_role')">groups_get_members_by_role</a>(<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>, <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../_variables/fields.html">$fields</a>='u.*',
<a name="l908"><span class="linenum"> 908</span></a>          <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../_variables/sort.html">$sort</a>=null, <a class="var it29156" onMouseOver="hilite(29156)" onMouseOut="lolite()" onClick="logVariable('extrawheretest')" href="../_variables/extrawheretest.html">$extrawheretest</a>='', <a class="var it29157" onMouseOver="hilite(29157)" onMouseOut="lolite()" onClick="logVariable('whereorsortparams')" href="../_variables/whereorsortparams.html">$whereorsortparams</a>=array()) {
<a name="l909"><span class="linenum"> 909</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l910"><span class="linenum"> 910</span></a>  
<a name="l911"><span class="linenum"> 911</span></a>  <span class="comment">    // Retrieve information about all users and their roles on the course or</span>
<a name="l912"><span class="linenum"> 912</span></a>  <span class="comment">    // parent ('related') contexts</span>
<a name="l913"><span class="linenum"> 913</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l914"><span class="linenum"> 914</span></a>  
<a name="l915"><span class="linenum"> 915</span></a>  <span class="comment">    // We are looking for all users with this role assigned in this context or higher.</span>
<a name="l916"><span class="linenum"> 916</span></a>      <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it4017" onMouseOver="hilite(4017)" onMouseOut="lolite()" onClick="logVariable('relatedctxsql')" href="../_variables/relatedctxsql.html">$relatedctxsql</a>, <a class="var it4018" onMouseOver="hilite(4018)" onMouseOut="lolite()" onClick="logVariable('relatedctxparams')" href="../_variables/relatedctxparams.html">$relatedctxparams</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a class="function" onClick="logFunction('get_parent_context_ids')" href="../_functions/get_parent_context_ids.html" onMouseOver="funcPopup(event,'get_parent_context_ids')">get_parent_context_ids</a>(true), <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>, 'relatedctx');
<a name="l917"><span class="linenum"> 917</span></a>  
<a name="l918"><span class="linenum"> 918</span></a>      if (<a class="var it29156" onMouseOver="hilite(29156)" onMouseOut="lolite()" onClick="logVariable('extrawheretest')" href="../_variables/extrawheretest.html">$extrawheretest</a>) {
<a name="l919"><span class="linenum"> 919</span></a>          <a class="var it29156" onMouseOver="hilite(29156)" onMouseOut="lolite()" onClick="logVariable('extrawheretest')" href="../_variables/extrawheretest.html">$extrawheretest</a> = ' AND ' . <a class="var it29156" onMouseOver="hilite(29156)" onMouseOut="lolite()" onClick="logVariable('extrawheretest')" href="../_variables/extrawheretest.html">$extrawheretest</a>;
<a name="l920"><span class="linenum"> 920</span></a>      }
<a name="l921"><span class="linenum"> 921</span></a>  
<a name="l922"><span class="linenum"> 922</span></a>      if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../_variables/sort.html">$sort</a>)) {
<a name="l923"><span class="linenum"> 923</span></a>          <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../_variables/sort.html">$sort</a>, <a class="var it13756" onMouseOver="hilite(13756)" onMouseOut="lolite()" onClick="logVariable('sortparams')" href="../_variables/sortparams.html">$sortparams</a>) = <a class="function" onClick="logFunction('users_order_by_sql')" href="../_functions/users_order_by_sql.html" onMouseOver="funcPopup(event,'users_order_by_sql')">users_order_by_sql</a>('u');
<a name="l924"><span class="linenum"> 924</span></a>          <a class="var it29157" onMouseOver="hilite(29157)" onMouseOut="lolite()" onClick="logVariable('whereorsortparams')" href="../_variables/whereorsortparams.html">$whereorsortparams</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it29157" onMouseOver="hilite(29157)" onMouseOut="lolite()" onClick="logVariable('whereorsortparams')" href="../_variables/whereorsortparams.html">$whereorsortparams</a>, <a class="var it13756" onMouseOver="hilite(13756)" onMouseOut="lolite()" onClick="logVariable('sortparams')" href="../_variables/sortparams.html">$sortparams</a>);
<a name="l925"><span class="linenum"> 925</span></a>      }
<a name="l926"><span class="linenum"> 926</span></a>  
<a name="l927"><span class="linenum"> 927</span></a>      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT r.id AS roleid, u.id AS userid, <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../_variables/fields.html">$fields</a>
<a name="l928"><span class="linenum"> 928</span></a>                FROM {groups_members} gm
<a name="l929"><span class="linenum"> 929</span></a>                JOIN {user} u ON u.id = gm.userid
<a name="l930"><span class="linenum"> 930</span></a>           LEFT JOIN {role_assignments} ra <a class="function" onClick="logFunction('ON')" href="../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (ra.userid = u.id AND ra.contextid <a class="var it4017" onMouseOver="hilite(4017)" onMouseOut="lolite()" onClick="logVariable('relatedctxsql')" href="../_variables/relatedctxsql.html">$relatedctxsql</a>)
<a name="l931"><span class="linenum"> 931</span></a>           LEFT JOIN {role} r ON r.id = ra.roleid
<a name="l932"><span class="linenum"> 932</span></a>               WHERE gm.groupid=:mgroupid
<a name="l933"><span class="linenum"> 933</span></a>                     &quot;.<a class="var it29156" onMouseOver="hilite(29156)" onMouseOut="lolite()" onClick="logVariable('extrawheretest')" href="../_variables/extrawheretest.html">$extrawheretest</a>.&quot;
<a name="l934"><span class="linenum"> 934</span></a>            ORDER BY r.sortorder, <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../_variables/sort.html">$sort</a>&quot;;
<a name="l935"><span class="linenum"> 935</span></a>      <a class="var it29157" onMouseOver="hilite(29157)" onMouseOut="lolite()" onClick="logVariable('whereorsortparams')" href="../_variables/whereorsortparams.html">$whereorsortparams</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it29157" onMouseOver="hilite(29157)" onMouseOut="lolite()" onClick="logVariable('whereorsortparams')" href="../_variables/whereorsortparams.html">$whereorsortparams</a>, <a class="var it4018" onMouseOver="hilite(4018)" onMouseOut="lolite()" onClick="logVariable('relatedctxparams')" href="../_variables/relatedctxparams.html">$relatedctxparams</a>, array('mgroupid' =&gt; <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>));
<a name="l936"><span class="linenum"> 936</span></a>      <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it29157" onMouseOver="hilite(29157)" onMouseOut="lolite()" onClick="logVariable('whereorsortparams')" href="../_variables/whereorsortparams.html">$whereorsortparams</a>);
<a name="l937"><span class="linenum"> 937</span></a>  
<a name="l938"><span class="linenum"> 938</span></a>      return <a class="function" onClick="logFunction('groups_calculate_role_people')" href="../_functions/groups_calculate_role_people.html" onMouseOver="funcPopup(event,'groups_calculate_role_people')">groups_calculate_role_people</a>(<a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l939"><span class="linenum"> 939</span></a>  }
<a name="l940"><span class="linenum"> 940</span></a>  
<a name="l941"><span class="linenum"> 941</span></a>  <span class="comment">/**</span>
<a name="l942"><span class="linenum"> 942</span></a>  <span class="comment"> * Internal function used by groups_get_members_by_role to handle the</span>
<a name="l943"><span class="linenum"> 943</span></a>  <span class="comment"> * results of a database query that includes a list of users and possible</span>
<a name="l944"><span class="linenum"> 944</span></a>  <span class="comment"> * roles on a course.</span>
<a name="l945"><span class="linenum"> 945</span></a>  <span class="comment"> *</span>
<a name="l946"><span class="linenum"> 946</span></a>  <span class="comment"> * @param moodle_recordset $rs The record set (may be false)</span>
<a name="l947"><span class="linenum"> 947</span></a>  <span class="comment"> * @param int $context ID of course context</span>
<a name="l948"><span class="linenum"> 948</span></a>  <span class="comment"> * @return array As described in groups_get_members_by_role</span>
<a name="l949"><span class="linenum"> 949</span></a>  <span class="comment"> */</span>
<a name="l950"><span class="linenum"> 950</span></a>  function <a class="function" onClick="logFunction('groups_calculate_role_people')" href="../_functions/groups_calculate_role_people.html" onMouseOver="funcPopup(event,'groups_calculate_role_people')">groups_calculate_role_people</a>(<a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) {
<a name="l951"><span class="linenum"> 951</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l952"><span class="linenum"> 952</span></a>  
<a name="l953"><span class="linenum"> 953</span></a>      if (!<a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a>) {
<a name="l954"><span class="linenum"> 954</span></a>          return array();
<a name="l955"><span class="linenum"> 955</span></a>      }
<a name="l956"><span class="linenum"> 956</span></a>  
<a name="l957"><span class="linenum"> 957</span></a>      <a class="var it3006" onMouseOver="hilite(3006)" onMouseOut="lolite()" onClick="logVariable('allroles')" href="../_variables/allroles.html">$allroles</a> = <a class="function" onClick="logFunction('role_fix_names')" href="../_functions/role_fix_names.html" onMouseOver="funcPopup(event,'role_fix_names')">role_fix_names</a>(<a class="function" onClick="logFunction('get_all_roles')" href="../_functions/get_all_roles.html" onMouseOver="funcPopup(event,'get_all_roles')">get_all_roles</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>), <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l958"><span class="linenum"> 958</span></a>  
<a name="l959"><span class="linenum"> 959</span></a>  <span class="comment">    // Array of all involved roles</span>
<a name="l960"><span class="linenum"> 960</span></a>      <a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../_variables/roles.html">$roles</a> = array();
<a name="l961"><span class="linenum"> 961</span></a>  <span class="comment">    // Array of all retrieved users</span>
<a name="l962"><span class="linenum"> 962</span></a>      <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../_variables/users.html">$users</a> = array();
<a name="l963"><span class="linenum"> 963</span></a>  <span class="comment">    // Fill arrays</span>
<a name="l964"><span class="linenum"> 964</span></a>      foreach (<a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a> as <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a>) {
<a name="l965"><span class="linenum"> 965</span></a>  <span class="comment">        // Create information about user if this is a new one</span>
<a name="l966"><span class="linenum"> 966</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('userid')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>, <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../_variables/users.html">$users</a>)) {
<a name="l967"><span class="linenum"> 967</span></a>  <span class="comment">            // User data includes all the optional fields, but not any of the</span>
<a name="l968"><span class="linenum"> 968</span></a>  <span class="comment">            // stuff we added to get the role details</span>
<a name="l969"><span class="linenum"> 969</span></a>              <a class="var it7917" onMouseOver="hilite(7917)" onMouseOut="lolite()" onClick="logVariable('userdata')" href="../_variables/userdata.html">$userdata</a> = <a class="function" onClick="logFunction('clone')" href="../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a>);
<a name="l970"><span class="linenum"> 970</span></a>              unset(<a class="var it7917" onMouseOver="hilite(7917)" onMouseOut="lolite()" onClick="logVariable('userdata')" href="../_variables/userdata.html">$userdata</a>-&gt;<a onClick="logVariable('roleid')" class="var it43313" onMouseOver="hilite(43313)" onMouseOut="lolite()" href="../_variables/roleid.html">roleid</a>);
<a name="l971"><span class="linenum"> 971</span></a>              unset(<a class="var it7917" onMouseOver="hilite(7917)" onMouseOut="lolite()" onClick="logVariable('userdata')" href="../_variables/userdata.html">$userdata</a>-&gt;<a onClick="logVariable('roleshortname')" class="var it43313" onMouseOver="hilite(43313)" onMouseOut="lolite()" href="../_variables/roleshortname.html">roleshortname</a>);
<a name="l972"><span class="linenum"> 972</span></a>              unset(<a class="var it7917" onMouseOver="hilite(7917)" onMouseOut="lolite()" onClick="logVariable('userdata')" href="../_variables/userdata.html">$userdata</a>-&gt;<a onClick="logVariable('rolename')" class="var it43313" onMouseOver="hilite(43313)" onMouseOut="lolite()" href="../_variables/rolename.html">rolename</a>);
<a name="l973"><span class="linenum"> 973</span></a>              unset(<a class="var it7917" onMouseOver="hilite(7917)" onMouseOut="lolite()" onClick="logVariable('userdata')" href="../_variables/userdata.html">$userdata</a>-&gt;<a onClick="logVariable('userid')" class="var it43313" onMouseOver="hilite(43313)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>);
<a name="l974"><span class="linenum"> 974</span></a>              <a class="var it7917" onMouseOver="hilite(7917)" onMouseOut="lolite()" onClick="logVariable('userdata')" href="../_variables/userdata.html">$userdata</a>-&gt;<a onClick="logVariable('id')" class="var it43313" onMouseOver="hilite(43313)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('userid')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>;
<a name="l975"><span class="linenum"> 975</span></a>  
<a name="l976"><span class="linenum"> 976</span></a>  <span class="comment">            // Make an array to hold the list of roles for this user</span>
<a name="l977"><span class="linenum"> 977</span></a>              <a class="var it7917" onMouseOver="hilite(7917)" onMouseOut="lolite()" onClick="logVariable('userdata')" href="../_variables/userdata.html">$userdata</a>-&gt;<a onClick="logVariable('roles')" class="var it43313" onMouseOver="hilite(43313)" onMouseOut="lolite()" href="../_variables/roles.html">roles</a> = array();
<a name="l978"><span class="linenum"> 978</span></a>              <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../_variables/users.html">$users</a>[<a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('userid')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>] = <a class="var it7917" onMouseOver="hilite(7917)" onMouseOut="lolite()" onClick="logVariable('userdata')" href="../_variables/userdata.html">$userdata</a>;
<a name="l979"><span class="linenum"> 979</span></a>          }
<a name="l980"><span class="linenum"> 980</span></a>  <span class="comment">        // If user has a role...</span>
<a name="l981"><span class="linenum"> 981</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('roleid')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../_variables/roleid.html">roleid</a>)) {
<a name="l982"><span class="linenum"> 982</span></a>  <span class="comment">            // Create information about role if this is a new one</span>
<a name="l983"><span class="linenum"> 983</span></a>              if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('roleid')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../_variables/roleid.html">roleid</a>, <a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../_variables/roles.html">$roles</a>)) {
<a name="l984"><span class="linenum"> 984</span></a>                  <a class="var it573" onMouseOver="hilite(573)" onMouseOut="lolite()" onClick="logVariable('role')" href="../_variables/role.html">$role</a> = <a class="var it3006" onMouseOver="hilite(3006)" onMouseOut="lolite()" onClick="logVariable('allroles')" href="../_variables/allroles.html">$allroles</a>[<a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('roleid')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../_variables/roleid.html">roleid</a>];
<a name="l985"><span class="linenum"> 985</span></a>                  <a class="var it36623" onMouseOver="hilite(36623)" onMouseOut="lolite()" onClick="logVariable('roledata')" href="../_variables/roledata.html">$roledata</a> = new stdClass();
<a name="l986"><span class="linenum"> 986</span></a>                  <a class="var it36623" onMouseOver="hilite(36623)" onMouseOut="lolite()" onClick="logVariable('roledata')" href="../_variables/roledata.html">$roledata</a>-&gt;<a onClick="logVariable('id')" class="var it45367" onMouseOver="hilite(45367)" onMouseOut="lolite()" href="../_variables/id.html">id</a>        = <a class="var it573" onMouseOver="hilite(573)" onMouseOut="lolite()" onClick="logVariable('role')" href="../_variables/role.html">$role</a>-&gt;<a onClick="logVariable('id')" class="var it42915" onMouseOver="hilite(42915)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l987"><span class="linenum"> 987</span></a>                  <a class="var it36623" onMouseOver="hilite(36623)" onMouseOut="lolite()" onClick="logVariable('roledata')" href="../_variables/roledata.html">$roledata</a>-&gt;<a onClick="logVariable('shortname')" class="var it45367" onMouseOver="hilite(45367)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a> = <a class="var it573" onMouseOver="hilite(573)" onMouseOut="lolite()" onClick="logVariable('role')" href="../_variables/role.html">$role</a>-&gt;<a onClick="logVariable('shortname')" class="var it42915" onMouseOver="hilite(42915)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a>;
<a name="l988"><span class="linenum"> 988</span></a>                  <a class="var it36623" onMouseOver="hilite(36623)" onMouseOut="lolite()" onClick="logVariable('roledata')" href="../_variables/roledata.html">$roledata</a>-&gt;<a onClick="logVariable('name')" class="var it45367" onMouseOver="hilite(45367)" onMouseOut="lolite()" href="../_variables/name.html">name</a>      = <a class="var it573" onMouseOver="hilite(573)" onMouseOut="lolite()" onClick="logVariable('role')" href="../_variables/role.html">$role</a>-&gt;<a onClick="logVariable('localname')" class="var it42915" onMouseOver="hilite(42915)" onMouseOut="lolite()" href="../_variables/localname.html">localname</a>;
<a name="l989"><span class="linenum"> 989</span></a>                  <a class="var it36623" onMouseOver="hilite(36623)" onMouseOut="lolite()" onClick="logVariable('roledata')" href="../_variables/roledata.html">$roledata</a>-&gt;<a onClick="logVariable('users')" class="var it45367" onMouseOver="hilite(45367)" onMouseOut="lolite()" href="../_variables/users.html">users</a> = array();
<a name="l990"><span class="linenum"> 990</span></a>                  <a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../_variables/roles.html">$roles</a>[<a class="var it36623" onMouseOver="hilite(36623)" onMouseOut="lolite()" onClick="logVariable('roledata')" href="../_variables/roledata.html">$roledata</a>-&gt;<a onClick="logVariable('id')" class="var it45367" onMouseOver="hilite(45367)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = <a class="var it36623" onMouseOver="hilite(36623)" onMouseOut="lolite()" onClick="logVariable('roledata')" href="../_variables/roledata.html">$roledata</a>;
<a name="l991"><span class="linenum"> 991</span></a>              }
<a name="l992"><span class="linenum"> 992</span></a>  <span class="comment">            // Record that user has role</span>
<a name="l993"><span class="linenum"> 993</span></a>              <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../_variables/users.html">$users</a>[<a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('userid')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>]-&gt;roles[<a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('roleid')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../_variables/roleid.html">roleid</a>] = <a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../_variables/roles.html">$roles</a>[<a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('roleid')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../_variables/roleid.html">roleid</a>];
<a name="l994"><span class="linenum"> 994</span></a>          }
<a name="l995"><span class="linenum"> 995</span></a>      }
<a name="l996"><span class="linenum"> 996</span></a>      <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l997"><span class="linenum"> 997</span></a>  
<a name="l998"><span class="linenum"> 998</span></a>  <span class="comment">    // Return false if there weren't any users</span>
<a name="l999"><span class="linenum"> 999</span></a>      if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../_variables/users.html">$users</a>) == 0) {
<a name="l1000"><span class="linenum">1000</span></a>          return false;
<a name="l1001"><span class="linenum">1001</span></a>      }
<a name="l1002"><span class="linenum">1002</span></a>  
<a name="l1003"><span class="linenum">1003</span></a>  <span class="comment">    // Add pseudo-role for multiple roles</span>
<a name="l1004"><span class="linenum">1004</span></a>      <a class="var it36623" onMouseOver="hilite(36623)" onMouseOut="lolite()" onClick="logVariable('roledata')" href="../_variables/roledata.html">$roledata</a> = new stdClass();
<a name="l1005"><span class="linenum">1005</span></a>      <a class="var it36623" onMouseOver="hilite(36623)" onMouseOut="lolite()" onClick="logVariable('roledata')" href="../_variables/roledata.html">$roledata</a>-&gt;<a onClick="logVariable('name')" class="var it45367" onMouseOver="hilite(45367)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('multipleroles','role');
<a name="l1006"><span class="linenum">1006</span></a>      <a class="var it36623" onMouseOver="hilite(36623)" onMouseOut="lolite()" onClick="logVariable('roledata')" href="../_variables/roledata.html">$roledata</a>-&gt;<a onClick="logVariable('users')" class="var it45367" onMouseOver="hilite(45367)" onMouseOut="lolite()" href="../_variables/users.html">users</a> = array();
<a name="l1007"><span class="linenum">1007</span></a>      <a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../_variables/roles.html">$roles</a>['*'] = <a class="var it36623" onMouseOver="hilite(36623)" onMouseOut="lolite()" onClick="logVariable('roledata')" href="../_variables/roledata.html">$roledata</a>;
<a name="l1008"><span class="linenum">1008</span></a>  
<a name="l1009"><span class="linenum">1009</span></a>      <a class="var it36623" onMouseOver="hilite(36623)" onMouseOut="lolite()" onClick="logVariable('roledata')" href="../_variables/roledata.html">$roledata</a> = new stdClass();
<a name="l1010"><span class="linenum">1010</span></a>      <a class="var it36623" onMouseOver="hilite(36623)" onMouseOut="lolite()" onClick="logVariable('roledata')" href="../_variables/roledata.html">$roledata</a>-&gt;<a onClick="logVariable('name')" class="var it45367" onMouseOver="hilite(45367)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('noroles','role');
<a name="l1011"><span class="linenum">1011</span></a>      <a class="var it36623" onMouseOver="hilite(36623)" onMouseOut="lolite()" onClick="logVariable('roledata')" href="../_variables/roledata.html">$roledata</a>-&gt;<a onClick="logVariable('users')" class="var it45367" onMouseOver="hilite(45367)" onMouseOut="lolite()" href="../_variables/users.html">users</a> = array();
<a name="l1012"><span class="linenum">1012</span></a>      <a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../_variables/roles.html">$roles</a>[0] = <a class="var it36623" onMouseOver="hilite(36623)" onMouseOut="lolite()" onClick="logVariable('roledata')" href="../_variables/roledata.html">$roledata</a>;
<a name="l1013"><span class="linenum">1013</span></a>  
<a name="l1014"><span class="linenum">1014</span></a>  <span class="comment">    // Now we rearrange the data to store users by role</span>
<a name="l1015"><span class="linenum">1015</span></a>      foreach (<a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../_variables/users.html">$users</a> as <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>=&gt;<a class="var it7917" onMouseOver="hilite(7917)" onMouseOut="lolite()" onClick="logVariable('userdata')" href="../_variables/userdata.html">$userdata</a>) {
<a name="l1016"><span class="linenum">1016</span></a>          <a class="var it20144" onMouseOver="hilite(20144)" onMouseOut="lolite()" onClick="logVariable('rolecount')" href="../_variables/rolecount.html">$rolecount</a> = <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it7917" onMouseOver="hilite(7917)" onMouseOut="lolite()" onClick="logVariable('userdata')" href="../_variables/userdata.html">$userdata</a>-&gt;<a onClick="logVariable('roles')" class="var it43313" onMouseOver="hilite(43313)" onMouseOut="lolite()" href="../_variables/roles.html">roles</a>);
<a name="l1017"><span class="linenum">1017</span></a>          if (<a class="var it20144" onMouseOver="hilite(20144)" onMouseOut="lolite()" onClick="logVariable('rolecount')" href="../_variables/rolecount.html">$rolecount</a> == 0) {
<a name="l1018"><span class="linenum">1018</span></a>  <span class="comment">            // does not have any roles</span>
<a name="l1019"><span class="linenum">1019</span></a>              <a class="var it788" onMouseOver="hilite(788)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../_variables/roleid.html">$roleid</a> = 0;
<a name="l1020"><span class="linenum">1020</span></a>          } else if(<a class="var it20144" onMouseOver="hilite(20144)" onMouseOut="lolite()" onClick="logVariable('rolecount')" href="../_variables/rolecount.html">$rolecount</a> &gt; 1) {
<a name="l1021"><span class="linenum">1021</span></a>              <a class="var it788" onMouseOver="hilite(788)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../_variables/roleid.html">$roleid</a> = '*';
<a name="l1022"><span class="linenum">1022</span></a>          } else {
<a name="l1023"><span class="linenum">1023</span></a>              <a class="var it12209" onMouseOver="hilite(12209)" onMouseOut="lolite()" onClick="logVariable('userrole')" href="../_variables/userrole.html">$userrole</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it7917" onMouseOver="hilite(7917)" onMouseOut="lolite()" onClick="logVariable('userdata')" href="../_variables/userdata.html">$userdata</a>-&gt;<a onClick="logVariable('roles')" class="var it43313" onMouseOver="hilite(43313)" onMouseOut="lolite()" href="../_variables/roles.html">roles</a>);
<a name="l1024"><span class="linenum">1024</span></a>              <a class="var it788" onMouseOver="hilite(788)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../_variables/roleid.html">$roleid</a> = <a class="var it12209" onMouseOver="hilite(12209)" onMouseOut="lolite()" onClick="logVariable('userrole')" href="../_variables/userrole.html">$userrole</a>-&gt;<a onClick="logVariable('id')" class="var it43664" onMouseOver="hilite(43664)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1025"><span class="linenum">1025</span></a>          }
<a name="l1026"><span class="linenum">1026</span></a>          <a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../_variables/roles.html">$roles</a>[<a class="var it788" onMouseOver="hilite(788)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../_variables/roleid.html">$roleid</a>]-&gt;users[<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>] = <a class="var it7917" onMouseOver="hilite(7917)" onMouseOut="lolite()" onClick="logVariable('userdata')" href="../_variables/userdata.html">$userdata</a>;
<a name="l1027"><span class="linenum">1027</span></a>      }
<a name="l1028"><span class="linenum">1028</span></a>  
<a name="l1029"><span class="linenum">1029</span></a>  <span class="comment">    // Delete roles not used</span>
<a name="l1030"><span class="linenum">1030</span></a>      foreach (<a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../_variables/roles.html">$roles</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>=&gt;<a class="var it36623" onMouseOver="hilite(36623)" onMouseOut="lolite()" onClick="logVariable('roledata')" href="../_variables/roledata.html">$roledata</a>) {
<a name="l1031"><span class="linenum">1031</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it36623" onMouseOver="hilite(36623)" onMouseOut="lolite()" onClick="logVariable('roledata')" href="../_variables/roledata.html">$roledata</a>-&gt;<a onClick="logVariable('users')" class="var it45367" onMouseOver="hilite(45367)" onMouseOut="lolite()" href="../_variables/users.html">users</a>)===0) {
<a name="l1032"><span class="linenum">1032</span></a>              unset(<a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../_variables/roles.html">$roles</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>]);
<a name="l1033"><span class="linenum">1033</span></a>          }
<a name="l1034"><span class="linenum">1034</span></a>      }
<a name="l1035"><span class="linenum">1035</span></a>  
<a name="l1036"><span class="linenum">1036</span></a>  <span class="comment">    // Return list of roles containing their users</span>
<a name="l1037"><span class="linenum">1037</span></a>      return <a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../_variables/roles.html">$roles</a>;
<a name="l1038"><span class="linenum">1038</span></a>  }
<a name="l1039"><span class="linenum">1039</span></a>  
<a name="l1040"><span class="linenum">1040</span></a>  <span class="comment">/**</span>
<a name="l1041"><span class="linenum">1041</span></a>  <span class="comment"> * Synchronises enrolments with the group membership</span>
<a name="l1042"><span class="linenum">1042</span></a>  <span class="comment"> *</span>
<a name="l1043"><span class="linenum">1043</span></a>  <span class="comment"> * Designed for enrolment methods provide automatic synchronisation between enrolled users</span>
<a name="l1044"><span class="linenum">1044</span></a>  <span class="comment"> * and group membership, such as enrol_cohort and enrol_meta .</span>
<a name="l1045"><span class="linenum">1045</span></a>  <span class="comment"> *</span>
<a name="l1046"><span class="linenum">1046</span></a>  <span class="comment"> * @param string $enrolname name of enrolment method without prefix</span>
<a name="l1047"><span class="linenum">1047</span></a>  <span class="comment"> * @param int $courseid course id where sync needs to be performed (0 for all courses)</span>
<a name="l1048"><span class="linenum">1048</span></a>  <span class="comment"> * @param string $gidfield name of the field in 'enrol' table that stores group id</span>
<a name="l1049"><span class="linenum">1049</span></a>  <span class="comment"> * @return array Returns the list of removed and added users. Each record contains fields:</span>
<a name="l1050"><span class="linenum">1050</span></a>  <span class="comment"> *                  userid, enrolid, courseid, groupid, groupname</span>
<a name="l1051"><span class="linenum">1051</span></a>  <span class="comment"> */</span>
<a name="l1052"><span class="linenum">1052</span></a>  function <a class="function" onClick="logFunction('groups_sync_with_enrolment')" href="../_functions/groups_sync_with_enrolment.html" onMouseOver="funcPopup(event,'groups_sync_with_enrolment')">groups_sync_with_enrolment</a>(<a class="var it36624" onMouseOver="hilite(36624)" onMouseOut="lolite()" onClick="logVariable('enrolname')" href="../_variables/enrolname.html">$enrolname</a>, <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a> = 0, <a class="var it36625" onMouseOver="hilite(36625)" onMouseOut="lolite()" onClick="logVariable('gidfield')" href="../_variables/gidfield.html">$gidfield</a> = 'customint2') {
<a name="l1053"><span class="linenum">1053</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1054"><span class="linenum">1054</span></a>      <a class="var it3007" onMouseOver="hilite(3007)" onMouseOut="lolite()" onClick="logVariable('onecourse')" href="../_variables/onecourse.html">$onecourse</a> = <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a> ? &quot;AND e.courseid = :courseid&quot; : &quot;&quot;;
<a name="l1055"><span class="linenum">1055</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array(
<a name="l1056"><span class="linenum">1056</span></a>          'enrolname' =&gt; <a class="var it36624" onMouseOver="hilite(36624)" onMouseOut="lolite()" onClick="logVariable('enrolname')" href="../_variables/enrolname.html">$enrolname</a>,
<a name="l1057"><span class="linenum">1057</span></a>          'component' =&gt; 'enrol_'.<a class="var it36624" onMouseOver="hilite(36624)" onMouseOut="lolite()" onClick="logVariable('enrolname')" href="../_variables/enrolname.html">$enrolname</a>,
<a name="l1058"><span class="linenum">1058</span></a>          'courseid' =&gt; <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>
<a name="l1059"><span class="linenum">1059</span></a>      );
<a name="l1060"><span class="linenum">1060</span></a>  
<a name="l1061"><span class="linenum">1061</span></a>      <a class="var it3014" onMouseOver="hilite(3014)" onMouseOut="lolite()" onClick="logVariable('affectedusers')" href="../_variables/affectedusers.html">$affectedusers</a> = array(
<a name="l1062"><span class="linenum">1062</span></a>          'removed' =&gt; array(),
<a name="l1063"><span class="linenum">1063</span></a>          'added' =&gt; array()
<a name="l1064"><span class="linenum">1064</span></a>      );
<a name="l1065"><span class="linenum">1065</span></a>  
<a name="l1066"><span class="linenum">1066</span></a>  <span class="comment">    // Remove invalid.</span>
<a name="l1067"><span class="linenum">1067</span></a>      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT ue.userid, ue.enrolid, e.courseid, g.id AS groupid, g.name AS groupname
<a name="l1068"><span class="linenum">1068</span></a>                FROM {groups_members} gm
<a name="l1069"><span class="linenum">1069</span></a>                JOIN {groups} g <a class="function" onClick="logFunction('ON')" href="../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (g.id = gm.groupid)
<a name="l1070"><span class="linenum">1070</span></a>                JOIN {enrol} e <a class="function" onClick="logFunction('ON')" href="../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (e.enrol = :enrolname AND e.courseid = g.courseid <a class="var it3007" onMouseOver="hilite(3007)" onMouseOut="lolite()" onClick="logVariable('onecourse')" href="../_variables/onecourse.html">$onecourse</a>)
<a name="l1071"><span class="linenum">1071</span></a>                JOIN {user_enrolments} ue <a class="function" onClick="logFunction('ON')" href="../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (ue.userid = gm.userid AND ue.enrolid = e.id)
<a name="l1072"><span class="linenum">1072</span></a>               WHERE gm.component=:component AND gm.itemid = e.id AND g.id &lt;&gt; e.{<a class="var it36625" onMouseOver="hilite(36625)" onMouseOut="lolite()" onClick="logVariable('gidfield')" href="../_variables/gidfield.html">$gidfield</a>}&quot;;
<a name="l1073"><span class="linenum">1073</span></a>  
<a name="l1074"><span class="linenum">1074</span></a>      <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l1075"><span class="linenum">1075</span></a>      foreach (<a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a> as <a class="var it3015" onMouseOver="hilite(3015)" onMouseOut="lolite()" onClick="logVariable('gm')" href="../_variables/gm.html">$gm</a>) {
<a name="l1076"><span class="linenum">1076</span></a>          <a class="function" onClick="logFunction('groups_remove_member')" href="../_functions/groups_remove_member.html" onMouseOver="funcPopup(event,'groups_remove_member')">groups_remove_member</a>(<a class="var it3015" onMouseOver="hilite(3015)" onMouseOut="lolite()" onClick="logVariable('gm')" href="../_variables/gm.html">$gm</a>-&gt;<a onClick="logVariable('groupid')" class="var it43760" onMouseOver="hilite(43760)" onMouseOut="lolite()" href="../_variables/groupid.html">groupid</a>, <a class="var it3015" onMouseOver="hilite(3015)" onMouseOut="lolite()" onClick="logVariable('gm')" href="../_variables/gm.html">$gm</a>-&gt;<a onClick="logVariable('userid')" class="var it43760" onMouseOver="hilite(43760)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>);
<a name="l1077"><span class="linenum">1077</span></a>          <a class="var it3014" onMouseOver="hilite(3014)" onMouseOut="lolite()" onClick="logVariable('affectedusers')" href="../_variables/affectedusers.html">$affectedusers</a>['removed'][] = <a class="var it3015" onMouseOver="hilite(3015)" onMouseOut="lolite()" onClick="logVariable('gm')" href="../_variables/gm.html">$gm</a>;
<a name="l1078"><span class="linenum">1078</span></a>      }
<a name="l1079"><span class="linenum">1079</span></a>      <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l1080"><span class="linenum">1080</span></a>  
<a name="l1081"><span class="linenum">1081</span></a>  <span class="comment">    // Add missing.</span>
<a name="l1082"><span class="linenum">1082</span></a>      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT ue.userid, ue.enrolid, e.courseid, g.id AS groupid, g.name AS groupname
<a name="l1083"><span class="linenum">1083</span></a>                FROM {user_enrolments} ue
<a name="l1084"><span class="linenum">1084</span></a>                JOIN {enrol} e <a class="function" onClick="logFunction('ON')" href="../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (e.id = ue.enrolid AND e.enrol = :enrolname <a class="var it3007" onMouseOver="hilite(3007)" onMouseOut="lolite()" onClick="logVariable('onecourse')" href="../_variables/onecourse.html">$onecourse</a>)
<a name="l1085"><span class="linenum">1085</span></a>                JOIN {groups} g <a class="function" onClick="logFunction('ON')" href="../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (g.courseid = e.courseid AND g.id = e.{<a class="var it36625" onMouseOver="hilite(36625)" onMouseOut="lolite()" onClick="logVariable('gidfield')" href="../_variables/gidfield.html">$gidfield</a>})
<a name="l1086"><span class="linenum">1086</span></a>                JOIN {user} u <a class="function" onClick="logFunction('ON')" href="../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (u.id = ue.userid AND u.deleted = 0)
<a name="l1087"><span class="linenum">1087</span></a>           LEFT JOIN {groups_members} gm <a class="function" onClick="logFunction('ON')" href="../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (gm.groupid = g.id AND gm.userid = ue.userid)
<a name="l1088"><span class="linenum">1088</span></a>               WHERE gm.id IS NULL&quot;;
<a name="l1089"><span class="linenum">1089</span></a>  
<a name="l1090"><span class="linenum">1090</span></a>      <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l1091"><span class="linenum">1091</span></a>      foreach (<a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a> as <a class="var it1438" onMouseOver="hilite(1438)" onMouseOut="lolite()" onClick="logVariable('ue')" href="../_variables/ue.html">$ue</a>) {
<a name="l1092"><span class="linenum">1092</span></a>          <a class="function" onClick="logFunction('groups_add_member')" href="../_functions/groups_add_member.html" onMouseOver="funcPopup(event,'groups_add_member')">groups_add_member</a>(<a class="var it1438" onMouseOver="hilite(1438)" onMouseOut="lolite()" onClick="logVariable('ue')" href="../_variables/ue.html">$ue</a>-&gt;<a onClick="logVariable('groupid')" class="var it43660" onMouseOver="hilite(43660)" onMouseOut="lolite()" href="../_variables/groupid.html">groupid</a>, <a class="var it1438" onMouseOver="hilite(1438)" onMouseOut="lolite()" onClick="logVariable('ue')" href="../_variables/ue.html">$ue</a>-&gt;<a onClick="logVariable('userid')" class="var it43660" onMouseOver="hilite(43660)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>, 'enrol_'.<a class="var it36624" onMouseOver="hilite(36624)" onMouseOut="lolite()" onClick="logVariable('enrolname')" href="../_variables/enrolname.html">$enrolname</a>, <a class="var it1438" onMouseOver="hilite(1438)" onMouseOut="lolite()" onClick="logVariable('ue')" href="../_variables/ue.html">$ue</a>-&gt;<a onClick="logVariable('enrolid')" class="var it43660" onMouseOver="hilite(43660)" onMouseOut="lolite()" href="../_variables/enrolid.html">enrolid</a>);
<a name="l1093"><span class="linenum">1093</span></a>          <a class="var it3014" onMouseOver="hilite(3014)" onMouseOut="lolite()" onClick="logVariable('affectedusers')" href="../_variables/affectedusers.html">$affectedusers</a>['added'][] = <a class="var it1438" onMouseOver="hilite(1438)" onMouseOut="lolite()" onClick="logVariable('ue')" href="../_variables/ue.html">$ue</a>;
<a name="l1094"><span class="linenum">1094</span></a>      }
<a name="l1095"><span class="linenum">1095</span></a>      <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../_variables/rs.html">$rs</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l1096"><span class="linenum">1096</span></a>  
<a name="l1097"><span class="linenum">1097</span></a>      return <a class="var it3014" onMouseOver="hilite(3014)" onMouseOut="lolite()" onClick="logVariable('affectedusers')" href="../_variables/affectedusers.html">$affectedusers</a>;
<a name="l1098"><span class="linenum">1098</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'groups_sync_with_enrolment': ['groups_sync_with_enrolment', 'Synchronises enrolments with the group membership ', [['group','lib.php',1040]], 2],
'groups_update_grouping': ['groups_update_grouping', 'Update grouping ', [['group','lib.php',422]], 4],
'record_exists': ['record_exists', 'Check if a record exists by ID. ', [['competency/classes','persistent.php',842],['lib/dml','moodle_database.php',1817]], 901],
'users_order_by_sql': ['users_order_by_sql', 'This function generates the standard ORDER BY clause for use when generating lists of users. If you don\'t have a reason to use a different order, then you should use this method to generate the order when displaying lists of users. ', [['lib','datalib.php',290]], 62],
'is_enrolled': ['is_enrolled', 'Returns true if user is enrolled (is participating) in course this is intended for students and teachers. ', [['lib','accesslib.php',2038]], 145],
'groups_create_grouping': ['groups_create_grouping', 'Add a new grouping ', [['group','lib.php',284]], 9],
'get_parent_context_ids': ['get_parent_context_ids', 'Returns parent contexts of this context in reversed order, i.e. parent first, then grand parent, etc. ', [['lib','accesslib.php',5725]], 55],
'role_fix_names': ['role_fix_names', 'Prepare list of roles for display, apply aliases and localise default role names. ', [['lib','accesslib.php',4676]], 42],
'groups_create_group': ['groups_create_group', 'Add a new group ', [['group','lib.php',221]], 21],
'file_postupdate_standard_editor': ['file_postupdate_standard_editor', 'Prepares the content of the \'editor\' form element with embedded media files to be saved in database ', [['lib','filelib.php',202]], 45],
'delete_records': ['delete_records', 'Delete the records from a table where all the given conditions met. If conditions not specified, table is truncated. ', [['lib/dml','sqlite3_pdo_moodle_database.php',345],['lib/dml','moodle_database.php',1864]], 773],
'groups_update_group': ['groups_update_group', 'Update group ', [['group','lib.php',371]], 3],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pdo_moodle_database.php',461],['lib/dml','oci_native_moodle_database.php',1404],['lib/dml','pgsql_native_moodle_database.php',1089],['lib/dml','mssql_native_moodle_database.php',1067],['lib/dml','mysqli_native_moodle_database.php',1405],['lib/dml','sqlsrv_native_moodle_database.php',1148],['lib/dml/tests','dml_test.php',5551]], 650],
'groups_delete_groupings': ['groups_delete_groupings', 'Delete all groupings from course ', [['group','lib.php',665]], 3],
'get_recordset': ['get_recordset', 'Get the recordset. ', [['mod/glossary/classes','entry_query_builder.php',305],['lib/dml','moodle_database.php',1162]], 92],
'get_file_storage': ['get_file_storage', 'Returns local file storage instance ', [['lib','moodlelib.php',6144]], 546],
'events_trigger_legacy': ['events_trigger_legacy', 'Do not call directly, this is intended to be used from new event base only. ', [['lib','deprecatedlib.php',4183]], 15],
'on': ['on', '', [['lib/requirejs','require.js',508],['lib/jquery','jquery-3.1.0.js',4809]], 3823],
'groups_delete_groups': ['groups_delete_groups', 'Delete all groups from course ', [['group','lib.php',635]], 3],
'groups_is_member': ['groups_is_member', 'Determines if the user is a member of the given group. ', [['lib','grouplib.php',353]], 97],
'get_recordset_sql': ['get_recordset_sql', 'Get a number of records as an moodle_recordset.  $sql must be a complete SQL query. Since this method is a little less readable, use of it should be restricted to code where it\'s possible there might be large datasets being returned.  For known small datasets use get_records_sql - it leads to simpler code. ', [['lib/dml','pdo_moodle_database.php',252],['lib/dml','oci_native_moodle_database.php',1106],['lib/dml','pgsql_native_moodle_database.php',688],['lib/dml','mssql_native_moodle_database.php',736],['lib/dml','mysqli_native_moodle_database.php',993],['lib/dml','sqlsrv_native_moodle_database.php',811],['lib/dml/tests','dml_test.php',5544]], 283],
'groups_remove_member': ['groups_remove_member', 'Deletes the link between the specified user and group. ', [['group','lib.php',173]], 12],
'get_all_roles': ['get_all_roles', 'Returns all site roles in correct sort order. ', [['lib','accesslib.php',3237],['enrol','locallib.php',588]], 47],
'groups_delete_groupings_groups': ['groups_delete_groupings_groups', 'Remove all groups from all groupings in course ', [['group','lib.php',604]], 2],
'process_new_icon': ['process_new_icon', 'Stores optimised icon images in icon file area. ', [['lib','gdlib.php',90]], 6],
'clone': ['clone', '', [['lib/editor/tinymce/tiny_mce/3.5.11/plugins/media/js','media.js',11]], 370],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 2229],
'groups_assign_grouping': ['groups_assign_grouping', 'Assigns group into grouping ', [['group','lib.php',815]], 35],
'groups_unassign_grouping': ['groups_unassign_grouping', 'Unassigns group from grouping ', [['group','lib.php',858]], 3],
'groups_parse_name': ['groups_parse_name', 'Parse a group name for characters to replace ', [['group','lib.php',795]], 3],
'invalidate_by_definition': ['invalidate_by_definition', 'Invalidates a given set of keys from a given definition. ', [['cache/classes','helper.php',206]], 35],
'delete_area_files': ['delete_area_files', 'Delete all area files (optionally limited by itemid). ', [['lib/filestorage','file_storage.php',992]], 123],
'get_component_directory': ['get_component_directory', 'Return exact absolute path to a plugin directory. ', [['lib','deprecatedlib.php',226],['lib/classes','component.php',1051]], 51],
'groups_delete_group': ['groups_delete_group', 'Delete a group best effort, first removing members and links with courses and groupings. Removes group avatar too. ', [['group','lib.php',460]], 7],
'set_field': ['set_field', 'Set a single field in every table record where all the given conditions met. ', [['lib/dml','moodle_database.php',1737],['availability/condition/profile/tests','condition_test.php',349]], 485],
'get_recordset_select': ['get_recordset_select', 'Get a number of records as a moodle_recordset which match a particular WHERE clause. ', [['lib/dml','moodle_database.php',1224]], 45],
'groups_get_members_by_role': ['groups_get_members_by_role', 'Lists users in a group based on their role on the course. Returns false if there\'s an error or there are no users in the group. Otherwise returns an array of role ID => role data, where role data includes: (role) $id, $shortname, $name $users: array of objects for each user which include the specified fields Users who do not have a role are stored in the returned array with key \'-\' and pseudo-role details (including a name, \'No role\'). Users with multiple roles, same deal with key \'*\' and name \'Multiple roles\'. You can find out which roles each has by looking in the $roles array of the user object. ', [['group','lib.php',888]], 3],
'groups_remove_member_allowed': ['groups_remove_member_allowed', 'Checks whether the current user is permitted (using the normal UI) to remove a specific group member, assuming that they have access to remove group members in general. ', [['group','lib.php',124]], 4],
'groups_add_member': ['groups_add_member', 'Adds a specified user to a group ', [['group','lib.php',31]], 101],
'get_area_files': ['get_area_files', 'Returns all area files (optionally limited by itemid) ', [['lib/filestorage','file_storage.php',782],['lib','externallib.php',1134]], 216],
'create': ['create', 'Auto-scan an incoming line to determine the response type. ', [['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',65],['lib/google/src/Google/Service','Partners.php',492],['lib/simplepie/library/SimplePie','Cache.php',95],['lib/google/src/Google/Service','YouTubeReporting.php',237],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',81],['lib/google/src/Google/Service','MapsEngine.php',1677],['lib/google/src/Google/Service','MapsEngine.php',1977],['lib/google/src/Google/Service','MapsEngine.php',2253],['lib/google/src/Google/Service','MapsEngine.php',2330],['lib/google/src/Google/Service','MapsEngine.php',2898],['lib/spout/src/Spout/Writer','WriterFactory.php',18],['lib/google/src/Google/Service','Dns.php',290],['lib/google/src/Google/Service','Dns.php',363],['lib/google/src/Google/Service','Appengine.php',438],['tag/classes','collection.php',188],['lib/adodb','adodb-xmlschema.inc.php',152],['lib/adodb','adodb-xmlschema.inc.php',473],['lib/adodb','adodb-xmlschema.inc.php',738],['lib/adodb','adodb-xmlschema.inc.php',884],['lib/adodb','adodb-xmlschema.inc.php',1129],['mod/quiz','attemptlib.php',100],['mod/quiz','attemptlib.php',596],['lib','weblib.php',3206],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',58],['lib/google/src/Google/Service','Dataflow.php',273],['lib/simplepie/library/SimplePie','Registry.php',153],['competency/classes','persistent.php',387],['lib/google/src/Google/Service','Cloudresourcemanager.php',373],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',270],['lib/google/src/Google/Service','TagManager.php',1007],['lib/google/src/Google/Service','TagManager.php',1097],['lib/google/src/Google/Service','TagManager.php',1249],['lib/google/src/Google/Service','TagManager.php',1342],['lib/google/src/Google/Service','TagManager.php',1436],['lib/google/src/Google/Service','TagManager.php',1530],['lib/google/src/Google/Service','TagManager.php',1681],['mod/lesson','locallib.php',1011],['mod/lesson','locallib.php',2163],['mod/lesson','locallib.php',3212],['lib','modinfolib.php',1732],['repository','lib.php',206],['repository','lib.php',1910],['lib','navigationlib.php',268],['lib/htmlpurifier/HTMLPurifier','Config.php',114],['lib/google/src/Google/Service','Container.php',284],['lib/google/src/Google/Service','Genomics.php',632],['lib/google/src/Google/Service','Genomics.php',721],['lib/google/src/Google/Service','Genomics.php',1312],['lib/google/src/Google/Service','Genomics.php',1427],['lib/google/src/Google/Service','Games.php',1649],['lib/google/src/Google/Service','Games.php',2013],['lib/google/src/Google/Service','Fitness.php',377],['lib/google/src/Google/Service','Gmail.php',747],['lib/google/src/Google/Service','Gmail.php',905],['mod/quiz/classes','structure.php',65],['lib/htmlpurifier/HTMLPurifier','ElementDef.php',135],['lib/adodb','adodb-xmlschema03.inc.php',170],['lib/adodb','adodb-xmlschema03.inc.php',514],['lib/adodb','adodb-xmlschema03.inc.php',779],['lib/adodb','adodb-xmlschema03.inc.php',930],['lib/adodb','adodb-xmlschema03.inc.php',1228],['lib/google/src/Google/Service','Proximitybeacon.php',500],['tag/classes','area.php',205],['course','lib.php',3003],['question/type/ddmarker','shapes.php',170],['lib/classes/event','base.php',149],['lib','coursecatlib.php',325],['repository/filesystem','lib.php',498],['lib/google/src/Google/Service','Storagetransfer.php',281],['calendar','lib.php',2686],['lib/htmlpurifier/HTMLPurifier','Lexer.php',53],['lib/google/src/Google/Service','Classroom.php',445],['lib/google/src/Google/Service','Classroom.php',596],['lib/google/src/Google/Service','Classroom.php',673],['lib/google/src/Google/Service','Classroom.php',783],['lib/google/src/Google/Service','Classroom.php',912],['lib/spout/src/Spout/Reader','ReaderFactory.php',18],['lib/google/src/Google/Service','Pubsub.php',220],['lib/google/src/Google/Service','Pubsub.php',365],['lib/google/src/Google/Service','CloudMonitoring.php',258]], 3276],
'groups_get_possible_roles': ['groups_get_possible_roles', 'Obtains a list of the possible roles that group members might come from, on a course. Generally this includes only profile roles. ', [['group','lib.php',699]], 1],
'get_enrolled_sql': ['get_enrolled_sql', 'Returns array with sql code and parameters returning all ids of users enrolled into course. ', [['lib','accesslib.php',2247]], 47],
'groups_get_grouping_by_idnumber': ['groups_get_grouping_by_idnumber', 'Returns the groupingid of a grouping with the idnumber specified for the course. Grouping names should be unique within course ', [['lib','grouplib.php',139]], 21],
'get_all_user_name_fields': ['get_all_user_name_fields', 'A centralised location for the all name fields. Returns an array / sql string snippet. ', [['lib','moodlelib.php',3360]], 94],
'groups_delete_grouping': ['groups_delete_grouping', 'Delete grouping ', [['group','lib.php',512]], 6],
'instance': ['instance', 'Returns an instance of the cache_factor method. ', [['cache','disabledlib.php',171],['cache','disabledlib.php',296],['lib/classes','useragent.php',101],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['search/classes','manager.php',109],['cache','locallib.php',52],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['lib/classes','plugin_manager.php',103],['lib/htmlpurifier','HTMLPurifier.php',251],['course/format','lib.php',156],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['admin/tool/installaddon/classes','installer.php',40],['lib','modinfolib.php',373],['cache/classes','helper.php',76],['lib/tests','string_manager_standard_test.php',124],['lib/portfolio','exporter.php',251],['lib/classes/update','validator.php',88],['search/classes','document_factory.php',49],['lib','accesslib.php',6235],['lib','accesslib.php',6487],['lib','accesslib.php',6665],['lib','accesslib.php',6919],['lib','accesslib.php',7180],['lib','accesslib.php',7392],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443],['lib','filterlib.php',80],['search/tests/fixtures','testable_core_search.php',43],['lib/tests/fixtures','testable_update_checker.php',45],['backup/cc','validator.php',35],['cache/classes','config.php',87],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29]], 4647],
'close': ['close', 'Close archive, write changes to disk. ', [['lib/filestorage','zip_archive.php',183],['lib/dml','mssql_native_moodle_recordset.php',87],['auth/fc','fcFPP.php',78],['lib/dml','mysqli_native_moodle_recordset.php',86],['lib/spout/src/Spout/Reader','ReaderInterface.php',30],['lib/spout/src/Spout/Writer/ODS/Internal','Workbook.php',81],['lib/dml','pdo_moodle_recordset.php',79],['lib','csvlib.class.php',256],['lib/horde/framework/Horde/Socket','Client.php',135],['backup/util/helper','backup_null_iterator.class.php',53],['admin/tool/uploaduser','locallib.php',149],['lib/tcpdf','tcpdf.php',2943],['lib/phpunit/classes','phpmailer_sink.php',41],['lib/phpmailer','class.smtp.php',582],['lib/dml','sqlsrv_native_moodle_recordset.php',133],['lib/classes/dml','recordset_walk.php',153],['lib/spout/src/Spout/Writer/XLSX/Helper','SharedStringsHelper.php',84],['grade/export','lib.php',689],['lib','excellib.class.php',93],['backup/util/loggers','file_logger.class.php',69],['grade','lib.php',324],['backup/util/helper','backup_array_iterator.class.php',63],['lib/horde/framework/Horde/Imap/Client','Base.php',1846],['mod/assign/feedback/offline','importgradeslib.php',204],['lib/dml','oci_native_moodle_recordset.php',80],['lib/adodb','adodb.inc.php',2361],['lib/adodb','adodb.inc.php',3090],['lib/adodb','adodb.inc.php',3870],['lib/google/src/Google/Logger','File.php',132],['lib/phpunit/classes','event_sink.php',39],['lib/horde/framework/Horde','Stream.php',585],['backup/util/loggers','base_logger.class.php',89],['lib/phpexcel/PHPExcel/Shared','ZipArchive.php',71],['question/engine/tests','helpers.php',1241],['lib/spout/src/Spout/Writer','AbstractWriter.php',312],['lib','odslib.class.php',71],['lib/spout/src/Spout/Writer/Common/Internal','WorksheetInterface.php',34],['lib/spout/src/Spout/Writer/ODS/Internal','Worksheet.php',214],['lib/spout/src/Spout/Writer','WriterInterface.php',84],['lib/spout/src/Spout/Writer/XLSX/Internal','Worksheet.php',174],['lib/spout/src/Spout/Reader','AbstractReader.php',183],['lib/phpunit/classes','message_sink.php',39],['lib/spout/src/Spout/Writer/Common/Internal','WorkbookInterface.php',65],['lib/spout/src/Spout/Writer/XLSX/Internal','Workbook.php',95],['lib/pear/Net','GeoIP.php',556],['lib/tests','completionlib_test.php',907],['lib/pear/Auth','RADIUS.php',550],['lib/pear/Auth','RADIUS.php',710],['lib/pear/Auth','RADIUS.php',829],['lib','webdavlib.php',176],['lib/dml','pgsql_native_moodle_recordset.php',107]], 1128],
'groups_get_group_by_idnumber': ['groups_get_group_by_idnumber', 'Returns the groupid of a group with the idnumber specified for the course. Group idnumbers should be unique within course ', [['lib','grouplib.php',98]], 22],
'get_records_sql': ['get_records_sql', 'Get a number of records as an array of objects. ', [['lib/dml','pdo_moodle_database.php',309],['lib/dml','oci_native_moodle_database.php',1145],['lib/dml','pgsql_native_moodle_database.php',732],['lib/dml','mssql_native_moodle_database.php',805],['lib/dml','mysqli_native_moodle_database.php',1057],['lib/dml','sqlsrv_native_moodle_database.php',890],['lib/dml/tests','dml_test.php',5545]], 700],
'groups_delete_group_members': ['groups_delete_group_members', 'Remove all users (or one user) from all groups in course ', [['group','lib.php',563]], 6],
'groups_get_potential_members': ['groups_get_potential_members', 'Gets potential group members for grouping ', [['group','lib.php',712]], 5],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'notification': ['notification', 'Output a notification (that is, a status message about something that has just happened). ', [['lib','outputrenderers.php',2849],['lib','outputrenderers.php',4412],['lib','outputrenderers.php',4496]], 540],
'get_field': ['get_field', 'Gets an instance of the form field. ', [['lib/behat','behat_field_manager.php',248],['mod/quiz/report/statistics/classes','calculated.php',109],['lib/dml','moodle_database.php',1546],['user/filters','lib.php',124]], 536],
'get_in_or_equal': ['get_in_or_equal', 'Constructs \'IN()\' or \'=\' sql fragment ', [['lib/dml','oci_native_moodle_database.php',1635],['lib/dml','moodle_database.php',711]], 438],
'delete': ['delete', 'Deletes an item from the cache store. ', [['cache/stores/static','lib.php',374],['cache','disabledlib.php',102],['lib/google/src/Google/Service','AdSense.php',1258],['lib/google/src/Google/Service','AdSense.php',1730],['lib/grade','grade_item.php',396],['lib/google/src/Google/Service','Replicapool.php',378],['lib/google/src/Google/Service','Tasks.php',310],['lib/google/src/Google/Service','Tasks.php',428],['lib/google/src/Google/Service','AndroidPublisher.php',1230],['lib/google/src/Google/Service','AndroidPublisher.php',1310],['lib/google/src/Google/Service','AndroidPublisher.php',1668],['lib/google/src/Google/Service','AndroidPublisher.php',1763],['lib/google/src/Google/Service','AndroidPublisher.php',2083],['lib/google/src/Google/Service','YouTubeReporting.php',255],['lib/google/src/Google/Service','Reseller.php',441],['lib/google/src/Google/Cache','Memcache.php',144],['lib','filelib.php',3481],['lib/google/src/Google/Service','Computeaccounts.php',418],['lib/google/src/Google/Service','Computeaccounts.php',497],['lib/google/src/Google/Service','Computeaccounts.php',668],['lib/grade','grade_category.php',281],['lib/grade','grade_scale.php',136],['lib/adodb','adodb-active-record.inc.php',901],['lib/grade','grade_object.php',270],['lib/google/src/Google/Service','YouTubeAnalytics.php',352],['lib/google/src/Google/Service','YouTubeAnalytics.php',447],['lib/google/src/Google/Service','MapsEngine.php',1693],['lib/google/src/Google/Service','MapsEngine.php',1991],['lib/google/src/Google/Service','MapsEngine.php',2344],['lib/google/src/Google/Service','MapsEngine.php',2651],['lib/google/src/Google/Service','MapsEngine.php',2912],['completion','data_object.php',273],['lib/google/src/Google/Cache','File.php',115],['cache/classes','dummystore.php',198],['lib/google/src/Google/Service','Dns.php',378],['cache/classes','loaders.php',792],['cache/classes','loaders.php',1471],['cache/classes','loaders.php',1841],['lib/google/src/Google/Service','Appengine.php',352],['lib/google/src/Google/Service','Appengine.php',455],['tag/classes','collection.php',260],['lib/filebrowser','file_info.php',418],['lib/google/src/Google/Service','AdExchangeBuyer.php',938],['lib/google/src/Google/Service','AdExchangeBuyer.php',1137],['lib/google/src/Google/Service','AdExchangeBuyer.php',1561],['lib/filebrowser','virtual_root_file.php',69],['lib/google/src/Google/Service','Books.php',1946],['lib/grade','grade_grade.php',1024],['lib/grade','grade_outcome.php',97],['lib/google/src/Google/Service','Analytics.php',2165],['lib/google/src/Google/Service','Analytics.php',2534],['lib/google/src/Google/Service','Analytics.php',2655],['lib/google/src/Google/Service','Analytics.php',2872],['lib/google/src/Google/Service','Analytics.php',3001],['lib/google/src/Google/Service','Analytics.php',3092],['lib/google/src/Google/Service','Analytics.php',3406],['lib/google/src/Google/Service','Analytics.php',3631],['lib/google/src/Google/Service','DeploymentManager.php',452],['lib/google/src/Google/Service','Blogger.php',1065],['lib/google/src/Google/Service','Blogger.php',1227],['lib/google/src/Google/Service','Blogger.php',1451],['lib/filebrowser','file_info_stored.php',631],['competency/classes','persistent.php',510],['lib/google/src/Google/Service','CloudUserAccounts.php',528],['lib/google/src/Google/Service','CloudUserAccounts.php',628],['lib/google/src/Google/Service','CloudUserAccounts.php',893],['lib/google/src/Google/Service','Cloudresourcemanager.php',390],['lib/htmlpurifier/HTMLPurifier','Zipper.php',89],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',960],['lib/google/src/Google/Service','TagManager.php',1022],['lib/google/src/Google/Service','TagManager.php',1113],['lib/google/src/Google/Service','TagManager.php',1265],['lib/google/src/Google/Service','TagManager.php',1358],['lib/google/src/Google/Service','TagManager.php',1452],['lib/google/src/Google/Service','TagManager.php',1546],['lib/google/src/Google/Service','TagManager.php',1696],['mod/lesson','locallib.php',1037],['mod/lesson','locallib.php',2271],['repository','lib.php',427],['repository','lib.php',1962],['admin/tool/uploadcourse/classes','course.php',226],['lib','badgeslib.php',640],['lib/google/src/Google/Service','Bigquery.php',531],['lib/google/src/Google/Service','Bigquery.php',863],['lib/google/src/Google/Service','ShoppingContent.php',1050],['lib/google/src/Google/Service','ShoppingContent.php',1448],['lib/google/src/Google/Service','ShoppingContent.php',1970],['lib/google/src/Google/Service','Webmasters.php',355],['lib/google/src/Google/Service','Webmasters.php',449],['lib/google/src/Google/Service','Clouddebugger.php',384],['lib/filestorage','stored_file.php',323],['lib/google/src/Google/Service','Container.php',309],['lib/google/src/Google/Service','Storage.php',1042],['lib/google/src/Google/Service','Storage.php',1157],['lib/google/src/Google/Service','Storage.php',1332],['lib/google/src/Google/Service','Storage.php',1454],['lib/google/src/Google/Service','Storage.php',1681],['cache/stores/memcache','lib.php',401],['lib/google/src/Google/Service','Genomics.php',646],['lib/google/src/Google/Service','Genomics.php',735],['lib/google/src/Google/Service','Genomics.php',903],['lib/google/src/Google/Service','Genomics.php',971],['lib/google/src/Google/Service','Genomics.php',1326],['lib/google/src/Google/Service','Genomics.php',1443],['lib/google/src/Google/Service','Licensing.php',224],['lib/google/src/Google/Service','Fitness.php',400],['lib/google/src/Google/Service','Fitness.php',512],['lib/google/src/Google/Service','Fitness.php',647],['comment','lib.php',790],['lib/google/src/Google/Service','Gmail.php',763],['lib/google/src/Google/Service','Gmail.php',921],['lib/google/src/Google/Service','Gmail.php',1014],['lib/google/src/Google/Service','Gmail.php',1234],['lib/google/src/Google/Service','Taskqueue.php',293],['lib/adodb','adodb-active-recordx.inc.php',1016],['lib','accesslib.php',5580],['cache/classes','interfaces.php',161],['lib/google/src/Google/Service','Autoscaler.php',315],['lib/google/src/Google/Service','Autoscaler.php',429],['lib/google/src/Google/Service','Prediction.php',262],['lib/google/src/Google/Service','SiteVerification.php',139],['lib/google/src/Google/Service','Drive.php',1522],['lib/google/src/Google/Service','Drive.php',1603],['lib/google/src/Google/Service','Drive.php',1748],['lib/google/src/Google/Service','Drive.php',2040],['lib/google/src/Google/Service','Drive.php',2110],['lib/google/src/Google/Service','Drive.php',2240],['lib/google/src/Google/Service','Drive.php',2403],['lib/google/src/Google/Service','Drive.php',2523],['lib/google/src/Google/Service','Proximitybeacon.php',522],['lib/google/src/Google/Service','Directory.php',1683],['lib/google/src/Google/Service','Directory.php',1916],['lib/google/src/Google/Service','Directory.php',1989],['lib/google/src/Google/Service','Directory.php',2059],['lib/google/src/Google/Service','Directory.php',2169],['lib/google/src/Google/Service','Directory.php',2224],['lib/google/src/Google/Service','Directory.php',2351],['lib/google/src/Google/Service','Directory.php',2420],['lib/google/src/Google/Service','Directory.php',2517],['lib/google/src/Google/Service','Directory.php',2652],['lib/google/src/Google/Service','Directory.php',2731],['lib/google/src/Google/Service','Directory.php',2836],['lib/google/src/Google/Service','Directory.php',2938],['lib/google/src/Google/Service','Directory.php',2999],['lib/google/src/Google/Service','Directory.php',3199],['lib/google/src/Google/Service','Directory.php',3274],['lib/google/src/Google/Service','Fusiontables.php',645],['lib/google/src/Google/Service','Fusiontables.php',812],['lib/google/src/Google/Service','Fusiontables.php',937],['lib/google/src/Google/Service','Fusiontables.php',1126],['lib/google/src/Google/Service','Fusiontables.php',1188],['lib/google/src/Google/Service','AdSenseHost.php',734],['lib/google/src/Google/Service','AdSenseHost.php',1010],['lib/google/src/Google/Service','AdSenseHost.php',1168],['lib/google/src/Google/Service','Mirror.php',425],['lib/google/src/Google/Service','Mirror.php',593],['lib/google/src/Google/Service','Mirror.php',661],['lib/google/src/Google/Service','Mirror.php',772],['tag/classes','area.php',187],['lib/google/src/Google/Service','AndroidEnterprise.php',988],['lib/google/src/Google/Service','AndroidEnterprise.php',1092],['lib/google/src/Google/Service','AndroidEnterprise.php',1280],['lib/google/src/Google/Service','AndroidEnterprise.php',1415],['lib/google/src/Google/Service','AndroidEnterprise.php',1597],['course','lib.php',3263],['mnet','peer.php',118],['search/tests/fixtures','mock_search_engine.php',48],['lib/google/src/Google/Service','Calendar.php',903],['lib/google/src/Google/Service','Calendar.php',1071],['lib/google/src/Google/Service','Calendar.php',1269],['lib/google/src/Google/Service','Calendar.php',1412],['cache/stores/session','lib.php',417],['blog','locallib.php',322],['lib/google/src/Google/Service','Storagetransfer.php',381],['cache/stores/mongodb','lib.php',361],['lib/google/src/Google/Cache','Null.php',53],['lib/google/src/Google/Service','GamesConfiguration.php',251],['lib/google/src/Google/Service','GamesConfiguration.php',390],['cache/stores/file','lib.php',393],['badges/criteria','award_criteria.php',330],['cache/stores/memcached','lib.php',402],['lib/google/src/Google/Service','AppState.php',154],['lib/google/src/Google/Service','Resourceviews.php',423],['lib/portfolio','plugin.php',692],['calendar','lib.php',2423],['lib/google/src/Google/Service','Classroom.php',466],['lib/google/src/Google/Service','Classroom.php',615],['lib/google/src/Google/Service','Classroom.php',701],['lib/google/src/Google/Service','Classroom.php',806],['lib/google/src/Google/Service','Classroom.php',934],['lib/google/src/Google/Service','SQLAdmin.php',786],['lib/google/src/Google/Service','SQLAdmin.php',856],['lib/google/src/Google/Service','SQLAdmin.php',1023],['lib/google/src/Google/Service','SQLAdmin.php',1368],['lib/google/src/Google/Service','SQLAdmin.php',1483],['badges/criteria','award_criteria_manual.php',220],['search/engine/solr/classes','engine.php',1045],['lib/google/src/Google/Service','Compute.php',4021],['lib/google/src/Google/Service','Compute.php',4149],['lib/google/src/Google/Service','Compute.php',4284],['lib/google/src/Google/Service','Compute.php',4571],['lib/google/src/Google/Service','Compute.php',4671],['lib/google/src/Google/Service','Compute.php',4829],['lib/google/src/Google/Service','Compute.php',4942],['lib/google/src/Google/Service','Compute.php',5033],['lib/google/src/Google/Service','Compute.php',5174],['lib/google/src/Google/Service','Compute.php',5248],['lib/google/src/Google/Service','Compute.php',5378],['lib/google/src/Google/Service','Compute.php',5508],['lib/google/src/Google/Service','Compute.php',5683],['lib/google/src/Google/Service','Compute.php',5984],['lib/google/src/Google/Service','Compute.php',6156],['lib/google/src/Google/Service','Compute.php',6316],['lib/google/src/Google/Service','Compute.php',6717],['lib/google/src/Google/Service','Compute.php',6898],['lib/google/src/Google/Service','Compute.php',7037],['lib/google/src/Google/Service','Compute.php',7128],['lib/google/src/Google/Service','Compute.php',7208],['lib/google/src/Google/Service','Compute.php',7299],['lib/google/src/Google/Service','Compute.php',7409],['lib/google/src/Google/Service','Compute.php',7570],['lib/google/src/Google/Service','Compute.php',7734],['lib/google/src/Google/Service','Compute.php',7938],['lib/google/src/Google/Service','Compute.php',8035],['lib/google/src/Google/Service','Compute.php',8210],['lib/google/src/Google/Service','Compute.php',8305],['lib/google/src/Google/Service','Pubsub.php',240],['lib/google/src/Google/Service','Pubsub.php',379],['lib/google/src/Google/Service','YouTube.php',1810],['lib/google/src/Google/Service','YouTube.php',2061],['lib/google/src/Google/Service','YouTube.php',2459],['lib/google/src/Google/Service','YouTube.php',2889],['lib/google/src/Google/Service','YouTube.php',3187],['lib/google/src/Google/Service','YouTube.php',3419],['lib/google/src/Google/Service','YouTube.php',3559],['lib/google/src/Google/Service','YouTube.php',3928],['lib/google/src/Google/Service','YouTube.php',4158],['lib/google/src/Google/Cache','Apc.php',105],['lib/google/src/Google/Service','Dfareporting.php',5000],['lib/google/src/Google/Service','Dfareporting.php',5566],['lib/google/src/Google/Service','Dfareporting.php',5753],['lib/google/src/Google/Service','Dfareporting.php',5877],['lib/google/src/Google/Service','Dfareporting.php',6397],['lib/google/src/Google/Service','Dfareporting.php',6578],['lib/google/src/Google/Service','Dfareporting.php',6731],['lib/google/src/Google/Service','Dfareporting.php',6996],['lib/google/src/Google/Service','Dfareporting.php',7503],['lib/google/src/Google/Service','Dfareporting.php',8102],['lib/google/src/Google/Service','Dfareporting.php',8768],['lib/google/src/Google/Service','Manager.php',244],['lib/google/src/Google/Service','Manager.php',324],['lib/google/src/Google/Service','CloudMonitoring.php',274],['lib','webdavlib.php',691]], 317],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'add_record_snapshot': ['add_record_snapshot', 'Add cached data that will be most probably used in event observers. ', [['lib/classes/event','base.php',840]], 332],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'save_temp_file': ['save_temp_file', 'Returns a temporary file, do not forget to delete after not needed any more. ', [['lib','formslib.php',766]], 5],
'groups_calculate_role_people': ['groups_calculate_role_people', 'Internal function used by groups_get_members_by_role to handle the results of a database query that includes a list of users and possible roles on a course. ', [['group','lib.php',941]], 2],
'get_profile_roles': ['get_profile_roles', 'Gets the list of roles assigned to this context and up (parents) from the list of roles that are visible on user profile page and participants page. ', [['lib','accesslib.php',3085]], 3],
'component_callback': ['component_callback', 'Invoke component\'s callback functions ', [['lib','moodlelib.php',7413]], 28],
'trigger': ['trigger', '', [['lib/evalmath','evalmath.class.php',448],['lib/classes/event','base.php',765]], 964],
'join': ['join', 'Join a room. For internal use by the Games SDK only. Calling this method directly is unsupported. (rooms.join) ', [['lib/google/src/Google/Service','Games.php',1716],['lib/google/src/Google/Service','Games.php',2100]], 1030],
'groups_update_group_icon': ['groups_update_group_icon', 'Update the group icon from form data ', [['group','lib.php',334]], 2],
'strstr': ['strstr', '', [], 54],
'array_merge': ['array_merge', '', [], 2944],
'is_dir': ['is_dir', '', [], 211],
'reset': ['reset', '', [], 1213],
'array_key_exists': ['array_key_exists', '', [], 1445],
'str_replace': ['str_replace', '', [], 1648],
'array_keys': ['array_keys', '', [], 1256],
'is_null': ['is_null', '', [], 2003],
'trim': ['trim', '', [], 1948],
'time': ['time', '', [], 1959],
'count': ['count', '', [], 4095],
'unlink': ['unlink', '', [], 256],
'is_object': ['is_object', '', [], 544]};
CLASS_DATA={
'group_member_removed': ['group_member_removed', 'Group member removed event class. ', [['lib/classes/event','group_member_removed.php',28]], 1],
'group_deleted': ['group_deleted', 'Group deleted event class. ', [['lib/classes/event','group_deleted.php',28]], 1],
'moodle_exception': ['moodle_exception', 'Base Moodle Exception class ', [['lib','setuplib.php',75]], 606],
'grouping_group_assigned': ['grouping_group_assigned', 'Group assigned to grouping event class. ', [['lib/classes/event','grouping_group_assigned.php',28]], 1],
'cache_helper': ['cache_helper', 'The cache helper class. ', [['cache/classes','helper.php',31]], 139],
'grouping_created': ['grouping_created', 'Grouping created event class. ', [['lib/classes/event','grouping_created.php',28]], 1],
'context_course': ['context_course', 'Course context class ', [['lib','accesslib.php',6817]], 1323],
'grouping_deleted': ['grouping_deleted', 'Grouping deleted event class. ', [['lib/classes/event','grouping_deleted.php',28]], 1],
'grouping_updated': ['grouping_updated', 'Grouping updated event class. ', [['lib/classes/event','grouping_updated.php',28]], 1],
'group_updated': ['group_updated', 'Group updated event class. ', [['lib/classes/event','group_updated.php',28]], 1],
'group_member_added': ['group_member_added', 'Group member added event class. ', [['lib/classes/event','group_member_added.php',28]], 1],
'group_created': ['group_created', 'Group created event class. ', [['lib/classes/event','group_created.php',28]], 1],
'coding_exception': ['coding_exception', 'Exception indicating programming error, must be fixed by a programer. For example a core API might throw this type of exception if a plugin calls it incorrectly. ', [['lib','setuplib.php',239]], 1200],
'core_component': ['core_component', 'Collection of components related methods. ', [['lib/classes','component.php',41]], 511],
'grouping_group_unassigned': ['grouping_group_unassigned', 'Group unassigned from grouping event class. ', [['lib/classes/event','grouping_group_unassigned.php',28]], 1]};
CONST_DATA={
'IGNORE_MISSING': ['IGNORE_MISSING', '', [['lib','dmllib.php',48]], 215],
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1384],
'SQL_PARAMS_NAMED': ['SQL_PARAMS_NAMED', '', [['lib/dml','moodle_database.php',32]], 315]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
