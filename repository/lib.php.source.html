<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /repository/lib.php source</title>
    <link rel="stylesheet" href="../sample.css" type="text/css">
    <link rel="stylesheet" href="../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../';
subdir='repository';
filename='lib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/repository/</a> -> <a href="lib.php.html">lib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="lib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="lib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * This file contains classes used to manage the repository plugins in Moodle</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @since Moodle 2.0</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @package   core_repository</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @copyright 2009 Dongsheng Cai {@link http://dongsheng.org}</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> */</span>
<a name="l25"><span class="linenum">  25</span></a>  
<a name="l26"><span class="linenum">  26</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l27"><span class="linenum">  27</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> . '/filelib.php');
<a name="l28"><span class="linenum">  28</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> . '/formslib.php');
<a name="l29"><span class="linenum">  29</span></a>  
<a name="l30"><span class="linenum">  30</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('FILE_EXTERNAL')" href="../_constants/FILE_EXTERNAL.html" onMouseOver="constPopup(event,'FILE_EXTERNAL')">FILE_EXTERNAL</a>',  1);
<a name="l31"><span class="linenum">  31</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('FILE_INTERNAL')" href="../_constants/FILE_INTERNAL.html" onMouseOver="constPopup(event,'FILE_INTERNAL')">FILE_INTERNAL</a>',  2);
<a name="l32"><span class="linenum">  32</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('FILE_REFERENCE')" href="../_constants/FILE_REFERENCE.html" onMouseOver="constPopup(event,'FILE_REFERENCE')">FILE_REFERENCE</a>', 4);
<a name="l33"><span class="linenum">  33</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('RENAME_SUFFIX')" href="../_constants/RENAME_SUFFIX.html" onMouseOver="constPopup(event,'RENAME_SUFFIX')">RENAME_SUFFIX</a>', '_2');
<a name="l34"><span class="linenum">  34</span></a>  
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment">/**</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment"> * This class is used to manage repository plugins</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment"> *</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment"> * A repository_type is a repository plug-in. It can be Box.net, Flick-r, ...</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment"> * A repository type can be edited, sorted and hidden. It is mandatory for an</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment"> * administrator to create a repository type in order to be able to create</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment"> * some instances of this type.</span>
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment"> * Coding note:</span>
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment"> * - a repository_type object is mapped to the &quot;repository&quot; database table</span>
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment"> * - &quot;typename&quot; attibut maps the &quot;type&quot; database field. It is unique.</span>
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment"> * - general &quot;options&quot; for a repository type are saved in the config_plugin table</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment"> * - when you delete a repository, all instances are deleted, and general</span>
<a name="l47"><span class="linenum">  47</span></a>  <span class="comment"> *   options are also deleted from database</span>
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment"> * - When you create a type for a plugin that can't have multiple instances, a</span>
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment"> *   instance is automatically created.</span>
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment"> *</span>
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment"> * @package   core_repository</span>
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment"> * @copyright 2009 Jerome Mouneyrac</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment"> */</span>
<a name="l55"><span class="linenum">  55</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('repository_type')" href="../_classes/repository_type.html" onMouseOver="classPopup(event,'repository_type')">repository_type</a> <span class="keyword">implements</span> <a class="class" onClick="logClass('cacheable_object')" href="../_classes/cacheable_object.html" onMouseOver="classPopup(event,'cacheable_object')">cacheable_object</a> {
<a name="l56"><span class="linenum">  56</span></a>  
<a name="l57"><span class="linenum">  57</span></a>  
<a name="l58"><span class="linenum">  58</span></a>      <span class="comment">/**</span>
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment">     * Type name (no whitespace) - A type name is unique</span>
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment">     * Note: for a user-friendly type name see get_readablename()</span>
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment">     * @var String</span>
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment">     */</span>
<a name="l63"><span class="linenum">  63</span></a>      private <a class="var it21374" onMouseOver="hilite(21374)" onMouseOut="lolite()" onClick="logVariable('_typename')" href="../_variables/_typename.html">$_typename</a>;
<a name="l64"><span class="linenum">  64</span></a>  
<a name="l65"><span class="linenum">  65</span></a>  
<a name="l66"><span class="linenum">  66</span></a>      <span class="comment">/**</span>
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">     * Options of this type</span>
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment">     * They are general options that any instance of this type would share</span>
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment">     * e.g. API key</span>
<a name="l70"><span class="linenum">  70</span></a>  <span class="comment">     * These options are saved in config_plugin table</span>
<a name="l71"><span class="linenum">  71</span></a>  <span class="comment">     * @var array</span>
<a name="l72"><span class="linenum">  72</span></a>  <span class="comment">     */</span>
<a name="l73"><span class="linenum">  73</span></a>      private <a class="var it3142" onMouseOver="hilite(3142)" onMouseOut="lolite()" onClick="logVariable('_options')" href="../_variables/_options.html">$_options</a>;
<a name="l74"><span class="linenum">  74</span></a>  
<a name="l75"><span class="linenum">  75</span></a>  
<a name="l76"><span class="linenum">  76</span></a>      <span class="comment">/**</span>
<a name="l77"><span class="linenum">  77</span></a>  <span class="comment">     * Is the repository type visible or hidden</span>
<a name="l78"><span class="linenum">  78</span></a>  <span class="comment">     * If false (hidden): no instances can be created, edited, deleted, showned , used...</span>
<a name="l79"><span class="linenum">  79</span></a>  <span class="comment">     * @var boolean</span>
<a name="l80"><span class="linenum">  80</span></a>  <span class="comment">     */</span>
<a name="l81"><span class="linenum">  81</span></a>      private <a class="var it21081" onMouseOver="hilite(21081)" onMouseOut="lolite()" onClick="logVariable('_visible')" href="../_variables/_visible.html">$_visible</a>;
<a name="l82"><span class="linenum">  82</span></a>  
<a name="l83"><span class="linenum">  83</span></a>  
<a name="l84"><span class="linenum">  84</span></a>      <span class="comment">/**</span>
<a name="l85"><span class="linenum">  85</span></a>  <span class="comment">     * 0 =&gt; not ordered, 1 =&gt; first position, 2 =&gt; second position...</span>
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment">     * A not order type would appear in first position (should never happened)</span>
<a name="l87"><span class="linenum">  87</span></a>  <span class="comment">     * @var integer</span>
<a name="l88"><span class="linenum">  88</span></a>  <span class="comment">     */</span>
<a name="l89"><span class="linenum">  89</span></a>      private <a class="var it21375" onMouseOver="hilite(21375)" onMouseOut="lolite()" onClick="logVariable('_sortorder')" href="../_variables/_sortorder.html">$_sortorder</a>;
<a name="l90"><span class="linenum">  90</span></a>  
<a name="l91"><span class="linenum">  91</span></a>      <span class="comment">/**</span>
<a name="l92"><span class="linenum">  92</span></a>  <span class="comment">     * Return if the instance is visible in a context</span>
<a name="l93"><span class="linenum">  93</span></a>  <span class="comment">     *</span>
<a name="l94"><span class="linenum">  94</span></a>  <span class="comment">     * @todo check if the context visibility has been overwritten by the plugin creator</span>
<a name="l95"><span class="linenum">  95</span></a>  <span class="comment">     *       (need to create special functions to be overvwritten in repository class)</span>
<a name="l96"><span class="linenum">  96</span></a>  <span class="comment">     * @param stdClass $context context</span>
<a name="l97"><span class="linenum">  97</span></a>  <span class="comment">     * @return bool</span>
<a name="l98"><span class="linenum">  98</span></a>  <span class="comment">     */</span>
<a name="l99"><span class="linenum">  99</span></a>      public function <a class="function" onClick="logFunction('get_contextvisibility')" href="../_functions/get_contextvisibility.html" onMouseOver="funcPopup(event,'get_contextvisibility')">get_contextvisibility</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) {
<a name="l100"><span class="linenum"> 100</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>;
<a name="l101"><span class="linenum"> 101</span></a>  
<a name="l102"><span class="linenum"> 102</span></a>          if (<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a> == <a class="constant" onClick="logConstant('CONTEXT_COURSE')" href="../_constants/CONTEXT_COURSE.html" onMouseOver="constPopup(event,'CONTEXT_COURSE')">CONTEXT_COURSE</a>) {
<a name="l103"><span class="linenum"> 103</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_options')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_options.html">_options</a>['enablecourseinstances'];
<a name="l104"><span class="linenum"> 104</span></a>          }
<a name="l105"><span class="linenum"> 105</span></a>  
<a name="l106"><span class="linenum"> 106</span></a>          if (<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a> == <a class="constant" onClick="logConstant('CONTEXT_USER')" href="../_constants/CONTEXT_USER.html" onMouseOver="constPopup(event,'CONTEXT_USER')">CONTEXT_USER</a>) {
<a name="l107"><span class="linenum"> 107</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_options')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_options.html">_options</a>['enableuserinstances'];
<a name="l108"><span class="linenum"> 108</span></a>          }
<a name="l109"><span class="linenum"> 109</span></a>  
<a name="l110"><span class="linenum"> 110</span></a>  <span class="comment">        //the context is SITE</span>
<a name="l111"><span class="linenum"> 111</span></a>          return true;
<a name="l112"><span class="linenum"> 112</span></a>      }
<a name="l113"><span class="linenum"> 113</span></a>  
<a name="l114"><span class="linenum"> 114</span></a>  
<a name="l115"><span class="linenum"> 115</span></a>  
<a name="l116"><span class="linenum"> 116</span></a>      <span class="comment">/**</span>
<a name="l117"><span class="linenum"> 117</span></a>  <span class="comment">     * repository_type constructor</span>
<a name="l118"><span class="linenum"> 118</span></a>  <span class="comment">     *</span>
<a name="l119"><span class="linenum"> 119</span></a>  <span class="comment">     * @param int $typename</span>
<a name="l120"><span class="linenum"> 120</span></a>  <span class="comment">     * @param array $typeoptions</span>
<a name="l121"><span class="linenum"> 121</span></a>  <span class="comment">     * @param bool $visible</span>
<a name="l122"><span class="linenum"> 122</span></a>  <span class="comment">     * @param int $sortorder (don't really need set, it will be during create() call)</span>
<a name="l123"><span class="linenum"> 123</span></a>  <span class="comment">     */</span>
<a name="l124"><span class="linenum"> 124</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it21376" onMouseOver="hilite(21376)" onMouseOut="lolite()" onClick="logVariable('typename')" href="../_variables/typename.html">$typename</a> = '', <a class="var it18675" onMouseOver="hilite(18675)" onMouseOut="lolite()" onClick="logVariable('typeoptions')" href="../_variables/typeoptions.html">$typeoptions</a> = array(), <a class="var it1304" onMouseOver="hilite(1304)" onMouseOut="lolite()" onClick="logVariable('visible')" href="../_variables/visible.html">$visible</a> = true, <a class="var it3515" onMouseOver="hilite(3515)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../_variables/sortorder.html">$sortorder</a> = 0) {
<a name="l125"><span class="linenum"> 125</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l126"><span class="linenum"> 126</span></a>  
<a name="l127"><span class="linenum"> 127</span></a>  <span class="comment">        //set type attributs</span>
<a name="l128"><span class="linenum"> 128</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_typename')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_typename.html">_typename</a> = <a class="var it21376" onMouseOver="hilite(21376)" onMouseOut="lolite()" onClick="logVariable('typename')" href="../_variables/typename.html">$typename</a>;
<a name="l129"><span class="linenum"> 129</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_visible')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_visible.html">_visible</a> = <a class="var it1304" onMouseOver="hilite(1304)" onMouseOut="lolite()" onClick="logVariable('visible')" href="../_variables/visible.html">$visible</a>;
<a name="l130"><span class="linenum"> 130</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_sortorder')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_sortorder.html">_sortorder</a> = <a class="var it3515" onMouseOver="hilite(3515)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../_variables/sortorder.html">$sortorder</a>;
<a name="l131"><span class="linenum"> 131</span></a>  
<a name="l132"><span class="linenum"> 132</span></a>  <span class="comment">        //set options attribut</span>
<a name="l133"><span class="linenum"> 133</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_options')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_options.html">_options</a> = array();
<a name="l134"><span class="linenum"> 134</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('static_function')" href="../_functions/static_function.html" onMouseOver="funcPopup(event,'static_function')">static_function</a>(<a class="var it21376" onMouseOver="hilite(21376)" onMouseOut="lolite()" onClick="logVariable('typename')" href="../_variables/typename.html">$typename</a>, 'get_type_option_names');
<a name="l135"><span class="linenum"> 135</span></a>  <span class="comment">        //check that the type can be setup</span>
<a name="l136"><span class="linenum"> 136</span></a>          if (!empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>)) {
<a name="l137"><span class="linenum"> 137</span></a>  <span class="comment">            //set the type options</span>
<a name="l138"><span class="linenum"> 138</span></a>              foreach (<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> as <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>) {
<a name="l139"><span class="linenum"> 139</span></a>                  if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>, <a class="var it18675" onMouseOver="hilite(18675)" onMouseOut="lolite()" onClick="logVariable('typeoptions')" href="../_variables/typeoptions.html">$typeoptions</a>)) {
<a name="l140"><span class="linenum"> 140</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_options')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_options.html">_options</a>[<a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>] = <a class="var it18675" onMouseOver="hilite(18675)" onMouseOut="lolite()" onClick="logVariable('typeoptions')" href="../_variables/typeoptions.html">$typeoptions</a>[<a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>];
<a name="l141"><span class="linenum"> 141</span></a>                  }
<a name="l142"><span class="linenum"> 142</span></a>              }
<a name="l143"><span class="linenum"> 143</span></a>          }
<a name="l144"><span class="linenum"> 144</span></a>  
<a name="l145"><span class="linenum"> 145</span></a>  <span class="comment">        //retrieve visibility from option</span>
<a name="l146"><span class="linenum"> 146</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('enablecourseinstances',<a class="var it18675" onMouseOver="hilite(18675)" onMouseOut="lolite()" onClick="logVariable('typeoptions')" href="../_variables/typeoptions.html">$typeoptions</a>)) {
<a name="l147"><span class="linenum"> 147</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_options')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_options.html">_options</a>['enablecourseinstances'] = <a class="var it18675" onMouseOver="hilite(18675)" onMouseOut="lolite()" onClick="logVariable('typeoptions')" href="../_variables/typeoptions.html">$typeoptions</a>['enablecourseinstances'];
<a name="l148"><span class="linenum"> 148</span></a>          } else {
<a name="l149"><span class="linenum"> 149</span></a>               <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_options')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_options.html">_options</a>['enablecourseinstances'] = 0;
<a name="l150"><span class="linenum"> 150</span></a>          }
<a name="l151"><span class="linenum"> 151</span></a>  
<a name="l152"><span class="linenum"> 152</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('enableuserinstances',<a class="var it18675" onMouseOver="hilite(18675)" onMouseOut="lolite()" onClick="logVariable('typeoptions')" href="../_variables/typeoptions.html">$typeoptions</a>)) {
<a name="l153"><span class="linenum"> 153</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_options')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_options.html">_options</a>['enableuserinstances'] = <a class="var it18675" onMouseOver="hilite(18675)" onMouseOut="lolite()" onClick="logVariable('typeoptions')" href="../_variables/typeoptions.html">$typeoptions</a>['enableuserinstances'];
<a name="l154"><span class="linenum"> 154</span></a>          } else {
<a name="l155"><span class="linenum"> 155</span></a>               <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_options')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_options.html">_options</a>['enableuserinstances'] = 0;
<a name="l156"><span class="linenum"> 156</span></a>          }
<a name="l157"><span class="linenum"> 157</span></a>  
<a name="l158"><span class="linenum"> 158</span></a>      }
<a name="l159"><span class="linenum"> 159</span></a>  
<a name="l160"><span class="linenum"> 160</span></a>      <span class="comment">/**</span>
<a name="l161"><span class="linenum"> 161</span></a>  <span class="comment">     * Get the type name (no whitespace)</span>
<a name="l162"><span class="linenum"> 162</span></a>  <span class="comment">     * For a human readable name, use get_readablename()</span>
<a name="l163"><span class="linenum"> 163</span></a>  <span class="comment">     *</span>
<a name="l164"><span class="linenum"> 164</span></a>  <span class="comment">     * @return string the type name</span>
<a name="l165"><span class="linenum"> 165</span></a>  <span class="comment">     */</span>
<a name="l166"><span class="linenum"> 166</span></a>      public function <a class="function" onClick="logFunction('get_typename')" href="../_functions/get_typename.html" onMouseOver="funcPopup(event,'get_typename')">get_typename</a>() {
<a name="l167"><span class="linenum"> 167</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_typename')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_typename.html">_typename</a>;
<a name="l168"><span class="linenum"> 168</span></a>      }
<a name="l169"><span class="linenum"> 169</span></a>  
<a name="l170"><span class="linenum"> 170</span></a>      <span class="comment">/**</span>
<a name="l171"><span class="linenum"> 171</span></a>  <span class="comment">     * Return a human readable and user-friendly type name</span>
<a name="l172"><span class="linenum"> 172</span></a>  <span class="comment">     *</span>
<a name="l173"><span class="linenum"> 173</span></a>  <span class="comment">     * @return string user-friendly type name</span>
<a name="l174"><span class="linenum"> 174</span></a>  <span class="comment">     */</span>
<a name="l175"><span class="linenum"> 175</span></a>      public function <a class="function" onClick="logFunction('get_readablename')" href="../_functions/get_readablename.html" onMouseOver="funcPopup(event,'get_readablename')">get_readablename</a>() {
<a name="l176"><span class="linenum"> 176</span></a>          return <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('pluginname','repository_'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_typename')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_typename.html">_typename</a>);
<a name="l177"><span class="linenum"> 177</span></a>      }
<a name="l178"><span class="linenum"> 178</span></a>  
<a name="l179"><span class="linenum"> 179</span></a>      <span class="comment">/**</span>
<a name="l180"><span class="linenum"> 180</span></a>  <span class="comment">     * Return general options</span>
<a name="l181"><span class="linenum"> 181</span></a>  <span class="comment">     *</span>
<a name="l182"><span class="linenum"> 182</span></a>  <span class="comment">     * @return array the general options</span>
<a name="l183"><span class="linenum"> 183</span></a>  <span class="comment">     */</span>
<a name="l184"><span class="linenum"> 184</span></a>      public function <a class="function" onClick="logFunction('get_options')" href="../_functions/get_options.html" onMouseOver="funcPopup(event,'get_options')">get_options</a>() {
<a name="l185"><span class="linenum"> 185</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_options')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_options.html">_options</a>;
<a name="l186"><span class="linenum"> 186</span></a>      }
<a name="l187"><span class="linenum"> 187</span></a>  
<a name="l188"><span class="linenum"> 188</span></a>      <span class="comment">/**</span>
<a name="l189"><span class="linenum"> 189</span></a>  <span class="comment">     * Return visibility</span>
<a name="l190"><span class="linenum"> 190</span></a>  <span class="comment">     *</span>
<a name="l191"><span class="linenum"> 191</span></a>  <span class="comment">     * @return bool</span>
<a name="l192"><span class="linenum"> 192</span></a>  <span class="comment">     */</span>
<a name="l193"><span class="linenum"> 193</span></a>      public function <a class="function" onClick="logFunction('get_visible')" href="../_functions/get_visible.html" onMouseOver="funcPopup(event,'get_visible')">get_visible</a>() {
<a name="l194"><span class="linenum"> 194</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_visible')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_visible.html">_visible</a>;
<a name="l195"><span class="linenum"> 195</span></a>      }
<a name="l196"><span class="linenum"> 196</span></a>  
<a name="l197"><span class="linenum"> 197</span></a>      <span class="comment">/**</span>
<a name="l198"><span class="linenum"> 198</span></a>  <span class="comment">     * Return order / position of display in the file picker</span>
<a name="l199"><span class="linenum"> 199</span></a>  <span class="comment">     *</span>
<a name="l200"><span class="linenum"> 200</span></a>  <span class="comment">     * @return int</span>
<a name="l201"><span class="linenum"> 201</span></a>  <span class="comment">     */</span>
<a name="l202"><span class="linenum"> 202</span></a>      public function <a class="function" onClick="logFunction('get_sortorder')" href="../_functions/get_sortorder.html" onMouseOver="funcPopup(event,'get_sortorder')">get_sortorder</a>() {
<a name="l203"><span class="linenum"> 203</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_sortorder')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_sortorder.html">_sortorder</a>;
<a name="l204"><span class="linenum"> 204</span></a>      }
<a name="l205"><span class="linenum"> 205</span></a>  
<a name="l206"><span class="linenum"> 206</span></a>      <span class="comment">/**</span>
<a name="l207"><span class="linenum"> 207</span></a>  <span class="comment">     * Create a repository type (the type name must not already exist)</span>
<a name="l208"><span class="linenum"> 208</span></a>  <span class="comment">     * @param bool $silent throw exception?</span>
<a name="l209"><span class="linenum"> 209</span></a>  <span class="comment">     * @return mixed return int if create successfully, return false if</span>
<a name="l210"><span class="linenum"> 210</span></a>  <span class="comment">     */</span>
<a name="l211"><span class="linenum"> 211</span></a>      public function <a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it8504" onMouseOver="hilite(8504)" onMouseOut="lolite()" onClick="logVariable('silent')" href="../_variables/silent.html">$silent</a> = false) {
<a name="l212"><span class="linenum"> 212</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l213"><span class="linenum"> 213</span></a>  
<a name="l214"><span class="linenum"> 214</span></a>  <span class="comment">        //check that $type has been set</span>
<a name="l215"><span class="linenum"> 215</span></a>          <a class="var it21377" onMouseOver="hilite(21377)" onMouseOut="lolite()" onClick="logVariable('timmedtype')" href="../_variables/timmedtype.html">$timmedtype</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_typename')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_typename.html">_typename</a>);
<a name="l216"><span class="linenum"> 216</span></a>          if (empty(<a class="var it21377" onMouseOver="hilite(21377)" onMouseOut="lolite()" onClick="logVariable('timmedtype')" href="../_variables/timmedtype.html">$timmedtype</a>)) {
<a name="l217"><span class="linenum"> 217</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('repository_exception')" href="../_classes/repository_exception.html" onMouseOver="classPopup(event,'repository_exception')">repository_exception</a>('emptytype', 'repository');
<a name="l218"><span class="linenum"> 218</span></a>          }
<a name="l219"><span class="linenum"> 219</span></a>  
<a name="l220"><span class="linenum"> 220</span></a>  <span class="comment">        //set sortorder as the last position in the list</span>
<a name="l221"><span class="linenum"> 221</span></a>          if (!isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_sortorder')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_sortorder.html">_sortorder</a>) || <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_sortorder')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_sortorder.html">_sortorder</a> == 0 ) {
<a name="l222"><span class="linenum"> 222</span></a>              <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT <a class="phpfunction" onClick="logFunction('MAX')" href="../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">MAX</a>(sortorder) FROM {repository}&quot;;
<a name="l223"><span class="linenum"> 223</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_sortorder')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_sortorder.html">_sortorder</a> = 1 + <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field_sql')" href="../_functions/get_field_sql.html" onMouseOver="funcPopup(event,'get_field_sql')">get_field_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>);
<a name="l224"><span class="linenum"> 224</span></a>          }
<a name="l225"><span class="linenum"> 225</span></a>  
<a name="l226"><span class="linenum"> 226</span></a>  <span class="comment">        //only create a new type if it doesn't already exist</span>
<a name="l227"><span class="linenum"> 227</span></a>          <a class="var it21378" onMouseOver="hilite(21378)" onMouseOut="lolite()" onClick="logVariable('existingtype')" href="../_variables/existingtype.html">$existingtype</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('repository', array('type'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_typename')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_typename.html">_typename</a>));
<a name="l228"><span class="linenum"> 228</span></a>          if (!<a class="var it21378" onMouseOver="hilite(21378)" onMouseOut="lolite()" onClick="logVariable('existingtype')" href="../_variables/existingtype.html">$existingtype</a>) {
<a name="l229"><span class="linenum"> 229</span></a>  <span class="comment">            //create the type</span>
<a name="l230"><span class="linenum"> 230</span></a>              <a class="var it10018" onMouseOver="hilite(10018)" onMouseOut="lolite()" onClick="logVariable('newtype')" href="../_variables/newtype.html">$newtype</a> = new stdClass();
<a name="l231"><span class="linenum"> 231</span></a>              <a class="var it10018" onMouseOver="hilite(10018)" onMouseOut="lolite()" onClick="logVariable('newtype')" href="../_variables/newtype.html">$newtype</a>-&gt;<a onClick="logVariable('type')" class="var it45925" onMouseOver="hilite(45925)" onMouseOut="lolite()" href="../_variables/type.html">type</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_typename')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_typename.html">_typename</a>;
<a name="l232"><span class="linenum"> 232</span></a>              <a class="var it10018" onMouseOver="hilite(10018)" onMouseOut="lolite()" onClick="logVariable('newtype')" href="../_variables/newtype.html">$newtype</a>-&gt;<a onClick="logVariable('visible')" class="var it45925" onMouseOver="hilite(45925)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_visible')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_visible.html">_visible</a>;
<a name="l233"><span class="linenum"> 233</span></a>              <a class="var it10018" onMouseOver="hilite(10018)" onMouseOut="lolite()" onClick="logVariable('newtype')" href="../_variables/newtype.html">$newtype</a>-&gt;<a onClick="logVariable('sortorder')" class="var it45925" onMouseOver="hilite(45925)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_sortorder')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_sortorder.html">_sortorder</a>;
<a name="l234"><span class="linenum"> 234</span></a>              <a class="var it21379" onMouseOver="hilite(21379)" onMouseOut="lolite()" onClick="logVariable('plugin_id')" href="../_variables/plugin_id.html">$plugin_id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('repository', <a class="var it10018" onMouseOver="hilite(10018)" onMouseOut="lolite()" onClick="logVariable('newtype')" href="../_variables/newtype.html">$newtype</a>);
<a name="l235"><span class="linenum"> 235</span></a>  <span class="comment">            //save the options in DB</span>
<a name="l236"><span class="linenum"> 236</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_options')" href="../_functions/update_options.html" onMouseOver="funcPopup(event,'update_options')">update_options</a>();
<a name="l237"><span class="linenum"> 237</span></a>  
<a name="l238"><span class="linenum"> 238</span></a>              <a class="var it21380" onMouseOver="hilite(21380)" onMouseOut="lolite()" onClick="logVariable('instanceoptionnames')" href="../_variables/instanceoptionnames.html">$instanceoptionnames</a> = <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('static_function')" href="../_functions/static_function.html" onMouseOver="funcPopup(event,'static_function')">static_function</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_typename')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_typename.html">_typename</a>, 'get_instance_option_names');
<a name="l239"><span class="linenum"> 239</span></a>  
<a name="l240"><span class="linenum"> 240</span></a>  <span class="comment">            //if the plugin type has no multiple instance (e.g. has no instance option name) so it wont</span>
<a name="l241"><span class="linenum"> 241</span></a>  <span class="comment">            //be possible for the administrator to create a instance</span>
<a name="l242"><span class="linenum"> 242</span></a>  <span class="comment">            //in this case we need to create an instance</span>
<a name="l243"><span class="linenum"> 243</span></a>              if (empty(<a class="var it21380" onMouseOver="hilite(21380)" onMouseOut="lolite()" onClick="logVariable('instanceoptionnames')" href="../_variables/instanceoptionnames.html">$instanceoptionnames</a>)) {
<a name="l244"><span class="linenum"> 244</span></a>                  <a class="var it18674" onMouseOver="hilite(18674)" onMouseOut="lolite()" onClick="logVariable('instanceoptions')" href="../_variables/instanceoptions.html">$instanceoptions</a> = array();
<a name="l245"><span class="linenum"> 245</span></a>                  if (empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_options')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_options.html">_options</a>['pluginname'])) {
<a name="l246"><span class="linenum"> 246</span></a>  <span class="comment">                    // when moodle trying to install some repo plugin automatically</span>
<a name="l247"><span class="linenum"> 247</span></a>  <span class="comment">                    // this option will be empty, get it from language string when display</span>
<a name="l248"><span class="linenum"> 248</span></a>                      <a class="var it18674" onMouseOver="hilite(18674)" onMouseOut="lolite()" onClick="logVariable('instanceoptions')" href="../_variables/instanceoptions.html">$instanceoptions</a>['name'] = '';
<a name="l249"><span class="linenum"> 249</span></a>                  } else {
<a name="l250"><span class="linenum"> 250</span></a>  <span class="comment">                    // when admin trying to add a plugin manually, he will type a name</span>
<a name="l251"><span class="linenum"> 251</span></a>  <span class="comment">                    // for it</span>
<a name="l252"><span class="linenum"> 252</span></a>                      <a class="var it18674" onMouseOver="hilite(18674)" onMouseOut="lolite()" onClick="logVariable('instanceoptions')" href="../_variables/instanceoptions.html">$instanceoptions</a>['name'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_options')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_options.html">_options</a>['pluginname'];
<a name="l253"><span class="linenum"> 253</span></a>                  }
<a name="l254"><span class="linenum"> 254</span></a>                  <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('static_function')" href="../_functions/static_function.html" onMouseOver="funcPopup(event,'static_function')">static_function</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_typename')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_typename.html">_typename</a>, 'create', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_typename')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_typename.html">_typename</a>, 0, <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(), <a class="var it18674" onMouseOver="hilite(18674)" onMouseOut="lolite()" onClick="logVariable('instanceoptions')" href="../_variables/instanceoptions.html">$instanceoptions</a>);
<a name="l255"><span class="linenum"> 255</span></a>              }
<a name="l256"><span class="linenum"> 256</span></a>  <span class="comment">            //run plugin_init function</span>
<a name="l257"><span class="linenum"> 257</span></a>              if (!<a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('static_function')" href="../_functions/static_function.html" onMouseOver="funcPopup(event,'static_function')">static_function</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_typename')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_typename.html">_typename</a>, 'plugin_init')) {
<a name="l258"><span class="linenum"> 258</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_visibility')" href="../_functions/update_visibility.html" onMouseOver="funcPopup(event,'update_visibility')">update_visibility</a>(false);
<a name="l259"><span class="linenum"> 259</span></a>                  if (!<a class="var it8504" onMouseOver="hilite(8504)" onMouseOut="lolite()" onClick="logVariable('silent')" href="../_variables/silent.html">$silent</a>) {
<a name="l260"><span class="linenum"> 260</span></a>                      throw <span class="keyword">new </span><a class="class" onClick="logClass('repository_exception')" href="../_classes/repository_exception.html" onMouseOver="classPopup(event,'repository_exception')">repository_exception</a>('cannotinitplugin', 'repository');
<a name="l261"><span class="linenum"> 261</span></a>                  }
<a name="l262"><span class="linenum"> 262</span></a>              }
<a name="l263"><span class="linenum"> 263</span></a>  
<a name="l264"><span class="linenum"> 264</span></a>              <a class="class" onClick="logClass('cache')" href="../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'repositories')-&gt;<a class="function" onClick="logFunction('purge')" href="../_functions/purge.html" onMouseOver="funcPopup(event,'purge')">purge</a>();
<a name="l265"><span class="linenum"> 265</span></a>              if(!empty(<a class="var it21379" onMouseOver="hilite(21379)" onMouseOut="lolite()" onClick="logVariable('plugin_id')" href="../_variables/plugin_id.html">$plugin_id</a>)) {
<a name="l266"><span class="linenum"> 266</span></a>  <span class="comment">                // return plugin_id if create successfully</span>
<a name="l267"><span class="linenum"> 267</span></a>                  return <a class="var it21379" onMouseOver="hilite(21379)" onMouseOut="lolite()" onClick="logVariable('plugin_id')" href="../_variables/plugin_id.html">$plugin_id</a>;
<a name="l268"><span class="linenum"> 268</span></a>              } else {
<a name="l269"><span class="linenum"> 269</span></a>                  return false;
<a name="l270"><span class="linenum"> 270</span></a>              }
<a name="l271"><span class="linenum"> 271</span></a>  
<a name="l272"><span class="linenum"> 272</span></a>          } else {
<a name="l273"><span class="linenum"> 273</span></a>              if (!<a class="var it8504" onMouseOver="hilite(8504)" onMouseOut="lolite()" onClick="logVariable('silent')" href="../_variables/silent.html">$silent</a>) {
<a name="l274"><span class="linenum"> 274</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('repository_exception')" href="../_classes/repository_exception.html" onMouseOver="classPopup(event,'repository_exception')">repository_exception</a>('existingrepository', 'repository');
<a name="l275"><span class="linenum"> 275</span></a>              }
<a name="l276"><span class="linenum"> 276</span></a>  <span class="comment">            // If plugin existed, return false, tell caller no new plugins were created.</span>
<a name="l277"><span class="linenum"> 277</span></a>              return false;
<a name="l278"><span class="linenum"> 278</span></a>          }
<a name="l279"><span class="linenum"> 279</span></a>      }
<a name="l280"><span class="linenum"> 280</span></a>  
<a name="l281"><span class="linenum"> 281</span></a>  
<a name="l282"><span class="linenum"> 282</span></a>      <span class="comment">/**</span>
<a name="l283"><span class="linenum"> 283</span></a>  <span class="comment">     * Update plugin options into the config_plugin table</span>
<a name="l284"><span class="linenum"> 284</span></a>  <span class="comment">     *</span>
<a name="l285"><span class="linenum"> 285</span></a>  <span class="comment">     * @param array $options</span>
<a name="l286"><span class="linenum"> 286</span></a>  <span class="comment">     * @return bool</span>
<a name="l287"><span class="linenum"> 287</span></a>  <span class="comment">     */</span>
<a name="l288"><span class="linenum"> 288</span></a>      public function <a class="function" onClick="logFunction('update_options')" href="../_functions/update_options.html" onMouseOver="funcPopup(event,'update_options')">update_options</a>(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = null) {
<a name="l289"><span class="linenum"> 289</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l290"><span class="linenum"> 290</span></a>          <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a> = 'repository_' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_typename')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_typename.html">_typename</a>;
<a name="l291"><span class="linenum"> 291</span></a>          <a class="var it18674" onMouseOver="hilite(18674)" onMouseOut="lolite()" onClick="logVariable('instanceoptions')" href="../_variables/instanceoptions.html">$instanceoptions</a> = <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('static_function')" href="../_functions/static_function.html" onMouseOver="funcPopup(event,'static_function')">static_function</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_typename')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_typename.html">_typename</a>, 'get_instance_option_names');
<a name="l292"><span class="linenum"> 292</span></a>          if (empty(<a class="var it18674" onMouseOver="hilite(18674)" onMouseOut="lolite()" onClick="logVariable('instanceoptions')" href="../_variables/instanceoptions.html">$instanceoptions</a>)) {
<a name="l293"><span class="linenum"> 293</span></a>  <span class="comment">            // update repository instance name if this plugin type doesn't have muliti instances</span>
<a name="l294"><span class="linenum"> 294</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array();
<a name="l295"><span class="linenum"> 295</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['type'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_typename')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_typename.html">_typename</a>;
<a name="l296"><span class="linenum"> 296</span></a>              <a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a> = <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('get_instances')" href="../_functions/get_instances.html" onMouseOver="funcPopup(event,'get_instances')">get_instances</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l297"><span class="linenum"> 297</span></a>              <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a> = <a class="phpfunction" onClick="logFunction('array_pop')" href="../_functions/array_pop.html" onMouseOver="phpfuncPopup(event,'array_pop')">array_pop</a>(<a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a>);
<a name="l298"><span class="linenum"> 298</span></a>              if (<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>) {
<a name="l299"><span class="linenum"> 299</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('repository_instances', 'name', <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['pluginname'], array('id'=&gt;<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('id')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l300"><span class="linenum"> 300</span></a>              }
<a name="l301"><span class="linenum"> 301</span></a>              unset(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['pluginname']);
<a name="l302"><span class="linenum"> 302</span></a>          }
<a name="l303"><span class="linenum"> 303</span></a>  
<a name="l304"><span class="linenum"> 304</span></a>          if (!empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>)) {
<a name="l305"><span class="linenum"> 305</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_options')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_options.html">_options</a> = <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>;
<a name="l306"><span class="linenum"> 306</span></a>          }
<a name="l307"><span class="linenum"> 307</span></a>  
<a name="l308"><span class="linenum"> 308</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_options')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_options.html">_options</a> as <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a> =&gt; <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l309"><span class="linenum"> 309</span></a>              <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>, <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_typename')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_typename.html">_typename</a>);
<a name="l310"><span class="linenum"> 310</span></a>          }
<a name="l311"><span class="linenum"> 311</span></a>  
<a name="l312"><span class="linenum"> 312</span></a>          <a class="class" onClick="logClass('cache')" href="../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'repositories')-&gt;<a class="function" onClick="logFunction('purge')" href="../_functions/purge.html" onMouseOver="funcPopup(event,'purge')">purge</a>();
<a name="l313"><span class="linenum"> 313</span></a>          return true;
<a name="l314"><span class="linenum"> 314</span></a>      }
<a name="l315"><span class="linenum"> 315</span></a>  
<a name="l316"><span class="linenum"> 316</span></a>      <span class="comment">/**</span>
<a name="l317"><span class="linenum"> 317</span></a>  <span class="comment">     * Update visible database field with the value given as parameter</span>
<a name="l318"><span class="linenum"> 318</span></a>  <span class="comment">     * or with the visible value of this object</span>
<a name="l319"><span class="linenum"> 319</span></a>  <span class="comment">     * This function is private.</span>
<a name="l320"><span class="linenum"> 320</span></a>  <span class="comment">     * For public access, have a look to switch_and_update_visibility()</span>
<a name="l321"><span class="linenum"> 321</span></a>  <span class="comment">     *</span>
<a name="l322"><span class="linenum"> 322</span></a>  <span class="comment">     * @param bool $visible</span>
<a name="l323"><span class="linenum"> 323</span></a>  <span class="comment">     * @return bool</span>
<a name="l324"><span class="linenum"> 324</span></a>  <span class="comment">     */</span>
<a name="l325"><span class="linenum"> 325</span></a>      private function <a class="function" onClick="logFunction('update_visible')" href="../_functions/update_visible.html" onMouseOver="funcPopup(event,'update_visible')">update_visible</a>(<a class="var it1304" onMouseOver="hilite(1304)" onMouseOut="lolite()" onClick="logVariable('visible')" href="../_variables/visible.html">$visible</a> = null) {
<a name="l326"><span class="linenum"> 326</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l327"><span class="linenum"> 327</span></a>  
<a name="l328"><span class="linenum"> 328</span></a>          if (!empty(<a class="var it1304" onMouseOver="hilite(1304)" onMouseOut="lolite()" onClick="logVariable('visible')" href="../_variables/visible.html">$visible</a>)) {
<a name="l329"><span class="linenum"> 329</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_visible')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_visible.html">_visible</a> = <a class="var it1304" onMouseOver="hilite(1304)" onMouseOut="lolite()" onClick="logVariable('visible')" href="../_variables/visible.html">$visible</a>;
<a name="l330"><span class="linenum"> 330</span></a>          }
<a name="l331"><span class="linenum"> 331</span></a>          else if (!isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_visible')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_visible.html">_visible</a>)) {
<a name="l332"><span class="linenum"> 332</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('repository_exception')" href="../_classes/repository_exception.html" onMouseOver="classPopup(event,'repository_exception')">repository_exception</a>('updateemptyvisible', 'repository');
<a name="l333"><span class="linenum"> 333</span></a>          }
<a name="l334"><span class="linenum"> 334</span></a>  
<a name="l335"><span class="linenum"> 335</span></a>          <a class="class" onClick="logClass('cache')" href="../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'repositories')-&gt;<a class="function" onClick="logFunction('purge')" href="../_functions/purge.html" onMouseOver="funcPopup(event,'purge')">purge</a>();
<a name="l336"><span class="linenum"> 336</span></a>          return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('repository', 'visible', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_visible')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_visible.html">_visible</a>, array('type'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_typename')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_typename.html">_typename</a>));
<a name="l337"><span class="linenum"> 337</span></a>      }
<a name="l338"><span class="linenum"> 338</span></a>  
<a name="l339"><span class="linenum"> 339</span></a>      <span class="comment">/**</span>
<a name="l340"><span class="linenum"> 340</span></a>  <span class="comment">     * Update database sortorder field with the value given as parameter</span>
<a name="l341"><span class="linenum"> 341</span></a>  <span class="comment">     * or with the sortorder value of this object</span>
<a name="l342"><span class="linenum"> 342</span></a>  <span class="comment">     * This function is private.</span>
<a name="l343"><span class="linenum"> 343</span></a>  <span class="comment">     * For public access, have a look to move_order()</span>
<a name="l344"><span class="linenum"> 344</span></a>  <span class="comment">     *</span>
<a name="l345"><span class="linenum"> 345</span></a>  <span class="comment">     * @param int $sortorder</span>
<a name="l346"><span class="linenum"> 346</span></a>  <span class="comment">     * @return bool</span>
<a name="l347"><span class="linenum"> 347</span></a>  <span class="comment">     */</span>
<a name="l348"><span class="linenum"> 348</span></a>      private function <a class="function" onClick="logFunction('update_sortorder')" href="../_functions/update_sortorder.html" onMouseOver="funcPopup(event,'update_sortorder')">update_sortorder</a>(<a class="var it3515" onMouseOver="hilite(3515)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../_variables/sortorder.html">$sortorder</a> = null) {
<a name="l349"><span class="linenum"> 349</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l350"><span class="linenum"> 350</span></a>  
<a name="l351"><span class="linenum"> 351</span></a>          if (!empty(<a class="var it3515" onMouseOver="hilite(3515)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../_variables/sortorder.html">$sortorder</a>) &amp;&amp; <a class="var it3515" onMouseOver="hilite(3515)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../_variables/sortorder.html">$sortorder</a>!=0) {
<a name="l352"><span class="linenum"> 352</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_sortorder')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_sortorder.html">_sortorder</a> = <a class="var it3515" onMouseOver="hilite(3515)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../_variables/sortorder.html">$sortorder</a>;
<a name="l353"><span class="linenum"> 353</span></a>          }
<a name="l354"><span class="linenum"> 354</span></a>  <span class="comment">        //if sortorder is not set, we set it as the ;ast position in the list</span>
<a name="l355"><span class="linenum"> 355</span></a>          else if (!isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_sortorder')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_sortorder.html">_sortorder</a>) || <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_sortorder')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_sortorder.html">_sortorder</a> == 0 ) {
<a name="l356"><span class="linenum"> 356</span></a>              <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT <a class="phpfunction" onClick="logFunction('MAX')" href="../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">MAX</a>(sortorder) FROM {repository}&quot;;
<a name="l357"><span class="linenum"> 357</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_sortorder')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_sortorder.html">_sortorder</a> = 1 + <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field_sql')" href="../_functions/get_field_sql.html" onMouseOver="funcPopup(event,'get_field_sql')">get_field_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>);
<a name="l358"><span class="linenum"> 358</span></a>          }
<a name="l359"><span class="linenum"> 359</span></a>  
<a name="l360"><span class="linenum"> 360</span></a>          <a class="class" onClick="logClass('cache')" href="../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'repositories')-&gt;<a class="function" onClick="logFunction('purge')" href="../_functions/purge.html" onMouseOver="funcPopup(event,'purge')">purge</a>();
<a name="l361"><span class="linenum"> 361</span></a>          return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('repository', 'sortorder', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_sortorder')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_sortorder.html">_sortorder</a>, array('type'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_typename')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_typename.html">_typename</a>));
<a name="l362"><span class="linenum"> 362</span></a>      }
<a name="l363"><span class="linenum"> 363</span></a>  
<a name="l364"><span class="linenum"> 364</span></a>      <span class="comment">/**</span>
<a name="l365"><span class="linenum"> 365</span></a>  <span class="comment">     * Change order of the type with its adjacent upper or downer type</span>
<a name="l366"><span class="linenum"> 366</span></a>  <span class="comment">     * (database fields are updated)</span>
<a name="l367"><span class="linenum"> 367</span></a>  <span class="comment">     * Algorithm details:</span>
<a name="l368"><span class="linenum"> 368</span></a>  <span class="comment">     * 1. retrieve all types in an array. This array is sorted by sortorder,</span>
<a name="l369"><span class="linenum"> 369</span></a>  <span class="comment">     * and the array keys start from 0 to X (incremented by 1)</span>
<a name="l370"><span class="linenum"> 370</span></a>  <span class="comment">     * 2. switch sortorder values of this type and its adjacent type</span>
<a name="l371"><span class="linenum"> 371</span></a>  <span class="comment">     *</span>
<a name="l372"><span class="linenum"> 372</span></a>  <span class="comment">     * @param string $move &quot;up&quot; or &quot;down&quot;</span>
<a name="l373"><span class="linenum"> 373</span></a>  <span class="comment">     */</span>
<a name="l374"><span class="linenum"> 374</span></a>      public function <a class="function" onClick="logFunction('move_order')" href="../_functions/move_order.html" onMouseOver="funcPopup(event,'move_order')">move_order</a>(<a class="var it12156" onMouseOver="hilite(12156)" onMouseOut="lolite()" onClick="logVariable('move')" href="../_variables/move.html">$move</a>) {
<a name="l375"><span class="linenum"> 375</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l376"><span class="linenum"> 376</span></a>  
<a name="l377"><span class="linenum"> 377</span></a>          <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../_variables/types.html">$types</a> = <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('get_types')" href="../_functions/get_types.html" onMouseOver="funcPopup(event,'get_types')">get_types</a>();    <span class="comment">// retrieve all types</span>
<a name="l378"><span class="linenum"> 378</span></a>  
<a name="l379"><span class="linenum"> 379</span></a>  <span class="comment">        // retrieve this type into the returned array</span>
<a name="l380"><span class="linenum"> 380</span></a>          <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> = 0;
<a name="l381"><span class="linenum"> 381</span></a>          while (!isset(<a class="var it21381" onMouseOver="hilite(21381)" onMouseOut="lolite()" onClick="logVariable('indice')" href="../_variables/indice.html">$indice</a>) &amp;&amp; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>&lt;<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../_variables/types.html">$types</a>)) {
<a name="l382"><span class="linenum"> 382</span></a>              if (<a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../_variables/types.html">$types</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>]-&gt;<a class="function" onClick="logFunction('get_typename')" href="../_functions/get_typename.html" onMouseOver="funcPopup(event,'get_typename')">get_typename</a>() == <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_typename')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_typename.html">_typename</a>) {
<a name="l383"><span class="linenum"> 383</span></a>                  <a class="var it21381" onMouseOver="hilite(21381)" onMouseOut="lolite()" onClick="logVariable('indice')" href="../_variables/indice.html">$indice</a> = <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>;
<a name="l384"><span class="linenum"> 384</span></a>              }
<a name="l385"><span class="linenum"> 385</span></a>              <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>++;
<a name="l386"><span class="linenum"> 386</span></a>          }
<a name="l387"><span class="linenum"> 387</span></a>  
<a name="l388"><span class="linenum"> 388</span></a>  <span class="comment">        // retrieve adjacent indice</span>
<a name="l389"><span class="linenum"> 389</span></a>          switch (<a class="var it12156" onMouseOver="hilite(12156)" onMouseOut="lolite()" onClick="logVariable('move')" href="../_variables/move.html">$move</a>) {
<a name="l390"><span class="linenum"> 390</span></a>              case &quot;up&quot;:
<a name="l391"><span class="linenum"> 391</span></a>                  <a class="var it21382" onMouseOver="hilite(21382)" onMouseOut="lolite()" onClick="logVariable('adjacentindice')" href="../_variables/adjacentindice.html">$adjacentindice</a> = <a class="var it21381" onMouseOver="hilite(21381)" onMouseOut="lolite()" onClick="logVariable('indice')" href="../_variables/indice.html">$indice</a> - 1;
<a name="l392"><span class="linenum"> 392</span></a>              break;
<a name="l393"><span class="linenum"> 393</span></a>              case &quot;down&quot;:
<a name="l394"><span class="linenum"> 394</span></a>                  <a class="var it21382" onMouseOver="hilite(21382)" onMouseOut="lolite()" onClick="logVariable('adjacentindice')" href="../_variables/adjacentindice.html">$adjacentindice</a> = <a class="var it21381" onMouseOver="hilite(21381)" onMouseOut="lolite()" onClick="logVariable('indice')" href="../_variables/indice.html">$indice</a> + 1;
<a name="l395"><span class="linenum"> 395</span></a>              break;
<a name="l396"><span class="linenum"> 396</span></a>              default:
<a name="l397"><span class="linenum"> 397</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('repository_exception')" href="../_classes/repository_exception.html" onMouseOver="classPopup(event,'repository_exception')">repository_exception</a>('movenotdefined', 'repository');
<a name="l398"><span class="linenum"> 398</span></a>          }
<a name="l399"><span class="linenum"> 399</span></a>  
<a name="l400"><span class="linenum"> 400</span></a>  <span class="comment">        //switch sortorder of this type and the adjacent type</span>
<a name="l401"><span class="linenum"> 401</span></a>  <span class="comment">        //TODO: we could reset sortorder for all types. This is not as good in performance term, but</span>
<a name="l402"><span class="linenum"> 402</span></a>  <span class="comment">        //that prevent from wrong behaviour on a screwed database. As performance are not important in this particular case</span>
<a name="l403"><span class="linenum"> 403</span></a>  <span class="comment">        //it worth to change the algo.</span>
<a name="l404"><span class="linenum"> 404</span></a>          if (<a class="var it21382" onMouseOver="hilite(21382)" onMouseOut="lolite()" onClick="logVariable('adjacentindice')" href="../_variables/adjacentindice.html">$adjacentindice</a>&gt;=0 &amp;&amp; !empty(<a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../_variables/types.html">$types</a>[<a class="var it21382" onMouseOver="hilite(21382)" onMouseOut="lolite()" onClick="logVariable('adjacentindice')" href="../_variables/adjacentindice.html">$adjacentindice</a>])) {
<a name="l405"><span class="linenum"> 405</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('repository', 'sortorder', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_sortorder')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_sortorder.html">_sortorder</a>, array('type'=&gt;<a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../_variables/types.html">$types</a>[<a class="var it21382" onMouseOver="hilite(21382)" onMouseOut="lolite()" onClick="logVariable('adjacentindice')" href="../_variables/adjacentindice.html">$adjacentindice</a>]-&gt;<a class="function" onClick="logFunction('get_typename')" href="../_functions/get_typename.html" onMouseOver="funcPopup(event,'get_typename')">get_typename</a>()));
<a name="l406"><span class="linenum"> 406</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_sortorder')" href="../_functions/update_sortorder.html" onMouseOver="funcPopup(event,'update_sortorder')">update_sortorder</a>(<a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../_variables/types.html">$types</a>[<a class="var it21382" onMouseOver="hilite(21382)" onMouseOut="lolite()" onClick="logVariable('adjacentindice')" href="../_variables/adjacentindice.html">$adjacentindice</a>]-&gt;<a class="function" onClick="logFunction('get_sortorder')" href="../_functions/get_sortorder.html" onMouseOver="funcPopup(event,'get_sortorder')">get_sortorder</a>());
<a name="l407"><span class="linenum"> 407</span></a>          }
<a name="l408"><span class="linenum"> 408</span></a>      }
<a name="l409"><span class="linenum"> 409</span></a>  
<a name="l410"><span class="linenum"> 410</span></a>      <span class="comment">/**</span>
<a name="l411"><span class="linenum"> 411</span></a>  <span class="comment">     * 1. Change visibility to the value chosen</span>
<a name="l412"><span class="linenum"> 412</span></a>  <span class="comment">     * 2. Update the type</span>
<a name="l413"><span class="linenum"> 413</span></a>  <span class="comment">     *</span>
<a name="l414"><span class="linenum"> 414</span></a>  <span class="comment">     * @param bool $visible</span>
<a name="l415"><span class="linenum"> 415</span></a>  <span class="comment">     * @return bool</span>
<a name="l416"><span class="linenum"> 416</span></a>  <span class="comment">     */</span>
<a name="l417"><span class="linenum"> 417</span></a>      public function <a class="function" onClick="logFunction('update_visibility')" href="../_functions/update_visibility.html" onMouseOver="funcPopup(event,'update_visibility')">update_visibility</a>(<a class="var it1304" onMouseOver="hilite(1304)" onMouseOut="lolite()" onClick="logVariable('visible')" href="../_variables/visible.html">$visible</a> = null) {
<a name="l418"><span class="linenum"> 418</span></a>          if (<a class="phpfunction" onClick="logFunction('is_bool')" href="../_functions/is_bool.html" onMouseOver="phpfuncPopup(event,'is_bool')">is_bool</a>(<a class="var it1304" onMouseOver="hilite(1304)" onMouseOut="lolite()" onClick="logVariable('visible')" href="../_variables/visible.html">$visible</a>)) {
<a name="l419"><span class="linenum"> 419</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_visible')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_visible.html">_visible</a> = <a class="var it1304" onMouseOver="hilite(1304)" onMouseOut="lolite()" onClick="logVariable('visible')" href="../_variables/visible.html">$visible</a>;
<a name="l420"><span class="linenum"> 420</span></a>          } else {
<a name="l421"><span class="linenum"> 421</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_visible')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_visible.html">_visible</a> = !<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_visible')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_visible.html">_visible</a>;
<a name="l422"><span class="linenum"> 422</span></a>          }
<a name="l423"><span class="linenum"> 423</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_visible')" href="../_functions/update_visible.html" onMouseOver="funcPopup(event,'update_visible')">update_visible</a>();
<a name="l424"><span class="linenum"> 424</span></a>      }
<a name="l425"><span class="linenum"> 425</span></a>  
<a name="l426"><span class="linenum"> 426</span></a>  
<a name="l427"><span class="linenum"> 427</span></a>      <span class="comment">/**</span>
<a name="l428"><span class="linenum"> 428</span></a>  <span class="comment">     * Delete a repository_type (general options are removed from config_plugin</span>
<a name="l429"><span class="linenum"> 429</span></a>  <span class="comment">     * table, and all instances are deleted)</span>
<a name="l430"><span class="linenum"> 430</span></a>  <span class="comment">     *</span>
<a name="l431"><span class="linenum"> 431</span></a>  <span class="comment">     * @param bool $downloadcontents download external contents if exist</span>
<a name="l432"><span class="linenum"> 432</span></a>  <span class="comment">     * @return bool</span>
<a name="l433"><span class="linenum"> 433</span></a>  <span class="comment">     */</span>
<a name="l434"><span class="linenum"> 434</span></a>      public function <a class="function" onClick="logFunction('delete')" href="../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>(<a class="var it422" onMouseOver="hilite(422)" onMouseOut="lolite()" onClick="logVariable('downloadcontents')" href="../_variables/downloadcontents.html">$downloadcontents</a> = false) {
<a name="l435"><span class="linenum"> 435</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l436"><span class="linenum"> 436</span></a>  
<a name="l437"><span class="linenum"> 437</span></a>  <span class="comment">        //delete all instances of this type</span>
<a name="l438"><span class="linenum"> 438</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array();
<a name="l439"><span class="linenum"> 439</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['context'] = array();
<a name="l440"><span class="linenum"> 440</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['onlyvisible'] = false;
<a name="l441"><span class="linenum"> 441</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['type'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_typename')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_typename.html">_typename</a>;
<a name="l442"><span class="linenum"> 442</span></a>          <a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a> = <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('get_instances')" href="../_functions/get_instances.html" onMouseOver="funcPopup(event,'get_instances')">get_instances</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l443"><span class="linenum"> 443</span></a>          foreach (<a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a> as <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>) {
<a name="l444"><span class="linenum"> 444</span></a>              <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>(<a class="var it422" onMouseOver="hilite(422)" onMouseOut="lolite()" onClick="logVariable('downloadcontents')" href="../_variables/downloadcontents.html">$downloadcontents</a>);
<a name="l445"><span class="linenum"> 445</span></a>          }
<a name="l446"><span class="linenum"> 446</span></a>  
<a name="l447"><span class="linenum"> 447</span></a>  <span class="comment">        //delete all general options</span>
<a name="l448"><span class="linenum"> 448</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_options')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_options.html">_options</a> as <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a> =&gt; <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l449"><span class="linenum"> 449</span></a>              <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>, null, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_typename')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_typename.html">_typename</a>);
<a name="l450"><span class="linenum"> 450</span></a>          }
<a name="l451"><span class="linenum"> 451</span></a>  
<a name="l452"><span class="linenum"> 452</span></a>          <a class="class" onClick="logClass('cache')" href="../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'repositories')-&gt;<a class="function" onClick="logFunction('purge')" href="../_functions/purge.html" onMouseOver="funcPopup(event,'purge')">purge</a>();
<a name="l453"><span class="linenum"> 453</span></a>          try {
<a name="l454"><span class="linenum"> 454</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('repository', array('type' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_typename')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_typename.html">_typename</a>));
<a name="l455"><span class="linenum"> 455</span></a>          } catch (dml_exception <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../_variables/ex.html">$ex</a>) {
<a name="l456"><span class="linenum"> 456</span></a>              return false;
<a name="l457"><span class="linenum"> 457</span></a>          }
<a name="l458"><span class="linenum"> 458</span></a>          return true;
<a name="l459"><span class="linenum"> 459</span></a>      }
<a name="l460"><span class="linenum"> 460</span></a>  
<a name="l461"><span class="linenum"> 461</span></a>      <span class="comment">/**</span>
<a name="l462"><span class="linenum"> 462</span></a>  <span class="comment">     * Prepares the repository type to be cached. Implements method from cacheable_object interface.</span>
<a name="l463"><span class="linenum"> 463</span></a>  <span class="comment">     *</span>
<a name="l464"><span class="linenum"> 464</span></a>  <span class="comment">     * @return array</span>
<a name="l465"><span class="linenum"> 465</span></a>  <span class="comment">     */</span>
<a name="l466"><span class="linenum"> 466</span></a>      public function <a class="function" onClick="logFunction('prepare_to_cache')" href="../_functions/prepare_to_cache.html" onMouseOver="funcPopup(event,'prepare_to_cache')">prepare_to_cache</a>() {
<a name="l467"><span class="linenum"> 467</span></a>          return array(
<a name="l468"><span class="linenum"> 468</span></a>              'typename' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_typename')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_typename.html">_typename</a>,
<a name="l469"><span class="linenum"> 469</span></a>              'typeoptions' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_options')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_options.html">_options</a>,
<a name="l470"><span class="linenum"> 470</span></a>              'visible' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_visible')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_visible.html">_visible</a>,
<a name="l471"><span class="linenum"> 471</span></a>              'sortorder' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;_sortorder
<a name="l472"><span class="linenum"> 472</span></a>          );
<a name="l473"><span class="linenum"> 473</span></a>      }
<a name="l474"><span class="linenum"> 474</span></a>  
<a name="l475"><span class="linenum"> 475</span></a>      <span class="comment">/**</span>
<a name="l476"><span class="linenum"> 476</span></a>  <span class="comment">     * Restores repository type from cache. Implements method from cacheable_object interface.</span>
<a name="l477"><span class="linenum"> 477</span></a>  <span class="comment">     *</span>
<a name="l478"><span class="linenum"> 478</span></a>  <span class="comment">     * @return array</span>
<a name="l479"><span class="linenum"> 479</span></a>  <span class="comment">     */</span>
<a name="l480"><span class="linenum"> 480</span></a>      public static function <a class="function" onClick="logFunction('wake_from_cache')" href="../_functions/wake_from_cache.html" onMouseOver="funcPopup(event,'wake_from_cache')">wake_from_cache</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>) {
<a name="l481"><span class="linenum"> 481</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('repository_type')" href="../_classes/repository_type.html" onMouseOver="classPopup(event,'repository_type')">repository_type</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['typename'], <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['typeoptions'], <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['visible'], <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['sortorder']);
<a name="l482"><span class="linenum"> 482</span></a>      }
<a name="l483"><span class="linenum"> 483</span></a>  }
<a name="l484"><span class="linenum"> 484</span></a>  
<a name="l485"><span class="linenum"> 485</span></a>  <span class="comment">/**</span>
<a name="l486"><span class="linenum"> 486</span></a>  <span class="comment"> * This is the base class of the repository class.</span>
<a name="l487"><span class="linenum"> 487</span></a>  <span class="comment"> *</span>
<a name="l488"><span class="linenum"> 488</span></a>  <span class="comment"> * To create repository plugin, see: {@link http://docs.moodle.org/dev/Repository_plugins}</span>
<a name="l489"><span class="linenum"> 489</span></a>  <span class="comment"> * See an example: {@link repository_boxnet}</span>
<a name="l490"><span class="linenum"> 490</span></a>  <span class="comment"> *</span>
<a name="l491"><span class="linenum"> 491</span></a>  <span class="comment"> * @package   core_repository</span>
<a name="l492"><span class="linenum"> 492</span></a>  <span class="comment"> * @copyright 2009 Dongsheng Cai {@link http://dongsheng.org}</span>
<a name="l493"><span class="linenum"> 493</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l494"><span class="linenum"> 494</span></a>  <span class="comment"> */</span>
<a name="l495"><span class="linenum"> 495</span></a>  abstract <span class="keyword">class </span><a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a> <span class="keyword">implements</span> <a class="class" onClick="logClass('cacheable_object')" href="../_classes/cacheable_object.html" onMouseOver="classPopup(event,'cacheable_object')">cacheable_object</a> {
<a name="l496"><span class="linenum"> 496</span></a>      <span class="comment">/**</span>
<a name="l497"><span class="linenum"> 497</span></a>  <span class="comment">     * Timeout in seconds for downloading the external file into moodle</span>
<a name="l498"><span class="linenum"> 498</span></a>  <span class="comment">     * @deprecated since Moodle 2.7, please use $CFG-&gt;repositorygetfiletimeout instead</span>
<a name="l499"><span class="linenum"> 499</span></a>  <span class="comment">     */</span>
<a name="l500"><span class="linenum"> 500</span></a>      const GETFILE_TIMEOUT = 30;
<a name="l501"><span class="linenum"> 501</span></a>  
<a name="l502"><span class="linenum"> 502</span></a>      <span class="comment">/**</span>
<a name="l503"><span class="linenum"> 503</span></a>  <span class="comment">     * Timeout in seconds for syncronising the external file size</span>
<a name="l504"><span class="linenum"> 504</span></a>  <span class="comment">     * @deprecated since Moodle 2.7, please use $CFG-&gt;repositorysyncfiletimeout instead</span>
<a name="l505"><span class="linenum"> 505</span></a>  <span class="comment">     */</span>
<a name="l506"><span class="linenum"> 506</span></a>      const SYNCFILE_TIMEOUT = 1;
<a name="l507"><span class="linenum"> 507</span></a>  
<a name="l508"><span class="linenum"> 508</span></a>      <span class="comment">/**</span>
<a name="l509"><span class="linenum"> 509</span></a>  <span class="comment">     * Timeout in seconds for downloading an image file from external repository during syncronisation</span>
<a name="l510"><span class="linenum"> 510</span></a>  <span class="comment">     * @deprecated since Moodle 2.7, please use $CFG-&gt;repositorysyncimagetimeout instead</span>
<a name="l511"><span class="linenum"> 511</span></a>  <span class="comment">     */</span>
<a name="l512"><span class="linenum"> 512</span></a>      const SYNCIMAGE_TIMEOUT = 3;
<a name="l513"><span class="linenum"> 513</span></a>  
<a name="l514"><span class="linenum"> 514</span></a>  <span class="comment">    // $disabled can be set to true to disable a plugin by force</span>
<a name="l515"><span class="linenum"> 515</span></a>  <span class="comment">    // example: self::$disabled = true</span>
<a name="l516"><span class="linenum"> 516</span></a>  <span class="comment">    /** @var bool force disable repository instance */</span>
<a name="l517"><span class="linenum"> 517</span></a>      public <a class="var it1355" onMouseOver="hilite(1355)" onMouseOut="lolite()" onClick="logVariable('disabled')" href="../_variables/disabled.html">$disabled</a> = false;
<a name="l518"><span class="linenum"> 518</span></a>  <span class="comment">    /** @var int repository instance id */</span>
<a name="l519"><span class="linenum"> 519</span></a>      public <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>;
<a name="l520"><span class="linenum"> 520</span></a>  <span class="comment">    /** @var stdClass current context */</span>
<a name="l521"><span class="linenum"> 521</span></a>      public <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>;
<a name="l522"><span class="linenum"> 522</span></a>  <span class="comment">    /** @var array repository options */</span>
<a name="l523"><span class="linenum"> 523</span></a>      public <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>;
<a name="l524"><span class="linenum"> 524</span></a>  <span class="comment">    /** @var bool Whether or not the repository instance is editable */</span>
<a name="l525"><span class="linenum"> 525</span></a>      public <a class="var it283" onMouseOver="hilite(283)" onMouseOut="lolite()" onClick="logVariable('readonly')" href="../_variables/readonly.html">$readonly</a>;
<a name="l526"><span class="linenum"> 526</span></a>  <span class="comment">    /** @var int return types */</span>
<a name="l527"><span class="linenum"> 527</span></a>      public <a class="var it21383" onMouseOver="hilite(21383)" onMouseOut="lolite()" onClick="logVariable('returntypes')" href="../_variables/returntypes.html">$returntypes</a>;
<a name="l528"><span class="linenum"> 528</span></a>  <span class="comment">    /** @var stdClass repository instance database record */</span>
<a name="l529"><span class="linenum"> 529</span></a>      public <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>;
<a name="l530"><span class="linenum"> 530</span></a>  <span class="comment">    /** @var string Type of repository (webdav, google_docs, dropbox, ...). Read from $this-&gt;get_typename(). */</span>
<a name="l531"><span class="linenum"> 531</span></a>      protected <a class="var it21376" onMouseOver="hilite(21376)" onMouseOut="lolite()" onClick="logVariable('typename')" href="../_variables/typename.html">$typename</a>;
<a name="l532"><span class="linenum"> 532</span></a>  
<a name="l533"><span class="linenum"> 533</span></a>      <span class="comment">/**</span>
<a name="l534"><span class="linenum"> 534</span></a>  <span class="comment">     * Constructor</span>
<a name="l535"><span class="linenum"> 535</span></a>  <span class="comment">     *</span>
<a name="l536"><span class="linenum"> 536</span></a>  <span class="comment">     * @param int $repositoryid repository instance id</span>
<a name="l537"><span class="linenum"> 537</span></a>  <span class="comment">     * @param int|stdClass $context a context id or context object</span>
<a name="l538"><span class="linenum"> 538</span></a>  <span class="comment">     * @param array $options repository options</span>
<a name="l539"><span class="linenum"> 539</span></a>  <span class="comment">     * @param int $readonly indicate this repo is readonly or not</span>
<a name="l540"><span class="linenum"> 540</span></a>  <span class="comment">     */</span>
<a name="l541"><span class="linenum"> 541</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it5419" onMouseOver="hilite(5419)" onMouseOut="lolite()" onClick="logVariable('repositoryid')" href="../_variables/repositoryid.html">$repositoryid</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="constant" onClick="logConstant('SYSCONTEXTID')" href="../_constants/SYSCONTEXTID.html" onMouseOver="constPopup(event,'SYSCONTEXTID')">SYSCONTEXTID</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = array(), <a class="var it283" onMouseOver="hilite(283)" onMouseOut="lolite()" onClick="logVariable('readonly')" href="../_variables/readonly.html">$readonly</a> = 0) {
<a name="l542"><span class="linenum"> 542</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l543"><span class="linenum"> 543</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it5419" onMouseOver="hilite(5419)" onMouseOut="lolite()" onClick="logVariable('repositoryid')" href="../_variables/repositoryid.html">$repositoryid</a>;
<a name="l544"><span class="linenum"> 544</span></a>          if (<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l545"><span class="linenum"> 545</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/context.html">context</a> = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>;
<a name="l546"><span class="linenum"> 546</span></a>          } else {
<a name="l547"><span class="linenum"> 547</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/context.html">context</a> = context::<a class="function" onClick="logFunction('instance_by_id')" href="../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l548"><span class="linenum"> 548</span></a>          }
<a name="l549"><span class="linenum"> 549</span></a>          <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a> = <a class="class" onClick="logClass('cache')" href="../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'repositories');
<a name="l550"><span class="linenum"> 550</span></a>          if ((<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instance')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a> = <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('i:'. <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)) === false) {
<a name="l551"><span class="linenum"> 551</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instance')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record_sql')" href="../_functions/get_record_sql.html" onMouseOver="funcPopup(event,'get_record_sql')">get_record_sql</a>(&quot;SELECT i.*, r.type AS repositorytype, r.sortorder, r.visible
<a name="l552"><span class="linenum"> 552</span></a>                        FROM {repository} r, {repository_instances} i
<a name="l553"><span class="linenum"> 553</span></a>                       WHERE i.typeid = r.id and i.id = ?&quot;, array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l554"><span class="linenum"> 554</span></a>              <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('i:'. <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instance')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>);
<a name="l555"><span class="linenum"> 555</span></a>          }
<a name="l556"><span class="linenum"> 556</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('readonly')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/readonly.html">readonly</a> = <a class="var it283" onMouseOver="hilite(283)" onMouseOut="lolite()" onClick="logVariable('readonly')" href="../_variables/readonly.html">$readonly</a>;
<a name="l557"><span class="linenum"> 557</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('options')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/options.html">options</a> = array();
<a name="l558"><span class="linenum"> 558</span></a>  
<a name="l559"><span class="linenum"> 559</span></a>          if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>)) {
<a name="l560"><span class="linenum"> 560</span></a>  <span class="comment">            // The get_option() method will get stored options in database.</span>
<a name="l561"><span class="linenum"> 561</span></a>              <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_option')" href="../_functions/get_option.html" onMouseOver="funcPopup(event,'get_option')">get_option</a>(), <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>);
<a name="l562"><span class="linenum"> 562</span></a>          } else {
<a name="l563"><span class="linenum"> 563</span></a>              <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_option')" href="../_functions/get_option.html" onMouseOver="funcPopup(event,'get_option')">get_option</a>();
<a name="l564"><span class="linenum"> 564</span></a>          }
<a name="l565"><span class="linenum"> 565</span></a>          foreach (<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> as <a class="var it2074" onMouseOver="hilite(2074)" onMouseOut="lolite()" onClick="logVariable('n')" href="../_variables/n.html">$n</a> =&gt; <a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('v')" href="../_variables/v.html">$v</a>) {
<a name="l566"><span class="linenum"> 566</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('options')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/options.html">options</a>[<a class="var it2074" onMouseOver="hilite(2074)" onMouseOut="lolite()" onClick="logVariable('n')" href="../_variables/n.html">$n</a>] = <a class="var it69" onMouseOver="hilite(69)" onMouseOut="lolite()" onClick="logVariable('v')" href="../_variables/v.html">$v</a>;
<a name="l567"><span class="linenum"> 567</span></a>          }
<a name="l568"><span class="linenum"> 568</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('name')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>();
<a name="l569"><span class="linenum"> 569</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('returntypes')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/returntypes.html">returntypes</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('supported_returntypes')" href="../_functions/supported_returntypes.html" onMouseOver="funcPopup(event,'supported_returntypes')">supported_returntypes</a>();
<a name="l570"><span class="linenum"> 570</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('super_called')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/super_called.html">super_called</a> = true;
<a name="l571"><span class="linenum"> 571</span></a>      }
<a name="l572"><span class="linenum"> 572</span></a>  
<a name="l573"><span class="linenum"> 573</span></a>      <span class="comment">/**</span>
<a name="l574"><span class="linenum"> 574</span></a>  <span class="comment">     * Get repository instance using repository id</span>
<a name="l575"><span class="linenum"> 575</span></a>  <span class="comment">     *</span>
<a name="l576"><span class="linenum"> 576</span></a>  <span class="comment">     * Note that this function does not check permission to access repository contents</span>
<a name="l577"><span class="linenum"> 577</span></a>  <span class="comment">     *</span>
<a name="l578"><span class="linenum"> 578</span></a>  <span class="comment">     * @throws repository_exception</span>
<a name="l579"><span class="linenum"> 579</span></a>  <span class="comment">     *</span>
<a name="l580"><span class="linenum"> 580</span></a>  <span class="comment">     * @param int $repositoryid repository instance ID</span>
<a name="l581"><span class="linenum"> 581</span></a>  <span class="comment">     * @param context|int $context context instance or context ID where this repository will be used</span>
<a name="l582"><span class="linenum"> 582</span></a>  <span class="comment">     * @param array $options additional repository options</span>
<a name="l583"><span class="linenum"> 583</span></a>  <span class="comment">     * @return repository</span>
<a name="l584"><span class="linenum"> 584</span></a>  <span class="comment">     */</span>
<a name="l585"><span class="linenum"> 585</span></a>      public static function <a class="function" onClick="logFunction('get_repository_by_id')" href="../_functions/get_repository_by_id.html" onMouseOver="funcPopup(event,'get_repository_by_id')">get_repository_by_id</a>(<a class="var it5419" onMouseOver="hilite(5419)" onMouseOut="lolite()" onClick="logVariable('repositoryid')" href="../_variables/repositoryid.html">$repositoryid</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = array()) {
<a name="l586"><span class="linenum"> 586</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l587"><span class="linenum"> 587</span></a>          <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a> = <a class="class" onClick="logClass('cache')" href="../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'repositories');
<a name="l588"><span class="linenum"> 588</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l589"><span class="linenum"> 589</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = context::<a class="function" onClick="logFunction('instance_by_id')" href="../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l590"><span class="linenum"> 590</span></a>          }
<a name="l591"><span class="linenum"> 591</span></a>          <a class="var it6665" onMouseOver="hilite(6665)" onMouseOut="lolite()" onClick="logVariable('cachekey')" href="../_variables/cachekey.html">$cachekey</a> = 'rep:'. <a class="var it5419" onMouseOver="hilite(5419)" onMouseOut="lolite()" onClick="logVariable('repositoryid')" href="../_variables/repositoryid.html">$repositoryid</a>. ':'. <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>. ':'. <a class="phpfunction" onClick="logFunction('serialize')" href="../_functions/serialize.html" onMouseOver="phpfuncPopup(event,'serialize')">serialize</a>(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>);
<a name="l592"><span class="linenum"> 592</span></a>          if (<a class="var it641" onMouseOver="hilite(641)" onMouseOut="lolite()" onClick="logVariable('repository')" href="../_variables/repository.html">$repository</a> = <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it6665" onMouseOver="hilite(6665)" onMouseOut="lolite()" onClick="logVariable('cachekey')" href="../_variables/cachekey.html">$cachekey</a>)) {
<a name="l593"><span class="linenum"> 593</span></a>              return <a class="var it641" onMouseOver="hilite(641)" onMouseOut="lolite()" onClick="logVariable('repository')" href="../_variables/repository.html">$repository</a>;
<a name="l594"><span class="linenum"> 594</span></a>          }
<a name="l595"><span class="linenum"> 595</span></a>  
<a name="l596"><span class="linenum"> 596</span></a>          if (!<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a> = <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('i:'. <a class="var it5419" onMouseOver="hilite(5419)" onMouseOut="lolite()" onClick="logVariable('repositoryid')" href="../_variables/repositoryid.html">$repositoryid</a>)) {
<a name="l597"><span class="linenum"> 597</span></a>              <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT i.*, r.type AS repositorytype, r.visible, r.sortorder
<a name="l598"><span class="linenum"> 598</span></a>                        FROM {repository_instances} i
<a name="l599"><span class="linenum"> 599</span></a>                        JOIN {repository} r ON r.id = i.typeid
<a name="l600"><span class="linenum"> 600</span></a>                       WHERE i.id = ?&quot;;
<a name="l601"><span class="linenum"> 601</span></a>              if (!<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record_sql')" href="../_functions/get_record_sql.html" onMouseOver="funcPopup(event,'get_record_sql')">get_record_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, array(<a class="var it5419" onMouseOver="hilite(5419)" onMouseOut="lolite()" onClick="logVariable('repositoryid')" href="../_variables/repositoryid.html">$repositoryid</a>))) {
<a name="l602"><span class="linenum"> 602</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('repository_exception')" href="../_classes/repository_exception.html" onMouseOver="classPopup(event,'repository_exception')">repository_exception</a>('invalidrepositoryid', 'repository');
<a name="l603"><span class="linenum"> 603</span></a>              }
<a name="l604"><span class="linenum"> 604</span></a>              <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('i:'. <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>);
<a name="l605"><span class="linenum"> 605</span></a>          }
<a name="l606"><span class="linenum"> 606</span></a>  
<a name="l607"><span class="linenum"> 607</span></a>          <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> = <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('repositorytype')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/repositorytype.html">repositorytype</a>;
<a name="l608"><span class="linenum"> 608</span></a>          if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . &quot;/repository/<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>/lib.php&quot;)) {
<a name="l609"><span class="linenum"> 609</span></a>              require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . &quot;/repository/<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>/lib.php&quot;);
<a name="l610"><span class="linenum"> 610</span></a>              <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a> = 'repository_' . <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>;
<a name="l611"><span class="linenum"> 611</span></a>              <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['type'] = <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>;
<a name="l612"><span class="linenum"> 612</span></a>              <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['typeid'] = <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('typeid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/typeid.html">typeid</a>;
<a name="l613"><span class="linenum"> 613</span></a>              <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['visible'] = <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('visible')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>;
<a name="l614"><span class="linenum"> 614</span></a>              if (empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['name'])) {
<a name="l615"><span class="linenum"> 615</span></a>                  <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['name'] = <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('name')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/name.html">name</a>;
<a name="l616"><span class="linenum"> 616</span></a>              }
<a name="l617"><span class="linenum"> 617</span></a>              <a class="var it641" onMouseOver="hilite(641)" onMouseOut="lolite()" onClick="logVariable('repository')" href="../_variables/repository.html">$repository</a> = new <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a>(<a class="var it5419" onMouseOver="hilite(5419)" onMouseOut="lolite()" onClick="logVariable('repositoryid')" href="../_variables/repositoryid.html">$repositoryid</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>, <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('readonly')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/readonly.html">readonly</a>);
<a name="l618"><span class="linenum"> 618</span></a>              if (empty(<a class="var it641" onMouseOver="hilite(641)" onMouseOut="lolite()" onClick="logVariable('repository')" href="../_variables/repository.html">$repository</a>-&gt;<a onClick="logVariable('super_called')" class="var it43843" onMouseOver="hilite(43843)" onMouseOut="lolite()" href="../_variables/super_called.html">super_called</a>)) {
<a name="l619"><span class="linenum"> 619</span></a>  <span class="comment">                // to make sure the super construct is called</span>
<a name="l620"><span class="linenum"> 620</span></a>                  <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('parent::__construct must be called by '.<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>.' plugin.');
<a name="l621"><span class="linenum"> 621</span></a>              }
<a name="l622"><span class="linenum"> 622</span></a>              <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>(<a class="var it6665" onMouseOver="hilite(6665)" onMouseOut="lolite()" onClick="logVariable('cachekey')" href="../_variables/cachekey.html">$cachekey</a>, <a class="var it641" onMouseOver="hilite(641)" onMouseOut="lolite()" onClick="logVariable('repository')" href="../_variables/repository.html">$repository</a>);
<a name="l623"><span class="linenum"> 623</span></a>              return <a class="var it641" onMouseOver="hilite(641)" onMouseOut="lolite()" onClick="logVariable('repository')" href="../_variables/repository.html">$repository</a>;
<a name="l624"><span class="linenum"> 624</span></a>          } else {
<a name="l625"><span class="linenum"> 625</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('repository_exception')" href="../_classes/repository_exception.html" onMouseOver="classPopup(event,'repository_exception')">repository_exception</a>('invalidplugin', 'repository');
<a name="l626"><span class="linenum"> 626</span></a>          }
<a name="l627"><span class="linenum"> 627</span></a>      }
<a name="l628"><span class="linenum"> 628</span></a>  
<a name="l629"><span class="linenum"> 629</span></a>      <span class="comment">/**</span>
<a name="l630"><span class="linenum"> 630</span></a>  <span class="comment">     * Returns the type name of the repository.</span>
<a name="l631"><span class="linenum"> 631</span></a>  <span class="comment">     *</span>
<a name="l632"><span class="linenum"> 632</span></a>  <span class="comment">     * @return string type name of the repository.</span>
<a name="l633"><span class="linenum"> 633</span></a>  <span class="comment">     * @since  Moodle 2.5</span>
<a name="l634"><span class="linenum"> 634</span></a>  <span class="comment">     */</span>
<a name="l635"><span class="linenum"> 635</span></a>      public function <a class="function" onClick="logFunction('get_typename')" href="../_functions/get_typename.html" onMouseOver="funcPopup(event,'get_typename')">get_typename</a>() {
<a name="l636"><span class="linenum"> 636</span></a>          if (empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('typename')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/typename.html">typename</a>)) {
<a name="l637"><span class="linenum"> 637</span></a>              <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../_variables/matches.html">$matches</a> = array();
<a name="l638"><span class="linenum"> 638</span></a>              if (!<a class="phpfunction" onClick="logFunction('preg_match')" href="../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>(&quot;/^repository_(.*)$/&quot;, <a class="phpfunction" onClick="logFunction('get_class')" href="../_functions/get_class.html" onMouseOver="phpfuncPopup(event,'get_class')">get_class</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>), <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../_variables/matches.html">$matches</a>)) {
<a name="l639"><span class="linenum"> 639</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('The class name of a repository should be repository_&lt;typeofrepository&gt;, '.
<a name="l640"><span class="linenum"> 640</span></a>                          'e.g. repository_dropbox');
<a name="l641"><span class="linenum"> 641</span></a>              }
<a name="l642"><span class="linenum"> 642</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('typename')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/typename.html">typename</a> = <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../_variables/matches.html">$matches</a>[1];
<a name="l643"><span class="linenum"> 643</span></a>          }
<a name="l644"><span class="linenum"> 644</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('typename')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/typename.html">typename</a>;
<a name="l645"><span class="linenum"> 645</span></a>      }
<a name="l646"><span class="linenum"> 646</span></a>  
<a name="l647"><span class="linenum"> 647</span></a>      <span class="comment">/**</span>
<a name="l648"><span class="linenum"> 648</span></a>  <span class="comment">     * Get a repository type object by a given type name.</span>
<a name="l649"><span class="linenum"> 649</span></a>  <span class="comment">     *</span>
<a name="l650"><span class="linenum"> 650</span></a>  <span class="comment">     * @static</span>
<a name="l651"><span class="linenum"> 651</span></a>  <span class="comment">     * @param string $typename the repository type name</span>
<a name="l652"><span class="linenum"> 652</span></a>  <span class="comment">     * @return repository_type|bool</span>
<a name="l653"><span class="linenum"> 653</span></a>  <span class="comment">     */</span>
<a name="l654"><span class="linenum"> 654</span></a>      public static function <a class="function" onClick="logFunction('get_type_by_typename')" href="../_functions/get_type_by_typename.html" onMouseOver="funcPopup(event,'get_type_by_typename')">get_type_by_typename</a>(<a class="var it21376" onMouseOver="hilite(21376)" onMouseOut="lolite()" onClick="logVariable('typename')" href="../_variables/typename.html">$typename</a>) {
<a name="l655"><span class="linenum"> 655</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l656"><span class="linenum"> 656</span></a>          <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a> = <a class="class" onClick="logClass('cache')" href="../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'repositories');
<a name="l657"><span class="linenum"> 657</span></a>          if ((<a class="var it21385" onMouseOver="hilite(21385)" onMouseOut="lolite()" onClick="logVariable('repositorytype')" href="../_variables/repositorytype.html">$repositorytype</a> = <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('typename:'. <a class="var it21376" onMouseOver="hilite(21376)" onMouseOut="lolite()" onClick="logVariable('typename')" href="../_variables/typename.html">$typename</a>)) === false) {
<a name="l658"><span class="linenum"> 658</span></a>              <a class="var it21385" onMouseOver="hilite(21385)" onMouseOut="lolite()" onClick="logVariable('repositorytype')" href="../_variables/repositorytype.html">$repositorytype</a> = null;
<a name="l659"><span class="linenum"> 659</span></a>              if (<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('repository', array('type' =&gt; <a class="var it21376" onMouseOver="hilite(21376)" onMouseOut="lolite()" onClick="logVariable('typename')" href="../_variables/typename.html">$typename</a>))) {
<a name="l660"><span class="linenum"> 660</span></a>                  <a class="var it21385" onMouseOver="hilite(21385)" onMouseOut="lolite()" onClick="logVariable('repositorytype')" href="../_variables/repositorytype.html">$repositorytype</a> = <span class="keyword">new </span><a class="class" onClick="logClass('repository_type')" href="../_classes/repository_type.html" onMouseOver="classPopup(event,'repository_type')">repository_type</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('type')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/type.html">type</a>, (array)<a class="function" onClick="logFunction('get_config')" href="../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('type')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/type.html">type</a>), <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('visible')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>, <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('sortorder')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a>);
<a name="l661"><span class="linenum"> 661</span></a>                  <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('typeid:'. <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it21385" onMouseOver="hilite(21385)" onMouseOut="lolite()" onClick="logVariable('repositorytype')" href="../_variables/repositorytype.html">$repositorytype</a>);
<a name="l662"><span class="linenum"> 662</span></a>              }
<a name="l663"><span class="linenum"> 663</span></a>              <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('typename:'. <a class="var it21376" onMouseOver="hilite(21376)" onMouseOut="lolite()" onClick="logVariable('typename')" href="../_variables/typename.html">$typename</a>, <a class="var it21385" onMouseOver="hilite(21385)" onMouseOut="lolite()" onClick="logVariable('repositorytype')" href="../_variables/repositorytype.html">$repositorytype</a>);
<a name="l664"><span class="linenum"> 664</span></a>          }
<a name="l665"><span class="linenum"> 665</span></a>          return <a class="var it21385" onMouseOver="hilite(21385)" onMouseOut="lolite()" onClick="logVariable('repositorytype')" href="../_variables/repositorytype.html">$repositorytype</a>;
<a name="l666"><span class="linenum"> 666</span></a>      }
<a name="l667"><span class="linenum"> 667</span></a>  
<a name="l668"><span class="linenum"> 668</span></a>      <span class="comment">/**</span>
<a name="l669"><span class="linenum"> 669</span></a>  <span class="comment">     * Get the repository type by a given repository type id.</span>
<a name="l670"><span class="linenum"> 670</span></a>  <span class="comment">     *</span>
<a name="l671"><span class="linenum"> 671</span></a>  <span class="comment">     * @static</span>
<a name="l672"><span class="linenum"> 672</span></a>  <span class="comment">     * @param int $id the type id</span>
<a name="l673"><span class="linenum"> 673</span></a>  <span class="comment">     * @return object</span>
<a name="l674"><span class="linenum"> 674</span></a>  <span class="comment">     */</span>
<a name="l675"><span class="linenum"> 675</span></a>      public static function <a class="function" onClick="logFunction('get_type_by_id')" href="../_functions/get_type_by_id.html" onMouseOver="funcPopup(event,'get_type_by_id')">get_type_by_id</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>) {
<a name="l676"><span class="linenum"> 676</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l677"><span class="linenum"> 677</span></a>          <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a> = <a class="class" onClick="logClass('cache')" href="../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'repositories');
<a name="l678"><span class="linenum"> 678</span></a>          if ((<a class="var it21385" onMouseOver="hilite(21385)" onMouseOut="lolite()" onClick="logVariable('repositorytype')" href="../_variables/repositorytype.html">$repositorytype</a> = <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('typeid:'. <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>)) === false) {
<a name="l679"><span class="linenum"> 679</span></a>              <a class="var it21385" onMouseOver="hilite(21385)" onMouseOut="lolite()" onClick="logVariable('repositorytype')" href="../_variables/repositorytype.html">$repositorytype</a> = null;
<a name="l680"><span class="linenum"> 680</span></a>              if (<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('repository', array('id' =&gt; <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>))) {
<a name="l681"><span class="linenum"> 681</span></a>                  <a class="var it21385" onMouseOver="hilite(21385)" onMouseOut="lolite()" onClick="logVariable('repositorytype')" href="../_variables/repositorytype.html">$repositorytype</a> = <span class="keyword">new </span><a class="class" onClick="logClass('repository_type')" href="../_classes/repository_type.html" onMouseOver="classPopup(event,'repository_type')">repository_type</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('type')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/type.html">type</a>, (array)<a class="function" onClick="logFunction('get_config')" href="../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('type')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/type.html">type</a>), <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('visible')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>, <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('sortorder')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a>);
<a name="l682"><span class="linenum"> 682</span></a>                  <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('typename:'. <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('type')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/type.html">type</a>, <a class="var it21385" onMouseOver="hilite(21385)" onMouseOut="lolite()" onClick="logVariable('repositorytype')" href="../_variables/repositorytype.html">$repositorytype</a>);
<a name="l683"><span class="linenum"> 683</span></a>              }
<a name="l684"><span class="linenum"> 684</span></a>              <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('typeid:'. <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>, <a class="var it21385" onMouseOver="hilite(21385)" onMouseOut="lolite()" onClick="logVariable('repositorytype')" href="../_variables/repositorytype.html">$repositorytype</a>);
<a name="l685"><span class="linenum"> 685</span></a>          }
<a name="l686"><span class="linenum"> 686</span></a>          return <a class="var it21385" onMouseOver="hilite(21385)" onMouseOut="lolite()" onClick="logVariable('repositorytype')" href="../_variables/repositorytype.html">$repositorytype</a>;
<a name="l687"><span class="linenum"> 687</span></a>      }
<a name="l688"><span class="linenum"> 688</span></a>  
<a name="l689"><span class="linenum"> 689</span></a>      <span class="comment">/**</span>
<a name="l690"><span class="linenum"> 690</span></a>  <span class="comment">     * Return all repository types ordered by sortorder field</span>
<a name="l691"><span class="linenum"> 691</span></a>  <span class="comment">     * first repository type in returnedarray[0], second repository type in returnedarray[1], ...</span>
<a name="l692"><span class="linenum"> 692</span></a>  <span class="comment">     *</span>
<a name="l693"><span class="linenum"> 693</span></a>  <span class="comment">     * @static</span>
<a name="l694"><span class="linenum"> 694</span></a>  <span class="comment">     * @param bool $visible can return types by visiblity, return all types if null</span>
<a name="l695"><span class="linenum"> 695</span></a>  <span class="comment">     * @return array Repository types</span>
<a name="l696"><span class="linenum"> 696</span></a>  <span class="comment">     */</span>
<a name="l697"><span class="linenum"> 697</span></a>      public static function <a class="function" onClick="logFunction('get_types')" href="../_functions/get_types.html" onMouseOver="funcPopup(event,'get_types')">get_types</a>(<a class="var it1304" onMouseOver="hilite(1304)" onMouseOut="lolite()" onClick="logVariable('visible')" href="../_variables/visible.html">$visible</a>=null) {
<a name="l698"><span class="linenum"> 698</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l699"><span class="linenum"> 699</span></a>          <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a> = <a class="class" onClick="logClass('cache')" href="../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'repositories');
<a name="l700"><span class="linenum"> 700</span></a>          if (!<a class="var it1304" onMouseOver="hilite(1304)" onMouseOut="lolite()" onClick="logVariable('visible')" href="../_variables/visible.html">$visible</a>) {
<a name="l701"><span class="linenum"> 701</span></a>              <a class="var it21386" onMouseOver="hilite(21386)" onMouseOut="lolite()" onClick="logVariable('typesnames')" href="../_variables/typesnames.html">$typesnames</a> = <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('types');
<a name="l702"><span class="linenum"> 702</span></a>          } else {
<a name="l703"><span class="linenum"> 703</span></a>              <a class="var it21386" onMouseOver="hilite(21386)" onMouseOut="lolite()" onClick="logVariable('typesnames')" href="../_variables/typesnames.html">$typesnames</a> = <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('typesvis');
<a name="l704"><span class="linenum"> 704</span></a>          }
<a name="l705"><span class="linenum"> 705</span></a>          <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../_variables/types.html">$types</a> = array();
<a name="l706"><span class="linenum"> 706</span></a>          if (<a class="var it21386" onMouseOver="hilite(21386)" onMouseOut="lolite()" onClick="logVariable('typesnames')" href="../_variables/typesnames.html">$typesnames</a> === false) {
<a name="l707"><span class="linenum"> 707</span></a>              <a class="var it21386" onMouseOver="hilite(21386)" onMouseOut="lolite()" onClick="logVariable('typesnames')" href="../_variables/typesnames.html">$typesnames</a> = array();
<a name="l708"><span class="linenum"> 708</span></a>              <a class="var it21387" onMouseOver="hilite(21387)" onMouseOut="lolite()" onClick="logVariable('vistypesnames')" href="../_variables/vistypesnames.html">$vistypesnames</a> = array();
<a name="l709"><span class="linenum"> 709</span></a>              if (<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('repository', null ,'sortorder')) {
<a name="l710"><span class="linenum"> 710</span></a>                  foreach(<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a> as <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>) {
<a name="l711"><span class="linenum"> 711</span></a>                      if ((<a class="var it21385" onMouseOver="hilite(21385)" onMouseOut="lolite()" onClick="logVariable('repositorytype')" href="../_variables/repositorytype.html">$repositorytype</a> = <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('typename:'. <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>-&gt;<a onClick="logVariable('type')" class="var it44031" onMouseOver="hilite(44031)" onMouseOut="lolite()" href="../_variables/type.html">type</a>)) === false) {
<a name="l712"><span class="linenum"> 712</span></a>  <span class="comment">                        // Create new instance of repository_type.</span>
<a name="l713"><span class="linenum"> 713</span></a>                          if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '/repository/'. <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>-&gt;<a onClick="logVariable('type')" class="var it44031" onMouseOver="hilite(44031)" onMouseOut="lolite()" href="../_variables/type.html">type</a> .'/lib.php')) {
<a name="l714"><span class="linenum"> 714</span></a>                              <a class="var it21385" onMouseOver="hilite(21385)" onMouseOut="lolite()" onClick="logVariable('repositorytype')" href="../_variables/repositorytype.html">$repositorytype</a> = <span class="keyword">new </span><a class="class" onClick="logClass('repository_type')" href="../_classes/repository_type.html" onMouseOver="classPopup(event,'repository_type')">repository_type</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>-&gt;<a onClick="logVariable('type')" class="var it44031" onMouseOver="hilite(44031)" onMouseOut="lolite()" href="../_variables/type.html">type</a>, (array)<a class="function" onClick="logFunction('get_config')" href="../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>-&gt;<a onClick="logVariable('type')" class="var it44031" onMouseOver="hilite(44031)" onMouseOut="lolite()" href="../_variables/type.html">type</a>), <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>-&gt;<a onClick="logVariable('visible')" class="var it44031" onMouseOver="hilite(44031)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>, <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>-&gt;<a onClick="logVariable('sortorder')" class="var it44031" onMouseOver="hilite(44031)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a>);
<a name="l715"><span class="linenum"> 715</span></a>                              <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('typeid:'. <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>-&gt;<a onClick="logVariable('id')" class="var it44031" onMouseOver="hilite(44031)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it21385" onMouseOver="hilite(21385)" onMouseOut="lolite()" onClick="logVariable('repositorytype')" href="../_variables/repositorytype.html">$repositorytype</a>);
<a name="l716"><span class="linenum"> 716</span></a>                              <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('typename:'. <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>-&gt;<a onClick="logVariable('type')" class="var it44031" onMouseOver="hilite(44031)" onMouseOut="lolite()" href="../_variables/type.html">type</a>, <a class="var it21385" onMouseOver="hilite(21385)" onMouseOut="lolite()" onClick="logVariable('repositorytype')" href="../_variables/repositorytype.html">$repositorytype</a>);
<a name="l717"><span class="linenum"> 717</span></a>                          }
<a name="l718"><span class="linenum"> 718</span></a>                      }
<a name="l719"><span class="linenum"> 719</span></a>                      if (<a class="var it21385" onMouseOver="hilite(21385)" onMouseOut="lolite()" onClick="logVariable('repositorytype')" href="../_variables/repositorytype.html">$repositorytype</a>) {
<a name="l720"><span class="linenum"> 720</span></a>                          if (empty(<a class="var it1304" onMouseOver="hilite(1304)" onMouseOut="lolite()" onClick="logVariable('visible')" href="../_variables/visible.html">$visible</a>) || <a class="var it21385" onMouseOver="hilite(21385)" onMouseOut="lolite()" onClick="logVariable('repositorytype')" href="../_variables/repositorytype.html">$repositorytype</a>-&gt;<a class="function" onClick="logFunction('get_visible')" href="../_functions/get_visible.html" onMouseOver="funcPopup(event,'get_visible')">get_visible</a>()) {
<a name="l721"><span class="linenum"> 721</span></a>                              <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../_variables/types.html">$types</a>[] = <a class="var it21385" onMouseOver="hilite(21385)" onMouseOut="lolite()" onClick="logVariable('repositorytype')" href="../_variables/repositorytype.html">$repositorytype</a>;
<a name="l722"><span class="linenum"> 722</span></a>                              <a class="var it21387" onMouseOver="hilite(21387)" onMouseOut="lolite()" onClick="logVariable('vistypesnames')" href="../_variables/vistypesnames.html">$vistypesnames</a>[] = <a class="var it21385" onMouseOver="hilite(21385)" onMouseOut="lolite()" onClick="logVariable('repositorytype')" href="../_variables/repositorytype.html">$repositorytype</a>-&gt;<a class="function" onClick="logFunction('get_typename')" href="../_functions/get_typename.html" onMouseOver="funcPopup(event,'get_typename')">get_typename</a>();
<a name="l723"><span class="linenum"> 723</span></a>                          }
<a name="l724"><span class="linenum"> 724</span></a>                          <a class="var it21386" onMouseOver="hilite(21386)" onMouseOut="lolite()" onClick="logVariable('typesnames')" href="../_variables/typesnames.html">$typesnames</a>[] = <a class="var it21385" onMouseOver="hilite(21385)" onMouseOut="lolite()" onClick="logVariable('repositorytype')" href="../_variables/repositorytype.html">$repositorytype</a>-&gt;<a class="function" onClick="logFunction('get_typename')" href="../_functions/get_typename.html" onMouseOver="funcPopup(event,'get_typename')">get_typename</a>();
<a name="l725"><span class="linenum"> 725</span></a>                      }
<a name="l726"><span class="linenum"> 726</span></a>                  }
<a name="l727"><span class="linenum"> 727</span></a>              }
<a name="l728"><span class="linenum"> 728</span></a>              <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('types', <a class="var it21386" onMouseOver="hilite(21386)" onMouseOut="lolite()" onClick="logVariable('typesnames')" href="../_variables/typesnames.html">$typesnames</a>);
<a name="l729"><span class="linenum"> 729</span></a>              <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('typesvis', <a class="var it21387" onMouseOver="hilite(21387)" onMouseOut="lolite()" onClick="logVariable('vistypesnames')" href="../_variables/vistypesnames.html">$vistypesnames</a>);
<a name="l730"><span class="linenum"> 730</span></a>          } else {
<a name="l731"><span class="linenum"> 731</span></a>              foreach (<a class="var it21386" onMouseOver="hilite(21386)" onMouseOut="lolite()" onClick="logVariable('typesnames')" href="../_variables/typesnames.html">$typesnames</a> as <a class="var it21376" onMouseOver="hilite(21376)" onMouseOut="lolite()" onClick="logVariable('typename')" href="../_variables/typename.html">$typename</a>) {
<a name="l732"><span class="linenum"> 732</span></a>                  <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../_variables/types.html">$types</a>[] = self::<a class="function" onClick="logFunction('get_type_by_typename')" href="../_functions/get_type_by_typename.html" onMouseOver="funcPopup(event,'get_type_by_typename')">get_type_by_typename</a>(<a class="var it21376" onMouseOver="hilite(21376)" onMouseOut="lolite()" onClick="logVariable('typename')" href="../_variables/typename.html">$typename</a>);
<a name="l733"><span class="linenum"> 733</span></a>              }
<a name="l734"><span class="linenum"> 734</span></a>          }
<a name="l735"><span class="linenum"> 735</span></a>          return <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../_variables/types.html">$types</a>;
<a name="l736"><span class="linenum"> 736</span></a>      }
<a name="l737"><span class="linenum"> 737</span></a>  
<a name="l738"><span class="linenum"> 738</span></a>      <span class="comment">/**</span>
<a name="l739"><span class="linenum"> 739</span></a>  <span class="comment">     * Checks if user has a capability to view the current repository.</span>
<a name="l740"><span class="linenum"> 740</span></a>  <span class="comment">     *</span>
<a name="l741"><span class="linenum"> 741</span></a>  <span class="comment">     * @return bool true when the user can, otherwise throws an exception.</span>
<a name="l742"><span class="linenum"> 742</span></a>  <span class="comment">     * @throws repository_exception when the user does not meet the requirements.</span>
<a name="l743"><span class="linenum"> 743</span></a>  <span class="comment">     */</span>
<a name="l744"><span class="linenum"> 744</span></a>      public final function <a class="function" onClick="logFunction('check_capability')" href="../_functions/check_capability.html" onMouseOver="funcPopup(event,'check_capability')">check_capability</a>() {
<a name="l745"><span class="linenum"> 745</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>;
<a name="l746"><span class="linenum"> 746</span></a>  
<a name="l747"><span class="linenum"> 747</span></a>  <span class="comment">        // The context we are on.</span>
<a name="l748"><span class="linenum"> 748</span></a>          <a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/context.html">context</a>;
<a name="l749"><span class="linenum"> 749</span></a>  
<a name="l750"><span class="linenum"> 750</span></a>  <span class="comment">        // Ensure that the user can view the repository in the current context.</span>
<a name="l751"><span class="linenum"> 751</span></a>          <a class="var it21388" onMouseOver="hilite(21388)" onMouseOut="lolite()" onClick="logVariable('can')" href="../_variables/can.html">$can</a> = <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('repository/'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_typename')" href="../_functions/get_typename.html" onMouseOver="funcPopup(event,'get_typename')">get_typename</a>().':view', <a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a>);
<a name="l752"><span class="linenum"> 752</span></a>  
<a name="l753"><span class="linenum"> 753</span></a>  <span class="comment">        // Context in which the repository has been created.</span>
<a name="l754"><span class="linenum"> 754</span></a>          <a class="var it21389" onMouseOver="hilite(21389)" onMouseOut="lolite()" onClick="logVariable('repocontext')" href="../_variables/repocontext.html">$repocontext</a> = context::<a class="function" onClick="logFunction('instance_by_id')" href="../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instance')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;contextid);
<a name="l755"><span class="linenum"> 755</span></a>  
<a name="l756"><span class="linenum"> 756</span></a>  <span class="comment">        // Prevent access to private repositories when logged in as.</span>
<a name="l757"><span class="linenum"> 757</span></a>          if (<a class="var it21388" onMouseOver="hilite(21388)" onMouseOut="lolite()" onClick="logVariable('can')" href="../_variables/can.html">$can</a> &amp;&amp; \core\session\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('is_loggedinas')" href="../_functions/is_loggedinas.html" onMouseOver="funcPopup(event,'is_loggedinas')">is_loggedinas</a>()) {
<a name="l758"><span class="linenum"> 758</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('contains_private_data')" href="../_functions/contains_private_data.html" onMouseOver="funcPopup(event,'contains_private_data')">contains_private_data</a>() || <a class="var it21389" onMouseOver="hilite(21389)" onMouseOut="lolite()" onClick="logVariable('repocontext')" href="../_variables/repocontext.html">$repocontext</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it43255" onMouseOver="hilite(43255)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a> == <a class="constant" onClick="logConstant('CONTEXT_USER')" href="../_constants/CONTEXT_USER.html" onMouseOver="constPopup(event,'CONTEXT_USER')">CONTEXT_USER</a>) {
<a name="l759"><span class="linenum"> 759</span></a>                  <a class="var it21388" onMouseOver="hilite(21388)" onMouseOut="lolite()" onClick="logVariable('can')" href="../_variables/can.html">$can</a> = false;
<a name="l760"><span class="linenum"> 760</span></a>              }
<a name="l761"><span class="linenum"> 761</span></a>          }
<a name="l762"><span class="linenum"> 762</span></a>  
<a name="l763"><span class="linenum"> 763</span></a>  <span class="comment">        // We are going to ensure that the current context was legit, and reliable to check</span>
<a name="l764"><span class="linenum"> 764</span></a>  <span class="comment">        // the capability against. (No need to do that if we already cannot).</span>
<a name="l765"><span class="linenum"> 765</span></a>          if (<a class="var it21388" onMouseOver="hilite(21388)" onMouseOut="lolite()" onClick="logVariable('can')" href="../_variables/can.html">$can</a>) {
<a name="l766"><span class="linenum"> 766</span></a>              if (<a class="var it21389" onMouseOver="hilite(21389)" onMouseOut="lolite()" onClick="logVariable('repocontext')" href="../_variables/repocontext.html">$repocontext</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it43255" onMouseOver="hilite(43255)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a> == <a class="constant" onClick="logConstant('CONTEXT_USER')" href="../_constants/CONTEXT_USER.html" onMouseOver="constPopup(event,'CONTEXT_USER')">CONTEXT_USER</a>) {
<a name="l767"><span class="linenum"> 767</span></a>  <span class="comment">                // The repository is a user instance, ensure we're the right user to access it!</span>
<a name="l768"><span class="linenum"> 768</span></a>                  if (<a class="var it21389" onMouseOver="hilite(21389)" onMouseOut="lolite()" onClick="logVariable('repocontext')" href="../_variables/repocontext.html">$repocontext</a>-&gt;<a onClick="logVariable('instanceid')" class="var it43255" onMouseOver="hilite(43255)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a> != <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l769"><span class="linenum"> 769</span></a>                      <a class="var it21388" onMouseOver="hilite(21388)" onMouseOut="lolite()" onClick="logVariable('can')" href="../_variables/can.html">$can</a> = false;
<a name="l770"><span class="linenum"> 770</span></a>                  }
<a name="l771"><span class="linenum"> 771</span></a>              } else if (<a class="var it21389" onMouseOver="hilite(21389)" onMouseOut="lolite()" onClick="logVariable('repocontext')" href="../_variables/repocontext.html">$repocontext</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it43255" onMouseOver="hilite(43255)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a> == <a class="constant" onClick="logConstant('CONTEXT_COURSE')" href="../_constants/CONTEXT_COURSE.html" onMouseOver="constPopup(event,'CONTEXT_COURSE')">CONTEXT_COURSE</a>) {
<a name="l772"><span class="linenum"> 772</span></a>  <span class="comment">                // The repository is a course one. Let's check that we are on the right course.</span>
<a name="l773"><span class="linenum"> 773</span></a>                  if (<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it44219" onMouseOver="hilite(44219)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a>, array(<a class="constant" onClick="logConstant('CONTEXT_COURSE')" href="../_constants/CONTEXT_COURSE.html" onMouseOver="constPopup(event,'CONTEXT_COURSE')">CONTEXT_COURSE</a>, <a class="constant" onClick="logConstant('CONTEXT_MODULE')" href="../_constants/CONTEXT_MODULE.html" onMouseOver="constPopup(event,'CONTEXT_MODULE')">CONTEXT_MODULE</a>, <a class="constant" onClick="logConstant('CONTEXT_BLOCK')" href="../_constants/CONTEXT_BLOCK.html" onMouseOver="constPopup(event,'CONTEXT_BLOCK')">CONTEXT_BLOCK</a>))) {
<a name="l774"><span class="linenum"> 774</span></a>                      <a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a> = <a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a>-&gt;<a class="function" onClick="logFunction('get_course_context')" href="../_functions/get_course_context.html" onMouseOver="funcPopup(event,'get_course_context')">get_course_context</a>();
<a name="l775"><span class="linenum"> 775</span></a>                      if (<a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>-&gt;<a onClick="logVariable('instanceid')" class="var it43118" onMouseOver="hilite(43118)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a> != <a class="var it21389" onMouseOver="hilite(21389)" onMouseOut="lolite()" onClick="logVariable('repocontext')" href="../_variables/repocontext.html">$repocontext</a>-&gt;<a onClick="logVariable('instanceid')" class="var it43255" onMouseOver="hilite(43255)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a>) {
<a name="l776"><span class="linenum"> 776</span></a>                          <a class="var it21388" onMouseOver="hilite(21388)" onMouseOut="lolite()" onClick="logVariable('can')" href="../_variables/can.html">$can</a> = false;
<a name="l777"><span class="linenum"> 777</span></a>                      }
<a name="l778"><span class="linenum"> 778</span></a>                  } else {
<a name="l779"><span class="linenum"> 779</span></a>  <span class="comment">                    // We are on a parent context, therefore it's legit to check the permissions</span>
<a name="l780"><span class="linenum"> 780</span></a>  <span class="comment">                    // in the current context.</span>
<a name="l781"><span class="linenum"> 781</span></a>                  }
<a name="l782"><span class="linenum"> 782</span></a>              } else {
<a name="l783"><span class="linenum"> 783</span></a>  <span class="comment">                // Nothing to check here, system instances can have different permissions on different</span>
<a name="l784"><span class="linenum"> 784</span></a>  <span class="comment">                // levels. We do not want to prevent URL hack here, because it does not make sense to</span>
<a name="l785"><span class="linenum"> 785</span></a>  <span class="comment">                // prevent a user to access a repository in a context if it's accessible in another one.</span>
<a name="l786"><span class="linenum"> 786</span></a>              }
<a name="l787"><span class="linenum"> 787</span></a>          }
<a name="l788"><span class="linenum"> 788</span></a>  
<a name="l789"><span class="linenum"> 789</span></a>          if (<a class="var it21388" onMouseOver="hilite(21388)" onMouseOut="lolite()" onClick="logVariable('can')" href="../_variables/can.html">$can</a>) {
<a name="l790"><span class="linenum"> 790</span></a>              return true;
<a name="l791"><span class="linenum"> 791</span></a>          }
<a name="l792"><span class="linenum"> 792</span></a>  
<a name="l793"><span class="linenum"> 793</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('repository_exception')" href="../_classes/repository_exception.html" onMouseOver="classPopup(event,'repository_exception')">repository_exception</a>('nopermissiontoaccess', 'repository');
<a name="l794"><span class="linenum"> 794</span></a>      }
<a name="l795"><span class="linenum"> 795</span></a>  
<a name="l796"><span class="linenum"> 796</span></a>      <span class="comment">/**</span>
<a name="l797"><span class="linenum"> 797</span></a>  <span class="comment">     * Check if file already exists in draft area.</span>
<a name="l798"><span class="linenum"> 798</span></a>  <span class="comment">     *</span>
<a name="l799"><span class="linenum"> 799</span></a>  <span class="comment">     * @static</span>
<a name="l800"><span class="linenum"> 800</span></a>  <span class="comment">     * @param int $itemid of the draft area.</span>
<a name="l801"><span class="linenum"> 801</span></a>  <span class="comment">     * @param string $filepath path to the file.</span>
<a name="l802"><span class="linenum"> 802</span></a>  <span class="comment">     * @param string $filename file name.</span>
<a name="l803"><span class="linenum"> 803</span></a>  <span class="comment">     * @return bool</span>
<a name="l804"><span class="linenum"> 804</span></a>  <span class="comment">     */</span>
<a name="l805"><span class="linenum"> 805</span></a>      public static function <a class="function" onClick="logFunction('draftfile_exists')" href="../_functions/draftfile_exists.html" onMouseOver="funcPopup(event,'draftfile_exists')">draftfile_exists</a>(<a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a>, <a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../_variables/filepath.html">$filepath</a>, <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>) {
<a name="l806"><span class="linenum"> 806</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>;
<a name="l807"><span class="linenum"> 807</span></a>          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l808"><span class="linenum"> 808</span></a>          <a class="var it639" onMouseOver="hilite(639)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a> = <a class="class" onClick="logClass('context_user')" href="../_classes/context_user.html" onMouseOver="classPopup(event,'context_user')">context_user</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l809"><span class="linenum"> 809</span></a>          return <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it639" onMouseOver="hilite(639)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a>-&gt;<a onClick="logVariable('id')" class="var it43024" onMouseOver="hilite(43024)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'user', 'draft', <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a>, <a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../_variables/filepath.html">$filepath</a>, <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>);
<a name="l810"><span class="linenum"> 810</span></a>      }
<a name="l811"><span class="linenum"> 811</span></a>  
<a name="l812"><span class="linenum"> 812</span></a>      <span class="comment">/**</span>
<a name="l813"><span class="linenum"> 813</span></a>  <span class="comment">     * Parses the moodle file reference and returns an instance of stored_file</span>
<a name="l814"><span class="linenum"> 814</span></a>  <span class="comment">     *</span>
<a name="l815"><span class="linenum"> 815</span></a>  <span class="comment">     * @param string $reference reference to the moodle internal file as retruned by</span>
<a name="l816"><span class="linenum"> 816</span></a>  <span class="comment">     *        {@link repository::get_file_reference()} or {@link file_storage::pack_reference()}</span>
<a name="l817"><span class="linenum"> 817</span></a>  <span class="comment">     * @return stored_file|null</span>
<a name="l818"><span class="linenum"> 818</span></a>  <span class="comment">     */</span>
<a name="l819"><span class="linenum"> 819</span></a>      public static function <a class="function" onClick="logFunction('get_moodle_file')" href="../_functions/get_moodle_file.html" onMouseOver="funcPopup(event,'get_moodle_file')">get_moodle_file</a>(<a class="var it642" onMouseOver="hilite(642)" onMouseOut="lolite()" onClick="logVariable('reference')" href="../_variables/reference.html">$reference</a>) {
<a name="l820"><span class="linenum"> 820</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = <a class="class" onClick="logClass('file_storage')" href="../_classes/file_storage.html" onMouseOver="classPopup(event,'file_storage')">file_storage</a>::<a class="function" onClick="logFunction('unpack_reference')" href="../_functions/unpack_reference.html" onMouseOver="funcPopup(event,'unpack_reference')">unpack_reference</a>(<a class="var it642" onMouseOver="hilite(642)" onMouseOut="lolite()" onClick="logVariable('reference')" href="../_variables/reference.html">$reference</a>, true);
<a name="l821"><span class="linenum"> 821</span></a>          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l822"><span class="linenum"> 822</span></a>          return <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_file')" href="../_functions/get_file.html" onMouseOver="funcPopup(event,'get_file')">get_file</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['contextid'], <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['component'], <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['filearea'],
<a name="l823"><span class="linenum"> 823</span></a>                      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['itemid'], <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['filepath'], <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['filename']);
<a name="l824"><span class="linenum"> 824</span></a>      }
<a name="l825"><span class="linenum"> 825</span></a>  
<a name="l826"><span class="linenum"> 826</span></a>      <span class="comment">/**</span>
<a name="l827"><span class="linenum"> 827</span></a>  <span class="comment">     * Repository method to make sure that user can access particular file.</span>
<a name="l828"><span class="linenum"> 828</span></a>  <span class="comment">     *</span>
<a name="l829"><span class="linenum"> 829</span></a>  <span class="comment">     * This is checked when user tries to pick the file from repository to deal with</span>
<a name="l830"><span class="linenum"> 830</span></a>  <span class="comment">     * potential parameter substitutions is request</span>
<a name="l831"><span class="linenum"> 831</span></a>  <span class="comment">     *</span>
<a name="l832"><span class="linenum"> 832</span></a>  <span class="comment">     * @param string $source source of the file, returned by repository as 'source' and received back from user (not cleaned)</span>
<a name="l833"><span class="linenum"> 833</span></a>  <span class="comment">     * @return bool whether the file is accessible by current user</span>
<a name="l834"><span class="linenum"> 834</span></a>  <span class="comment">     */</span>
<a name="l835"><span class="linenum"> 835</span></a>      public function <a class="function" onClick="logFunction('file_is_accessible')" href="../_functions/file_is_accessible.html" onMouseOver="funcPopup(event,'file_is_accessible')">file_is_accessible</a>(<a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a>) {
<a name="l836"><span class="linenum"> 836</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('has_moodle_files')" href="../_functions/has_moodle_files.html" onMouseOver="funcPopup(event,'has_moodle_files')">has_moodle_files</a>()) {
<a name="l837"><span class="linenum"> 837</span></a>              <a class="var it642" onMouseOver="hilite(642)" onMouseOut="lolite()" onClick="logVariable('reference')" href="../_variables/reference.html">$reference</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_file_reference')" href="../_functions/get_file_reference.html" onMouseOver="funcPopup(event,'get_file_reference')">get_file_reference</a>(<a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a>);
<a name="l838"><span class="linenum"> 838</span></a>              try {
<a name="l839"><span class="linenum"> 839</span></a>                  <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = <a class="class" onClick="logClass('file_storage')" href="../_classes/file_storage.html" onMouseOver="classPopup(event,'file_storage')">file_storage</a>::<a class="function" onClick="logFunction('unpack_reference')" href="../_functions/unpack_reference.html" onMouseOver="funcPopup(event,'unpack_reference')">unpack_reference</a>(<a class="var it642" onMouseOver="hilite(642)" onMouseOut="lolite()" onClick="logVariable('reference')" href="../_variables/reference.html">$reference</a>, true);
<a name="l840"><span class="linenum"> 840</span></a>              } catch (file_reference_exception <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../_variables/e.html">$e</a>) {
<a name="l841"><span class="linenum"> 841</span></a>                  return false;
<a name="l842"><span class="linenum"> 842</span></a>              }
<a name="l843"><span class="linenum"> 843</span></a>              <a class="var it1462" onMouseOver="hilite(1462)" onMouseOut="lolite()" onClick="logVariable('browser')" href="../_variables/browser.html">$browser</a> = <a class="function" onClick="logFunction('get_file_browser')" href="../_functions/get_file_browser.html" onMouseOver="funcPopup(event,'get_file_browser')">get_file_browser</a>();
<a name="l844"><span class="linenum"> 844</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = context::<a class="function" onClick="logFunction('instance_by_id')" href="../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['contextid']);
<a name="l845"><span class="linenum"> 845</span></a>              <a class="var it18768" onMouseOver="hilite(18768)" onMouseOut="lolite()" onClick="logVariable('file_info')" href="../_variables/file_info.html">$file_info</a> = <a class="var it1462" onMouseOver="hilite(1462)" onMouseOut="lolite()" onClick="logVariable('browser')" href="../_variables/browser.html">$browser</a>-&gt;<a class="function" onClick="logFunction('get_file_info')" href="../_functions/get_file_info.html" onMouseOver="funcPopup(event,'get_file_info')">get_file_info</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['component'], <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['filearea'],
<a name="l846"><span class="linenum"> 846</span></a>                      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['itemid'], <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['filepath'], <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['filename']);
<a name="l847"><span class="linenum"> 847</span></a>              return !empty(<a class="var it18768" onMouseOver="hilite(18768)" onMouseOut="lolite()" onClick="logVariable('file_info')" href="../_variables/file_info.html">$file_info</a>);
<a name="l848"><span class="linenum"> 848</span></a>          }
<a name="l849"><span class="linenum"> 849</span></a>          return true;
<a name="l850"><span class="linenum"> 850</span></a>      }
<a name="l851"><span class="linenum"> 851</span></a>  
<a name="l852"><span class="linenum"> 852</span></a>      <span class="comment">/**</span>
<a name="l853"><span class="linenum"> 853</span></a>  <span class="comment">     * This function is used to copy a moodle file to draft area.</span>
<a name="l854"><span class="linenum"> 854</span></a>  <span class="comment">     *</span>
<a name="l855"><span class="linenum"> 855</span></a>  <span class="comment">     * It DOES NOT check if the user is allowed to access this file because the actual file</span>
<a name="l856"><span class="linenum"> 856</span></a>  <span class="comment">     * can be located in the area where user does not have access to but there is an alias</span>
<a name="l857"><span class="linenum"> 857</span></a>  <span class="comment">     * to this file in the area where user CAN access it.</span>
<a name="l858"><span class="linenum"> 858</span></a>  <span class="comment">     * {@link file_is_accessible} should be called for alias location before calling this function.</span>
<a name="l859"><span class="linenum"> 859</span></a>  <span class="comment">     *</span>
<a name="l860"><span class="linenum"> 860</span></a>  <span class="comment">     * @param string $source The metainfo of file, it is base64 encoded php serialized data</span>
<a name="l861"><span class="linenum"> 861</span></a>  <span class="comment">     * @param stdClass|array $filerecord contains itemid, filepath, filename and optionally other</span>
<a name="l862"><span class="linenum"> 862</span></a>  <span class="comment">     *      attributes of the new file</span>
<a name="l863"><span class="linenum"> 863</span></a>  <span class="comment">     * @param int $maxbytes maximum allowed size of file, -1 if unlimited. If size of file exceeds</span>
<a name="l864"><span class="linenum"> 864</span></a>  <span class="comment">     *      the limit, the file_exception is thrown.</span>
<a name="l865"><span class="linenum"> 865</span></a>  <span class="comment">     * @param int $areamaxbytes the maximum size of the area. A file_exception is thrown if the</span>
<a name="l866"><span class="linenum"> 866</span></a>  <span class="comment">     *      new file will reach the limit.</span>
<a name="l867"><span class="linenum"> 867</span></a>  <span class="comment">     * @return array The information about the created file</span>
<a name="l868"><span class="linenum"> 868</span></a>  <span class="comment">     */</span>
<a name="l869"><span class="linenum"> 869</span></a>      public function <a class="function" onClick="logFunction('copy_to_area')" href="../_functions/copy_to_area.html" onMouseOver="funcPopup(event,'copy_to_area')">copy_to_area</a>(<a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a>, <a class="var it833" onMouseOver="hilite(833)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../_variables/filerecord.html">$filerecord</a>, <a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('maxbytes')" href="../_variables/maxbytes.html">$maxbytes</a> = -1, <a class="var it5974" onMouseOver="hilite(5974)" onMouseOut="lolite()" onClick="logVariable('areamaxbytes')" href="../_variables/areamaxbytes.html">$areamaxbytes</a> = <a class="constant" onClick="logConstant('FILE_AREA_MAX_BYTES_UNLIMITED')" href="../_constants/FILE_AREA_MAX_BYTES_UNLIMITED.html" onMouseOver="constPopup(event,'FILE_AREA_MAX_BYTES_UNLIMITED')">FILE_AREA_MAX_BYTES_UNLIMITED</a>) {
<a name="l870"><span class="linenum"> 870</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>;
<a name="l871"><span class="linenum"> 871</span></a>          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l872"><span class="linenum"> 872</span></a>  
<a name="l873"><span class="linenum"> 873</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('has_moodle_files')" href="../_functions/has_moodle_files.html" onMouseOver="funcPopup(event,'has_moodle_files')">has_moodle_files</a>() == false) {
<a name="l874"><span class="linenum"> 874</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Only repository used to browse moodle files can use <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('copy_to_area')" href="../_functions/copy_to_area.html" onMouseOver="funcPopup(event,'copy_to_area')">copy_to_area</a>()');
<a name="l875"><span class="linenum"> 875</span></a>          }
<a name="l876"><span class="linenum"> 876</span></a>  
<a name="l877"><span class="linenum"> 877</span></a>          <a class="var it2103" onMouseOver="hilite(2103)" onMouseOut="lolite()" onClick="logVariable('user_context')" href="../_variables/user_context.html">$user_context</a> = <a class="class" onClick="logClass('context_user')" href="../_classes/context_user.html" onMouseOver="classPopup(event,'context_user')">context_user</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l878"><span class="linenum"> 878</span></a>  
<a name="l879"><span class="linenum"> 879</span></a>          <a class="var it833" onMouseOver="hilite(833)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../_variables/filerecord.html">$filerecord</a> = (array)<a class="var it833" onMouseOver="hilite(833)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../_variables/filerecord.html">$filerecord</a>;
<a name="l880"><span class="linenum"> 880</span></a>  <span class="comment">        // make sure the new file will be created in user draft area</span>
<a name="l881"><span class="linenum"> 881</span></a>          <a class="var it833" onMouseOver="hilite(833)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../_variables/filerecord.html">$filerecord</a>['component'] = 'user';
<a name="l882"><span class="linenum"> 882</span></a>          <a class="var it833" onMouseOver="hilite(833)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../_variables/filerecord.html">$filerecord</a>['filearea'] = 'draft';
<a name="l883"><span class="linenum"> 883</span></a>          <a class="var it833" onMouseOver="hilite(833)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../_variables/filerecord.html">$filerecord</a>['contextid'] = <a class="var it2103" onMouseOver="hilite(2103)" onMouseOut="lolite()" onClick="logVariable('user_context')" href="../_variables/user_context.html">$user_context</a>-&gt;<a onClick="logVariable('id')" class="var it44209" onMouseOver="hilite(44209)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l884"><span class="linenum"> 884</span></a>          <a class="var it637" onMouseOver="hilite(637)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../_variables/draftitemid.html">$draftitemid</a> = <a class="var it833" onMouseOver="hilite(833)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../_variables/filerecord.html">$filerecord</a>['itemid'];
<a name="l885"><span class="linenum"> 885</span></a>          <a class="var it21390" onMouseOver="hilite(21390)" onMouseOut="lolite()" onClick="logVariable('new_filepath')" href="../_variables/new_filepath.html">$new_filepath</a> = <a class="var it833" onMouseOver="hilite(833)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../_variables/filerecord.html">$filerecord</a>['filepath'];
<a name="l886"><span class="linenum"> 886</span></a>          <a class="var it21391" onMouseOver="hilite(21391)" onMouseOut="lolite()" onClick="logVariable('new_filename')" href="../_variables/new_filename.html">$new_filename</a> = <a class="var it833" onMouseOver="hilite(833)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../_variables/filerecord.html">$filerecord</a>['filename'];
<a name="l887"><span class="linenum"> 887</span></a>  
<a name="l888"><span class="linenum"> 888</span></a>  <span class="comment">        // the file needs to copied to draft area</span>
<a name="l889"><span class="linenum"> 889</span></a>          <a class="var it2107" onMouseOver="hilite(2107)" onMouseOut="lolite()" onClick="logVariable('stored_file')" href="../_variables/stored_file.html">$stored_file</a> = self::<a class="function" onClick="logFunction('get_moodle_file')" href="../_functions/get_moodle_file.html" onMouseOver="funcPopup(event,'get_moodle_file')">get_moodle_file</a>(<a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a>);
<a name="l890"><span class="linenum"> 890</span></a>          if (<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('maxbytes')" href="../_variables/maxbytes.html">$maxbytes</a> != -1 &amp;&amp; <a class="var it2107" onMouseOver="hilite(2107)" onMouseOut="lolite()" onClick="logVariable('stored_file')" href="../_variables/stored_file.html">$stored_file</a>-&gt;<a class="function" onClick="logFunction('get_filesize')" href="../_functions/get_filesize.html" onMouseOver="funcPopup(event,'get_filesize')">get_filesize</a>() &gt; <a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('maxbytes')" href="../_variables/maxbytes.html">$maxbytes</a>) {
<a name="l891"><span class="linenum"> 891</span></a>              <a class="var it16206" onMouseOver="hilite(16206)" onMouseOut="lolite()" onClick="logVariable('maxbytesdisplay')" href="../_variables/maxbytesdisplay.html">$maxbytesdisplay</a> = <a class="function" onClick="logFunction('display_size')" href="../_functions/display_size.html" onMouseOver="funcPopup(event,'display_size')">display_size</a>(<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('maxbytes')" href="../_variables/maxbytes.html">$maxbytes</a>);
<a name="l892"><span class="linenum"> 892</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('file_exception')" href="../_classes/file_exception.html" onMouseOver="classPopup(event,'file_exception')">file_exception</a>('maxbytesfile', (object) array('file' =&gt; <a class="var it833" onMouseOver="hilite(833)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../_variables/filerecord.html">$filerecord</a>['filename'],
<a name="l893"><span class="linenum"> 893</span></a>                                                                      'size' =&gt; <a class="var it16206" onMouseOver="hilite(16206)" onMouseOut="lolite()" onClick="logVariable('maxbytesdisplay')" href="../_variables/maxbytesdisplay.html">$maxbytesdisplay</a>));
<a name="l894"><span class="linenum"> 894</span></a>          }
<a name="l895"><span class="linenum"> 895</span></a>  <span class="comment">        // Validate the size of the draft area.</span>
<a name="l896"><span class="linenum"> 896</span></a>          if (<a class="function" onClick="logFunction('file_is_draft_area_limit_reached')" href="../_functions/file_is_draft_area_limit_reached.html" onMouseOver="funcPopup(event,'file_is_draft_area_limit_reached')">file_is_draft_area_limit_reached</a>(<a class="var it637" onMouseOver="hilite(637)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../_variables/draftitemid.html">$draftitemid</a>, <a class="var it5974" onMouseOver="hilite(5974)" onMouseOut="lolite()" onClick="logVariable('areamaxbytes')" href="../_variables/areamaxbytes.html">$areamaxbytes</a>, <a class="var it2107" onMouseOver="hilite(2107)" onMouseOut="lolite()" onClick="logVariable('stored_file')" href="../_variables/stored_file.html">$stored_file</a>-&gt;<a class="function" onClick="logFunction('get_filesize')" href="../_functions/get_filesize.html" onMouseOver="funcPopup(event,'get_filesize')">get_filesize</a>())) {
<a name="l897"><span class="linenum"> 897</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('file_exception')" href="../_classes/file_exception.html" onMouseOver="classPopup(event,'file_exception')">file_exception</a>('maxareabytes');
<a name="l898"><span class="linenum"> 898</span></a>          }
<a name="l899"><span class="linenum"> 899</span></a>  
<a name="l900"><span class="linenum"> 900</span></a>          if (<a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('draftfile_exists')" href="../_functions/draftfile_exists.html" onMouseOver="funcPopup(event,'draftfile_exists')">draftfile_exists</a>(<a class="var it637" onMouseOver="hilite(637)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../_variables/draftitemid.html">$draftitemid</a>, <a class="var it21390" onMouseOver="hilite(21390)" onMouseOut="lolite()" onClick="logVariable('new_filepath')" href="../_variables/new_filepath.html">$new_filepath</a>, <a class="var it21391" onMouseOver="hilite(21391)" onMouseOut="lolite()" onClick="logVariable('new_filename')" href="../_variables/new_filename.html">$new_filename</a>)) {
<a name="l901"><span class="linenum"> 901</span></a>  <span class="comment">            // create new file</span>
<a name="l902"><span class="linenum"> 902</span></a>              <a class="var it16204" onMouseOver="hilite(16204)" onMouseOut="lolite()" onClick="logVariable('unused_filename')" href="../_variables/unused_filename.html">$unused_filename</a> = <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('get_unused_filename')" href="../_functions/get_unused_filename.html" onMouseOver="funcPopup(event,'get_unused_filename')">get_unused_filename</a>(<a class="var it637" onMouseOver="hilite(637)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../_variables/draftitemid.html">$draftitemid</a>, <a class="var it21390" onMouseOver="hilite(21390)" onMouseOut="lolite()" onClick="logVariable('new_filepath')" href="../_variables/new_filepath.html">$new_filepath</a>, <a class="var it21391" onMouseOver="hilite(21391)" onMouseOut="lolite()" onClick="logVariable('new_filename')" href="../_variables/new_filename.html">$new_filename</a>);
<a name="l903"><span class="linenum"> 903</span></a>              <a class="var it833" onMouseOver="hilite(833)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../_variables/filerecord.html">$filerecord</a>['filename'] = <a class="var it16204" onMouseOver="hilite(16204)" onMouseOut="lolite()" onClick="logVariable('unused_filename')" href="../_variables/unused_filename.html">$unused_filename</a>;
<a name="l904"><span class="linenum"> 904</span></a>              <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('create_file_from_storedfile')" href="../_functions/create_file_from_storedfile.html" onMouseOver="funcPopup(event,'create_file_from_storedfile')">create_file_from_storedfile</a>(<a class="var it833" onMouseOver="hilite(833)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../_variables/filerecord.html">$filerecord</a>, <a class="var it2107" onMouseOver="hilite(2107)" onMouseOut="lolite()" onClick="logVariable('stored_file')" href="../_variables/stored_file.html">$stored_file</a>);
<a name="l905"><span class="linenum"> 905</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = array();
<a name="l906"><span class="linenum"> 906</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>['event'] = 'fileexists';
<a name="l907"><span class="linenum"> 907</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>['newfile'] = new stdClass;
<a name="l908"><span class="linenum"> 908</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>['newfile']-&gt;filepath = <a class="var it21390" onMouseOver="hilite(21390)" onMouseOut="lolite()" onClick="logVariable('new_filepath')" href="../_variables/new_filepath.html">$new_filepath</a>;
<a name="l909"><span class="linenum"> 909</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>['newfile']-&gt;filename = <a class="var it16204" onMouseOver="hilite(16204)" onMouseOut="lolite()" onClick="logVariable('unused_filename')" href="../_variables/unused_filename.html">$unused_filename</a>;
<a name="l910"><span class="linenum"> 910</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>['newfile']-&gt;url = <a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>::<a class="function" onClick="logFunction('make_draftfile_url')" href="../_functions/make_draftfile_url.html" onMouseOver="funcPopup(event,'make_draftfile_url')">make_draftfile_url</a>(<a class="var it637" onMouseOver="hilite(637)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../_variables/draftitemid.html">$draftitemid</a>, <a class="var it21390" onMouseOver="hilite(21390)" onMouseOut="lolite()" onClick="logVariable('new_filepath')" href="../_variables/new_filepath.html">$new_filepath</a>, <a class="var it16204" onMouseOver="hilite(16204)" onMouseOut="lolite()" onClick="logVariable('unused_filename')" href="../_variables/unused_filename.html">$unused_filename</a>)-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>();
<a name="l911"><span class="linenum"> 911</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>['existingfile'] = new stdClass;
<a name="l912"><span class="linenum"> 912</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>['existingfile']-&gt;filepath = <a class="var it21390" onMouseOver="hilite(21390)" onMouseOut="lolite()" onClick="logVariable('new_filepath')" href="../_variables/new_filepath.html">$new_filepath</a>;
<a name="l913"><span class="linenum"> 913</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>['existingfile']-&gt;filename = <a class="var it21391" onMouseOver="hilite(21391)" onMouseOut="lolite()" onClick="logVariable('new_filename')" href="../_variables/new_filename.html">$new_filename</a>;
<a name="l914"><span class="linenum"> 914</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>['existingfile']-&gt;url = <a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>::<a class="function" onClick="logFunction('make_draftfile_url')" href="../_functions/make_draftfile_url.html" onMouseOver="funcPopup(event,'make_draftfile_url')">make_draftfile_url</a>(<a class="var it637" onMouseOver="hilite(637)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../_variables/draftitemid.html">$draftitemid</a>, <a class="var it21390" onMouseOver="hilite(21390)" onMouseOut="lolite()" onClick="logVariable('new_filepath')" href="../_variables/new_filepath.html">$new_filepath</a>, <a class="var it21391" onMouseOver="hilite(21391)" onMouseOut="lolite()" onClick="logVariable('new_filename')" href="../_variables/new_filename.html">$new_filename</a>)-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>();
<a name="l915"><span class="linenum"> 915</span></a>              return <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>;
<a name="l916"><span class="linenum"> 916</span></a>          } else {
<a name="l917"><span class="linenum"> 917</span></a>              <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('create_file_from_storedfile')" href="../_functions/create_file_from_storedfile.html" onMouseOver="funcPopup(event,'create_file_from_storedfile')">create_file_from_storedfile</a>(<a class="var it833" onMouseOver="hilite(833)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../_variables/filerecord.html">$filerecord</a>, <a class="var it2107" onMouseOver="hilite(2107)" onMouseOut="lolite()" onClick="logVariable('stored_file')" href="../_variables/stored_file.html">$stored_file</a>);
<a name="l918"><span class="linenum"> 918</span></a>              <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a> = array();
<a name="l919"><span class="linenum"> 919</span></a>              <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>['itemid'] = <a class="var it637" onMouseOver="hilite(637)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../_variables/draftitemid.html">$draftitemid</a>;
<a name="l920"><span class="linenum"> 920</span></a>              <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>['file'] = <a class="var it21391" onMouseOver="hilite(21391)" onMouseOut="lolite()" onClick="logVariable('new_filename')" href="../_variables/new_filename.html">$new_filename</a>;
<a name="l921"><span class="linenum"> 921</span></a>              <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>['title'] = <a class="var it21391" onMouseOver="hilite(21391)" onMouseOut="lolite()" onClick="logVariable('new_filename')" href="../_variables/new_filename.html">$new_filename</a>;
<a name="l922"><span class="linenum"> 922</span></a>              <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>['contextid'] = <a class="var it2103" onMouseOver="hilite(2103)" onMouseOut="lolite()" onClick="logVariable('user_context')" href="../_variables/user_context.html">$user_context</a>-&gt;<a onClick="logVariable('id')" class="var it44209" onMouseOver="hilite(44209)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l923"><span class="linenum"> 923</span></a>              <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>['url'] = <a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>::<a class="function" onClick="logFunction('make_draftfile_url')" href="../_functions/make_draftfile_url.html" onMouseOver="funcPopup(event,'make_draftfile_url')">make_draftfile_url</a>(<a class="var it637" onMouseOver="hilite(637)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../_variables/draftitemid.html">$draftitemid</a>, <a class="var it21390" onMouseOver="hilite(21390)" onMouseOut="lolite()" onClick="logVariable('new_filepath')" href="../_variables/new_filepath.html">$new_filepath</a>, <a class="var it21391" onMouseOver="hilite(21391)" onMouseOut="lolite()" onClick="logVariable('new_filename')" href="../_variables/new_filename.html">$new_filename</a>)-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>();
<a name="l924"><span class="linenum"> 924</span></a>              <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>['filesize'] = <a class="var it2107" onMouseOver="hilite(2107)" onMouseOut="lolite()" onClick="logVariable('stored_file')" href="../_variables/stored_file.html">$stored_file</a>-&gt;<a class="function" onClick="logFunction('get_filesize')" href="../_functions/get_filesize.html" onMouseOver="funcPopup(event,'get_filesize')">get_filesize</a>();
<a name="l925"><span class="linenum"> 925</span></a>              return <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../_variables/info.html">$info</a>;
<a name="l926"><span class="linenum"> 926</span></a>          }
<a name="l927"><span class="linenum"> 927</span></a>      }
<a name="l928"><span class="linenum"> 928</span></a>  
<a name="l929"><span class="linenum"> 929</span></a>      <span class="comment">/**</span>
<a name="l930"><span class="linenum"> 930</span></a>  <span class="comment">     * Get an unused filename from the current draft area.</span>
<a name="l931"><span class="linenum"> 931</span></a>  <span class="comment">     *</span>
<a name="l932"><span class="linenum"> 932</span></a>  <span class="comment">     * Will check if the file ends with ([0-9]) and increase the number.</span>
<a name="l933"><span class="linenum"> 933</span></a>  <span class="comment">     *</span>
<a name="l934"><span class="linenum"> 934</span></a>  <span class="comment">     * @static</span>
<a name="l935"><span class="linenum"> 935</span></a>  <span class="comment">     * @param int $itemid draft item ID.</span>
<a name="l936"><span class="linenum"> 936</span></a>  <span class="comment">     * @param string $filepath path to the file.</span>
<a name="l937"><span class="linenum"> 937</span></a>  <span class="comment">     * @param string $filename name of the file.</span>
<a name="l938"><span class="linenum"> 938</span></a>  <span class="comment">     * @return string an unused file name.</span>
<a name="l939"><span class="linenum"> 939</span></a>  <span class="comment">     */</span>
<a name="l940"><span class="linenum"> 940</span></a>      public static function <a class="function" onClick="logFunction('get_unused_filename')" href="../_functions/get_unused_filename.html" onMouseOver="funcPopup(event,'get_unused_filename')">get_unused_filename</a>(<a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a>, <a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../_variables/filepath.html">$filepath</a>, <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>) {
<a name="l941"><span class="linenum"> 941</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>;
<a name="l942"><span class="linenum"> 942</span></a>          <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a> = <a class="class" onClick="logClass('context_user')" href="../_classes/context_user.html" onMouseOver="classPopup(event,'context_user')">context_user</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)-&gt;id;
<a name="l943"><span class="linenum"> 943</span></a>          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l944"><span class="linenum"> 944</span></a>          return <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_unused_filename')" href="../_functions/get_unused_filename.html" onMouseOver="funcPopup(event,'get_unused_filename')">get_unused_filename</a>(<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>, 'user', 'draft', <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a>, <a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../_variables/filepath.html">$filepath</a>, <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>);
<a name="l945"><span class="linenum"> 945</span></a>      }
<a name="l946"><span class="linenum"> 946</span></a>  
<a name="l947"><span class="linenum"> 947</span></a>      <span class="comment">/**</span>
<a name="l948"><span class="linenum"> 948</span></a>  <span class="comment">     * Append a suffix to filename.</span>
<a name="l949"><span class="linenum"> 949</span></a>  <span class="comment">     *</span>
<a name="l950"><span class="linenum"> 950</span></a>  <span class="comment">     * @static</span>
<a name="l951"><span class="linenum"> 951</span></a>  <span class="comment">     * @param string $filename</span>
<a name="l952"><span class="linenum"> 952</span></a>  <span class="comment">     * @return string</span>
<a name="l953"><span class="linenum"> 953</span></a>  <span class="comment">     * @deprecated since 2.5</span>
<a name="l954"><span class="linenum"> 954</span></a>  <span class="comment">     */</span>
<a name="l955"><span class="linenum"> 955</span></a>      public static function <a class="function" onClick="logFunction('append_suffix')" href="../_functions/append_suffix.html" onMouseOver="funcPopup(event,'append_suffix')">append_suffix</a>(<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>) {
<a name="l956"><span class="linenum"> 956</span></a>          <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('The function <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('append_suffix')" href="../_functions/append_suffix.html" onMouseOver="funcPopup(event,'append_suffix')">append_suffix</a>() has been deprecated. Use <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('get_unused_filename')" href="../_functions/get_unused_filename.html" onMouseOver="funcPopup(event,'get_unused_filename')">get_unused_filename</a>() instead.',
<a name="l957"><span class="linenum"> 957</span></a>              <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l958"><span class="linenum"> 958</span></a>          <a class="var it19902" onMouseOver="hilite(19902)" onMouseOut="lolite()" onClick="logVariable('pathinfo')" href="../_variables/pathinfo.html">$pathinfo</a> = <a class="phpfunction" onClick="logFunction('pathinfo')" href="../_functions/pathinfo.html" onMouseOver="phpfuncPopup(event,'pathinfo')">pathinfo</a>(<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>);
<a name="l959"><span class="linenum"> 959</span></a>          if (empty(<a class="var it19902" onMouseOver="hilite(19902)" onMouseOut="lolite()" onClick="logVariable('pathinfo')" href="../_variables/pathinfo.html">$pathinfo</a>['extension'])) {
<a name="l960"><span class="linenum"> 960</span></a>              return <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a> . <a class="constant" onClick="logConstant('RENAME_SUFFIX')" href="../_constants/RENAME_SUFFIX.html" onMouseOver="constPopup(event,'RENAME_SUFFIX')">RENAME_SUFFIX</a>;
<a name="l961"><span class="linenum"> 961</span></a>          } else {
<a name="l962"><span class="linenum"> 962</span></a>              return <a class="var it19902" onMouseOver="hilite(19902)" onMouseOut="lolite()" onClick="logVariable('pathinfo')" href="../_variables/pathinfo.html">$pathinfo</a>['filename'] . <a class="constant" onClick="logConstant('RENAME_SUFFIX')" href="../_constants/RENAME_SUFFIX.html" onMouseOver="constPopup(event,'RENAME_SUFFIX')">RENAME_SUFFIX</a> . '.' . <a class="var it19902" onMouseOver="hilite(19902)" onMouseOut="lolite()" onClick="logVariable('pathinfo')" href="../_variables/pathinfo.html">$pathinfo</a>['extension'];
<a name="l963"><span class="linenum"> 963</span></a>          }
<a name="l964"><span class="linenum"> 964</span></a>      }
<a name="l965"><span class="linenum"> 965</span></a>  
<a name="l966"><span class="linenum"> 966</span></a>      <span class="comment">/**</span>
<a name="l967"><span class="linenum"> 967</span></a>  <span class="comment">     * Return all types that you a user can create/edit and which are also visible</span>
<a name="l968"><span class="linenum"> 968</span></a>  <span class="comment">     * Note: Mostly used in order to know if at least one editable type can be set</span>
<a name="l969"><span class="linenum"> 969</span></a>  <span class="comment">     *</span>
<a name="l970"><span class="linenum"> 970</span></a>  <span class="comment">     * @static</span>
<a name="l971"><span class="linenum"> 971</span></a>  <span class="comment">     * @param stdClass $context the context for which we want the editable types</span>
<a name="l972"><span class="linenum"> 972</span></a>  <span class="comment">     * @return array types</span>
<a name="l973"><span class="linenum"> 973</span></a>  <span class="comment">     */</span>
<a name="l974"><span class="linenum"> 974</span></a>      public static function <a class="function" onClick="logFunction('get_editable_types')" href="../_functions/get_editable_types.html" onMouseOver="funcPopup(event,'get_editable_types')">get_editable_types</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = null) {
<a name="l975"><span class="linenum"> 975</span></a>  
<a name="l976"><span class="linenum"> 976</span></a>          if (empty(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l977"><span class="linenum"> 977</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l978"><span class="linenum"> 978</span></a>          }
<a name="l979"><span class="linenum"> 979</span></a>  
<a name="l980"><span class="linenum"> 980</span></a>          <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../_variables/types.html">$types</a>= <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('get_types')" href="../_functions/get_types.html" onMouseOver="funcPopup(event,'get_types')">get_types</a>(true);
<a name="l981"><span class="linenum"> 981</span></a>          <a class="var it21392" onMouseOver="hilite(21392)" onMouseOut="lolite()" onClick="logVariable('editabletypes')" href="../_variables/editabletypes.html">$editabletypes</a> = array();
<a name="l982"><span class="linenum"> 982</span></a>          foreach (<a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../_variables/types.html">$types</a> as <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>) {
<a name="l983"><span class="linenum"> 983</span></a>              <a class="var it21380" onMouseOver="hilite(21380)" onMouseOut="lolite()" onClick="logVariable('instanceoptionnames')" href="../_variables/instanceoptionnames.html">$instanceoptionnames</a> = <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('static_function')" href="../_functions/static_function.html" onMouseOver="funcPopup(event,'static_function')">static_function</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>-&gt;<a class="function" onClick="logFunction('get_typename')" href="../_functions/get_typename.html" onMouseOver="funcPopup(event,'get_typename')">get_typename</a>(), 'get_instance_option_names');
<a name="l984"><span class="linenum"> 984</span></a>              if (!empty(<a class="var it21380" onMouseOver="hilite(21380)" onMouseOut="lolite()" onClick="logVariable('instanceoptionnames')" href="../_variables/instanceoptionnames.html">$instanceoptionnames</a>)) {
<a name="l985"><span class="linenum"> 985</span></a>                  if (<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>-&gt;<a class="function" onClick="logFunction('get_contextvisibility')" href="../_functions/get_contextvisibility.html" onMouseOver="funcPopup(event,'get_contextvisibility')">get_contextvisibility</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l986"><span class="linenum"> 986</span></a>                      <a class="var it21392" onMouseOver="hilite(21392)" onMouseOut="lolite()" onClick="logVariable('editabletypes')" href="../_variables/editabletypes.html">$editabletypes</a>[]=<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>;
<a name="l987"><span class="linenum"> 987</span></a>                  }
<a name="l988"><span class="linenum"> 988</span></a>               }
<a name="l989"><span class="linenum"> 989</span></a>          }
<a name="l990"><span class="linenum"> 990</span></a>          return <a class="var it21392" onMouseOver="hilite(21392)" onMouseOut="lolite()" onClick="logVariable('editabletypes')" href="../_variables/editabletypes.html">$editabletypes</a>;
<a name="l991"><span class="linenum"> 991</span></a>      }
<a name="l992"><span class="linenum"> 992</span></a>  
<a name="l993"><span class="linenum"> 993</span></a>      <span class="comment">/**</span>
<a name="l994"><span class="linenum"> 994</span></a>  <span class="comment">     * Return repository instances</span>
<a name="l995"><span class="linenum"> 995</span></a>  <span class="comment">     *</span>
<a name="l996"><span class="linenum"> 996</span></a>  <span class="comment">     * @static</span>
<a name="l997"><span class="linenum"> 997</span></a>  <span class="comment">     * @param array $args Array containing the following keys:</span>
<a name="l998"><span class="linenum"> 998</span></a>  <span class="comment">     *           currentcontext : instance of context (default system context)</span>
<a name="l999"><span class="linenum"> 999</span></a>  <span class="comment">     *           context : array of instances of context (default empty array)</span>
<a name="l1000"><span class="linenum">1000</span></a>  <span class="comment">     *           onlyvisible : bool (default true)</span>
<a name="l1001"><span class="linenum">1001</span></a>  <span class="comment">     *           type : string return instances of this type only</span>
<a name="l1002"><span class="linenum">1002</span></a>  <span class="comment">     *           accepted_types : string|array return instances that contain files of those types (*, web_image, .pdf, ...)</span>
<a name="l1003"><span class="linenum">1003</span></a>  <span class="comment">     *           return_types : int combination of FILE_INTERNAL &amp; FILE_EXTERNAL &amp; FILE_REFERENCE.</span>
<a name="l1004"><span class="linenum">1004</span></a>  <span class="comment">     *                          0 means every type. The default is FILE_INTERNAL | FILE_EXTERNAL.</span>
<a name="l1005"><span class="linenum">1005</span></a>  <span class="comment">     *           userid : int if specified, instances belonging to other users will not be returned</span>
<a name="l1006"><span class="linenum">1006</span></a>  <span class="comment">     *</span>
<a name="l1007"><span class="linenum">1007</span></a>  <span class="comment">     * @return array repository instances</span>
<a name="l1008"><span class="linenum">1008</span></a>  <span class="comment">     */</span>
<a name="l1009"><span class="linenum">1009</span></a>      public static function <a class="function" onClick="logFunction('get_instances')" href="../_functions/get_instances.html" onMouseOver="funcPopup(event,'get_instances')">get_instances</a>(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a> = array()) {
<a name="l1010"><span class="linenum">1010</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>;
<a name="l1011"><span class="linenum">1011</span></a>  
<a name="l1012"><span class="linenum">1012</span></a>  <span class="comment">        // Fill $args attributes with default values unless specified</span>
<a name="l1013"><span class="linenum">1013</span></a>          if (!isset(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['currentcontext']) || !(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['currentcontext'] instanceof context)) {
<a name="l1014"><span class="linenum">1014</span></a>              <a class="var it21393" onMouseOver="hilite(21393)" onMouseOut="lolite()" onClick="logVariable('current_context')" href="../_variables/current_context.html">$current_context</a> = <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l1015"><span class="linenum">1015</span></a>          } else {
<a name="l1016"><span class="linenum">1016</span></a>              <a class="var it21393" onMouseOver="hilite(21393)" onMouseOut="lolite()" onClick="logVariable('current_context')" href="../_variables/current_context.html">$current_context</a> = <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['currentcontext'];
<a name="l1017"><span class="linenum">1017</span></a>          }
<a name="l1018"><span class="linenum">1018</span></a>          <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['currentcontext'] = <a class="var it21393" onMouseOver="hilite(21393)" onMouseOut="lolite()" onClick="logVariable('current_context')" href="../_variables/current_context.html">$current_context</a>-&gt;<a onClick="logVariable('id')" class="var it45926" onMouseOver="hilite(45926)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1019"><span class="linenum">1019</span></a>          <a class="var it9222" onMouseOver="hilite(9222)" onMouseOut="lolite()" onClick="logVariable('contextids')" href="../_variables/contextids.html">$contextids</a> = array();
<a name="l1020"><span class="linenum">1020</span></a>          if (!empty(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['context'])) {
<a name="l1021"><span class="linenum">1021</span></a>              foreach (<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['context'] as <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) {
<a name="l1022"><span class="linenum">1022</span></a>                  <a class="var it9222" onMouseOver="hilite(9222)" onMouseOut="lolite()" onClick="logVariable('contextids')" href="../_variables/contextids.html">$contextids</a>[] = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1023"><span class="linenum">1023</span></a>              }
<a name="l1024"><span class="linenum">1024</span></a>          }
<a name="l1025"><span class="linenum">1025</span></a>          <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['context'] = <a class="var it9222" onMouseOver="hilite(9222)" onMouseOut="lolite()" onClick="logVariable('contextids')" href="../_variables/contextids.html">$contextids</a>;
<a name="l1026"><span class="linenum">1026</span></a>          if (!isset(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['onlyvisible'])) {
<a name="l1027"><span class="linenum">1027</span></a>              <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['onlyvisible'] = true;
<a name="l1028"><span class="linenum">1028</span></a>          }
<a name="l1029"><span class="linenum">1029</span></a>          if (!isset(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['return_types'])) {
<a name="l1030"><span class="linenum">1030</span></a>              <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['return_types'] = <a class="constant" onClick="logConstant('FILE_INTERNAL')" href="../_constants/FILE_INTERNAL.html" onMouseOver="constPopup(event,'FILE_INTERNAL')">FILE_INTERNAL</a> | <a class="constant" onClick="logConstant('FILE_EXTERNAL')" href="../_constants/FILE_EXTERNAL.html" onMouseOver="constPopup(event,'FILE_EXTERNAL')">FILE_EXTERNAL</a>;
<a name="l1031"><span class="linenum">1031</span></a>          }
<a name="l1032"><span class="linenum">1032</span></a>          if (!isset(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['type'])) {
<a name="l1033"><span class="linenum">1033</span></a>              <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['type'] = null;
<a name="l1034"><span class="linenum">1034</span></a>          }
<a name="l1035"><span class="linenum">1035</span></a>          if (empty(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['disable_types']) || !<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['disable_types'])) {
<a name="l1036"><span class="linenum">1036</span></a>              <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['disable_types'] = null;
<a name="l1037"><span class="linenum">1037</span></a>          }
<a name="l1038"><span class="linenum">1038</span></a>          if (empty(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['userid']) || !<a class="phpfunction" onClick="logFunction('is_numeric')" href="../_functions/is_numeric.html" onMouseOver="phpfuncPopup(event,'is_numeric')">is_numeric</a>(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['userid'])) {
<a name="l1039"><span class="linenum">1039</span></a>              <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['userid'] = null;
<a name="l1040"><span class="linenum">1040</span></a>          }
<a name="l1041"><span class="linenum">1041</span></a>          if (!isset(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['accepted_types']) || (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['accepted_types']) &amp;&amp; <a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>('*', <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['accepted_types']))) {
<a name="l1042"><span class="linenum">1042</span></a>              <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['accepted_types'] = '*';
<a name="l1043"><span class="linenum">1043</span></a>          }
<a name="l1044"><span class="linenum">1044</span></a>          <a class="phpfunction" onClick="logFunction('ksort')" href="../_functions/ksort.html" onMouseOver="phpfuncPopup(event,'ksort')">ksort</a>(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>);
<a name="l1045"><span class="linenum">1045</span></a>          <a class="var it6665" onMouseOver="hilite(6665)" onMouseOut="lolite()" onClick="logVariable('cachekey')" href="../_variables/cachekey.html">$cachekey</a> = 'all:'. <a class="phpfunction" onClick="logFunction('serialize')" href="../_functions/serialize.html" onMouseOver="phpfuncPopup(event,'serialize')">serialize</a>(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>);
<a name="l1046"><span class="linenum">1046</span></a>  
<a name="l1047"><span class="linenum">1047</span></a>  <span class="comment">        // Check if we have cached list of repositories with the same query</span>
<a name="l1048"><span class="linenum">1048</span></a>          <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a> = <a class="class" onClick="logClass('cache')" href="../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'repositories');
<a name="l1049"><span class="linenum">1049</span></a>          if ((<a class="var it21394" onMouseOver="hilite(21394)" onMouseOut="lolite()" onClick="logVariable('cachedrepositories')" href="../_variables/cachedrepositories.html">$cachedrepositories</a> = <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it6665" onMouseOver="hilite(6665)" onMouseOut="lolite()" onClick="logVariable('cachekey')" href="../_variables/cachekey.html">$cachekey</a>)) !== false) {
<a name="l1050"><span class="linenum">1050</span></a>  <span class="comment">            // convert from cacheable_object_array to array</span>
<a name="l1051"><span class="linenum">1051</span></a>              <a class="var it10503" onMouseOver="hilite(10503)" onMouseOut="lolite()" onClick="logVariable('repositories')" href="../_variables/repositories.html">$repositories</a> = array();
<a name="l1052"><span class="linenum">1052</span></a>              foreach (<a class="var it21394" onMouseOver="hilite(21394)" onMouseOut="lolite()" onClick="logVariable('cachedrepositories')" href="../_variables/cachedrepositories.html">$cachedrepositories</a> as <a class="var it641" onMouseOver="hilite(641)" onMouseOut="lolite()" onClick="logVariable('repository')" href="../_variables/repository.html">$repository</a>) {
<a name="l1053"><span class="linenum">1053</span></a>                  <a class="var it10503" onMouseOver="hilite(10503)" onMouseOut="lolite()" onClick="logVariable('repositories')" href="../_variables/repositories.html">$repositories</a>[<a class="var it641" onMouseOver="hilite(641)" onMouseOut="lolite()" onClick="logVariable('repository')" href="../_variables/repository.html">$repository</a>-&gt;<a onClick="logVariable('id')" class="var it43843" onMouseOver="hilite(43843)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = <a class="var it641" onMouseOver="hilite(641)" onMouseOut="lolite()" onClick="logVariable('repository')" href="../_variables/repository.html">$repository</a>;
<a name="l1054"><span class="linenum">1054</span></a>              }
<a name="l1055"><span class="linenum">1055</span></a>              return <a class="var it10503" onMouseOver="hilite(10503)" onMouseOut="lolite()" onClick="logVariable('repositories')" href="../_variables/repositories.html">$repositories</a>;
<a name="l1056"><span class="linenum">1056</span></a>          }
<a name="l1057"><span class="linenum">1057</span></a>  
<a name="l1058"><span class="linenum">1058</span></a>  <span class="comment">        // Prepare DB SQL query to retrieve repositories</span>
<a name="l1059"><span class="linenum">1059</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array();
<a name="l1060"><span class="linenum">1060</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT i.*, r.type AS repositorytype, r.sortorder, r.visible
<a name="l1061"><span class="linenum">1061</span></a>                    FROM {repository} r, {repository_instances} i
<a name="l1062"><span class="linenum">1062</span></a>                   WHERE i.typeid = r.id &quot;;
<a name="l1063"><span class="linenum">1063</span></a>  
<a name="l1064"><span class="linenum">1064</span></a>          if (<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['disable_types']) {
<a name="l1065"><span class="linenum">1065</span></a>              <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../_variables/types.html">$types</a>, <a class="var it325" onMouseOver="hilite(325)" onMouseOut="lolite()" onClick="logVariable('p')" href="../_variables/p.html">$p</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['disable_types'], <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>, 'distype', false);
<a name="l1066"><span class="linenum">1066</span></a>              <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> .= &quot; AND r.type <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../_variables/types.html">$types</a>&quot;;
<a name="l1067"><span class="linenum">1067</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, <a class="var it325" onMouseOver="hilite(325)" onMouseOut="lolite()" onClick="logVariable('p')" href="../_variables/p.html">$p</a>);
<a name="l1068"><span class="linenum">1068</span></a>          }
<a name="l1069"><span class="linenum">1069</span></a>  
<a name="l1070"><span class="linenum">1070</span></a>          if (<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['userid']) {
<a name="l1071"><span class="linenum">1071</span></a>              <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> .= &quot; AND (i.userid = 0 or i.userid = :userid)&quot;;
<a name="l1072"><span class="linenum">1072</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['userid'] = <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['userid'];
<a name="l1073"><span class="linenum">1073</span></a>          }
<a name="l1074"><span class="linenum">1074</span></a>  
<a name="l1075"><span class="linenum">1075</span></a>          if (<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['context']) {
<a name="l1076"><span class="linenum">1076</span></a>              <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it21395" onMouseOver="hilite(21395)" onMouseOut="lolite()" onClick="logVariable('ctxsql')" href="../_variables/ctxsql.html">$ctxsql</a>, <a class="var it5660" onMouseOver="hilite(5660)" onMouseOut="lolite()" onClick="logVariable('p2')" href="../_variables/p2.html">$p2</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['context'], <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>, 'ctx');
<a name="l1077"><span class="linenum">1077</span></a>              <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> .= &quot; AND i.contextid <a class="var it21395" onMouseOver="hilite(21395)" onMouseOut="lolite()" onClick="logVariable('ctxsql')" href="../_variables/ctxsql.html">$ctxsql</a>&quot;;
<a name="l1078"><span class="linenum">1078</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, <a class="var it5660" onMouseOver="hilite(5660)" onMouseOut="lolite()" onClick="logVariable('p2')" href="../_variables/p2.html">$p2</a>);
<a name="l1079"><span class="linenum">1079</span></a>          }
<a name="l1080"><span class="linenum">1080</span></a>  
<a name="l1081"><span class="linenum">1081</span></a>          if (<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['onlyvisible'] == true) {
<a name="l1082"><span class="linenum">1082</span></a>              <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> .= &quot; AND r.visible = 1&quot;;
<a name="l1083"><span class="linenum">1083</span></a>          }
<a name="l1084"><span class="linenum">1084</span></a>  
<a name="l1085"><span class="linenum">1085</span></a>          if (<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['type'] !== null) {
<a name="l1086"><span class="linenum">1086</span></a>              <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> .= &quot; AND r.type = :type&quot;;
<a name="l1087"><span class="linenum">1087</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['type'] = <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['type'];
<a name="l1088"><span class="linenum">1088</span></a>          }
<a name="l1089"><span class="linenum">1089</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> .= &quot; ORDER BY r.sortorder, i.name&quot;;
<a name="l1090"><span class="linenum">1090</span></a>  
<a name="l1091"><span class="linenum">1091</span></a>          if (!<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>)) {
<a name="l1092"><span class="linenum">1092</span></a>              <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a> = array();
<a name="l1093"><span class="linenum">1093</span></a>          }
<a name="l1094"><span class="linenum">1094</span></a>  
<a name="l1095"><span class="linenum">1095</span></a>          <a class="var it10503" onMouseOver="hilite(10503)" onMouseOut="lolite()" onClick="logVariable('repositories')" href="../_variables/repositories.html">$repositories</a> = array();
<a name="l1096"><span class="linenum">1096</span></a>  <span class="comment">        // Sortorder should be unique, which is not true if we use $record-&gt;sortorder</span>
<a name="l1097"><span class="linenum">1097</span></a>  <span class="comment">        // and there are multiple instances of any repository type</span>
<a name="l1098"><span class="linenum">1098</span></a>          <a class="var it3515" onMouseOver="hilite(3515)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../_variables/sortorder.html">$sortorder</a> = 1;
<a name="l1099"><span class="linenum">1099</span></a>          foreach (<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../_variables/records.html">$records</a> as <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>) {
<a name="l1100"><span class="linenum">1100</span></a>              <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('i:'. <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>);
<a name="l1101"><span class="linenum">1101</span></a>              if (!<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '/repository/'. <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('repositorytype')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/repositorytype.html">repositorytype</a>.'/lib.php')) {
<a name="l1102"><span class="linenum">1102</span></a>                  continue;
<a name="l1103"><span class="linenum">1103</span></a>              }
<a name="l1104"><span class="linenum">1104</span></a>              <a class="var it641" onMouseOver="hilite(641)" onMouseOut="lolite()" onClick="logVariable('repository')" href="../_variables/repository.html">$repository</a> = self::<a class="function" onClick="logFunction('get_repository_by_id')" href="../_functions/get_repository_by_id.html" onMouseOver="funcPopup(event,'get_repository_by_id')">get_repository_by_id</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it21393" onMouseOver="hilite(21393)" onMouseOut="lolite()" onClick="logVariable('current_context')" href="../_variables/current_context.html">$current_context</a>);
<a name="l1105"><span class="linenum">1105</span></a>              <a class="var it641" onMouseOver="hilite(641)" onMouseOut="lolite()" onClick="logVariable('repository')" href="../_variables/repository.html">$repository</a>-&gt;<a onClick="logVariable('options')" class="var it43843" onMouseOver="hilite(43843)" onMouseOut="lolite()" href="../_variables/options.html">options</a>['sortorder'] = <a class="var it3515" onMouseOver="hilite(3515)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../_variables/sortorder.html">$sortorder</a>++;
<a name="l1106"><span class="linenum">1106</span></a>  
<a name="l1107"><span class="linenum">1107</span></a>              <a class="var it21396" onMouseOver="hilite(21396)" onMouseOut="lolite()" onClick="logVariable('is_supported')" href="../_variables/is_supported.html">$is_supported</a> = true;
<a name="l1108"><span class="linenum">1108</span></a>  
<a name="l1109"><span class="linenum">1109</span></a>  <span class="comment">            // check mimetypes</span>
<a name="l1110"><span class="linenum">1110</span></a>              if (<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['accepted_types'] !== '*' and <a class="var it641" onMouseOver="hilite(641)" onMouseOut="lolite()" onClick="logVariable('repository')" href="../_variables/repository.html">$repository</a>-&gt;<a class="function" onClick="logFunction('supported_filetypes')" href="../_functions/supported_filetypes.html" onMouseOver="funcPopup(event,'supported_filetypes')">supported_filetypes</a>() !== '*') {
<a name="l1111"><span class="linenum">1111</span></a>                  <a class="var it21397" onMouseOver="hilite(21397)" onMouseOut="lolite()" onClick="logVariable('accepted_ext')" href="../_variables/accepted_ext.html">$accepted_ext</a> = <a class="function" onClick="logFunction('file_get_typegroup')" href="../_functions/file_get_typegroup.html" onMouseOver="funcPopup(event,'file_get_typegroup')">file_get_typegroup</a>('extension', <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['accepted_types']);
<a name="l1112"><span class="linenum">1112</span></a>                  <a class="var it21398" onMouseOver="hilite(21398)" onMouseOut="lolite()" onClick="logVariable('supported_ext')" href="../_variables/supported_ext.html">$supported_ext</a> = <a class="function" onClick="logFunction('file_get_typegroup')" href="../_functions/file_get_typegroup.html" onMouseOver="funcPopup(event,'file_get_typegroup')">file_get_typegroup</a>('extension', <a class="var it641" onMouseOver="hilite(641)" onMouseOut="lolite()" onClick="logVariable('repository')" href="../_variables/repository.html">$repository</a>-&gt;<a class="function" onClick="logFunction('supported_filetypes')" href="../_functions/supported_filetypes.html" onMouseOver="funcPopup(event,'supported_filetypes')">supported_filetypes</a>());
<a name="l1113"><span class="linenum">1113</span></a>                  <a class="var it21399" onMouseOver="hilite(21399)" onMouseOut="lolite()" onClick="logVariable('valid_ext')" href="../_variables/valid_ext.html">$valid_ext</a> = <a class="phpfunction" onClick="logFunction('array_intersect')" href="../_functions/array_intersect.html" onMouseOver="phpfuncPopup(event,'array_intersect')">array_intersect</a>(<a class="var it21397" onMouseOver="hilite(21397)" onMouseOut="lolite()" onClick="logVariable('accepted_ext')" href="../_variables/accepted_ext.html">$accepted_ext</a>, <a class="var it21398" onMouseOver="hilite(21398)" onMouseOut="lolite()" onClick="logVariable('supported_ext')" href="../_variables/supported_ext.html">$supported_ext</a>);
<a name="l1114"><span class="linenum">1114</span></a>                  <a class="var it21396" onMouseOver="hilite(21396)" onMouseOut="lolite()" onClick="logVariable('is_supported')" href="../_variables/is_supported.html">$is_supported</a> = !empty(<a class="var it21399" onMouseOver="hilite(21399)" onMouseOut="lolite()" onClick="logVariable('valid_ext')" href="../_variables/valid_ext.html">$valid_ext</a>);
<a name="l1115"><span class="linenum">1115</span></a>              }
<a name="l1116"><span class="linenum">1116</span></a>  <span class="comment">            // Check return values.</span>
<a name="l1117"><span class="linenum">1117</span></a>              if (!empty(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['return_types']) &amp;&amp; !(<a class="var it641" onMouseOver="hilite(641)" onMouseOut="lolite()" onClick="logVariable('repository')" href="../_variables/repository.html">$repository</a>-&gt;<a class="function" onClick="logFunction('supported_returntypes')" href="../_functions/supported_returntypes.html" onMouseOver="funcPopup(event,'supported_returntypes')">supported_returntypes</a>() &amp; <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['return_types'])) {
<a name="l1118"><span class="linenum">1118</span></a>                  <a class="var it21396" onMouseOver="hilite(21396)" onMouseOut="lolite()" onClick="logVariable('is_supported')" href="../_variables/is_supported.html">$is_supported</a> = false;
<a name="l1119"><span class="linenum">1119</span></a>              }
<a name="l1120"><span class="linenum">1120</span></a>  
<a name="l1121"><span class="linenum">1121</span></a>              if (!<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>['onlyvisible'] || (<a class="var it641" onMouseOver="hilite(641)" onMouseOut="lolite()" onClick="logVariable('repository')" href="../_variables/repository.html">$repository</a>-&gt;<a class="function" onClick="logFunction('is_visible')" href="../_functions/is_visible.html" onMouseOver="funcPopup(event,'is_visible')">is_visible</a>() &amp;&amp; !<a class="var it641" onMouseOver="hilite(641)" onMouseOut="lolite()" onClick="logVariable('repository')" href="../_variables/repository.html">$repository</a>-&gt;<a onClick="logVariable('disabled')" class="var it43843" onMouseOver="hilite(43843)" onMouseOut="lolite()" href="../_variables/disabled.html">disabled</a>)) {
<a name="l1122"><span class="linenum">1122</span></a>  <span class="comment">                // check capability in current context</span>
<a name="l1123"><span class="linenum">1123</span></a>                  <a class="var it787" onMouseOver="hilite(787)" onMouseOut="lolite()" onClick="logVariable('capability')" href="../_variables/capability.html">$capability</a> = <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('repository/'.<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('repositorytype')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/repositorytype.html">repositorytype</a>.':view', <a class="var it21393" onMouseOver="hilite(21393)" onMouseOut="lolite()" onClick="logVariable('current_context')" href="../_variables/current_context.html">$current_context</a>);
<a name="l1124"><span class="linenum">1124</span></a>                  if (<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('repositorytype')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/repositorytype.html">repositorytype</a> == 'coursefiles') {
<a name="l1125"><span class="linenum">1125</span></a>  <span class="comment">                    // coursefiles plugin needs managefiles permission</span>
<a name="l1126"><span class="linenum">1126</span></a>                      <a class="var it787" onMouseOver="hilite(787)" onMouseOut="lolite()" onClick="logVariable('capability')" href="../_variables/capability.html">$capability</a> = <a class="var it787" onMouseOver="hilite(787)" onMouseOut="lolite()" onClick="logVariable('capability')" href="../_variables/capability.html">$capability</a> &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:managefiles', <a class="var it21393" onMouseOver="hilite(21393)" onMouseOut="lolite()" onClick="logVariable('current_context')" href="../_variables/current_context.html">$current_context</a>);
<a name="l1127"><span class="linenum">1127</span></a>                  }
<a name="l1128"><span class="linenum">1128</span></a>                  if (<a class="var it21396" onMouseOver="hilite(21396)" onMouseOut="lolite()" onClick="logVariable('is_supported')" href="../_variables/is_supported.html">$is_supported</a> &amp;&amp; <a class="var it787" onMouseOver="hilite(787)" onMouseOut="lolite()" onClick="logVariable('capability')" href="../_variables/capability.html">$capability</a>) {
<a name="l1129"><span class="linenum">1129</span></a>                      <a class="var it10503" onMouseOver="hilite(10503)" onMouseOut="lolite()" onClick="logVariable('repositories')" href="../_variables/repositories.html">$repositories</a>[<a class="var it641" onMouseOver="hilite(641)" onMouseOut="lolite()" onClick="logVariable('repository')" href="../_variables/repository.html">$repository</a>-&gt;<a onClick="logVariable('id')" class="var it43843" onMouseOver="hilite(43843)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = <a class="var it641" onMouseOver="hilite(641)" onMouseOut="lolite()" onClick="logVariable('repository')" href="../_variables/repository.html">$repository</a>;
<a name="l1130"><span class="linenum">1130</span></a>                  }
<a name="l1131"><span class="linenum">1131</span></a>              }
<a name="l1132"><span class="linenum">1132</span></a>          }
<a name="l1133"><span class="linenum">1133</span></a>          <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>(<a class="var it6665" onMouseOver="hilite(6665)" onMouseOut="lolite()" onClick="logVariable('cachekey')" href="../_variables/cachekey.html">$cachekey</a>, <span class="keyword">new </span><a class="class" onClick="logClass('cacheable_object_array')" href="../_classes/cacheable_object_array.html" onMouseOver="classPopup(event,'cacheable_object_array')">cacheable_object_array</a>(<a class="var it10503" onMouseOver="hilite(10503)" onMouseOut="lolite()" onClick="logVariable('repositories')" href="../_variables/repositories.html">$repositories</a>));
<a name="l1134"><span class="linenum">1134</span></a>          return <a class="var it10503" onMouseOver="hilite(10503)" onMouseOut="lolite()" onClick="logVariable('repositories')" href="../_variables/repositories.html">$repositories</a>;
<a name="l1135"><span class="linenum">1135</span></a>      }
<a name="l1136"><span class="linenum">1136</span></a>  
<a name="l1137"><span class="linenum">1137</span></a>      <span class="comment">/**</span>
<a name="l1138"><span class="linenum">1138</span></a>  <span class="comment">     * Get single repository instance for administrative actions</span>
<a name="l1139"><span class="linenum">1139</span></a>  <span class="comment">     *</span>
<a name="l1140"><span class="linenum">1140</span></a>  <span class="comment">     * Do not use this function to access repository contents, because it</span>
<a name="l1141"><span class="linenum">1141</span></a>  <span class="comment">     * does not set the current context</span>
<a name="l1142"><span class="linenum">1142</span></a>  <span class="comment">     *</span>
<a name="l1143"><span class="linenum">1143</span></a>  <span class="comment">     * @see repository::get_repository_by_id()</span>
<a name="l1144"><span class="linenum">1144</span></a>  <span class="comment">     *</span>
<a name="l1145"><span class="linenum">1145</span></a>  <span class="comment">     * @static</span>
<a name="l1146"><span class="linenum">1146</span></a>  <span class="comment">     * @param integer $id repository instance id</span>
<a name="l1147"><span class="linenum">1147</span></a>  <span class="comment">     * @return repository</span>
<a name="l1148"><span class="linenum">1148</span></a>  <span class="comment">     */</span>
<a name="l1149"><span class="linenum">1149</span></a>      public static function <a class="function" onClick="logFunction('get_instance')" href="../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>) {
<a name="l1150"><span class="linenum">1150</span></a>          return self::<a class="function" onClick="logFunction('get_repository_by_id')" href="../_functions/get_repository_by_id.html" onMouseOver="funcPopup(event,'get_repository_by_id')">get_repository_by_id</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>, <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>());
<a name="l1151"><span class="linenum">1151</span></a>      }
<a name="l1152"><span class="linenum">1152</span></a>  
<a name="l1153"><span class="linenum">1153</span></a>      <span class="comment">/**</span>
<a name="l1154"><span class="linenum">1154</span></a>  <span class="comment">     * Call a static function. Any additional arguments than plugin and function will be passed through.</span>
<a name="l1155"><span class="linenum">1155</span></a>  <span class="comment">     *</span>
<a name="l1156"><span class="linenum">1156</span></a>  <span class="comment">     * @static</span>
<a name="l1157"><span class="linenum">1157</span></a>  <span class="comment">     * @param string $plugin repository plugin name</span>
<a name="l1158"><span class="linenum">1158</span></a>  <span class="comment">     * @param string $function function name</span>
<a name="l1159"><span class="linenum">1159</span></a>  <span class="comment">     * @return mixed</span>
<a name="l1160"><span class="linenum">1160</span></a>  <span class="comment">     */</span>
<a name="l1161"><span class="linenum">1161</span></a>      public static function <a class="function" onClick="logFunction('static_function')" href="../_functions/static_function.html" onMouseOver="funcPopup(event,'static_function')">static_function</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>) {
<a name="l1162"><span class="linenum">1162</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1163"><span class="linenum">1163</span></a>  
<a name="l1164"><span class="linenum">1164</span></a>  <span class="comment">        //check that the plugin exists</span>
<a name="l1165"><span class="linenum">1165</span></a>          <a class="var it21400" onMouseOver="hilite(21400)" onMouseOut="lolite()" onClick="logVariable('typedirectory')" href="../_variables/typedirectory.html">$typedirectory</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '/repository/'. <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> . '/lib.php';
<a name="l1166"><span class="linenum">1166</span></a>          if (!<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it21400" onMouseOver="hilite(21400)" onMouseOut="lolite()" onClick="logVariable('typedirectory')" href="../_variables/typedirectory.html">$typedirectory</a>)) {
<a name="l1167"><span class="linenum">1167</span></a>  <span class="comment">            //throw new repository_exception('invalidplugin', 'repository');</span>
<a name="l1168"><span class="linenum">1168</span></a>              return false;
<a name="l1169"><span class="linenum">1169</span></a>          }
<a name="l1170"><span class="linenum">1170</span></a>  
<a name="l1171"><span class="linenum">1171</span></a>          <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a> = <a class="phpfunction" onClick="logFunction('func_get_args')" href="../_functions/func_get_args.html" onMouseOver="phpfuncPopup(event,'func_get_args')">func_get_args</a>();
<a name="l1172"><span class="linenum">1172</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>) &lt;= 2) {
<a name="l1173"><span class="linenum">1173</span></a>              <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a> = array();
<a name="l1174"><span class="linenum">1174</span></a>          } else {
<a name="l1175"><span class="linenum">1175</span></a>              <a class="phpfunction" onClick="logFunction('array_shift')" href="../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>);
<a name="l1176"><span class="linenum">1176</span></a>              <a class="phpfunction" onClick="logFunction('array_shift')" href="../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>);
<a name="l1177"><span class="linenum">1177</span></a>          }
<a name="l1178"><span class="linenum">1178</span></a>  
<a name="l1179"><span class="linenum">1179</span></a>          require_once(<a class="var it21400" onMouseOver="hilite(21400)" onMouseOut="lolite()" onClick="logVariable('typedirectory')" href="../_variables/typedirectory.html">$typedirectory</a>);
<a name="l1180"><span class="linenum">1180</span></a>          return <a class="phpfunction" onClick="logFunction('call_user_func_array')" href="../_functions/call_user_func_array.html" onMouseOver="phpfuncPopup(event,'call_user_func_array')">call_user_func_array</a>(array('repository_' . <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>), <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>);
<a name="l1181"><span class="linenum">1181</span></a>      }
<a name="l1182"><span class="linenum">1182</span></a>  
<a name="l1183"><span class="linenum">1183</span></a>      <span class="comment">/**</span>
<a name="l1184"><span class="linenum">1184</span></a>  <span class="comment">     * Scan file, throws exception in case of infected file.</span>
<a name="l1185"><span class="linenum">1185</span></a>  <span class="comment">     *</span>
<a name="l1186"><span class="linenum">1186</span></a>  <span class="comment">     * Please note that the scanning engine must be able to access the file,</span>
<a name="l1187"><span class="linenum">1187</span></a>  <span class="comment">     * permissions of the file are not modified here!</span>
<a name="l1188"><span class="linenum">1188</span></a>  <span class="comment">     *</span>
<a name="l1189"><span class="linenum">1189</span></a>  <span class="comment">     * @static</span>
<a name="l1190"><span class="linenum">1190</span></a>  <span class="comment">     * @deprecated since Moodle 3.0</span>
<a name="l1191"><span class="linenum">1191</span></a>  <span class="comment">     * @param string $thefile</span>
<a name="l1192"><span class="linenum">1192</span></a>  <span class="comment">     * @param string $filename name of the file</span>
<a name="l1193"><span class="linenum">1193</span></a>  <span class="comment">     * @param bool $deleteinfected</span>
<a name="l1194"><span class="linenum">1194</span></a>  <span class="comment">     */</span>
<a name="l1195"><span class="linenum">1195</span></a>      public static function <a class="function" onClick="logFunction('antivir_scan_file')" href="../_functions/antivir_scan_file.html" onMouseOver="funcPopup(event,'antivir_scan_file')">antivir_scan_file</a>(<a class="var it21401" onMouseOver="hilite(21401)" onMouseOut="lolite()" onClick="logVariable('thefile')" href="../_variables/thefile.html">$thefile</a>, <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>, <a class="var it6921" onMouseOver="hilite(6921)" onMouseOut="lolite()" onClick="logVariable('deleteinfected')" href="../_variables/deleteinfected.html">$deleteinfected</a>) {
<a name="l1196"><span class="linenum">1196</span></a>          <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Please upgrade your code to use \core\antivirus\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::scan_file instead', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l1197"><span class="linenum">1197</span></a>          \core\antivirus\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('scan_file')" href="../_functions/scan_file.html" onMouseOver="funcPopup(event,'scan_file')">scan_file</a>(<a class="var it21401" onMouseOver="hilite(21401)" onMouseOut="lolite()" onClick="logVariable('thefile')" href="../_variables/thefile.html">$thefile</a>, <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>, <a class="var it6921" onMouseOver="hilite(6921)" onMouseOut="lolite()" onClick="logVariable('deleteinfected')" href="../_variables/deleteinfected.html">$deleteinfected</a>);
<a name="l1198"><span class="linenum">1198</span></a>      }
<a name="l1199"><span class="linenum">1199</span></a>  
<a name="l1200"><span class="linenum">1200</span></a>      <span class="comment">/**</span>
<a name="l1201"><span class="linenum">1201</span></a>  <span class="comment">     * Repository method to serve the referenced file</span>
<a name="l1202"><span class="linenum">1202</span></a>  <span class="comment">     *</span>
<a name="l1203"><span class="linenum">1203</span></a>  <span class="comment">     * @see send_stored_file</span>
<a name="l1204"><span class="linenum">1204</span></a>  <span class="comment">     *</span>
<a name="l1205"><span class="linenum">1205</span></a>  <span class="comment">     * @param stored_file $storedfile the file that contains the reference</span>
<a name="l1206"><span class="linenum">1206</span></a>  <span class="comment">     * @param int $lifetime Number of seconds before the file should expire from caches (null means $CFG-&gt;filelifetime)</span>
<a name="l1207"><span class="linenum">1207</span></a>  <span class="comment">     * @param int $filter 0 (default)=no filtering, 1=all files, 2=html files only</span>
<a name="l1208"><span class="linenum">1208</span></a>  <span class="comment">     * @param bool $forcedownload If true (default false), forces download of file rather than view in browser/plugin</span>
<a name="l1209"><span class="linenum">1209</span></a>  <span class="comment">     * @param array $options additional options affecting the file serving</span>
<a name="l1210"><span class="linenum">1210</span></a>  <span class="comment">     */</span>
<a name="l1211"><span class="linenum">1211</span></a>      public function <a class="function" onClick="logFunction('send_file')" href="../_functions/send_file.html" onMouseOver="funcPopup(event,'send_file')">send_file</a>(<a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('storedfile')" href="../_variables/storedfile.html">$storedfile</a>, <a class="var it3341" onMouseOver="hilite(3341)" onMouseOut="lolite()" onClick="logVariable('lifetime')" href="../_variables/lifetime.html">$lifetime</a>=null , <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>=0, <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../_variables/forcedownload.html">$forcedownload</a>=false, array <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = null) {
<a name="l1212"><span class="linenum">1212</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('has_moodle_files')" href="../_functions/has_moodle_files.html" onMouseOver="funcPopup(event,'has_moodle_files')">has_moodle_files</a>()) {
<a name="l1213"><span class="linenum">1213</span></a>              <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l1214"><span class="linenum">1214</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = <a class="class" onClick="logClass('file_storage')" href="../_classes/file_storage.html" onMouseOver="classPopup(event,'file_storage')">file_storage</a>::<a class="function" onClick="logFunction('unpack_reference')" href="../_functions/unpack_reference.html" onMouseOver="funcPopup(event,'unpack_reference')">unpack_reference</a>(<a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('storedfile')" href="../_variables/storedfile.html">$storedfile</a>-&gt;<a class="function" onClick="logFunction('get_reference')" href="../_functions/get_reference.html" onMouseOver="funcPopup(event,'get_reference')">get_reference</a>(), true);
<a name="l1215"><span class="linenum">1215</span></a>              <a class="var it21402" onMouseOver="hilite(21402)" onMouseOut="lolite()" onClick="logVariable('srcfile')" href="../_variables/srcfile.html">$srcfile</a> = null;
<a name="l1216"><span class="linenum">1216</span></a>              if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>)) {
<a name="l1217"><span class="linenum">1217</span></a>                  <a class="var it21402" onMouseOver="hilite(21402)" onMouseOut="lolite()" onClick="logVariable('srcfile')" href="../_variables/srcfile.html">$srcfile</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_file')" href="../_functions/get_file.html" onMouseOver="funcPopup(event,'get_file')">get_file</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['contextid'], <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['component'], <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['filearea'],
<a name="l1218"><span class="linenum">1218</span></a>                          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['itemid'], <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['filepath'], <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['filename']);
<a name="l1219"><span class="linenum">1219</span></a>              }
<a name="l1220"><span class="linenum">1220</span></a>              if (empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>)) {
<a name="l1221"><span class="linenum">1221</span></a>                  <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = array();
<a name="l1222"><span class="linenum">1222</span></a>              }
<a name="l1223"><span class="linenum">1223</span></a>              if (!isset(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['filename'])) {
<a name="l1224"><span class="linenum">1224</span></a>                  <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['filename'] = <a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('storedfile')" href="../_variables/storedfile.html">$storedfile</a>-&gt;<a class="function" onClick="logFunction('get_filename')" href="../_functions/get_filename.html" onMouseOver="funcPopup(event,'get_filename')">get_filename</a>();
<a name="l1225"><span class="linenum">1225</span></a>              }
<a name="l1226"><span class="linenum">1226</span></a>              if (!<a class="var it21402" onMouseOver="hilite(21402)" onMouseOut="lolite()" onClick="logVariable('srcfile')" href="../_variables/srcfile.html">$srcfile</a>) {
<a name="l1227"><span class="linenum">1227</span></a>                  <a class="function" onClick="logFunction('send_file_not_found')" href="../_functions/send_file_not_found.html" onMouseOver="funcPopup(event,'send_file_not_found')">send_file_not_found</a>();
<a name="l1228"><span class="linenum">1228</span></a>              } else {
<a name="l1229"><span class="linenum">1229</span></a>                  <a class="function" onClick="logFunction('send_stored_file')" href="../_functions/send_stored_file.html" onMouseOver="funcPopup(event,'send_stored_file')">send_stored_file</a>(<a class="var it21402" onMouseOver="hilite(21402)" onMouseOut="lolite()" onClick="logVariable('srcfile')" href="../_variables/srcfile.html">$srcfile</a>, <a class="var it3341" onMouseOver="hilite(3341)" onMouseOut="lolite()" onClick="logVariable('lifetime')" href="../_variables/lifetime.html">$lifetime</a>, <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>, <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../_variables/forcedownload.html">$forcedownload</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>);
<a name="l1230"><span class="linenum">1230</span></a>              }
<a name="l1231"><span class="linenum">1231</span></a>          } else {
<a name="l1232"><span class="linenum">1232</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>(&quot;Repository plugin must implement <a class="function" onClick="logFunction('send_file')" href="../_functions/send_file.html" onMouseOver="funcPopup(event,'send_file')">send_file</a>() method.&quot;);
<a name="l1233"><span class="linenum">1233</span></a>          }
<a name="l1234"><span class="linenum">1234</span></a>      }
<a name="l1235"><span class="linenum">1235</span></a>  
<a name="l1236"><span class="linenum">1236</span></a>      <span class="comment">/**</span>
<a name="l1237"><span class="linenum">1237</span></a>  <span class="comment">     * Return human readable reference information</span>
<a name="l1238"><span class="linenum">1238</span></a>  <span class="comment">     *</span>
<a name="l1239"><span class="linenum">1239</span></a>  <span class="comment">     * @param string $reference value of DB field files_reference.reference</span>
<a name="l1240"><span class="linenum">1240</span></a>  <span class="comment">     * @param int $filestatus status of the file, 0 - ok, 666 - source missing</span>
<a name="l1241"><span class="linenum">1241</span></a>  <span class="comment">     * @return string</span>
<a name="l1242"><span class="linenum">1242</span></a>  <span class="comment">     */</span>
<a name="l1243"><span class="linenum">1243</span></a>      public function <a class="function" onClick="logFunction('get_reference_details')" href="../_functions/get_reference_details.html" onMouseOver="funcPopup(event,'get_reference_details')">get_reference_details</a>(<a class="var it642" onMouseOver="hilite(642)" onMouseOut="lolite()" onClick="logVariable('reference')" href="../_variables/reference.html">$reference</a>, <a class="var it5440" onMouseOver="hilite(5440)" onMouseOut="lolite()" onClick="logVariable('filestatus')" href="../_variables/filestatus.html">$filestatus</a> = 0) {
<a name="l1244"><span class="linenum">1244</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('has_moodle_files')" href="../_functions/has_moodle_files.html" onMouseOver="funcPopup(event,'has_moodle_files')">has_moodle_files</a>()) {
<a name="l1245"><span class="linenum">1245</span></a>              <a class="var it806" onMouseOver="hilite(806)" onMouseOut="lolite()" onClick="logVariable('fileinfo')" href="../_variables/fileinfo.html">$fileinfo</a> = null;
<a name="l1246"><span class="linenum">1246</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = <a class="class" onClick="logClass('file_storage')" href="../_classes/file_storage.html" onMouseOver="classPopup(event,'file_storage')">file_storage</a>::<a class="function" onClick="logFunction('unpack_reference')" href="../_functions/unpack_reference.html" onMouseOver="funcPopup(event,'unpack_reference')">unpack_reference</a>(<a class="var it642" onMouseOver="hilite(642)" onMouseOut="lolite()" onClick="logVariable('reference')" href="../_variables/reference.html">$reference</a>, true);
<a name="l1247"><span class="linenum">1247</span></a>              if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>)) {
<a name="l1248"><span class="linenum">1248</span></a>                  <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = context::<a class="function" onClick="logFunction('instance_by_id')" href="../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['contextid'], <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>);
<a name="l1249"><span class="linenum">1249</span></a>                  if (<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) {
<a name="l1250"><span class="linenum">1250</span></a>                      <a class="var it1462" onMouseOver="hilite(1462)" onMouseOut="lolite()" onClick="logVariable('browser')" href="../_variables/browser.html">$browser</a> = <a class="function" onClick="logFunction('get_file_browser')" href="../_functions/get_file_browser.html" onMouseOver="funcPopup(event,'get_file_browser')">get_file_browser</a>();
<a name="l1251"><span class="linenum">1251</span></a>                      <a class="var it806" onMouseOver="hilite(806)" onMouseOut="lolite()" onClick="logVariable('fileinfo')" href="../_variables/fileinfo.html">$fileinfo</a> = <a class="var it1462" onMouseOver="hilite(1462)" onMouseOut="lolite()" onClick="logVariable('browser')" href="../_variables/browser.html">$browser</a>-&gt;<a class="function" onClick="logFunction('get_file_info')" href="../_functions/get_file_info.html" onMouseOver="funcPopup(event,'get_file_info')">get_file_info</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['component'], <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['filearea'], <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['itemid'], <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['filepath'], <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['filename']);
<a name="l1252"><span class="linenum">1252</span></a>                  }
<a name="l1253"><span class="linenum">1253</span></a>              }
<a name="l1254"><span class="linenum">1254</span></a>              if (empty(<a class="var it806" onMouseOver="hilite(806)" onMouseOut="lolite()" onClick="logVariable('fileinfo')" href="../_variables/fileinfo.html">$fileinfo</a>)) {
<a name="l1255"><span class="linenum">1255</span></a>                  if (<a class="var it5440" onMouseOver="hilite(5440)" onMouseOut="lolite()" onClick="logVariable('filestatus')" href="../_variables/filestatus.html">$filestatus</a> == 666) {
<a name="l1256"><span class="linenum">1256</span></a>                      if (<a class="function" onClick="logFunction('is_siteadmin')" href="../_functions/is_siteadmin.html" onMouseOver="funcPopup(event,'is_siteadmin')">is_siteadmin</a>() || (<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:managefiles', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>))) {
<a name="l1257"><span class="linenum">1257</span></a>                          return <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('lostsource', 'repository',
<a name="l1258"><span class="linenum">1258</span></a>                                  <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['contextid']. '/'. <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['component']. '/'. <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['filearea']. '/'. <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['itemid']. <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['filepath']. <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['filename']);
<a name="l1259"><span class="linenum">1259</span></a>                      } else {
<a name="l1260"><span class="linenum">1260</span></a>                          return <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('lostsource', 'repository', '');
<a name="l1261"><span class="linenum">1261</span></a>                      }
<a name="l1262"><span class="linenum">1262</span></a>                  }
<a name="l1263"><span class="linenum">1263</span></a>                  return <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('undisclosedsource', 'repository');
<a name="l1264"><span class="linenum">1264</span></a>              } else {
<a name="l1265"><span class="linenum">1265</span></a>                  return <a class="var it806" onMouseOver="hilite(806)" onMouseOut="lolite()" onClick="logVariable('fileinfo')" href="../_variables/fileinfo.html">$fileinfo</a>-&gt;<a class="function" onClick="logFunction('get_readable_fullname')" href="../_functions/get_readable_fullname.html" onMouseOver="funcPopup(event,'get_readable_fullname')">get_readable_fullname</a>();
<a name="l1266"><span class="linenum">1266</span></a>              }
<a name="l1267"><span class="linenum">1267</span></a>          }
<a name="l1268"><span class="linenum">1268</span></a>          return '';
<a name="l1269"><span class="linenum">1269</span></a>      }
<a name="l1270"><span class="linenum">1270</span></a>  
<a name="l1271"><span class="linenum">1271</span></a>      <span class="comment">/**</span>
<a name="l1272"><span class="linenum">1272</span></a>  <span class="comment">     * Cache file from external repository by reference</span>
<a name="l1273"><span class="linenum">1273</span></a>  <span class="comment">     * {@link repository::get_file_reference()}</span>
<a name="l1274"><span class="linenum">1274</span></a>  <span class="comment">     * {@link repository::get_file()}</span>
<a name="l1275"><span class="linenum">1275</span></a>  <span class="comment">     * Invoked at MOODLE/repository/repository_ajax.php</span>
<a name="l1276"><span class="linenum">1276</span></a>  <span class="comment">     *</span>
<a name="l1277"><span class="linenum">1277</span></a>  <span class="comment">     * @param string $reference this reference is generated by</span>
<a name="l1278"><span class="linenum">1278</span></a>  <span class="comment">     *                          repository::get_file_reference()</span>
<a name="l1279"><span class="linenum">1279</span></a>  <span class="comment">     * @param stored_file $storedfile created file reference</span>
<a name="l1280"><span class="linenum">1280</span></a>  <span class="comment">     */</span>
<a name="l1281"><span class="linenum">1281</span></a>      public function <a class="function" onClick="logFunction('cache_file_by_reference')" href="../_functions/cache_file_by_reference.html" onMouseOver="funcPopup(event,'cache_file_by_reference')">cache_file_by_reference</a>(<a class="var it642" onMouseOver="hilite(642)" onMouseOut="lolite()" onClick="logVariable('reference')" href="../_variables/reference.html">$reference</a>, <a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('storedfile')" href="../_variables/storedfile.html">$storedfile</a>) {
<a name="l1282"><span class="linenum">1282</span></a>      }
<a name="l1283"><span class="linenum">1283</span></a>  
<a name="l1284"><span class="linenum">1284</span></a>      <span class="comment">/**</span>
<a name="l1285"><span class="linenum">1285</span></a>  <span class="comment">     * Return the source information</span>
<a name="l1286"><span class="linenum">1286</span></a>  <span class="comment">     *</span>
<a name="l1287"><span class="linenum">1287</span></a>  <span class="comment">     * The result of the function is stored in files.source field. It may be analysed</span>
<a name="l1288"><span class="linenum">1288</span></a>  <span class="comment">     * when the source file is lost or repository may use it to display human-readable</span>
<a name="l1289"><span class="linenum">1289</span></a>  <span class="comment">     * location of reference original.</span>
<a name="l1290"><span class="linenum">1290</span></a>  <span class="comment">     *</span>
<a name="l1291"><span class="linenum">1291</span></a>  <span class="comment">     * This method is called when file is picked for the first time only. When file</span>
<a name="l1292"><span class="linenum">1292</span></a>  <span class="comment">     * (either copy or a reference) is already in moodle and it is being picked</span>
<a name="l1293"><span class="linenum">1293</span></a>  <span class="comment">     * again to another file area (also as a copy or as a reference), the value of</span>
<a name="l1294"><span class="linenum">1294</span></a>  <span class="comment">     * files.source is copied.</span>
<a name="l1295"><span class="linenum">1295</span></a>  <span class="comment">     *</span>
<a name="l1296"><span class="linenum">1296</span></a>  <span class="comment">     * @param string $source source of the file, returned by repository as 'source' and received back from user (not cleaned)</span>
<a name="l1297"><span class="linenum">1297</span></a>  <span class="comment">     * @return string|null</span>
<a name="l1298"><span class="linenum">1298</span></a>  <span class="comment">     */</span>
<a name="l1299"><span class="linenum">1299</span></a>      public function <a class="function" onClick="logFunction('get_file_source_info')" href="../_functions/get_file_source_info.html" onMouseOver="funcPopup(event,'get_file_source_info')">get_file_source_info</a>(<a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a>) {
<a name="l1300"><span class="linenum">1300</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('has_moodle_files')" href="../_functions/has_moodle_files.html" onMouseOver="funcPopup(event,'has_moodle_files')">has_moodle_files</a>()) {
<a name="l1301"><span class="linenum">1301</span></a>              <a class="var it642" onMouseOver="hilite(642)" onMouseOut="lolite()" onClick="logVariable('reference')" href="../_variables/reference.html">$reference</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_file_reference')" href="../_functions/get_file_reference.html" onMouseOver="funcPopup(event,'get_file_reference')">get_file_reference</a>(<a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a>);
<a name="l1302"><span class="linenum">1302</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_reference_details')" href="../_functions/get_reference_details.html" onMouseOver="funcPopup(event,'get_reference_details')">get_reference_details</a>(<a class="var it642" onMouseOver="hilite(642)" onMouseOut="lolite()" onClick="logVariable('reference')" href="../_variables/reference.html">$reference</a>, 0);
<a name="l1303"><span class="linenum">1303</span></a>          }
<a name="l1304"><span class="linenum">1304</span></a>          return <a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a>;
<a name="l1305"><span class="linenum">1305</span></a>      }
<a name="l1306"><span class="linenum">1306</span></a>  
<a name="l1307"><span class="linenum">1307</span></a>      <span class="comment">/**</span>
<a name="l1308"><span class="linenum">1308</span></a>  <span class="comment">     * Move file from download folder to file pool using FILE API</span>
<a name="l1309"><span class="linenum">1309</span></a>  <span class="comment">     *</span>
<a name="l1310"><span class="linenum">1310</span></a>  <span class="comment">     * @todo MDL-28637</span>
<a name="l1311"><span class="linenum">1311</span></a>  <span class="comment">     * @static</span>
<a name="l1312"><span class="linenum">1312</span></a>  <span class="comment">     * @param string $thefile file path in download folder</span>
<a name="l1313"><span class="linenum">1313</span></a>  <span class="comment">     * @param stdClass $record</span>
<a name="l1314"><span class="linenum">1314</span></a>  <span class="comment">     * @return array containing the following keys:</span>
<a name="l1315"><span class="linenum">1315</span></a>  <span class="comment">     *           icon</span>
<a name="l1316"><span class="linenum">1316</span></a>  <span class="comment">     *           file</span>
<a name="l1317"><span class="linenum">1317</span></a>  <span class="comment">     *           id</span>
<a name="l1318"><span class="linenum">1318</span></a>  <span class="comment">     *           url</span>
<a name="l1319"><span class="linenum">1319</span></a>  <span class="comment">     */</span>
<a name="l1320"><span class="linenum">1320</span></a>      public static function <a class="function" onClick="logFunction('move_to_filepool')" href="../_functions/move_to_filepool.html" onMouseOver="funcPopup(event,'move_to_filepool')">move_to_filepool</a>(<a class="var it21401" onMouseOver="hilite(21401)" onMouseOut="lolite()" onClick="logVariable('thefile')" href="../_variables/thefile.html">$thefile</a>, <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>) {
<a name="l1321"><span class="linenum">1321</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1322"><span class="linenum">1322</span></a>  
<a name="l1323"><span class="linenum">1323</span></a>  <span class="comment">        // scan for viruses if possible, throws exception if problem found</span>
<a name="l1324"><span class="linenum">1324</span></a>  <span class="comment">        // TODO: MDL-28637 this repository_no_delete is a bloody hack!</span>
<a name="l1325"><span class="linenum">1325</span></a>          \core\antivirus\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('scan_file')" href="../_functions/scan_file.html" onMouseOver="funcPopup(event,'scan_file')">scan_file</a>(<a class="var it21401" onMouseOver="hilite(21401)" onMouseOut="lolite()" onClick="logVariable('thefile')" href="../_variables/thefile.html">$thefile</a>, <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('filename')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/filename.html">filename</a>, empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('repository_no_delete')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/repository_no_delete.html">repository_no_delete</a>));
<a name="l1326"><span class="linenum">1326</span></a>  
<a name="l1327"><span class="linenum">1327</span></a>          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l1328"><span class="linenum">1328</span></a>  <span class="comment">        // If file name being used.</span>
<a name="l1329"><span class="linenum">1329</span></a>          if (<a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('draftfile_exists')" href="../_functions/draftfile_exists.html" onMouseOver="funcPopup(event,'draftfile_exists')">draftfile_exists</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('itemid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/itemid.html">itemid</a>, <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('filepath')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/filepath.html">filepath</a>, <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('filename')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/filename.html">filename</a>)) {
<a name="l1330"><span class="linenum">1330</span></a>              <a class="var it637" onMouseOver="hilite(637)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../_variables/draftitemid.html">$draftitemid</a> = <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('itemid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/itemid.html">itemid</a>;
<a name="l1331"><span class="linenum">1331</span></a>              <a class="var it21391" onMouseOver="hilite(21391)" onMouseOut="lolite()" onClick="logVariable('new_filename')" href="../_variables/new_filename.html">$new_filename</a> = <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('get_unused_filename')" href="../_functions/get_unused_filename.html" onMouseOver="funcPopup(event,'get_unused_filename')">get_unused_filename</a>(<a class="var it637" onMouseOver="hilite(637)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../_variables/draftitemid.html">$draftitemid</a>, <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('filepath')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/filepath.html">filepath</a>, <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('filename')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/filename.html">filename</a>);
<a name="l1332"><span class="linenum">1332</span></a>              <a class="var it21404" onMouseOver="hilite(21404)" onMouseOut="lolite()" onClick="logVariable('old_filename')" href="../_variables/old_filename.html">$old_filename</a> = <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('filename')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/filename.html">filename</a>;
<a name="l1333"><span class="linenum">1333</span></a>  <span class="comment">            // Create a tmp file.</span>
<a name="l1334"><span class="linenum">1334</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('filename')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/filename.html">filename</a> = <a class="var it21391" onMouseOver="hilite(21391)" onMouseOut="lolite()" onClick="logVariable('new_filename')" href="../_variables/new_filename.html">$new_filename</a>;
<a name="l1335"><span class="linenum">1335</span></a>              <a class="var it2113" onMouseOver="hilite(2113)" onMouseOut="lolite()" onClick="logVariable('newfile')" href="../_variables/newfile.html">$newfile</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('create_file_from_pathname')" href="../_functions/create_file_from_pathname.html" onMouseOver="funcPopup(event,'create_file_from_pathname')">create_file_from_pathname</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>, <a class="var it21401" onMouseOver="hilite(21401)" onMouseOut="lolite()" onClick="logVariable('thefile')" href="../_variables/thefile.html">$thefile</a>);
<a name="l1336"><span class="linenum">1336</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = array();
<a name="l1337"><span class="linenum">1337</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>['event'] = 'fileexists';
<a name="l1338"><span class="linenum">1338</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>['newfile'] = new stdClass;
<a name="l1339"><span class="linenum">1339</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>['newfile']-&gt;filepath = <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('filepath')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/filepath.html">filepath</a>;
<a name="l1340"><span class="linenum">1340</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>['newfile']-&gt;filename = <a class="var it21391" onMouseOver="hilite(21391)" onMouseOut="lolite()" onClick="logVariable('new_filename')" href="../_variables/new_filename.html">$new_filename</a>;
<a name="l1341"><span class="linenum">1341</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>['newfile']-&gt;url = <a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>::<a class="function" onClick="logFunction('make_draftfile_url')" href="../_functions/make_draftfile_url.html" onMouseOver="funcPopup(event,'make_draftfile_url')">make_draftfile_url</a>(<a class="var it637" onMouseOver="hilite(637)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../_variables/draftitemid.html">$draftitemid</a>, <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('filepath')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/filepath.html">filepath</a>, <a class="var it21391" onMouseOver="hilite(21391)" onMouseOut="lolite()" onClick="logVariable('new_filename')" href="../_variables/new_filename.html">$new_filename</a>)-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>();
<a name="l1342"><span class="linenum">1342</span></a>  
<a name="l1343"><span class="linenum">1343</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>['existingfile'] = new stdClass;
<a name="l1344"><span class="linenum">1344</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>['existingfile']-&gt;filepath = <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('filepath')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/filepath.html">filepath</a>;
<a name="l1345"><span class="linenum">1345</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>['existingfile']-&gt;filename = <a class="var it21404" onMouseOver="hilite(21404)" onMouseOut="lolite()" onClick="logVariable('old_filename')" href="../_variables/old_filename.html">$old_filename</a>;
<a name="l1346"><span class="linenum">1346</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>['existingfile']-&gt;url      = <a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>::<a class="function" onClick="logFunction('make_draftfile_url')" href="../_functions/make_draftfile_url.html" onMouseOver="funcPopup(event,'make_draftfile_url')">make_draftfile_url</a>(<a class="var it637" onMouseOver="hilite(637)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../_variables/draftitemid.html">$draftitemid</a>, <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('filepath')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/filepath.html">filepath</a>, <a class="var it21404" onMouseOver="hilite(21404)" onMouseOut="lolite()" onClick="logVariable('old_filename')" href="../_variables/old_filename.html">$old_filename</a>)-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>();
<a name="l1347"><span class="linenum">1347</span></a>              return <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>;
<a name="l1348"><span class="linenum">1348</span></a>          }
<a name="l1349"><span class="linenum">1349</span></a>          if (<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('create_file_from_pathname')" href="../_functions/create_file_from_pathname.html" onMouseOver="funcPopup(event,'create_file_from_pathname')">create_file_from_pathname</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>, <a class="var it21401" onMouseOver="hilite(21401)" onMouseOut="lolite()" onClick="logVariable('thefile')" href="../_variables/thefile.html">$thefile</a>)) {
<a name="l1350"><span class="linenum">1350</span></a>              if (empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('repository_no_delete')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/repository_no_delete.html">repository_no_delete</a>)) {
<a name="l1351"><span class="linenum">1351</span></a>                  <a class="var it420" onMouseOver="hilite(420)" onMouseOut="lolite()" onClick="logVariable('delete')" href="../_variables/delete.html">$delete</a> = <a class="phpfunction" onClick="logFunction('unlink')" href="../_functions/unlink.html" onMouseOver="phpfuncPopup(event,'unlink')">unlink</a>(<a class="var it21401" onMouseOver="hilite(21401)" onMouseOut="lolite()" onClick="logVariable('thefile')" href="../_variables/thefile.html">$thefile</a>);
<a name="l1352"><span class="linenum">1352</span></a>                  unset(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('repository_no_delete')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/repository_no_delete.html">repository_no_delete</a>);
<a name="l1353"><span class="linenum">1353</span></a>              }
<a name="l1354"><span class="linenum">1354</span></a>              return array(
<a name="l1355"><span class="linenum">1355</span></a>                  'url'=&gt;<a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>::<a class="function" onClick="logFunction('make_draftfile_url')" href="../_functions/make_draftfile_url.html" onMouseOver="funcPopup(event,'make_draftfile_url')">make_draftfile_url</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_itemid')" href="../_functions/get_itemid.html" onMouseOver="funcPopup(event,'get_itemid')">get_itemid</a>(), <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_filepath')" href="../_functions/get_filepath.html" onMouseOver="funcPopup(event,'get_filepath')">get_filepath</a>(), <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_filename')" href="../_functions/get_filename.html" onMouseOver="funcPopup(event,'get_filename')">get_filename</a>())-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(),
<a name="l1356"><span class="linenum">1356</span></a>                  'id'=&gt;<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_itemid')" href="../_functions/get_itemid.html" onMouseOver="funcPopup(event,'get_itemid')">get_itemid</a>(),
<a name="l1357"><span class="linenum">1357</span></a>                  'file'=&gt;<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_filename')" href="../_functions/get_filename.html" onMouseOver="funcPopup(event,'get_filename')">get_filename</a>(),
<a name="l1358"><span class="linenum">1358</span></a>                  'icon' =&gt; <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_url')" href="../_functions/pix_url.html" onMouseOver="funcPopup(event,'pix_url')">pix_url</a>(<a class="function" onClick="logFunction('file_extension_icon')" href="../_functions/file_extension_icon.html" onMouseOver="funcPopup(event,'file_extension_icon')">file_extension_icon</a>(<a class="var it21401" onMouseOver="hilite(21401)" onMouseOut="lolite()" onClick="logVariable('thefile')" href="../_variables/thefile.html">$thefile</a>, 32))-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(),
<a name="l1359"><span class="linenum">1359</span></a>              );
<a name="l1360"><span class="linenum">1360</span></a>          } else {
<a name="l1361"><span class="linenum">1361</span></a>              return null;
<a name="l1362"><span class="linenum">1362</span></a>          }
<a name="l1363"><span class="linenum">1363</span></a>      }
<a name="l1364"><span class="linenum">1364</span></a>  
<a name="l1365"><span class="linenum">1365</span></a>      <span class="comment">/**</span>
<a name="l1366"><span class="linenum">1366</span></a>  <span class="comment">     * Builds a tree of files This function is then called recursively.</span>
<a name="l1367"><span class="linenum">1367</span></a>  <span class="comment">     *</span>
<a name="l1368"><span class="linenum">1368</span></a>  <span class="comment">     * @static</span>
<a name="l1369"><span class="linenum">1369</span></a>  <span class="comment">     * @todo take $search into account, and respect a threshold for dynamic loading</span>
<a name="l1370"><span class="linenum">1370</span></a>  <span class="comment">     * @param file_info $fileinfo an object returned by file_browser::get_file_info()</span>
<a name="l1371"><span class="linenum">1371</span></a>  <span class="comment">     * @param string $search searched string</span>
<a name="l1372"><span class="linenum">1372</span></a>  <span class="comment">     * @param bool $dynamicmode no recursive call is done when in dynamic mode</span>
<a name="l1373"><span class="linenum">1373</span></a>  <span class="comment">     * @param array $list the array containing the files under the passed $fileinfo</span>
<a name="l1374"><span class="linenum">1374</span></a>  <span class="comment">     * @return int the number of files found</span>
<a name="l1375"><span class="linenum">1375</span></a>  <span class="comment">     */</span>
<a name="l1376"><span class="linenum">1376</span></a>      public static function <a class="function" onClick="logFunction('build_tree')" href="../_functions/build_tree.html" onMouseOver="funcPopup(event,'build_tree')">build_tree</a>(<a class="var it806" onMouseOver="hilite(806)" onMouseOut="lolite()" onClick="logVariable('fileinfo')" href="../_variables/fileinfo.html">$fileinfo</a>, <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>, <a class="var it21405" onMouseOver="hilite(21405)" onMouseOut="lolite()" onClick="logVariable('dynamicmode')" href="../_variables/dynamicmode.html">$dynamicmode</a>, &amp;<a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../_variables/list.html">$list</a>) {
<a name="l1377"><span class="linenum">1377</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1378"><span class="linenum">1378</span></a>  
<a name="l1379"><span class="linenum">1379</span></a>          <a class="var it2104" onMouseOver="hilite(2104)" onMouseOut="lolite()" onClick="logVariable('filecount')" href="../_variables/filecount.html">$filecount</a> = 0;
<a name="l1380"><span class="linenum">1380</span></a>          <a class="var it922" onMouseOver="hilite(922)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a> = <a class="var it806" onMouseOver="hilite(806)" onMouseOut="lolite()" onClick="logVariable('fileinfo')" href="../_variables/fileinfo.html">$fileinfo</a>-&gt;<a class="function" onClick="logFunction('get_children')" href="../_functions/get_children.html" onMouseOver="funcPopup(event,'get_children')">get_children</a>();
<a name="l1381"><span class="linenum">1381</span></a>  
<a name="l1382"><span class="linenum">1382</span></a>          foreach (<a class="var it922" onMouseOver="hilite(922)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a> as <a class="var it3285" onMouseOver="hilite(3285)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>) {
<a name="l1383"><span class="linenum">1383</span></a>              <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a> = <a class="var it3285" onMouseOver="hilite(3285)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a class="function" onClick="logFunction('get_visible_name')" href="../_functions/get_visible_name.html" onMouseOver="funcPopup(event,'get_visible_name')">get_visible_name</a>();
<a name="l1384"><span class="linenum">1384</span></a>              <a class="var it809" onMouseOver="hilite(809)" onMouseOut="lolite()" onClick="logVariable('filesize')" href="../_variables/filesize.html">$filesize</a> = <a class="var it3285" onMouseOver="hilite(3285)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a class="function" onClick="logFunction('get_filesize')" href="../_functions/get_filesize.html" onMouseOver="funcPopup(event,'get_filesize')">get_filesize</a>();
<a name="l1385"><span class="linenum">1385</span></a>              <a class="var it809" onMouseOver="hilite(809)" onMouseOut="lolite()" onClick="logVariable('filesize')" href="../_variables/filesize.html">$filesize</a> = <a class="var it809" onMouseOver="hilite(809)" onMouseOut="lolite()" onClick="logVariable('filesize')" href="../_variables/filesize.html">$filesize</a> ? <a class="function" onClick="logFunction('display_size')" href="../_functions/display_size.html" onMouseOver="funcPopup(event,'display_size')">display_size</a>(<a class="var it809" onMouseOver="hilite(809)" onMouseOut="lolite()" onClick="logVariable('filesize')" href="../_variables/filesize.html">$filesize</a>) : '';
<a name="l1386"><span class="linenum">1386</span></a>              <a class="var it21406" onMouseOver="hilite(21406)" onMouseOut="lolite()" onClick="logVariable('filedate')" href="../_variables/filedate.html">$filedate</a> = <a class="var it3285" onMouseOver="hilite(3285)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a class="function" onClick="logFunction('get_timemodified')" href="../_functions/get_timemodified.html" onMouseOver="funcPopup(event,'get_timemodified')">get_timemodified</a>();
<a name="l1387"><span class="linenum">1387</span></a>              <a class="var it21406" onMouseOver="hilite(21406)" onMouseOut="lolite()" onClick="logVariable('filedate')" href="../_variables/filedate.html">$filedate</a> = <a class="var it21406" onMouseOver="hilite(21406)" onMouseOut="lolite()" onClick="logVariable('filedate')" href="../_variables/filedate.html">$filedate</a> ? <a class="function" onClick="logFunction('userdate')" href="../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it21406" onMouseOver="hilite(21406)" onMouseOut="lolite()" onClick="logVariable('filedate')" href="../_variables/filedate.html">$filedate</a>) : '';
<a name="l1388"><span class="linenum">1388</span></a>              <a class="var it238" onMouseOver="hilite(238)" onMouseOut="lolite()" onClick="logVariable('filetype')" href="../_variables/filetype.html">$filetype</a> = <a class="var it3285" onMouseOver="hilite(3285)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a class="function" onClick="logFunction('get_mimetype')" href="../_functions/get_mimetype.html" onMouseOver="funcPopup(event,'get_mimetype')">get_mimetype</a>();
<a name="l1389"><span class="linenum">1389</span></a>  
<a name="l1390"><span class="linenum">1390</span></a>              if (<a class="var it3285" onMouseOver="hilite(3285)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a class="function" onClick="logFunction('is_directory')" href="../_functions/is_directory.html" onMouseOver="funcPopup(event,'is_directory')">is_directory</a>()) {
<a name="l1391"><span class="linenum">1391</span></a>                  <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a> = array();
<a name="l1392"><span class="linenum">1392</span></a>                  <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('level')" href="../_variables/level.html">$level</a> = <a class="var it3285" onMouseOver="hilite(3285)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a class="function" onClick="logFunction('get_parent')" href="../_functions/get_parent.html" onMouseOver="funcPopup(event,'get_parent')">get_parent</a>();
<a name="l1393"><span class="linenum">1393</span></a>                  while (<a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('level')" href="../_variables/level.html">$level</a>) {
<a name="l1394"><span class="linenum">1394</span></a>                      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('level')" href="../_variables/level.html">$level</a>-&gt;<a class="function" onClick="logFunction('get_params')" href="../_functions/get_params.html" onMouseOver="funcPopup(event,'get_params')">get_params</a>();
<a name="l1395"><span class="linenum">1395</span></a>                      <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>[] = array(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['filepath'], <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('level')" href="../_variables/level.html">$level</a>-&gt;<a class="function" onClick="logFunction('get_visible_name')" href="../_functions/get_visible_name.html" onMouseOver="funcPopup(event,'get_visible_name')">get_visible_name</a>());
<a name="l1396"><span class="linenum">1396</span></a>                      <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('level')" href="../_variables/level.html">$level</a> = <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('level')" href="../_variables/level.html">$level</a>-&gt;<a class="function" onClick="logFunction('get_parent')" href="../_functions/get_parent.html" onMouseOver="funcPopup(event,'get_parent')">get_parent</a>();
<a name="l1397"><span class="linenum">1397</span></a>                  }
<a name="l1398"><span class="linenum">1398</span></a>  
<a name="l1399"><span class="linenum">1399</span></a>                  <a class="var it117" onMouseOver="hilite(117)" onMouseOut="lolite()" onClick="logVariable('tmp')" href="../_variables/tmp.html">$tmp</a> = array(
<a name="l1400"><span class="linenum">1400</span></a>                      'title' =&gt; <a class="var it3285" onMouseOver="hilite(3285)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a class="function" onClick="logFunction('get_visible_name')" href="../_functions/get_visible_name.html" onMouseOver="funcPopup(event,'get_visible_name')">get_visible_name</a>(),
<a name="l1401"><span class="linenum">1401</span></a>                      'size' =&gt; 0,
<a name="l1402"><span class="linenum">1402</span></a>                      'date' =&gt; <a class="var it21406" onMouseOver="hilite(21406)" onMouseOut="lolite()" onClick="logVariable('filedate')" href="../_variables/filedate.html">$filedate</a>,
<a name="l1403"><span class="linenum">1403</span></a>                      'path' =&gt; <a class="phpfunction" onClick="logFunction('array_reverse')" href="../_functions/array_reverse.html" onMouseOver="phpfuncPopup(event,'array_reverse')">array_reverse</a>(<a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>),
<a name="l1404"><span class="linenum">1404</span></a>                      'thumbnail' =&gt; <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_url')" href="../_functions/pix_url.html" onMouseOver="funcPopup(event,'pix_url')">pix_url</a>(<a class="function" onClick="logFunction('file_folder_icon')" href="../_functions/file_folder_icon.html" onMouseOver="funcPopup(event,'file_folder_icon')">file_folder_icon</a>(90))-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(false)
<a name="l1405"><span class="linenum">1405</span></a>                  );
<a name="l1406"><span class="linenum">1406</span></a>  
<a name="l1407"><span class="linenum">1407</span></a>  <span class="comment">                //if ($dynamicmode &amp;&amp; $child-&gt;is_writable()) {</span>
<a name="l1408"><span class="linenum">1408</span></a>  <span class="comment">                //    $tmp['children'] = array();</span>
<a name="l1409"><span class="linenum">1409</span></a>  <span class="comment">                //} else {</span>
<a name="l1410"><span class="linenum">1410</span></a>  <span class="comment">                    // if folder name matches search, we send back all files contained.</span>
<a name="l1411"><span class="linenum">1411</span></a>                  <a class="var it5638" onMouseOver="hilite(5638)" onMouseOut="lolite()" onClick="logVariable('_search')" href="../_variables/_search.html">$_search</a> = <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>;
<a name="l1412"><span class="linenum">1412</span></a>                  if (<a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a> &amp;&amp; <a class="phpfunction" onClick="logFunction('stristr')" href="../_functions/stristr.html" onMouseOver="phpfuncPopup(event,'stristr')">stristr</a>(<a class="var it117" onMouseOver="hilite(117)" onMouseOut="lolite()" onClick="logVariable('tmp')" href="../_variables/tmp.html">$tmp</a>['title'], <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>) !== false) {
<a name="l1413"><span class="linenum">1413</span></a>                      <a class="var it5638" onMouseOver="hilite(5638)" onMouseOut="lolite()" onClick="logVariable('_search')" href="../_variables/_search.html">$_search</a> = false;
<a name="l1414"><span class="linenum">1414</span></a>                  }
<a name="l1415"><span class="linenum">1415</span></a>                  <a class="var it117" onMouseOver="hilite(117)" onMouseOut="lolite()" onClick="logVariable('tmp')" href="../_variables/tmp.html">$tmp</a>['children'] = array();
<a name="l1416"><span class="linenum">1416</span></a>                  <a class="var it21407" onMouseOver="hilite(21407)" onMouseOut="lolite()" onClick="logVariable('_filecount')" href="../_variables/_filecount.html">$_filecount</a> = <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('build_tree')" href="../_functions/build_tree.html" onMouseOver="funcPopup(event,'build_tree')">build_tree</a>(<a class="var it3285" onMouseOver="hilite(3285)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>, <a class="var it5638" onMouseOver="hilite(5638)" onMouseOut="lolite()" onClick="logVariable('_search')" href="../_variables/_search.html">$_search</a>, <a class="var it21405" onMouseOver="hilite(21405)" onMouseOut="lolite()" onClick="logVariable('dynamicmode')" href="../_variables/dynamicmode.html">$dynamicmode</a>, <a class="var it117" onMouseOver="hilite(117)" onMouseOut="lolite()" onClick="logVariable('tmp')" href="../_variables/tmp.html">$tmp</a>['children']);
<a name="l1417"><span class="linenum">1417</span></a>                  if (<a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a> &amp;&amp; <a class="var it21407" onMouseOver="hilite(21407)" onMouseOut="lolite()" onClick="logVariable('_filecount')" href="../_variables/_filecount.html">$_filecount</a>) {
<a name="l1418"><span class="linenum">1418</span></a>                      <a class="var it117" onMouseOver="hilite(117)" onMouseOut="lolite()" onClick="logVariable('tmp')" href="../_variables/tmp.html">$tmp</a>['expanded'] = 1;
<a name="l1419"><span class="linenum">1419</span></a>                  }
<a name="l1420"><span class="linenum">1420</span></a>  
<a name="l1421"><span class="linenum">1421</span></a>  <span class="comment">                //}</span>
<a name="l1422"><span class="linenum">1422</span></a>  
<a name="l1423"><span class="linenum">1423</span></a>                  if (!<a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a> || <a class="var it21407" onMouseOver="hilite(21407)" onMouseOut="lolite()" onClick="logVariable('_filecount')" href="../_variables/_filecount.html">$_filecount</a> || (<a class="phpfunction" onClick="logFunction('stristr')" href="../_functions/stristr.html" onMouseOver="phpfuncPopup(event,'stristr')">stristr</a>(<a class="var it117" onMouseOver="hilite(117)" onMouseOut="lolite()" onClick="logVariable('tmp')" href="../_variables/tmp.html">$tmp</a>['title'], <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>) !== false)) {
<a name="l1424"><span class="linenum">1424</span></a>                      <a class="var it2104" onMouseOver="hilite(2104)" onMouseOut="lolite()" onClick="logVariable('filecount')" href="../_variables/filecount.html">$filecount</a> += <a class="var it21407" onMouseOver="hilite(21407)" onMouseOut="lolite()" onClick="logVariable('_filecount')" href="../_variables/_filecount.html">$_filecount</a>;
<a name="l1425"><span class="linenum">1425</span></a>                      <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../_variables/list.html">$list</a>[] = <a class="var it117" onMouseOver="hilite(117)" onMouseOut="lolite()" onClick="logVariable('tmp')" href="../_variables/tmp.html">$tmp</a>;
<a name="l1426"><span class="linenum">1426</span></a>                  }
<a name="l1427"><span class="linenum">1427</span></a>  
<a name="l1428"><span class="linenum">1428</span></a>              } else { // not a directory
<a name="l1429"><span class="linenum">1429</span></a>  <span class="comment">                // skip the file, if we're in search mode and it's not a match</span>
<a name="l1430"><span class="linenum">1430</span></a>                  if (<a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a> &amp;&amp; (<a class="phpfunction" onClick="logFunction('stristr')" href="../_functions/stristr.html" onMouseOver="phpfuncPopup(event,'stristr')">stristr</a>(<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>, <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../_variables/search.html">$search</a>) === false)) {
<a name="l1431"><span class="linenum">1431</span></a>                      continue;
<a name="l1432"><span class="linenum">1432</span></a>                  }
<a name="l1433"><span class="linenum">1433</span></a>                  <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = <a class="var it3285" onMouseOver="hilite(3285)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a class="function" onClick="logFunction('get_params')" href="../_functions/get_params.html" onMouseOver="funcPopup(event,'get_params')">get_params</a>();
<a name="l1434"><span class="linenum">1434</span></a>                  <a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a> = <a class="phpfunction" onClick="logFunction('serialize')" href="../_functions/serialize.html" onMouseOver="phpfuncPopup(event,'serialize')">serialize</a>(array(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['contextid'], <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['component'], <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['filearea'], <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['itemid'], <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['filepath'], <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['filename']));
<a name="l1435"><span class="linenum">1435</span></a>                  <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../_variables/list.html">$list</a>[] = array(
<a name="l1436"><span class="linenum">1436</span></a>                      'title' =&gt; <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>,
<a name="l1437"><span class="linenum">1437</span></a>                      'size' =&gt; <a class="var it809" onMouseOver="hilite(809)" onMouseOut="lolite()" onClick="logVariable('filesize')" href="../_variables/filesize.html">$filesize</a>,
<a name="l1438"><span class="linenum">1438</span></a>                      'date' =&gt; <a class="var it21406" onMouseOver="hilite(21406)" onMouseOut="lolite()" onClick="logVariable('filedate')" href="../_variables/filedate.html">$filedate</a>,
<a name="l1439"><span class="linenum">1439</span></a>  <span class="comment">                    //'source' =&gt; $child-&gt;get_url(),</span>
<a name="l1440"><span class="linenum">1440</span></a>                      'source' =&gt; <a class="phpfunction" onClick="logFunction('base64_encode')" href="../_functions/base64_encode.html" onMouseOver="phpfuncPopup(event,'base64_encode')">base64_encode</a>(<a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a>),
<a name="l1441"><span class="linenum">1441</span></a>                      'icon'=&gt;<a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_url')" href="../_functions/pix_url.html" onMouseOver="funcPopup(event,'pix_url')">pix_url</a>(<a class="function" onClick="logFunction('file_file_icon')" href="../_functions/file_file_icon.html" onMouseOver="funcPopup(event,'file_file_icon')">file_file_icon</a>(<a class="var it3285" onMouseOver="hilite(3285)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>, 24))-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(false),
<a name="l1442"><span class="linenum">1442</span></a>                      'thumbnail'=&gt;<a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_url')" href="../_functions/pix_url.html" onMouseOver="funcPopup(event,'pix_url')">pix_url</a>(<a class="function" onClick="logFunction('file_file_icon')" href="../_functions/file_file_icon.html" onMouseOver="funcPopup(event,'file_file_icon')">file_file_icon</a>(<a class="var it3285" onMouseOver="hilite(3285)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>, 90))-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(false),
<a name="l1443"><span class="linenum">1443</span></a>                  );
<a name="l1444"><span class="linenum">1444</span></a>                  <a class="var it2104" onMouseOver="hilite(2104)" onMouseOut="lolite()" onClick="logVariable('filecount')" href="../_variables/filecount.html">$filecount</a>++;
<a name="l1445"><span class="linenum">1445</span></a>              }
<a name="l1446"><span class="linenum">1446</span></a>          }
<a name="l1447"><span class="linenum">1447</span></a>  
<a name="l1448"><span class="linenum">1448</span></a>          return <a class="var it2104" onMouseOver="hilite(2104)" onMouseOut="lolite()" onClick="logVariable('filecount')" href="../_variables/filecount.html">$filecount</a>;
<a name="l1449"><span class="linenum">1449</span></a>      }
<a name="l1450"><span class="linenum">1450</span></a>  
<a name="l1451"><span class="linenum">1451</span></a>      <span class="comment">/**</span>
<a name="l1452"><span class="linenum">1452</span></a>  <span class="comment">     * Display a repository instance list (with edit/delete/create links)</span>
<a name="l1453"><span class="linenum">1453</span></a>  <span class="comment">     *</span>
<a name="l1454"><span class="linenum">1454</span></a>  <span class="comment">     * @static</span>
<a name="l1455"><span class="linenum">1455</span></a>  <span class="comment">     * @param stdClass $context the context for which we display the instance</span>
<a name="l1456"><span class="linenum">1456</span></a>  <span class="comment">     * @param string $typename if set, we display only one type of instance</span>
<a name="l1457"><span class="linenum">1457</span></a>  <span class="comment">     */</span>
<a name="l1458"><span class="linenum">1458</span></a>      public static function <a class="function" onClick="logFunction('display_instances_list')" href="../_functions/display_instances_list.html" onMouseOver="funcPopup(event,'display_instances_list')">display_instances_list</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it21376" onMouseOver="hilite(21376)" onMouseOut="lolite()" onClick="logVariable('typename')" href="../_variables/typename.html">$typename</a> = null) {
<a name="l1459"><span class="linenum">1459</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1460"><span class="linenum">1460</span></a>  
<a name="l1461"><span class="linenum">1461</span></a>          <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> = <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('box_start')" href="../_functions/box_start.html" onMouseOver="funcPopup(event,'box_start')">box_start</a>('generalbox');
<a name="l1462"><span class="linenum">1462</span></a>  <span class="comment">        //if the context is SYSTEM, so we call it from administration page</span>
<a name="l1463"><span class="linenum">1463</span></a>          <a class="var it425" onMouseOver="hilite(425)" onMouseOut="lolite()" onClick="logVariable('admin')" href="../_variables/admin.html">$admin</a> = (<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="constant" onClick="logConstant('SYSCONTEXTID')" href="../_constants/SYSCONTEXTID.html" onMouseOver="constPopup(event,'SYSCONTEXTID')">SYSCONTEXTID</a>) ? true : false;
<a name="l1464"><span class="linenum">1464</span></a>          if (<a class="var it425" onMouseOver="hilite(425)" onMouseOut="lolite()" onClick="logVariable('admin')" href="../_variables/admin.html">$admin</a>) {
<a name="l1465"><span class="linenum">1465</span></a>              <a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('/'.<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/admin.html">admin</a>.'/repositoryinstance.php', array('sesskey'=&gt;<a class="function" onClick="logFunction('sesskey')" href="../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>()));
<a name="l1466"><span class="linenum">1466</span></a>              <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> .= <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('heading')" href="../_functions/heading.html" onMouseOver="funcPopup(event,'heading')">heading</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('siteinstances', 'repository'));
<a name="l1467"><span class="linenum">1467</span></a>          } else {
<a name="l1468"><span class="linenum">1468</span></a>              <a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../repository/manage_instances.php.html">/repository/manage_instances.php</a>', array('contextid'=&gt;<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'sesskey'=&gt;<a class="function" onClick="logFunction('sesskey')" href="../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>()));
<a name="l1469"><span class="linenum">1469</span></a>          }
<a name="l1470"><span class="linenum">1470</span></a>  
<a name="l1471"><span class="linenum">1471</span></a>          <a class="var it8610" onMouseOver="hilite(8610)" onMouseOut="lolite()" onClick="logVariable('namestr')" href="../_variables/namestr.html">$namestr</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('name');
<a name="l1472"><span class="linenum">1472</span></a>          <a class="var it21408" onMouseOver="hilite(21408)" onMouseOut="lolite()" onClick="logVariable('pluginstr')" href="../_variables/pluginstr.html">$pluginstr</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('plugin', 'repository');
<a name="l1473"><span class="linenum">1473</span></a>          <a class="var it21409" onMouseOver="hilite(21409)" onMouseOut="lolite()" onClick="logVariable('settingsstr')" href="../_variables/settingsstr.html">$settingsstr</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('settings');
<a name="l1474"><span class="linenum">1474</span></a>          <a class="var it21410" onMouseOver="hilite(21410)" onMouseOut="lolite()" onClick="logVariable('deletestr')" href="../_variables/deletestr.html">$deletestr</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('delete');
<a name="l1475"><span class="linenum">1475</span></a>  <span class="comment">        // Retrieve list of instances. In administration context we want to display all</span>
<a name="l1476"><span class="linenum">1476</span></a>  <span class="comment">        // instances of a type, even if this type is not visible. In course/user context we</span>
<a name="l1477"><span class="linenum">1477</span></a>  <span class="comment">        // want to display only visible instances, but for every type types. The repository::get_instances()</span>
<a name="l1478"><span class="linenum">1478</span></a>  <span class="comment">        // third parameter displays only visible type.</span>
<a name="l1479"><span class="linenum">1479</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array();
<a name="l1480"><span class="linenum">1480</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['context'] = array(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l1481"><span class="linenum">1481</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['currentcontext'] = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>;
<a name="l1482"><span class="linenum">1482</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['return_types'] = 0;
<a name="l1483"><span class="linenum">1483</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['onlyvisible'] = !<a class="var it425" onMouseOver="hilite(425)" onMouseOut="lolite()" onClick="logVariable('admin')" href="../_variables/admin.html">$admin</a>;
<a name="l1484"><span class="linenum">1484</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['type']        = <a class="var it21376" onMouseOver="hilite(21376)" onMouseOut="lolite()" onClick="logVariable('typename')" href="../_variables/typename.html">$typename</a>;
<a name="l1485"><span class="linenum">1485</span></a>          <a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a> = <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('get_instances')" href="../_functions/get_instances.html" onMouseOver="funcPopup(event,'get_instances')">get_instances</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l1486"><span class="linenum">1486</span></a>          <a class="var it21411" onMouseOver="hilite(21411)" onMouseOut="lolite()" onClick="logVariable('instancesnumber')" href="../_variables/instancesnumber.html">$instancesnumber</a> = <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a>);
<a name="l1487"><span class="linenum">1487</span></a>          <a class="var it21412" onMouseOver="hilite(21412)" onMouseOut="lolite()" onClick="logVariable('alreadyplugins')" href="../_variables/alreadyplugins.html">$alreadyplugins</a> = array();
<a name="l1488"><span class="linenum">1488</span></a>  
<a name="l1489"><span class="linenum">1489</span></a>          <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a> = <span class="keyword">new </span><a class="class" onClick="logClass('html_table')" href="../_classes/html_table.html" onMouseOver="classPopup(event,'html_table')">html_table</a>();
<a name="l1490"><span class="linenum">1490</span></a>          <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('head')" class="var it42921" onMouseOver="hilite(42921)" onMouseOut="lolite()" href="../_variables/head.html">head</a> = array(<a class="var it8610" onMouseOver="hilite(8610)" onMouseOut="lolite()" onClick="logVariable('namestr')" href="../_variables/namestr.html">$namestr</a>, <a class="var it21408" onMouseOver="hilite(21408)" onMouseOut="lolite()" onClick="logVariable('pluginstr')" href="../_variables/pluginstr.html">$pluginstr</a>, <a class="var it21409" onMouseOver="hilite(21409)" onMouseOut="lolite()" onClick="logVariable('settingsstr')" href="../_variables/settingsstr.html">$settingsstr</a>, <a class="var it21410" onMouseOver="hilite(21410)" onMouseOut="lolite()" onClick="logVariable('deletestr')" href="../_variables/deletestr.html">$deletestr</a>);
<a name="l1491"><span class="linenum">1491</span></a>          <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('align')" class="var it42921" onMouseOver="hilite(42921)" onMouseOut="lolite()" href="../_variables/align.html">align</a> = array('left', 'left', 'center','center');
<a name="l1492"><span class="linenum">1492</span></a>          <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('data')" class="var it42921" onMouseOver="hilite(42921)" onMouseOut="lolite()" href="../_variables/data.html">data</a> = array();
<a name="l1493"><span class="linenum">1493</span></a>  
<a name="l1494"><span class="linenum">1494</span></a>          <a class="var it21413" onMouseOver="hilite(21413)" onMouseOut="lolite()" onClick="logVariable('updowncount')" href="../_variables/updowncount.html">$updowncount</a> = 1;
<a name="l1495"><span class="linenum">1495</span></a>  
<a name="l1496"><span class="linenum">1496</span></a>          foreach (<a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a> as <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>) {
<a name="l1497"><span class="linenum">1497</span></a>              <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../_variables/settings.html">$settings</a> = '';
<a name="l1498"><span class="linenum">1498</span></a>              <a class="var it420" onMouseOver="hilite(420)" onMouseOut="lolite()" onClick="logVariable('delete')" href="../_variables/delete.html">$delete</a> = '';
<a name="l1499"><span class="linenum">1499</span></a>  
<a name="l1500"><span class="linenum">1500</span></a>              <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> = <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('get_type_by_id')" href="../_functions/get_type_by_id.html" onMouseOver="funcPopup(event,'get_type_by_id')">get_type_by_id</a>(<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>-&gt;<a onClick="logVariable('options')" class="var it43445" onMouseOver="hilite(43445)" onMouseOut="lolite()" href="../_variables/options.html">options</a>['typeid']);
<a name="l1501"><span class="linenum">1501</span></a>  
<a name="l1502"><span class="linenum">1502</span></a>              if (<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>-&gt;<a class="function" onClick="logFunction('get_contextvisibility')" href="../_functions/get_contextvisibility.html" onMouseOver="funcPopup(event,'get_contextvisibility')">get_contextvisibility</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l1503"><span class="linenum">1503</span></a>                  if (!<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>-&gt;<a onClick="logVariable('readonly')" class="var it43445" onMouseOver="hilite(43445)" onMouseOut="lolite()" href="../_variables/readonly.html">readonly</a>) {
<a name="l1504"><span class="linenum">1504</span></a>  
<a name="l1505"><span class="linenum">1505</span></a>                      <a class="var it21414" onMouseOver="hilite(21414)" onMouseOut="lolite()" onClick="logVariable('settingurl')" href="../_variables/settingurl.html">$settingurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>);
<a name="l1506"><span class="linenum">1506</span></a>                      <a class="var it21414" onMouseOver="hilite(21414)" onMouseOut="lolite()" onClick="logVariable('settingurl')" href="../_variables/settingurl.html">$settingurl</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('type', <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>-&gt;<a onClick="logVariable('options')" class="var it43445" onMouseOver="hilite(43445)" onMouseOut="lolite()" href="../_variables/options.html">options</a>['type']);
<a name="l1507"><span class="linenum">1507</span></a>                      <a class="var it21414" onMouseOver="hilite(21414)" onMouseOut="lolite()" onClick="logVariable('settingurl')" href="../_variables/settingurl.html">$settingurl</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('edit', <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>-&gt;<a onClick="logVariable('id')" class="var it43445" onMouseOver="hilite(43445)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1508"><span class="linenum">1508</span></a>                      <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../_variables/settings.html">$settings</a> .= <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it21414" onMouseOver="hilite(21414)" onMouseOut="lolite()" onClick="logVariable('settingurl')" href="../_variables/settingurl.html">$settingurl</a>, <a class="var it21409" onMouseOver="hilite(21409)" onMouseOut="lolite()" onClick="logVariable('settingsstr')" href="../_variables/settingsstr.html">$settingsstr</a>);
<a name="l1509"><span class="linenum">1509</span></a>  
<a name="l1510"><span class="linenum">1510</span></a>                      <a class="var it10029" onMouseOver="hilite(10029)" onMouseOut="lolite()" onClick="logVariable('deleteurl')" href="../_variables/deleteurl.html">$deleteurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>);
<a name="l1511"><span class="linenum">1511</span></a>                      <a class="var it10029" onMouseOver="hilite(10029)" onMouseOut="lolite()" onClick="logVariable('deleteurl')" href="../_variables/deleteurl.html">$deleteurl</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('delete', <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>-&gt;<a onClick="logVariable('id')" class="var it43445" onMouseOver="hilite(43445)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1512"><span class="linenum">1512</span></a>                      <a class="var it10029" onMouseOver="hilite(10029)" onMouseOut="lolite()" onClick="logVariable('deleteurl')" href="../_variables/deleteurl.html">$deleteurl</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('type', <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>-&gt;<a onClick="logVariable('options')" class="var it43445" onMouseOver="hilite(43445)" onMouseOut="lolite()" href="../_variables/options.html">options</a>['type']);
<a name="l1513"><span class="linenum">1513</span></a>                      <a class="var it420" onMouseOver="hilite(420)" onMouseOut="lolite()" onClick="logVariable('delete')" href="../_variables/delete.html">$delete</a> .= <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it10029" onMouseOver="hilite(10029)" onMouseOut="lolite()" onClick="logVariable('deleteurl')" href="../_variables/deleteurl.html">$deleteurl</a>, <a class="var it21410" onMouseOver="hilite(21410)" onMouseOut="lolite()" onClick="logVariable('deletestr')" href="../_variables/deletestr.html">$deletestr</a>);
<a name="l1514"><span class="linenum">1514</span></a>                  }
<a name="l1515"><span class="linenum">1515</span></a>              }
<a name="l1516"><span class="linenum">1516</span></a>  
<a name="l1517"><span class="linenum">1517</span></a>              <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> = <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('get_type_by_id')" href="../_functions/get_type_by_id.html" onMouseOver="funcPopup(event,'get_type_by_id')">get_type_by_id</a>(<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>-&gt;<a onClick="logVariable('options')" class="var it43445" onMouseOver="hilite(43445)" onMouseOut="lolite()" href="../_variables/options.html">options</a>['typeid']);
<a name="l1518"><span class="linenum">1518</span></a>              <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('data')" class="var it42921" onMouseOver="hilite(42921)" onMouseOut="lolite()" href="../_variables/data.html">data</a>[] = array(<a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>-&gt;<a onClick="logVariable('name')" class="var it43445" onMouseOver="hilite(43445)" onMouseOut="lolite()" href="../_variables/name.html">name</a>), <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>-&gt;<a class="function" onClick="logFunction('get_readablename')" href="../_functions/get_readablename.html" onMouseOver="funcPopup(event,'get_readablename')">get_readablename</a>(), <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../_variables/settings.html">$settings</a>, <a class="var it420" onMouseOver="hilite(420)" onMouseOut="lolite()" onClick="logVariable('delete')" href="../_variables/delete.html">$delete</a>);
<a name="l1519"><span class="linenum">1519</span></a>  
<a name="l1520"><span class="linenum">1520</span></a>  <span class="comment">            //display a grey row if the type is defined as not visible</span>
<a name="l1521"><span class="linenum">1521</span></a>              if (isset(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>) &amp;&amp; !<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>-&gt;<a class="function" onClick="logFunction('get_visible')" href="../_functions/get_visible.html" onMouseOver="funcPopup(event,'get_visible')">get_visible</a>()) {
<a name="l1522"><span class="linenum">1522</span></a>                  <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('rowclasses')" class="var it42921" onMouseOver="hilite(42921)" onMouseOut="lolite()" href="../_variables/rowclasses.html">rowclasses</a>[] = 'dimmed_text';
<a name="l1523"><span class="linenum">1523</span></a>              } else {
<a name="l1524"><span class="linenum">1524</span></a>                  <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>-&gt;<a onClick="logVariable('rowclasses')" class="var it42921" onMouseOver="hilite(42921)" onMouseOut="lolite()" href="../_variables/rowclasses.html">rowclasses</a>[] = '';
<a name="l1525"><span class="linenum">1525</span></a>              }
<a name="l1526"><span class="linenum">1526</span></a>  
<a name="l1527"><span class="linenum">1527</span></a>              if (!<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>-&gt;<a onClick="logVariable('name')" class="var it43445" onMouseOver="hilite(43445)" onMouseOut="lolite()" href="../_variables/name.html">name</a>, <a class="var it21412" onMouseOver="hilite(21412)" onMouseOut="lolite()" onClick="logVariable('alreadyplugins')" href="../_variables/alreadyplugins.html">$alreadyplugins</a>)) {
<a name="l1528"><span class="linenum">1528</span></a>                  <a class="var it21412" onMouseOver="hilite(21412)" onMouseOut="lolite()" onClick="logVariable('alreadyplugins')" href="../_variables/alreadyplugins.html">$alreadyplugins</a>[] = <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>-&gt;<a onClick="logVariable('name')" class="var it43445" onMouseOver="hilite(43445)" onMouseOut="lolite()" href="../_variables/name.html">name</a>;
<a name="l1529"><span class="linenum">1529</span></a>              }
<a name="l1530"><span class="linenum">1530</span></a>          }
<a name="l1531"><span class="linenum">1531</span></a>          <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> .= <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('table')" href="../_functions/table.html" onMouseOver="funcPopup(event,'table')">table</a>(<a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../_variables/table.html">$table</a>);
<a name="l1532"><span class="linenum">1532</span></a>          <a class="var it21415" onMouseOver="hilite(21415)" onMouseOut="lolite()" onClick="logVariable('instancehtml')" href="../_variables/instancehtml.html">$instancehtml</a> = '&lt;div&gt;';
<a name="l1533"><span class="linenum">1533</span></a>          <a class="var it21416" onMouseOver="hilite(21416)" onMouseOut="lolite()" onClick="logVariable('addable')" href="../_variables/addable.html">$addable</a> = 0;
<a name="l1534"><span class="linenum">1534</span></a>  
<a name="l1535"><span class="linenum">1535</span></a>  <span class="comment">        //if no type is set, we can create all type of instance</span>
<a name="l1536"><span class="linenum">1536</span></a>          if (!<a class="var it21376" onMouseOver="hilite(21376)" onMouseOut="lolite()" onClick="logVariable('typename')" href="../_variables/typename.html">$typename</a>) {
<a name="l1537"><span class="linenum">1537</span></a>              <a class="var it21415" onMouseOver="hilite(21415)" onMouseOut="lolite()" onClick="logVariable('instancehtml')" href="../_variables/instancehtml.html">$instancehtml</a> .= '&lt;h3&gt;';
<a name="l1538"><span class="linenum">1538</span></a>              <a class="var it21415" onMouseOver="hilite(21415)" onMouseOut="lolite()" onClick="logVariable('instancehtml')" href="../_variables/instancehtml.html">$instancehtml</a> .= <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('createrepository', 'repository');
<a name="l1539"><span class="linenum">1539</span></a>              <a class="var it21415" onMouseOver="hilite(21415)" onMouseOut="lolite()" onClick="logVariable('instancehtml')" href="../_variables/instancehtml.html">$instancehtml</a> .= '&lt;/h3&gt;&lt;ul&gt;';
<a name="l1540"><span class="linenum">1540</span></a>              <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../_variables/types.html">$types</a> = <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('get_editable_types')" href="../_functions/get_editable_types.html" onMouseOver="funcPopup(event,'get_editable_types')">get_editable_types</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l1541"><span class="linenum">1541</span></a>              foreach (<a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../_variables/types.html">$types</a> as <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>) {
<a name="l1542"><span class="linenum">1542</span></a>                  if (!empty(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>) &amp;&amp; <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>-&gt;<a class="function" onClick="logFunction('get_visible')" href="../_functions/get_visible.html" onMouseOver="funcPopup(event,'get_visible')">get_visible</a>()) {
<a name="l1543"><span class="linenum">1543</span></a>  <span class="comment">                    // If the user does not have the permission to view the repository, it won't be displayed in</span>
<a name="l1544"><span class="linenum">1544</span></a>  <span class="comment">                    // the list of instances. Hiding the link to create new instances will prevent the</span>
<a name="l1545"><span class="linenum">1545</span></a>  <span class="comment">                    // user from creating them without being able to find them afterwards, which looks like a bug.</span>
<a name="l1546"><span class="linenum">1546</span></a>                      if (!<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('repository/'.<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>-&gt;<a class="function" onClick="logFunction('get_typename')" href="../_functions/get_typename.html" onMouseOver="funcPopup(event,'get_typename')">get_typename</a>().':view', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l1547"><span class="linenum">1547</span></a>                          continue;
<a name="l1548"><span class="linenum">1548</span></a>                      }
<a name="l1549"><span class="linenum">1549</span></a>                      <a class="var it21380" onMouseOver="hilite(21380)" onMouseOut="lolite()" onClick="logVariable('instanceoptionnames')" href="../_variables/instanceoptionnames.html">$instanceoptionnames</a> = <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('static_function')" href="../_functions/static_function.html" onMouseOver="funcPopup(event,'static_function')">static_function</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>-&gt;<a class="function" onClick="logFunction('get_typename')" href="../_functions/get_typename.html" onMouseOver="funcPopup(event,'get_typename')">get_typename</a>(), 'get_instance_option_names');
<a name="l1550"><span class="linenum">1550</span></a>                      if (!empty(<a class="var it21380" onMouseOver="hilite(21380)" onMouseOut="lolite()" onClick="logVariable('instanceoptionnames')" href="../_variables/instanceoptionnames.html">$instanceoptionnames</a>)) {
<a name="l1551"><span class="linenum">1551</span></a>                          <a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('new', <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>-&gt;<a class="function" onClick="logFunction('get_typename')" href="../_functions/get_typename.html" onMouseOver="funcPopup(event,'get_typename')">get_typename</a>());
<a name="l1552"><span class="linenum">1552</span></a>                          <a class="var it21415" onMouseOver="hilite(21415)" onMouseOut="lolite()" onClick="logVariable('instancehtml')" href="../_variables/instancehtml.html">$instancehtml</a> .= '&lt;li&gt;&lt;a href=&quot;'.<a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>().'&quot;&gt;'.<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('createxxinstance', 'repository', <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('pluginname', 'repository_'.<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>-&gt;<a class="function" onClick="logFunction('get_typename')" href="../_functions/get_typename.html" onMouseOver="funcPopup(event,'get_typename')">get_typename</a>())).  '&lt;/a&gt;&lt;/li&gt;';
<a name="l1553"><span class="linenum">1553</span></a>                          <a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>-&gt;<a class="function" onClick="logFunction('remove_params')" href="../_functions/remove_params.html" onMouseOver="funcPopup(event,'remove_params')">remove_params</a>('new');
<a name="l1554"><span class="linenum">1554</span></a>                          <a class="var it21416" onMouseOver="hilite(21416)" onMouseOut="lolite()" onClick="logVariable('addable')" href="../_variables/addable.html">$addable</a>++;
<a name="l1555"><span class="linenum">1555</span></a>                      }
<a name="l1556"><span class="linenum">1556</span></a>                  }
<a name="l1557"><span class="linenum">1557</span></a>              }
<a name="l1558"><span class="linenum">1558</span></a>              <a class="var it21415" onMouseOver="hilite(21415)" onMouseOut="lolite()" onClick="logVariable('instancehtml')" href="../_variables/instancehtml.html">$instancehtml</a> .= '&lt;/ul&gt;';
<a name="l1559"><span class="linenum">1559</span></a>  
<a name="l1560"><span class="linenum">1560</span></a>          } else {
<a name="l1561"><span class="linenum">1561</span></a>              <a class="var it21380" onMouseOver="hilite(21380)" onMouseOut="lolite()" onClick="logVariable('instanceoptionnames')" href="../_variables/instanceoptionnames.html">$instanceoptionnames</a> = <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('static_function')" href="../_functions/static_function.html" onMouseOver="funcPopup(event,'static_function')">static_function</a>(<a class="var it21376" onMouseOver="hilite(21376)" onMouseOut="lolite()" onClick="logVariable('typename')" href="../_variables/typename.html">$typename</a>, 'get_instance_option_names');
<a name="l1562"><span class="linenum">1562</span></a>              if (!empty(<a class="var it21380" onMouseOver="hilite(21380)" onMouseOut="lolite()" onClick="logVariable('instanceoptionnames')" href="../_variables/instanceoptionnames.html">$instanceoptionnames</a>)) {   //create a unique type of instance
<a name="l1563"><span class="linenum">1563</span></a>                  <a class="var it21416" onMouseOver="hilite(21416)" onMouseOut="lolite()" onClick="logVariable('addable')" href="../_variables/addable.html">$addable</a> = 1;
<a name="l1564"><span class="linenum">1564</span></a>                  <a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('new', <a class="var it21376" onMouseOver="hilite(21376)" onMouseOut="lolite()" onClick="logVariable('typename')" href="../_variables/typename.html">$typename</a>);
<a name="l1565"><span class="linenum">1565</span></a>                  <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> .= <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('single_button')" href="../_functions/single_button.html" onMouseOver="funcPopup(event,'single_button')">single_button</a>(<a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>, <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('createinstance', 'repository'), 'get');
<a name="l1566"><span class="linenum">1566</span></a>                  <a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>-&gt;<a class="function" onClick="logFunction('remove_params')" href="../_functions/remove_params.html" onMouseOver="funcPopup(event,'remove_params')">remove_params</a>('new');
<a name="l1567"><span class="linenum">1567</span></a>              }
<a name="l1568"><span class="linenum">1568</span></a>          }
<a name="l1569"><span class="linenum">1569</span></a>  
<a name="l1570"><span class="linenum">1570</span></a>          if (<a class="var it21416" onMouseOver="hilite(21416)" onMouseOut="lolite()" onClick="logVariable('addable')" href="../_variables/addable.html">$addable</a>) {
<a name="l1571"><span class="linenum">1571</span></a>              <a class="var it21415" onMouseOver="hilite(21415)" onMouseOut="lolite()" onClick="logVariable('instancehtml')" href="../_variables/instancehtml.html">$instancehtml</a> .= '&lt;/div&gt;';
<a name="l1572"><span class="linenum">1572</span></a>              <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> .= <a class="var it21415" onMouseOver="hilite(21415)" onMouseOut="lolite()" onClick="logVariable('instancehtml')" href="../_variables/instancehtml.html">$instancehtml</a>;
<a name="l1573"><span class="linenum">1573</span></a>          }
<a name="l1574"><span class="linenum">1574</span></a>  
<a name="l1575"><span class="linenum">1575</span></a>          <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> .= <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('box_end')" href="../_functions/box_end.html" onMouseOver="funcPopup(event,'box_end')">box_end</a>();
<a name="l1576"><span class="linenum">1576</span></a>  
<a name="l1577"><span class="linenum">1577</span></a>  <span class="comment">        //print the list + creation links</span>
<a name="l1578"><span class="linenum">1578</span></a>          print(<a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>);
<a name="l1579"><span class="linenum">1579</span></a>      }
<a name="l1580"><span class="linenum">1580</span></a>  
<a name="l1581"><span class="linenum">1581</span></a>      <span class="comment">/**</span>
<a name="l1582"><span class="linenum">1582</span></a>  <span class="comment">     * Prepare file reference information</span>
<a name="l1583"><span class="linenum">1583</span></a>  <span class="comment">     *</span>
<a name="l1584"><span class="linenum">1584</span></a>  <span class="comment">     * @param string $source source of the file, returned by repository as 'source' and received back from user (not cleaned)</span>
<a name="l1585"><span class="linenum">1585</span></a>  <span class="comment">     * @return string file reference, ready to be stored</span>
<a name="l1586"><span class="linenum">1586</span></a>  <span class="comment">     */</span>
<a name="l1587"><span class="linenum">1587</span></a>      public function <a class="function" onClick="logFunction('get_file_reference')" href="../_functions/get_file_reference.html" onMouseOver="funcPopup(event,'get_file_reference')">get_file_reference</a>(<a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a>) {
<a name="l1588"><span class="linenum">1588</span></a>          if (<a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a> &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('has_moodle_files')" href="../_functions/has_moodle_files.html" onMouseOver="funcPopup(event,'has_moodle_files')">has_moodle_files</a>()) {
<a name="l1589"><span class="linenum">1589</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = @json_decode(<a class="phpfunction" onClick="logFunction('base64_decode')" href="../_functions/base64_decode.html" onMouseOver="phpfuncPopup(event,'base64_decode')">base64_decode</a>(<a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a>), true);
<a name="l1590"><span class="linenum">1590</span></a>              if (!<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>) || empty(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['contextid'])) {
<a name="l1591"><span class="linenum">1591</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('repository_exception')" href="../_classes/repository_exception.html" onMouseOver="classPopup(event,'repository_exception')">repository_exception</a>('invalidparams', 'repository');
<a name="l1592"><span class="linenum">1592</span></a>              }
<a name="l1593"><span class="linenum">1593</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array(
<a name="l1594"><span class="linenum">1594</span></a>                  'component' =&gt; empty(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['component']) ? ''   : <a class="function" onClick="logFunction('clean_param')" href="../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['component'], <a class="constant" onClick="logConstant('PARAM_COMPONENT')" href="../_constants/PARAM_COMPONENT.html" onMouseOver="constPopup(event,'PARAM_COMPONENT')">PARAM_COMPONENT</a>),
<a name="l1595"><span class="linenum">1595</span></a>                  'filearea'  =&gt; empty(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['filearea'])  ? ''   : <a class="function" onClick="logFunction('clean_param')" href="../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['filearea'], <a class="constant" onClick="logConstant('PARAM_AREA')" href="../_constants/PARAM_AREA.html" onMouseOver="constPopup(event,'PARAM_AREA')">PARAM_AREA</a>),
<a name="l1596"><span class="linenum">1596</span></a>                  'itemid'    =&gt; empty(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['itemid'])    ? 0    : <a class="function" onClick="logFunction('clean_param')" href="../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['itemid'], <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>),
<a name="l1597"><span class="linenum">1597</span></a>                  'filename'  =&gt; empty(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['filename'])  ? null : <a class="function" onClick="logFunction('clean_param')" href="../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['filename'], <a class="constant" onClick="logConstant('PARAM_FILE')" href="../_constants/PARAM_FILE.html" onMouseOver="constPopup(event,'PARAM_FILE')">PARAM_FILE</a>),
<a name="l1598"><span class="linenum">1598</span></a>                  'filepath'  =&gt; empty(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['filepath'])  ? null : <a class="function" onClick="logFunction('clean_param')" href="../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['filepath'], <a class="constant" onClick="logConstant('PARAM_PATH')" href="../_constants/PARAM_PATH.html" onMouseOver="constPopup(event,'PARAM_PATH')">PARAM_PATH</a>),
<a name="l1599"><span class="linenum">1599</span></a>                  'contextid' =&gt; <a class="function" onClick="logFunction('clean_param')" href="../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['contextid'], <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>)
<a name="l1600"><span class="linenum">1600</span></a>              );
<a name="l1601"><span class="linenum">1601</span></a>  <span class="comment">            // Check if context exists.</span>
<a name="l1602"><span class="linenum">1602</span></a>              if (!context::<a class="function" onClick="logFunction('instance_by_id')" href="../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['contextid'], <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>)) {
<a name="l1603"><span class="linenum">1603</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('repository_exception')" href="../_classes/repository_exception.html" onMouseOver="classPopup(event,'repository_exception')">repository_exception</a>('invalidparams', 'repository');
<a name="l1604"><span class="linenum">1604</span></a>              }
<a name="l1605"><span class="linenum">1605</span></a>              return <a class="class" onClick="logClass('file_storage')" href="../_classes/file_storage.html" onMouseOver="classPopup(event,'file_storage')">file_storage</a>::<a class="function" onClick="logFunction('pack_reference')" href="../_functions/pack_reference.html" onMouseOver="funcPopup(event,'pack_reference')">pack_reference</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l1606"><span class="linenum">1606</span></a>          }
<a name="l1607"><span class="linenum">1607</span></a>          return <a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a>;
<a name="l1608"><span class="linenum">1608</span></a>      }
<a name="l1609"><span class="linenum">1609</span></a>  
<a name="l1610"><span class="linenum">1610</span></a>      <span class="comment">/**</span>
<a name="l1611"><span class="linenum">1611</span></a>  <span class="comment">     * Get a unique file path in which to save the file.</span>
<a name="l1612"><span class="linenum">1612</span></a>  <span class="comment">     *</span>
<a name="l1613"><span class="linenum">1613</span></a>  <span class="comment">     * The filename returned will be removed at the end of the request and</span>
<a name="l1614"><span class="linenum">1614</span></a>  <span class="comment">     * should not be relied upon to exist in subsequent requests.</span>
<a name="l1615"><span class="linenum">1615</span></a>  <span class="comment">     *</span>
<a name="l1616"><span class="linenum">1616</span></a>  <span class="comment">     * @param string $filename file name</span>
<a name="l1617"><span class="linenum">1617</span></a>  <span class="comment">     * @return file path</span>
<a name="l1618"><span class="linenum">1618</span></a>  <span class="comment">     */</span>
<a name="l1619"><span class="linenum">1619</span></a>      public function <a class="function" onClick="logFunction('prepare_file')" href="../_functions/prepare_file.html" onMouseOver="funcPopup(event,'prepare_file')">prepare_file</a>(<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>) {
<a name="l1620"><span class="linenum">1620</span></a>          if (empty(<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>)) {
<a name="l1621"><span class="linenum">1621</span></a>              <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a> = 'file';
<a name="l1622"><span class="linenum">1622</span></a>          }
<a name="l1623"><span class="linenum">1623</span></a>          return sprintf('%s/%s', <a class="function" onClick="logFunction('make_request_directory')" href="../_functions/make_request_directory.html" onMouseOver="funcPopup(event,'make_request_directory')">make_request_directory</a>(), <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>);
<a name="l1624"><span class="linenum">1624</span></a>      }
<a name="l1625"><span class="linenum">1625</span></a>  
<a name="l1626"><span class="linenum">1626</span></a>      <span class="comment">/**</span>
<a name="l1627"><span class="linenum">1627</span></a>  <span class="comment">     * Does this repository used to browse moodle files?</span>
<a name="l1628"><span class="linenum">1628</span></a>  <span class="comment">     *</span>
<a name="l1629"><span class="linenum">1629</span></a>  <span class="comment">     * @return bool</span>
<a name="l1630"><span class="linenum">1630</span></a>  <span class="comment">     */</span>
<a name="l1631"><span class="linenum">1631</span></a>      public function <a class="function" onClick="logFunction('has_moodle_files')" href="../_functions/has_moodle_files.html" onMouseOver="funcPopup(event,'has_moodle_files')">has_moodle_files</a>() {
<a name="l1632"><span class="linenum">1632</span></a>          return false;
<a name="l1633"><span class="linenum">1633</span></a>      }
<a name="l1634"><span class="linenum">1634</span></a>  
<a name="l1635"><span class="linenum">1635</span></a>      <span class="comment">/**</span>
<a name="l1636"><span class="linenum">1636</span></a>  <span class="comment">     * Return file URL, for most plugins, the parameter is the original</span>
<a name="l1637"><span class="linenum">1637</span></a>  <span class="comment">     * url, but some plugins use a file id, so we need this function to</span>
<a name="l1638"><span class="linenum">1638</span></a>  <span class="comment">     * convert file id to original url.</span>
<a name="l1639"><span class="linenum">1639</span></a>  <span class="comment">     *</span>
<a name="l1640"><span class="linenum">1640</span></a>  <span class="comment">     * @param string $url the url of file</span>
<a name="l1641"><span class="linenum">1641</span></a>  <span class="comment">     * @return string</span>
<a name="l1642"><span class="linenum">1642</span></a>  <span class="comment">     */</span>
<a name="l1643"><span class="linenum">1643</span></a>      public function <a class="function" onClick="logFunction('get_link')" href="../_functions/get_link.html" onMouseOver="funcPopup(event,'get_link')">get_link</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>) {
<a name="l1644"><span class="linenum">1644</span></a>          return <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>;
<a name="l1645"><span class="linenum">1645</span></a>      }
<a name="l1646"><span class="linenum">1646</span></a>  
<a name="l1647"><span class="linenum">1647</span></a>      <span class="comment">/**</span>
<a name="l1648"><span class="linenum">1648</span></a>  <span class="comment">     * Downloads a file from external repository and saves it in temp dir</span>
<a name="l1649"><span class="linenum">1649</span></a>  <span class="comment">     *</span>
<a name="l1650"><span class="linenum">1650</span></a>  <span class="comment">     * Function get_file() must be implemented by repositories that support returntypes</span>
<a name="l1651"><span class="linenum">1651</span></a>  <span class="comment">     * FILE_INTERNAL or FILE_REFERENCE. It is invoked to pick up the file and copy it</span>
<a name="l1652"><span class="linenum">1652</span></a>  <span class="comment">     * to moodle. This function is not called for moodle repositories, the function</span>
<a name="l1653"><span class="linenum">1653</span></a>  <span class="comment">     * {@link repository::copy_to_area()} is used instead.</span>
<a name="l1654"><span class="linenum">1654</span></a>  <span class="comment">     *</span>
<a name="l1655"><span class="linenum">1655</span></a>  <span class="comment">     * This function can be overridden by subclass if the files.reference field contains</span>
<a name="l1656"><span class="linenum">1656</span></a>  <span class="comment">     * not just URL or if request should be done differently.</span>
<a name="l1657"><span class="linenum">1657</span></a>  <span class="comment">     *</span>
<a name="l1658"><span class="linenum">1658</span></a>  <span class="comment">     * @see curl</span>
<a name="l1659"><span class="linenum">1659</span></a>  <span class="comment">     * @throws file_exception when error occured</span>
<a name="l1660"><span class="linenum">1660</span></a>  <span class="comment">     *</span>
<a name="l1661"><span class="linenum">1661</span></a>  <span class="comment">     * @param string $url the content of files.reference field, in this implementaion</span>
<a name="l1662"><span class="linenum">1662</span></a>  <span class="comment">     * it is asssumed that it contains the string with URL of the file</span>
<a name="l1663"><span class="linenum">1663</span></a>  <span class="comment">     * @param string $filename filename (without path) to save the downloaded file in the</span>
<a name="l1664"><span class="linenum">1664</span></a>  <span class="comment">     * temporary directory, if omitted or file already exists the new filename will be generated</span>
<a name="l1665"><span class="linenum">1665</span></a>  <span class="comment">     * @return array with elements:</span>
<a name="l1666"><span class="linenum">1666</span></a>  <span class="comment">     *   path: internal location of the file</span>
<a name="l1667"><span class="linenum">1667</span></a>  <span class="comment">     *   url: URL to the source (from parameters)</span>
<a name="l1668"><span class="linenum">1668</span></a>  <span class="comment">     */</span>
<a name="l1669"><span class="linenum">1669</span></a>      public function <a class="function" onClick="logFunction('get_file')" href="../_functions/get_file.html" onMouseOver="funcPopup(event,'get_file')">get_file</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a> = '') {
<a name="l1670"><span class="linenum">1670</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1671"><span class="linenum">1671</span></a>  
<a name="l1672"><span class="linenum">1672</span></a>          <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('prepare_file')" href="../_functions/prepare_file.html" onMouseOver="funcPopup(event,'prepare_file')">prepare_file</a>(<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>);
<a name="l1673"><span class="linenum">1673</span></a>          <a class="var it132" onMouseOver="hilite(132)" onMouseOut="lolite()" onClick="logVariable('c')" href="../_variables/c.html">$c</a> = <span class="keyword">new </span><a class="class" onClick="logClass('curl')" href="../_classes/curl.html" onMouseOver="classPopup(event,'curl')">curl</a>;
<a name="l1674"><span class="linenum">1674</span></a>  
<a name="l1675"><span class="linenum">1675</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = <a class="var it132" onMouseOver="hilite(132)" onMouseOut="lolite()" onClick="logVariable('c')" href="../_variables/c.html">$c</a>-&gt;<a class="function" onClick="logFunction('download_one')" href="../_functions/download_one.html" onMouseOver="funcPopup(event,'download_one')">download_one</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, null, array('filepath' =&gt; <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>, 'timeout' =&gt; <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('repositorygetfiletimeout')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/repositorygetfiletimeout.html">repositorygetfiletimeout</a>));
<a name="l1676"><span class="linenum">1676</span></a>          if (<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> !== true) {
<a name="l1677"><span class="linenum">1677</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('errorwhiledownload', 'repository', '', <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>);
<a name="l1678"><span class="linenum">1678</span></a>          }
<a name="l1679"><span class="linenum">1679</span></a>          return array('path'=&gt;<a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>, 'url'=&gt;<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>);
<a name="l1680"><span class="linenum">1680</span></a>      }
<a name="l1681"><span class="linenum">1681</span></a>  
<a name="l1682"><span class="linenum">1682</span></a>      <span class="comment">/**</span>
<a name="l1683"><span class="linenum">1683</span></a>  <span class="comment">     * Downloads the file from external repository and saves it in moodle filepool.</span>
<a name="l1684"><span class="linenum">1684</span></a>  <span class="comment">     * This function is different from {@link repository::sync_reference()} because it has</span>
<a name="l1685"><span class="linenum">1685</span></a>  <span class="comment">     * bigger request timeout and always downloads the content.</span>
<a name="l1686"><span class="linenum">1686</span></a>  <span class="comment">     *</span>
<a name="l1687"><span class="linenum">1687</span></a>  <span class="comment">     * This function is invoked when we try to unlink the file from the source and convert</span>
<a name="l1688"><span class="linenum">1688</span></a>  <span class="comment">     * a reference into a true copy.</span>
<a name="l1689"><span class="linenum">1689</span></a>  <span class="comment">     *</span>
<a name="l1690"><span class="linenum">1690</span></a>  <span class="comment">     * @throws exception when file could not be imported</span>
<a name="l1691"><span class="linenum">1691</span></a>  <span class="comment">     *</span>
<a name="l1692"><span class="linenum">1692</span></a>  <span class="comment">     * @param stored_file $file</span>
<a name="l1693"><span class="linenum">1693</span></a>  <span class="comment">     * @param int $maxbytes throw an exception if file size is bigger than $maxbytes (0 means no limit)</span>
<a name="l1694"><span class="linenum">1694</span></a>  <span class="comment">     */</span>
<a name="l1695"><span class="linenum">1695</span></a>      public function <a class="function" onClick="logFunction('import_external_file_contents')" href="../_functions/import_external_file_contents.html" onMouseOver="funcPopup(event,'import_external_file_contents')">import_external_file_contents</a>(stored_file <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>, <a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('maxbytes')" href="../_variables/maxbytes.html">$maxbytes</a> = 0) {
<a name="l1696"><span class="linenum">1696</span></a>          if (!<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('is_external_file')" href="../_functions/is_external_file.html" onMouseOver="funcPopup(event,'is_external_file')">is_external_file</a>()) {
<a name="l1697"><span class="linenum">1697</span></a>  <span class="comment">            // nothing to import if the file is not a reference</span>
<a name="l1698"><span class="linenum">1698</span></a>              return;
<a name="l1699"><span class="linenum">1699</span></a>          } else if (<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_repository_id')" href="../_functions/get_repository_id.html" onMouseOver="funcPopup(event,'get_repository_id')">get_repository_id</a>() != <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l1700"><span class="linenum">1700</span></a>  <span class="comment">            // error</span>
<a name="l1701"><span class="linenum">1701</span></a>              <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Repository instance id does not match');
<a name="l1702"><span class="linenum">1702</span></a>              return;
<a name="l1703"><span class="linenum">1703</span></a>          } else if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('has_moodle_files')" href="../_functions/has_moodle_files.html" onMouseOver="funcPopup(event,'has_moodle_files')">has_moodle_files</a>()) {
<a name="l1704"><span class="linenum">1704</span></a>  <span class="comment">            // files that are references to local files are already in moodle filepool</span>
<a name="l1705"><span class="linenum">1705</span></a>  <span class="comment">            // just validate the size</span>
<a name="l1706"><span class="linenum">1706</span></a>              if (<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('maxbytes')" href="../_variables/maxbytes.html">$maxbytes</a> &gt; 0 &amp;&amp; <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_filesize')" href="../_functions/get_filesize.html" onMouseOver="funcPopup(event,'get_filesize')">get_filesize</a>() &gt; <a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('maxbytes')" href="../_variables/maxbytes.html">$maxbytes</a>) {
<a name="l1707"><span class="linenum">1707</span></a>                  <a class="var it16206" onMouseOver="hilite(16206)" onMouseOut="lolite()" onClick="logVariable('maxbytesdisplay')" href="../_variables/maxbytesdisplay.html">$maxbytesdisplay</a> = <a class="function" onClick="logFunction('display_size')" href="../_functions/display_size.html" onMouseOver="funcPopup(event,'display_size')">display_size</a>(<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('maxbytes')" href="../_variables/maxbytes.html">$maxbytes</a>);
<a name="l1708"><span class="linenum">1708</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('file_exception')" href="../_classes/file_exception.html" onMouseOver="classPopup(event,'file_exception')">file_exception</a>('maxbytesfile', (object) array('file' =&gt; <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_filename')" href="../_functions/get_filename.html" onMouseOver="funcPopup(event,'get_filename')">get_filename</a>(),
<a name="l1709"><span class="linenum">1709</span></a>                                                                          'size' =&gt; <a class="var it16206" onMouseOver="hilite(16206)" onMouseOut="lolite()" onClick="logVariable('maxbytesdisplay')" href="../_variables/maxbytesdisplay.html">$maxbytesdisplay</a>));
<a name="l1710"><span class="linenum">1710</span></a>              }
<a name="l1711"><span class="linenum">1711</span></a>              return;
<a name="l1712"><span class="linenum">1712</span></a>          } else {
<a name="l1713"><span class="linenum">1713</span></a>              if (<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('maxbytes')" href="../_variables/maxbytes.html">$maxbytes</a> &gt; 0 &amp;&amp; <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_filesize')" href="../_functions/get_filesize.html" onMouseOver="funcPopup(event,'get_filesize')">get_filesize</a>() &gt; <a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('maxbytes')" href="../_variables/maxbytes.html">$maxbytes</a>) {
<a name="l1714"><span class="linenum">1714</span></a>  <span class="comment">                // note that stored_file::get_filesize() also calls synchronisation</span>
<a name="l1715"><span class="linenum">1715</span></a>                  <a class="var it16206" onMouseOver="hilite(16206)" onMouseOut="lolite()" onClick="logVariable('maxbytesdisplay')" href="../_variables/maxbytesdisplay.html">$maxbytesdisplay</a> = <a class="function" onClick="logFunction('display_size')" href="../_functions/display_size.html" onMouseOver="funcPopup(event,'display_size')">display_size</a>(<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('maxbytes')" href="../_variables/maxbytes.html">$maxbytes</a>);
<a name="l1716"><span class="linenum">1716</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('file_exception')" href="../_classes/file_exception.html" onMouseOver="classPopup(event,'file_exception')">file_exception</a>('maxbytesfile', (object) array('file' =&gt; <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_filename')" href="../_functions/get_filename.html" onMouseOver="funcPopup(event,'get_filename')">get_filename</a>(),
<a name="l1717"><span class="linenum">1717</span></a>                                                                          'size' =&gt; <a class="var it16206" onMouseOver="hilite(16206)" onMouseOut="lolite()" onClick="logVariable('maxbytesdisplay')" href="../_variables/maxbytesdisplay.html">$maxbytesdisplay</a>));
<a name="l1718"><span class="linenum">1718</span></a>              }
<a name="l1719"><span class="linenum">1719</span></a>              <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l1720"><span class="linenum">1720</span></a>              <a class="var it21417" onMouseOver="hilite(21417)" onMouseOut="lolite()" onClick="logVariable('contentexists')" href="../_variables/contentexists.html">$contentexists</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('content_exists')" href="../_functions/content_exists.html" onMouseOver="funcPopup(event,'content_exists')">content_exists</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_contenthash')" href="../_functions/get_contenthash.html" onMouseOver="funcPopup(event,'get_contenthash')">get_contenthash</a>());
<a name="l1721"><span class="linenum">1721</span></a>              if (<a class="var it21417" onMouseOver="hilite(21417)" onMouseOut="lolite()" onClick="logVariable('contentexists')" href="../_variables/contentexists.html">$contentexists</a> &amp;&amp; <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_filesize')" href="../_functions/get_filesize.html" onMouseOver="funcPopup(event,'get_filesize')">get_filesize</a>() &amp;&amp; <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_contenthash')" href="../_functions/get_contenthash.html" onMouseOver="funcPopup(event,'get_contenthash')">get_contenthash</a>() === <a class="phpfunction" onClick="logFunction('sha1')" href="../_functions/sha1.html" onMouseOver="phpfuncPopup(event,'sha1')">sha1</a>('')) {
<a name="l1722"><span class="linenum">1722</span></a>  <span class="comment">                // even when 'file_storage::content_exists()' returns true this may be an empty</span>
<a name="l1723"><span class="linenum">1723</span></a>  <span class="comment">                // content for the file that was not actually downloaded</span>
<a name="l1724"><span class="linenum">1724</span></a>                  <a class="var it21417" onMouseOver="hilite(21417)" onMouseOut="lolite()" onClick="logVariable('contentexists')" href="../_variables/contentexists.html">$contentexists</a> = false;
<a name="l1725"><span class="linenum">1725</span></a>              }
<a name="l1726"><span class="linenum">1726</span></a>              if (!<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_status')" href="../_functions/get_status.html" onMouseOver="funcPopup(event,'get_status')">get_status</a>() &amp;&amp; <a class="var it21417" onMouseOver="hilite(21417)" onMouseOut="lolite()" onClick="logVariable('contentexists')" href="../_variables/contentexists.html">$contentexists</a>) {
<a name="l1727"><span class="linenum">1727</span></a>  <span class="comment">                // we already have the content in moodle filepool and it was synchronised recently.</span>
<a name="l1728"><span class="linenum">1728</span></a>  <span class="comment">                // Repositories may overwrite it if they want to force synchronisation anyway!</span>
<a name="l1729"><span class="linenum">1729</span></a>                  return;
<a name="l1730"><span class="linenum">1730</span></a>              } else {
<a name="l1731"><span class="linenum">1731</span></a>  <span class="comment">                // attempt to get a file</span>
<a name="l1732"><span class="linenum">1732</span></a>                  try {
<a name="l1733"><span class="linenum">1733</span></a>                      <a class="var it806" onMouseOver="hilite(806)" onMouseOut="lolite()" onClick="logVariable('fileinfo')" href="../_variables/fileinfo.html">$fileinfo</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_file')" href="../_functions/get_file.html" onMouseOver="funcPopup(event,'get_file')">get_file</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_reference')" href="../_functions/get_reference.html" onMouseOver="funcPopup(event,'get_reference')">get_reference</a>());
<a name="l1734"><span class="linenum">1734</span></a>                      if (isset(<a class="var it806" onMouseOver="hilite(806)" onMouseOut="lolite()" onClick="logVariable('fileinfo')" href="../_variables/fileinfo.html">$fileinfo</a>['path'])) {
<a name="l1735"><span class="linenum">1735</span></a>                          <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it5439" onMouseOver="hilite(5439)" onMouseOut="lolite()" onClick="logVariable('contenthash')" href="../_variables/contenthash.html">$contenthash</a>, <a class="var it809" onMouseOver="hilite(809)" onMouseOut="lolite()" onClick="logVariable('filesize')" href="../_variables/filesize.html">$filesize</a>, <a class="var it2113" onMouseOver="hilite(2113)" onMouseOut="lolite()" onClick="logVariable('newfile')" href="../_variables/newfile.html">$newfile</a>) = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('add_file_to_pool')" href="../_functions/add_file_to_pool.html" onMouseOver="funcPopup(event,'add_file_to_pool')">add_file_to_pool</a>(<a class="var it806" onMouseOver="hilite(806)" onMouseOut="lolite()" onClick="logVariable('fileinfo')" href="../_variables/fileinfo.html">$fileinfo</a>['path']);
<a name="l1736"><span class="linenum">1736</span></a>  <span class="comment">                        // set this file and other similar aliases synchronised</span>
<a name="l1737"><span class="linenum">1737</span></a>                          <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('set_synchronized')" href="../_functions/set_synchronized.html" onMouseOver="funcPopup(event,'set_synchronized')">set_synchronized</a>(<a class="var it5439" onMouseOver="hilite(5439)" onMouseOut="lolite()" onClick="logVariable('contenthash')" href="../_variables/contenthash.html">$contenthash</a>, <a class="var it809" onMouseOver="hilite(809)" onMouseOut="lolite()" onClick="logVariable('filesize')" href="../_variables/filesize.html">$filesize</a>);
<a name="l1738"><span class="linenum">1738</span></a>                      } else {
<a name="l1739"><span class="linenum">1739</span></a>                          throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('errorwhiledownload', 'repository', '', '');
<a name="l1740"><span class="linenum">1740</span></a>                      }
<a name="l1741"><span class="linenum">1741</span></a>                  } catch (Exception <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../_variables/e.html">$e</a>) {
<a name="l1742"><span class="linenum">1742</span></a>                      if (<a class="var it21417" onMouseOver="hilite(21417)" onMouseOut="lolite()" onClick="logVariable('contentexists')" href="../_variables/contentexists.html">$contentexists</a>) {
<a name="l1743"><span class="linenum">1743</span></a>  <span class="comment">                        // better something than nothing. We have a copy of file. It's sync time</span>
<a name="l1744"><span class="linenum">1744</span></a>  <span class="comment">                        // has expired but it is still very likely that it is the last version</span>
<a name="l1745"><span class="linenum">1745</span></a>                      } else {
<a name="l1746"><span class="linenum">1746</span></a>                          throw(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../_variables/e.html">$e</a>);
<a name="l1747"><span class="linenum">1747</span></a>                      }
<a name="l1748"><span class="linenum">1748</span></a>                  }
<a name="l1749"><span class="linenum">1749</span></a>              }
<a name="l1750"><span class="linenum">1750</span></a>          }
<a name="l1751"><span class="linenum">1751</span></a>      }
<a name="l1752"><span class="linenum">1752</span></a>  
<a name="l1753"><span class="linenum">1753</span></a>      <span class="comment">/**</span>
<a name="l1754"><span class="linenum">1754</span></a>  <span class="comment">     * Return size of a file in bytes.</span>
<a name="l1755"><span class="linenum">1755</span></a>  <span class="comment">     *</span>
<a name="l1756"><span class="linenum">1756</span></a>  <span class="comment">     * @param string $source encoded and serialized data of file</span>
<a name="l1757"><span class="linenum">1757</span></a>  <span class="comment">     * @return int file size in bytes</span>
<a name="l1758"><span class="linenum">1758</span></a>  <span class="comment">     */</span>
<a name="l1759"><span class="linenum">1759</span></a>      public function <a class="function" onClick="logFunction('get_file_size')" href="../_functions/get_file_size.html" onMouseOver="funcPopup(event,'get_file_size')">get_file_size</a>(<a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a>) {
<a name="l1760"><span class="linenum">1760</span></a>  <span class="comment">        // TODO MDL-33297 remove this function completely?</span>
<a name="l1761"><span class="linenum">1761</span></a>          <a class="var it1462" onMouseOver="hilite(1462)" onMouseOut="lolite()" onClick="logVariable('browser')" href="../_variables/browser.html">$browser</a>    = <a class="function" onClick="logFunction('get_file_browser')" href="../_functions/get_file_browser.html" onMouseOver="funcPopup(event,'get_file_browser')">get_file_browser</a>();
<a name="l1762"><span class="linenum">1762</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>     = <a class="phpfunction" onClick="logFunction('unserialize')" href="../_functions/unserialize.html" onMouseOver="phpfuncPopup(event,'unserialize')">unserialize</a>(<a class="phpfunction" onClick="logFunction('base64_decode')" href="../_functions/base64_decode.html" onMouseOver="phpfuncPopup(event,'base64_decode')">base64_decode</a>(<a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a>));
<a name="l1763"><span class="linenum">1763</span></a>          <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>  = <a class="function" onClick="logFunction('clean_param')" href="../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['contextid'], <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l1764"><span class="linenum">1764</span></a>          <a class="var it1056" onMouseOver="hilite(1056)" onMouseOut="lolite()" onClick="logVariable('fileitemid')" href="../_variables/fileitemid.html">$fileitemid</a> = <a class="function" onClick="logFunction('clean_param')" href="../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['itemid'], <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l1765"><span class="linenum">1765</span></a>          <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>   = <a class="function" onClick="logFunction('clean_param')" href="../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['filename'], <a class="constant" onClick="logConstant('PARAM_FILE')" href="../_constants/PARAM_FILE.html" onMouseOver="constPopup(event,'PARAM_FILE')">PARAM_FILE</a>);
<a name="l1766"><span class="linenum">1766</span></a>          <a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../_variables/filepath.html">$filepath</a>   = <a class="function" onClick="logFunction('clean_param')" href="../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['filepath'], <a class="constant" onClick="logConstant('PARAM_PATH')" href="../_constants/PARAM_PATH.html" onMouseOver="constPopup(event,'PARAM_PATH')">PARAM_PATH</a>);
<a name="l1767"><span class="linenum">1767</span></a>          <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../_variables/filearea.html">$filearea</a>   = <a class="function" onClick="logFunction('clean_param')" href="../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['filearea'], <a class="constant" onClick="logConstant('PARAM_AREA')" href="../_constants/PARAM_AREA.html" onMouseOver="constPopup(event,'PARAM_AREA')">PARAM_AREA</a>);
<a name="l1768"><span class="linenum">1768</span></a>          <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>  = <a class="function" onClick="logFunction('clean_param')" href="../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['component'], <a class="constant" onClick="logConstant('PARAM_COMPONENT')" href="../_constants/PARAM_COMPONENT.html" onMouseOver="constPopup(event,'PARAM_COMPONENT')">PARAM_COMPONENT</a>);
<a name="l1769"><span class="linenum">1769</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>    = context::<a class="function" onClick="logFunction('instance_by_id')" href="../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>);
<a name="l1770"><span class="linenum">1770</span></a>          <a class="var it18768" onMouseOver="hilite(18768)" onMouseOut="lolite()" onClick="logVariable('file_info')" href="../_variables/file_info.html">$file_info</a>  = <a class="var it1462" onMouseOver="hilite(1462)" onMouseOut="lolite()" onClick="logVariable('browser')" href="../_variables/browser.html">$browser</a>-&gt;<a class="function" onClick="logFunction('get_file_info')" href="../_functions/get_file_info.html" onMouseOver="funcPopup(event,'get_file_info')">get_file_info</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../_variables/filearea.html">$filearea</a>, <a class="var it1056" onMouseOver="hilite(1056)" onMouseOut="lolite()" onClick="logVariable('fileitemid')" href="../_variables/fileitemid.html">$fileitemid</a>, <a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../_variables/filepath.html">$filepath</a>, <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>);
<a name="l1771"><span class="linenum">1771</span></a>          if (!empty(<a class="var it18768" onMouseOver="hilite(18768)" onMouseOut="lolite()" onClick="logVariable('file_info')" href="../_variables/file_info.html">$file_info</a>)) {
<a name="l1772"><span class="linenum">1772</span></a>              <a class="var it809" onMouseOver="hilite(809)" onMouseOut="lolite()" onClick="logVariable('filesize')" href="../_variables/filesize.html">$filesize</a> = <a class="var it18768" onMouseOver="hilite(18768)" onMouseOut="lolite()" onClick="logVariable('file_info')" href="../_variables/file_info.html">$file_info</a>-&gt;<a class="function" onClick="logFunction('get_filesize')" href="../_functions/get_filesize.html" onMouseOver="funcPopup(event,'get_filesize')">get_filesize</a>();
<a name="l1773"><span class="linenum">1773</span></a>          } else {
<a name="l1774"><span class="linenum">1774</span></a>              <a class="var it809" onMouseOver="hilite(809)" onMouseOut="lolite()" onClick="logVariable('filesize')" href="../_variables/filesize.html">$filesize</a> = null;
<a name="l1775"><span class="linenum">1775</span></a>          }
<a name="l1776"><span class="linenum">1776</span></a>          return <a class="var it809" onMouseOver="hilite(809)" onMouseOut="lolite()" onClick="logVariable('filesize')" href="../_variables/filesize.html">$filesize</a>;
<a name="l1777"><span class="linenum">1777</span></a>      }
<a name="l1778"><span class="linenum">1778</span></a>  
<a name="l1779"><span class="linenum">1779</span></a>      <span class="comment">/**</span>
<a name="l1780"><span class="linenum">1780</span></a>  <span class="comment">     * Return is the instance is visible</span>
<a name="l1781"><span class="linenum">1781</span></a>  <span class="comment">     * (is the type visible ? is the context enable ?)</span>
<a name="l1782"><span class="linenum">1782</span></a>  <span class="comment">     *</span>
<a name="l1783"><span class="linenum">1783</span></a>  <span class="comment">     * @return bool</span>
<a name="l1784"><span class="linenum">1784</span></a>  <span class="comment">     */</span>
<a name="l1785"><span class="linenum">1785</span></a>      public function <a class="function" onClick="logFunction('is_visible')" href="../_functions/is_visible.html" onMouseOver="funcPopup(event,'is_visible')">is_visible</a>() {
<a name="l1786"><span class="linenum">1786</span></a>          <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> = <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('get_type_by_id')" href="../_functions/get_type_by_id.html" onMouseOver="funcPopup(event,'get_type_by_id')">get_type_by_id</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('options')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/options.html">options</a>['typeid']);
<a name="l1787"><span class="linenum">1787</span></a>          <a class="var it18674" onMouseOver="hilite(18674)" onMouseOut="lolite()" onClick="logVariable('instanceoptions')" href="../_variables/instanceoptions.html">$instanceoptions</a> = <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('static_function')" href="../_functions/static_function.html" onMouseOver="funcPopup(event,'static_function')">static_function</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>-&gt;<a class="function" onClick="logFunction('get_typename')" href="../_functions/get_typename.html" onMouseOver="funcPopup(event,'get_typename')">get_typename</a>(), 'get_instance_option_names');
<a name="l1788"><span class="linenum">1788</span></a>  
<a name="l1789"><span class="linenum">1789</span></a>          if (<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>-&gt;<a class="function" onClick="logFunction('get_visible')" href="../_functions/get_visible.html" onMouseOver="funcPopup(event,'get_visible')">get_visible</a>()) {
<a name="l1790"><span class="linenum">1790</span></a>  <span class="comment">            //if the instance is unique so it's visible, otherwise check if the instance has a enabled context</span>
<a name="l1791"><span class="linenum">1791</span></a>              if (empty(<a class="var it18674" onMouseOver="hilite(18674)" onMouseOut="lolite()" onClick="logVariable('instanceoptions')" href="../_variables/instanceoptions.html">$instanceoptions</a>) || <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>-&gt;<a class="function" onClick="logFunction('get_contextvisibility')" href="../_functions/get_contextvisibility.html" onMouseOver="funcPopup(event,'get_contextvisibility')">get_contextvisibility</a>(context::<a class="function" onClick="logFunction('instance_by_id')" href="../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instance')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;contextid))) {
<a name="l1792"><span class="linenum">1792</span></a>                  return true;
<a name="l1793"><span class="linenum">1793</span></a>              }
<a name="l1794"><span class="linenum">1794</span></a>          }
<a name="l1795"><span class="linenum">1795</span></a>  
<a name="l1796"><span class="linenum">1796</span></a>          return false;
<a name="l1797"><span class="linenum">1797</span></a>      }
<a name="l1798"><span class="linenum">1798</span></a>  
<a name="l1799"><span class="linenum">1799</span></a>      <span class="comment">/**</span>
<a name="l1800"><span class="linenum">1800</span></a>  <span class="comment">     * Can the instance be edited by the current user?</span>
<a name="l1801"><span class="linenum">1801</span></a>  <span class="comment">     *</span>
<a name="l1802"><span class="linenum">1802</span></a>  <span class="comment">     * The property $readonly must not be used within this method because</span>
<a name="l1803"><span class="linenum">1803</span></a>  <span class="comment">     * it only controls if the options from self::get_instance_option_names()</span>
<a name="l1804"><span class="linenum">1804</span></a>  <span class="comment">     * can be edited.</span>
<a name="l1805"><span class="linenum">1805</span></a>  <span class="comment">     *</span>
<a name="l1806"><span class="linenum">1806</span></a>  <span class="comment">     * @return bool true if the user can edit the instance.</span>
<a name="l1807"><span class="linenum">1807</span></a>  <span class="comment">     * @since Moodle 2.5</span>
<a name="l1808"><span class="linenum">1808</span></a>  <span class="comment">     */</span>
<a name="l1809"><span class="linenum">1809</span></a>      public final function <a class="function" onClick="logFunction('can_be_edited_by_user')" href="../_functions/can_be_edited_by_user.html" onMouseOver="funcPopup(event,'can_be_edited_by_user')">can_be_edited_by_user</a>() {
<a name="l1810"><span class="linenum">1810</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>;
<a name="l1811"><span class="linenum">1811</span></a>  
<a name="l1812"><span class="linenum">1812</span></a>  <span class="comment">        // We need to be able to explore the repository.</span>
<a name="l1813"><span class="linenum">1813</span></a>          try {
<a name="l1814"><span class="linenum">1814</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_capability')" href="../_functions/check_capability.html" onMouseOver="funcPopup(event,'check_capability')">check_capability</a>();
<a name="l1815"><span class="linenum">1815</span></a>          } catch (repository_exception <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../_variables/e.html">$e</a>) {
<a name="l1816"><span class="linenum">1816</span></a>              return false;
<a name="l1817"><span class="linenum">1817</span></a>          }
<a name="l1818"><span class="linenum">1818</span></a>  
<a name="l1819"><span class="linenum">1819</span></a>          <a class="var it21389" onMouseOver="hilite(21389)" onMouseOut="lolite()" onClick="logVariable('repocontext')" href="../_variables/repocontext.html">$repocontext</a> = context::<a class="function" onClick="logFunction('instance_by_id')" href="../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instance')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;contextid);
<a name="l1820"><span class="linenum">1820</span></a>          if (<a class="var it21389" onMouseOver="hilite(21389)" onMouseOut="lolite()" onClick="logVariable('repocontext')" href="../_variables/repocontext.html">$repocontext</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it43255" onMouseOver="hilite(43255)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a> == <a class="constant" onClick="logConstant('CONTEXT_USER')" href="../_constants/CONTEXT_USER.html" onMouseOver="constPopup(event,'CONTEXT_USER')">CONTEXT_USER</a> &amp;&amp; <a class="var it21389" onMouseOver="hilite(21389)" onMouseOut="lolite()" onClick="logVariable('repocontext')" href="../_variables/repocontext.html">$repocontext</a>-&gt;<a onClick="logVariable('instanceid')" class="var it43255" onMouseOver="hilite(43255)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a> != <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l1821"><span class="linenum">1821</span></a>  <span class="comment">            // If the context of this instance is a user context, we need to be this user.</span>
<a name="l1822"><span class="linenum">1822</span></a>              return false;
<a name="l1823"><span class="linenum">1823</span></a>          } else if (<a class="var it21389" onMouseOver="hilite(21389)" onMouseOut="lolite()" onClick="logVariable('repocontext')" href="../_variables/repocontext.html">$repocontext</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it43255" onMouseOver="hilite(43255)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a> == <a class="constant" onClick="logConstant('CONTEXT_MODULE')" href="../_constants/CONTEXT_MODULE.html" onMouseOver="constPopup(event,'CONTEXT_MODULE')">CONTEXT_MODULE</a> &amp;&amp; !<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:update', <a class="var it21389" onMouseOver="hilite(21389)" onMouseOut="lolite()" onClick="logVariable('repocontext')" href="../_variables/repocontext.html">$repocontext</a>)) {
<a name="l1824"><span class="linenum">1824</span></a>  <span class="comment">            // We need to have permissions on the course to edit the instance.</span>
<a name="l1825"><span class="linenum">1825</span></a>              return false;
<a name="l1826"><span class="linenum">1826</span></a>          } else if (<a class="var it21389" onMouseOver="hilite(21389)" onMouseOut="lolite()" onClick="logVariable('repocontext')" href="../_variables/repocontext.html">$repocontext</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it43255" onMouseOver="hilite(43255)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a> == <a class="constant" onClick="logConstant('CONTEXT_SYSTEM')" href="../_constants/CONTEXT_SYSTEM.html" onMouseOver="constPopup(event,'CONTEXT_SYSTEM')">CONTEXT_SYSTEM</a> &amp;&amp; !<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:config', <a class="var it21389" onMouseOver="hilite(21389)" onMouseOut="lolite()" onClick="logVariable('repocontext')" href="../_variables/repocontext.html">$repocontext</a>)) {
<a name="l1827"><span class="linenum">1827</span></a>  <span class="comment">            // Do not meet the requirements for the context system.</span>
<a name="l1828"><span class="linenum">1828</span></a>              return false;
<a name="l1829"><span class="linenum">1829</span></a>          }
<a name="l1830"><span class="linenum">1830</span></a>  
<a name="l1831"><span class="linenum">1831</span></a>          return true;
<a name="l1832"><span class="linenum">1832</span></a>      }
<a name="l1833"><span class="linenum">1833</span></a>  
<a name="l1834"><span class="linenum">1834</span></a>      <span class="comment">/**</span>
<a name="l1835"><span class="linenum">1835</span></a>  <span class="comment">     * Return the name of this instance, can be overridden.</span>
<a name="l1836"><span class="linenum">1836</span></a>  <span class="comment">     *</span>
<a name="l1837"><span class="linenum">1837</span></a>  <span class="comment">     * @return string</span>
<a name="l1838"><span class="linenum">1838</span></a>  <span class="comment">     */</span>
<a name="l1839"><span class="linenum">1839</span></a>      public function <a class="function" onClick="logFunction('get_name')" href="../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>() {
<a name="l1840"><span class="linenum">1840</span></a>          if (<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instance')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;name) {
<a name="l1841"><span class="linenum">1841</span></a>              return <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>;
<a name="l1842"><span class="linenum">1842</span></a>          } else {
<a name="l1843"><span class="linenum">1843</span></a>              return <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('pluginname', 'repository_' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_typename')" href="../_functions/get_typename.html" onMouseOver="funcPopup(event,'get_typename')">get_typename</a>());
<a name="l1844"><span class="linenum">1844</span></a>          }
<a name="l1845"><span class="linenum">1845</span></a>      }
<a name="l1846"><span class="linenum">1846</span></a>  
<a name="l1847"><span class="linenum">1847</span></a>      <span class="comment">/**</span>
<a name="l1848"><span class="linenum">1848</span></a>  <span class="comment">     * Is this repository accessing private data?</span>
<a name="l1849"><span class="linenum">1849</span></a>  <span class="comment">     *</span>
<a name="l1850"><span class="linenum">1850</span></a>  <span class="comment">     * This function should return true for the repositories which access external private</span>
<a name="l1851"><span class="linenum">1851</span></a>  <span class="comment">     * data from a user. This is the case for repositories such as Dropbox, Google Docs or Box.net</span>
<a name="l1852"><span class="linenum">1852</span></a>  <span class="comment">     * which authenticate the user and then store the auth token.</span>
<a name="l1853"><span class="linenum">1853</span></a>  <span class="comment">     *</span>
<a name="l1854"><span class="linenum">1854</span></a>  <span class="comment">     * Of course, many repositories store 'private data', but we only want to set</span>
<a name="l1855"><span class="linenum">1855</span></a>  <span class="comment">     * contains_private_data() to repositories which are external to Moodle and shouldn't be accessed</span>
<a name="l1856"><span class="linenum">1856</span></a>  <span class="comment">     * to by the users having the capability to 'login as' someone else. For instance, the repository</span>
<a name="l1857"><span class="linenum">1857</span></a>  <span class="comment">     * 'Private files' is not considered as private because it's part of Moodle.</span>
<a name="l1858"><span class="linenum">1858</span></a>  <span class="comment">     *</span>
<a name="l1859"><span class="linenum">1859</span></a>  <span class="comment">     * You should not set contains_private_data() to true on repositories which allow different types</span>
<a name="l1860"><span class="linenum">1860</span></a>  <span class="comment">     * of instances as the levels other than 'user' are, by definition, not private. Also</span>
<a name="l1861"><span class="linenum">1861</span></a>  <span class="comment">     * the user instances will be protected when they need to.</span>
<a name="l1862"><span class="linenum">1862</span></a>  <span class="comment">     *</span>
<a name="l1863"><span class="linenum">1863</span></a>  <span class="comment">     * @return boolean True when the repository accesses private external data.</span>
<a name="l1864"><span class="linenum">1864</span></a>  <span class="comment">     * @since  Moodle 2.5</span>
<a name="l1865"><span class="linenum">1865</span></a>  <span class="comment">     */</span>
<a name="l1866"><span class="linenum">1866</span></a>      public function <a class="function" onClick="logFunction('contains_private_data')" href="../_functions/contains_private_data.html" onMouseOver="funcPopup(event,'contains_private_data')">contains_private_data</a>() {
<a name="l1867"><span class="linenum">1867</span></a>          return true;
<a name="l1868"><span class="linenum">1868</span></a>      }
<a name="l1869"><span class="linenum">1869</span></a>  
<a name="l1870"><span class="linenum">1870</span></a>      <span class="comment">/**</span>
<a name="l1871"><span class="linenum">1871</span></a>  <span class="comment">     * What kind of files will be in this repository?</span>
<a name="l1872"><span class="linenum">1872</span></a>  <span class="comment">     *</span>
<a name="l1873"><span class="linenum">1873</span></a>  <span class="comment">     * @return array return '*' means this repository support any files, otherwise</span>
<a name="l1874"><span class="linenum">1874</span></a>  <span class="comment">     *               return mimetypes of files, it can be an array</span>
<a name="l1875"><span class="linenum">1875</span></a>  <span class="comment">     */</span>
<a name="l1876"><span class="linenum">1876</span></a>      public function <a class="function" onClick="logFunction('supported_filetypes')" href="../_functions/supported_filetypes.html" onMouseOver="funcPopup(event,'supported_filetypes')">supported_filetypes</a>() {
<a name="l1877"><span class="linenum">1877</span></a>  <span class="comment">        // return array('text/plain', 'image/gif');</span>
<a name="l1878"><span class="linenum">1878</span></a>          return '*';
<a name="l1879"><span class="linenum">1879</span></a>      }
<a name="l1880"><span class="linenum">1880</span></a>  
<a name="l1881"><span class="linenum">1881</span></a>      <span class="comment">/**</span>
<a name="l1882"><span class="linenum">1882</span></a>  <span class="comment">     * Tells how the file can be picked from this repository</span>
<a name="l1883"><span class="linenum">1883</span></a>  <span class="comment">     *</span>
<a name="l1884"><span class="linenum">1884</span></a>  <span class="comment">     * Maximum value is FILE_INTERNAL | FILE_EXTERNAL | FILE_REFERENCE</span>
<a name="l1885"><span class="linenum">1885</span></a>  <span class="comment">     *</span>
<a name="l1886"><span class="linenum">1886</span></a>  <span class="comment">     * @return int</span>
<a name="l1887"><span class="linenum">1887</span></a>  <span class="comment">     */</span>
<a name="l1888"><span class="linenum">1888</span></a>      public function <a class="function" onClick="logFunction('supported_returntypes')" href="../_functions/supported_returntypes.html" onMouseOver="funcPopup(event,'supported_returntypes')">supported_returntypes</a>() {
<a name="l1889"><span class="linenum">1889</span></a>          return (<a class="constant" onClick="logConstant('FILE_INTERNAL')" href="../_constants/FILE_INTERNAL.html" onMouseOver="constPopup(event,'FILE_INTERNAL')">FILE_INTERNAL</a> | <a class="constant" onClick="logConstant('FILE_EXTERNAL')" href="../_constants/FILE_EXTERNAL.html" onMouseOver="constPopup(event,'FILE_EXTERNAL')">FILE_EXTERNAL</a>);
<a name="l1890"><span class="linenum">1890</span></a>      }
<a name="l1891"><span class="linenum">1891</span></a>  
<a name="l1892"><span class="linenum">1892</span></a>      <span class="comment">/**</span>
<a name="l1893"><span class="linenum">1893</span></a>  <span class="comment">     * Provide repository instance information for Ajax</span>
<a name="l1894"><span class="linenum">1894</span></a>  <span class="comment">     *</span>
<a name="l1895"><span class="linenum">1895</span></a>  <span class="comment">     * @return stdClass</span>
<a name="l1896"><span class="linenum">1896</span></a>  <span class="comment">     */</span>
<a name="l1897"><span class="linenum">1897</span></a>      final public function <a class="function" onClick="logFunction('get_meta')" href="../_functions/get_meta.html" onMouseOver="funcPopup(event,'get_meta')">get_meta</a>() {
<a name="l1898"><span class="linenum">1898</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1899"><span class="linenum">1899</span></a>          <a class="var it2566" onMouseOver="hilite(2566)" onMouseOut="lolite()" onClick="logVariable('meta')" href="../_variables/meta.html">$meta</a> = new stdClass();
<a name="l1900"><span class="linenum">1900</span></a>          <a class="var it2566" onMouseOver="hilite(2566)" onMouseOut="lolite()" onClick="logVariable('meta')" href="../_variables/meta.html">$meta</a>-&gt;<a onClick="logVariable('id')" class="var it45729" onMouseOver="hilite(45729)" onMouseOut="lolite()" href="../_variables/id.html">id</a>   = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1901"><span class="linenum">1901</span></a>          <a class="var it2566" onMouseOver="hilite(2566)" onMouseOut="lolite()" onClick="logVariable('meta')" href="../_variables/meta.html">$meta</a>-&gt;<a onClick="logVariable('name')" class="var it45729" onMouseOver="hilite(45729)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>());
<a name="l1902"><span class="linenum">1902</span></a>          <a class="var it2566" onMouseOver="hilite(2566)" onMouseOut="lolite()" onClick="logVariable('meta')" href="../_variables/meta.html">$meta</a>-&gt;<a onClick="logVariable('type')" class="var it45729" onMouseOver="hilite(45729)" onMouseOut="lolite()" href="../_variables/type.html">type</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_typename')" href="../_functions/get_typename.html" onMouseOver="funcPopup(event,'get_typename')">get_typename</a>();
<a name="l1903"><span class="linenum">1903</span></a>          <a class="var it2566" onMouseOver="hilite(2566)" onMouseOut="lolite()" onClick="logVariable('meta')" href="../_variables/meta.html">$meta</a>-&gt;<a onClick="logVariable('icon')" class="var it45729" onMouseOver="hilite(45729)" onMouseOut="lolite()" href="../_variables/icon.html">icon</a> = <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_url')" href="../_functions/pix_url.html" onMouseOver="funcPopup(event,'pix_url')">pix_url</a>('icon', 'repository_'.<a class="var it2566" onMouseOver="hilite(2566)" onMouseOut="lolite()" onClick="logVariable('meta')" href="../_variables/meta.html">$meta</a>-&gt;<a onClick="logVariable('type')" class="var it45729" onMouseOver="hilite(45729)" onMouseOut="lolite()" href="../_variables/type.html">type</a>)-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(false);
<a name="l1904"><span class="linenum">1904</span></a>          <a class="var it2566" onMouseOver="hilite(2566)" onMouseOut="lolite()" onClick="logVariable('meta')" href="../_variables/meta.html">$meta</a>-&gt;<a onClick="logVariable('supported_types')" class="var it45729" onMouseOver="hilite(45729)" onMouseOut="lolite()" href="../_variables/supported_types.html">supported_types</a> = <a class="function" onClick="logFunction('file_get_typegroup')" href="../_functions/file_get_typegroup.html" onMouseOver="funcPopup(event,'file_get_typegroup')">file_get_typegroup</a>('extension', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('supported_filetypes')" href="../_functions/supported_filetypes.html" onMouseOver="funcPopup(event,'supported_filetypes')">supported_filetypes</a>());
<a name="l1905"><span class="linenum">1905</span></a>          <a class="var it2566" onMouseOver="hilite(2566)" onMouseOut="lolite()" onClick="logVariable('meta')" href="../_variables/meta.html">$meta</a>-&gt;<a onClick="logVariable('return_types')" class="var it45729" onMouseOver="hilite(45729)" onMouseOut="lolite()" href="../_variables/return_types.html">return_types</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('supported_returntypes')" href="../_functions/supported_returntypes.html" onMouseOver="funcPopup(event,'supported_returntypes')">supported_returntypes</a>();
<a name="l1906"><span class="linenum">1906</span></a>          <a class="var it2566" onMouseOver="hilite(2566)" onMouseOut="lolite()" onClick="logVariable('meta')" href="../_variables/meta.html">$meta</a>-&gt;<a onClick="logVariable('sortorder')" class="var it45729" onMouseOver="hilite(45729)" onMouseOut="lolite()" href="../_variables/sortorder.html">sortorder</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('options')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/options.html">options</a>['sortorder'];
<a name="l1907"><span class="linenum">1907</span></a>          return <a class="var it2566" onMouseOver="hilite(2566)" onMouseOut="lolite()" onClick="logVariable('meta')" href="../_variables/meta.html">$meta</a>;
<a name="l1908"><span class="linenum">1908</span></a>      }
<a name="l1909"><span class="linenum">1909</span></a>  
<a name="l1910"><span class="linenum">1910</span></a>      <span class="comment">/**</span>
<a name="l1911"><span class="linenum">1911</span></a>  <span class="comment">     * Create an instance for this plug-in</span>
<a name="l1912"><span class="linenum">1912</span></a>  <span class="comment">     *</span>
<a name="l1913"><span class="linenum">1913</span></a>  <span class="comment">     * @static</span>
<a name="l1914"><span class="linenum">1914</span></a>  <span class="comment">     * @param string $type the type of the repository</span>
<a name="l1915"><span class="linenum">1915</span></a>  <span class="comment">     * @param int $userid the user id</span>
<a name="l1916"><span class="linenum">1916</span></a>  <span class="comment">     * @param stdClass $context the context</span>
<a name="l1917"><span class="linenum">1917</span></a>  <span class="comment">     * @param array $params the options for this instance</span>
<a name="l1918"><span class="linenum">1918</span></a>  <span class="comment">     * @param int $readonly whether to create it readonly or not (defaults to not)</span>
<a name="l1919"><span class="linenum">1919</span></a>  <span class="comment">     * @return mixed</span>
<a name="l1920"><span class="linenum">1920</span></a>  <span class="comment">     */</span>
<a name="l1921"><span class="linenum">1921</span></a>      public static function <a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, <a class="var it283" onMouseOver="hilite(283)" onMouseOut="lolite()" onClick="logVariable('readonly')" href="../_variables/readonly.html">$readonly</a>=0) {
<a name="l1922"><span class="linenum">1922</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1923"><span class="linenum">1923</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = (array)<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>;
<a name="l1924"><span class="linenum">1924</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '/repository/'. <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> . '/lib.php');
<a name="l1925"><span class="linenum">1925</span></a>          <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a> = 'repository_' . <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>;
<a name="l1926"><span class="linenum">1926</span></a>          if (<a class="var it1772" onMouseOver="hilite(1772)" onMouseOut="lolite()" onClick="logVariable('repo')" href="../_variables/repo.html">$repo</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('repository', array('type'=&gt;<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>))) {
<a name="l1927"><span class="linenum">1927</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a> = new stdClass();
<a name="l1928"><span class="linenum">1928</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('name')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['name'];
<a name="l1929"><span class="linenum">1929</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('typeid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/typeid.html">typeid</a> = <a class="var it1772" onMouseOver="hilite(1772)" onMouseOut="lolite()" onClick="logVariable('repo')" href="../_variables/repo.html">$repo</a>-&gt;<a onClick="logVariable('id')" class="var it44004" onMouseOver="hilite(44004)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1930"><span class="linenum">1930</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('timecreated')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/timecreated.html">timecreated</a>  = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l1931"><span class="linenum">1931</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l1932"><span class="linenum">1932</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('contextid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a> = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1933"><span class="linenum">1933</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('readonly')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/readonly.html">readonly</a> = <a class="var it283" onMouseOver="hilite(283)" onMouseOut="lolite()" onClick="logVariable('readonly')" href="../_variables/readonly.html">$readonly</a>;
<a name="l1934"><span class="linenum">1934</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('userid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>    = <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>;
<a name="l1935"><span class="linenum">1935</span></a>              <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('repository_instances', <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>);
<a name="l1936"><span class="linenum">1936</span></a>              <a class="class" onClick="logClass('cache')" href="../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'repositories')-&gt;<a class="function" onClick="logFunction('purge')" href="../_functions/purge.html" onMouseOver="funcPopup(event,'purge')">purge</a>();
<a name="l1937"><span class="linenum">1937</span></a>              <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = array();
<a name="l1938"><span class="linenum">1938</span></a>              <a class="var it429" onMouseOver="hilite(429)" onMouseOut="lolite()" onClick="logVariable('configs')" href="../_variables/configs.html">$configs</a> = <a class="phpfunction" onClick="logFunction('call_user_func')" href="../_functions/call_user_func.html" onMouseOver="phpfuncPopup(event,'call_user_func')">call_user_func</a>(<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a> . '::get_instance_option_names');
<a name="l1939"><span class="linenum">1939</span></a>              if (!empty(<a class="var it429" onMouseOver="hilite(429)" onMouseOut="lolite()" onClick="logVariable('configs')" href="../_variables/configs.html">$configs</a>)) {
<a name="l1940"><span class="linenum">1940</span></a>                  foreach (<a class="var it429" onMouseOver="hilite(429)" onMouseOut="lolite()" onClick="logVariable('configs')" href="../_variables/configs.html">$configs</a> as <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>) {
<a name="l1941"><span class="linenum">1941</span></a>                      if (isset(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>[<a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>])) {
<a name="l1942"><span class="linenum">1942</span></a>                          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>[<a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>] = <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>[<a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>];
<a name="l1943"><span class="linenum">1943</span></a>                      } else {
<a name="l1944"><span class="linenum">1944</span></a>                          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>[<a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>] = null;
<a name="l1945"><span class="linenum">1945</span></a>                      }
<a name="l1946"><span class="linenum">1946</span></a>                  }
<a name="l1947"><span class="linenum">1947</span></a>              }
<a name="l1948"><span class="linenum">1948</span></a>  
<a name="l1949"><span class="linenum">1949</span></a>              if (!empty(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>)) {
<a name="l1950"><span class="linenum">1950</span></a>                  unset(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['name']);
<a name="l1951"><span class="linenum">1951</span></a>                  <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a> = <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('get_instance')" href="../_functions/get_instance.html" onMouseOver="funcPopup(event,'get_instance')">get_instance</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>);
<a name="l1952"><span class="linenum">1952</span></a>                  <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a class="function" onClick="logFunction('set_option')" href="../_functions/set_option.html" onMouseOver="funcPopup(event,'set_option')">set_option</a>(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>);
<a name="l1953"><span class="linenum">1953</span></a>                  return <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>;
<a name="l1954"><span class="linenum">1954</span></a>              } else {
<a name="l1955"><span class="linenum">1955</span></a>                  return null;
<a name="l1956"><span class="linenum">1956</span></a>              }
<a name="l1957"><span class="linenum">1957</span></a>          } else {
<a name="l1958"><span class="linenum">1958</span></a>              return null;
<a name="l1959"><span class="linenum">1959</span></a>          }
<a name="l1960"><span class="linenum">1960</span></a>      }
<a name="l1961"><span class="linenum">1961</span></a>  
<a name="l1962"><span class="linenum">1962</span></a>      <span class="comment">/**</span>
<a name="l1963"><span class="linenum">1963</span></a>  <span class="comment">     * delete a repository instance</span>
<a name="l1964"><span class="linenum">1964</span></a>  <span class="comment">     *</span>
<a name="l1965"><span class="linenum">1965</span></a>  <span class="comment">     * @param bool $downloadcontents</span>
<a name="l1966"><span class="linenum">1966</span></a>  <span class="comment">     * @return bool</span>
<a name="l1967"><span class="linenum">1967</span></a>  <span class="comment">     */</span>
<a name="l1968"><span class="linenum">1968</span></a>      final public function <a class="function" onClick="logFunction('delete')" href="../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>(<a class="var it422" onMouseOver="hilite(422)" onMouseOut="lolite()" onClick="logVariable('downloadcontents')" href="../_variables/downloadcontents.html">$downloadcontents</a> = false) {
<a name="l1969"><span class="linenum">1969</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1970"><span class="linenum">1970</span></a>          if (<a class="var it422" onMouseOver="hilite(422)" onMouseOut="lolite()" onClick="logVariable('downloadcontents')" href="../_variables/downloadcontents.html">$downloadcontents</a>) {
<a name="l1971"><span class="linenum">1971</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('convert_references_to_local')" href="../_functions/convert_references_to_local.html" onMouseOver="funcPopup(event,'convert_references_to_local')">convert_references_to_local</a>();
<a name="l1972"><span class="linenum">1972</span></a>          }
<a name="l1973"><span class="linenum">1973</span></a>          <a class="class" onClick="logClass('cache')" href="../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'repositories')-&gt;<a class="function" onClick="logFunction('purge')" href="../_functions/purge.html" onMouseOver="funcPopup(event,'purge')">purge</a>();
<a name="l1974"><span class="linenum">1974</span></a>          try {
<a name="l1975"><span class="linenum">1975</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('repository_instances', array('id'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1976"><span class="linenum">1976</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('repository_instance_config', array('instanceid'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1977"><span class="linenum">1977</span></a>          } catch (dml_exception <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../_variables/ex.html">$ex</a>) {
<a name="l1978"><span class="linenum">1978</span></a>              return false;
<a name="l1979"><span class="linenum">1979</span></a>          }
<a name="l1980"><span class="linenum">1980</span></a>          return true;
<a name="l1981"><span class="linenum">1981</span></a>      }
<a name="l1982"><span class="linenum">1982</span></a>  
<a name="l1983"><span class="linenum">1983</span></a>      <span class="comment">/**</span>
<a name="l1984"><span class="linenum">1984</span></a>  <span class="comment">     * Delete all the instances associated to a context.</span>
<a name="l1985"><span class="linenum">1985</span></a>  <span class="comment">     *</span>
<a name="l1986"><span class="linenum">1986</span></a>  <span class="comment">     * This method is intended to be a callback when deleting</span>
<a name="l1987"><span class="linenum">1987</span></a>  <span class="comment">     * a course or a user to delete all the instances associated</span>
<a name="l1988"><span class="linenum">1988</span></a>  <span class="comment">     * to their context. The usual way to delete a single instance</span>
<a name="l1989"><span class="linenum">1989</span></a>  <span class="comment">     * is to use {@link self::delete()}.</span>
<a name="l1990"><span class="linenum">1990</span></a>  <span class="comment">     *</span>
<a name="l1991"><span class="linenum">1991</span></a>  <span class="comment">     * @param int $contextid context ID.</span>
<a name="l1992"><span class="linenum">1992</span></a>  <span class="comment">     * @param boolean $downloadcontents true to convert references to hard copies.</span>
<a name="l1993"><span class="linenum">1993</span></a>  <span class="comment">     * @return void</span>
<a name="l1994"><span class="linenum">1994</span></a>  <span class="comment">     */</span>
<a name="l1995"><span class="linenum">1995</span></a>      final public static function <a class="function" onClick="logFunction('delete_all_for_context')" href="../_functions/delete_all_for_context.html" onMouseOver="funcPopup(event,'delete_all_for_context')">delete_all_for_context</a>(<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>, <a class="var it422" onMouseOver="hilite(422)" onMouseOut="lolite()" onClick="logVariable('downloadcontents')" href="../_variables/downloadcontents.html">$downloadcontents</a> = true) {
<a name="l1996"><span class="linenum">1996</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1997"><span class="linenum">1997</span></a>          <a class="var it15479" onMouseOver="hilite(15479)" onMouseOut="lolite()" onClick="logVariable('repoids')" href="../_variables/repoids.html">$repoids</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_fieldset_select')" href="../_functions/get_fieldset_select.html" onMouseOver="funcPopup(event,'get_fieldset_select')">get_fieldset_select</a>('repository_instances', 'id', 'contextid = :contextid', array('contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>));
<a name="l1998"><span class="linenum">1998</span></a>          if (<a class="var it422" onMouseOver="hilite(422)" onMouseOut="lolite()" onClick="logVariable('downloadcontents')" href="../_variables/downloadcontents.html">$downloadcontents</a>) {
<a name="l1999"><span class="linenum">1999</span></a>              foreach (<a class="var it15479" onMouseOver="hilite(15479)" onMouseOut="lolite()" onClick="logVariable('repoids')" href="../_variables/repoids.html">$repoids</a> as <a class="var it9437" onMouseOver="hilite(9437)" onMouseOut="lolite()" onClick="logVariable('repoid')" href="../_variables/repoid.html">$repoid</a>) {
<a name="l2000"><span class="linenum">2000</span></a>                  <a class="var it1772" onMouseOver="hilite(1772)" onMouseOut="lolite()" onClick="logVariable('repo')" href="../_variables/repo.html">$repo</a> = <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('get_repository_by_id')" href="../_functions/get_repository_by_id.html" onMouseOver="funcPopup(event,'get_repository_by_id')">get_repository_by_id</a>(<a class="var it9437" onMouseOver="hilite(9437)" onMouseOut="lolite()" onClick="logVariable('repoid')" href="../_variables/repoid.html">$repoid</a>, <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>);
<a name="l2001"><span class="linenum">2001</span></a>                  <a class="var it1772" onMouseOver="hilite(1772)" onMouseOut="lolite()" onClick="logVariable('repo')" href="../_variables/repo.html">$repo</a>-&gt;<a class="function" onClick="logFunction('convert_references_to_local')" href="../_functions/convert_references_to_local.html" onMouseOver="funcPopup(event,'convert_references_to_local')">convert_references_to_local</a>();
<a name="l2002"><span class="linenum">2002</span></a>              }
<a name="l2003"><span class="linenum">2003</span></a>          }
<a name="l2004"><span class="linenum">2004</span></a>          <a class="class" onClick="logClass('cache')" href="../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'repositories')-&gt;<a class="function" onClick="logFunction('purge')" href="../_functions/purge.html" onMouseOver="funcPopup(event,'purge')">purge</a>();
<a name="l2005"><span class="linenum">2005</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_list')" href="../_functions/delete_records_list.html" onMouseOver="funcPopup(event,'delete_records_list')">delete_records_list</a>('repository_instances', 'id', <a class="var it15479" onMouseOver="hilite(15479)" onMouseOut="lolite()" onClick="logVariable('repoids')" href="../_variables/repoids.html">$repoids</a>);
<a name="l2006"><span class="linenum">2006</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_list')" href="../_functions/delete_records_list.html" onMouseOver="funcPopup(event,'delete_records_list')">delete_records_list</a>('repository_instance_config', 'instanceid', <a class="var it15479" onMouseOver="hilite(15479)" onMouseOut="lolite()" onClick="logVariable('repoids')" href="../_variables/repoids.html">$repoids</a>);
<a name="l2007"><span class="linenum">2007</span></a>      }
<a name="l2008"><span class="linenum">2008</span></a>  
<a name="l2009"><span class="linenum">2009</span></a>      <span class="comment">/**</span>
<a name="l2010"><span class="linenum">2010</span></a>  <span class="comment">     * Hide/Show a repository</span>
<a name="l2011"><span class="linenum">2011</span></a>  <span class="comment">     *</span>
<a name="l2012"><span class="linenum">2012</span></a>  <span class="comment">     * @param string $hide</span>
<a name="l2013"><span class="linenum">2013</span></a>  <span class="comment">     * @return bool</span>
<a name="l2014"><span class="linenum">2014</span></a>  <span class="comment">     */</span>
<a name="l2015"><span class="linenum">2015</span></a>      final public function <a class="function" onClick="logFunction('hide')" href="../_functions/hide.html" onMouseOver="funcPopup(event,'hide')">hide</a>(<a class="var it419" onMouseOver="hilite(419)" onMouseOut="lolite()" onClick="logVariable('hide')" href="../_variables/hide.html">$hide</a> = 'toggle') {
<a name="l2016"><span class="linenum">2016</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2017"><span class="linenum">2017</span></a>          if (<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../_variables/entry.html">$entry</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('repository', array('id'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>))) {
<a name="l2018"><span class="linenum">2018</span></a>              if (<a class="var it419" onMouseOver="hilite(419)" onMouseOut="lolite()" onClick="logVariable('hide')" href="../_variables/hide.html">$hide</a> === 'toggle' ) {
<a name="l2019"><span class="linenum">2019</span></a>                  if (!empty(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('visible')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>)) {
<a name="l2020"><span class="linenum">2020</span></a>                      <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('visible')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> = 0;
<a name="l2021"><span class="linenum">2021</span></a>                  } else {
<a name="l2022"><span class="linenum">2022</span></a>                      <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('visible')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> = 1;
<a name="l2023"><span class="linenum">2023</span></a>                  }
<a name="l2024"><span class="linenum">2024</span></a>              } else {
<a name="l2025"><span class="linenum">2025</span></a>                  if (!empty(<a class="var it419" onMouseOver="hilite(419)" onMouseOut="lolite()" onClick="logVariable('hide')" href="../_variables/hide.html">$hide</a>)) {
<a name="l2026"><span class="linenum">2026</span></a>                      <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('visible')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> = 0;
<a name="l2027"><span class="linenum">2027</span></a>                  } else {
<a name="l2028"><span class="linenum">2028</span></a>                      <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('visible')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> = 1;
<a name="l2029"><span class="linenum">2029</span></a>                  }
<a name="l2030"><span class="linenum">2030</span></a>              }
<a name="l2031"><span class="linenum">2031</span></a>              return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('repository', <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../_variables/entry.html">$entry</a>);
<a name="l2032"><span class="linenum">2032</span></a>          }
<a name="l2033"><span class="linenum">2033</span></a>          return false;
<a name="l2034"><span class="linenum">2034</span></a>      }
<a name="l2035"><span class="linenum">2035</span></a>  
<a name="l2036"><span class="linenum">2036</span></a>      <span class="comment">/**</span>
<a name="l2037"><span class="linenum">2037</span></a>  <span class="comment">     * Save settings for repository instance</span>
<a name="l2038"><span class="linenum">2038</span></a>  <span class="comment">     * $repo-&gt;set_option(array('api_key'=&gt;'f2188bde132', 'name'=&gt;'dongsheng'));</span>
<a name="l2039"><span class="linenum">2039</span></a>  <span class="comment">     *</span>
<a name="l2040"><span class="linenum">2040</span></a>  <span class="comment">     * @param array $options settings</span>
<a name="l2041"><span class="linenum">2041</span></a>  <span class="comment">     * @return bool</span>
<a name="l2042"><span class="linenum">2042</span></a>  <span class="comment">     */</span>
<a name="l2043"><span class="linenum">2043</span></a>      public function <a class="function" onClick="logFunction('set_option')" href="../_functions/set_option.html" onMouseOver="funcPopup(event,'set_option')">set_option</a>(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = array()) {
<a name="l2044"><span class="linenum">2044</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2045"><span class="linenum">2045</span></a>  
<a name="l2046"><span class="linenum">2046</span></a>          if (!empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['name'])) {
<a name="l2047"><span class="linenum">2047</span></a>              <a class="var it1024" onMouseOver="hilite(1024)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a> = new stdClass();
<a name="l2048"><span class="linenum">2048</span></a>              <a class="var it1024" onMouseOver="hilite(1024)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a>-&gt;<a onClick="logVariable('id')" class="var it43412" onMouseOver="hilite(43412)" onMouseOut="lolite()" href="../_variables/id.html">id</a>   = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l2049"><span class="linenum">2049</span></a>              <a class="var it1024" onMouseOver="hilite(1024)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a>-&gt;<a onClick="logVariable('name')" class="var it43412" onMouseOver="hilite(43412)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['name'];
<a name="l2050"><span class="linenum">2050</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('repository_instances', <a class="var it1024" onMouseOver="hilite(1024)" onMouseOut="lolite()" onClick="logVariable('r')" href="../_variables/r.html">$r</a>);
<a name="l2051"><span class="linenum">2051</span></a>              unset(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['name']);
<a name="l2052"><span class="linenum">2052</span></a>          }
<a name="l2053"><span class="linenum">2053</span></a>          foreach (<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> as <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>=&gt;<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l2054"><span class="linenum">2054</span></a>              if (<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('repository_instance_config', 'id', array('name'=&gt;<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>, 'instanceid'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>))) {
<a name="l2055"><span class="linenum">2055</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('repository_instance_config', 'value', <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>, array('id'=&gt;<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>));
<a name="l2056"><span class="linenum">2056</span></a>              } else {
<a name="l2057"><span class="linenum">2057</span></a>                  <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a> = new stdClass();
<a name="l2058"><span class="linenum">2058</span></a>                  <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>-&gt;<a onClick="logVariable('instanceid')" class="var it42981" onMouseOver="hilite(42981)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l2059"><span class="linenum">2059</span></a>                  <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>-&gt;<a onClick="logVariable('name')" class="var it42981" onMouseOver="hilite(42981)" onMouseOut="lolite()" href="../_variables/name.html">name</a>   = <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>;
<a name="l2060"><span class="linenum">2060</span></a>                  <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>-&gt;<a onClick="logVariable('value')" class="var it42981" onMouseOver="hilite(42981)" onMouseOut="lolite()" href="../_variables/value.html">value</a>  = <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>;
<a name="l2061"><span class="linenum">2061</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('repository_instance_config', <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>);
<a name="l2062"><span class="linenum">2062</span></a>              }
<a name="l2063"><span class="linenum">2063</span></a>          }
<a name="l2064"><span class="linenum">2064</span></a>          <a class="class" onClick="logClass('cache')" href="../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'repositories')-&gt;<a class="function" onClick="logFunction('purge')" href="../_functions/purge.html" onMouseOver="funcPopup(event,'purge')">purge</a>();
<a name="l2065"><span class="linenum">2065</span></a>          return true;
<a name="l2066"><span class="linenum">2066</span></a>      }
<a name="l2067"><span class="linenum">2067</span></a>  
<a name="l2068"><span class="linenum">2068</span></a>      <span class="comment">/**</span>
<a name="l2069"><span class="linenum">2069</span></a>  <span class="comment">     * Get settings for repository instance.</span>
<a name="l2070"><span class="linenum">2070</span></a>  <span class="comment">     *</span>
<a name="l2071"><span class="linenum">2071</span></a>  <span class="comment">     * @param string $config a specific option to get.</span>
<a name="l2072"><span class="linenum">2072</span></a>  <span class="comment">     * @return mixed returns an array of options. If $config is not empty, then it returns that option,</span>
<a name="l2073"><span class="linenum">2073</span></a>  <span class="comment">     *               or null if the option does not exist.</span>
<a name="l2074"><span class="linenum">2074</span></a>  <span class="comment">     */</span>
<a name="l2075"><span class="linenum">2075</span></a>      public function <a class="function" onClick="logFunction('get_option')" href="../_functions/get_option.html" onMouseOver="funcPopup(event,'get_option')">get_option</a>(<a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a> = '') {
<a name="l2076"><span class="linenum">2076</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2077"><span class="linenum">2077</span></a>          <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a> = <a class="class" onClick="logClass('cache')" href="../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'repositories');
<a name="l2078"><span class="linenum">2078</span></a>          if ((<a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../_variables/entries.html">$entries</a> = <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('ops:'. <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)) === false) {
<a name="l2079"><span class="linenum">2079</span></a>              <a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../_variables/entries.html">$entries</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('repository_instance_config', array('instanceid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2080"><span class="linenum">2080</span></a>              <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('ops:'. <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../_variables/entries.html">$entries</a>);
<a name="l2081"><span class="linenum">2081</span></a>          }
<a name="l2082"><span class="linenum">2082</span></a>  
<a name="l2083"><span class="linenum">2083</span></a>          <a class="var it76" onMouseOver="hilite(76)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../_variables/ret.html">$ret</a> = array();
<a name="l2084"><span class="linenum">2084</span></a>          foreach(<a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../_variables/entries.html">$entries</a> as <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../_variables/entry.html">$entry</a>) {
<a name="l2085"><span class="linenum">2085</span></a>              <a class="var it76" onMouseOver="hilite(76)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../_variables/ret.html">$ret</a>[<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('name')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../_variables/name.html">name</a>] = <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('value')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../_variables/value.html">value</a>;
<a name="l2086"><span class="linenum">2086</span></a>          }
<a name="l2087"><span class="linenum">2087</span></a>  
<a name="l2088"><span class="linenum">2088</span></a>          if (!empty(<a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>)) {
<a name="l2089"><span class="linenum">2089</span></a>              if (isset(<a class="var it76" onMouseOver="hilite(76)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../_variables/ret.html">$ret</a>[<a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>])) {
<a name="l2090"><span class="linenum">2090</span></a>                  return <a class="var it76" onMouseOver="hilite(76)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../_variables/ret.html">$ret</a>[<a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>];
<a name="l2091"><span class="linenum">2091</span></a>              } else {
<a name="l2092"><span class="linenum">2092</span></a>                  return null;
<a name="l2093"><span class="linenum">2093</span></a>              }
<a name="l2094"><span class="linenum">2094</span></a>          } else {
<a name="l2095"><span class="linenum">2095</span></a>              return <a class="var it76" onMouseOver="hilite(76)" onMouseOut="lolite()" onClick="logVariable('ret')" href="../_variables/ret.html">$ret</a>;
<a name="l2096"><span class="linenum">2096</span></a>          }
<a name="l2097"><span class="linenum">2097</span></a>      }
<a name="l2098"><span class="linenum">2098</span></a>  
<a name="l2099"><span class="linenum">2099</span></a>      <span class="comment">/**</span>
<a name="l2100"><span class="linenum">2100</span></a>  <span class="comment">     * Filter file listing to display specific types</span>
<a name="l2101"><span class="linenum">2101</span></a>  <span class="comment">     *</span>
<a name="l2102"><span class="linenum">2102</span></a>  <span class="comment">     * @param array $value</span>
<a name="l2103"><span class="linenum">2103</span></a>  <span class="comment">     * @return bool</span>
<a name="l2104"><span class="linenum">2104</span></a>  <span class="comment">     */</span>
<a name="l2105"><span class="linenum">2105</span></a>      public function <a class="function" onClick="logFunction('filter')" href="../_functions/filter.html" onMouseOver="funcPopup(event,'filter')">filter</a>(&amp;<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l2106"><span class="linenum">2106</span></a>          <a class="var it5977" onMouseOver="hilite(5977)" onMouseOut="lolite()" onClick="logVariable('accepted_types')" href="../_variables/accepted_types.html">$accepted_types</a> = <a class="function" onClick="logFunction('optional_param_array')" href="../_functions/optional_param_array.html" onMouseOver="funcPopup(event,'optional_param_array')">optional_param_array</a>('accepted_types', '', <a class="constant" onClick="logConstant('PARAM_RAW')" href="../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>);
<a name="l2107"><span class="linenum">2107</span></a>          if (isset(<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>['children'])) {
<a name="l2108"><span class="linenum">2108</span></a>              if (!empty(<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>['children'])) {
<a name="l2109"><span class="linenum">2109</span></a>                  <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>['children'] = <a class="phpfunction" onClick="logFunction('array_filter')" href="../_functions/array_filter.html" onMouseOver="phpfuncPopup(event,'array_filter')">array_filter</a>(<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>['children'], array(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>, 'filter'));
<a name="l2110"><span class="linenum">2110</span></a>              }
<a name="l2111"><span class="linenum">2111</span></a>              return true; <span class="comment">// always return directories</span>
<a name="l2112"><span class="linenum">2112</span></a>          } else {
<a name="l2113"><span class="linenum">2113</span></a>              if (<a class="var it5977" onMouseOver="hilite(5977)" onMouseOut="lolite()" onClick="logVariable('accepted_types')" href="../_variables/accepted_types.html">$accepted_types</a> == '*' or empty(<a class="var it5977" onMouseOver="hilite(5977)" onMouseOut="lolite()" onClick="logVariable('accepted_types')" href="../_variables/accepted_types.html">$accepted_types</a>)
<a name="l2114"><span class="linenum">2114</span></a>                  <a class="function" onClick="logFunction('or')" href="../_functions/or.html" onMouseOver="funcPopup(event,'or')">or</a> (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it5977" onMouseOver="hilite(5977)" onMouseOut="lolite()" onClick="logVariable('accepted_types')" href="../_variables/accepted_types.html">$accepted_types</a>) and <a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>('*', <a class="var it5977" onMouseOver="hilite(5977)" onMouseOut="lolite()" onClick="logVariable('accepted_types')" href="../_variables/accepted_types.html">$accepted_types</a>))) {
<a name="l2115"><span class="linenum">2115</span></a>                  return true;
<a name="l2116"><span class="linenum">2116</span></a>              } else {
<a name="l2117"><span class="linenum">2117</span></a>                  foreach (<a class="var it5977" onMouseOver="hilite(5977)" onMouseOut="lolite()" onClick="logVariable('accepted_types')" href="../_variables/accepted_types.html">$accepted_types</a> as <a class="var it1691" onMouseOver="hilite(1691)" onMouseOut="lolite()" onClick="logVariable('ext')" href="../_variables/ext.html">$ext</a>) {
<a name="l2118"><span class="linenum">2118</span></a>                      if (<a class="phpfunction" onClick="logFunction('preg_match')" href="../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>('#'.<a class="var it1691" onMouseOver="hilite(1691)" onMouseOut="lolite()" onClick="logVariable('ext')" href="../_variables/ext.html">$ext</a>.'$#i', <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>['title'])) {
<a name="l2119"><span class="linenum">2119</span></a>                          return true;
<a name="l2120"><span class="linenum">2120</span></a>                      }
<a name="l2121"><span class="linenum">2121</span></a>                  }
<a name="l2122"><span class="linenum">2122</span></a>              }
<a name="l2123"><span class="linenum">2123</span></a>          }
<a name="l2124"><span class="linenum">2124</span></a>          return false;
<a name="l2125"><span class="linenum">2125</span></a>      }
<a name="l2126"><span class="linenum">2126</span></a>  
<a name="l2127"><span class="linenum">2127</span></a>      <span class="comment">/**</span>
<a name="l2128"><span class="linenum">2128</span></a>  <span class="comment">     * Given a path, and perhaps a search, get a list of files.</span>
<a name="l2129"><span class="linenum">2129</span></a>  <span class="comment">     *</span>
<a name="l2130"><span class="linenum">2130</span></a>  <span class="comment">     * See details on {@link http://docs.moodle.org/dev/Repository_plugins}</span>
<a name="l2131"><span class="linenum">2131</span></a>  <span class="comment">     *</span>
<a name="l2132"><span class="linenum">2132</span></a>  <span class="comment">     * @param string $path this parameter can a folder name, or a identification of folder</span>
<a name="l2133"><span class="linenum">2133</span></a>  <span class="comment">     * @param string $page the page number of file list</span>
<a name="l2134"><span class="linenum">2134</span></a>  <span class="comment">     * @return array the list of files, including meta infomation, containing the following keys</span>
<a name="l2135"><span class="linenum">2135</span></a>  <span class="comment">     *           manage, url to manage url</span>
<a name="l2136"><span class="linenum">2136</span></a>  <span class="comment">     *           client_id</span>
<a name="l2137"><span class="linenum">2137</span></a>  <span class="comment">     *           login, login form</span>
<a name="l2138"><span class="linenum">2138</span></a>  <span class="comment">     *           repo_id, active repository id</span>
<a name="l2139"><span class="linenum">2139</span></a>  <span class="comment">     *           login_btn_action, the login button action</span>
<a name="l2140"><span class="linenum">2140</span></a>  <span class="comment">     *           login_btn_label, the login button label</span>
<a name="l2141"><span class="linenum">2141</span></a>  <span class="comment">     *           total, number of results</span>
<a name="l2142"><span class="linenum">2142</span></a>  <span class="comment">     *           perpage, items per page</span>
<a name="l2143"><span class="linenum">2143</span></a>  <span class="comment">     *           page</span>
<a name="l2144"><span class="linenum">2144</span></a>  <span class="comment">     *           pages, total pages</span>
<a name="l2145"><span class="linenum">2145</span></a>  <span class="comment">     *           issearchresult, is it a search result?</span>
<a name="l2146"><span class="linenum">2146</span></a>  <span class="comment">     *           list, file list</span>
<a name="l2147"><span class="linenum">2147</span></a>  <span class="comment">     *           path, current path and parent path</span>
<a name="l2148"><span class="linenum">2148</span></a>  <span class="comment">     */</span>
<a name="l2149"><span class="linenum">2149</span></a>      public function <a class="function" onClick="logFunction('get_listing')" href="../_functions/get_listing.html" onMouseOver="funcPopup(event,'get_listing')">get_listing</a>(<a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a> = '', <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a> = '') {
<a name="l2150"><span class="linenum">2150</span></a>      }
<a name="l2151"><span class="linenum">2151</span></a>  
<a name="l2152"><span class="linenum">2152</span></a>  
<a name="l2153"><span class="linenum">2153</span></a>      <span class="comment">/**</span>
<a name="l2154"><span class="linenum">2154</span></a>  <span class="comment">     * Prepare the breadcrumb.</span>
<a name="l2155"><span class="linenum">2155</span></a>  <span class="comment">     *</span>
<a name="l2156"><span class="linenum">2156</span></a>  <span class="comment">     * @param array $breadcrumb contains each element of the breadcrumb.</span>
<a name="l2157"><span class="linenum">2157</span></a>  <span class="comment">     * @return array of breadcrumb elements.</span>
<a name="l2158"><span class="linenum">2158</span></a>  <span class="comment">     * @since Moodle 2.3.3</span>
<a name="l2159"><span class="linenum">2159</span></a>  <span class="comment">     */</span>
<a name="l2160"><span class="linenum">2160</span></a>      protected static function <a class="function" onClick="logFunction('prepare_breadcrumb')" href="../_functions/prepare_breadcrumb.html" onMouseOver="funcPopup(event,'prepare_breadcrumb')">prepare_breadcrumb</a>(<a class="var it5420" onMouseOver="hilite(5420)" onMouseOut="lolite()" onClick="logVariable('breadcrumb')" href="../_variables/breadcrumb.html">$breadcrumb</a>) {
<a name="l2161"><span class="linenum">2161</span></a>          global <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l2162"><span class="linenum">2162</span></a>          <a class="var it21419" onMouseOver="hilite(21419)" onMouseOut="lolite()" onClick="logVariable('foldericon')" href="../_variables/foldericon.html">$foldericon</a> = <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_url')" href="../_functions/pix_url.html" onMouseOver="funcPopup(event,'pix_url')">pix_url</a>(<a class="function" onClick="logFunction('file_folder_icon')" href="../_functions/file_folder_icon.html" onMouseOver="funcPopup(event,'file_folder_icon')">file_folder_icon</a>(24))-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(false);
<a name="l2163"><span class="linenum">2163</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('len')" href="../_variables/len.html">$len</a> = <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it5420" onMouseOver="hilite(5420)" onMouseOut="lolite()" onClick="logVariable('breadcrumb')" href="../_variables/breadcrumb.html">$breadcrumb</a>);
<a name="l2164"><span class="linenum">2164</span></a>          for (<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> = 0; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> &lt; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('len')" href="../_variables/len.html">$len</a>; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>++) {
<a name="l2165"><span class="linenum">2165</span></a>              if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it5420" onMouseOver="hilite(5420)" onMouseOut="lolite()" onClick="logVariable('breadcrumb')" href="../_variables/breadcrumb.html">$breadcrumb</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>]) &amp;&amp; !isset(<a class="var it5420" onMouseOver="hilite(5420)" onMouseOut="lolite()" onClick="logVariable('breadcrumb')" href="../_variables/breadcrumb.html">$breadcrumb</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>]['icon'])) {
<a name="l2166"><span class="linenum">2166</span></a>                  <a class="var it5420" onMouseOver="hilite(5420)" onMouseOut="lolite()" onClick="logVariable('breadcrumb')" href="../_variables/breadcrumb.html">$breadcrumb</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>]['icon'] = <a class="var it21419" onMouseOver="hilite(21419)" onMouseOut="lolite()" onClick="logVariable('foldericon')" href="../_variables/foldericon.html">$foldericon</a>;
<a name="l2167"><span class="linenum">2167</span></a>              } else if (<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it5420" onMouseOver="hilite(5420)" onMouseOut="lolite()" onClick="logVariable('breadcrumb')" href="../_variables/breadcrumb.html">$breadcrumb</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>]) &amp;&amp; !isset(<a class="var it5420" onMouseOver="hilite(5420)" onMouseOut="lolite()" onClick="logVariable('breadcrumb')" href="../_variables/breadcrumb.html">$breadcrumb</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>]-&gt;icon)) {
<a name="l2168"><span class="linenum">2168</span></a>                  <a class="var it5420" onMouseOver="hilite(5420)" onMouseOut="lolite()" onClick="logVariable('breadcrumb')" href="../_variables/breadcrumb.html">$breadcrumb</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>]-&gt;icon = <a class="var it21419" onMouseOver="hilite(21419)" onMouseOut="lolite()" onClick="logVariable('foldericon')" href="../_variables/foldericon.html">$foldericon</a>;
<a name="l2169"><span class="linenum">2169</span></a>              }
<a name="l2170"><span class="linenum">2170</span></a>          }
<a name="l2171"><span class="linenum">2171</span></a>          return <a class="var it5420" onMouseOver="hilite(5420)" onMouseOut="lolite()" onClick="logVariable('breadcrumb')" href="../_variables/breadcrumb.html">$breadcrumb</a>;
<a name="l2172"><span class="linenum">2172</span></a>      }
<a name="l2173"><span class="linenum">2173</span></a>  
<a name="l2174"><span class="linenum">2174</span></a>      <span class="comment">/**</span>
<a name="l2175"><span class="linenum">2175</span></a>  <span class="comment">     * Prepare the file/folder listing.</span>
<a name="l2176"><span class="linenum">2176</span></a>  <span class="comment">     *</span>
<a name="l2177"><span class="linenum">2177</span></a>  <span class="comment">     * @param array $list of files and folders.</span>
<a name="l2178"><span class="linenum">2178</span></a>  <span class="comment">     * @return array of files and folders.</span>
<a name="l2179"><span class="linenum">2179</span></a>  <span class="comment">     * @since Moodle 2.3.3</span>
<a name="l2180"><span class="linenum">2180</span></a>  <span class="comment">     */</span>
<a name="l2181"><span class="linenum">2181</span></a>      protected static function <a class="function" onClick="logFunction('prepare_list')" href="../_functions/prepare_list.html" onMouseOver="funcPopup(event,'prepare_list')">prepare_list</a>(<a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../_variables/list.html">$list</a>) {
<a name="l2182"><span class="linenum">2182</span></a>          global <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l2183"><span class="linenum">2183</span></a>          <a class="var it21419" onMouseOver="hilite(21419)" onMouseOut="lolite()" onClick="logVariable('foldericon')" href="../_variables/foldericon.html">$foldericon</a> = <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_url')" href="../_functions/pix_url.html" onMouseOver="funcPopup(event,'pix_url')">pix_url</a>(<a class="function" onClick="logFunction('file_folder_icon')" href="../_functions/file_folder_icon.html" onMouseOver="funcPopup(event,'file_folder_icon')">file_folder_icon</a>(24))-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(false);
<a name="l2184"><span class="linenum">2184</span></a>  
<a name="l2185"><span class="linenum">2185</span></a>  <span class="comment">        // Reset the array keys because non-numeric keys will create an object when converted to JSON.</span>
<a name="l2186"><span class="linenum">2186</span></a>          <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../_variables/list.html">$list</a> = <a class="phpfunction" onClick="logFunction('array_values')" href="../_functions/array_values.html" onMouseOver="phpfuncPopup(event,'array_values')">array_values</a>(<a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../_variables/list.html">$list</a>);
<a name="l2187"><span class="linenum">2187</span></a>  
<a name="l2188"><span class="linenum">2188</span></a>          <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('len')" href="../_variables/len.html">$len</a> = <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../_variables/list.html">$list</a>);
<a name="l2189"><span class="linenum">2189</span></a>          for (<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> = 0; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> &lt; <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('len')" href="../_variables/len.html">$len</a>; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>++) {
<a name="l2190"><span class="linenum">2190</span></a>              if (<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../_variables/list.html">$list</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>])) {
<a name="l2191"><span class="linenum">2191</span></a>                  <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a> = (array)<a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../_variables/list.html">$list</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>];
<a name="l2192"><span class="linenum">2192</span></a>                  <a class="var it21420" onMouseOver="hilite(21420)" onMouseOut="lolite()" onClick="logVariable('converttoobject')" href="../_variables/converttoobject.html">$converttoobject</a> = true;
<a name="l2193"><span class="linenum">2193</span></a>              } else {
<a name="l2194"><span class="linenum">2194</span></a>                  <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a> =&amp; <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../_variables/list.html">$list</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>];
<a name="l2195"><span class="linenum">2195</span></a>                  <a class="var it21420" onMouseOver="hilite(21420)" onMouseOut="lolite()" onClick="logVariable('converttoobject')" href="../_variables/converttoobject.html">$converttoobject</a> = false;
<a name="l2196"><span class="linenum">2196</span></a>              }
<a name="l2197"><span class="linenum">2197</span></a>              if (isset(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>['size'])) {
<a name="l2198"><span class="linenum">2198</span></a>                  <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>['size'] = (int)<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>['size'];
<a name="l2199"><span class="linenum">2199</span></a>                  <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>['size_f'] = <a class="function" onClick="logFunction('display_size')" href="../_functions/display_size.html" onMouseOver="funcPopup(event,'display_size')">display_size</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>['size']);
<a name="l2200"><span class="linenum">2200</span></a>              }
<a name="l2201"><span class="linenum">2201</span></a>              if (isset(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>['license']) &amp;&amp; <a class="function" onClick="logFunction('get_string_manager')" href="../_functions/get_string_manager.html" onMouseOver="funcPopup(event,'get_string_manager')">get_string_manager</a>()-&gt;<a class="function" onClick="logFunction('string_exists')" href="../_functions/string_exists.html" onMouseOver="funcPopup(event,'string_exists')">string_exists</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>['license'], 'license')) {
<a name="l2202"><span class="linenum">2202</span></a>                  <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>['license_f'] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>['license'], 'license');
<a name="l2203"><span class="linenum">2203</span></a>              }
<a name="l2204"><span class="linenum">2204</span></a>              if (isset(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>['image_width']) &amp;&amp; isset(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>['image_height'])) {
<a name="l2205"><span class="linenum">2205</span></a>                  <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a> = array('width' =&gt; <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>['image_width'], 'height' =&gt; <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>['image_height']);
<a name="l2206"><span class="linenum">2206</span></a>                  <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>['dimensions'] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('imagesize', 'repository', (object)<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>);
<a name="l2207"><span class="linenum">2207</span></a>              }
<a name="l2208"><span class="linenum">2208</span></a>              foreach (array('date', 'datemodified', 'datecreated') as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>) {
<a name="l2209"><span class="linenum">2209</span></a>                  if (!isset(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>]) &amp;&amp; isset(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>['date'])) {
<a name="l2210"><span class="linenum">2210</span></a>                      <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>] = <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>['date'];
<a name="l2211"><span class="linenum">2211</span></a>                  }
<a name="l2212"><span class="linenum">2212</span></a>                  if (isset(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>])) {
<a name="l2213"><span class="linenum">2213</span></a>  <span class="comment">                    // must be UNIX timestamp</span>
<a name="l2214"><span class="linenum">2214</span></a>                      <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>] = (int)<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>];
<a name="l2215"><span class="linenum">2215</span></a>                      if (!<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>]) {
<a name="l2216"><span class="linenum">2216</span></a>                          unset(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>]);
<a name="l2217"><span class="linenum">2217</span></a>                      } else {
<a name="l2218"><span class="linenum">2218</span></a>                          <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>.'_f'] = <a class="function" onClick="logFunction('userdate')" href="../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>], <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('strftimedatetime', 'langconfig'));
<a name="l2219"><span class="linenum">2219</span></a>                          <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>.'_f_s'] = <a class="function" onClick="logFunction('userdate')" href="../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>], <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('strftimedatetimeshort', 'langconfig'));
<a name="l2220"><span class="linenum">2220</span></a>                      }
<a name="l2221"><span class="linenum">2221</span></a>                  }
<a name="l2222"><span class="linenum">2222</span></a>              }
<a name="l2223"><span class="linenum">2223</span></a>              <a class="var it21421" onMouseOver="hilite(21421)" onMouseOut="lolite()" onClick="logVariable('isfolder')" href="../_variables/isfolder.html">$isfolder</a> = (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('children', <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>) || (isset(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>['type']) &amp;&amp; <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>['type'] == 'folder'));
<a name="l2224"><span class="linenum">2224</span></a>              <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a> = null;
<a name="l2225"><span class="linenum">2225</span></a>              if (isset(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>['title'])) {
<a name="l2226"><span class="linenum">2226</span></a>                  <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a> = <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>['title'];
<a name="l2227"><span class="linenum">2227</span></a>              }
<a name="l2228"><span class="linenum">2228</span></a>              else if (isset(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>['fullname'])) {
<a name="l2229"><span class="linenum">2229</span></a>                  <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a> = <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>['fullname'];
<a name="l2230"><span class="linenum">2230</span></a>              }
<a name="l2231"><span class="linenum">2231</span></a>              if (!isset(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>['mimetype']) &amp;&amp; !<a class="var it21421" onMouseOver="hilite(21421)" onMouseOut="lolite()" onClick="logVariable('isfolder')" href="../_variables/isfolder.html">$isfolder</a> &amp;&amp; <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>) {
<a name="l2232"><span class="linenum">2232</span></a>                  <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>['mimetype'] = <a class="function" onClick="logFunction('get_mimetype_description')" href="../_functions/get_mimetype_description.html" onMouseOver="funcPopup(event,'get_mimetype_description')">get_mimetype_description</a>(array('filename' =&gt; <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>));
<a name="l2233"><span class="linenum">2233</span></a>              }
<a name="l2234"><span class="linenum">2234</span></a>              if (!isset(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>['icon'])) {
<a name="l2235"><span class="linenum">2235</span></a>                  if (<a class="var it21421" onMouseOver="hilite(21421)" onMouseOut="lolite()" onClick="logVariable('isfolder')" href="../_variables/isfolder.html">$isfolder</a>) {
<a name="l2236"><span class="linenum">2236</span></a>                      <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>['icon'] = <a class="var it21419" onMouseOver="hilite(21419)" onMouseOut="lolite()" onClick="logVariable('foldericon')" href="../_variables/foldericon.html">$foldericon</a>;
<a name="l2237"><span class="linenum">2237</span></a>                  } else if (<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>) {
<a name="l2238"><span class="linenum">2238</span></a>                      <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>['icon'] = <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_url')" href="../_functions/pix_url.html" onMouseOver="funcPopup(event,'pix_url')">pix_url</a>(<a class="function" onClick="logFunction('file_extension_icon')" href="../_functions/file_extension_icon.html" onMouseOver="funcPopup(event,'file_extension_icon')">file_extension_icon</a>(<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>, 24))-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(false);
<a name="l2239"><span class="linenum">2239</span></a>                  }
<a name="l2240"><span class="linenum">2240</span></a>              }
<a name="l2241"><span class="linenum">2241</span></a>  
<a name="l2242"><span class="linenum">2242</span></a>  <span class="comment">            // Recursively loop over children.</span>
<a name="l2243"><span class="linenum">2243</span></a>              if (isset(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>['children'])) {
<a name="l2244"><span class="linenum">2244</span></a>                  <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>['children'] = self::<a class="function" onClick="logFunction('prepare_list')" href="../_functions/prepare_list.html" onMouseOver="funcPopup(event,'prepare_list')">prepare_list</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>['children']);
<a name="l2245"><span class="linenum">2245</span></a>              }
<a name="l2246"><span class="linenum">2246</span></a>  
<a name="l2247"><span class="linenum">2247</span></a>  <span class="comment">            // Convert the array back to an object.</span>
<a name="l2248"><span class="linenum">2248</span></a>              if (<a class="var it21420" onMouseOver="hilite(21420)" onMouseOut="lolite()" onClick="logVariable('converttoobject')" href="../_variables/converttoobject.html">$converttoobject</a>) {
<a name="l2249"><span class="linenum">2249</span></a>                  <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../_variables/list.html">$list</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>] = (object)<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>;
<a name="l2250"><span class="linenum">2250</span></a>              }
<a name="l2251"><span class="linenum">2251</span></a>          }
<a name="l2252"><span class="linenum">2252</span></a>          return <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../_variables/list.html">$list</a>;
<a name="l2253"><span class="linenum">2253</span></a>      }
<a name="l2254"><span class="linenum">2254</span></a>  
<a name="l2255"><span class="linenum">2255</span></a>      <span class="comment">/**</span>
<a name="l2256"><span class="linenum">2256</span></a>  <span class="comment">     * Prepares list of files before passing it to AJAX, makes sure data is in the correct</span>
<a name="l2257"><span class="linenum">2257</span></a>  <span class="comment">     * format and stores formatted values.</span>
<a name="l2258"><span class="linenum">2258</span></a>  <span class="comment">     *</span>
<a name="l2259"><span class="linenum">2259</span></a>  <span class="comment">     * @param array|stdClass $listing result of get_listing() or search() or file_get_drafarea_files()</span>
<a name="l2260"><span class="linenum">2260</span></a>  <span class="comment">     * @return array</span>
<a name="l2261"><span class="linenum">2261</span></a>  <span class="comment">     */</span>
<a name="l2262"><span class="linenum">2262</span></a>      public static function <a class="function" onClick="logFunction('prepare_listing')" href="../_functions/prepare_listing.html" onMouseOver="funcPopup(event,'prepare_listing')">prepare_listing</a>(<a class="var it3661" onMouseOver="hilite(3661)" onMouseOut="lolite()" onClick="logVariable('listing')" href="../_variables/listing.html">$listing</a>) {
<a name="l2263"><span class="linenum">2263</span></a>          <a class="var it21422" onMouseOver="hilite(21422)" onMouseOut="lolite()" onClick="logVariable('wasobject')" href="../_variables/wasobject.html">$wasobject</a> = false;
<a name="l2264"><span class="linenum">2264</span></a>          if (<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it3661" onMouseOver="hilite(3661)" onMouseOut="lolite()" onClick="logVariable('listing')" href="../_variables/listing.html">$listing</a>)) {
<a name="l2265"><span class="linenum">2265</span></a>              <a class="var it3661" onMouseOver="hilite(3661)" onMouseOut="lolite()" onClick="logVariable('listing')" href="../_variables/listing.html">$listing</a> = (array) <a class="var it3661" onMouseOver="hilite(3661)" onMouseOut="lolite()" onClick="logVariable('listing')" href="../_variables/listing.html">$listing</a>;
<a name="l2266"><span class="linenum">2266</span></a>              <a class="var it21422" onMouseOver="hilite(21422)" onMouseOut="lolite()" onClick="logVariable('wasobject')" href="../_variables/wasobject.html">$wasobject</a> = true;
<a name="l2267"><span class="linenum">2267</span></a>          }
<a name="l2268"><span class="linenum">2268</span></a>  
<a name="l2269"><span class="linenum">2269</span></a>  <span class="comment">        // Prepare the breadcrumb, passed as 'path'.</span>
<a name="l2270"><span class="linenum">2270</span></a>          if (isset(<a class="var it3661" onMouseOver="hilite(3661)" onMouseOut="lolite()" onClick="logVariable('listing')" href="../_variables/listing.html">$listing</a>['path']) &amp;&amp; <a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it3661" onMouseOver="hilite(3661)" onMouseOut="lolite()" onClick="logVariable('listing')" href="../_variables/listing.html">$listing</a>['path'])) {
<a name="l2271"><span class="linenum">2271</span></a>              <a class="var it3661" onMouseOver="hilite(3661)" onMouseOut="lolite()" onClick="logVariable('listing')" href="../_variables/listing.html">$listing</a>['path'] = self::<a class="function" onClick="logFunction('prepare_breadcrumb')" href="../_functions/prepare_breadcrumb.html" onMouseOver="funcPopup(event,'prepare_breadcrumb')">prepare_breadcrumb</a>(<a class="var it3661" onMouseOver="hilite(3661)" onMouseOut="lolite()" onClick="logVariable('listing')" href="../_variables/listing.html">$listing</a>['path']);
<a name="l2272"><span class="linenum">2272</span></a>          }
<a name="l2273"><span class="linenum">2273</span></a>  
<a name="l2274"><span class="linenum">2274</span></a>  <span class="comment">        // Prepare the listing of objects.</span>
<a name="l2275"><span class="linenum">2275</span></a>          if (isset(<a class="var it3661" onMouseOver="hilite(3661)" onMouseOut="lolite()" onClick="logVariable('listing')" href="../_variables/listing.html">$listing</a>['list']) &amp;&amp; <a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it3661" onMouseOver="hilite(3661)" onMouseOut="lolite()" onClick="logVariable('listing')" href="../_variables/listing.html">$listing</a>['list'])) {
<a name="l2276"><span class="linenum">2276</span></a>              <a class="var it3661" onMouseOver="hilite(3661)" onMouseOut="lolite()" onClick="logVariable('listing')" href="../_variables/listing.html">$listing</a>['list'] = self::<a class="function" onClick="logFunction('prepare_list')" href="../_functions/prepare_list.html" onMouseOver="funcPopup(event,'prepare_list')">prepare_list</a>(<a class="var it3661" onMouseOver="hilite(3661)" onMouseOut="lolite()" onClick="logVariable('listing')" href="../_variables/listing.html">$listing</a>['list']);
<a name="l2277"><span class="linenum">2277</span></a>          }
<a name="l2278"><span class="linenum">2278</span></a>  
<a name="l2279"><span class="linenum">2279</span></a>  <span class="comment">        // Convert back to an object.</span>
<a name="l2280"><span class="linenum">2280</span></a>          if (<a class="var it21422" onMouseOver="hilite(21422)" onMouseOut="lolite()" onClick="logVariable('wasobject')" href="../_variables/wasobject.html">$wasobject</a>) {
<a name="l2281"><span class="linenum">2281</span></a>              <a class="var it3661" onMouseOver="hilite(3661)" onMouseOut="lolite()" onClick="logVariable('listing')" href="../_variables/listing.html">$listing</a> = (object) <a class="var it3661" onMouseOver="hilite(3661)" onMouseOut="lolite()" onClick="logVariable('listing')" href="../_variables/listing.html">$listing</a>;
<a name="l2282"><span class="linenum">2282</span></a>          }
<a name="l2283"><span class="linenum">2283</span></a>          return <a class="var it3661" onMouseOver="hilite(3661)" onMouseOut="lolite()" onClick="logVariable('listing')" href="../_variables/listing.html">$listing</a>;
<a name="l2284"><span class="linenum">2284</span></a>      }
<a name="l2285"><span class="linenum">2285</span></a>  
<a name="l2286"><span class="linenum">2286</span></a>      <span class="comment">/**</span>
<a name="l2287"><span class="linenum">2287</span></a>  <span class="comment">     * Search files in repository</span>
<a name="l2288"><span class="linenum">2288</span></a>  <span class="comment">     * When doing global search, $search_text will be used as</span>
<a name="l2289"><span class="linenum">2289</span></a>  <span class="comment">     * keyword.</span>
<a name="l2290"><span class="linenum">2290</span></a>  <span class="comment">     *</span>
<a name="l2291"><span class="linenum">2291</span></a>  <span class="comment">     * @param string $search_text search key word</span>
<a name="l2292"><span class="linenum">2292</span></a>  <span class="comment">     * @param int $page page</span>
<a name="l2293"><span class="linenum">2293</span></a>  <span class="comment">     * @return mixed see {@link repository::get_listing()}</span>
<a name="l2294"><span class="linenum">2294</span></a>  <span class="comment">     */</span>
<a name="l2295"><span class="linenum">2295</span></a>      public function <a class="function" onClick="logFunction('search')" href="../_functions/search.html" onMouseOver="funcPopup(event,'search')">search</a>(<a class="var it5426" onMouseOver="hilite(5426)" onMouseOut="lolite()" onClick="logVariable('search_text')" href="../_variables/search_text.html">$search_text</a>, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a> = 0) {
<a name="l2296"><span class="linenum">2296</span></a>          <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../_variables/list.html">$list</a> = array();
<a name="l2297"><span class="linenum">2297</span></a>          <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../_variables/list.html">$list</a>['list'] = array();
<a name="l2298"><span class="linenum">2298</span></a>          return false;
<a name="l2299"><span class="linenum">2299</span></a>      }
<a name="l2300"><span class="linenum">2300</span></a>  
<a name="l2301"><span class="linenum">2301</span></a>      <span class="comment">/**</span>
<a name="l2302"><span class="linenum">2302</span></a>  <span class="comment">     * Logout from repository instance</span>
<a name="l2303"><span class="linenum">2303</span></a>  <span class="comment">     * By default, this function will return a login form</span>
<a name="l2304"><span class="linenum">2304</span></a>  <span class="comment">     *</span>
<a name="l2305"><span class="linenum">2305</span></a>  <span class="comment">     * @return string</span>
<a name="l2306"><span class="linenum">2306</span></a>  <span class="comment">     */</span>
<a name="l2307"><span class="linenum">2307</span></a>      public function <a class="function" onClick="logFunction('logout')" href="../_functions/logout.html" onMouseOver="funcPopup(event,'logout')">logout</a>(){
<a name="l2308"><span class="linenum">2308</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('print_login')" href="../_functions/print_login.html" onMouseOver="funcPopup(event,'print_login')">print_login</a>();
<a name="l2309"><span class="linenum">2309</span></a>      }
<a name="l2310"><span class="linenum">2310</span></a>  
<a name="l2311"><span class="linenum">2311</span></a>      <span class="comment">/**</span>
<a name="l2312"><span class="linenum">2312</span></a>  <span class="comment">     * To check whether the user is logged in.</span>
<a name="l2313"><span class="linenum">2313</span></a>  <span class="comment">     *</span>
<a name="l2314"><span class="linenum">2314</span></a>  <span class="comment">     * @return bool</span>
<a name="l2315"><span class="linenum">2315</span></a>  <span class="comment">     */</span>
<a name="l2316"><span class="linenum">2316</span></a>      public function <a class="function" onClick="logFunction('check_login')" href="../_functions/check_login.html" onMouseOver="funcPopup(event,'check_login')">check_login</a>(){
<a name="l2317"><span class="linenum">2317</span></a>          return true;
<a name="l2318"><span class="linenum">2318</span></a>      }
<a name="l2319"><span class="linenum">2319</span></a>  
<a name="l2320"><span class="linenum">2320</span></a>  
<a name="l2321"><span class="linenum">2321</span></a>      <span class="comment">/**</span>
<a name="l2322"><span class="linenum">2322</span></a>  <span class="comment">     * Show the login screen, if required</span>
<a name="l2323"><span class="linenum">2323</span></a>  <span class="comment">     *</span>
<a name="l2324"><span class="linenum">2324</span></a>  <span class="comment">     * @return string</span>
<a name="l2325"><span class="linenum">2325</span></a>  <span class="comment">     */</span>
<a name="l2326"><span class="linenum">2326</span></a>      public function <a class="function" onClick="logFunction('print_login')" href="../_functions/print_login.html" onMouseOver="funcPopup(event,'print_login')">print_login</a>(){
<a name="l2327"><span class="linenum">2327</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_listing')" href="../_functions/get_listing.html" onMouseOver="funcPopup(event,'get_listing')">get_listing</a>();
<a name="l2328"><span class="linenum">2328</span></a>      }
<a name="l2329"><span class="linenum">2329</span></a>  
<a name="l2330"><span class="linenum">2330</span></a>      <span class="comment">/**</span>
<a name="l2331"><span class="linenum">2331</span></a>  <span class="comment">     * Show the search screen, if required</span>
<a name="l2332"><span class="linenum">2332</span></a>  <span class="comment">     *</span>
<a name="l2333"><span class="linenum">2333</span></a>  <span class="comment">     * @return string</span>
<a name="l2334"><span class="linenum">2334</span></a>  <span class="comment">     */</span>
<a name="l2335"><span class="linenum">2335</span></a>      public function <a class="function" onClick="logFunction('print_search')" href="../_functions/print_search.html" onMouseOver="funcPopup(event,'print_search')">print_search</a>() {
<a name="l2336"><span class="linenum">2336</span></a>          global <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>;
<a name="l2337"><span class="linenum">2337</span></a>          <a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('renderer')" href="../_variables/renderer.html">$renderer</a> = <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>('core', 'files');
<a name="l2338"><span class="linenum">2338</span></a>          return <a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('renderer')" href="../_variables/renderer.html">$renderer</a>-&gt;<a class="function" onClick="logFunction('repository_default_searchform')" href="../_functions/repository_default_searchform.html" onMouseOver="funcPopup(event,'repository_default_searchform')">repository_default_searchform</a>();
<a name="l2339"><span class="linenum">2339</span></a>      }
<a name="l2340"><span class="linenum">2340</span></a>  
<a name="l2341"><span class="linenum">2341</span></a>      <span class="comment">/**</span>
<a name="l2342"><span class="linenum">2342</span></a>  <span class="comment">     * For oauth like external authentication, when external repository direct user back to moodle,</span>
<a name="l2343"><span class="linenum">2343</span></a>  <span class="comment">     * this function will be called to set up token and token_secret</span>
<a name="l2344"><span class="linenum">2344</span></a>  <span class="comment">     */</span>
<a name="l2345"><span class="linenum">2345</span></a>      public function <a class="function" onClick="logFunction('callback')" href="../_functions/callback.html" onMouseOver="funcPopup(event,'callback')">callback</a>() {
<a name="l2346"><span class="linenum">2346</span></a>      }
<a name="l2347"><span class="linenum">2347</span></a>  
<a name="l2348"><span class="linenum">2348</span></a>      <span class="comment">/**</span>
<a name="l2349"><span class="linenum">2349</span></a>  <span class="comment">     * is it possible to do glboal search?</span>
<a name="l2350"><span class="linenum">2350</span></a>  <span class="comment">     *</span>
<a name="l2351"><span class="linenum">2351</span></a>  <span class="comment">     * @return bool</span>
<a name="l2352"><span class="linenum">2352</span></a>  <span class="comment">     */</span>
<a name="l2353"><span class="linenum">2353</span></a>      public function <a class="function" onClick="logFunction('global_search')" href="../_functions/global_search.html" onMouseOver="funcPopup(event,'global_search')">global_search</a>() {
<a name="l2354"><span class="linenum">2354</span></a>          return false;
<a name="l2355"><span class="linenum">2355</span></a>      }
<a name="l2356"><span class="linenum">2356</span></a>  
<a name="l2357"><span class="linenum">2357</span></a>      <span class="comment">/**</span>
<a name="l2358"><span class="linenum">2358</span></a>  <span class="comment">     * Defines operations that happen occasionally on cron</span>
<a name="l2359"><span class="linenum">2359</span></a>  <span class="comment">     *</span>
<a name="l2360"><span class="linenum">2360</span></a>  <span class="comment">     * @return bool</span>
<a name="l2361"><span class="linenum">2361</span></a>  <span class="comment">     */</span>
<a name="l2362"><span class="linenum">2362</span></a>      public function <a class="function" onClick="logFunction('cron')" href="../_functions/cron.html" onMouseOver="funcPopup(event,'cron')">cron</a>() {
<a name="l2363"><span class="linenum">2363</span></a>          return true;
<a name="l2364"><span class="linenum">2364</span></a>      }
<a name="l2365"><span class="linenum">2365</span></a>  
<a name="l2366"><span class="linenum">2366</span></a>      <span class="comment">/**</span>
<a name="l2367"><span class="linenum">2367</span></a>  <span class="comment">     * function which is run when the type is created (moodle administrator add the plugin)</span>
<a name="l2368"><span class="linenum">2368</span></a>  <span class="comment">     *</span>
<a name="l2369"><span class="linenum">2369</span></a>  <span class="comment">     * @return bool success or fail?</span>
<a name="l2370"><span class="linenum">2370</span></a>  <span class="comment">     */</span>
<a name="l2371"><span class="linenum">2371</span></a>      public static function <a class="function" onClick="logFunction('plugin_init')" href="../_functions/plugin_init.html" onMouseOver="funcPopup(event,'plugin_init')">plugin_init</a>() {
<a name="l2372"><span class="linenum">2372</span></a>          return true;
<a name="l2373"><span class="linenum">2373</span></a>      }
<a name="l2374"><span class="linenum">2374</span></a>  
<a name="l2375"><span class="linenum">2375</span></a>      <span class="comment">/**</span>
<a name="l2376"><span class="linenum">2376</span></a>  <span class="comment">     * Edit/Create Admin Settings Moodle form</span>
<a name="l2377"><span class="linenum">2377</span></a>  <span class="comment">     *</span>
<a name="l2378"><span class="linenum">2378</span></a>  <span class="comment">     * @param moodleform $mform Moodle form (passed by reference)</span>
<a name="l2379"><span class="linenum">2379</span></a>  <span class="comment">     * @param string $classname repository class name</span>
<a name="l2380"><span class="linenum">2380</span></a>  <span class="comment">     */</span>
<a name="l2381"><span class="linenum">2381</span></a>      public static function <a class="function" onClick="logFunction('type_config_form')" href="../_functions/type_config_form.html" onMouseOver="funcPopup(event,'type_config_form')">type_config_form</a>(<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>, <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a> = 'repository') {
<a name="l2382"><span class="linenum">2382</span></a>          <a class="var it21423" onMouseOver="hilite(21423)" onMouseOut="lolite()" onClick="logVariable('instnaceoptions')" href="../_variables/instnaceoptions.html">$instnaceoptions</a> = <a class="phpfunction" onClick="logFunction('call_user_func')" href="../_functions/call_user_func.html" onMouseOver="phpfuncPopup(event,'call_user_func')">call_user_func</a>(array(<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a>, 'get_instance_option_names'), <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>, <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a>);
<a name="l2383"><span class="linenum">2383</span></a>          if (empty(<a class="var it21423" onMouseOver="hilite(21423)" onMouseOut="lolite()" onClick="logVariable('instnaceoptions')" href="../_variables/instnaceoptions.html">$instnaceoptions</a>)) {
<a name="l2384"><span class="linenum">2384</span></a>  <span class="comment">            // this plugin has only one instance</span>
<a name="l2385"><span class="linenum">2385</span></a>  <span class="comment">            // so we need to give it a name</span>
<a name="l2386"><span class="linenum">2386</span></a>  <span class="comment">            // it can be empty, then moodle will look for instance name from language string</span>
<a name="l2387"><span class="linenum">2387</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('text', 'pluginname', <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('pluginname', 'repository'), array('size' =&gt; '40'));
<a name="l2388"><span class="linenum">2388</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('static', 'pluginnamehelp', '', <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('pluginnamehelp', 'repository'));
<a name="l2389"><span class="linenum">2389</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('pluginname', <a class="constant" onClick="logConstant('PARAM_TEXT')" href="../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>);
<a name="l2390"><span class="linenum">2390</span></a>          }
<a name="l2391"><span class="linenum">2391</span></a>      }
<a name="l2392"><span class="linenum">2392</span></a>  
<a name="l2393"><span class="linenum">2393</span></a>      <span class="comment">/**</span>
<a name="l2394"><span class="linenum">2394</span></a>  <span class="comment">     * Validate Admin Settings Moodle form</span>
<a name="l2395"><span class="linenum">2395</span></a>  <span class="comment">     *</span>
<a name="l2396"><span class="linenum">2396</span></a>  <span class="comment">     * @static</span>
<a name="l2397"><span class="linenum">2397</span></a>  <span class="comment">     * @param moodleform $mform Moodle form (passed by reference)</span>
<a name="l2398"><span class="linenum">2398</span></a>  <span class="comment">     * @param array $data array of (&quot;fieldname&quot;=&gt;value) of submitted data</span>
<a name="l2399"><span class="linenum">2399</span></a>  <span class="comment">     * @param array $errors array of (&quot;fieldname&quot;=&gt;errormessage) of errors</span>
<a name="l2400"><span class="linenum">2400</span></a>  <span class="comment">     * @return array array of errors</span>
<a name="l2401"><span class="linenum">2401</span></a>  <span class="comment">     */</span>
<a name="l2402"><span class="linenum">2402</span></a>      public static function <a class="function" onClick="logFunction('type_form_validation')" href="../_functions/type_form_validation.html" onMouseOver="funcPopup(event,'type_form_validation')">type_form_validation</a>(<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>, <a class="var it224" onMouseOver="hilite(224)" onMouseOut="lolite()" onClick="logVariable('errors')" href="../_variables/errors.html">$errors</a>) {
<a name="l2403"><span class="linenum">2403</span></a>          return <a class="var it224" onMouseOver="hilite(224)" onMouseOut="lolite()" onClick="logVariable('errors')" href="../_variables/errors.html">$errors</a>;
<a name="l2404"><span class="linenum">2404</span></a>      }
<a name="l2405"><span class="linenum">2405</span></a>  
<a name="l2406"><span class="linenum">2406</span></a>  
<a name="l2407"><span class="linenum">2407</span></a>      <span class="comment">/**</span>
<a name="l2408"><span class="linenum">2408</span></a>  <span class="comment">     * Edit/Create Instance Settings Moodle form</span>
<a name="l2409"><span class="linenum">2409</span></a>  <span class="comment">     *</span>
<a name="l2410"><span class="linenum">2410</span></a>  <span class="comment">     * @param moodleform $mform Moodle form (passed by reference)</span>
<a name="l2411"><span class="linenum">2411</span></a>  <span class="comment">     */</span>
<a name="l2412"><span class="linenum">2412</span></a>      public static function <a class="function" onClick="logFunction('instance_config_form')" href="../_functions/instance_config_form.html" onMouseOver="funcPopup(event,'instance_config_form')">instance_config_form</a>(<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>) {
<a name="l2413"><span class="linenum">2413</span></a>      }
<a name="l2414"><span class="linenum">2414</span></a>  
<a name="l2415"><span class="linenum">2415</span></a>      <span class="comment">/**</span>
<a name="l2416"><span class="linenum">2416</span></a>  <span class="comment">     * Return names of the general options.</span>
<a name="l2417"><span class="linenum">2417</span></a>  <span class="comment">     * By default: no general option name</span>
<a name="l2418"><span class="linenum">2418</span></a>  <span class="comment">     *</span>
<a name="l2419"><span class="linenum">2419</span></a>  <span class="comment">     * @return array</span>
<a name="l2420"><span class="linenum">2420</span></a>  <span class="comment">     */</span>
<a name="l2421"><span class="linenum">2421</span></a>      public static function <a class="function" onClick="logFunction('get_type_option_names')" href="../_functions/get_type_option_names.html" onMouseOver="funcPopup(event,'get_type_option_names')">get_type_option_names</a>() {
<a name="l2422"><span class="linenum">2422</span></a>          return array('pluginname');
<a name="l2423"><span class="linenum">2423</span></a>      }
<a name="l2424"><span class="linenum">2424</span></a>  
<a name="l2425"><span class="linenum">2425</span></a>      <span class="comment">/**</span>
<a name="l2426"><span class="linenum">2426</span></a>  <span class="comment">     * Return names of the instance options.</span>
<a name="l2427"><span class="linenum">2427</span></a>  <span class="comment">     * By default: no instance option name</span>
<a name="l2428"><span class="linenum">2428</span></a>  <span class="comment">     *</span>
<a name="l2429"><span class="linenum">2429</span></a>  <span class="comment">     * @return array</span>
<a name="l2430"><span class="linenum">2430</span></a>  <span class="comment">     */</span>
<a name="l2431"><span class="linenum">2431</span></a>      public static function <a class="function" onClick="logFunction('get_instance_option_names')" href="../_functions/get_instance_option_names.html" onMouseOver="funcPopup(event,'get_instance_option_names')">get_instance_option_names</a>() {
<a name="l2432"><span class="linenum">2432</span></a>          return array();
<a name="l2433"><span class="linenum">2433</span></a>      }
<a name="l2434"><span class="linenum">2434</span></a>  
<a name="l2435"><span class="linenum">2435</span></a>      <span class="comment">/**</span>
<a name="l2436"><span class="linenum">2436</span></a>  <span class="comment">     * Validate repository plugin instance form</span>
<a name="l2437"><span class="linenum">2437</span></a>  <span class="comment">     *</span>
<a name="l2438"><span class="linenum">2438</span></a>  <span class="comment">     * @param moodleform $mform moodle form</span>
<a name="l2439"><span class="linenum">2439</span></a>  <span class="comment">     * @param array $data form data</span>
<a name="l2440"><span class="linenum">2440</span></a>  <span class="comment">     * @param array $errors errors</span>
<a name="l2441"><span class="linenum">2441</span></a>  <span class="comment">     * @return array errors</span>
<a name="l2442"><span class="linenum">2442</span></a>  <span class="comment">     */</span>
<a name="l2443"><span class="linenum">2443</span></a>      public static function <a class="function" onClick="logFunction('instance_form_validation')" href="../_functions/instance_form_validation.html" onMouseOver="funcPopup(event,'instance_form_validation')">instance_form_validation</a>(<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>, <a class="var it224" onMouseOver="hilite(224)" onMouseOut="lolite()" onClick="logVariable('errors')" href="../_variables/errors.html">$errors</a>) {
<a name="l2444"><span class="linenum">2444</span></a>          return <a class="var it224" onMouseOver="hilite(224)" onMouseOut="lolite()" onClick="logVariable('errors')" href="../_variables/errors.html">$errors</a>;
<a name="l2445"><span class="linenum">2445</span></a>      }
<a name="l2446"><span class="linenum">2446</span></a>  
<a name="l2447"><span class="linenum">2447</span></a>      <span class="comment">/**</span>
<a name="l2448"><span class="linenum">2448</span></a>  <span class="comment">     * Create a shorten filename</span>
<a name="l2449"><span class="linenum">2449</span></a>  <span class="comment">     *</span>
<a name="l2450"><span class="linenum">2450</span></a>  <span class="comment">     * @param string $str filename</span>
<a name="l2451"><span class="linenum">2451</span></a>  <span class="comment">     * @param int $maxlength max file name length</span>
<a name="l2452"><span class="linenum">2452</span></a>  <span class="comment">     * @return string short filename</span>
<a name="l2453"><span class="linenum">2453</span></a>  <span class="comment">     */</span>
<a name="l2454"><span class="linenum">2454</span></a>      public function <a class="function" onClick="logFunction('get_short_filename')" href="../_functions/get_short_filename.html" onMouseOver="funcPopup(event,'get_short_filename')">get_short_filename</a>(<a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>, <a class="var it4656" onMouseOver="hilite(4656)" onMouseOut="lolite()" onClick="logVariable('maxlength')" href="../_variables/maxlength.html">$maxlength</a>) {
<a name="l2455"><span class="linenum">2455</span></a>          if (<a class="class" onClick="logClass('core_text')" href="../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="function" onClick="logFunction('strlen')" href="../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>) &gt;= <a class="var it4656" onMouseOver="hilite(4656)" onMouseOut="lolite()" onClick="logVariable('maxlength')" href="../_variables/maxlength.html">$maxlength</a>) {
<a name="l2456"><span class="linenum">2456</span></a>              return <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="class" onClick="logClass('core_text')" href="../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>, 0, <a class="var it4656" onMouseOver="hilite(4656)" onMouseOut="lolite()" onClick="logVariable('maxlength')" href="../_variables/maxlength.html">$maxlength</a>)).'...';
<a name="l2457"><span class="linenum">2457</span></a>          } else {
<a name="l2458"><span class="linenum">2458</span></a>              return <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>;
<a name="l2459"><span class="linenum">2459</span></a>          }
<a name="l2460"><span class="linenum">2460</span></a>      }
<a name="l2461"><span class="linenum">2461</span></a>  
<a name="l2462"><span class="linenum">2462</span></a>      <span class="comment">/**</span>
<a name="l2463"><span class="linenum">2463</span></a>  <span class="comment">     * Overwrite an existing file</span>
<a name="l2464"><span class="linenum">2464</span></a>  <span class="comment">     *</span>
<a name="l2465"><span class="linenum">2465</span></a>  <span class="comment">     * @param int $itemid</span>
<a name="l2466"><span class="linenum">2466</span></a>  <span class="comment">     * @param string $filepath</span>
<a name="l2467"><span class="linenum">2467</span></a>  <span class="comment">     * @param string $filename</span>
<a name="l2468"><span class="linenum">2468</span></a>  <span class="comment">     * @param string $newfilepath</span>
<a name="l2469"><span class="linenum">2469</span></a>  <span class="comment">     * @param string $newfilename</span>
<a name="l2470"><span class="linenum">2470</span></a>  <span class="comment">     * @return bool</span>
<a name="l2471"><span class="linenum">2471</span></a>  <span class="comment">     */</span>
<a name="l2472"><span class="linenum">2472</span></a>      public static function <a class="function" onClick="logFunction('overwrite_existing_draftfile')" href="../_functions/overwrite_existing_draftfile.html" onMouseOver="funcPopup(event,'overwrite_existing_draftfile')">overwrite_existing_draftfile</a>(<a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a>, <a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../_variables/filepath.html">$filepath</a>, <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>, <a class="var it2110" onMouseOver="hilite(2110)" onMouseOut="lolite()" onClick="logVariable('newfilepath')" href="../_variables/newfilepath.html">$newfilepath</a>, <a class="var it7436" onMouseOver="hilite(7436)" onMouseOut="lolite()" onClick="logVariable('newfilename')" href="../_variables/newfilename.html">$newfilename</a>) {
<a name="l2473"><span class="linenum">2473</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>;
<a name="l2474"><span class="linenum">2474</span></a>          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l2475"><span class="linenum">2475</span></a>          <a class="var it2103" onMouseOver="hilite(2103)" onMouseOut="lolite()" onClick="logVariable('user_context')" href="../_variables/user_context.html">$user_context</a> = <a class="class" onClick="logClass('context_user')" href="../_classes/context_user.html" onMouseOver="classPopup(event,'context_user')">context_user</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2476"><span class="linenum">2476</span></a>          if (<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_file')" href="../_functions/get_file.html" onMouseOver="funcPopup(event,'get_file')">get_file</a>(<a class="var it2103" onMouseOver="hilite(2103)" onMouseOut="lolite()" onClick="logVariable('user_context')" href="../_variables/user_context.html">$user_context</a>-&gt;<a onClick="logVariable('id')" class="var it44209" onMouseOver="hilite(44209)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'user', 'draft', <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a>, <a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../_variables/filepath.html">$filepath</a>, <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>)) {
<a name="l2477"><span class="linenum">2477</span></a>              if (<a class="var it2559" onMouseOver="hilite(2559)" onMouseOut="lolite()" onClick="logVariable('tempfile')" href="../_variables/tempfile.html">$tempfile</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_file')" href="../_functions/get_file.html" onMouseOver="funcPopup(event,'get_file')">get_file</a>(<a class="var it2103" onMouseOver="hilite(2103)" onMouseOut="lolite()" onClick="logVariable('user_context')" href="../_variables/user_context.html">$user_context</a>-&gt;<a onClick="logVariable('id')" class="var it44209" onMouseOver="hilite(44209)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'user', 'draft', <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a>, <a class="var it2110" onMouseOver="hilite(2110)" onMouseOut="lolite()" onClick="logVariable('newfilepath')" href="../_variables/newfilepath.html">$newfilepath</a>, <a class="var it7436" onMouseOver="hilite(7436)" onMouseOut="lolite()" onClick="logVariable('newfilename')" href="../_variables/newfilename.html">$newfilename</a>)) {
<a name="l2478"><span class="linenum">2478</span></a>  <span class="comment">                // Remember original file source field.</span>
<a name="l2479"><span class="linenum">2479</span></a>                  <a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a> = @<a class="phpfunction" onClick="logFunction('unserialize')" href="../_functions/unserialize.html" onMouseOver="phpfuncPopup(event,'unserialize')">unserialize</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_source')" href="../_functions/get_source.html" onMouseOver="funcPopup(event,'get_source')">get_source</a>());
<a name="l2480"><span class="linenum">2480</span></a>  <span class="comment">                // Remember the original sortorder.</span>
<a name="l2481"><span class="linenum">2481</span></a>                  <a class="var it3515" onMouseOver="hilite(3515)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../_variables/sortorder.html">$sortorder</a> = <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_sortorder')" href="../_functions/get_sortorder.html" onMouseOver="funcPopup(event,'get_sortorder')">get_sortorder</a>();
<a name="l2482"><span class="linenum">2482</span></a>                  if (<a class="var it2559" onMouseOver="hilite(2559)" onMouseOut="lolite()" onClick="logVariable('tempfile')" href="../_variables/tempfile.html">$tempfile</a>-&gt;<a class="function" onClick="logFunction('is_external_file')" href="../_functions/is_external_file.html" onMouseOver="funcPopup(event,'is_external_file')">is_external_file</a>()) {
<a name="l2483"><span class="linenum">2483</span></a>  <span class="comment">                    // New file is a reference. Check that existing file does not have any other files referencing to it</span>
<a name="l2484"><span class="linenum">2484</span></a>                      if (isset(<a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a>-&gt;<a onClick="logVariable('original')" class="var it43338" onMouseOver="hilite(43338)" onMouseOut="lolite()" href="../_variables/original.html">original</a>) &amp;&amp; <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('search_references_count')" href="../_functions/search_references_count.html" onMouseOver="funcPopup(event,'search_references_count')">search_references_count</a>(<a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a>-&gt;<a onClick="logVariable('original')" class="var it43338" onMouseOver="hilite(43338)" onMouseOut="lolite()" href="../_variables/original.html">original</a>)) {
<a name="l2485"><span class="linenum">2485</span></a>                          return (object)array('error' =&gt; <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('errordoublereference', 'repository'));
<a name="l2486"><span class="linenum">2486</span></a>                      }
<a name="l2487"><span class="linenum">2487</span></a>                  }
<a name="l2488"><span class="linenum">2488</span></a>  <span class="comment">                // delete existing file to release filename</span>
<a name="l2489"><span class="linenum">2489</span></a>                  <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>();
<a name="l2490"><span class="linenum">2490</span></a>  <span class="comment">                // create new file</span>
<a name="l2491"><span class="linenum">2491</span></a>                  <a class="var it2113" onMouseOver="hilite(2113)" onMouseOut="lolite()" onClick="logVariable('newfile')" href="../_variables/newfile.html">$newfile</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('create_file_from_storedfile')" href="../_functions/create_file_from_storedfile.html" onMouseOver="funcPopup(event,'create_file_from_storedfile')">create_file_from_storedfile</a>(array('filepath'=&gt;<a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../_variables/filepath.html">$filepath</a>, 'filename'=&gt;<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>), <a class="var it2559" onMouseOver="hilite(2559)" onMouseOut="lolite()" onClick="logVariable('tempfile')" href="../_variables/tempfile.html">$tempfile</a>);
<a name="l2492"><span class="linenum">2492</span></a>  <span class="comment">                // Preserve original file location (stored in source field) for handling references</span>
<a name="l2493"><span class="linenum">2493</span></a>                  if (isset(<a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a>-&gt;<a onClick="logVariable('original')" class="var it43338" onMouseOver="hilite(43338)" onMouseOut="lolite()" href="../_variables/original.html">original</a>)) {
<a name="l2494"><span class="linenum">2494</span></a>                      if (!(<a class="var it9485" onMouseOver="hilite(9485)" onMouseOut="lolite()" onClick="logVariable('newfilesource')" href="../_variables/newfilesource.html">$newfilesource</a> = @<a class="phpfunction" onClick="logFunction('unserialize')" href="../_functions/unserialize.html" onMouseOver="phpfuncPopup(event,'unserialize')">unserialize</a>(<a class="var it2113" onMouseOver="hilite(2113)" onMouseOut="lolite()" onClick="logVariable('newfile')" href="../_variables/newfile.html">$newfile</a>-&gt;<a class="function" onClick="logFunction('get_source')" href="../_functions/get_source.html" onMouseOver="funcPopup(event,'get_source')">get_source</a>()))) {
<a name="l2495"><span class="linenum">2495</span></a>                          <a class="var it9485" onMouseOver="hilite(9485)" onMouseOut="lolite()" onClick="logVariable('newfilesource')" href="../_variables/newfilesource.html">$newfilesource</a> = new stdClass();
<a name="l2496"><span class="linenum">2496</span></a>                      }
<a name="l2497"><span class="linenum">2497</span></a>                      <a class="var it9485" onMouseOver="hilite(9485)" onMouseOut="lolite()" onClick="logVariable('newfilesource')" href="../_variables/newfilesource.html">$newfilesource</a>-&gt;<a onClick="logVariable('original')" class="var it44249" onMouseOver="hilite(44249)" onMouseOut="lolite()" href="../_variables/original.html">original</a> = <a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a>-&gt;<a onClick="logVariable('original')" class="var it43338" onMouseOver="hilite(43338)" onMouseOut="lolite()" href="../_variables/original.html">original</a>;
<a name="l2498"><span class="linenum">2498</span></a>                      <a class="var it2113" onMouseOver="hilite(2113)" onMouseOut="lolite()" onClick="logVariable('newfile')" href="../_variables/newfile.html">$newfile</a>-&gt;<a class="function" onClick="logFunction('set_source')" href="../_functions/set_source.html" onMouseOver="funcPopup(event,'set_source')">set_source</a>(<a class="phpfunction" onClick="logFunction('serialize')" href="../_functions/serialize.html" onMouseOver="phpfuncPopup(event,'serialize')">serialize</a>(<a class="var it9485" onMouseOver="hilite(9485)" onMouseOut="lolite()" onClick="logVariable('newfilesource')" href="../_variables/newfilesource.html">$newfilesource</a>));
<a name="l2499"><span class="linenum">2499</span></a>                  }
<a name="l2500"><span class="linenum">2500</span></a>                  <a class="var it2113" onMouseOver="hilite(2113)" onMouseOut="lolite()" onClick="logVariable('newfile')" href="../_variables/newfile.html">$newfile</a>-&gt;<a class="function" onClick="logFunction('set_sortorder')" href="../_functions/set_sortorder.html" onMouseOver="funcPopup(event,'set_sortorder')">set_sortorder</a>(<a class="var it3515" onMouseOver="hilite(3515)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../_variables/sortorder.html">$sortorder</a>);
<a name="l2501"><span class="linenum">2501</span></a>  <span class="comment">                // remove temp file</span>
<a name="l2502"><span class="linenum">2502</span></a>                  <a class="var it2559" onMouseOver="hilite(2559)" onMouseOut="lolite()" onClick="logVariable('tempfile')" href="../_variables/tempfile.html">$tempfile</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>();
<a name="l2503"><span class="linenum">2503</span></a>                  return true;
<a name="l2504"><span class="linenum">2504</span></a>              }
<a name="l2505"><span class="linenum">2505</span></a>          }
<a name="l2506"><span class="linenum">2506</span></a>          return false;
<a name="l2507"><span class="linenum">2507</span></a>      }
<a name="l2508"><span class="linenum">2508</span></a>  
<a name="l2509"><span class="linenum">2509</span></a>      <span class="comment">/**</span>
<a name="l2510"><span class="linenum">2510</span></a>  <span class="comment">     * Updates a file in draft filearea.</span>
<a name="l2511"><span class="linenum">2511</span></a>  <span class="comment">     *</span>
<a name="l2512"><span class="linenum">2512</span></a>  <span class="comment">     * This function can only update fields filepath, filename, author, license.</span>
<a name="l2513"><span class="linenum">2513</span></a>  <span class="comment">     * If anything (except filepath) is updated, timemodified is set to current time.</span>
<a name="l2514"><span class="linenum">2514</span></a>  <span class="comment">     * If filename or filepath is updated the file unconnects from it's origin</span>
<a name="l2515"><span class="linenum">2515</span></a>  <span class="comment">     * and therefore all references to it will be converted to copies when</span>
<a name="l2516"><span class="linenum">2516</span></a>  <span class="comment">     * filearea is saved.</span>
<a name="l2517"><span class="linenum">2517</span></a>  <span class="comment">     *</span>
<a name="l2518"><span class="linenum">2518</span></a>  <span class="comment">     * @param int $draftid</span>
<a name="l2519"><span class="linenum">2519</span></a>  <span class="comment">     * @param string $filepath path to the directory containing the file, or full path in case of directory</span>
<a name="l2520"><span class="linenum">2520</span></a>  <span class="comment">     * @param string $filename name of the file, or '.' in case of directory</span>
<a name="l2521"><span class="linenum">2521</span></a>  <span class="comment">     * @param array $updatedata array of fields to change (only filename, filepath, license and/or author can be updated)</span>
<a name="l2522"><span class="linenum">2522</span></a>  <span class="comment">     * @throws moodle_exception if for any reason file can not be updated (file does not exist, target already exists, etc.)</span>
<a name="l2523"><span class="linenum">2523</span></a>  <span class="comment">     */</span>
<a name="l2524"><span class="linenum">2524</span></a>      public static function <a class="function" onClick="logFunction('update_draftfile')" href="../_functions/update_draftfile.html" onMouseOver="funcPopup(event,'update_draftfile')">update_draftfile</a>(<a class="var it2102" onMouseOver="hilite(2102)" onMouseOut="lolite()" onClick="logVariable('draftid')" href="../_variables/draftid.html">$draftid</a>, <a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../_variables/filepath.html">$filepath</a>, <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>, <a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('updatedata')" href="../_variables/updatedata.html">$updatedata</a>) {
<a name="l2525"><span class="linenum">2525</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>;
<a name="l2526"><span class="linenum">2526</span></a>          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l2527"><span class="linenum">2527</span></a>          <a class="var it639" onMouseOver="hilite(639)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a> = <a class="class" onClick="logClass('context_user')" href="../_classes/context_user.html" onMouseOver="classPopup(event,'context_user')">context_user</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2528"><span class="linenum">2528</span></a>  <span class="comment">        // make sure filename and filepath are present in $updatedata</span>
<a name="l2529"><span class="linenum">2529</span></a>          <a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('updatedata')" href="../_variables/updatedata.html">$updatedata</a> = <a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('updatedata')" href="../_variables/updatedata.html">$updatedata</a> + array('filepath' =&gt; <a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../_variables/filepath.html">$filepath</a>, 'filename' =&gt; <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>);
<a name="l2530"><span class="linenum">2530</span></a>          <a class="var it21424" onMouseOver="hilite(21424)" onMouseOut="lolite()" onClick="logVariable('filemodified')" href="../_variables/filemodified.html">$filemodified</a> = false;
<a name="l2531"><span class="linenum">2531</span></a>          if (!<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_file')" href="../_functions/get_file.html" onMouseOver="funcPopup(event,'get_file')">get_file</a>(<a class="var it639" onMouseOver="hilite(639)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a>-&gt;<a onClick="logVariable('id')" class="var it43024" onMouseOver="hilite(43024)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'user', 'draft', <a class="var it2102" onMouseOver="hilite(2102)" onMouseOut="lolite()" onClick="logVariable('draftid')" href="../_variables/draftid.html">$draftid</a>, <a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../_variables/filepath.html">$filepath</a>, <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>)) {
<a name="l2532"><span class="linenum">2532</span></a>              if (<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a> === '.') {
<a name="l2533"><span class="linenum">2533</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('foldernotfound', 'repository');
<a name="l2534"><span class="linenum">2534</span></a>              } else {
<a name="l2535"><span class="linenum">2535</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('filenotfound', 'error');
<a name="l2536"><span class="linenum">2536</span></a>              }
<a name="l2537"><span class="linenum">2537</span></a>          }
<a name="l2538"><span class="linenum">2538</span></a>          if (!<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('is_directory')" href="../_functions/is_directory.html" onMouseOver="funcPopup(event,'is_directory')">is_directory</a>()) {
<a name="l2539"><span class="linenum">2539</span></a>  <span class="comment">            // This is a file</span>
<a name="l2540"><span class="linenum">2540</span></a>              if (<a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('updatedata')" href="../_variables/updatedata.html">$updatedata</a>['filepath'] !== <a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../_variables/filepath.html">$filepath</a> || <a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('updatedata')" href="../_variables/updatedata.html">$updatedata</a>['filename'] !== <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>) {
<a name="l2541"><span class="linenum">2541</span></a>  <span class="comment">                // Rename/move file: check that target file name does not exist.</span>
<a name="l2542"><span class="linenum">2542</span></a>                  if (<a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it639" onMouseOver="hilite(639)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a>-&gt;<a onClick="logVariable('id')" class="var it43024" onMouseOver="hilite(43024)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'user', 'draft', <a class="var it2102" onMouseOver="hilite(2102)" onMouseOut="lolite()" onClick="logVariable('draftid')" href="../_variables/draftid.html">$draftid</a>, <a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('updatedata')" href="../_variables/updatedata.html">$updatedata</a>['filepath'], <a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('updatedata')" href="../_variables/updatedata.html">$updatedata</a>['filename'])) {
<a name="l2543"><span class="linenum">2543</span></a>                      throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('fileexists', 'repository');
<a name="l2544"><span class="linenum">2544</span></a>                  }
<a name="l2545"><span class="linenum">2545</span></a>                  if ((<a class="var it21425" onMouseOver="hilite(21425)" onMouseOut="lolite()" onClick="logVariable('filesource')" href="../_variables/filesource.html">$filesource</a> = @<a class="phpfunction" onClick="logFunction('unserialize')" href="../_functions/unserialize.html" onMouseOver="phpfuncPopup(event,'unserialize')">unserialize</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_source')" href="../_functions/get_source.html" onMouseOver="funcPopup(event,'get_source')">get_source</a>())) &amp;&amp; isset(<a class="var it21425" onMouseOver="hilite(21425)" onMouseOut="lolite()" onClick="logVariable('filesource')" href="../_variables/filesource.html">$filesource</a>-&gt;<a onClick="logVariable('original')" class="var it45927" onMouseOver="hilite(45927)" onMouseOut="lolite()" href="../_variables/original.html">original</a>)) {
<a name="l2546"><span class="linenum">2546</span></a>                      unset(<a class="var it21425" onMouseOver="hilite(21425)" onMouseOut="lolite()" onClick="logVariable('filesource')" href="../_variables/filesource.html">$filesource</a>-&gt;<a onClick="logVariable('original')" class="var it45927" onMouseOver="hilite(45927)" onMouseOut="lolite()" href="../_variables/original.html">original</a>);
<a name="l2547"><span class="linenum">2547</span></a>                      <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('set_source')" href="../_functions/set_source.html" onMouseOver="funcPopup(event,'set_source')">set_source</a>(<a class="phpfunction" onClick="logFunction('serialize')" href="../_functions/serialize.html" onMouseOver="phpfuncPopup(event,'serialize')">serialize</a>(<a class="var it21425" onMouseOver="hilite(21425)" onMouseOut="lolite()" onClick="logVariable('filesource')" href="../_variables/filesource.html">$filesource</a>));
<a name="l2548"><span class="linenum">2548</span></a>                  }
<a name="l2549"><span class="linenum">2549</span></a>                  <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="phpfunction" onClick="logFunction('rename')" href="../_functions/rename.html" onMouseOver="phpfuncPopup(event,'rename')">rename</a>(<a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('updatedata')" href="../_variables/updatedata.html">$updatedata</a>['filepath'], <a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('updatedata')" href="../_variables/updatedata.html">$updatedata</a>['filename']);
<a name="l2550"><span class="linenum">2550</span></a>  <span class="comment">                // timemodified is updated only when file is renamed and not updated when file is moved.</span>
<a name="l2551"><span class="linenum">2551</span></a>                  <a class="var it21424" onMouseOver="hilite(21424)" onMouseOut="lolite()" onClick="logVariable('filemodified')" href="../_variables/filemodified.html">$filemodified</a> = <a class="var it21424" onMouseOver="hilite(21424)" onMouseOut="lolite()" onClick="logVariable('filemodified')" href="../_variables/filemodified.html">$filemodified</a> || (<a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('updatedata')" href="../_variables/updatedata.html">$updatedata</a>['filename'] !== <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>);
<a name="l2552"><span class="linenum">2552</span></a>              }
<a name="l2553"><span class="linenum">2553</span></a>              if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('license', <a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('updatedata')" href="../_variables/updatedata.html">$updatedata</a>) &amp;&amp; <a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('updatedata')" href="../_variables/updatedata.html">$updatedata</a>['license'] !== <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_license')" href="../_functions/get_license.html" onMouseOver="funcPopup(event,'get_license')">get_license</a>()) {
<a name="l2554"><span class="linenum">2554</span></a>  <span class="comment">                // Update license and timemodified.</span>
<a name="l2555"><span class="linenum">2555</span></a>                  <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('set_license')" href="../_functions/set_license.html" onMouseOver="funcPopup(event,'set_license')">set_license</a>(<a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('updatedata')" href="../_variables/updatedata.html">$updatedata</a>['license']);
<a name="l2556"><span class="linenum">2556</span></a>                  <a class="var it21424" onMouseOver="hilite(21424)" onMouseOut="lolite()" onClick="logVariable('filemodified')" href="../_variables/filemodified.html">$filemodified</a> = true;
<a name="l2557"><span class="linenum">2557</span></a>              }
<a name="l2558"><span class="linenum">2558</span></a>              if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('author', <a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('updatedata')" href="../_variables/updatedata.html">$updatedata</a>) &amp;&amp; <a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('updatedata')" href="../_variables/updatedata.html">$updatedata</a>['author'] !== <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_author')" href="../_functions/get_author.html" onMouseOver="funcPopup(event,'get_author')">get_author</a>()) {
<a name="l2559"><span class="linenum">2559</span></a>  <span class="comment">                // Update author and timemodified.</span>
<a name="l2560"><span class="linenum">2560</span></a>                  <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('set_author')" href="../_functions/set_author.html" onMouseOver="funcPopup(event,'set_author')">set_author</a>(<a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('updatedata')" href="../_variables/updatedata.html">$updatedata</a>['author']);
<a name="l2561"><span class="linenum">2561</span></a>                  <a class="var it21424" onMouseOver="hilite(21424)" onMouseOut="lolite()" onClick="logVariable('filemodified')" href="../_variables/filemodified.html">$filemodified</a> = true;
<a name="l2562"><span class="linenum">2562</span></a>              }
<a name="l2563"><span class="linenum">2563</span></a>  <span class="comment">            // Update timemodified:</span>
<a name="l2564"><span class="linenum">2564</span></a>              if (<a class="var it21424" onMouseOver="hilite(21424)" onMouseOut="lolite()" onClick="logVariable('filemodified')" href="../_variables/filemodified.html">$filemodified</a>) {
<a name="l2565"><span class="linenum">2565</span></a>                  <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('set_timemodified')" href="../_functions/set_timemodified.html" onMouseOver="funcPopup(event,'set_timemodified')">set_timemodified</a>(<a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>());
<a name="l2566"><span class="linenum">2566</span></a>              }
<a name="l2567"><span class="linenum">2567</span></a>          } else {
<a name="l2568"><span class="linenum">2568</span></a>  <span class="comment">            // This is a directory - only filepath can be updated for a directory (it was moved).</span>
<a name="l2569"><span class="linenum">2569</span></a>              if (<a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('updatedata')" href="../_variables/updatedata.html">$updatedata</a>['filepath'] === <a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../_variables/filepath.html">$filepath</a>) {
<a name="l2570"><span class="linenum">2570</span></a>  <span class="comment">                // nothing to update</span>
<a name="l2571"><span class="linenum">2571</span></a>                  return;
<a name="l2572"><span class="linenum">2572</span></a>              }
<a name="l2573"><span class="linenum">2573</span></a>              if (<a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it639" onMouseOver="hilite(639)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a>-&gt;<a onClick="logVariable('id')" class="var it43024" onMouseOver="hilite(43024)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'user', 'draft', <a class="var it2102" onMouseOver="hilite(2102)" onMouseOut="lolite()" onClick="logVariable('draftid')" href="../_variables/draftid.html">$draftid</a>, <a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('updatedata')" href="../_variables/updatedata.html">$updatedata</a>['filepath'], '.')) {
<a name="l2574"><span class="linenum">2574</span></a>  <span class="comment">                // bad luck, we can not rename if something already exists there</span>
<a name="l2575"><span class="linenum">2575</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('folderexists', 'repository');
<a name="l2576"><span class="linenum">2576</span></a>              }
<a name="l2577"><span class="linenum">2577</span></a>              <a class="var it21426" onMouseOver="hilite(21426)" onMouseOut="lolite()" onClick="logVariable('xfilepath')" href="../_variables/xfilepath.html">$xfilepath</a> = <a class="phpfunction" onClick="logFunction('preg_quote')" href="../_functions/preg_quote.html" onMouseOver="phpfuncPopup(event,'preg_quote')">preg_quote</a>(<a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../_variables/filepath.html">$filepath</a>, '|');
<a name="l2578"><span class="linenum">2578</span></a>              if (<a class="phpfunction" onClick="logFunction('preg_match')" href="../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>(&quot;|^<a class="var it21426" onMouseOver="hilite(21426)" onMouseOut="lolite()" onClick="logVariable('xfilepath')" href="../_variables/xfilepath.html">$xfilepath</a>|&quot;, <a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('updatedata')" href="../_variables/updatedata.html">$updatedata</a>['filepath'])) {
<a name="l2579"><span class="linenum">2579</span></a>  <span class="comment">                // we can not move folder to it's own subfolder</span>
<a name="l2580"><span class="linenum">2580</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('folderrecurse', 'repository');
<a name="l2581"><span class="linenum">2581</span></a>              }
<a name="l2582"><span class="linenum">2582</span></a>  
<a name="l2583"><span class="linenum">2583</span></a>  <span class="comment">            // If directory changed the name, update timemodified.</span>
<a name="l2584"><span class="linenum">2584</span></a>              <a class="var it21424" onMouseOver="hilite(21424)" onMouseOut="lolite()" onClick="logVariable('filemodified')" href="../_variables/filemodified.html">$filemodified</a> = (<a class="phpfunction" onClick="logFunction('basename')" href="../_functions/basename.html" onMouseOver="phpfuncPopup(event,'basename')">basename</a>(<a class="phpfunction" onClick="logFunction('rtrim')" href="../_functions/rtrim.html" onMouseOver="phpfuncPopup(event,'rtrim')">rtrim</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_filepath')" href="../_functions/get_filepath.html" onMouseOver="funcPopup(event,'get_filepath')">get_filepath</a>(), '/')) !== <a class="phpfunction" onClick="logFunction('basename')" href="../_functions/basename.html" onMouseOver="phpfuncPopup(event,'basename')">basename</a>(<a class="phpfunction" onClick="logFunction('rtrim')" href="../_functions/rtrim.html" onMouseOver="phpfuncPopup(event,'rtrim')">rtrim</a>(<a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('updatedata')" href="../_variables/updatedata.html">$updatedata</a>['filepath'], '/')));
<a name="l2585"><span class="linenum">2585</span></a>  
<a name="l2586"><span class="linenum">2586</span></a>  <span class="comment">            // Now update directory and all children.</span>
<a name="l2587"><span class="linenum">2587</span></a>              <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../_variables/files.html">$files</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_area_files')" href="../_functions/get_area_files.html" onMouseOver="funcPopup(event,'get_area_files')">get_area_files</a>(<a class="var it639" onMouseOver="hilite(639)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a>-&gt;<a onClick="logVariable('id')" class="var it43024" onMouseOver="hilite(43024)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'user', 'draft', <a class="var it2102" onMouseOver="hilite(2102)" onMouseOut="lolite()" onClick="logVariable('draftid')" href="../_variables/draftid.html">$draftid</a>);
<a name="l2588"><span class="linenum">2588</span></a>              foreach (<a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../_variables/files.html">$files</a> as <a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>) {
<a name="l2589"><span class="linenum">2589</span></a>                  if (<a class="phpfunction" onClick="logFunction('preg_match')" href="../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>(&quot;|^<a class="var it21426" onMouseOver="hilite(21426)" onMouseOut="lolite()" onClick="logVariable('xfilepath')" href="../_variables/xfilepath.html">$xfilepath</a>|&quot;, <a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>-&gt;<a class="function" onClick="logFunction('get_filepath')" href="../_functions/get_filepath.html" onMouseOver="funcPopup(event,'get_filepath')">get_filepath</a>())) {
<a name="l2590"><span class="linenum">2590</span></a>                      <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(&quot;|^<a class="var it21426" onMouseOver="hilite(21426)" onMouseOut="lolite()" onClick="logVariable('xfilepath')" href="../_variables/xfilepath.html">$xfilepath</a>|&quot;, <a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('updatedata')" href="../_variables/updatedata.html">$updatedata</a>['filepath'], <a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>-&gt;<a class="function" onClick="logFunction('get_filepath')" href="../_functions/get_filepath.html" onMouseOver="funcPopup(event,'get_filepath')">get_filepath</a>());
<a name="l2591"><span class="linenum">2591</span></a>                      if ((<a class="var it21425" onMouseOver="hilite(21425)" onMouseOut="lolite()" onClick="logVariable('filesource')" href="../_variables/filesource.html">$filesource</a> = @<a class="phpfunction" onClick="logFunction('unserialize')" href="../_functions/unserialize.html" onMouseOver="phpfuncPopup(event,'unserialize')">unserialize</a>(<a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>-&gt;<a class="function" onClick="logFunction('get_source')" href="../_functions/get_source.html" onMouseOver="funcPopup(event,'get_source')">get_source</a>())) &amp;&amp; isset(<a class="var it21425" onMouseOver="hilite(21425)" onMouseOut="lolite()" onClick="logVariable('filesource')" href="../_variables/filesource.html">$filesource</a>-&gt;<a onClick="logVariable('original')" class="var it45927" onMouseOver="hilite(45927)" onMouseOut="lolite()" href="../_variables/original.html">original</a>)) {
<a name="l2592"><span class="linenum">2592</span></a>  <span class="comment">                        // unset original so the references are not shown any more</span>
<a name="l2593"><span class="linenum">2593</span></a>                          unset(<a class="var it21425" onMouseOver="hilite(21425)" onMouseOut="lolite()" onClick="logVariable('filesource')" href="../_variables/filesource.html">$filesource</a>-&gt;<a onClick="logVariable('original')" class="var it45927" onMouseOver="hilite(45927)" onMouseOut="lolite()" href="../_variables/original.html">original</a>);
<a name="l2594"><span class="linenum">2594</span></a>                          <a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>-&gt;<a class="function" onClick="logFunction('set_source')" href="../_functions/set_source.html" onMouseOver="funcPopup(event,'set_source')">set_source</a>(<a class="phpfunction" onClick="logFunction('serialize')" href="../_functions/serialize.html" onMouseOver="phpfuncPopup(event,'serialize')">serialize</a>(<a class="var it21425" onMouseOver="hilite(21425)" onMouseOut="lolite()" onClick="logVariable('filesource')" href="../_variables/filesource.html">$filesource</a>));
<a name="l2595"><span class="linenum">2595</span></a>                      }
<a name="l2596"><span class="linenum">2596</span></a>                      <a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>-&gt;<a class="phpfunction" onClick="logFunction('rename')" href="../_functions/rename.html" onMouseOver="phpfuncPopup(event,'rename')">rename</a>(<a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>, <a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>-&gt;<a class="function" onClick="logFunction('get_filename')" href="../_functions/get_filename.html" onMouseOver="funcPopup(event,'get_filename')">get_filename</a>());
<a name="l2597"><span class="linenum">2597</span></a>                      if (<a class="var it21424" onMouseOver="hilite(21424)" onMouseOut="lolite()" onClick="logVariable('filemodified')" href="../_variables/filemodified.html">$filemodified</a> &amp;&amp; <a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>-&gt;<a class="function" onClick="logFunction('get_filepath')" href="../_functions/get_filepath.html" onMouseOver="funcPopup(event,'get_filepath')">get_filepath</a>() === <a class="var it2109" onMouseOver="hilite(2109)" onMouseOut="lolite()" onClick="logVariable('updatedata')" href="../_variables/updatedata.html">$updatedata</a>['filepath'] &amp;&amp; <a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>-&gt;<a class="function" onClick="logFunction('get_filename')" href="../_functions/get_filename.html" onMouseOver="funcPopup(event,'get_filename')">get_filename</a>() === <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>) {
<a name="l2598"><span class="linenum">2598</span></a>                          <a class="var it1531" onMouseOver="hilite(1531)" onMouseOut="lolite()" onClick="logVariable('f')" href="../_variables/f.html">$f</a>-&gt;<a class="function" onClick="logFunction('set_timemodified')" href="../_functions/set_timemodified.html" onMouseOver="funcPopup(event,'set_timemodified')">set_timemodified</a>(<a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>());
<a name="l2599"><span class="linenum">2599</span></a>                      }
<a name="l2600"><span class="linenum">2600</span></a>                  }
<a name="l2601"><span class="linenum">2601</span></a>              }
<a name="l2602"><span class="linenum">2602</span></a>          }
<a name="l2603"><span class="linenum">2603</span></a>      }
<a name="l2604"><span class="linenum">2604</span></a>  
<a name="l2605"><span class="linenum">2605</span></a>      <span class="comment">/**</span>
<a name="l2606"><span class="linenum">2606</span></a>  <span class="comment">     * Delete a temp file from draft area</span>
<a name="l2607"><span class="linenum">2607</span></a>  <span class="comment">     *</span>
<a name="l2608"><span class="linenum">2608</span></a>  <span class="comment">     * @param int $draftitemid</span>
<a name="l2609"><span class="linenum">2609</span></a>  <span class="comment">     * @param string $filepath</span>
<a name="l2610"><span class="linenum">2610</span></a>  <span class="comment">     * @param string $filename</span>
<a name="l2611"><span class="linenum">2611</span></a>  <span class="comment">     * @return bool</span>
<a name="l2612"><span class="linenum">2612</span></a>  <span class="comment">     */</span>
<a name="l2613"><span class="linenum">2613</span></a>      public static function <a class="function" onClick="logFunction('delete_tempfile_from_draft')" href="../_functions/delete_tempfile_from_draft.html" onMouseOver="funcPopup(event,'delete_tempfile_from_draft')">delete_tempfile_from_draft</a>(<a class="var it637" onMouseOver="hilite(637)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../_variables/draftitemid.html">$draftitemid</a>, <a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../_variables/filepath.html">$filepath</a>, <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>) {
<a name="l2614"><span class="linenum">2614</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>;
<a name="l2615"><span class="linenum">2615</span></a>          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l2616"><span class="linenum">2616</span></a>          <a class="var it2103" onMouseOver="hilite(2103)" onMouseOut="lolite()" onClick="logVariable('user_context')" href="../_variables/user_context.html">$user_context</a> = <a class="class" onClick="logClass('context_user')" href="../_classes/context_user.html" onMouseOver="classPopup(event,'context_user')">context_user</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2617"><span class="linenum">2617</span></a>          if (<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_file')" href="../_functions/get_file.html" onMouseOver="funcPopup(event,'get_file')">get_file</a>(<a class="var it2103" onMouseOver="hilite(2103)" onMouseOut="lolite()" onClick="logVariable('user_context')" href="../_variables/user_context.html">$user_context</a>-&gt;<a onClick="logVariable('id')" class="var it44209" onMouseOver="hilite(44209)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'user', 'draft', <a class="var it637" onMouseOver="hilite(637)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../_variables/draftitemid.html">$draftitemid</a>, <a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../_variables/filepath.html">$filepath</a>, <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>)) {
<a name="l2618"><span class="linenum">2618</span></a>              <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>();
<a name="l2619"><span class="linenum">2619</span></a>              return true;
<a name="l2620"><span class="linenum">2620</span></a>          } else {
<a name="l2621"><span class="linenum">2621</span></a>              return false;
<a name="l2622"><span class="linenum">2622</span></a>          }
<a name="l2623"><span class="linenum">2623</span></a>      }
<a name="l2624"><span class="linenum">2624</span></a>  
<a name="l2625"><span class="linenum">2625</span></a>      <span class="comment">/**</span>
<a name="l2626"><span class="linenum">2626</span></a>  <span class="comment">     * Find all external files in this repo and import them</span>
<a name="l2627"><span class="linenum">2627</span></a>  <span class="comment">     */</span>
<a name="l2628"><span class="linenum">2628</span></a>      public function <a class="function" onClick="logFunction('convert_references_to_local')" href="../_functions/convert_references_to_local.html" onMouseOver="funcPopup(event,'convert_references_to_local')">convert_references_to_local</a>() {
<a name="l2629"><span class="linenum">2629</span></a>          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l2630"><span class="linenum">2630</span></a>          <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../_variables/files.html">$files</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_external_files')" href="../_functions/get_external_files.html" onMouseOver="funcPopup(event,'get_external_files')">get_external_files</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2631"><span class="linenum">2631</span></a>          foreach (<a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../_variables/files.html">$files</a> as <a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('storedfile')" href="../_variables/storedfile.html">$storedfile</a>) {
<a name="l2632"><span class="linenum">2632</span></a>              <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('import_external_file')" href="../_functions/import_external_file.html" onMouseOver="funcPopup(event,'import_external_file')">import_external_file</a>(<a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('storedfile')" href="../_variables/storedfile.html">$storedfile</a>);
<a name="l2633"><span class="linenum">2633</span></a>          }
<a name="l2634"><span class="linenum">2634</span></a>      }
<a name="l2635"><span class="linenum">2635</span></a>  
<a name="l2636"><span class="linenum">2636</span></a>      <span class="comment">/**</span>
<a name="l2637"><span class="linenum">2637</span></a>  <span class="comment">     * Function repository::reset_caches() is deprecated, cache is handled by MUC now.</span>
<a name="l2638"><span class="linenum">2638</span></a>  <span class="comment">     * @deprecated since Moodle 2.6 MDL-42016 - please do not use this function any more.</span>
<a name="l2639"><span class="linenum">2639</span></a>  <span class="comment">     */</span>
<a name="l2640"><span class="linenum">2640</span></a>      public static function <a class="function" onClick="logFunction('reset_caches')" href="../_functions/reset_caches.html" onMouseOver="funcPopup(event,'reset_caches')">reset_caches</a>() {
<a name="l2641"><span class="linenum">2641</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Function <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('reset_caches')" href="../_functions/reset_caches.html" onMouseOver="funcPopup(event,'reset_caches')">reset_caches</a>() can not be used any more, cache is handled by MUC now.');
<a name="l2642"><span class="linenum">2642</span></a>      }
<a name="l2643"><span class="linenum">2643</span></a>  
<a name="l2644"><span class="linenum">2644</span></a>      <span class="comment">/**</span>
<a name="l2645"><span class="linenum">2645</span></a>  <span class="comment">     * Function repository::sync_external_file() is deprecated. Use repository::sync_reference instead</span>
<a name="l2646"><span class="linenum">2646</span></a>  <span class="comment">     *</span>
<a name="l2647"><span class="linenum">2647</span></a>  <span class="comment">     * @deprecated since Moodle 2.6 MDL-42016 - please do not use this function any more.</span>
<a name="l2648"><span class="linenum">2648</span></a>  <span class="comment">     * @see repository::sync_reference()</span>
<a name="l2649"><span class="linenum">2649</span></a>  <span class="comment">     */</span>
<a name="l2650"><span class="linenum">2650</span></a>      public static function <a class="function" onClick="logFunction('sync_external_file')" href="../_functions/sync_external_file.html" onMouseOver="funcPopup(event,'sync_external_file')">sync_external_file</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>, <a class="var it21427" onMouseOver="hilite(21427)" onMouseOut="lolite()" onClick="logVariable('resetsynchistory')" href="../_variables/resetsynchistory.html">$resetsynchistory</a> = false) {
<a name="l2651"><span class="linenum">2651</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Function <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('sync_external_file')" href="../_functions/sync_external_file.html" onMouseOver="funcPopup(event,'sync_external_file')">sync_external_file</a>() can not be used any more. ' .
<a name="l2652"><span class="linenum">2652</span></a>              'Use <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::sync_reference instead.');
<a name="l2653"><span class="linenum">2653</span></a>      }
<a name="l2654"><span class="linenum">2654</span></a>  
<a name="l2655"><span class="linenum">2655</span></a>      <span class="comment">/**</span>
<a name="l2656"><span class="linenum">2656</span></a>  <span class="comment">     * Performs synchronisation of an external file if the previous one has expired.</span>
<a name="l2657"><span class="linenum">2657</span></a>  <span class="comment">     *</span>
<a name="l2658"><span class="linenum">2658</span></a>  <span class="comment">     * This function must be implemented for external repositories supporting</span>
<a name="l2659"><span class="linenum">2659</span></a>  <span class="comment">     * FILE_REFERENCE, it is called for existing aliases when their filesize,</span>
<a name="l2660"><span class="linenum">2660</span></a>  <span class="comment">     * contenthash or timemodified are requested. It is not called for internal</span>
<a name="l2661"><span class="linenum">2661</span></a>  <span class="comment">     * repositories (see {@link repository::has_moodle_files()}), references to</span>
<a name="l2662"><span class="linenum">2662</span></a>  <span class="comment">     * internal files are updated immediately when source is modified.</span>
<a name="l2663"><span class="linenum">2663</span></a>  <span class="comment">     *</span>
<a name="l2664"><span class="linenum">2664</span></a>  <span class="comment">     * Referenced files may optionally keep their content in Moodle filepool (for</span>
<a name="l2665"><span class="linenum">2665</span></a>  <span class="comment">     * thumbnail generation or to be able to serve cached copy). In this</span>
<a name="l2666"><span class="linenum">2666</span></a>  <span class="comment">     * case both contenthash and filesize need to be synchronized. Otherwise repositories</span>
<a name="l2667"><span class="linenum">2667</span></a>  <span class="comment">     * should use contenthash of empty file and correct filesize in bytes.</span>
<a name="l2668"><span class="linenum">2668</span></a>  <span class="comment">     *</span>
<a name="l2669"><span class="linenum">2669</span></a>  <span class="comment">     * Note that this function may be run for EACH file that needs to be synchronised at the</span>
<a name="l2670"><span class="linenum">2670</span></a>  <span class="comment">     * moment. If anything is being downloaded or requested from external sources there</span>
<a name="l2671"><span class="linenum">2671</span></a>  <span class="comment">     * should be a small timeout. The synchronisation is performed to update the size of</span>
<a name="l2672"><span class="linenum">2672</span></a>  <span class="comment">     * the file and/or to update image and re-generated image preview. There is nothing</span>
<a name="l2673"><span class="linenum">2673</span></a>  <span class="comment">     * fatal if syncronisation fails but it is fatal if syncronisation takes too long</span>
<a name="l2674"><span class="linenum">2674</span></a>  <span class="comment">     * and hangs the script generating a page.</span>
<a name="l2675"><span class="linenum">2675</span></a>  <span class="comment">     *</span>
<a name="l2676"><span class="linenum">2676</span></a>  <span class="comment">     * Note: If you wish to call $file-&gt;get_filesize(), $file-&gt;get_contenthash() or</span>
<a name="l2677"><span class="linenum">2677</span></a>  <span class="comment">     * $file-&gt;get_timemodified() make sure that recursion does not happen.</span>
<a name="l2678"><span class="linenum">2678</span></a>  <span class="comment">     *</span>
<a name="l2679"><span class="linenum">2679</span></a>  <span class="comment">     * Called from {@link stored_file::sync_external_file()}</span>
<a name="l2680"><span class="linenum">2680</span></a>  <span class="comment">     *</span>
<a name="l2681"><span class="linenum">2681</span></a>  <span class="comment">     * @uses stored_file::set_missingsource()</span>
<a name="l2682"><span class="linenum">2682</span></a>  <span class="comment">     * @uses stored_file::set_synchronized()</span>
<a name="l2683"><span class="linenum">2683</span></a>  <span class="comment">     * @param stored_file $file</span>
<a name="l2684"><span class="linenum">2684</span></a>  <span class="comment">     * @return bool false when file does not need synchronisation, true if it was synchronised</span>
<a name="l2685"><span class="linenum">2685</span></a>  <span class="comment">     */</span>
<a name="l2686"><span class="linenum">2686</span></a>      public function <a class="function" onClick="logFunction('sync_reference')" href="../_functions/sync_reference.html" onMouseOver="funcPopup(event,'sync_reference')">sync_reference</a>(stored_file <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>) {
<a name="l2687"><span class="linenum">2687</span></a>          if (<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_repository_id')" href="../_functions/get_repository_id.html" onMouseOver="funcPopup(event,'get_repository_id')">get_repository_id</a>() != <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l2688"><span class="linenum">2688</span></a>  <span class="comment">            // This should not really happen because the function can be called from stored_file only.</span>
<a name="l2689"><span class="linenum">2689</span></a>              return false;
<a name="l2690"><span class="linenum">2690</span></a>          }
<a name="l2691"><span class="linenum">2691</span></a>  
<a name="l2692"><span class="linenum">2692</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('has_moodle_files')" href="../_functions/has_moodle_files.html" onMouseOver="funcPopup(event,'has_moodle_files')">has_moodle_files</a>()) {
<a name="l2693"><span class="linenum">2693</span></a>  <span class="comment">            // References to local files need to be synchronised only once.</span>
<a name="l2694"><span class="linenum">2694</span></a>  <span class="comment">            // Later they will be synchronised automatically when the source is changed.</span>
<a name="l2695"><span class="linenum">2695</span></a>              if (<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_referencelastsync')" href="../_functions/get_referencelastsync.html" onMouseOver="funcPopup(event,'get_referencelastsync')">get_referencelastsync</a>()) {
<a name="l2696"><span class="linenum">2696</span></a>                  return false;
<a name="l2697"><span class="linenum">2697</span></a>              }
<a name="l2698"><span class="linenum">2698</span></a>              <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l2699"><span class="linenum">2699</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = <a class="class" onClick="logClass('file_storage')" href="../_classes/file_storage.html" onMouseOver="classPopup(event,'file_storage')">file_storage</a>::<a class="function" onClick="logFunction('unpack_reference')" href="../_functions/unpack_reference.html" onMouseOver="funcPopup(event,'unpack_reference')">unpack_reference</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_reference')" href="../_functions/get_reference.html" onMouseOver="funcPopup(event,'get_reference')">get_reference</a>(), true);
<a name="l2700"><span class="linenum">2700</span></a>              if (!<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>) || !(<a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('storedfile')" href="../_variables/storedfile.html">$storedfile</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_file')" href="../_functions/get_file.html" onMouseOver="funcPopup(event,'get_file')">get_file</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['contextid'],
<a name="l2701"><span class="linenum">2701</span></a>                      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['component'], <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['filearea'], <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['itemid'], <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['filepath'],
<a name="l2702"><span class="linenum">2702</span></a>                      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['filename']))) {
<a name="l2703"><span class="linenum">2703</span></a>                  <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('set_missingsource')" href="../_functions/set_missingsource.html" onMouseOver="funcPopup(event,'set_missingsource')">set_missingsource</a>();
<a name="l2704"><span class="linenum">2704</span></a>              } else {
<a name="l2705"><span class="linenum">2705</span></a>                  <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('set_synchronized')" href="../_functions/set_synchronized.html" onMouseOver="funcPopup(event,'set_synchronized')">set_synchronized</a>(<a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('storedfile')" href="../_variables/storedfile.html">$storedfile</a>-&gt;<a class="function" onClick="logFunction('get_contenthash')" href="../_functions/get_contenthash.html" onMouseOver="funcPopup(event,'get_contenthash')">get_contenthash</a>(), <a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('storedfile')" href="../_variables/storedfile.html">$storedfile</a>-&gt;<a class="function" onClick="logFunction('get_filesize')" href="../_functions/get_filesize.html" onMouseOver="funcPopup(event,'get_filesize')">get_filesize</a>(), 0, <a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('storedfile')" href="../_variables/storedfile.html">$storedfile</a>-&gt;<a class="function" onClick="logFunction('get_timemodified')" href="../_functions/get_timemodified.html" onMouseOver="funcPopup(event,'get_timemodified')">get_timemodified</a>());
<a name="l2706"><span class="linenum">2706</span></a>              }
<a name="l2707"><span class="linenum">2707</span></a>              return true;
<a name="l2708"><span class="linenum">2708</span></a>          }
<a name="l2709"><span class="linenum">2709</span></a>  
<a name="l2710"><span class="linenum">2710</span></a>          return false;
<a name="l2711"><span class="linenum">2711</span></a>      }
<a name="l2712"><span class="linenum">2712</span></a>  
<a name="l2713"><span class="linenum">2713</span></a>      <span class="comment">/**</span>
<a name="l2714"><span class="linenum">2714</span></a>  <span class="comment">     * Build draft file's source field</span>
<a name="l2715"><span class="linenum">2715</span></a>  <span class="comment">     *</span>
<a name="l2716"><span class="linenum">2716</span></a>  <span class="comment">     * {@link file_restore_source_field_from_draft_file()}</span>
<a name="l2717"><span class="linenum">2717</span></a>  <span class="comment">     * XXX: This is a hack for file manager (MDL-28666)</span>
<a name="l2718"><span class="linenum">2718</span></a>  <span class="comment">     * For newly created  draft files we have to construct</span>
<a name="l2719"><span class="linenum">2719</span></a>  <span class="comment">     * source filed in php serialized data format.</span>
<a name="l2720"><span class="linenum">2720</span></a>  <span class="comment">     * File manager needs to know the original file information before copying</span>
<a name="l2721"><span class="linenum">2721</span></a>  <span class="comment">     * to draft area, so we append these information in mdl_files.source field</span>
<a name="l2722"><span class="linenum">2722</span></a>  <span class="comment">     *</span>
<a name="l2723"><span class="linenum">2723</span></a>  <span class="comment">     * @param string $source</span>
<a name="l2724"><span class="linenum">2724</span></a>  <span class="comment">     * @return string serialised source field</span>
<a name="l2725"><span class="linenum">2725</span></a>  <span class="comment">     */</span>
<a name="l2726"><span class="linenum">2726</span></a>      public static function <a class="function" onClick="logFunction('build_source_field')" href="../_functions/build_source_field.html" onMouseOver="funcPopup(event,'build_source_field')">build_source_field</a>(<a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a>) {
<a name="l2727"><span class="linenum">2727</span></a>          <a class="var it9408" onMouseOver="hilite(9408)" onMouseOut="lolite()" onClick="logVariable('sourcefield')" href="../_variables/sourcefield.html">$sourcefield</a> = new stdClass;
<a name="l2728"><span class="linenum">2728</span></a>          <a class="var it9408" onMouseOver="hilite(9408)" onMouseOut="lolite()" onClick="logVariable('sourcefield')" href="../_variables/sourcefield.html">$sourcefield</a>-&gt;<a onClick="logVariable('source')" class="var it45928" onMouseOver="hilite(45928)" onMouseOut="lolite()" href="../_variables/source.html">source</a> = <a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a>;
<a name="l2729"><span class="linenum">2729</span></a>          return <a class="phpfunction" onClick="logFunction('serialize')" href="../_functions/serialize.html" onMouseOver="phpfuncPopup(event,'serialize')">serialize</a>(<a class="var it9408" onMouseOver="hilite(9408)" onMouseOut="lolite()" onClick="logVariable('sourcefield')" href="../_variables/sourcefield.html">$sourcefield</a>);
<a name="l2730"><span class="linenum">2730</span></a>      }
<a name="l2731"><span class="linenum">2731</span></a>  
<a name="l2732"><span class="linenum">2732</span></a>      <span class="comment">/**</span>
<a name="l2733"><span class="linenum">2733</span></a>  <span class="comment">     * Prepares the repository to be cached. Implements method from cacheable_object interface.</span>
<a name="l2734"><span class="linenum">2734</span></a>  <span class="comment">     *</span>
<a name="l2735"><span class="linenum">2735</span></a>  <span class="comment">     * @return array</span>
<a name="l2736"><span class="linenum">2736</span></a>  <span class="comment">     */</span>
<a name="l2737"><span class="linenum">2737</span></a>      public function <a class="function" onClick="logFunction('prepare_to_cache')" href="../_functions/prepare_to_cache.html" onMouseOver="funcPopup(event,'prepare_to_cache')">prepare_to_cache</a>() {
<a name="l2738"><span class="linenum">2738</span></a>          return array(
<a name="l2739"><span class="linenum">2739</span></a>              'class' =&gt; <a class="phpfunction" onClick="logFunction('get_class')" href="../_functions/get_class.html" onMouseOver="phpfuncPopup(event,'get_class')">get_class</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>),
<a name="l2740"><span class="linenum">2740</span></a>              'id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l2741"><span class="linenum">2741</span></a>              'ctxid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/context.html">context</a>-&gt;id,
<a name="l2742"><span class="linenum">2742</span></a>              'options' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('options')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/options.html">options</a>,
<a name="l2743"><span class="linenum">2743</span></a>              'readonly' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;readonly
<a name="l2744"><span class="linenum">2744</span></a>          );
<a name="l2745"><span class="linenum">2745</span></a>      }
<a name="l2746"><span class="linenum">2746</span></a>  
<a name="l2747"><span class="linenum">2747</span></a>      <span class="comment">/**</span>
<a name="l2748"><span class="linenum">2748</span></a>  <span class="comment">     * Restores the repository from cache. Implements method from cacheable_object interface.</span>
<a name="l2749"><span class="linenum">2749</span></a>  <span class="comment">     *</span>
<a name="l2750"><span class="linenum">2750</span></a>  <span class="comment">     * @return array</span>
<a name="l2751"><span class="linenum">2751</span></a>  <span class="comment">     */</span>
<a name="l2752"><span class="linenum">2752</span></a>      public static function <a class="function" onClick="logFunction('wake_from_cache')" href="../_functions/wake_from_cache.html" onMouseOver="funcPopup(event,'wake_from_cache')">wake_from_cache</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>) {
<a name="l2753"><span class="linenum">2753</span></a>          <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['class'];
<a name="l2754"><span class="linenum">2754</span></a>          return new <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['id'], <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['ctxid'], <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['options'], <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['readonly']);
<a name="l2755"><span class="linenum">2755</span></a>      }
<a name="l2756"><span class="linenum">2756</span></a>  
<a name="l2757"><span class="linenum">2757</span></a>      <span class="comment">/**</span>
<a name="l2758"><span class="linenum">2758</span></a>  <span class="comment">     * Gets a file relative to this file in the repository and sends it to the browser.</span>
<a name="l2759"><span class="linenum">2759</span></a>  <span class="comment">     * Used to allow relative file linking within a repository without creating file records</span>
<a name="l2760"><span class="linenum">2760</span></a>  <span class="comment">     * for linked files</span>
<a name="l2761"><span class="linenum">2761</span></a>  <span class="comment">     *</span>
<a name="l2762"><span class="linenum">2762</span></a>  <span class="comment">     * Repositories that overwrite this must be very careful - see filesystem repository for example.</span>
<a name="l2763"><span class="linenum">2763</span></a>  <span class="comment">     *</span>
<a name="l2764"><span class="linenum">2764</span></a>  <span class="comment">     * @param stored_file $mainfile The main file we are trying to access relative files for.</span>
<a name="l2765"><span class="linenum">2765</span></a>  <span class="comment">     * @param string $relativepath the relative path to the file we are trying to access.</span>
<a name="l2766"><span class="linenum">2766</span></a>  <span class="comment">     *</span>
<a name="l2767"><span class="linenum">2767</span></a>  <span class="comment">     */</span>
<a name="l2768"><span class="linenum">2768</span></a>      public function <a class="function" onClick="logFunction('send_relative_file')" href="../_functions/send_relative_file.html" onMouseOver="funcPopup(event,'send_relative_file')">send_relative_file</a>(stored_file <a class="var it4389" onMouseOver="hilite(4389)" onMouseOut="lolite()" onClick="logVariable('mainfile')" href="../_variables/mainfile.html">$mainfile</a>, <a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../_variables/relativepath.html">$relativepath</a>) {
<a name="l2769"><span class="linenum">2769</span></a>  <span class="comment">        // This repository hasn't implemented this so send_file_not_found.</span>
<a name="l2770"><span class="linenum">2770</span></a>          <a class="function" onClick="logFunction('send_file_not_found')" href="../_functions/send_file_not_found.html" onMouseOver="funcPopup(event,'send_file_not_found')">send_file_not_found</a>();
<a name="l2771"><span class="linenum">2771</span></a>      }
<a name="l2772"><span class="linenum">2772</span></a>  
<a name="l2773"><span class="linenum">2773</span></a>      <span class="comment">/**</span>
<a name="l2774"><span class="linenum">2774</span></a>  <span class="comment">     * helper function to check if the repository supports send_relative_file.</span>
<a name="l2775"><span class="linenum">2775</span></a>  <span class="comment">     *</span>
<a name="l2776"><span class="linenum">2776</span></a>  <span class="comment">     * @return true|false</span>
<a name="l2777"><span class="linenum">2777</span></a>  <span class="comment">     */</span>
<a name="l2778"><span class="linenum">2778</span></a>      public function <a class="function" onClick="logFunction('supports_relative_file')" href="../_functions/supports_relative_file.html" onMouseOver="funcPopup(event,'supports_relative_file')">supports_relative_file</a>() {
<a name="l2779"><span class="linenum">2779</span></a>          return false;
<a name="l2780"><span class="linenum">2780</span></a>      }
<a name="l2781"><span class="linenum">2781</span></a>  
<a name="l2782"><span class="linenum">2782</span></a>      <span class="comment">/**</span>
<a name="l2783"><span class="linenum">2783</span></a>  <span class="comment">     * Helper function to indicate if this repository uses post requests for uploading files.</span>
<a name="l2784"><span class="linenum">2784</span></a>  <span class="comment">     *</span>
<a name="l2785"><span class="linenum">2785</span></a>  <span class="comment">     * @deprecated since Moodle 3.2, 3.1.1, 3.0.5</span>
<a name="l2786"><span class="linenum">2786</span></a>  <span class="comment">     * @return bool</span>
<a name="l2787"><span class="linenum">2787</span></a>  <span class="comment">     */</span>
<a name="l2788"><span class="linenum">2788</span></a>      public function <a class="function" onClick="logFunction('uses_post_requests')" href="../_functions/uses_post_requests.html" onMouseOver="funcPopup(event,'uses_post_requests')">uses_post_requests</a>() {
<a name="l2789"><span class="linenum">2789</span></a>          <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('The method <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('uses_post_requests')" href="../_functions/uses_post_requests.html" onMouseOver="funcPopup(event,'uses_post_requests')">uses_post_requests</a>() is deprecated and must not be used anymore.', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l2790"><span class="linenum">2790</span></a>          return false;
<a name="l2791"><span class="linenum">2791</span></a>      }
<a name="l2792"><span class="linenum">2792</span></a>  }
<a name="l2793"><span class="linenum">2793</span></a>  
<a name="l2794"><span class="linenum">2794</span></a>  <span class="comment">/**</span>
<a name="l2795"><span class="linenum">2795</span></a>  <span class="comment"> * Exception class for repository api</span>
<a name="l2796"><span class="linenum">2796</span></a>  <span class="comment"> *</span>
<a name="l2797"><span class="linenum">2797</span></a>  <span class="comment"> * @since Moodle 2.0</span>
<a name="l2798"><span class="linenum">2798</span></a>  <span class="comment"> * @package   core_repository</span>
<a name="l2799"><span class="linenum">2799</span></a>  <span class="comment"> * @copyright 2009 Dongsheng Cai {@link http://dongsheng.org}</span>
<a name="l2800"><span class="linenum">2800</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l2801"><span class="linenum">2801</span></a>  <span class="comment"> */</span>
<a name="l2802"><span class="linenum">2802</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('repository_exception')" href="../_classes/repository_exception.html" onMouseOver="classPopup(event,'repository_exception')">repository_exception</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a> {
<a name="l2803"><span class="linenum">2803</span></a>  }
<a name="l2804"><span class="linenum">2804</span></a>  
<a name="l2805"><span class="linenum">2805</span></a>  <span class="comment">/**</span>
<a name="l2806"><span class="linenum">2806</span></a>  <span class="comment"> * This is a class used to define a repository instance form</span>
<a name="l2807"><span class="linenum">2807</span></a>  <span class="comment"> *</span>
<a name="l2808"><span class="linenum">2808</span></a>  <span class="comment"> * @since Moodle 2.0</span>
<a name="l2809"><span class="linenum">2809</span></a>  <span class="comment"> * @package   core_repository</span>
<a name="l2810"><span class="linenum">2810</span></a>  <span class="comment"> * @copyright 2009 Dongsheng Cai {@link http://dongsheng.org}</span>
<a name="l2811"><span class="linenum">2811</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l2812"><span class="linenum">2812</span></a>  <span class="comment"> */</span>
<a name="l2813"><span class="linenum">2813</span></a>  final class repository_instance_form extends moodleform {
<a name="l2814"><span class="linenum">2814</span></a>  <span class="comment">    /** @var stdClass repository instance */</span>
<a name="l2815"><span class="linenum">2815</span></a>      protected <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>;
<a name="l2816"><span class="linenum">2816</span></a>  <span class="comment">    /** @var string repository plugin type */</span>
<a name="l2817"><span class="linenum">2817</span></a>      protected <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>;
<a name="l2818"><span class="linenum">2818</span></a>  
<a name="l2819"><span class="linenum">2819</span></a>      <span class="comment">/**</span>
<a name="l2820"><span class="linenum">2820</span></a>  <span class="comment">     * Added defaults to moodle form</span>
<a name="l2821"><span class="linenum">2821</span></a>  <span class="comment">     */</span>
<a name="l2822"><span class="linenum">2822</span></a>      protected function <a class="function" onClick="logFunction('add_defaults')" href="../_functions/add_defaults.html" onMouseOver="funcPopup(event,'add_defaults')">add_defaults</a>() {
<a name="l2823"><span class="linenum">2823</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a> =&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_form.html">_form</a>;
<a name="l2824"><span class="linenum">2824</span></a>          <a class="var it5435" onMouseOver="hilite(5435)" onMouseOut="lolite()" onClick="logVariable('strrequired')" href="../_variables/strrequired.html">$strrequired</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('required');
<a name="l2825"><span class="linenum">2825</span></a>  
<a name="l2826"><span class="linenum">2826</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('hidden', 'edit',  (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instance')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>) ? <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instance')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;id : 0);
<a name="l2827"><span class="linenum">2827</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('edit', <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l2828"><span class="linenum">2828</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('hidden', 'new',   <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('plugin')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/plugin.html">plugin</a>);
<a name="l2829"><span class="linenum">2829</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('new', <a class="constant" onClick="logConstant('PARAM_ALPHANUMEXT')" href="../_constants/PARAM_ALPHANUMEXT.html" onMouseOver="constPopup(event,'PARAM_ALPHANUMEXT')">PARAM_ALPHANUMEXT</a>);
<a name="l2830"><span class="linenum">2830</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('hidden', 'plugin', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('plugin')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/plugin.html">plugin</a>);
<a name="l2831"><span class="linenum">2831</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('plugin', <a class="constant" onClick="logConstant('PARAM_PLUGIN')" href="../_constants/PARAM_PLUGIN.html" onMouseOver="constPopup(event,'PARAM_PLUGIN')">PARAM_PLUGIN</a>);
<a name="l2832"><span class="linenum">2832</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('hidden', 'typeid', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('typeid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/typeid.html">typeid</a>);
<a name="l2833"><span class="linenum">2833</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('typeid', <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l2834"><span class="linenum">2834</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('hidden', 'contextid', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('contextid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a>);
<a name="l2835"><span class="linenum">2835</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('contextid', <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l2836"><span class="linenum">2836</span></a>  
<a name="l2837"><span class="linenum">2837</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('text', 'name', <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('name'), 'maxlength=&quot;100&quot; size=&quot;30&quot;');
<a name="l2838"><span class="linenum">2838</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addRule')" href="../_functions/addrule.html" onMouseOver="funcPopup(event,'addrule')">addRule</a>('name', <a class="var it5435" onMouseOver="hilite(5435)" onMouseOut="lolite()" onClick="logVariable('strrequired')" href="../_variables/strrequired.html">$strrequired</a>, 'required', null, 'client');
<a name="l2839"><span class="linenum">2839</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('name', <a class="constant" onClick="logConstant('PARAM_TEXT')" href="../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>);
<a name="l2840"><span class="linenum">2840</span></a>      }
<a name="l2841"><span class="linenum">2841</span></a>  
<a name="l2842"><span class="linenum">2842</span></a>      <span class="comment">/**</span>
<a name="l2843"><span class="linenum">2843</span></a>  <span class="comment">     * Define moodle form elements</span>
<a name="l2844"><span class="linenum">2844</span></a>  <span class="comment">     */</span>
<a name="l2845"><span class="linenum">2845</span></a>      public function <a class="function" onClick="logFunction('definition')" href="../_functions/definition.html" onMouseOver="funcPopup(event,'definition')">definition</a>() {
<a name="l2846"><span class="linenum">2846</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l2847"><span class="linenum">2847</span></a>  <span class="comment">        // type of plugin, string</span>
<a name="l2848"><span class="linenum">2848</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('plugin')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/plugin.html">plugin</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_customdata.html">_customdata</a>['plugin'];
<a name="l2849"><span class="linenum">2849</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('typeid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/typeid.html">typeid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_customdata.html">_customdata</a>['typeid'];
<a name="l2850"><span class="linenum">2850</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('contextid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_customdata.html">_customdata</a>['contextid'];
<a name="l2851"><span class="linenum">2851</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instance')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a> = (isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_customdata.html">_customdata</a>['instance'])
<a name="l2852"><span class="linenum">2852</span></a>                  &amp;&amp; <a class="phpfunction" onClick="logFunction('is_subclass_of')" href="../_functions/is_subclass_of.html" onMouseOver="phpfuncPopup(event,'is_subclass_of')">is_subclass_of</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_customdata.html">_customdata</a>['instance'], 'repository'))
<a name="l2853"><span class="linenum">2853</span></a>              ? <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_customdata.html">_customdata</a>['instance'] : null;
<a name="l2854"><span class="linenum">2854</span></a>  
<a name="l2855"><span class="linenum">2855</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a> =&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_form.html">_form</a>;
<a name="l2856"><span class="linenum">2856</span></a>  
<a name="l2857"><span class="linenum">2857</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_defaults')" href="../_functions/add_defaults.html" onMouseOver="funcPopup(event,'add_defaults')">add_defaults</a>();
<a name="l2858"><span class="linenum">2858</span></a>  
<a name="l2859"><span class="linenum">2859</span></a>  <span class="comment">        // Add instance config options.</span>
<a name="l2860"><span class="linenum">2860</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('static_function')" href="../_functions/static_function.html" onMouseOver="funcPopup(event,'static_function')">static_function</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('plugin')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/plugin.html">plugin</a>, 'instance_config_form', <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>);
<a name="l2861"><span class="linenum">2861</span></a>          if (<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> === false) {
<a name="l2862"><span class="linenum">2862</span></a>  <span class="comment">            // Remove the name element if no other config options.</span>
<a name="l2863"><span class="linenum">2863</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('removeElement')" href="../_functions/removeelement.html" onMouseOver="funcPopup(event,'removeelement')">removeElement</a>('name');
<a name="l2864"><span class="linenum">2864</span></a>          }
<a name="l2865"><span class="linenum">2865</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instance')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>) {
<a name="l2866"><span class="linenum">2866</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a> = array();
<a name="l2867"><span class="linenum">2867</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['name'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instance')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;name;
<a name="l2868"><span class="linenum">2868</span></a>              if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instance')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;readonly) {
<a name="l2869"><span class="linenum">2869</span></a>  <span class="comment">                // and set the data if we have some.</span>
<a name="l2870"><span class="linenum">2870</span></a>                  foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instance')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;<a class="function" onClick="logFunction('get_instance_option_names')" href="../_functions/get_instance_option_names.html" onMouseOver="funcPopup(event,'get_instance_option_names')">get_instance_option_names</a>() as <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>) {
<a name="l2871"><span class="linenum">2871</span></a>                      if (!empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instance')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;options[<a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>])) {
<a name="l2872"><span class="linenum">2872</span></a>                          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>[<a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instance')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;options[<a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>];
<a name="l2873"><span class="linenum">2873</span></a>                       } else {
<a name="l2874"><span class="linenum">2874</span></a>                          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>[<a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>] = '';
<a name="l2875"><span class="linenum">2875</span></a>                       }
<a name="l2876"><span class="linenum">2876</span></a>                  }
<a name="l2877"><span class="linenum">2877</span></a>              }
<a name="l2878"><span class="linenum">2878</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_data')" href="../_functions/set_data.html" onMouseOver="funcPopup(event,'set_data')">set_data</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>);
<a name="l2879"><span class="linenum">2879</span></a>          }
<a name="l2880"><span class="linenum">2880</span></a>  
<a name="l2881"><span class="linenum">2881</span></a>          if (<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> === false) {
<a name="l2882"><span class="linenum">2882</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('cancel');
<a name="l2883"><span class="linenum">2883</span></a>          } else {
<a name="l2884"><span class="linenum">2884</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_action_buttons')" href="../_functions/add_action_buttons.html" onMouseOver="funcPopup(event,'add_action_buttons')">add_action_buttons</a>(true, <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('save','repository'));
<a name="l2885"><span class="linenum">2885</span></a>          }
<a name="l2886"><span class="linenum">2886</span></a>      }
<a name="l2887"><span class="linenum">2887</span></a>  
<a name="l2888"><span class="linenum">2888</span></a>      <span class="comment">/**</span>
<a name="l2889"><span class="linenum">2889</span></a>  <span class="comment">     * Validate moodle form data</span>
<a name="l2890"><span class="linenum">2890</span></a>  <span class="comment">     *</span>
<a name="l2891"><span class="linenum">2891</span></a>  <span class="comment">     * @param array $data form data</span>
<a name="l2892"><span class="linenum">2892</span></a>  <span class="comment">     * @param array $files files in form</span>
<a name="l2893"><span class="linenum">2893</span></a>  <span class="comment">     * @return array errors</span>
<a name="l2894"><span class="linenum">2894</span></a>  <span class="comment">     */</span>
<a name="l2895"><span class="linenum">2895</span></a>      public function <a class="function" onClick="logFunction('validation')" href="../_functions/validation.html" onMouseOver="funcPopup(event,'validation')">validation</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>, <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../_variables/files.html">$files</a>) {
<a name="l2896"><span class="linenum">2896</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2897"><span class="linenum">2897</span></a>          <a class="var it224" onMouseOver="hilite(224)" onMouseOut="lolite()" onClick="logVariable('errors')" href="../_variables/errors.html">$errors</a> = array();
<a name="l2898"><span class="linenum">2898</span></a>          <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_customdata.html">_customdata</a>['plugin'];
<a name="l2899"><span class="linenum">2899</span></a>          <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a> = (isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_customdata.html">_customdata</a>['instance'])
<a name="l2900"><span class="linenum">2900</span></a>                  &amp;&amp; <a class="phpfunction" onClick="logFunction('is_subclass_of')" href="../_functions/is_subclass_of.html" onMouseOver="phpfuncPopup(event,'is_subclass_of')">is_subclass_of</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_customdata.html">_customdata</a>['instance'], 'repository'))
<a name="l2901"><span class="linenum">2901</span></a>              ? <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_customdata.html">_customdata</a>['instance'] : null;
<a name="l2902"><span class="linenum">2902</span></a>  
<a name="l2903"><span class="linenum">2903</span></a>          if (!<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>) {
<a name="l2904"><span class="linenum">2904</span></a>              <a class="var it224" onMouseOver="hilite(224)" onMouseOut="lolite()" onClick="logVariable('errors')" href="../_variables/errors.html">$errors</a> = <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('static_function')" href="../_functions/static_function.html" onMouseOver="funcPopup(event,'static_function')">static_function</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, 'instance_form_validation', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>, <a class="var it224" onMouseOver="hilite(224)" onMouseOut="lolite()" onClick="logVariable('errors')" href="../_variables/errors.html">$errors</a>);
<a name="l2905"><span class="linenum">2905</span></a>          } else {
<a name="l2906"><span class="linenum">2906</span></a>              <a class="var it224" onMouseOver="hilite(224)" onMouseOut="lolite()" onClick="logVariable('errors')" href="../_variables/errors.html">$errors</a> = <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a class="function" onClick="logFunction('instance_form_validation')" href="../_functions/instance_form_validation.html" onMouseOver="funcPopup(event,'instance_form_validation')">instance_form_validation</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>, <a class="var it224" onMouseOver="hilite(224)" onMouseOut="lolite()" onClick="logVariable('errors')" href="../_variables/errors.html">$errors</a>);
<a name="l2907"><span class="linenum">2907</span></a>          }
<a name="l2908"><span class="linenum">2908</span></a>  
<a name="l2909"><span class="linenum">2909</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>('x')
<a name="l2910"><span class="linenum">2910</span></a>                    FROM {repository_instances} i, {repository} r
<a name="l2911"><span class="linenum">2911</span></a>                   WHERE r.type=:plugin AND r.id=i.typeid AND i.name=:name AND i.contextid=:contextid&quot;;
<a name="l2912"><span class="linenum">2912</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array('name' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['name'], 'plugin' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('plugin')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/plugin.html">plugin</a>, 'contextid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('contextid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a>);
<a name="l2913"><span class="linenum">2913</span></a>          if (<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>) {
<a name="l2914"><span class="linenum">2914</span></a>              <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> .= ' AND i.id != :instanceid';
<a name="l2915"><span class="linenum">2915</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['instanceid'] = <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('id')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l2916"><span class="linenum">2916</span></a>          }
<a name="l2917"><span class="linenum">2917</span></a>          if (<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records_sql')" href="../_functions/count_records_sql.html" onMouseOver="funcPopup(event,'count_records_sql')">count_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>) &gt; 0) {
<a name="l2918"><span class="linenum">2918</span></a>              <a class="var it224" onMouseOver="hilite(224)" onMouseOut="lolite()" onClick="logVariable('errors')" href="../_variables/errors.html">$errors</a>['name'] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('erroruniquename', 'repository');
<a name="l2919"><span class="linenum">2919</span></a>          }
<a name="l2920"><span class="linenum">2920</span></a>  
<a name="l2921"><span class="linenum">2921</span></a>          return <a class="var it224" onMouseOver="hilite(224)" onMouseOut="lolite()" onClick="logVariable('errors')" href="../_variables/errors.html">$errors</a>;
<a name="l2922"><span class="linenum">2922</span></a>      }
<a name="l2923"><span class="linenum">2923</span></a>  }
<a name="l2924"><span class="linenum">2924</span></a>  
<a name="l2925"><span class="linenum">2925</span></a>  <span class="comment">/**</span>
<a name="l2926"><span class="linenum">2926</span></a>  <span class="comment"> * This is a class used to define a repository type setting form</span>
<a name="l2927"><span class="linenum">2927</span></a>  <span class="comment"> *</span>
<a name="l2928"><span class="linenum">2928</span></a>  <span class="comment"> * @since Moodle 2.0</span>
<a name="l2929"><span class="linenum">2929</span></a>  <span class="comment"> * @package   core_repository</span>
<a name="l2930"><span class="linenum">2930</span></a>  <span class="comment"> * @copyright 2009 Dongsheng Cai {@link http://dongsheng.org}</span>
<a name="l2931"><span class="linenum">2931</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l2932"><span class="linenum">2932</span></a>  <span class="comment"> */</span>
<a name="l2933"><span class="linenum">2933</span></a>  final class repository_type_form extends moodleform {
<a name="l2934"><span class="linenum">2934</span></a>  <span class="comment">    /** @var stdClass repository instance */</span>
<a name="l2935"><span class="linenum">2935</span></a>      protected <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>;
<a name="l2936"><span class="linenum">2936</span></a>  <span class="comment">    /** @var string repository plugin name */</span>
<a name="l2937"><span class="linenum">2937</span></a>      protected <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>;
<a name="l2938"><span class="linenum">2938</span></a>  <span class="comment">    /** @var string action */</span>
<a name="l2939"><span class="linenum">2939</span></a>      protected <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../_variables/action.html">$action</a>;
<a name="l2940"><span class="linenum">2940</span></a>  
<a name="l2941"><span class="linenum">2941</span></a>      <span class="comment">/**</span>
<a name="l2942"><span class="linenum">2942</span></a>  <span class="comment">     * Definition of the moodleform</span>
<a name="l2943"><span class="linenum">2943</span></a>  <span class="comment">     */</span>
<a name="l2944"><span class="linenum">2944</span></a>      public function <a class="function" onClick="logFunction('definition')" href="../_functions/definition.html" onMouseOver="funcPopup(event,'definition')">definition</a>() {
<a name="l2945"><span class="linenum">2945</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l2946"><span class="linenum">2946</span></a>  <span class="comment">        // type of plugin, string</span>
<a name="l2947"><span class="linenum">2947</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('plugin')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/plugin.html">plugin</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_customdata.html">_customdata</a>['plugin'];
<a name="l2948"><span class="linenum">2948</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instance')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a> = (isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_customdata.html">_customdata</a>['instance'])
<a name="l2949"><span class="linenum">2949</span></a>                  &amp;&amp; <a class="phpfunction" onClick="logFunction('is_a')" href="../_functions/is_a.html" onMouseOver="phpfuncPopup(event,'is_a')">is_a</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_customdata.html">_customdata</a>['instance'], 'repository_type'))
<a name="l2950"><span class="linenum">2950</span></a>              ? <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_customdata.html">_customdata</a>['instance'] : null;
<a name="l2951"><span class="linenum">2951</span></a>  
<a name="l2952"><span class="linenum">2952</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('action')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/action.html">action</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_customdata.html">_customdata</a>['action'];
<a name="l2953"><span class="linenum">2953</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pluginname')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/pluginname.html">pluginname</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_customdata.html">_customdata</a>['pluginname'];
<a name="l2954"><span class="linenum">2954</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a> =&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_form')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_form.html">_form</a>;
<a name="l2955"><span class="linenum">2955</span></a>          <a class="var it5435" onMouseOver="hilite(5435)" onMouseOut="lolite()" onClick="logVariable('strrequired')" href="../_variables/strrequired.html">$strrequired</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('required');
<a name="l2956"><span class="linenum">2956</span></a>  
<a name="l2957"><span class="linenum">2957</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('hidden', 'action', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('action')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/action.html">action</a>);
<a name="l2958"><span class="linenum">2958</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('action', <a class="constant" onClick="logConstant('PARAM_TEXT')" href="../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>);
<a name="l2959"><span class="linenum">2959</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('hidden', 'repos', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('plugin')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/plugin.html">plugin</a>);
<a name="l2960"><span class="linenum">2960</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('repos', <a class="constant" onClick="logConstant('PARAM_PLUGIN')" href="../_constants/PARAM_PLUGIN.html" onMouseOver="constPopup(event,'PARAM_PLUGIN')">PARAM_PLUGIN</a>);
<a name="l2961"><span class="linenum">2961</span></a>  
<a name="l2962"><span class="linenum">2962</span></a>  <span class="comment">        // let the plugin add its specific fields</span>
<a name="l2963"><span class="linenum">2963</span></a>          <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a> = 'repository_' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('plugin')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/plugin.html">plugin</a>;
<a name="l2964"><span class="linenum">2964</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '/repository/' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('plugin')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/plugin.html">plugin</a> . '/lib.php');
<a name="l2965"><span class="linenum">2965</span></a>  <span class="comment">        //add &quot;enable course/user instances&quot; checkboxes if multiple instances are allowed</span>
<a name="l2966"><span class="linenum">2966</span></a>          <a class="var it21380" onMouseOver="hilite(21380)" onMouseOut="lolite()" onClick="logVariable('instanceoptionnames')" href="../_variables/instanceoptionnames.html">$instanceoptionnames</a> = <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('static_function')" href="../_functions/static_function.html" onMouseOver="funcPopup(event,'static_function')">static_function</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('plugin')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/plugin.html">plugin</a>, 'get_instance_option_names');
<a name="l2967"><span class="linenum">2967</span></a>  
<a name="l2968"><span class="linenum">2968</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = <a class="phpfunction" onClick="logFunction('call_user_func')" href="../_functions/call_user_func.html" onMouseOver="phpfuncPopup(event,'call_user_func')">call_user_func</a>(array(<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a>, 'type_config_form'), <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>, <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a>);
<a name="l2969"><span class="linenum">2969</span></a>  
<a name="l2970"><span class="linenum">2970</span></a>          if (!empty(<a class="var it21380" onMouseOver="hilite(21380)" onMouseOut="lolite()" onClick="logVariable('instanceoptionnames')" href="../_variables/instanceoptionnames.html">$instanceoptionnames</a>)) {
<a name="l2971"><span class="linenum">2971</span></a>              <a class="var it13767" onMouseOver="hilite(13767)" onMouseOut="lolite()" onClick="logVariable('sm')" href="../_variables/sm.html">$sm</a> = <a class="function" onClick="logFunction('get_string_manager')" href="../_functions/get_string_manager.html" onMouseOver="funcPopup(event,'get_string_manager')">get_string_manager</a>();
<a name="l2972"><span class="linenum">2972</span></a>              <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a> = 'repository';
<a name="l2973"><span class="linenum">2973</span></a>              if (<a class="var it13767" onMouseOver="hilite(13767)" onMouseOut="lolite()" onClick="logVariable('sm')" href="../_variables/sm.html">$sm</a>-&gt;<a class="function" onClick="logFunction('string_exists')" href="../_functions/string_exists.html" onMouseOver="funcPopup(event,'string_exists')">string_exists</a>('enablecourseinstances', 'repository_' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('plugin')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/plugin.html">plugin</a>)) {
<a name="l2974"><span class="linenum">2974</span></a>                  <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a> .= ('_' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('plugin')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/plugin.html">plugin</a>);
<a name="l2975"><span class="linenum">2975</span></a>              }
<a name="l2976"><span class="linenum">2976</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('checkbox', 'enablecourseinstances', <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('enablecourseinstances', <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>));
<a name="l2977"><span class="linenum">2977</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('enablecourseinstances', <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>);
<a name="l2978"><span class="linenum">2978</span></a>  
<a name="l2979"><span class="linenum">2979</span></a>              <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a> = 'repository';
<a name="l2980"><span class="linenum">2980</span></a>              if (<a class="var it13767" onMouseOver="hilite(13767)" onMouseOut="lolite()" onClick="logVariable('sm')" href="../_variables/sm.html">$sm</a>-&gt;<a class="function" onClick="logFunction('string_exists')" href="../_functions/string_exists.html" onMouseOver="funcPopup(event,'string_exists')">string_exists</a>('enableuserinstances', 'repository_' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('plugin')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/plugin.html">plugin</a>)) {
<a name="l2981"><span class="linenum">2981</span></a>                  <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a> .= ('_' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('plugin')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/plugin.html">plugin</a>);
<a name="l2982"><span class="linenum">2982</span></a>              }
<a name="l2983"><span class="linenum">2983</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('checkbox', 'enableuserinstances', <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('enableuserinstances', <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>));
<a name="l2984"><span class="linenum">2984</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>-&gt;<a class="phpfunction" onClick="logFunction('setType')" href="../_functions/settype.html" onMouseOver="phpfuncPopup(event,'settype')">setType</a>('enableuserinstances', <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>);
<a name="l2985"><span class="linenum">2985</span></a>          }
<a name="l2986"><span class="linenum">2986</span></a>  
<a name="l2987"><span class="linenum">2987</span></a>  <span class="comment">        // set the data if we have some.</span>
<a name="l2988"><span class="linenum">2988</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instance')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>) {
<a name="l2989"><span class="linenum">2989</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a> = array();
<a name="l2990"><span class="linenum">2990</span></a>              <a class="var it21428" onMouseOver="hilite(21428)" onMouseOut="lolite()" onClick="logVariable('option_names')" href="../_variables/option_names.html">$option_names</a> = <a class="phpfunction" onClick="logFunction('call_user_func')" href="../_functions/call_user_func.html" onMouseOver="phpfuncPopup(event,'call_user_func')">call_user_func</a>(array(<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a>,'get_type_option_names'));
<a name="l2991"><span class="linenum">2991</span></a>              if (!empty(<a class="var it21380" onMouseOver="hilite(21380)" onMouseOut="lolite()" onClick="logVariable('instanceoptionnames')" href="../_variables/instanceoptionnames.html">$instanceoptionnames</a>)){
<a name="l2992"><span class="linenum">2992</span></a>                  <a class="var it21428" onMouseOver="hilite(21428)" onMouseOut="lolite()" onClick="logVariable('option_names')" href="../_variables/option_names.html">$option_names</a>[] = 'enablecourseinstances';
<a name="l2993"><span class="linenum">2993</span></a>                  <a class="var it21428" onMouseOver="hilite(21428)" onMouseOut="lolite()" onClick="logVariable('option_names')" href="../_variables/option_names.html">$option_names</a>[] = 'enableuserinstances';
<a name="l2994"><span class="linenum">2994</span></a>              }
<a name="l2995"><span class="linenum">2995</span></a>  
<a name="l2996"><span class="linenum">2996</span></a>              <a class="var it18674" onMouseOver="hilite(18674)" onMouseOut="lolite()" onClick="logVariable('instanceoptions')" href="../_variables/instanceoptions.html">$instanceoptions</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instance')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;<a class="function" onClick="logFunction('get_options')" href="../_functions/get_options.html" onMouseOver="funcPopup(event,'get_options')">get_options</a>();
<a name="l2997"><span class="linenum">2997</span></a>              foreach (<a class="var it21428" onMouseOver="hilite(21428)" onMouseOut="lolite()" onClick="logVariable('option_names')" href="../_variables/option_names.html">$option_names</a> as <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>) {
<a name="l2998"><span class="linenum">2998</span></a>                  if (!empty(<a class="var it18674" onMouseOver="hilite(18674)" onMouseOut="lolite()" onClick="logVariable('instanceoptions')" href="../_variables/instanceoptions.html">$instanceoptions</a>[<a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>])) {
<a name="l2999"><span class="linenum">2999</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>[<a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>] = <a class="var it18674" onMouseOver="hilite(18674)" onMouseOut="lolite()" onClick="logVariable('instanceoptions')" href="../_variables/instanceoptions.html">$instanceoptions</a>[<a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>];
<a name="l3000"><span class="linenum">3000</span></a>                  } else {
<a name="l3001"><span class="linenum">3001</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>[<a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>] = '';
<a name="l3002"><span class="linenum">3002</span></a>                  }
<a name="l3003"><span class="linenum">3003</span></a>              }
<a name="l3004"><span class="linenum">3004</span></a>  <span class="comment">            // XXX: set plugin name for plugins which doesn't have muliti instances</span>
<a name="l3005"><span class="linenum">3005</span></a>              if (empty(<a class="var it21380" onMouseOver="hilite(21380)" onMouseOut="lolite()" onClick="logVariable('instanceoptionnames')" href="../_variables/instanceoptionnames.html">$instanceoptionnames</a>)){
<a name="l3006"><span class="linenum">3006</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['pluginname'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pluginname')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/pluginname.html">pluginname</a>;
<a name="l3007"><span class="linenum">3007</span></a>              }
<a name="l3008"><span class="linenum">3008</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_data')" href="../_functions/set_data.html" onMouseOver="funcPopup(event,'set_data')">set_data</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>);
<a name="l3009"><span class="linenum">3009</span></a>          }
<a name="l3010"><span class="linenum">3010</span></a>  
<a name="l3011"><span class="linenum">3011</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_action_buttons')" href="../_functions/add_action_buttons.html" onMouseOver="funcPopup(event,'add_action_buttons')">add_action_buttons</a>(true, <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('save','repository'));
<a name="l3012"><span class="linenum">3012</span></a>      }
<a name="l3013"><span class="linenum">3013</span></a>  
<a name="l3014"><span class="linenum">3014</span></a>      <span class="comment">/**</span>
<a name="l3015"><span class="linenum">3015</span></a>  <span class="comment">     * Validate moodle form data</span>
<a name="l3016"><span class="linenum">3016</span></a>  <span class="comment">     *</span>
<a name="l3017"><span class="linenum">3017</span></a>  <span class="comment">     * @param array $data moodle form data</span>
<a name="l3018"><span class="linenum">3018</span></a>  <span class="comment">     * @param array $files</span>
<a name="l3019"><span class="linenum">3019</span></a>  <span class="comment">     * @return array errors</span>
<a name="l3020"><span class="linenum">3020</span></a>  <span class="comment">     */</span>
<a name="l3021"><span class="linenum">3021</span></a>      public function <a class="function" onClick="logFunction('validation')" href="../_functions/validation.html" onMouseOver="funcPopup(event,'validation')">validation</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>, <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../_variables/files.html">$files</a>) {
<a name="l3022"><span class="linenum">3022</span></a>          <a class="var it224" onMouseOver="hilite(224)" onMouseOut="lolite()" onClick="logVariable('errors')" href="../_variables/errors.html">$errors</a> = array();
<a name="l3023"><span class="linenum">3023</span></a>          <a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_customdata.html">_customdata</a>['plugin'];
<a name="l3024"><span class="linenum">3024</span></a>          <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a> = (isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_customdata.html">_customdata</a>['instance'])
<a name="l3025"><span class="linenum">3025</span></a>                  &amp;&amp; <a class="phpfunction" onClick="logFunction('is_subclass_of')" href="../_functions/is_subclass_of.html" onMouseOver="phpfuncPopup(event,'is_subclass_of')">is_subclass_of</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_customdata.html">_customdata</a>['instance'], 'repository'))
<a name="l3026"><span class="linenum">3026</span></a>              ? <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_customdata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_customdata.html">_customdata</a>['instance'] : null;
<a name="l3027"><span class="linenum">3027</span></a>          if (!<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>) {
<a name="l3028"><span class="linenum">3028</span></a>              <a class="var it224" onMouseOver="hilite(224)" onMouseOut="lolite()" onClick="logVariable('errors')" href="../_variables/errors.html">$errors</a> = <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('static_function')" href="../_functions/static_function.html" onMouseOver="funcPopup(event,'static_function')">static_function</a>(<a class="var it265" onMouseOver="hilite(265)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>, 'type_form_validation', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>, <a class="var it224" onMouseOver="hilite(224)" onMouseOut="lolite()" onClick="logVariable('errors')" href="../_variables/errors.html">$errors</a>);
<a name="l3029"><span class="linenum">3029</span></a>          } else {
<a name="l3030"><span class="linenum">3030</span></a>              <a class="var it224" onMouseOver="hilite(224)" onMouseOut="lolite()" onClick="logVariable('errors')" href="../_variables/errors.html">$errors</a> = <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a class="function" onClick="logFunction('type_form_validation')" href="../_functions/type_form_validation.html" onMouseOver="funcPopup(event,'type_form_validation')">type_form_validation</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>, <a class="var it224" onMouseOver="hilite(224)" onMouseOut="lolite()" onClick="logVariable('errors')" href="../_variables/errors.html">$errors</a>);
<a name="l3031"><span class="linenum">3031</span></a>          }
<a name="l3032"><span class="linenum">3032</span></a>  
<a name="l3033"><span class="linenum">3033</span></a>          return <a class="var it224" onMouseOver="hilite(224)" onMouseOut="lolite()" onClick="logVariable('errors')" href="../_variables/errors.html">$errors</a>;
<a name="l3034"><span class="linenum">3034</span></a>      }
<a name="l3035"><span class="linenum">3035</span></a>  }
<a name="l3036"><span class="linenum">3036</span></a>  
<a name="l3037"><span class="linenum">3037</span></a>  <span class="comment">/**</span>
<a name="l3038"><span class="linenum">3038</span></a>  <span class="comment"> * Generate all options needed by filepicker</span>
<a name="l3039"><span class="linenum">3039</span></a>  <span class="comment"> *</span>
<a name="l3040"><span class="linenum">3040</span></a>  <span class="comment"> * @param array $args including following keys</span>
<a name="l3041"><span class="linenum">3041</span></a>  <span class="comment"> *          context</span>
<a name="l3042"><span class="linenum">3042</span></a>  <span class="comment"> *          accepted_types</span>
<a name="l3043"><span class="linenum">3043</span></a>  <span class="comment"> *          return_types</span>
<a name="l3044"><span class="linenum">3044</span></a>  <span class="comment"> *</span>
<a name="l3045"><span class="linenum">3045</span></a>  <span class="comment"> * @return array the list of repository instances, including meta infomation, containing the following keys</span>
<a name="l3046"><span class="linenum">3046</span></a>  <span class="comment"> *          externallink</span>
<a name="l3047"><span class="linenum">3047</span></a>  <span class="comment"> *          repositories</span>
<a name="l3048"><span class="linenum">3048</span></a>  <span class="comment"> *          accepted_types</span>
<a name="l3049"><span class="linenum">3049</span></a>  <span class="comment"> */</span>
<a name="l3050"><span class="linenum">3050</span></a>  function <a class="function" onClick="logFunction('initialise_filepicker')" href="../_functions/initialise_filepicker.html" onMouseOver="funcPopup(event,'initialise_filepicker')">initialise_filepicker</a>(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>) {
<a name="l3051"><span class="linenum">3051</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l3052"><span class="linenum">3052</span></a>      static <a class="var it21429" onMouseOver="hilite(21429)" onMouseOut="lolite()" onClick="logVariable('templatesinitialized')" href="../_variables/templatesinitialized.html">$templatesinitialized</a> = array();
<a name="l3053"><span class="linenum">3053</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> . '/licenselib.php');
<a name="l3054"><span class="linenum">3054</span></a>  
<a name="l3055"><span class="linenum">3055</span></a>      <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a> = new stdClass();
<a name="l3056"><span class="linenum">3056</span></a>      <a class="var it5981" onMouseOver="hilite(5981)" onMouseOut="lolite()" onClick="logVariable('licenses')" href="../_variables/licenses.html">$licenses</a> = array();
<a name="l3057"><span class="linenum">3057</span></a>      if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('licenses')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/licenses.html">licenses</a>)) {
<a name="l3058"><span class="linenum">3058</span></a>          <a class="var it497" onMouseOver="hilite(497)" onMouseOut="lolite()" onClick="logVariable('array')" href="../_variables/array.html">$array</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('licenses')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/licenses.html">licenses</a>);
<a name="l3059"><span class="linenum">3059</span></a>          foreach (<a class="var it497" onMouseOver="hilite(497)" onMouseOut="lolite()" onClick="logVariable('array')" href="../_variables/array.html">$array</a> as <a class="var it1318" onMouseOver="hilite(1318)" onMouseOut="lolite()" onClick="logVariable('license')" href="../_variables/license.html">$license</a>) {
<a name="l3060"><span class="linenum">3060</span></a>              <a class="var it1058" onMouseOver="hilite(1058)" onMouseOut="lolite()" onClick="logVariable('l')" href="../_variables/l.html">$l</a> = new stdClass();
<a name="l3061"><span class="linenum">3061</span></a>              <a class="var it1058" onMouseOver="hilite(1058)" onMouseOut="lolite()" onClick="logVariable('l')" href="../_variables/l.html">$l</a>-&gt;<a onClick="logVariable('shortname')" class="var it43428" onMouseOver="hilite(43428)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a> = <a class="var it1318" onMouseOver="hilite(1318)" onMouseOut="lolite()" onClick="logVariable('license')" href="../_variables/license.html">$license</a>;
<a name="l3062"><span class="linenum">3062</span></a>              <a class="var it1058" onMouseOver="hilite(1058)" onMouseOut="lolite()" onClick="logVariable('l')" href="../_variables/l.html">$l</a>-&gt;<a onClick="logVariable('fullname')" class="var it43428" onMouseOver="hilite(43428)" onMouseOut="lolite()" href="../_variables/fullname.html">fullname</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(<a class="var it1318" onMouseOver="hilite(1318)" onMouseOut="lolite()" onClick="logVariable('license')" href="../_variables/license.html">$license</a>, 'license');
<a name="l3063"><span class="linenum">3063</span></a>              <a class="var it5981" onMouseOver="hilite(5981)" onMouseOut="lolite()" onClick="logVariable('licenses')" href="../_variables/licenses.html">$licenses</a>[] = <a class="var it1058" onMouseOver="hilite(1058)" onMouseOut="lolite()" onClick="logVariable('l')" href="../_variables/l.html">$l</a>;
<a name="l3064"><span class="linenum">3064</span></a>          }
<a name="l3065"><span class="linenum">3065</span></a>      }
<a name="l3066"><span class="linenum">3066</span></a>      if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('sitedefaultlicense')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/sitedefaultlicense.html">sitedefaultlicense</a>)) {
<a name="l3067"><span class="linenum">3067</span></a>          <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('defaultlicense')" class="var it44198" onMouseOver="hilite(44198)" onMouseOut="lolite()" href="../_variables/defaultlicense.html">defaultlicense</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('sitedefaultlicense')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/sitedefaultlicense.html">sitedefaultlicense</a>;
<a name="l3068"><span class="linenum">3068</span></a>      }
<a name="l3069"><span class="linenum">3069</span></a>  
<a name="l3070"><span class="linenum">3070</span></a>      <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('licenses')" class="var it44198" onMouseOver="hilite(44198)" onMouseOut="lolite()" href="../_variables/licenses.html">licenses</a> = <a class="var it5981" onMouseOver="hilite(5981)" onMouseOut="lolite()" onClick="logVariable('licenses')" href="../_variables/licenses.html">$licenses</a>;
<a name="l3071"><span class="linenum">3071</span></a>  
<a name="l3072"><span class="linenum">3072</span></a>      <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('author')" class="var it44198" onMouseOver="hilite(44198)" onMouseOut="lolite()" href="../_variables/author.html">author</a> = <a class="function" onClick="logFunction('fullname')" href="../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>);
<a name="l3073"><span class="linenum">3073</span></a>  
<a name="l3074"><span class="linenum">3074</span></a>      if (empty(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>-&gt;<a onClick="logVariable('context')" class="var it43078" onMouseOver="hilite(43078)" onMouseOut="lolite()" href="../_variables/context.html">context</a>)) {
<a name="l3075"><span class="linenum">3075</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('context')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/context.html">context</a>;
<a name="l3076"><span class="linenum">3076</span></a>      } else {
<a name="l3077"><span class="linenum">3077</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>-&gt;<a onClick="logVariable('context')" class="var it43078" onMouseOver="hilite(43078)" onMouseOut="lolite()" href="../_variables/context.html">context</a>;
<a name="l3078"><span class="linenum">3078</span></a>      }
<a name="l3079"><span class="linenum">3079</span></a>      <a class="var it5983" onMouseOver="hilite(5983)" onMouseOut="lolite()" onClick="logVariable('disable_types')" href="../_variables/disable_types.html">$disable_types</a> = array();
<a name="l3080"><span class="linenum">3080</span></a>      if (!empty(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>-&gt;<a onClick="logVariable('disable_types')" class="var it43078" onMouseOver="hilite(43078)" onMouseOut="lolite()" href="../_variables/disable_types.html">disable_types</a>)) {
<a name="l3081"><span class="linenum">3081</span></a>          <a class="var it5983" onMouseOver="hilite(5983)" onMouseOut="lolite()" onClick="logVariable('disable_types')" href="../_variables/disable_types.html">$disable_types</a> = <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>-&gt;<a onClick="logVariable('disable_types')" class="var it43078" onMouseOver="hilite(43078)" onMouseOut="lolite()" href="../_variables/disable_types.html">disable_types</a>;
<a name="l3082"><span class="linenum">3082</span></a>      }
<a name="l3083"><span class="linenum">3083</span></a>  
<a name="l3084"><span class="linenum">3084</span></a>      <a class="var it2103" onMouseOver="hilite(2103)" onMouseOut="lolite()" onClick="logVariable('user_context')" href="../_variables/user_context.html">$user_context</a> = <a class="class" onClick="logClass('context_user')" href="../_classes/context_user.html" onMouseOver="classPopup(event,'context_user')">context_user</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l3085"><span class="linenum">3085</span></a>  
<a name="l3086"><span class="linenum">3086</span></a>      <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>) = <a class="function" onClick="logFunction('get_context_info_array')" href="../_functions/get_context_info_array.html" onMouseOver="funcPopup(event,'get_context_info_array')">get_context_info_array</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l3087"><span class="linenum">3087</span></a>      <a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a> = array(<a class="var it2103" onMouseOver="hilite(2103)" onMouseOut="lolite()" onClick="logVariable('user_context')" href="../_variables/user_context.html">$user_context</a>, <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>());
<a name="l3088"><span class="linenum">3088</span></a>      if (!empty(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>)) {
<a name="l3089"><span class="linenum">3089</span></a>  <span class="comment">        // adding course context</span>
<a name="l3090"><span class="linenum">3090</span></a>          <a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a>[] = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l3091"><span class="linenum">3091</span></a>      }
<a name="l3092"><span class="linenum">3092</span></a>      <a class="var it21431" onMouseOver="hilite(21431)" onMouseOut="lolite()" onClick="logVariable('externallink')" href="../_variables/externallink.html">$externallink</a> = (int)<a class="function" onClick="logFunction('get_config')" href="../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>(null, 'repositoryallowexternallinks');
<a name="l3093"><span class="linenum">3093</span></a>      <a class="var it10503" onMouseOver="hilite(10503)" onMouseOut="lolite()" onClick="logVariable('repositories')" href="../_variables/repositories.html">$repositories</a> = <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('get_instances')" href="../_functions/get_instances.html" onMouseOver="funcPopup(event,'get_instances')">get_instances</a>(array(
<a name="l3094"><span class="linenum">3094</span></a>          'context'=&gt;<a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a>,
<a name="l3095"><span class="linenum">3095</span></a>          'currentcontext'=&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>,
<a name="l3096"><span class="linenum">3096</span></a>          'accepted_types'=&gt;<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>-&gt;<a onClick="logVariable('accepted_types')" class="var it43078" onMouseOver="hilite(43078)" onMouseOut="lolite()" href="../_variables/accepted_types.html">accepted_types</a>,
<a name="l3097"><span class="linenum">3097</span></a>          'return_types'=&gt;<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>-&gt;<a onClick="logVariable('return_types')" class="var it43078" onMouseOver="hilite(43078)" onMouseOut="lolite()" href="../_variables/return_types.html">return_types</a>,
<a name="l3098"><span class="linenum">3098</span></a>          'disable_types'=&gt;<a class="var it5983" onMouseOver="hilite(5983)" onMouseOut="lolite()" onClick="logVariable('disable_types')" href="../_variables/disable_types.html">$disable_types</a>
<a name="l3099"><span class="linenum">3099</span></a>      ));
<a name="l3100"><span class="linenum">3100</span></a>  
<a name="l3101"><span class="linenum">3101</span></a>      <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('repositories')" class="var it44198" onMouseOver="hilite(44198)" onMouseOut="lolite()" href="../_variables/repositories.html">repositories</a> = array();
<a name="l3102"><span class="linenum">3102</span></a>  
<a name="l3103"><span class="linenum">3103</span></a>      if (empty(<a class="var it21431" onMouseOver="hilite(21431)" onMouseOut="lolite()" onClick="logVariable('externallink')" href="../_variables/externallink.html">$externallink</a>)) {
<a name="l3104"><span class="linenum">3104</span></a>          <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('externallink')" class="var it44198" onMouseOver="hilite(44198)" onMouseOut="lolite()" href="../_variables/externallink.html">externallink</a> = false;
<a name="l3105"><span class="linenum">3105</span></a>      } else {
<a name="l3106"><span class="linenum">3106</span></a>          <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('externallink')" class="var it44198" onMouseOver="hilite(44198)" onMouseOut="lolite()" href="../_variables/externallink.html">externallink</a> = true;
<a name="l3107"><span class="linenum">3107</span></a>      }
<a name="l3108"><span class="linenum">3108</span></a>  
<a name="l3109"><span class="linenum">3109</span></a>      <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('userprefs')" class="var it44198" onMouseOver="hilite(44198)" onMouseOut="lolite()" href="../_variables/userprefs.html">userprefs</a> = array();
<a name="l3110"><span class="linenum">3110</span></a>      <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('userprefs')" class="var it44198" onMouseOver="hilite(44198)" onMouseOut="lolite()" href="../_variables/userprefs.html">userprefs</a>['recentrepository'] = <a class="function" onClick="logFunction('get_user_preferences')" href="../_functions/get_user_preferences.html" onMouseOver="funcPopup(event,'get_user_preferences')">get_user_preferences</a>('filepicker_recentrepository', '');
<a name="l3111"><span class="linenum">3111</span></a>      <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('userprefs')" class="var it44198" onMouseOver="hilite(44198)" onMouseOut="lolite()" href="../_variables/userprefs.html">userprefs</a>['recentlicense'] = <a class="function" onClick="logFunction('get_user_preferences')" href="../_functions/get_user_preferences.html" onMouseOver="funcPopup(event,'get_user_preferences')">get_user_preferences</a>('filepicker_recentlicense', '');
<a name="l3112"><span class="linenum">3112</span></a>      <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('userprefs')" class="var it44198" onMouseOver="hilite(44198)" onMouseOut="lolite()" href="../_variables/userprefs.html">userprefs</a>['recentviewmode'] = <a class="function" onClick="logFunction('get_user_preferences')" href="../_functions/get_user_preferences.html" onMouseOver="funcPopup(event,'get_user_preferences')">get_user_preferences</a>('filepicker_recentviewmode', '');
<a name="l3113"><span class="linenum">3113</span></a>  
<a name="l3114"><span class="linenum">3114</span></a>      <a class="function" onClick="logFunction('user_preference_allow_ajax_update')" href="../_functions/user_preference_allow_ajax_update.html" onMouseOver="funcPopup(event,'user_preference_allow_ajax_update')">user_preference_allow_ajax_update</a>('filepicker_recentrepository', <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l3115"><span class="linenum">3115</span></a>      <a class="function" onClick="logFunction('user_preference_allow_ajax_update')" href="../_functions/user_preference_allow_ajax_update.html" onMouseOver="funcPopup(event,'user_preference_allow_ajax_update')">user_preference_allow_ajax_update</a>('filepicker_recentlicense', <a class="constant" onClick="logConstant('PARAM_SAFEDIR')" href="../_constants/PARAM_SAFEDIR.html" onMouseOver="constPopup(event,'PARAM_SAFEDIR')">PARAM_SAFEDIR</a>);
<a name="l3116"><span class="linenum">3116</span></a>      <a class="function" onClick="logFunction('user_preference_allow_ajax_update')" href="../_functions/user_preference_allow_ajax_update.html" onMouseOver="funcPopup(event,'user_preference_allow_ajax_update')">user_preference_allow_ajax_update</a>('filepicker_recentviewmode', <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l3117"><span class="linenum">3117</span></a>  
<a name="l3118"><span class="linenum">3118</span></a>  
<a name="l3119"><span class="linenum">3119</span></a>  <span class="comment">    // provided by form element</span>
<a name="l3120"><span class="linenum">3120</span></a>      <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('accepted_types')" class="var it44198" onMouseOver="hilite(44198)" onMouseOut="lolite()" href="../_variables/accepted_types.html">accepted_types</a> = <a class="function" onClick="logFunction('file_get_typegroup')" href="../_functions/file_get_typegroup.html" onMouseOver="funcPopup(event,'file_get_typegroup')">file_get_typegroup</a>('extension', <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>-&gt;<a onClick="logVariable('accepted_types')" class="var it43078" onMouseOver="hilite(43078)" onMouseOut="lolite()" href="../_variables/accepted_types.html">accepted_types</a>);
<a name="l3121"><span class="linenum">3121</span></a>      <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('return_types')" class="var it44198" onMouseOver="hilite(44198)" onMouseOut="lolite()" href="../_variables/return_types.html">return_types</a> = <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>-&gt;<a onClick="logVariable('return_types')" class="var it43078" onMouseOver="hilite(43078)" onMouseOut="lolite()" href="../_variables/return_types.html">return_types</a>;
<a name="l3122"><span class="linenum">3122</span></a>      <a class="var it8926" onMouseOver="hilite(8926)" onMouseOut="lolite()" onClick="logVariable('templates')" href="../_variables/templates.html">$templates</a> = array();
<a name="l3123"><span class="linenum">3123</span></a>      foreach (<a class="var it10503" onMouseOver="hilite(10503)" onMouseOut="lolite()" onClick="logVariable('repositories')" href="../_variables/repositories.html">$repositories</a> as <a class="var it641" onMouseOver="hilite(641)" onMouseOut="lolite()" onClick="logVariable('repository')" href="../_variables/repository.html">$repository</a>) {
<a name="l3124"><span class="linenum">3124</span></a>          <a class="var it2566" onMouseOver="hilite(2566)" onMouseOut="lolite()" onClick="logVariable('meta')" href="../_variables/meta.html">$meta</a> = <a class="var it641" onMouseOver="hilite(641)" onMouseOut="lolite()" onClick="logVariable('repository')" href="../_variables/repository.html">$repository</a>-&gt;<a class="function" onClick="logFunction('get_meta')" href="../_functions/get_meta.html" onMouseOver="funcPopup(event,'get_meta')">get_meta</a>();
<a name="l3125"><span class="linenum">3125</span></a>  <span class="comment">        // Please note that the array keys for repositories are used within</span>
<a name="l3126"><span class="linenum">3126</span></a>  <span class="comment">        // JavaScript a lot, the key NEEDS to be the repository id.</span>
<a name="l3127"><span class="linenum">3127</span></a>          <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>-&gt;<a onClick="logVariable('repositories')" class="var it44198" onMouseOver="hilite(44198)" onMouseOut="lolite()" href="../_variables/repositories.html">repositories</a>[<a class="var it641" onMouseOver="hilite(641)" onMouseOut="lolite()" onClick="logVariable('repository')" href="../_variables/repository.html">$repository</a>-&gt;<a onClick="logVariable('id')" class="var it43843" onMouseOver="hilite(43843)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = <a class="var it2566" onMouseOver="hilite(2566)" onMouseOut="lolite()" onClick="logVariable('meta')" href="../_variables/meta.html">$meta</a>;
<a name="l3128"><span class="linenum">3128</span></a>  <span class="comment">        // Register custom repository template if it has one</span>
<a name="l3129"><span class="linenum">3129</span></a>          if(<a class="phpfunction" onClick="logFunction('method_exists')" href="../_functions/method_exists.html" onMouseOver="phpfuncPopup(event,'method_exists')">method_exists</a>(<a class="var it641" onMouseOver="hilite(641)" onMouseOut="lolite()" onClick="logVariable('repository')" href="../_variables/repository.html">$repository</a>, 'get_upload_template') &amp;&amp; !<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('uploadform_' . <a class="var it2566" onMouseOver="hilite(2566)" onMouseOut="lolite()" onClick="logVariable('meta')" href="../_variables/meta.html">$meta</a>-&gt;<a onClick="logVariable('type')" class="var it45729" onMouseOver="hilite(45729)" onMouseOut="lolite()" href="../_variables/type.html">type</a>, <a class="var it21429" onMouseOver="hilite(21429)" onMouseOut="lolite()" onClick="logVariable('templatesinitialized')" href="../_variables/templatesinitialized.html">$templatesinitialized</a>)) {
<a name="l3130"><span class="linenum">3130</span></a>              <a class="var it8926" onMouseOver="hilite(8926)" onMouseOut="lolite()" onClick="logVariable('templates')" href="../_variables/templates.html">$templates</a>['uploadform_' . <a class="var it2566" onMouseOver="hilite(2566)" onMouseOut="lolite()" onClick="logVariable('meta')" href="../_variables/meta.html">$meta</a>-&gt;<a onClick="logVariable('type')" class="var it45729" onMouseOver="hilite(45729)" onMouseOut="lolite()" href="../_variables/type.html">type</a>] = <a class="var it641" onMouseOver="hilite(641)" onMouseOut="lolite()" onClick="logVariable('repository')" href="../_variables/repository.html">$repository</a>-&gt;get_upload_template();
<a name="l3131"><span class="linenum">3131</span></a>              <a class="var it21429" onMouseOver="hilite(21429)" onMouseOut="lolite()" onClick="logVariable('templatesinitialized')" href="../_variables/templatesinitialized.html">$templatesinitialized</a>['uploadform_' . <a class="var it2566" onMouseOver="hilite(2566)" onMouseOut="lolite()" onClick="logVariable('meta')" href="../_variables/meta.html">$meta</a>-&gt;<a onClick="logVariable('type')" class="var it45729" onMouseOver="hilite(45729)" onMouseOut="lolite()" href="../_variables/type.html">type</a>] = true;
<a name="l3132"><span class="linenum">3132</span></a>          }
<a name="l3133"><span class="linenum">3133</span></a>      }
<a name="l3134"><span class="linenum">3134</span></a>      if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('core', <a class="var it21429" onMouseOver="hilite(21429)" onMouseOut="lolite()" onClick="logVariable('templatesinitialized')" href="../_variables/templatesinitialized.html">$templatesinitialized</a>)) {
<a name="l3135"><span class="linenum">3135</span></a>  <span class="comment">        // we need to send each filepicker template to the browser just once</span>
<a name="l3136"><span class="linenum">3136</span></a>          <a class="var it21432" onMouseOver="hilite(21432)" onMouseOut="lolite()" onClick="logVariable('fprenderer')" href="../_variables/fprenderer.html">$fprenderer</a> = <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>('core', 'files');
<a name="l3137"><span class="linenum">3137</span></a>          <a class="var it8926" onMouseOver="hilite(8926)" onMouseOut="lolite()" onClick="logVariable('templates')" href="../_variables/templates.html">$templates</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it8926" onMouseOver="hilite(8926)" onMouseOut="lolite()" onClick="logVariable('templates')" href="../_variables/templates.html">$templates</a>, <a class="var it21432" onMouseOver="hilite(21432)" onMouseOut="lolite()" onClick="logVariable('fprenderer')" href="../_variables/fprenderer.html">$fprenderer</a>-&gt;<a class="function" onClick="logFunction('filepicker_js_templates')" href="../_functions/filepicker_js_templates.html" onMouseOver="funcPopup(event,'filepicker_js_templates')">filepicker_js_templates</a>());
<a name="l3138"><span class="linenum">3138</span></a>          <a class="var it21429" onMouseOver="hilite(21429)" onMouseOut="lolite()" onClick="logVariable('templatesinitialized')" href="../_variables/templatesinitialized.html">$templatesinitialized</a>['core'] = true;
<a name="l3139"><span class="linenum">3139</span></a>      }
<a name="l3140"><span class="linenum">3140</span></a>      if (sizeof(<a class="var it8926" onMouseOver="hilite(8926)" onMouseOut="lolite()" onClick="logVariable('templates')" href="../_variables/templates.html">$templates</a>)) {
<a name="l3141"><span class="linenum">3141</span></a>          <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('requires')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('js_init_call')" href="../_functions/js_init_call.html" onMouseOver="funcPopup(event,'js_init_call')">js_init_call</a>('M.core_filepicker.set_templates', array(<a class="var it8926" onMouseOver="hilite(8926)" onMouseOut="lolite()" onClick="logVariable('templates')" href="../_variables/templates.html">$templates</a>), true);
<a name="l3142"><span class="linenum">3142</span></a>      }
<a name="l3143"><span class="linenum">3143</span></a>      return <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>;
<a name="l3144"><span class="linenum">3144</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'set_synchronized': ['set_synchronized', 'Called after reference-file has been synchronized with the repository ', [['lib/filestorage','stored_file.php',955]], 10],
'antivir_scan_file': ['antivir_scan_file', 'Scan file, throws exception in case of infected file. ', [['repository','lib.php',1183]], 0],
'wake_from_cache': ['wake_from_cache', 'Returns the cacheable_object_array that was originally sent to the cache. ', [['cache','lib.php',210],['repository','lib.php',475],['repository','lib.php',2747],['cache/tests/fixtures','lib.php',342],['cache/classes','interfaces.php',458],['lib','coursecatlib.php',2333]], 1],
'static_function': ['static_function', 'Call a static function. Any additional arguments than plugin and function will be passed through. ', [['repository','lib.php',1153]], 33],
'instance_by_id': ['instance_by_id', 'Get a context instance as an object, from a given context id. ', [['lib','accesslib.php',5434]], 235],
'heading': ['heading', 'Outputs a heading ', [['lib','outputrenderers.php',3072],['lib','outputrenderers.php',4364],['lib','outputrenderers.php',4552],['grade/report/singleview/classes/local/screen','screen.php',197],['grade/report/singleview/classes/local/screen','user.php',264],['grade/report/singleview/classes/local/screen','grade.php',283]], 796],
'check_capability': ['check_capability', 'Checks if user has a capability to view the current repository. ', [['repository','lib.php',738]], 23],
'get_parent': ['get_parent', '', [['mod/resource','locallib.php',507],['lib/filebrowser','file_info_context_system.php',207],['mod/lesson/classes','file_info.php',187],['mod/imscp','locallib.php',414],['lib/filebrowser','file_info_context_coursecat.php',254],['mod/book','locallib.php',554],['lib/filebrowser','file_info_context_user.php',298],['mod/scorm','locallib.php',62],['competency/classes','competency.php',252],['mod/data','locallib.php',574],['lib/filebrowser','file_info_stored.php',431],['lib','outputcomponents.php',2789],['backup/util/structure','base_final_element.class.php',164],['mod/page','locallib.php',37],['mod/workshop','fileinfolib.php',174],['mod/workshop','fileinfolib.php',335],['lib/filebrowser','file_info_context_module.php',349],['mod/glossary','locallib.php',629],['lib/filebrowser','file_info_context_course.php',472],['lib/filebrowser','file_info_context_course.php',721],['lib/filebrowser','file_info_context_course.php',867],['mod/folder','locallib.php',35],['mod/forum','locallib.php',560]], 58],
'instance': ['instance', 'Returns an instance of the cache_factor method. ', [['cache','disabledlib.php',171],['cache','disabledlib.php',296],['lib/classes','useragent.php',101],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['search/classes','manager.php',109],['cache','locallib.php',52],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['lib/classes','plugin_manager.php',103],['lib/htmlpurifier','HTMLPurifier.php',251],['course/format','lib.php',156],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['admin/tool/installaddon/classes','installer.php',40],['lib','modinfolib.php',373],['cache/classes','helper.php',76],['lib/tests','string_manager_standard_test.php',124],['lib/portfolio','exporter.php',251],['lib/classes/update','validator.php',88],['search/classes','document_factory.php',49],['lib','accesslib.php',6235],['lib','accesslib.php',6487],['lib','accesslib.php',6665],['lib','accesslib.php',6919],['lib','accesslib.php',7180],['lib','accesslib.php',7392],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443],['lib','filterlib.php',80],['search/tests/fixtures','testable_core_search.php',43],['lib/tests/fixtures','testable_update_checker.php',45],['backup/cc','validator.php',35],['cache/classes','config.php',87],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29]], 4647],
'instance_config_form': ['instance_config_form', 'Add Instance settings input to Moodle form ', [['repository/flickr_public','lib.php',481],['repository','lib.php',2407],['repository/equella','lib.php',262],['repository/webdav','lib.php',162],['repository/filesystem','lib.php',456]], 1],
'get_author': ['get_author', 'Get an author for the feed ', [['lib/simplepie/library','SimplePie.php',2098],['lib/simplepie/library/SimplePie','Source.php',210],['lib/filebrowser','file_info.php',312],['lib/filebrowser','virtual_root_file.php',326],['lib/filebrowser','file_info_stored.php',285],['lib/simplepie/library/SimplePie','Item.php',495],['lib/filestorage','stored_file.php',834]], 20],
'search': ['search', 'Search Freebase open data. (search) ', [['lib/google/src/Google/Service','Freebase.php',219],['search/classes','manager.php',469],['repository/boxnet','lib.php',169],['repository/picasa','lib.php',87],['repository/flickr_public','lib.php',233],['competency/classes','competency.php',383],['lib/google/src/Google/Service','AdExchangeBuyer.php',1266],['lib/google/src/Google/Service','AdExchangeBuyer.php',1342],['lib/google/src/Google/Service','CivicInfo.php',176],['lib','boxlib.php',216],['lib/google/src/Google/Service','Blogger.php',1627],['repository','lib.php',2286],['lib','adminlib.php',687],['lib','adminlib.php',847],['lib','adminlib.php',1266],['lib','adminlib.php',1398],['lib','adminlib.php',5504],['lib','adminlib.php',5785],['lib','adminlib.php',5839],['lib','adminlib.php',5911],['lib','adminlib.php',5959],['lib','adminlib.php',6001],['lib','adminlib.php',6052],['lib','adminlib.php',7096],['repository/wikimedia','lib.php',165],['lib/horde/framework/Horde/Imap/Client','Base.php',1958],['lib/google/src/Google/Service','QPXExpress.php',81],['repository/googledocs','lib.php',265],['lib/google/src/Google/Service','Genomics.php',693],['lib/google/src/Google/Service','Genomics.php',1066],['lib/google/src/Google/Service','Genomics.php',1149],['lib/google/src/Google/Service','Genomics.php',1201],['lib/google/src/Google/Service','Genomics.php',1284],['lib/google/src/Google/Service','Genomics.php',1399],['lib/google/src/Google/Service','Genomics.php',1510],['lib/horde/framework/Horde','Stream.php',255],['repository/merlot','lib.php',62],['repository/youtube','lib.php',127],['repository/local','lib.php',255],['lib/google/src/Google/Service','Plus.php',381],['lib/google/src/Google/Service','Plus.php',590],['backup/util/ui','restore_ui_components.php',172],['repository/filesystem','lib.php',129],['repository/flickr','lib.php',207],['mod/assign','adminlib.php',54],['lib/horde/framework/Horde/Stream','TempString.php',165]], 104],
'create': ['create', 'Auto-scan an incoming line to determine the response type. ', [['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',65],['lib/google/src/Google/Service','Partners.php',492],['lib/simplepie/library/SimplePie','Cache.php',95],['lib/google/src/Google/Service','YouTubeReporting.php',237],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',81],['lib/google/src/Google/Service','MapsEngine.php',1677],['lib/google/src/Google/Service','MapsEngine.php',1977],['lib/google/src/Google/Service','MapsEngine.php',2253],['lib/google/src/Google/Service','MapsEngine.php',2330],['lib/google/src/Google/Service','MapsEngine.php',2898],['lib/spout/src/Spout/Writer','WriterFactory.php',18],['lib/google/src/Google/Service','Dns.php',290],['lib/google/src/Google/Service','Dns.php',363],['lib/google/src/Google/Service','Appengine.php',438],['tag/classes','collection.php',188],['lib/adodb','adodb-xmlschema.inc.php',152],['lib/adodb','adodb-xmlschema.inc.php',473],['lib/adodb','adodb-xmlschema.inc.php',738],['lib/adodb','adodb-xmlschema.inc.php',884],['lib/adodb','adodb-xmlschema.inc.php',1129],['mod/quiz','attemptlib.php',100],['mod/quiz','attemptlib.php',596],['lib','weblib.php',3206],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',58],['lib/google/src/Google/Service','Dataflow.php',273],['lib/simplepie/library/SimplePie','Registry.php',153],['competency/classes','persistent.php',387],['lib/google/src/Google/Service','Cloudresourcemanager.php',373],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',270],['lib/google/src/Google/Service','TagManager.php',1007],['lib/google/src/Google/Service','TagManager.php',1097],['lib/google/src/Google/Service','TagManager.php',1249],['lib/google/src/Google/Service','TagManager.php',1342],['lib/google/src/Google/Service','TagManager.php',1436],['lib/google/src/Google/Service','TagManager.php',1530],['lib/google/src/Google/Service','TagManager.php',1681],['mod/lesson','locallib.php',1011],['mod/lesson','locallib.php',2163],['mod/lesson','locallib.php',3212],['lib','modinfolib.php',1732],['repository','lib.php',206],['repository','lib.php',1910],['lib','navigationlib.php',268],['lib/htmlpurifier/HTMLPurifier','Config.php',114],['lib/google/src/Google/Service','Container.php',284],['lib/google/src/Google/Service','Genomics.php',632],['lib/google/src/Google/Service','Genomics.php',721],['lib/google/src/Google/Service','Genomics.php',1312],['lib/google/src/Google/Service','Genomics.php',1427],['lib/google/src/Google/Service','Games.php',1649],['lib/google/src/Google/Service','Games.php',2013],['lib/google/src/Google/Service','Fitness.php',377],['lib/google/src/Google/Service','Gmail.php',747],['lib/google/src/Google/Service','Gmail.php',905],['mod/quiz/classes','structure.php',65],['lib/htmlpurifier/HTMLPurifier','ElementDef.php',135],['lib/adodb','adodb-xmlschema03.inc.php',170],['lib/adodb','adodb-xmlschema03.inc.php',514],['lib/adodb','adodb-xmlschema03.inc.php',779],['lib/adodb','adodb-xmlschema03.inc.php',930],['lib/adodb','adodb-xmlschema03.inc.php',1228],['lib/google/src/Google/Service','Proximitybeacon.php',500],['tag/classes','area.php',205],['course','lib.php',3003],['question/type/ddmarker','shapes.php',170],['lib/classes/event','base.php',149],['lib','coursecatlib.php',325],['repository/filesystem','lib.php',498],['lib/google/src/Google/Service','Storagetransfer.php',281],['calendar','lib.php',2686],['lib/htmlpurifier/HTMLPurifier','Lexer.php',53],['lib/google/src/Google/Service','Classroom.php',445],['lib/google/src/Google/Service','Classroom.php',596],['lib/google/src/Google/Service','Classroom.php',673],['lib/google/src/Google/Service','Classroom.php',783],['lib/google/src/Google/Service','Classroom.php',912],['lib/spout/src/Spout/Reader','ReaderFactory.php',18],['lib/google/src/Google/Service','Pubsub.php',220],['lib/google/src/Google/Service','Pubsub.php',365],['lib/google/src/Google/Service','CloudMonitoring.php',258]], 3276],
'copy_to_area': ['copy_to_area', 'This function is used to copy a moodle file to draft area. ', [['repository','lib.php',852]], 4],
'logout': ['logout', 'reset auth token ', [['repository/boxnet','lib.php',157],['repository/picasa','lib.php',96],['repository/flickr_public','lib.php',206],['repository/dropbox','lib.php',288],['auth/cas/CAS','CAS.php',1396],['repository/skydrive','lib.php',174],['repository/wikimedia','wikimedia.php',60],['repository','lib.php',2301],['repository/wikimedia','lib.php',173],['lib/horde/framework/Horde/Imap/Client','Base.php',814],['repository/googledocs','lib.php',398],['auth/cas/CAS/CAS','Client.php',1642],['repository/filesystem','lib.php',425],['repository/flickr','lib.php',89]], 20],
'optional_param_array': ['optional_param_array', 'Returns a particular array value for the named variable, taken from POST or GET, otherwise returning a given default. ', [['lib','moodlelib.php',649]], 71],
'get_types': ['get_types', 'Returns an array of media that this media instance applies to ', [['lib','csslib.php',2087],['repository','lib.php',689],['lib/classes','filetypes.php',277]], 15],
'get_file_info': ['get_file_info', 'Return information about this specific part of context level ', [['lib/filebrowser','file_info_context_system.php',47],['lib/filebrowser','file_info_context_coursecat.php',51],['lib/filebrowser','file_info_context_user.php',51],['lib','boxlib.php',85],['lib/filebrowser','file_browser.php',63],['lib/filebrowser','file_info_context_module.php',81],['mod/assign','assignmentplugin.php',558],['lib/filebrowser','file_info_context_course.php',51]], 79],
'out': ['out', 'Returns the selector for use in a CSS rule ', [['lib','csslib.php',1540],['lib','csslib.php',1698],['lib','csslib.php',2078],['lib','csslib.php',2162],['lib','csslib.php',2306],['lib','csslib.php',2495],['lib','csslib.php',3240],['mod/feedback/classes','responses_table.php',332],['lib','moodlelib.php',9729],['lib','weblib.php',545],['lib','tablelib.php',1594],['report/loglive/classes','table_log_ajax.php',37]], 626],
'update_sortorder': ['update_sortorder', 'Update database sortorder field with the value given as parameter or with the sortorder value of this object This function is private. For public access, have a look to move_order() ', [['repository','lib.php',339]], 1],
'get_source': ['get_source', 'Returns the source of the file ', [['lib/filebrowser','file_info.php',321],['lib/filebrowser','virtual_root_file.php',335],['lib/filebrowser','file_info_stored.php',294],['lib/simplepie/library/SimplePie','Item.php',2946],['lib/filestorage','stored_file.php',854]], 23],
'send_stored_file': ['send_stored_file', 'Handles the sending of file data to the user\'s browser, including support for byteranges etc. ', [['lib','filelib.php',2192]], 75],
'file_folder_icon': ['file_folder_icon', 'Return the relative icon path for a folder image ', [['lib','filelib.php',1555]], 26],
'get_area_files': ['get_area_files', 'Returns all area files (optionally limited by itemid) ', [['lib/filestorage','file_storage.php',782],['lib','externallib.php',1134]], 216],
'import_external_file_contents': ['import_external_file_contents', 'Downloads the file from external repository and saves it in moodle filepool. This function is different from {@link repository::sync_reference()} because it has bigger request timeout and always downloads the content. ', [['repository','lib.php',1682],['lib/filestorage','stored_file.php',1011]], 7],
'delete_tempfile_from_draft': ['delete_tempfile_from_draft', 'Delete a temp file from draft area ', [['repository','lib.php',2605]], 1],
'make_draftfile_url': ['make_draftfile_url', 'Factory method for creation of url pointing to draft file of current user. ', [['lib','weblib.php',820]], 23],
'download_one': ['download_one', 'Downloads one file and writes it to the specified file handler ', [['lib','filelib.php',3400]], 12],
'sync_reference': ['sync_reference', 'Synchronize the references. ', [['repository/boxnet','lib.php',413],['repository/dropbox','lib.php',553],['repository','lib.php',2655],['repository/equella','lib.php',197],['repository/filesystem','lib.php',559]], 6],
'add_file_to_pool': ['add_file_to_pool', 'Add file content to sha1 pool. ', [['lib/filestorage','file_storage.php',1895],['backup/converter/moodle1','lib.php',1409]], 7],
'or': ['or', '', [['lib/tcpdf','LICENSE.TXT',69]], 556],
'get_visible': ['get_visible', 'Return visibility ', [['repository','lib.php',188]], 16],
'get_children': ['get_children', 'Returns list of children. ', [['lib/filebrowser','file_info_context_system.php',142],['mod/lesson/classes','file_info.php',102],['mod/imscp','locallib.php',336],['lib/filebrowser','file_info_context_coursecat.php',155],['mod/book','locallib.php',471],['lib/filebrowser','file_info_context_user.php',274],['lib/grade','grade_category.php',2068],['mod/data','locallib.php',495],['lib/filebrowser','file_info_stored.php',330],['lib','outputcomponents.php',2772],['lib','adminlib.php',1035],['mod/workshop','fileinfolib.php',91],['mod/workshop','fileinfolib.php',251],['lib/filebrowser','file_info_context_module.php',258],['mod/glossary','locallib.php',543],['lib','coursecatlib.php',1048],['lib/filebrowser','file_info_context_course.php',381],['lib/filebrowser','file_info_context_course.php',530],['lib/filebrowser','file_info_context_course.php',666],['lib/filebrowser','file_info_context_course.php',812],['backup/util/structure','base_nested_element.class.php',127],['mod/forum','locallib.php',481]], 86],
'get_mimetype': ['get_mimetype', 'Returns mimetype ', [['lib/filebrowser','file_info.php',277],['lib/filebrowser','virtual_root_file.php',254],['lib/filebrowser','file_info_stored.php',240],['lib/filestorage','stored_file.php',738],['lib','medialib.php',192],['lib/portfolio','caller.php',453]], 59],
'get_config': ['get_config', 'Config get method. ', [['lib/classes/antivirus','scanner.php',54],['competency/classes','competency_rule.php',59],['question/engine','bank.php',109],['admin/tool/log/classes/helper','store.php',63],['lib','moodlelib.php',1409],['lib','enrollib.php',1142],['lib/editor/tinymce/classes','plugin.php',73],['competency/classes','competency_rule_points.php',43],['search/classes','base.php',169],['mod/assign','assignmentplugin.php',345],['lib/portfolio','plugin.php',546]], 934],
'validation': ['validation', 'Custom form validation ', [['tag','edit_form.php',78],['mod/scorm','mod_form.php',357],['mod/assign','extensionform.php',90],['grade/edit/tree','category_form.php',533],['course','edit_form.php',367],['login','forgot_password_form.php',63],['course','moodleform_mod.php',348],['login','signup_form.php',122],['mod/assign','mod_form.php',214],['mod/workshop/form/rubric','assessment_form.php',33],['mod/imscp','mod_form.php',75],['mod/glossary','edit_form.php',93],['mod/lesson','import_form.php',90],['group','group_form.php',120],['grade/report/grader','preferences_form.php',197],['admin/tool/uploaduser','user_form.php',341],['mod/quiz/report/responses','responses_form.php',53],['question/type','edit_question_form.php',726],['admin/tool/dbtransfer','database_transfer_form.php',100],['user','files_form.php',60],['admin/tool/task/classes','edit_scheduled_task_form.php',101],['backup/util/ui','backup_moodleform.class.php',109],['mod/feedback','edit_form.php',144],['question/type/random','edit_random_form.php',74],['question/type/calculatedmulti','edit_calculatedmulti_form.php',250],['calendar','managesubscriptions_form.php',100],['question/type/calculated','datasetdefinitions_form.php',166],['mod/workshop','feedbackauthor_form.php',67],['course/classes','editcategory_form.php',115],['admin/tool/lp/classes/form','persistent.php',250],['mod/feedback','mod_form.php',182],['mod/book/tool/importhtml','import_form.php',60],['grade/edit/tree','outcomeitem_form.php',255],['blog','edit_form.php',146],['lib','formslib.php',977],['admin/mnet','peer_forms.php',53],['admin/mnet','peer_forms.php',171],['admin/roles/classes','preset_form.php',99],['calendar','event_form.php',164],['question/type/ddmarker','edit_ddmarker_form.php',224],['course','request_form.php',92],['cohort','upload_form.php',159],['repository','lib.php',2888],['repository','lib.php',3014],['user/profile','index_category_form.php',63],['admin/tool/generator/classes','make_testplan_form.php',59],['grade/edit/scale','edit_form.php',112],['enrol','editenrolment_form.php',69],['question/type/calculatedsimple','edit_calculatedsimple_form.php',591],['admin/webservice','forms.php',155],['admin/webservice','forms.php',311],['mod/assign','gradeform.php',71],['mod/resource','mod_form.php',200],['question/type/numerical','edit_numerical_form.php',266],['question/type/calculated','edit_calculated_form.php',234],['mod/assign','batchsetmarkingworkflowstateform.php',67],['mod/workshop','submission_form.php',72],['question','import_form.php',154],['admin/tool/lpmigrate/classes/form','migrate_framework.php',87],['question/type/shortanswer','edit_shortanswer_form.php',69],['cohort','edit_form.php',70],['user','edit_form.php',175],['mod/quiz','addrandomform.php',88],['question/type/essay','edit_essay_form.php',114],['grade/edit/outcome','edit_form.php',140],['admin/tool/monitor/classes','rule_form.php',135],['blocks/rss_client','editfeed.php',80],['login','change_password_form.php',80],['mod/workshop/form','edit_form.php',83],['mod/folder','mod_form.php',92],['admin/tool/replace/classes','form.php',60],['mod/quiz/report','attemptsreport_form.php',110],['cache/stores/memcache','addinstanceform.php',69],['mod/forum/classes','post_form.php',275],['blocks/community','forms.php',308],['mod/lesson','mod_form.php',363],['grade/edit/tree','item_form.php',412],['grade/grading/form/guide','edit_form.php',111],['user/profile','index_field_form.php',81],['admin/tool/installaddon/classes','installfromzip_form.php',104],['cache/stores/memcached','addinstanceform.php',110],['question/type/missingtype','edit_missingtype_form.php',72],['badges','edit_form.php',158],['badges','edit_form.php',246],['mod/quiz','accessmanager_form.php',62],['mod/workshop','mod_form.php',352],['course','editsection_form.php',132],['group','autogroup_form.php',182],['mod/url','mod_form.php',156],['mod/workshop/form','assessment_form.php',124],['question/type/randomsamatch','edit_randomsamatch_form.php',82],['mod/lesson','override_form.php',230],['enrol/self','locallib.php',118],['grade/grading/form/rubric','edit_form.php',106],['group','grouping_form.php',76],['admin/tool/filetypes','edit_form.php',120],['mod/data','mod_form.php',84],['question/type/match','edit_match_form.php',107],['admin/tool/generator/classes','make_course_form.php',63],['question/type/gapselect','edit_form_base.php',229],['mod/workshop','feedbackreviewer_form.php',68],['lib/portfolio','forms.php',104],['lib/portfolio','forms.php',222],['lib/portfolio','forms.php',286],['course/classes','deletecategory_form.php',123],['question/type/multichoice','edit_multichoice_form.php',107],['question/type/multianswer','edit_multianswer_form.php',454],['question/type/ddimageortext','edit_ddimageortext_form.php',220],['enrol','editinstance_form.php',72],['course/publish','forms.php',392],['grade/import/xml','grade_import_form.php',96],['enrol/guest','locallib.php',54],['grade/edit/tree','calculation_form.php',88],['mod/quiz','mod_form.php',519],['login','set_password_form.php',90],['mod/quiz','override_form.php',224],['cache','forms.php',86],['cache','forms.php',255],['cache','forms.php',348],['admin/registration','forms.php',169],['blog','external_blog_edit_form.php',71],['user','editadvanced_form.php',226],['question/type/calculated','datasetitems_form.php',491],['badges','criteria_form.php',73],['mod/choice','mod_form.php',135],['badges','backpack_form.php',75]], 109],
'userdate': ['userdate', 'Returns a formatted string that represents a date in user time. ', [['lib','moodlelib.php',2155],['lib/adodb','adodb.inc.php',2842],['lib/adodb','adodb.inc.php',3569]], 525],
'file_extension_icon': ['file_extension_icon', 'Returns the relative icon path for a given file name ', [['lib','filelib.php',1611]], 23],
'contains_private_data': ['contains_private_data', 'Is this repository accessing private data? ', [['repository/flickr_public','lib.php',556],['repository/coursefiles','lib.php',214],['repository','lib.php',1847],['repository/upload','lib.php',290],['repository/s3','lib.php',318],['repository/equella','lib.php',433],['repository/wikimedia','lib.php',190],['repository/merlot','lib.php',166],['repository/youtube','lib.php',304],['repository/webdav','lib.php',194],['repository/url','lib.php',268],['repository/local','lib.php',353],['repository/recent','lib.php',209],['repository/filesystem','lib.php',627],['repository/user','lib.php',162]], 2],
'get_itemid': ['get_itemid', 'Returns file itemid ', [['lib/filebrowser','virtual_root_file.php',209],['lib/filestorage','stored_file.php',681],['comment','lib.php',1019]], 67],
'unpack_reference': ['unpack_reference', 'Unpack reference field ', [['lib/filestorage','file_storage.php',2215]], 10],
'get_listing': ['get_listing', 'Get file listing ', [['repository/boxnet','lib.php',207],['repository/picasa','lib.php',73],['repository/flickr_public','lib.php',319],['repository/dropbox','lib.php',161],['repository/skydrive','lib.php',90],['repository/coursefiles','lib.php',46],['repository','lib.php',2127],['repository/upload','lib.php',265],['repository/s3','lib.php',100],['repository/equella','lib.php',60],['repository/wikimedia','lib.php',77],['repository/googledocs','lib.php',229],['repository/merlot','lib.php',74],['repository/youtube','lib.php',244],['repository/webdav','lib.php',86],['repository/url','lib.php',96],['repository/local','lib.php',37],['repository/recent','lib.php',105],['repository/filesystem','lib.php',60],['repository/flickr','lib.php',226],['repository/dropbox','locallib.php',55],['repository/user','lib.php',47],['repository/areafiles','lib.php',46]], 13],
'get_mimetype_description': ['get_mimetype_description', 'Obtains descriptions for file types (e.g. \'Microsoft Word document\') from the mimetypes.php language file. ', [['lib','filelib.php',1635]], 21],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'get_short_filename': ['get_short_filename', 'Create a shorten filename ', [['repository','lib.php',2447]], 0],
'get_records_sql': ['get_records_sql', 'Get a number of records as an array of objects. ', [['lib/dml','pdo_moodle_database.php',309],['lib/dml','oci_native_moodle_database.php',1145],['lib/dml','pgsql_native_moodle_database.php',732],['lib/dml','mssql_native_moodle_database.php',805],['lib/dml','mysqli_native_moodle_database.php',1057],['lib/dml','sqlsrv_native_moodle_database.php',890],['lib/dml/tests','dml_test.php',5545]], 700],
'get_visible_name': ['get_visible_name', '', [['mod/resource','locallib.php',513],['lib/filebrowser','file_info_context_system.php',115],['mod/lesson/classes','file_info.php',78],['mod/imscp','locallib.php',312],['lib/filebrowser','file_info_context_coursecat.php',128],['mod/book','locallib.php',447],['lib/filebrowser','file_info_context_user.php',247],['mod/scorm','locallib.php',68],['mod/data','locallib.php',486],['lib/filebrowser','file_info_stored.php',92],['mod/page','locallib.php',43],['mod/workshop','fileinfolib.php',66],['mod/workshop','fileinfolib.php',223],['search/classes','base.php',132],['lib/filebrowser','file_info_context_module.php',203],['mod/glossary','locallib.php',534],['lib/filebrowser','file_info_context_course.php',354],['lib/filebrowser','file_info_context_course.php',626],['lib/filebrowser','file_info_context_course.php',775],['mod/folder','locallib.php',41],['mod/forum','locallib.php',472]], 34],
'plugin_init': ['plugin_init', 'is run when moodle administrator add the plugin ', [['repository/flickr_public','lib.php',526],['repository','lib.php',2366]], 0],
'get_instance': ['get_instance', 'Get the DB record for the current instance. ', [['course','moodleform_mod.php',116],['question/engine','bank.php',464],['backup/util/output','output_controller.class.php',53],['repository','lib.php',1137],['backup/util/helper','restore_logs_processor.class.php',69],['grade/grading/form','lib.php',474],['mnet/service/enrol','locallib.php',57],['mod/assign','locallib.php',1224],['lib','externallib.php',1000],['blog','locallib.php',857]], 420],
'get_instances': ['get_instances', 'Obtains all module instances on this course. ', [['lib','modinfolib.php',235],['repository','lib.php',993],['admin/tool/monitor/classes','rule_manager.php',276],['admin/tool/monitor/classes','subscription_manager.php',370]], 33],
'search_references_count': ['search_references_count', 'Returns the number of aliases that refer to some stored_file via the given reference ', [['lib/filestorage','file_storage.php',2345]], 7],
'move_to_filepool': ['move_to_filepool', 'Move file from download folder to file pool using FILE API ', [['repository','lib.php',1307]], 2],
'get_external_files': ['get_external_files', 'Returns all files belonging to given repository ', [['lib/filestorage','file_storage.php',757]], 5],
'move_order': ['move_order', 'Change order of the type with its adjacent upper or downer type (database fields are updated) Algorithm details: 1. retrieve all types in an array. This array is sorted by sortorder, and the array keys start from 0 to X (incremented by 1) 2. switch sortorder values of this type and its adjacent type ', [['repository','lib.php',364]], 2],
'draftfile_exists': ['draftfile_exists', 'Check if file already exists in draft area. ', [['repository','lib.php',796]], 7],
'box_start': ['box_start', 'Outputs the opening section of a box. ', [['lib','outputrenderers.php',3102]], 259],
'send_file_not_found': ['send_file_not_found', 'Requested file is not found or not accessible, does not return, terminates script ', [['lib','filelib.php',1787]], 135],
'pix_url': ['pix_url', 'Return the moodle_url for an image. ', [['lib','outputrenderers.php',237],['lib','outputlib.php',1394]], 367],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'single_button': ['single_button', 'Returns a form with a single button. ', [['lib','outputrenderers.php',1772]], 316],
'get_record_sql': ['get_record_sql', 'Get a single database record as an object using a SQL statement. ', [['lib/dml','oci_native_moodle_database.php',1076],['lib/dml','moodle_database.php',1506]], 157],
'debugging': ['debugging', 'Standard Debugging Function ', [['lib','weblib.php',3012]], 1007],
'prepare_breadcrumb': ['prepare_breadcrumb', 'Prepare the breadcrumb. ', [['repository','lib.php',2153]], 1],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'uses_post_requests': ['uses_post_requests', 'Helper function to indicate if this repository uses post requests for uploading files. ', [['repository','lib.php',2782]], 2],
'type_config_form': ['type_config_form', 'Add Plugin settings input to Moodle form ', [['repository/boxnet','lib.php',311],['repository/picasa','lib.php',112],['repository/flickr_public','lib.php',500],['repository/dropbox','lib.php',442],['repository/skydrive','lib.php',153],['repository','lib.php',2375],['repository/s3','lib.php',283],['repository/googledocs','lib.php',478],['repository/merlot','lib.php',137],['repository/youtube','lib.php',313],['repository/recent','lib.php',162],['repository/flickr','lib.php',282]], 10],
'count_records_sql': ['count_records_sql', 'Get the result of a SQL SELECT COUNT(...) query. ', [['lib/dml','moodle_database.php',1796]], 155],
'remove_params': ['remove_params', 'Remove all params if no arguments passed. Remove selected params if arguments are passed. ', [['lib','weblib.php',421]], 34],
'display_instances_list': ['display_instances_list', 'Display a repository instance list (with edit/delete/create links) ', [['repository','lib.php',1451]], 2],
'can_be_edited_by_user': ['can_be_edited_by_user', 'Can the instance be edited by the current user? ', [['repository','lib.php',1799]], 12],
'pack_reference': ['pack_reference', 'When user referring to a moodle file, we build the reference field ', [['lib/filestorage','file_storage.php',2197]], 19],
'prepare_to_cache': ['prepare_to_cache', 'Returns the data to cache for this object. ', [['cache','lib.php',191],['repository','lib.php',461],['repository','lib.php',2732],['cache/tests/fixtures','lib.php',335],['cache/classes','interfaces.php',450],['lib','coursecatlib.php',2310]], 1],
'string_exists': ['string_exists', 'Does the string actually exist? ', [['lib/classes','string_manager_install.php',64],['lib/classes','string_manager_standard.php',263],['lib/classes','string_manager.php',50]], 85],
'display_size': ['display_size', 'Converts bytes into display form ', [['lib','moodlelib.php',6538]], 34],
'make': ['make', 'Runs the entire \'make\' process. ', [['admin/tool/generator/classes','course_backend.php',202],['lib/htmlpurifier/HTMLPurifier/AttrDef','Clone.php',38],['lib/htmlpurifier/HTMLPurifier/AttrDef','URI.php',33],['mod/quiz/accessrule/numattempts','rule.php',40],['cache/classes','loaders.php',163],['mod/quiz/accessrule','accessrulebase.php',63],['backup/util/ui','backup_ui_setting.class.php',234],['lib/htmlpurifier/HTMLPurifier/AttrDef','Enum.php',60],['mod/quiz/accessrule/timelimit','rule.php',41],['mod/quiz/accessrule/openclosedate','rule.php',40],['lib/yuilib/2in3/2.9.0/build/yui2-logger','yui2-logger.js',655],['lib/htmlpurifier/HTMLPurifier/ConfigSchema/Interchange','Id.php',52],['mod/quiz/accessrule/password','rule.php',40],['admin/tool/assignmentupgrade','locallib.php',110],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Pixels.php',64],['mod/quiz/accessrule/delaybetweenattempts','rule.php',40],['lib/htmlpurifier/HTMLPurifier','DoctypeRegistry.php',96],['lib/htmlpurifier/HTMLPurifier','AttrDef.php',67],['mod/quiz/accessrule/ipaddress','rule.php',40],['mod/quiz/accessrule/securewindow','rule.php',55],['mod/quiz/accessrule/safebrowser','rule.php',40],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Bool.php',42],['lib/yuilib/2in3/2.9.0/build/yui2-logger','yui2-logger-debug.js',655],['lib/htmlpurifier/HTMLPurifier','Length.php',52],['admin/tool/generator/classes','site_backend.php',89]], 198],
'get_field': ['get_field', 'Gets an instance of the form field. ', [['lib/behat','behat_field_manager.php',248],['mod/quiz/report/statistics/classes','calculated.php',109],['lib/dml','moodle_database.php',1546],['user/filters','lib.php',124]], 536],
'get_string_manager': ['get_string_manager', 'Returns current string_manager instance. ', [['lib','moodlelib.php',6678]], 163],
'filepicker_js_templates': ['filepicker_js_templates', 'Returns all FilePicker JavaScript templates as an array. ', [['files','renderer.php',1038]], 1],
'filter': ['filter', 'Template method for removing certain tokens based on arbitrary criteria. ', [['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Nmtokens.php',55],['lib/htmlpurifier/HTMLPurifier/URIFilter','HostBlacklist.php',35],['filter/emoticon','filter.php',35],['filter/multilang','filter.php',43],['filter/algebra','filter.php',92],['lib/htmlpurifier/HTMLPurifier/URIFilter','DisableExternal.php',33],['lib/horde/framework/Horde/Stream/Filter','Null.php',56],['lib/horde/framework/Horde','Variables.php',315],['lib/horde/framework/Horde/Stream/Filter','Crc32.php',41],['filter/emailprotect','filter.php',34],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Class.php',31],['repository','lib.php',2099],['grade/report/singleview/classes/local/screen','filterable_items.php',38],['lib/horde/framework/Horde/Stream/Filter','Bin2hex.php',25],['filter/activitynames','filter.php',39],['lib/htmlpurifier/HTMLPurifier/URIFilter','DisableExternalResources.php',16],['filter/glossary','filter.php',53],['lib/horde/framework/Horde/Imap/Client/Data/Format/Filter','Quote.php',28],['lib/horde/framework/Horde/Imap/Client/Data/Format/Filter','String.php',42],['filter/tex','filter.php',115],['filter/tidy','filter.php',41],['lib/htmlpurifier/HTMLPurifier/URIFilter','SafeIframe.php',45],['lib/htmlpurifier/HTMLPurifier/URIFilter','DisableResources.php',16],['filter/censor','filter.php',55],['filter/data','filter.php',34],['filter/mathjaxloader','filter.php',133],['lib/horde/framework/Horde/Stream/Filter','Eol.php',85],['filter/urltolink','filter.php',39],['lib/phpexcel/PHPExcel/Calculation','Database.php',70],['filter/mediaplugin','filter.php',50],['grade/report/singleview/classes/local/screen','grade.php',65],['lib/htmlpurifier/HTMLPurifier/URIFilter','Munge.php',62],['lib/htmlpurifier/HTMLPurifier','URIDefinition.php',92],['lib/htmlpurifier/HTMLPurifier/URIFilter','MakeAbsolute.php',52],['lib/horde/framework/Horde/Stream/Filter','Htmlspecialchars.php',30]], 280],
'is_visible': ['is_visible', 'Check if the field data is visible to the current user ', [['user/profile','lib.php',322],['repository/coursefiles','lib.php',167],['repository','lib.php',1779],['mod/assign','assignmentplugin.php',287],['backup/cc/cc_lib','cc_converters.php',113]], 63],
'print_login': ['print_login', 'Return login form ', [['repository/boxnet','lib.php',276],['repository/picasa','lib.php',60],['repository/flickr_public','lib.php',135],['repository/dropbox','lib.php',127],['repository/skydrive','lib.php',72],['repository/coursefiles','lib.php',37],['repository','lib.php',2321],['repository/upload','lib.php',40],['repository/wikimedia','lib.php',120],['repository/googledocs','lib.php',138],['repository/merlot','lib.php',104],['repository/youtube','lib.php',248],['repository/url','lib.php',63],['repository/recent','lib.php',56],['repository/filesystem','lib.php',380],['repository/flickr','lib.php',149],['repository/user','lib.php',38],['repository/areafiles','lib.php',37]], 10],
'get_contextvisibility': ['get_contextvisibility', 'Return if the instance is visible in a context ', [['repository','lib.php',91]], 4],
'delete': ['delete', 'Deletes an item from the cache store. ', [['cache/stores/static','lib.php',374],['cache','disabledlib.php',102],['lib/google/src/Google/Service','AdSense.php',1258],['lib/google/src/Google/Service','AdSense.php',1730],['lib/grade','grade_item.php',396],['lib/google/src/Google/Service','Replicapool.php',378],['lib/google/src/Google/Service','Tasks.php',310],['lib/google/src/Google/Service','Tasks.php',428],['lib/google/src/Google/Service','AndroidPublisher.php',1230],['lib/google/src/Google/Service','AndroidPublisher.php',1310],['lib/google/src/Google/Service','AndroidPublisher.php',1668],['lib/google/src/Google/Service','AndroidPublisher.php',1763],['lib/google/src/Google/Service','AndroidPublisher.php',2083],['lib/google/src/Google/Service','YouTubeReporting.php',255],['lib/google/src/Google/Service','Reseller.php',441],['lib/google/src/Google/Cache','Memcache.php',144],['lib','filelib.php',3481],['lib/google/src/Google/Service','Computeaccounts.php',418],['lib/google/src/Google/Service','Computeaccounts.php',497],['lib/google/src/Google/Service','Computeaccounts.php',668],['lib/grade','grade_category.php',281],['lib/grade','grade_scale.php',136],['lib/adodb','adodb-active-record.inc.php',901],['lib/grade','grade_object.php',270],['lib/google/src/Google/Service','YouTubeAnalytics.php',352],['lib/google/src/Google/Service','YouTubeAnalytics.php',447],['lib/google/src/Google/Service','MapsEngine.php',1693],['lib/google/src/Google/Service','MapsEngine.php',1991],['lib/google/src/Google/Service','MapsEngine.php',2344],['lib/google/src/Google/Service','MapsEngine.php',2651],['lib/google/src/Google/Service','MapsEngine.php',2912],['completion','data_object.php',273],['lib/google/src/Google/Cache','File.php',115],['cache/classes','dummystore.php',198],['lib/google/src/Google/Service','Dns.php',378],['cache/classes','loaders.php',792],['cache/classes','loaders.php',1471],['cache/classes','loaders.php',1841],['lib/google/src/Google/Service','Appengine.php',352],['lib/google/src/Google/Service','Appengine.php',455],['tag/classes','collection.php',260],['lib/filebrowser','file_info.php',418],['lib/google/src/Google/Service','AdExchangeBuyer.php',938],['lib/google/src/Google/Service','AdExchangeBuyer.php',1137],['lib/google/src/Google/Service','AdExchangeBuyer.php',1561],['lib/filebrowser','virtual_root_file.php',69],['lib/google/src/Google/Service','Books.php',1946],['lib/grade','grade_grade.php',1024],['lib/grade','grade_outcome.php',97],['lib/google/src/Google/Service','Analytics.php',2165],['lib/google/src/Google/Service','Analytics.php',2534],['lib/google/src/Google/Service','Analytics.php',2655],['lib/google/src/Google/Service','Analytics.php',2872],['lib/google/src/Google/Service','Analytics.php',3001],['lib/google/src/Google/Service','Analytics.php',3092],['lib/google/src/Google/Service','Analytics.php',3406],['lib/google/src/Google/Service','Analytics.php',3631],['lib/google/src/Google/Service','DeploymentManager.php',452],['lib/google/src/Google/Service','Blogger.php',1065],['lib/google/src/Google/Service','Blogger.php',1227],['lib/google/src/Google/Service','Blogger.php',1451],['lib/filebrowser','file_info_stored.php',631],['competency/classes','persistent.php',510],['lib/google/src/Google/Service','CloudUserAccounts.php',528],['lib/google/src/Google/Service','CloudUserAccounts.php',628],['lib/google/src/Google/Service','CloudUserAccounts.php',893],['lib/google/src/Google/Service','Cloudresourcemanager.php',390],['lib/htmlpurifier/HTMLPurifier','Zipper.php',89],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',960],['lib/google/src/Google/Service','TagManager.php',1022],['lib/google/src/Google/Service','TagManager.php',1113],['lib/google/src/Google/Service','TagManager.php',1265],['lib/google/src/Google/Service','TagManager.php',1358],['lib/google/src/Google/Service','TagManager.php',1452],['lib/google/src/Google/Service','TagManager.php',1546],['lib/google/src/Google/Service','TagManager.php',1696],['mod/lesson','locallib.php',1037],['mod/lesson','locallib.php',2271],['repository','lib.php',427],['repository','lib.php',1962],['admin/tool/uploadcourse/classes','course.php',226],['lib','badgeslib.php',640],['lib/google/src/Google/Service','Bigquery.php',531],['lib/google/src/Google/Service','Bigquery.php',863],['lib/google/src/Google/Service','ShoppingContent.php',1050],['lib/google/src/Google/Service','ShoppingContent.php',1448],['lib/google/src/Google/Service','ShoppingContent.php',1970],['lib/google/src/Google/Service','Webmasters.php',355],['lib/google/src/Google/Service','Webmasters.php',449],['lib/google/src/Google/Service','Clouddebugger.php',384],['lib/filestorage','stored_file.php',323],['lib/google/src/Google/Service','Container.php',309],['lib/google/src/Google/Service','Storage.php',1042],['lib/google/src/Google/Service','Storage.php',1157],['lib/google/src/Google/Service','Storage.php',1332],['lib/google/src/Google/Service','Storage.php',1454],['lib/google/src/Google/Service','Storage.php',1681],['cache/stores/memcache','lib.php',401],['lib/google/src/Google/Service','Genomics.php',646],['lib/google/src/Google/Service','Genomics.php',735],['lib/google/src/Google/Service','Genomics.php',903],['lib/google/src/Google/Service','Genomics.php',971],['lib/google/src/Google/Service','Genomics.php',1326],['lib/google/src/Google/Service','Genomics.php',1443],['lib/google/src/Google/Service','Licensing.php',224],['lib/google/src/Google/Service','Fitness.php',400],['lib/google/src/Google/Service','Fitness.php',512],['lib/google/src/Google/Service','Fitness.php',647],['comment','lib.php',790],['lib/google/src/Google/Service','Gmail.php',763],['lib/google/src/Google/Service','Gmail.php',921],['lib/google/src/Google/Service','Gmail.php',1014],['lib/google/src/Google/Service','Gmail.php',1234],['lib/google/src/Google/Service','Taskqueue.php',293],['lib/adodb','adodb-active-recordx.inc.php',1016],['lib','accesslib.php',5580],['cache/classes','interfaces.php',161],['lib/google/src/Google/Service','Autoscaler.php',315],['lib/google/src/Google/Service','Autoscaler.php',429],['lib/google/src/Google/Service','Prediction.php',262],['lib/google/src/Google/Service','SiteVerification.php',139],['lib/google/src/Google/Service','Drive.php',1522],['lib/google/src/Google/Service','Drive.php',1603],['lib/google/src/Google/Service','Drive.php',1748],['lib/google/src/Google/Service','Drive.php',2040],['lib/google/src/Google/Service','Drive.php',2110],['lib/google/src/Google/Service','Drive.php',2240],['lib/google/src/Google/Service','Drive.php',2403],['lib/google/src/Google/Service','Drive.php',2523],['lib/google/src/Google/Service','Proximitybeacon.php',522],['lib/google/src/Google/Service','Directory.php',1683],['lib/google/src/Google/Service','Directory.php',1916],['lib/google/src/Google/Service','Directory.php',1989],['lib/google/src/Google/Service','Directory.php',2059],['lib/google/src/Google/Service','Directory.php',2169],['lib/google/src/Google/Service','Directory.php',2224],['lib/google/src/Google/Service','Directory.php',2351],['lib/google/src/Google/Service','Directory.php',2420],['lib/google/src/Google/Service','Directory.php',2517],['lib/google/src/Google/Service','Directory.php',2652],['lib/google/src/Google/Service','Directory.php',2731],['lib/google/src/Google/Service','Directory.php',2836],['lib/google/src/Google/Service','Directory.php',2938],['lib/google/src/Google/Service','Directory.php',2999],['lib/google/src/Google/Service','Directory.php',3199],['lib/google/src/Google/Service','Directory.php',3274],['lib/google/src/Google/Service','Fusiontables.php',645],['lib/google/src/Google/Service','Fusiontables.php',812],['lib/google/src/Google/Service','Fusiontables.php',937],['lib/google/src/Google/Service','Fusiontables.php',1126],['lib/google/src/Google/Service','Fusiontables.php',1188],['lib/google/src/Google/Service','AdSenseHost.php',734],['lib/google/src/Google/Service','AdSenseHost.php',1010],['lib/google/src/Google/Service','AdSenseHost.php',1168],['lib/google/src/Google/Service','Mirror.php',425],['lib/google/src/Google/Service','Mirror.php',593],['lib/google/src/Google/Service','Mirror.php',661],['lib/google/src/Google/Service','Mirror.php',772],['tag/classes','area.php',187],['lib/google/src/Google/Service','AndroidEnterprise.php',988],['lib/google/src/Google/Service','AndroidEnterprise.php',1092],['lib/google/src/Google/Service','AndroidEnterprise.php',1280],['lib/google/src/Google/Service','AndroidEnterprise.php',1415],['lib/google/src/Google/Service','AndroidEnterprise.php',1597],['course','lib.php',3263],['mnet','peer.php',118],['search/tests/fixtures','mock_search_engine.php',48],['lib/google/src/Google/Service','Calendar.php',903],['lib/google/src/Google/Service','Calendar.php',1071],['lib/google/src/Google/Service','Calendar.php',1269],['lib/google/src/Google/Service','Calendar.php',1412],['cache/stores/session','lib.php',417],['blog','locallib.php',322],['lib/google/src/Google/Service','Storagetransfer.php',381],['cache/stores/mongodb','lib.php',361],['lib/google/src/Google/Cache','Null.php',53],['lib/google/src/Google/Service','GamesConfiguration.php',251],['lib/google/src/Google/Service','GamesConfiguration.php',390],['cache/stores/file','lib.php',393],['badges/criteria','award_criteria.php',330],['cache/stores/memcached','lib.php',402],['lib/google/src/Google/Service','AppState.php',154],['lib/google/src/Google/Service','Resourceviews.php',423],['lib/portfolio','plugin.php',692],['calendar','lib.php',2423],['lib/google/src/Google/Service','Classroom.php',466],['lib/google/src/Google/Service','Classroom.php',615],['lib/google/src/Google/Service','Classroom.php',701],['lib/google/src/Google/Service','Classroom.php',806],['lib/google/src/Google/Service','Classroom.php',934],['lib/google/src/Google/Service','SQLAdmin.php',786],['lib/google/src/Google/Service','SQLAdmin.php',856],['lib/google/src/Google/Service','SQLAdmin.php',1023],['lib/google/src/Google/Service','SQLAdmin.php',1368],['lib/google/src/Google/Service','SQLAdmin.php',1483],['badges/criteria','award_criteria_manual.php',220],['search/engine/solr/classes','engine.php',1045],['lib/google/src/Google/Service','Compute.php',4021],['lib/google/src/Google/Service','Compute.php',4149],['lib/google/src/Google/Service','Compute.php',4284],['lib/google/src/Google/Service','Compute.php',4571],['lib/google/src/Google/Service','Compute.php',4671],['lib/google/src/Google/Service','Compute.php',4829],['lib/google/src/Google/Service','Compute.php',4942],['lib/google/src/Google/Service','Compute.php',5033],['lib/google/src/Google/Service','Compute.php',5174],['lib/google/src/Google/Service','Compute.php',5248],['lib/google/src/Google/Service','Compute.php',5378],['lib/google/src/Google/Service','Compute.php',5508],['lib/google/src/Google/Service','Compute.php',5683],['lib/google/src/Google/Service','Compute.php',5984],['lib/google/src/Google/Service','Compute.php',6156],['lib/google/src/Google/Service','Compute.php',6316],['lib/google/src/Google/Service','Compute.php',6717],['lib/google/src/Google/Service','Compute.php',6898],['lib/google/src/Google/Service','Compute.php',7037],['lib/google/src/Google/Service','Compute.php',7128],['lib/google/src/Google/Service','Compute.php',7208],['lib/google/src/Google/Service','Compute.php',7299],['lib/google/src/Google/Service','Compute.php',7409],['lib/google/src/Google/Service','Compute.php',7570],['lib/google/src/Google/Service','Compute.php',7734],['lib/google/src/Google/Service','Compute.php',7938],['lib/google/src/Google/Service','Compute.php',8035],['lib/google/src/Google/Service','Compute.php',8210],['lib/google/src/Google/Service','Compute.php',8305],['lib/google/src/Google/Service','Pubsub.php',240],['lib/google/src/Google/Service','Pubsub.php',379],['lib/google/src/Google/Service','YouTube.php',1810],['lib/google/src/Google/Service','YouTube.php',2061],['lib/google/src/Google/Service','YouTube.php',2459],['lib/google/src/Google/Service','YouTube.php',2889],['lib/google/src/Google/Service','YouTube.php',3187],['lib/google/src/Google/Service','YouTube.php',3419],['lib/google/src/Google/Service','YouTube.php',3559],['lib/google/src/Google/Service','YouTube.php',3928],['lib/google/src/Google/Service','YouTube.php',4158],['lib/google/src/Google/Cache','Apc.php',105],['lib/google/src/Google/Service','Dfareporting.php',5000],['lib/google/src/Google/Service','Dfareporting.php',5566],['lib/google/src/Google/Service','Dfareporting.php',5753],['lib/google/src/Google/Service','Dfareporting.php',5877],['lib/google/src/Google/Service','Dfareporting.php',6397],['lib/google/src/Google/Service','Dfareporting.php',6578],['lib/google/src/Google/Service','Dfareporting.php',6731],['lib/google/src/Google/Service','Dfareporting.php',6996],['lib/google/src/Google/Service','Dfareporting.php',7503],['lib/google/src/Google/Service','Dfareporting.php',8102],['lib/google/src/Google/Service','Dfareporting.php',8768],['lib/google/src/Google/Service','Manager.php',244],['lib/google/src/Google/Service','Manager.php',324],['lib/google/src/Google/Service','CloudMonitoring.php',274],['lib','webdavlib.php',691]], 317],
'__construct': ['__construct', '', [['lib/adodb/drivers','adodb-odbc_mssql.inc.php',50],['lib/adodb/drivers','adodb-odbc_mssql.inc.php',359],['question/classes/statistics/responses','analyser.php',69],['auth/radius','auth.php',38],['lib/xmldb','xmldb_file.php',43],['lib/lessphp/Tree/Mixin','Definition.php',18],['cache/stores/static','lib.php',127],['lib/classes/session','file.php',40],['lib/htmlpurifier/HTMLPurifier/Lexer','DOMLex.php',35],['backup/util/ui','base_moodleform.class.php',68],['lib/simplepie/library/SimplePie','Author.php',81],['lib/filestorage','zip_archive.php',66],['backup/util/structure','restore_path_element.class.php',47],['backup/util/structure','restore_path_element.class.php',128],['lib/htmlpurifier/HTMLPurifier/ChildDef','Chameleon.php',36],['lib/phpexcel/PHPExcel','HashTable.php',44],['mod/quiz/tests','repaginate_test.php',39],['lib/form','modvisible.php',43],['lib/phpexcel/PHPExcel/Worksheet','Row.php',44],['cache','disabledlib.php',44],['lib/phpexcel/PHPExcel/Worksheet','Dimension.php',58],['lib/mustache/src/Mustache/Cache','FilesystemCache.php',27],['question/type/ddwtos','question.php',61],['mnet/xmlrpc','client.php',25],['lib/horde/framework/Horde/Imap/Client','Url.php',112],['lib/classes','useragent.php',115],['lib/pear/HTML/QuickForm','advcheckbox.php',66],['lib/classes/update','checker_exception.php',37],['lib/phpexcel/PHPExcel/Reader','Excel2007.php',53],['lib/jabber/XMPP','XMPP.php',101],['lib/form','radio.php',44],['lib/spout/src/Spout/Reader/XLSX/Helper','StyleHelper.php',45],['auth/cas/CAS/CAS/ProxiedService/Http','Abstract.php',58],['lib/phpexcel/PHPExcel/Style','Border.php',67],['lib/htmlpurifier/HTMLPurifier','HTMLDefinition.php',182],['lib/adodb/drivers','adodb-oci8quercus.inc.php',31],['lib/adodb/drivers','adodb-oci8quercus.inc.php',45],['lib/spout/src/Spout/Reader/XLSX','SheetIterator.php',29],['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',91],['lib/phpexcel/PHPExcel','DocumentProperties.php',123],['lib/typo3','class.t3lib_cs.php',509],['mod/workshop/allocation/scheduled','lib.php',48],['lib/adodb/drivers','adodb-netezza.inc.php',53],['lib/adodb/drivers','adodb-netezza.inc.php',144],['mod/feedback/classes','complete_form.php',58],['search/classes','document.php',188],['webservice/rest','locallib.php',40],['lib/dml','mssql_native_moodle_recordset.php',34],['mod/assign/feedback/editpdf/fpdi','fpdi_pdf_parser.php',57],['lib/htmlpurifier/HTMLPurifier','TokenFactory.php',43],['backup/moodle2','backup_block_task.class.php',43],['lib/lessphp/Tree','Negative.php',14],['lib/minify/lib/Minify/Cache','APC.php',19],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',54],['lib/pear/HTML/QuickForm','header.php',33],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','InMemoryStrategy.php',26],['lib/phpexcel/PHPExcel/Worksheet','RowCellIterator.php',51],['lib/simplepie/library/SimplePie/XML/Declaration','Parser.php',110],['lib/phpexcel/PHPExcel/Worksheet','ColumnIterator.php',60],['lib/spout/src/Spout/Reader/ODS','Sheet.php',33],['question/type/calculated/tests','helper.php',205],['lib/adodb/drivers','adodb-odbtp.inc.php',38],['lib/adodb/drivers','adodb-odbtp.inc.php',673],['lib/adodb/drivers','adodb-odbtp.inc.php',796],['lib/adodb/drivers','adodb-odbtp.inc.php',806],['lib/adodb/drivers','adodb-odbtp.inc.php',816],['lib/adodb/drivers','adodb-odbtp.inc.php',826],['lib/adodb/drivers','adodb-odbtp.inc.php',836],['enrol/lti/ims-blti','blti.php',28],['backup/cc','cc2moodle.php',105],['mod/chat','locallib.php',181],['mod/chat','locallib.php',229],['user/filters','simpleselect.php',45],['lib/phpexcel/PHPExcel/CachedObjectStorage','Memcache.php',244],['lib/dml','pdo_moodle_database.php',42],['lib/adodb/drivers','adodb-sqlite3.inc.php',36],['lib/adodb/drivers','adodb-sqlite3.inc.php',350],['lib/pear/HTML/QuickForm','static.php',44],['competency/classes/external','comment_area_exporter.php',48],['lib/lessphp/Tree','Selector.php',31],['auth/cas/CAS/CAS','TypeMismatchException.php',43],['auth/fc','fcFPP.php',33],['lib/xmldb','xmldb_key.php',43],['grade/grading/form/rubric','rubriceditor.php',56],['lib/google/src/Google/Service','Cloudlatencytest.php',40],['course','moodleform_mod.php',69],['auth/nntp','auth.php',35],['grade/report/grader','lib.php',111],['admin/tool/generator/classes','course_backend.php',116],['lib/minify/lib','FirePHP.php',189],['lib/adodb/drivers','adodb-sqlitepo.inc.php',38],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',67],['lib/phpexcel/PHPExcel/CachedObjectStorage','CacheBase.php',66],['lib/lessphp/Tree','Rule.php',24],['lib/behat/features/bootstrap','behat_init_context.php',45],['lib','dmllib.php',69],['lib','dmllib.php',84],['lib','dmllib.php',104],['lib','dmllib.php',129],['lib','dmllib.php',159],['lib','dmllib.php',187],['lib','dmllib.php',240],['lib','dmllib.php',270],['lib/google/src/Google/Service','DataTransfer.php',44],['lib/google/src/Google/Http','Batch.php',42],['backup/util/structure','base_processor.class.php',49],['admin/tool/lpmigrate/classes','framework_mapper.php',50],['lib/phpexcel/PHPExcel/Reader','OOCalc.php',46],['lib/lessphp/Tree','NameValue.php',22],['mod/quiz/classes','admin_review_setting.php',82],['lib/htmlpurifier/HTMLPurifier','Generator.php',67],['mod/quiz/report','attemptsreport_table.php',76],['blocks/lp/classes/output','summary.php',59],['lib/google/src/Google/IO','Stream.php',45],['lib/google/src/Google/Service','Freebase.php',38],['grade/tests','reportlib_test.php',36],['search/classes','manager.php',100],['question/behaviour/adaptive','behaviour.php',310],['admin/tool/lp/classes/form','framework_autocomplete.php',48],['lib/minify/lib','JSMinPlus.php',193],['lib/minify/lib','JSMinPlus.php',726],['lib/minify/lib','JSMinPlus.php',1638],['lib/minify/lib','JSMinPlus.php',1656],['lib/minify/lib','JSMinPlus.php',1748],['lib/simplepie/library/SimplePie','Copyright.php',73],['lib/phpexcel/PHPExcel/Style','Conditional.php',93],['lib/google/src/Google/Task','Runner.php',76],['backup/util/settings/root','root_backup_setting.class.php',34],['lib','componentlib.class.php',179],['lib','componentlib.class.php',610],['lib','componentlib.class.php',834],['lib/google/src/Google/Service','AdSense.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef','Clone.php',18],['lib/spout/src/Spout/Reader/CSV','Sheet.php',24],['lib/filebrowser','file_info_context_system.php',37],['lib/grade','grade_item.php',260],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nstring.php',27],['repository/boxnet','lib.php',56],['auth/email','auth.php',34],['mod/wiki/editors','wikifiletable.php',40],['lib/google/src/Google/Service','Replicapool.php',51],['lib/dtl','database_exporter.php',55],['lib/horde/framework/Horde/Imap/Client/Namespace','List.php',34],['lib/phpexcel/PHPExcel/Writer','CSV.php',79],['lib/google/src/Google/Service','Tasks.php',44],['lib/dml','mysqli_native_moodle_recordset.php',42],['lib/google/src/Google/Service','GamesManagement.php',50],['lib/minify/lib/Minify','Source.php',43],['lib/jabber/XMPP','Roster.php',48],['lib/lessphp/Tree','Element.php',19],['lib/classes','string_manager_install.php',43],['question/type','questiontypebase.php',55],['question/type','questiontypebase.php',1442],['lib/form','filemanager.php',54],['lib/form','filemanager.php',316],['lib/htmlpurifier/HTMLPurifier/ChildDef','Custom.php',36],['backup/util/ui','renderer.php',813],['lib/simplepie/library/SimplePie','Rating.php',73],['lib/phpexcel/PHPExcel/Cell','Hyperlink.php',44],['question/classes/statistics/questions','calculator.php',66],['backup/moodle2','backup_xml_transformer.class.php',50],['lib/google/src/Google/Service','Resource.php',62],['lib/form','autocomplete.php',56],['lib/phpexcel/PHPExcel/Worksheet','RowIterator.php',60],['mod/lesson/classes','file_info.php',45],['question/type/tests','question_first_matching_answer_grading_strategy_test.php',40],['lib/google/src/Google/Service','Partners.php',43],['cache','lib.php',66],['cache','lib.php',109],['cache','lib.php',138],['cache','lib.php',183],['grade/edit/tree','lib.php',57],['grade/edit/tree','lib.php',635],['grade/edit/tree','lib.php',668],['grade/edit/tree','lib.php',834],['lib/simplepie/library/SimplePie','Cache.php',69],['mod/wiki/diff','difflib.php',277],['mod/wiki/diff','difflib.php',381],['mod/wiki/diff','difflib.php',478],['lib/pear/HTML/QuickForm','select.php',58],['lib/classes/output','mustache_javascript_helper.php',40],['lib/phpexcel/PHPExcel/Reader/Excel2007','Theme.php',68],['mod/data','export_form.php',16],['lib/pear/HTML/QuickForm','autocomplete.php',67],['question/type/shortanswer','question.php',44],['lib/google/src/Google/Service','AndroidPublisher.php',52],['lib/google/src/Google/Verifier','Pem.php',31],['lib/classes/antivirus','scanner.php',41],['lib/phpexcel/PHPExcel/Reader','Excel5.php',414],['lib/horde/framework/Horde/Imap/Client/Auth','DigestMD5.php',69],['lib/classes/output','mustache_filesystem_loader.php',39],['lib/classes/output','inplace_editable.php',107],['lib/adodb/drivers','adodb-informix.inc.php',37],['competency/classes','competency_rule.php',45],['lib/phpexcel/PHPExcel','RichText.php',37],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',59],['lib/pear/HTML/QuickForm','input.php',38],['repository/picasa','lib.php',41],['mod/feedback/classes','structure.php',48],['backup/util/plan','backup_structure_step.class.php',38],['question/classes/bank','random_question_loader.php',61],['mod/quiz/report/statistics/classes','calculated.php',43],['lib/horde/framework/Horde/Stream','String.php',27],['backup/util/helper','restore_decode_content.class.php',50],['backup/util/helper','restore_decode_content.class.php',125],['mod/workshop/backup/moodle1','lib.php',308],['lib/google/src/Google/Service','YouTubeReporting.php',47],['grade/export/txt','grade_export_txt.php',27],['lib/mustache/src/Mustache/Exception','SyntaxException.php',23],['lib/tcpdf','tcpdf_barcodes_2d.php',58],['mod/imscp','locallib.php',289],['lib/form','selectyesno.php',42],['lib/horde/framework/Horde/Mail/Transport','Smtphorde.php',62],['mod/lti/service/toolsettings/classes/local/service','toolsettings.php',41],['mod/lti/service/profile/classes/local/service','profile.php',41],['repository/flickr_public','lib.php',49],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','BackgroundPosition.php',57],['admin/tool/lp/classes/output','template_cohorts_table.php',53],['lib/simplepie/library','SimplePie.php',611],['lib/horde/framework/Horde/Imap/Client/Base','Debug.php',55],['lib/google/src/Google/Service','Reseller.php',44],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Border.php',18],['lib/testing/generator','component_generator_base.php',45],['lib/horde/framework/Horde/Translation/Handler','Gettext.php',34],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooter.php',175],['lib/classes','plugin_manager.php',91],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',28],['lib/horde/framework/Horde/Support','CombineStream.php',29],['lib/xmldb','xmldb_field.php',84],['lib/adodb/drivers','adodb-ibase.inc.php',59],['lib/adodb/drivers','adodb-ibase.inc.php',764],['lib/htmlpurifier/HTMLPurifier/AttrDef','URI.php',23],['admin/roles/classes','view_role_definition_table.php',28],['lib/google/src/Google/Cache','Memcache.php',44],['lib/pear/HTML/QuickForm','radio.php',48],['lib/filebrowser','file_info_context_coursecat.php',39],['lib/spout/src/Spout/Writer/ODS/Internal','Workbook.php',37],['mod/workshop/eval/best','lib.php',44],['lib/phpexcel/PHPExcel/Writer/PDF','DomPDF.php',38],['grade/report','lib.php',156],['lib','csslib.php',1501],['lib','csslib.php',1587],['lib','csslib.php',2068],['lib','csslib.php',2136],['lib','csslib.php',2242],['availability/classes','info_module.php',40],['mod/book','locallib.php',414],['question/engine','datalib.php',68],['question/engine','datalib.php',1331],['question/engine','datalib.php',1632],['question/engine','datalib.php',1740],['question/engine','datalib.php',1870],['question/engine','datalib.php',1941],['webservice','lib.php',745],['webservice','lib.php',841],['lib/adodb/drivers','adodb-informix72.inc.php',59],['lib/adodb/drivers','adodb-informix72.inc.php',399],['lib/adodb','adodb-pager.inc.php',60],['user/classes/output/myprofile','category.php',68],['lib/lessphp/Visitor','extendFinder.php',15],['backup/util/settings','base_setting.class.php',89],['backup/util/settings','base_setting.class.php',556],['lib','filelib.php',2720],['lib','filelib.php',3601],['lib/phpunit/classes','database_driver_testcase.php',55],['lib/phpexcel/PHPExcel/Shared/OLE/PPS','File.php',32],['report/competency/classes/output','report.php',56],['lib/google/src/Google/Service','Computeaccounts.php',49],['question/type','edit_question_form.php',96],['lib/filebrowser','file_info_context_user.php',39],['admin/tool/lp/classes/output','template_plans_page.php',37],['lib/phpexcel/PHPExcel','Style.php',93],['lib/minify/lib/Minify','HTML.php',49],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ListStyle.php',20],['lib/form','password.php',44],['backup','backup.class.php',146],['mod/feedback/classes','course_select_form.php',39],['lib/google/src/Google/Auth','AppIdentity.php',39],['lib/adodb','adodb-active-record.inc.php',121],['lib/phpexcel/PHPExcel','Chart.php',169],['lib/horde/framework/Horde/Mail/Rfc822','List.php',61],['admin/roles/classes','allow_switch_page.php',33],['lib/grade','grade_object.php',80],['lib/google/src/Google/IO','Exception.php',29],['auth/lti','auth.php',38],['mod/quiz/report/statistics/classes','calculator.php',39],['lib/htmlpurifier','HTMLPurifier.php',104],['admin/tool/lp/classes/output','user_competency_summary_in_plan.php',47],['mod/assign/feedback/editpdf/classes','widget.php',53],['lib/evalmath','evalmath.class.php',120],['lib/form','url.php',46],['lib/dml','pdo_moodle_recordset.php',41],['lib/htmlpurifier/HTMLPurifier/TagTransform','Simple.php',19],['backup/cc/cc_lib','xmlbase.php',52],['badges/lib','bakerlib.php',52],['lib/google/src/Google/Signer','P12.php',35],['availability/classes','info_section.php',40],['lib/form','static.php',47],['backup/converter','convertlib.php',52],['backup/converter','convertlib.php',277],['lib/google/src/Google/Service','YouTubeAnalytics.php',56],['admin/roles/classes','check_capability_table.php',40],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',14],['lib/adodb/drivers','adodb-postgres64.inc.php',127],['lib/adodb/drivers','adodb-postgres64.inc.php',919],['backup/util/helper','restore_prechecks_helper.class.php',213],['user/profile','lib.php',59],['lib/google/src/Google/Service','Admin.php',40],['lib/spout/src/Spout/Reader/CSV','RowIterator.php',62],['lib/google/src/Google/Service','MapsEngine.php',66],['lib','listlib.php',82],['lib','listlib.php',485],['lib/phpexcel/PHPExcel/Writer','HTML.php',128],['backup/moodle2','restore_activity_task.class.php',48],['lib/htmlpurifier/HTMLPurifier','HTMLModuleManager.php',68],['lib/simplepie/library/SimplePie','Source.php',61],['completion','data_object.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','ID.php',28],['grade/report/singleview/classes/local/ui','dropdown_attribute.php',49],['lib/horde/framework/Horde/Support','Stack.php',18],['lib/google/src/Google/Cache','File.php',41],['lib/horde/framework/Horde/Mail/Transport','Mock.php',76],['backup/util/ui','backup_moodleform.class.php',41],['availability/condition/grouping/classes','condition.php',46],['lib/classes/session','memcache.php',50],['cache/classes','dummystore.php',62],['badges/classes','assertion.php',49],['lib/xhprof/xhprof_lib/utils','xhprof_runs.php',87],['availability/tests/fixtures','mock_condition.php',52],['lib/mustache/src/Mustache/Loader','FilesystemLoader.php',33],['mod/quiz/report','attemptsreport_options.php',95],['lib/phpexcel/PHPExcel/Writer/PDF','tcPDF.php',39],['lib/minify/lib/Minify/CSS','Compressor.php',51],['lib/google/src/Google/Service','Dns.php',53],['question/type/calculatedmulti','edit_calculatedmulti_form.php',47],['backup/moodle2','restore_block_task.class.php',45],['lib/phpexcel/PHPExcel/Worksheet','AutoFilter.php',54],['lib/form','recaptcha.php',48],['lib','csvlib.class.php',64],['lib','csvlib.class.php',398],['lib/simplepie/library/SimplePie/Cache','File.php',82],['lib/phpexcel/PHPExcel/Chart','Legend.php',75],['lib/phpexcel/PHPExcel','WorksheetIterator.php',44],['cache/classes','loaders.php',196],['cache/classes','loaders.php',1189],['cache/classes','loaders.php',1586],['lib/google/src/Google/Service','Appengine.php',44],['admin/tool/lp/classes/output','template_cohorts_page.php',37],['search/classes','engine.php',77],['backup/cc/cc_lib','cc_assesment_essay.php',25],['lib/classes/progress','display.php',48],['lib/lessphp/Tree','Call.php',19],['course/format','lib.php',78],['question/type/calculated','datasetdefinitions_form.php',53],['lib/google/src/Google/Service','Translate.php',40],['enrol/database','settingslib.php',34],['lib/lessphp/Tree/Mixin','Call.php',14],['admin/tool/log/store/standard/classes/log','store.php',37],['lib/google/src/Google/Service','Urlshortener.php',40],['lib/horde/framework/Horde/Imap/Client','Socket.php',168],['lib/tests','collator_test.php',310],['lib/google/src/Google/Auth','Simple.php',31],['backup/cc/cc_lib','cc_manifest.php',45],['lib/bennu','iCalendar_properties.php',28],['lib/bennu','iCalendar_properties.php',220],['lib/bennu','iCalendar_properties.php',238],['lib/bennu','iCalendar_properties.php',259],['lib/bennu','iCalendar_properties.php',275],['lib/bennu','iCalendar_properties.php',296],['lib/bennu','iCalendar_properties.php',343],['lib/bennu','iCalendar_properties.php',358],['lib/bennu','iCalendar_properties.php',376],['lib/bennu','iCalendar_properties.php',391],['lib/bennu','iCalendar_properties.php',406],['lib/bennu','iCalendar_properties.php',447],['lib/bennu','iCalendar_properties.php',462],['lib/bennu','iCalendar_properties.php',485],['lib/bennu','iCalendar_properties.php',509],['lib/bennu','iCalendar_properties.php',524],['lib/bennu','iCalendar_properties.php',555],['lib/bennu','iCalendar_properties.php',573],['lib/bennu','iCalendar_properties.php',594],['lib/bennu','iCalendar_properties.php',637],['lib/bennu','iCalendar_properties.php',680],['lib/bennu','iCalendar_properties.php',724],['lib/bennu','iCalendar_properties.php',747],['lib/bennu','iCalendar_properties.php',782],['lib/bennu','iCalendar_properties.php',808],['lib/bennu','iCalendar_properties.php',849],['lib/bennu','iCalendar_properties.php',864],['lib/bennu','iCalendar_properties.php',905],['lib/bennu','iCalendar_properties.php',938],['lib/bennu','iCalendar_properties.php',952],['lib/bennu','iCalendar_properties.php',965],['lib/bennu','iCalendar_properties.php',987],['lib/bennu','iCalendar_properties.php',1017],['lib/bennu','iCalendar_properties.php',1031],['lib/bennu','iCalendar_properties.php',1061],['lib/bennu','iCalendar_properties.php',1075],['lib/bennu','iCalendar_properties.php',1098],['lib/bennu','iCalendar_properties.php',1110],['lib/bennu','iCalendar_properties.php',1139],['lib/bennu','iCalendar_properties.php',1160],['lib/bennu','iCalendar_properties.php',1181],['lib/bennu','iCalendar_properties.php',1203],['lib/bennu','iCalendar_properties.php',1227],['lib/bennu','iCalendar_properties.php',1260],['lib/bennu','iCalendar_properties.php',1386],['lib/bennu','iCalendar_properties.php',1407],['lib/bennu','iCalendar_properties.php',1429],['lib/bennu','iCalendar_properties.php',1450],['lib/mustache/src/Mustache/Exception','UnknownTemplateException.php',22],['lib/phpmailer','moodle_phpmailer.php',47],['availability/tests/fixtures','mock_info.php',40],['lib/horde/framework/Horde/Mail/Transport','Smtpmx.php',138],['admin/tool/lp/classes/form','persistent.php',68],['lib/adodb/drivers','adodb-mysqlt.inc.php',32],['lib/adodb/drivers','adodb-mysqlt.inc.php',96],['webservice/tests','lib_test.php',213],['lib/horde/framework/Horde/Imap/Client/Data/Format','Mailbox.php',35],['filter','local_settings_form.php',33],['mod/quiz/accessrule','accessrulebase.php',52],['lib/horde/framework/Horde/Exception','Wrapped.php',16],['mod/assign/feedback/editpdf/fpdi','pdf_parser.php',170],['lib/lessphp/Tree','Dimension.php',15],['lib/minify/lib/HTTP','ConditionalGet.php',109],['lib/adodb/perf','perf-oci8.inc.php',203],['lib/phpexcel','PHPExcel.php',361],['backup/util/helper','restore_questions_parser_processor.class.php',42],['backup/moodle2','backup_plugin.class.php',44],['lib/classes/antivirus','scanner_exception.php',38],['webservice/xmlrpc','lib.php',43],['report/loglive/classes','renderable.php',73],['course','dnduploadlib.php',109],['course','dnduploadlib.php',407],['lib/filebrowser','file_info.php',43],['lib/adodb/drivers','adodb-access.inc.php',34],['lib/adodb/drivers','adodb-access.inc.php',83],['mod/feedback/classes','responses_table.php',54],['lib/editor/tinymce','adminlib.php',36],['admin/tool/monitor/classes','rule.php',44],['lib/google/src/Google/Service','AdExchangeBuyer.php',55],['lib/filebrowser','virtual_root_file.php',45],['lib/phpexcel/PHPExcel/RichText','Run.php',35],['admin/tool/monitor/classes/output/managesubs','subs.php',51],['auth/cas/CAS/CAS','ProxyChain.php',48],['lib/htmlpurifier/HTMLPurifier','DefinitionCache.php',22],['lib/google/src/Google/Service','CivicInfo.php',40],['mod/feedback/classes/output','summary.php',52],['lib/minify/lib/Minify','Build.php',77],['lib/adodb/drivers','adodb-ado_mssql.inc.php',146],['lib/adodb/drivers','adodb-odbc.inc.php',44],['lib/adodb/drivers','adodb-odbc.inc.php',611],['lib','moodlelib.php',9421],['lib','moodlelib.php',9632],['user/selector','lib.php',85],['user/selector','lib.php',674],['admin/tool/lp/classes/output','plan_page.php',49],['repository/dropbox','lib.php',49],['lib/horde/framework/Horde/Mime','Part.php',261],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','CachingStrategyFactory.php',56],['lib/phpexcel/PHPExcel/Chart','Layout.php',143],['lib/mustache/src/Mustache/Loader','CascadingLoader.php',20],['lib/phpexcel/PHPExcel/Shared/JAMA','EigenvalueDecomposition.php',777],['lib/google/src/Google/Service','Books.php',60],['lib/google/src/Google/Service','Oauth2.php',50],['admin/tool/log/classes/log','store.php',30],['admin/tool/recyclebin/classes','category_bin.php',45],['lib/phpexcel/PHPExcel/Style','Color.php',64],['lib/phpexcel/PHPExcel/Worksheet','SheetView.php',69],['lib/htmlpurifier/HTMLPurifier/Token','Text.php',34],['lib/classes/update','checker.php',50],['lib/horde/framework/Horde/Socket','Client.php',52],['lib/phpexcel/PHPExcel/CachedObjectStorage','APC.php',243],['lib/horde/framework/Horde/Imap/Client/Cache','Backend.php',33],['lib/phpexcel/PHPExcel/Chart','Title.php',45],['lib/horde/framework/Horde/Imap/Client/Data','Format.php',32],['lib/adodb/drivers','adodb-text.inc.php',93],['lib/adodb/drivers','adodb-text.inc.php',379],['lib/phpexcel/PHPExcel','Calculation.php',2071],['lib/adodb/drivers','adodb-sqlite.inc.php',36],['lib/adodb/drivers','adodb-sqlite.inc.php',367],['lib/google/src/Google/Service','Analytics.php',77],['blocks/lp/classes/output','plans_to_review_page.php',48],['lib/google/src/Google/Service','Coordinate.php',48],['availability/condition/group/classes','condition.php',43],['lib/lessphp/Exception','Chunk.php',19],['lib/htmlpurifier/HTMLPurifier','PropertyListIterator.php',22],['backup/cc/cc_lib','cc_resources.php',102],['lib/horde/framework/Horde/Mail/Rfc822','Group.php',45],['backup/util/structure','base_optigroup.class.php',35],['backup/util/structure','base_optigroup.class.php',169],['question/classes/statistics/questions','calculated.php',181],['lib/horde/framework/Horde/Imap/Client/Interaction','Command.php',72],['lib/htmlpurifier/HTMLPurifier/Strategy','Core.php',8],['lib/htmlpurifier/HTMLPurifier/Filter','ExtractStyleBlocks.php',57],['backup/cc/cc_lib','cc_converter_url.php',29],['lib/xmldb','xmldb_structure.php',40],['lib/ddl','sqlite_sql_generator.php',73],['lib/pear/HTML/QuickForm','Renderer.php',31],['backup/util/helper','restore_moodlexml_parser_processor.class.php',38],['lib/pear/HTML/QuickForm','file.php',54],['lib/minify/lib/Minify/Cache','File.php',9],['lib/pear/HTML/QuickForm','xbutton.php',39],['lib/htmlpurifier','locallib.php',134],['admin/tool/recyclebin/classes','course_bin.php',45],['backup/util/plan','backup_task.class.php',32],['backup/util/plan','backup_task.class.php',56],['lib/phpexcel/PHPExcel/CachedObjectStorage','PHPTemp.php',174],['backup/util/helper','backup_helper.class.php',381],['lib/form','htmleditor.php',48],['lib','oauthlib.php',65],['lib','oauthlib.php',409],['auth/cas/CAS/CAS/PGTStorage','File.php',105],['auth/cas/CAS/CAS/ProxiedService','Imap.php',51],['repository/skydrive','lib.php',42],['lib/htmlpurifier/HTMLPurifier','ErrorCollector.php',57],['lib/classes/lock','postgres_lock_factory.php',81],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite.php',260],['lib/horde/framework/Horde/Support','ConsistentHash.php',56],['lib/horde/framework/Horde/Exception','Pear.php',22],['lib/portfolio','exceptions.php',50],['backup/moodle2','restore_plugin.class.php',43],['lib/phpexcel/PHPExcel/CachedObjectStorage','DiscISAM.php',177],['lib/google/src/Google/Service','DoubleClickBidManager.php',40],['lib/minify/lib/Minify/JS','ClosureCompiler.php',101],['lib/horde/framework/Horde/Imap/Client/Data/Format','String.php',38],['lib/form','dateselector.php',70],['lib/spout/src/Spout/Common/Helper','EncodingHelper.php',38],['report/competency/classes/output','user_course_navigation.php',51],['lib/adodb/drivers','adodb-postgres7.inc.php',98],['lib/adodb/drivers','adodb-postgres7.inc.php',311],['lib/adodb/drivers','adodb-postgres7.inc.php',342],['lib/lessphp/Tree','Alpha.php',13],['mod/lti/service/memberships/classes/local/resource','linkmemberships.php',46],['lib/tcpdf','tcpdf.php',1822],['lib/adodb/drivers','adodb-sybase.inc.php',47],['lib/adodb/drivers','adodb-sybase.inc.php',313],['lib/adodb/drivers','adodb-sybase.inc.php',394],['lib/phpexcel/PHPExcel/Chart','PlotArea.php',44],['lib/phpexcel/PHPExcel/Chart','DataSeries.php',136],['mod/lesson','editpage_form.php',41],['question/classes/statistics/responses','analysis_for_question.php',58],['lib/horde/framework/Horde','Domhtml.php',53],['lib','formslib.php',142],['lib','formslib.php',1442],['lib','formslib.php',2653],['rating','lib.php',114],['rating','lib.php',1070],['lib/phpexcel/PHPExcel/Worksheet','Column.php',44],['lib/google/src/Google/Service','Script.php',67],['lib/adodb','adodb-xmlschema.inc.php',118],['lib/adodb','adodb-xmlschema.inc.php',245],['lib/adodb','adodb-xmlschema.inc.php',637],['lib/adodb','adodb-xmlschema.inc.php',781],['lib/adodb','adodb-xmlschema.inc.php',982],['lib/adodb','adodb-xmlschema.inc.php',1295],['lib/google/src/Google/Service','DeploymentManager.php',54],['mod/quiz','attemptlib.php',41],['mod/quiz','attemptlib.php',82],['mod/quiz','attemptlib.php',546],['mod/quiz','attemptlib.php',2337],['mod/quiz','attemptlib.php',2392],['backup/cc/cc_lib','cc_converter_forum.php',29],['lib','boxlib.php',264],['lib/simplepie/library/SimplePie','Restriction.php',81],['admin/roles/classes','allow_assign_page.php',31],['lib/adodb/drivers','adodb-pdo.inc.php',90],['lib/adodb/drivers','adodb-pdo.inc.php',553],['lib/adodb/drivers','adodb-pdo.inc.php',630],['tag/classes/output','tagareacollection.php',40],['admin/tool/lp/classes','template_statistics.php',62],['lib','weblib.php',313],['lib','weblib.php',3183],['lib','weblib.php',3483],['lib','weblib.php',3518],['lib','weblib.php',3593],['backup/cc/cc_lib','cc_converter_basiclti.php',29],['lib/html2text','Html2Text.php',232],['mod/assign/feedback/editpdf/classes','annotation.php',66],['lib/pear/HTML/QuickForm/Renderer','Array.php',143],['question/engine','lib.php',774],['question/engine','lib.php',1011],['question/engine','lib.php',1059],['lib/jabber/XMPP','XMLObj.php',76],['lib/horde/framework/Horde/Exception','PermissionDenied.php',15],['lib/editor/atto','adminlib.php',109],['lib/pear/HTML/QuickForm/Renderer','Tableless.php',116],['grade/report/history/classes/output','tablelog.php',72],['lib/google/src/Google/IO','Curl.php',38],['lib/editor/tinymce/plugins/spellchecker/classes/utils','Logger.php',31],['lib/pear/HTML/QuickForm','hiddenselect.php',41],['backup/util/ui','backup_ui_setting.class.php',70],['backup/util/ui','backup_ui_setting.class.php',200],['backup/util/ui','backup_ui_setting.class.php',398],['backup/util/ui','backup_ui_setting.class.php',504],['backup/util/ui','backup_ui_setting.class.php',583],['lib/adodb/drivers','adodb-mysqlpo.inc.php',35],['lib/adodb/drivers','adodb-mysqlpo.inc.php',82],['lib/adodb/drivers','adodb-mysqlpo.inc.php',119],['lib/google/src/Google/Service','Blogger.php',50],['backup/util/xml/output','file_xml_output.class.php',37],['lib/form','tags.php',75],['admin/tool/installaddon/classes','installer.php',219],['lib/htmlpurifier/HTMLPurifier/AttrDef','Enum.php',30],['lib/simplepie/library/SimplePie','IRI.php',252],['comment','locallib.php',39],['question/engine','states.php',61],['lib/spout/src/Spout/Reader/XLSX/Helper','CellValueFormatter.php',52],['lib/google/src/Google/Service','Dataflow.php',45],['mod/data','locallib.php',66],['mod/data','locallib.php',433],['lib/horde/framework/Horde','Variables.php',60],['backup/util/ui','base_ui.class.php',84],['lib/simplepie/library/SimplePie','Registry.php',99],['cache/locks/file','lib.php',66],['question/classes/statistics/responses','analysis_for_class.php',68],['lib/filebrowser','file_info_stored.php',51],['tag/classes/output','tagcollname.php',42],['competency/classes','persistent.php',54],['admin/tool/lp/classes/output','competency_plan_navigation.php',54],['lib/phpexcel/PHPExcel/Cell','DataValidation.php',146],['lib/pear/HTML/QuickForm','textarea.php',48],['lib/lessphp','Visitor.php',14],['lib/google/src/Google/Service','CloudUserAccounts.php',52],['question/classes/bank','column_base.php',44],['lib/minify/lib/MrClay','Cli.php',74],['lib','outputcomponents.php',80],['lib','outputcomponents.php',204],['lib','outputcomponents.php',469],['lib','outputcomponents.php',523],['lib','outputcomponents.php',589],['lib','outputcomponents.php',665],['lib','outputcomponents.php',783],['lib','outputcomponents.php',925],['lib','outputcomponents.php',1009],['lib','outputcomponents.php',2183],['lib','outputcomponents.php',2222],['lib','outputcomponents.php',2295],['lib','outputcomponents.php',2376],['lib','outputcomponents.php',2579],['lib','outputcomponents.php',2627],['lib','outputcomponents.php',2687],['lib','outputcomponents.php',2860],['lib','outputcomponents.php',3030],['lib','outputcomponents.php',3134],['lib','outputcomponents.php',3201],['lib','outputcomponents.php',3329],['lib','outputcomponents.php',3613],['lib','outputcomponents.php',3642],['lib','outputcomponents.php',3668],['lib','outputcomponents.php',3690],['lib','outputcomponents.php',3719],['lib','outputcomponents.php',3751],['lib/google/src/Google/Service','Pagespeedonline.php',39],['lib/phpexcel/PHPExcel','Cell.php',114],['lib/dml','sqlsrv_native_moodle_recordset.php',40],['repository/wikimedia','wikimedia.php',35],['lib/phpexcel/PHPExcel/Style','Fill.php',81],['lib/google/src/Google/Service','Cloudresourcemanager.php',42],['lib/editor/tinymce/classes','plugin.php',49],['mod/wiki/parser/markups','html.php',21],['lib/simplepie/library/SimplePie/Parse','Date.php',536],['lib/horde/framework/Horde/Support','Inflector.php',115],['question/type/gapselect','question.php',55],['lib/google/src/Google','Config.php',33],['badges/criteria','award_criteria_activity.php',45],['backup/util/xml/output','xml_output.class.php',52],['backup/util/xml/output','xml_output.class.php',158],['course/format/topics','renderer.php',38],['lib/adodb/drivers','adodb-oci8po.inc.php',33],['lib/adodb/drivers','adodb-oci8po.inc.php',99],['mod/workshop/allocation/random','lib.php',52],['mod/workshop/allocation/random','lib.php',727],['backup/util/structure','base_final_element.class.php',38],['backup/util/structure','base_final_element.class.php',239],['backup/util/structure','base_final_element.class.php',256],['lib/htmlpurifier/HTMLPurifier','Zipper.php',25],['lib/horde/framework/Horde/Imap/Client/Data','Thread.php',41],['lib/mustache/src/Mustache/Exception','UnknownHelperException.php',22],['backup/util/settings/activity','activity_backup_setting.class.php',25],['lib/filestorage','tgz_packer.php',749],['lib/filestorage','tgz_packer.php',831],['tag/classes','index_builder.php',96],['lib/pear/HTML/QuickForm','reset.php',37],['lib/classes/lock','lock.php',55],['admin/roles/classes','assign_user_selector_base.php',40],['backup/util/output','output_controller.class.php',44],['question/type/randomsamatch','question.php',114],['lib/google/src/Google/Service','Customsearch.php',38],['lib/lessphp/Tree','Extend.php',28],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',215],['lib/google/src/Google/Service','TagManager.php',67],['question/type/gapselect/tests','edit_form_test.php',41],['mod/lesson','locallib.php',2004],['mod/lesson','locallib.php',2611],['backup/util/helper','restore_structure_parser_processor.class.php',41],['course','renderer.php',52],['backup/util/xml/parser/processors','selective_exact_parser_processor.class.php',35],['lib','modinfolib.php',429],['lib','modinfolib.php',1665],['lib','modinfolib.php',2492],['lib','tablelib.php',128],['lib','tablelib.php',1468],['lib','tablelib.php',1633],['lib','tablelib.php',1698],['user/filters','cohort.php',36],['user/filters','text.php',37],['lib','outputrenderers.php',120],['lib','outputrenderers.php',285],['lib','outputrenderers.php',408],['lib','outputrenderers.php',4578],['lib','outputrenderers.php',4831],['repository','lib.php',116],['repository','lib.php',533],['lib','adminlib.php',791],['lib','adminlib.php',1138],['lib','adminlib.php',1212],['lib','adminlib.php',1355],['lib','adminlib.php',1556],['lib','adminlib.php',1928],['lib','adminlib.php',2040],['lib','adminlib.php',2106],['lib','adminlib.php',2199],['lib','adminlib.php',2260],['lib','adminlib.php',2302],['lib','adminlib.php',2341],['lib','adminlib.php',2429],['lib','adminlib.php',2463],['lib','adminlib.php',2621],['lib','adminlib.php',2706],['lib','adminlib.php',2935],['lib','adminlib.php',3091],['lib','adminlib.php',3233],['lib','adminlib.php',3324],['lib','adminlib.php',3488],['lib','adminlib.php',3571],['lib','adminlib.php',3682],['lib','adminlib.php',3833],['lib','adminlib.php',4067],['lib','adminlib.php',4134],['lib','adminlib.php',4352],['lib','adminlib.php',4381],['lib','adminlib.php',4410],['lib','adminlib.php',4434],['lib','adminlib.php',4464],['lib','adminlib.php',4500],['lib','adminlib.php',4535],['lib','adminlib.php',4567],['lib','adminlib.php',4657],['lib','adminlib.php',4690],['lib','adminlib.php',4748],['lib','adminlib.php',4790],['lib','adminlib.php',4814],['lib','adminlib.php',4840],['lib','adminlib.php',4863],['lib','adminlib.php',4880],['lib','adminlib.php',4925],['lib','adminlib.php',4943],['lib','adminlib.php',5002],['lib','adminlib.php',5045],['lib','adminlib.php',5080],['lib','adminlib.php',5123],['lib','adminlib.php',5206],['lib','adminlib.php',5336],['lib','adminlib.php',5378],['lib','adminlib.php',5423],['lib','adminlib.php',5480],['lib','adminlib.php',5496],['lib','adminlib.php',5552],['lib','adminlib.php',5777],['lib','adminlib.php',5831],['lib','adminlib.php',5885],['lib','adminlib.php',5902],['lib','adminlib.php',5950],['lib','adminlib.php',5992],['lib','adminlib.php',6043],['lib','adminlib.php',6099],['lib','adminlib.php',6328],['lib','adminlib.php',6508],['lib','adminlib.php',6688],['lib','adminlib.php',6782],['lib','adminlib.php',6931],['lib','adminlib.php',7088],['lib','adminlib.php',7712],['lib','adminlib.php',8147],['lib','adminlib.php',8330],['lib','adminlib.php',8617],['lib','adminlib.php',8764],['lib','adminlib.php',8924],['lib','adminlib.php',9071],['lib','adminlib.php',9235],['lib','adminlib.php',9428],['lib','adminlib.php',9482],['lib','adminlib.php',9544],['lib','adminlib.php',9589],['lib','adminlib.php',9626],['backup/cc/cc_lib','cc_organization.php',47],['backup/cc/cc_lib','cc_organization.php',145],['lib/phpexcel/PHPExcel/Chart','DataSeriesValues.php',81],['lib/horde/framework/Horde/Mail/Rfc822','Identification.php',34],['question/type/numerical','questiontype.php',507],['auth/mnet','auth.php',35],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',68],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',29],['auth/imap','auth.php',35],['tag/classes/output','taglist.php',54],['lib','pdflib.php',161],['lib/phpexcel/PHPExcel/RichText','TextElement.php',35],['lib/dml','database_column_info.php',112],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportExtension.php',33],['mod/wiki/editors','wikieditor.php',36],['lib/lessphp/SourceMap','Base64VLQ.php',67],['repository/s3','lib.php',44],['admin/tool/uploadcourse/classes','course.php',111],['lib/google/src/Google/Service','Replicapoolupdater.php',51],['lib/horde/framework/Horde/Imap/Client/Data/Format','Date.php',25],['lib/bennu','iCalendar_components.php',21],['lib/bennu','iCalendar_components.php',333],['lib/bennu','iCalendar_components.php',355],['lib/bennu','iCalendar_components.php',433],['lib/bennu','iCalendar_components.php',513],['lib/bennu','iCalendar_components.php',551],['lib/bennu','iCalendar_components.php',602],['lib/bennu','iCalendar_components.php',659],['lib/bennu','iCalendar_components.php',679],['lib/phpexcel/PHPExcel/Calculation','FormulaToken.php',102],['mod/feedback/item','feedback_item_class.php',28],['lib/adodb/drivers','adodb-mssql_n.inc.php',245],['lib','badgeslib.php',133],['lib/pear/HTML/QuickForm','text.php',38],['lib/simplepie/library/SimplePie','Enclosure.php',219],['calendar/classes','rrule_manager.php',182],['auth/webservice','auth.php',35],['lib','outputrequirementslib.php',171],['mod/lti/service/toolsettings/classes/local/resource','contextsettings.php',44],['lib','questionlib.php',1261],['lib','questionlib.php',1505],['lib','uploadlib.php',40],['lib/spout/src/Spout/Writer/Common/Helper','ZipHelper.php',28],['lib/google/src/Google/Service','Cloudsearch.php',40],['backup/util/structure','backup_nested_element.class.php',44],['lib/spout/src/Spout/Writer/Common','Sheet.php',39],['question/behaviour','behaviourbase.php',50],['blocks/rss_client/classes/output','footer.php',47],['lib/dtl','file_xml_database_importer.php',34],['admin/roles/classes','capability_table_with_risks.php',45],['lib/adodb/drivers','adodb-mssql.inc.php',110],['lib/adodb/drivers','adodb-mssql.inc.php',870],['lib/adodb/drivers','adodb-mssql.inc.php',1077],['lib/google/src/Google/Service','Bigquery.php',62],['lib/google/src/Google/Service','ShoppingContent.php',50],['mod/lti','OAuth.php',73],['mod/lti','OAuth.php',89],['mod/lti','OAuth.php',244],['mod/lti','OAuth.php',499],['repository/equella','lib.php',42],['lib/phpexcel/PHPExcel/Worksheet','PageMargins.php',80],['backup/cc/cc_lib','cc_converter_quiz.php',33],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',60],['lib/phpexcel/PHPExcel/Shared/trend','polynomialBestFitClass.php',199],['backup/util/helper','restore_decode_processor.class.php',47],['backup/util/helper','restore_decode_processor.class.php',182],['cache/classes','helper.php',90],['lib/simplepie/library/SimplePie','Credit.php',81],['lib/classes','chart_series.php',62],['lib/classes/dml','recordset_walk.php',64],['lib/google/src/Google/Service','Webmasters.php',47],['lib/tcpdf/include/barcodes','qrcode.php',631],['backup/moodle2','backup_settingslib.php',42],['backup/moodle2','backup_settingslib.php',138],['lib/spout/src/Spout/Writer/XLSX/Helper','SharedStringsHelper.php',40],['course/tests/fixtures','course_capability_assignment.php',60],['mod/forum/classes','subscriber_selector_base.php',53],['lib','blocklib.php',54],['lib','blocklib.php',152],['report/loglive/classes','table_log.php',50],['lib','navigationlib.php',147],['lib','navigationlib.php',1015],['lib','navigationlib.php',2825],['lib','navigationlib.php',3086],['lib','navigationlib.php',3412],['lib','navigationlib.php',3459],['lib','navigationlib.php',4888],['lib','navigationlib.php',5070],['lib/phpexcel/PHPExcel/Shared/JAMA','CholeskyDecomposition.php',41],['grade/report/history/classes/output','user_button.php',40],['user/filters','courserole.php',34],['lib/phpexcel/PHPExcel','IOFactory.php',69],['lib/lessphp/Tree','Color.php',15],['lib/phpexcel/PHPExcel/Worksheet','MemoryDrawing.php',70],['lib/adodb/drivers','adodb-vfp.inc.php',72],['lib/horde/framework/Horde/Support','Backtrace.php',20],['lib/google/src/Google/Service','Clouddebugger.php',50],['lib/horde/framework/Horde/Exception','NotFound.php',15],['admin/tool/lp/classes/output','user_competency_course_navigation.php',55],['lib/lessphp/Tree','UnicodeDescriptor.php',14],['lib/phpexcel/PHPExcel/Worksheet','PageSetup.php',277],['grade/report/singleview/classes/local/ui','bulk_insert.php',40],['lib','mathslib.php',45],['lib/filestorage','tgz_extractor.php',119],['lib/horde/framework/Horde/Imap/Client/Interaction/Command','Continuation.php',42],['lib/horde/framework/Horde/Imap/Client','Exception.php',247],['filter/emoticon/tests','filter_test.php',68],['mnet/xmlrpc','xmlparser.php',15],['lib/spout/src/Spout/Reader/XLSX','Sheet.php',31],['admin/roles/classes','capability_table_base.php',51],['lib/simplepie/library/SimplePie','Item.php',82],['lib/form','selectgroups.php',57],['auth/shibboleth','auth.php',38],['admin/tool/langimport/classes','controller.php',48],['lib/form','warning.php',49],['lib/filestorage','stored_file.php',63],['grade/grading/form/guide','guideeditor.php',49],['lib/pear/HTML/QuickForm','group.php',80],['backup/moodle2','restore_subplugin.class.php',45],['grade/export','lib.php',60],['grade/export','lib.php',625],['lib/phpexcel/PHPExcel/Style','NumberFormat.php',98],['backup/moodle2','backup_section_task.class.php',40],['lib/htmlpurifier/HTMLPurifier','Config.php',100],['lib','flickrlib.php',53],['mod/assign/classes/output','grading_app.php',59],['grade/report/singleview/classes/local/ui','grade_attribute_format.php',47],['user/profile/field/menu','field.class.php',39],['lib/spout/src/Spout/Writer/Common/Internal','AbstractWorkbook.php',30],['lib/portfolio','exporter.php',113],['lib','ddllib.php',80],['lib','ddllib.php',93],['lib','ddllib.php',107],['lib','ddllib.php',126],['lib','ddllib.php',140],['lib/horde/framework/Horde/Crypt','Blowfish.php',54],['lib/horde/framework/Horde','Secret.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef','Integer.php',36],['lib/classes/update','info.php',48],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','ValidatorAtom.php',31],['lib/lessphp/Tree','Anonymous.php',21],['admin/tool/lp/classes','course_competencies_form_element.php',43],['lib/lessphp/Tree','Comment.php',17],['auth/cas/CAS/CAS','OutOfSequenceBeforeAuthenticationCallException.php',47],['question/type/calculatedsimple','edit_calculatedsimple_form.php',72],['lib/adodb/drivers','adodb-mysql.inc.php',54],['lib/adodb/drivers','adodb-mysql.inc.php',717],['lib/adodb/drivers','adodb-mysql.inc.php',880],['enrol/ldap','lib.php',43],['mod/quiz/report/statistics','statistics_table.php',45],['lib/form','listing.php',68],['lib/google/src/Google/Service','Container.php',43],['mod/quiz','accessmanager.php',45],['lib/classes/message/inbound','processing_failed_exception.php',36],['blocks/online_users/classes','fetcher.php',45],['lib/pear/HTML/QuickForm','checkbox.php',48],['auth/cas/CAS/CAS','OutOfSequenceBeforeProxyException.php',48],['mod/lti/service/toolproxy/classes/local/service','toolproxy.php',41],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','URI.php',15],['lib/classes','chart_axis.php',65],['mod/glossary/classes','entry_query_builder.php',83],['mod/feedback/item/label','lib.php',26],['lib/adodb/drivers','adodb-mssqlnative.inc.php',131],['lib/adodb/drivers','adodb-mssqlnative.inc.php',847],['lib/adodb/drivers','adodb-mssqlnative.inc.php',1099],['lib/horde/framework/Horde/Imap/Client','Ids.php',78],['lib/form','editor.php',62],['lib','environmentlib.php',1258],['mod/workshop','fileinfolib.php',43],['mod/workshop','fileinfolib.php',198],['mod/feedback/classes','templates_table.php',39],['tag/classes','manage_table.php',44],['lib/adodb/drivers','adodb-odbc_db2.inc.php',115],['lib/adodb/drivers','adodb-odbc_db2.inc.php',309],['backup/cc/cc_lib/gral_lib','cssparser.php',21],['lib/horde/framework/Horde/Support','Array.php',21],['lib/google/src/Google/Service','GroupsMigration.php',40],['admin/tool/lp/classes/output','user_evidence_list_page.php',61],['lib/google/src/Google/Service','Audit.php',39],['lib/simplepie/library/SimplePie','File.php',68],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',62],['enrol/lti/classes','manage_table.php',62],['lib/simplepie/library/SimplePie/Content/Type','Sniffer.php',69],['question/type','questionbase.php',124],['question/type','questionbase.php',438],['question/type','questionbase.php',531],['question/type','questionbase.php',750],['question/type','questionbase.php',835],['question/type','questionbase.php',868],['question/type','questionbase.php',914],['question/type','questionbase.php',1013],['question/type/ddimageortext','question.php',64],['question/type/ddimageortext','question.php',122],['lib','excellib.class.php',47],['lib','excellib.class.php',155],['lib','excellib.class.php',456],['lib/minify/lib','CSSmin.php',43],['lib/dml','moodle_temptables.php',51],['lib/minify/lib/Minify/Cache','ZendPlatform.php',23],['backup/util/xml/parser','progressive_parser.class.php',79],['backup/util/xml/parser','progressive_parser.class.php',305],['blocks/rss_client/classes/output','block.php',47],['question/type/ddmarker','question.php',417],['question/type/ddmarker','question.php',469],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Percentage.php',18],['admin/tool/lp/classes/output','user_competency_summary_in_course.php',51],['backup/util/helper','convert_helper.class.php',378],['lib/classes/update','validator.php',265],['lib/lessphp/Tree','Attribute.php',16],['admin/tool/generator/classes','backend.php',84],['backup/util/loggers','file_logger.class.php',35],['lib/adodb','adodb-exceptions.inc.php',30],['lib/google/src/Google','Client.php',70],['user/filters','profilefield.php',36],['backup/util/helper','restore_inforef_parser_processor.class.php',37],['cache/tests/fixtures','lib.php',326],['mod/lti/service/profile/classes/local/resource','profile.php',43],['competency/classes','invalid_persistent_exception.php',38],['backup/util/plan','backup_plan.class.php',36],['backup/util/plan','backup_plan.class.php',130],['lib/phpexcel/PHPExcel/Writer/Excel2007','WriterPart.php',63],['backup/util/settings','setting_dependency.class.php',68],['backup/util/settings','setting_dependency.class.php',175],['backup/util/settings','setting_dependency.class.php',328],['backup/util/settings','setting_dependency.class.php',439],['backup/util/settings','setting_dependency.class.php',465],['backup/util/settings','setting_dependency.class.php',491],['backup/util/settings','setting_dependency.class.php',556],['backup/util/xml','xml_writer.class.php',57],['backup/util/xml','xml_writer.class.php',284],['enrol/imsenterprise','locallib.php',38],['enrol/imsenterprise','locallib.php',115],['lib/dml','moodle_database.php',139],['search/classes','base.php',69],['admin/tool/lp/classes/output','competency_summary.php',54],['lib','upgradelib.php',45],['lib','upgradelib.php',61],['lib','upgradelib.php',76],['lib','upgradelib.php',94],['lib','upgradelib.php',111],['lib/htmlpurifier/HTMLPurifier/AttrTransform','NameSync.php',11],['mod/workshop/form/rubric','lib.php',105],['grade','lib.php',103],['grade','lib.php',927],['grade','lib.php',1089],['grade','lib.php',2053],['grade','lib.php',2213],['lib/horde/framework/Horde/Imap/Client/Data','Acl.php',32],['lib/phpexcel/PHPExcel/Reader/Excel5','RC4.php',35],['lib/google/src/Google/Service','Datastore.php',46],['admin/tool/lpmigrate/classes','framework_processor.php',98],['lib/dtl','database_importer.php',61],['lib/horde/framework/Horde/Imap/Client/Password','Xoauth2.php',44],['badges/lib','awardlib.php',55],['backup/util/helper','backup_array_iterator.class.php',39],['admin/tool/monitor/classes','subscription.php',43],['question/type/calculated','edit_calculated_form.php',51],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','FileBasedStrategy.php',57],['lib/form','datetimeselector.php',72],['lib/horde/framework/Horde/Imap/Client','Base.php',153],['lib/classes','collator.php',58],['admin/tool/lp/classes','course_competency_statistics.php',48],['lib/google/src/Google/Service','Storage.php',57],['lib/spout/src/Spout/Reader/CSV','SheetIterator.php',28],['lib/lessphp/Tree','Paren.php',14],['mod/lti/classes','service_exception_handler.php',63],['lib/tcpdf/include/barcodes','pdf417.php',523],['mod/assign/feedback/offline','importgradeslib.php',66],['lib/filestorage','file_exceptions.php',36],['lib/filestorage','file_exceptions.php',57],['lib/filestorage','file_exceptions.php',89],['lib/filestorage','file_exceptions.php',108],['lib/filestorage','file_exceptions.php',129],['lib/horde/framework/Horde/Mail/Transport','Smtp.php',100],['lib/htmlpurifier/HTMLPurifier/ConfigSchema/Interchange','Id.php',17],['question/engine/upgrade','upgradelib.php',283],['question/engine/upgrade','upgradelib.php',384],['question/type/numerical','question.php',323],['lib/pear/PEAR','Exception.php',107],['course/format','renderer.php',44],['lib/dml','oci_native_moodle_recordset.php',34],['question/behaviour','behaviourtypebase.php',133],['lib/pear/HTML','QuickForm.php',246],['lib/pear/HTML','QuickForm.php',1979],['backup/util/structure','base_atom.class.php',41],['backup/util/structure','base_atom.class.php',114],['backup/util/structure','base_atom.class.php',135],['backup/util/structure','base_atom.class.php',156],['lib/horde/framework/Horde/Imap/Client/Data','BaseSubject.php',39],['lib/google/src/Google/Auth','LoginTicket.php',37],['lib/adodb/drivers','adodb-csv.inc.php',41],['lib/adodb/drivers','adodb-csv.inc.php',196],['user/filters','yesno.php',33],['mod/wiki/parser','parser.php',98],['lib/htmlpurifier/HTMLPurifier/Token','Comment.php',19],['lib/phpexcel/PHPExcel/Calculation','FormulaParser.php',87],['backup/cc/cc_lib','cc_assesment_truefalse.php',27],['lib/htmlpurifier/HTMLPurifier','Encoder.php',10],['admin/tool/lpmigrate/classes/form','migrate_framework.php',45],['backup/util/xml/parser/tests','parser_test.php',797],['lib/htmlpurifier/HTMLPurifier/AttrTransform','EnumToCSS.php',34],['lib/tests','medialib_test.php',644],['lib/google/src/Google/Service','QPXExpress.php',39],['tag/classes/output','tagname.php',41],['lib/mustache/src/Mustache','Context.php',20],['lib/adodb/drivers','adodb-oracle.inc.php',32],['lib/adodb/drivers','adodb-oracle.inc.php',224],['backup/moodle2','restore_section_task.class.php',42],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Composite.php',25],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Nofollow.php',16],['mod/forum/classes/output','forum_post.php',110],['admin/tool/assignmentupgrade','locallib.php',50],['admin/tool/assignmentupgrade','locallib.php',93],['repository/googledocs','lib.php',65],['cache/stores/memcache','lib.php',120],['lib/filestorage','file_storage.php',78],['admin/tool/monitor/classes/output/managerules','renderable.php',56],['mod/lti/service/toolsettings/classes/local/resource','linksettings.php',45],['lib/form','duration.php',55],['lib','outputlib.php',480],['lib','outputlib.php',2038],['filter/tex','latex.php',13],['backup/moodle2','backup_course_task.class.php',39],['lib/adodb','adodb.inc.php',310],['lib/adodb','adodb.inc.php',3035],['lib/adodb','adodb.inc.php',3160],['lib/adodb','adodb.inc.php',3242],['lib/adodb','adodb.inc.php',4353],['lib/horde/framework/Horde/Support','Randomid.php',26],['lib/google/src/Google/Logger','File.php',51],['admin/roles/classes','allow_role_page.php',37],['mod/quiz/report/overview','overview_table.php',41],['lib/lessphp/Tree','Keyword.php',17],['lib/htmlpurifier/HTMLPurifier/Node','Comment.php',19],['question/type/ddmarker','questiontype.php',48],['mod/folder','renderer.php',159],['lib','portfoliolib.php',101],['tag/classes/output','tagcollsearchable.php',40],['webservice/soap/classes','wsdl.php',88],['lib/lessphp/Exception','Parser.php',30],['badges','renderer.php',973],['badges','renderer.php',1014],['badges','renderer.php',1078],['badges','renderer.php',1111],['badges','renderer.php',1137],['competency/classes/external','exporter.php',56],['mod/lti/service/toolproxy/classes/local/resource','toolproxy.php',47],['lib/google/src/Google/Service','Genomics.php',63],['lib/phpexcel/PHPExcel/Writer','PDF.php',38],['lib/phpexcel/PHPExcel/Shared/trend','exponentialBestFitClass.php',125],['lib/google/src/Google/Service','Games.php',60],['backup/converter/moodle1','lib.php',725],['backup/converter/moodle1','lib.php',865],['backup/converter/moodle1','lib.php',1145],['backup/converter/moodle1','lib.php',1190],['backup/converter/moodle1','lib.php',1480],['backup/util/helper','restore_logs_processor.class.php',45],['backup/util/helper','restore_logs_processor.class.php',141],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Input.php',14],['lib/google/src/Google/Service','Licensing.php',40],['mod/workshop/form/comments','lib.php',99],['backup/util/settings/section','section_backup_setting.class.php',25],['lib/htmlpurifier/HTMLPurifier','Doctype.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Font.php',22],['lib/google/src/Google/Service','Fitness.php',58],['blocks/private_files','renderer.php',83],['lib/phpexcel/PHPExcel/Worksheet','ColumnCellIterator.php',51],['enrol/flatfile','adminlib.php',35],['lib/xmldb','xmldb_object.php',55],['lib/google/src/Google/Service','Reports.php',47],['question/classes/statistics/responses','analysis_for_actual_response.php',70],['auth/pam','auth.php',53],['lib/horde/framework/Horde','Stream.php',50],['comment','lib.php',100],['lib/htmlpurifier/HTMLPurifier','URIParser.php',10],['lib/htmlpurifier/HTMLPurifier/Node','Text.php',35],['lib/phpexcel/PHPExcel/Worksheet','RowDimension.php',53],['lib/google/src/Google/Service','Gmail.php',64],['lib/google/src/Google/Service','Taskqueue.php',44],['lib/minify/lib/Minify','ImportProcessor.php',48],['lib/horde/framework/Horde/Mime','Related.php',32],['blocks','moodleblock.class.php',111],['lib/tcpdf','tcpdf_parser.php',92],['backup/util/plan','restore_structure_step.class.php',46],['blocks/rss_client/classes/output','channel_image.php',61],['lib/pear/HTML/QuickForm','hierselect.php',105],['question/type/numerical/tests','form_test.php',40],['badges/lib','backpacklib.php',40],['mod/workshop/allocation/manual','lib.php',51],['mod/quiz/report/responses','last_responses_table.php',39],['lib/simplepie','autoloader.php',62],['lib/spout/src/Spout/Common/Helper','StringHelper.php',21],['lib/phpexcel/PHPExcel/Worksheet','BaseDrawing.php',121],['lib/pear/Crypt','CHAP.php',82],['lib/pear/Crypt','CHAP.php',170],['lib/pear/Crypt','CHAP.php',424],['lib/spout/src/Spout/Writer/Common/Helper','AbstractStyleHelper.php',22],['backup/util/xml/parser/processors','progressive_parser_processor.class.php',57],['mod/quiz/classes/question','qubaids_for_users_attempts.php',37],['lib/spout/src/Spout/Reader/XLSX','RowIterator.php',63],['lib/phpexcel/PHPExcel/Reader/Excel5','Escher.php',77],['lib/simplepie/library/SimplePie','gzdecode.php',186],['mod/wiki','renderer.php',540],['lib/adodb','adodb-active-recordx.inc.php',138],['availability/classes','result.php',46],['lib','accesslib.php',5352],['lib','accesslib.php',5897],['lib','accesslib.php',6167],['lib','accesslib.php',6408],['lib','accesslib.php',6595],['lib','accesslib.php',6827],['lib','accesslib.php',7049],['lib','accesslib.php',7291],['lib/phpexcel/PHPExcel/Shared/OLE','PPS.php',110],['grade/grading/form','lib.php',82],['grade/grading/form','lib.php',766],['question/engine','questionusage.php',78],['question/engine','questionusage.php',973],['auth/manual','auth.php',46],['question/engine/upgrade','behaviourconverters.php',78],['mod/wiki/diff','diff_nwiki.php',35],['mod/wiki/diff','diff_nwiki.php',50],['mod/wiki/diff','diff_nwiki.php',63],['mod/wiki/diff','diff_nwiki.php',76],['mod/wiki/diff','diff_nwiki.php',495],['mod/wiki/diff','diff_nwiki.php',640],['mod/wiki/diff','diff_nwiki.php',850],['mod/wiki/diff','diff_nwiki.php',901],['mod/wiki/diff','diff_nwiki.php',953],['lib/adodb/drivers','adodb-proxy.inc.php',28],['lib/classes/lock','file_lock_factory.php',57],['lib/google/src/Google/Auth','OAuth2.php',55],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Pixels.php',17],['lib/filebrowser','file_info_context_module.php',47],['auth/none','auth.php',34],['lib/simplepie/library/SimplePie/Cache','Base.php',70],['lib/htmlpurifier/HTMLPurifier','Queue.php',24],['lib/horde/framework/Horde/Text','Flowed.php',75],['admin/tool/log/store/legacy/classes/log','store.php',33],['lib/mustache/src/Mustache','HelperCollection.php',19],['backup/util/structure','backup_structure_processor.class.php',45],['backup/util/structure','backup_structure_processor.class.php',133],['admin/tool/lp/classes/output','related_competencies.php',47],['mod/quiz/classes/question/bank','custom_view.php',44],['files','renderer.php',1083],['lib/form','text.php',47],['lib/phpexcel/PHPExcel/Shared/trend','bestFitClass.php',398],['backup/cc','cc112moodle.php',59],['admin/tool/cohortroles/classes/output','cohort_role_assignments_table.php',45],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',46],['lib/google/src/Google/Service','Logging.php',39],['lib/lessphp/Tree','Expression.php',16],['mod/lti/classes/local/ltiservice','service_base.php',63],['lib/phpexcel/PHPExcel/Reader','HTML.php',118],['search/engine/solr/classes','schema.php',60],['backup/util/xml/parser/processors','simplified_parser_processor.class.php',46],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',50],['lib/adodb/drivers','adodb-ado5.inc.php',42],['lib/adodb/drivers','adodb-ado5.inc.php',380],['mod/assign/feedback/editpdf/classes','comment.php',58],['cache/classes','interfaces.php',473],['lib/phpexcel/PHPExcel/Worksheet','Protection.php',157],['repository/merlot','lib.php',37],['lib/adodb/drivers','adodb-firebird.inc.php',69],['backup/util/settings','backup_setting.class.php',43],['lib/adodb/drivers','adodb-fbsql.inc.php',28],['lib/adodb/drivers','adodb-fbsql.inc.php',167],['mnet/xmlrpc','serverlib.php',674],['webservice/soap','lib.php',45],['admin/tool/log/store/database/classes/log','store.php',47],['lib/google/src/Google/Service','Doubleclicksearch.php',43],['lib/form','passwordunmask.php',46],['lib/lessphp/Tree','Variable.php',20],['report/log/classes','renderable.php',96],['mod/lti/service/toolsettings/classes/local/resource','systemsettings.php',43],['question/classes/bank','view.php',70],['grade/report/singleview/classes/local/ui','range.php',38],['lib/simplepie/library/SimplePie/Cache','MySQL.php',80],['admin/roles/classes','define_role_table_basic.php',31],['backup/cc/cc_lib','cc_converter_resource.php',28],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',78],['blocks/rss_client','editfeed.php',36],['admin/tool/lpmigrate/classes/output','migrate_framework_results.php',55],['blocks/lp/classes/output','competencies_to_review_page.php',49],['lib/horde/framework/Horde/Crypt/Blowfish/Php','Base.php',318],['backup/util/loggers','base_logger.class.php',42],['backup/util/loggers','base_logger.class.php',187],['mod/assign/feedback/file','renderable.php',44],['backup/cc/cc_lib','cc_utils.php',313],['backup/cc/cc_lib','cc_utils.php',381],['backup/cc/cc_lib','cc_utils.php',437],['lib/adodb/drivers','adodb-db2.inc.php',66],['lib/adodb/drivers','adodb-db2.inc.php',731],['lib/adodb','adodb-xmlschema03.inc.php',136],['lib/adodb','adodb-xmlschema03.inc.php',270],['lib/adodb','adodb-xmlschema03.inc.php',678],['lib/adodb','adodb-xmlschema03.inc.php',823],['lib/adodb','adodb-xmlschema03.inc.php',1081],['lib/adodb','adodb-xmlschema03.inc.php',1399],['repository/youtube','lib.php',58],['lib/phpexcel/PHPExcel/Writer/PDF','mPDF.php',38],['auth/cas/CAS/CAS','GracefullTerminationException.php',48],['lib/adodb/drivers','adodb-sybase_ase.inc.php',25],['lib/adodb/drivers','adodb-sybase_ase.inc.php',115],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Background.php',20],['lib/adodb','adodb-memcache.lib.inc.php',53],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','FrameTarget.php',19],['lib/phpexcel/PHPExcel/Writer','Excel2007.php',118],['lib/minify/lib/MrClay/Cli','Arg.php',82],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter','Column.php',117],['lib/simplepie','moodle_simplepie.php',50],['lib/simplepie','moodle_simplepie.php',121],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','FontFamily.php',11],['lib/simplepie/library/SimplePie/Decode/HTML','Entities.php',80],['lib/spout/src/Spout/Common/Helper','FileSystemHelper.php',22],['lib/pear/HTML/QuickForm','button.php',37],['lib/google/src/Google/Service','Autoscaler.php',46],['lib/mustache/src/Mustache','Engine.php',63],['lib/google/src/Google/Http','MediaFileUpload.php',75],['lib/phpexcel/PHPExcel','Worksheet.php',327],['mod/assign','gradingtable.php',68],['lib/google/src/Google/Service','AdExchangeSeller.php',53],['question/engine/tests','helpers.php',582],['question/engine/tests','helpers.php',594],['question/engine/tests','helpers.php',608],['question/engine/tests','helpers.php',623],['question/engine/tests','helpers.php',637],['question/engine/tests','helpers.php',652],['question/engine/tests','helpers.php',665],['question/engine/tests','helpers.php',676],['question/engine/tests','helpers.php',1196],['repository/webdav','lib.php',38],['tag/classes/output','tagisstandard.php',39],['lib/google/src/Google/Service','Appsactivity.php',52],['badges/criteria','award_criteria_course.php',47],['lib','searchlib.php',53],['lib','searchlib.php',95],['lib/lessphp/Output','Mapped.php',39],['availability/classes','tree.php',118],['lib/lessphp/Tree','Javascript.php',20],['lib/horde/framework/Horde/Imap/Client','Cache.php',53],['lib/htmlpurifier/HTMLPurifier','AttrCollections.php',16],['lib/mustache/src/Mustache/Loader','InlineLoader.php',56],['repository/url','lib.php',46],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite3.php',293],['lib/lessphp/Tree','Ruleset.php',45],['tag/classes/output','tagindex.php',52],['backup/util/ui','backup_ui_stage.class.php',43],['backup/util/ui','backup_ui_stage.class.php',79],['backup/util/ui','backup_ui_stage.class.php',234],['backup/util/ui','backup_ui_stage.class.php',387],['backup/util/ui','backup_ui_stage.class.php',516],['backup/util/ui','backup_ui_stage.class.php',575],['grade/report/singleview/classes/local/screen','screen.php',67],['lib/tcpdf/include/barcodes','datamatrix.php',229],['lib/horde/framework/Horde/Imap/Client/Socket','Catenate.php',37],['lib/google/src/Google/Service','Prediction.php',51],['lib/classes/output','notification.php',101],['lib/lessphp/Tree','Unit.php',16],['backup/util/settings/course','course_backup_setting.class.php',25],['lib/spout/src/Spout/Writer','AbstractWriter.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','DenyElementDecorator.php',21],['lib','outputfactories.php',120],['lib','outputfactories.php',367],['lib','dtllib.php',66],['mod/assign','assignmentplugin.php',50],['mnet/service/enrol','locallib.php',48],['mnet/service/enrol','locallib.php',466],['mnet/service/enrol','locallib.php',537],['backup/cc/cc_lib','cc_version11.php',57],['availability/condition/completion/classes','condition.php',48],['admin/roles/classes','allow_override_page.php',31],['mod/workshop/allocation','lib.php',103],['lib/htmlpurifier/HTMLPurifier/AttrTransform','BoolToCSS.php',24],['lib/horde/framework/Horde/Imap/Client/Base','Mailbox.php',59],['lib/spout/src/Spout/Reader/Wrapper','SimpleXMLElement.php',23],['lib/google/src/Google/Service','SiteVerification.php',43],['lib/phpexcel/PHPExcel/Calculation','Function.php',64],['availability/classes','capability_checker.php',49],['lib/google/src/Google/Service','Drive.php',76],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',12],['lib/phpexcel/PHPExcel/Shared/JAMA','LUDecomposition.php',56],['lib','setuplib.php',67],['lib','setuplib.php',113],['lib','setuplib.php',165],['lib','setuplib.php',184],['lib','setuplib.php',199],['lib','setuplib.php',219],['lib','setuplib.php',249],['lib','setuplib.php',271],['lib','setuplib.php',287],['lib','setuplib.php',309],['lib','setuplib.php',328],['lib','setuplib.php',346],['lib/form','textarea.php',50],['webservice/soap','locallib.php',57],['availability/classes','info.php',55],['lib/tcpdf','tcpdf_barcodes_1d.php',58],['lib/spout/src/Spout/Reader/XLSX/Helper','SheetHelper.php',49],['filter/urltolink/tests','filter_test.php',209],['lib/simplepie/library/SimplePie','Category.php',81],['admin/tool/lp/classes/output','manage_competencies_page.php',65],['lib/markdown','Markdown.php',99],['mod/assign','locallib.php',160],['mod/assign','locallib.php',8131],['lib/adodb/drivers','adodb-ldap.inc.php',48],['lib/adodb/drivers','adodb-ldap.inc.php',297],['lib/editor/tinymce/plugins/spellchecker/classes/utils','JSON.php',32],['lib/editor/tinymce/plugins/spellchecker/classes/utils','JSON.php',373],['lib','odslib.class.php',42],['lib','odslib.class.php',124],['lib','odslib.class.php',422],['lib','odslib.class.php',827],['lib/horde/framework/Horde/Crypt/Blowfish','Base.php',56],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',36],['grade/report/singleview/classes/local/ui','checkbox_attribute.php',42],['lib/lessphp/Tree','Quoted.php',20],['mod/lesson','mod_form.php',36],['blocks/rss_client/classes/output','item.php',89],['lib/google/src/Google/Service','IdentityToolkit.php',38],['lib/horde/framework/Horde/Stream','Temp.php',25],['tag/classes/output','tagflag.php',39],['admin/tool/monitor/classes/output/managesubs','rules.php',56],['lib/htmlpurifier/HTMLPurifier/ChildDef','Table.php',57],['lib/behat/form_field','behat_form_field.php',59],['lib/phpexcel/PHPExcel/Worksheet/Drawing','Shadow.php',93],['lib/spout/src/Spout/Reader/ODS/Helper','CellValueFormatter.php',42],['tag/classes','collections_table.php',36],['lib/google/src/Google/Service','Spectrum.php',38],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Length.php',19],['admin/tool/lp/classes/output','user_competency_summary.php',49],['lib/phpexcel/PHPExcel','NamedRange.php',65],['lib/pear/HTML/QuickForm','image.php',36],['lib/htmlpurifier/HTMLPurifier/AttrDef/URI','Host.php',15],['lib/form','searchableselector.php',44],['lib/phpexcel/PHPExcel/Shared/JAMA','SingularValueDecomposition.php',52],['lib/adodb/drivers','adodb-oci805.inc.php',51],['lib/google/src/Google','Service.php',28],['lib/google/src/Google/IO','Abstract.php',50],['lib/spout/src/Spout/Writer/ODS/Internal','Worksheet.php',46],['lib/form','header.php',45],['question/type/randomsamatch/tests','helper.php',121],['mod/workshop/form/accumulative','lib.php',99],['lib/phpexcel/PHPExcel/Shared/trend','linearBestFitClass.php',89],['lib/form','submit.php',41],['report/log/classes','table_log.php',45],['admin/roles/classes','admins_potential_selector.php',30],['question/classes/engine/variants','least_used_strategy.php',51],['question/engine/upgrade','logger.php',42],['question/engine/upgrade','logger.php',87],['mod/data','lib.php',68],['mod/data','lib.php',2278],['mod/data','lib.php',2552],['mod/data','lib.php',2573],['backup/util/xml/parser/processors','grouped_parser_processor.class.php',67],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportPop3.php',26],['mod/scorm','renderer.php',129],['lib/phpunit/classes','advanced_testcase.php',45],['lib/spout/src/Spout/Reader/ODS','SheetIterator.php',41],['backup/cc/cc_lib','cc_version1.php',57],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','LinkTypes.php',21],['tag/classes','areas_table.php',36],['lib/phpexcel/PHPExcel/Shared/trend','powerBestFitClass.php',125],['lib/portfolio/formats/leap2a','lib.php',62],['lib/portfolio/formats/leap2a','lib.php',258],['lib/portfolio/formats/leap2a','lib.php',503],['lib/google/src/Google/Service','Proximitybeacon.php',42],['lib/pear','PEAR.php',139],['lib/pear','PEAR.php',818],['competency/classes/external','persistent_exporter.php',42],['lib/google/src/Google/Service','Groupssettings.php',40],['lib/phpexcel/PHPExcel/Reader','CSV.php',87],['lib/horde/framework/Horde/Exception','LastError.php',16],['lib/google/src/Google/Service','Directory.php',134],['lib/google/src/Google/Service','Fusiontables.php',48],['question/type/missingtype','edit_missingtype_form.php',38],['lib/google/src/Google/Service','AdSenseHost.php',49],['lib/lessphp/Tree','Directive.php',20],['auth/ldap','auth.php',119],['auth/cas/CAS/CAS','CookieJar.php',46],['lib/phpexcel/PHPExcel/CachedObjectStorage','Wincache.php',245],['availability/condition/date/classes','condition.php',52],['lib/horde/framework/Horde/Mime','Mail.php',93],['lib','outputactions.php',60],['lib','outputactions.php',91],['lib','outputactions.php',148],['lib/horde/framework/Horde/Crypt/Blowfish','Mcrypt.php',47],['lib/classes','string_manager_standard.php',53],['repository/skydrive','microsoftliveapi.php',50],['user/filters','globalrole.php',35],['enrol/lti/ims-blti','OAuth.php',16],['enrol/lti/ims-blti','OAuth.php',32],['enrol/lti/ims-blti','OAuth.php',187],['enrol/lti/ims-blti','OAuth.php',451],['course/classes/output','course_module_name.php',46],['lib/google/src/Google/Service','Plus.php',52],['lib/horde/framework/Horde/Mime','Mdn.php',35],['lib/pear/HTML/QuickForm','html.php',36],['repository/s3','S3.php',193],['repository/s3','S3.php',2018],['repository/s3','S3.php',2374],['lib/spout/src/Spout/Reader/XLSX/Helper','SharedStringsHelper.php',39],['question/classes/bank/search','hidden_condition.php',42],['lib/htmlpurifier/HTMLPurifier/ChildDef','Empty.php',22],['lib/pear/HTML/QuickForm','element.php',73],['question/classes/statistics/responses','analysis_for_subpart.php',50],['admin/tool/log/classes','setting_managestores.php',30],['lib/google/src/Google/Service','Mirror.php',49],['lib/adodb/drivers','adodb-db2ora.inc.php',80],['lib/minify/lib/HTTP','Encoder.php',75],['mod/feedback/classes','completion.php',47],['admin/tool/uploadcourse/classes','processor.php',122],['lib/lessphp','Parser.php',78],['lib/adodb/drivers','adodb-sapdb.inc.php',36],['lib/adodb/drivers','adodb-sapdb.inc.php',179],['lib/ddl','sql_generator.php',175],['lib/google/src/Google/Service','AndroidEnterprise.php',51],['admin/tool/lp/classes/output','template_competencies_page.php',70],['lib/horde/framework/Horde/Support','ObjectStub.php',29],['mod/assignment/backup/moodle1','lib.php',223],['blocks','edit_form.php',47],['lib/simplepie/library/SimplePie/Cache','Memcache.php',81],['mod/quiz/report/statistics','statistics_question_table.php',49],['mod/workshop/form/numerrors','lib.php',102],['mod/quiz/classes','repaginate.php',49],['lib/classes/session','memcached.php',51],['lib/phpexcel/PHPExcel/Shared/OLE/PPS','Root.php',43],['lib/phpexcel/PHPExcel/Writer/PDF','Core.php',206],['mod/workshop','mod_form.php',43],['mod/assign/feedback/editpdf/fpdi','pdf_context.php',48],['availability/condition/profile/classes','condition.php',73],['lib/horde/framework/Horde/Imap/Client','DateTime.php',29],['auth/cas/CAS/CAS','Client.php',862],['lib/xhprof','xhprof_moodle.php',788],['lib/dtl','file_xml_database_exporter.php',36],['course','lib.php',3061],['lib/adodb/drivers','adodb-mssqlpo.inc.php',54],['lib/xmldb','xmldb_table.php',49],['lib/adodb/perf','perf-postgres.inc.php',92],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Filter.php',15],['question/type/ddmarker','shapes.php',40],['question/type/ddmarker','shapes.php',203],['question/type/ddmarker','shapes.php',267],['question/type/ddmarker','shapes.php',332],['question/type/ddmarker','shapes.php',470],['mod/lti/classes/local/ltiservice','response.php',58],['backup/util/helper','restore_users_parser_processor.class.php',43],['lib/pear/HTML','Common.php',79],['mod/glossary','locallib.php',481],['lib/adodb/perf','perf-mssqlnative.inc.php',70],['lib/adodb/perf','perf-mssql.inc.php',70],['backup/util/plan','base_plan.class.php',39],['backup/util/plan','base_plan.class.php',215],['backup/util/plan','restore_task.class.php',32],['backup/util/plan','restore_task.class.php',121],['lib/classes/event','base.php',124],['lib/form','checkbox.php',46],['admin/roles/classes','permissions_table.php',38],['lib/pear/HTML/QuickForm','submit.php',37],['auth/fc','auth.php',37],['enrol/ldap','settingslib.php',32],['enrol/ldap','settingslib.php',90],['enrol/ldap','settingslib.php',204],['lib/minify/lib/Minify/Cache','Memcache.php',22],['lib/lessphp/Tree','Condition.php',18],['admin/tool/lp/classes/output','plans_page.php',59],['lib/mustache/src/Mustache','Autoloader.php',19],['lib/spout/src/Spout/Writer/XLSX/Internal','Worksheet.php',52],['lib/phpexcel/PHPExcel','Comment.php',93],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','AlphaValue.php',6],['lib/lessphp/Tree','Url.php',17],['mod/lesson','override_form.php',58],['lib/form','button.php',45],['admin/tool/lp/classes/output','manage_templates_page.php',56],['lib/google/src/Google/Service','Playmoviespartner.php',44],['backup/util/ui','base_ui_stage.class.php',67],['backup/cc/cc_lib','cc_converters.php',75],['lib/dtl','database_mover.php',33],['enrol','locallib.php',125],['enrol','locallib.php',1256],['enrol','locallib.php',1379],['enrol','locallib.php',1430],['enrol','locallib.php',1463],['lib/htmlpurifier/HTMLPurifier','URI.php',58],['backup/moodle2','restore_course_task.class.php',41],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',40],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',221],['lib','xmlize.php',31],['lib','googleapi.php',52],['lib','googleapi.php',243],['grade/report/singleview/classes/local/ui','element.php',47],['lib/html2text','lib.php',43],['user/filters','lib.php',52],['user/filters','lib.php',272],['auth/cas/CAS/CAS/PGTStorage','Db.php',122],['lib/classes/lock','db_record_lock_factory.php',61],['lib/pear/HTML/QuickForm','link.php',47],['backup/cc/cc_lib','cc_asssesment.php',290],['backup/cc/cc_lib','cc_asssesment.php',345],['backup/cc/cc_lib','cc_asssesment.php',364],['backup/cc/cc_lib','cc_asssesment.php',415],['backup/cc/cc_lib','cc_asssesment.php',476],['backup/cc/cc_lib','cc_asssesment.php',486],['backup/cc/cc_lib','cc_asssesment.php',561],['backup/cc/cc_lib','cc_asssesment.php',585],['backup/cc/cc_lib','cc_asssesment.php',635],['backup/cc/cc_lib','cc_asssesment.php',668],['backup/cc/cc_lib','cc_asssesment.php',693],['backup/cc/cc_lib','cc_asssesment.php',788],['backup/cc/cc_lib','cc_asssesment.php',814],['backup/cc/cc_lib','cc_asssesment.php',838],['backup/cc/cc_lib','cc_asssesment.php',965],['backup/cc/cc_lib','cc_asssesment.php',971],['backup/cc/cc_lib','cc_asssesment.php',986],['backup/cc/cc_lib','cc_asssesment.php',1003],['backup/cc/cc_lib','cc_asssesment.php',1017],['backup/cc/cc_lib','cc_asssesment.php',1045],['backup/cc/cc_lib','cc_asssesment.php',1186],['backup/cc/cc_lib','cc_asssesment.php',1263],['backup/cc/cc_lib','cc_asssesment.php',1317],['backup/cc/cc_lib','cc_asssesment.php',1389],['backup/cc/cc_lib','cc_asssesment.php',1451],['backup/cc/cc_lib','cc_asssesment.php',1558],['backup/cc/cc_lib','cc_asssesment.php',1620],['backup/cc/cc_lib','cc_asssesment.php',1648],['backup/cc/cc_lib','cc_asssesment.php',1716],['backup/cc/cc_lib','cc_asssesment.php',2155],['backup/cc/cc_lib','cc_asssesment.php',2264],['backup/cc/cc_lib','cc_asssesment.php',2469],['lib/phpunit/classes','hint_resultprinter.php',37],['lib/horde/framework/Horde/Mail/Transport','Mail.php',53],['auth/pop3','auth.php',35],['lib/adodb/drivers','adodb-oci8.inc.php',106],['lib/adodb/drivers','adodb-oci8.inc.php',1539],['lib/adodb/drivers','adodb-oci8.inc.php',1805],['lib/classes/session','database.php',52],['backup/util/ui','restore_ui_components.php',81],['backup/util/ui','restore_ui_components.php',287],['backup/util/ui','restore_ui_components.php',382],['question/classes/bank/search','category_condition.php',60],['lib/google/src/Google/Auth','AssertionCredentials.php',53],['backup/util/plan','restore_plan.class.php',43],['backup/util/plan','restore_plan.class.php',203],['backup/util/xml/parser/processors','findpaths_parser_processor.class.php',35],['lib/phpexcel/PHPExcel/CalcEngine','Logger.php',63],['lib/jabber/XMPP','Log.php',67],['lib/horde/framework/Horde/Imap/Client/Exception','ServerResponse.php',44],['lib/lessphp/Tree','Assignment.php',15],['lib/dtl','string_xml_database_importer.php',34],['admin/tool/lp/classes/output','manage_competency_frameworks_page.php',62],['question/type/calculated','question.php',188],['question/type/calculated','question.php',303],['repository/recent','lib.php',39],['grade/report/singleview/classes/local/ui','text_attribute.php',42],['admin/webservice','lib.php',38],['lib','coursecatlib.php',194],['lib','coursecatlib.php',2782],['lib/google/src/Google/Service','Cloudtrace.php',43],['lib','filterlib.php',73],['lib','filterlib.php',377],['lib','filterlib.php',456],['lib/classes/lock','lock_factory.php',39],['lib/filebrowser','file_info_context_course.php',39],['lib/filebrowser','file_info_context_course.php',492],['lib/filebrowser','file_info_context_course.php',596],['lib/filebrowser','file_info_context_course.php',745],['enrol','renderer.php',426],['enrol','renderer.php',723],['question/classes/statistics/questions','calculated_for_subquestion.php',57],['backup/moodle2','backup_format_plugin.class.php',40],['admin/tool/lp/classes','course_competency_rule_form_element.php',45],['auth/cas/CAS/CAS','ProxyTicketException.php',46],['lib/phpunit/classes','basic_testcase.php',39],['lib/spout/src/Spout/Reader/ODS','RowIterator.php',49],['backup/util/dbops','backup_dbops.class.php',37],['admin/tool/customlang','locallib.php',44],['admin/tool/customlang','locallib.php',405],['admin/tool/customlang','locallib.php',471],['backup/util/structure','backup_optigroup_element.class.php',51],['mod/quiz/report/grading','gradingsettings_form.php',44],['backup/util/plan','restore_step.class.php',32],['backup/util/plan','restore_step.class.php',104],['lib/form','hidden.php',44],['repository/filesystem','lib.php',48],['backup/controller','backup_controller.class.php',68],['backup/controller','backup_controller.class.php',409],['backup/util/helper','restore_log_rule.class.php',62],['tag/classes','tag.php',77],['lib/htmlpurifier/HTMLPurifier/AttrTransform','SafeParam.php',27],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',38],['lib/spout/src/Spout/Writer/Style','StyleBuilder.php',19],['lib/dml','sqlsrv_native_moodle_database.php',53],['user/filters','date.php',40],['auth/nologin','auth.php',35],['lib/google/src/Google','Model.php',35],['lib/horde/framework/Horde/Imap/Client/Socket','ClientSort.php',37],['lib/horde/framework/Horde/Imap/Client/Exception','SearchCharset.php',34],['lib/horde/framework/Horde/Support','StringStream.php',30],['lib/adodb/drivers','adodb-mysqli.inc.php',66],['lib/adodb/drivers','adodb-mysqli.inc.php',887],['lib/adodb/drivers','adodb-mysqli.inc.php',1193],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ImportantDecorator.php',21],['lib/form','questioncategory.php',46],['lib/mustache/src/Mustache','Template.php',29],['backup/util/structure','base_nested_element.class.php',44],['backup/util/structure','base_nested_element.class.php',258],['lib/google/src/Google/Logger','Abstract.php',123],['backup/cc/cc_lib','cc_general.php',38],['lib/phpexcel/PHPExcel','ReferenceHelper.php',58],['lib/pear/HTML/QuickForm','password.php',37],['lib/dml','moodle_transaction.php',40],['lib/phpexcel/PHPExcel/Reader','Excel2003XML.php',53],['lib/htmlpurifier/HTMLPurifier/AttrDef','Switch.php',29],['repository/flickr','lib.php',51],['lib/form','grading.php',57],['lib/classes/update','api.php',71],['backup/cc/cc_lib','cc_converter_lti.php',29],['backup/moodle2','backup_subplugin.class.php',44],['lib/portfolio','caller.php',67],['lib/classes/progress','display_if_slow.php',60],['lib/adodb/perf','perf-informix.inc.php',66],['lib/classes','chart_base.php',52],['lib/lessphp/Tree','Media.php',18],['lib/spout/src/Spout/Common/Escaper','XLSX.php',19],['grade/export/ods','grade_export_ods.php',24],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Length.php',23],['lib/google/src/Google/Service','Calendar.php',50],['lib/form','group.php',44],['lib/phpexcel/PHPExcel/Writer','OpenDocument.php',44],['lib/pear/HTML/QuickForm/Renderer','Object.php',75],['admin/tool/lp/classes/output','user_evidence_page.php',48],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',54],['grade/export/xls','grade_export_xls.php',24],['lib/classes/output','mustache_pix_helper.php',43],['lib/horde/framework/Horde/Imap/Client/Mailbox','List.php',46],['lib/google/src/Google/Auth','ComputeEngine.php',35],['cache/stores/session','lib.php',131],['lib/mustache/src/Mustache/Logger','StreamLogger.php',44],['admin/tool/log/store/database/backup/moodle2','backup_logstore_database_nested_element.php',43],['user','renderer.php',220],['lib/htmlpurifier/HTMLPurifier/ChildDef','Required.php',23],['availability/condition/grade/classes','condition.php',46],['lib/lessphp/Tree','RulesetCall.php',14],['blocks/rss_client/classes/output','feed.php',75],['lib/form','select.php',47],['lib/htmlpurifier/HTMLPurifier','ContentSets.php',33],['lib/lessphp/Visitor','toCSS.php',13],['lib','outputfragmentrequirementslib.php',40],['backup/util/ui','restore_moodleform.class.php',34],['lib/google/src/Google/Service','Cloudbilling.php',43],['lib/google/src/Google/Service','PlusDomains.php',72],['lib','externallib.php',37],['lib','externallib.php',531],['lib','externallib.php',562],['lib','externallib.php',593],['lib','externallib.php',622],['lib','externallib.php',648],['lib','externallib.php',778],['lib','externallib.php',813],['lib','externallib.php',984],['lib','externallib.php',1177],['blog','locallib.php',71],['blog','locallib.php',564],['blog','locallib.php',847],['blog','locallib.php',892],['blog','locallib.php',965],['blog','locallib.php',1016],['blog','locallib.php',1041],['blog','locallib.php',1051],['blog','locallib.php',1063],['blog','locallib.php',1084],['lib/phpexcel/PHPExcel/Worksheet','ColumnDimension.php',53],['auth/cas','auth.php',39],['lib','lexer.php',41],['lib','lexer.php',145],['lib','lexer.php',217],['lib/phpexcel/PHPExcel/Shared/JAMA','QRDecomposition.php',48],['lib/google/src/Google/Service','Exception.php',34],['lib/htmlpurifier/HTMLPurifier','Printer.php',21],['tag/classes/output','tagcloud.php',49],['lib/google/src/Google/Service','Storagetransfer.php',44],['user/filters','select.php',46],['cache/stores/mongodb','lib.php',116],['admin/tool/lp/classes/output','course_competencies_page.php',73],['lib/google/src/Google/Cache','Null.php',28],['lib','graphlib.php',1176],['lib/phpexcel/PHPExcel/Style','Protection.php',49],['lib/google/src/Google/Service','GamesConfiguration.php',42],['repository/dropbox','locallib.php',46],['lib/phpexcel/PHPExcel/Style','Alignment.php',100],['lib/htmlpurifier/HTMLPurifier','Language.php',63],['cache/stores/file','lib.php',117],['tag/classes/output','tagareashowstandard.php',41],['question/type/multianswer','edit_multianswer_form.php',63],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Bool.php',22],['mod/assign','renderable.php',41],['mod/assign','renderable.php',71],['mod/assign','renderable.php',103],['mod/assign','renderable.php',139],['mod/assign','renderable.php',191],['mod/assign','renderable.php',242],['mod/assign','renderable.php',291],['mod/assign','renderable.php',395],['mod/assign','renderable.php',531],['mod/assign','renderable.php',586],['mod/assign','renderable.php',670],['mod/assign','renderable.php',707],['mod/assign','renderable.php',747],['mod/assign','renderable.php',800],['mod/assign','renderable.php',854],['lib/form','selectwithlink.php',56],['backup/moodle2','backup_activity_task.class.php',45],['lib/phpmailer','class.phpmailer.php',633],['lib/horde/framework/Horde/Imap/Client/Data','AclRights.php',39],['auth/db','auth.php',36],['lib/lessphp/Tree','Value.php',14],['lib/form','course.php',62],['question/engine','questionattemptstep.php',97],['question/engine','questionattemptstep.php',608],['cohort','locallib.php',37],['cohort','locallib.php',101],['badges/criteria','award_criteria.php',127],['lib/adodb/perf','perf-mysql.inc.php',86],['cache/stores/memcached','lib.php',133],['grade/report/singleview/classes/local/ui','empty_element.php',38],['lib/google/src/Google/Service','AppState.php',40],['lib/adodb/drivers','adodb-odbc_oracle.inc.php',107],['lib/pear/HTML/QuickForm/Renderer','Default.php',139],['tag/classes/output','tag.php',46],['question','previewlib.php',122],['backup/util/loggers','database_logger.class.php',40],['mod/forum/classes','potential_subscriber_selector.php',47],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','InterchangeBuilder.php',15],['lib/phpexcel/PHPExcel/Reader','SYLK.php',67],['lib/form','submitlink.php',47],['backup/util/dbops','restore_dbops.class.php',1788],['lib/xmldb','xmldb_index.php',56],['question','category_class.php',58],['question','category_class.php',160],['lib/google/src/Google/Service','Webfonts.php',38],['webservice/xmlrpc','locallib.php',41],['admin/roles/classes','check_users_selector.php',38],['lib/htmlpurifier/HTMLPurifier/AttrTransform','ImgSpace.php',24],['user/profile/field/checkbox','field.class.php',33],['lib/form','cancel.php',47],['lib/google/src/Google/Service','Resourceviews.php',57],['lib/phpexcel/PHPExcel/Style','Font.php',100],['lib/portfolio','plugin.php',445],['calendar','lib.php',2003],['calendar','lib.php',2774],['mod/wiki','pagelib.php',93],['mod/wiki','pagelib.php',380],['mod/wiki','pagelib.php',981],['mod/wiki','pagelib.php',1190],['mod/wiki','pagelib.php',2194],['mod/wiki','pagelib.php',2422],['tag/classes/output','tagfeed.php',43],['tag/classes/output','tagareaenabled.php',38],['backup/util/xml/parser/processors','selective_like_parser_processor.class.php',35],['mod/workshop','locallib.php',183],['mod/workshop','locallib.php',2976],['mod/workshop','locallib.php',3411],['mod/workshop','locallib.php',3647],['mod/workshop','locallib.php',3889],['mod/workshop','locallib.php',3975],['mod/workshop','locallib.php',4060],['mod/workshop','locallib.php',4079],['lib/form','advcheckbox.php',48],['backup/cc/cc_lib','cc_assesment_sfib.php',27],['cohort/classes/output','cohortidnumber.php',37],['lib/adodb/drivers','adodb-ado.inc.php',42],['lib/adodb/drivers','adodb-ado.inc.php',346],['lib/form','filepicker.php',53],['mod/assign','adminlib.php',41],['mod/assign','adminlib.php',102],['lib/tests/fixtures','test_renderer_factory.php',41],['backup/cc/cc_lib','cc_converter_label.php',28],['lib/htmlpurifier/HTMLPurifier','Lexer.php',152],['grade/report/singleview','lib.php',69],['backup/cc/cc_lib','cc_converter_page.php',28],['lib/google/src/Google/Logger','Psr.php',39],['lib/simplepie/library/SimplePie/HTTP','Parser.php',131],['backup/util/plan','backup_step.class.php',32],['backup/util/plan','backup_step.class.php',55],['lib/lessphp/Tree','Import.php',30],['lib/jabber/XMPP','XMPP_Old.php',45],['lib/phpexcel/PHPExcel/Worksheet','Drawing.php',37],['lib/google/src/Google/Service','Classroom.php',60],['lib/phpexcel/PHPExcel/Chart/Renderer','jpgraph.php',875],['admin/tool/lp/classes/external','competency_path_exporter.php',38],['cohort/classes/output','cohortname.php',37],['grade/report/overview','lib.php',76],['lib/horde/framework/Horde/Mail/Rfc822','Address.php',66],['admin/roles/classes','admins_existing_selector.php',30],['lib/phpunit/classes','arraydataset.php',45],['question/engine','questionattempt.php',166],['question/engine','questionattempt.php',1532],['question/engine','questionattempt.php',1618],['question/engine','questionattempt.php',1703],['lib/horde/framework/Horde/Support','Uuid.php',23],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nil.php',27],['webservice/rest','lib.php',47],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooterDrawing.php',79],['backup/util/xml/output','memory_xml_output.class.php',37],['repository/flickr_public','image.php',34],['mod/lti/classes/local/ltiservice','resource_base.php',62],['admin/tool/lp/classes/output','template_plans_table.php',53],['mod/quiz','mod_form.php',48],['lib/simplepie/library/SimplePie','Caption.php',98],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Multiple.php',33],['lib/htmlpurifier/HTMLPurifier','PercentEncoder.php',20],['lib/phpexcel/PHPExcel/Calculation','ExceptionHandler.php',30],['lib/htmlpurifier/HTMLPurifier/Token','Tag.php',33],['backup/moodle2','backup_theme_plugin.class.php',61],['mod/chat','chatd.php',78],['mod/chat','chatd.php',103],['lib/phpexcel/PHPExcel','DocumentSecurity.php',65],['lib/htmlpurifier/HTMLPurifier','URIDefinition.php',21],['lib/spout/src/Spout/Writer/XLSX/Internal','Workbook.php',45],['lib/phpexcel/PHPExcel/Shared','XMLWriter.php',49],['lib/lessphp/Tree','Operation.php',19],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',461],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',1699],['backup/cc/cc_lib','cc_converter_folder.php',28],['backup/util/helper','restore_roles_parser_processor.class.php',39],['lib/simplepie/library/SimplePie','Locator.php',68],['lib/google/src/Google/Service','SQLAdmin.php',50],['lib/lessphp/Tree','DetachedRuleset.php',15],['admin/tool/assignmentupgrade','upgradableassignmentstable.php',49],['backup/cc','validator.php',30],['backup/cc','validator.php',116],['backup/cc','validator.php',202],['backup/cc','validator.php',230],['backup/cc','validator.php',236],['backup/cc','validator.php',242],['backup/cc','validator.php',248],['backup/cc','validator.php',254],['backup/cc','validator.php',260],['lib/horde/framework/Horde/Imap/Client/Interaction','Client.php',34],['mod/quiz','override_form.php',58],['auth/cas/CAS/CAS/PGTStorage','AbstractStorage.php',57],['lib/htmlpurifier/HTMLPurifier','Length.php',41],['backup/util/helper','restore_decode_rule.class.php',47],['backup/util/helper','restore_decode_rule.class.php',192],['lib/horde/framework/Horde/Imap/Client/Data','Sync.php',133],['lib/phpexcel/PHPExcel/Shared/trend','logarithmicBestFitClass.php',97],['lib/adodb/perf','perf-db2.inc.php',61],['lib/phpexcel/PHPExcel/Style','Supervisor.php',44],['lib/htmlpurifier/HTMLPurifier/AttrTransform','TargetBlank.php',17],['lib/ddl','database_manager.php',48],['lib/mustache/src/Mustache/Exception','UnknownFilterException.php',22],['admin/roles/classes','define_role_table_advanced.php',46],['lib/dml','oci_native_moodle_temptables.php',40],['lib/horde/framework/Horde/Stream','Existing.php',28],['enrol/manual','locallib.php',37],['enrol/manual','locallib.php',102],['availability/classes','multiple_messages.php',56],['lib/phpexcel/PHPExcel/Reader','Gnumeric.php',55],['admin/roles/classes','override_permissions_table_advanced.php',31],['lib/pear/Net','GeoIP.php',323],['lib/mustache/src/Mustache/Loader','ArrayLoader.php',31],['lib/form','modgrade.php',78],['admin/tool/log/store/database/backup/moodle2','restore_logstore_database_subplugin.class.php',40],['cache/classes','config.php',80],['lib/pear/HTML/QuickForm','hidden.php',37],['question/type/calculated','datasetitems_form.php',72],['lib/tests','navigationlib_test.php',554],['lib/tests','navigationlib_test.php',612],['lib/tests','navigationlib_test.php',639],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Number.php',18],['lib/tests','completionlib_test.php',882],['admin/tool/generator/classes','site_backend.php',58],['lib/jabber/XMPP','XMLStream.php',171],['lib/simplepie/library/SimplePie','Sanitize.php',75],['cache/classes','factory.php',149],['lib/minify/lib/Minify/Cache','WinCache.php',20],['user/classes/output/myprofile','node.php',82],['lib/horde/framework/Horde/Stream','TempString.php',40],['lib/adodb/drivers','adodb-borland_ibase.inc.php',83],['mod/forum','locallib.php',55],['mod/forum','locallib.php',419],['mod/lti/service/memberships/classes/local/resource','contextmemberships.php',44],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter/Column','Rule.php',262],['lib/classes/update','code_manager.php',57],['search/engine/solr/classes','engine.php',103],['lib/horde/framework/Horde/Imap/Client/Interaction/Server','Tagged.php',36],['lib/google/src/Google/Service','Compute.php',89],['lib/phpexcel/PHPExcel/Style','Borders.php',113],['lib','completionlib.php',243],['lib/google/src/Google/Service','Pubsub.php',44],['lib/adodb/drivers','adodb-ads.inc.php',69],['lib/adodb/drivers','adodb-ads.inc.php',657],['lib/markdown','MarkdownExtra.php',56],['lib/minify/lib/Minify/Cache','XCache.php',22],['lib/google/src/Google/Service','YouTube.php',75],['lib/lessphp','Functions.php',15],['auth/cas/CAS/CAS','AuthenticationException.php',53],['mod/quiz','locallib.php',1923],['competency/classes/external','stored_file_exporter.php',45],['user/filters','checkbox.php',51],['backup/moodle2','restore_settingslib.php',86],['backup/moodle2','restore_settingslib.php',149],['lib/htmlpurifier/HTMLPurifier/Node','Element.php',39],['lib/pear/HTML/QuickForm','date.php',260],['lib/lessphp/SourceMap','Generator.php',82],['backup/util/plan','base_step.class.php',35],['backup/util/plan','base_step.class.php',127],['mod/lti/service/memberships/classes/local/service','memberships.php',50],['lib/google/src/Google/Cache','Apc.php',37],['backup/util/ui','restore_ui_stage.class.php',42],['backup/util/ui','restore_ui_stage.class.php',265],['backup/util/ui','restore_ui_stage.class.php',452],['backup/util/ui','restore_ui_stage.class.php',592],['backup/util/ui','restore_ui_stage.class.php',704],['backup/util/ui','restore_ui_stage.class.php',852],['backup/util/ui','restore_ui_stage.class.php',959],['backup/util/ui','restore_ui_stage.class.php',1100],['lib/pear/Auth','RADIUS.php',120],['lib/pear/Auth','RADIUS.php',579],['lib/pear/Auth','RADIUS.php',672],['lib/pear/Auth','RADIUS.php',879],['lib/adodb/drivers','adodb-ado_access.inc.php',46],['admin/tool/xmldb/actions','XMLDBAction.class.php',56],['backup/converter/moodle1','handlerlib.php',120],['backup/converter/moodle1','handlerlib.php',1710],['backup/converter/moodle1','handlerlib.php',1902],['backup/converter/moodle1','handlerlib.php',2155],['backup/controller','restore_controller.class.php',63],['backup/controller','restore_controller.class.php',519],['lib/google/src/Google/Http','Request.php',58],['lib/google/src/Google/Service','Dfareporting.php',99],['lib/google/src/Google/Service','Manager.php',60],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',73],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','Validator.php',30],['lib/google/src/Google/Service','CloudMonitoring.php',45],['lib/editor/tinymce/plugins/spellchecker/classes','SpellChecker.php',11],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',44],['lib/horde/framework/Horde/Mail/Transport','Sendmail.php',65],['lib','webdavlib.php',84],['lib/dml','pgsql_native_moodle_recordset.php',43],['lib/horde/framework/Horde/Support','Guid.php',24],['lib/mustache/src/Mustache','LambdaHelper.php',25],['question/engine/upgrade/tests','helper.php',45],['admin/tool/uploadcourse/classes','tracker.php',72],['grade/report/user','lib.php',188],['lib/adodb/drivers','adodb-sqlanywhere.inc.php',156],['auth/cas/CAS/CAS','OutOfSequenceBeforeClientException.php',47],['backup/util/plan','base_task.class.php',40],['backup/util/plan','base_task.class.php',277],['lib/adodb/drivers','adodb-db2oci.inc.php',220]], 1102],
'box_end': ['box_end', 'Outputs the closing section of a box. ', [['lib','outputrenderers.php',3117]], 257],
'get_in_or_equal': ['get_in_or_equal', 'Constructs \'IN()\' or \'=\' sql fragment ', [['lib/dml','oci_native_moodle_database.php',1635],['lib/dml','moodle_database.php',711]], 438],
'reset_caches': ['reset_caches', 'This implementation does not use any caches. ', [['lib/classes','string_manager_install.php',245],['lib/classes','plugin_manager.php',115],['lib/classes/update','checker.php',74],['backup/moodle2','restore_stepslib.php',1538],['tag/classes','index_builder.php',367],['repository','lib.php',2636],['lib/dml','moodle_database.php',1052],['lib/classes','filetypes.php',419],['lib','accesslib.php',5149],['lib','accesslib.php',6045],['mod/glossary/classes/local','concept_cache.php',49],['lib/classes','string_manager_standard.php',599],['lib/classes','string_manager.php',127],['lib','filterlib.php',97],['lib/classes','text.php',108],['lib/classes','user.php',486]], 111],
'get_timemodified': ['get_timemodified', 'Returns time modified unix timestamp if known ', [['lib/filebrowser','file_info.php',295],['lib/filebrowser','virtual_root_file.php',272],['lib/filebrowser','file_info_stored.php',258],['lib/filestorage','stored_file.php',756]], 63],
'delete_records_list': ['delete_records_list', 'Delete the records from a table where one field match one list of values. ', [['lib/dml','moodle_database.php',1883]], 37],
'format_string': ['format_string', 'Given a simple string, this function returns the string processed by enabled string filters if $CFG->filterall is enabled ', [['lib','weblib.php',1379]], 880],
'update_draftfile': ['update_draftfile', 'Updates a file in draft filearea. ', [['repository','lib.php',2509]], 4],
'supports_relative_file': ['supports_relative_file', 'helper function to check if the repository supports send_relative_file. ', [['repository','lib.php',2773],['repository/filesystem','lib.php',805]], 4],
'get_options': ['get_options', 'Note: this function must be implemented if you use the search ajax field (e.g. set $options[\'file\'] = \'/admin/filecontainingyourclass.php\';) ', [['user/selector','lib.php',356],['user/selector','lib.php',689],['badges/criteria','award_criteria_activity.php',104],['admin/roles/classes','assign_user_selector_base.php',53],['repository','lib.php',179],['lib','adminlib.php',9088],['mod/forum/classes','subscriber_selector_base.php',72],['mod/data/field/textarea','field.class.php',31],['grade','lib.php',1121],['badges/lib','awardlib.php',82],['badges/criteria','award_criteria_overall.php',155],['badges/criteria','award_criteria_course.php',117],['mnet/service/enrol','locallib.php',519],['mnet/service/enrol','locallib.php',607],['badges/criteria','award_criteria_courseset.php',145],['badges/criteria','award_criteria_profile.php',42],['admin/roles/classes','admins_potential_selector.php',85],['grade/grading/form/rubric','lib.php',368],['mod/feedback/item/multichoice','lib.php',283],['admin/webservice','lib.php',112],['lib/tests','filelib_test.php',1199],['cohort','locallib.php',86],['cohort','locallib.php',150],['mod/forum/classes','potential_subscriber_selector.php',59],['admin/roles/classes','check_users_selector.php',147],['mod/workshop','locallib.php',3997],['admin/roles/classes','admins_existing_selector.php',92],['mod/feedback/item/multichoicerated','lib.php',270],['enrol/manual','locallib.php',87],['enrol/manual','locallib.php',151],['grade/grading/form/guide','lib.php',373],['badges/criteria','award_criteria_manual.php',58]], 46],
'set_timemodified': ['set_timemodified', 'set timemodified ', [['lib/filestorage','stored_file.php',766]], 3],
'get_unused_filename': ['get_unused_filename', 'Get an unused filename from the current draft area. ', [['repository','lib.php',929],['lib/filestorage','file_storage.php',438]], 35],
'file_file_icon': ['file_file_icon', 'Return the relative icon path for a given file ', [['lib','filelib.php',1505]], 35],
'file_get_typegroup': ['file_get_typegroup', 'Returns array of elements of type $element in type group(s) ', [['lib','filelib.php',1719]], 14],
'get_fieldset_select': ['get_fieldset_select', 'Selects records and return values of chosen field as an array which match a particular WHERE clause. ', [['lib/dml','moodle_database.php',1608]], 32],
'is_directory': ['is_directory', 'Whether or not this is a directory ', [['lib/filebrowser','file_info_context_system.php',133],['mod/lesson/classes','file_info.php',94],['mod/imscp','locallib.php',328],['lib/filebrowser','file_info_context_coursecat.php',146],['mod/book','locallib.php',463],['lib/filebrowser','file_info_context_user.php',265],['lib/filebrowser','virtual_root_file.php',60],['mod/data','locallib.php',477],['lib/filebrowser','file_info_stored.php',267],['lib/filestorage','stored_file.php',310],['mod/workshop','fileinfolib.php',82],['mod/workshop','fileinfolib.php',241],['lib/filebrowser','file_info_context_module.php',249],['mod/glossary','locallib.php',525],['lib/filebrowser','file_info_context_course.php',372],['lib/filebrowser','file_info_context_course.php',657],['lib/filebrowser','file_info_context_course.php',803],['mod/forum','locallib.php',463]], 140],
'hide': ['hide', 'Hide the given player\'s leaderboard scores from the given application. This method is only available to user accounts for your developer console. (players.hide) ', [['lib/google/src/Google/Service','GamesManagement.php',560],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/contextmenu','editor_plugin_src.js',71],['repository','lib.php',2009],['lib','navigationlib.php',700],['lib/xhprof/xhprof_html/jquery','jquery.tooltip.js',269],['lib','coursecatlib.php',2068]], 795],
'set_license': ['set_license', 'Set license ', [['lib/filestorage','stored_file.php',823]], 3],
'prepare_listing': ['prepare_listing', 'Prepares list of files before passing it to AJAX, makes sure data is in the correct format and stores formatted values. ', [['repository','lib.php',2255]], 3],
'get_reference': ['get_reference', 'Returns file reference ', [['lib/filestorage','stored_file.php',937]], 17],
'set': ['set', 'Sets an item in the cache given its key and data value. ', [['cache/stores/static','lib.php',265],['cache','disabledlib.php',81],['search/classes','document.php',241],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',331],['lib/google/src/Google/Cache','Memcache.php',113],['lib','filelib.php',3656],['lib/adodb','adodb-active-record.inc.php',646],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',85],['lib/google/src/Google/Cache','File.php',93],['cache/classes','dummystore.php',170],['cache/classes','loaders.php',496],['cache/classes','loaders.php',1350],['cache/classes','loaders.php',1797],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',47],['lib/horde/framework/Horde','Variables.php',189],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',39],['competency/classes','persistent.php',111],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',203],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',51],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',41],['lib/google/src/Google/Service','ShoppingContent.php',1643],['lib','navigationlib.php',5131],['lib/google/src/Google/Service','Clouddebugger.php',445],['lib/htmlpurifier/HTMLPurifier','Config.php',289],['lib/portfolio','exporter.php',154],['grade/report/singleview/classes/local/ui','finalgrade.php',129],['cache/stores/memcache','lib.php',358],['lib/adodb','adodb-active-recordx.inc.php',676],['cache/classes','interfaces.php',68],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',167],['lib/horde/framework/Horde/Imap/Client','Cache.php',127],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',60],['grade/report/singleview/classes/local/ui','exclude.php',90],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',24],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',114],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Null.php',41],['lib/portfolio','caller.php',187],['cache/stores/session','lib.php',290],['cache/stores/mongodb','lib.php',305],['lib/google/src/Google/Cache','Null.php',44],['grade/report/singleview/classes/local/ui','override.php',95],['cache/stores/file','lib.php',426],['lib/phpmailer','class.phpmailer.php',3554],['grade/report/singleview/classes/local/ui','feedback.php',102],['cache/stores/memcached','lib.php',354],['lib/portfolio','plugin.php',647],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',31],['lib/google/src/Google/Service','YouTube.php',4048],['lib/google/src/Google/Service','YouTube.php',4458],['lib/google/src/Google/Cache','Apc.php',82],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',162],['lib/pear/Net/GeoIP','Location.php',125]], 4904],
'get_name': ['get_name', 'Return localised event name. ', [['lib/classes/event','competency_plan_unlinked.php',72],['admin/tool/langimport/classes/task','update_langpacks_task.php',35],['lib/simplepie/library/SimplePie','Author.php',106],['portfolio/download','lib.php',10],['backup/util/structure','restore_path_element.class.php',98],['lib/classes/message/inbound','private_files_handler.php',56],['lib/classes/event','grouping_group_assigned.php',48],['calendar/tests','calendartype_test_example.php',32],['lib/classes/event','enrol_instance_deleted.php',70],['report/log/classes/event','user_report_viewed.php',54],['lib/classes/task','blog_cron_task.php',31],['mod/quiz/classes/event','attempt_reviewed.php',53],['lib/classes/event','tag_unflagged.php',55],['lib/classes/task','send_new_user_passwords_task.php',31],['lib/classes/event','role_unassigned.php',53],['mod/assign/classes/event','grading_form_viewed.php',82],['question/classes/bank','edit_action_column.php',35],['admin/tool/log/store/standard/classes/task','cleanup_task.php',31],['mod/workshop/classes/event','submission_deleted.php',63],['mod/forum/classes/event','discussion_updated.php',65],['lib/classes/event','course_module_instance_list_viewed.php',75],['lib/classes/event','course_created.php',55],['lib/dml','pdo_moodle_database.php',113],['mod/assign/classes/event','extension_granted.php',77],['lib/classes/task','tag_cron_task.php',33],['enrol/imsenterprise/classes/task','cron_task.php',34],['lib/classes/event','course_deleted.php',56],['lib/classes/task','completion_daily_task.php',33],['mod/forum/classes/event','readtracking_enabled.php',64],['mod/wiki/classes/event','page_created.php',48],['lib/dml','oci_native_moodle_database.php',94],['lib/classes/event','competency_viewed.php',70],['mod/choice/classes/event','answer_updated.php',72],['lib/classes/event','search_indexed.php',47],['lib/classes/event','badge_criteria_updated.php',53],['question/classes/bank','question_type_column.php',26],['mod/wiki/classes/event','page_version_deleted.php',54],['lib/grade','grade_item.php',1384],['lib/classes/event','competency_user_competency_rated_in_plan.php',88],['lib/classes/event','webservice_token_sent.php',56],['mod/glossary/classes/event','entry_deleted.php',54],['admin/tool/messageinbound/classes/message/inbound','invalid_recipient_handler.php',60],['lib/classes/event','competency_template_viewed.php',63],['lib/classes/task','context_cleanup_task.php',32],['mod/assign/tests/fixtures','event_mod_assign_fixtures.php',62],['admin/tool/langimport/classes/event','langpack_removed.php',89],['mod/glossary/classes/event','category_deleted.php',46],['mod/forum/classes/message/inbound','reply_handler.php',51],['competency/classes','competency_rule.php',84],['mod/lti/classes/event','unknown_service_api_called.php',82],['lib/classes/event','badge_deleted.php',49],['mod/quiz/classes/event','user_override_updated.php',54],['lib/classes/event','message_contact_added.php',48],['lib/classes/event','cohort_member_added.php',49],['backup/util/ui','restore_ui.class.php',351],['lib/classes/event','blog_entry_updated.php',74],['mod/assign/classes/event','workflow_state_updated.php',88],['mod/forum/classes/event','assessable_uploaded.php',86],['mod/assign/classes/event','submission_created.php',57],['lib/classes/event','group_deleted.php',65],['lib/classes/event','role_allow_assign_updated.php',47],['mod/lesson/classes/event','highscore_added.php',59],['mod/forum/classes/event','discussion_pinned.php',55],['lib/classes/event','webservice_function_called.php',67],['lib/classes/event','competency_plan_reopened.php',75],['mod/lesson/classes/event','essay_attempt_viewed.php',48],['mod/wiki/classes/event','page_locks_deleted.php',54],['lib/classes/event','webservice_service_deleted.php',59],['mod/forum/classes/event','discussion_subscription_created.php',66],['admin/tool/log/store/database/tests/fixtures','event.php',31],['mod/workshop/classes/event','assessable_uploaded.php',93],['lib','csslib.php',2155],['lib','csslib.php',2283],['lib/classes/event','user_loggedout.php',54],['lib/classes/event','webservice_token_created.php',65],['lib/classes/event','tag_collection_updated.php',65],['competency/classes','competency_rule_all.php',84],['backup/util/settings','base_setting.class.php',145],['mod/data/classes/event','field_deleted.php',57],['mod/book/classes/event','chapter_created.php',79],['lib/classes/event','email_failed.php',56],['lib/classes/task','stats_cron_task.php',31],['mod/survey/classes/event','report_downloaded.php',55],['mod/workshop/classes/event','phase_switched.php',75],['lib/grade','grade_category.php',2300],['lib/grade','grade_scale.php',156],['lib/classes/event','course_reset_started.php',53],['mod/workshop/classes/event','assessment_evaluated.php',66],['lib/classes/event','blog_association_created.php',56],['backup/converter','convertlib.php',109],['report/outline/classes/event','activity_report_viewed.php',48],['lib/classes/task','legacy_plugin_cron_task.php',33],['lib/classes/event','competency_plan_updated.php',75],['mod/choice/classes/event','answer_submitted.php',72],['mod/lesson/classes/event','lesson_ended.php',49],['lib/classes/event','role_allow_switch_updated.php',47],['lib/classes/task','portfolio_cron_task.php',31],['lib/classes/event','competency_user_competency_rated_in_course.php',88],['question/classes/bank','question_text_row.php',35],['lib/classes/event','tag_created.php',75],['report/participation/classes/event','report_viewed.php',58],['lib/classes/event','role_capabilities_updated.php',51],['mod/survey/classes/event','response_submitted.php',53],['lib/classes/event','badge_archived.php',47],['mod/workshop/classes/event','assessment_reevaluated.php',76],['mod/assign/classes/event','submission_locked.php',78],['report/outline/classes/event','report_viewed.php',54],['lib/classes/event','user_deleted.php',57],['lib/classes/event','mnet_access_control_updated.php',57],['mod/lesson/classes/event','essay_assessed.php',78],['mod/book/tool/print/classes/event','book_printed.php',76],['lib/classes/event','grouping_deleted.php',72],['admin/tool/monitor/classes','rule.php',239],['lib/classes/event','course_viewed.php',75],['mod/forum/classes/event','user_report_viewed.php',65],['user/selector','lib.php',309],['mod/quiz/classes/event','attempt_summary_viewed.php',56],['lib/classes/event','webservice_service_user_added.php',59],['mod/forum/classes/event','discussion_unpinned.php',55],['lib/classes/event','grouping_group_unassigned.php',48],['lib/grade','grade_outcome.php',272],['mod/chat/classes/event','message_sent.php',59],['lib/classes/event','role_assigned.php',56],['mod/quiz/classes/question/bank','question_name_text_column.php',37],['question/classes/bank','modifier_name_column.php',27],['mod/glossary/classes/event','entry_viewed.php',48],['mod/data/classes/event','record_created.php',56],['lib/classes/event','course_category_deleted.php',59],['lib/dml','mariadb_native_moodle_database.php',41],['lib/classes/event','role_deleted.php',55],['lib/classes/task','question_cron_task.php',31],['portfolio/flickr','lib.php',41],['lib/classes/task','cache_cron_task.php',31],['mod/wiki/classes/event','page_version_viewed.php',54],['admin/tool/recyclebin/classes/event','category_bin_item_deleted.php',47],['admin/tool/log/store/standard/tests/fixtures','event.php',31],['mod/scorm/classes/event','status_submitted.php',46],['admin/tool/monitor/classes/event','rule_created.php',50],['admin/tool/log/store/legacy/classes/task','cleanup_task.php',31],['question/classes/bank','checkbox_column.php',32],['lib/classes/event','competency_user_competency_plan_viewed.php',81],['mod/assign/feedback/offline','locallib.php',42],['admin/tool/messageinbound/classes/task','cleanup_task.php',38],['mod/workshop/classes/event','submission_updated.php',63],['lib/editor/atto/classes/task','autosave_cleanup_task.php',33],['mod/choice/classes/event','report_viewed.php',53],['mod/lesson/classes/event','group_override_deleted.php',54],['mod/wiki/classes/event','page_map_viewed.php',54],['admin/tool/log/store/legacy/tests/fixtures','event.php',31],['mod/lesson/classes/event','question_answered.php',54],['mod/choice/classes/event','report_downloaded.php',54],['admin/tool/recyclebin/classes/task','cleanup_category_bin.php',36],['backup/util/ui','backup_ui_setting.class.php',86],['lib/classes/event','competency_user_evidence_created.php',64],['lib/classes/event','course_module_completion_updated.php',54],['repository/coursefiles','lib.php',183],['lib/classes/event','note_updated.php',56],['lib/classes/event','note_created.php',56],['lib/classes/event','competency_framework_created.php',63],['lib/classes/event','course_resources_list_viewed.php',60],['lib/classes/event','tag_updated.php',58],['mod/forum/classes/event','subscribers_viewed.php',65],['mod/book/tool/exportimscp/classes/event','book_exported.php',76],['mod/quiz/classes/question/bank','add_action_column.php',45],['lib/classes/task','completion_regular_task.php',33],['lib/classes/event','user_enrolment_deleted.php',54],['grade/report/grader/classes/event','grade_report_viewed.php',39],['lib','enrollib.php',1076],['admin/tool/recyclebin/classes/event','course_bin_item_restored.php',47],['lib/classes/event','webservice_service_updated.php',59],['lib/editor/tinymce/classes','plugin.php',101],['mod/lesson/classes/event','group_override_created.php',55],['mod/scorm/classes/event','attempt_deleted.php',62],['lib/classes/event','competency_user_competency_review_request_cancelled.php',72],['lib/classes/event','webservice_service_created.php',65],['lib/classes/task','events_cron_task.php',31],['mod/wiki/classes/event','page_version_restored.php',54],['mod/forum/classes/event','discussion_deleted.php',66],['lib/classes/event','competency_framework_updated.php',73],['mod/lesson/classes/event','lesson_restarted.php',48],['mod/wiki/classes/event','page_updated.php',54],['mod/assign/classes/event','marker_updated.php',89],['lib','modinfolib.php',1270],['mod/assign/feedback/editpdf/classes/task','convert_submissions.php',38],['lib/classes/event','course_module_updated.php',57],['repository','lib.php',1834],['auth/cas/classes/task','sync_task.php',34],['lib/classes/event','competency_template_deleted.php',73],['mod/assign/classes/event','submission_confirmation_form_viewed.php',79],['lib/bennu','iCalendar_components.php',37],['report/questioninstances/classes/event','report_viewed.php',55],['admin/tool/recyclebin/classes/task','cleanup_course_bin.php',36],['lib/classes/event','message_contact_blocked.php',48],['lib/classes/event','competency_template_updated.php',75],['question/behaviour','behaviourbase.php',83],['grade/report/history/classes/event','grade_report_viewed.php',39],['lib/classes/event','badge_disabled.php',47],['mod/assign/classes/event','grading_table_viewed.php',79],['lib/classes/event','badge_enabled.php',47],['mod/lti','OAuth.php',122],['mod/lti','OAuth.php',149],['mod/lti','OAuth.php',173],['calendar/type/gregorian/classes','structure.php',29],['mod/quiz/classes/event','edit_page_viewed.php',53],['lib/simplepie/library/SimplePie','Credit.php',139],['mod/scorm/classes/event','tracks_viewed.php',64],['mod/wiki/classes/event','page_diff_viewed.php',55],['message/tests/fixtures','inbound_fixtures.php',41],['lib/classes/event','grouping_created.php',65],['lib/classes/event','calendar_event_deleted.php',58],['enrol/flatfile/classes/task','flatfile_sync_task.php',37],['lib/classes/event','group_updated.php',65],['lib/classes/task','registration_cron_task.php',31],['mod/book/classes/event','chapter_updated.php',79],['lib/classes/event','grade_deleted.php',94],['admin/tool/recyclebin/classes/event','course_bin_item_created.php',47],['lib/classes/event','user_loggedin.php',64],['lib/classes/task','check_for_updates_task.php',31],['grade/report/singleview/classes/local/ui','grade_attribute_format.php',56],['mod/assign/submission/file','locallib.php',44],['mod/forum/classes/task','cron_task.php',30],['mod/forum/classes/event','subscription_created.php',65],['lib/classes/event','tag_collection_created.php',65],['grade/report/overview/classes/event','grade_report_viewed.php',48],['mod/assign/classes/event','batch_set_marker_allocation_viewed.php',79],['mod/quiz/classes/event','group_override_updated.php',54],['lib/classes/event','competency_plan_created.php',63],['mod/glossary/classes/event','entry_disapproved.php',46],['lib/classes/task','send_failed_login_notifications_task.php',34],['enrol/lti/classes/task','sync_grades.php',36],['lib/classes/event','message_viewed.php',54],['portfolio/boxnet','lib.php',14],['lib/classes/event','comment_created.php',58],['question/classes/bank','preview_action_column.php',26],['lib/classes/event','course_content_deleted.php',54],['lib/dml','pgsql_native_moodle_database.php',87],['mod/feedback/classes/event','response_deleted.php',83],['lib/classes/event','competency_evidence_created.php',98],['lib/classes/event','comment_deleted.php',58],['lib/classes/event','competency_user_competency_review_requested.php',72],['mod/quiz/classes/event','attempt_abandoned.php',63],['mod/scorm/classes/event','user_report_viewed.php',62],['lib/dml','mssql_native_moodle_database.php',88],['mod/quiz/classes/event','attempt_becameoverdue.php',66],['mod/quiz/classes/event','group_override_created.php',55],['lib/dml','mysqli_native_moodle_database.php',352],['backup/util/ui','backup_ui.class.php',194],['mod/book/tool/print/classes/event','chapter_printed.php',79],['mod/data/classes/event','record_deleted.php',56],['competency/classes','competency_rule_points.php',185],['lib/classes/event','competency_user_competency_viewed.php',81],['lib/classes/event','dashboard_viewed.php',59],['mod/lesson/classes/event','question_viewed.php',54],['lib/classes/event','user_profile_viewed.php',56],['lib','medialib.php',345],['admin/tool/monitor/classes/task','clean_events.php',32],['mod/lesson/classes/event','user_override_deleted.php',53],['lib/classes/event','cohort_member_removed.php',50],['mod/lesson/classes/event','lesson_started.php',48],['mod/lesson/classes/event','page_updated.php',73],['mod/workshop/classes/event','submission_viewed.php',63],['question/classes/bank','question_name_column.php',28],['lib/classes/event','competency_deleted.php',87],['admin/tool/monitor/classes','subscription.php',132],['lib/classes/task','grade_cron_task.php',31],['mod/glossary/classes/event','entry_created.php',52],['lib/classes/task','file_temp_cleanup_task.php',31],['lib/classes/event','dashboard_reset.php',60],['backup/util/structure','base_atom.class.php',71],['portfolio/googledocs','lib.php',54],['mod/assign/feedback/comments','locallib.php',36],['mod/wiki/classes/event','page_history_viewed.php',48],['lib/classes/event','competency_plan_review_request_cancelled.php',75],['lib/classes/event','competency_plan_deleted.php',73],['mod/quiz/classes/event','attempt_viewed.php',54],['mod/data/classes/event','field_updated.php',57],['lib/classes/event','grouping_updated.php',65],['cache/classes','definition.php',621],['lib/classes/task','plagiarism_cron_task.php',31],['backup/converter/moodle1','lib.php',1033],['lib/classes/event','question_category_created.php',48],['grade/report/user/classes/event','grade_report_viewed.php',48],['lib/classes/event','user_login_failed.php',56],['mod/scorm/classes/event','report_viewed.php',63],['mod/chat/classes/event','sessions_viewed.php',65],['admin/tool/recyclebin/classes/event','course_bin_item_deleted.php',47],['mod/quiz/classes/event','user_override_deleted.php',53],['portfolio/mahara','lib.php',61],['mod/quiz/classes/event','attempt_submitted.php',63],['grade/report/outcomes/classes/event','grade_report_viewed.php',39],['mod/lesson/classes/event','group_override_updated.php',54],['mod/workshop/classes/event','submission_created.php',63],['mod/assign/classes/event','submission_updated.php',57],['mod/assign/submission/onlinetext/classes/event','assessable_uploaded.php',83],['lib/classes/event','competency_updated.php',70],['lib/classes/event','note_deleted.php',56],['mod/lesson/classes/event','page_moved.php',56],['lib/classes/event','course_completed.php',73],['lib/classes/event','tag_added.php',58],['lib/classes/event','competency_created.php',70],['mod/lesson/classes/event','highscores_viewed.php',51],['lib/classes/event','message_contact_unblocked.php',48],['lib/classes/event','user_enrolment_created.php',53],['lib/classes/task','search_index_task.php',35],['lib/classes/event','course_module_created.php',86],['lib/classes/event','webservice_service_user_removed.php',59],['report/log/classes/event','report_viewed.php',58],['mod/assign/submission/file/classes/event','assessable_uploaded.php',85],['lib/classes/event','group_member_added.php',78],['mod/forum/classes/event','discussion_viewed.php',60],['mod/assign/classes/event','submission_viewed.php',76],['mod/lti/classes/local/ltiservice','service_base.php',87],['enrol/lti/classes/task','sync_members.php',46],['mod/workshop/classes/event','submission_reassessed.php',77],['lib/classes/task','session_cleanup_task.php',31],['lib/tests','messageinbound_test.php',166],['lib/classes/task','backup_cleanup_task.php',31],['mod/workshop/classes/event','assessment_evaluations_reset.php',75],['mod/scorm/classes/event','scoreraw_submitted.php',46],['mod/assign/classes/event','statement_accepted.php',77],['mod/assign/classes/event','feedback_viewed.php',76],['lib/classes/task','delete_unconfirmed_users_task.php',31],['mod/forum/classes/event','discussion_moved.php',66],['lib/classes/event','competency_user_evidence_deleted.php',64],['mod/assign/classes/event','batch_set_workflow_state_viewed.php',79],['mod/lesson/classes/event','lesson_resumed.php',48],['lib/classes/task','badges_cron_task.php',31],['lib/classes/event','comments_viewed.php',51],['mod/data/classes/event','template_viewed.php',55],['mod/wiki/classes/event','page_deleted.php',54],['mod/quiz/classes/event','report_viewed.php',56],['mod/scorm/classes/event','sco_launched.php',64],['mod/glossary/classes/event','entry_updated.php',52],['mod/lesson/classes/event','user_override_created.php',53],['mod/glossary/classes/event','category_updated.php',46],['lib/classes/event','course_updated.php',58],['grade/report/singleview/classes/event','grade_report_viewed.php',39],['mod/feedback/classes/event','response_submitted.php',83],['lib/classes/event','blog_entry_deleted.php',53],['mod/book/classes/event','chapter_deleted.php',79],['report/completion/classes/event','report_viewed.php',49],['lib/classes/event','recent_activity_viewed.php',49],['mod/quiz/classes/event','question_manually_graded.php',55],['mod/assign/classes/event','submission_status_updated.php',79],['lib/classes/event','user_enrolment_updated.php',53],['lib/classes/event','tag_deleted.php',55],['report/completion/classes/event','user_report_viewed.php',49],['report/stats/classes/event','report_viewed.php',56],['lib/classes/event','calendar_event_created.php',58],['mod/assign/classes/event','submission_duplicated.php',77],['lib/classes/event','competency_framework_deleted.php',73],['lib/classes/event','course_section_updated.php',56],['lib/classes/event','message_sent.php',82],['lib/classes/event','calendar_subscription_deleted.php',56],['lib/classes/event','course_category_updated.php',51],['lib/classes/event','user_password_updated.php',70],['enrol/lti/ims-blti','OAuth.php',65],['enrol/lti/ims-blti','OAuth.php',92],['enrol/lti/ims-blti','OAuth.php',116],['mod/forum/classes/event','subscription_deleted.php',65],['mod/assign/classes/event','reveal_identities_confirmation_page_viewed.php',79],['lib/classes/event','user_loggedinas.php',57],['lib/classes/event','competency_template_created.php',63],['lib/classes/event','user_created.php',48],['admin/tool/recyclebin/classes/event','category_bin_item_restored.php',47],['report/loglive/classes/event','report_viewed.php',48],['admin/tool/monitor/classes/event','subscription_created.php',50],['mod/book/classes/event','chapter_viewed.php',79],['lib/classes/event','badge_awarded.php',54],['lib/classes/event','calendar_subscription_created.php',57],['lib/classes/event','enrol_instance_created.php',69],['lib/classes/event','user_list_viewed.php',56],['lib/classes/task','calendar_cron_task.php',31],['mod/forum/classes/event','post_deleted.php',67],['mod/quiz/classes/event','group_override_deleted.php',54],['lib/classes/event','badge_created.php',47],['backup/util/plan','base_plan.class.php',50],['lib/classes/event','base.php',292],['lib/classes/event','competency_framework_viewed.php',69],['lib/classes/event','tag_collection_deleted.php',65],['lib/classes/event','group_member_removed.php',69],['lib/classes/event','grade_report_viewed.php',54],['lib/classes/event','calendar_event_updated.php',58],['mod/assign/submission/onlinetext','locallib.php',40],['lib/classes/event','user_updated.php',48],['mod/lesson/classes/event','page_created.php',54],['backup/util/ui','base_ui_stage.class.php',110],['mod/assign/classes/event','submission_form_viewed.php',82],['auth/ldap/classes/task','sync_task.php',34],['lib/classes/event','course_completion_updated.php',47],['lib/classes/event','competency_plan_review_started.php',75],['lib/classes/event','course_user_report_viewed.php',66],['mod/folder/classes/event','all_files_downloaded.php',60],['mod/workshop/classes/event','assessments_reset.php',74],['lib/tests/fixtures','task_fixtures.php',35],['lib/tests/fixtures','task_fixtures.php',44],['lib/tests/fixtures','task_fixtures.php',53],['mod/data/classes/event','template_updated.php',56],['mod/assign/classes/event','identities_revealed.php',75],['question/classes/bank','copy_action_column.php',35],['admin/tool/log/store/legacy/classes/event','legacy_logged.php',35],['lib/classes/event','notes_viewed.php',49],['admin/tool/recyclebin/classes/event','category_bin_item_created.php',47],['lib/classes/event','competency_plan_viewed.php',63],['mod/data/classes/event','record_updated.php',56],['mod/assign/feedback/file','locallib.php',45],['lib/classes/event','competency_plan_unapproved.php',75],['mod/lesson/classes/event','content_page_viewed.php',48],['mod/assign/feedback/editpdf','locallib.php',43],['lib/dml','sqlsrv_native_moodle_database.php',108],['admin/tool/monitor/classes/event','subscription_deleted.php',50],['mod/assign/classes/event','assessable_submitted.php',109],['mod/quiz/classes/event','attempt_started.php',62],['lib/classes/task','create_contexts_task.php',31],['lib/classes/task','file_trash_cleanup_task.php',31],['lib/classes/event','competency_user_competency_rated.php',82],['mod/forum/classes/event','post_updated.php',67],['admin/tool/cohortroles/classes/task','cohort_role_sync.php',37],['lib/classes/event','course_module_deleted.php',56],['mod/assign/submission/comments','locallib.php',39],['lib/classes/event','competency_plan_review_requested.php',75],['lib/classes/event','user_graded.php',96],['lib/classes/event','webservice_login_failed.php',71],['mod/forum/classes/event','post_created.php',67],['lib/classes/task','complete_plans_task.php',43],['mod/assign/classes/event','submission_status_viewed.php',81],['lib/classes/event','enrol_instance_updated.php',70],['lib/classes/task','messaging_cleanup_task.php',31],['portfolio/picasa','lib.php',33],['admin/tool/capability/classes/event','report_viewed.php',47],['grade/report/singleview/classes/local/ui','unique_name.php',38],['mod/data/classes/event','field_created.php',58],['mod/folder/classes/event','folder_updated.php',48],['lib/classes/event','badge_updated.php',47],['lib/tests/fixtures','event_fixtures.php',34],['lib/classes/task','cache_cleanup_task.php',31],['mod/survey/classes/event','report_viewed.php',55],['mod/quiz/classes/event','attempt_deleted.php',53],['mod/glossary/classes/event','entry_approved.php',46],['mod/wiki/classes/event','page_viewed.php',57],['lib/classes/log','reader.php',30],['lib/classes/task','password_reset_cleanup_task.php',31],['mod/forum/classes/event','readtracking_disabled.php',64],['admin/tool/langimport/classes/event','langpack_imported.php',80],['lib/classes/event','competency_plan_review_stopped.php',75],['admin/tool/langimport/classes/event','langpack_updated.php',80],['lib/classes/event','unknown_logged.php',43],['lib/classes/event','competency_user_competency_viewed_in_plan.php',85],['lib/classes/event','competency_user_competency_viewed_in_course.php',84],['lib/classes/task','search_optimize_task.php',38],['mod/glossary/classes/event','category_created.php',46],['lib/portfolio','plugin.php',120],['report/stats/classes/event','user_report_viewed.php',48],['lib/classes/event','dashboards_reset.php',59],['lib/classes/event','calendar_subscription_updated.php',57],['lib/classes/event','cohort_updated.php',49],['admin/tool/monitor/classes/event','rule_updated.php',50],['mod/lesson/classes/event','page_deleted.php',54],['lib/classes/event','course_section_deleted.php',57],['lib/classes/task','delete_incomplete_users_task.php',31],['lib/classes/task','automated_backup_task.php',31],['admin/tool/monitor/classes/event','subscription_criteria_met.php',55],['lib/classes/event','mnet_access_control_created.php',57],['admin/tool/messageinbound/classes/task','pickup_task.php',38],['mod/forum/classes/event','discussion_created.php',65],['question/classes/bank','creator_name_column.php',28],['lib/classes/event','blog_entries_viewed.php',62],['lib/classes/task','sync_plans_from_template_cohorts_task.php',41],['mod/quiz/classes/event','attempt_preview_started.php',54],['lib/classes/event','content_viewed.php',80],['lib/classes/event','competency_user_evidence_updated.php',64],['lib/dml/tests','dml_test.php',5530],['mod/assign/classes/event','submission_graded.php',78],['mod/assign/classes/event','all_submissions_downloaded.php',75],['lib/classes/event','course_restored.php',58],['lib/classes/event','group_created.php',65],['lib/classes/event','badge_criteria_deleted.php',52],['lib/classes/event','tag_flagged.php',55],['lib/classes/event','competency_plan_completed.php',75],['mod/lesson/classes/event','user_override_updated.php',54],['lib/classes/event','role_allow_override_updated.php',47],['mod/forum/classes/event','discussion_subscription_deleted.php',66],['lib/classes/event','cohort_deleted.php',49],['lib/classes/event','badge_criteria_created.php',52],['admin/tool/log/classes/helper','reader.php',41],['admin/tool/monitor/classes/task','check_subscriptions.php',50],['lib/classes/event','blog_entry_created.php',76],['mod/scorm/classes/event','interactions_viewed.php',63],['mod/workshop/classes/event','submission_assessed.php',76],['lib/classes/event','badge_duplicated.php',47],['backup/util/plan','base_step.class.php',49],['lib/classes/event','course_category_created.php',48],['lib/classes/event','cohort_created.php',49],['lib/classes/event','tag_removed.php',58],['lib/classes/event','competency_plan_approved.php',75],['mod/choice/classes/event','answer_deleted.php',56],['backup/util/ui','restore_ui_stage.class.php',75],['lib/classes/event','competency_user_competency_review_started.php',72],['lib/classes/event','course_reset_ended.php',53],['mod/quiz/classes/event','user_override_created.php',53],['mod/forum/classes/event','course_searched.php',66],['lib/classes/event','message_contact_removed.php',48],['admin/tool/monitor/classes/event','rule_deleted.php',50],['lib/classes/event','message_deleted.php',91],['mod/assign/classes/event','submission_unlocked.php',78],['lib/classes/event','competency_user_competency_review_stopped.php',72],['lib/classes/event','course_module_viewed.php',62],['backup/util/plan','base_task.class.php',58],['question/classes/bank','delete_action_column.php',36]], 469],
'addelement': ['addelement', 'Adds a custom element to your HTML definition ', [['lib/htmlpurifier/HTMLPurifier','HTMLDefinition.php',124],['lib/htmlpurifier/HTMLPurifier','HTMLModule.php',130],['lib/pear/HTML','QuickForm.php',592]], 3302],
'clean_param': ['clean_param', 'Used by {@link optional_param()} and {@link required_param()} to clean the variables and/or cast to specific types, based on an options field. <code> $course->format = clean_param($course->format, PARAM_ALPHA); $selectedgradeitem = clean_param($selectedgradeitem, PARAM_INT); </code> ', [['lib','moodlelib.php',769]], 635],
'sesskey': ['sesskey', 'Makes sure that $USER->sesskey exists, if $USER itself exists. It sets a new sesskey if one does not already exist, but does not overwrite existing sesskeys. Returns the sesskey string if $USER exists, or boolean false if not. ', [['lib','sessionlib.php',28]], 641],
'is_siteadmin': ['is_siteadmin', 'Check if the user is an admin at the site level. ', [['lib','accesslib.php',602]], 95],
'scan_file': ['scan_file', 'Scan file, throws exception in case of infected file. ', [['lib/antivirus/clamav/classes','scanner.php',43],['lib/classes/antivirus','manager.php',60]], 14],
'build_tree': ['build_tree', 'Parse all callbacks and builds the tree. ', [['user/classes/output/myprofile','manager.php',37],['competency/classes','competency.php',739],['repository','lib.php',1365]], 9],
'prepare_list': ['prepare_list', 'Prepare the file/folder listing. ', [['repository','lib.php',2174]], 2],
'content_exists': ['content_exists', 'Content exists ', [['lib/filestorage','file_storage.php',2082]], 3],
'get_file_browser': ['get_file_browser', 'Returns local file storage instance ', [['lib','moodlelib.php',6177]], 18],
'get_readable_fullname': ['get_readable_fullname', 'Returns the localised human-readable name of the file together with virtual path ', [['lib/filebrowser','file_info.php',357],['lib/filebrowser','file_info_stored.php',116]], 2],
'user_preference_allow_ajax_update': ['user_preference_allow_ajax_update', 'You need to call this function if you wish to use the set_user_preference method in javascript_static.php, to white-list the preference you want to update from JavaScript, and to specify the type of cleaning you expect to be done on values. ', [['lib/ajax','ajaxlib.php',26]], 10],
'get_filename': ['get_filename', 'Returns file name ', [['lib/filebrowser','virtual_root_file.php',227],['lib/filestorage','stored_file.php',699],['lib','medialib.php',169]], 248],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',922],['lib','accesslib.php',344]], 2064],
'print_search': ['print_search', 'Print a search form ', [['repository/flickr_public','lib.php',390],['repository','lib.php',2330]], 1],
'supported_filetypes': ['supported_filetypes', '', [['repository/picasa','lib.php',101],['repository/flickr_public','lib.php',539],['repository/dropbox','lib.php',488],['repository/skydrive','lib.php',194],['repository','lib.php',1870],['repository/googledocs','lib.php',447],['repository/merlot','lib.php',162],['repository/youtube','lib.php',288],['repository/url','lib.php',259],['repository/flickr','lib.php',333]], 3],
'get_type_by_id': ['get_type_by_id', 'Get the repository type by a given repository type id. ', [['repository','lib.php',668]], 7],
'delete_all_for_context': ['delete_all_for_context', 'Removes all data associated with the given context ', [['grade/grading','lib.php',598],['repository','lib.php',1983]], 4],
'get_type_option_names': ['get_type_option_names', 'Names of the plugin settings ', [['repository/boxnet','lib.php',295],['repository/picasa','lib.php',108],['repository/flickr_public','lib.php',518],['repository/dropbox','lib.php',479],['repository/skydrive','lib.php',144],['repository/coursefiles','lib.php',201],['repository','lib.php',2415],['repository/s3','lib.php',279],['repository/googledocs','lib.php',468],['repository/merlot','lib.php',128],['repository/youtube','lib.php',332],['repository/recent','lib.php',158],['repository/flickr','lib.php',326]], 0],
'file_is_draft_area_limit_reached': ['file_is_draft_area_limit_reached', 'Returns whether a draft area has exceeded/will exceed its size limit. ', [['lib','filelib.php',540]], 7],
'definition': ['definition', 'Overrides the abstract moodleform::definition method for defining what the form that is to be presented to the user. ', [['tag','edit_form.php',41],['admin/webservice','testclient_forms.php',7],['admin/webservice','testclient_forms.php',39],['admin/webservice','testclient_forms.php',123],['admin/webservice','testclient_forms.php',211],['grade/edit/outcome','import_outcomes_form.php',33],['report/eventlist/classes','filter_form.php',30],['course','completion_form.php',38],['mod/scorm','mod_form.php',26],['backup/util/ui','base_moodleform.class.php',93],['mod/feedback/item/multichoicerated','multichoicerated_form.php',22],['mod/workshop/eval','lib.php',78],['grade/edit/tree','grade_form.php',33],['mod/feedback/classes','complete_form.php',75],['mod/scorm','reportsettings_form.php',24],['mod/assign','extensionform.php',42],['admin/tool/lp/classes/form','competency.php',42],['grade/edit/tree','category_form.php',34],['mod/wiki','mod_form.php',44],['mod/lesson/pagetypes','numerical.php',281],['course','edit_form.php',16],['admin/tool/customlang','filter_form.php',33],['login','forgot_password_form.php',39],['admin/tool/uploadcourse/classes','step1_form.php',38],['login','signup_form.php',34],['mod/assign','mod_form.php',39],['admin/tool/lp/classes/form','plan.php',42],['mod/lti','register_form.php',41],['mod/lesson','view_form.php',42],['mod/imscp','mod_form.php',38],['mod/assign','submission_form.php',40],['mod/feedback','use_templ_form.php',32],['grade/report/singleview/classes/local/screen','tablelike.php',107],['course','reset_form.php',36],['mod/data','export_form.php',33],['admin/user','user_bulk_cohortadd_form.php',30],['lib/form/tests','dateselector_test.php',174],['mod/glossary','edit_form.php',10],['mod/lti','mod_form.php',56],['admin/tool/lp/classes/form','user_evidence.php',41],['mod/lesson','import_form.php',35],['group','group_form.php',39],['grade/report/grader','preferences_form.php',37],['admin/tool/uploaduser','user_form.php',38],['admin/tool/uploaduser','user_form.php',76],['admin/tool/uploadcourse/classes','step2_form.php',36],['search/classes/output/form','search.php',33],['question/type','edit_question_form.php',116],['admin/tool/dbtransfer','database_transfer_form.php',39],['mod/feedback/classes','course_select_form.php',52],['mod/feedback/item/label','label_form.php',23],['user/classes','course_form.php',44],['mod/feedback/item/captcha','captcha_form.php',22],['mod/forum/classes','prune_form.php',40],['message','send_form.php',39],['user','files_form.php',37],['admin/tool/task/classes','edit_scheduled_task_form.php',36],['mod/workshop/allocation/scheduled','settings_form.php',39],['mod/feedback/item/textfield','textfield_form.php',22],['mod/feedback','edit_form.php',34],['mod/feedback','edit_form.php',97],['grade/edit/settings','form.php',37],['login','restored_password_form.php',44],['question/type/random','edit_random_form.php',37],['lib/tests','formslib_test.php',616],['lib/tests','formslib_test.php',647],['lib/tests','formslib_test.php',658],['lib/tests','formslib_test.php',669],['lib/tests','formslib_test.php',680],['lib/tests','formslib_test.php',695],['lib/tests','formslib_test.php',710],['lib/tests','formslib_test.php',725],['lib/tests','formslib_test.php',740],['lib/tests','formslib_test.php',752],['lib/tests','formslib_test.php',767],['lib/tests','formslib_test.php',782],['lib/tests','formslib_test.php',800],['lib/tests','formslib_test.php',886],['lib/tests','formslib_test.php',898],['calendar','managesubscriptions_form.php',38],['question/type/calculated','datasetdefinitions_form.php',72],['mod/lesson/pagetypes','matching.php',530],['mod/data','import_form.php',11],['mod/workshop','feedbackauthor_form.php',32],['course/classes','editcategory_form.php',39],['question','move_form.php',39],['admin/tool/behat','steps_definitions_form.php',38],['filter','local_settings_form.php',39],['grade/export','grade_export_form.php',25],['mod/feedback','mod_form.php',34],['mod/feedback/item/info','info_form.php',22],['enrol/self/classes','empty_form.php',33],['mod/book/tool/importhtml','import_form.php',31],['enrol','users_forms.php',30],['enrol','users_forms.php',81],['enrol','users_forms.php',140],['lib/classes','grading_external.php',237],['grade/edit/tree','outcomeitem_form.php',32],['mod/glossary','import_form.php',10],['blog','edit_form.php',26],['mod/feedback/item/textarea','textarea_form.php',22],['mod/survey','mod_form.php',10],['mod/assign/feedback/offline','importgradesform.php',39],['mod/feedback/item/numeric','numeric_form.php',22],['mod/label','mod_form.php',32],['mod/chat','mod_form.php',25],['admin/mnet','peer_forms.php',36],['admin/mnet','peer_forms.php',74],['mod/lesson/pagetypes','multichoice.php',481],['mod/lesson/pagetypes','multichoice.php',542],['admin/roles/classes','preset_form.php',39],['badges','preferences_form.php',34],['calendar','event_form.php',42],['grade/export','key_form.php',35],['lib/editor/atto/plugins/managefiles','manage_form.php',40],['mod/scorm/report/interactions','responsessettings_form.php',30],['course','request_form.php',45],['course','request_form.php',136],['mod/quiz/report/statistics','statistics_form.php',39],['cohort','upload_form.php',44],['admin/tool/uploadcourse/classes','base_form.php',37],['mod/lesson','locallib.php',755],['repository','lib.php',2842],['repository','lib.php',2941],['user/profile','index_category_form.php',39],['admin/tool/generator/classes','make_testplan_form.php',38],['mod/assign','batchsetallocatedmarkerform.php',38],['mod/book','edit_form.php',31],['enrol','bulkchange_forms.php',37],['enrol','bulkchange_forms.php',101],['mod/assign','gradingoptionsform.php',39],['mod/assign','quickgradingform.php',39],['grade/edit/scale','edit_form.php',32],['blog','preferences_form.php',34],['mod/wiki','comments_form.php',10],['mod/lesson/pagetypes','truefalse.php',374],['admin/user','user_message_form.php',11],['mod/folder','edit_form.php',31],['mod/wiki','filesedit_form.php',30],['enrol','editenrolment_form.php',30],['admin/roles/classes','permission_prohibit_form.php',32],['mod/scorm/report/objectives','responsessettings_form.php',35],['admin/tool/profiling','import_form.php',30],['user','forum_form.php',42],['admin/webservice','forms.php',33],['admin/webservice','forms.php',59],['admin/webservice','forms.php',184],['admin/webservice','forms.php',227],['mod/assign','gradeform.php',43],['admin/tool/lp/classes/form','template.php',39],['mod/resource','mod_form.php',33],['backup','backupfilesedit_form.php',27],['admin/tool/lp/classes/form','template_cohorts.php',41],['user','editor_form.php',39],['grade/import/direct/classes','import_form.php',32],['admin/tool/dbtransfer','database_export_form.php',38],['grade/import/direct/classes','mapping_form.php',33],['mod/wiki','create_form.php',31],['mod/assign','batchsetmarkingworkflowstateform.php',38],['mod/workshop','submission_form.php',32],['mod/feedback','import_form.php',33],['grade/edit/letter','edit_form.php',33],['question','import_form.php',40],['admin/tool/lpmigrate/classes/form','migrate_framework.php',54],['admin/roles/classes','permission_allow_form.php',31],['admin/tool/assignmentupgrade','upgradableassignmentsbatchform.php',37],['course','tags_form.php',38],['cohort','edit_form.php',31],['admin/tool/cohortroles/classes/form','assign_role_cohort.php',42],['user','edit_form.php',39],['mod/quiz','addrandomform.php',39],['lib/form/tests','datetimeselector_test.php',188],['backup','restorefile_form.php',27],['mod/assignment','mod_form.php',38],['grade/import','key_form.php',35],['calendar','preferences_form.php',43],['grade/edit/outcome','edit_form.php',32],['admin/tool/monitor/classes','rule_form.php',39],['blocks/rss_client','editfeed.php',42],['admin/mnet','profilefields_form.php',38],['login','change_password_form.php',33],['mod/workshop/form','edit_form.php',43],['mod/folder','mod_form.php',31],['mod/wiki','edit_form.php',38],['mod/assign/feedback/offline','uploadgradesform.php',37],['admin/tool/replace/classes','form.php',33],['lib/editor/tinymce/plugins/managefiles','manage_form.php',39],['mod/quiz/report','attemptsreport_form.php',31],['mod/forum/classes','post_form.php',77],['user','language_form.php',39],['blocks/community','forms.php',37],['mod/lesson','essay_form.php',41],['mod/lesson','mod_form.php',51],['group','import_form.php',40],['grade/edit/tree','item_form.php',34],['admin/user','user_bulk_forms.php',7],['admin/user','user_bulk_forms.php',41],['grade/grading/form/guide','edit_form.php',41],['admin/tool/assignmentupgrade','paginationform.php',37],['user/profile','index_field_form.php',42],['admin/tool/installaddon/classes','installfromzip_form.php',38],['grade/report/history/classes','filter_form.php',43],['mod/assign','gradingbatchoperationsform.php',38],['mod/page','mod_form.php',33],['badges','edit_form.php',39],['badges','edit_form.php',199],['mod/data','preset_form.php',10],['mod/data','preset_form.php',27],['mod/data','preset_form.php',42],['mod/data','preset_form.php',53],['admin/tool/uploaduser','picture_form.php',31],['blocks','edit_form.php',60],['mod/lesson/pagetypes','shortanswer.php',353],['mod/feedback/classes','course_map_form.php',34],['mod/quiz','accessmanager_form.php',39],['question','export_form.php',40],['mod/workshop','mod_form.php',51],['grade/grading','pick_form.php',38],['course','editsection_form.php',19],['group','autogroup_form.php',41],['admin/tool/capability/classes','settings_form.php',39],['user/filters','user_filter_forms.php',35],['user/filters','user_filter_forms.php',69],['mod/url','mod_form.php',32],['mod/lesson/pagetypes','essay.php',301],['grade/import','grade_import_form.php',26],['grade/import','grade_import_form.php',89],['mod/workshop/form','assessment_form.php',40],['calendar/classes','export_form.php',40],['mod/lesson','override_form.php',80],['enrol/self','locallib.php',69],['grade/grading/form/rubric','edit_form.php',40],['group','grouping_form.php',41],['mod/feedback/item','feedback_item_form_class.php',22],['admin/mnet','services_form.php',36],['admin/tool/filetypes','edit_form.php',36],['mod/data','mod_form.php',10],['mod/workshop/allocation/random','settings_form.php',41],['admin/tool/lp/classes/form','competency_framework.php',41],['course','recent_form.php',33],['mod/forum','mod_form.php',32],['question','category_form.php',40],['mod/quiz/report/grading','gradingsettings_form.php',54],['admin/tool/generator/classes','make_course_form.php',38],['files','coursefilesedit_form.php',21],['mod/workshop','feedbackreviewer_form.php',32],['lib/portfolio','forms.php',48],['lib/portfolio','forms.php',159],['lib/portfolio','forms.php',266],['lib/portfolio','forms.php',315],['course/classes','deletecategory_form.php',45],['mod/book','mod_form.php',32],['mod/lti','edit_form.php',56],['question','previewlib.php',39],['lib/tests/fixtures','max_input_vars.php',38],['enrol','editinstance_form.php',38],['course/publish','forms.php',44],['course/publish','forms.php',96],['mod/glossary','mod_form.php',10],['mod/assign/feedback/file','uploadzipform.php',37],['grade/import/xml','grade_import_form.php',25],['enrol/guest','locallib.php',32],['grade/edit/tree','calculation_form.php',35],['mod/quiz','mod_form.php',61],['admin/tool/lp/classes/form','template_plans.php',41],['login','set_password_form.php',42],['mod/quiz','override_form.php',80],['notes','edit_form.php',25],['cache','forms.php',42],['cache','forms.php',131],['cache','forms.php',202],['cache','forms.php',281],['cache','forms.php',328],['admin/registration','forms.php',42],['admin/registration','forms.php',76],['admin/registration','forms.php',110],['admin/registration','forms.php',192],['blog','external_blog_edit_form.php',34],['user','editadvanced_form.php',39],['question/type/calculated','datasetitems_form.php',116],['mod/assign','submissionconfirmform.php',38],['mod/assign/feedback/file','batchuploadfilesform.php',38],['badges','criteria_form.php',37],['mod/assign/feedback/file','importzipform.php',39],['mod/feedback/item/multichoice','multichoice_form.php',22],['mod/choice','mod_form.php',10],['admin/tool/messageinbound/classes','edit_handler_form.php',37],['badges','backpack_form.php',38],['badges','backpack_form.php',101]], 19],
'set_data': ['set_data', '', [['mod/scorm','mod_form.php',456],['mod/feedback/item/multichoicerated','multichoicerated_form.php',84],['backup/util/structure','restore_path_element.class.php',95],['course','moodleform_mod.php',458],['blocks/html','edit_form.php',53],['question/type','edit_question_form.php',450],['question/type/random','edit_random_form.php',68],['lib','formslib.php',456],['question/type/missingtype','edit_missingtype_form.php',52],['badges','edit_form.php',137],['blocks','edit_form.php',255],['course','editsection_form.php',88],['admin/tool/filetypes','edit_form.php',83],['question','category_form.php',73],['lib/classes/message/inbound','address_manager.php',146],['question/type/multianswer','edit_multianswer_form.php',262],['cache','forms.php',242],['question/type/calculated','datasetitems_form.php',360],['mod/feedback/item/multichoice','multichoice_form.php',79]], 235],
'get_user_preferences': ['get_user_preferences', 'Used to fetch user preference(s) ', [['lib','moodlelib.php',1974],['user','externallib.php',1381]], 188],
'set_sortorder': ['set_sortorder', 'Sets the sortorder of this grade_item. This method is also available in grade_category, for cases where the object type is not know. ', [['lib/grade','grade_item.php',1316],['lib/grade','grade_category.php',2416],['lib/filestorage','stored_file.php',884]], 29],
'get_contenthash': ['get_contenthash', 'Returns sha1 hash code ', [['lib/filebrowser','virtual_root_file.php',299],['lib/filestorage','stored_file.php',795]], 78],
'file_is_accessible': ['file_is_accessible', 'Repository method to make sure that user can access particular file. ', [['repository','lib.php',826],['repository/recent','lib.php',182]], 3],
'get_link': ['get_link', 'Author\'s link ', [['lib/simplepie/library/SimplePie','Author.php',123],['repository/boxnet','lib.php',398],['repository/flickr_public','lib.php',442],['lib/simplepie/library','SimplePie.php',2282],['lib/simplepie/library/SimplePie','Source.php',364],['repository/dropbox','lib.php',506],['repository/coursefiles','lib.php',148],['repository','lib.php',1635],['lib/simplepie/library/SimplePie','Enclosure.php',664],['lib/simplepie/library/SimplePie','Item.php',945],['blocks/rss_client/classes/output','channel_image.php',143],['blocks/rss_client/classes/output','item.php',173],['repository/flickr','lib.php',267]], 24],
'send_file': ['send_file', 'Repository method to serve the referenced file ', [['repository/boxnet','lib.php',482],['lib','filelib.php',2073],['repository/dropbox','lib.php',670],['repository','lib.php',1200],['repository/equella','lib.php',243],['lib/filestorage','stored_file.php',999],['lib','googleapi.php',142],['lib','googleapi.php',253],['repository/filesystem','lib.php',601],['lib/portfolio','plugin.php',811]], 26],
'import_external_file': ['import_external_file', 'Convert file alias to local file ', [['lib/filestorage','file_storage.php',2456]], 3],
'set_missingsource': ['set_missingsource', 'Sets the error status for a file that could not be synchronised ', [['lib/filestorage','stored_file.php',992]], 6],
'strlen': ['strlen', 'Counts the number of characters. Unit-tested by Kasper (single byte charsets only) ', [['lib/typo3','class.t3lib_cs.php',1520],['lib/classes','text.php',305]], 1649],
'add_defaults': ['add_defaults', 'Added defaults to moodle form ', [['repository','lib.php',2819]], 1],
'set_author': ['set_author', 'Set author ', [['lib/filestorage','stored_file.php',843]], 4],
'type_form_validation': ['type_form_validation', 'Validate Admin Settings Moodle form ', [['repository','lib.php',2393]], 1],
'build_source_field': ['build_source_field', 'Build draft file\'s source field ', [['repository','lib.php',2713]], 5],
'table': ['table', 'Log a table in the firebug console ', [['lib/minify/lib','FirePHP.php',454],['lib/adodb','adodb-perf.inc.php',234],['lib','outputcomponents.php',1497]], 257],
'update_visible': ['update_visible', 'Update visible database field with the value given as parameter or with the visible value of this object This function is private. For public access, have a look to switch_and_update_visibility() ', [['repository','lib.php',316]], 1],
'get_license': ['get_license', 'Returns the license type of the file ', [['lib/filebrowser','file_info.php',304],['lib/filebrowser','virtual_root_file.php',317],['lib/filebrowser','file_info_stored.php',276],['lib/filestorage','stored_file.php',814]], 19],
'get_file_storage': ['get_file_storage', 'Returns local file storage instance ', [['lib','moodlelib.php',6144]], 546],
'add_action_buttons': ['add_action_buttons', 'Overriding formslib\'s add_action_buttons() method, to add an extra submit "save changes and return" button. ', [['course','moodleform_mod.php',914],['admin/tool/uploadcourse/classes','step2_form.php',176],['lib','formslib.php',1200]], 208],
'update_visibility': ['update_visibility', '1. Change visibility to the value chosen 2. Update the type ', [['repository','lib.php',410]], 3],
'update_options': ['update_options', 'Update plugin options into the config_plugin table ', [['repository','lib.php',282]], 2],
'get_editable_types': ['get_editable_types', 'Return all types that you a user can create/edit and which are also visible Note: Mostly used in order to know if at least one editable type can be set ', [['repository','lib.php',966]], 3],
'sync_external_file': ['sync_external_file', 'Function repository::sync_external_file() is deprecated. Use repository::sync_reference instead ', [['repository','lib.php',2644],['lib/filestorage','stored_file.php',641]], 7],
'instance_form_validation': ['instance_form_validation', 'Validate repository plugin instance form ', [['repository','lib.php',2435],['repository/filesystem','lib.php',518]], 1],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pdo_moodle_database.php',461],['lib/dml','oci_native_moodle_database.php',1404],['lib/dml','pgsql_native_moodle_database.php',1089],['lib/dml','mssql_native_moodle_database.php',1067],['lib/dml','mysqli_native_moodle_database.php',1405],['lib/dml','sqlsrv_native_moodle_database.php',1148],['lib/dml/tests','dml_test.php',5551]], 650],
'js_init_call': ['js_init_call', 'Ensure that the specified JavaScript function is called from an inline script from page footer. ', [['lib','outputrequirementslib.php',1066]], 95],
'cron': ['cron', 'Find user\'s who have completed this criteria ', [['completion/criteria','completion_criteria_course.php',152],['enrol/manual','lib.php',284],['admin/registration','lib.php',50],['question/engine','bank.php',415],['completion/criteria','completion_criteria_date.php',144],['repository/dropbox','lib.php',704],['lib/classes/update','checker.php',193],['enrol/imsenterprise','lib.php',87],['lib','enrollib.php',1980],['repository','lib.php',2357],['auth/mnet','auth.php',832],['enrol/self','lib.php',423],['cache/classes','helper.php',659],['enrol/cohort','lib.php',164],['lib/filestorage','file_storage.php',2494],['enrol/category','lib.php',77],['mod/assign','assignmentplugin.php',534],['mod/assign','locallib.php',1880],['completion/criteria','completion_criteria_grade.php',185],['blocks/recent_activity','block_recent_activity.php',231],['completion/criteria','completion_criteria_activity.php',198],['enrol/paypal','lib.php',303],['completion/criteria','completion_criteria_duration.php',197],['blocks/rss_client','block_rss_client.php',262],['enrol/meta','lib.php',206]], 71],
'get_referencelastsync': ['get_referencelastsync', 'Get reference last sync time ', [['lib/filestorage','stored_file.php',917]], 5],
'get_type_by_typename': ['get_type_by_typename', 'Get a repository type object by a given type name. ', [['repository','lib.php',647]], 10],
'set_config': ['set_config', 'Set a key in global configuration ', [['lib','moodlelib.php',1336],['lib','enrollib.php',1153],['lib/editor/tinymce/classes','plugin.php',84],['mod/assign','assignmentplugin.php',314],['lib/portfolio','plugin.php',515]], 1119],
'cache_file_by_reference': ['cache_file_by_reference', 'Cache file from external repository by reference ', [['repository/dropbox','lib.php',596],['repository','lib.php',1271]], 1],
'overwrite_existing_draftfile': ['overwrite_existing_draftfile', 'Overwrite an existing file ', [['repository','lib.php',2462]], 3],
'delete_records': ['delete_records', 'Delete the records from a table where all the given conditions met. If conditions not specified, table is truncated. ', [['lib/dml','sqlite3_pdo_moodle_database.php',345],['lib/dml','moodle_database.php',1864]], 773],
'get_status': ['get_status', '', [['backup/util/settings','base_setting.class.php',157],['completion/criteria','completion_criteria_date.php',134],['lib/filebrowser','file_info.php',348],['lib/filebrowser','virtual_root_file.php',281],['lib/filebrowser','file_info_stored.php',321],['lib/filestorage','stored_file.php',777],['completion/criteria','completion_criteria.php',249],['completion','completion_criteria_completion.php',158],['grade/grading/form','lib.php',863],['mod/workshop/allocation','lib.php',128],['completion/criteria','completion_criteria_grade.php',162],['lib/classes/plugininfo','base.php',344],['backup/controller','backup_controller.class.php',287],['completion/criteria','completion_criteria_duration.php',180],['backup/controller','restore_controller.class.php',297]], 180],
'get_params': ['get_params', 'Get the parameters that the user submitted using the form. ', [['admin/webservice','testclient_forms.php',85],['admin/webservice','testclient_forms.php',166],['admin/webservice','testclient_forms.php',260],['mod/lesson/classes','file_info.php',63],['mod/imscp','locallib.php',297],['mod/book','locallib.php',432],['lib/filebrowser','file_info.php',54],['mod/data','locallib.php',457],['lib/filebrowser','file_info_stored.php',76],['mod/workshop','fileinfolib.php',51],['mod/workshop','fileinfolib.php',206],['badges/criteria','award_criteria_overall.php',162],['mod/glossary','locallib.php',505],['backup/util/ui','base_ui_stage.class.php',78],['lib/filebrowser','file_info_context_course.php',610],['lib/filebrowser','file_info_context_course.php',759],['badges/criteria','award_criteria.php',311],['mod/forum','locallib.php',443]], 34],
'repository_default_searchform': ['repository_default_searchform', 'Returns HTML for default repository searchform to be passed to Filepicker ', [['files','renderer.php',1053]], 1],
'get_file_reference': ['get_file_reference', 'Prepare file reference information ', [['repository/boxnet','lib.php',373],['repository/dropbox','lib.php',522],['repository','lib.php',1581],['repository/equella','lib.php',121],['repository/googledocs','lib.php',434]], 6],
'purge': ['purge', 'Purges the cache deleting all items within it. ', [['cache/stores/static','lib.php',409],['cache','disabledlib.php',153],['cache/classes','dummystore.php',221],['cache/classes','loaders.php',832],['cache/classes','loaders.php',2036],['cache/stores/memcache','lib.php',435],['cache/stores/session','lib.php',455],['cache/stores/mongodb','lib.php',415],['cache/stores/file','lib.php',539],['cache/stores/memcached','lib.php',468]], 66],
'send_relative_file': ['send_relative_file', 'Gets a file relative to this file in the repository and sends it to the browser. Used to allow relative file linking within a repository without creating file records for linked files ', [['repository','lib.php',2757],['lib/filestorage','stored_file.php',1023],['repository/filesystem','lib.php',777]], 3],
'addrule': ['addrule', 'Adds a validation rule for the given field ', [['lib','formslib.php',2023],['lib/pear/HTML','QuickForm.php',1016],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter','Column.php',330]], 314],
'get_file_size': ['get_file_size', 'Return size of a file in bytes. ', [['repository','lib.php',1753]], 0],
'get_field_sql': ['get_field_sql', 'Get a single field value (first field) using a SQL statement. ', [['lib/dml','moodle_database.php',1588]], 138],
'get_repository_by_id': ['get_repository_by_id', 'Get repository instance using repository id ', [['repository','lib.php',573]], 39],
'get_meta': ['get_meta', 'Provide repository instance information for Ajax ', [['repository','lib.php',1892]], 3],
'callback': ['callback', 'Catch the request token. ', [['repository/boxnet','lib.php',304],['repository/dropbox','lib.php',148],['repository','lib.php',2341],['repository/googledocs','lib.php',113],['filter/mediaplugin','filter.php',120]], 86],
'get_records': ['get_records', 'Load a list of records. ', [['competency/classes','persistent.php',709],['mod/glossary/classes','entry_query_builder.php',295],['lib/dml','moodle_database.php',1285],['lib','coursecatlib.php',651],['question','category_class.php',63]], 965],
'get': ['get', 'Retrieves a variable reference from the context. ', [['lib/htmlpurifier/HTMLPurifier','Context.php',36],['cache/stores/static','lib.php',220],['cache','disabledlib.php',55],['search/classes','document.php',299],['lib/lessphp','Cache.php',27],['lib/google/src/Google/Service','DataTransfer.php',162],['lib/google/src/Google/Service','DataTransfer.php',208],['lib/minify/lib','JSMinPlus.php',1827],['lib/google/src/Google/Service','AdSense.php',1076],['lib/google/src/Google/Service','AdSense.php',1155],['lib/google/src/Google/Service','AdSense.php',1303],['lib/google/src/Google/Service','AdSense.php',1519],['lib/google/src/Google/Service','AdSense.php',1631],['lib/google/src/Google/Service','AdSense.php',1773],['lib/google/src/Google/Service','AdSense.php',2047],['lib/google/src/Google/Service','Replicapool.php',420],['lib/google/src/Google/Service','Replicapool.php',575],['lib/google/src/Google/Service','Tasks.php',323],['lib/google/src/Google/Service','Tasks.php',442],['lib/google/src/Google/Service','Partners.php',362],['lib/google/src/Google/Service','AndroidPublisher.php',1247],['lib/google/src/Google/Service','AndroidPublisher.php',1349],['lib/google/src/Google/Service','AndroidPublisher.php',1510],['lib/google/src/Google/Service','AndroidPublisher.php',1573],['lib/google/src/Google/Service','AndroidPublisher.php',1796],['lib/google/src/Google/Service','AndroidPublisher.php',1884],['lib/google/src/Google/Service','AndroidPublisher.php',1948],['lib/google/src/Google/Service','AndroidPublisher.php',2098],['lib/google/src/Google/Service','AndroidPublisher.php',2223],['lib/google/src/Google/Service','AndroidPublisher.php',2293],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',146],['lib/google/src/Google/Service','YouTubeReporting.php',273],['lib/google/src/Google/Service','YouTubeReporting.php',326],['lib/google/src/Google/Service','Reseller.php',295],['lib/google/src/Google/Service','Reseller.php',458],['lib/google/src/Google/Cache','Memcache.php',74],['lib','filelib.php',3382],['lib','filelib.php',3630],['lib/google/src/Google/Service','Computeaccounts.php',432],['lib/google/src/Google/Service','Computeaccounts.php',512],['lib/google/src/Google/Service','Computeaccounts.php',683],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',64],['lib/google/src/Google/Service','MapsEngine.php',1530],['lib/google/src/Google/Service','MapsEngine.php',1709],['lib/google/src/Google/Service','MapsEngine.php',2006],['lib/google/src/Google/Service','MapsEngine.php',2268],['lib/google/src/Google/Service','MapsEngine.php',2360],['lib/google/src/Google/Service','MapsEngine.php',2666],['lib/google/src/Google/Service','MapsEngine.php',2927],['lib/google/src/Google/Service','MapsEngine.php',3118],['lib/google/src/Google/Cache','File.php',47],['cache/classes','dummystore.php',141],['lib/google/src/Google/Service','Dns.php',307],['lib/google/src/Google/Service','Dns.php',393],['lib/google/src/Google/Service','Dns.php',444],['cache/classes','loaders.php',278],['cache/classes','loaders.php',1422],['cache/classes','loaders.php',1731],['lib/google/src/Google/Service','Appengine.php',320],['lib/google/src/Google/Service','Appengine.php',368],['lib/google/src/Google/Service','Appengine.php',472],['lib/google/src/Google/Service','Appengine.php',525],['lib/google/src/Google/Service','Urlshortener.php',109],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',74],['lib/google/src/Google/Service','AdExchangeBuyer.php',759],['lib/google/src/Google/Service','AdExchangeBuyer.php',829],['lib/google/src/Google/Service','AdExchangeBuyer.php',870],['lib/google/src/Google/Service','AdExchangeBuyer.php',952],['lib/google/src/Google/Service','AdExchangeBuyer.php',1041],['lib/google/src/Google/Service','AdExchangeBuyer.php',1111],['lib/google/src/Google/Service','AdExchangeBuyer.php',1251],['lib/google/src/Google/Service','AdExchangeBuyer.php',1293],['lib/google/src/Google/Service','AdExchangeBuyer.php',1417],['lib/google/src/Google/Service','AdExchangeBuyer.php',1471],['lib/google/src/Google/Service','AdExchangeBuyer.php',1576],['lib/google/src/Google/Service','Books.php',1456],['lib/google/src/Google/Service','Books.php',1625],['lib/google/src/Google/Service','Books.php',1677],['lib/google/src/Google/Service','Books.php',1752],['lib/google/src/Google/Service','Books.php',2086],['lib/google/src/Google/Service','Books.php',2205],['lib/google/src/Google/Service','Books.php',2262],['lib/google/src/Google/Service','Books.php',2345],['lib/google/src/Google/Service','Books.php',2418],['lib/google/src/Google/Service','Books.php',2450],['lib/google/src/Google/Service','Oauth2.php',165],['lib/google/src/Google/Service','Oauth2.php',202],['lib/google/src/Google/Service','Analytics.php',1988],['lib/google/src/Google/Service','Analytics.php',2037],['lib/google/src/Google/Service','Analytics.php',2084],['lib/google/src/Google/Service','Analytics.php',2308],['lib/google/src/Google/Service','Analytics.php',2422],['lib/google/src/Google/Service','Analytics.php',2550],['lib/google/src/Google/Service','Analytics.php',2670],['lib/google/src/Google/Service','Analytics.php',2763],['lib/google/src/Google/Service','Analytics.php',2889],['lib/google/src/Google/Service','Analytics.php',3108],['lib/google/src/Google/Service','Analytics.php',3245],['lib/google/src/Google/Service','Analytics.php',3336],['lib/google/src/Google/Service','Analytics.php',3422],['lib/google/src/Google/Service','Analytics.php',3533],['lib/google/src/Google/Service','Coordinate.php',509],['lib/google/src/Google/Service','Coordinate.php',689],['lib','oauthlib.php',302],['lib/horde/framework/Horde/Support','ConsistentHash.php',69],['lib/google/src/Google/Service','DeploymentManager.php',468],['lib/google/src/Google/Service','DeploymentManager.php',632],['lib/google/src/Google/Service','DeploymentManager.php',693],['lib/google/src/Google/Service','DeploymentManager.php',752],['lib/google/src/Google/Service','Blogger.php',945],['lib/google/src/Google/Service','Blogger.php',976],['lib/google/src/Google/Service','Blogger.php',1080],['lib/google/src/Google/Service','Blogger.php',1199],['lib/google/src/Google/Service','Blogger.php',1241],['lib/google/src/Google/Service','Blogger.php',1382],['lib/google/src/Google/Service','Blogger.php',1465],['lib/google/src/Google/Service','Blogger.php',1686],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',981],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',16595],['question/engine','states.php',116],['lib/google/src/Google/Service','Dataflow.php',292],['lib/horde/framework/Horde','Variables.php',135],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',58],['competency/classes','persistent.php',86],['lib/google/src/Google/Service','CloudUserAccounts.php',542],['lib/google/src/Google/Service','CloudUserAccounts.php',643],['lib/google/src/Google/Service','CloudUserAccounts.php',908],['lib/google/src/Google/Service','Cloudresourcemanager.php',248],['lib/google/src/Google/Service','Cloudresourcemanager.php',427],['lib/editor/tinymce/classes','plugin.php',447],['lib/simplepie/library/SimplePie/Parse','Date.php',567],['lib/google/src/Google/Service','TagManager.php',950],['lib/google/src/Google/Service','TagManager.php',1036],['lib/google/src/Google/Service','TagManager.php',1128],['lib/google/src/Google/Service','TagManager.php',1280],['lib/google/src/Google/Service','TagManager.php',1373],['lib/google/src/Google/Service','TagManager.php',1467],['lib/google/src/Google/Service','TagManager.php',1561],['lib/google/src/Google/Service','TagManager.php',1711],['mod/lesson','locallib.php',3248],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',163],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',34],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',68],['lib/google/src/Google/Service','Replicapoolupdater.php',338],['lib/google/src/Google/Service','Replicapoolupdater.php',489],['lib/google/src/Google/Service','Bigquery.php',552],['lib/google/src/Google/Service','Bigquery.php',668],['lib/google/src/Google/Service','Bigquery.php',879],['lib/google/src/Google/Service','ShoppingContent.php',1066],['lib/google/src/Google/Service','ShoppingContent.php',1183],['lib/google/src/Google/Service','ShoppingContent.php',1283],['lib/google/src/Google/Service','ShoppingContent.php',1346],['lib/google/src/Google/Service','ShoppingContent.php',1464],['lib/google/src/Google/Service','ShoppingContent.php',1578],['lib/google/src/Google/Service','ShoppingContent.php',1773],['lib/google/src/Google/Service','ShoppingContent.php',1986],['lib/google/src/Google/Service','ShoppingContent.php',2063],['lib/google/src/Google/Service','Webmasters.php',371],['lib/google/src/Google/Service','Webmasters.php',464],['lib/google/src/Google/Service','Webmasters.php',540],['lib','navigationlib.php',384],['lib','navigationlib.php',836],['lib','navigationlib.php',2704],['lib','navigationlib.php',3139],['lib/google/src/Google/Service','Clouddebugger.php',399],['lib/htmlpurifier/HTMLPurifier','Config.php',161],['lib/portfolio','exporter.php',134],['lib/google/src/Google/Service','Container.php',329],['lib/google/src/Google/Service','Container.php',396],['backup/cc/cc_lib/gral_lib','cssparser.php',147],['lib/horde/framework/Horde/Support','Array.php',30],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',46],['lib/google/src/Google/Service','Storage.php',1059],['lib/google/src/Google/Service','Storage.php',1175],['lib/google/src/Google/Service','Storage.php',1349],['lib/google/src/Google/Service','Storage.php',1476],['lib/google/src/Google/Service','Storage.php',1709],['cache/stores/memcache','lib.php',312],['lib/google/src/Google/Service','Genomics.php',660],['lib/google/src/Google/Service','Genomics.php',749],['lib/google/src/Google/Service','Genomics.php',918],['lib/google/src/Google/Service','Genomics.php',1007],['lib/google/src/Google/Service','Genomics.php',1185],['lib/google/src/Google/Service','Genomics.php',1268],['lib/google/src/Google/Service','Genomics.php',1340],['lib/google/src/Google/Service','Genomics.php',1475],['lib/google/src/Google/Service','Games.php',1220],['lib/google/src/Google/Service','Games.php',1339],['lib/google/src/Google/Service','Games.php',1441],['lib/google/src/Google/Service','Games.php',1699],['lib/google/src/Google/Service','Games.php',1806],['lib/google/src/Google/Service','Games.php',1948],['lib/google/src/Google/Service','Games.php',2082],['lib/google/src/Google/Service','Licensing.php',239],['lib/google/src/Google/Service','Fitness.php',417],['lib/google/src/Google/Service','Fitness.php',543],['lib/google/src/Google/Service','Reports.php',375],['lib/google/src/Google/Service','Reports.php',409],['lib/google/src/Google/Service','Gmail.php',779],['lib/google/src/Google/Service','Gmail.php',937],['lib/google/src/Google/Service','Gmail.php',1030],['lib/google/src/Google/Service','Gmail.php',1206],['lib/google/src/Google/Service','Gmail.php',1250],['lib/google/src/Google/Service','Taskqueue.php',264],['lib/google/src/Google/Service','Taskqueue.php',308],['lib/mustache/src/Mustache','HelperCollection.php',81],['cache/classes','interfaces.php',41],['lib/google/src/Google/Service','Doubleclicksearch.php',257],['lib/google/src/Google/Service','Doubleclicksearch.php',381],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',105],['lib/google/src/Google/Service','Autoscaler.php',331],['lib/google/src/Google/Service','Autoscaler.php',445],['lib/google/src/Google/Service','AdExchangeSeller.php',444],['lib/google/src/Google/Service','AdExchangeSeller.php',552],['lib/google/src/Google/Service','AdExchangeSeller.php',666],['lib/horde/framework/Horde/Imap/Client','Cache.php',88],['lib/google/src/Google/Service','Prediction.php',276],['lib/behat/classes','behat_context_helper.php',63],['lib/google/src/Google/Service','SiteVerification.php',152],['lib/google/src/Google/Service','Drive.php',1333],['lib/google/src/Google/Service','Drive.php',1369],['lib/google/src/Google/Service','Drive.php',1422],['lib/google/src/Google/Service','Drive.php',1536],['lib/google/src/Google/Service','Drive.php',1617],['lib/google/src/Google/Service','Drive.php',1792],['lib/google/src/Google/Service','Drive.php',2054],['lib/google/src/Google/Service','Drive.php',2124],['lib/google/src/Google/Service','Drive.php',2256],['lib/google/src/Google/Service','Drive.php',2350],['lib/google/src/Google/Service','Drive.php',2418],['lib/google/src/Google/Service','Drive.php',2537],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',79],['lib/google/src/Google/Service','Proximitybeacon.php',348],['lib/google/src/Google/Service','Groupssettings.php',108],['lib/google/src/Google/Service','Directory.php',1698],['lib/google/src/Google/Service','Directory.php',1766],['lib/google/src/Google/Service','Directory.php',1860],['lib/google/src/Google/Service','Directory.php',1930],['lib/google/src/Google/Service','Directory.php',2003],['lib/google/src/Google/Service','Directory.php',2072],['lib/google/src/Google/Service','Directory.php',2238],['lib/google/src/Google/Service','Directory.php',2365],['lib/google/src/Google/Service','Directory.php',2435],['lib/google/src/Google/Service','Directory.php',2531],['lib/google/src/Google/Service','Directory.php',2666],['lib/google/src/Google/Service','Directory.php',2745],['lib/google/src/Google/Service','Directory.php',2850],['lib/google/src/Google/Service','Directory.php',2954],['lib/google/src/Google/Service','Directory.php',3012],['lib/google/src/Google/Service','Directory.php',3287],['lib/google/src/Google/Service','Fusiontables.php',659],['lib/google/src/Google/Service','Fusiontables.php',826],['lib/google/src/Google/Service','Fusiontables.php',950],['lib/google/src/Google/Service','Fusiontables.php',1141],['lib/google/src/Google/Service','Fusiontables.php',1202],['lib/google/src/Google/Service','AdSenseHost.php',645],['lib/google/src/Google/Service','AdSenseHost.php',686],['lib/google/src/Google/Service','AdSenseHost.php',751],['lib/google/src/Google/Service','AdSenseHost.php',918],['lib/google/src/Google/Service','AdSenseHost.php',1026],['lib/google/src/Google/Service','Plus.php',343],['lib/google/src/Google/Service','Plus.php',418],['lib/google/src/Google/Service','Plus.php',525],['lib/google/src/Google/Service','Mirror.php',438],['lib/google/src/Google/Service','Mirror.php',523],['lib/google/src/Google/Service','Mirror.php',563],['lib/google/src/Google/Service','Mirror.php',674],['lib/google/src/Google/Service','Mirror.php',786],['lib/google/src/Google/Service','AndroidEnterprise.php',1002],['lib/google/src/Google/Service','AndroidEnterprise.php',1109],['lib/google/src/Google/Service','AndroidEnterprise.php',1196],['lib/google/src/Google/Service','AndroidEnterprise.php',1312],['lib/google/src/Google/Service','AndroidEnterprise.php',1432],['lib/google/src/Google/Service','AndroidEnterprise.php',1524],['lib/google/src/Google/Service','AndroidEnterprise.php',1616],['lib/google/src/Google/Service','AndroidEnterprise.php',1705],['lib/google/src/Google/Service','AndroidEnterprise.php',1777],['lib/google/src/Google/Service','AndroidEnterprise.php',1879],['lib/htmlpurifier/HTMLPurifier','DoctypeRegistry.php',76],['lib/testing/classes','nasty_strings.php',73],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',52],['lib/google/src/Google/Service','Playmoviespartner.php',411],['lib/google/src/Google/Service','Playmoviespartner.php',475],['lib/google/src/Google/Service','Playmoviespartner.php',580],['lib','coursecatlib.php',212],['lib/google/src/Google/Service','Cloudtrace.php',217],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/media/js','media.js',7],['tag/classes','tag.php',190],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',65],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Null.php',27],['competency/classes','url.php',55],['lib/portfolio','caller.php',170],['lib/portfolio','caller.php',538],['lib/google/src/Google/Service','Calendar.php',919],['lib/google/src/Google/Service','Calendar.php',1086],['lib/google/src/Google/Service','Calendar.php',1285],['lib/google/src/Google/Service','Calendar.php',1387],['lib/google/src/Google/Service','Calendar.php',1431],['lib/google/src/Google/Service','Calendar.php',1873],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',78],['cache/stores/session','lib.php',225],['lib/google/src/Google/Service','Cloudbilling.php',162],['lib/google/src/Google/Service','PlusDomains.php',468],['lib/google/src/Google/Service','PlusDomains.php',593],['lib/google/src/Google/Service','PlusDomains.php',719],['lib/google/src/Google/Service','PlusDomains.php',813],['lib/google/src/Google/Service','Storagetransfer.php',248],['lib/google/src/Google/Service','Storagetransfer.php',295],['lib/google/src/Google/Service','Storagetransfer.php',396],['cache/stores/mongodb','lib.php',252],['lib/google/src/Google/Cache','Null.php',36],['lib/google/src/Google/Service','GamesConfiguration.php',265],['lib/google/src/Google/Service','GamesConfiguration.php',404],['cache/stores/file','lib.php',330],['cache/stores/memcached','lib.php',319],['lib/google/src/Google/Service','AppState.php',171],['lib/google/src/Google/Service','Resourceviews.php',354],['lib/google/src/Google/Service','Resourceviews.php',439],['lib/portfolio','plugin.php',631],['lib/google/src/Google/Service','Classroom.php',484],['lib/google/src/Google/Service','Classroom.php',724],['lib/google/src/Google/Service','Classroom.php',830],['lib/google/src/Google/Service','Classroom.php',951],['lib/google/src/Google/Service','Classroom.php',1010],['lib/google/src/Google/Service','SQLAdmin.php',804],['lib/google/src/Google/Service','SQLAdmin.php',874],['lib/google/src/Google/Service','SQLAdmin.php',1076],['lib/google/src/Google/Service','SQLAdmin.php',1298],['lib/google/src/Google/Service','SQLAdmin.php',1387],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',67],['lib/google/src/Google/Service','Compute.php',4037],['lib/google/src/Google/Service','Compute.php',4166],['lib/google/src/Google/Service','Compute.php',4299],['lib/google/src/Google/Service','Compute.php',4460],['lib/google/src/Google/Service','Compute.php',4590],['lib/google/src/Google/Service','Compute.php',4686],['lib/google/src/Google/Service','Compute.php',4845],['lib/google/src/Google/Service','Compute.php',4957],['lib/google/src/Google/Service','Compute.php',5048],['lib/google/src/Google/Service','Compute.php',5188],['lib/google/src/Google/Service','Compute.php',5264],['lib/google/src/Google/Service','Compute.php',5394],['lib/google/src/Google/Service','Compute.php',5542],['lib/google/src/Google/Service','Compute.php',5726],['lib/google/src/Google/Service','Compute.php',6001],['lib/google/src/Google/Service','Compute.php',6171],['lib/google/src/Google/Service','Compute.php',6369],['lib/google/src/Google/Service','Compute.php',6595],['lib/google/src/Google/Service','Compute.php',6655],['lib/google/src/Google/Service','Compute.php',6732],['lib/google/src/Google/Service','Compute.php',6808],['lib/google/src/Google/Service','Compute.php',6914],['lib/google/src/Google/Service','Compute.php',6977],['lib/google/src/Google/Service','Compute.php',7052],['lib/google/src/Google/Service','Compute.php',7148],['lib/google/src/Google/Service','Compute.php',7223],['lib/google/src/Google/Service','Compute.php',7315],['lib/google/src/Google/Service','Compute.php',7425],['lib/google/src/Google/Service','Compute.php',7586],['lib/google/src/Google/Service','Compute.php',7750],['lib/google/src/Google/Service','Compute.php',7955],['lib/google/src/Google/Service','Compute.php',8050],['lib/google/src/Google/Service','Compute.php',8226],['lib/google/src/Google/Service','Compute.php',8321],['lib/google/src/Google/Service','Compute.php',8384],['lib/google/src/Google/Service','Pubsub.php',255],['lib/google/src/Google/Service','Pubsub.php',394],['lib/google/src/Google/Cache','Apc.php',52],['lib/google/src/Google/Service','Dfareporting.php',4559],['lib/google/src/Google/Service','Dfareporting.php',4587],['lib/google/src/Google/Service','Dfareporting.php',4629],['lib/google/src/Google/Service','Dfareporting.php',4671],['lib/google/src/Google/Service','Dfareporting.php',4779],['lib/google/src/Google/Service','Dfareporting.php',4867],['lib/google/src/Google/Service','Dfareporting.php',5014],['lib/google/src/Google/Service','Dfareporting.php',5117],['lib/google/src/Google/Service','Dfareporting.php',5308],['lib/google/src/Google/Service','Dfareporting.php',5427],['lib/google/src/Google/Service','Dfareporting.php',5525],['lib/google/src/Google/Service','Dfareporting.php',5580],['lib/google/src/Google/Service','Dfareporting.php',5683],['lib/google/src/Google/Service','Dfareporting.php',5769],['lib/google/src/Google/Service','Dfareporting.php',5891],['lib/google/src/Google/Service','Dfareporting.php',5997],['lib/google/src/Google/Service','Dfareporting.php',6105],['lib/google/src/Google/Service','Dfareporting.php',6255],['lib/google/src/Google/Service','Dfareporting.php',6314],['lib/google/src/Google/Service','Dfareporting.php',6411],['lib/google/src/Google/Service','Dfareporting.php',6529],['lib/google/src/Google/Service','Dfareporting.php',6609],['lib/google/src/Google/Service','Dfareporting.php',6746],['lib/google/src/Google/Service','Dfareporting.php',6862],['lib/google/src/Google/Service','Dfareporting.php',6940],['lib/google/src/Google/Service','Dfareporting.php',7011],['lib/google/src/Google/Service','Dfareporting.php',7131],['lib/google/src/Google/Service','Dfareporting.php',7172],['lib/google/src/Google/Service','Dfareporting.php',7214],['lib/google/src/Google/Service','Dfareporting.php',7256],['lib/google/src/Google/Service','Dfareporting.php',7320],['lib/google/src/Google/Service','Dfareporting.php',7378],['lib/google/src/Google/Service','Dfareporting.php',7517],['lib/google/src/Google/Service','Dfareporting.php',7640],['lib/google/src/Google/Service','Dfareporting.php',7771],['lib/google/src/Google/Service','Dfareporting.php',7812],['lib/google/src/Google/Service','Dfareporting.php',7853],['lib/google/src/Google/Service','Dfareporting.php',7935],['lib/google/src/Google/Service','Dfareporting.php',7995],['lib/google/src/Google/Service','Dfareporting.php',8116],['lib/google/src/Google/Service','Dfareporting.php',8258],['lib/google/src/Google/Service','Dfareporting.php',8307],['lib/google/src/Google/Service','Dfareporting.php',8421],['lib/google/src/Google/Service','Dfareporting.php',8482],['lib/google/src/Google/Service','Dfareporting.php',8584],['lib/google/src/Google/Service','Dfareporting.php',8643],['lib/google/src/Google/Service','Dfareporting.php',8682],['lib/google/src/Google/Service','Dfareporting.php',8724],['lib/google/src/Google/Service','Dfareporting.php',8782],['lib/google/src/Google/Service','Manager.php',259],['lib/google/src/Google/Service','Manager.php',338],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',108],['lib','webdavlib.php',264]], 21532],
'has_moodle_files': ['has_moodle_files', 'Does this repository used to browse moodle files? ', [['repository/coursefiles','lib.php',205],['repository','lib.php',1626],['repository/local','lib.php',120],['repository/recent','lib.php',200],['repository/user','lib.php',144]], 13],
'get_moodle_file': ['get_moodle_file', 'Parses the moodle file reference and returns an instance of stored_file ', [['repository','lib.php',812]], 5],
'get_file_source_info': ['get_file_source_info', 'Return the source information. ', [['repository/boxnet','lib.php',470],['repository/flickr_public','lib.php',546],['repository/dropbox','lib.php',642],['repository','lib.php',1284],['repository/s3','lib.php',251],['repository/equella','lib.php',404],['repository/wikimedia','lib.php',180],['repository/url','lib.php',249],['repository/filesystem','lib.php',415],['repository/flickr','lib.php',340]], 5],
'make_request_directory': ['make_request_directory', 'Create a per-request directory and make sure it is writable. This can only be used during the current request and will be tidied away automatically afterwards. ', [['lib','setuplib.php',1627]], 31],
'get_file': ['get_file', 'Downloads a repository file and saves to a path. ', [['repository/boxnet','lib.php',179],['repository/flickr_public','lib.php',453],['repository/dropbox','lib.php',410],['repository/skydrive','lib.php',130],['repository','lib.php',1647],['repository/s3','lib.php',227],['repository/equella','lib.php',166],['mod/data/field/picture','field.class.php',126],['mod/data/field/file','field.class.php',123],['repository/googledocs','lib.php',408],['lib/filestorage','file_storage.php',700],['repository/webdav','lib.php',73],['repository/filesystem','lib.php',398],['repository/flickr','lib.php',277],['lib','externallib.php',1076],['repository/dropbox','locallib.php',114],['lib','webdavlib.php',391]], 169],
'get_course_context': ['get_course_context', '', [['lib','deprecatedlib.php',1907],['lib','accesslib.php',5764],['lib','accesslib.php',6909],['lib','accesslib.php',7170],['lib','accesslib.php',7381],['mod/assign','gradingtable.php',1372],['mod/assign','locallib.php',1268]], 86],
'global_search': ['global_search', 'is global_search available? ', [['repository/flickr_public','lib.php',114],['repository/skydrive','lib.php',185],['repository','lib.php',2348],['repository/s3','lib.php',270],['repository/wikimedia','lib.php',162],['repository/merlot','lib.php',53],['repository/youtube','lib.php',237],['repository/webdav','lib.php',83],['repository/filesystem','lib.php',389],['repository/flickr','lib.php',137]], 0],
'set_field': ['set_field', 'Set a single field in every table record where all the given conditions met. ', [['lib/dml','moodle_database.php',1737],['availability/condition/profile/tests','condition_test.php',349]], 485],
'get_renderer': ['get_renderer', 'Returns instance of page renderer used by this plugin ', [['course/format','lib.php',905],['question/type/multichoice','question.php',156],['question/type/multichoice','question.php',278],['question/behaviour','behaviourbase.php',135],['question/type','questionbase.php',275],['lib','pagelib.php',802],['lib','outputlib.php',1828],['lib','outputfactories.php',70],['lib','outputfactories.php',292],['lib','outputfactories.php',377],['mod/assign','locallib.php',2987],['grade/grading/form/rubric','lib.php',486],['lib/tests/fixtures','test_renderer_factory.php',49],['grade/grading/form/guide','lib.php',492]], 452],
'get_filesize': ['get_filesize', 'Returns file size in bytes, null for directories ', [['lib/filebrowser','file_info.php',268],['lib/filebrowser','virtual_root_file.php',245],['lib/filebrowser','file_info_stored.php',221],['lib/filestorage','stored_file.php',717]], 83],
'create_file_from_pathname': ['create_file_from_pathname', 'Create new file from pathname - make sure params are valid. ', [['lib/filebrowser','file_info.php',392],['lib/filebrowser','file_info_stored.php',537],['lib/filestorage','file_storage.php',1367]], 54],
'is_loggedinas': ['is_loggedinas', 'Is current $USER logged-in-as somebody else? ', [['lib/classes/session','manager.php',811]], 30],
'get_context_info_array': ['get_context_info_array', 'Returns context instance plus related course and cm instances ', [['lib','accesslib.php',1419]], 55],
'set_source': ['set_source', 'Set license ', [['lib/filestorage','stored_file.php',863]], 10],
'param': ['param', '', [['lib/adodb/drivers','adodb-postgres64.inc.php',609],['lib','weblib.php',453],['lib/adodb/drivers','adodb-oci8po.inc.php',39],['lib/adodb','adodb.inc.php',934],['lib/adodb/drivers','adodb-oci8.inc.php',1179],['lib/adodb/drivers','adodb-db2oci.inc.php',163]], 640],
'get_filepath': ['get_filepath', 'Returns file path ', [['lib/filebrowser','virtual_root_file.php',218],['lib/filestorage','stored_file.php',690],['backup/util/ui','restore_ui_stage.class.php',547]], 147],
'initialise_filepicker': ['initialise_filepicker', 'Generate all options needed by filepicker ', [['repository','lib.php',3037]], 9],
'is_external_file': ['is_external_file', 'Whether or not this is a external resource ', [['lib/filebrowser','file_info.php',339],['lib/filebrowser','file_info_stored.php',312],['lib/filestorage','stored_file.php',94]], 35],
'get_sortorder': ['get_sortorder', 'Returns the sortorder of this grade_item. This method is also available in grade_category, for cases where the object type is not know. ', [['lib/grade','grade_item.php',1286],['lib/grade','grade_category.php',2392],['lib/filebrowser','file_info.php',330],['lib/filebrowser','virtual_root_file.php',344],['lib/filebrowser','file_info_stored.php',303],['repository','lib.php',197],['lib/filestorage','stored_file.php',875]], 127],
'get_readablename': ['get_readablename', 'Return a human readable and user-friendly type name ', [['repository','lib.php',170]], 4],
'supported_returntypes': ['supported_returntypes', 'Box.net supports copied and links. ', [['repository/boxnet','lib.php',342],['repository/picasa','lib.php',104],['repository/flickr_public','lib.php',542],['repository/dropbox','lib.php',497],['repository/skydrive','lib.php',203],['repository/coursefiles','lib.php',197],['repository','lib.php',1881],['repository/upload','lib.php',282],['repository/s3','lib.php',309],['repository/equella','lib.php',112],['repository/wikimedia','lib.php',176],['repository/googledocs','lib.php',457],['repository/merlot','lib.php',154],['repository/youtube','lib.php',296],['repository/webdav','lib.php',189],['repository/url','lib.php',245],['repository/local','lib.php',111],['repository/recent','lib.php',173],['repository/filesystem','lib.php',534],['repository/flickr','lib.php',336],['repository/user','lib.php',153],['repository/areafiles','lib.php',127]], 5],
'prepare_file': ['prepare_file', 'Get a unique file path in which to save the file. ', [['repository','lib.php',1610]], 15],
'create_file_from_storedfile': ['create_file_from_storedfile', 'Create new file from stored file - make sure params are valid. ', [['lib/filebrowser','file_info.php',405],['lib/filebrowser','file_info_stored.php',584],['lib/filestorage','file_storage.php',1186]], 47],
'get_reference_details': ['get_reference_details', 'Return human readable reference information {@link stored_file::get_reference()} ', [['repository/boxnet','lib.php',452],['repository/dropbox','lib.php',612],['repository','lib.php',1236],['repository/equella','lib.php',416],['lib/filestorage','stored_file.php',946],['repository/filesystem','lib.php',543]], 6],
'get_option': ['get_option', 'get api_key from config table ', [['repository/flickr_public','lib.php',99],['repository/dropbox','lib.php',323],['repository','lib.php',2068],['repository/youtube','lib.php',108],['repository/flickr','lib.php',120]], 29],
'get_instance_option_names': ['get_instance_option_names', 'Names of the instance settings ', [['repository/flickr_public','lib.php',492],['repository','lib.php',2425],['repository/equella','lib.php',305],['repository/webdav','lib.php',158],['repository/filesystem','lib.php',434]], 3],
'check_login': ['check_login', 'check if user logged ', [['repository/boxnet','lib.php',148],['repository/picasa','lib.php',56],['repository/flickr_public','lib.php',127],['repository/dropbox','lib.php',118],['repository/skydrive','lib.php',63],['repository','lib.php',2311],['repository/s3','lib.php',261],['repository/wikimedia','lib.php',100],['repository/googledocs','lib.php',125],['repository/merlot','lib.php',44],['repository/youtube','lib.php',123],['repository/webdav','lib.php',70],['repository/url','lib.php',53],['repository/filesystem','lib.php',371],['repository/flickr','lib.php',81]], 6],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 2229],
'convert_references_to_local': ['convert_references_to_local', 'Find all external files in this repo and import them ', [['repository','lib.php',2625]], 2],
'get_typename': ['get_typename', 'Returns repository type name ', [['lib/testing/generator','repository_generator.php',54],['repository','lib.php',160],['repository','lib.php',629]], 31],
'fullname': ['fullname', 'Returns a persons full name ', [['lib','moodlelib.php',3249],['mod/assign','locallib.php',3915]], 546],
'removeelement': ['removeelement', 'Removes an element ', [['lib/pear/HTML','QuickForm.php',980],['theme/bootstrapbase/amd/src','bootstrap.js',116]], 100],
'get_repository_id': ['get_repository_id', 'Returns repository id ', [['lib/filestorage','stored_file.php',896]], 17],
'append_suffix': ['append_suffix', 'Append a suffix to filename. ', [['repository','lib.php',947]], 2],
'set_option': ['set_option', 'save api_key in config table ', [['repository/flickr_public','lib.php',86],['repository/dropbox','lib.php',300],['repository','lib.php',2036],['repository/youtube','lib.php',95],['repository/filesystem','lib.php',443],['lib/tests','filelib_test.php',1223],['repository/flickr','lib.php',102]], 10],
'max': ['max', '', [], 1266],
'unlink': ['unlink', '', [], 256],
'settype': ['settype', '', [], 1429],
'get_class': ['get_class', '', [], 305],
'explode': ['explode', '', [], 1572],
'ksort': ['ksort', '', [], 153],
'link': ['link', '', [], 695],
'substr': ['substr', '', [], 2823],
'array_shift': ['array_shift', '', [], 700],
'pathinfo': ['pathinfo', '', [], 68],
'array_filter': ['array_filter', '', [], 70],
'in_array': ['in_array', '', [], 1234],
'is_object': ['is_object', '', [], 544],
'rename': ['rename', '', [], 48],
'is_a': ['is_a', '', [], 40],
'array_intersect': ['array_intersect', '', [], 50],
'base64_encode': ['base64_encode', '', [], 134],
'array_pop': ['array_pop', '', [], 483],
'method_exists': ['method_exists', '', [], 265],
'is_array': ['is_array', '', [], 1608],
'preg_quote': ['preg_quote', '', [], 205],
'array_values': ['array_values', '', [], 342],
'trim': ['trim', '', [], 1948],
'is_numeric': ['is_numeric', '', [], 672],
'count': ['count', '', [], 4095],
'file_exists': ['file_exists', '', [], 867],
'define': ['define', '', [], 2373],
'time': ['time', '', [], 1959],
'preg_replace': ['preg_replace', '', [], 917],
'array_key_exists': ['array_key_exists', '', [], 1445],
'sha1': ['sha1', '', [], 186],
'unserialize': ['unserialize', '', [], 192],
'base64_decode': ['base64_decode', '', [], 92],
'stristr': ['stristr', '', [], 53],
'serialize': ['serialize', '', [], 282],
'preg_match': ['preg_match', '', [], 1286],
'is_bool': ['is_bool', '', [], 153],
'rtrim': ['rtrim', '', [], 165],
'call_user_func': ['call_user_func', '', [], 113],
'basename': ['basename', '', [], 153],
'array_reverse': ['array_reverse', '', [], 130],
'defined': ['defined', '', [], 4731],
'is_subclass_of': ['is_subclass_of', '', [], 33],
'func_get_args': ['func_get_args', '', [], 147],
'array_merge': ['array_merge', '', [], 2944],
'call_user_func_array': ['call_user_func_array', '', [], 94]};
CLASS_DATA={
'manager': ['manager', 'Search subsystem manager. ', [['search/classes','manager.php',31],['user/classes/output/myprofile','manager.php',28],['lib/classes/antivirus','manager.php',29],['lib/classes/event','manager.php',30],['lib/classes/task','manager.php',28],['admin/tool/messageinbound/classes','manager.php',29],['lib/classes/message/inbound','manager.php',29],['admin/tool/log/classes/log','manager.php',29],['lib/classes/log','manager.php',29],['lib/classes/session','manager.php',29],['lib/classes/message','manager.php',31]], 585],
'moodle_exception': ['moodle_exception', 'Base Moodle Exception class ', [['lib','setuplib.php',75]], 606],
'core_text': ['core_text', 'defines string api\'s for manipulating strings ', [['lib/classes','text.php',27]], 566],
'context_course': ['context_course', 'Course context class ', [['lib','accesslib.php',6817]], 1323],
'cacheable_object': ['cacheable_object', 'Cacheable object. ', [['cache/classes','interfaces.php',439]], 2],
'html_writer': ['html_writer', 'Simple html output class ', [['lib','outputcomponents.php',1062]], 5120],
'file_exception': ['file_exception', 'Basic file related exception class. ', [['lib/filestorage','file_exceptions.php',27]], 92],
'context_system': ['context_system', 'System context class ', [['lib','accesslib.php',6157]], 1147],
'context_user': ['context_user', 'User context class ', [['lib','accesslib.php',6398]], 414],
'repository_exception': ['repository_exception', 'Exception class for repository api ', [['repository','lib.php',2794]], 26],
'html_table': ['html_table', 'Holds all the information required to render a <table> by {@link core_renderer::table()} ', [['lib','outputcomponents.php',2011]], 225],
'coding_exception': ['coding_exception', 'Exception indicating programming error, must be fixed by a programer. For example a core API might throw this type of exception if a plugin calls it incorrectly. ', [['lib','setuplib.php',239]], 1200],
'cache': ['cache', 'The main cache class. ', [['cache/classes','loaders.php',31]], 284],
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',238]], 3088],
'repository_type': ['repository_type', 'This class is used to manage repository plugins ', [['repository','lib.php',35]], 14],
'repository': ['repository', 'Class for repositories ', [['lib/classes/plugininfo','repository.php',30]], 210],
'cacheable_object_array': ['cacheable_object_array', 'An array of cacheable objects. ', [['cache','lib.php',153]], 2],
'curl': ['curl', 'RESTful cURL class ', [['lib','filelib.php',2656]], 74],
'file_storage': ['file_storage', 'File storage class used for low level access to stored files. ', [['lib/filestorage','file_storage.php',30]], 21]};
CONST_DATA={
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153],
'DEBUG_DEVELOPER': ['DEBUG_DEVELOPER', '', [['lib','setuplib.php',40]], 736],
'CONTEXT_BLOCK': ['CONTEXT_BLOCK', '', [['lib','accesslib.php',156]], 96],
'CONTEXT_MODULE': ['CONTEXT_MODULE', '', [['lib','accesslib.php',150]], 466],
'FILE_REFERENCE': ['FILE_REFERENCE', '', [['repository','lib.php',32]], 13],
'PARAM_ALPHANUMEXT': ['PARAM_ALPHANUMEXT', '', [['lib','moodlelib.php',93]], 200],
'PARAM_AREA': ['PARAM_AREA', '', [['lib','moodlelib.php',317]], 47],
'PARAM_TEXT': ['PARAM_TEXT', '', [['lib','moodlelib.php',228]], 542],
'PARAM_COMPONENT': ['PARAM_COMPONENT', '', [['lib','moodlelib.php',310]], 113],
'FILE_INTERNAL': ['FILE_INTERNAL', '', [['repository','lib.php',31]], 48],
'PARAM_INT': ['PARAM_INT', '', [['lib','moodlelib.php',156]], 3812],
'SYSCONTEXTID': ['SYSCONTEXTID', '', [['lib','accesslib.php',6316]], 72],
'SQL_PARAMS_NAMED': ['SQL_PARAMS_NAMED', '', [['lib/dml','moodle_database.php',32]], 315],
'PARAM_PATH': ['PARAM_PATH', '', [['lib','moodlelib.php',178]], 175],
'PARAM_SAFEDIR': ['PARAM_SAFEDIR', '', [['lib','moodlelib.php',203]], 46],
'PARAM_BOOL': ['PARAM_BOOL', '', [['lib','moodlelib.php',108]], 802],
'PARAM_PLUGIN': ['PARAM_PLUGIN', '', [['lib','moodlelib.php',324]], 104],
'CONTEXT_USER': ['CONTEXT_USER', '', [['lib','accesslib.php',144]], 123],
'FILE_EXTERNAL': ['FILE_EXTERNAL', '', [['repository','lib.php',30]], 25],
'PARAM_FILE': ['PARAM_FILE', '', [['lib','moodlelib.php',133]], 121],
'IGNORE_MISSING': ['IGNORE_MISSING', '', [['lib','dmllib.php',48]], 215],
'PARAM_RAW': ['PARAM_RAW', '', [['lib','moodlelib.php',193]], 921],
'FILE_AREA_MAX_BYTES_UNLIMITED': ['FILE_AREA_MAX_BYTES_UNLIMITED', '', [['lib','filelib.php',35]], 17],
'CONTEXT_SYSTEM': ['CONTEXT_SYSTEM', '', [['lib','accesslib.php',142]], 184],
'CONTEXT_COURSE': ['CONTEXT_COURSE', '', [['lib','accesslib.php',148]], 441],
'RENAME_SUFFIX': ['RENAME_SUFFIX', '', [['repository','lib.php',33]], 3]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
