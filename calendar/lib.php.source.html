<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /calendar/lib.php source</title>
    <link rel="stylesheet" href="../sample.css" type="text/css">
    <link rel="stylesheet" href="../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../';
subdir='calendar';
filename='lib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/calendar/</a> -> <a href="lib.php.html">lib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="lib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="lib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Calendar extension</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package    core_calendar</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @copyright  2004 Greek School Network (http://www.sch.gr), Jon Papaioannou,</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> *             Avgoustos Tsinakos</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> */</span>
<a name="l25"><span class="linenum">  25</span></a>  
<a name="l26"><span class="linenum">  26</span></a>  if (!<a class="phpfunction" onClick="logFunction('defined')" href="../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>')) {
<a name="l27"><span class="linenum">  27</span></a>      die('Direct access to this script is forbidden.');    <span class="comment">///  It must be included from a Moodle page</span>
<a name="l28"><span class="linenum">  28</span></a>  }
<a name="l29"><span class="linenum">  29</span></a>  
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment">/**</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> *  These are read by the administration component to provide default values</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> */</span>
<a name="l33"><span class="linenum">  33</span></a>  
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment">/**</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment"> * CALENDAR_DEFAULT_UPCOMING_LOOKAHEAD - default value of upcoming event preference</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment"> */</span>
<a name="l37"><span class="linenum">  37</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('CALENDAR_DEFAULT_UPCOMING_LOOKAHEAD')" href="../_constants/CALENDAR_DEFAULT_UPCOMING_LOOKAHEAD.html" onMouseOver="constPopup(event,'CALENDAR_DEFAULT_UPCOMING_LOOKAHEAD')">CALENDAR_DEFAULT_UPCOMING_LOOKAHEAD</a>', 21);
<a name="l38"><span class="linenum">  38</span></a>  
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment">/**</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment"> * CALENDAR_DEFAULT_UPCOMING_MAXEVENTS - default value to display the maximum number of upcoming event</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment"> */</span>
<a name="l42"><span class="linenum">  42</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('CALENDAR_DEFAULT_UPCOMING_MAXEVENTS')" href="../_constants/CALENDAR_DEFAULT_UPCOMING_MAXEVENTS.html" onMouseOver="constPopup(event,'CALENDAR_DEFAULT_UPCOMING_MAXEVENTS')">CALENDAR_DEFAULT_UPCOMING_MAXEVENTS</a>', 10);
<a name="l43"><span class="linenum">  43</span></a>  
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment">/**</span>
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment"> * CALENDAR_DEFAULT_STARTING_WEEKDAY - default value to display the starting weekday</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment"> */</span>
<a name="l47"><span class="linenum">  47</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('CALENDAR_DEFAULT_STARTING_WEEKDAY')" href="../_constants/CALENDAR_DEFAULT_STARTING_WEEKDAY.html" onMouseOver="constPopup(event,'CALENDAR_DEFAULT_STARTING_WEEKDAY')">CALENDAR_DEFAULT_STARTING_WEEKDAY</a>', 1);
<a name="l48"><span class="linenum">  48</span></a>  
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment">// This is a packed bitfield: day X is &quot;weekend&quot; if $field &amp; (1 &lt;&lt; X) is true</span>
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment">// Default value = 65 = 64 + 1 = 2^6 + 2^0 = Saturday &amp; Sunday</span>
<a name="l51"><span class="linenum">  51</span></a>  
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment">/**</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment"> * CALENDAR_DEFAULT_WEEKEND - default value for weekend (Saturday &amp; Sunday)</span>
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment"> */</span>
<a name="l55"><span class="linenum">  55</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('CALENDAR_DEFAULT_WEEKEND')" href="../_constants/CALENDAR_DEFAULT_WEEKEND.html" onMouseOver="constPopup(event,'CALENDAR_DEFAULT_WEEKEND')">CALENDAR_DEFAULT_WEEKEND</a>', 65);
<a name="l56"><span class="linenum">  56</span></a>  
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment">/**</span>
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment"> * CALENDAR_URL - path to calendar's folder</span>
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment"> */</span>
<a name="l60"><span class="linenum">  60</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('CALENDAR_URL')" href="../_constants/CALENDAR_URL.html" onMouseOver="constPopup(event,'CALENDAR_URL')">CALENDAR_URL</a>', <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>.'/calendar/');
<a name="l61"><span class="linenum">  61</span></a>  
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment">/**</span>
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment"> * CALENDAR_TF_24 - Calendar time in 24 hours format</span>
<a name="l64"><span class="linenum">  64</span></a>  <span class="comment"> */</span>
<a name="l65"><span class="linenum">  65</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('CALENDAR_TF_24')" href="../_constants/CALENDAR_TF_24.html" onMouseOver="constPopup(event,'CALENDAR_TF_24')">CALENDAR_TF_24</a>', '%H:%M');
<a name="l66"><span class="linenum">  66</span></a>  
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">/**</span>
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment"> * CALENDAR_TF_12 - Calendar time in 12 hours format</span>
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment"> */</span>
<a name="l70"><span class="linenum">  70</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('CALENDAR_TF_12')" href="../_constants/CALENDAR_TF_12.html" onMouseOver="constPopup(event,'CALENDAR_TF_12')">CALENDAR_TF_12</a>', '%I:%M %p');
<a name="l71"><span class="linenum">  71</span></a>  
<a name="l72"><span class="linenum">  72</span></a>  <span class="comment">/**</span>
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment"> * CALENDAR_EVENT_GLOBAL - Global calendar event types</span>
<a name="l74"><span class="linenum">  74</span></a>  <span class="comment"> */</span>
<a name="l75"><span class="linenum">  75</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('CALENDAR_EVENT_GLOBAL')" href="../_constants/CALENDAR_EVENT_GLOBAL.html" onMouseOver="constPopup(event,'CALENDAR_EVENT_GLOBAL')">CALENDAR_EVENT_GLOBAL</a>', 1);
<a name="l76"><span class="linenum">  76</span></a>  
<a name="l77"><span class="linenum">  77</span></a>  <span class="comment">/**</span>
<a name="l78"><span class="linenum">  78</span></a>  <span class="comment"> * CALENDAR_EVENT_COURSE - Course calendar event types</span>
<a name="l79"><span class="linenum">  79</span></a>  <span class="comment"> */</span>
<a name="l80"><span class="linenum">  80</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('CALENDAR_EVENT_COURSE')" href="../_constants/CALENDAR_EVENT_COURSE.html" onMouseOver="constPopup(event,'CALENDAR_EVENT_COURSE')">CALENDAR_EVENT_COURSE</a>', 2);
<a name="l81"><span class="linenum">  81</span></a>  
<a name="l82"><span class="linenum">  82</span></a>  <span class="comment">/**</span>
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment"> * CALENDAR_EVENT_GROUP - group calendar event types</span>
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment"> */</span>
<a name="l85"><span class="linenum">  85</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('CALENDAR_EVENT_GROUP')" href="../_constants/CALENDAR_EVENT_GROUP.html" onMouseOver="constPopup(event,'CALENDAR_EVENT_GROUP')">CALENDAR_EVENT_GROUP</a>', 4);
<a name="l86"><span class="linenum">  86</span></a>  
<a name="l87"><span class="linenum">  87</span></a>  <span class="comment">/**</span>
<a name="l88"><span class="linenum">  88</span></a>  <span class="comment"> * CALENDAR_EVENT_USER - user calendar event types</span>
<a name="l89"><span class="linenum">  89</span></a>  <span class="comment"> */</span>
<a name="l90"><span class="linenum">  90</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('CALENDAR_EVENT_USER')" href="../_constants/CALENDAR_EVENT_USER.html" onMouseOver="constPopup(event,'CALENDAR_EVENT_USER')">CALENDAR_EVENT_USER</a>', 8);
<a name="l91"><span class="linenum">  91</span></a>  
<a name="l92"><span class="linenum">  92</span></a>  
<a name="l93"><span class="linenum">  93</span></a>  <span class="comment">/**</span>
<a name="l94"><span class="linenum">  94</span></a>  <span class="comment"> * CALENDAR_IMPORT_FROM_FILE - import the calendar from a file</span>
<a name="l95"><span class="linenum">  95</span></a>  <span class="comment"> */</span>
<a name="l96"><span class="linenum">  96</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('CALENDAR_IMPORT_FROM_FILE')" href="../_constants/CALENDAR_IMPORT_FROM_FILE.html" onMouseOver="constPopup(event,'CALENDAR_IMPORT_FROM_FILE')">CALENDAR_IMPORT_FROM_FILE</a>', 0);
<a name="l97"><span class="linenum">  97</span></a>  
<a name="l98"><span class="linenum">  98</span></a>  <span class="comment">/**</span>
<a name="l99"><span class="linenum">  99</span></a>  <span class="comment"> * CALENDAR_IMPORT_FROM_URL - import the calendar from a URL</span>
<a name="l100"><span class="linenum"> 100</span></a>  <span class="comment"> */</span>
<a name="l101"><span class="linenum"> 101</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('CALENDAR_IMPORT_FROM_URL')" href="../_constants/CALENDAR_IMPORT_FROM_URL.html" onMouseOver="constPopup(event,'CALENDAR_IMPORT_FROM_URL')">CALENDAR_IMPORT_FROM_URL</a>',  1);
<a name="l102"><span class="linenum"> 102</span></a>  
<a name="l103"><span class="linenum"> 103</span></a>  <span class="comment">/**</span>
<a name="l104"><span class="linenum"> 104</span></a>  <span class="comment"> * CALENDAR_IMPORT_EVENT_UPDATED - imported event was updated</span>
<a name="l105"><span class="linenum"> 105</span></a>  <span class="comment"> */</span>
<a name="l106"><span class="linenum"> 106</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('CALENDAR_IMPORT_EVENT_UPDATED')" href="../_constants/CALENDAR_IMPORT_EVENT_UPDATED.html" onMouseOver="constPopup(event,'CALENDAR_IMPORT_EVENT_UPDATED')">CALENDAR_IMPORT_EVENT_UPDATED</a>',  1);
<a name="l107"><span class="linenum"> 107</span></a>  
<a name="l108"><span class="linenum"> 108</span></a>  <span class="comment">/**</span>
<a name="l109"><span class="linenum"> 109</span></a>  <span class="comment"> * CALENDAR_IMPORT_EVENT_INSERTED - imported event was added by insert</span>
<a name="l110"><span class="linenum"> 110</span></a>  <span class="comment"> */</span>
<a name="l111"><span class="linenum"> 111</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('CALENDAR_IMPORT_EVENT_INSERTED')" href="../_constants/CALENDAR_IMPORT_EVENT_INSERTED.html" onMouseOver="constPopup(event,'CALENDAR_IMPORT_EVENT_INSERTED')">CALENDAR_IMPORT_EVENT_INSERTED</a>', 2);
<a name="l112"><span class="linenum"> 112</span></a>  
<a name="l113"><span class="linenum"> 113</span></a>  <span class="comment">/**</span>
<a name="l114"><span class="linenum"> 114</span></a>  <span class="comment"> * CALENDAR_SUBSCRIPTION_UPDATE - Used to represent update action for subscriptions in various forms.</span>
<a name="l115"><span class="linenum"> 115</span></a>  <span class="comment"> */</span>
<a name="l116"><span class="linenum"> 116</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('CALENDAR_SUBSCRIPTION_UPDATE')" href="../_constants/CALENDAR_SUBSCRIPTION_UPDATE.html" onMouseOver="constPopup(event,'CALENDAR_SUBSCRIPTION_UPDATE')">CALENDAR_SUBSCRIPTION_UPDATE</a>', 1);
<a name="l117"><span class="linenum"> 117</span></a>  
<a name="l118"><span class="linenum"> 118</span></a>  <span class="comment">/**</span>
<a name="l119"><span class="linenum"> 119</span></a>  <span class="comment"> * CALENDAR_SUBSCRIPTION_REMOVE - Used to represent remove action for subscriptions in various forms.</span>
<a name="l120"><span class="linenum"> 120</span></a>  <span class="comment"> */</span>
<a name="l121"><span class="linenum"> 121</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('CALENDAR_SUBSCRIPTION_REMOVE')" href="../_constants/CALENDAR_SUBSCRIPTION_REMOVE.html" onMouseOver="constPopup(event,'CALENDAR_SUBSCRIPTION_REMOVE')">CALENDAR_SUBSCRIPTION_REMOVE</a>', 2);
<a name="l122"><span class="linenum"> 122</span></a>  
<a name="l123"><span class="linenum"> 123</span></a>  <span class="comment">/**</span>
<a name="l124"><span class="linenum"> 124</span></a>  <span class="comment"> * Return the days of the week</span>
<a name="l125"><span class="linenum"> 125</span></a>  <span class="comment"> *</span>
<a name="l126"><span class="linenum"> 126</span></a>  <span class="comment"> * @return array array of days</span>
<a name="l127"><span class="linenum"> 127</span></a>  <span class="comment"> */</span>
<a name="l128"><span class="linenum"> 128</span></a>  function <a class="function" onClick="logFunction('calendar_get_days')" href="../_functions/calendar_get_days.html" onMouseOver="funcPopup(event,'calendar_get_days')">calendar_get_days</a>() {
<a name="l129"><span class="linenum"> 129</span></a>      <a class="var it3542" onMouseOver="hilite(3542)" onMouseOut="lolite()" onClick="logVariable('calendartype')" href="../_variables/calendartype.html">$calendartype</a> = \core_calendar\<a class="class" onClick="logClass('type_factory')" href="../_classes/type_factory.html" onMouseOver="classPopup(event,'type_factory')">type_factory</a>::<a class="function" onClick="logFunction('get_calendar_instance')" href="../_functions/get_calendar_instance.html" onMouseOver="funcPopup(event,'get_calendar_instance')">get_calendar_instance</a>();
<a name="l130"><span class="linenum"> 130</span></a>      return <a class="var it3542" onMouseOver="hilite(3542)" onMouseOut="lolite()" onClick="logVariable('calendartype')" href="../_variables/calendartype.html">$calendartype</a>-&gt;<a class="function" onClick="logFunction('get_weekdays')" href="../_functions/get_weekdays.html" onMouseOver="funcPopup(event,'get_weekdays')">get_weekdays</a>();
<a name="l131"><span class="linenum"> 131</span></a>  }
<a name="l132"><span class="linenum"> 132</span></a>  
<a name="l133"><span class="linenum"> 133</span></a>  <span class="comment">/**</span>
<a name="l134"><span class="linenum"> 134</span></a>  <span class="comment"> * Get the subscription from a given id</span>
<a name="l135"><span class="linenum"> 135</span></a>  <span class="comment"> *</span>
<a name="l136"><span class="linenum"> 136</span></a>  <span class="comment"> * @since Moodle 2.5</span>
<a name="l137"><span class="linenum"> 137</span></a>  <span class="comment"> * @param int $id id of the subscription</span>
<a name="l138"><span class="linenum"> 138</span></a>  <span class="comment"> * @return stdClass Subscription record from DB</span>
<a name="l139"><span class="linenum"> 139</span></a>  <span class="comment"> * @throws moodle_exception for an invalid id</span>
<a name="l140"><span class="linenum"> 140</span></a>  <span class="comment"> */</span>
<a name="l141"><span class="linenum"> 141</span></a>  function <a class="function" onClick="logFunction('calendar_get_subscription')" href="../_functions/calendar_get_subscription.html" onMouseOver="funcPopup(event,'calendar_get_subscription')">calendar_get_subscription</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>) {
<a name="l142"><span class="linenum"> 142</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l143"><span class="linenum"> 143</span></a>  
<a name="l144"><span class="linenum"> 144</span></a>      <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a> = <a class="class" onClick="logClass('cache')" href="../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'calendar_subscriptions');
<a name="l145"><span class="linenum"> 145</span></a>      <a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a> = <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>);
<a name="l146"><span class="linenum"> 146</span></a>      if (empty(<a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a>)) {
<a name="l147"><span class="linenum"> 147</span></a>          <a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('event_subscriptions', array('id' =&gt; <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l148"><span class="linenum"> 148</span></a>  <span class="comment">        // cache the data.</span>
<a name="l149"><span class="linenum"> 149</span></a>          <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>, <a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a>);
<a name="l150"><span class="linenum"> 150</span></a>      }
<a name="l151"><span class="linenum"> 151</span></a>      return <a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a>;
<a name="l152"><span class="linenum"> 152</span></a>  }
<a name="l153"><span class="linenum"> 153</span></a>  
<a name="l154"><span class="linenum"> 154</span></a>  <span class="comment">/**</span>
<a name="l155"><span class="linenum"> 155</span></a>  <span class="comment"> * Gets the first day of the week</span>
<a name="l156"><span class="linenum"> 156</span></a>  <span class="comment"> *</span>
<a name="l157"><span class="linenum"> 157</span></a>  <span class="comment"> * Used to be define('CALENDAR_STARTING_WEEKDAY', blah);</span>
<a name="l158"><span class="linenum"> 158</span></a>  <span class="comment"> *</span>
<a name="l159"><span class="linenum"> 159</span></a>  <span class="comment"> * @return int</span>
<a name="l160"><span class="linenum"> 160</span></a>  <span class="comment"> */</span>
<a name="l161"><span class="linenum"> 161</span></a>  function <a class="function" onClick="logFunction('calendar_get_starting_weekday')" href="../_functions/calendar_get_starting_weekday.html" onMouseOver="funcPopup(event,'calendar_get_starting_weekday')">calendar_get_starting_weekday</a>() {
<a name="l162"><span class="linenum"> 162</span></a>      <a class="var it3542" onMouseOver="hilite(3542)" onMouseOut="lolite()" onClick="logVariable('calendartype')" href="../_variables/calendartype.html">$calendartype</a> = \core_calendar\<a class="class" onClick="logClass('type_factory')" href="../_classes/type_factory.html" onMouseOver="classPopup(event,'type_factory')">type_factory</a>::<a class="function" onClick="logFunction('get_calendar_instance')" href="../_functions/get_calendar_instance.html" onMouseOver="funcPopup(event,'get_calendar_instance')">get_calendar_instance</a>();
<a name="l163"><span class="linenum"> 163</span></a>      return <a class="var it3542" onMouseOver="hilite(3542)" onMouseOut="lolite()" onClick="logVariable('calendartype')" href="../_variables/calendartype.html">$calendartype</a>-&gt;<a class="function" onClick="logFunction('get_starting_weekday')" href="../_functions/get_starting_weekday.html" onMouseOver="funcPopup(event,'get_starting_weekday')">get_starting_weekday</a>();
<a name="l164"><span class="linenum"> 164</span></a>  }
<a name="l165"><span class="linenum"> 165</span></a>  
<a name="l166"><span class="linenum"> 166</span></a>  <span class="comment">/**</span>
<a name="l167"><span class="linenum"> 167</span></a>  <span class="comment"> * Generates the HTML for a miniature calendar</span>
<a name="l168"><span class="linenum"> 168</span></a>  <span class="comment"> *</span>
<a name="l169"><span class="linenum"> 169</span></a>  <span class="comment"> * @param array $courses list of course to list events from</span>
<a name="l170"><span class="linenum"> 170</span></a>  <span class="comment"> * @param array $groups list of group</span>
<a name="l171"><span class="linenum"> 171</span></a>  <span class="comment"> * @param array $users user's info</span>
<a name="l172"><span class="linenum"> 172</span></a>  <span class="comment"> * @param int|bool $calmonth calendar month in numeric, default is set to false</span>
<a name="l173"><span class="linenum"> 173</span></a>  <span class="comment"> * @param int|bool $calyear calendar month in numeric, default is set to false</span>
<a name="l174"><span class="linenum"> 174</span></a>  <span class="comment"> * @param string|bool $placement the place/page the calendar is set to appear - passed on the the controls function</span>
<a name="l175"><span class="linenum"> 175</span></a>  <span class="comment"> * @param int|bool $courseid id of the course the calendar is displayed on - passed on the the controls function</span>
<a name="l176"><span class="linenum"> 176</span></a>  <span class="comment"> * @param int $time the unixtimestamp representing the date we want to view, this is used instead of $calmonth</span>
<a name="l177"><span class="linenum"> 177</span></a>  <span class="comment"> *     and $calyear to support multiple calendars</span>
<a name="l178"><span class="linenum"> 178</span></a>  <span class="comment"> * @return string $content return html table for mini calendar</span>
<a name="l179"><span class="linenum"> 179</span></a>  <span class="comment"> */</span>
<a name="l180"><span class="linenum"> 180</span></a>  function <a class="function" onClick="logFunction('calendar_get_mini')" href="../_functions/calendar_get_mini.html" onMouseOver="funcPopup(event,'calendar_get_mini')">calendar_get_mini</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>, <a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../_variables/groups.html">$groups</a>, <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../_variables/users.html">$users</a>, <a class="var it38988" onMouseOver="hilite(38988)" onMouseOut="lolite()" onClick="logVariable('calmonth')" href="../_variables/calmonth.html">$calmonth</a> = false, <a class="var it38989" onMouseOver="hilite(38989)" onMouseOut="lolite()" onClick="logVariable('calyear')" href="../_variables/calyear.html">$calyear</a> = false, <a class="var it34534" onMouseOver="hilite(34534)" onMouseOut="lolite()" onClick="logVariable('placement')" href="../_variables/placement.html">$placement</a> = false,
<a name="l181"><span class="linenum"> 181</span></a>      <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a> = false, <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a> = 0) {
<a name="l182"><span class="linenum"> 182</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>;
<a name="l183"><span class="linenum"> 183</span></a>  
<a name="l184"><span class="linenum"> 184</span></a>  <span class="comment">    // Get the calendar type we are using.</span>
<a name="l185"><span class="linenum"> 185</span></a>      <a class="var it3542" onMouseOver="hilite(3542)" onMouseOut="lolite()" onClick="logVariable('calendartype')" href="../_variables/calendartype.html">$calendartype</a> = \core_calendar\<a class="class" onClick="logClass('type_factory')" href="../_classes/type_factory.html" onMouseOver="classPopup(event,'type_factory')">type_factory</a>::<a class="function" onClick="logFunction('get_calendar_instance')" href="../_functions/get_calendar_instance.html" onMouseOver="funcPopup(event,'get_calendar_instance')">get_calendar_instance</a>();
<a name="l186"><span class="linenum"> 186</span></a>  
<a name="l187"><span class="linenum"> 187</span></a>      <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a> = new stdClass;
<a name="l188"><span class="linenum"> 188</span></a>  
<a name="l189"><span class="linenum"> 189</span></a>  <span class="comment">    // Assume we are not displaying this month for now.</span>
<a name="l190"><span class="linenum"> 190</span></a>      <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('thismonth')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/thismonth.html">thismonth</a> = false;
<a name="l191"><span class="linenum"> 191</span></a>  
<a name="l192"><span class="linenum"> 192</span></a>      <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> = '';
<a name="l193"><span class="linenum"> 193</span></a>  
<a name="l194"><span class="linenum"> 194</span></a>  <span class="comment">    // Do this check for backwards compatibility. The core should be passing a timestamp rather than month and year.</span>
<a name="l195"><span class="linenum"> 195</span></a>  <span class="comment">    // If a month and year are passed they will be in Gregorian.</span>
<a name="l196"><span class="linenum"> 196</span></a>      if (!empty(<a class="var it38988" onMouseOver="hilite(38988)" onMouseOut="lolite()" onClick="logVariable('calmonth')" href="../_variables/calmonth.html">$calmonth</a>) &amp;&amp; !empty(<a class="var it38989" onMouseOver="hilite(38989)" onMouseOut="lolite()" onClick="logVariable('calyear')" href="../_variables/calyear.html">$calyear</a>)) {
<a name="l197"><span class="linenum"> 197</span></a>  <span class="comment">        // Ensure it is a valid date, else we will just set it to the current timestamp.</span>
<a name="l198"><span class="linenum"> 198</span></a>          if (<a class="phpfunction" onClick="logFunction('checkdate')" href="../_functions/checkdate.html" onMouseOver="phpfuncPopup(event,'checkdate')">checkdate</a>(<a class="var it38988" onMouseOver="hilite(38988)" onMouseOut="lolite()" onClick="logVariable('calmonth')" href="../_variables/calmonth.html">$calmonth</a>, 1, <a class="var it38989" onMouseOver="hilite(38989)" onMouseOut="lolite()" onClick="logVariable('calyear')" href="../_variables/calyear.html">$calyear</a>)) {
<a name="l199"><span class="linenum"> 199</span></a>              <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a> = <a class="function" onClick="logFunction('make_timestamp')" href="../_functions/make_timestamp.html" onMouseOver="funcPopup(event,'make_timestamp')">make_timestamp</a>(<a class="var it38989" onMouseOver="hilite(38989)" onMouseOut="lolite()" onClick="logVariable('calyear')" href="../_variables/calyear.html">$calyear</a>, <a class="var it38988" onMouseOver="hilite(38988)" onMouseOut="lolite()" onClick="logVariable('calmonth')" href="../_variables/calmonth.html">$calmonth</a>, 1);
<a name="l200"><span class="linenum"> 200</span></a>          } else {
<a name="l201"><span class="linenum"> 201</span></a>              <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l202"><span class="linenum"> 202</span></a>          }
<a name="l203"><span class="linenum"> 203</span></a>          <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a> = <a class="function" onClick="logFunction('usergetdate')" href="../_functions/usergetdate.html" onMouseOver="funcPopup(event,'usergetdate')">usergetdate</a>(<a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>);
<a name="l204"><span class="linenum"> 204</span></a>          if (<a class="var it38988" onMouseOver="hilite(38988)" onMouseOut="lolite()" onClick="logVariable('calmonth')" href="../_variables/calmonth.html">$calmonth</a> == <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>['mon'] &amp;&amp; <a class="var it38989" onMouseOver="hilite(38989)" onMouseOut="lolite()" onClick="logVariable('calyear')" href="../_variables/calyear.html">$calyear</a> == <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>['year']) {
<a name="l205"><span class="linenum"> 205</span></a>              <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('thismonth')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/thismonth.html">thismonth</a> = true;
<a name="l206"><span class="linenum"> 206</span></a>          }
<a name="l207"><span class="linenum"> 207</span></a>  <span class="comment">        // We can overwrite date now with the date used by the calendar type, if it is not Gregorian, otherwise</span>
<a name="l208"><span class="linenum"> 208</span></a>  <span class="comment">        // there is no need as it is already in Gregorian.</span>
<a name="l209"><span class="linenum"> 209</span></a>          if (<a class="var it3542" onMouseOver="hilite(3542)" onMouseOut="lolite()" onClick="logVariable('calendartype')" href="../_variables/calendartype.html">$calendartype</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>() != 'gregorian') {
<a name="l210"><span class="linenum"> 210</span></a>              <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a> = <a class="var it3542" onMouseOver="hilite(3542)" onMouseOut="lolite()" onClick="logVariable('calendartype')" href="../_variables/calendartype.html">$calendartype</a>-&gt;<a class="function" onClick="logFunction('timestamp_to_date_array')" href="../_functions/timestamp_to_date_array.html" onMouseOver="funcPopup(event,'timestamp_to_date_array')">timestamp_to_date_array</a>(<a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>);
<a name="l211"><span class="linenum"> 211</span></a>          }
<a name="l212"><span class="linenum"> 212</span></a>      } else if (!empty(<a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>)) {
<a name="l213"><span class="linenum"> 213</span></a>  <span class="comment">        // Get the specified date in the calendar type being used.</span>
<a name="l214"><span class="linenum"> 214</span></a>          <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a> = <a class="var it3542" onMouseOver="hilite(3542)" onMouseOut="lolite()" onClick="logVariable('calendartype')" href="../_variables/calendartype.html">$calendartype</a>-&gt;<a class="function" onClick="logFunction('timestamp_to_date_array')" href="../_functions/timestamp_to_date_array.html" onMouseOver="funcPopup(event,'timestamp_to_date_array')">timestamp_to_date_array</a>(<a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>);
<a name="l215"><span class="linenum"> 215</span></a>          <a class="var it29828" onMouseOver="hilite(29828)" onMouseOut="lolite()" onClick="logVariable('thisdate')" href="../_variables/thisdate.html">$thisdate</a> = <a class="var it3542" onMouseOver="hilite(3542)" onMouseOut="lolite()" onClick="logVariable('calendartype')" href="../_variables/calendartype.html">$calendartype</a>-&gt;<a class="function" onClick="logFunction('timestamp_to_date_array')" href="../_functions/timestamp_to_date_array.html" onMouseOver="funcPopup(event,'timestamp_to_date_array')">timestamp_to_date_array</a>(<a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>());
<a name="l216"><span class="linenum"> 216</span></a>          if (<a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>['month'] == <a class="var it29828" onMouseOver="hilite(29828)" onMouseOut="lolite()" onClick="logVariable('thisdate')" href="../_variables/thisdate.html">$thisdate</a>['month'] &amp;&amp; <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>['year'] == <a class="var it29828" onMouseOver="hilite(29828)" onMouseOut="lolite()" onClick="logVariable('thisdate')" href="../_variables/thisdate.html">$thisdate</a>['year']) {
<a name="l217"><span class="linenum"> 217</span></a>              <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('thismonth')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/thismonth.html">thismonth</a> = true;
<a name="l218"><span class="linenum"> 218</span></a>  <span class="comment">            // If we are the current month we want to set the date to the current date, not the start of the month.</span>
<a name="l219"><span class="linenum"> 219</span></a>              <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a> = <a class="var it29828" onMouseOver="hilite(29828)" onMouseOut="lolite()" onClick="logVariable('thisdate')" href="../_variables/thisdate.html">$thisdate</a>;
<a name="l220"><span class="linenum"> 220</span></a>          }
<a name="l221"><span class="linenum"> 221</span></a>      } else {
<a name="l222"><span class="linenum"> 222</span></a>  <span class="comment">        // Get the current date in the calendar type being used.</span>
<a name="l223"><span class="linenum"> 223</span></a>          <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l224"><span class="linenum"> 224</span></a>          <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a> = <a class="var it3542" onMouseOver="hilite(3542)" onMouseOut="lolite()" onClick="logVariable('calendartype')" href="../_variables/calendartype.html">$calendartype</a>-&gt;<a class="function" onClick="logFunction('timestamp_to_date_array')" href="../_functions/timestamp_to_date_array.html" onMouseOver="funcPopup(event,'timestamp_to_date_array')">timestamp_to_date_array</a>(<a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>);
<a name="l225"><span class="linenum"> 225</span></a>          <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('thismonth')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/thismonth.html">thismonth</a> = true;
<a name="l226"><span class="linenum"> 226</span></a>      }
<a name="l227"><span class="linenum"> 227</span></a>  
<a name="l228"><span class="linenum"> 228</span></a>      <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it775" onMouseOver="hilite(775)" onMouseOut="lolite()" onClick="logVariable('d')" href="../_variables/d.html">$d</a>, <a class="var it2379" onMouseOver="hilite(2379)" onMouseOut="lolite()" onClick="logVariable('m')" href="../_variables/m.html">$m</a>, <a class="var it5014" onMouseOver="hilite(5014)" onMouseOut="lolite()" onClick="logVariable('y')" href="../_variables/y.html">$y</a>) = array(<a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>['mday'], <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>['mon'], <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>['year']); <span class="comment">// This is what we want to display.</span>
<a name="l229"><span class="linenum"> 229</span></a>  
<a name="l230"><span class="linenum"> 230</span></a>  <span class="comment">    // Get Gregorian date for the start of the month.</span>
<a name="l231"><span class="linenum"> 231</span></a>      <a class="var it3543" onMouseOver="hilite(3543)" onMouseOut="lolite()" onClick="logVariable('gregoriandate')" href="../_variables/gregoriandate.html">$gregoriandate</a> = <a class="var it3542" onMouseOver="hilite(3542)" onMouseOut="lolite()" onClick="logVariable('calendartype')" href="../_variables/calendartype.html">$calendartype</a>-&gt;<a class="function" onClick="logFunction('convert_to_gregorian')" href="../_functions/convert_to_gregorian.html" onMouseOver="funcPopup(event,'convert_to_gregorian')">convert_to_gregorian</a>(<a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>['year'], <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>['mon'], 1);
<a name="l232"><span class="linenum"> 232</span></a>  
<a name="l233"><span class="linenum"> 233</span></a>  <span class="comment">    // Store the gregorian date values to be used later.</span>
<a name="l234"><span class="linenum"> 234</span></a>      <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it29829" onMouseOver="hilite(29829)" onMouseOut="lolite()" onClick="logVariable('gy')" href="../_variables/gy.html">$gy</a>, <a class="var it3015" onMouseOver="hilite(3015)" onMouseOut="lolite()" onClick="logVariable('gm')" href="../_variables/gm.html">$gm</a>, <a class="var it29830" onMouseOver="hilite(29830)" onMouseOut="lolite()" onClick="logVariable('gd')" href="../_variables/gd.html">$gd</a>, <a class="var it29831" onMouseOver="hilite(29831)" onMouseOut="lolite()" onClick="logVariable('gh')" href="../_variables/gh.html">$gh</a>, <a class="var it29832" onMouseOver="hilite(29832)" onMouseOut="lolite()" onClick="logVariable('gmin')" href="../_variables/gmin.html">$gmin</a>) = array(<a class="var it3543" onMouseOver="hilite(3543)" onMouseOut="lolite()" onClick="logVariable('gregoriandate')" href="../_variables/gregoriandate.html">$gregoriandate</a>['year'], <a class="var it3543" onMouseOver="hilite(3543)" onMouseOut="lolite()" onClick="logVariable('gregoriandate')" href="../_variables/gregoriandate.html">$gregoriandate</a>['month'], <a class="var it3543" onMouseOver="hilite(3543)" onMouseOut="lolite()" onClick="logVariable('gregoriandate')" href="../_variables/gregoriandate.html">$gregoriandate</a>['day'],
<a name="l235"><span class="linenum"> 235</span></a>          <a class="var it3543" onMouseOver="hilite(3543)" onMouseOut="lolite()" onClick="logVariable('gregoriandate')" href="../_variables/gregoriandate.html">$gregoriandate</a>['hour'], <a class="var it3543" onMouseOver="hilite(3543)" onMouseOut="lolite()" onClick="logVariable('gregoriandate')" href="../_variables/gregoriandate.html">$gregoriandate</a>['minute']);
<a name="l236"><span class="linenum"> 236</span></a>  
<a name="l237"><span class="linenum"> 237</span></a>  <span class="comment">    // Get the max number of days in this month for this calendar type.</span>
<a name="l238"><span class="linenum"> 238</span></a>      <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('maxdays')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/maxdays.html">maxdays</a> = <a class="function" onClick="logFunction('calendar_days_in_month')" href="../_functions/calendar_days_in_month.html" onMouseOver="funcPopup(event,'calendar_days_in_month')">calendar_days_in_month</a>(<a class="var it2379" onMouseOver="hilite(2379)" onMouseOut="lolite()" onClick="logVariable('m')" href="../_variables/m.html">$m</a>, <a class="var it5014" onMouseOver="hilite(5014)" onMouseOut="lolite()" onClick="logVariable('y')" href="../_variables/y.html">$y</a>);
<a name="l239"><span class="linenum"> 239</span></a>  <span class="comment">    // Get the starting week day for this month.</span>
<a name="l240"><span class="linenum"> 240</span></a>      <a class="var it25906" onMouseOver="hilite(25906)" onMouseOut="lolite()" onClick="logVariable('startwday')" href="../_variables/startwday.html">$startwday</a> = <a class="function" onClick="logFunction('dayofweek')" href="../_functions/dayofweek.html" onMouseOver="funcPopup(event,'dayofweek')">dayofweek</a>(1, <a class="var it2379" onMouseOver="hilite(2379)" onMouseOut="lolite()" onClick="logVariable('m')" href="../_variables/m.html">$m</a>, <a class="var it5014" onMouseOver="hilite(5014)" onMouseOut="lolite()" onClick="logVariable('y')" href="../_variables/y.html">$y</a>);
<a name="l241"><span class="linenum"> 241</span></a>  <span class="comment">    // Get the days in a week.</span>
<a name="l242"><span class="linenum"> 242</span></a>      <a class="var it29833" onMouseOver="hilite(29833)" onMouseOut="lolite()" onClick="logVariable('daynames')" href="../_variables/daynames.html">$daynames</a> = <a class="function" onClick="logFunction('calendar_get_days')" href="../_functions/calendar_get_days.html" onMouseOver="funcPopup(event,'calendar_get_days')">calendar_get_days</a>();
<a name="l243"><span class="linenum"> 243</span></a>  <span class="comment">    // Store the number of days in a week.</span>
<a name="l244"><span class="linenum"> 244</span></a>      <a class="var it29834" onMouseOver="hilite(29834)" onMouseOut="lolite()" onClick="logVariable('numberofdaysinweek')" href="../_variables/numberofdaysinweek.html">$numberofdaysinweek</a> = <a class="var it3542" onMouseOver="hilite(3542)" onMouseOut="lolite()" onClick="logVariable('calendartype')" href="../_variables/calendartype.html">$calendartype</a>-&gt;<a class="function" onClick="logFunction('get_num_weekdays')" href="../_functions/get_num_weekdays.html" onMouseOver="funcPopup(event,'get_num_weekdays')">get_num_weekdays</a>();
<a name="l245"><span class="linenum"> 245</span></a>  
<a name="l246"><span class="linenum"> 246</span></a>  <span class="comment">    // Set the min and max weekday.</span>
<a name="l247"><span class="linenum"> 247</span></a>      <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('minwday')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/minwday.html">minwday</a> = <a class="function" onClick="logFunction('calendar_get_starting_weekday')" href="../_functions/calendar_get_starting_weekday.html" onMouseOver="funcPopup(event,'calendar_get_starting_weekday')">calendar_get_starting_weekday</a>();
<a name="l248"><span class="linenum"> 248</span></a>      <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('maxwday')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/maxwday.html">maxwday</a> = <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('minwday')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/minwday.html">minwday</a> + (<a class="var it29834" onMouseOver="hilite(29834)" onMouseOut="lolite()" onClick="logVariable('numberofdaysinweek')" href="../_variables/numberofdaysinweek.html">$numberofdaysinweek</a> - 1);
<a name="l249"><span class="linenum"> 249</span></a>  
<a name="l250"><span class="linenum"> 250</span></a>  <span class="comment">    // These are used for DB queries, so we want unixtime, so we need to use Gregorian dates.</span>
<a name="l251"><span class="linenum"> 251</span></a>      <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('tstart')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/tstart.html">tstart</a> = <a class="function" onClick="logFunction('make_timestamp')" href="../_functions/make_timestamp.html" onMouseOver="funcPopup(event,'make_timestamp')">make_timestamp</a>(<a class="var it29829" onMouseOver="hilite(29829)" onMouseOut="lolite()" onClick="logVariable('gy')" href="../_variables/gy.html">$gy</a>, <a class="var it3015" onMouseOver="hilite(3015)" onMouseOut="lolite()" onClick="logVariable('gm')" href="../_variables/gm.html">$gm</a>, <a class="var it29830" onMouseOver="hilite(29830)" onMouseOut="lolite()" onClick="logVariable('gd')" href="../_variables/gd.html">$gd</a>, <a class="var it29831" onMouseOver="hilite(29831)" onMouseOut="lolite()" onClick="logVariable('gh')" href="../_variables/gh.html">$gh</a>, <a class="var it29832" onMouseOver="hilite(29832)" onMouseOut="lolite()" onClick="logVariable('gmin')" href="../_variables/gmin.html">$gmin</a>, 0);
<a name="l252"><span class="linenum"> 252</span></a>      <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('tend')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/tend.html">tend</a> = <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('tstart')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/tstart.html">tstart</a> + (<a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('maxdays')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/maxdays.html">maxdays</a> * <a class="constant" onClick="logConstant('DAYSECS')" href="../_constants/DAYSECS.html" onMouseOver="constPopup(event,'DAYSECS')">DAYSECS</a>) - 1;
<a name="l253"><span class="linenum"> 253</span></a>  
<a name="l254"><span class="linenum"> 254</span></a>  <span class="comment">    // Align the starting weekday to fall in our display range</span>
<a name="l255"><span class="linenum"> 255</span></a>  <span class="comment">    // This is simple, not foolproof.</span>
<a name="l256"><span class="linenum"> 256</span></a>      if (<a class="var it25906" onMouseOver="hilite(25906)" onMouseOut="lolite()" onClick="logVariable('startwday')" href="../_variables/startwday.html">$startwday</a> &lt; <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('minwday')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/minwday.html">minwday</a>) {
<a name="l257"><span class="linenum"> 257</span></a>          <a class="var it25906" onMouseOver="hilite(25906)" onMouseOut="lolite()" onClick="logVariable('startwday')" href="../_variables/startwday.html">$startwday</a> += <a class="var it29834" onMouseOver="hilite(29834)" onMouseOut="lolite()" onClick="logVariable('numberofdaysinweek')" href="../_variables/numberofdaysinweek.html">$numberofdaysinweek</a>;
<a name="l258"><span class="linenum"> 258</span></a>      }
<a name="l259"><span class="linenum"> 259</span></a>  
<a name="l260"><span class="linenum"> 260</span></a>  <span class="comment">    // Get the events matching our criteria. Don't forget to offset the timestamps for the user's TZ!</span>
<a name="l261"><span class="linenum"> 261</span></a>      <a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a> = <a class="function" onClick="logFunction('calendar_get_events')" href="../_functions/calendar_get_events.html" onMouseOver="funcPopup(event,'calendar_get_events')">calendar_get_events</a>(<a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('tstart')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/tstart.html">tstart</a>, <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('tend')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/tend.html">tend</a>, <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../_variables/users.html">$users</a>, <a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../_variables/groups.html">$groups</a>, <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>);
<a name="l262"><span class="linenum"> 262</span></a>  
<a name="l263"><span class="linenum"> 263</span></a>  <span class="comment">    // Set event course class for course events</span>
<a name="l264"><span class="linenum"> 264</span></a>      if (!empty(<a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a>)) {
<a name="l265"><span class="linenum"> 265</span></a>          foreach (<a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a> as <a class="var it8046" onMouseOver="hilite(8046)" onMouseOut="lolite()" onClick="logVariable('eventid')" href="../_variables/eventid.html">$eventid</a> =&gt; <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>) {
<a name="l266"><span class="linenum"> 266</span></a>              if (!empty(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('modulename')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/modulename.html">modulename</a>)) {
<a name="l267"><span class="linenum"> 267</span></a>                  <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('modulename')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/modulename.html">modulename</a>, <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('instance')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>);
<a name="l268"><span class="linenum"> 268</span></a>                  if (!\core_availability\<a class="class" onClick="logClass('info_module')" href="../_classes/info_module.html" onMouseOver="classPopup(event,'info_module')">info_module</a>::<a class="function" onClick="logFunction('is_user_visible')" href="../_functions/is_user_visible.html" onMouseOver="funcPopup(event,'is_user_visible')">is_user_visible</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>, 0, false)) {
<a name="l269"><span class="linenum"> 269</span></a>                      unset(<a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a>[<a class="var it8046" onMouseOver="hilite(8046)" onMouseOut="lolite()" onClick="logVariable('eventid')" href="../_variables/eventid.html">$eventid</a>]);
<a name="l270"><span class="linenum"> 270</span></a>                  }
<a name="l271"><span class="linenum"> 271</span></a>              }
<a name="l272"><span class="linenum"> 272</span></a>          }
<a name="l273"><span class="linenum"> 273</span></a>      }
<a name="l274"><span class="linenum"> 274</span></a>  
<a name="l275"><span class="linenum"> 275</span></a>  <span class="comment">    // This is either a genius idea or an idiot idea: in order to not complicate things, we use this rule: if, after</span>
<a name="l276"><span class="linenum"> 276</span></a>  <span class="comment">    // possibly removing SITEID from $courses, there is only one course left, then clicking on a day in the month</span>
<a name="l277"><span class="linenum"> 277</span></a>  <span class="comment">    // will also set the $SESSION-&gt;cal_courses_shown variable to that one course. Otherwise, we 'd need to add extra</span>
<a name="l278"><span class="linenum"> 278</span></a>  <span class="comment">    // arguments to this function.</span>
<a name="l279"><span class="linenum"> 279</span></a>      <a class="var it38990" onMouseOver="hilite(38990)" onMouseOut="lolite()" onClick="logVariable('hrefparams')" href="../_variables/hrefparams.html">$hrefparams</a> = array();
<a name="l280"><span class="linenum"> 280</span></a>      if(!empty(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>)) {
<a name="l281"><span class="linenum"> 281</span></a>          <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> = <a class="phpfunction" onClick="logFunction('array_diff')" href="../_functions/array_diff.html" onMouseOver="phpfuncPopup(event,'array_diff')">array_diff</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>, array(<a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>));
<a name="l282"><span class="linenum"> 282</span></a>          if(<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>) == 1) {
<a name="l283"><span class="linenum"> 283</span></a>              <a class="var it38990" onMouseOver="hilite(38990)" onMouseOut="lolite()" onClick="logVariable('hrefparams')" href="../_variables/hrefparams.html">$hrefparams</a>['course'] = <a class="phpfunction" onClick="logFunction('reset')" href="../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>);
<a name="l284"><span class="linenum"> 284</span></a>          }
<a name="l285"><span class="linenum"> 285</span></a>      }
<a name="l286"><span class="linenum"> 286</span></a>  
<a name="l287"><span class="linenum"> 287</span></a>  <span class="comment">    // We want to have easy access by day, since the display is on a per-day basis.</span>
<a name="l288"><span class="linenum"> 288</span></a>      <a class="function" onClick="logFunction('calendar_events_by_day')" href="../_functions/calendar_events_by_day.html" onMouseOver="funcPopup(event,'calendar_events_by_day')">calendar_events_by_day</a>(<a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a>, <a class="var it2379" onMouseOver="hilite(2379)" onMouseOut="lolite()" onClick="logVariable('m')" href="../_variables/m.html">$m</a>, <a class="var it5014" onMouseOver="hilite(5014)" onMouseOut="lolite()" onClick="logVariable('y')" href="../_variables/y.html">$y</a>, <a class="var it29837" onMouseOver="hilite(29837)" onMouseOut="lolite()" onClick="logVariable('eventsbyday')" href="../_variables/eventsbyday.html">$eventsbyday</a>, <a class="var it29838" onMouseOver="hilite(29838)" onMouseOut="lolite()" onClick="logVariable('durationbyday')" href="../_variables/durationbyday.html">$durationbyday</a>, <a class="var it29839" onMouseOver="hilite(29839)" onMouseOut="lolite()" onClick="logVariable('typesbyday')" href="../_variables/typesbyday.html">$typesbyday</a>, <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>);
<a name="l289"><span class="linenum"> 289</span></a>  
<a name="l290"><span class="linenum"> 290</span></a>  <span class="comment">    // Accessibility: added summary and &lt;abbr&gt; elements.</span>
<a name="l291"><span class="linenum"> 291</span></a>      <a class="var it958" onMouseOver="hilite(958)" onMouseOut="lolite()" onClick="logVariable('summary')" href="../_variables/summary.html">$summary</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('calendarheading', 'calendar', <a class="function" onClick="logFunction('userdate')" href="../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('tstart')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/tstart.html">tstart</a>, <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('strftimemonthyear')));
<a name="l292"><span class="linenum"> 292</span></a>  <span class="comment">    // Begin table.</span>
<a name="l293"><span class="linenum"> 293</span></a>      <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= '&lt;table class=&quot;minicalendar calendartable&quot; summary=&quot;' . <a class="var it958" onMouseOver="hilite(958)" onMouseOut="lolite()" onClick="logVariable('summary')" href="../_variables/summary.html">$summary</a> . '&quot;&gt;';
<a name="l294"><span class="linenum"> 294</span></a>      if ((<a class="var it34534" onMouseOver="hilite(34534)" onMouseOut="lolite()" onClick="logVariable('placement')" href="../_variables/placement.html">$placement</a> !== false) &amp;&amp; (<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a> !== false)) {
<a name="l295"><span class="linenum"> 295</span></a>          <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= '&lt;caption&gt;'. <a class="function" onClick="logFunction('calendar_top_controls')" href="../_functions/calendar_top_controls.html" onMouseOver="funcPopup(event,'calendar_top_controls')">calendar_top_controls</a>(<a class="var it34534" onMouseOver="hilite(34534)" onMouseOut="lolite()" onClick="logVariable('placement')" href="../_variables/placement.html">$placement</a>, array('id' =&gt; <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, 'time' =&gt; <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>)) .'&lt;/caption&gt;';
<a name="l296"><span class="linenum"> 296</span></a>      }
<a name="l297"><span class="linenum"> 297</span></a>      <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= '&lt;tr class=&quot;weekdays&quot;&gt;'; <span class="comment">// Header row: day names</span>
<a name="l298"><span class="linenum"> 298</span></a>  
<a name="l299"><span class="linenum"> 299</span></a>  <span class="comment">    // Print out the names of the weekdays.</span>
<a name="l300"><span class="linenum"> 300</span></a>      for (<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> = <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('minwday')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/minwday.html">minwday</a>; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> &lt;= <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('maxwday')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/maxwday.html">maxwday</a>; ++<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>) {
<a name="l301"><span class="linenum"> 301</span></a>          <a class="var it791" onMouseOver="hilite(791)" onMouseOut="lolite()" onClick="logVariable('pos')" href="../_variables/pos.html">$pos</a> = <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> % <a class="var it29834" onMouseOver="hilite(29834)" onMouseOut="lolite()" onClick="logVariable('numberofdaysinweek')" href="../_variables/numberofdaysinweek.html">$numberofdaysinweek</a>;
<a name="l302"><span class="linenum"> 302</span></a>          <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= '&lt;th scope=&quot;col&quot;&gt;&lt;abbr title=&quot;'. <a class="var it29833" onMouseOver="hilite(29833)" onMouseOut="lolite()" onClick="logVariable('daynames')" href="../_variables/daynames.html">$daynames</a>[<a class="var it791" onMouseOver="hilite(791)" onMouseOut="lolite()" onClick="logVariable('pos')" href="../_variables/pos.html">$pos</a>]['fullname'] .'&quot;&gt;'.
<a name="l303"><span class="linenum"> 303</span></a>              <a class="var it29833" onMouseOver="hilite(29833)" onMouseOut="lolite()" onClick="logVariable('daynames')" href="../_variables/daynames.html">$daynames</a>[<a class="var it791" onMouseOver="hilite(791)" onMouseOut="lolite()" onClick="logVariable('pos')" href="../_variables/pos.html">$pos</a>]['shortname'] .&quot;&lt;/abbr&gt;&lt;/th&gt;\n&quot;;
<a name="l304"><span class="linenum"> 304</span></a>      }
<a name="l305"><span class="linenum"> 305</span></a>  
<a name="l306"><span class="linenum"> 306</span></a>      <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= '&lt;/tr&gt;&lt;tr&gt;'; <span class="comment">// End of day names; prepare for day numbers</span>
<a name="l307"><span class="linenum"> 307</span></a>  
<a name="l308"><span class="linenum"> 308</span></a>  <span class="comment">    // For the table display. $week is the row; $dayweek is the column.</span>
<a name="l309"><span class="linenum"> 309</span></a>      <a class="var it29840" onMouseOver="hilite(29840)" onMouseOut="lolite()" onClick="logVariable('dayweek')" href="../_variables/dayweek.html">$dayweek</a> = <a class="var it25906" onMouseOver="hilite(25906)" onMouseOut="lolite()" onClick="logVariable('startwday')" href="../_variables/startwday.html">$startwday</a>;
<a name="l310"><span class="linenum"> 310</span></a>  
<a name="l311"><span class="linenum"> 311</span></a>  <span class="comment">    // Paddding (the first week may have blank days in the beginning)</span>
<a name="l312"><span class="linenum"> 312</span></a>      for(<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> = <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('minwday')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/minwday.html">minwday</a>; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> &lt; <a class="var it25906" onMouseOver="hilite(25906)" onMouseOut="lolite()" onClick="logVariable('startwday')" href="../_variables/startwday.html">$startwday</a>; ++<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>) {
<a name="l313"><span class="linenum"> 313</span></a>          <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= '&lt;td class=&quot;dayblank&quot;&gt;&amp;nbsp;&lt;/td&gt;'.&quot;\n&quot;;
<a name="l314"><span class="linenum"> 314</span></a>      }
<a name="l315"><span class="linenum"> 315</span></a>  
<a name="l316"><span class="linenum"> 316</span></a>      <a class="var it29841" onMouseOver="hilite(29841)" onMouseOut="lolite()" onClick="logVariable('weekend')" href="../_variables/weekend.html">$weekend</a> = <a class="constant" onClick="logConstant('CALENDAR_DEFAULT_WEEKEND')" href="../_constants/CALENDAR_DEFAULT_WEEKEND.html" onMouseOver="constPopup(event,'CALENDAR_DEFAULT_WEEKEND')">CALENDAR_DEFAULT_WEEKEND</a>;
<a name="l317"><span class="linenum"> 317</span></a>      if (isset(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('calendar_weekend')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/calendar_weekend.html">calendar_weekend</a>)) {
<a name="l318"><span class="linenum"> 318</span></a>          <a class="var it29841" onMouseOver="hilite(29841)" onMouseOut="lolite()" onClick="logVariable('weekend')" href="../_variables/weekend.html">$weekend</a> = <a class="phpfunction" onClick="logFunction('intval')" href="../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('calendar_weekend')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/calendar_weekend.html">calendar_weekend</a>);
<a name="l319"><span class="linenum"> 319</span></a>      }
<a name="l320"><span class="linenum"> 320</span></a>  
<a name="l321"><span class="linenum"> 321</span></a>  <span class="comment">    // Now display all the calendar</span>
<a name="l322"><span class="linenum"> 322</span></a>      <a class="var it29843" onMouseOver="hilite(29843)" onMouseOut="lolite()" onClick="logVariable('daytime')" href="../_variables/daytime.html">$daytime</a> = <a class="phpfunction" onClick="logFunction('strtotime')" href="../_functions/strtotime.html" onMouseOver="phpfuncPopup(event,'strtotime')">strtotime</a>('-1 day', <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('tstart')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/tstart.html">tstart</a>);
<a name="l323"><span class="linenum"> 323</span></a>      for(<a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a> = 1; <a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a> &lt;= <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('maxdays')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/maxdays.html">maxdays</a>; ++<a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a>, ++<a class="var it29840" onMouseOver="hilite(29840)" onMouseOut="lolite()" onClick="logVariable('dayweek')" href="../_variables/dayweek.html">$dayweek</a>) {
<a name="l324"><span class="linenum"> 324</span></a>          <a class="var it38991" onMouseOver="hilite(38991)" onMouseOut="lolite()" onClick="logVariable('cellattributes')" href="../_variables/cellattributes.html">$cellattributes</a> = array();
<a name="l325"><span class="linenum"> 325</span></a>          <a class="var it29843" onMouseOver="hilite(29843)" onMouseOut="lolite()" onClick="logVariable('daytime')" href="../_variables/daytime.html">$daytime</a> = <a class="phpfunction" onClick="logFunction('strtotime')" href="../_functions/strtotime.html" onMouseOver="phpfuncPopup(event,'strtotime')">strtotime</a>('+1 day', <a class="var it29843" onMouseOver="hilite(29843)" onMouseOut="lolite()" onClick="logVariable('daytime')" href="../_variables/daytime.html">$daytime</a>);
<a name="l326"><span class="linenum"> 326</span></a>          if(<a class="var it29840" onMouseOver="hilite(29840)" onMouseOut="lolite()" onClick="logVariable('dayweek')" href="../_variables/dayweek.html">$dayweek</a> &gt; <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('maxwday')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/maxwday.html">maxwday</a>) {
<a name="l327"><span class="linenum"> 327</span></a>  <span class="comment">            // We need to change week (table row)</span>
<a name="l328"><span class="linenum"> 328</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= '&lt;/tr&gt;&lt;tr&gt;';
<a name="l329"><span class="linenum"> 329</span></a>              <a class="var it29840" onMouseOver="hilite(29840)" onMouseOut="lolite()" onClick="logVariable('dayweek')" href="../_variables/dayweek.html">$dayweek</a> = <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('minwday')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/minwday.html">minwday</a>;
<a name="l330"><span class="linenum"> 330</span></a>          }
<a name="l331"><span class="linenum"> 331</span></a>  
<a name="l332"><span class="linenum"> 332</span></a>  <span class="comment">        // Reset vars.</span>
<a name="l333"><span class="linenum"> 333</span></a>          if (<a class="var it29841" onMouseOver="hilite(29841)" onMouseOut="lolite()" onClick="logVariable('weekend')" href="../_variables/weekend.html">$weekend</a> &amp; (1 &lt;&lt; (<a class="var it29840" onMouseOver="hilite(29840)" onMouseOut="lolite()" onClick="logVariable('dayweek')" href="../_variables/dayweek.html">$dayweek</a> % <a class="var it29834" onMouseOver="hilite(29834)" onMouseOut="lolite()" onClick="logVariable('numberofdaysinweek')" href="../_variables/numberofdaysinweek.html">$numberofdaysinweek</a>))) {
<a name="l334"><span class="linenum"> 334</span></a>  <span class="comment">            // Weekend. This is true no matter what the exact range is.</span>
<a name="l335"><span class="linenum"> 335</span></a>              <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a> = 'weekend day';
<a name="l336"><span class="linenum"> 336</span></a>          } else {
<a name="l337"><span class="linenum"> 337</span></a>  <span class="comment">            // Normal working day.</span>
<a name="l338"><span class="linenum"> 338</span></a>              <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a> = 'day';
<a name="l339"><span class="linenum"> 339</span></a>          }
<a name="l340"><span class="linenum"> 340</span></a>  
<a name="l341"><span class="linenum"> 341</span></a>          <a class="var it38992" onMouseOver="hilite(38992)" onMouseOut="lolite()" onClick="logVariable('eventids')" href="../_variables/eventids.html">$eventids</a> = array();
<a name="l342"><span class="linenum"> 342</span></a>          if (!empty(<a class="var it29837" onMouseOver="hilite(29837)" onMouseOut="lolite()" onClick="logVariable('eventsbyday')" href="../_variables/eventsbyday.html">$eventsbyday</a>[<a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a>])) {
<a name="l343"><span class="linenum"> 343</span></a>              <a class="var it38992" onMouseOver="hilite(38992)" onMouseOut="lolite()" onClick="logVariable('eventids')" href="../_variables/eventids.html">$eventids</a> = <a class="var it29837" onMouseOver="hilite(29837)" onMouseOut="lolite()" onClick="logVariable('eventsbyday')" href="../_variables/eventsbyday.html">$eventsbyday</a>[<a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a>];
<a name="l344"><span class="linenum"> 344</span></a>          }
<a name="l345"><span class="linenum"> 345</span></a>  
<a name="l346"><span class="linenum"> 346</span></a>          if (!empty(<a class="var it29838" onMouseOver="hilite(29838)" onMouseOut="lolite()" onClick="logVariable('durationbyday')" href="../_variables/durationbyday.html">$durationbyday</a>[<a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a>])) {
<a name="l347"><span class="linenum"> 347</span></a>              <a class="var it38992" onMouseOver="hilite(38992)" onMouseOut="lolite()" onClick="logVariable('eventids')" href="../_variables/eventids.html">$eventids</a> = <a class="phpfunction" onClick="logFunction('array_unique')" href="../_functions/array_unique.html" onMouseOver="phpfuncPopup(event,'array_unique')">array_unique</a>(<a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it38992" onMouseOver="hilite(38992)" onMouseOut="lolite()" onClick="logVariable('eventids')" href="../_variables/eventids.html">$eventids</a>, <a class="var it29838" onMouseOver="hilite(29838)" onMouseOut="lolite()" onClick="logVariable('durationbyday')" href="../_variables/durationbyday.html">$durationbyday</a>[<a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a>]));
<a name="l348"><span class="linenum"> 348</span></a>          }
<a name="l349"><span class="linenum"> 349</span></a>  
<a name="l350"><span class="linenum"> 350</span></a>          <a class="var it38993" onMouseOver="hilite(38993)" onMouseOut="lolite()" onClick="logVariable('finishclass')" href="../_variables/finishclass.html">$finishclass</a> = false;
<a name="l351"><span class="linenum"> 351</span></a>  
<a name="l352"><span class="linenum"> 352</span></a>          if (!empty(<a class="var it38992" onMouseOver="hilite(38992)" onMouseOut="lolite()" onClick="logVariable('eventids')" href="../_variables/eventids.html">$eventids</a>)) {
<a name="l353"><span class="linenum"> 353</span></a>  <span class="comment">            // There is at least one event on this day.</span>
<a name="l354"><span class="linenum"> 354</span></a>  
<a name="l355"><span class="linenum"> 355</span></a>              <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a> .= ' hasevent';
<a name="l356"><span class="linenum"> 356</span></a>              <a class="var it38990" onMouseOver="hilite(38990)" onMouseOut="lolite()" onClick="logVariable('hrefparams')" href="../_variables/hrefparams.html">$hrefparams</a>['view'] = 'day';
<a name="l357"><span class="linenum"> 357</span></a>              <a class="var it29844" onMouseOver="hilite(29844)" onMouseOut="lolite()" onClick="logVariable('dayhref')" href="../_variables/dayhref.html">$dayhref</a> = <a class="function" onClick="logFunction('calendar_get_link_href')" href="../_functions/calendar_get_link_href.html" onMouseOver="funcPopup(event,'calendar_get_link_href')">calendar_get_link_href</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="constant" onClick="logConstant('CALENDAR_URL')" href="../_constants/CALENDAR_URL.html" onMouseOver="constPopup(event,'CALENDAR_URL')">CALENDAR_URL</a> . 'view.php', <a class="var it38990" onMouseOver="hilite(38990)" onMouseOut="lolite()" onClick="logVariable('hrefparams')" href="../_variables/hrefparams.html">$hrefparams</a>), 0, 0, 0, <a class="var it29843" onMouseOver="hilite(29843)" onMouseOut="lolite()" onClick="logVariable('daytime')" href="../_variables/daytime.html">$daytime</a>);
<a name="l358"><span class="linenum"> 358</span></a>  
<a name="l359"><span class="linenum"> 359</span></a>              <a class="var it38994" onMouseOver="hilite(38994)" onMouseOut="lolite()" onClick="logVariable('popupcontent')" href="../_variables/popupcontent.html">$popupcontent</a> = '';
<a name="l360"><span class="linenum"> 360</span></a>              foreach (<a class="var it38992" onMouseOver="hilite(38992)" onMouseOut="lolite()" onClick="logVariable('eventids')" href="../_variables/eventids.html">$eventids</a> as <a class="var it8046" onMouseOver="hilite(8046)" onMouseOut="lolite()" onClick="logVariable('eventid')" href="../_variables/eventid.html">$eventid</a>) {
<a name="l361"><span class="linenum"> 361</span></a>                  if (!isset(<a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a>[<a class="var it8046" onMouseOver="hilite(8046)" onMouseOut="lolite()" onClick="logVariable('eventid')" href="../_variables/eventid.html">$eventid</a>])) {
<a name="l362"><span class="linenum"> 362</span></a>                      continue;
<a name="l363"><span class="linenum"> 363</span></a>                  }
<a name="l364"><span class="linenum"> 364</span></a>                  <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = <span class="keyword">new </span><a class="class" onClick="logClass('calendar_event')" href="../_classes/calendar_event.html" onMouseOver="classPopup(event,'calendar_event')">calendar_event</a>(<a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a>[<a class="var it8046" onMouseOver="hilite(8046)" onMouseOut="lolite()" onClick="logVariable('eventid')" href="../_variables/eventid.html">$eventid</a>]);
<a name="l365"><span class="linenum"> 365</span></a>                  <a class="var it38995" onMouseOver="hilite(38995)" onMouseOut="lolite()" onClick="logVariable('popupalt')" href="../_variables/popupalt.html">$popupalt</a>  = '';
<a name="l366"><span class="linenum"> 366</span></a>                  <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a> = 'moodle';
<a name="l367"><span class="linenum"> 367</span></a>                  if (!empty(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('modulename')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/modulename.html">modulename</a>)) {
<a name="l368"><span class="linenum"> 368</span></a>                      <a class="var it38996" onMouseOver="hilite(38996)" onMouseOut="lolite()" onClick="logVariable('popupicon')" href="../_variables/popupicon.html">$popupicon</a> = 'icon';
<a name="l369"><span class="linenum"> 369</span></a>                      <a class="var it38995" onMouseOver="hilite(38995)" onMouseOut="lolite()" onClick="logVariable('popupalt')" href="../_variables/popupalt.html">$popupalt</a>  = <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('modulename')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/modulename.html">modulename</a>;
<a name="l370"><span class="linenum"> 370</span></a>                      <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a> = <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('modulename')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/modulename.html">modulename</a>;
<a name="l371"><span class="linenum"> 371</span></a>                  } else if (<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('courseid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a> == <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>) { // Site event.
<a name="l372"><span class="linenum"> 372</span></a>                      <a class="var it38996" onMouseOver="hilite(38996)" onMouseOut="lolite()" onClick="logVariable('popupicon')" href="../_variables/popupicon.html">$popupicon</a> = 'i/siteevent';
<a name="l373"><span class="linenum"> 373</span></a>                  } else if (<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('courseid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a> != 0 &amp;&amp; <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('courseid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a> != <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a> &amp;&amp; <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('groupid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/groupid.html">groupid</a> == 0) { // Course event.
<a name="l374"><span class="linenum"> 374</span></a>                      <a class="var it38996" onMouseOver="hilite(38996)" onMouseOut="lolite()" onClick="logVariable('popupicon')" href="../_variables/popupicon.html">$popupicon</a> = 'i/courseevent';
<a name="l375"><span class="linenum"> 375</span></a>                  } else if (<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('groupid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/groupid.html">groupid</a>) { // Group event.
<a name="l376"><span class="linenum"> 376</span></a>                      <a class="var it38996" onMouseOver="hilite(38996)" onMouseOut="lolite()" onClick="logVariable('popupicon')" href="../_variables/popupicon.html">$popupicon</a> = 'i/groupevent';
<a name="l377"><span class="linenum"> 377</span></a>                  } else { // Must be a user event.
<a name="l378"><span class="linenum"> 378</span></a>                      <a class="var it38996" onMouseOver="hilite(38996)" onMouseOut="lolite()" onClick="logVariable('popupicon')" href="../_variables/popupicon.html">$popupicon</a> = 'i/userevent';
<a name="l379"><span class="linenum"> 379</span></a>                  }
<a name="l380"><span class="linenum"> 380</span></a>  
<a name="l381"><span class="linenum"> 381</span></a>                  if (<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timeduration')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/timeduration.html">timeduration</a>) {
<a name="l382"><span class="linenum"> 382</span></a>                      <a class="var it3592" onMouseOver="hilite(3592)" onMouseOut="lolite()" onClick="logVariable('startdate')" href="../_variables/startdate.html">$startdate</a> = <a class="var it3542" onMouseOver="hilite(3542)" onMouseOut="lolite()" onClick="logVariable('calendartype')" href="../_variables/calendartype.html">$calendartype</a>-&gt;<a class="function" onClick="logFunction('timestamp_to_date_array')" href="../_functions/timestamp_to_date_array.html" onMouseOver="funcPopup(event,'timestamp_to_date_array')">timestamp_to_date_array</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timestart')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/timestart.html">timestart</a>);
<a name="l383"><span class="linenum"> 383</span></a>                      <a class="var it35199" onMouseOver="hilite(35199)" onMouseOut="lolite()" onClick="logVariable('enddate')" href="../_variables/enddate.html">$enddate</a> = <a class="var it3542" onMouseOver="hilite(3542)" onMouseOut="lolite()" onClick="logVariable('calendartype')" href="../_variables/calendartype.html">$calendartype</a>-&gt;<a class="function" onClick="logFunction('timestamp_to_date_array')" href="../_functions/timestamp_to_date_array.html" onMouseOver="funcPopup(event,'timestamp_to_date_array')">timestamp_to_date_array</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timestart')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/timestart.html">timestart</a> + <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timeduration')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/timeduration.html">timeduration</a> - 1);
<a name="l384"><span class="linenum"> 384</span></a>                      if (<a class="var it35199" onMouseOver="hilite(35199)" onMouseOut="lolite()" onClick="logVariable('enddate')" href="../_variables/enddate.html">$enddate</a>['mon'] == <a class="var it2379" onMouseOver="hilite(2379)" onMouseOut="lolite()" onClick="logVariable('m')" href="../_variables/m.html">$m</a> &amp;&amp; <a class="var it35199" onMouseOver="hilite(35199)" onMouseOut="lolite()" onClick="logVariable('enddate')" href="../_variables/enddate.html">$enddate</a>['year'] == <a class="var it5014" onMouseOver="hilite(5014)" onMouseOut="lolite()" onClick="logVariable('y')" href="../_variables/y.html">$y</a> &amp;&amp; <a class="var it35199" onMouseOver="hilite(35199)" onMouseOut="lolite()" onClick="logVariable('enddate')" href="../_variables/enddate.html">$enddate</a>['mday'] == <a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a>) {
<a name="l385"><span class="linenum"> 385</span></a>                          <a class="var it38993" onMouseOver="hilite(38993)" onMouseOut="lolite()" onClick="logVariable('finishclass')" href="../_variables/finishclass.html">$finishclass</a> = true;
<a name="l386"><span class="linenum"> 386</span></a>                      }
<a name="l387"><span class="linenum"> 387</span></a>                  }
<a name="l388"><span class="linenum"> 388</span></a>  
<a name="l389"><span class="linenum"> 389</span></a>                  <a class="var it29844" onMouseOver="hilite(29844)" onMouseOut="lolite()" onClick="logVariable('dayhref')" href="../_variables/dayhref.html">$dayhref</a>-&gt;<a class="function" onClick="logFunction('set_anchor')" href="../_functions/set_anchor.html" onMouseOver="funcPopup(event,'set_anchor')">set_anchor</a>('event_'.<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('id')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l390"><span class="linenum"> 390</span></a>  
<a name="l391"><span class="linenum"> 391</span></a>                  <a class="var it38994" onMouseOver="hilite(38994)" onMouseOut="lolite()" onClick="logVariable('popupcontent')" href="../_variables/popupcontent.html">$popupcontent</a> .= <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('div');
<a name="l392"><span class="linenum"> 392</span></a>                  <a class="var it38994" onMouseOver="hilite(38994)" onMouseOut="lolite()" onClick="logVariable('popupcontent')" href="../_variables/popupcontent.html">$popupcontent</a> .= <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_icon')" href="../_functions/pix_icon.html" onMouseOver="funcPopup(event,'pix_icon')">pix_icon</a>(<a class="var it38996" onMouseOver="hilite(38996)" onMouseOut="lolite()" onClick="logVariable('popupicon')" href="../_variables/popupicon.html">$popupicon</a>, <a class="var it38995" onMouseOver="hilite(38995)" onMouseOut="lolite()" onClick="logVariable('popupalt')" href="../_variables/popupalt.html">$popupalt</a>, <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l393"><span class="linenum"> 393</span></a>  <span class="comment">                // Show ical source if needed.</span>
<a name="l394"><span class="linenum"> 394</span></a>                  if (!empty(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('subscription')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/subscription.html">subscription</a>) &amp;&amp; <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('calendar_showicalsource')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/calendar_showicalsource.html">calendar_showicalsource</a>) {
<a name="l395"><span class="linenum"> 395</span></a>                      <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a> = new stdClass();
<a name="l396"><span class="linenum"> 396</span></a>                      <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('name')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('name')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/name.html">name</a>, true);
<a name="l397"><span class="linenum"> 397</span></a>                      <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('source')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../_variables/source.html">source</a> = <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('subscription')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/subscription.html">subscription</a>-&gt;name;
<a name="l398"><span class="linenum"> 398</span></a>                      <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('namewithsource', 'calendar', <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>);
<a name="l399"><span class="linenum"> 399</span></a>                  } else {
<a name="l400"><span class="linenum"> 400</span></a>                      if (<a class="var it38993" onMouseOver="hilite(38993)" onMouseOut="lolite()" onClick="logVariable('finishclass')" href="../_variables/finishclass.html">$finishclass</a>) {
<a name="l401"><span class="linenum"> 401</span></a>                          <a class="var it38997" onMouseOver="hilite(38997)" onMouseOut="lolite()" onClick="logVariable('samedate')" href="../_variables/samedate.html">$samedate</a> = <a class="var it3592" onMouseOver="hilite(3592)" onMouseOut="lolite()" onClick="logVariable('startdate')" href="../_variables/startdate.html">$startdate</a>['mon'] == <a class="var it35199" onMouseOver="hilite(35199)" onMouseOut="lolite()" onClick="logVariable('enddate')" href="../_variables/enddate.html">$enddate</a>['mon'] &amp;&amp;
<a name="l402"><span class="linenum"> 402</span></a>                                      <a class="var it3592" onMouseOver="hilite(3592)" onMouseOut="lolite()" onClick="logVariable('startdate')" href="../_variables/startdate.html">$startdate</a>['year'] == <a class="var it35199" onMouseOver="hilite(35199)" onMouseOut="lolite()" onClick="logVariable('enddate')" href="../_variables/enddate.html">$enddate</a>['year'] &amp;&amp;
<a name="l403"><span class="linenum"> 403</span></a>                                      <a class="var it3592" onMouseOver="hilite(3592)" onMouseOut="lolite()" onClick="logVariable('startdate')" href="../_variables/startdate.html">$startdate</a>['mday'] == <a class="var it35199" onMouseOver="hilite(35199)" onMouseOut="lolite()" onClick="logVariable('enddate')" href="../_variables/enddate.html">$enddate</a>['mday'];
<a name="l404"><span class="linenum"> 404</span></a>  
<a name="l405"><span class="linenum"> 405</span></a>                          if (<a class="var it38997" onMouseOver="hilite(38997)" onMouseOut="lolite()" onClick="logVariable('samedate')" href="../_variables/samedate.html">$samedate</a>) {
<a name="l406"><span class="linenum"> 406</span></a>                              <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a> = <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('name')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/name.html">name</a>, true);
<a name="l407"><span class="linenum"> 407</span></a>                          } else {
<a name="l408"><span class="linenum"> 408</span></a>                              <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a> = <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('name')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/name.html">name</a>, true) . ' (' . <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('eventendtime', 'calendar') . ')';
<a name="l409"><span class="linenum"> 409</span></a>                          }
<a name="l410"><span class="linenum"> 410</span></a>                      } else {
<a name="l411"><span class="linenum"> 411</span></a>                          <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a> = <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('name')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/name.html">name</a>, true);
<a name="l412"><span class="linenum"> 412</span></a>                      }
<a name="l413"><span class="linenum"> 413</span></a>                  }
<a name="l414"><span class="linenum"> 414</span></a>                  <a class="var it38994" onMouseOver="hilite(38994)" onMouseOut="lolite()" onClick="logVariable('popupcontent')" href="../_variables/popupcontent.html">$popupcontent</a> .= <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it29844" onMouseOver="hilite(29844)" onMouseOut="lolite()" onClick="logVariable('dayhref')" href="../_variables/dayhref.html">$dayhref</a>, <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>);
<a name="l415"><span class="linenum"> 415</span></a>                  <a class="var it38994" onMouseOver="hilite(38994)" onMouseOut="lolite()" onClick="logVariable('popupcontent')" href="../_variables/popupcontent.html">$popupcontent</a> .= <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('div');
<a name="l416"><span class="linenum"> 416</span></a>              }
<a name="l417"><span class="linenum"> 417</span></a>  
<a name="l418"><span class="linenum"> 418</span></a>              if (<a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('thismonth')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/thismonth.html">thismonth</a> &amp;&amp; <a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a> == <a class="var it775" onMouseOver="hilite(775)" onMouseOut="lolite()" onClick="logVariable('d')" href="../_variables/d.html">$d</a>) {
<a name="l419"><span class="linenum"> 419</span></a>                  <a class="var it38998" onMouseOver="hilite(38998)" onMouseOut="lolite()" onClick="logVariable('popupdata')" href="../_variables/popupdata.html">$popupdata</a> = <a class="function" onClick="logFunction('calendar_get_popup')" href="../_functions/calendar_get_popup.html" onMouseOver="funcPopup(event,'calendar_get_popup')">calendar_get_popup</a>(true, <a class="var it29843" onMouseOver="hilite(29843)" onMouseOut="lolite()" onClick="logVariable('daytime')" href="../_variables/daytime.html">$daytime</a>, <a class="var it38994" onMouseOver="hilite(38994)" onMouseOut="lolite()" onClick="logVariable('popupcontent')" href="../_variables/popupcontent.html">$popupcontent</a>);
<a name="l420"><span class="linenum"> 420</span></a>              } else {
<a name="l421"><span class="linenum"> 421</span></a>                  <a class="var it38998" onMouseOver="hilite(38998)" onMouseOut="lolite()" onClick="logVariable('popupdata')" href="../_variables/popupdata.html">$popupdata</a> = <a class="function" onClick="logFunction('calendar_get_popup')" href="../_functions/calendar_get_popup.html" onMouseOver="funcPopup(event,'calendar_get_popup')">calendar_get_popup</a>(false, <a class="var it29843" onMouseOver="hilite(29843)" onMouseOut="lolite()" onClick="logVariable('daytime')" href="../_variables/daytime.html">$daytime</a>, <a class="var it38994" onMouseOver="hilite(38994)" onMouseOut="lolite()" onClick="logVariable('popupcontent')" href="../_variables/popupcontent.html">$popupcontent</a>);
<a name="l422"><span class="linenum"> 422</span></a>              }
<a name="l423"><span class="linenum"> 423</span></a>              <a class="var it38991" onMouseOver="hilite(38991)" onMouseOut="lolite()" onClick="logVariable('cellattributes')" href="../_variables/cellattributes.html">$cellattributes</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it38991" onMouseOver="hilite(38991)" onMouseOut="lolite()" onClick="logVariable('cellattributes')" href="../_variables/cellattributes.html">$cellattributes</a>, <a class="var it38998" onMouseOver="hilite(38998)" onMouseOut="lolite()" onClick="logVariable('popupdata')" href="../_variables/popupdata.html">$popupdata</a>);
<a name="l424"><span class="linenum"> 424</span></a>  
<a name="l425"><span class="linenum"> 425</span></a>  <span class="comment">            // Class and cell content</span>
<a name="l426"><span class="linenum"> 426</span></a>              if(isset(<a class="var it29839" onMouseOver="hilite(29839)" onMouseOut="lolite()" onClick="logVariable('typesbyday')" href="../_variables/typesbyday.html">$typesbyday</a>[<a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a>]['startglobal'])) {
<a name="l427"><span class="linenum"> 427</span></a>                  <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a> .= ' calendar_event_global';
<a name="l428"><span class="linenum"> 428</span></a>              } else if(isset(<a class="var it29839" onMouseOver="hilite(29839)" onMouseOut="lolite()" onClick="logVariable('typesbyday')" href="../_variables/typesbyday.html">$typesbyday</a>[<a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a>]['startcourse'])) {
<a name="l429"><span class="linenum"> 429</span></a>                  <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a> .= ' calendar_event_course';
<a name="l430"><span class="linenum"> 430</span></a>              } else if(isset(<a class="var it29839" onMouseOver="hilite(29839)" onMouseOut="lolite()" onClick="logVariable('typesbyday')" href="../_variables/typesbyday.html">$typesbyday</a>[<a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a>]['startgroup'])) {
<a name="l431"><span class="linenum"> 431</span></a>                  <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a> .= ' calendar_event_group';
<a name="l432"><span class="linenum"> 432</span></a>              } else if(isset(<a class="var it29839" onMouseOver="hilite(29839)" onMouseOut="lolite()" onClick="logVariable('typesbyday')" href="../_variables/typesbyday.html">$typesbyday</a>[<a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a>]['startuser'])) {
<a name="l433"><span class="linenum"> 433</span></a>                  <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a> .= ' calendar_event_user';
<a name="l434"><span class="linenum"> 434</span></a>              }
<a name="l435"><span class="linenum"> 435</span></a>              if (<a class="var it38993" onMouseOver="hilite(38993)" onMouseOut="lolite()" onClick="logVariable('finishclass')" href="../_variables/finishclass.html">$finishclass</a>) {
<a name="l436"><span class="linenum"> 436</span></a>                  <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a> .= ' duration_finish';
<a name="l437"><span class="linenum"> 437</span></a>              }
<a name="l438"><span class="linenum"> 438</span></a>              <a class="var it905" onMouseOver="hilite(905)" onMouseOut="lolite()" onClick="logVariable('cell')" href="../_variables/cell.html">$cell</a> = <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it29844" onMouseOver="hilite(29844)" onMouseOut="lolite()" onClick="logVariable('dayhref')" href="../_variables/dayhref.html">$dayhref</a>, <a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a>);
<a name="l439"><span class="linenum"> 439</span></a>          } else {
<a name="l440"><span class="linenum"> 440</span></a>              <a class="var it905" onMouseOver="hilite(905)" onMouseOut="lolite()" onClick="logVariable('cell')" href="../_variables/cell.html">$cell</a> = <a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a>;
<a name="l441"><span class="linenum"> 441</span></a>          }
<a name="l442"><span class="linenum"> 442</span></a>  
<a name="l443"><span class="linenum"> 443</span></a>          <a class="var it29845" onMouseOver="hilite(29845)" onMouseOut="lolite()" onClick="logVariable('durationclass')" href="../_variables/durationclass.html">$durationclass</a> = false;
<a name="l444"><span class="linenum"> 444</span></a>          if (isset(<a class="var it29839" onMouseOver="hilite(29839)" onMouseOut="lolite()" onClick="logVariable('typesbyday')" href="../_variables/typesbyday.html">$typesbyday</a>[<a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a>]['durationglobal'])) {
<a name="l445"><span class="linenum"> 445</span></a>              <a class="var it29845" onMouseOver="hilite(29845)" onMouseOut="lolite()" onClick="logVariable('durationclass')" href="../_variables/durationclass.html">$durationclass</a> = ' duration_global';
<a name="l446"><span class="linenum"> 446</span></a>          } else if(isset(<a class="var it29839" onMouseOver="hilite(29839)" onMouseOut="lolite()" onClick="logVariable('typesbyday')" href="../_variables/typesbyday.html">$typesbyday</a>[<a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a>]['durationcourse'])) {
<a name="l447"><span class="linenum"> 447</span></a>              <a class="var it29845" onMouseOver="hilite(29845)" onMouseOut="lolite()" onClick="logVariable('durationclass')" href="../_variables/durationclass.html">$durationclass</a> = ' duration_course';
<a name="l448"><span class="linenum"> 448</span></a>          } else if(isset(<a class="var it29839" onMouseOver="hilite(29839)" onMouseOut="lolite()" onClick="logVariable('typesbyday')" href="../_variables/typesbyday.html">$typesbyday</a>[<a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a>]['durationgroup'])) {
<a name="l449"><span class="linenum"> 449</span></a>              <a class="var it29845" onMouseOver="hilite(29845)" onMouseOut="lolite()" onClick="logVariable('durationclass')" href="../_variables/durationclass.html">$durationclass</a> = ' duration_group';
<a name="l450"><span class="linenum"> 450</span></a>          } else if(isset(<a class="var it29839" onMouseOver="hilite(29839)" onMouseOut="lolite()" onClick="logVariable('typesbyday')" href="../_variables/typesbyday.html">$typesbyday</a>[<a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a>]['durationuser'])) {
<a name="l451"><span class="linenum"> 451</span></a>              <a class="var it29845" onMouseOver="hilite(29845)" onMouseOut="lolite()" onClick="logVariable('durationclass')" href="../_variables/durationclass.html">$durationclass</a> = ' duration_user';
<a name="l452"><span class="linenum"> 452</span></a>          }
<a name="l453"><span class="linenum"> 453</span></a>          if (<a class="var it29845" onMouseOver="hilite(29845)" onMouseOut="lolite()" onClick="logVariable('durationclass')" href="../_variables/durationclass.html">$durationclass</a>) {
<a name="l454"><span class="linenum"> 454</span></a>              <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a> .= ' duration '.<a class="var it29845" onMouseOver="hilite(29845)" onMouseOut="lolite()" onClick="logVariable('durationclass')" href="../_variables/durationclass.html">$durationclass</a>;
<a name="l455"><span class="linenum"> 455</span></a>          }
<a name="l456"><span class="linenum"> 456</span></a>  
<a name="l457"><span class="linenum"> 457</span></a>  <span class="comment">        // If event has a class set then add it to the table day &lt;td&gt; tag</span>
<a name="l458"><span class="linenum"> 458</span></a>  <span class="comment">        // Note: only one colour for minicalendar</span>
<a name="l459"><span class="linenum"> 459</span></a>          if(isset(<a class="var it29837" onMouseOver="hilite(29837)" onMouseOut="lolite()" onClick="logVariable('eventsbyday')" href="../_variables/eventsbyday.html">$eventsbyday</a>[<a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a>])) {
<a name="l460"><span class="linenum"> 460</span></a>              foreach(<a class="var it29837" onMouseOver="hilite(29837)" onMouseOut="lolite()" onClick="logVariable('eventsbyday')" href="../_variables/eventsbyday.html">$eventsbyday</a>[<a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a>] as <a class="var it8046" onMouseOver="hilite(8046)" onMouseOut="lolite()" onClick="logVariable('eventid')" href="../_variables/eventid.html">$eventid</a>) {
<a name="l461"><span class="linenum"> 461</span></a>                  if (!isset(<a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a>[<a class="var it8046" onMouseOver="hilite(8046)" onMouseOut="lolite()" onClick="logVariable('eventid')" href="../_variables/eventid.html">$eventid</a>])) {
<a name="l462"><span class="linenum"> 462</span></a>                      continue;
<a name="l463"><span class="linenum"> 463</span></a>                  }
<a name="l464"><span class="linenum"> 464</span></a>                  <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = <a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a>[<a class="var it8046" onMouseOver="hilite(8046)" onMouseOut="lolite()" onClick="logVariable('eventid')" href="../_variables/eventid.html">$eventid</a>];
<a name="l465"><span class="linenum"> 465</span></a>                  if (!empty(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('class')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/class.html">class</a>)) {
<a name="l466"><span class="linenum"> 466</span></a>                      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a> .= ' '.<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('class')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/class.html">class</a>;
<a name="l467"><span class="linenum"> 467</span></a>                  }
<a name="l468"><span class="linenum"> 468</span></a>                  break;
<a name="l469"><span class="linenum"> 469</span></a>              }
<a name="l470"><span class="linenum"> 470</span></a>          }
<a name="l471"><span class="linenum"> 471</span></a>  
<a name="l472"><span class="linenum"> 472</span></a>          if (<a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('thismonth')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/thismonth.html">thismonth</a> &amp;&amp; <a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a> == <a class="var it775" onMouseOver="hilite(775)" onMouseOut="lolite()" onClick="logVariable('d')" href="../_variables/d.html">$d</a>) {
<a name="l473"><span class="linenum"> 473</span></a>  <span class="comment">            // The current cell is for today - add appropriate classes and additional information for styling.</span>
<a name="l474"><span class="linenum"> 474</span></a>              <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a> .= ' today';
<a name="l475"><span class="linenum"> 475</span></a>              <a class="var it3590" onMouseOver="hilite(3590)" onMouseOut="lolite()" onClick="logVariable('today')" href="../_variables/today.html">$today</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('today', 'calendar').' '.<a class="function" onClick="logFunction('userdate')" href="../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>(), <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('strftimedayshort'));
<a name="l476"><span class="linenum"> 476</span></a>  
<a name="l477"><span class="linenum"> 477</span></a>              if (!isset(<a class="var it29837" onMouseOver="hilite(29837)" onMouseOut="lolite()" onClick="logVariable('eventsbyday')" href="../_variables/eventsbyday.html">$eventsbyday</a>[<a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a>]) &amp;&amp; !isset(<a class="var it29838" onMouseOver="hilite(29838)" onMouseOut="lolite()" onClick="logVariable('durationbyday')" href="../_variables/durationbyday.html">$durationbyday</a>[<a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a>])) {
<a name="l478"><span class="linenum"> 478</span></a>                  <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a> .= ' eventnone';
<a name="l479"><span class="linenum"> 479</span></a>                  <a class="var it38998" onMouseOver="hilite(38998)" onMouseOut="lolite()" onClick="logVariable('popupdata')" href="../_variables/popupdata.html">$popupdata</a> = <a class="function" onClick="logFunction('calendar_get_popup')" href="../_functions/calendar_get_popup.html" onMouseOver="funcPopup(event,'calendar_get_popup')">calendar_get_popup</a>(true, false);
<a name="l480"><span class="linenum"> 480</span></a>                  <a class="var it38991" onMouseOver="hilite(38991)" onMouseOut="lolite()" onClick="logVariable('cellattributes')" href="../_variables/cellattributes.html">$cellattributes</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it38991" onMouseOver="hilite(38991)" onMouseOut="lolite()" onClick="logVariable('cellattributes')" href="../_variables/cellattributes.html">$cellattributes</a>, <a class="var it38998" onMouseOver="hilite(38998)" onMouseOut="lolite()" onClick="logVariable('popupdata')" href="../_variables/popupdata.html">$popupdata</a>);
<a name="l481"><span class="linenum"> 481</span></a>                  <a class="var it905" onMouseOver="hilite(905)" onMouseOut="lolite()" onClick="logVariable('cell')" href="../_variables/cell.html">$cell</a> = <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>('#', <a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a>);
<a name="l482"><span class="linenum"> 482</span></a>              }
<a name="l483"><span class="linenum"> 483</span></a>              <a class="var it905" onMouseOver="hilite(905)" onMouseOut="lolite()" onClick="logVariable('cell')" href="../_variables/cell.html">$cell</a> = <a class="function" onClick="logFunction('get_accesshide')" href="../_functions/get_accesshide.html" onMouseOver="funcPopup(event,'get_accesshide')">get_accesshide</a>(<a class="var it3590" onMouseOver="hilite(3590)" onMouseOut="lolite()" onClick="logVariable('today')" href="../_variables/today.html">$today</a> . ' ') . <a class="var it905" onMouseOver="hilite(905)" onMouseOut="lolite()" onClick="logVariable('cell')" href="../_variables/cell.html">$cell</a>;
<a name="l484"><span class="linenum"> 484</span></a>          }
<a name="l485"><span class="linenum"> 485</span></a>  
<a name="l486"><span class="linenum"> 486</span></a>  <span class="comment">        // Just display it</span>
<a name="l487"><span class="linenum"> 487</span></a>          <a class="var it38991" onMouseOver="hilite(38991)" onMouseOut="lolite()" onClick="logVariable('cellattributes')" href="../_variables/cellattributes.html">$cellattributes</a>['class'] = <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a>;
<a name="l488"><span class="linenum"> 488</span></a>          <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('td', <a class="var it905" onMouseOver="hilite(905)" onMouseOut="lolite()" onClick="logVariable('cell')" href="../_variables/cell.html">$cell</a>, <a class="var it38991" onMouseOver="hilite(38991)" onMouseOut="lolite()" onClick="logVariable('cellattributes')" href="../_variables/cellattributes.html">$cellattributes</a>);
<a name="l489"><span class="linenum"> 489</span></a>      }
<a name="l490"><span class="linenum"> 490</span></a>  
<a name="l491"><span class="linenum"> 491</span></a>  <span class="comment">    // Paddding (the last week may have blank days at the end)</span>
<a name="l492"><span class="linenum"> 492</span></a>      for(<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> = <a class="var it29840" onMouseOver="hilite(29840)" onMouseOut="lolite()" onClick="logVariable('dayweek')" href="../_variables/dayweek.html">$dayweek</a>; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> &lt;= <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('maxwday')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/maxwday.html">maxwday</a>; ++<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>) {
<a name="l493"><span class="linenum"> 493</span></a>          <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= '&lt;td class=&quot;dayblank&quot;&gt;&amp;nbsp;&lt;/td&gt;';
<a name="l494"><span class="linenum"> 494</span></a>      }
<a name="l495"><span class="linenum"> 495</span></a>      <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= '&lt;/tr&gt;'; <span class="comment">// Last row ends</span>
<a name="l496"><span class="linenum"> 496</span></a>  
<a name="l497"><span class="linenum"> 497</span></a>      <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= '&lt;/table&gt;'; <span class="comment">// Tabular display of days ends</span>
<a name="l498"><span class="linenum"> 498</span></a>  
<a name="l499"><span class="linenum"> 499</span></a>      static <a class="var it38999" onMouseOver="hilite(38999)" onMouseOut="lolite()" onClick="logVariable('jsincluded')" href="../_variables/jsincluded.html">$jsincluded</a> = false;
<a name="l500"><span class="linenum"> 500</span></a>      if (!<a class="var it38999" onMouseOver="hilite(38999)" onMouseOut="lolite()" onClick="logVariable('jsincluded')" href="../_variables/jsincluded.html">$jsincluded</a>) {
<a name="l501"><span class="linenum"> 501</span></a>          <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('requires')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('yui_module')" href="../_functions/yui_module.html" onMouseOver="funcPopup(event,'yui_module')">yui_module</a>('moodle-calendar-info', 'Y.M.core_calendar.info.init');
<a name="l502"><span class="linenum"> 502</span></a>          <a class="var it38999" onMouseOver="hilite(38999)" onMouseOut="lolite()" onClick="logVariable('jsincluded')" href="../_variables/jsincluded.html">$jsincluded</a> = true;
<a name="l503"><span class="linenum"> 503</span></a>      }
<a name="l504"><span class="linenum"> 504</span></a>      return <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a>;
<a name="l505"><span class="linenum"> 505</span></a>  }
<a name="l506"><span class="linenum"> 506</span></a>  
<a name="l507"><span class="linenum"> 507</span></a>  <span class="comment">/**</span>
<a name="l508"><span class="linenum"> 508</span></a>  <span class="comment"> * Gets the calendar popup</span>
<a name="l509"><span class="linenum"> 509</span></a>  <span class="comment"> *</span>
<a name="l510"><span class="linenum"> 510</span></a>  <span class="comment"> * It called at multiple points in from calendar_get_mini.</span>
<a name="l511"><span class="linenum"> 511</span></a>  <span class="comment"> * Copied and modified from calendar_get_mini.</span>
<a name="l512"><span class="linenum"> 512</span></a>  <span class="comment"> *</span>
<a name="l513"><span class="linenum"> 513</span></a>  <span class="comment"> * @param bool $is_today false except when called on the current day.</span>
<a name="l514"><span class="linenum"> 514</span></a>  <span class="comment"> * @param mixed $event_timestart $events[$eventid]-&gt;timestart, OR false if there are no events.</span>
<a name="l515"><span class="linenum"> 515</span></a>  <span class="comment"> * @param string $popupcontent content for the popup window/layout.</span>
<a name="l516"><span class="linenum"> 516</span></a>  <span class="comment"> * @return string eventid for the calendar_tooltip popup window/layout.</span>
<a name="l517"><span class="linenum"> 517</span></a>  <span class="comment"> */</span>
<a name="l518"><span class="linenum"> 518</span></a>  function <a class="function" onClick="logFunction('calendar_get_popup')" href="../_functions/calendar_get_popup.html" onMouseOver="funcPopup(event,'calendar_get_popup')">calendar_get_popup</a>(<a class="var it3590" onMouseOver="hilite(3590)" onMouseOut="lolite()" onClick="logVariable('today')" href="../_variables/today.html">$today</a> = false, <a class="var it1937" onMouseOver="hilite(1937)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../_variables/timestart.html">$timestart</a>, <a class="var it38994" onMouseOver="hilite(38994)" onMouseOut="lolite()" onClick="logVariable('popupcontent')" href="../_variables/popupcontent.html">$popupcontent</a> = '') {
<a name="l519"><span class="linenum"> 519</span></a>      global <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>;
<a name="l520"><span class="linenum"> 520</span></a>  
<a name="l521"><span class="linenum"> 521</span></a>      <a class="var it39000" onMouseOver="hilite(39000)" onMouseOut="lolite()" onClick="logVariable('popupcaption')" href="../_variables/popupcaption.html">$popupcaption</a> = '';
<a name="l522"><span class="linenum"> 522</span></a>      if (<a class="var it3590" onMouseOver="hilite(3590)" onMouseOut="lolite()" onClick="logVariable('today')" href="../_variables/today.html">$today</a>) {
<a name="l523"><span class="linenum"> 523</span></a>          <a class="var it39000" onMouseOver="hilite(39000)" onMouseOut="lolite()" onClick="logVariable('popupcaption')" href="../_variables/popupcaption.html">$popupcaption</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('today', 'calendar') . ' ';
<a name="l524"><span class="linenum"> 524</span></a>      }
<a name="l525"><span class="linenum"> 525</span></a>  
<a name="l526"><span class="linenum"> 526</span></a>      if (false === <a class="var it1937" onMouseOver="hilite(1937)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../_variables/timestart.html">$timestart</a>) {
<a name="l527"><span class="linenum"> 527</span></a>          <a class="var it39000" onMouseOver="hilite(39000)" onMouseOut="lolite()" onClick="logVariable('popupcaption')" href="../_variables/popupcaption.html">$popupcaption</a> .= <a class="function" onClick="logFunction('userdate')" href="../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>(), <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('strftimedayshort'));
<a name="l528"><span class="linenum"> 528</span></a>          <a class="var it38994" onMouseOver="hilite(38994)" onMouseOut="lolite()" onClick="logVariable('popupcontent')" href="../_variables/popupcontent.html">$popupcontent</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('eventnone', 'calendar');
<a name="l529"><span class="linenum"> 529</span></a>  
<a name="l530"><span class="linenum"> 530</span></a>      } else {
<a name="l531"><span class="linenum"> 531</span></a>          <a class="var it39000" onMouseOver="hilite(39000)" onMouseOut="lolite()" onClick="logVariable('popupcaption')" href="../_variables/popupcaption.html">$popupcaption</a> .= <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('eventsfor', 'calendar', <a class="function" onClick="logFunction('userdate')" href="../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it1937" onMouseOver="hilite(1937)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../_variables/timestart.html">$timestart</a>, <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('strftimedayshort')));
<a name="l532"><span class="linenum"> 532</span></a>      }
<a name="l533"><span class="linenum"> 533</span></a>  
<a name="l534"><span class="linenum"> 534</span></a>      return array(
<a name="l535"><span class="linenum"> 535</span></a>          'data-core_calendar-title' =&gt; <a class="var it39000" onMouseOver="hilite(39000)" onMouseOut="lolite()" onClick="logVariable('popupcaption')" href="../_variables/popupcaption.html">$popupcaption</a>,
<a name="l536"><span class="linenum"> 536</span></a>          'data-core_calendar-popupcontent' =&gt; <a class="var it38994" onMouseOver="hilite(38994)" onMouseOut="lolite()" onClick="logVariable('popupcontent')" href="../_variables/popupcontent.html">$popupcontent</a>,
<a name="l537"><span class="linenum"> 537</span></a>      );
<a name="l538"><span class="linenum"> 538</span></a>  }
<a name="l539"><span class="linenum"> 539</span></a>  
<a name="l540"><span class="linenum"> 540</span></a>  <span class="comment">/**</span>
<a name="l541"><span class="linenum"> 541</span></a>  <span class="comment"> * Gets the calendar upcoming event</span>
<a name="l542"><span class="linenum"> 542</span></a>  <span class="comment"> *</span>
<a name="l543"><span class="linenum"> 543</span></a>  <span class="comment"> * @param array $courses array of courses</span>
<a name="l544"><span class="linenum"> 544</span></a>  <span class="comment"> * @param array|int|bool $groups array of groups, group id or boolean for all/no group events</span>
<a name="l545"><span class="linenum"> 545</span></a>  <span class="comment"> * @param array|int|bool $users array of users, user id or boolean for all/no user events</span>
<a name="l546"><span class="linenum"> 546</span></a>  <span class="comment"> * @param int $daysinfuture number of days in the future we 'll look</span>
<a name="l547"><span class="linenum"> 547</span></a>  <span class="comment"> * @param int $maxevents maximum number of events</span>
<a name="l548"><span class="linenum"> 548</span></a>  <span class="comment"> * @param int $fromtime start time</span>
<a name="l549"><span class="linenum"> 549</span></a>  <span class="comment"> * @return array $output array of upcoming events</span>
<a name="l550"><span class="linenum"> 550</span></a>  <span class="comment"> */</span>
<a name="l551"><span class="linenum"> 551</span></a>  function <a class="function" onClick="logFunction('calendar_get_upcoming')" href="../_functions/calendar_get_upcoming.html" onMouseOver="funcPopup(event,'calendar_get_upcoming')">calendar_get_upcoming</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>, <a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../_variables/groups.html">$groups</a>, <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../_variables/users.html">$users</a>, <a class="var it39001" onMouseOver="hilite(39001)" onMouseOut="lolite()" onClick="logVariable('daysinfuture')" href="../_variables/daysinfuture.html">$daysinfuture</a>, <a class="var it9642" onMouseOver="hilite(9642)" onMouseOut="lolite()" onClick="logVariable('maxevents')" href="../_variables/maxevents.html">$maxevents</a>, <a class="var it39002" onMouseOver="hilite(39002)" onMouseOut="lolite()" onClick="logVariable('fromtime')" href="../_variables/fromtime.html">$fromtime</a>=0) {
<a name="l552"><span class="linenum"> 552</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('COURSE')" href="../_variables/COURSE.html">$COURSE</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l553"><span class="linenum"> 553</span></a>  
<a name="l554"><span class="linenum"> 554</span></a>      <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a> = new stdClass;
<a name="l555"><span class="linenum"> 555</span></a>      <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('range')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/range.html">range</a> = <a class="var it39001" onMouseOver="hilite(39001)" onMouseOut="lolite()" onClick="logVariable('daysinfuture')" href="../_variables/daysinfuture.html">$daysinfuture</a>; <span class="comment">// How many days in the future we 'll look</span>
<a name="l556"><span class="linenum"> 556</span></a>      <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('maxevents')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/maxevents.html">maxevents</a> = <a class="var it9642" onMouseOver="hilite(9642)" onMouseOut="lolite()" onClick="logVariable('maxevents')" href="../_variables/maxevents.html">$maxevents</a>;
<a name="l557"><span class="linenum"> 557</span></a>  
<a name="l558"><span class="linenum"> 558</span></a>      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> = array();
<a name="l559"><span class="linenum"> 559</span></a>  
<a name="l560"><span class="linenum"> 560</span></a>  <span class="comment">    // Prepare &quot;course caching&quot;, since it may save us a lot of queries</span>
<a name="l561"><span class="linenum"> 561</span></a>      <a class="var it15807" onMouseOver="hilite(15807)" onMouseOut="lolite()" onClick="logVariable('coursecache')" href="../_variables/coursecache.html">$coursecache</a> = array();
<a name="l562"><span class="linenum"> 562</span></a>  
<a name="l563"><span class="linenum"> 563</span></a>      <a class="var it2705" onMouseOver="hilite(2705)" onMouseOut="lolite()" onClick="logVariable('processed')" href="../_variables/processed.html">$processed</a> = 0;
<a name="l564"><span class="linenum"> 564</span></a>      <a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../_variables/now.html">$now</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>(); <span class="comment">// We 'll need this later</span>
<a name="l565"><span class="linenum"> 565</span></a>      <a class="var it39003" onMouseOver="hilite(39003)" onMouseOut="lolite()" onClick="logVariable('usermidnighttoday')" href="../_variables/usermidnighttoday.html">$usermidnighttoday</a> = <a class="function" onClick="logFunction('usergetmidnight')" href="../_functions/usergetmidnight.html" onMouseOver="funcPopup(event,'usergetmidnight')">usergetmidnight</a>(<a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../_variables/now.html">$now</a>);
<a name="l566"><span class="linenum"> 566</span></a>  
<a name="l567"><span class="linenum"> 567</span></a>      if (<a class="var it39002" onMouseOver="hilite(39002)" onMouseOut="lolite()" onClick="logVariable('fromtime')" href="../_variables/fromtime.html">$fromtime</a>) {
<a name="l568"><span class="linenum"> 568</span></a>          <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('tstart')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/tstart.html">tstart</a> = <a class="var it39002" onMouseOver="hilite(39002)" onMouseOut="lolite()" onClick="logVariable('fromtime')" href="../_variables/fromtime.html">$fromtime</a>;
<a name="l569"><span class="linenum"> 569</span></a>      } else {
<a name="l570"><span class="linenum"> 570</span></a>          <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('tstart')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/tstart.html">tstart</a> = <a class="var it39003" onMouseOver="hilite(39003)" onMouseOut="lolite()" onClick="logVariable('usermidnighttoday')" href="../_variables/usermidnighttoday.html">$usermidnighttoday</a>;
<a name="l571"><span class="linenum"> 571</span></a>      }
<a name="l572"><span class="linenum"> 572</span></a>  
<a name="l573"><span class="linenum"> 573</span></a>  <span class="comment">    // This works correctly with respect to the user's DST, but it is accurate</span>
<a name="l574"><span class="linenum"> 574</span></a>  <span class="comment">    // only because $fromtime is always the exact midnight of some day!</span>
<a name="l575"><span class="linenum"> 575</span></a>      <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('tend')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/tend.html">tend</a> = <a class="function" onClick="logFunction('usergetmidnight')" href="../_functions/usergetmidnight.html" onMouseOver="funcPopup(event,'usergetmidnight')">usergetmidnight</a>(<a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('tstart')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/tstart.html">tstart</a> + <a class="constant" onClick="logConstant('DAYSECS')" href="../_constants/DAYSECS.html" onMouseOver="constPopup(event,'DAYSECS')">DAYSECS</a> * <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('range')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/range.html">range</a> + 3 * <a class="constant" onClick="logConstant('HOURSECS')" href="../_constants/HOURSECS.html" onMouseOver="constPopup(event,'HOURSECS')">HOURSECS</a>) - 1;
<a name="l576"><span class="linenum"> 576</span></a>  
<a name="l577"><span class="linenum"> 577</span></a>  <span class="comment">    // Get the events matching our criteria</span>
<a name="l578"><span class="linenum"> 578</span></a>      <a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a> = <a class="function" onClick="logFunction('calendar_get_events')" href="../_functions/calendar_get_events.html" onMouseOver="funcPopup(event,'calendar_get_events')">calendar_get_events</a>(<a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('tstart')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/tstart.html">tstart</a>, <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('tend')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/tend.html">tend</a>, <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../_variables/users.html">$users</a>, <a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../_variables/groups.html">$groups</a>, <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>);
<a name="l579"><span class="linenum"> 579</span></a>  
<a name="l580"><span class="linenum"> 580</span></a>  <span class="comment">    // This is either a genius idea or an idiot idea: in order to not complicate things, we use this rule: if, after</span>
<a name="l581"><span class="linenum"> 581</span></a>  <span class="comment">    // possibly removing SITEID from $courses, there is only one course left, then clicking on a day in the month</span>
<a name="l582"><span class="linenum"> 582</span></a>  <span class="comment">    // will also set the $SESSION-&gt;cal_courses_shown variable to that one course. Otherwise, we 'd need to add extra</span>
<a name="l583"><span class="linenum"> 583</span></a>  <span class="comment">    // arguments to this function.</span>
<a name="l584"><span class="linenum"> 584</span></a>  
<a name="l585"><span class="linenum"> 585</span></a>      <a class="var it38990" onMouseOver="hilite(38990)" onMouseOut="lolite()" onClick="logVariable('hrefparams')" href="../_variables/hrefparams.html">$hrefparams</a> = array();
<a name="l586"><span class="linenum"> 586</span></a>      if(!empty(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>)) {
<a name="l587"><span class="linenum"> 587</span></a>          <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> = <a class="phpfunction" onClick="logFunction('array_diff')" href="../_functions/array_diff.html" onMouseOver="phpfuncPopup(event,'array_diff')">array_diff</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>, array(<a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>));
<a name="l588"><span class="linenum"> 588</span></a>          if(<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>) == 1) {
<a name="l589"><span class="linenum"> 589</span></a>              <a class="var it38990" onMouseOver="hilite(38990)" onMouseOut="lolite()" onClick="logVariable('hrefparams')" href="../_variables/hrefparams.html">$hrefparams</a>['course'] = <a class="phpfunction" onClick="logFunction('reset')" href="../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>);
<a name="l590"><span class="linenum"> 590</span></a>          }
<a name="l591"><span class="linenum"> 591</span></a>      }
<a name="l592"><span class="linenum"> 592</span></a>  
<a name="l593"><span class="linenum"> 593</span></a>      if (<a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a> !== false) {
<a name="l594"><span class="linenum"> 594</span></a>  
<a name="l595"><span class="linenum"> 595</span></a>          <a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a> = <a class="function" onClick="logFunction('get_fast_modinfo')" href="../_functions/get_fast_modinfo.html" onMouseOver="funcPopup(event,'get_fast_modinfo')">get_fast_modinfo</a>(<a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('COURSE')" href="../_variables/COURSE.html">$COURSE</a>);
<a name="l596"><span class="linenum"> 596</span></a>  
<a name="l597"><span class="linenum"> 597</span></a>          foreach(<a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a> as <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>) {
<a name="l598"><span class="linenum"> 598</span></a>  
<a name="l599"><span class="linenum"> 599</span></a>  
<a name="l600"><span class="linenum"> 600</span></a>              if (!empty(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('modulename')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/modulename.html">modulename</a>)) {
<a name="l601"><span class="linenum"> 601</span></a>                  if (<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('courseid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a> == <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('COURSE')" href="../_variables/COURSE.html">$COURSE</a>-&gt;<a onClick="logVariable('id')" class="var it43316" onMouseOver="hilite(43316)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l602"><span class="linenum"> 602</span></a>                      if (isset(<a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a>-&gt;<a onClick="logVariable('instances')" class="var it43006" onMouseOver="hilite(43006)" onMouseOut="lolite()" href="../_variables/instances.html">instances</a>[<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('modulename')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/modulename.html">modulename</a>][<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('instance')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>])) {
<a name="l603"><span class="linenum"> 603</span></a>                          <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a> = <a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a>-&gt;<a onClick="logVariable('instances')" class="var it43006" onMouseOver="hilite(43006)" onMouseOut="lolite()" href="../_variables/instances.html">instances</a>[<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('modulename')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/modulename.html">modulename</a>][<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('instance')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>];
<a name="l604"><span class="linenum"> 604</span></a>                          if (!<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('uservisible')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/uservisible.html">uservisible</a>) {
<a name="l605"><span class="linenum"> 605</span></a>                              continue;
<a name="l606"><span class="linenum"> 606</span></a>                          }
<a name="l607"><span class="linenum"> 607</span></a>                      }
<a name="l608"><span class="linenum"> 608</span></a>                  } else {
<a name="l609"><span class="linenum"> 609</span></a>                      if (!<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('modulename')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/modulename.html">modulename</a>, <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('instance')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>)) {
<a name="l610"><span class="linenum"> 610</span></a>                          continue;
<a name="l611"><span class="linenum"> 611</span></a>                      }
<a name="l612"><span class="linenum"> 612</span></a>                      if (!\core_availability\<a class="class" onClick="logClass('info_module')" href="../_classes/info_module.html" onMouseOver="classPopup(event,'info_module')">info_module</a>::<a class="function" onClick="logFunction('is_user_visible')" href="../_functions/is_user_visible.html" onMouseOver="funcPopup(event,'is_user_visible')">is_user_visible</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>, 0, false)) {
<a name="l613"><span class="linenum"> 613</span></a>                          continue;
<a name="l614"><span class="linenum"> 614</span></a>                      }
<a name="l615"><span class="linenum"> 615</span></a>                  }
<a name="l616"><span class="linenum"> 616</span></a>              }
<a name="l617"><span class="linenum"> 617</span></a>  
<a name="l618"><span class="linenum"> 618</span></a>              if (<a class="var it2705" onMouseOver="hilite(2705)" onMouseOut="lolite()" onClick="logVariable('processed')" href="../_variables/processed.html">$processed</a> &gt;= <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a>-&gt;<a onClick="logVariable('maxevents')" class="var it44665" onMouseOver="hilite(44665)" onMouseOut="lolite()" href="../_variables/maxevents.html">maxevents</a>) {
<a name="l619"><span class="linenum"> 619</span></a>                  break;
<a name="l620"><span class="linenum"> 620</span></a>              }
<a name="l621"><span class="linenum"> 621</span></a>  
<a name="l622"><span class="linenum"> 622</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('time')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/time.html">time</a> = <a class="function" onClick="logFunction('calendar_format_event_time')" href="../_functions/calendar_format_event_time.html" onMouseOver="funcPopup(event,'calendar_format_event_time')">calendar_format_event_time</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>, <a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../_variables/now.html">$now</a>, <a class="var it38990" onMouseOver="hilite(38990)" onMouseOut="lolite()" onClick="logVariable('hrefparams')" href="../_variables/hrefparams.html">$hrefparams</a>);
<a name="l623"><span class="linenum"> 623</span></a>              <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>[] = <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>;
<a name="l624"><span class="linenum"> 624</span></a>              ++<a class="var it2705" onMouseOver="hilite(2705)" onMouseOut="lolite()" onClick="logVariable('processed')" href="../_variables/processed.html">$processed</a>;
<a name="l625"><span class="linenum"> 625</span></a>          }
<a name="l626"><span class="linenum"> 626</span></a>      }
<a name="l627"><span class="linenum"> 627</span></a>      return <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>;
<a name="l628"><span class="linenum"> 628</span></a>  }
<a name="l629"><span class="linenum"> 629</span></a>  
<a name="l630"><span class="linenum"> 630</span></a>  
<a name="l631"><span class="linenum"> 631</span></a>  <span class="comment">/**</span>
<a name="l632"><span class="linenum"> 632</span></a>  <span class="comment"> * Get a HTML link to a course.</span>
<a name="l633"><span class="linenum"> 633</span></a>  <span class="comment"> *</span>
<a name="l634"><span class="linenum"> 634</span></a>  <span class="comment"> * @param int $courseid the course id</span>
<a name="l635"><span class="linenum"> 635</span></a>  <span class="comment"> * @return string a link to the course (as HTML); empty if the course id is invalid</span>
<a name="l636"><span class="linenum"> 636</span></a>  <span class="comment"> */</span>
<a name="l637"><span class="linenum"> 637</span></a>  function <a class="function" onClick="logFunction('calendar_get_courselink')" href="../_functions/calendar_get_courselink.html" onMouseOver="funcPopup(event,'calendar_get_courselink')">calendar_get_courselink</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>) {
<a name="l638"><span class="linenum"> 638</span></a>  
<a name="l639"><span class="linenum"> 639</span></a>      if (!<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>) {
<a name="l640"><span class="linenum"> 640</span></a>          return '';
<a name="l641"><span class="linenum"> 641</span></a>      }
<a name="l642"><span class="linenum"> 642</span></a>  
<a name="l643"><span class="linenum"> 643</span></a>      <a class="function" onClick="logFunction('calendar_get_course_cached')" href="../_functions/calendar_get_course_cached.html" onMouseOver="funcPopup(event,'calendar_get_course_cached')">calendar_get_course_cached</a>(<a class="var it15807" onMouseOver="hilite(15807)" onMouseOut="lolite()" onClick="logVariable('coursecache')" href="../_variables/coursecache.html">$coursecache</a>, <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l644"><span class="linenum"> 644</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l645"><span class="linenum"> 645</span></a>      <a class="var it370" onMouseOver="hilite(370)" onMouseOut="lolite()" onClick="logVariable('fullname')" href="../_variables/fullname.html">$fullname</a> = <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it15807" onMouseOver="hilite(15807)" onMouseOut="lolite()" onClick="logVariable('coursecache')" href="../_variables/coursecache.html">$coursecache</a>[<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>]-&gt;fullname, true, array('context' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>));
<a name="l646"><span class="linenum"> 646</span></a>      <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../course/view.php.html">/course/view.php</a>', array('id' =&gt; <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>));
<a name="l647"><span class="linenum"> 647</span></a>      <a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../_variables/link.html">$link</a> = <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, <a class="var it370" onMouseOver="hilite(370)" onMouseOut="lolite()" onClick="logVariable('fullname')" href="../_variables/fullname.html">$fullname</a>);
<a name="l648"><span class="linenum"> 648</span></a>  
<a name="l649"><span class="linenum"> 649</span></a>      return <a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../_variables/link.html">$link</a>;
<a name="l650"><span class="linenum"> 650</span></a>  }
<a name="l651"><span class="linenum"> 651</span></a>  
<a name="l652"><span class="linenum"> 652</span></a>  
<a name="l653"><span class="linenum"> 653</span></a>  <span class="comment">/**</span>
<a name="l654"><span class="linenum"> 654</span></a>  <span class="comment"> * Add calendar event metadata</span>
<a name="l655"><span class="linenum"> 655</span></a>  <span class="comment"> *</span>
<a name="l656"><span class="linenum"> 656</span></a>  <span class="comment"> * @param stdClass $event event info</span>
<a name="l657"><span class="linenum"> 657</span></a>  <span class="comment"> * @return stdClass $event metadata</span>
<a name="l658"><span class="linenum"> 658</span></a>  <span class="comment"> */</span>
<a name="l659"><span class="linenum"> 659</span></a>  function <a class="function" onClick="logFunction('calendar_add_event_metadata')" href="../_functions/calendar_add_event_metadata.html" onMouseOver="funcPopup(event,'calendar_add_event_metadata')">calendar_add_event_metadata</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>) {
<a name="l660"><span class="linenum"> 660</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l661"><span class="linenum"> 661</span></a>  
<a name="l662"><span class="linenum"> 662</span></a>  <span class="comment">    //Support multilang in event-&gt;name</span>
<a name="l663"><span class="linenum"> 663</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('name')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('name')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/name.html">name</a>,true);
<a name="l664"><span class="linenum"> 664</span></a>  
<a name="l665"><span class="linenum"> 665</span></a>      if(!empty(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('modulename')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/modulename.html">modulename</a>)) {                                // Activity event
<a name="l666"><span class="linenum"> 666</span></a>  <span class="comment">        // The module name is set. I will assume that it has to be displayed, and</span>
<a name="l667"><span class="linenum"> 667</span></a>  <span class="comment">        // also that it is an automatically-generated event. And of course that the</span>
<a name="l668"><span class="linenum"> 668</span></a>  <span class="comment">        // fields for get_coursemodule_from_instance are set correctly.</span>
<a name="l669"><span class="linenum"> 669</span></a>          <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a> = <a class="function" onClick="logFunction('calendar_get_module_cached')" href="../_functions/calendar_get_module_cached.html" onMouseOver="funcPopup(event,'calendar_get_module_cached')">calendar_get_module_cached</a>(<a class="var it15807" onMouseOver="hilite(15807)" onMouseOut="lolite()" onClick="logVariable('coursecache')" href="../_variables/coursecache.html">$coursecache</a>, <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('modulename')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/modulename.html">modulename</a>, <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('instance')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>);
<a name="l670"><span class="linenum"> 670</span></a>  
<a name="l671"><span class="linenum"> 671</span></a>          if (<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a> === false) {
<a name="l672"><span class="linenum"> 672</span></a>              return;
<a name="l673"><span class="linenum"> 673</span></a>          }
<a name="l674"><span class="linenum"> 674</span></a>  
<a name="l675"><span class="linenum"> 675</span></a>          <a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../_variables/modulename.html">$modulename</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulename', <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('modulename')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/modulename.html">modulename</a>);
<a name="l676"><span class="linenum"> 676</span></a>          if (<a class="function" onClick="logFunction('get_string_manager')" href="../_functions/get_string_manager.html" onMouseOver="funcPopup(event,'get_string_manager')">get_string_manager</a>()-&gt;<a class="function" onClick="logFunction('string_exists')" href="../_functions/string_exists.html" onMouseOver="funcPopup(event,'string_exists')">string_exists</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('eventtype')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/eventtype.html">eventtype</a>, <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('modulename')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/modulename.html">modulename</a>)) {
<a name="l677"><span class="linenum"> 677</span></a>  <span class="comment">            // will be used as alt text if the event icon</span>
<a name="l678"><span class="linenum"> 678</span></a>              <a class="var it5771" onMouseOver="hilite(5771)" onMouseOut="lolite()" onClick="logVariable('eventtype')" href="../_variables/eventtype.html">$eventtype</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('eventtype')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/eventtype.html">eventtype</a>, <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('modulename')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/modulename.html">modulename</a>);
<a name="l679"><span class="linenum"> 679</span></a>          } else {
<a name="l680"><span class="linenum"> 680</span></a>              <a class="var it5771" onMouseOver="hilite(5771)" onMouseOut="lolite()" onClick="logVariable('eventtype')" href="../_variables/eventtype.html">$eventtype</a> = '';
<a name="l681"><span class="linenum"> 681</span></a>          }
<a name="l682"><span class="linenum"> 682</span></a>          <a class="var it727" onMouseOver="hilite(727)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a> = <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_url')" href="../_functions/pix_url.html" onMouseOver="funcPopup(event,'pix_url')">pix_url</a>('icon', <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('modulename')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/modulename.html">modulename</a>) . '';
<a name="l683"><span class="linenum"> 683</span></a>  
<a name="l684"><span class="linenum"> 684</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('icon')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/icon.html">icon</a> = '&lt;img src=&quot;'.<a class="var it727" onMouseOver="hilite(727)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a>.'&quot; alt=&quot;'.<a class="var it5771" onMouseOver="hilite(5771)" onMouseOut="lolite()" onClick="logVariable('eventtype')" href="../_variables/eventtype.html">$eventtype</a>.'&quot; title=&quot;'.<a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../_variables/modulename.html">$modulename</a>.'&quot; class=&quot;icon&quot; /&gt;';
<a name="l685"><span class="linenum"> 685</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('referer')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/referer.html">referer</a> = '&lt;a href=&quot;'.<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>.'/mod/'.<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('modulename')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/modulename.html">modulename</a>.'/view.php?id='.<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('id')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/id.html">id</a>.'&quot;&gt;'.<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('name')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/name.html">name</a>.'&lt;/a&gt;';
<a name="l686"><span class="linenum"> 686</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('courselink')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/courselink.html">courselink</a> = <a class="function" onClick="logFunction('calendar_get_courselink')" href="../_functions/calendar_get_courselink.html" onMouseOver="funcPopup(event,'calendar_get_courselink')">calendar_get_courselink</a>(<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('course')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/course.html">course</a>);
<a name="l687"><span class="linenum"> 687</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('cmid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/cmid.html">cmid</a> = <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('id')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l688"><span class="linenum"> 688</span></a>  
<a name="l689"><span class="linenum"> 689</span></a>      } else if(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('courseid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a> == <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>) {                              // Site event
<a name="l690"><span class="linenum"> 690</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('icon')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/icon.html">icon</a> = '&lt;img src=&quot;'.<a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_url')" href="../_functions/pix_url.html" onMouseOver="funcPopup(event,'pix_url')">pix_url</a>('i/siteevent') . '&quot; alt=&quot;'.<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('globalevent', 'calendar').'&quot; class=&quot;icon&quot; /&gt;';
<a name="l691"><span class="linenum"> 691</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('cssclass')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/cssclass.html">cssclass</a> = 'calendar_event_global';
<a name="l692"><span class="linenum"> 692</span></a>      } else if(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('courseid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a> != 0 &amp;&amp; <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('courseid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a> != <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a> &amp;&amp; <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('groupid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/groupid.html">groupid</a> == 0) {          // Course event
<a name="l693"><span class="linenum"> 693</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('icon')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/icon.html">icon</a> = '&lt;img src=&quot;'.<a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_url')" href="../_functions/pix_url.html" onMouseOver="funcPopup(event,'pix_url')">pix_url</a>('i/courseevent') . '&quot; alt=&quot;'.<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('courseevent', 'calendar').'&quot; class=&quot;icon&quot; /&gt;';
<a name="l694"><span class="linenum"> 694</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('courselink')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/courselink.html">courselink</a> = <a class="function" onClick="logFunction('calendar_get_courselink')" href="../_functions/calendar_get_courselink.html" onMouseOver="funcPopup(event,'calendar_get_courselink')">calendar_get_courselink</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('courseid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>);
<a name="l695"><span class="linenum"> 695</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('cssclass')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/cssclass.html">cssclass</a> = 'calendar_event_course';
<a name="l696"><span class="linenum"> 696</span></a>      } else if (<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('groupid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/groupid.html">groupid</a>) {                                    // Group event
<a name="l697"><span class="linenum"> 697</span></a>          if (<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a> = <a class="function" onClick="logFunction('calendar_get_group_cached')" href="../_functions/calendar_get_group_cached.html" onMouseOver="funcPopup(event,'calendar_get_group_cached')">calendar_get_group_cached</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('groupid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/groupid.html">groupid</a>)) {
<a name="l698"><span class="linenum"> 698</span></a>              <a class="var it1985" onMouseOver="hilite(1985)" onMouseOut="lolite()" onClick="logVariable('groupname')" href="../_variables/groupname.html">$groupname</a> = <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('name')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../_variables/name.html">name</a>, true, <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('courseid')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>));
<a name="l699"><span class="linenum"> 699</span></a>          } else {
<a name="l700"><span class="linenum"> 700</span></a>              <a class="var it1985" onMouseOver="hilite(1985)" onMouseOut="lolite()" onClick="logVariable('groupname')" href="../_variables/groupname.html">$groupname</a> = '';
<a name="l701"><span class="linenum"> 701</span></a>          }
<a name="l702"><span class="linenum"> 702</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('icon')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/icon.html">icon</a> = <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('empty_tag')" href="../_functions/empty_tag.html" onMouseOver="funcPopup(event,'empty_tag')">empty_tag</a>('image', array('src' =&gt; <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_url')" href="../_functions/pix_url.html" onMouseOver="funcPopup(event,'pix_url')">pix_url</a>('i/groupevent'),
<a name="l703"><span class="linenum"> 703</span></a>              'alt' =&gt; <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('groupevent', 'calendar'), 'title' =&gt; <a class="var it1985" onMouseOver="hilite(1985)" onMouseOut="lolite()" onClick="logVariable('groupname')" href="../_variables/groupname.html">$groupname</a>, 'class' =&gt; 'icon'));
<a name="l704"><span class="linenum"> 704</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('courselink')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/courselink.html">courselink</a> = <a class="function" onClick="logFunction('calendar_get_courselink')" href="../_functions/calendar_get_courselink.html" onMouseOver="funcPopup(event,'calendar_get_courselink')">calendar_get_courselink</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('courseid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>) . ', ' . <a class="var it1985" onMouseOver="hilite(1985)" onMouseOut="lolite()" onClick="logVariable('groupname')" href="../_variables/groupname.html">$groupname</a>;
<a name="l705"><span class="linenum"> 705</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('cssclass')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/cssclass.html">cssclass</a> = 'calendar_event_group';
<a name="l706"><span class="linenum"> 706</span></a>      } else if(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('userid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>) {                                      // User event
<a name="l707"><span class="linenum"> 707</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('icon')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/icon.html">icon</a> = '&lt;img src=&quot;'.<a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_url')" href="../_functions/pix_url.html" onMouseOver="funcPopup(event,'pix_url')">pix_url</a>('i/userevent') . '&quot; alt=&quot;'.<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('userevent', 'calendar').'&quot; class=&quot;icon&quot; /&gt;';
<a name="l708"><span class="linenum"> 708</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('cssclass')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/cssclass.html">cssclass</a> = 'calendar_event_user';
<a name="l709"><span class="linenum"> 709</span></a>      }
<a name="l710"><span class="linenum"> 710</span></a>      return <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>;
<a name="l711"><span class="linenum"> 711</span></a>  }
<a name="l712"><span class="linenum"> 712</span></a>  
<a name="l713"><span class="linenum"> 713</span></a>  <span class="comment">/**</span>
<a name="l714"><span class="linenum"> 714</span></a>  <span class="comment"> * Get calendar events</span>
<a name="l715"><span class="linenum"> 715</span></a>  <span class="comment"> *</span>
<a name="l716"><span class="linenum"> 716</span></a>  <span class="comment"> * @param int $tstart Start time of time range for events</span>
<a name="l717"><span class="linenum"> 717</span></a>  <span class="comment"> * @param int $tend End time of time range for events</span>
<a name="l718"><span class="linenum"> 718</span></a>  <span class="comment"> * @param array|int|boolean $users array of users, user id or boolean for all/no user events</span>
<a name="l719"><span class="linenum"> 719</span></a>  <span class="comment"> * @param array|int|boolean $groups array of groups, group id or boolean for all/no group events</span>
<a name="l720"><span class="linenum"> 720</span></a>  <span class="comment"> * @param array|int|boolean $courses array of courses, course id or boolean for all/no course events</span>
<a name="l721"><span class="linenum"> 721</span></a>  <span class="comment"> * @param boolean $withduration whether only events starting within time range selected</span>
<a name="l722"><span class="linenum"> 722</span></a>  <span class="comment"> *                              or events in progress/already started selected as well</span>
<a name="l723"><span class="linenum"> 723</span></a>  <span class="comment"> * @param boolean $ignorehidden whether to select only visible events or all events</span>
<a name="l724"><span class="linenum"> 724</span></a>  <span class="comment"> * @return array $events of selected events or an empty array if there aren't any (or there was an error)</span>
<a name="l725"><span class="linenum"> 725</span></a>  <span class="comment"> */</span>
<a name="l726"><span class="linenum"> 726</span></a>  function <a class="function" onClick="logFunction('calendar_get_events')" href="../_functions/calendar_get_events.html" onMouseOver="funcPopup(event,'calendar_get_events')">calendar_get_events</a>(<a class="var it17564" onMouseOver="hilite(17564)" onMouseOut="lolite()" onClick="logVariable('tstart')" href="../_variables/tstart.html">$tstart</a>, <a class="var it17565" onMouseOver="hilite(17565)" onMouseOut="lolite()" onClick="logVariable('tend')" href="../_variables/tend.html">$tend</a>, <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../_variables/users.html">$users</a>, <a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../_variables/groups.html">$groups</a>, <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>, <a class="var it39004" onMouseOver="hilite(39004)" onMouseOut="lolite()" onClick="logVariable('withduration')" href="../_variables/withduration.html">$withduration</a>=true, <a class="var it24469" onMouseOver="hilite(24469)" onMouseOut="lolite()" onClick="logVariable('ignorehidden')" href="../_variables/ignorehidden.html">$ignorehidden</a>=true) {
<a name="l727"><span class="linenum"> 727</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l728"><span class="linenum"> 728</span></a>  
<a name="l729"><span class="linenum"> 729</span></a>      <a class="var it12380" onMouseOver="hilite(12380)" onMouseOut="lolite()" onClick="logVariable('whereclause')" href="../_variables/whereclause.html">$whereclause</a> = '';
<a name="l730"><span class="linenum"> 730</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array();
<a name="l731"><span class="linenum"> 731</span></a>  <span class="comment">    // Quick test.</span>
<a name="l732"><span class="linenum"> 732</span></a>      if (empty(<a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../_variables/users.html">$users</a>) &amp;&amp; empty(<a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../_variables/groups.html">$groups</a>) &amp;&amp; empty(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>)) {
<a name="l733"><span class="linenum"> 733</span></a>          return array();
<a name="l734"><span class="linenum"> 734</span></a>      }
<a name="l735"><span class="linenum"> 735</span></a>  
<a name="l736"><span class="linenum"> 736</span></a>      if ((<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../_variables/users.html">$users</a>) &amp;&amp; !empty(<a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../_variables/users.html">$users</a>)) or <a class="phpfunction" onClick="logFunction('is_numeric')" href="../_functions/is_numeric.html" onMouseOver="phpfuncPopup(event,'is_numeric')">is_numeric</a>(<a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../_variables/users.html">$users</a>)) {
<a name="l737"><span class="linenum"> 737</span></a>  <span class="comment">        // Events from a number of users</span>
<a name="l738"><span class="linenum"> 738</span></a>          if(!empty(<a class="var it12380" onMouseOver="hilite(12380)" onMouseOut="lolite()" onClick="logVariable('whereclause')" href="../_variables/whereclause.html">$whereclause</a>)) <a class="var it12380" onMouseOver="hilite(12380)" onMouseOut="lolite()" onClick="logVariable('whereclause')" href="../_variables/whereclause.html">$whereclause</a> .= ' OR';
<a name="l739"><span class="linenum"> 739</span></a>          <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it39005" onMouseOver="hilite(39005)" onMouseOut="lolite()" onClick="logVariable('insqlusers')" href="../_variables/insqlusers.html">$insqlusers</a>, <a class="var it39006" onMouseOver="hilite(39006)" onMouseOut="lolite()" onClick="logVariable('inparamsusers')" href="../_variables/inparamsusers.html">$inparamsusers</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../_variables/users.html">$users</a>, <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>);
<a name="l740"><span class="linenum"> 740</span></a>          <a class="var it12380" onMouseOver="hilite(12380)" onMouseOut="lolite()" onClick="logVariable('whereclause')" href="../_variables/whereclause.html">$whereclause</a> .= &quot; (userid <a class="var it39005" onMouseOver="hilite(39005)" onMouseOut="lolite()" onClick="logVariable('insqlusers')" href="../_variables/insqlusers.html">$insqlusers</a> AND courseid = 0 AND groupid = 0)&quot;;
<a name="l741"><span class="linenum"> 741</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, <a class="var it39006" onMouseOver="hilite(39006)" onMouseOut="lolite()" onClick="logVariable('inparamsusers')" href="../_variables/inparamsusers.html">$inparamsusers</a>);
<a name="l742"><span class="linenum"> 742</span></a>      } else if(<a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../_variables/users.html">$users</a> === true) {
<a name="l743"><span class="linenum"> 743</span></a>  <span class="comment">        // Events from ALL users</span>
<a name="l744"><span class="linenum"> 744</span></a>          if(!empty(<a class="var it12380" onMouseOver="hilite(12380)" onMouseOut="lolite()" onClick="logVariable('whereclause')" href="../_variables/whereclause.html">$whereclause</a>)) <a class="var it12380" onMouseOver="hilite(12380)" onMouseOut="lolite()" onClick="logVariable('whereclause')" href="../_variables/whereclause.html">$whereclause</a> .= ' OR';
<a name="l745"><span class="linenum"> 745</span></a>          <a class="var it12380" onMouseOver="hilite(12380)" onMouseOut="lolite()" onClick="logVariable('whereclause')" href="../_variables/whereclause.html">$whereclause</a> .= ' (userid != 0 AND courseid = 0 AND groupid = 0)';
<a name="l746"><span class="linenum"> 746</span></a>      } else if(<a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../_variables/users.html">$users</a> === false) {
<a name="l747"><span class="linenum"> 747</span></a>  <span class="comment">        // No user at all, do nothing</span>
<a name="l748"><span class="linenum"> 748</span></a>      }
<a name="l749"><span class="linenum"> 749</span></a>  
<a name="l750"><span class="linenum"> 750</span></a>      if ((<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../_variables/groups.html">$groups</a>) &amp;&amp; !empty(<a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../_variables/groups.html">$groups</a>)) or <a class="phpfunction" onClick="logFunction('is_numeric')" href="../_functions/is_numeric.html" onMouseOver="phpfuncPopup(event,'is_numeric')">is_numeric</a>(<a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../_variables/groups.html">$groups</a>)) {
<a name="l751"><span class="linenum"> 751</span></a>  <span class="comment">        // Events from a number of groups</span>
<a name="l752"><span class="linenum"> 752</span></a>          if(!empty(<a class="var it12380" onMouseOver="hilite(12380)" onMouseOut="lolite()" onClick="logVariable('whereclause')" href="../_variables/whereclause.html">$whereclause</a>)) <a class="var it12380" onMouseOver="hilite(12380)" onMouseOut="lolite()" onClick="logVariable('whereclause')" href="../_variables/whereclause.html">$whereclause</a> .= ' OR';
<a name="l753"><span class="linenum"> 753</span></a>          <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it39007" onMouseOver="hilite(39007)" onMouseOut="lolite()" onClick="logVariable('insqlgroups')" href="../_variables/insqlgroups.html">$insqlgroups</a>, <a class="var it39008" onMouseOver="hilite(39008)" onMouseOut="lolite()" onClick="logVariable('inparamsgroups')" href="../_variables/inparamsgroups.html">$inparamsgroups</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../_variables/groups.html">$groups</a>, <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>);
<a name="l754"><span class="linenum"> 754</span></a>          <a class="var it12380" onMouseOver="hilite(12380)" onMouseOut="lolite()" onClick="logVariable('whereclause')" href="../_variables/whereclause.html">$whereclause</a> .= &quot; groupid <a class="var it39007" onMouseOver="hilite(39007)" onMouseOut="lolite()" onClick="logVariable('insqlgroups')" href="../_variables/insqlgroups.html">$insqlgroups</a> &quot;;
<a name="l755"><span class="linenum"> 755</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, <a class="var it39008" onMouseOver="hilite(39008)" onMouseOut="lolite()" onClick="logVariable('inparamsgroups')" href="../_variables/inparamsgroups.html">$inparamsgroups</a>);
<a name="l756"><span class="linenum"> 756</span></a>      } else if(<a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../_variables/groups.html">$groups</a> === true) {
<a name="l757"><span class="linenum"> 757</span></a>  <span class="comment">        // Events from ALL groups</span>
<a name="l758"><span class="linenum"> 758</span></a>          if(!empty(<a class="var it12380" onMouseOver="hilite(12380)" onMouseOut="lolite()" onClick="logVariable('whereclause')" href="../_variables/whereclause.html">$whereclause</a>)) <a class="var it12380" onMouseOver="hilite(12380)" onMouseOut="lolite()" onClick="logVariable('whereclause')" href="../_variables/whereclause.html">$whereclause</a> .= ' OR ';
<a name="l759"><span class="linenum"> 759</span></a>          <a class="var it12380" onMouseOver="hilite(12380)" onMouseOut="lolite()" onClick="logVariable('whereclause')" href="../_variables/whereclause.html">$whereclause</a> .= ' groupid != 0';
<a name="l760"><span class="linenum"> 760</span></a>      }
<a name="l761"><span class="linenum"> 761</span></a>  <span class="comment">    // boolean false (no groups at all): we don't need to do anything</span>
<a name="l762"><span class="linenum"> 762</span></a>  
<a name="l763"><span class="linenum"> 763</span></a>      if ((<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>) &amp;&amp; !empty(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>)) or <a class="phpfunction" onClick="logFunction('is_numeric')" href="../_functions/is_numeric.html" onMouseOver="phpfuncPopup(event,'is_numeric')">is_numeric</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>)) {
<a name="l764"><span class="linenum"> 764</span></a>          if(!empty(<a class="var it12380" onMouseOver="hilite(12380)" onMouseOut="lolite()" onClick="logVariable('whereclause')" href="../_variables/whereclause.html">$whereclause</a>)) <a class="var it12380" onMouseOver="hilite(12380)" onMouseOut="lolite()" onClick="logVariable('whereclause')" href="../_variables/whereclause.html">$whereclause</a> .= ' OR';
<a name="l765"><span class="linenum"> 765</span></a>          <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it39009" onMouseOver="hilite(39009)" onMouseOut="lolite()" onClick="logVariable('insqlcourses')" href="../_variables/insqlcourses.html">$insqlcourses</a>, <a class="var it39010" onMouseOver="hilite(39010)" onMouseOut="lolite()" onClick="logVariable('inparamscourses')" href="../_variables/inparamscourses.html">$inparamscourses</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>, <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>);
<a name="l766"><span class="linenum"> 766</span></a>          <a class="var it12380" onMouseOver="hilite(12380)" onMouseOut="lolite()" onClick="logVariable('whereclause')" href="../_variables/whereclause.html">$whereclause</a> .= &quot; (groupid = 0 AND courseid <a class="var it39009" onMouseOver="hilite(39009)" onMouseOut="lolite()" onClick="logVariable('insqlcourses')" href="../_variables/insqlcourses.html">$insqlcourses</a>)&quot;;
<a name="l767"><span class="linenum"> 767</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, <a class="var it39010" onMouseOver="hilite(39010)" onMouseOut="lolite()" onClick="logVariable('inparamscourses')" href="../_variables/inparamscourses.html">$inparamscourses</a>);
<a name="l768"><span class="linenum"> 768</span></a>      } else if (<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> === true) {
<a name="l769"><span class="linenum"> 769</span></a>  <span class="comment">        // Events from ALL courses</span>
<a name="l770"><span class="linenum"> 770</span></a>          if(!empty(<a class="var it12380" onMouseOver="hilite(12380)" onMouseOut="lolite()" onClick="logVariable('whereclause')" href="../_variables/whereclause.html">$whereclause</a>)) <a class="var it12380" onMouseOver="hilite(12380)" onMouseOut="lolite()" onClick="logVariable('whereclause')" href="../_variables/whereclause.html">$whereclause</a> .= ' OR';
<a name="l771"><span class="linenum"> 771</span></a>          <a class="var it12380" onMouseOver="hilite(12380)" onMouseOut="lolite()" onClick="logVariable('whereclause')" href="../_variables/whereclause.html">$whereclause</a> .= ' (groupid = 0 AND courseid != 0)';
<a name="l772"><span class="linenum"> 772</span></a>      }
<a name="l773"><span class="linenum"> 773</span></a>  
<a name="l774"><span class="linenum"> 774</span></a>  <span class="comment">    // Security check: if, by now, we have NOTHING in $whereclause, then it means</span>
<a name="l775"><span class="linenum"> 775</span></a>  <span class="comment">    // that NO event-selecting clauses were defined. Thus, we won't be returning ANY</span>
<a name="l776"><span class="linenum"> 776</span></a>  <span class="comment">    // events no matter what. Allowing the code to proceed might return a completely</span>
<a name="l777"><span class="linenum"> 777</span></a>  <span class="comment">    // valid query with only time constraints, thus selecting ALL events in that time frame!</span>
<a name="l778"><span class="linenum"> 778</span></a>      if(empty(<a class="var it12380" onMouseOver="hilite(12380)" onMouseOut="lolite()" onClick="logVariable('whereclause')" href="../_variables/whereclause.html">$whereclause</a>)) {
<a name="l779"><span class="linenum"> 779</span></a>          return array();
<a name="l780"><span class="linenum"> 780</span></a>      }
<a name="l781"><span class="linenum"> 781</span></a>  
<a name="l782"><span class="linenum"> 782</span></a>      if(<a class="var it39004" onMouseOver="hilite(39004)" onMouseOut="lolite()" onClick="logVariable('withduration')" href="../_variables/withduration.html">$withduration</a>) {
<a name="l783"><span class="linenum"> 783</span></a>          <a class="var it39011" onMouseOver="hilite(39011)" onMouseOut="lolite()" onClick="logVariable('timeclause')" href="../_variables/timeclause.html">$timeclause</a> = '(timestart &gt;= '.<a class="var it17564" onMouseOver="hilite(17564)" onMouseOut="lolite()" onClick="logVariable('tstart')" href="../_variables/tstart.html">$tstart</a>.' OR timestart + timeduration &gt; '.<a class="var it17564" onMouseOver="hilite(17564)" onMouseOut="lolite()" onClick="logVariable('tstart')" href="../_variables/tstart.html">$tstart</a>.') AND timestart &lt;= '.<a class="var it17565" onMouseOver="hilite(17565)" onMouseOut="lolite()" onClick="logVariable('tend')" href="../_variables/tend.html">$tend</a>;
<a name="l784"><span class="linenum"> 784</span></a>      }
<a name="l785"><span class="linenum"> 785</span></a>      else {
<a name="l786"><span class="linenum"> 786</span></a>          <a class="var it39011" onMouseOver="hilite(39011)" onMouseOut="lolite()" onClick="logVariable('timeclause')" href="../_variables/timeclause.html">$timeclause</a> = 'timestart &gt;= '.<a class="var it17564" onMouseOver="hilite(17564)" onMouseOut="lolite()" onClick="logVariable('tstart')" href="../_variables/tstart.html">$tstart</a>.' AND timestart &lt;= '.<a class="var it17565" onMouseOver="hilite(17565)" onMouseOut="lolite()" onClick="logVariable('tend')" href="../_variables/tend.html">$tend</a>;
<a name="l787"><span class="linenum"> 787</span></a>      }
<a name="l788"><span class="linenum"> 788</span></a>      if(!empty(<a class="var it12380" onMouseOver="hilite(12380)" onMouseOut="lolite()" onClick="logVariable('whereclause')" href="../_variables/whereclause.html">$whereclause</a>)) {
<a name="l789"><span class="linenum"> 789</span></a>  <span class="comment">        // We have additional constraints</span>
<a name="l790"><span class="linenum"> 790</span></a>          <a class="var it12380" onMouseOver="hilite(12380)" onMouseOut="lolite()" onClick="logVariable('whereclause')" href="../_variables/whereclause.html">$whereclause</a> = <a class="var it39011" onMouseOver="hilite(39011)" onMouseOut="lolite()" onClick="logVariable('timeclause')" href="../_variables/timeclause.html">$timeclause</a>.' AND ('.<a class="var it12380" onMouseOver="hilite(12380)" onMouseOut="lolite()" onClick="logVariable('whereclause')" href="../_variables/whereclause.html">$whereclause</a>.')';
<a name="l791"><span class="linenum"> 791</span></a>      }
<a name="l792"><span class="linenum"> 792</span></a>      else {
<a name="l793"><span class="linenum"> 793</span></a>  <span class="comment">        // Just basic time filtering</span>
<a name="l794"><span class="linenum"> 794</span></a>          <a class="var it12380" onMouseOver="hilite(12380)" onMouseOut="lolite()" onClick="logVariable('whereclause')" href="../_variables/whereclause.html">$whereclause</a> = <a class="var it39011" onMouseOver="hilite(39011)" onMouseOut="lolite()" onClick="logVariable('timeclause')" href="../_variables/timeclause.html">$timeclause</a>;
<a name="l795"><span class="linenum"> 795</span></a>      }
<a name="l796"><span class="linenum"> 796</span></a>  
<a name="l797"><span class="linenum"> 797</span></a>      if (<a class="var it24469" onMouseOver="hilite(24469)" onMouseOut="lolite()" onClick="logVariable('ignorehidden')" href="../_variables/ignorehidden.html">$ignorehidden</a>) {
<a name="l798"><span class="linenum"> 798</span></a>          <a class="var it12380" onMouseOver="hilite(12380)" onMouseOut="lolite()" onClick="logVariable('whereclause')" href="../_variables/whereclause.html">$whereclause</a> .= ' AND visible = 1';
<a name="l799"><span class="linenum"> 799</span></a>      }
<a name="l800"><span class="linenum"> 800</span></a>  
<a name="l801"><span class="linenum"> 801</span></a>      <a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>('event', <a class="var it12380" onMouseOver="hilite(12380)" onMouseOut="lolite()" onClick="logVariable('whereclause')" href="../_variables/whereclause.html">$whereclause</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, 'timestart');
<a name="l802"><span class="linenum"> 802</span></a>      if (<a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a> === false) {
<a name="l803"><span class="linenum"> 803</span></a>          <a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a> = array();
<a name="l804"><span class="linenum"> 804</span></a>      }
<a name="l805"><span class="linenum"> 805</span></a>      return <a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a>;
<a name="l806"><span class="linenum"> 806</span></a>  }
<a name="l807"><span class="linenum"> 807</span></a>  
<a name="l808"><span class="linenum"> 808</span></a>  <span class="comment">/** Get calendar events by id</span>
<a name="l809"><span class="linenum"> 809</span></a>  <span class="comment"> *</span>
<a name="l810"><span class="linenum"> 810</span></a>  <span class="comment"> * @since Moodle 2.5</span>
<a name="l811"><span class="linenum"> 811</span></a>  <span class="comment"> * @param array $eventids list of event ids</span>
<a name="l812"><span class="linenum"> 812</span></a>  <span class="comment"> * @return array Array of event entries, empty array if nothing found</span>
<a name="l813"><span class="linenum"> 813</span></a>  <span class="comment"> */</span>
<a name="l814"><span class="linenum"> 814</span></a>  
<a name="l815"><span class="linenum"> 815</span></a>  function <a class="function" onClick="logFunction('calendar_get_events_by_id')" href="../_functions/calendar_get_events_by_id.html" onMouseOver="funcPopup(event,'calendar_get_events_by_id')">calendar_get_events_by_id</a>(<a class="var it38992" onMouseOver="hilite(38992)" onMouseOut="lolite()" onClick="logVariable('eventids')" href="../_variables/eventids.html">$eventids</a>) {
<a name="l816"><span class="linenum"> 816</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l817"><span class="linenum"> 817</span></a>  
<a name="l818"><span class="linenum"> 818</span></a>      if (!<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it38992" onMouseOver="hilite(38992)" onMouseOut="lolite()" onClick="logVariable('eventids')" href="../_variables/eventids.html">$eventids</a>) || empty(<a class="var it38992" onMouseOver="hilite(38992)" onMouseOut="lolite()" onClick="logVariable('eventids')" href="../_variables/eventids.html">$eventids</a>)) {
<a name="l819"><span class="linenum"> 819</span></a>          return array();
<a name="l820"><span class="linenum"> 820</span></a>      }
<a name="l821"><span class="linenum"> 821</span></a>      <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it5302" onMouseOver="hilite(5302)" onMouseOut="lolite()" onClick="logVariable('wheresql')" href="../_variables/wheresql.html">$wheresql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it38992" onMouseOver="hilite(38992)" onMouseOut="lolite()" onClick="logVariable('eventids')" href="../_variables/eventids.html">$eventids</a>);
<a name="l822"><span class="linenum"> 822</span></a>      <a class="var it5302" onMouseOver="hilite(5302)" onMouseOut="lolite()" onClick="logVariable('wheresql')" href="../_variables/wheresql.html">$wheresql</a> = &quot;id <a class="var it5302" onMouseOver="hilite(5302)" onMouseOut="lolite()" onClick="logVariable('wheresql')" href="../_variables/wheresql.html">$wheresql</a>&quot;;
<a name="l823"><span class="linenum"> 823</span></a>  
<a name="l824"><span class="linenum"> 824</span></a>      return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>('event', <a class="var it5302" onMouseOver="hilite(5302)" onMouseOut="lolite()" onClick="logVariable('wheresql')" href="../_variables/wheresql.html">$wheresql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l825"><span class="linenum"> 825</span></a>  }
<a name="l826"><span class="linenum"> 826</span></a>  
<a name="l827"><span class="linenum"> 827</span></a>  <span class="comment">/**</span>
<a name="l828"><span class="linenum"> 828</span></a>  <span class="comment"> * Get control options for Calendar</span>
<a name="l829"><span class="linenum"> 829</span></a>  <span class="comment"> *</span>
<a name="l830"><span class="linenum"> 830</span></a>  <span class="comment"> * @param string $type of calendar</span>
<a name="l831"><span class="linenum"> 831</span></a>  <span class="comment"> * @param array $data calendar information</span>
<a name="l832"><span class="linenum"> 832</span></a>  <span class="comment"> * @return string $content return available control for the calender in html</span>
<a name="l833"><span class="linenum"> 833</span></a>  <span class="comment"> */</span>
<a name="l834"><span class="linenum"> 834</span></a>  function <a class="function" onClick="logFunction('calendar_top_controls')" href="../_functions/calendar_top_controls.html" onMouseOver="funcPopup(event,'calendar_top_controls')">calendar_top_controls</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>) {
<a name="l835"><span class="linenum"> 835</span></a>      global <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l836"><span class="linenum"> 836</span></a>  
<a name="l837"><span class="linenum"> 837</span></a>  <span class="comment">    // Get the calendar type we are using.</span>
<a name="l838"><span class="linenum"> 838</span></a>      <a class="var it3542" onMouseOver="hilite(3542)" onMouseOut="lolite()" onClick="logVariable('calendartype')" href="../_variables/calendartype.html">$calendartype</a> = \core_calendar\<a class="class" onClick="logClass('type_factory')" href="../_classes/type_factory.html" onMouseOver="classPopup(event,'type_factory')">type_factory</a>::<a class="function" onClick="logFunction('get_calendar_instance')" href="../_functions/get_calendar_instance.html" onMouseOver="funcPopup(event,'get_calendar_instance')">get_calendar_instance</a>();
<a name="l839"><span class="linenum"> 839</span></a>  
<a name="l840"><span class="linenum"> 840</span></a>      <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> = '';
<a name="l841"><span class="linenum"> 841</span></a>  
<a name="l842"><span class="linenum"> 842</span></a>  <span class="comment">    // Ensure course id passed if relevant.</span>
<a name="l843"><span class="linenum"> 843</span></a>      <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a> = '';
<a name="l844"><span class="linenum"> 844</span></a>      if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['id'])) {
<a name="l845"><span class="linenum"> 845</span></a>          <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a> = '&amp;amp;course='.<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['id'];
<a name="l846"><span class="linenum"> 846</span></a>      }
<a name="l847"><span class="linenum"> 847</span></a>  
<a name="l848"><span class="linenum"> 848</span></a>  <span class="comment">    // If we are passing a month and year then we need to convert this to a timestamp to</span>
<a name="l849"><span class="linenum"> 849</span></a>  <span class="comment">    // support multiple calendars. No where in core should these be passed, this logic</span>
<a name="l850"><span class="linenum"> 850</span></a>  <span class="comment">    // here is for third party plugins that may use this function.</span>
<a name="l851"><span class="linenum"> 851</span></a>      if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['m']) &amp;&amp; !empty(<a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>['y'])) {
<a name="l852"><span class="linenum"> 852</span></a>          if (!isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['d'])) {
<a name="l853"><span class="linenum"> 853</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['d'] = 1;
<a name="l854"><span class="linenum"> 854</span></a>          }
<a name="l855"><span class="linenum"> 855</span></a>          if (!<a class="phpfunction" onClick="logFunction('checkdate')" href="../_functions/checkdate.html" onMouseOver="phpfuncPopup(event,'checkdate')">checkdate</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['m'], <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['d'], <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['y'])) {
<a name="l856"><span class="linenum"> 856</span></a>              <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l857"><span class="linenum"> 857</span></a>          } else {
<a name="l858"><span class="linenum"> 858</span></a>              <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a> = <a class="function" onClick="logFunction('make_timestamp')" href="../_functions/make_timestamp.html" onMouseOver="funcPopup(event,'make_timestamp')">make_timestamp</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['y'], <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['m'], <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['d']);
<a name="l859"><span class="linenum"> 859</span></a>          }
<a name="l860"><span class="linenum"> 860</span></a>      } else if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['time'])) {
<a name="l861"><span class="linenum"> 861</span></a>          <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['time'];
<a name="l862"><span class="linenum"> 862</span></a>      } else {
<a name="l863"><span class="linenum"> 863</span></a>          <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l864"><span class="linenum"> 864</span></a>      }
<a name="l865"><span class="linenum"> 865</span></a>  
<a name="l866"><span class="linenum"> 866</span></a>  <span class="comment">    // Get the date for the calendar type.</span>
<a name="l867"><span class="linenum"> 867</span></a>      <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a> = <a class="var it3542" onMouseOver="hilite(3542)" onMouseOut="lolite()" onClick="logVariable('calendartype')" href="../_variables/calendartype.html">$calendartype</a>-&gt;<a class="function" onClick="logFunction('timestamp_to_date_array')" href="../_functions/timestamp_to_date_array.html" onMouseOver="funcPopup(event,'timestamp_to_date_array')">timestamp_to_date_array</a>(<a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>);
<a name="l868"><span class="linenum"> 868</span></a>  
<a name="l869"><span class="linenum"> 869</span></a>      <a class="var it2276" onMouseOver="hilite(2276)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../_variables/urlbase.html">$urlbase</a> = <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('url')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/url.html">url</a>;
<a name="l870"><span class="linenum"> 870</span></a>  
<a name="l871"><span class="linenum"> 871</span></a>  <span class="comment">    // We need to get the previous and next months in certain cases.</span>
<a name="l872"><span class="linenum"> 872</span></a>      if (<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> == 'frontpage' || <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> == 'course' || <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> == 'month') {
<a name="l873"><span class="linenum"> 873</span></a>          <a class="var it29816" onMouseOver="hilite(29816)" onMouseOut="lolite()" onClick="logVariable('prevmonth')" href="../_variables/prevmonth.html">$prevmonth</a> = <a class="function" onClick="logFunction('calendar_sub_month')" href="../_functions/calendar_sub_month.html" onMouseOver="funcPopup(event,'calendar_sub_month')">calendar_sub_month</a>(<a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>['mon'], <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>['year']);
<a name="l874"><span class="linenum"> 874</span></a>          <a class="var it29817" onMouseOver="hilite(29817)" onMouseOut="lolite()" onClick="logVariable('prevmonthtime')" href="../_variables/prevmonthtime.html">$prevmonthtime</a> = <a class="var it3542" onMouseOver="hilite(3542)" onMouseOut="lolite()" onClick="logVariable('calendartype')" href="../_variables/calendartype.html">$calendartype</a>-&gt;<a class="function" onClick="logFunction('convert_to_gregorian')" href="../_functions/convert_to_gregorian.html" onMouseOver="funcPopup(event,'convert_to_gregorian')">convert_to_gregorian</a>(<a class="var it29816" onMouseOver="hilite(29816)" onMouseOut="lolite()" onClick="logVariable('prevmonth')" href="../_variables/prevmonth.html">$prevmonth</a>[1], <a class="var it29816" onMouseOver="hilite(29816)" onMouseOut="lolite()" onClick="logVariable('prevmonth')" href="../_variables/prevmonth.html">$prevmonth</a>[0], 1);
<a name="l875"><span class="linenum"> 875</span></a>          <a class="var it29817" onMouseOver="hilite(29817)" onMouseOut="lolite()" onClick="logVariable('prevmonthtime')" href="../_variables/prevmonthtime.html">$prevmonthtime</a> = <a class="function" onClick="logFunction('make_timestamp')" href="../_functions/make_timestamp.html" onMouseOver="funcPopup(event,'make_timestamp')">make_timestamp</a>(<a class="var it29817" onMouseOver="hilite(29817)" onMouseOut="lolite()" onClick="logVariable('prevmonthtime')" href="../_variables/prevmonthtime.html">$prevmonthtime</a>['year'], <a class="var it29817" onMouseOver="hilite(29817)" onMouseOut="lolite()" onClick="logVariable('prevmonthtime')" href="../_variables/prevmonthtime.html">$prevmonthtime</a>['month'], <a class="var it29817" onMouseOver="hilite(29817)" onMouseOut="lolite()" onClick="logVariable('prevmonthtime')" href="../_variables/prevmonthtime.html">$prevmonthtime</a>['day'],
<a name="l876"><span class="linenum"> 876</span></a>              <a class="var it29817" onMouseOver="hilite(29817)" onMouseOut="lolite()" onClick="logVariable('prevmonthtime')" href="../_variables/prevmonthtime.html">$prevmonthtime</a>['hour'], <a class="var it29817" onMouseOver="hilite(29817)" onMouseOut="lolite()" onClick="logVariable('prevmonthtime')" href="../_variables/prevmonthtime.html">$prevmonthtime</a>['minute']);
<a name="l877"><span class="linenum"> 877</span></a>  
<a name="l878"><span class="linenum"> 878</span></a>          <a class="var it29818" onMouseOver="hilite(29818)" onMouseOut="lolite()" onClick="logVariable('nextmonth')" href="../_variables/nextmonth.html">$nextmonth</a> = <a class="function" onClick="logFunction('calendar_add_month')" href="../_functions/calendar_add_month.html" onMouseOver="funcPopup(event,'calendar_add_month')">calendar_add_month</a>(<a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>['mon'], <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>['year']);
<a name="l879"><span class="linenum"> 879</span></a>          <a class="var it29819" onMouseOver="hilite(29819)" onMouseOut="lolite()" onClick="logVariable('nextmonthtime')" href="../_variables/nextmonthtime.html">$nextmonthtime</a> = <a class="var it3542" onMouseOver="hilite(3542)" onMouseOut="lolite()" onClick="logVariable('calendartype')" href="../_variables/calendartype.html">$calendartype</a>-&gt;<a class="function" onClick="logFunction('convert_to_gregorian')" href="../_functions/convert_to_gregorian.html" onMouseOver="funcPopup(event,'convert_to_gregorian')">convert_to_gregorian</a>(<a class="var it29818" onMouseOver="hilite(29818)" onMouseOut="lolite()" onClick="logVariable('nextmonth')" href="../_variables/nextmonth.html">$nextmonth</a>[1], <a class="var it29818" onMouseOver="hilite(29818)" onMouseOut="lolite()" onClick="logVariable('nextmonth')" href="../_variables/nextmonth.html">$nextmonth</a>[0], 1);
<a name="l880"><span class="linenum"> 880</span></a>          <a class="var it29819" onMouseOver="hilite(29819)" onMouseOut="lolite()" onClick="logVariable('nextmonthtime')" href="../_variables/nextmonthtime.html">$nextmonthtime</a> = <a class="function" onClick="logFunction('make_timestamp')" href="../_functions/make_timestamp.html" onMouseOver="funcPopup(event,'make_timestamp')">make_timestamp</a>(<a class="var it29819" onMouseOver="hilite(29819)" onMouseOut="lolite()" onClick="logVariable('nextmonthtime')" href="../_variables/nextmonthtime.html">$nextmonthtime</a>['year'], <a class="var it29819" onMouseOver="hilite(29819)" onMouseOut="lolite()" onClick="logVariable('nextmonthtime')" href="../_variables/nextmonthtime.html">$nextmonthtime</a>['month'], <a class="var it29819" onMouseOver="hilite(29819)" onMouseOut="lolite()" onClick="logVariable('nextmonthtime')" href="../_variables/nextmonthtime.html">$nextmonthtime</a>['day'],
<a name="l881"><span class="linenum"> 881</span></a>              <a class="var it29819" onMouseOver="hilite(29819)" onMouseOut="lolite()" onClick="logVariable('nextmonthtime')" href="../_variables/nextmonthtime.html">$nextmonthtime</a>['hour'], <a class="var it29819" onMouseOver="hilite(29819)" onMouseOut="lolite()" onClick="logVariable('nextmonthtime')" href="../_variables/nextmonthtime.html">$nextmonthtime</a>['minute']);
<a name="l882"><span class="linenum"> 882</span></a>      }
<a name="l883"><span class="linenum"> 883</span></a>  
<a name="l884"><span class="linenum"> 884</span></a>      switch (<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>) {
<a name="l885"><span class="linenum"> 885</span></a>          case 'frontpage':
<a name="l886"><span class="linenum"> 886</span></a>              <a class="var it39012" onMouseOver="hilite(39012)" onMouseOut="lolite()" onClick="logVariable('prevlink')" href="../_variables/prevlink.html">$prevlink</a> = <a class="function" onClick="logFunction('calendar_get_link_previous')" href="../_functions/calendar_get_link_previous.html" onMouseOver="funcPopup(event,'calendar_get_link_previous')">calendar_get_link_previous</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('monthprev', 'access'), <a class="var it2276" onMouseOver="hilite(2276)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../_variables/urlbase.html">$urlbase</a>, false, false, false, true, <a class="var it29817" onMouseOver="hilite(29817)" onMouseOut="lolite()" onClick="logVariable('prevmonthtime')" href="../_variables/prevmonthtime.html">$prevmonthtime</a>);
<a name="l887"><span class="linenum"> 887</span></a>              <a class="var it19597" onMouseOver="hilite(19597)" onMouseOut="lolite()" onClick="logVariable('nextlink')" href="../_variables/nextlink.html">$nextlink</a> = <a class="function" onClick="logFunction('calendar_get_link_next')" href="../_functions/calendar_get_link_next.html" onMouseOver="funcPopup(event,'calendar_get_link_next')">calendar_get_link_next</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('monthnext', 'access'), <a class="var it2276" onMouseOver="hilite(2276)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../_variables/urlbase.html">$urlbase</a>, false, false, false, true, <a class="var it29819" onMouseOver="hilite(29819)" onMouseOut="lolite()" onClick="logVariable('nextmonthtime')" href="../_variables/nextmonthtime.html">$nextmonthtime</a>);
<a name="l888"><span class="linenum"> 888</span></a>              <a class="var it39013" onMouseOver="hilite(39013)" onMouseOut="lolite()" onClick="logVariable('calendarlink')" href="../_variables/calendarlink.html">$calendarlink</a> = <a class="function" onClick="logFunction('calendar_get_link_href')" href="../_functions/calendar_get_link_href.html" onMouseOver="funcPopup(event,'calendar_get_link_href')">calendar_get_link_href</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="constant" onClick="logConstant('CALENDAR_URL')" href="../_constants/CALENDAR_URL.html" onMouseOver="constPopup(event,'CALENDAR_URL')">CALENDAR_URL</a>.'view.php', array('view' =&gt; 'month')), false, false, false, <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>);
<a name="l889"><span class="linenum"> 889</span></a>  
<a name="l890"><span class="linenum"> 890</span></a>              if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['id'])) {
<a name="l891"><span class="linenum"> 891</span></a>                  <a class="var it39013" onMouseOver="hilite(39013)" onMouseOut="lolite()" onClick="logVariable('calendarlink')" href="../_variables/calendarlink.html">$calendarlink</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('course', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['id']);
<a name="l892"><span class="linenum"> 892</span></a>              }
<a name="l893"><span class="linenum"> 893</span></a>  
<a name="l894"><span class="linenum"> 894</span></a>              if (<a class="function" onClick="logFunction('right_to_left')" href="../_functions/right_to_left.html" onMouseOver="funcPopup(event,'right_to_left')">right_to_left</a>()) {
<a name="l895"><span class="linenum"> 895</span></a>                  <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('left')" href="../_variables/left.html">$left</a> = <a class="var it19597" onMouseOver="hilite(19597)" onMouseOut="lolite()" onClick="logVariable('nextlink')" href="../_variables/nextlink.html">$nextlink</a>;
<a name="l896"><span class="linenum"> 896</span></a>                  <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('right')" href="../_variables/right.html">$right</a> = <a class="var it39012" onMouseOver="hilite(39012)" onMouseOut="lolite()" onClick="logVariable('prevlink')" href="../_variables/prevlink.html">$prevlink</a>;
<a name="l897"><span class="linenum"> 897</span></a>              } else {
<a name="l898"><span class="linenum"> 898</span></a>                  <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('left')" href="../_variables/left.html">$left</a> = <a class="var it39012" onMouseOver="hilite(39012)" onMouseOut="lolite()" onClick="logVariable('prevlink')" href="../_variables/prevlink.html">$prevlink</a>;
<a name="l899"><span class="linenum"> 899</span></a>                  <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('right')" href="../_variables/right.html">$right</a> = <a class="var it19597" onMouseOver="hilite(19597)" onMouseOut="lolite()" onClick="logVariable('nextlink')" href="../_variables/nextlink.html">$nextlink</a>;
<a name="l900"><span class="linenum"> 900</span></a>              }
<a name="l901"><span class="linenum"> 901</span></a>  
<a name="l902"><span class="linenum"> 902</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('div', array('class'=&gt;'calendar-controls'));
<a name="l903"><span class="linenum"> 903</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('left')" href="../_variables/left.html">$left</a>.'&lt;span class=&quot;hide&quot;&gt; | &lt;/span&gt;';
<a name="l904"><span class="linenum"> 904</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('span', <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it39013" onMouseOver="hilite(39013)" onMouseOut="lolite()" onClick="logVariable('calendarlink')" href="../_variables/calendarlink.html">$calendarlink</a>, <a class="function" onClick="logFunction('userdate')" href="../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>, <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('strftimemonthyear')), array('title'=&gt;<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('monththis','calendar'))), array('class'=&gt;'current'));
<a name="l905"><span class="linenum"> 905</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= '&lt;span class=&quot;hide&quot;&gt; | &lt;/span&gt;'. <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('right')" href="../_variables/right.html">$right</a>;
<a name="l906"><span class="linenum"> 906</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= &quot;&lt;span class=\&quot;clearer\&quot;&gt;&lt;!-- --&gt;&lt;/span&gt;\n&quot;;
<a name="l907"><span class="linenum"> 907</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('div');
<a name="l908"><span class="linenum"> 908</span></a>  
<a name="l909"><span class="linenum"> 909</span></a>              break;
<a name="l910"><span class="linenum"> 910</span></a>          case 'course':
<a name="l911"><span class="linenum"> 911</span></a>              <a class="var it39012" onMouseOver="hilite(39012)" onMouseOut="lolite()" onClick="logVariable('prevlink')" href="../_variables/prevlink.html">$prevlink</a> = <a class="function" onClick="logFunction('calendar_get_link_previous')" href="../_functions/calendar_get_link_previous.html" onMouseOver="funcPopup(event,'calendar_get_link_previous')">calendar_get_link_previous</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('monthprev', 'access'), <a class="var it2276" onMouseOver="hilite(2276)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../_variables/urlbase.html">$urlbase</a>, false, false, false, true, <a class="var it29817" onMouseOver="hilite(29817)" onMouseOut="lolite()" onClick="logVariable('prevmonthtime')" href="../_variables/prevmonthtime.html">$prevmonthtime</a>);
<a name="l912"><span class="linenum"> 912</span></a>              <a class="var it19597" onMouseOver="hilite(19597)" onMouseOut="lolite()" onClick="logVariable('nextlink')" href="../_variables/nextlink.html">$nextlink</a> = <a class="function" onClick="logFunction('calendar_get_link_next')" href="../_functions/calendar_get_link_next.html" onMouseOver="funcPopup(event,'calendar_get_link_next')">calendar_get_link_next</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('monthnext', 'access'), <a class="var it2276" onMouseOver="hilite(2276)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../_variables/urlbase.html">$urlbase</a>, false, false, false, true, <a class="var it29819" onMouseOver="hilite(29819)" onMouseOut="lolite()" onClick="logVariable('nextmonthtime')" href="../_variables/nextmonthtime.html">$nextmonthtime</a>);
<a name="l913"><span class="linenum"> 913</span></a>              <a class="var it39013" onMouseOver="hilite(39013)" onMouseOut="lolite()" onClick="logVariable('calendarlink')" href="../_variables/calendarlink.html">$calendarlink</a> = <a class="function" onClick="logFunction('calendar_get_link_href')" href="../_functions/calendar_get_link_href.html" onMouseOver="funcPopup(event,'calendar_get_link_href')">calendar_get_link_href</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="constant" onClick="logConstant('CALENDAR_URL')" href="../_constants/CALENDAR_URL.html" onMouseOver="constPopup(event,'CALENDAR_URL')">CALENDAR_URL</a>.'view.php', array('view' =&gt; 'month')), false, false, false, <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>);
<a name="l914"><span class="linenum"> 914</span></a>  
<a name="l915"><span class="linenum"> 915</span></a>              if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['id'])) {
<a name="l916"><span class="linenum"> 916</span></a>                  <a class="var it39013" onMouseOver="hilite(39013)" onMouseOut="lolite()" onClick="logVariable('calendarlink')" href="../_variables/calendarlink.html">$calendarlink</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('course', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['id']);
<a name="l917"><span class="linenum"> 917</span></a>              }
<a name="l918"><span class="linenum"> 918</span></a>  
<a name="l919"><span class="linenum"> 919</span></a>              if (<a class="function" onClick="logFunction('right_to_left')" href="../_functions/right_to_left.html" onMouseOver="funcPopup(event,'right_to_left')">right_to_left</a>()) {
<a name="l920"><span class="linenum"> 920</span></a>                  <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('left')" href="../_variables/left.html">$left</a> = <a class="var it19597" onMouseOver="hilite(19597)" onMouseOut="lolite()" onClick="logVariable('nextlink')" href="../_variables/nextlink.html">$nextlink</a>;
<a name="l921"><span class="linenum"> 921</span></a>                  <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('right')" href="../_variables/right.html">$right</a> = <a class="var it39012" onMouseOver="hilite(39012)" onMouseOut="lolite()" onClick="logVariable('prevlink')" href="../_variables/prevlink.html">$prevlink</a>;
<a name="l922"><span class="linenum"> 922</span></a>              } else {
<a name="l923"><span class="linenum"> 923</span></a>                  <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('left')" href="../_variables/left.html">$left</a> = <a class="var it39012" onMouseOver="hilite(39012)" onMouseOut="lolite()" onClick="logVariable('prevlink')" href="../_variables/prevlink.html">$prevlink</a>;
<a name="l924"><span class="linenum"> 924</span></a>                  <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('right')" href="../_variables/right.html">$right</a> = <a class="var it19597" onMouseOver="hilite(19597)" onMouseOut="lolite()" onClick="logVariable('nextlink')" href="../_variables/nextlink.html">$nextlink</a>;
<a name="l925"><span class="linenum"> 925</span></a>              }
<a name="l926"><span class="linenum"> 926</span></a>  
<a name="l927"><span class="linenum"> 927</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('div', array('class'=&gt;'calendar-controls'));
<a name="l928"><span class="linenum"> 928</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('left')" href="../_variables/left.html">$left</a>.'&lt;span class=&quot;hide&quot;&gt; | &lt;/span&gt;';
<a name="l929"><span class="linenum"> 929</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('span', <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it39013" onMouseOver="hilite(39013)" onMouseOut="lolite()" onClick="logVariable('calendarlink')" href="../_variables/calendarlink.html">$calendarlink</a>, <a class="function" onClick="logFunction('userdate')" href="../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>, <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('strftimemonthyear')), array('title'=&gt;<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('monththis','calendar'))), array('class'=&gt;'current'));
<a name="l930"><span class="linenum"> 930</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= '&lt;span class=&quot;hide&quot;&gt; | &lt;/span&gt;'. <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('right')" href="../_variables/right.html">$right</a>;
<a name="l931"><span class="linenum"> 931</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= &quot;&lt;span class=\&quot;clearer\&quot;&gt;&lt;!-- --&gt;&lt;/span&gt;&quot;;
<a name="l932"><span class="linenum"> 932</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('div');
<a name="l933"><span class="linenum"> 933</span></a>              break;
<a name="l934"><span class="linenum"> 934</span></a>          case 'upcoming':
<a name="l935"><span class="linenum"> 935</span></a>              <a class="var it39013" onMouseOver="hilite(39013)" onMouseOut="lolite()" onClick="logVariable('calendarlink')" href="../_variables/calendarlink.html">$calendarlink</a> = <a class="function" onClick="logFunction('calendar_get_link_href')" href="../_functions/calendar_get_link_href.html" onMouseOver="funcPopup(event,'calendar_get_link_href')">calendar_get_link_href</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="constant" onClick="logConstant('CALENDAR_URL')" href="../_constants/CALENDAR_URL.html" onMouseOver="constPopup(event,'CALENDAR_URL')">CALENDAR_URL</a>.'view.php', array('view' =&gt; 'upcoming')), false, false, false, <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>);
<a name="l936"><span class="linenum"> 936</span></a>              if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['id'])) {
<a name="l937"><span class="linenum"> 937</span></a>                  <a class="var it39013" onMouseOver="hilite(39013)" onMouseOut="lolite()" onClick="logVariable('calendarlink')" href="../_variables/calendarlink.html">$calendarlink</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('course', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['id']);
<a name="l938"><span class="linenum"> 938</span></a>              }
<a name="l939"><span class="linenum"> 939</span></a>              <a class="var it39013" onMouseOver="hilite(39013)" onMouseOut="lolite()" onClick="logVariable('calendarlink')" href="../_variables/calendarlink.html">$calendarlink</a> = <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it39013" onMouseOver="hilite(39013)" onMouseOut="lolite()" onClick="logVariable('calendarlink')" href="../_variables/calendarlink.html">$calendarlink</a>, <a class="function" onClick="logFunction('userdate')" href="../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>, <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('strftimemonthyear')));
<a name="l940"><span class="linenum"> 940</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('div', <a class="var it39013" onMouseOver="hilite(39013)" onMouseOut="lolite()" onClick="logVariable('calendarlink')" href="../_variables/calendarlink.html">$calendarlink</a>, array('class'=&gt;'centered'));
<a name="l941"><span class="linenum"> 941</span></a>              break;
<a name="l942"><span class="linenum"> 942</span></a>          case 'display':
<a name="l943"><span class="linenum"> 943</span></a>              <a class="var it39013" onMouseOver="hilite(39013)" onMouseOut="lolite()" onClick="logVariable('calendarlink')" href="../_variables/calendarlink.html">$calendarlink</a> = <a class="function" onClick="logFunction('calendar_get_link_href')" href="../_functions/calendar_get_link_href.html" onMouseOver="funcPopup(event,'calendar_get_link_href')">calendar_get_link_href</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="constant" onClick="logConstant('CALENDAR_URL')" href="../_constants/CALENDAR_URL.html" onMouseOver="constPopup(event,'CALENDAR_URL')">CALENDAR_URL</a>.'view.php', array('view' =&gt; 'month')), false, false, false, <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>);
<a name="l944"><span class="linenum"> 944</span></a>              if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['id'])) {
<a name="l945"><span class="linenum"> 945</span></a>                  <a class="var it39013" onMouseOver="hilite(39013)" onMouseOut="lolite()" onClick="logVariable('calendarlink')" href="../_variables/calendarlink.html">$calendarlink</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('course', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>['id']);
<a name="l946"><span class="linenum"> 946</span></a>              }
<a name="l947"><span class="linenum"> 947</span></a>              <a class="var it39013" onMouseOver="hilite(39013)" onMouseOut="lolite()" onClick="logVariable('calendarlink')" href="../_variables/calendarlink.html">$calendarlink</a> = <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it39013" onMouseOver="hilite(39013)" onMouseOut="lolite()" onClick="logVariable('calendarlink')" href="../_variables/calendarlink.html">$calendarlink</a>, <a class="function" onClick="logFunction('userdate')" href="../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>, <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('strftimemonthyear')));
<a name="l948"><span class="linenum"> 948</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('h3', <a class="var it39013" onMouseOver="hilite(39013)" onMouseOut="lolite()" onClick="logVariable('calendarlink')" href="../_variables/calendarlink.html">$calendarlink</a>);
<a name="l949"><span class="linenum"> 949</span></a>              break;
<a name="l950"><span class="linenum"> 950</span></a>          case 'month':
<a name="l951"><span class="linenum"> 951</span></a>              <a class="var it39012" onMouseOver="hilite(39012)" onMouseOut="lolite()" onClick="logVariable('prevlink')" href="../_variables/prevlink.html">$prevlink</a> = <a class="function" onClick="logFunction('calendar_get_link_previous')" href="../_functions/calendar_get_link_previous.html" onMouseOver="funcPopup(event,'calendar_get_link_previous')">calendar_get_link_previous</a>(<a class="function" onClick="logFunction('userdate')" href="../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it29817" onMouseOver="hilite(29817)" onMouseOut="lolite()" onClick="logVariable('prevmonthtime')" href="../_variables/prevmonthtime.html">$prevmonthtime</a>, <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('strftimemonthyear')), 'view.php?view=month'.<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>.'&amp;amp;', false, false, false, false, <a class="var it29817" onMouseOver="hilite(29817)" onMouseOut="lolite()" onClick="logVariable('prevmonthtime')" href="../_variables/prevmonthtime.html">$prevmonthtime</a>);
<a name="l952"><span class="linenum"> 952</span></a>              <a class="var it19597" onMouseOver="hilite(19597)" onMouseOut="lolite()" onClick="logVariable('nextlink')" href="../_variables/nextlink.html">$nextlink</a> = <a class="function" onClick="logFunction('calendar_get_link_next')" href="../_functions/calendar_get_link_next.html" onMouseOver="funcPopup(event,'calendar_get_link_next')">calendar_get_link_next</a>(<a class="function" onClick="logFunction('userdate')" href="../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it29819" onMouseOver="hilite(29819)" onMouseOut="lolite()" onClick="logVariable('nextmonthtime')" href="../_variables/nextmonthtime.html">$nextmonthtime</a>, <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('strftimemonthyear')), 'view.php?view=month'.<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>.'&amp;amp;', false, false, false, false, <a class="var it29819" onMouseOver="hilite(29819)" onMouseOut="lolite()" onClick="logVariable('nextmonthtime')" href="../_variables/nextmonthtime.html">$nextmonthtime</a>);
<a name="l953"><span class="linenum"> 953</span></a>  
<a name="l954"><span class="linenum"> 954</span></a>              if (<a class="function" onClick="logFunction('right_to_left')" href="../_functions/right_to_left.html" onMouseOver="funcPopup(event,'right_to_left')">right_to_left</a>()) {
<a name="l955"><span class="linenum"> 955</span></a>                  <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('left')" href="../_variables/left.html">$left</a> = <a class="var it19597" onMouseOver="hilite(19597)" onMouseOut="lolite()" onClick="logVariable('nextlink')" href="../_variables/nextlink.html">$nextlink</a>;
<a name="l956"><span class="linenum"> 956</span></a>                  <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('right')" href="../_variables/right.html">$right</a> = <a class="var it39012" onMouseOver="hilite(39012)" onMouseOut="lolite()" onClick="logVariable('prevlink')" href="../_variables/prevlink.html">$prevlink</a>;
<a name="l957"><span class="linenum"> 957</span></a>              } else {
<a name="l958"><span class="linenum"> 958</span></a>                  <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('left')" href="../_variables/left.html">$left</a> = <a class="var it39012" onMouseOver="hilite(39012)" onMouseOut="lolite()" onClick="logVariable('prevlink')" href="../_variables/prevlink.html">$prevlink</a>;
<a name="l959"><span class="linenum"> 959</span></a>                  <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('right')" href="../_variables/right.html">$right</a> = <a class="var it19597" onMouseOver="hilite(19597)" onMouseOut="lolite()" onClick="logVariable('nextlink')" href="../_variables/nextlink.html">$nextlink</a>;
<a name="l960"><span class="linenum"> 960</span></a>              }
<a name="l961"><span class="linenum"> 961</span></a>  
<a name="l962"><span class="linenum"> 962</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('div', array('class'=&gt;'calendar-controls'));
<a name="l963"><span class="linenum"> 963</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('left')" href="../_variables/left.html">$left</a> . '&lt;span class=&quot;hide&quot;&gt; | &lt;/span&gt;';
<a name="l964"><span class="linenum"> 964</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('heading')" href="../_functions/heading.html" onMouseOver="funcPopup(event,'heading')">heading</a>(<a class="function" onClick="logFunction('userdate')" href="../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>, <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('strftimemonthyear')), 2, 'current');
<a name="l965"><span class="linenum"> 965</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= '&lt;span class=&quot;hide&quot;&gt; | &lt;/span&gt;' . <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('right')" href="../_variables/right.html">$right</a>;
<a name="l966"><span class="linenum"> 966</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= '&lt;span class=&quot;clearer&quot;&gt;&lt;!-- --&gt;&lt;/span&gt;';
<a name="l967"><span class="linenum"> 967</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('div').&quot;\n&quot;;
<a name="l968"><span class="linenum"> 968</span></a>              break;
<a name="l969"><span class="linenum"> 969</span></a>          case 'day':
<a name="l970"><span class="linenum"> 970</span></a>              <a class="var it1754" onMouseOver="hilite(1754)" onMouseOut="lolite()" onClick="logVariable('days')" href="../_variables/days.html">$days</a> = <a class="function" onClick="logFunction('calendar_get_days')" href="../_functions/calendar_get_days.html" onMouseOver="funcPopup(event,'calendar_get_days')">calendar_get_days</a>();
<a name="l971"><span class="linenum"> 971</span></a>  
<a name="l972"><span class="linenum"> 972</span></a>              <a class="var it39014" onMouseOver="hilite(39014)" onMouseOut="lolite()" onClick="logVariable('prevtimestamp')" href="../_variables/prevtimestamp.html">$prevtimestamp</a> = <a class="phpfunction" onClick="logFunction('strtotime')" href="../_functions/strtotime.html" onMouseOver="phpfuncPopup(event,'strtotime')">strtotime</a>('-1 day', <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>);
<a name="l973"><span class="linenum"> 973</span></a>              <a class="var it39015" onMouseOver="hilite(39015)" onMouseOut="lolite()" onClick="logVariable('nexttimestamp')" href="../_variables/nexttimestamp.html">$nexttimestamp</a> = <a class="phpfunction" onClick="logFunction('strtotime')" href="../_functions/strtotime.html" onMouseOver="phpfuncPopup(event,'strtotime')">strtotime</a>('+1 day', <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>);
<a name="l974"><span class="linenum"> 974</span></a>  
<a name="l975"><span class="linenum"> 975</span></a>              <a class="var it39016" onMouseOver="hilite(39016)" onMouseOut="lolite()" onClick="logVariable('prevdate')" href="../_variables/prevdate.html">$prevdate</a> = <a class="var it3542" onMouseOver="hilite(3542)" onMouseOut="lolite()" onClick="logVariable('calendartype')" href="../_variables/calendartype.html">$calendartype</a>-&gt;<a class="function" onClick="logFunction('timestamp_to_date_array')" href="../_functions/timestamp_to_date_array.html" onMouseOver="funcPopup(event,'timestamp_to_date_array')">timestamp_to_date_array</a>(<a class="var it39014" onMouseOver="hilite(39014)" onMouseOut="lolite()" onClick="logVariable('prevtimestamp')" href="../_variables/prevtimestamp.html">$prevtimestamp</a>);
<a name="l976"><span class="linenum"> 976</span></a>              <a class="var it39017" onMouseOver="hilite(39017)" onMouseOut="lolite()" onClick="logVariable('nextdate')" href="../_variables/nextdate.html">$nextdate</a> = <a class="var it3542" onMouseOver="hilite(3542)" onMouseOut="lolite()" onClick="logVariable('calendartype')" href="../_variables/calendartype.html">$calendartype</a>-&gt;<a class="function" onClick="logFunction('timestamp_to_date_array')" href="../_functions/timestamp_to_date_array.html" onMouseOver="funcPopup(event,'timestamp_to_date_array')">timestamp_to_date_array</a>(<a class="var it39015" onMouseOver="hilite(39015)" onMouseOut="lolite()" onClick="logVariable('nexttimestamp')" href="../_variables/nexttimestamp.html">$nexttimestamp</a>);
<a name="l977"><span class="linenum"> 977</span></a>  
<a name="l978"><span class="linenum"> 978</span></a>              <a class="var it39018" onMouseOver="hilite(39018)" onMouseOut="lolite()" onClick="logVariable('prevname')" href="../_variables/prevname.html">$prevname</a> = <a class="var it1754" onMouseOver="hilite(1754)" onMouseOut="lolite()" onClick="logVariable('days')" href="../_variables/days.html">$days</a>[<a class="var it39016" onMouseOver="hilite(39016)" onMouseOut="lolite()" onClick="logVariable('prevdate')" href="../_variables/prevdate.html">$prevdate</a>['wday']]['fullname'];
<a name="l979"><span class="linenum"> 979</span></a>              <a class="var it39019" onMouseOver="hilite(39019)" onMouseOut="lolite()" onClick="logVariable('nextname')" href="../_variables/nextname.html">$nextname</a> = <a class="var it1754" onMouseOver="hilite(1754)" onMouseOut="lolite()" onClick="logVariable('days')" href="../_variables/days.html">$days</a>[<a class="var it39017" onMouseOver="hilite(39017)" onMouseOut="lolite()" onClick="logVariable('nextdate')" href="../_variables/nextdate.html">$nextdate</a>['wday']]['fullname'];
<a name="l980"><span class="linenum"> 980</span></a>              <a class="var it39012" onMouseOver="hilite(39012)" onMouseOut="lolite()" onClick="logVariable('prevlink')" href="../_variables/prevlink.html">$prevlink</a> = <a class="function" onClick="logFunction('calendar_get_link_previous')" href="../_functions/calendar_get_link_previous.html" onMouseOver="funcPopup(event,'calendar_get_link_previous')">calendar_get_link_previous</a>(<a class="var it39018" onMouseOver="hilite(39018)" onMouseOut="lolite()" onClick="logVariable('prevname')" href="../_variables/prevname.html">$prevname</a>, 'view.php?view=day'.<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>.'&amp;amp;', false, false, false, false, <a class="var it39014" onMouseOver="hilite(39014)" onMouseOut="lolite()" onClick="logVariable('prevtimestamp')" href="../_variables/prevtimestamp.html">$prevtimestamp</a>);
<a name="l981"><span class="linenum"> 981</span></a>              <a class="var it19597" onMouseOver="hilite(19597)" onMouseOut="lolite()" onClick="logVariable('nextlink')" href="../_variables/nextlink.html">$nextlink</a> = <a class="function" onClick="logFunction('calendar_get_link_next')" href="../_functions/calendar_get_link_next.html" onMouseOver="funcPopup(event,'calendar_get_link_next')">calendar_get_link_next</a>(<a class="var it39019" onMouseOver="hilite(39019)" onMouseOut="lolite()" onClick="logVariable('nextname')" href="../_variables/nextname.html">$nextname</a>, 'view.php?view=day'.<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>.'&amp;amp;', false, false, false, false, <a class="var it39015" onMouseOver="hilite(39015)" onMouseOut="lolite()" onClick="logVariable('nexttimestamp')" href="../_variables/nexttimestamp.html">$nexttimestamp</a>);
<a name="l982"><span class="linenum"> 982</span></a>  
<a name="l983"><span class="linenum"> 983</span></a>              if (<a class="function" onClick="logFunction('right_to_left')" href="../_functions/right_to_left.html" onMouseOver="funcPopup(event,'right_to_left')">right_to_left</a>()) {
<a name="l984"><span class="linenum"> 984</span></a>                  <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('left')" href="../_variables/left.html">$left</a> = <a class="var it19597" onMouseOver="hilite(19597)" onMouseOut="lolite()" onClick="logVariable('nextlink')" href="../_variables/nextlink.html">$nextlink</a>;
<a name="l985"><span class="linenum"> 985</span></a>                  <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('right')" href="../_variables/right.html">$right</a> = <a class="var it39012" onMouseOver="hilite(39012)" onMouseOut="lolite()" onClick="logVariable('prevlink')" href="../_variables/prevlink.html">$prevlink</a>;
<a name="l986"><span class="linenum"> 986</span></a>              } else {
<a name="l987"><span class="linenum"> 987</span></a>                  <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('left')" href="../_variables/left.html">$left</a> = <a class="var it39012" onMouseOver="hilite(39012)" onMouseOut="lolite()" onClick="logVariable('prevlink')" href="../_variables/prevlink.html">$prevlink</a>;
<a name="l988"><span class="linenum"> 988</span></a>                  <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('right')" href="../_variables/right.html">$right</a> = <a class="var it19597" onMouseOver="hilite(19597)" onMouseOut="lolite()" onClick="logVariable('nextlink')" href="../_variables/nextlink.html">$nextlink</a>;
<a name="l989"><span class="linenum"> 989</span></a>              }
<a name="l990"><span class="linenum"> 990</span></a>  
<a name="l991"><span class="linenum"> 991</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('div', array('class'=&gt;'calendar-controls'));
<a name="l992"><span class="linenum"> 992</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= <a class="var it141" onMouseOver="hilite(141)" onMouseOut="lolite()" onClick="logVariable('left')" href="../_variables/left.html">$left</a>;
<a name="l993"><span class="linenum"> 993</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= '&lt;span class=&quot;hide&quot;&gt; | &lt;/span&gt;&lt;span class=&quot;current&quot;&gt;'.<a class="function" onClick="logFunction('userdate')" href="../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>, <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('strftimedaydate')).'&lt;/span&gt;';
<a name="l994"><span class="linenum"> 994</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= '&lt;span class=&quot;hide&quot;&gt; | &lt;/span&gt;'. <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('right')" href="../_variables/right.html">$right</a>;
<a name="l995"><span class="linenum"> 995</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= &quot;&lt;span class=\&quot;clearer\&quot;&gt;&lt;!-- --&gt;&lt;/span&gt;&quot;;
<a name="l996"><span class="linenum"> 996</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('div').&quot;\n&quot;;
<a name="l997"><span class="linenum"> 997</span></a>  
<a name="l998"><span class="linenum"> 998</span></a>              break;
<a name="l999"><span class="linenum"> 999</span></a>      }
<a name="l1000"><span class="linenum">1000</span></a>      return <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a>;
<a name="l1001"><span class="linenum">1001</span></a>  }
<a name="l1002"><span class="linenum">1002</span></a>  
<a name="l1003"><span class="linenum">1003</span></a>  <span class="comment">/**</span>
<a name="l1004"><span class="linenum">1004</span></a>  <span class="comment"> * Formats a filter control element.</span>
<a name="l1005"><span class="linenum">1005</span></a>  <span class="comment"> *</span>
<a name="l1006"><span class="linenum">1006</span></a>  <span class="comment"> * @param moodle_url $url of the filter</span>
<a name="l1007"><span class="linenum">1007</span></a>  <span class="comment"> * @param int $type constant defining the type filter</span>
<a name="l1008"><span class="linenum">1008</span></a>  <span class="comment"> * @return string html content of the element</span>
<a name="l1009"><span class="linenum">1009</span></a>  <span class="comment"> */</span>
<a name="l1010"><span class="linenum">1010</span></a>  function <a class="function" onClick="logFunction('calendar_filter_controls_element')" href="../_functions/calendar_filter_controls_element.html" onMouseOver="funcPopup(event,'calendar_filter_controls_element')">calendar_filter_controls_element</a>(moodle_url <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>) {
<a name="l1011"><span class="linenum">1011</span></a>      global <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1012"><span class="linenum">1012</span></a>      switch (<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>) {
<a name="l1013"><span class="linenum">1013</span></a>          case <a class="constant" onClick="logConstant('CALENDAR_EVENT_GLOBAL')" href="../_constants/CALENDAR_EVENT_GLOBAL.html" onMouseOver="constPopup(event,'CALENDAR_EVENT_GLOBAL')">CALENDAR_EVENT_GLOBAL</a>:
<a name="l1014"><span class="linenum">1014</span></a>              <a class="var it39020" onMouseOver="hilite(39020)" onMouseOut="lolite()" onClick="logVariable('typeforhumans')" href="../_variables/typeforhumans.html">$typeforhumans</a> = 'global';
<a name="l1015"><span class="linenum">1015</span></a>              <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a> = 'calendar_event_global';
<a name="l1016"><span class="linenum">1016</span></a>              break;
<a name="l1017"><span class="linenum">1017</span></a>          case <a class="constant" onClick="logConstant('CALENDAR_EVENT_COURSE')" href="../_constants/CALENDAR_EVENT_COURSE.html" onMouseOver="constPopup(event,'CALENDAR_EVENT_COURSE')">CALENDAR_EVENT_COURSE</a>:
<a name="l1018"><span class="linenum">1018</span></a>              <a class="var it39020" onMouseOver="hilite(39020)" onMouseOut="lolite()" onClick="logVariable('typeforhumans')" href="../_variables/typeforhumans.html">$typeforhumans</a> = 'course';
<a name="l1019"><span class="linenum">1019</span></a>              <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a> = 'calendar_event_course';
<a name="l1020"><span class="linenum">1020</span></a>              break;
<a name="l1021"><span class="linenum">1021</span></a>          case <a class="constant" onClick="logConstant('CALENDAR_EVENT_GROUP')" href="../_constants/CALENDAR_EVENT_GROUP.html" onMouseOver="constPopup(event,'CALENDAR_EVENT_GROUP')">CALENDAR_EVENT_GROUP</a>:
<a name="l1022"><span class="linenum">1022</span></a>              <a class="var it39020" onMouseOver="hilite(39020)" onMouseOut="lolite()" onClick="logVariable('typeforhumans')" href="../_variables/typeforhumans.html">$typeforhumans</a> = 'groups';
<a name="l1023"><span class="linenum">1023</span></a>              <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a> = 'calendar_event_group';
<a name="l1024"><span class="linenum">1024</span></a>              break;
<a name="l1025"><span class="linenum">1025</span></a>          case <a class="constant" onClick="logConstant('CALENDAR_EVENT_USER')" href="../_constants/CALENDAR_EVENT_USER.html" onMouseOver="constPopup(event,'CALENDAR_EVENT_USER')">CALENDAR_EVENT_USER</a>:
<a name="l1026"><span class="linenum">1026</span></a>              <a class="var it39020" onMouseOver="hilite(39020)" onMouseOut="lolite()" onClick="logVariable('typeforhumans')" href="../_variables/typeforhumans.html">$typeforhumans</a> = 'user';
<a name="l1027"><span class="linenum">1027</span></a>              <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a> = 'calendar_event_user';
<a name="l1028"><span class="linenum">1028</span></a>              break;
<a name="l1029"><span class="linenum">1029</span></a>      }
<a name="l1030"><span class="linenum">1030</span></a>      if (<a class="function" onClick="logFunction('calendar_show_event_type')" href="../_functions/calendar_show_event_type.html" onMouseOver="funcPopup(event,'calendar_show_event_type')">calendar_show_event_type</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>)) {
<a name="l1031"><span class="linenum">1031</span></a>          <a class="var it727" onMouseOver="hilite(727)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a> = <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_icon')" href="../_functions/pix_icon.html" onMouseOver="funcPopup(event,'pix_icon')">pix_icon</a>('t/hide', <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('hide'));
<a name="l1032"><span class="linenum">1032</span></a>          <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('hide'.<a class="var it39020" onMouseOver="hilite(39020)" onMouseOut="lolite()" onClick="logVariable('typeforhumans')" href="../_variables/typeforhumans.html">$typeforhumans</a>.'events', 'calendar');
<a name="l1033"><span class="linenum">1033</span></a>      } else {
<a name="l1034"><span class="linenum">1034</span></a>          <a class="var it727" onMouseOver="hilite(727)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a> = <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_icon')" href="../_functions/pix_icon.html" onMouseOver="funcPopup(event,'pix_icon')">pix_icon</a>('t/show', <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('show'));
<a name="l1035"><span class="linenum">1035</span></a>          <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('show'.<a class="var it39020" onMouseOver="hilite(39020)" onMouseOut="lolite()" onClick="logVariable('typeforhumans')" href="../_variables/typeforhumans.html">$typeforhumans</a>.'events', 'calendar');
<a name="l1036"><span class="linenum">1036</span></a>      }
<a name="l1037"><span class="linenum">1037</span></a>      <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> = <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('li', array('class' =&gt; 'calendar_event'));
<a name="l1038"><span class="linenum">1038</span></a>      <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('a', array('href' =&gt; <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, 'rel' =&gt; 'nofollow'));
<a name="l1039"><span class="linenum">1039</span></a>      <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('span', <a class="var it727" onMouseOver="hilite(727)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a>, array('class' =&gt; <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a>));
<a name="l1040"><span class="linenum">1040</span></a>      <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('span', <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>, array('class' =&gt; 'eventname'));
<a name="l1041"><span class="linenum">1041</span></a>      <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('a');
<a name="l1042"><span class="linenum">1042</span></a>      <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('li');
<a name="l1043"><span class="linenum">1043</span></a>      return <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a>;
<a name="l1044"><span class="linenum">1044</span></a>  }
<a name="l1045"><span class="linenum">1045</span></a>  
<a name="l1046"><span class="linenum">1046</span></a>  <span class="comment">/**</span>
<a name="l1047"><span class="linenum">1047</span></a>  <span class="comment"> * Get the controls filter for calendar.</span>
<a name="l1048"><span class="linenum">1048</span></a>  <span class="comment"> *</span>
<a name="l1049"><span class="linenum">1049</span></a>  <span class="comment"> * Filter is used to hide calendar info from the display page</span>
<a name="l1050"><span class="linenum">1050</span></a>  <span class="comment"> *</span>
<a name="l1051"><span class="linenum">1051</span></a>  <span class="comment"> * @param moodle_url $returnurl return-url for filter controls</span>
<a name="l1052"><span class="linenum">1052</span></a>  <span class="comment"> * @return string $content return filter controls in html</span>
<a name="l1053"><span class="linenum">1053</span></a>  <span class="comment"> */</span>
<a name="l1054"><span class="linenum">1054</span></a>  function <a class="function" onClick="logFunction('calendar_filter_controls')" href="../_functions/calendar_filter_controls.html" onMouseOver="funcPopup(event,'calendar_filter_controls')">calendar_filter_controls</a>(moodle_url <a class="var it1440" onMouseOver="hilite(1440)" onMouseOut="lolite()" onClick="logVariable('returnurl')" href="../_variables/returnurl.html">$returnurl</a>) {
<a name="l1055"><span class="linenum">1055</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1056"><span class="linenum">1056</span></a>  
<a name="l1057"><span class="linenum">1057</span></a>      <a class="var it39021" onMouseOver="hilite(39021)" onMouseOut="lolite()" onClick="logVariable('groupevents')" href="../_variables/groupevents.html">$groupevents</a> = true;
<a name="l1058"><span class="linenum">1058</span></a>      <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a> = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>( 'id',0,<a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a> );
<a name="l1059"><span class="linenum">1059</span></a>      <a class="var it39022" onMouseOver="hilite(39022)" onMouseOut="lolite()" onClick="logVariable('seturl')" href="../_variables/seturl.html">$seturl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../calendar/set.php.html">/calendar/set.php</a>', array('return' =&gt; <a class="phpfunction" onClick="logFunction('base64_encode')" href="../_functions/base64_encode.html" onMouseOver="phpfuncPopup(event,'base64_encode')">base64_encode</a>(<a class="var it1440" onMouseOver="hilite(1440)" onMouseOut="lolite()" onClick="logVariable('returnurl')" href="../_variables/returnurl.html">$returnurl</a>-&gt;<a class="function" onClick="logFunction('out_as_local_url')" href="../_functions/out_as_local_url.html" onMouseOver="funcPopup(event,'out_as_local_url')">out_as_local_url</a>(false)), 'sesskey'=&gt;<a class="function" onClick="logFunction('sesskey')" href="../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>()));
<a name="l1060"><span class="linenum">1060</span></a>      <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> = <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('ul');
<a name="l1061"><span class="linenum">1061</span></a>  
<a name="l1062"><span class="linenum">1062</span></a>      <a class="var it39022" onMouseOver="hilite(39022)" onMouseOut="lolite()" onClick="logVariable('seturl')" href="../_variables/seturl.html">$seturl</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('var', 'showglobal');
<a name="l1063"><span class="linenum">1063</span></a>      <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= <a class="function" onClick="logFunction('calendar_filter_controls_element')" href="../_functions/calendar_filter_controls_element.html" onMouseOver="funcPopup(event,'calendar_filter_controls_element')">calendar_filter_controls_element</a>(<a class="var it39022" onMouseOver="hilite(39022)" onMouseOut="lolite()" onClick="logVariable('seturl')" href="../_variables/seturl.html">$seturl</a>, <a class="constant" onClick="logConstant('CALENDAR_EVENT_GLOBAL')" href="../_constants/CALENDAR_EVENT_GLOBAL.html" onMouseOver="constPopup(event,'CALENDAR_EVENT_GLOBAL')">CALENDAR_EVENT_GLOBAL</a>);
<a name="l1064"><span class="linenum">1064</span></a>  
<a name="l1065"><span class="linenum">1065</span></a>      <a class="var it39022" onMouseOver="hilite(39022)" onMouseOut="lolite()" onClick="logVariable('seturl')" href="../_variables/seturl.html">$seturl</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('var', 'showcourses');
<a name="l1066"><span class="linenum">1066</span></a>      <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= <a class="function" onClick="logFunction('calendar_filter_controls_element')" href="../_functions/calendar_filter_controls_element.html" onMouseOver="funcPopup(event,'calendar_filter_controls_element')">calendar_filter_controls_element</a>(<a class="var it39022" onMouseOver="hilite(39022)" onMouseOut="lolite()" onClick="logVariable('seturl')" href="../_variables/seturl.html">$seturl</a>, <a class="constant" onClick="logConstant('CALENDAR_EVENT_COURSE')" href="../_constants/CALENDAR_EVENT_COURSE.html" onMouseOver="constPopup(event,'CALENDAR_EVENT_COURSE')">CALENDAR_EVENT_COURSE</a>);
<a name="l1067"><span class="linenum">1067</span></a>  
<a name="l1068"><span class="linenum">1068</span></a>      if (<a class="function" onClick="logFunction('isloggedin')" href="../_functions/isloggedin.html" onMouseOver="funcPopup(event,'isloggedin')">isloggedin</a>() &amp;&amp; !<a class="function" onClick="logFunction('isguestuser')" href="../_functions/isguestuser.html" onMouseOver="funcPopup(event,'isguestuser')">isguestuser</a>()) {
<a name="l1069"><span class="linenum">1069</span></a>          if (<a class="var it39021" onMouseOver="hilite(39021)" onMouseOut="lolite()" onClick="logVariable('groupevents')" href="../_variables/groupevents.html">$groupevents</a>) {
<a name="l1070"><span class="linenum">1070</span></a>  <span class="comment">            // This course MIGHT have group events defined, so show the filter</span>
<a name="l1071"><span class="linenum">1071</span></a>              <a class="var it39022" onMouseOver="hilite(39022)" onMouseOut="lolite()" onClick="logVariable('seturl')" href="../_variables/seturl.html">$seturl</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('var', 'showgroups');
<a name="l1072"><span class="linenum">1072</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= <a class="function" onClick="logFunction('calendar_filter_controls_element')" href="../_functions/calendar_filter_controls_element.html" onMouseOver="funcPopup(event,'calendar_filter_controls_element')">calendar_filter_controls_element</a>(<a class="var it39022" onMouseOver="hilite(39022)" onMouseOut="lolite()" onClick="logVariable('seturl')" href="../_variables/seturl.html">$seturl</a>, <a class="constant" onClick="logConstant('CALENDAR_EVENT_GROUP')" href="../_constants/CALENDAR_EVENT_GROUP.html" onMouseOver="constPopup(event,'CALENDAR_EVENT_GROUP')">CALENDAR_EVENT_GROUP</a>);
<a name="l1073"><span class="linenum">1073</span></a>          } else {
<a name="l1074"><span class="linenum">1074</span></a>  <span class="comment">            // This course CANNOT have group events, so lose the filter</span>
<a name="l1075"><span class="linenum">1075</span></a>          }
<a name="l1076"><span class="linenum">1076</span></a>          <a class="var it39022" onMouseOver="hilite(39022)" onMouseOut="lolite()" onClick="logVariable('seturl')" href="../_variables/seturl.html">$seturl</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('var', 'showuser');
<a name="l1077"><span class="linenum">1077</span></a>          <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= <a class="function" onClick="logFunction('calendar_filter_controls_element')" href="../_functions/calendar_filter_controls_element.html" onMouseOver="funcPopup(event,'calendar_filter_controls_element')">calendar_filter_controls_element</a>(<a class="var it39022" onMouseOver="hilite(39022)" onMouseOut="lolite()" onClick="logVariable('seturl')" href="../_variables/seturl.html">$seturl</a>, <a class="constant" onClick="logConstant('CALENDAR_EVENT_USER')" href="../_constants/CALENDAR_EVENT_USER.html" onMouseOver="constPopup(event,'CALENDAR_EVENT_USER')">CALENDAR_EVENT_USER</a>);
<a name="l1078"><span class="linenum">1078</span></a>      }
<a name="l1079"><span class="linenum">1079</span></a>      <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('ul');
<a name="l1080"><span class="linenum">1080</span></a>  
<a name="l1081"><span class="linenum">1081</span></a>      return <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a>;
<a name="l1082"><span class="linenum">1082</span></a>  }
<a name="l1083"><span class="linenum">1083</span></a>  
<a name="l1084"><span class="linenum">1084</span></a>  <span class="comment">/**</span>
<a name="l1085"><span class="linenum">1085</span></a>  <span class="comment"> * Return the representation day</span>
<a name="l1086"><span class="linenum">1086</span></a>  <span class="comment"> *</span>
<a name="l1087"><span class="linenum">1087</span></a>  <span class="comment"> * @param int $tstamp Timestamp in GMT</span>
<a name="l1088"><span class="linenum">1088</span></a>  <span class="comment"> * @param int $now current Unix timestamp</span>
<a name="l1089"><span class="linenum">1089</span></a>  <span class="comment"> * @param bool $usecommonwords</span>
<a name="l1090"><span class="linenum">1090</span></a>  <span class="comment"> * @return string the formatted date/time</span>
<a name="l1091"><span class="linenum">1091</span></a>  <span class="comment"> */</span>
<a name="l1092"><span class="linenum">1092</span></a>  function <a class="function" onClick="logFunction('calendar_day_representation')" href="../_functions/calendar_day_representation.html" onMouseOver="funcPopup(event,'calendar_day_representation')">calendar_day_representation</a>(<a class="var it39023" onMouseOver="hilite(39023)" onMouseOut="lolite()" onClick="logVariable('tstamp')" href="../_variables/tstamp.html">$tstamp</a>, <a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../_variables/now.html">$now</a> = false, <a class="var it39024" onMouseOver="hilite(39024)" onMouseOut="lolite()" onClick="logVariable('usecommonwords')" href="../_variables/usecommonwords.html">$usecommonwords</a> = true) {
<a name="l1093"><span class="linenum">1093</span></a>  
<a name="l1094"><span class="linenum">1094</span></a>      static <a class="var it39025" onMouseOver="hilite(39025)" onMouseOut="lolite()" onClick="logVariable('shortformat')" href="../_variables/shortformat.html">$shortformat</a>;
<a name="l1095"><span class="linenum">1095</span></a>      if(empty(<a class="var it39025" onMouseOver="hilite(39025)" onMouseOut="lolite()" onClick="logVariable('shortformat')" href="../_variables/shortformat.html">$shortformat</a>)) {
<a name="l1096"><span class="linenum">1096</span></a>          <a class="var it39025" onMouseOver="hilite(39025)" onMouseOut="lolite()" onClick="logVariable('shortformat')" href="../_variables/shortformat.html">$shortformat</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('strftimedayshort');
<a name="l1097"><span class="linenum">1097</span></a>      }
<a name="l1098"><span class="linenum">1098</span></a>  
<a name="l1099"><span class="linenum">1099</span></a>      if(<a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../_variables/now.html">$now</a> === false) {
<a name="l1100"><span class="linenum">1100</span></a>          <a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../_variables/now.html">$now</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l1101"><span class="linenum">1101</span></a>      }
<a name="l1102"><span class="linenum">1102</span></a>  
<a name="l1103"><span class="linenum">1103</span></a>  <span class="comment">    // To have it in one place, if a change is needed</span>
<a name="l1104"><span class="linenum">1104</span></a>      <a class="var it39026" onMouseOver="hilite(39026)" onMouseOut="lolite()" onClick="logVariable('formal')" href="../_variables/formal.html">$formal</a> = <a class="function" onClick="logFunction('userdate')" href="../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it39023" onMouseOver="hilite(39023)" onMouseOut="lolite()" onClick="logVariable('tstamp')" href="../_variables/tstamp.html">$tstamp</a>, <a class="var it39025" onMouseOver="hilite(39025)" onMouseOut="lolite()" onClick="logVariable('shortformat')" href="../_variables/shortformat.html">$shortformat</a>);
<a name="l1105"><span class="linenum">1105</span></a>  
<a name="l1106"><span class="linenum">1106</span></a>      <a class="var it39027" onMouseOver="hilite(39027)" onMouseOut="lolite()" onClick="logVariable('datestamp')" href="../_variables/datestamp.html">$datestamp</a> = <a class="function" onClick="logFunction('usergetdate')" href="../_functions/usergetdate.html" onMouseOver="funcPopup(event,'usergetdate')">usergetdate</a>(<a class="var it39023" onMouseOver="hilite(39023)" onMouseOut="lolite()" onClick="logVariable('tstamp')" href="../_variables/tstamp.html">$tstamp</a>);
<a name="l1107"><span class="linenum">1107</span></a>      <a class="var it39028" onMouseOver="hilite(39028)" onMouseOut="lolite()" onClick="logVariable('datenow')" href="../_variables/datenow.html">$datenow</a>   = <a class="function" onClick="logFunction('usergetdate')" href="../_functions/usergetdate.html" onMouseOver="funcPopup(event,'usergetdate')">usergetdate</a>(<a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../_variables/now.html">$now</a>);
<a name="l1108"><span class="linenum">1108</span></a>  
<a name="l1109"><span class="linenum">1109</span></a>      if(<a class="var it39024" onMouseOver="hilite(39024)" onMouseOut="lolite()" onClick="logVariable('usecommonwords')" href="../_variables/usecommonwords.html">$usecommonwords</a> == false) {
<a name="l1110"><span class="linenum">1110</span></a>  <span class="comment">        // We don't want words, just a date</span>
<a name="l1111"><span class="linenum">1111</span></a>          return <a class="var it39026" onMouseOver="hilite(39026)" onMouseOut="lolite()" onClick="logVariable('formal')" href="../_variables/formal.html">$formal</a>;
<a name="l1112"><span class="linenum">1112</span></a>      }
<a name="l1113"><span class="linenum">1113</span></a>      else if(<a class="var it39027" onMouseOver="hilite(39027)" onMouseOut="lolite()" onClick="logVariable('datestamp')" href="../_variables/datestamp.html">$datestamp</a>['year'] == <a class="var it39028" onMouseOver="hilite(39028)" onMouseOut="lolite()" onClick="logVariable('datenow')" href="../_variables/datenow.html">$datenow</a>['year'] &amp;&amp; <a class="var it39027" onMouseOver="hilite(39027)" onMouseOut="lolite()" onClick="logVariable('datestamp')" href="../_variables/datestamp.html">$datestamp</a>['yday'] == <a class="var it39028" onMouseOver="hilite(39028)" onMouseOut="lolite()" onClick="logVariable('datenow')" href="../_variables/datenow.html">$datenow</a>['yday']) {
<a name="l1114"><span class="linenum">1114</span></a>  <span class="comment">        // Today</span>
<a name="l1115"><span class="linenum">1115</span></a>          return <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('today', 'calendar');
<a name="l1116"><span class="linenum">1116</span></a>      }
<a name="l1117"><span class="linenum">1117</span></a>      else if(
<a name="l1118"><span class="linenum">1118</span></a>          (<a class="var it39027" onMouseOver="hilite(39027)" onMouseOut="lolite()" onClick="logVariable('datestamp')" href="../_variables/datestamp.html">$datestamp</a>['year'] == <a class="var it39028" onMouseOver="hilite(39028)" onMouseOut="lolite()" onClick="logVariable('datenow')" href="../_variables/datenow.html">$datenow</a>['year'] &amp;&amp; <a class="var it39027" onMouseOver="hilite(39027)" onMouseOut="lolite()" onClick="logVariable('datestamp')" href="../_variables/datestamp.html">$datestamp</a>['yday'] == <a class="var it39028" onMouseOver="hilite(39028)" onMouseOut="lolite()" onClick="logVariable('datenow')" href="../_variables/datenow.html">$datenow</a>['yday'] - 1 ) ||
<a name="l1119"><span class="linenum">1119</span></a>          (<a class="var it39027" onMouseOver="hilite(39027)" onMouseOut="lolite()" onClick="logVariable('datestamp')" href="../_variables/datestamp.html">$datestamp</a>['year'] == <a class="var it39028" onMouseOver="hilite(39028)" onMouseOut="lolite()" onClick="logVariable('datenow')" href="../_variables/datenow.html">$datenow</a>['year'] - 1 &amp;&amp; <a class="var it39027" onMouseOver="hilite(39027)" onMouseOut="lolite()" onClick="logVariable('datestamp')" href="../_variables/datestamp.html">$datestamp</a>['mday'] == 31 &amp;&amp; <a class="var it39027" onMouseOver="hilite(39027)" onMouseOut="lolite()" onClick="logVariable('datestamp')" href="../_variables/datestamp.html">$datestamp</a>['mon'] == 12 &amp;&amp; <a class="var it39028" onMouseOver="hilite(39028)" onMouseOut="lolite()" onClick="logVariable('datenow')" href="../_variables/datenow.html">$datenow</a>['yday'] == 1)
<a name="l1120"><span class="linenum">1120</span></a>          ) {
<a name="l1121"><span class="linenum">1121</span></a>  <span class="comment">        // Yesterday</span>
<a name="l1122"><span class="linenum">1122</span></a>          return <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('yesterday', 'calendar');
<a name="l1123"><span class="linenum">1123</span></a>      }
<a name="l1124"><span class="linenum">1124</span></a>      else if(
<a name="l1125"><span class="linenum">1125</span></a>          (<a class="var it39027" onMouseOver="hilite(39027)" onMouseOut="lolite()" onClick="logVariable('datestamp')" href="../_variables/datestamp.html">$datestamp</a>['year'] == <a class="var it39028" onMouseOver="hilite(39028)" onMouseOut="lolite()" onClick="logVariable('datenow')" href="../_variables/datenow.html">$datenow</a>['year'] &amp;&amp; <a class="var it39027" onMouseOver="hilite(39027)" onMouseOut="lolite()" onClick="logVariable('datestamp')" href="../_variables/datestamp.html">$datestamp</a>['yday'] == <a class="var it39028" onMouseOver="hilite(39028)" onMouseOut="lolite()" onClick="logVariable('datenow')" href="../_variables/datenow.html">$datenow</a>['yday'] + 1 ) ||
<a name="l1126"><span class="linenum">1126</span></a>          (<a class="var it39027" onMouseOver="hilite(39027)" onMouseOut="lolite()" onClick="logVariable('datestamp')" href="../_variables/datestamp.html">$datestamp</a>['year'] == <a class="var it39028" onMouseOver="hilite(39028)" onMouseOut="lolite()" onClick="logVariable('datenow')" href="../_variables/datenow.html">$datenow</a>['year'] + 1 &amp;&amp; <a class="var it39028" onMouseOver="hilite(39028)" onMouseOut="lolite()" onClick="logVariable('datenow')" href="../_variables/datenow.html">$datenow</a>['mday'] == 31 &amp;&amp; <a class="var it39028" onMouseOver="hilite(39028)" onMouseOut="lolite()" onClick="logVariable('datenow')" href="../_variables/datenow.html">$datenow</a>['mon'] == 12 &amp;&amp; <a class="var it39027" onMouseOver="hilite(39027)" onMouseOut="lolite()" onClick="logVariable('datestamp')" href="../_variables/datestamp.html">$datestamp</a>['yday'] == 1)
<a name="l1127"><span class="linenum">1127</span></a>          ) {
<a name="l1128"><span class="linenum">1128</span></a>  <span class="comment">        // Tomorrow</span>
<a name="l1129"><span class="linenum">1129</span></a>          return <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('tomorrow', 'calendar');
<a name="l1130"><span class="linenum">1130</span></a>      }
<a name="l1131"><span class="linenum">1131</span></a>      else {
<a name="l1132"><span class="linenum">1132</span></a>          return <a class="var it39026" onMouseOver="hilite(39026)" onMouseOut="lolite()" onClick="logVariable('formal')" href="../_variables/formal.html">$formal</a>;
<a name="l1133"><span class="linenum">1133</span></a>      }
<a name="l1134"><span class="linenum">1134</span></a>  }
<a name="l1135"><span class="linenum">1135</span></a>  
<a name="l1136"><span class="linenum">1136</span></a>  <span class="comment">/**</span>
<a name="l1137"><span class="linenum">1137</span></a>  <span class="comment"> * return the formatted representation time</span>
<a name="l1138"><span class="linenum">1138</span></a>  <span class="comment"> *</span>
<a name="l1139"><span class="linenum">1139</span></a>  <span class="comment"> * @param int $time the timestamp in UTC, as obtained from the database</span>
<a name="l1140"><span class="linenum">1140</span></a>  <span class="comment"> * @return string the formatted date/time</span>
<a name="l1141"><span class="linenum">1141</span></a>  <span class="comment"> */</span>
<a name="l1142"><span class="linenum">1142</span></a>  function <a class="function" onClick="logFunction('calendar_time_representation')" href="../_functions/calendar_time_representation.html" onMouseOver="funcPopup(event,'calendar_time_representation')">calendar_time_representation</a>(<a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>) {
<a name="l1143"><span class="linenum">1143</span></a>      static <a class="var it39029" onMouseOver="hilite(39029)" onMouseOut="lolite()" onClick="logVariable('langtimeformat')" href="../_variables/langtimeformat.html">$langtimeformat</a> = NULL;
<a name="l1144"><span class="linenum">1144</span></a>      if(<a class="var it39029" onMouseOver="hilite(39029)" onMouseOut="lolite()" onClick="logVariable('langtimeformat')" href="../_variables/langtimeformat.html">$langtimeformat</a> === NULL) {
<a name="l1145"><span class="linenum">1145</span></a>          <a class="var it39029" onMouseOver="hilite(39029)" onMouseOut="lolite()" onClick="logVariable('langtimeformat')" href="../_variables/langtimeformat.html">$langtimeformat</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('strftimetime');
<a name="l1146"><span class="linenum">1146</span></a>      }
<a name="l1147"><span class="linenum">1147</span></a>      <a class="var it8694" onMouseOver="hilite(8694)" onMouseOut="lolite()" onClick="logVariable('timeformat')" href="../_variables/timeformat.html">$timeformat</a> = <a class="function" onClick="logFunction('get_user_preferences')" href="../_functions/get_user_preferences.html" onMouseOver="funcPopup(event,'get_user_preferences')">get_user_preferences</a>('calendar_timeformat');
<a name="l1148"><span class="linenum">1148</span></a>      if(empty(<a class="var it8694" onMouseOver="hilite(8694)" onMouseOut="lolite()" onClick="logVariable('timeformat')" href="../_variables/timeformat.html">$timeformat</a>)){
<a name="l1149"><span class="linenum">1149</span></a>          <a class="var it8694" onMouseOver="hilite(8694)" onMouseOut="lolite()" onClick="logVariable('timeformat')" href="../_variables/timeformat.html">$timeformat</a> = <a class="function" onClick="logFunction('get_config')" href="../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>(NULL,'calendar_site_timeformat');
<a name="l1150"><span class="linenum">1150</span></a>      }
<a name="l1151"><span class="linenum">1151</span></a>  <span class="comment">    // The ? is needed because the preference might be present, but empty</span>
<a name="l1152"><span class="linenum">1152</span></a>      return <a class="function" onClick="logFunction('userdate')" href="../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>, empty(<a class="var it8694" onMouseOver="hilite(8694)" onMouseOut="lolite()" onClick="logVariable('timeformat')" href="../_variables/timeformat.html">$timeformat</a>) ? <a class="var it39029" onMouseOver="hilite(39029)" onMouseOut="lolite()" onClick="logVariable('langtimeformat')" href="../_variables/langtimeformat.html">$langtimeformat</a> : <a class="var it8694" onMouseOver="hilite(8694)" onMouseOut="lolite()" onClick="logVariable('timeformat')" href="../_variables/timeformat.html">$timeformat</a>);
<a name="l1153"><span class="linenum">1153</span></a>  }
<a name="l1154"><span class="linenum">1154</span></a>  
<a name="l1155"><span class="linenum">1155</span></a>  <span class="comment">/**</span>
<a name="l1156"><span class="linenum">1156</span></a>  <span class="comment"> * Adds day, month, year arguments to a URL and returns a moodle_url object.</span>
<a name="l1157"><span class="linenum">1157</span></a>  <span class="comment"> *</span>
<a name="l1158"><span class="linenum">1158</span></a>  <span class="comment"> * @param string|moodle_url $linkbase</span>
<a name="l1159"><span class="linenum">1159</span></a>  <span class="comment"> * @param int $d The number of the day.</span>
<a name="l1160"><span class="linenum">1160</span></a>  <span class="comment"> * @param int $m The number of the month.</span>
<a name="l1161"><span class="linenum">1161</span></a>  <span class="comment"> * @param int $y The number of the year.</span>
<a name="l1162"><span class="linenum">1162</span></a>  <span class="comment"> * @param int $time the unixtime, used for multiple calendar support. The values $d,</span>
<a name="l1163"><span class="linenum">1163</span></a>  <span class="comment"> *     $m and $y are kept for backwards compatibility.</span>
<a name="l1164"><span class="linenum">1164</span></a>  <span class="comment"> * @return moodle_url|null $linkbase</span>
<a name="l1165"><span class="linenum">1165</span></a>  <span class="comment"> */</span>
<a name="l1166"><span class="linenum">1166</span></a>  function <a class="function" onClick="logFunction('calendar_get_link_href')" href="../_functions/calendar_get_link_href.html" onMouseOver="funcPopup(event,'calendar_get_link_href')">calendar_get_link_href</a>(<a class="var it39030" onMouseOver="hilite(39030)" onMouseOut="lolite()" onClick="logVariable('linkbase')" href="../_variables/linkbase.html">$linkbase</a>, <a class="var it775" onMouseOver="hilite(775)" onMouseOut="lolite()" onClick="logVariable('d')" href="../_variables/d.html">$d</a>, <a class="var it2379" onMouseOver="hilite(2379)" onMouseOut="lolite()" onClick="logVariable('m')" href="../_variables/m.html">$m</a>, <a class="var it5014" onMouseOver="hilite(5014)" onMouseOut="lolite()" onClick="logVariable('y')" href="../_variables/y.html">$y</a>, <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a> = 0) {
<a name="l1167"><span class="linenum">1167</span></a>      if (empty(<a class="var it39030" onMouseOver="hilite(39030)" onMouseOut="lolite()" onClick="logVariable('linkbase')" href="../_variables/linkbase.html">$linkbase</a>)) {
<a name="l1168"><span class="linenum">1168</span></a>          return '';
<a name="l1169"><span class="linenum">1169</span></a>      }
<a name="l1170"><span class="linenum">1170</span></a>      if (!(<a class="var it39030" onMouseOver="hilite(39030)" onMouseOut="lolite()" onClick="logVariable('linkbase')" href="../_variables/linkbase.html">$linkbase</a> instanceof moodle_url)) {
<a name="l1171"><span class="linenum">1171</span></a>          <a class="var it39030" onMouseOver="hilite(39030)" onMouseOut="lolite()" onClick="logVariable('linkbase')" href="../_variables/linkbase.html">$linkbase</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it39030" onMouseOver="hilite(39030)" onMouseOut="lolite()" onClick="logVariable('linkbase')" href="../_variables/linkbase.html">$linkbase</a>);
<a name="l1172"><span class="linenum">1172</span></a>      }
<a name="l1173"><span class="linenum">1173</span></a>  
<a name="l1174"><span class="linenum">1174</span></a>  <span class="comment">    // If a day, month and year were passed then convert it to a timestamp. If these were passed</span>
<a name="l1175"><span class="linenum">1175</span></a>  <span class="comment">    // then we can assume the day, month and year are passed as Gregorian, as no where in core</span>
<a name="l1176"><span class="linenum">1176</span></a>  <span class="comment">    // should we be passing these values rather than the time.</span>
<a name="l1177"><span class="linenum">1177</span></a>      if (!empty(<a class="var it775" onMouseOver="hilite(775)" onMouseOut="lolite()" onClick="logVariable('d')" href="../_variables/d.html">$d</a>) &amp;&amp; !empty(<a class="var it2379" onMouseOver="hilite(2379)" onMouseOut="lolite()" onClick="logVariable('m')" href="../_variables/m.html">$m</a>) &amp;&amp; !empty(<a class="var it5014" onMouseOver="hilite(5014)" onMouseOut="lolite()" onClick="logVariable('y')" href="../_variables/y.html">$y</a>)) {
<a name="l1178"><span class="linenum">1178</span></a>          if (<a class="phpfunction" onClick="logFunction('checkdate')" href="../_functions/checkdate.html" onMouseOver="phpfuncPopup(event,'checkdate')">checkdate</a>(<a class="var it2379" onMouseOver="hilite(2379)" onMouseOut="lolite()" onClick="logVariable('m')" href="../_variables/m.html">$m</a>, <a class="var it775" onMouseOver="hilite(775)" onMouseOut="lolite()" onClick="logVariable('d')" href="../_variables/d.html">$d</a>, <a class="var it5014" onMouseOver="hilite(5014)" onMouseOut="lolite()" onClick="logVariable('y')" href="../_variables/y.html">$y</a>)) {
<a name="l1179"><span class="linenum">1179</span></a>              <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a> = <a class="function" onClick="logFunction('make_timestamp')" href="../_functions/make_timestamp.html" onMouseOver="funcPopup(event,'make_timestamp')">make_timestamp</a>(<a class="var it5014" onMouseOver="hilite(5014)" onMouseOut="lolite()" onClick="logVariable('y')" href="../_variables/y.html">$y</a>, <a class="var it2379" onMouseOver="hilite(2379)" onMouseOut="lolite()" onClick="logVariable('m')" href="../_variables/m.html">$m</a>, <a class="var it775" onMouseOver="hilite(775)" onMouseOut="lolite()" onClick="logVariable('d')" href="../_variables/d.html">$d</a>);
<a name="l1180"><span class="linenum">1180</span></a>          } else {
<a name="l1181"><span class="linenum">1181</span></a>              <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l1182"><span class="linenum">1182</span></a>          }
<a name="l1183"><span class="linenum">1183</span></a>      } else if (empty(<a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>)) {
<a name="l1184"><span class="linenum">1184</span></a>          <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l1185"><span class="linenum">1185</span></a>      }
<a name="l1186"><span class="linenum">1186</span></a>  
<a name="l1187"><span class="linenum">1187</span></a>      <a class="var it39030" onMouseOver="hilite(39030)" onMouseOut="lolite()" onClick="logVariable('linkbase')" href="../_variables/linkbase.html">$linkbase</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('time', <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>);
<a name="l1188"><span class="linenum">1188</span></a>  
<a name="l1189"><span class="linenum">1189</span></a>      return <a class="var it39030" onMouseOver="hilite(39030)" onMouseOut="lolite()" onClick="logVariable('linkbase')" href="../_variables/linkbase.html">$linkbase</a>;
<a name="l1190"><span class="linenum">1190</span></a>  }
<a name="l1191"><span class="linenum">1191</span></a>  
<a name="l1192"><span class="linenum">1192</span></a>  <span class="comment">/**</span>
<a name="l1193"><span class="linenum">1193</span></a>  <span class="comment"> * Build and return a previous month HTML link, with an arrow.</span>
<a name="l1194"><span class="linenum">1194</span></a>  <span class="comment"> *</span>
<a name="l1195"><span class="linenum">1195</span></a>  <span class="comment"> * @param string $text The text label.</span>
<a name="l1196"><span class="linenum">1196</span></a>  <span class="comment"> * @param string|moodle_url $linkbase The URL stub.</span>
<a name="l1197"><span class="linenum">1197</span></a>  <span class="comment"> * @param int $d The number of the date.</span>
<a name="l1198"><span class="linenum">1198</span></a>  <span class="comment"> * @param int $m The number of the month.</span>
<a name="l1199"><span class="linenum">1199</span></a>  <span class="comment"> * @param int $y year The number of the year.</span>
<a name="l1200"><span class="linenum">1200</span></a>  <span class="comment"> * @param bool $accesshide Default visible, or hide from all except screenreaders.</span>
<a name="l1201"><span class="linenum">1201</span></a>  <span class="comment"> * @param int $time the unixtime, used for multiple calendar support. The values $d,</span>
<a name="l1202"><span class="linenum">1202</span></a>  <span class="comment"> *     $m and $y are kept for backwards compatibility.</span>
<a name="l1203"><span class="linenum">1203</span></a>  <span class="comment"> * @return string HTML string.</span>
<a name="l1204"><span class="linenum">1204</span></a>  <span class="comment"> */</span>
<a name="l1205"><span class="linenum">1205</span></a>  function <a class="function" onClick="logFunction('calendar_get_link_previous')" href="../_functions/calendar_get_link_previous.html" onMouseOver="funcPopup(event,'calendar_get_link_previous')">calendar_get_link_previous</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it39030" onMouseOver="hilite(39030)" onMouseOut="lolite()" onClick="logVariable('linkbase')" href="../_variables/linkbase.html">$linkbase</a>, <a class="var it775" onMouseOver="hilite(775)" onMouseOut="lolite()" onClick="logVariable('d')" href="../_variables/d.html">$d</a>, <a class="var it2379" onMouseOver="hilite(2379)" onMouseOut="lolite()" onClick="logVariable('m')" href="../_variables/m.html">$m</a>, <a class="var it5014" onMouseOver="hilite(5014)" onMouseOut="lolite()" onClick="logVariable('y')" href="../_variables/y.html">$y</a>, <a class="var it18382" onMouseOver="hilite(18382)" onMouseOut="lolite()" onClick="logVariable('accesshide')" href="../_variables/accesshide.html">$accesshide</a> = false, <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a> = 0) {
<a name="l1206"><span class="linenum">1206</span></a>      <a class="var it7994" onMouseOver="hilite(7994)" onMouseOut="lolite()" onClick="logVariable('href')" href="../_variables/href.html">$href</a> = <a class="function" onClick="logFunction('calendar_get_link_href')" href="../_functions/calendar_get_link_href.html" onMouseOver="funcPopup(event,'calendar_get_link_href')">calendar_get_link_href</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it39030" onMouseOver="hilite(39030)" onMouseOut="lolite()" onClick="logVariable('linkbase')" href="../_variables/linkbase.html">$linkbase</a>), <a class="var it775" onMouseOver="hilite(775)" onMouseOut="lolite()" onClick="logVariable('d')" href="../_variables/d.html">$d</a>, <a class="var it2379" onMouseOver="hilite(2379)" onMouseOut="lolite()" onClick="logVariable('m')" href="../_variables/m.html">$m</a>, <a class="var it5014" onMouseOver="hilite(5014)" onMouseOut="lolite()" onClick="logVariable('y')" href="../_variables/y.html">$y</a>, <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>);
<a name="l1207"><span class="linenum">1207</span></a>      if (empty(<a class="var it7994" onMouseOver="hilite(7994)" onMouseOut="lolite()" onClick="logVariable('href')" href="../_variables/href.html">$href</a>)) {
<a name="l1208"><span class="linenum">1208</span></a>          return <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>;
<a name="l1209"><span class="linenum">1209</span></a>      }
<a name="l1210"><span class="linenum">1210</span></a>      return <a class="function" onClick="logFunction('link_arrow_left')" href="../_functions/link_arrow_left.html" onMouseOver="funcPopup(event,'link_arrow_left')">link_arrow_left</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, (string)<a class="var it7994" onMouseOver="hilite(7994)" onMouseOut="lolite()" onClick="logVariable('href')" href="../_variables/href.html">$href</a>, <a class="var it18382" onMouseOver="hilite(18382)" onMouseOut="lolite()" onClick="logVariable('accesshide')" href="../_variables/accesshide.html">$accesshide</a>, 'previous');
<a name="l1211"><span class="linenum">1211</span></a>  }
<a name="l1212"><span class="linenum">1212</span></a>  
<a name="l1213"><span class="linenum">1213</span></a>  <span class="comment">/**</span>
<a name="l1214"><span class="linenum">1214</span></a>  <span class="comment"> * Build and return a next month HTML link, with an arrow.</span>
<a name="l1215"><span class="linenum">1215</span></a>  <span class="comment"> *</span>
<a name="l1216"><span class="linenum">1216</span></a>  <span class="comment"> * @param string $text The text label.</span>
<a name="l1217"><span class="linenum">1217</span></a>  <span class="comment"> * @param string|moodle_url $linkbase The URL stub.</span>
<a name="l1218"><span class="linenum">1218</span></a>  <span class="comment"> * @param int $d the number of the Day</span>
<a name="l1219"><span class="linenum">1219</span></a>  <span class="comment"> * @param int $m The number of the month.</span>
<a name="l1220"><span class="linenum">1220</span></a>  <span class="comment"> * @param int $y The number of the year.</span>
<a name="l1221"><span class="linenum">1221</span></a>  <span class="comment"> * @param bool $accesshide Default visible, or hide from all except screenreaders.</span>
<a name="l1222"><span class="linenum">1222</span></a>  <span class="comment"> * @param int $time the unixtime, used for multiple calendar support. The values $d,</span>
<a name="l1223"><span class="linenum">1223</span></a>  <span class="comment"> *     $m and $y are kept for backwards compatibility.</span>
<a name="l1224"><span class="linenum">1224</span></a>  <span class="comment"> * @return string HTML string.</span>
<a name="l1225"><span class="linenum">1225</span></a>  <span class="comment"> */</span>
<a name="l1226"><span class="linenum">1226</span></a>  function <a class="function" onClick="logFunction('calendar_get_link_next')" href="../_functions/calendar_get_link_next.html" onMouseOver="funcPopup(event,'calendar_get_link_next')">calendar_get_link_next</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it39030" onMouseOver="hilite(39030)" onMouseOut="lolite()" onClick="logVariable('linkbase')" href="../_variables/linkbase.html">$linkbase</a>, <a class="var it775" onMouseOver="hilite(775)" onMouseOut="lolite()" onClick="logVariable('d')" href="../_variables/d.html">$d</a>, <a class="var it2379" onMouseOver="hilite(2379)" onMouseOut="lolite()" onClick="logVariable('m')" href="../_variables/m.html">$m</a>, <a class="var it5014" onMouseOver="hilite(5014)" onMouseOut="lolite()" onClick="logVariable('y')" href="../_variables/y.html">$y</a>, <a class="var it18382" onMouseOver="hilite(18382)" onMouseOut="lolite()" onClick="logVariable('accesshide')" href="../_variables/accesshide.html">$accesshide</a> = false, <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a> = 0) {
<a name="l1227"><span class="linenum">1227</span></a>      <a class="var it7994" onMouseOver="hilite(7994)" onMouseOut="lolite()" onClick="logVariable('href')" href="../_variables/href.html">$href</a> = <a class="function" onClick="logFunction('calendar_get_link_href')" href="../_functions/calendar_get_link_href.html" onMouseOver="funcPopup(event,'calendar_get_link_href')">calendar_get_link_href</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it39030" onMouseOver="hilite(39030)" onMouseOut="lolite()" onClick="logVariable('linkbase')" href="../_variables/linkbase.html">$linkbase</a>), <a class="var it775" onMouseOver="hilite(775)" onMouseOut="lolite()" onClick="logVariable('d')" href="../_variables/d.html">$d</a>, <a class="var it2379" onMouseOver="hilite(2379)" onMouseOut="lolite()" onClick="logVariable('m')" href="../_variables/m.html">$m</a>, <a class="var it5014" onMouseOver="hilite(5014)" onMouseOut="lolite()" onClick="logVariable('y')" href="../_variables/y.html">$y</a>, <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>);
<a name="l1228"><span class="linenum">1228</span></a>      if (empty(<a class="var it7994" onMouseOver="hilite(7994)" onMouseOut="lolite()" onClick="logVariable('href')" href="../_variables/href.html">$href</a>)) {
<a name="l1229"><span class="linenum">1229</span></a>          return <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>;
<a name="l1230"><span class="linenum">1230</span></a>      }
<a name="l1231"><span class="linenum">1231</span></a>      return <a class="function" onClick="logFunction('link_arrow_right')" href="../_functions/link_arrow_right.html" onMouseOver="funcPopup(event,'link_arrow_right')">link_arrow_right</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, (string)<a class="var it7994" onMouseOver="hilite(7994)" onMouseOut="lolite()" onClick="logVariable('href')" href="../_variables/href.html">$href</a>, <a class="var it18382" onMouseOver="hilite(18382)" onMouseOut="lolite()" onClick="logVariable('accesshide')" href="../_variables/accesshide.html">$accesshide</a>, 'next');
<a name="l1232"><span class="linenum">1232</span></a>  }
<a name="l1233"><span class="linenum">1233</span></a>  
<a name="l1234"><span class="linenum">1234</span></a>  <span class="comment">/**</span>
<a name="l1235"><span class="linenum">1235</span></a>  <span class="comment"> * Return the name of the weekday</span>
<a name="l1236"><span class="linenum">1236</span></a>  <span class="comment"> *</span>
<a name="l1237"><span class="linenum">1237</span></a>  <span class="comment"> * @param string $englishname</span>
<a name="l1238"><span class="linenum">1238</span></a>  <span class="comment"> * @return string of the weekeday</span>
<a name="l1239"><span class="linenum">1239</span></a>  <span class="comment"> */</span>
<a name="l1240"><span class="linenum">1240</span></a>  function <a class="function" onClick="logFunction('calendar_wday_name')" href="../_functions/calendar_wday_name.html" onMouseOver="funcPopup(event,'calendar_wday_name')">calendar_wday_name</a>(<a class="var it39031" onMouseOver="hilite(39031)" onMouseOut="lolite()" onClick="logVariable('englishname')" href="../_variables/englishname.html">$englishname</a>) {
<a name="l1241"><span class="linenum">1241</span></a>      return <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(<a class="phpfunction" onClick="logFunction('strtolower')" href="../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="var it39031" onMouseOver="hilite(39031)" onMouseOut="lolite()" onClick="logVariable('englishname')" href="../_variables/englishname.html">$englishname</a>), 'calendar');
<a name="l1242"><span class="linenum">1242</span></a>  }
<a name="l1243"><span class="linenum">1243</span></a>  
<a name="l1244"><span class="linenum">1244</span></a>  <span class="comment">/**</span>
<a name="l1245"><span class="linenum">1245</span></a>  <span class="comment"> * Return the number of days in month</span>
<a name="l1246"><span class="linenum">1246</span></a>  <span class="comment"> *</span>
<a name="l1247"><span class="linenum">1247</span></a>  <span class="comment"> * @param int $month the number of the month.</span>
<a name="l1248"><span class="linenum">1248</span></a>  <span class="comment"> * @param int $year the number of the year</span>
<a name="l1249"><span class="linenum">1249</span></a>  <span class="comment"> * @return int</span>
<a name="l1250"><span class="linenum">1250</span></a>  <span class="comment"> */</span>
<a name="l1251"><span class="linenum">1251</span></a>  function <a class="function" onClick="logFunction('calendar_days_in_month')" href="../_functions/calendar_days_in_month.html" onMouseOver="funcPopup(event,'calendar_days_in_month')">calendar_days_in_month</a>(<a class="var it1761" onMouseOver="hilite(1761)" onMouseOut="lolite()" onClick="logVariable('month')" href="../_variables/month.html">$month</a>, <a class="var it1760" onMouseOver="hilite(1760)" onMouseOut="lolite()" onClick="logVariable('year')" href="../_variables/year.html">$year</a>) {
<a name="l1252"><span class="linenum">1252</span></a>      <a class="var it3542" onMouseOver="hilite(3542)" onMouseOut="lolite()" onClick="logVariable('calendartype')" href="../_variables/calendartype.html">$calendartype</a> = \core_calendar\<a class="class" onClick="logClass('type_factory')" href="../_classes/type_factory.html" onMouseOver="classPopup(event,'type_factory')">type_factory</a>::<a class="function" onClick="logFunction('get_calendar_instance')" href="../_functions/get_calendar_instance.html" onMouseOver="funcPopup(event,'get_calendar_instance')">get_calendar_instance</a>();
<a name="l1253"><span class="linenum">1253</span></a>      return <a class="var it3542" onMouseOver="hilite(3542)" onMouseOut="lolite()" onClick="logVariable('calendartype')" href="../_variables/calendartype.html">$calendartype</a>-&gt;<a class="function" onClick="logFunction('get_num_days_in_month')" href="../_functions/get_num_days_in_month.html" onMouseOver="funcPopup(event,'get_num_days_in_month')">get_num_days_in_month</a>(<a class="var it1760" onMouseOver="hilite(1760)" onMouseOut="lolite()" onClick="logVariable('year')" href="../_variables/year.html">$year</a>, <a class="var it1761" onMouseOver="hilite(1761)" onMouseOut="lolite()" onClick="logVariable('month')" href="../_variables/month.html">$month</a>);
<a name="l1254"><span class="linenum">1254</span></a>  }
<a name="l1255"><span class="linenum">1255</span></a>  
<a name="l1256"><span class="linenum">1256</span></a>  <span class="comment">/**</span>
<a name="l1257"><span class="linenum">1257</span></a>  <span class="comment"> * Get the upcoming event block</span>
<a name="l1258"><span class="linenum">1258</span></a>  <span class="comment"> *</span>
<a name="l1259"><span class="linenum">1259</span></a>  <span class="comment"> * @param array $events list of events</span>
<a name="l1260"><span class="linenum">1260</span></a>  <span class="comment"> * @param moodle_url|string $linkhref link to event referer</span>
<a name="l1261"><span class="linenum">1261</span></a>  <span class="comment"> * @param boolean $showcourselink whether links to courses should be shown</span>
<a name="l1262"><span class="linenum">1262</span></a>  <span class="comment"> * @return string|null $content html block content</span>
<a name="l1263"><span class="linenum">1263</span></a>  <span class="comment"> */</span>
<a name="l1264"><span class="linenum">1264</span></a>  function <a class="function" onClick="logFunction('calendar_get_block_upcoming')" href="../_functions/calendar_get_block_upcoming.html" onMouseOver="funcPopup(event,'calendar_get_block_upcoming')">calendar_get_block_upcoming</a>(<a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a>, <a class="var it39032" onMouseOver="hilite(39032)" onMouseOut="lolite()" onClick="logVariable('linkhref')" href="../_variables/linkhref.html">$linkhref</a> = NULL, <a class="var it9643" onMouseOver="hilite(9643)" onMouseOut="lolite()" onClick="logVariable('showcourselink')" href="../_variables/showcourselink.html">$showcourselink</a> = false) {
<a name="l1265"><span class="linenum">1265</span></a>      <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> = '';
<a name="l1266"><span class="linenum">1266</span></a>      <a class="var it255" onMouseOver="hilite(255)" onMouseOut="lolite()" onClick="logVariable('lines')" href="../_variables/lines.html">$lines</a> = <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a>);
<a name="l1267"><span class="linenum">1267</span></a>      if (!<a class="var it255" onMouseOver="hilite(255)" onMouseOut="lolite()" onClick="logVariable('lines')" href="../_variables/lines.html">$lines</a>) {
<a name="l1268"><span class="linenum">1268</span></a>          return <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a>;
<a name="l1269"><span class="linenum">1269</span></a>      }
<a name="l1270"><span class="linenum">1270</span></a>  
<a name="l1271"><span class="linenum">1271</span></a>      for (<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> = 0; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> &lt; <a class="var it255" onMouseOver="hilite(255)" onMouseOut="lolite()" onClick="logVariable('lines')" href="../_variables/lines.html">$lines</a>; ++<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>) {
<a name="l1272"><span class="linenum">1272</span></a>          if (!isset(<a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>]-&gt;time)) {   // Just for robustness
<a name="l1273"><span class="linenum">1273</span></a>              continue;
<a name="l1274"><span class="linenum">1274</span></a>          }
<a name="l1275"><span class="linenum">1275</span></a>          <a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>] = <a class="function" onClick="logFunction('calendar_add_event_metadata')" href="../_functions/calendar_add_event_metadata.html" onMouseOver="funcPopup(event,'calendar_add_event_metadata')">calendar_add_event_metadata</a>(<a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>]);
<a name="l1276"><span class="linenum">1276</span></a>          <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= '&lt;div class=&quot;event&quot;&gt;&lt;span class=&quot;icon c0&quot;&gt;'.<a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>]-&gt;icon.'&lt;/span&gt;';
<a name="l1277"><span class="linenum">1277</span></a>          if (!empty(<a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>]-&gt;referer)) {
<a name="l1278"><span class="linenum">1278</span></a>  <span class="comment">            // That's an activity event, so let's provide the hyperlink</span>
<a name="l1279"><span class="linenum">1279</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= <a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>]-&gt;referer;
<a name="l1280"><span class="linenum">1280</span></a>          } else {
<a name="l1281"><span class="linenum">1281</span></a>              if(!empty(<a class="var it39032" onMouseOver="hilite(39032)" onMouseOut="lolite()" onClick="logVariable('linkhref')" href="../_variables/linkhref.html">$linkhref</a>)) {
<a name="l1282"><span class="linenum">1282</span></a>                  <a class="var it7994" onMouseOver="hilite(7994)" onMouseOut="lolite()" onClick="logVariable('href')" href="../_variables/href.html">$href</a> = <a class="function" onClick="logFunction('calendar_get_link_href')" href="../_functions/calendar_get_link_href.html" onMouseOver="funcPopup(event,'calendar_get_link_href')">calendar_get_link_href</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="constant" onClick="logConstant('CALENDAR_URL')" href="../_constants/CALENDAR_URL.html" onMouseOver="constPopup(event,'CALENDAR_URL')">CALENDAR_URL</a> . <a class="var it39032" onMouseOver="hilite(39032)" onMouseOut="lolite()" onClick="logVariable('linkhref')" href="../_variables/linkhref.html">$linkhref</a>), 0, 0, 0, <a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>]-&gt;timestart);
<a name="l1283"><span class="linenum">1283</span></a>                  <a class="var it7994" onMouseOver="hilite(7994)" onMouseOut="lolite()" onClick="logVariable('href')" href="../_variables/href.html">$href</a>-&gt;<a class="function" onClick="logFunction('set_anchor')" href="../_functions/set_anchor.html" onMouseOver="funcPopup(event,'set_anchor')">set_anchor</a>('event_'.<a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>]-&gt;id);
<a name="l1284"><span class="linenum">1284</span></a>                  <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it7994" onMouseOver="hilite(7994)" onMouseOut="lolite()" onClick="logVariable('href')" href="../_variables/href.html">$href</a>, <a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>]-&gt;name);
<a name="l1285"><span class="linenum">1285</span></a>              }
<a name="l1286"><span class="linenum">1286</span></a>              else {
<a name="l1287"><span class="linenum">1287</span></a>                  <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= <a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>]-&gt;name;
<a name="l1288"><span class="linenum">1288</span></a>              }
<a name="l1289"><span class="linenum">1289</span></a>          }
<a name="l1290"><span class="linenum">1290</span></a>          <a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>]-&gt;time = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('&amp;raquo;', '&lt;br /&gt;&amp;raquo;', <a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>]-&gt;time);
<a name="l1291"><span class="linenum">1291</span></a>          if (<a class="var it9643" onMouseOver="hilite(9643)" onMouseOut="lolite()" onClick="logVariable('showcourselink')" href="../_variables/showcourselink.html">$showcourselink</a> &amp;&amp; !empty(<a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>]-&gt;courselink)) {
<a name="l1292"><span class="linenum">1292</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('div')" href="../_functions/div.html" onMouseOver="funcPopup(event,'div')">div</a>(<a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>]-&gt;courselink, 'course');
<a name="l1293"><span class="linenum">1293</span></a>          }
<a name="l1294"><span class="linenum">1294</span></a>          <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= '&lt;div class=&quot;date&quot;&gt;'.<a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>]-&gt;time.'&lt;/div&gt;&lt;/div&gt;';
<a name="l1295"><span class="linenum">1295</span></a>          if (<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> &lt; <a class="var it255" onMouseOver="hilite(255)" onMouseOut="lolite()" onClick="logVariable('lines')" href="../_variables/lines.html">$lines</a> - 1) <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> .= '&lt;hr /&gt;';
<a name="l1296"><span class="linenum">1296</span></a>      }
<a name="l1297"><span class="linenum">1297</span></a>  
<a name="l1298"><span class="linenum">1298</span></a>      return <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a>;
<a name="l1299"><span class="linenum">1299</span></a>  }
<a name="l1300"><span class="linenum">1300</span></a>  
<a name="l1301"><span class="linenum">1301</span></a>  <span class="comment">/**</span>
<a name="l1302"><span class="linenum">1302</span></a>  <span class="comment"> * Get the next following month</span>
<a name="l1303"><span class="linenum">1303</span></a>  <span class="comment"> *</span>
<a name="l1304"><span class="linenum">1304</span></a>  <span class="comment"> * @param int $month the number of the month.</span>
<a name="l1305"><span class="linenum">1305</span></a>  <span class="comment"> * @param int $year the number of the year.</span>
<a name="l1306"><span class="linenum">1306</span></a>  <span class="comment"> * @return array the following month</span>
<a name="l1307"><span class="linenum">1307</span></a>  <span class="comment"> */</span>
<a name="l1308"><span class="linenum">1308</span></a>  function <a class="function" onClick="logFunction('calendar_add_month')" href="../_functions/calendar_add_month.html" onMouseOver="funcPopup(event,'calendar_add_month')">calendar_add_month</a>(<a class="var it1761" onMouseOver="hilite(1761)" onMouseOut="lolite()" onClick="logVariable('month')" href="../_variables/month.html">$month</a>, <a class="var it1760" onMouseOver="hilite(1760)" onMouseOut="lolite()" onClick="logVariable('year')" href="../_variables/year.html">$year</a>) {
<a name="l1309"><span class="linenum">1309</span></a>  <span class="comment">    // Get the calendar type we are using.</span>
<a name="l1310"><span class="linenum">1310</span></a>      <a class="var it3542" onMouseOver="hilite(3542)" onMouseOut="lolite()" onClick="logVariable('calendartype')" href="../_variables/calendartype.html">$calendartype</a> = \core_calendar\<a class="class" onClick="logClass('type_factory')" href="../_classes/type_factory.html" onMouseOver="classPopup(event,'type_factory')">type_factory</a>::<a class="function" onClick="logFunction('get_calendar_instance')" href="../_functions/get_calendar_instance.html" onMouseOver="funcPopup(event,'get_calendar_instance')">get_calendar_instance</a>();
<a name="l1311"><span class="linenum">1311</span></a>      return <a class="var it3542" onMouseOver="hilite(3542)" onMouseOut="lolite()" onClick="logVariable('calendartype')" href="../_variables/calendartype.html">$calendartype</a>-&gt;<a class="function" onClick="logFunction('get_next_month')" href="../_functions/get_next_month.html" onMouseOver="funcPopup(event,'get_next_month')">get_next_month</a>(<a class="var it1760" onMouseOver="hilite(1760)" onMouseOut="lolite()" onClick="logVariable('year')" href="../_variables/year.html">$year</a>, <a class="var it1761" onMouseOver="hilite(1761)" onMouseOut="lolite()" onClick="logVariable('month')" href="../_variables/month.html">$month</a>);
<a name="l1312"><span class="linenum">1312</span></a>  }
<a name="l1313"><span class="linenum">1313</span></a>  
<a name="l1314"><span class="linenum">1314</span></a>  <span class="comment">/**</span>
<a name="l1315"><span class="linenum">1315</span></a>  <span class="comment"> * Get the previous month.</span>
<a name="l1316"><span class="linenum">1316</span></a>  <span class="comment"> *</span>
<a name="l1317"><span class="linenum">1317</span></a>  <span class="comment"> * @param int $month the number of the month.</span>
<a name="l1318"><span class="linenum">1318</span></a>  <span class="comment"> * @param int $year the number of the year.</span>
<a name="l1319"><span class="linenum">1319</span></a>  <span class="comment"> * @return array previous month</span>
<a name="l1320"><span class="linenum">1320</span></a>  <span class="comment"> */</span>
<a name="l1321"><span class="linenum">1321</span></a>  function <a class="function" onClick="logFunction('calendar_sub_month')" href="../_functions/calendar_sub_month.html" onMouseOver="funcPopup(event,'calendar_sub_month')">calendar_sub_month</a>(<a class="var it1761" onMouseOver="hilite(1761)" onMouseOut="lolite()" onClick="logVariable('month')" href="../_variables/month.html">$month</a>, <a class="var it1760" onMouseOver="hilite(1760)" onMouseOut="lolite()" onClick="logVariable('year')" href="../_variables/year.html">$year</a>) {
<a name="l1322"><span class="linenum">1322</span></a>  <span class="comment">    // Get the calendar type we are using.</span>
<a name="l1323"><span class="linenum">1323</span></a>      <a class="var it3542" onMouseOver="hilite(3542)" onMouseOut="lolite()" onClick="logVariable('calendartype')" href="../_variables/calendartype.html">$calendartype</a> = \core_calendar\<a class="class" onClick="logClass('type_factory')" href="../_classes/type_factory.html" onMouseOver="classPopup(event,'type_factory')">type_factory</a>::<a class="function" onClick="logFunction('get_calendar_instance')" href="../_functions/get_calendar_instance.html" onMouseOver="funcPopup(event,'get_calendar_instance')">get_calendar_instance</a>();
<a name="l1324"><span class="linenum">1324</span></a>      return <a class="var it3542" onMouseOver="hilite(3542)" onMouseOut="lolite()" onClick="logVariable('calendartype')" href="../_variables/calendartype.html">$calendartype</a>-&gt;<a class="function" onClick="logFunction('get_prev_month')" href="../_functions/get_prev_month.html" onMouseOver="funcPopup(event,'get_prev_month')">get_prev_month</a>(<a class="var it1760" onMouseOver="hilite(1760)" onMouseOut="lolite()" onClick="logVariable('year')" href="../_variables/year.html">$year</a>, <a class="var it1761" onMouseOver="hilite(1761)" onMouseOut="lolite()" onClick="logVariable('month')" href="../_variables/month.html">$month</a>);
<a name="l1325"><span class="linenum">1325</span></a>  }
<a name="l1326"><span class="linenum">1326</span></a>  
<a name="l1327"><span class="linenum">1327</span></a>  <span class="comment">/**</span>
<a name="l1328"><span class="linenum">1328</span></a>  <span class="comment"> * Get per-day basis events</span>
<a name="l1329"><span class="linenum">1329</span></a>  <span class="comment"> *</span>
<a name="l1330"><span class="linenum">1330</span></a>  <span class="comment"> * @param array $events list of events</span>
<a name="l1331"><span class="linenum">1331</span></a>  <span class="comment"> * @param int $month the number of the month</span>
<a name="l1332"><span class="linenum">1332</span></a>  <span class="comment"> * @param int $year the number of the year</span>
<a name="l1333"><span class="linenum">1333</span></a>  <span class="comment"> * @param array $eventsbyday event on specific day</span>
<a name="l1334"><span class="linenum">1334</span></a>  <span class="comment"> * @param array $durationbyday duration of the event in days</span>
<a name="l1335"><span class="linenum">1335</span></a>  <span class="comment"> * @param array $typesbyday event type (eg: global, course, user, or group)</span>
<a name="l1336"><span class="linenum">1336</span></a>  <span class="comment"> * @param array $courses list of courses</span>
<a name="l1337"><span class="linenum">1337</span></a>  <span class="comment"> * @return void</span>
<a name="l1338"><span class="linenum">1338</span></a>  <span class="comment"> */</span>
<a name="l1339"><span class="linenum">1339</span></a>  function <a class="function" onClick="logFunction('calendar_events_by_day')" href="../_functions/calendar_events_by_day.html" onMouseOver="funcPopup(event,'calendar_events_by_day')">calendar_events_by_day</a>(<a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a>, <a class="var it1761" onMouseOver="hilite(1761)" onMouseOut="lolite()" onClick="logVariable('month')" href="../_variables/month.html">$month</a>, <a class="var it1760" onMouseOver="hilite(1760)" onMouseOut="lolite()" onClick="logVariable('year')" href="../_variables/year.html">$year</a>, &amp;<a class="var it29837" onMouseOver="hilite(29837)" onMouseOut="lolite()" onClick="logVariable('eventsbyday')" href="../_variables/eventsbyday.html">$eventsbyday</a>, &amp;<a class="var it29838" onMouseOver="hilite(29838)" onMouseOut="lolite()" onClick="logVariable('durationbyday')" href="../_variables/durationbyday.html">$durationbyday</a>, &amp;<a class="var it29839" onMouseOver="hilite(29839)" onMouseOut="lolite()" onClick="logVariable('typesbyday')" href="../_variables/typesbyday.html">$typesbyday</a>, &amp;<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>) {
<a name="l1340"><span class="linenum">1340</span></a>  <span class="comment">    // Get the calendar type we are using.</span>
<a name="l1341"><span class="linenum">1341</span></a>      <a class="var it3542" onMouseOver="hilite(3542)" onMouseOut="lolite()" onClick="logVariable('calendartype')" href="../_variables/calendartype.html">$calendartype</a> = \core_calendar\<a class="class" onClick="logClass('type_factory')" href="../_classes/type_factory.html" onMouseOver="classPopup(event,'type_factory')">type_factory</a>::<a class="function" onClick="logFunction('get_calendar_instance')" href="../_functions/get_calendar_instance.html" onMouseOver="funcPopup(event,'get_calendar_instance')">get_calendar_instance</a>();
<a name="l1342"><span class="linenum">1342</span></a>  
<a name="l1343"><span class="linenum">1343</span></a>      <a class="var it29837" onMouseOver="hilite(29837)" onMouseOut="lolite()" onClick="logVariable('eventsbyday')" href="../_variables/eventsbyday.html">$eventsbyday</a> = array();
<a name="l1344"><span class="linenum">1344</span></a>      <a class="var it29839" onMouseOver="hilite(29839)" onMouseOut="lolite()" onClick="logVariable('typesbyday')" href="../_variables/typesbyday.html">$typesbyday</a> = array();
<a name="l1345"><span class="linenum">1345</span></a>      <a class="var it29838" onMouseOver="hilite(29838)" onMouseOut="lolite()" onClick="logVariable('durationbyday')" href="../_variables/durationbyday.html">$durationbyday</a> = array();
<a name="l1346"><span class="linenum">1346</span></a>  
<a name="l1347"><span class="linenum">1347</span></a>      if(<a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a> === false) {
<a name="l1348"><span class="linenum">1348</span></a>          return;
<a name="l1349"><span class="linenum">1349</span></a>      }
<a name="l1350"><span class="linenum">1350</span></a>  
<a name="l1351"><span class="linenum">1351</span></a>      foreach (<a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a> as <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>) {
<a name="l1352"><span class="linenum">1352</span></a>          <a class="var it3592" onMouseOver="hilite(3592)" onMouseOut="lolite()" onClick="logVariable('startdate')" href="../_variables/startdate.html">$startdate</a> = <a class="var it3542" onMouseOver="hilite(3542)" onMouseOut="lolite()" onClick="logVariable('calendartype')" href="../_variables/calendartype.html">$calendartype</a>-&gt;<a class="function" onClick="logFunction('timestamp_to_date_array')" href="../_functions/timestamp_to_date_array.html" onMouseOver="funcPopup(event,'timestamp_to_date_array')">timestamp_to_date_array</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timestart')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/timestart.html">timestart</a>);
<a name="l1353"><span class="linenum">1353</span></a>  <span class="comment">        // Set end date = start date if no duration</span>
<a name="l1354"><span class="linenum">1354</span></a>          if (<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timeduration')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/timeduration.html">timeduration</a>) {
<a name="l1355"><span class="linenum">1355</span></a>              <a class="var it35199" onMouseOver="hilite(35199)" onMouseOut="lolite()" onClick="logVariable('enddate')" href="../_variables/enddate.html">$enddate</a> = <a class="var it3542" onMouseOver="hilite(3542)" onMouseOut="lolite()" onClick="logVariable('calendartype')" href="../_variables/calendartype.html">$calendartype</a>-&gt;<a class="function" onClick="logFunction('timestamp_to_date_array')" href="../_functions/timestamp_to_date_array.html" onMouseOver="funcPopup(event,'timestamp_to_date_array')">timestamp_to_date_array</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timestart')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/timestart.html">timestart</a> + <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timeduration')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/timeduration.html">timeduration</a> - 1);
<a name="l1356"><span class="linenum">1356</span></a>          } else {
<a name="l1357"><span class="linenum">1357</span></a>              <a class="var it35199" onMouseOver="hilite(35199)" onMouseOut="lolite()" onClick="logVariable('enddate')" href="../_variables/enddate.html">$enddate</a> = <a class="var it3592" onMouseOver="hilite(3592)" onMouseOut="lolite()" onClick="logVariable('startdate')" href="../_variables/startdate.html">$startdate</a>;
<a name="l1358"><span class="linenum">1358</span></a>          }
<a name="l1359"><span class="linenum">1359</span></a>  
<a name="l1360"><span class="linenum">1360</span></a>  <span class="comment">        // Simple arithmetic: $year * 13 + $month is a distinct integer for each distinct ($year, $month) pair</span>
<a name="l1361"><span class="linenum">1361</span></a>          if(!(<a class="var it3592" onMouseOver="hilite(3592)" onMouseOut="lolite()" onClick="logVariable('startdate')" href="../_variables/startdate.html">$startdate</a>['year'] * 13 + <a class="var it3592" onMouseOver="hilite(3592)" onMouseOut="lolite()" onClick="logVariable('startdate')" href="../_variables/startdate.html">$startdate</a>['mon'] &lt;= <a class="var it1760" onMouseOver="hilite(1760)" onMouseOut="lolite()" onClick="logVariable('year')" href="../_variables/year.html">$year</a> * 13 + <a class="var it1761" onMouseOver="hilite(1761)" onMouseOut="lolite()" onClick="logVariable('month')" href="../_variables/month.html">$month</a>) &amp;&amp; (<a class="var it35199" onMouseOver="hilite(35199)" onMouseOut="lolite()" onClick="logVariable('enddate')" href="../_variables/enddate.html">$enddate</a>['year'] * 13 + <a class="var it35199" onMouseOver="hilite(35199)" onMouseOut="lolite()" onClick="logVariable('enddate')" href="../_variables/enddate.html">$enddate</a>['mon'] &gt;= <a class="var it1760" onMouseOver="hilite(1760)" onMouseOut="lolite()" onClick="logVariable('year')" href="../_variables/year.html">$year</a> * 13 + <a class="var it1761" onMouseOver="hilite(1761)" onMouseOut="lolite()" onClick="logVariable('month')" href="../_variables/month.html">$month</a>)) {
<a name="l1362"><span class="linenum">1362</span></a>  <span class="comment">            // Out of bounds</span>
<a name="l1363"><span class="linenum">1363</span></a>              continue;
<a name="l1364"><span class="linenum">1364</span></a>          }
<a name="l1365"><span class="linenum">1365</span></a>  
<a name="l1366"><span class="linenum">1366</span></a>          <a class="var it39033" onMouseOver="hilite(39033)" onMouseOut="lolite()" onClick="logVariable('eventdaystart')" href="../_variables/eventdaystart.html">$eventdaystart</a> = <a class="phpfunction" onClick="logFunction('intval')" href="../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="var it3592" onMouseOver="hilite(3592)" onMouseOut="lolite()" onClick="logVariable('startdate')" href="../_variables/startdate.html">$startdate</a>['mday']);
<a name="l1367"><span class="linenum">1367</span></a>  
<a name="l1368"><span class="linenum">1368</span></a>          if(<a class="var it3592" onMouseOver="hilite(3592)" onMouseOut="lolite()" onClick="logVariable('startdate')" href="../_variables/startdate.html">$startdate</a>['mon'] == <a class="var it1761" onMouseOver="hilite(1761)" onMouseOut="lolite()" onClick="logVariable('month')" href="../_variables/month.html">$month</a> &amp;&amp; <a class="var it3592" onMouseOver="hilite(3592)" onMouseOut="lolite()" onClick="logVariable('startdate')" href="../_variables/startdate.html">$startdate</a>['year'] == <a class="var it1760" onMouseOver="hilite(1760)" onMouseOut="lolite()" onClick="logVariable('year')" href="../_variables/year.html">$year</a>) {
<a name="l1369"><span class="linenum">1369</span></a>  <span class="comment">            // Give the event to its day</span>
<a name="l1370"><span class="linenum">1370</span></a>              <a class="var it29837" onMouseOver="hilite(29837)" onMouseOut="lolite()" onClick="logVariable('eventsbyday')" href="../_variables/eventsbyday.html">$eventsbyday</a>[<a class="var it39033" onMouseOver="hilite(39033)" onMouseOut="lolite()" onClick="logVariable('eventdaystart')" href="../_variables/eventdaystart.html">$eventdaystart</a>][] = <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('id')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1371"><span class="linenum">1371</span></a>  
<a name="l1372"><span class="linenum">1372</span></a>  <span class="comment">            // Mark the day as having such an event</span>
<a name="l1373"><span class="linenum">1373</span></a>              if(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('courseid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a> == <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a> &amp;&amp; <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('groupid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/groupid.html">groupid</a> == 0) {
<a name="l1374"><span class="linenum">1374</span></a>                  <a class="var it29839" onMouseOver="hilite(29839)" onMouseOut="lolite()" onClick="logVariable('typesbyday')" href="../_variables/typesbyday.html">$typesbyday</a>[<a class="var it39033" onMouseOver="hilite(39033)" onMouseOut="lolite()" onClick="logVariable('eventdaystart')" href="../_variables/eventdaystart.html">$eventdaystart</a>]['startglobal'] = true;
<a name="l1375"><span class="linenum">1375</span></a>  <span class="comment">                // Set event class for global event</span>
<a name="l1376"><span class="linenum">1376</span></a>                  <a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a>[<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('id')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/id.html">id</a>]-&gt;class = 'calendar_event_global';
<a name="l1377"><span class="linenum">1377</span></a>              }
<a name="l1378"><span class="linenum">1378</span></a>              else if(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('courseid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a> != 0 &amp;&amp; <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('courseid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a> != <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a> &amp;&amp; <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('groupid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/groupid.html">groupid</a> == 0) {
<a name="l1379"><span class="linenum">1379</span></a>                  <a class="var it29839" onMouseOver="hilite(29839)" onMouseOut="lolite()" onClick="logVariable('typesbyday')" href="../_variables/typesbyday.html">$typesbyday</a>[<a class="var it39033" onMouseOver="hilite(39033)" onMouseOut="lolite()" onClick="logVariable('eventdaystart')" href="../_variables/eventdaystart.html">$eventdaystart</a>]['startcourse'] = true;
<a name="l1380"><span class="linenum">1380</span></a>  <span class="comment">                // Set event class for course event</span>
<a name="l1381"><span class="linenum">1381</span></a>                  <a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a>[<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('id')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/id.html">id</a>]-&gt;class = 'calendar_event_course';
<a name="l1382"><span class="linenum">1382</span></a>              }
<a name="l1383"><span class="linenum">1383</span></a>              else if(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('groupid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/groupid.html">groupid</a>) {
<a name="l1384"><span class="linenum">1384</span></a>                  <a class="var it29839" onMouseOver="hilite(29839)" onMouseOut="lolite()" onClick="logVariable('typesbyday')" href="../_variables/typesbyday.html">$typesbyday</a>[<a class="var it39033" onMouseOver="hilite(39033)" onMouseOut="lolite()" onClick="logVariable('eventdaystart')" href="../_variables/eventdaystart.html">$eventdaystart</a>]['startgroup'] = true;
<a name="l1385"><span class="linenum">1385</span></a>  <span class="comment">                // Set event class for group event</span>
<a name="l1386"><span class="linenum">1386</span></a>                  <a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a>[<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('id')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/id.html">id</a>]-&gt;class = 'calendar_event_group';
<a name="l1387"><span class="linenum">1387</span></a>              }
<a name="l1388"><span class="linenum">1388</span></a>              else if(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('userid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>) {
<a name="l1389"><span class="linenum">1389</span></a>                  <a class="var it29839" onMouseOver="hilite(29839)" onMouseOut="lolite()" onClick="logVariable('typesbyday')" href="../_variables/typesbyday.html">$typesbyday</a>[<a class="var it39033" onMouseOver="hilite(39033)" onMouseOut="lolite()" onClick="logVariable('eventdaystart')" href="../_variables/eventdaystart.html">$eventdaystart</a>]['startuser'] = true;
<a name="l1390"><span class="linenum">1390</span></a>  <span class="comment">                // Set event class for user event</span>
<a name="l1391"><span class="linenum">1391</span></a>                  <a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a>[<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('id')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/id.html">id</a>]-&gt;class = 'calendar_event_user';
<a name="l1392"><span class="linenum">1392</span></a>              }
<a name="l1393"><span class="linenum">1393</span></a>          }
<a name="l1394"><span class="linenum">1394</span></a>  
<a name="l1395"><span class="linenum">1395</span></a>          if(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timeduration')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/timeduration.html">timeduration</a> == 0) {
<a name="l1396"><span class="linenum">1396</span></a>  <span class="comment">            // Proceed with the next</span>
<a name="l1397"><span class="linenum">1397</span></a>              continue;
<a name="l1398"><span class="linenum">1398</span></a>          }
<a name="l1399"><span class="linenum">1399</span></a>  
<a name="l1400"><span class="linenum">1400</span></a>  <span class="comment">        // The event starts on $month $year or before. So...</span>
<a name="l1401"><span class="linenum">1401</span></a>          <a class="var it39034" onMouseOver="hilite(39034)" onMouseOut="lolite()" onClick="logVariable('lowerbound')" href="../_variables/lowerbound.html">$lowerbound</a> = <a class="var it3592" onMouseOver="hilite(3592)" onMouseOut="lolite()" onClick="logVariable('startdate')" href="../_variables/startdate.html">$startdate</a>['mon'] == <a class="var it1761" onMouseOver="hilite(1761)" onMouseOut="lolite()" onClick="logVariable('month')" href="../_variables/month.html">$month</a> &amp;&amp; <a class="var it3592" onMouseOver="hilite(3592)" onMouseOut="lolite()" onClick="logVariable('startdate')" href="../_variables/startdate.html">$startdate</a>['year'] == <a class="var it1760" onMouseOver="hilite(1760)" onMouseOut="lolite()" onClick="logVariable('year')" href="../_variables/year.html">$year</a> ? <a class="phpfunction" onClick="logFunction('intval')" href="../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="var it3592" onMouseOver="hilite(3592)" onMouseOut="lolite()" onClick="logVariable('startdate')" href="../_variables/startdate.html">$startdate</a>['mday']) : 0;
<a name="l1402"><span class="linenum">1402</span></a>  
<a name="l1403"><span class="linenum">1403</span></a>  <span class="comment">        // Also, it ends on $month $year or later...</span>
<a name="l1404"><span class="linenum">1404</span></a>          <a class="var it39035" onMouseOver="hilite(39035)" onMouseOut="lolite()" onClick="logVariable('upperbound')" href="../_variables/upperbound.html">$upperbound</a> = <a class="var it35199" onMouseOver="hilite(35199)" onMouseOut="lolite()" onClick="logVariable('enddate')" href="../_variables/enddate.html">$enddate</a>['mon'] == <a class="var it1761" onMouseOver="hilite(1761)" onMouseOut="lolite()" onClick="logVariable('month')" href="../_variables/month.html">$month</a> &amp;&amp; <a class="var it35199" onMouseOver="hilite(35199)" onMouseOut="lolite()" onClick="logVariable('enddate')" href="../_variables/enddate.html">$enddate</a>['year'] == <a class="var it1760" onMouseOver="hilite(1760)" onMouseOut="lolite()" onClick="logVariable('year')" href="../_variables/year.html">$year</a> ? <a class="phpfunction" onClick="logFunction('intval')" href="../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="var it35199" onMouseOver="hilite(35199)" onMouseOut="lolite()" onClick="logVariable('enddate')" href="../_variables/enddate.html">$enddate</a>['mday']) : <a class="function" onClick="logFunction('calendar_days_in_month')" href="../_functions/calendar_days_in_month.html" onMouseOver="funcPopup(event,'calendar_days_in_month')">calendar_days_in_month</a>(<a class="var it1761" onMouseOver="hilite(1761)" onMouseOut="lolite()" onClick="logVariable('month')" href="../_variables/month.html">$month</a>, <a class="var it1760" onMouseOver="hilite(1760)" onMouseOut="lolite()" onClick="logVariable('year')" href="../_variables/year.html">$year</a>);
<a name="l1405"><span class="linenum">1405</span></a>  
<a name="l1406"><span class="linenum">1406</span></a>  <span class="comment">        // Mark all days between $lowerbound and $upperbound (inclusive) as duration</span>
<a name="l1407"><span class="linenum">1407</span></a>          for(<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> = <a class="var it39034" onMouseOver="hilite(39034)" onMouseOut="lolite()" onClick="logVariable('lowerbound')" href="../_variables/lowerbound.html">$lowerbound</a> + 1; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> &lt;= <a class="var it39035" onMouseOver="hilite(39035)" onMouseOut="lolite()" onClick="logVariable('upperbound')" href="../_variables/upperbound.html">$upperbound</a>; ++<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>) {
<a name="l1408"><span class="linenum">1408</span></a>              <a class="var it29838" onMouseOver="hilite(29838)" onMouseOut="lolite()" onClick="logVariable('durationbyday')" href="../_variables/durationbyday.html">$durationbyday</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>][] = <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('id')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1409"><span class="linenum">1409</span></a>              if(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('courseid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a> == <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a> &amp;&amp; <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('groupid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/groupid.html">groupid</a> == 0) {
<a name="l1410"><span class="linenum">1410</span></a>                  <a class="var it29839" onMouseOver="hilite(29839)" onMouseOut="lolite()" onClick="logVariable('typesbyday')" href="../_variables/typesbyday.html">$typesbyday</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>]['durationglobal'] = true;
<a name="l1411"><span class="linenum">1411</span></a>              }
<a name="l1412"><span class="linenum">1412</span></a>              else if(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('courseid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a> != 0 &amp;&amp; <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('courseid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a> != <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a> &amp;&amp; <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('groupid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/groupid.html">groupid</a> == 0) {
<a name="l1413"><span class="linenum">1413</span></a>                  <a class="var it29839" onMouseOver="hilite(29839)" onMouseOut="lolite()" onClick="logVariable('typesbyday')" href="../_variables/typesbyday.html">$typesbyday</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>]['durationcourse'] = true;
<a name="l1414"><span class="linenum">1414</span></a>              }
<a name="l1415"><span class="linenum">1415</span></a>              else if(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('groupid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/groupid.html">groupid</a>) {
<a name="l1416"><span class="linenum">1416</span></a>                  <a class="var it29839" onMouseOver="hilite(29839)" onMouseOut="lolite()" onClick="logVariable('typesbyday')" href="../_variables/typesbyday.html">$typesbyday</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>]['durationgroup'] = true;
<a name="l1417"><span class="linenum">1417</span></a>              }
<a name="l1418"><span class="linenum">1418</span></a>              else if(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('userid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>) {
<a name="l1419"><span class="linenum">1419</span></a>                  <a class="var it29839" onMouseOver="hilite(29839)" onMouseOut="lolite()" onClick="logVariable('typesbyday')" href="../_variables/typesbyday.html">$typesbyday</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>]['durationuser'] = true;
<a name="l1420"><span class="linenum">1420</span></a>              }
<a name="l1421"><span class="linenum">1421</span></a>          }
<a name="l1422"><span class="linenum">1422</span></a>  
<a name="l1423"><span class="linenum">1423</span></a>      }
<a name="l1424"><span class="linenum">1424</span></a>      return;
<a name="l1425"><span class="linenum">1425</span></a>  }
<a name="l1426"><span class="linenum">1426</span></a>  
<a name="l1427"><span class="linenum">1427</span></a>  <span class="comment">/**</span>
<a name="l1428"><span class="linenum">1428</span></a>  <span class="comment"> * Get current module cache</span>
<a name="l1429"><span class="linenum">1429</span></a>  <span class="comment"> *</span>
<a name="l1430"><span class="linenum">1430</span></a>  <span class="comment"> * @param array $coursecache list of course cache</span>
<a name="l1431"><span class="linenum">1431</span></a>  <span class="comment"> * @param string $modulename name of the module</span>
<a name="l1432"><span class="linenum">1432</span></a>  <span class="comment"> * @param int $instance module instance number</span>
<a name="l1433"><span class="linenum">1433</span></a>  <span class="comment"> * @return stdClass|bool $module information</span>
<a name="l1434"><span class="linenum">1434</span></a>  <span class="comment"> */</span>
<a name="l1435"><span class="linenum">1435</span></a>  function <a class="function" onClick="logFunction('calendar_get_module_cached')" href="../_functions/calendar_get_module_cached.html" onMouseOver="funcPopup(event,'calendar_get_module_cached')">calendar_get_module_cached</a>(&amp;<a class="var it15807" onMouseOver="hilite(15807)" onMouseOut="lolite()" onClick="logVariable('coursecache')" href="../_variables/coursecache.html">$coursecache</a>, <a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../_variables/modulename.html">$modulename</a>, <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>) {
<a name="l1436"><span class="linenum">1436</span></a>      <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>(<a class="var it2353" onMouseOver="hilite(2353)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../_variables/modulename.html">$modulename</a>, <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>);
<a name="l1437"><span class="linenum">1437</span></a>  
<a name="l1438"><span class="linenum">1438</span></a>      if(<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a> === false) return false;
<a name="l1439"><span class="linenum">1439</span></a>      if(!<a class="function" onClick="logFunction('calendar_get_course_cached')" href="../_functions/calendar_get_course_cached.html" onMouseOver="funcPopup(event,'calendar_get_course_cached')">calendar_get_course_cached</a>(<a class="var it15807" onMouseOver="hilite(15807)" onMouseOut="lolite()" onClick="logVariable('coursecache')" href="../_variables/coursecache.html">$coursecache</a>, <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('course')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../_variables/course.html">course</a>)) {
<a name="l1440"><span class="linenum">1440</span></a>          return false;
<a name="l1441"><span class="linenum">1441</span></a>      }
<a name="l1442"><span class="linenum">1442</span></a>      return <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>;
<a name="l1443"><span class="linenum">1443</span></a>  }
<a name="l1444"><span class="linenum">1444</span></a>  
<a name="l1445"><span class="linenum">1445</span></a>  <span class="comment">/**</span>
<a name="l1446"><span class="linenum">1446</span></a>  <span class="comment"> * Get current course cache</span>
<a name="l1447"><span class="linenum">1447</span></a>  <span class="comment"> *</span>
<a name="l1448"><span class="linenum">1448</span></a>  <span class="comment"> * @param array $coursecache list of course cache</span>
<a name="l1449"><span class="linenum">1449</span></a>  <span class="comment"> * @param int $courseid id of the course</span>
<a name="l1450"><span class="linenum">1450</span></a>  <span class="comment"> * @return stdClass $coursecache[$courseid] return the specific course cache</span>
<a name="l1451"><span class="linenum">1451</span></a>  <span class="comment"> */</span>
<a name="l1452"><span class="linenum">1452</span></a>  function <a class="function" onClick="logFunction('calendar_get_course_cached')" href="../_functions/calendar_get_course_cached.html" onMouseOver="funcPopup(event,'calendar_get_course_cached')">calendar_get_course_cached</a>(&amp;<a class="var it15807" onMouseOver="hilite(15807)" onMouseOut="lolite()" onClick="logVariable('coursecache')" href="../_variables/coursecache.html">$coursecache</a>, <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>) {
<a name="l1453"><span class="linenum">1453</span></a>      if (!isset(<a class="var it15807" onMouseOver="hilite(15807)" onMouseOut="lolite()" onClick="logVariable('coursecache')" href="../_variables/coursecache.html">$coursecache</a>[<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>])) {
<a name="l1454"><span class="linenum">1454</span></a>          <a class="var it15807" onMouseOver="hilite(15807)" onMouseOut="lolite()" onClick="logVariable('coursecache')" href="../_variables/coursecache.html">$coursecache</a>[<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>] = <a class="function" onClick="logFunction('get_course')" href="../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l1455"><span class="linenum">1455</span></a>      }
<a name="l1456"><span class="linenum">1456</span></a>      return <a class="var it15807" onMouseOver="hilite(15807)" onMouseOut="lolite()" onClick="logVariable('coursecache')" href="../_variables/coursecache.html">$coursecache</a>[<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>];
<a name="l1457"><span class="linenum">1457</span></a>  }
<a name="l1458"><span class="linenum">1458</span></a>  
<a name="l1459"><span class="linenum">1459</span></a>  <span class="comment">/**</span>
<a name="l1460"><span class="linenum">1460</span></a>  <span class="comment"> * Get group from groupid for calendar display</span>
<a name="l1461"><span class="linenum">1461</span></a>  <span class="comment"> *</span>
<a name="l1462"><span class="linenum">1462</span></a>  <span class="comment"> * @param int $groupid</span>
<a name="l1463"><span class="linenum">1463</span></a>  <span class="comment"> * @return stdClass group object with fields 'id', 'name' and 'courseid'</span>
<a name="l1464"><span class="linenum">1464</span></a>  <span class="comment"> */</span>
<a name="l1465"><span class="linenum">1465</span></a>  function <a class="function" onClick="logFunction('calendar_get_group_cached')" href="../_functions/calendar_get_group_cached.html" onMouseOver="funcPopup(event,'calendar_get_group_cached')">calendar_get_group_cached</a>(<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>) {
<a name="l1466"><span class="linenum">1466</span></a>      static <a class="var it39036" onMouseOver="hilite(39036)" onMouseOut="lolite()" onClick="logVariable('groupscache')" href="../_variables/groupscache.html">$groupscache</a> = array();
<a name="l1467"><span class="linenum">1467</span></a>      if (!isset(<a class="var it39036" onMouseOver="hilite(39036)" onMouseOut="lolite()" onClick="logVariable('groupscache')" href="../_variables/groupscache.html">$groupscache</a>[<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>])) {
<a name="l1468"><span class="linenum">1468</span></a>          <a class="var it39036" onMouseOver="hilite(39036)" onMouseOut="lolite()" onClick="logVariable('groupscache')" href="../_variables/groupscache.html">$groupscache</a>[<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>] = <a class="function" onClick="logFunction('groups_get_group')" href="../_functions/groups_get_group.html" onMouseOver="funcPopup(event,'groups_get_group')">groups_get_group</a>(<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>, 'id,name,courseid');
<a name="l1469"><span class="linenum">1469</span></a>      }
<a name="l1470"><span class="linenum">1470</span></a>      return <a class="var it39036" onMouseOver="hilite(39036)" onMouseOut="lolite()" onClick="logVariable('groupscache')" href="../_variables/groupscache.html">$groupscache</a>[<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>];
<a name="l1471"><span class="linenum">1471</span></a>  }
<a name="l1472"><span class="linenum">1472</span></a>  
<a name="l1473"><span class="linenum">1473</span></a>  <span class="comment">/**</span>
<a name="l1474"><span class="linenum">1474</span></a>  <span class="comment"> * Returns the courses to load events for, the</span>
<a name="l1475"><span class="linenum">1475</span></a>  <span class="comment"> *</span>
<a name="l1476"><span class="linenum">1476</span></a>  <span class="comment"> * @param array $courseeventsfrom An array of courses to load calendar events for</span>
<a name="l1477"><span class="linenum">1477</span></a>  <span class="comment"> * @param bool $ignorefilters specify the use of filters, false is set as default</span>
<a name="l1478"><span class="linenum">1478</span></a>  <span class="comment"> * @return array An array of courses, groups, and user to load calendar events for based upon filters</span>
<a name="l1479"><span class="linenum">1479</span></a>  <span class="comment"> */</span>
<a name="l1480"><span class="linenum">1480</span></a>  function <a class="function" onClick="logFunction('calendar_set_filters')" href="../_functions/calendar_set_filters.html" onMouseOver="funcPopup(event,'calendar_set_filters')">calendar_set_filters</a>(array <a class="var it39037" onMouseOver="hilite(39037)" onMouseOut="lolite()" onClick="logVariable('courseeventsfrom')" href="../_variables/courseeventsfrom.html">$courseeventsfrom</a>, <a class="var it39038" onMouseOver="hilite(39038)" onMouseOut="lolite()" onClick="logVariable('ignorefilters')" href="../_variables/ignorefilters.html">$ignorefilters</a> = false) {
<a name="l1481"><span class="linenum">1481</span></a>      global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1482"><span class="linenum">1482</span></a>  
<a name="l1483"><span class="linenum">1483</span></a>  <span class="comment">    // For backwards compatability we have to check whether the courses array contains</span>
<a name="l1484"><span class="linenum">1484</span></a>  <span class="comment">    // just id's in which case we need to load course objects.</span>
<a name="l1485"><span class="linenum">1485</span></a>      <a class="var it39039" onMouseOver="hilite(39039)" onMouseOut="lolite()" onClick="logVariable('coursestoload')" href="../_variables/coursestoload.html">$coursestoload</a> = array();
<a name="l1486"><span class="linenum">1486</span></a>      foreach (<a class="var it39037" onMouseOver="hilite(39037)" onMouseOut="lolite()" onClick="logVariable('courseeventsfrom')" href="../_variables/courseeventsfrom.html">$courseeventsfrom</a> as <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a> =&gt; <a class="var it12187" onMouseOver="hilite(12187)" onMouseOut="lolite()" onClick="logVariable('something')" href="../_variables/something.html">$something</a>) {
<a name="l1487"><span class="linenum">1487</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it12187" onMouseOver="hilite(12187)" onMouseOut="lolite()" onClick="logVariable('something')" href="../_variables/something.html">$something</a>)) {
<a name="l1488"><span class="linenum">1488</span></a>              <a class="var it39039" onMouseOver="hilite(39039)" onMouseOut="lolite()" onClick="logVariable('coursestoload')" href="../_variables/coursestoload.html">$coursestoload</a>[] = <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>;
<a name="l1489"><span class="linenum">1489</span></a>              unset(<a class="var it39037" onMouseOver="hilite(39037)" onMouseOut="lolite()" onClick="logVariable('courseeventsfrom')" href="../_variables/courseeventsfrom.html">$courseeventsfrom</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>]);
<a name="l1490"><span class="linenum">1490</span></a>          }
<a name="l1491"><span class="linenum">1491</span></a>      }
<a name="l1492"><span class="linenum">1492</span></a>      if (!empty(<a class="var it39039" onMouseOver="hilite(39039)" onMouseOut="lolite()" onClick="logVariable('coursestoload')" href="../_variables/coursestoload.html">$coursestoload</a>)) {
<a name="l1493"><span class="linenum">1493</span></a>  <span class="comment">        // TODO remove this in 2.2</span>
<a name="l1494"><span class="linenum">1494</span></a>          <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('calendar_set_filters now preferes an array of course objects with preloaded contexts', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l1495"><span class="linenum">1495</span></a>          <a class="var it39037" onMouseOver="hilite(39037)" onMouseOut="lolite()" onClick="logVariable('courseeventsfrom')" href="../_variables/courseeventsfrom.html">$courseeventsfrom</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it39037" onMouseOver="hilite(39037)" onMouseOut="lolite()" onClick="logVariable('courseeventsfrom')" href="../_variables/courseeventsfrom.html">$courseeventsfrom</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_list')" href="../_functions/get_records_list.html" onMouseOver="funcPopup(event,'get_records_list')">get_records_list</a>('course', 'id', <a class="var it39039" onMouseOver="hilite(39039)" onMouseOut="lolite()" onClick="logVariable('coursestoload')" href="../_variables/coursestoload.html">$coursestoload</a>));
<a name="l1496"><span class="linenum">1496</span></a>      }
<a name="l1497"><span class="linenum">1497</span></a>  
<a name="l1498"><span class="linenum">1498</span></a>      <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> = array();
<a name="l1499"><span class="linenum">1499</span></a>      <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a> = false;
<a name="l1500"><span class="linenum">1500</span></a>      <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a> = false;
<a name="l1501"><span class="linenum">1501</span></a>  
<a name="l1502"><span class="linenum">1502</span></a>  <span class="comment">    // capabilities that allow seeing group events from all groups</span>
<a name="l1503"><span class="linenum">1503</span></a>  <span class="comment">    // TODO: rewrite so that moodle/calendar:manageentries is not necessary here</span>
<a name="l1504"><span class="linenum">1504</span></a>      <a class="var it39040" onMouseOver="hilite(39040)" onMouseOut="lolite()" onClick="logVariable('allgroupscaps')" href="../_variables/allgroupscaps.html">$allgroupscaps</a> = array('moodle/site:accessallgroups', 'moodle/calendar:manageentries');
<a name="l1505"><span class="linenum">1505</span></a>  
<a name="l1506"><span class="linenum">1506</span></a>      <a class="var it16024" onMouseOver="hilite(16024)" onMouseOut="lolite()" onClick="logVariable('isloggedin')" href="../_variables/isloggedin.html">$isloggedin</a> = <a class="function" onClick="logFunction('isloggedin')" href="../_functions/isloggedin.html" onMouseOver="funcPopup(event,'isloggedin')">isloggedin</a>();
<a name="l1507"><span class="linenum">1507</span></a>  
<a name="l1508"><span class="linenum">1508</span></a>      if (<a class="var it39038" onMouseOver="hilite(39038)" onMouseOut="lolite()" onClick="logVariable('ignorefilters')" href="../_variables/ignorefilters.html">$ignorefilters</a> || <a class="function" onClick="logFunction('calendar_show_event_type')" href="../_functions/calendar_show_event_type.html" onMouseOver="funcPopup(event,'calendar_show_event_type')">calendar_show_event_type</a>(<a class="constant" onClick="logConstant('CALENDAR_EVENT_COURSE')" href="../_constants/CALENDAR_EVENT_COURSE.html" onMouseOver="constPopup(event,'CALENDAR_EVENT_COURSE')">CALENDAR_EVENT_COURSE</a>)) {
<a name="l1509"><span class="linenum">1509</span></a>          <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it39037" onMouseOver="hilite(39037)" onMouseOut="lolite()" onClick="logVariable('courseeventsfrom')" href="../_variables/courseeventsfrom.html">$courseeventsfrom</a>);
<a name="l1510"><span class="linenum">1510</span></a>      }
<a name="l1511"><span class="linenum">1511</span></a>      if (<a class="var it39038" onMouseOver="hilite(39038)" onMouseOut="lolite()" onClick="logVariable('ignorefilters')" href="../_variables/ignorefilters.html">$ignorefilters</a> || <a class="function" onClick="logFunction('calendar_show_event_type')" href="../_functions/calendar_show_event_type.html" onMouseOver="funcPopup(event,'calendar_show_event_type')">calendar_show_event_type</a>(<a class="constant" onClick="logConstant('CALENDAR_EVENT_GLOBAL')" href="../_constants/CALENDAR_EVENT_GLOBAL.html" onMouseOver="constPopup(event,'CALENDAR_EVENT_GLOBAL')">CALENDAR_EVENT_GLOBAL</a>)) {
<a name="l1512"><span class="linenum">1512</span></a>          <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[] = <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>;
<a name="l1513"><span class="linenum">1513</span></a>      }
<a name="l1514"><span class="linenum">1514</span></a>      <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> = <a class="phpfunction" onClick="logFunction('array_unique')" href="../_functions/array_unique.html" onMouseOver="phpfuncPopup(event,'array_unique')">array_unique</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>);
<a name="l1515"><span class="linenum">1515</span></a>      <a class="phpfunction" onClick="logFunction('sort')" href="../_functions/sort.html" onMouseOver="phpfuncPopup(event,'sort')">sort</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>);
<a name="l1516"><span class="linenum">1516</span></a>  
<a name="l1517"><span class="linenum">1517</span></a>      if (!empty(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>, <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>)) {
<a name="l1518"><span class="linenum">1518</span></a>  <span class="comment">        // Sort courses for consistent colour highlighting</span>
<a name="l1519"><span class="linenum">1519</span></a>  <span class="comment">        // Effectively ignoring SITEID as setting as last course id</span>
<a name="l1520"><span class="linenum">1520</span></a>          <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> = <a class="phpfunction" onClick="logFunction('array_search')" href="../_functions/array_search.html" onMouseOver="phpfuncPopup(event,'array_search')">array_search</a>(<a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>, <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>);
<a name="l1521"><span class="linenum">1521</span></a>          unset(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>]);
<a name="l1522"><span class="linenum">1522</span></a>          <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[] = <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>;
<a name="l1523"><span class="linenum">1523</span></a>      }
<a name="l1524"><span class="linenum">1524</span></a>  
<a name="l1525"><span class="linenum">1525</span></a>      if (<a class="var it39038" onMouseOver="hilite(39038)" onMouseOut="lolite()" onClick="logVariable('ignorefilters')" href="../_variables/ignorefilters.html">$ignorefilters</a> || (<a class="var it16024" onMouseOver="hilite(16024)" onMouseOut="lolite()" onClick="logVariable('isloggedin')" href="../_variables/isloggedin.html">$isloggedin</a> &amp;&amp; <a class="function" onClick="logFunction('calendar_show_event_type')" href="../_functions/calendar_show_event_type.html" onMouseOver="funcPopup(event,'calendar_show_event_type')">calendar_show_event_type</a>(<a class="constant" onClick="logConstant('CALENDAR_EVENT_USER')" href="../_constants/CALENDAR_EVENT_USER.html" onMouseOver="constPopup(event,'CALENDAR_EVENT_USER')">CALENDAR_EVENT_USER</a>))) {
<a name="l1526"><span class="linenum">1526</span></a>          <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a> = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1527"><span class="linenum">1527</span></a>      }
<a name="l1528"><span class="linenum">1528</span></a>  
<a name="l1529"><span class="linenum">1529</span></a>      if (!empty(<a class="var it39037" onMouseOver="hilite(39037)" onMouseOut="lolite()" onClick="logVariable('courseeventsfrom')" href="../_variables/courseeventsfrom.html">$courseeventsfrom</a>) &amp;&amp; (<a class="function" onClick="logFunction('calendar_show_event_type')" href="../_functions/calendar_show_event_type.html" onMouseOver="funcPopup(event,'calendar_show_event_type')">calendar_show_event_type</a>(<a class="constant" onClick="logConstant('CALENDAR_EVENT_GROUP')" href="../_constants/CALENDAR_EVENT_GROUP.html" onMouseOver="constPopup(event,'CALENDAR_EVENT_GROUP')">CALENDAR_EVENT_GROUP</a>) || <a class="var it39038" onMouseOver="hilite(39038)" onMouseOut="lolite()" onClick="logVariable('ignorefilters')" href="../_variables/ignorefilters.html">$ignorefilters</a>)) {
<a name="l1530"><span class="linenum">1530</span></a>  
<a name="l1531"><span class="linenum">1531</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it39037" onMouseOver="hilite(39037)" onMouseOut="lolite()" onClick="logVariable('courseeventsfrom')" href="../_variables/courseeventsfrom.html">$courseeventsfrom</a>)==1) {
<a name="l1532"><span class="linenum">1532</span></a>              <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it39037" onMouseOver="hilite(39037)" onMouseOut="lolite()" onClick="logVariable('courseeventsfrom')" href="../_variables/courseeventsfrom.html">$courseeventsfrom</a>);
<a name="l1533"><span class="linenum">1533</span></a>              if (<a class="function" onClick="logFunction('has_any_capability')" href="../_functions/has_any_capability.html" onMouseOver="funcPopup(event,'has_any_capability')">has_any_capability</a>(<a class="var it39040" onMouseOver="hilite(39040)" onMouseOut="lolite()" onClick="logVariable('allgroupscaps')" href="../_variables/allgroupscaps.html">$allgroupscaps</a>, <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>))) {
<a name="l1534"><span class="linenum">1534</span></a>                  <a class="var it15295" onMouseOver="hilite(15295)" onMouseOut="lolite()" onClick="logVariable('coursegroups')" href="../_variables/coursegroups.html">$coursegroups</a> = <a class="function" onClick="logFunction('groups_get_all_groups')" href="../_functions/groups_get_all_groups.html" onMouseOver="funcPopup(event,'groups_get_all_groups')">groups_get_all_groups</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 0, 0, 'g.id');
<a name="l1535"><span class="linenum">1535</span></a>                  <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it15295" onMouseOver="hilite(15295)" onMouseOut="lolite()" onClick="logVariable('coursegroups')" href="../_variables/coursegroups.html">$coursegroups</a>);
<a name="l1536"><span class="linenum">1536</span></a>              }
<a name="l1537"><span class="linenum">1537</span></a>          }
<a name="l1538"><span class="linenum">1538</span></a>          if (<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a> === false) {
<a name="l1539"><span class="linenum">1539</span></a>              if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('calendar_adminseesall')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/calendar_adminseesall.html">calendar_adminseesall</a>) &amp;&amp; <a class="function" onClick="logFunction('has_any_capability')" href="../_functions/has_any_capability.html" onMouseOver="funcPopup(event,'has_any_capability')">has_any_capability</a>(<a class="var it39040" onMouseOver="hilite(39040)" onMouseOut="lolite()" onClick="logVariable('allgroupscaps')" href="../_variables/allgroupscaps.html">$allgroupscaps</a>, <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>())) {
<a name="l1540"><span class="linenum">1540</span></a>                  <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a> = true;
<a name="l1541"><span class="linenum">1541</span></a>              } else if (<a class="var it16024" onMouseOver="hilite(16024)" onMouseOut="lolite()" onClick="logVariable('isloggedin')" href="../_variables/isloggedin.html">$isloggedin</a>) {
<a name="l1542"><span class="linenum">1542</span></a>                  <a class="var it1979" onMouseOver="hilite(1979)" onMouseOut="lolite()" onClick="logVariable('groupids')" href="../_variables/groupids.html">$groupids</a> = array();
<a name="l1543"><span class="linenum">1543</span></a>  
<a name="l1544"><span class="linenum">1544</span></a>  <span class="comment">                // We already have the courses to examine in $courses</span>
<a name="l1545"><span class="linenum">1545</span></a>  <span class="comment">                // For each course...</span>
<a name="l1546"><span class="linenum">1546</span></a>                  foreach (<a class="var it39037" onMouseOver="hilite(39037)" onMouseOut="lolite()" onClick="logVariable('courseeventsfrom')" href="../_variables/courseeventsfrom.html">$courseeventsfrom</a> as <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a> =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) {
<a name="l1547"><span class="linenum">1547</span></a>  <span class="comment">                    // If the user is an editing teacher in there,</span>
<a name="l1548"><span class="linenum">1548</span></a>                      if (!empty(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('groupmember')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/groupmember.html">groupmember</a>[<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>])) {
<a name="l1549"><span class="linenum">1549</span></a>  <span class="comment">                        // We've already cached the users groups for this course so we can just use that</span>
<a name="l1550"><span class="linenum">1550</span></a>                          <a class="var it1979" onMouseOver="hilite(1979)" onMouseOut="lolite()" onClick="logVariable('groupids')" href="../_variables/groupids.html">$groupids</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it1979" onMouseOver="hilite(1979)" onMouseOut="lolite()" onClick="logVariable('groupids')" href="../_variables/groupids.html">$groupids</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('groupmember')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/groupmember.html">groupmember</a>[<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>]);
<a name="l1551"><span class="linenum">1551</span></a>                      } else if (<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('groupmode')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/groupmode.html">groupmode</a> != <a class="constant" onClick="logConstant('NOGROUPS')" href="../_constants/NOGROUPS.html" onMouseOver="constPopup(event,'NOGROUPS')">NOGROUPS</a> || !<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('groupmodeforce')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/groupmodeforce.html">groupmodeforce</a>) {
<a name="l1552"><span class="linenum">1552</span></a>  <span class="comment">                        // If this course has groups, show events from all of those related to the current user</span>
<a name="l1553"><span class="linenum">1553</span></a>                          <a class="var it15295" onMouseOver="hilite(15295)" onMouseOut="lolite()" onClick="logVariable('coursegroups')" href="../_variables/coursegroups.html">$coursegroups</a> = <a class="function" onClick="logFunction('groups_get_user_groups')" href="../_functions/groups_get_user_groups.html" onMouseOver="funcPopup(event,'groups_get_user_groups')">groups_get_user_groups</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1554"><span class="linenum">1554</span></a>                          <a class="var it1979" onMouseOver="hilite(1979)" onMouseOut="lolite()" onClick="logVariable('groupids')" href="../_variables/groupids.html">$groupids</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it1979" onMouseOver="hilite(1979)" onMouseOut="lolite()" onClick="logVariable('groupids')" href="../_variables/groupids.html">$groupids</a>, <a class="var it15295" onMouseOver="hilite(15295)" onMouseOut="lolite()" onClick="logVariable('coursegroups')" href="../_variables/coursegroups.html">$coursegroups</a>['0']);
<a name="l1555"><span class="linenum">1555</span></a>                      }
<a name="l1556"><span class="linenum">1556</span></a>                  }
<a name="l1557"><span class="linenum">1557</span></a>                  if (!empty(<a class="var it1979" onMouseOver="hilite(1979)" onMouseOut="lolite()" onClick="logVariable('groupids')" href="../_variables/groupids.html">$groupids</a>)) {
<a name="l1558"><span class="linenum">1558</span></a>                      <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a> = <a class="var it1979" onMouseOver="hilite(1979)" onMouseOut="lolite()" onClick="logVariable('groupids')" href="../_variables/groupids.html">$groupids</a>;
<a name="l1559"><span class="linenum">1559</span></a>                  }
<a name="l1560"><span class="linenum">1560</span></a>              }
<a name="l1561"><span class="linenum">1561</span></a>          }
<a name="l1562"><span class="linenum">1562</span></a>      }
<a name="l1563"><span class="linenum">1563</span></a>      if (empty(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>)) {
<a name="l1564"><span class="linenum">1564</span></a>          <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> = false;
<a name="l1565"><span class="linenum">1565</span></a>      }
<a name="l1566"><span class="linenum">1566</span></a>  
<a name="l1567"><span class="linenum">1567</span></a>      return array(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>, <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>);
<a name="l1568"><span class="linenum">1568</span></a>  }
<a name="l1569"><span class="linenum">1569</span></a>  
<a name="l1570"><span class="linenum">1570</span></a>  <span class="comment">/**</span>
<a name="l1571"><span class="linenum">1571</span></a>  <span class="comment"> * Return the capability for editing calendar event</span>
<a name="l1572"><span class="linenum">1572</span></a>  <span class="comment"> *</span>
<a name="l1573"><span class="linenum">1573</span></a>  <span class="comment"> * @param calendar_event $event event object</span>
<a name="l1574"><span class="linenum">1574</span></a>  <span class="comment"> * @return bool capability to edit event</span>
<a name="l1575"><span class="linenum">1575</span></a>  <span class="comment"> */</span>
<a name="l1576"><span class="linenum">1576</span></a>  function <a class="function" onClick="logFunction('calendar_edit_event_allowed')" href="../_functions/calendar_edit_event_allowed.html" onMouseOver="funcPopup(event,'calendar_edit_event_allowed')">calendar_edit_event_allowed</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>) {
<a name="l1577"><span class="linenum">1577</span></a>      global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1578"><span class="linenum">1578</span></a>  
<a name="l1579"><span class="linenum">1579</span></a>  <span class="comment">    // Must be logged in</span>
<a name="l1580"><span class="linenum">1580</span></a>      if (!<a class="function" onClick="logFunction('isloggedin')" href="../_functions/isloggedin.html" onMouseOver="funcPopup(event,'isloggedin')">isloggedin</a>()) {
<a name="l1581"><span class="linenum">1581</span></a>          return false;
<a name="l1582"><span class="linenum">1582</span></a>      }
<a name="l1583"><span class="linenum">1583</span></a>  
<a name="l1584"><span class="linenum">1584</span></a>  <span class="comment">    // can not be using guest account</span>
<a name="l1585"><span class="linenum">1585</span></a>      if (<a class="function" onClick="logFunction('isguestuser')" href="../_functions/isguestuser.html" onMouseOver="funcPopup(event,'isguestuser')">isguestuser</a>()) {
<a name="l1586"><span class="linenum">1586</span></a>          return false;
<a name="l1587"><span class="linenum">1587</span></a>      }
<a name="l1588"><span class="linenum">1588</span></a>  
<a name="l1589"><span class="linenum">1589</span></a>  <span class="comment">    // You cannot edit calendar subscription events presently.</span>
<a name="l1590"><span class="linenum">1590</span></a>      if (!empty(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('subscriptionid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/subscriptionid.html">subscriptionid</a>)) {
<a name="l1591"><span class="linenum">1591</span></a>          return false;
<a name="l1592"><span class="linenum">1592</span></a>      }
<a name="l1593"><span class="linenum">1593</span></a>  
<a name="l1594"><span class="linenum">1594</span></a>      <a class="var it2136" onMouseOver="hilite(2136)" onMouseOut="lolite()" onClick="logVariable('sitecontext')" href="../_variables/sitecontext.html">$sitecontext</a> = <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l1595"><span class="linenum">1595</span></a>  <span class="comment">    // if user has manageentries at site level, return true</span>
<a name="l1596"><span class="linenum">1596</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/calendar:manageentries', <a class="var it2136" onMouseOver="hilite(2136)" onMouseOut="lolite()" onClick="logVariable('sitecontext')" href="../_variables/sitecontext.html">$sitecontext</a>)) {
<a name="l1597"><span class="linenum">1597</span></a>          return true;
<a name="l1598"><span class="linenum">1598</span></a>      }
<a name="l1599"><span class="linenum">1599</span></a>  
<a name="l1600"><span class="linenum">1600</span></a>  <span class="comment">    // if groupid is set, it's definitely a group event</span>
<a name="l1601"><span class="linenum">1601</span></a>      if (!empty(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('groupid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/groupid.html">groupid</a>)) {
<a name="l1602"><span class="linenum">1602</span></a>  <span class="comment">        // Allow users to add/edit group events if:</span>
<a name="l1603"><span class="linenum">1603</span></a>  <span class="comment">        // 1) They have manageentries (= entries for whole course)</span>
<a name="l1604"><span class="linenum">1604</span></a>  <span class="comment">        // 2) They have managegroupentries AND are in the group</span>
<a name="l1605"><span class="linenum">1605</span></a>          <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('groups', array('id'=&gt;<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('groupid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/groupid.html">groupid</a>));
<a name="l1606"><span class="linenum">1606</span></a>          return <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a> &amp;&amp; (
<a name="l1607"><span class="linenum">1607</span></a>              <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/calendar:manageentries', <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('context')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/context.html">context</a>) ||
<a name="l1608"><span class="linenum">1608</span></a>              (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/calendar:managegroupentries', <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('context')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/context.html">context</a>)
<a name="l1609"><span class="linenum">1609</span></a>                  &amp;&amp; <a class="function" onClick="logFunction('groups_is_member')" href="../_functions/groups_is_member.html" onMouseOver="funcPopup(event,'groups_is_member')">groups_is_member</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('groupid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/groupid.html">groupid</a>)));
<a name="l1610"><span class="linenum">1610</span></a>      } else if (!empty(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('courseid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>)) {
<a name="l1611"><span class="linenum">1611</span></a>  <span class="comment">    // if groupid is not set, but course is set,</span>
<a name="l1612"><span class="linenum">1612</span></a>  <span class="comment">    // it's definiely a course event</span>
<a name="l1613"><span class="linenum">1613</span></a>          return <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/calendar:manageentries', <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('context')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/context.html">context</a>);
<a name="l1614"><span class="linenum">1614</span></a>      } else if (!empty(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('userid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>) &amp;&amp; <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('userid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a> == <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l1615"><span class="linenum">1615</span></a>  <span class="comment">    // if course is not set, but userid id set, it's a user event</span>
<a name="l1616"><span class="linenum">1616</span></a>          return (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/calendar:manageownentries', <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('context')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/context.html">context</a>));
<a name="l1617"><span class="linenum">1617</span></a>      } else if (!empty(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('userid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>)) {
<a name="l1618"><span class="linenum">1618</span></a>          return (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/calendar:manageentries', <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('context')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/context.html">context</a>));
<a name="l1619"><span class="linenum">1619</span></a>      }
<a name="l1620"><span class="linenum">1620</span></a>      return false;
<a name="l1621"><span class="linenum">1621</span></a>  }
<a name="l1622"><span class="linenum">1622</span></a>  
<a name="l1623"><span class="linenum">1623</span></a>  <span class="comment">/**</span>
<a name="l1624"><span class="linenum">1624</span></a>  <span class="comment"> * Returns the default courses to display on the calendar when there isn't a specific</span>
<a name="l1625"><span class="linenum">1625</span></a>  <span class="comment"> * course to display.</span>
<a name="l1626"><span class="linenum">1626</span></a>  <span class="comment"> *</span>
<a name="l1627"><span class="linenum">1627</span></a>  <span class="comment"> * @return array $courses Array of courses to display</span>
<a name="l1628"><span class="linenum">1628</span></a>  <span class="comment"> */</span>
<a name="l1629"><span class="linenum">1629</span></a>  function <a class="function" onClick="logFunction('calendar_get_default_courses')" href="../_functions/calendar_get_default_courses.html" onMouseOver="funcPopup(event,'calendar_get_default_courses')">calendar_get_default_courses</a>() {
<a name="l1630"><span class="linenum">1630</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1631"><span class="linenum">1631</span></a>  
<a name="l1632"><span class="linenum">1632</span></a>      if (!<a class="function" onClick="logFunction('isloggedin')" href="../_functions/isloggedin.html" onMouseOver="funcPopup(event,'isloggedin')">isloggedin</a>()) {
<a name="l1633"><span class="linenum">1633</span></a>          return array();
<a name="l1634"><span class="linenum">1634</span></a>      }
<a name="l1635"><span class="linenum">1635</span></a>  
<a name="l1636"><span class="linenum">1636</span></a>      <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> = array();
<a name="l1637"><span class="linenum">1637</span></a>      if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('calendar_adminseesall')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/calendar_adminseesall.html">calendar_adminseesall</a>) &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/calendar:manageentries', <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>())) {
<a name="l1638"><span class="linenum">1638</span></a>          <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('select')" href="../_variables/select.html">$select</a> = ', ' . <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('get_preload_record_columns_sql')" href="../_functions/get_preload_record_columns_sql.html" onMouseOver="funcPopup(event,'get_preload_record_columns_sql')">get_preload_record_columns_sql</a>('ctx');
<a name="l1639"><span class="linenum">1639</span></a>          <a class="var it11538" onMouseOver="hilite(11538)" onMouseOut="lolite()" onClick="logVariable('join')" href="../_variables/join.html">$join</a> = &quot;LEFT JOIN {context} ctx <a class="function" onClick="logFunction('ON')" href="../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (ctx.instanceid = c.id AND ctx.contextlevel = :contextlevel)&quot;;
<a name="l1640"><span class="linenum">1640</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT c.* <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('select')" href="../_variables/select.html">$select</a>
<a name="l1641"><span class="linenum">1641</span></a>                    FROM {course} c
<a name="l1642"><span class="linenum">1642</span></a>                    <a class="var it11538" onMouseOver="hilite(11538)" onMouseOut="lolite()" onClick="logVariable('join')" href="../_variables/join.html">$join</a>
<a name="l1643"><span class="linenum">1643</span></a>                    WHERE <a class="function" onClick="logFunction('EXISTS')" href="../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">EXISTS</a> (SELECT 1 FROM {event} e WHERE e.courseid = c.id)
<a name="l1644"><span class="linenum">1644</span></a>                    &quot;;
<a name="l1645"><span class="linenum">1645</span></a>          <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, array('contextlevel' =&gt; <a class="constant" onClick="logConstant('CONTEXT_COURSE')" href="../_constants/CONTEXT_COURSE.html" onMouseOver="constPopup(event,'CONTEXT_COURSE')">CONTEXT_COURSE</a>), 0, 20);
<a name="l1646"><span class="linenum">1646</span></a>          foreach (<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> as <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) {
<a name="l1647"><span class="linenum">1647</span></a>              <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('preload_from_record')" href="../_functions/preload_from_record.html" onMouseOver="funcPopup(event,'preload_from_record')">preload_from_record</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l1648"><span class="linenum">1648</span></a>          }
<a name="l1649"><span class="linenum">1649</span></a>          return <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>;
<a name="l1650"><span class="linenum">1650</span></a>      }
<a name="l1651"><span class="linenum">1651</span></a>  
<a name="l1652"><span class="linenum">1652</span></a>      <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> = <a class="function" onClick="logFunction('enrol_get_my_courses')" href="../_functions/enrol_get_my_courses.html" onMouseOver="funcPopup(event,'enrol_get_my_courses')">enrol_get_my_courses</a>();
<a name="l1653"><span class="linenum">1653</span></a>  
<a name="l1654"><span class="linenum">1654</span></a>      return <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>;
<a name="l1655"><span class="linenum">1655</span></a>  }
<a name="l1656"><span class="linenum">1656</span></a>  
<a name="l1657"><span class="linenum">1657</span></a>  <span class="comment">/**</span>
<a name="l1658"><span class="linenum">1658</span></a>  <span class="comment"> * Display calendar preference button</span>
<a name="l1659"><span class="linenum">1659</span></a>  <span class="comment"> *</span>
<a name="l1660"><span class="linenum">1660</span></a>  <span class="comment"> * @param stdClass $course course object</span>
<a name="l1661"><span class="linenum">1661</span></a>  <span class="comment"> * @return string return preference button in html</span>
<a name="l1662"><span class="linenum">1662</span></a>  <span class="comment"> */</span>
<a name="l1663"><span class="linenum">1663</span></a>  function <a class="function" onClick="logFunction('calendar_preferences_button')" href="../_functions/calendar_preferences_button.html" onMouseOver="funcPopup(event,'calendar_preferences_button')">calendar_preferences_button</a>(stdClass <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) {
<a name="l1664"><span class="linenum">1664</span></a>      global <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1665"><span class="linenum">1665</span></a>  
<a name="l1666"><span class="linenum">1666</span></a>  <span class="comment">    // Guests have no preferences</span>
<a name="l1667"><span class="linenum">1667</span></a>      if (!<a class="function" onClick="logFunction('isloggedin')" href="../_functions/isloggedin.html" onMouseOver="funcPopup(event,'isloggedin')">isloggedin</a>() || <a class="function" onClick="logFunction('isguestuser')" href="../_functions/isguestuser.html" onMouseOver="funcPopup(event,'isguestuser')">isguestuser</a>()) {
<a name="l1668"><span class="linenum">1668</span></a>          return '';
<a name="l1669"><span class="linenum">1669</span></a>      }
<a name="l1670"><span class="linenum">1670</span></a>  
<a name="l1671"><span class="linenum">1671</span></a>      return <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('single_button')" href="../_functions/single_button.html" onMouseOver="funcPopup(event,'single_button')">single_button</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../calendar/preferences.php.html">/calendar/preferences.php</a>', array('course' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)), <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;preferences&quot;, &quot;calendar&quot;));
<a name="l1672"><span class="linenum">1672</span></a>  }
<a name="l1673"><span class="linenum">1673</span></a>  
<a name="l1674"><span class="linenum">1674</span></a>  <span class="comment">/**</span>
<a name="l1675"><span class="linenum">1675</span></a>  <span class="comment"> * Get event format time</span>
<a name="l1676"><span class="linenum">1676</span></a>  <span class="comment"> *</span>
<a name="l1677"><span class="linenum">1677</span></a>  <span class="comment"> * @param calendar_event $event event object</span>
<a name="l1678"><span class="linenum">1678</span></a>  <span class="comment"> * @param int $now current time in gmt</span>
<a name="l1679"><span class="linenum">1679</span></a>  <span class="comment"> * @param array $linkparams list of params for event link</span>
<a name="l1680"><span class="linenum">1680</span></a>  <span class="comment"> * @param bool $usecommonwords the words as formatted date/time.</span>
<a name="l1681"><span class="linenum">1681</span></a>  <span class="comment"> * @param int $showtime determine the show time GMT timestamp</span>
<a name="l1682"><span class="linenum">1682</span></a>  <span class="comment"> * @return string $eventtime link/string for event time</span>
<a name="l1683"><span class="linenum">1683</span></a>  <span class="comment"> */</span>
<a name="l1684"><span class="linenum">1684</span></a>  function <a class="function" onClick="logFunction('calendar_format_event_time')" href="../_functions/calendar_format_event_time.html" onMouseOver="funcPopup(event,'calendar_format_event_time')">calendar_format_event_time</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>, <a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../_variables/now.html">$now</a>, <a class="var it19861" onMouseOver="hilite(19861)" onMouseOut="lolite()" onClick="logVariable('linkparams')" href="../_variables/linkparams.html">$linkparams</a> = null, <a class="var it39024" onMouseOver="hilite(39024)" onMouseOut="lolite()" onClick="logVariable('usecommonwords')" href="../_variables/usecommonwords.html">$usecommonwords</a> = true, <a class="var it28757" onMouseOver="hilite(28757)" onMouseOut="lolite()" onClick="logVariable('showtime')" href="../_variables/showtime.html">$showtime</a> = 0) {
<a name="l1685"><span class="linenum">1685</span></a>      <a class="var it1223" onMouseOver="hilite(1223)" onMouseOut="lolite()" onClick="logVariable('starttime')" href="../_variables/starttime.html">$starttime</a> = <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timestart')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/timestart.html">timestart</a>;
<a name="l1686"><span class="linenum">1686</span></a>      <a class="var it6252" onMouseOver="hilite(6252)" onMouseOut="lolite()" onClick="logVariable('endtime')" href="../_variables/endtime.html">$endtime</a> = <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timestart')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/timestart.html">timestart</a> + <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timeduration')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/timeduration.html">timeduration</a>;
<a name="l1687"><span class="linenum">1687</span></a>  
<a name="l1688"><span class="linenum">1688</span></a>      if (empty(<a class="var it19861" onMouseOver="hilite(19861)" onMouseOut="lolite()" onClick="logVariable('linkparams')" href="../_variables/linkparams.html">$linkparams</a>) || !<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it19861" onMouseOver="hilite(19861)" onMouseOut="lolite()" onClick="logVariable('linkparams')" href="../_variables/linkparams.html">$linkparams</a>)) {
<a name="l1689"><span class="linenum">1689</span></a>          <a class="var it19861" onMouseOver="hilite(19861)" onMouseOut="lolite()" onClick="logVariable('linkparams')" href="../_variables/linkparams.html">$linkparams</a> = array();
<a name="l1690"><span class="linenum">1690</span></a>      }
<a name="l1691"><span class="linenum">1691</span></a>  
<a name="l1692"><span class="linenum">1692</span></a>      <a class="var it19861" onMouseOver="hilite(19861)" onMouseOut="lolite()" onClick="logVariable('linkparams')" href="../_variables/linkparams.html">$linkparams</a>['view'] = 'day';
<a name="l1693"><span class="linenum">1693</span></a>  
<a name="l1694"><span class="linenum">1694</span></a>  <span class="comment">    // OK, now to get a meaningful display...</span>
<a name="l1695"><span class="linenum">1695</span></a>  <span class="comment">    // Check if there is a duration for this event.</span>
<a name="l1696"><span class="linenum">1696</span></a>      if (<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timeduration')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/timeduration.html">timeduration</a>) {
<a name="l1697"><span class="linenum">1697</span></a>  <span class="comment">        // Get the midnight of the day the event will start.</span>
<a name="l1698"><span class="linenum">1698</span></a>          <a class="var it39041" onMouseOver="hilite(39041)" onMouseOut="lolite()" onClick="logVariable('usermidnightstart')" href="../_variables/usermidnightstart.html">$usermidnightstart</a> = <a class="function" onClick="logFunction('usergetmidnight')" href="../_functions/usergetmidnight.html" onMouseOver="funcPopup(event,'usergetmidnight')">usergetmidnight</a>(<a class="var it1223" onMouseOver="hilite(1223)" onMouseOut="lolite()" onClick="logVariable('starttime')" href="../_variables/starttime.html">$starttime</a>);
<a name="l1699"><span class="linenum">1699</span></a>  <span class="comment">        // Get the midnight of the day the event will end.</span>
<a name="l1700"><span class="linenum">1700</span></a>          <a class="var it39042" onMouseOver="hilite(39042)" onMouseOut="lolite()" onClick="logVariable('usermidnightend')" href="../_variables/usermidnightend.html">$usermidnightend</a> = <a class="function" onClick="logFunction('usergetmidnight')" href="../_functions/usergetmidnight.html" onMouseOver="funcPopup(event,'usergetmidnight')">usergetmidnight</a>(<a class="var it6252" onMouseOver="hilite(6252)" onMouseOut="lolite()" onClick="logVariable('endtime')" href="../_variables/endtime.html">$endtime</a>);
<a name="l1701"><span class="linenum">1701</span></a>  <span class="comment">        // Check if we will still be on the same day.</span>
<a name="l1702"><span class="linenum">1702</span></a>          if (<a class="var it39041" onMouseOver="hilite(39041)" onMouseOut="lolite()" onClick="logVariable('usermidnightstart')" href="../_variables/usermidnightstart.html">$usermidnightstart</a> == <a class="var it39042" onMouseOver="hilite(39042)" onMouseOut="lolite()" onClick="logVariable('usermidnightend')" href="../_variables/usermidnightend.html">$usermidnightend</a>) {
<a name="l1703"><span class="linenum">1703</span></a>  <span class="comment">            // Check if we are running all day.</span>
<a name="l1704"><span class="linenum">1704</span></a>              if (<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timeduration')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/timeduration.html">timeduration</a> == <a class="constant" onClick="logConstant('DAYSECS')" href="../_constants/DAYSECS.html" onMouseOver="constPopup(event,'DAYSECS')">DAYSECS</a>) {
<a name="l1705"><span class="linenum">1705</span></a>                  <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('allday', 'calendar');
<a name="l1706"><span class="linenum">1706</span></a>              } else { // Specify the time we will be running this from.
<a name="l1707"><span class="linenum">1707</span></a>                  <a class="var it39043" onMouseOver="hilite(39043)" onMouseOut="lolite()" onClick="logVariable('datestart')" href="../_variables/datestart.html">$datestart</a> = <a class="function" onClick="logFunction('calendar_time_representation')" href="../_functions/calendar_time_representation.html" onMouseOver="funcPopup(event,'calendar_time_representation')">calendar_time_representation</a>(<a class="var it1223" onMouseOver="hilite(1223)" onMouseOut="lolite()" onClick="logVariable('starttime')" href="../_variables/starttime.html">$starttime</a>);
<a name="l1708"><span class="linenum">1708</span></a>                  <a class="var it39044" onMouseOver="hilite(39044)" onMouseOut="lolite()" onClick="logVariable('dateend')" href="../_variables/dateend.html">$dateend</a> = <a class="function" onClick="logFunction('calendar_time_representation')" href="../_functions/calendar_time_representation.html" onMouseOver="funcPopup(event,'calendar_time_representation')">calendar_time_representation</a>(<a class="var it6252" onMouseOver="hilite(6252)" onMouseOut="lolite()" onClick="logVariable('endtime')" href="../_variables/endtime.html">$endtime</a>);
<a name="l1709"><span class="linenum">1709</span></a>                  <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a> = <a class="var it39043" onMouseOver="hilite(39043)" onMouseOut="lolite()" onClick="logVariable('datestart')" href="../_variables/datestart.html">$datestart</a> . ' &lt;strong&gt;&amp;raquo;&lt;/strong&gt; ' . <a class="var it39044" onMouseOver="hilite(39044)" onMouseOut="lolite()" onClick="logVariable('dateend')" href="../_variables/dateend.html">$dateend</a>;
<a name="l1710"><span class="linenum">1710</span></a>              }
<a name="l1711"><span class="linenum">1711</span></a>  
<a name="l1712"><span class="linenum">1712</span></a>  <span class="comment">            // Set printable representation.</span>
<a name="l1713"><span class="linenum">1713</span></a>              if (!<a class="var it28757" onMouseOver="hilite(28757)" onMouseOut="lolite()" onClick="logVariable('showtime')" href="../_variables/showtime.html">$showtime</a>) {
<a name="l1714"><span class="linenum">1714</span></a>                  <a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a> = <a class="function" onClick="logFunction('calendar_day_representation')" href="../_functions/calendar_day_representation.html" onMouseOver="funcPopup(event,'calendar_day_representation')">calendar_day_representation</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timestart')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/timestart.html">timestart</a>, <a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../_variables/now.html">$now</a>, <a class="var it39024" onMouseOver="hilite(39024)" onMouseOut="lolite()" onClick="logVariable('usecommonwords')" href="../_variables/usecommonwords.html">$usecommonwords</a>);
<a name="l1715"><span class="linenum">1715</span></a>                  <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <a class="function" onClick="logFunction('calendar_get_link_href')" href="../_functions/calendar_get_link_href.html" onMouseOver="funcPopup(event,'calendar_get_link_href')">calendar_get_link_href</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="constant" onClick="logConstant('CALENDAR_URL')" href="../_constants/CALENDAR_URL.html" onMouseOver="constPopup(event,'CALENDAR_URL')">CALENDAR_URL</a> . 'view.php', <a class="var it19861" onMouseOver="hilite(19861)" onMouseOut="lolite()" onClick="logVariable('linkparams')" href="../_variables/linkparams.html">$linkparams</a>), 0, 0, 0, <a class="var it6252" onMouseOver="hilite(6252)" onMouseOut="lolite()" onClick="logVariable('endtime')" href="../_variables/endtime.html">$endtime</a>);
<a name="l1716"><span class="linenum">1716</span></a>                  <a class="var it39045" onMouseOver="hilite(39045)" onMouseOut="lolite()" onClick="logVariable('eventtime')" href="../_variables/eventtime.html">$eventtime</a> = <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, <a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a>) . ', ' . <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>;
<a name="l1717"><span class="linenum">1717</span></a>              } else {
<a name="l1718"><span class="linenum">1718</span></a>                  <a class="var it39045" onMouseOver="hilite(39045)" onMouseOut="lolite()" onClick="logVariable('eventtime')" href="../_variables/eventtime.html">$eventtime</a> = <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>;
<a name="l1719"><span class="linenum">1719</span></a>              }
<a name="l1720"><span class="linenum">1720</span></a>          } else { // It must spans two or more days.
<a name="l1721"><span class="linenum">1721</span></a>              <a class="var it3568" onMouseOver="hilite(3568)" onMouseOut="lolite()" onClick="logVariable('daystart')" href="../_variables/daystart.html">$daystart</a> = <a class="function" onClick="logFunction('calendar_day_representation')" href="../_functions/calendar_day_representation.html" onMouseOver="funcPopup(event,'calendar_day_representation')">calendar_day_representation</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timestart')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/timestart.html">timestart</a>, <a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../_variables/now.html">$now</a>, <a class="var it39024" onMouseOver="hilite(39024)" onMouseOut="lolite()" onClick="logVariable('usecommonwords')" href="../_variables/usecommonwords.html">$usecommonwords</a>) . ', ';
<a name="l1722"><span class="linenum">1722</span></a>              if (<a class="var it28757" onMouseOver="hilite(28757)" onMouseOut="lolite()" onClick="logVariable('showtime')" href="../_variables/showtime.html">$showtime</a> == <a class="var it39041" onMouseOver="hilite(39041)" onMouseOut="lolite()" onClick="logVariable('usermidnightstart')" href="../_variables/usermidnightstart.html">$usermidnightstart</a>) {
<a name="l1723"><span class="linenum">1723</span></a>                  <a class="var it3568" onMouseOver="hilite(3568)" onMouseOut="lolite()" onClick="logVariable('daystart')" href="../_variables/daystart.html">$daystart</a> = '';
<a name="l1724"><span class="linenum">1724</span></a>              }
<a name="l1725"><span class="linenum">1725</span></a>              <a class="var it1937" onMouseOver="hilite(1937)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../_variables/timestart.html">$timestart</a> = <a class="function" onClick="logFunction('calendar_time_representation')" href="../_functions/calendar_time_representation.html" onMouseOver="funcPopup(event,'calendar_time_representation')">calendar_time_representation</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timestart')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/timestart.html">timestart</a>);
<a name="l1726"><span class="linenum">1726</span></a>              <a class="var it39046" onMouseOver="hilite(39046)" onMouseOut="lolite()" onClick="logVariable('dayend')" href="../_variables/dayend.html">$dayend</a> = <a class="function" onClick="logFunction('calendar_day_representation')" href="../_functions/calendar_day_representation.html" onMouseOver="funcPopup(event,'calendar_day_representation')">calendar_day_representation</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timestart')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/timestart.html">timestart</a> + <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timeduration')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/timeduration.html">timeduration</a>, <a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../_variables/now.html">$now</a>, <a class="var it39024" onMouseOver="hilite(39024)" onMouseOut="lolite()" onClick="logVariable('usecommonwords')" href="../_variables/usecommonwords.html">$usecommonwords</a>) . ', ';
<a name="l1727"><span class="linenum">1727</span></a>              if (<a class="var it28757" onMouseOver="hilite(28757)" onMouseOut="lolite()" onClick="logVariable('showtime')" href="../_variables/showtime.html">$showtime</a> == <a class="var it39042" onMouseOver="hilite(39042)" onMouseOut="lolite()" onClick="logVariable('usermidnightend')" href="../_variables/usermidnightend.html">$usermidnightend</a>) {
<a name="l1728"><span class="linenum">1728</span></a>                  <a class="var it39046" onMouseOver="hilite(39046)" onMouseOut="lolite()" onClick="logVariable('dayend')" href="../_variables/dayend.html">$dayend</a> = '';
<a name="l1729"><span class="linenum">1729</span></a>              }
<a name="l1730"><span class="linenum">1730</span></a>              <a class="var it3001" onMouseOver="hilite(3001)" onMouseOut="lolite()" onClick="logVariable('timeend')" href="../_variables/timeend.html">$timeend</a> = <a class="function" onClick="logFunction('calendar_time_representation')" href="../_functions/calendar_time_representation.html" onMouseOver="funcPopup(event,'calendar_time_representation')">calendar_time_representation</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timestart')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/timestart.html">timestart</a> + <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timeduration')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/timeduration.html">timeduration</a>);
<a name="l1731"><span class="linenum">1731</span></a>  
<a name="l1732"><span class="linenum">1732</span></a>  <span class="comment">            // Set printable representation.</span>
<a name="l1733"><span class="linenum">1733</span></a>              if (<a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../_variables/now.html">$now</a> &gt;= <a class="var it39041" onMouseOver="hilite(39041)" onMouseOut="lolite()" onClick="logVariable('usermidnightstart')" href="../_variables/usermidnightstart.html">$usermidnightstart</a> &amp;&amp; <a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../_variables/now.html">$now</a> &lt; <a class="phpfunction" onClick="logFunction('strtotime')" href="../_functions/strtotime.html" onMouseOver="phpfuncPopup(event,'strtotime')">strtotime</a>('+1 day', <a class="var it39041" onMouseOver="hilite(39041)" onMouseOut="lolite()" onClick="logVariable('usermidnightstart')" href="../_variables/usermidnightstart.html">$usermidnightstart</a>)) {
<a name="l1734"><span class="linenum">1734</span></a>                  <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <a class="function" onClick="logFunction('calendar_get_link_href')" href="../_functions/calendar_get_link_href.html" onMouseOver="funcPopup(event,'calendar_get_link_href')">calendar_get_link_href</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="constant" onClick="logConstant('CALENDAR_URL')" href="../_constants/CALENDAR_URL.html" onMouseOver="constPopup(event,'CALENDAR_URL')">CALENDAR_URL</a> . 'view.php', <a class="var it19861" onMouseOver="hilite(19861)" onMouseOut="lolite()" onClick="logVariable('linkparams')" href="../_variables/linkparams.html">$linkparams</a>), 0, 0, 0, <a class="var it6252" onMouseOver="hilite(6252)" onMouseOut="lolite()" onClick="logVariable('endtime')" href="../_variables/endtime.html">$endtime</a>);
<a name="l1735"><span class="linenum">1735</span></a>                  <a class="var it39045" onMouseOver="hilite(39045)" onMouseOut="lolite()" onClick="logVariable('eventtime')" href="../_variables/eventtime.html">$eventtime</a> = <a class="var it1937" onMouseOver="hilite(1937)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../_variables/timestart.html">$timestart</a> . ' &lt;strong&gt;&amp;raquo;&lt;/strong&gt; ' . <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, <a class="var it39046" onMouseOver="hilite(39046)" onMouseOut="lolite()" onClick="logVariable('dayend')" href="../_variables/dayend.html">$dayend</a>) . <a class="var it3001" onMouseOver="hilite(3001)" onMouseOut="lolite()" onClick="logVariable('timeend')" href="../_variables/timeend.html">$timeend</a>;
<a name="l1736"><span class="linenum">1736</span></a>              } else {
<a name="l1737"><span class="linenum">1737</span></a>                  <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <a class="function" onClick="logFunction('calendar_get_link_href')" href="../_functions/calendar_get_link_href.html" onMouseOver="funcPopup(event,'calendar_get_link_href')">calendar_get_link_href</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="constant" onClick="logConstant('CALENDAR_URL')" href="../_constants/CALENDAR_URL.html" onMouseOver="constPopup(event,'CALENDAR_URL')">CALENDAR_URL</a> . 'view.php', <a class="var it19861" onMouseOver="hilite(19861)" onMouseOut="lolite()" onClick="logVariable('linkparams')" href="../_variables/linkparams.html">$linkparams</a>), 0, 0, 0, <a class="var it6252" onMouseOver="hilite(6252)" onMouseOut="lolite()" onClick="logVariable('endtime')" href="../_variables/endtime.html">$endtime</a>);
<a name="l1738"><span class="linenum">1738</span></a>                  <a class="var it39045" onMouseOver="hilite(39045)" onMouseOut="lolite()" onClick="logVariable('eventtime')" href="../_variables/eventtime.html">$eventtime</a>  = <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, <a class="var it3568" onMouseOver="hilite(3568)" onMouseOut="lolite()" onClick="logVariable('daystart')" href="../_variables/daystart.html">$daystart</a>) . <a class="var it1937" onMouseOver="hilite(1937)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../_variables/timestart.html">$timestart</a> . ' &lt;strong&gt;&amp;raquo;&lt;/strong&gt; ';
<a name="l1739"><span class="linenum">1739</span></a>  
<a name="l1740"><span class="linenum">1740</span></a>                  <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <a class="function" onClick="logFunction('calendar_get_link_href')" href="../_functions/calendar_get_link_href.html" onMouseOver="funcPopup(event,'calendar_get_link_href')">calendar_get_link_href</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="constant" onClick="logConstant('CALENDAR_URL')" href="../_constants/CALENDAR_URL.html" onMouseOver="constPopup(event,'CALENDAR_URL')">CALENDAR_URL</a> . 'view.php', <a class="var it19861" onMouseOver="hilite(19861)" onMouseOut="lolite()" onClick="logVariable('linkparams')" href="../_variables/linkparams.html">$linkparams</a>),  0, 0, 0, <a class="var it1223" onMouseOver="hilite(1223)" onMouseOut="lolite()" onClick="logVariable('starttime')" href="../_variables/starttime.html">$starttime</a>);
<a name="l1741"><span class="linenum">1741</span></a>                  <a class="var it39045" onMouseOver="hilite(39045)" onMouseOut="lolite()" onClick="logVariable('eventtime')" href="../_variables/eventtime.html">$eventtime</a> .= <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, <a class="var it39046" onMouseOver="hilite(39046)" onMouseOut="lolite()" onClick="logVariable('dayend')" href="../_variables/dayend.html">$dayend</a>) . <a class="var it3001" onMouseOver="hilite(3001)" onMouseOut="lolite()" onClick="logVariable('timeend')" href="../_variables/timeend.html">$timeend</a>;
<a name="l1742"><span class="linenum">1742</span></a>              }
<a name="l1743"><span class="linenum">1743</span></a>          }
<a name="l1744"><span class="linenum">1744</span></a>      } else { // There is no time duration.
<a name="l1745"><span class="linenum">1745</span></a>          <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a> = <a class="function" onClick="logFunction('calendar_time_representation')" href="../_functions/calendar_time_representation.html" onMouseOver="funcPopup(event,'calendar_time_representation')">calendar_time_representation</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timestart')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/timestart.html">timestart</a>);
<a name="l1746"><span class="linenum">1746</span></a>  <span class="comment">        // Set printable representation.</span>
<a name="l1747"><span class="linenum">1747</span></a>          if (!<a class="var it28757" onMouseOver="hilite(28757)" onMouseOut="lolite()" onClick="logVariable('showtime')" href="../_variables/showtime.html">$showtime</a>) {
<a name="l1748"><span class="linenum">1748</span></a>              <a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a> = <a class="function" onClick="logFunction('calendar_day_representation')" href="../_functions/calendar_day_representation.html" onMouseOver="funcPopup(event,'calendar_day_representation')">calendar_day_representation</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timestart')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/timestart.html">timestart</a>, <a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../_variables/now.html">$now</a>, <a class="var it39024" onMouseOver="hilite(39024)" onMouseOut="lolite()" onClick="logVariable('usecommonwords')" href="../_variables/usecommonwords.html">$usecommonwords</a>);
<a name="l1749"><span class="linenum">1749</span></a>              <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <a class="function" onClick="logFunction('calendar_get_link_href')" href="../_functions/calendar_get_link_href.html" onMouseOver="funcPopup(event,'calendar_get_link_href')">calendar_get_link_href</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="constant" onClick="logConstant('CALENDAR_URL')" href="../_constants/CALENDAR_URL.html" onMouseOver="constPopup(event,'CALENDAR_URL')">CALENDAR_URL</a> . 'view.php', <a class="var it19861" onMouseOver="hilite(19861)" onMouseOut="lolite()" onClick="logVariable('linkparams')" href="../_variables/linkparams.html">$linkparams</a>),  0, 0, 0, <a class="var it1223" onMouseOver="hilite(1223)" onMouseOut="lolite()" onClick="logVariable('starttime')" href="../_variables/starttime.html">$starttime</a>);
<a name="l1750"><span class="linenum">1750</span></a>              <a class="var it39045" onMouseOver="hilite(39045)" onMouseOut="lolite()" onClick="logVariable('eventtime')" href="../_variables/eventtime.html">$eventtime</a> = <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, <a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a>) . ', ' . <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>);
<a name="l1751"><span class="linenum">1751</span></a>          } else {
<a name="l1752"><span class="linenum">1752</span></a>              <a class="var it39045" onMouseOver="hilite(39045)" onMouseOut="lolite()" onClick="logVariable('eventtime')" href="../_variables/eventtime.html">$eventtime</a> = <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>;
<a name="l1753"><span class="linenum">1753</span></a>          }
<a name="l1754"><span class="linenum">1754</span></a>      }
<a name="l1755"><span class="linenum">1755</span></a>  
<a name="l1756"><span class="linenum">1756</span></a>  <span class="comment">    // Check if It has expired.</span>
<a name="l1757"><span class="linenum">1757</span></a>      if (<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timestart')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/timestart.html">timestart</a> + <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timeduration')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/timeduration.html">timeduration</a> &lt; <a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../_variables/now.html">$now</a>) {
<a name="l1758"><span class="linenum">1758</span></a>          <a class="var it39045" onMouseOver="hilite(39045)" onMouseOut="lolite()" onClick="logVariable('eventtime')" href="../_variables/eventtime.html">$eventtime</a> = '&lt;span class=&quot;dimmed_text&quot;&gt;' . <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(' href=', ' class=&quot;dimmed&quot; href=', <a class="var it39045" onMouseOver="hilite(39045)" onMouseOut="lolite()" onClick="logVariable('eventtime')" href="../_variables/eventtime.html">$eventtime</a>) . '&lt;/span&gt;';
<a name="l1759"><span class="linenum">1759</span></a>      }
<a name="l1760"><span class="linenum">1760</span></a>  
<a name="l1761"><span class="linenum">1761</span></a>      return <a class="var it39045" onMouseOver="hilite(39045)" onMouseOut="lolite()" onClick="logVariable('eventtime')" href="../_variables/eventtime.html">$eventtime</a>;
<a name="l1762"><span class="linenum">1762</span></a>  }
<a name="l1763"><span class="linenum">1763</span></a>  
<a name="l1764"><span class="linenum">1764</span></a>  <span class="comment">/**</span>
<a name="l1765"><span class="linenum">1765</span></a>  <span class="comment"> * Display month selector options</span>
<a name="l1766"><span class="linenum">1766</span></a>  <span class="comment"> *</span>
<a name="l1767"><span class="linenum">1767</span></a>  <span class="comment"> * @param string $name for the select element</span>
<a name="l1768"><span class="linenum">1768</span></a>  <span class="comment"> * @param string|array $selected options for select elements</span>
<a name="l1769"><span class="linenum">1769</span></a>  <span class="comment"> */</span>
<a name="l1770"><span class="linenum">1770</span></a>  function <a class="function" onClick="logFunction('calendar_print_month_selector')" href="../_functions/calendar_print_month_selector.html" onMouseOver="funcPopup(event,'calendar_print_month_selector')">calendar_print_month_selector</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>, <a class="var it569" onMouseOver="hilite(569)" onMouseOut="lolite()" onClick="logVariable('selected')" href="../_variables/selected.html">$selected</a>) {
<a name="l1771"><span class="linenum">1771</span></a>      <a class="var it1755" onMouseOver="hilite(1755)" onMouseOut="lolite()" onClick="logVariable('months')" href="../_variables/months.html">$months</a> = array();
<a name="l1772"><span class="linenum">1772</span></a>      for (<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>=1; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>&lt;=12; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>++) {
<a name="l1773"><span class="linenum">1773</span></a>          <a class="var it1755" onMouseOver="hilite(1755)" onMouseOut="lolite()" onClick="logVariable('months')" href="../_variables/months.html">$months</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>] = <a class="function" onClick="logFunction('userdate')" href="../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="phpfunction" onClick="logFunction('gmmktime')" href="../_functions/gmmktime.html" onMouseOver="phpfuncPopup(event,'gmmktime')">gmmktime</a>(12, 0, 0, <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>, 15, 2000), '%B');
<a name="l1774"><span class="linenum">1774</span></a>      }
<a name="l1775"><span class="linenum">1775</span></a>      echo <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('label')" href="../_functions/label.html" onMouseOver="funcPopup(event,'label')">label</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('months'), 'menu'. <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>, false, array('class' =&gt; 'accesshide'));
<a name="l1776"><span class="linenum">1776</span></a>      echo <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('select')" href="../_functions/select.html" onMouseOver="funcPopup(event,'select')">select</a>(<a class="var it1755" onMouseOver="hilite(1755)" onMouseOut="lolite()" onClick="logVariable('months')" href="../_variables/months.html">$months</a>, <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>, <a class="var it569" onMouseOver="hilite(569)" onMouseOut="lolite()" onClick="logVariable('selected')" href="../_variables/selected.html">$selected</a>, false);
<a name="l1777"><span class="linenum">1777</span></a>  }
<a name="l1778"><span class="linenum">1778</span></a>  
<a name="l1779"><span class="linenum">1779</span></a>  <span class="comment">/**</span>
<a name="l1780"><span class="linenum">1780</span></a>  <span class="comment"> * Checks to see if the requested type of event should be shown for the given user.</span>
<a name="l1781"><span class="linenum">1781</span></a>  <span class="comment"> *</span>
<a name="l1782"><span class="linenum">1782</span></a>  <span class="comment"> * @param CALENDAR_EVENT_GLOBAL|CALENDAR_EVENT_COURSE|CALENDAR_EVENT_GROUP|CALENDAR_EVENT_USER $type</span>
<a name="l1783"><span class="linenum">1783</span></a>  <span class="comment"> *          The type to check the display for (default is to display all)</span>
<a name="l1784"><span class="linenum">1784</span></a>  <span class="comment"> * @param stdClass|int|null $user The user to check for - by default the current user</span>
<a name="l1785"><span class="linenum">1785</span></a>  <span class="comment"> * @return bool True if the tyep should be displayed false otherwise</span>
<a name="l1786"><span class="linenum">1786</span></a>  <span class="comment"> */</span>
<a name="l1787"><span class="linenum">1787</span></a>  function <a class="function" onClick="logFunction('calendar_show_event_type')" href="../_functions/calendar_show_event_type.html" onMouseOver="funcPopup(event,'calendar_show_event_type')">calendar_show_event_type</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a> = null) {
<a name="l1788"><span class="linenum">1788</span></a>      <a class="var it777" onMouseOver="hilite(777)" onMouseOut="lolite()" onClick="logVariable('default')" href="../_variables/default.html">$default</a> = <a class="constant" onClick="logConstant('CALENDAR_EVENT_GLOBAL')" href="../_constants/CALENDAR_EVENT_GLOBAL.html" onMouseOver="constPopup(event,'CALENDAR_EVENT_GLOBAL')">CALENDAR_EVENT_GLOBAL</a> + <a class="constant" onClick="logConstant('CALENDAR_EVENT_COURSE')" href="../_constants/CALENDAR_EVENT_COURSE.html" onMouseOver="constPopup(event,'CALENDAR_EVENT_COURSE')">CALENDAR_EVENT_COURSE</a> + <a class="constant" onClick="logConstant('CALENDAR_EVENT_GROUP')" href="../_constants/CALENDAR_EVENT_GROUP.html" onMouseOver="constPopup(event,'CALENDAR_EVENT_GROUP')">CALENDAR_EVENT_GROUP</a> + <a class="constant" onClick="logConstant('CALENDAR_EVENT_USER')" href="../_constants/CALENDAR_EVENT_USER.html" onMouseOver="constPopup(event,'CALENDAR_EVENT_USER')">CALENDAR_EVENT_USER</a>;
<a name="l1789"><span class="linenum">1789</span></a>      if (<a class="function" onClick="logFunction('get_user_preferences')" href="../_functions/get_user_preferences.html" onMouseOver="funcPopup(event,'get_user_preferences')">get_user_preferences</a>('calendar_persistflt', 0, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>) === 0) {
<a name="l1790"><span class="linenum">1790</span></a>          global <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>;
<a name="l1791"><span class="linenum">1791</span></a>          if (!isset(<a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('calendarshoweventtype')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../_variables/calendarshoweventtype.html">calendarshoweventtype</a>)) {
<a name="l1792"><span class="linenum">1792</span></a>              <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('calendarshoweventtype')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../_variables/calendarshoweventtype.html">calendarshoweventtype</a> = <a class="var it777" onMouseOver="hilite(777)" onMouseOut="lolite()" onClick="logVariable('default')" href="../_variables/default.html">$default</a>;
<a name="l1793"><span class="linenum">1793</span></a>          }
<a name="l1794"><span class="linenum">1794</span></a>          return <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('calendarshoweventtype')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../_variables/calendarshoweventtype.html">calendarshoweventtype</a> &amp; <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>;
<a name="l1795"><span class="linenum">1795</span></a>      } else {
<a name="l1796"><span class="linenum">1796</span></a>          return <a class="function" onClick="logFunction('get_user_preferences')" href="../_functions/get_user_preferences.html" onMouseOver="funcPopup(event,'get_user_preferences')">get_user_preferences</a>('calendar_savedflt', <a class="var it777" onMouseOver="hilite(777)" onMouseOut="lolite()" onClick="logVariable('default')" href="../_variables/default.html">$default</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>) &amp; <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>;
<a name="l1797"><span class="linenum">1797</span></a>      }
<a name="l1798"><span class="linenum">1798</span></a>  }
<a name="l1799"><span class="linenum">1799</span></a>  
<a name="l1800"><span class="linenum">1800</span></a>  <span class="comment">/**</span>
<a name="l1801"><span class="linenum">1801</span></a>  <span class="comment"> * Sets the display of the event type given $display.</span>
<a name="l1802"><span class="linenum">1802</span></a>  <span class="comment"> *</span>
<a name="l1803"><span class="linenum">1803</span></a>  <span class="comment"> * If $display = true the event type will be shown.</span>
<a name="l1804"><span class="linenum">1804</span></a>  <span class="comment"> * If $display = false the event type will NOT be shown.</span>
<a name="l1805"><span class="linenum">1805</span></a>  <span class="comment"> * If $display = null the current value will be toggled and saved.</span>
<a name="l1806"><span class="linenum">1806</span></a>  <span class="comment"> *</span>
<a name="l1807"><span class="linenum">1807</span></a>  <span class="comment"> * @param CALENDAR_EVENT_GLOBAL|CALENDAR_EVENT_COURSE|CALENDAR_EVENT_GROUP|CALENDAR_EVENT_USER $type object of CALENDAR_EVENT_XXX</span>
<a name="l1808"><span class="linenum">1808</span></a>  <span class="comment"> * @param bool $display option to display event type</span>
<a name="l1809"><span class="linenum">1809</span></a>  <span class="comment"> * @param stdClass|int $user moodle user object or id, null means current user</span>
<a name="l1810"><span class="linenum">1810</span></a>  <span class="comment"> */</span>
<a name="l1811"><span class="linenum">1811</span></a>  function <a class="function" onClick="logFunction('calendar_set_event_type_display')" href="../_functions/calendar_set_event_type_display.html" onMouseOver="funcPopup(event,'calendar_set_event_type_display')">calendar_set_event_type_display</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>, <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a> = null, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a> = null) {
<a name="l1812"><span class="linenum">1812</span></a>      <a class="var it8718" onMouseOver="hilite(8718)" onMouseOut="lolite()" onClick="logVariable('persist')" href="../_variables/persist.html">$persist</a> = <a class="function" onClick="logFunction('get_user_preferences')" href="../_functions/get_user_preferences.html" onMouseOver="funcPopup(event,'get_user_preferences')">get_user_preferences</a>('calendar_persistflt', 0, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>);
<a name="l1813"><span class="linenum">1813</span></a>      <a class="var it777" onMouseOver="hilite(777)" onMouseOut="lolite()" onClick="logVariable('default')" href="../_variables/default.html">$default</a> = <a class="constant" onClick="logConstant('CALENDAR_EVENT_GLOBAL')" href="../_constants/CALENDAR_EVENT_GLOBAL.html" onMouseOver="constPopup(event,'CALENDAR_EVENT_GLOBAL')">CALENDAR_EVENT_GLOBAL</a> + <a class="constant" onClick="logConstant('CALENDAR_EVENT_COURSE')" href="../_constants/CALENDAR_EVENT_COURSE.html" onMouseOver="constPopup(event,'CALENDAR_EVENT_COURSE')">CALENDAR_EVENT_COURSE</a> + <a class="constant" onClick="logConstant('CALENDAR_EVENT_GROUP')" href="../_constants/CALENDAR_EVENT_GROUP.html" onMouseOver="constPopup(event,'CALENDAR_EVENT_GROUP')">CALENDAR_EVENT_GROUP</a> + <a class="constant" onClick="logConstant('CALENDAR_EVENT_USER')" href="../_constants/CALENDAR_EVENT_USER.html" onMouseOver="constPopup(event,'CALENDAR_EVENT_USER')">CALENDAR_EVENT_USER</a>;
<a name="l1814"><span class="linenum">1814</span></a>      if (<a class="var it8718" onMouseOver="hilite(8718)" onMouseOut="lolite()" onClick="logVariable('persist')" href="../_variables/persist.html">$persist</a> === 0) {
<a name="l1815"><span class="linenum">1815</span></a>          global <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>;
<a name="l1816"><span class="linenum">1816</span></a>          if (!isset(<a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('calendarshoweventtype')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../_variables/calendarshoweventtype.html">calendarshoweventtype</a>)) {
<a name="l1817"><span class="linenum">1817</span></a>              <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('calendarshoweventtype')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../_variables/calendarshoweventtype.html">calendarshoweventtype</a> = <a class="var it777" onMouseOver="hilite(777)" onMouseOut="lolite()" onClick="logVariable('default')" href="../_variables/default.html">$default</a>;
<a name="l1818"><span class="linenum">1818</span></a>          }
<a name="l1819"><span class="linenum">1819</span></a>          <a class="var it11341" onMouseOver="hilite(11341)" onMouseOut="lolite()" onClick="logVariable('preference')" href="../_variables/preference.html">$preference</a> = <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('calendarshoweventtype')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../_variables/calendarshoweventtype.html">calendarshoweventtype</a>;
<a name="l1820"><span class="linenum">1820</span></a>      } else {
<a name="l1821"><span class="linenum">1821</span></a>          <a class="var it11341" onMouseOver="hilite(11341)" onMouseOut="lolite()" onClick="logVariable('preference')" href="../_variables/preference.html">$preference</a> = <a class="function" onClick="logFunction('get_user_preferences')" href="../_functions/get_user_preferences.html" onMouseOver="funcPopup(event,'get_user_preferences')">get_user_preferences</a>('calendar_savedflt', <a class="var it777" onMouseOver="hilite(777)" onMouseOut="lolite()" onClick="logVariable('default')" href="../_variables/default.html">$default</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>);
<a name="l1822"><span class="linenum">1822</span></a>      }
<a name="l1823"><span class="linenum">1823</span></a>      <a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('current')" href="../_variables/current.html">$current</a> = <a class="var it11341" onMouseOver="hilite(11341)" onMouseOut="lolite()" onClick="logVariable('preference')" href="../_variables/preference.html">$preference</a> &amp; <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>;
<a name="l1824"><span class="linenum">1824</span></a>      if (<a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a> === null) {
<a name="l1825"><span class="linenum">1825</span></a>          <a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a> = !<a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('current')" href="../_variables/current.html">$current</a>;
<a name="l1826"><span class="linenum">1826</span></a>      }
<a name="l1827"><span class="linenum">1827</span></a>      if (<a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a> &amp;&amp; !<a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('current')" href="../_variables/current.html">$current</a>) {
<a name="l1828"><span class="linenum">1828</span></a>          <a class="var it11341" onMouseOver="hilite(11341)" onMouseOut="lolite()" onClick="logVariable('preference')" href="../_variables/preference.html">$preference</a> += <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>;
<a name="l1829"><span class="linenum">1829</span></a>      } else if (!<a class="var it1467" onMouseOver="hilite(1467)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a> &amp;&amp; <a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('current')" href="../_variables/current.html">$current</a>) {
<a name="l1830"><span class="linenum">1830</span></a>          <a class="var it11341" onMouseOver="hilite(11341)" onMouseOut="lolite()" onClick="logVariable('preference')" href="../_variables/preference.html">$preference</a> -= <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>;
<a name="l1831"><span class="linenum">1831</span></a>      }
<a name="l1832"><span class="linenum">1832</span></a>      if (<a class="var it8718" onMouseOver="hilite(8718)" onMouseOut="lolite()" onClick="logVariable('persist')" href="../_variables/persist.html">$persist</a> === 0) {
<a name="l1833"><span class="linenum">1833</span></a>          <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('calendarshoweventtype')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../_variables/calendarshoweventtype.html">calendarshoweventtype</a> = <a class="var it11341" onMouseOver="hilite(11341)" onMouseOut="lolite()" onClick="logVariable('preference')" href="../_variables/preference.html">$preference</a>;
<a name="l1834"><span class="linenum">1834</span></a>      } else {
<a name="l1835"><span class="linenum">1835</span></a>          if (<a class="var it11341" onMouseOver="hilite(11341)" onMouseOut="lolite()" onClick="logVariable('preference')" href="../_variables/preference.html">$preference</a> == <a class="var it777" onMouseOver="hilite(777)" onMouseOut="lolite()" onClick="logVariable('default')" href="../_variables/default.html">$default</a>) {
<a name="l1836"><span class="linenum">1836</span></a>              <a class="function" onClick="logFunction('unset_user_preference')" href="../_functions/unset_user_preference.html" onMouseOver="funcPopup(event,'unset_user_preference')">unset_user_preference</a>('calendar_savedflt', <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>);
<a name="l1837"><span class="linenum">1837</span></a>          } else {
<a name="l1838"><span class="linenum">1838</span></a>              <a class="function" onClick="logFunction('set_user_preference')" href="../_functions/set_user_preference.html" onMouseOver="funcPopup(event,'set_user_preference')">set_user_preference</a>('calendar_savedflt', <a class="var it11341" onMouseOver="hilite(11341)" onMouseOut="lolite()" onClick="logVariable('preference')" href="../_variables/preference.html">$preference</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>);
<a name="l1839"><span class="linenum">1839</span></a>          }
<a name="l1840"><span class="linenum">1840</span></a>      }
<a name="l1841"><span class="linenum">1841</span></a>  }
<a name="l1842"><span class="linenum">1842</span></a>  
<a name="l1843"><span class="linenum">1843</span></a>  <span class="comment">/**</span>
<a name="l1844"><span class="linenum">1844</span></a>  <span class="comment"> * Get calendar's allowed types</span>
<a name="l1845"><span class="linenum">1845</span></a>  <span class="comment"> *</span>
<a name="l1846"><span class="linenum">1846</span></a>  <span class="comment"> * @param stdClass $allowed list of allowed edit for event  type</span>
<a name="l1847"><span class="linenum">1847</span></a>  <span class="comment"> * @param stdClass|int $course object of a course or course id</span>
<a name="l1848"><span class="linenum">1848</span></a>  <span class="comment"> */</span>
<a name="l1849"><span class="linenum">1849</span></a>  function <a class="function" onClick="logFunction('calendar_get_allowed_types')" href="../_functions/calendar_get_allowed_types.html" onMouseOver="funcPopup(event,'calendar_get_allowed_types')">calendar_get_allowed_types</a>(&amp;<a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = null) {
<a name="l1850"><span class="linenum">1850</span></a>      global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1851"><span class="linenum">1851</span></a>      <a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a> = new stdClass();
<a name="l1852"><span class="linenum">1852</span></a>      <a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>-&gt;<a onClick="logVariable('user')" class="var it44827" onMouseOver="hilite(44827)" onMouseOut="lolite()" href="../_variables/user.html">user</a> = <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/calendar:manageownentries', <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>());
<a name="l1853"><span class="linenum">1853</span></a>      <a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>-&gt;<a onClick="logVariable('groups')" class="var it44827" onMouseOver="hilite(44827)" onMouseOut="lolite()" href="../_variables/groups.html">groups</a> = false; <span class="comment">// This may change just below</span>
<a name="l1854"><span class="linenum">1854</span></a>      <a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>-&gt;<a onClick="logVariable('courses')" class="var it44827" onMouseOver="hilite(44827)" onMouseOut="lolite()" href="../_variables/courses.html">courses</a> = false; <span class="comment">// This may change just below</span>
<a name="l1855"><span class="linenum">1855</span></a>      <a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>-&gt;<a onClick="logVariable('site')" class="var it44827" onMouseOver="hilite(44827)" onMouseOut="lolite()" href="../_variables/site.html">site</a> = <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/calendar:manageentries', <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>));
<a name="l1856"><span class="linenum">1856</span></a>  
<a name="l1857"><span class="linenum">1857</span></a>      if (!empty(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>)) {
<a name="l1858"><span class="linenum">1858</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>)) {
<a name="l1859"><span class="linenum">1859</span></a>              <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l1860"><span class="linenum">1860</span></a>          }
<a name="l1861"><span class="linenum">1861</span></a>          if (<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a> != <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>) {
<a name="l1862"><span class="linenum">1862</span></a>              <a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1863"><span class="linenum">1863</span></a>              <a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>-&gt;<a onClick="logVariable('user')" class="var it44827" onMouseOver="hilite(44827)" onMouseOut="lolite()" href="../_variables/user.html">user</a> = <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/calendar:manageownentries', <a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>);
<a name="l1864"><span class="linenum">1864</span></a>  
<a name="l1865"><span class="linenum">1865</span></a>              if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/calendar:manageentries', <a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>)) {
<a name="l1866"><span class="linenum">1866</span></a>                  <a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>-&gt;<a onClick="logVariable('courses')" class="var it44827" onMouseOver="hilite(44827)" onMouseOut="lolite()" href="../_variables/courses.html">courses</a> = array(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a> =&gt; 1);
<a name="l1867"><span class="linenum">1867</span></a>  
<a name="l1868"><span class="linenum">1868</span></a>                  if (<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('groupmode')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/groupmode.html">groupmode</a> != <a class="constant" onClick="logConstant('NOGROUPS')" href="../_constants/NOGROUPS.html" onMouseOver="constPopup(event,'NOGROUPS')">NOGROUPS</a> || !<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('groupmodeforce')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/groupmodeforce.html">groupmodeforce</a>) {
<a name="l1869"><span class="linenum">1869</span></a>                      if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:accessallgroups', <a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>)) {
<a name="l1870"><span class="linenum">1870</span></a>                          <a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>-&gt;<a onClick="logVariable('groups')" class="var it44827" onMouseOver="hilite(44827)" onMouseOut="lolite()" href="../_variables/groups.html">groups</a> = <a class="function" onClick="logFunction('groups_get_all_groups')" href="../_functions/groups_get_all_groups.html" onMouseOver="funcPopup(event,'groups_get_all_groups')">groups_get_all_groups</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1871"><span class="linenum">1871</span></a>                      } else {
<a name="l1872"><span class="linenum">1872</span></a>                          <a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>-&gt;<a onClick="logVariable('groups')" class="var it44827" onMouseOver="hilite(44827)" onMouseOut="lolite()" href="../_variables/groups.html">groups</a> = <a class="function" onClick="logFunction('groups_get_all_groups')" href="../_functions/groups_get_all_groups.html" onMouseOver="funcPopup(event,'groups_get_all_groups')">groups_get_all_groups</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1873"><span class="linenum">1873</span></a>                      }
<a name="l1874"><span class="linenum">1874</span></a>                  }
<a name="l1875"><span class="linenum">1875</span></a>              } else if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/calendar:managegroupentries', <a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>)) {
<a name="l1876"><span class="linenum">1876</span></a>                  if(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('groupmode')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/groupmode.html">groupmode</a> != <a class="constant" onClick="logConstant('NOGROUPS')" href="../_constants/NOGROUPS.html" onMouseOver="constPopup(event,'NOGROUPS')">NOGROUPS</a> || !<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('groupmodeforce')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/groupmodeforce.html">groupmodeforce</a>) {
<a name="l1877"><span class="linenum">1877</span></a>                      if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:accessallgroups', <a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>)) {
<a name="l1878"><span class="linenum">1878</span></a>                          <a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>-&gt;<a onClick="logVariable('groups')" class="var it44827" onMouseOver="hilite(44827)" onMouseOut="lolite()" href="../_variables/groups.html">groups</a> = <a class="function" onClick="logFunction('groups_get_all_groups')" href="../_functions/groups_get_all_groups.html" onMouseOver="funcPopup(event,'groups_get_all_groups')">groups_get_all_groups</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1879"><span class="linenum">1879</span></a>                      } else {
<a name="l1880"><span class="linenum">1880</span></a>                          <a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>-&gt;<a onClick="logVariable('groups')" class="var it44827" onMouseOver="hilite(44827)" onMouseOut="lolite()" href="../_variables/groups.html">groups</a> = <a class="function" onClick="logFunction('groups_get_all_groups')" href="../_functions/groups_get_all_groups.html" onMouseOver="funcPopup(event,'groups_get_all_groups')">groups_get_all_groups</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1881"><span class="linenum">1881</span></a>                      }
<a name="l1882"><span class="linenum">1882</span></a>                  }
<a name="l1883"><span class="linenum">1883</span></a>              }
<a name="l1884"><span class="linenum">1884</span></a>          }
<a name="l1885"><span class="linenum">1885</span></a>      }
<a name="l1886"><span class="linenum">1886</span></a>  }
<a name="l1887"><span class="linenum">1887</span></a>  
<a name="l1888"><span class="linenum">1888</span></a>  <span class="comment">/**</span>
<a name="l1889"><span class="linenum">1889</span></a>  <span class="comment"> * See if user can add calendar entries at all</span>
<a name="l1890"><span class="linenum">1890</span></a>  <span class="comment"> * used to print the &quot;New Event&quot; button</span>
<a name="l1891"><span class="linenum">1891</span></a>  <span class="comment"> *</span>
<a name="l1892"><span class="linenum">1892</span></a>  <span class="comment"> * @param stdClass $course object of a course or course id</span>
<a name="l1893"><span class="linenum">1893</span></a>  <span class="comment"> * @return bool has the capability to add at least one event type</span>
<a name="l1894"><span class="linenum">1894</span></a>  <span class="comment"> */</span>
<a name="l1895"><span class="linenum">1895</span></a>  function <a class="function" onClick="logFunction('calendar_user_can_add_event')" href="../_functions/calendar_user_can_add_event.html" onMouseOver="funcPopup(event,'calendar_user_can_add_event')">calendar_user_can_add_event</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) {
<a name="l1896"><span class="linenum">1896</span></a>      if (!<a class="function" onClick="logFunction('isloggedin')" href="../_functions/isloggedin.html" onMouseOver="funcPopup(event,'isloggedin')">isloggedin</a>() || <a class="function" onClick="logFunction('isguestuser')" href="../_functions/isguestuser.html" onMouseOver="funcPopup(event,'isguestuser')">isguestuser</a>()) {
<a name="l1897"><span class="linenum">1897</span></a>          return false;
<a name="l1898"><span class="linenum">1898</span></a>      }
<a name="l1899"><span class="linenum">1899</span></a>      <a class="function" onClick="logFunction('calendar_get_allowed_types')" href="../_functions/calendar_get_allowed_types.html" onMouseOver="funcPopup(event,'calendar_get_allowed_types')">calendar_get_allowed_types</a>(<a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l1900"><span class="linenum">1900</span></a>      return (bool)(<a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>-&gt;<a onClick="logVariable('user')" class="var it44827" onMouseOver="hilite(44827)" onMouseOut="lolite()" href="../_variables/user.html">user</a> || <a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>-&gt;<a onClick="logVariable('groups')" class="var it44827" onMouseOver="hilite(44827)" onMouseOut="lolite()" href="../_variables/groups.html">groups</a> || <a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>-&gt;<a onClick="logVariable('courses')" class="var it44827" onMouseOver="hilite(44827)" onMouseOut="lolite()" href="../_variables/courses.html">courses</a> || <a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>-&gt;<a onClick="logVariable('site')" class="var it44827" onMouseOver="hilite(44827)" onMouseOut="lolite()" href="../_variables/site.html">site</a>);
<a name="l1901"><span class="linenum">1901</span></a>  }
<a name="l1902"><span class="linenum">1902</span></a>  
<a name="l1903"><span class="linenum">1903</span></a>  <span class="comment">/**</span>
<a name="l1904"><span class="linenum">1904</span></a>  <span class="comment"> * Check wether the current user is permitted to add events</span>
<a name="l1905"><span class="linenum">1905</span></a>  <span class="comment"> *</span>
<a name="l1906"><span class="linenum">1906</span></a>  <span class="comment"> * @param stdClass $event object of event</span>
<a name="l1907"><span class="linenum">1907</span></a>  <span class="comment"> * @return bool has the capability to add event</span>
<a name="l1908"><span class="linenum">1908</span></a>  <span class="comment"> */</span>
<a name="l1909"><span class="linenum">1909</span></a>  function <a class="function" onClick="logFunction('calendar_add_event_allowed')" href="../_functions/calendar_add_event_allowed.html" onMouseOver="funcPopup(event,'calendar_add_event_allowed')">calendar_add_event_allowed</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>) {
<a name="l1910"><span class="linenum">1910</span></a>      global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1911"><span class="linenum">1911</span></a>  
<a name="l1912"><span class="linenum">1912</span></a>  <span class="comment">    // can not be using guest account</span>
<a name="l1913"><span class="linenum">1913</span></a>      if (!<a class="function" onClick="logFunction('isloggedin')" href="../_functions/isloggedin.html" onMouseOver="funcPopup(event,'isloggedin')">isloggedin</a>() or <a class="function" onClick="logFunction('isguestuser')" href="../_functions/isguestuser.html" onMouseOver="funcPopup(event,'isguestuser')">isguestuser</a>()) {
<a name="l1914"><span class="linenum">1914</span></a>          return false;
<a name="l1915"><span class="linenum">1915</span></a>      }
<a name="l1916"><span class="linenum">1916</span></a>  
<a name="l1917"><span class="linenum">1917</span></a>      <a class="var it2136" onMouseOver="hilite(2136)" onMouseOut="lolite()" onClick="logVariable('sitecontext')" href="../_variables/sitecontext.html">$sitecontext</a> = <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l1918"><span class="linenum">1918</span></a>  <span class="comment">    // if user has manageentries at site level, always return true</span>
<a name="l1919"><span class="linenum">1919</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/calendar:manageentries', <a class="var it2136" onMouseOver="hilite(2136)" onMouseOut="lolite()" onClick="logVariable('sitecontext')" href="../_variables/sitecontext.html">$sitecontext</a>)) {
<a name="l1920"><span class="linenum">1920</span></a>          return true;
<a name="l1921"><span class="linenum">1921</span></a>      }
<a name="l1922"><span class="linenum">1922</span></a>  
<a name="l1923"><span class="linenum">1923</span></a>      switch (<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('eventtype')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/eventtype.html">eventtype</a>) {
<a name="l1924"><span class="linenum">1924</span></a>          case 'course':
<a name="l1925"><span class="linenum">1925</span></a>              return <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/calendar:manageentries', <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('context')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/context.html">context</a>);
<a name="l1926"><span class="linenum">1926</span></a>  
<a name="l1927"><span class="linenum">1927</span></a>          case 'group':
<a name="l1928"><span class="linenum">1928</span></a>  <span class="comment">            // Allow users to add/edit group events if:</span>
<a name="l1929"><span class="linenum">1929</span></a>  <span class="comment">            // 1) They have manageentries (= entries for whole course)</span>
<a name="l1930"><span class="linenum">1930</span></a>  <span class="comment">            // 2) They have managegroupentries AND are in the group</span>
<a name="l1931"><span class="linenum">1931</span></a>              <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('groups', array('id'=&gt;<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('groupid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/groupid.html">groupid</a>));
<a name="l1932"><span class="linenum">1932</span></a>              return <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a> &amp;&amp; (
<a name="l1933"><span class="linenum">1933</span></a>                  <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/calendar:manageentries', <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('context')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/context.html">context</a>) ||
<a name="l1934"><span class="linenum">1934</span></a>                  (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/calendar:managegroupentries', <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('context')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/context.html">context</a>)
<a name="l1935"><span class="linenum">1935</span></a>                      &amp;&amp; <a class="function" onClick="logFunction('groups_is_member')" href="../_functions/groups_is_member.html" onMouseOver="funcPopup(event,'groups_is_member')">groups_is_member</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('groupid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/groupid.html">groupid</a>)));
<a name="l1936"><span class="linenum">1936</span></a>  
<a name="l1937"><span class="linenum">1937</span></a>          case 'user':
<a name="l1938"><span class="linenum">1938</span></a>              if (<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('userid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a> == <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l1939"><span class="linenum">1939</span></a>                  return (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/calendar:manageownentries', <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('context')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/context.html">context</a>));
<a name="l1940"><span class="linenum">1940</span></a>              }
<a name="l1941"><span class="linenum">1941</span></a>  <span class="comment">            //there is no 'break;' intentionally</span>
<a name="l1942"><span class="linenum">1942</span></a>  
<a name="l1943"><span class="linenum">1943</span></a>          case 'site':
<a name="l1944"><span class="linenum">1944</span></a>              return <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/calendar:manageentries', <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('context')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/context.html">context</a>);
<a name="l1945"><span class="linenum">1945</span></a>  
<a name="l1946"><span class="linenum">1946</span></a>          default:
<a name="l1947"><span class="linenum">1947</span></a>              return <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/calendar:manageentries', <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('context')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/context.html">context</a>);
<a name="l1948"><span class="linenum">1948</span></a>      }
<a name="l1949"><span class="linenum">1949</span></a>  }
<a name="l1950"><span class="linenum">1950</span></a>  
<a name="l1951"><span class="linenum">1951</span></a>  <span class="comment">/**</span>
<a name="l1952"><span class="linenum">1952</span></a>  <span class="comment"> * Manage calendar events</span>
<a name="l1953"><span class="linenum">1953</span></a>  <span class="comment"> *</span>
<a name="l1954"><span class="linenum">1954</span></a>  <span class="comment"> * This class provides the required functionality in order to manage calendar events.</span>
<a name="l1955"><span class="linenum">1955</span></a>  <span class="comment"> * It was introduced as part of Moodle 2.0 and was created in order to provide a</span>
<a name="l1956"><span class="linenum">1956</span></a>  <span class="comment"> * better framework for dealing with calendar events in particular regard to file</span>
<a name="l1957"><span class="linenum">1957</span></a>  <span class="comment"> * handling through the new file API</span>
<a name="l1958"><span class="linenum">1958</span></a>  <span class="comment"> *</span>
<a name="l1959"><span class="linenum">1959</span></a>  <span class="comment"> * @package    core_calendar</span>
<a name="l1960"><span class="linenum">1960</span></a>  <span class="comment"> * @category   calendar</span>
<a name="l1961"><span class="linenum">1961</span></a>  <span class="comment"> * @copyright  2009 Sam Hemelryk</span>
<a name="l1962"><span class="linenum">1962</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l1963"><span class="linenum">1963</span></a>  <span class="comment"> *</span>
<a name="l1964"><span class="linenum">1964</span></a>  <span class="comment"> * @property int $id The id within the event table</span>
<a name="l1965"><span class="linenum">1965</span></a>  <span class="comment"> * @property string $name The name of the event</span>
<a name="l1966"><span class="linenum">1966</span></a>  <span class="comment"> * @property string $description The description of the event</span>
<a name="l1967"><span class="linenum">1967</span></a>  <span class="comment"> * @property int $format The format of the description FORMAT_?</span>
<a name="l1968"><span class="linenum">1968</span></a>  <span class="comment"> * @property int $courseid The course the event is associated with (0 if none)</span>
<a name="l1969"><span class="linenum">1969</span></a>  <span class="comment"> * @property int $groupid The group the event is associated with (0 if none)</span>
<a name="l1970"><span class="linenum">1970</span></a>  <span class="comment"> * @property int $userid The user the event is associated with (0 if none)</span>
<a name="l1971"><span class="linenum">1971</span></a>  <span class="comment"> * @property int $repeatid If this is a repeated event this will be set to the</span>
<a name="l1972"><span class="linenum">1972</span></a>  <span class="comment"> *                          id of the original</span>
<a name="l1973"><span class="linenum">1973</span></a>  <span class="comment"> * @property string $modulename If added by a module this will be the module name</span>
<a name="l1974"><span class="linenum">1974</span></a>  <span class="comment"> * @property int $instance If added by a module this will be the module instance</span>
<a name="l1975"><span class="linenum">1975</span></a>  <span class="comment"> * @property string $eventtype The event type</span>
<a name="l1976"><span class="linenum">1976</span></a>  <span class="comment"> * @property int $timestart The start time as a timestamp</span>
<a name="l1977"><span class="linenum">1977</span></a>  <span class="comment"> * @property int $timeduration The duration of the event in seconds</span>
<a name="l1978"><span class="linenum">1978</span></a>  <span class="comment"> * @property int $visible 1 if the event is visible</span>
<a name="l1979"><span class="linenum">1979</span></a>  <span class="comment"> * @property int $uuid ?</span>
<a name="l1980"><span class="linenum">1980</span></a>  <span class="comment"> * @property int $sequence ?</span>
<a name="l1981"><span class="linenum">1981</span></a>  <span class="comment"> * @property int $timemodified The time last modified as a timestamp</span>
<a name="l1982"><span class="linenum">1982</span></a>  <span class="comment"> */</span>
<a name="l1983"><span class="linenum">1983</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('calendar_event')" href="../_classes/calendar_event.html" onMouseOver="classPopup(event,'calendar_event')">calendar_event</a> {
<a name="l1984"><span class="linenum">1984</span></a>  
<a name="l1985"><span class="linenum">1985</span></a>  <span class="comment">    /** @var array An object containing the event properties can be accessed via the magic __get/set methods */</span>
<a name="l1986"><span class="linenum">1986</span></a>      protected <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a> = null;
<a name="l1987"><span class="linenum">1987</span></a>  
<a name="l1988"><span class="linenum">1988</span></a>      <span class="comment">/**</span>
<a name="l1989"><span class="linenum">1989</span></a>  <span class="comment">     * @var string The converted event discription with file paths resolved. This gets populated when someone requests description for the first time */</span>
<a name="l1990"><span class="linenum">1990</span></a>      protected <a class="var it14230" onMouseOver="hilite(14230)" onMouseOut="lolite()" onClick="logVariable('_description')" href="../_variables/_description.html">$_description</a> = null;
<a name="l1991"><span class="linenum">1991</span></a>  
<a name="l1992"><span class="linenum">1992</span></a>  <span class="comment">    /** @var array The options to use with this description editor */</span>
<a name="l1993"><span class="linenum">1993</span></a>      protected <a class="var it2631" onMouseOver="hilite(2631)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../_variables/editoroptions.html">$editoroptions</a> = array(
<a name="l1994"><span class="linenum">1994</span></a>              'subdirs'=&gt;false,
<a name="l1995"><span class="linenum">1995</span></a>              'forcehttps'=&gt;false,
<a name="l1996"><span class="linenum">1996</span></a>              'maxfiles'=&gt;-1,
<a name="l1997"><span class="linenum">1997</span></a>              'maxbytes'=&gt;null,
<a name="l1998"><span class="linenum">1998</span></a>              'trusttext'=&gt;false);
<a name="l1999"><span class="linenum">1999</span></a>  
<a name="l2000"><span class="linenum">2000</span></a>  <span class="comment">    /** @var object The context to use with the description editor */</span>
<a name="l2001"><span class="linenum">2001</span></a>      protected <a class="var it39048" onMouseOver="hilite(39048)" onMouseOut="lolite()" onClick="logVariable('editorcontext')" href="../_variables/editorcontext.html">$editorcontext</a> = null;
<a name="l2002"><span class="linenum">2002</span></a>  
<a name="l2003"><span class="linenum">2003</span></a>      <span class="comment">/**</span>
<a name="l2004"><span class="linenum">2004</span></a>  <span class="comment">     * Instantiates a new event and optionally populates its properties with the</span>
<a name="l2005"><span class="linenum">2005</span></a>  <span class="comment">     * data provided</span>
<a name="l2006"><span class="linenum">2006</span></a>  <span class="comment">     *</span>
<a name="l2007"><span class="linenum">2007</span></a>  <span class="comment">     * @param stdClass $data Optional. An object containing the properties to for</span>
<a name="l2008"><span class="linenum">2008</span></a>  <span class="comment">     *                  an event</span>
<a name="l2009"><span class="linenum">2009</span></a>  <span class="comment">     */</span>
<a name="l2010"><span class="linenum">2010</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>=null) {
<a name="l2011"><span class="linenum">2011</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>;
<a name="l2012"><span class="linenum">2012</span></a>  
<a name="l2013"><span class="linenum">2013</span></a>  <span class="comment">        // First convert to object if it is not already (should either be object or assoc array)</span>
<a name="l2014"><span class="linenum">2014</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>)) {
<a name="l2015"><span class="linenum">2015</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a> = (object)<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>;
<a name="l2016"><span class="linenum">2016</span></a>          }
<a name="l2017"><span class="linenum">2017</span></a>  
<a name="l2018"><span class="linenum">2018</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editoroptions')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/editoroptions.html">editoroptions</a>['maxbytes'] = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('maxbytes')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/maxbytes.html">maxbytes</a>;
<a name="l2019"><span class="linenum">2019</span></a>  
<a name="l2020"><span class="linenum">2020</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('eventrepeats')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/eventrepeats.html">eventrepeats</a> = 0;
<a name="l2021"><span class="linenum">2021</span></a>  
<a name="l2022"><span class="linenum">2022</span></a>          if (empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)) {
<a name="l2023"><span class="linenum">2023</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = null;
<a name="l2024"><span class="linenum">2024</span></a>          }
<a name="l2025"><span class="linenum">2025</span></a>  
<a name="l2026"><span class="linenum">2026</span></a>          if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('subscriptionid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/subscriptionid.html">subscriptionid</a>)) {
<a name="l2027"><span class="linenum">2027</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('subscription')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/subscription.html">subscription</a> = <a class="function" onClick="logFunction('calendar_get_subscription')" href="../_functions/calendar_get_subscription.html" onMouseOver="funcPopup(event,'calendar_get_subscription')">calendar_get_subscription</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('subscriptionid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/subscriptionid.html">subscriptionid</a>);
<a name="l2028"><span class="linenum">2028</span></a>          }
<a name="l2029"><span class="linenum">2029</span></a>  
<a name="l2030"><span class="linenum">2030</span></a>  <span class="comment">        // Default to a user event</span>
<a name="l2031"><span class="linenum">2031</span></a>          if (empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('eventtype')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/eventtype.html">eventtype</a>)) {
<a name="l2032"><span class="linenum">2032</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('eventtype')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/eventtype.html">eventtype</a> = 'user';
<a name="l2033"><span class="linenum">2033</span></a>          }
<a name="l2034"><span class="linenum">2034</span></a>  
<a name="l2035"><span class="linenum">2035</span></a>  <span class="comment">        // Default to the current user</span>
<a name="l2036"><span class="linenum">2036</span></a>          if (empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('userid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>)) {
<a name="l2037"><span class="linenum">2037</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('userid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a> = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l2038"><span class="linenum">2038</span></a>          }
<a name="l2039"><span class="linenum">2039</span></a>  
<a name="l2040"><span class="linenum">2040</span></a>          if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timeduration')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/timeduration.html">timeduration</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timeduration')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/timeduration.html">timeduration</a>)) {
<a name="l2041"><span class="linenum">2041</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timeduration')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/timeduration.html">timeduration</a> = <a class="function" onClick="logFunction('make_timestamp')" href="../_functions/make_timestamp.html" onMouseOver="funcPopup(event,'make_timestamp')">make_timestamp</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timeduration')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/timeduration.html">timeduration</a>['year'], <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timeduration')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/timeduration.html">timeduration</a>['month'], <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timeduration')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/timeduration.html">timeduration</a>['day'], <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timeduration')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/timeduration.html">timeduration</a>['hour'], <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timeduration')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/timeduration.html">timeduration</a>['minute']) - <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timestart')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/timestart.html">timestart</a>;
<a name="l2042"><span class="linenum">2042</span></a>          }
<a name="l2043"><span class="linenum">2043</span></a>          if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('description')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/description.html">description</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('description')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/description.html">description</a>)) {
<a name="l2044"><span class="linenum">2044</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('format')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/format.html">format</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('description')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/description.html">description</a>['format'];
<a name="l2045"><span class="linenum">2045</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('description')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/description.html">description</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('description')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/description.html">description</a>['text'];
<a name="l2046"><span class="linenum">2046</span></a>          } else if (empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('description')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/description.html">description</a>)) {
<a name="l2047"><span class="linenum">2047</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('description')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/description.html">description</a> = '';
<a name="l2048"><span class="linenum">2048</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('format')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/format.html">format</a> = <a class="function" onClick="logFunction('editors_get_preferred_format')" href="../_functions/editors_get_preferred_format.html" onMouseOver="funcPopup(event,'editors_get_preferred_format')">editors_get_preferred_format</a>();
<a name="l2049"><span class="linenum">2049</span></a>          }
<a name="l2050"><span class="linenum">2050</span></a>  <span class="comment">        // Ensure form is defaulted correctly</span>
<a name="l2051"><span class="linenum">2051</span></a>          if (empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('format')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/format.html">format</a>)) {
<a name="l2052"><span class="linenum">2052</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('format')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/format.html">format</a> = <a class="function" onClick="logFunction('editors_get_preferred_format')" href="../_functions/editors_get_preferred_format.html" onMouseOver="funcPopup(event,'editors_get_preferred_format')">editors_get_preferred_format</a>();
<a name="l2053"><span class="linenum">2053</span></a>          }
<a name="l2054"><span class="linenum">2054</span></a>  
<a name="l2055"><span class="linenum">2055</span></a>          if (empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('context')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/context.html">context</a>)) {
<a name="l2056"><span class="linenum">2056</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('context')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/context.html">context</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('calculate_context')" href="../_functions/calculate_context.html" onMouseOver="funcPopup(event,'calculate_context')">calculate_context</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>);
<a name="l2057"><span class="linenum">2057</span></a>          }
<a name="l2058"><span class="linenum">2058</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>;
<a name="l2059"><span class="linenum">2059</span></a>      }
<a name="l2060"><span class="linenum">2060</span></a>  
<a name="l2061"><span class="linenum">2061</span></a>      <span class="comment">/**</span>
<a name="l2062"><span class="linenum">2062</span></a>  <span class="comment">     * Magic property method</span>
<a name="l2063"><span class="linenum">2063</span></a>  <span class="comment">     *</span>
<a name="l2064"><span class="linenum">2064</span></a>  <span class="comment">     * Attempts to call a set_$key method if one exists otherwise falls back</span>
<a name="l2065"><span class="linenum">2065</span></a>  <span class="comment">     * to simply set the property</span>
<a name="l2066"><span class="linenum">2066</span></a>  <span class="comment">     *</span>
<a name="l2067"><span class="linenum">2067</span></a>  <span class="comment">     * @param string $key property name</span>
<a name="l2068"><span class="linenum">2068</span></a>  <span class="comment">     * @param mixed $value value of the property</span>
<a name="l2069"><span class="linenum">2069</span></a>  <span class="comment">     */</span>
<a name="l2070"><span class="linenum">2070</span></a>      public function <a class="function" onClick="logFunction('__set')" href="../_functions/__set.html" onMouseOver="funcPopup(event,'__set')">__set</a>(<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l2071"><span class="linenum">2071</span></a>          if (<a class="phpfunction" onClick="logFunction('method_exists')" href="../_functions/method_exists.html" onMouseOver="phpfuncPopup(event,'method_exists')">method_exists</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>, 'set_'.<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>)) {
<a name="l2072"><span class="linenum">2072</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;{'set_'.<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>}(<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>);
<a name="l2073"><span class="linenum">2073</span></a>          }
<a name="l2074"><span class="linenum">2074</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;{<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>} = <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>;
<a name="l2075"><span class="linenum">2075</span></a>      }
<a name="l2076"><span class="linenum">2076</span></a>  
<a name="l2077"><span class="linenum">2077</span></a>      <span class="comment">/**</span>
<a name="l2078"><span class="linenum">2078</span></a>  <span class="comment">     * Magic get method</span>
<a name="l2079"><span class="linenum">2079</span></a>  <span class="comment">     *</span>
<a name="l2080"><span class="linenum">2080</span></a>  <span class="comment">     * Attempts to call a get_$key method to return the property and ralls over</span>
<a name="l2081"><span class="linenum">2081</span></a>  <span class="comment">     * to return the raw property</span>
<a name="l2082"><span class="linenum">2082</span></a>  <span class="comment">     *</span>
<a name="l2083"><span class="linenum">2083</span></a>  <span class="comment">     * @param string $key property name</span>
<a name="l2084"><span class="linenum">2084</span></a>  <span class="comment">     * @return mixed property value</span>
<a name="l2085"><span class="linenum">2085</span></a>  <span class="comment">     */</span>
<a name="l2086"><span class="linenum">2086</span></a>      public function <a class="function" onClick="logFunction('__get')" href="../_functions/__get.html" onMouseOver="funcPopup(event,'__get')">__get</a>(<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>) {
<a name="l2087"><span class="linenum">2087</span></a>          if (<a class="phpfunction" onClick="logFunction('method_exists')" href="../_functions/method_exists.html" onMouseOver="phpfuncPopup(event,'method_exists')">method_exists</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>, 'get_'.<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>)) {
<a name="l2088"><span class="linenum">2088</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;{'get_'.<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>}();
<a name="l2089"><span class="linenum">2089</span></a>          }
<a name="l2090"><span class="linenum">2090</span></a>          if (!isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;{<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>})) {
<a name="l2091"><span class="linenum">2091</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Undefined property requested');
<a name="l2092"><span class="linenum">2092</span></a>          }
<a name="l2093"><span class="linenum">2093</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;{<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>};
<a name="l2094"><span class="linenum">2094</span></a>      }
<a name="l2095"><span class="linenum">2095</span></a>  
<a name="l2096"><span class="linenum">2096</span></a>      <span class="comment">/**</span>
<a name="l2097"><span class="linenum">2097</span></a>  <span class="comment">     * Stupid PHP needs an isset magic method if you use the get magic method and</span>
<a name="l2098"><span class="linenum">2098</span></a>  <span class="comment">     * still want empty calls to work.... blah ~!</span>
<a name="l2099"><span class="linenum">2099</span></a>  <span class="comment">     *</span>
<a name="l2100"><span class="linenum">2100</span></a>  <span class="comment">     * @param string $key $key property name</span>
<a name="l2101"><span class="linenum">2101</span></a>  <span class="comment">     * @return bool|mixed property value, false if property is not exist</span>
<a name="l2102"><span class="linenum">2102</span></a>  <span class="comment">     */</span>
<a name="l2103"><span class="linenum">2103</span></a>      public function <a class="function" onClick="logFunction('__isset')" href="../_functions/__isset.html" onMouseOver="funcPopup(event,'__isset')">__isset</a>(<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>) {
<a name="l2104"><span class="linenum">2104</span></a>          return !empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;{<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>});
<a name="l2105"><span class="linenum">2105</span></a>      }
<a name="l2106"><span class="linenum">2106</span></a>  
<a name="l2107"><span class="linenum">2107</span></a>      <span class="comment">/**</span>
<a name="l2108"><span class="linenum">2108</span></a>  <span class="comment">     * Calculate the context value needed for calendar_event.</span>
<a name="l2109"><span class="linenum">2109</span></a>  <span class="comment">     * Event's type can be determine by the available value store in $data</span>
<a name="l2110"><span class="linenum">2110</span></a>  <span class="comment">     * It is important to check for the existence of course/courseid to determine</span>
<a name="l2111"><span class="linenum">2111</span></a>  <span class="comment">     * the course event.</span>
<a name="l2112"><span class="linenum">2112</span></a>  <span class="comment">     * Default value is set to CONTEXT_USER</span>
<a name="l2113"><span class="linenum">2113</span></a>  <span class="comment">     *</span>
<a name="l2114"><span class="linenum">2114</span></a>  <span class="comment">     * @param stdClass $data information about event</span>
<a name="l2115"><span class="linenum">2115</span></a>  <span class="comment">     * @return stdClass The context object.</span>
<a name="l2116"><span class="linenum">2116</span></a>  <span class="comment">     */</span>
<a name="l2117"><span class="linenum">2117</span></a>      protected function <a class="function" onClick="logFunction('calculate_context')" href="../_functions/calculate_context.html" onMouseOver="funcPopup(event,'calculate_context')">calculate_context</a>(stdClass <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>) {
<a name="l2118"><span class="linenum">2118</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2119"><span class="linenum">2119</span></a>  
<a name="l2120"><span class="linenum">2120</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = null;
<a name="l2121"><span class="linenum">2121</span></a>          if (isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>) &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a> &gt; 0) {
<a name="l2122"><span class="linenum">2122</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> =  <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>);
<a name="l2123"><span class="linenum">2123</span></a>          } else if (isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('course')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/course.html">course</a>) &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('course')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/course.html">course</a> &gt; 0) {
<a name="l2124"><span class="linenum">2124</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> =  <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('course')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/course.html">course</a>);
<a name="l2125"><span class="linenum">2125</span></a>          } else if (isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('groupid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/groupid.html">groupid</a>) &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('groupid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/groupid.html">groupid</a> &gt; 0) {
<a name="l2126"><span class="linenum">2126</span></a>              <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('groups', array('id'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('groupid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/groupid.html">groupid</a>));
<a name="l2127"><span class="linenum">2127</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('courseid')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>);
<a name="l2128"><span class="linenum">2128</span></a>          } else if (isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('userid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>) &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('userid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a> &gt; 0 &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('userid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a> == <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l2129"><span class="linenum">2129</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> =  <a class="class" onClick="logClass('context_user')" href="../_classes/context_user.html" onMouseOver="classPopup(event,'context_user')">context_user</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('userid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>);
<a name="l2130"><span class="linenum">2130</span></a>          } else if (isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('userid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>) &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('userid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a> &gt; 0 &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('userid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a> != <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a> &amp;&amp;
<a name="l2131"><span class="linenum">2131</span></a>                     isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('instance')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>) &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('instance')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a> &gt; 0) {
<a name="l2132"><span class="linenum">2132</span></a>              <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('modulename')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/modulename.html">modulename</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('instance')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>, 0, false, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l2133"><span class="linenum">2133</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> =  <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('course')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../_variables/course.html">course</a>);
<a name="l2134"><span class="linenum">2134</span></a>          } else {
<a name="l2135"><span class="linenum">2135</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> =  <a class="class" onClick="logClass('context_user')" href="../_classes/context_user.html" onMouseOver="classPopup(event,'context_user')">context_user</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('userid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>);
<a name="l2136"><span class="linenum">2136</span></a>          }
<a name="l2137"><span class="linenum">2137</span></a>  
<a name="l2138"><span class="linenum">2138</span></a>          return <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>;
<a name="l2139"><span class="linenum">2139</span></a>      }
<a name="l2140"><span class="linenum">2140</span></a>  
<a name="l2141"><span class="linenum">2141</span></a>      <span class="comment">/**</span>
<a name="l2142"><span class="linenum">2142</span></a>  <span class="comment">     * Returns an array of editoroptions for this event: Called by __get</span>
<a name="l2143"><span class="linenum">2143</span></a>  <span class="comment">     * Please use $blah = $event-&gt;editoroptions;</span>
<a name="l2144"><span class="linenum">2144</span></a>  <span class="comment">     *</span>
<a name="l2145"><span class="linenum">2145</span></a>  <span class="comment">     * @return array event editor options</span>
<a name="l2146"><span class="linenum">2146</span></a>  <span class="comment">     */</span>
<a name="l2147"><span class="linenum">2147</span></a>      protected function <a class="function" onClick="logFunction('get_editoroptions')" href="../_functions/get_editoroptions.html" onMouseOver="funcPopup(event,'get_editoroptions')">get_editoroptions</a>() {
<a name="l2148"><span class="linenum">2148</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editoroptions')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/editoroptions.html">editoroptions</a>;
<a name="l2149"><span class="linenum">2149</span></a>      }
<a name="l2150"><span class="linenum">2150</span></a>  
<a name="l2151"><span class="linenum">2151</span></a>      <span class="comment">/**</span>
<a name="l2152"><span class="linenum">2152</span></a>  <span class="comment">     * Returns an event description: Called by __get</span>
<a name="l2153"><span class="linenum">2153</span></a>  <span class="comment">     * Please use $blah = $event-&gt;description;</span>
<a name="l2154"><span class="linenum">2154</span></a>  <span class="comment">     *</span>
<a name="l2155"><span class="linenum">2155</span></a>  <span class="comment">     * @return string event description</span>
<a name="l2156"><span class="linenum">2156</span></a>  <span class="comment">     */</span>
<a name="l2157"><span class="linenum">2157</span></a>      protected function <a class="function" onClick="logFunction('get_description')" href="../_functions/get_description.html" onMouseOver="funcPopup(event,'get_description')">get_description</a>() {
<a name="l2158"><span class="linenum">2158</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l2159"><span class="linenum">2159</span></a>  
<a name="l2160"><span class="linenum">2160</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> . '/filelib.php');
<a name="l2161"><span class="linenum">2161</span></a>  
<a name="l2162"><span class="linenum">2162</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_description')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_description.html">_description</a> === null) {
<a name="l2163"><span class="linenum">2163</span></a>  <span class="comment">            // Check if we have already resolved the context for this event</span>
<a name="l2164"><span class="linenum">2164</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editorcontext')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/editorcontext.html">editorcontext</a> === null) {
<a name="l2165"><span class="linenum">2165</span></a>  <span class="comment">                // Switch on the event type to decide upon the appropriate context</span>
<a name="l2166"><span class="linenum">2166</span></a>  <span class="comment">                // to use for this event</span>
<a name="l2167"><span class="linenum">2167</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editorcontext')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/editorcontext.html">editorcontext</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;context;
<a name="l2168"><span class="linenum">2168</span></a>                  if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;eventtype != 'user' &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;eventtype != 'course'
<a name="l2169"><span class="linenum">2169</span></a>                          &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;eventtype != 'site' &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;eventtype != 'group') {
<a name="l2170"><span class="linenum">2170</span></a>                      return <a class="function" onClick="logFunction('clean_text')" href="../_functions/clean_text.html" onMouseOver="funcPopup(event,'clean_text')">clean_text</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;description, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;format);
<a name="l2171"><span class="linenum">2171</span></a>                  }
<a name="l2172"><span class="linenum">2172</span></a>              }
<a name="l2173"><span class="linenum">2173</span></a>  
<a name="l2174"><span class="linenum">2174</span></a>  <span class="comment">            // Work out the item id for the editor, if this is a repeated event then the files will</span>
<a name="l2175"><span class="linenum">2175</span></a>  <span class="comment">            // be associated with the original</span>
<a name="l2176"><span class="linenum">2176</span></a>              if (!empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;repeatid) &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;repeatid &gt; 0) {
<a name="l2177"><span class="linenum">2177</span></a>                  <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;repeatid;
<a name="l2178"><span class="linenum">2178</span></a>              } else {
<a name="l2179"><span class="linenum">2179</span></a>                  <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;id;
<a name="l2180"><span class="linenum">2180</span></a>              }
<a name="l2181"><span class="linenum">2181</span></a>  
<a name="l2182"><span class="linenum">2182</span></a>  <span class="comment">            // Convert file paths in the description so that things display correctly</span>
<a name="l2183"><span class="linenum">2183</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_description')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_description.html">_description</a> = <a class="function" onClick="logFunction('file_rewrite_pluginfile_urls')" href="../_functions/file_rewrite_pluginfile_urls.html" onMouseOver="funcPopup(event,'file_rewrite_pluginfile_urls')">file_rewrite_pluginfile_urls</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;description, '<a class="filename" href="../pluginfile.php.html">pluginfile.php</a>', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editorcontext')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/editorcontext.html">editorcontext</a>-&gt;id, 'calendar', 'event_description', <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a>);
<a name="l2184"><span class="linenum">2184</span></a>  <span class="comment">            // Clean the text so no nasties get through</span>
<a name="l2185"><span class="linenum">2185</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_description')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_description.html">_description</a> = <a class="function" onClick="logFunction('clean_text')" href="../_functions/clean_text.html" onMouseOver="funcPopup(event,'clean_text')">clean_text</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_description')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_description.html">_description</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;format);
<a name="l2186"><span class="linenum">2186</span></a>          }
<a name="l2187"><span class="linenum">2187</span></a>  <span class="comment">        // Finally return the description</span>
<a name="l2188"><span class="linenum">2188</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('_description')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/_description.html">_description</a>;
<a name="l2189"><span class="linenum">2189</span></a>      }
<a name="l2190"><span class="linenum">2190</span></a>  
<a name="l2191"><span class="linenum">2191</span></a>      <span class="comment">/**</span>
<a name="l2192"><span class="linenum">2192</span></a>  <span class="comment">     * Return the number of repeat events there are in this events series</span>
<a name="l2193"><span class="linenum">2193</span></a>  <span class="comment">     *</span>
<a name="l2194"><span class="linenum">2194</span></a>  <span class="comment">     * @return int number of event repeated</span>
<a name="l2195"><span class="linenum">2195</span></a>  <span class="comment">     */</span>
<a name="l2196"><span class="linenum">2196</span></a>      public function <a class="function" onClick="logFunction('count_repeats')" href="../_functions/count_repeats.html" onMouseOver="funcPopup(event,'count_repeats')">count_repeats</a>() {
<a name="l2197"><span class="linenum">2197</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2198"><span class="linenum">2198</span></a>          if (!empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;repeatid)) {
<a name="l2199"><span class="linenum">2199</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;eventrepeats = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>('event', array('repeatid'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;repeatid));
<a name="l2200"><span class="linenum">2200</span></a>  <span class="comment">            // We don't want to count ourselves</span>
<a name="l2201"><span class="linenum">2201</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;eventrepeats--;
<a name="l2202"><span class="linenum">2202</span></a>          }
<a name="l2203"><span class="linenum">2203</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;eventrepeats;
<a name="l2204"><span class="linenum">2204</span></a>      }
<a name="l2205"><span class="linenum">2205</span></a>  
<a name="l2206"><span class="linenum">2206</span></a>      <span class="comment">/**</span>
<a name="l2207"><span class="linenum">2207</span></a>  <span class="comment">     * Update or create an event within the database</span>
<a name="l2208"><span class="linenum">2208</span></a>  <span class="comment">     *</span>
<a name="l2209"><span class="linenum">2209</span></a>  <span class="comment">     * Pass in a object containing the event properties and this function will</span>
<a name="l2210"><span class="linenum">2210</span></a>  <span class="comment">     * insert it into the database and deal with any associated files</span>
<a name="l2211"><span class="linenum">2211</span></a>  <span class="comment">     *</span>
<a name="l2212"><span class="linenum">2212</span></a>  <span class="comment">     * @see self::create()</span>
<a name="l2213"><span class="linenum">2213</span></a>  <span class="comment">     * @see self::update()</span>
<a name="l2214"><span class="linenum">2214</span></a>  <span class="comment">     *</span>
<a name="l2215"><span class="linenum">2215</span></a>  <span class="comment">     * @param stdClass $data object of event</span>
<a name="l2216"><span class="linenum">2216</span></a>  <span class="comment">     * @param bool $checkcapability if moodle should check calendar managing capability or not</span>
<a name="l2217"><span class="linenum">2217</span></a>  <span class="comment">     * @return bool event updated</span>
<a name="l2218"><span class="linenum">2218</span></a>  <span class="comment">     */</span>
<a name="l2219"><span class="linenum">2219</span></a>      public function <a class="function" onClick="logFunction('update')" href="../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>, <a class="var it39049" onMouseOver="hilite(39049)" onMouseOut="lolite()" onClick="logVariable('checkcapability')" href="../_variables/checkcapability.html">$checkcapability</a>=true) {
<a name="l2220"><span class="linenum">2220</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>;
<a name="l2221"><span class="linenum">2221</span></a>  
<a name="l2222"><span class="linenum">2222</span></a>          foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>=&gt;<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l2223"><span class="linenum">2223</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> = <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>;
<a name="l2224"><span class="linenum">2224</span></a>          }
<a name="l2225"><span class="linenum">2225</span></a>  
<a name="l2226"><span class="linenum">2226</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;timemodified = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l2227"><span class="linenum">2227</span></a>          <a class="var it39050" onMouseOver="hilite(39050)" onMouseOut="lolite()" onClick="logVariable('usingeditor')" href="../_variables/usingeditor.html">$usingeditor</a> = (!empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;description) &amp;&amp; <a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;description));
<a name="l2228"><span class="linenum">2228</span></a>  
<a name="l2229"><span class="linenum">2229</span></a>  <span class="comment">        // Prepare event data.</span>
<a name="l2230"><span class="linenum">2230</span></a>          <a class="var it39051" onMouseOver="hilite(39051)" onMouseOut="lolite()" onClick="logVariable('eventargs')" href="../_variables/eventargs.html">$eventargs</a> = array(
<a name="l2231"><span class="linenum">2231</span></a>              'context' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;context,
<a name="l2232"><span class="linenum">2232</span></a>              'objectid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;id,
<a name="l2233"><span class="linenum">2233</span></a>              'other' =&gt; array(
<a name="l2234"><span class="linenum">2234</span></a>                  'repeatid' =&gt; empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;repeatid) ? 0 : <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;repeatid,
<a name="l2235"><span class="linenum">2235</span></a>                  'timestart' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;timestart,
<a name="l2236"><span class="linenum">2236</span></a>                  'name' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;name
<a name="l2237"><span class="linenum">2237</span></a>              )
<a name="l2238"><span class="linenum">2238</span></a>          );
<a name="l2239"><span class="linenum">2239</span></a>  
<a name="l2240"><span class="linenum">2240</span></a>          if (empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;id) || <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;id &lt; 1) {
<a name="l2241"><span class="linenum">2241</span></a>  
<a name="l2242"><span class="linenum">2242</span></a>              if (<a class="var it39049" onMouseOver="hilite(39049)" onMouseOut="lolite()" onClick="logVariable('checkcapability')" href="../_variables/checkcapability.html">$checkcapability</a>) {
<a name="l2243"><span class="linenum">2243</span></a>                  if (!<a class="function" onClick="logFunction('calendar_add_event_allowed')" href="../_functions/calendar_add_event_allowed.html" onMouseOver="funcPopup(event,'calendar_add_event_allowed')">calendar_add_event_allowed</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>)) {
<a name="l2244"><span class="linenum">2244</span></a>                      <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('nopermissiontoupdatecalendar');
<a name="l2245"><span class="linenum">2245</span></a>                  }
<a name="l2246"><span class="linenum">2246</span></a>              }
<a name="l2247"><span class="linenum">2247</span></a>  
<a name="l2248"><span class="linenum">2248</span></a>              if (<a class="var it39050" onMouseOver="hilite(39050)" onMouseOut="lolite()" onClick="logVariable('usingeditor')" href="../_variables/usingeditor.html">$usingeditor</a>) {
<a name="l2249"><span class="linenum">2249</span></a>                  switch (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;eventtype) {
<a name="l2250"><span class="linenum">2250</span></a>                      case 'user':
<a name="l2251"><span class="linenum">2251</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;courseid = 0;
<a name="l2252"><span class="linenum">2252</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;course = 0;
<a name="l2253"><span class="linenum">2253</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;groupid = 0;
<a name="l2254"><span class="linenum">2254</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;userid = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l2255"><span class="linenum">2255</span></a>                          break;
<a name="l2256"><span class="linenum">2256</span></a>                      case 'site':
<a name="l2257"><span class="linenum">2257</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;courseid = <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>;
<a name="l2258"><span class="linenum">2258</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;course = <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>;
<a name="l2259"><span class="linenum">2259</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;groupid = 0;
<a name="l2260"><span class="linenum">2260</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;userid = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l2261"><span class="linenum">2261</span></a>                          break;
<a name="l2262"><span class="linenum">2262</span></a>                      case 'course':
<a name="l2263"><span class="linenum">2263</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;groupid = 0;
<a name="l2264"><span class="linenum">2264</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;userid = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l2265"><span class="linenum">2265</span></a>                          break;
<a name="l2266"><span class="linenum">2266</span></a>                      case 'group':
<a name="l2267"><span class="linenum">2267</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;userid = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l2268"><span class="linenum">2268</span></a>                          break;
<a name="l2269"><span class="linenum">2269</span></a>                      default:
<a name="l2270"><span class="linenum">2270</span></a>  <span class="comment">                        // Ewww we should NEVER get here, but just incase we do lets</span>
<a name="l2271"><span class="linenum">2271</span></a>  <span class="comment">                        // fail gracefully</span>
<a name="l2272"><span class="linenum">2272</span></a>                          <a class="var it39050" onMouseOver="hilite(39050)" onMouseOut="lolite()" onClick="logVariable('usingeditor')" href="../_variables/usingeditor.html">$usingeditor</a> = false;
<a name="l2273"><span class="linenum">2273</span></a>                          break;
<a name="l2274"><span class="linenum">2274</span></a>                  }
<a name="l2275"><span class="linenum">2275</span></a>  
<a name="l2276"><span class="linenum">2276</span></a>  <span class="comment">                // If we are actually using the editor, we recalculate the context because some default values</span>
<a name="l2277"><span class="linenum">2277</span></a>  <span class="comment">                // were set when calculate_context() was called from the constructor.</span>
<a name="l2278"><span class="linenum">2278</span></a>                  if (<a class="var it39050" onMouseOver="hilite(39050)" onMouseOut="lolite()" onClick="logVariable('usingeditor')" href="../_variables/usingeditor.html">$usingeditor</a>) {
<a name="l2279"><span class="linenum">2279</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;context = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('calculate_context')" href="../_functions/calculate_context.html" onMouseOver="funcPopup(event,'calculate_context')">calculate_context</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>);
<a name="l2280"><span class="linenum">2280</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editorcontext')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/editorcontext.html">editorcontext</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;context;
<a name="l2281"><span class="linenum">2281</span></a>                  }
<a name="l2282"><span class="linenum">2282</span></a>  
<a name="l2283"><span class="linenum">2283</span></a>                  <a class="var it1042" onMouseOver="hilite(1042)" onMouseOut="lolite()" onClick="logVariable('editor')" href="../_variables/editor.html">$editor</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;description;
<a name="l2284"><span class="linenum">2284</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;format = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;description['format'];
<a name="l2285"><span class="linenum">2285</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;description = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;description['text'];
<a name="l2286"><span class="linenum">2286</span></a>              }
<a name="l2287"><span class="linenum">2287</span></a>  
<a name="l2288"><span class="linenum">2288</span></a>  <span class="comment">            // Insert the event into the database</span>
<a name="l2289"><span class="linenum">2289</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;id = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('event', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>);
<a name="l2290"><span class="linenum">2290</span></a>  
<a name="l2291"><span class="linenum">2291</span></a>              if (<a class="var it39050" onMouseOver="hilite(39050)" onMouseOut="lolite()" onClick="logVariable('usingeditor')" href="../_variables/usingeditor.html">$usingeditor</a>) {
<a name="l2292"><span class="linenum">2292</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;description = <a class="function" onClick="logFunction('file_save_draft_area_files')" href="../_functions/file_save_draft_area_files.html" onMouseOver="funcPopup(event,'file_save_draft_area_files')">file_save_draft_area_files</a>(
<a name="l2293"><span class="linenum">2293</span></a>                                                  <a class="var it1042" onMouseOver="hilite(1042)" onMouseOut="lolite()" onClick="logVariable('editor')" href="../_variables/editor.html">$editor</a>['itemid'],
<a name="l2294"><span class="linenum">2294</span></a>                                                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editorcontext')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/editorcontext.html">editorcontext</a>-&gt;id,
<a name="l2295"><span class="linenum">2295</span></a>                                                  'calendar',
<a name="l2296"><span class="linenum">2296</span></a>                                                  'event_description',
<a name="l2297"><span class="linenum">2297</span></a>                                                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;id,
<a name="l2298"><span class="linenum">2298</span></a>                                                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editoroptions')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/editoroptions.html">editoroptions</a>,
<a name="l2299"><span class="linenum">2299</span></a>                                                  <a class="var it1042" onMouseOver="hilite(1042)" onMouseOut="lolite()" onClick="logVariable('editor')" href="../_variables/editor.html">$editor</a>['text'],
<a name="l2300"><span class="linenum">2300</span></a>                                                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editoroptions')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/editoroptions.html">editoroptions</a>['forcehttps']);
<a name="l2301"><span class="linenum">2301</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('event', 'description', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;description, array('id'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;id));
<a name="l2302"><span class="linenum">2302</span></a>              }
<a name="l2303"><span class="linenum">2303</span></a>  
<a name="l2304"><span class="linenum">2304</span></a>  <span class="comment">            // Log the event entry.</span>
<a name="l2305"><span class="linenum">2305</span></a>              <a class="var it39051" onMouseOver="hilite(39051)" onMouseOut="lolite()" onClick="logVariable('eventargs')" href="../_variables/eventargs.html">$eventargs</a>['objectid'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;id;
<a name="l2306"><span class="linenum">2306</span></a>              <a class="var it39051" onMouseOver="hilite(39051)" onMouseOut="lolite()" onClick="logVariable('eventargs')" href="../_variables/eventargs.html">$eventargs</a>['context'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;context;
<a name="l2307"><span class="linenum">2307</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('calendar_event_created')" href="../_classes/calendar_event_created.html" onMouseOver="classPopup(event,'calendar_event_created')">calendar_event_created</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it39051" onMouseOver="hilite(39051)" onMouseOut="lolite()" onClick="logVariable('eventargs')" href="../_variables/eventargs.html">$eventargs</a>);
<a name="l2308"><span class="linenum">2308</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l2309"><span class="linenum">2309</span></a>  
<a name="l2310"><span class="linenum">2310</span></a>              <a class="var it39052" onMouseOver="hilite(39052)" onMouseOut="lolite()" onClick="logVariable('repeatedids')" href="../_variables/repeatedids.html">$repeatedids</a> = array();
<a name="l2311"><span class="linenum">2311</span></a>  
<a name="l2312"><span class="linenum">2312</span></a>              if (!empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;repeat)) {
<a name="l2313"><span class="linenum">2313</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;repeatid = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;id;
<a name="l2314"><span class="linenum">2314</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('event', 'repeatid', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;repeatid, array('id'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;id));
<a name="l2315"><span class="linenum">2315</span></a>  
<a name="l2316"><span class="linenum">2316</span></a>                  <a class="var it39053" onMouseOver="hilite(39053)" onMouseOut="lolite()" onClick="logVariable('eventcopy')" href="../_variables/eventcopy.html">$eventcopy</a> = <a class="function" onClick="logFunction('clone')" href="../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>);
<a name="l2317"><span class="linenum">2317</span></a>                  unset(<a class="var it39053" onMouseOver="hilite(39053)" onMouseOut="lolite()" onClick="logVariable('eventcopy')" href="../_variables/eventcopy.html">$eventcopy</a>-&gt;<a onClick="logVariable('id')" class="var it44828" onMouseOver="hilite(44828)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2318"><span class="linenum">2318</span></a>  
<a name="l2319"><span class="linenum">2319</span></a>                  <a class="var it1937" onMouseOver="hilite(1937)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../_variables/timestart.html">$timestart</a> = new DateTime('@' . <a class="var it39053" onMouseOver="hilite(39053)" onMouseOut="lolite()" onClick="logVariable('eventcopy')" href="../_variables/eventcopy.html">$eventcopy</a>-&gt;<a onClick="logVariable('timestart')" class="var it44828" onMouseOver="hilite(44828)" onMouseOut="lolite()" href="../_variables/timestart.html">timestart</a>);
<a name="l2320"><span class="linenum">2320</span></a>                  <a class="var it1937" onMouseOver="hilite(1937)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../_variables/timestart.html">$timestart</a>-&gt;<a class="function" onClick="logFunction('setTimezone')" href="../_functions/settimezone.html" onMouseOver="funcPopup(event,'settimezone')">setTimezone</a>(<a class="class" onClick="logClass('core_date')" href="../_classes/core_date.html" onMouseOver="classPopup(event,'core_date')">core_date</a>::<a class="function" onClick="logFunction('get_user_timezone_object')" href="../_functions/get_user_timezone_object.html" onMouseOver="funcPopup(event,'get_user_timezone_object')">get_user_timezone_object</a>());
<a name="l2321"><span class="linenum">2321</span></a>  
<a name="l2322"><span class="linenum">2322</span></a>                  for(<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> = 1; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> &lt; <a class="var it39053" onMouseOver="hilite(39053)" onMouseOut="lolite()" onClick="logVariable('eventcopy')" href="../_variables/eventcopy.html">$eventcopy</a>-&gt;<a onClick="logVariable('repeats')" class="var it44828" onMouseOver="hilite(44828)" onMouseOut="lolite()" href="../_variables/repeats.html">repeats</a>; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>++) {
<a name="l2323"><span class="linenum">2323</span></a>  
<a name="l2324"><span class="linenum">2324</span></a>                      <a class="var it1937" onMouseOver="hilite(1937)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../_variables/timestart.html">$timestart</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(new DateInterval('P7D'));
<a name="l2325"><span class="linenum">2325</span></a>                      <a class="var it39053" onMouseOver="hilite(39053)" onMouseOut="lolite()" onClick="logVariable('eventcopy')" href="../_variables/eventcopy.html">$eventcopy</a>-&gt;<a onClick="logVariable('timestart')" class="var it44828" onMouseOver="hilite(44828)" onMouseOut="lolite()" href="../_variables/timestart.html">timestart</a> = <a class="var it1937" onMouseOver="hilite(1937)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../_variables/timestart.html">$timestart</a>-&gt;<a class="function" onClick="logFunction('getTimestamp')" href="../_functions/gettimestamp.html" onMouseOver="funcPopup(event,'gettimestamp')">getTimestamp</a>();
<a name="l2326"><span class="linenum">2326</span></a>  
<a name="l2327"><span class="linenum">2327</span></a>  <span class="comment">                    // Get the event id for the log record.</span>
<a name="l2328"><span class="linenum">2328</span></a>                      <a class="var it39054" onMouseOver="hilite(39054)" onMouseOut="lolite()" onClick="logVariable('eventcopyid')" href="../_variables/eventcopyid.html">$eventcopyid</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('event', <a class="var it39053" onMouseOver="hilite(39053)" onMouseOut="lolite()" onClick="logVariable('eventcopy')" href="../_variables/eventcopy.html">$eventcopy</a>);
<a name="l2329"><span class="linenum">2329</span></a>  
<a name="l2330"><span class="linenum">2330</span></a>  <span class="comment">                    // If the context has been set delete all associated files</span>
<a name="l2331"><span class="linenum">2331</span></a>                      if (<a class="var it39050" onMouseOver="hilite(39050)" onMouseOut="lolite()" onClick="logVariable('usingeditor')" href="../_variables/usingeditor.html">$usingeditor</a>) {
<a name="l2332"><span class="linenum">2332</span></a>                          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l2333"><span class="linenum">2333</span></a>                          <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../_variables/files.html">$files</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_area_files')" href="../_functions/get_area_files.html" onMouseOver="funcPopup(event,'get_area_files')">get_area_files</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editorcontext')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/editorcontext.html">editorcontext</a>-&gt;id, 'calendar', 'event_description', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;id);
<a name="l2334"><span class="linenum">2334</span></a>                          foreach (<a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../_variables/files.html">$files</a> as <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>) {
<a name="l2335"><span class="linenum">2335</span></a>                              <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('create_file_from_storedfile')" href="../_functions/create_file_from_storedfile.html" onMouseOver="funcPopup(event,'create_file_from_storedfile')">create_file_from_storedfile</a>(array('itemid'=&gt;<a class="var it39054" onMouseOver="hilite(39054)" onMouseOut="lolite()" onClick="logVariable('eventcopyid')" href="../_variables/eventcopyid.html">$eventcopyid</a>), <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>);
<a name="l2336"><span class="linenum">2336</span></a>                          }
<a name="l2337"><span class="linenum">2337</span></a>                      }
<a name="l2338"><span class="linenum">2338</span></a>  
<a name="l2339"><span class="linenum">2339</span></a>                      <a class="var it39052" onMouseOver="hilite(39052)" onMouseOut="lolite()" onClick="logVariable('repeatedids')" href="../_variables/repeatedids.html">$repeatedids</a>[] = <a class="var it39054" onMouseOver="hilite(39054)" onMouseOut="lolite()" onClick="logVariable('eventcopyid')" href="../_variables/eventcopyid.html">$eventcopyid</a>;
<a name="l2340"><span class="linenum">2340</span></a>  
<a name="l2341"><span class="linenum">2341</span></a>  <span class="comment">                    // Trigger an event.</span>
<a name="l2342"><span class="linenum">2342</span></a>                      <a class="var it39051" onMouseOver="hilite(39051)" onMouseOut="lolite()" onClick="logVariable('eventargs')" href="../_variables/eventargs.html">$eventargs</a>['objectid'] = <a class="var it39054" onMouseOver="hilite(39054)" onMouseOut="lolite()" onClick="logVariable('eventcopyid')" href="../_variables/eventcopyid.html">$eventcopyid</a>;
<a name="l2343"><span class="linenum">2343</span></a>                      <a class="var it39051" onMouseOver="hilite(39051)" onMouseOut="lolite()" onClick="logVariable('eventargs')" href="../_variables/eventargs.html">$eventargs</a>['other']['timestart'] = <a class="var it39053" onMouseOver="hilite(39053)" onMouseOut="lolite()" onClick="logVariable('eventcopy')" href="../_variables/eventcopy.html">$eventcopy</a>-&gt;<a onClick="logVariable('timestart')" class="var it44828" onMouseOver="hilite(44828)" onMouseOut="lolite()" href="../_variables/timestart.html">timestart</a>;
<a name="l2344"><span class="linenum">2344</span></a>                      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('calendar_event_created')" href="../_classes/calendar_event_created.html" onMouseOver="classPopup(event,'calendar_event_created')">calendar_event_created</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it39051" onMouseOver="hilite(39051)" onMouseOut="lolite()" onClick="logVariable('eventargs')" href="../_variables/eventargs.html">$eventargs</a>);
<a name="l2345"><span class="linenum">2345</span></a>                      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l2346"><span class="linenum">2346</span></a>                  }
<a name="l2347"><span class="linenum">2347</span></a>              }
<a name="l2348"><span class="linenum">2348</span></a>  
<a name="l2349"><span class="linenum">2349</span></a>  <span class="comment">            // Hook for tracking added events</span>
<a name="l2350"><span class="linenum">2350</span></a>              self::<a class="function" onClick="logFunction('calendar_event_hook')" href="../_functions/calendar_event_hook.html" onMouseOver="funcPopup(event,'calendar_event_hook')">calendar_event_hook</a>('add_event', array(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>, <a class="var it39052" onMouseOver="hilite(39052)" onMouseOut="lolite()" onClick="logVariable('repeatedids')" href="../_variables/repeatedids.html">$repeatedids</a>));
<a name="l2351"><span class="linenum">2351</span></a>              return true;
<a name="l2352"><span class="linenum">2352</span></a>          } else {
<a name="l2353"><span class="linenum">2353</span></a>  
<a name="l2354"><span class="linenum">2354</span></a>              if (<a class="var it39049" onMouseOver="hilite(39049)" onMouseOut="lolite()" onClick="logVariable('checkcapability')" href="../_variables/checkcapability.html">$checkcapability</a>) {
<a name="l2355"><span class="linenum">2355</span></a>                  if(!<a class="function" onClick="logFunction('calendar_edit_event_allowed')" href="../_functions/calendar_edit_event_allowed.html" onMouseOver="funcPopup(event,'calendar_edit_event_allowed')">calendar_edit_event_allowed</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>)) {
<a name="l2356"><span class="linenum">2356</span></a>                      <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('nopermissiontoupdatecalendar');
<a name="l2357"><span class="linenum">2357</span></a>                  }
<a name="l2358"><span class="linenum">2358</span></a>              }
<a name="l2359"><span class="linenum">2359</span></a>  
<a name="l2360"><span class="linenum">2360</span></a>              if (<a class="var it39050" onMouseOver="hilite(39050)" onMouseOut="lolite()" onClick="logVariable('usingeditor')" href="../_variables/usingeditor.html">$usingeditor</a>) {
<a name="l2361"><span class="linenum">2361</span></a>                  if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editorcontext')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/editorcontext.html">editorcontext</a> !== null) {
<a name="l2362"><span class="linenum">2362</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;description = <a class="function" onClick="logFunction('file_save_draft_area_files')" href="../_functions/file_save_draft_area_files.html" onMouseOver="funcPopup(event,'file_save_draft_area_files')">file_save_draft_area_files</a>(
<a name="l2363"><span class="linenum">2363</span></a>                                                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;description['itemid'],
<a name="l2364"><span class="linenum">2364</span></a>                                                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editorcontext')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/editorcontext.html">editorcontext</a>-&gt;id,
<a name="l2365"><span class="linenum">2365</span></a>                                                      'calendar',
<a name="l2366"><span class="linenum">2366</span></a>                                                      'event_description',
<a name="l2367"><span class="linenum">2367</span></a>                                                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;id,
<a name="l2368"><span class="linenum">2368</span></a>                                                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editoroptions')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/editoroptions.html">editoroptions</a>,
<a name="l2369"><span class="linenum">2369</span></a>                                                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;description['text'],
<a name="l2370"><span class="linenum">2370</span></a>                                                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editoroptions')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/editoroptions.html">editoroptions</a>['forcehttps']);
<a name="l2371"><span class="linenum">2371</span></a>                  } else {
<a name="l2372"><span class="linenum">2372</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;format = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;description['format'];
<a name="l2373"><span class="linenum">2373</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;description = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;description['text'];
<a name="l2374"><span class="linenum">2374</span></a>                  }
<a name="l2375"><span class="linenum">2375</span></a>              }
<a name="l2376"><span class="linenum">2376</span></a>  
<a name="l2377"><span class="linenum">2377</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('event', array('id'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;id));
<a name="l2378"><span class="linenum">2378</span></a>  
<a name="l2379"><span class="linenum">2379</span></a>              <a class="var it39055" onMouseOver="hilite(39055)" onMouseOut="lolite()" onClick="logVariable('updaterepeated')" href="../_variables/updaterepeated.html">$updaterepeated</a> = (!empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;repeatid) &amp;&amp; !empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;repeateditall));
<a name="l2380"><span class="linenum">2380</span></a>  
<a name="l2381"><span class="linenum">2381</span></a>              if (<a class="var it39055" onMouseOver="hilite(39055)" onMouseOut="lolite()" onClick="logVariable('updaterepeated')" href="../_variables/updaterepeated.html">$updaterepeated</a>) {
<a name="l2382"><span class="linenum">2382</span></a>  <span class="comment">                // Update all</span>
<a name="l2383"><span class="linenum">2383</span></a>                  if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;timestart != <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timestart')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/timestart.html">timestart</a>) {
<a name="l2384"><span class="linenum">2384</span></a>                      <a class="var it39056" onMouseOver="hilite(39056)" onMouseOut="lolite()" onClick="logVariable('timestartoffset')" href="../_variables/timestartoffset.html">$timestartoffset</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;timestart - <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timestart')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/timestart.html">timestart</a>;
<a name="l2385"><span class="linenum">2385</span></a>                      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;UPDATE {event}
<a name="l2386"><span class="linenum">2386</span></a>                                 SET name = ?,
<a name="l2387"><span class="linenum">2387</span></a>                                     description = ?,
<a name="l2388"><span class="linenum">2388</span></a>                                     timestart = timestart + ?,
<a name="l2389"><span class="linenum">2389</span></a>                                     timeduration = ?,
<a name="l2390"><span class="linenum">2390</span></a>                                     timemodified = ?
<a name="l2391"><span class="linenum">2391</span></a>                               WHERE repeatid = ?&quot;;
<a name="l2392"><span class="linenum">2392</span></a>                      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;name, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;description, <a class="var it39056" onMouseOver="hilite(39056)" onMouseOut="lolite()" onClick="logVariable('timestartoffset')" href="../_variables/timestartoffset.html">$timestartoffset</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;timeduration, <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>(), <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('repeatid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/repeatid.html">repeatid</a>);
<a name="l2393"><span class="linenum">2393</span></a>                  } else {
<a name="l2394"><span class="linenum">2394</span></a>                      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;UPDATE {event} SET name = ?, description = ?, timeduration = ?, timemodified = ? WHERE repeatid = ?&quot;;
<a name="l2395"><span class="linenum">2395</span></a>                      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;name, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;description, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;timeduration, <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>(), <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('repeatid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/repeatid.html">repeatid</a>);
<a name="l2396"><span class="linenum">2396</span></a>                  }
<a name="l2397"><span class="linenum">2397</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('execute')" href="../_functions/execute.html" onMouseOver="funcPopup(event,'execute')">execute</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l2398"><span class="linenum">2398</span></a>  
<a name="l2399"><span class="linenum">2399</span></a>  <span class="comment">                // Trigger an update event for each of the calendar event.</span>
<a name="l2400"><span class="linenum">2400</span></a>                  <a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('event', array('repeatid' =&gt; <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('repeatid')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/repeatid.html">repeatid</a>), '', 'id,timestart');
<a name="l2401"><span class="linenum">2401</span></a>                  foreach (<a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a> as <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>) {
<a name="l2402"><span class="linenum">2402</span></a>                      <a class="var it39051" onMouseOver="hilite(39051)" onMouseOut="lolite()" onClick="logVariable('eventargs')" href="../_variables/eventargs.html">$eventargs</a>['objectid'] = <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('id')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l2403"><span class="linenum">2403</span></a>                      <a class="var it39051" onMouseOver="hilite(39051)" onMouseOut="lolite()" onClick="logVariable('eventargs')" href="../_variables/eventargs.html">$eventargs</a>['other']['timestart'] = <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timestart')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/timestart.html">timestart</a>;
<a name="l2404"><span class="linenum">2404</span></a>                      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('calendar_event_updated')" href="../_classes/calendar_event_updated.html" onMouseOver="classPopup(event,'calendar_event_updated')">calendar_event_updated</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it39051" onMouseOver="hilite(39051)" onMouseOut="lolite()" onClick="logVariable('eventargs')" href="../_variables/eventargs.html">$eventargs</a>);
<a name="l2405"><span class="linenum">2405</span></a>                      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l2406"><span class="linenum">2406</span></a>                  }
<a name="l2407"><span class="linenum">2407</span></a>              } else {
<a name="l2408"><span class="linenum">2408</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('event', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>);
<a name="l2409"><span class="linenum">2409</span></a>                  <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = <a class="class" onClick="logClass('calendar_event')" href="../_classes/calendar_event.html" onMouseOver="classPopup(event,'calendar_event')">calendar_event</a>::<a class="function" onClick="logFunction('load')" href="../_functions/load.html" onMouseOver="funcPopup(event,'load')">load</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;id);
<a name="l2410"><span class="linenum">2410</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a> = <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('properties')" href="../_functions/properties.html" onMouseOver="funcPopup(event,'properties')">properties</a>();
<a name="l2411"><span class="linenum">2411</span></a>  
<a name="l2412"><span class="linenum">2412</span></a>  <span class="comment">                // Trigger an update event.</span>
<a name="l2413"><span class="linenum">2413</span></a>                  <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('calendar_event_updated')" href="../_classes/calendar_event_updated.html" onMouseOver="classPopup(event,'calendar_event_updated')">calendar_event_updated</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it39051" onMouseOver="hilite(39051)" onMouseOut="lolite()" onClick="logVariable('eventargs')" href="../_variables/eventargs.html">$eventargs</a>);
<a name="l2414"><span class="linenum">2414</span></a>                  <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l2415"><span class="linenum">2415</span></a>              }
<a name="l2416"><span class="linenum">2416</span></a>  
<a name="l2417"><span class="linenum">2417</span></a>  <span class="comment">            // Hook for tracking event updates</span>
<a name="l2418"><span class="linenum">2418</span></a>              self::<a class="function" onClick="logFunction('calendar_event_hook')" href="../_functions/calendar_event_hook.html" onMouseOver="funcPopup(event,'calendar_event_hook')">calendar_event_hook</a>('update_event', array(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>, <a class="var it39055" onMouseOver="hilite(39055)" onMouseOut="lolite()" onClick="logVariable('updaterepeated')" href="../_variables/updaterepeated.html">$updaterepeated</a>));
<a name="l2419"><span class="linenum">2419</span></a>              return true;
<a name="l2420"><span class="linenum">2420</span></a>          }
<a name="l2421"><span class="linenum">2421</span></a>      }
<a name="l2422"><span class="linenum">2422</span></a>  
<a name="l2423"><span class="linenum">2423</span></a>      <span class="comment">/**</span>
<a name="l2424"><span class="linenum">2424</span></a>  <span class="comment">     * Deletes an event and if selected an repeated events in the same series</span>
<a name="l2425"><span class="linenum">2425</span></a>  <span class="comment">     *</span>
<a name="l2426"><span class="linenum">2426</span></a>  <span class="comment">     * This function deletes an event, any associated events if $deleterepeated=true,</span>
<a name="l2427"><span class="linenum">2427</span></a>  <span class="comment">     * and cleans up any files associated with the events.</span>
<a name="l2428"><span class="linenum">2428</span></a>  <span class="comment">     *</span>
<a name="l2429"><span class="linenum">2429</span></a>  <span class="comment">     * @see self::delete()</span>
<a name="l2430"><span class="linenum">2430</span></a>  <span class="comment">     *</span>
<a name="l2431"><span class="linenum">2431</span></a>  <span class="comment">     * @param bool $deleterepeated  delete event repeatedly</span>
<a name="l2432"><span class="linenum">2432</span></a>  <span class="comment">     * @return bool succession of deleting event</span>
<a name="l2433"><span class="linenum">2433</span></a>  <span class="comment">     */</span>
<a name="l2434"><span class="linenum">2434</span></a>      public function <a class="function" onClick="logFunction('delete')" href="../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>(<a class="var it39057" onMouseOver="hilite(39057)" onMouseOut="lolite()" onClick="logVariable('deleterepeated')" href="../_variables/deleterepeated.html">$deleterepeated</a>=false) {
<a name="l2435"><span class="linenum">2435</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2436"><span class="linenum">2436</span></a>  
<a name="l2437"><span class="linenum">2437</span></a>  <span class="comment">        // If $this-&gt;properties-&gt;id is not set then something is wrong</span>
<a name="l2438"><span class="linenum">2438</span></a>          if (empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;id)) {
<a name="l2439"><span class="linenum">2439</span></a>              <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Attempting to delete an event before it has been loaded', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l2440"><span class="linenum">2440</span></a>              return false;
<a name="l2441"><span class="linenum">2441</span></a>          }
<a name="l2442"><span class="linenum">2442</span></a>          <a class="var it23987" onMouseOver="hilite(23987)" onMouseOut="lolite()" onClick="logVariable('calevent')" href="../_variables/calevent.html">$calevent</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('event',  array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;id), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l2443"><span class="linenum">2443</span></a>  <span class="comment">        // Delete the event</span>
<a name="l2444"><span class="linenum">2444</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('event', array('id'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;id));
<a name="l2445"><span class="linenum">2445</span></a>  
<a name="l2446"><span class="linenum">2446</span></a>  <span class="comment">        // Trigger an event for the delete action.</span>
<a name="l2447"><span class="linenum">2447</span></a>          <a class="var it39051" onMouseOver="hilite(39051)" onMouseOut="lolite()" onClick="logVariable('eventargs')" href="../_variables/eventargs.html">$eventargs</a> = array(
<a name="l2448"><span class="linenum">2448</span></a>              'context' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;context,
<a name="l2449"><span class="linenum">2449</span></a>              'objectid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;id,
<a name="l2450"><span class="linenum">2450</span></a>              'other' =&gt; array(
<a name="l2451"><span class="linenum">2451</span></a>                  'repeatid' =&gt; empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;repeatid) ? 0 : <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;repeatid,
<a name="l2452"><span class="linenum">2452</span></a>                  'timestart' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;timestart,
<a name="l2453"><span class="linenum">2453</span></a>                  'name' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;name
<a name="l2454"><span class="linenum">2454</span></a>              ));
<a name="l2455"><span class="linenum">2455</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('calendar_event_deleted')" href="../_classes/calendar_event_deleted.html" onMouseOver="classPopup(event,'calendar_event_deleted')">calendar_event_deleted</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it39051" onMouseOver="hilite(39051)" onMouseOut="lolite()" onClick="logVariable('eventargs')" href="../_variables/eventargs.html">$eventargs</a>);
<a name="l2456"><span class="linenum">2456</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('event', <a class="var it23987" onMouseOver="hilite(23987)" onMouseOut="lolite()" onClick="logVariable('calevent')" href="../_variables/calevent.html">$calevent</a>);
<a name="l2457"><span class="linenum">2457</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l2458"><span class="linenum">2458</span></a>  
<a name="l2459"><span class="linenum">2459</span></a>  <span class="comment">        // If we are deleting parent of a repeated event series, promote the next event in the series as parent</span>
<a name="l2460"><span class="linenum">2460</span></a>          if ((<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;id == <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;repeatid) &amp;&amp; !<a class="var it39057" onMouseOver="hilite(39057)" onMouseOut="lolite()" onClick="logVariable('deleterepeated')" href="../_variables/deleterepeated.html">$deleterepeated</a>) {
<a name="l2461"><span class="linenum">2461</span></a>              <a class="var it315" onMouseOver="hilite(315)" onMouseOut="lolite()" onClick="logVariable('newparent')" href="../_variables/newparent.html">$newparent</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field_sql')" href="../_functions/get_field_sql.html" onMouseOver="funcPopup(event,'get_field_sql')">get_field_sql</a>(&quot;SELECT id from {event} where repeatid = ? order by id ASC&quot;, array(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;id), <a class="constant" onClick="logConstant('IGNORE_MULTIPLE')" href="../_constants/IGNORE_MULTIPLE.html" onMouseOver="constPopup(event,'IGNORE_MULTIPLE')">IGNORE_MULTIPLE</a>);
<a name="l2462"><span class="linenum">2462</span></a>              if (!empty(<a class="var it315" onMouseOver="hilite(315)" onMouseOut="lolite()" onClick="logVariable('newparent')" href="../_variables/newparent.html">$newparent</a>)) {
<a name="l2463"><span class="linenum">2463</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('execute')" href="../_functions/execute.html" onMouseOver="funcPopup(event,'execute')">execute</a>(&quot;UPDATE {event} SET repeatid = ? WHERE repeatid = ?&quot;, array(<a class="var it315" onMouseOver="hilite(315)" onMouseOut="lolite()" onClick="logVariable('newparent')" href="../_variables/newparent.html">$newparent</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;id));
<a name="l2464"><span class="linenum">2464</span></a>  <span class="comment">                // Get all records where the repeatid is the same as the event being removed</span>
<a name="l2465"><span class="linenum">2465</span></a>                  <a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('event', array('repeatid' =&gt; <a class="var it315" onMouseOver="hilite(315)" onMouseOut="lolite()" onClick="logVariable('newparent')" href="../_variables/newparent.html">$newparent</a>));
<a name="l2466"><span class="linenum">2466</span></a>  <span class="comment">                // For each of the returned events trigger the event_update hook and an update event.</span>
<a name="l2467"><span class="linenum">2467</span></a>                  foreach (<a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a> as <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>) {
<a name="l2468"><span class="linenum">2468</span></a>  <span class="comment">                    // Trigger an event for the update.</span>
<a name="l2469"><span class="linenum">2469</span></a>                      <a class="var it39051" onMouseOver="hilite(39051)" onMouseOut="lolite()" onClick="logVariable('eventargs')" href="../_variables/eventargs.html">$eventargs</a>['objectid'] = <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('id')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l2470"><span class="linenum">2470</span></a>                      <a class="var it39051" onMouseOver="hilite(39051)" onMouseOut="lolite()" onClick="logVariable('eventargs')" href="../_variables/eventargs.html">$eventargs</a>['other']['timestart'] = <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timestart')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/timestart.html">timestart</a>;
<a name="l2471"><span class="linenum">2471</span></a>                      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('calendar_event_updated')" href="../_classes/calendar_event_updated.html" onMouseOver="classPopup(event,'calendar_event_updated')">calendar_event_updated</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it39051" onMouseOver="hilite(39051)" onMouseOut="lolite()" onClick="logVariable('eventargs')" href="../_variables/eventargs.html">$eventargs</a>);
<a name="l2472"><span class="linenum">2472</span></a>                      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l2473"><span class="linenum">2473</span></a>  
<a name="l2474"><span class="linenum">2474</span></a>                      self::<a class="function" onClick="logFunction('calendar_event_hook')" href="../_functions/calendar_event_hook.html" onMouseOver="funcPopup(event,'calendar_event_hook')">calendar_event_hook</a>('update_event', array(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>, false));
<a name="l2475"><span class="linenum">2475</span></a>                  }
<a name="l2476"><span class="linenum">2476</span></a>              }
<a name="l2477"><span class="linenum">2477</span></a>          }
<a name="l2478"><span class="linenum">2478</span></a>  
<a name="l2479"><span class="linenum">2479</span></a>  <span class="comment">        // If the editor context hasn't already been set then set it now</span>
<a name="l2480"><span class="linenum">2480</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editorcontext')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/editorcontext.html">editorcontext</a> === null) {
<a name="l2481"><span class="linenum">2481</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editorcontext')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/editorcontext.html">editorcontext</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;context;
<a name="l2482"><span class="linenum">2482</span></a>          }
<a name="l2483"><span class="linenum">2483</span></a>  
<a name="l2484"><span class="linenum">2484</span></a>  <span class="comment">        // If the context has been set delete all associated files</span>
<a name="l2485"><span class="linenum">2485</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editorcontext')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/editorcontext.html">editorcontext</a> !== null) {
<a name="l2486"><span class="linenum">2486</span></a>              <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l2487"><span class="linenum">2487</span></a>              <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../_variables/files.html">$files</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_area_files')" href="../_functions/get_area_files.html" onMouseOver="funcPopup(event,'get_area_files')">get_area_files</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editorcontext')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/editorcontext.html">editorcontext</a>-&gt;id, 'calendar', 'event_description', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;id);
<a name="l2488"><span class="linenum">2488</span></a>              foreach (<a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../_variables/files.html">$files</a> as <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>) {
<a name="l2489"><span class="linenum">2489</span></a>                  <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>();
<a name="l2490"><span class="linenum">2490</span></a>              }
<a name="l2491"><span class="linenum">2491</span></a>          }
<a name="l2492"><span class="linenum">2492</span></a>  
<a name="l2493"><span class="linenum">2493</span></a>  <span class="comment">        // Fire the event deleted hook</span>
<a name="l2494"><span class="linenum">2494</span></a>          self::<a class="function" onClick="logFunction('calendar_event_hook')" href="../_functions/calendar_event_hook.html" onMouseOver="funcPopup(event,'calendar_event_hook')">calendar_event_hook</a>('delete_event', array(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;id, <a class="var it39057" onMouseOver="hilite(39057)" onMouseOut="lolite()" onClick="logVariable('deleterepeated')" href="../_variables/deleterepeated.html">$deleterepeated</a>));
<a name="l2495"><span class="linenum">2495</span></a>  
<a name="l2496"><span class="linenum">2496</span></a>  <span class="comment">        // If we need to delete repeated events then we will fetch them all and delete one by one</span>
<a name="l2497"><span class="linenum">2497</span></a>          if (<a class="var it39057" onMouseOver="hilite(39057)" onMouseOut="lolite()" onClick="logVariable('deleterepeated')" href="../_variables/deleterepeated.html">$deleterepeated</a> &amp;&amp; !empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;repeatid) &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;repeatid &gt; 0) {
<a name="l2498"><span class="linenum">2498</span></a>  <span class="comment">            // Get all records where the repeatid is the same as the event being removed</span>
<a name="l2499"><span class="linenum">2499</span></a>              <a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('event', array('repeatid'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;repeatid));
<a name="l2500"><span class="linenum">2500</span></a>  <span class="comment">            // For each of the returned events populate a calendar_event object and call delete</span>
<a name="l2501"><span class="linenum">2501</span></a>  <span class="comment">            // make sure the arg passed is false as we are already deleting all repeats</span>
<a name="l2502"><span class="linenum">2502</span></a>              foreach (<a class="var it837" onMouseOver="hilite(837)" onMouseOut="lolite()" onClick="logVariable('events')" href="../_variables/events.html">$events</a> as <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>) {
<a name="l2503"><span class="linenum">2503</span></a>                  <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = <span class="keyword">new </span><a class="class" onClick="logClass('calendar_event')" href="../_classes/calendar_event.html" onMouseOver="classPopup(event,'calendar_event')">calendar_event</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>);
<a name="l2504"><span class="linenum">2504</span></a>                  <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('delete')" href="../_functions/delete.html" onMouseOver="funcPopup(event,'delete')">delete</a>(false);
<a name="l2505"><span class="linenum">2505</span></a>              }
<a name="l2506"><span class="linenum">2506</span></a>          }
<a name="l2507"><span class="linenum">2507</span></a>  
<a name="l2508"><span class="linenum">2508</span></a>          return true;
<a name="l2509"><span class="linenum">2509</span></a>      }
<a name="l2510"><span class="linenum">2510</span></a>  
<a name="l2511"><span class="linenum">2511</span></a>      <span class="comment">/**</span>
<a name="l2512"><span class="linenum">2512</span></a>  <span class="comment">     * Fetch all event properties</span>
<a name="l2513"><span class="linenum">2513</span></a>  <span class="comment">     *</span>
<a name="l2514"><span class="linenum">2514</span></a>  <span class="comment">     * This function returns all of the events properties as an object and optionally</span>
<a name="l2515"><span class="linenum">2515</span></a>  <span class="comment">     * can prepare an editor for the description field at the same time. This is</span>
<a name="l2516"><span class="linenum">2516</span></a>  <span class="comment">     * designed to work when the properties are going to be used to set the default</span>
<a name="l2517"><span class="linenum">2517</span></a>  <span class="comment">     * values of a moodle forms form.</span>
<a name="l2518"><span class="linenum">2518</span></a>  <span class="comment">     *</span>
<a name="l2519"><span class="linenum">2519</span></a>  <span class="comment">     * @param bool $prepareeditor If set to true a editor is prepared for use with</span>
<a name="l2520"><span class="linenum">2520</span></a>  <span class="comment">     *              the mforms editor element. (for description)</span>
<a name="l2521"><span class="linenum">2521</span></a>  <span class="comment">     * @return stdClass Object containing event properties</span>
<a name="l2522"><span class="linenum">2522</span></a>  <span class="comment">     */</span>
<a name="l2523"><span class="linenum">2523</span></a>      public function <a class="function" onClick="logFunction('properties')" href="../_functions/properties.html" onMouseOver="funcPopup(event,'properties')">properties</a>(<a class="var it39058" onMouseOver="hilite(39058)" onMouseOut="lolite()" onClick="logVariable('prepareeditor')" href="../_variables/prepareeditor.html">$prepareeditor</a>=false) {
<a name="l2524"><span class="linenum">2524</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2525"><span class="linenum">2525</span></a>  
<a name="l2526"><span class="linenum">2526</span></a>  <span class="comment">        // First take a copy of the properties. We don't want to actually change the</span>
<a name="l2527"><span class="linenum">2527</span></a>  <span class="comment">        // properties or we'd forever be converting back and forwards between an</span>
<a name="l2528"><span class="linenum">2528</span></a>  <span class="comment">        // editor formatted description and not</span>
<a name="l2529"><span class="linenum">2529</span></a>          <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a> = <a class="function" onClick="logFunction('clone')" href="../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>);
<a name="l2530"><span class="linenum">2530</span></a>  <span class="comment">        // Clean the description here</span>
<a name="l2531"><span class="linenum">2531</span></a>          <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('description')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../_variables/description.html">description</a> = <a class="function" onClick="logFunction('clean_text')" href="../_functions/clean_text.html" onMouseOver="funcPopup(event,'clean_text')">clean_text</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('description')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../_variables/description.html">description</a>, <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('format')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../_variables/format.html">format</a>);
<a name="l2532"><span class="linenum">2532</span></a>  
<a name="l2533"><span class="linenum">2533</span></a>  <span class="comment">        // If set to true we need to prepare the properties for use with an editor</span>
<a name="l2534"><span class="linenum">2534</span></a>  <span class="comment">        // and prepare the file area</span>
<a name="l2535"><span class="linenum">2535</span></a>          if (<a class="var it39058" onMouseOver="hilite(39058)" onMouseOut="lolite()" onClick="logVariable('prepareeditor')" href="../_variables/prepareeditor.html">$prepareeditor</a>) {
<a name="l2536"><span class="linenum">2536</span></a>  
<a name="l2537"><span class="linenum">2537</span></a>  <span class="comment">            // We may or may not have a property id. If we do then we need to work</span>
<a name="l2538"><span class="linenum">2538</span></a>  <span class="comment">            // out the context so we can copy the existing files to the draft area</span>
<a name="l2539"><span class="linenum">2539</span></a>              if (!empty(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('id')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)) {
<a name="l2540"><span class="linenum">2540</span></a>  
<a name="l2541"><span class="linenum">2541</span></a>                  if (<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('eventtype')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../_variables/eventtype.html">eventtype</a> === 'site') {
<a name="l2542"><span class="linenum">2542</span></a>  <span class="comment">                    // Site context</span>
<a name="l2543"><span class="linenum">2543</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editorcontext')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/editorcontext.html">editorcontext</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;context;
<a name="l2544"><span class="linenum">2544</span></a>                  } else if (<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('eventtype')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../_variables/eventtype.html">eventtype</a> === 'user') {
<a name="l2545"><span class="linenum">2545</span></a>  <span class="comment">                    // User context</span>
<a name="l2546"><span class="linenum">2546</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editorcontext')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/editorcontext.html">editorcontext</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;context;
<a name="l2547"><span class="linenum">2547</span></a>                  } else if (<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('eventtype')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../_variables/eventtype.html">eventtype</a> === 'group' || <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('eventtype')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../_variables/eventtype.html">eventtype</a> === 'course') {
<a name="l2548"><span class="linenum">2548</span></a>  <span class="comment">                    // First check the course is valid</span>
<a name="l2549"><span class="linenum">2549</span></a>                      <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id'=&gt;<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('courseid')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>));
<a name="l2550"><span class="linenum">2550</span></a>                      if (!<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) {
<a name="l2551"><span class="linenum">2551</span></a>                          <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('invalidcourse');
<a name="l2552"><span class="linenum">2552</span></a>                      }
<a name="l2553"><span class="linenum">2553</span></a>  <span class="comment">                    // Course context</span>
<a name="l2554"><span class="linenum">2554</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editorcontext')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/editorcontext.html">editorcontext</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;context;
<a name="l2555"><span class="linenum">2555</span></a>  <span class="comment">                    // We have a course and are within the course context so we had</span>
<a name="l2556"><span class="linenum">2556</span></a>  <span class="comment">                    // better use the courses max bytes value</span>
<a name="l2557"><span class="linenum">2557</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editoroptions')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/editoroptions.html">editoroptions</a>['maxbytes'] = <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('maxbytes')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/maxbytes.html">maxbytes</a>;
<a name="l2558"><span class="linenum">2558</span></a>                  } else {
<a name="l2559"><span class="linenum">2559</span></a>  <span class="comment">                    // If we get here we have a custom event type as used by some</span>
<a name="l2560"><span class="linenum">2560</span></a>  <span class="comment">                    // modules. In this case the event will have been added by</span>
<a name="l2561"><span class="linenum">2561</span></a>  <span class="comment">                    // code and we won't need the editor</span>
<a name="l2562"><span class="linenum">2562</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editoroptions')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/editoroptions.html">editoroptions</a>['maxbytes'] = 0;
<a name="l2563"><span class="linenum">2563</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editoroptions')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/editoroptions.html">editoroptions</a>['maxfiles'] = 0;
<a name="l2564"><span class="linenum">2564</span></a>                  }
<a name="l2565"><span class="linenum">2565</span></a>  
<a name="l2566"><span class="linenum">2566</span></a>                  if (empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editorcontext')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/editorcontext.html">editorcontext</a>) || empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editorcontext')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/editorcontext.html">editorcontext</a>-&gt;id)) {
<a name="l2567"><span class="linenum">2567</span></a>                      <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a> = false;
<a name="l2568"><span class="linenum">2568</span></a>                  } else {
<a name="l2569"><span class="linenum">2569</span></a>  <span class="comment">                    // Get the context id that is what we really want</span>
<a name="l2570"><span class="linenum">2570</span></a>                      <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editorcontext')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/editorcontext.html">editorcontext</a>-&gt;id;
<a name="l2571"><span class="linenum">2571</span></a>                  }
<a name="l2572"><span class="linenum">2572</span></a>              } else {
<a name="l2573"><span class="linenum">2573</span></a>  
<a name="l2574"><span class="linenum">2574</span></a>  <span class="comment">                // If we get here then this is a new event in which case we don't need a</span>
<a name="l2575"><span class="linenum">2575</span></a>  <span class="comment">                // context as there is no existing files to copy to the draft area.</span>
<a name="l2576"><span class="linenum">2576</span></a>                  <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a> = null;
<a name="l2577"><span class="linenum">2577</span></a>              }
<a name="l2578"><span class="linenum">2578</span></a>  
<a name="l2579"><span class="linenum">2579</span></a>  <span class="comment">            // If the contextid === false we don't support files so no preparing</span>
<a name="l2580"><span class="linenum">2580</span></a>  <span class="comment">            // a draft area</span>
<a name="l2581"><span class="linenum">2581</span></a>              if (<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a> !== false) {
<a name="l2582"><span class="linenum">2582</span></a>  <span class="comment">                // Just encase it has already been submitted</span>
<a name="l2583"><span class="linenum">2583</span></a>                  <a class="var it39059" onMouseOver="hilite(39059)" onMouseOut="lolite()" onClick="logVariable('draftiddescription')" href="../_variables/draftiddescription.html">$draftiddescription</a> = <a class="function" onClick="logFunction('file_get_submitted_draft_itemid')" href="../_functions/file_get_submitted_draft_itemid.html" onMouseOver="funcPopup(event,'file_get_submitted_draft_itemid')">file_get_submitted_draft_itemid</a>('description');
<a name="l2584"><span class="linenum">2584</span></a>  <span class="comment">                // Prepare the draft area, this copies existing files to the draft area as well</span>
<a name="l2585"><span class="linenum">2585</span></a>                  <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('description')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../_variables/description.html">description</a> = <a class="function" onClick="logFunction('file_prepare_draft_area')" href="../_functions/file_prepare_draft_area.html" onMouseOver="funcPopup(event,'file_prepare_draft_area')">file_prepare_draft_area</a>(<a class="var it39059" onMouseOver="hilite(39059)" onMouseOut="lolite()" onClick="logVariable('draftiddescription')" href="../_variables/draftiddescription.html">$draftiddescription</a>, <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>, 'calendar', 'event_description', <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('id')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editoroptions')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/editoroptions.html">editoroptions</a>, <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('description')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../_variables/description.html">description</a>);
<a name="l2586"><span class="linenum">2586</span></a>              } else {
<a name="l2587"><span class="linenum">2587</span></a>                  <a class="var it39059" onMouseOver="hilite(39059)" onMouseOut="lolite()" onClick="logVariable('draftiddescription')" href="../_variables/draftiddescription.html">$draftiddescription</a> = 0;
<a name="l2588"><span class="linenum">2588</span></a>              }
<a name="l2589"><span class="linenum">2589</span></a>  
<a name="l2590"><span class="linenum">2590</span></a>  <span class="comment">            // Structure the description field as the editor requires</span>
<a name="l2591"><span class="linenum">2591</span></a>              <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('description')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../_variables/description.html">description</a> = array('text'=&gt;<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('description')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../_variables/description.html">description</a>, 'format'=&gt;<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>-&gt;<a onClick="logVariable('format')" class="var it43207" onMouseOver="hilite(43207)" onMouseOut="lolite()" href="../_variables/format.html">format</a>, 'itemid'=&gt;<a class="var it39059" onMouseOver="hilite(39059)" onMouseOut="lolite()" onClick="logVariable('draftiddescription')" href="../_variables/draftiddescription.html">$draftiddescription</a>);
<a name="l2592"><span class="linenum">2592</span></a>          }
<a name="l2593"><span class="linenum">2593</span></a>  
<a name="l2594"><span class="linenum">2594</span></a>  <span class="comment">        // Finally return the properties</span>
<a name="l2595"><span class="linenum">2595</span></a>          return <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>;
<a name="l2596"><span class="linenum">2596</span></a>      }
<a name="l2597"><span class="linenum">2597</span></a>  
<a name="l2598"><span class="linenum">2598</span></a>      <span class="comment">/**</span>
<a name="l2599"><span class="linenum">2599</span></a>  <span class="comment">     * Toggles the visibility of an event</span>
<a name="l2600"><span class="linenum">2600</span></a>  <span class="comment">     *</span>
<a name="l2601"><span class="linenum">2601</span></a>  <span class="comment">     * @param null|bool $force If it is left null the events visibility is flipped,</span>
<a name="l2602"><span class="linenum">2602</span></a>  <span class="comment">     *                   If it is false the event is made hidden, if it is true it</span>
<a name="l2603"><span class="linenum">2603</span></a>  <span class="comment">     *                   is made visible.</span>
<a name="l2604"><span class="linenum">2604</span></a>  <span class="comment">     * @return bool if event is successfully updated, toggle will be visible</span>
<a name="l2605"><span class="linenum">2605</span></a>  <span class="comment">     */</span>
<a name="l2606"><span class="linenum">2606</span></a>      public function <a class="function" onClick="logFunction('toggle_visibility')" href="../_functions/toggle_visibility.html" onMouseOver="funcPopup(event,'toggle_visibility')">toggle_visibility</a>(<a class="var it116" onMouseOver="hilite(116)" onMouseOut="lolite()" onClick="logVariable('force')" href="../_variables/force.html">$force</a>=null) {
<a name="l2607"><span class="linenum">2607</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2608"><span class="linenum">2608</span></a>  
<a name="l2609"><span class="linenum">2609</span></a>  <span class="comment">        // Set visible to the default if it is not already set</span>
<a name="l2610"><span class="linenum">2610</span></a>          if (empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;visible)) {
<a name="l2611"><span class="linenum">2611</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;visible = 1;
<a name="l2612"><span class="linenum">2612</span></a>          }
<a name="l2613"><span class="linenum">2613</span></a>  
<a name="l2614"><span class="linenum">2614</span></a>          if (<a class="var it116" onMouseOver="hilite(116)" onMouseOut="lolite()" onClick="logVariable('force')" href="../_variables/force.html">$force</a> === true || (<a class="var it116" onMouseOver="hilite(116)" onMouseOut="lolite()" onClick="logVariable('force')" href="../_variables/force.html">$force</a> !== false &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;visible == 0)) {
<a name="l2615"><span class="linenum">2615</span></a>  <span class="comment">            // Make this event visible</span>
<a name="l2616"><span class="linenum">2616</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;visible = 1;
<a name="l2617"><span class="linenum">2617</span></a>  <span class="comment">            // Fire the hook</span>
<a name="l2618"><span class="linenum">2618</span></a>              self::<a class="function" onClick="logFunction('calendar_event_hook')" href="../_functions/calendar_event_hook.html" onMouseOver="funcPopup(event,'calendar_event_hook')">calendar_event_hook</a>('show_event', array(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>));
<a name="l2619"><span class="linenum">2619</span></a>          } else {
<a name="l2620"><span class="linenum">2620</span></a>  <span class="comment">            // Make this event hidden</span>
<a name="l2621"><span class="linenum">2621</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;visible = 0;
<a name="l2622"><span class="linenum">2622</span></a>  <span class="comment">            // Fire the hook</span>
<a name="l2623"><span class="linenum">2623</span></a>              self::<a class="function" onClick="logFunction('calendar_event_hook')" href="../_functions/calendar_event_hook.html" onMouseOver="funcPopup(event,'calendar_event_hook')">calendar_event_hook</a>('hide_event', array(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>));
<a name="l2624"><span class="linenum">2624</span></a>          }
<a name="l2625"><span class="linenum">2625</span></a>  
<a name="l2626"><span class="linenum">2626</span></a>  <span class="comment">        // Update the database to reflect this change</span>
<a name="l2627"><span class="linenum">2627</span></a>          return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('event', 'visible', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;visible, array('id'=&gt;<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;id));
<a name="l2628"><span class="linenum">2628</span></a>      }
<a name="l2629"><span class="linenum">2629</span></a>  
<a name="l2630"><span class="linenum">2630</span></a>      <span class="comment">/**</span>
<a name="l2631"><span class="linenum">2631</span></a>  <span class="comment">     * Attempts to call the hook for the specified action should a calendar type</span>
<a name="l2632"><span class="linenum">2632</span></a>  <span class="comment">     * by set $CFG-&gt;calendar, and the appopriate function defined</span>
<a name="l2633"><span class="linenum">2633</span></a>  <span class="comment">     *</span>
<a name="l2634"><span class="linenum">2634</span></a>  <span class="comment">     * @param string $action One of `update_event`, `add_event`, `delete_event`, `show_event`, `hide_event`</span>
<a name="l2635"><span class="linenum">2635</span></a>  <span class="comment">     * @param array $args The args to pass to the hook, usually the event is the first element</span>
<a name="l2636"><span class="linenum">2636</span></a>  <span class="comment">     * @return bool attempts to call event hook</span>
<a name="l2637"><span class="linenum">2637</span></a>  <span class="comment">     */</span>
<a name="l2638"><span class="linenum">2638</span></a>      public static function <a class="function" onClick="logFunction('calendar_event_hook')" href="../_functions/calendar_event_hook.html" onMouseOver="funcPopup(event,'calendar_event_hook')">calendar_event_hook</a>(<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../_variables/action.html">$action</a>, array <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>) {
<a name="l2639"><span class="linenum">2639</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l2640"><span class="linenum">2640</span></a>          static <a class="var it39060" onMouseOver="hilite(39060)" onMouseOut="lolite()" onClick="logVariable('extcalendarinc')" href="../_variables/extcalendarinc.html">$extcalendarinc</a>;
<a name="l2641"><span class="linenum">2641</span></a>          if (<a class="var it39060" onMouseOver="hilite(39060)" onMouseOut="lolite()" onClick="logVariable('extcalendarinc')" href="../_variables/extcalendarinc.html">$extcalendarinc</a> === null) {
<a name="l2642"><span class="linenum">2642</span></a>              if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('calendar')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/calendar.html">calendar</a>)) {
<a name="l2643"><span class="linenum">2643</span></a>                  if (<a class="phpfunction" onClick="logFunction('is_readable')" href="../_functions/is_readable.html" onMouseOver="phpfuncPopup(event,'is_readable')">is_readable</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> .'/calendar/'. <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('calendar')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/calendar.html">calendar</a> .'/lib.php')) {
<a name="l2644"><span class="linenum">2644</span></a>                      include_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> .'/calendar/'. <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('calendar')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/calendar.html">calendar</a> .'/lib.php');
<a name="l2645"><span class="linenum">2645</span></a>                      <a class="var it39060" onMouseOver="hilite(39060)" onMouseOut="lolite()" onClick="logVariable('extcalendarinc')" href="../_variables/extcalendarinc.html">$extcalendarinc</a> = true;
<a name="l2646"><span class="linenum">2646</span></a>                  } else {
<a name="l2647"><span class="linenum">2647</span></a>                      <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(&quot;Calendar lib file missing or not readable at /calendar/{<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('calendar')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/calendar.html">calendar</a>}/lib.php.&quot;,
<a name="l2648"><span class="linenum">2648</span></a>                          <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l2649"><span class="linenum">2649</span></a>                      <a class="var it39060" onMouseOver="hilite(39060)" onMouseOut="lolite()" onClick="logVariable('extcalendarinc')" href="../_variables/extcalendarinc.html">$extcalendarinc</a> = false;
<a name="l2650"><span class="linenum">2650</span></a>                  }
<a name="l2651"><span class="linenum">2651</span></a>              } else {
<a name="l2652"><span class="linenum">2652</span></a>                  <a class="var it39060" onMouseOver="hilite(39060)" onMouseOut="lolite()" onClick="logVariable('extcalendarinc')" href="../_variables/extcalendarinc.html">$extcalendarinc</a> = false;
<a name="l2653"><span class="linenum">2653</span></a>              }
<a name="l2654"><span class="linenum">2654</span></a>          }
<a name="l2655"><span class="linenum">2655</span></a>          if(<a class="var it39060" onMouseOver="hilite(39060)" onMouseOut="lolite()" onClick="logVariable('extcalendarinc')" href="../_variables/extcalendarinc.html">$extcalendarinc</a> === false) {
<a name="l2656"><span class="linenum">2656</span></a>              return false;
<a name="l2657"><span class="linenum">2657</span></a>          }
<a name="l2658"><span class="linenum">2658</span></a>          <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../_variables/hook.html">$hook</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('calendar')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/calendar.html">calendar</a> .'_'.<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../_variables/action.html">$action</a>;
<a name="l2659"><span class="linenum">2659</span></a>          if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../_variables/hook.html">$hook</a>)) {
<a name="l2660"><span class="linenum">2660</span></a>              <a class="phpfunction" onClick="logFunction('call_user_func_array')" href="../_functions/call_user_func_array.html" onMouseOver="phpfuncPopup(event,'call_user_func_array')">call_user_func_array</a>(<a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../_variables/hook.html">$hook</a>, <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../_variables/args.html">$args</a>);
<a name="l2661"><span class="linenum">2661</span></a>              return true;
<a name="l2662"><span class="linenum">2662</span></a>          }
<a name="l2663"><span class="linenum">2663</span></a>          return false;
<a name="l2664"><span class="linenum">2664</span></a>      }
<a name="l2665"><span class="linenum">2665</span></a>  
<a name="l2666"><span class="linenum">2666</span></a>      <span class="comment">/**</span>
<a name="l2667"><span class="linenum">2667</span></a>  <span class="comment">     * Returns a calendar_event object when provided with an event id</span>
<a name="l2668"><span class="linenum">2668</span></a>  <span class="comment">     *</span>
<a name="l2669"><span class="linenum">2669</span></a>  <span class="comment">     * This function makes use of MUST_EXIST, if the event id passed in is invalid</span>
<a name="l2670"><span class="linenum">2670</span></a>  <span class="comment">     * it will result in an exception being thrown</span>
<a name="l2671"><span class="linenum">2671</span></a>  <span class="comment">     *</span>
<a name="l2672"><span class="linenum">2672</span></a>  <span class="comment">     * @param int|object $param event object or event id</span>
<a name="l2673"><span class="linenum">2673</span></a>  <span class="comment">     * @return calendar_event|false status for loading calendar_event</span>
<a name="l2674"><span class="linenum">2674</span></a>  <span class="comment">     */</span>
<a name="l2675"><span class="linenum">2675</span></a>      public static function <a class="function" onClick="logFunction('load')" href="../_functions/load.html" onMouseOver="funcPopup(event,'load')">load</a>(<a class="var it334" onMouseOver="hilite(334)" onMouseOut="lolite()" onClick="logVariable('param')" href="../_variables/param.html">$param</a>) {
<a name="l2676"><span class="linenum">2676</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2677"><span class="linenum">2677</span></a>          if (<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it334" onMouseOver="hilite(334)" onMouseOut="lolite()" onClick="logVariable('param')" href="../_variables/param.html">$param</a>)) {
<a name="l2678"><span class="linenum">2678</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = <span class="keyword">new </span><a class="class" onClick="logClass('calendar_event')" href="../_classes/calendar_event.html" onMouseOver="classPopup(event,'calendar_event')">calendar_event</a>(<a class="var it334" onMouseOver="hilite(334)" onMouseOut="lolite()" onClick="logVariable('param')" href="../_variables/param.html">$param</a>);
<a name="l2679"><span class="linenum">2679</span></a>          } else {
<a name="l2680"><span class="linenum">2680</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('event', array('id'=&gt;(int)<a class="var it334" onMouseOver="hilite(334)" onMouseOut="lolite()" onClick="logVariable('param')" href="../_variables/param.html">$param</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l2681"><span class="linenum">2681</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = <span class="keyword">new </span><a class="class" onClick="logClass('calendar_event')" href="../_classes/calendar_event.html" onMouseOver="classPopup(event,'calendar_event')">calendar_event</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>);
<a name="l2682"><span class="linenum">2682</span></a>          }
<a name="l2683"><span class="linenum">2683</span></a>          return <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>;
<a name="l2684"><span class="linenum">2684</span></a>      }
<a name="l2685"><span class="linenum">2685</span></a>  
<a name="l2686"><span class="linenum">2686</span></a>      <span class="comment">/**</span>
<a name="l2687"><span class="linenum">2687</span></a>  <span class="comment">     * Creates a new event and returns a calendar_event object</span>
<a name="l2688"><span class="linenum">2688</span></a>  <span class="comment">     *</span>
<a name="l2689"><span class="linenum">2689</span></a>  <span class="comment">     * @param stdClass|array $properties An object containing event properties</span>
<a name="l2690"><span class="linenum">2690</span></a>  <span class="comment">     * @param bool $checkcapability Check caps or not</span>
<a name="l2691"><span class="linenum">2691</span></a>  <span class="comment">     * @throws coding_exception</span>
<a name="l2692"><span class="linenum">2692</span></a>  <span class="comment">     *</span>
<a name="l2693"><span class="linenum">2693</span></a>  <span class="comment">     * @return calendar_event|bool The event object or false if it failed</span>
<a name="l2694"><span class="linenum">2694</span></a>  <span class="comment">     */</span>
<a name="l2695"><span class="linenum">2695</span></a>      public static function <a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>, <a class="var it39049" onMouseOver="hilite(39049)" onMouseOut="lolite()" onClick="logVariable('checkcapability')" href="../_variables/checkcapability.html">$checkcapability</a> = true) {
<a name="l2696"><span class="linenum">2696</span></a>          if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>)) {
<a name="l2697"><span class="linenum">2697</span></a>              <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a> = (object)<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>;
<a name="l2698"><span class="linenum">2698</span></a>          }
<a name="l2699"><span class="linenum">2699</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>)) {
<a name="l2700"><span class="linenum">2700</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('When creating an event properties should be either an object or an assoc array');
<a name="l2701"><span class="linenum">2701</span></a>          }
<a name="l2702"><span class="linenum">2702</span></a>          <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = <span class="keyword">new </span><a class="class" onClick="logClass('calendar_event')" href="../_classes/calendar_event.html" onMouseOver="classPopup(event,'calendar_event')">calendar_event</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>);
<a name="l2703"><span class="linenum">2703</span></a>          if (<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('update')" href="../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>, <a class="var it39049" onMouseOver="hilite(39049)" onMouseOut="lolite()" onClick="logVariable('checkcapability')" href="../_variables/checkcapability.html">$checkcapability</a>)) {
<a name="l2704"><span class="linenum">2704</span></a>              return <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>;
<a name="l2705"><span class="linenum">2705</span></a>          } else {
<a name="l2706"><span class="linenum">2706</span></a>              return false;
<a name="l2707"><span class="linenum">2707</span></a>          }
<a name="l2708"><span class="linenum">2708</span></a>      }
<a name="l2709"><span class="linenum">2709</span></a>  
<a name="l2710"><span class="linenum">2710</span></a>      <span class="comment">/**</span>
<a name="l2711"><span class="linenum">2711</span></a>  <span class="comment">     * Format the text using the external API.</span>
<a name="l2712"><span class="linenum">2712</span></a>  <span class="comment">     * This function should we used when text formatting is required in external functions.</span>
<a name="l2713"><span class="linenum">2713</span></a>  <span class="comment">     *</span>
<a name="l2714"><span class="linenum">2714</span></a>  <span class="comment">     * @return array an array containing the text formatted and the text format</span>
<a name="l2715"><span class="linenum">2715</span></a>  <span class="comment">     */</span>
<a name="l2716"><span class="linenum">2716</span></a>      public function <a class="function" onClick="logFunction('format_external_text')" href="../_functions/format_external_text.html" onMouseOver="funcPopup(event,'format_external_text')">format_external_text</a>() {
<a name="l2717"><span class="linenum">2717</span></a>  
<a name="l2718"><span class="linenum">2718</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editorcontext')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/editorcontext.html">editorcontext</a> === null) {
<a name="l2719"><span class="linenum">2719</span></a>  <span class="comment">            // Switch on the event type to decide upon the appropriate context to use for this event.</span>
<a name="l2720"><span class="linenum">2720</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editorcontext')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/editorcontext.html">editorcontext</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;context;
<a name="l2721"><span class="linenum">2721</span></a>  
<a name="l2722"><span class="linenum">2722</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;eventtype != 'user' &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;eventtype != 'course'
<a name="l2723"><span class="linenum">2723</span></a>                      &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;eventtype != 'site' &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;eventtype != 'group') {
<a name="l2724"><span class="linenum">2724</span></a>  <span class="comment">                // We don't have a context here, do a normal format_text.</span>
<a name="l2725"><span class="linenum">2725</span></a>                  return <a class="function" onClick="logFunction('external_format_text')" href="../_functions/external_format_text.html" onMouseOver="funcPopup(event,'external_format_text')">external_format_text</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;description, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;format, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editorcontext')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/editorcontext.html">editorcontext</a>-&gt;id);
<a name="l2726"><span class="linenum">2726</span></a>              }
<a name="l2727"><span class="linenum">2727</span></a>          }
<a name="l2728"><span class="linenum">2728</span></a>  
<a name="l2729"><span class="linenum">2729</span></a>  <span class="comment">        // Work out the item id for the editor, if this is a repeated event then the files will be associated with the original.</span>
<a name="l2730"><span class="linenum">2730</span></a>          if (!empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;repeatid) &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;repeatid &gt; 0) {
<a name="l2731"><span class="linenum">2731</span></a>              <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;repeatid;
<a name="l2732"><span class="linenum">2732</span></a>          } else {
<a name="l2733"><span class="linenum">2733</span></a>              <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;id;
<a name="l2734"><span class="linenum">2734</span></a>          }
<a name="l2735"><span class="linenum">2735</span></a>  
<a name="l2736"><span class="linenum">2736</span></a>          return <a class="function" onClick="logFunction('external_format_text')" href="../_functions/external_format_text.html" onMouseOver="funcPopup(event,'external_format_text')">external_format_text</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;description, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('properties')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>-&gt;format, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('editorcontext')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/editorcontext.html">editorcontext</a>-&gt;id,
<a name="l2737"><span class="linenum">2737</span></a>                                      'calendar', 'event_description', <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a>);
<a name="l2738"><span class="linenum">2738</span></a>      }
<a name="l2739"><span class="linenum">2739</span></a>  }
<a name="l2740"><span class="linenum">2740</span></a>  
<a name="l2741"><span class="linenum">2741</span></a>  <span class="comment">/**</span>
<a name="l2742"><span class="linenum">2742</span></a>  <span class="comment"> * Calendar information class</span>
<a name="l2743"><span class="linenum">2743</span></a>  <span class="comment"> *</span>
<a name="l2744"><span class="linenum">2744</span></a>  <span class="comment"> * This class is used simply to organise the information pertaining to a calendar</span>
<a name="l2745"><span class="linenum">2745</span></a>  <span class="comment"> * and is used primarily to make information easily available.</span>
<a name="l2746"><span class="linenum">2746</span></a>  <span class="comment"> *</span>
<a name="l2747"><span class="linenum">2747</span></a>  <span class="comment"> * @package core_calendar</span>
<a name="l2748"><span class="linenum">2748</span></a>  <span class="comment"> * @category calendar</span>
<a name="l2749"><span class="linenum">2749</span></a>  <span class="comment"> * @copyright 2010 Sam Hemelryk</span>
<a name="l2750"><span class="linenum">2750</span></a>  <span class="comment"> * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l2751"><span class="linenum">2751</span></a>  <span class="comment"> */</span>
<a name="l2752"><span class="linenum">2752</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('calendar_information')" href="../_classes/calendar_information.html" onMouseOver="classPopup(event,'calendar_information')">calendar_information</a> {
<a name="l2753"><span class="linenum">2753</span></a>  
<a name="l2754"><span class="linenum">2754</span></a>      <span class="comment">/**</span>
<a name="l2755"><span class="linenum">2755</span></a>  <span class="comment">     * @var int The timestamp</span>
<a name="l2756"><span class="linenum">2756</span></a>  <span class="comment">     *</span>
<a name="l2757"><span class="linenum">2757</span></a>  <span class="comment">     * Rather than setting the day, month and year we will set a timestamp which will be able</span>
<a name="l2758"><span class="linenum">2758</span></a>  <span class="comment">     * to be used by multiple calendars.</span>
<a name="l2759"><span class="linenum">2759</span></a>  <span class="comment">     */</span>
<a name="l2760"><span class="linenum">2760</span></a>      public <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>;
<a name="l2761"><span class="linenum">2761</span></a>  
<a name="l2762"><span class="linenum">2762</span></a>  <span class="comment">    /** @var int A course id */</span>
<a name="l2763"><span class="linenum">2763</span></a>      public <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a> = null;
<a name="l2764"><span class="linenum">2764</span></a>  
<a name="l2765"><span class="linenum">2765</span></a>  <span class="comment">    /** @var array An array of courses */</span>
<a name="l2766"><span class="linenum">2766</span></a>      public <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> = array();
<a name="l2767"><span class="linenum">2767</span></a>  
<a name="l2768"><span class="linenum">2768</span></a>  <span class="comment">    /** @var array An array of groups */</span>
<a name="l2769"><span class="linenum">2769</span></a>      public <a class="var it670" onMouseOver="hilite(670)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../_variables/groups.html">$groups</a> = array();
<a name="l2770"><span class="linenum">2770</span></a>  
<a name="l2771"><span class="linenum">2771</span></a>  <span class="comment">    /** @var array An array of users */</span>
<a name="l2772"><span class="linenum">2772</span></a>      public <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../_variables/users.html">$users</a> = array();
<a name="l2773"><span class="linenum">2773</span></a>  
<a name="l2774"><span class="linenum">2774</span></a>      <span class="comment">/**</span>
<a name="l2775"><span class="linenum">2775</span></a>  <span class="comment">     * Creates a new instance</span>
<a name="l2776"><span class="linenum">2776</span></a>  <span class="comment">     *</span>
<a name="l2777"><span class="linenum">2777</span></a>  <span class="comment">     * @param int $day the number of the day</span>
<a name="l2778"><span class="linenum">2778</span></a>  <span class="comment">     * @param int $month the number of the month</span>
<a name="l2779"><span class="linenum">2779</span></a>  <span class="comment">     * @param int $year the number of the year</span>
<a name="l2780"><span class="linenum">2780</span></a>  <span class="comment">     * @param int $time the unixtimestamp representing the date we want to view, this is used instead of $calmonth</span>
<a name="l2781"><span class="linenum">2781</span></a>  <span class="comment">     *     and $calyear to support multiple calendars</span>
<a name="l2782"><span class="linenum">2782</span></a>  <span class="comment">     */</span>
<a name="l2783"><span class="linenum">2783</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a> = 0, <a class="var it1761" onMouseOver="hilite(1761)" onMouseOut="lolite()" onClick="logVariable('month')" href="../_variables/month.html">$month</a> = 0, <a class="var it1760" onMouseOver="hilite(1760)" onMouseOut="lolite()" onClick="logVariable('year')" href="../_variables/year.html">$year</a> = 0, <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a> = 0) {
<a name="l2784"><span class="linenum">2784</span></a>  <span class="comment">        // If a day, month and year were passed then convert it to a timestamp. If these were passed</span>
<a name="l2785"><span class="linenum">2785</span></a>  <span class="comment">        // then we can assume the day, month and year are passed as Gregorian, as no where in core</span>
<a name="l2786"><span class="linenum">2786</span></a>  <span class="comment">        // should we be passing these values rather than the time. This is done for BC.</span>
<a name="l2787"><span class="linenum">2787</span></a>          if (!empty(<a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a>) || !empty(<a class="var it1761" onMouseOver="hilite(1761)" onMouseOut="lolite()" onClick="logVariable('month')" href="../_variables/month.html">$month</a>) || !empty(<a class="var it1760" onMouseOver="hilite(1760)" onMouseOut="lolite()" onClick="logVariable('year')" href="../_variables/year.html">$year</a>)) {
<a name="l2788"><span class="linenum">2788</span></a>              <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a> = <a class="function" onClick="logFunction('usergetdate')" href="../_functions/usergetdate.html" onMouseOver="funcPopup(event,'usergetdate')">usergetdate</a>(<a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>());
<a name="l2789"><span class="linenum">2789</span></a>              if (empty(<a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a>)) {
<a name="l2790"><span class="linenum">2790</span></a>                  <a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a> = <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>['mday'];
<a name="l2791"><span class="linenum">2791</span></a>              }
<a name="l2792"><span class="linenum">2792</span></a>              if (empty(<a class="var it1761" onMouseOver="hilite(1761)" onMouseOut="lolite()" onClick="logVariable('month')" href="../_variables/month.html">$month</a>)) {
<a name="l2793"><span class="linenum">2793</span></a>                  <a class="var it1761" onMouseOver="hilite(1761)" onMouseOut="lolite()" onClick="logVariable('month')" href="../_variables/month.html">$month</a> = <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>['mon'];
<a name="l2794"><span class="linenum">2794</span></a>              }
<a name="l2795"><span class="linenum">2795</span></a>              if (empty(<a class="var it1760" onMouseOver="hilite(1760)" onMouseOut="lolite()" onClick="logVariable('year')" href="../_variables/year.html">$year</a>)) {
<a name="l2796"><span class="linenum">2796</span></a>                  <a class="var it1760" onMouseOver="hilite(1760)" onMouseOut="lolite()" onClick="logVariable('year')" href="../_variables/year.html">$year</a> =  <a class="var it1098" onMouseOver="hilite(1098)" onMouseOut="lolite()" onClick="logVariable('date')" href="../_variables/date.html">$date</a>['year'];
<a name="l2797"><span class="linenum">2797</span></a>              }
<a name="l2798"><span class="linenum">2798</span></a>              if (<a class="phpfunction" onClick="logFunction('checkdate')" href="../_functions/checkdate.html" onMouseOver="phpfuncPopup(event,'checkdate')">checkdate</a>(<a class="var it1761" onMouseOver="hilite(1761)" onMouseOut="lolite()" onClick="logVariable('month')" href="../_variables/month.html">$month</a>, <a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a>, <a class="var it1760" onMouseOver="hilite(1760)" onMouseOut="lolite()" onClick="logVariable('year')" href="../_variables/year.html">$year</a>)) {
<a name="l2799"><span class="linenum">2799</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('time')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/time.html">time</a> = <a class="function" onClick="logFunction('make_timestamp')" href="../_functions/make_timestamp.html" onMouseOver="funcPopup(event,'make_timestamp')">make_timestamp</a>(<a class="var it1760" onMouseOver="hilite(1760)" onMouseOut="lolite()" onClick="logVariable('year')" href="../_variables/year.html">$year</a>, <a class="var it1761" onMouseOver="hilite(1761)" onMouseOut="lolite()" onClick="logVariable('month')" href="../_variables/month.html">$month</a>, <a class="var it1120" onMouseOver="hilite(1120)" onMouseOut="lolite()" onClick="logVariable('day')" href="../_variables/day.html">$day</a>);
<a name="l2800"><span class="linenum">2800</span></a>              } else {
<a name="l2801"><span class="linenum">2801</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('time')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/time.html">time</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l2802"><span class="linenum">2802</span></a>              }
<a name="l2803"><span class="linenum">2803</span></a>          } else if (!empty(<a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>)) {
<a name="l2804"><span class="linenum">2804</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('time')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/time.html">time</a> = <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>;
<a name="l2805"><span class="linenum">2805</span></a>          } else {
<a name="l2806"><span class="linenum">2806</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('time')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/time.html">time</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l2807"><span class="linenum">2807</span></a>          }
<a name="l2808"><span class="linenum">2808</span></a>      }
<a name="l2809"><span class="linenum">2809</span></a>  
<a name="l2810"><span class="linenum">2810</span></a>      <span class="comment">/**</span>
<a name="l2811"><span class="linenum">2811</span></a>  <span class="comment">     * Initialize calendar information</span>
<a name="l2812"><span class="linenum">2812</span></a>  <span class="comment">     *</span>
<a name="l2813"><span class="linenum">2813</span></a>  <span class="comment">     * @param stdClass $course object</span>
<a name="l2814"><span class="linenum">2814</span></a>  <span class="comment">     * @param array $coursestoload An array of courses [$course-&gt;id =&gt; $course]</span>
<a name="l2815"><span class="linenum">2815</span></a>  <span class="comment">     * @param bool $ignorefilters options to use filter</span>
<a name="l2816"><span class="linenum">2816</span></a>  <span class="comment">     */</span>
<a name="l2817"><span class="linenum">2817</span></a>      public function <a class="function" onClick="logFunction('prepare_for_view')" href="../_functions/prepare_for_view.html" onMouseOver="funcPopup(event,'prepare_for_view')">prepare_for_view</a>(stdClass <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, array <a class="var it39039" onMouseOver="hilite(39039)" onMouseOut="lolite()" onClick="logVariable('coursestoload')" href="../_variables/coursestoload.html">$coursestoload</a>, <a class="var it39038" onMouseOver="hilite(39038)" onMouseOut="lolite()" onClick="logVariable('ignorefilters')" href="../_variables/ignorefilters.html">$ignorefilters</a> = false) {
<a name="l2818"><span class="linenum">2818</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('courseid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a> = <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l2819"><span class="linenum">2819</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('course')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/course.html">course</a> = <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>;
<a name="l2820"><span class="linenum">2820</span></a>          <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>, <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>) = <a class="function" onClick="logFunction('calendar_set_filters')" href="../_functions/calendar_set_filters.html" onMouseOver="funcPopup(event,'calendar_set_filters')">calendar_set_filters</a>(<a class="var it39039" onMouseOver="hilite(39039)" onMouseOut="lolite()" onClick="logVariable('coursestoload')" href="../_variables/coursestoload.html">$coursestoload</a>, <a class="var it39038" onMouseOver="hilite(39038)" onMouseOut="lolite()" onClick="logVariable('ignorefilters')" href="../_variables/ignorefilters.html">$ignorefilters</a>);
<a name="l2821"><span class="linenum">2821</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('courses')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/courses.html">courses</a> = <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>;
<a name="l2822"><span class="linenum">2822</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('groups')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/groups.html">groups</a> = <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>;
<a name="l2823"><span class="linenum">2823</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('users')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/users.html">users</a> = <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>;
<a name="l2824"><span class="linenum">2824</span></a>      }
<a name="l2825"><span class="linenum">2825</span></a>  
<a name="l2826"><span class="linenum">2826</span></a>      <span class="comment">/**</span>
<a name="l2827"><span class="linenum">2827</span></a>  <span class="comment">     * Ensures the date for the calendar is correct and either sets it to now</span>
<a name="l2828"><span class="linenum">2828</span></a>  <span class="comment">     * or throws a moodle_exception if not</span>
<a name="l2829"><span class="linenum">2829</span></a>  <span class="comment">     *</span>
<a name="l2830"><span class="linenum">2830</span></a>  <span class="comment">     * @param bool $defaultonow use current time</span>
<a name="l2831"><span class="linenum">2831</span></a>  <span class="comment">     * @throws moodle_exception</span>
<a name="l2832"><span class="linenum">2832</span></a>  <span class="comment">     * @return bool validation of checkdate</span>
<a name="l2833"><span class="linenum">2833</span></a>  <span class="comment">     */</span>
<a name="l2834"><span class="linenum">2834</span></a>      public function <a class="function" onClick="logFunction('checkdate')" href="../_functions/checkdate.html" onMouseOver="funcPopup(event,'checkdate')">checkdate</a>(<a class="var it39061" onMouseOver="hilite(39061)" onMouseOut="lolite()" onClick="logVariable('defaultonow')" href="../_variables/defaultonow.html">$defaultonow</a> = true) {
<a name="l2835"><span class="linenum">2835</span></a>          if (!<a class="phpfunction" onClick="logFunction('checkdate')" href="../_functions/checkdate.html" onMouseOver="phpfuncPopup(event,'checkdate')">checkdate</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('month')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/month.html">month</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('day')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/day.html">day</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('year')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/year.html">year</a>)) {
<a name="l2836"><span class="linenum">2836</span></a>              if (<a class="var it39061" onMouseOver="hilite(39061)" onMouseOut="lolite()" onClick="logVariable('defaultonow')" href="../_variables/defaultonow.html">$defaultonow</a>) {
<a name="l2837"><span class="linenum">2837</span></a>                  <a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../_variables/now.html">$now</a> = <a class="function" onClick="logFunction('usergetdate')" href="../_functions/usergetdate.html" onMouseOver="funcPopup(event,'usergetdate')">usergetdate</a>(<a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>());
<a name="l2838"><span class="linenum">2838</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('day')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/day.html">day</a> = <a class="phpfunction" onClick="logFunction('intval')" href="../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../_variables/now.html">$now</a>['mday']);
<a name="l2839"><span class="linenum">2839</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('month')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/month.html">month</a> = <a class="phpfunction" onClick="logFunction('intval')" href="../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../_variables/now.html">$now</a>['mon']);
<a name="l2840"><span class="linenum">2840</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('year')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/year.html">year</a> = <a class="phpfunction" onClick="logFunction('intval')" href="../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../_variables/now.html">$now</a>['year']);
<a name="l2841"><span class="linenum">2841</span></a>                  return true;
<a name="l2842"><span class="linenum">2842</span></a>              } else {
<a name="l2843"><span class="linenum">2843</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('invaliddate');
<a name="l2844"><span class="linenum">2844</span></a>              }
<a name="l2845"><span class="linenum">2845</span></a>          }
<a name="l2846"><span class="linenum">2846</span></a>          return true;
<a name="l2847"><span class="linenum">2847</span></a>      }
<a name="l2848"><span class="linenum">2848</span></a>  
<a name="l2849"><span class="linenum">2849</span></a>      <span class="comment">/**</span>
<a name="l2850"><span class="linenum">2850</span></a>  <span class="comment">     * Gets todays timestamp for the calendar</span>
<a name="l2851"><span class="linenum">2851</span></a>  <span class="comment">     *</span>
<a name="l2852"><span class="linenum">2852</span></a>  <span class="comment">     * @return int today timestamp</span>
<a name="l2853"><span class="linenum">2853</span></a>  <span class="comment">     */</span>
<a name="l2854"><span class="linenum">2854</span></a>      public function <a class="function" onClick="logFunction('timestamp_today')" href="../_functions/timestamp_today.html" onMouseOver="funcPopup(event,'timestamp_today')">timestamp_today</a>() {
<a name="l2855"><span class="linenum">2855</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('time')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/time.html">time</a>;
<a name="l2856"><span class="linenum">2856</span></a>      }
<a name="l2857"><span class="linenum">2857</span></a>      <span class="comment">/**</span>
<a name="l2858"><span class="linenum">2858</span></a>  <span class="comment">     * Gets tomorrows timestamp for the calendar</span>
<a name="l2859"><span class="linenum">2859</span></a>  <span class="comment">     *</span>
<a name="l2860"><span class="linenum">2860</span></a>  <span class="comment">     * @return int tomorrow timestamp</span>
<a name="l2861"><span class="linenum">2861</span></a>  <span class="comment">     */</span>
<a name="l2862"><span class="linenum">2862</span></a>      public function <a class="function" onClick="logFunction('timestamp_tomorrow')" href="../_functions/timestamp_tomorrow.html" onMouseOver="funcPopup(event,'timestamp_tomorrow')">timestamp_tomorrow</a>() {
<a name="l2863"><span class="linenum">2863</span></a>          return <a class="phpfunction" onClick="logFunction('strtotime')" href="../_functions/strtotime.html" onMouseOver="phpfuncPopup(event,'strtotime')">strtotime</a>('+1 day', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('time')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/time.html">time</a>);
<a name="l2864"><span class="linenum">2864</span></a>      }
<a name="l2865"><span class="linenum">2865</span></a>      <span class="comment">/**</span>
<a name="l2866"><span class="linenum">2866</span></a>  <span class="comment">     * Adds the pretend blocks for the calendar</span>
<a name="l2867"><span class="linenum">2867</span></a>  <span class="comment">     *</span>
<a name="l2868"><span class="linenum">2868</span></a>  <span class="comment">     * @param core_calendar_renderer $renderer</span>
<a name="l2869"><span class="linenum">2869</span></a>  <span class="comment">     * @param bool $showfilters display filters, false is set as default</span>
<a name="l2870"><span class="linenum">2870</span></a>  <span class="comment">     * @param string|null $view preference view options (eg: day, month, upcoming)</span>
<a name="l2871"><span class="linenum">2871</span></a>  <span class="comment">     */</span>
<a name="l2872"><span class="linenum">2872</span></a>      public function <a class="function" onClick="logFunction('add_sidecalendar_blocks')" href="../_functions/add_sidecalendar_blocks.html" onMouseOver="funcPopup(event,'add_sidecalendar_blocks')">add_sidecalendar_blocks</a>(core_calendar_renderer <a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('renderer')" href="../_variables/renderer.html">$renderer</a>, <a class="var it39062" onMouseOver="hilite(39062)" onMouseOut="lolite()" onClick="logVariable('showfilters')" href="../_variables/showfilters.html">$showfilters</a>=false, <a class="var it1028" onMouseOver="hilite(1028)" onMouseOut="lolite()" onClick="logVariable('view')" href="../_variables/view.html">$view</a>=null) {
<a name="l2873"><span class="linenum">2873</span></a>          if (<a class="var it39062" onMouseOver="hilite(39062)" onMouseOut="lolite()" onClick="logVariable('showfilters')" href="../_variables/showfilters.html">$showfilters</a>) {
<a name="l2874"><span class="linenum">2874</span></a>              <a class="var it655" onMouseOver="hilite(655)" onMouseOut="lolite()" onClick="logVariable('filters')" href="../_variables/filters.html">$filters</a> = <span class="keyword">new </span><a class="class" onClick="logClass('block_contents')" href="../_classes/block_contents.html" onMouseOver="classPopup(event,'block_contents')">block_contents</a>();
<a name="l2875"><span class="linenum">2875</span></a>              <a class="var it655" onMouseOver="hilite(655)" onMouseOut="lolite()" onClick="logVariable('filters')" href="../_variables/filters.html">$filters</a>-&gt;<a onClick="logVariable('content')" class="var it44829" onMouseOver="hilite(44829)" onMouseOut="lolite()" href="../_variables/content.html">content</a> = <a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('renderer')" href="../_variables/renderer.html">$renderer</a>-&gt;<a class="function" onClick="logFunction('fake_block_filters')" href="../_functions/fake_block_filters.html" onMouseOver="funcPopup(event,'fake_block_filters')">fake_block_filters</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('courseid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>, 0, 0, 0, <a class="var it1028" onMouseOver="hilite(1028)" onMouseOut="lolite()" onClick="logVariable('view')" href="../_variables/view.html">$view</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('courses')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/courses.html">courses</a>);
<a name="l2876"><span class="linenum">2876</span></a>              <a class="var it655" onMouseOver="hilite(655)" onMouseOut="lolite()" onClick="logVariable('filters')" href="../_variables/filters.html">$filters</a>-&gt;<a onClick="logVariable('footer')" class="var it44829" onMouseOver="hilite(44829)" onMouseOut="lolite()" href="../_variables/footer.html">footer</a> = '';
<a name="l2877"><span class="linenum">2877</span></a>              <a class="var it655" onMouseOver="hilite(655)" onMouseOut="lolite()" onClick="logVariable('filters')" href="../_variables/filters.html">$filters</a>-&gt;<a onClick="logVariable('title')" class="var it44829" onMouseOver="hilite(44829)" onMouseOut="lolite()" href="../_variables/title.html">title</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('eventskey', 'calendar');
<a name="l2878"><span class="linenum">2878</span></a>              <a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('renderer')" href="../_variables/renderer.html">$renderer</a>-&gt;<a class="function" onClick="logFunction('add_pretend_calendar_block')" href="../_functions/add_pretend_calendar_block.html" onMouseOver="funcPopup(event,'add_pretend_calendar_block')">add_pretend_calendar_block</a>(<a class="var it655" onMouseOver="hilite(655)" onMouseOut="lolite()" onClick="logVariable('filters')" href="../_variables/filters.html">$filters</a>, <a class="constant" onClick="logConstant('BLOCK_POS_RIGHT')" href="../_constants/BLOCK_POS_RIGHT.html" onMouseOver="constPopup(event,'BLOCK_POS_RIGHT')">BLOCK_POS_RIGHT</a>);
<a name="l2879"><span class="linenum">2879</span></a>          }
<a name="l2880"><span class="linenum">2880</span></a>          <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a> = <span class="keyword">new </span><a class="class" onClick="logClass('block_contents')" href="../_classes/block_contents.html" onMouseOver="classPopup(event,'block_contents')">block_contents</a>;
<a name="l2881"><span class="linenum">2881</span></a>          <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('content')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/content.html">content</a> = <a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('renderer')" href="../_variables/renderer.html">$renderer</a>-&gt;<a class="function" onClick="logFunction('fake_block_threemonths')" href="../_functions/fake_block_threemonths.html" onMouseOver="funcPopup(event,'fake_block_threemonths')">fake_block_threemonths</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>);
<a name="l2882"><span class="linenum">2882</span></a>          <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('footer')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/footer.html">footer</a> = '';
<a name="l2883"><span class="linenum">2883</span></a>          <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('title')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/title.html">title</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('monthlyview', 'calendar');
<a name="l2884"><span class="linenum">2884</span></a>          <a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('renderer')" href="../_variables/renderer.html">$renderer</a>-&gt;<a class="function" onClick="logFunction('add_pretend_calendar_block')" href="../_functions/add_pretend_calendar_block.html" onMouseOver="funcPopup(event,'add_pretend_calendar_block')">add_pretend_calendar_block</a>(<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>, <a class="constant" onClick="logConstant('BLOCK_POS_RIGHT')" href="../_constants/BLOCK_POS_RIGHT.html" onMouseOver="constPopup(event,'BLOCK_POS_RIGHT')">BLOCK_POS_RIGHT</a>);
<a name="l2885"><span class="linenum">2885</span></a>      }
<a name="l2886"><span class="linenum">2886</span></a>  }
<a name="l2887"><span class="linenum">2887</span></a>  
<a name="l2888"><span class="linenum">2888</span></a>  <span class="comment">/**</span>
<a name="l2889"><span class="linenum">2889</span></a>  <span class="comment"> * Returns option list for the poll interval setting.</span>
<a name="l2890"><span class="linenum">2890</span></a>  <span class="comment"> *</span>
<a name="l2891"><span class="linenum">2891</span></a>  <span class="comment"> * @return array An array of poll interval options. Interval =&gt; description.</span>
<a name="l2892"><span class="linenum">2892</span></a>  <span class="comment"> */</span>
<a name="l2893"><span class="linenum">2893</span></a>  function <a class="function" onClick="logFunction('calendar_get_pollinterval_choices')" href="../_functions/calendar_get_pollinterval_choices.html" onMouseOver="funcPopup(event,'calendar_get_pollinterval_choices')">calendar_get_pollinterval_choices</a>() {
<a name="l2894"><span class="linenum">2894</span></a>      return array(
<a name="l2895"><span class="linenum">2895</span></a>          '0' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('lang_string')" href="../_classes/lang_string.html" onMouseOver="classPopup(event,'lang_string')">lang_string</a>('never', 'calendar'),
<a name="l2896"><span class="linenum">2896</span></a>          <a class="constant" onClick="logConstant('HOURSECS')" href="../_constants/HOURSECS.html" onMouseOver="constPopup(event,'HOURSECS')">HOURSECS</a> =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('lang_string')" href="../_classes/lang_string.html" onMouseOver="classPopup(event,'lang_string')">lang_string</a>('hourly', 'calendar'),
<a name="l2897"><span class="linenum">2897</span></a>          <a class="constant" onClick="logConstant('DAYSECS')" href="../_constants/DAYSECS.html" onMouseOver="constPopup(event,'DAYSECS')">DAYSECS</a> =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('lang_string')" href="../_classes/lang_string.html" onMouseOver="classPopup(event,'lang_string')">lang_string</a>('daily', 'calendar'),
<a name="l2898"><span class="linenum">2898</span></a>          <a class="constant" onClick="logConstant('WEEKSECS')" href="../_constants/WEEKSECS.html" onMouseOver="constPopup(event,'WEEKSECS')">WEEKSECS</a> =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('lang_string')" href="../_classes/lang_string.html" onMouseOver="classPopup(event,'lang_string')">lang_string</a>('weekly', 'calendar'),
<a name="l2899"><span class="linenum">2899</span></a>          '2628000' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('lang_string')" href="../_classes/lang_string.html" onMouseOver="classPopup(event,'lang_string')">lang_string</a>('monthly', 'calendar'),
<a name="l2900"><span class="linenum">2900</span></a>          <a class="constant" onClick="logConstant('YEARSECS')" href="../_constants/YEARSECS.html" onMouseOver="constPopup(event,'YEARSECS')">YEARSECS</a> =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('lang_string')" href="../_classes/lang_string.html" onMouseOver="classPopup(event,'lang_string')">lang_string</a>('annually', 'calendar')
<a name="l2901"><span class="linenum">2901</span></a>      );
<a name="l2902"><span class="linenum">2902</span></a>  }
<a name="l2903"><span class="linenum">2903</span></a>  
<a name="l2904"><span class="linenum">2904</span></a>  <span class="comment">/**</span>
<a name="l2905"><span class="linenum">2905</span></a>  <span class="comment"> * Returns option list of available options for the calendar event type, given the current user and course.</span>
<a name="l2906"><span class="linenum">2906</span></a>  <span class="comment"> *</span>
<a name="l2907"><span class="linenum">2907</span></a>  <span class="comment"> * @param int $courseid The id of the course</span>
<a name="l2908"><span class="linenum">2908</span></a>  <span class="comment"> * @return array An array containing the event types the user can create.</span>
<a name="l2909"><span class="linenum">2909</span></a>  <span class="comment"> */</span>
<a name="l2910"><span class="linenum">2910</span></a>  function <a class="function" onClick="logFunction('calendar_get_eventtype_choices')" href="../_functions/calendar_get_eventtype_choices.html" onMouseOver="funcPopup(event,'calendar_get_eventtype_choices')">calendar_get_eventtype_choices</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>) {
<a name="l2911"><span class="linenum">2911</span></a>      <a class="var it1191" onMouseOver="hilite(1191)" onMouseOut="lolite()" onClick="logVariable('choices')" href="../_variables/choices.html">$choices</a> = array();
<a name="l2912"><span class="linenum">2912</span></a>      <a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a> = new stdClass;
<a name="l2913"><span class="linenum">2913</span></a>      <a class="function" onClick="logFunction('calendar_get_allowed_types')" href="../_functions/calendar_get_allowed_types.html" onMouseOver="funcPopup(event,'calendar_get_allowed_types')">calendar_get_allowed_types</a>(<a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>, <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l2914"><span class="linenum">2914</span></a>  
<a name="l2915"><span class="linenum">2915</span></a>      if (<a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>-&gt;<a onClick="logVariable('user')" class="var it44827" onMouseOver="hilite(44827)" onMouseOut="lolite()" href="../_variables/user.html">user</a>) {
<a name="l2916"><span class="linenum">2916</span></a>          <a class="var it1191" onMouseOver="hilite(1191)" onMouseOut="lolite()" onClick="logVariable('choices')" href="../_variables/choices.html">$choices</a>['user'] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('userevents', 'calendar');
<a name="l2917"><span class="linenum">2917</span></a>      }
<a name="l2918"><span class="linenum">2918</span></a>      if (<a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>-&gt;<a onClick="logVariable('site')" class="var it44827" onMouseOver="hilite(44827)" onMouseOut="lolite()" href="../_variables/site.html">site</a>) {
<a name="l2919"><span class="linenum">2919</span></a>          <a class="var it1191" onMouseOver="hilite(1191)" onMouseOut="lolite()" onClick="logVariable('choices')" href="../_variables/choices.html">$choices</a>['site'] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('siteevents', 'calendar');
<a name="l2920"><span class="linenum">2920</span></a>      }
<a name="l2921"><span class="linenum">2921</span></a>      if (!empty(<a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>-&gt;<a onClick="logVariable('courses')" class="var it44827" onMouseOver="hilite(44827)" onMouseOut="lolite()" href="../_variables/courses.html">courses</a>)) {
<a name="l2922"><span class="linenum">2922</span></a>          <a class="var it1191" onMouseOver="hilite(1191)" onMouseOut="lolite()" onClick="logVariable('choices')" href="../_variables/choices.html">$choices</a>['course'] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('courseevents', 'calendar');
<a name="l2923"><span class="linenum">2923</span></a>      }
<a name="l2924"><span class="linenum">2924</span></a>      if (!empty(<a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>-&gt;<a onClick="logVariable('groups')" class="var it44827" onMouseOver="hilite(44827)" onMouseOut="lolite()" href="../_variables/groups.html">groups</a>) and <a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>-&gt;<a onClick="logVariable('groups')" class="var it44827" onMouseOver="hilite(44827)" onMouseOut="lolite()" href="../_variables/groups.html">groups</a>)) {
<a name="l2925"><span class="linenum">2925</span></a>          <a class="var it1191" onMouseOver="hilite(1191)" onMouseOut="lolite()" onClick="logVariable('choices')" href="../_variables/choices.html">$choices</a>['group'] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('group');
<a name="l2926"><span class="linenum">2926</span></a>      }
<a name="l2927"><span class="linenum">2927</span></a>  
<a name="l2928"><span class="linenum">2928</span></a>      return array(<a class="var it1191" onMouseOver="hilite(1191)" onMouseOut="lolite()" onClick="logVariable('choices')" href="../_variables/choices.html">$choices</a>, <a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>-&gt;<a onClick="logVariable('groups')" class="var it44827" onMouseOver="hilite(44827)" onMouseOut="lolite()" href="../_variables/groups.html">groups</a>);
<a name="l2929"><span class="linenum">2929</span></a>  }
<a name="l2930"><span class="linenum">2930</span></a>  
<a name="l2931"><span class="linenum">2931</span></a>  <span class="comment">/**</span>
<a name="l2932"><span class="linenum">2932</span></a>  <span class="comment"> * Add an iCalendar subscription to the database.</span>
<a name="l2933"><span class="linenum">2933</span></a>  <span class="comment"> *</span>
<a name="l2934"><span class="linenum">2934</span></a>  <span class="comment"> * @param stdClass $sub The subscription object (e.g. from the form)</span>
<a name="l2935"><span class="linenum">2935</span></a>  <span class="comment"> * @return int The insert ID, if any.</span>
<a name="l2936"><span class="linenum">2936</span></a>  <span class="comment"> */</span>
<a name="l2937"><span class="linenum">2937</span></a>  function <a class="function" onClick="logFunction('calendar_add_subscription')" href="../_functions/calendar_add_subscription.html" onMouseOver="funcPopup(event,'calendar_add_subscription')">calendar_add_subscription</a>(<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>) {
<a name="l2938"><span class="linenum">2938</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>, <a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>;
<a name="l2939"><span class="linenum">2939</span></a>  
<a name="l2940"><span class="linenum">2940</span></a>      if (<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>-&gt;<a onClick="logVariable('eventtype')" class="var it43072" onMouseOver="hilite(43072)" onMouseOut="lolite()" href="../_variables/eventtype.html">eventtype</a> === 'site') {
<a name="l2941"><span class="linenum">2941</span></a>          <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>-&gt;<a onClick="logVariable('courseid')" class="var it43072" onMouseOver="hilite(43072)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a> = <a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('id')" class="var it43008" onMouseOver="hilite(43008)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l2942"><span class="linenum">2942</span></a>      } else if (<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>-&gt;<a onClick="logVariable('eventtype')" class="var it43072" onMouseOver="hilite(43072)" onMouseOut="lolite()" href="../_variables/eventtype.html">eventtype</a> === 'group' || <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>-&gt;<a onClick="logVariable('eventtype')" class="var it43072" onMouseOver="hilite(43072)" onMouseOut="lolite()" href="../_variables/eventtype.html">eventtype</a> === 'course') {
<a name="l2943"><span class="linenum">2943</span></a>          <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>-&gt;<a onClick="logVariable('courseid')" class="var it43072" onMouseOver="hilite(43072)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>-&gt;<a onClick="logVariable('course')" class="var it43072" onMouseOver="hilite(43072)" onMouseOut="lolite()" href="../_variables/course.html">course</a>;
<a name="l2944"><span class="linenum">2944</span></a>      } else {
<a name="l2945"><span class="linenum">2945</span></a>  <span class="comment">        // User events.</span>
<a name="l2946"><span class="linenum">2946</span></a>          <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>-&gt;<a onClick="logVariable('courseid')" class="var it43072" onMouseOver="hilite(43072)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a> = 0;
<a name="l2947"><span class="linenum">2947</span></a>      }
<a name="l2948"><span class="linenum">2948</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>-&gt;<a onClick="logVariable('userid')" class="var it43072" onMouseOver="hilite(43072)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a> = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l2949"><span class="linenum">2949</span></a>  
<a name="l2950"><span class="linenum">2950</span></a>  <span class="comment">    // File subscriptions never update.</span>
<a name="l2951"><span class="linenum">2951</span></a>      if (empty(<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>-&gt;<a onClick="logVariable('url')" class="var it43072" onMouseOver="hilite(43072)" onMouseOut="lolite()" href="../_variables/url.html">url</a>)) {
<a name="l2952"><span class="linenum">2952</span></a>          <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>-&gt;<a onClick="logVariable('pollinterval')" class="var it43072" onMouseOver="hilite(43072)" onMouseOut="lolite()" href="../_variables/pollinterval.html">pollinterval</a> = 0;
<a name="l2953"><span class="linenum">2953</span></a>      }
<a name="l2954"><span class="linenum">2954</span></a>  
<a name="l2955"><span class="linenum">2955</span></a>      if (!empty(<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>-&gt;<a onClick="logVariable('name')" class="var it43072" onMouseOver="hilite(43072)" onMouseOut="lolite()" href="../_variables/name.html">name</a>)) {
<a name="l2956"><span class="linenum">2956</span></a>          if (empty(<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>-&gt;<a onClick="logVariable('id')" class="var it43072" onMouseOver="hilite(43072)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)) {
<a name="l2957"><span class="linenum">2957</span></a>              <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('event_subscriptions', <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>);
<a name="l2958"><span class="linenum">2958</span></a>  <span class="comment">            // we cannot cache the data here because $sub is not complete.</span>
<a name="l2959"><span class="linenum">2959</span></a>              <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>-&gt;<a onClick="logVariable('id')" class="var it43072" onMouseOver="hilite(43072)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>;
<a name="l2960"><span class="linenum">2960</span></a>  <span class="comment">            // Trigger event, calendar subscription added.</span>
<a name="l2961"><span class="linenum">2961</span></a>              <a class="var it3033" onMouseOver="hilite(3033)" onMouseOut="lolite()" onClick="logVariable('eventparams')" href="../_variables/eventparams.html">$eventparams</a> = array('objectid' =&gt; <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>-&gt;<a onClick="logVariable('id')" class="var it43072" onMouseOver="hilite(43072)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l2962"><span class="linenum">2962</span></a>                  'context' =&gt; <a class="function" onClick="logFunction('calendar_get_calendar_context')" href="../_functions/calendar_get_calendar_context.html" onMouseOver="funcPopup(event,'calendar_get_calendar_context')">calendar_get_calendar_context</a>(<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>),
<a name="l2963"><span class="linenum">2963</span></a>                  'other' =&gt; array('eventtype' =&gt; <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>-&gt;<a onClick="logVariable('eventtype')" class="var it43072" onMouseOver="hilite(43072)" onMouseOut="lolite()" href="../_variables/eventtype.html">eventtype</a>, 'courseid' =&gt; <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>-&gt;<a onClick="logVariable('courseid')" class="var it43072" onMouseOver="hilite(43072)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>)
<a name="l2964"><span class="linenum">2964</span></a>              );
<a name="l2965"><span class="linenum">2965</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('calendar_subscription_created')" href="../_classes/calendar_subscription_created.html" onMouseOver="classPopup(event,'calendar_subscription_created')">calendar_subscription_created</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it3033" onMouseOver="hilite(3033)" onMouseOut="lolite()" onClick="logVariable('eventparams')" href="../_variables/eventparams.html">$eventparams</a>);
<a name="l2966"><span class="linenum">2966</span></a>              <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l2967"><span class="linenum">2967</span></a>              return <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>;
<a name="l2968"><span class="linenum">2968</span></a>          } else {
<a name="l2969"><span class="linenum">2969</span></a>  <span class="comment">            // Why are we doing an update here?</span>
<a name="l2970"><span class="linenum">2970</span></a>              <a class="function" onClick="logFunction('calendar_update_subscription')" href="../_functions/calendar_update_subscription.html" onMouseOver="funcPopup(event,'calendar_update_subscription')">calendar_update_subscription</a>(<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>);
<a name="l2971"><span class="linenum">2971</span></a>              return <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>-&gt;<a onClick="logVariable('id')" class="var it43072" onMouseOver="hilite(43072)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l2972"><span class="linenum">2972</span></a>          }
<a name="l2973"><span class="linenum">2973</span></a>      } else {
<a name="l2974"><span class="linenum">2974</span></a>          <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('errorbadsubscription', 'importcalendar');
<a name="l2975"><span class="linenum">2975</span></a>      }
<a name="l2976"><span class="linenum">2976</span></a>  }
<a name="l2977"><span class="linenum">2977</span></a>  
<a name="l2978"><span class="linenum">2978</span></a>  <span class="comment">/**</span>
<a name="l2979"><span class="linenum">2979</span></a>  <span class="comment"> * Add an iCalendar event to the Moodle calendar.</span>
<a name="l2980"><span class="linenum">2980</span></a>  <span class="comment"> *</span>
<a name="l2981"><span class="linenum">2981</span></a>  <span class="comment"> * @param stdClass $event The RFC-2445 iCalendar event</span>
<a name="l2982"><span class="linenum">2982</span></a>  <span class="comment"> * @param int $courseid The course ID</span>
<a name="l2983"><span class="linenum">2983</span></a>  <span class="comment"> * @param int $subscriptionid The iCalendar subscription ID</span>
<a name="l2984"><span class="linenum">2984</span></a>  <span class="comment"> * @param string $timezone The X-WR-TIMEZONE iCalendar property if provided</span>
<a name="l2985"><span class="linenum">2985</span></a>  <span class="comment"> * @throws dml_exception A DML specific exception is thrown for invalid subscriptionids.</span>
<a name="l2986"><span class="linenum">2986</span></a>  <span class="comment"> * @return int Code: CALENDAR_IMPORT_EVENT_UPDATED = updated,  CALENDAR_IMPORT_EVENT_INSERTED = inserted, 0 = error</span>
<a name="l2987"><span class="linenum">2987</span></a>  <span class="comment"> */</span>
<a name="l2988"><span class="linenum">2988</span></a>  function <a class="function" onClick="logFunction('calendar_add_icalendar_event')" href="../_functions/calendar_add_icalendar_event.html" onMouseOver="funcPopup(event,'calendar_add_icalendar_event')">calendar_add_icalendar_event</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>, <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it18685" onMouseOver="hilite(18685)" onMouseOut="lolite()" onClick="logVariable('subscriptionid')" href="../_variables/subscriptionid.html">$subscriptionid</a>, <a class="var it1762" onMouseOver="hilite(1762)" onMouseOut="lolite()" onClick="logVariable('timezone')" href="../_variables/timezone.html">$timezone</a>='UTC') {
<a name="l2989"><span class="linenum">2989</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2990"><span class="linenum">2990</span></a>  
<a name="l2991"><span class="linenum">2991</span></a>  <span class="comment">    // Probably an unsupported X-MICROSOFT-CDO-BUSYSTATUS event.</span>
<a name="l2992"><span class="linenum">2992</span></a>      if (empty(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('properties')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>['SUMMARY'])) {
<a name="l2993"><span class="linenum">2993</span></a>          return 0;
<a name="l2994"><span class="linenum">2994</span></a>      }
<a name="l2995"><span class="linenum">2995</span></a>  
<a name="l2996"><span class="linenum">2996</span></a>      <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a> = <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('properties')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>['SUMMARY'][0]-&gt;value;
<a name="l2997"><span class="linenum">2997</span></a>      <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('\n', '&lt;br /&gt;', <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>);
<a name="l2998"><span class="linenum">2998</span></a>      <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('\\', '', <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>);
<a name="l2999"><span class="linenum">2999</span></a>      <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('/\s+/u', ' ', <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>);
<a name="l3000"><span class="linenum">3000</span></a>  
<a name="l3001"><span class="linenum">3001</span></a>      <a class="var it39063" onMouseOver="hilite(39063)" onMouseOut="lolite()" onClick="logVariable('eventrecord')" href="../_variables/eventrecord.html">$eventrecord</a> = new stdClass;
<a name="l3002"><span class="linenum">3002</span></a>      <a class="var it39063" onMouseOver="hilite(39063)" onMouseOut="lolite()" onClick="logVariable('eventrecord')" href="../_variables/eventrecord.html">$eventrecord</a>-&gt;<a onClick="logVariable('name')" class="var it44830" onMouseOver="hilite(44830)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = <a class="function" onClick="logFunction('clean_param')" href="../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>, <a class="constant" onClick="logConstant('PARAM_NOTAGS')" href="../_constants/PARAM_NOTAGS.html" onMouseOver="constPopup(event,'PARAM_NOTAGS')">PARAM_NOTAGS</a>);
<a name="l3003"><span class="linenum">3003</span></a>  
<a name="l3004"><span class="linenum">3004</span></a>      if (empty(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('properties')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>['DESCRIPTION'][0]-&gt;value)) {
<a name="l3005"><span class="linenum">3005</span></a>          <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('description')" href="../_variables/description.html">$description</a> = '';
<a name="l3006"><span class="linenum">3006</span></a>      } else {
<a name="l3007"><span class="linenum">3007</span></a>          <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('description')" href="../_variables/description.html">$description</a> = <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('properties')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>['DESCRIPTION'][0]-&gt;value;
<a name="l3008"><span class="linenum">3008</span></a>          <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('description')" href="../_variables/description.html">$description</a> = <a class="function" onClick="logFunction('clean_param')" href="../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('description')" href="../_variables/description.html">$description</a>, <a class="constant" onClick="logConstant('PARAM_NOTAGS')" href="../_constants/PARAM_NOTAGS.html" onMouseOver="constPopup(event,'PARAM_NOTAGS')">PARAM_NOTAGS</a>);
<a name="l3009"><span class="linenum">3009</span></a>          <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('description')" href="../_variables/description.html">$description</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('\n', '&lt;br /&gt;', <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('description')" href="../_variables/description.html">$description</a>);
<a name="l3010"><span class="linenum">3010</span></a>          <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('description')" href="../_variables/description.html">$description</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('\\', '', <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('description')" href="../_variables/description.html">$description</a>);
<a name="l3011"><span class="linenum">3011</span></a>          <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('description')" href="../_variables/description.html">$description</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('/\s+/u', ' ', <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('description')" href="../_variables/description.html">$description</a>);
<a name="l3012"><span class="linenum">3012</span></a>      }
<a name="l3013"><span class="linenum">3013</span></a>      <a class="var it39063" onMouseOver="hilite(39063)" onMouseOut="lolite()" onClick="logVariable('eventrecord')" href="../_variables/eventrecord.html">$eventrecord</a>-&gt;<a onClick="logVariable('description')" class="var it44830" onMouseOver="hilite(44830)" onMouseOut="lolite()" href="../_variables/description.html">description</a> = <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('description')" href="../_variables/description.html">$description</a>;
<a name="l3014"><span class="linenum">3014</span></a>  
<a name="l3015"><span class="linenum">3015</span></a>  <span class="comment">    // Probably a repeating event with RRULE etc. TODO: skip for now.</span>
<a name="l3016"><span class="linenum">3016</span></a>      if (empty(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('properties')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>['DTSTART'][0]-&gt;value)) {
<a name="l3017"><span class="linenum">3017</span></a>          return 0;
<a name="l3018"><span class="linenum">3018</span></a>      }
<a name="l3019"><span class="linenum">3019</span></a>  
<a name="l3020"><span class="linenum">3020</span></a>      <a class="var it2632" onMouseOver="hilite(2632)" onMouseOut="lolite()" onClick="logVariable('tz')" href="../_variables/tz.html">$tz</a> = isset(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('properties')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>['DTSTART'][0]-&gt;parameters['TZID']) ? <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('properties')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>['DTSTART'][0]-&gt;parameters['TZID'] :
<a name="l3021"><span class="linenum">3021</span></a>              <a class="var it1762" onMouseOver="hilite(1762)" onMouseOut="lolite()" onClick="logVariable('timezone')" href="../_variables/timezone.html">$timezone</a>;
<a name="l3022"><span class="linenum">3022</span></a>      <a class="var it2632" onMouseOver="hilite(2632)" onMouseOut="lolite()" onClick="logVariable('tz')" href="../_variables/tz.html">$tz</a> = <a class="class" onClick="logClass('core_date')" href="../_classes/core_date.html" onMouseOver="classPopup(event,'core_date')">core_date</a>::<a class="function" onClick="logFunction('normalise_timezone')" href="../_functions/normalise_timezone.html" onMouseOver="funcPopup(event,'normalise_timezone')">normalise_timezone</a>(<a class="var it2632" onMouseOver="hilite(2632)" onMouseOut="lolite()" onClick="logVariable('tz')" href="../_variables/tz.html">$tz</a>);
<a name="l3023"><span class="linenum">3023</span></a>      <a class="var it39063" onMouseOver="hilite(39063)" onMouseOut="lolite()" onClick="logVariable('eventrecord')" href="../_variables/eventrecord.html">$eventrecord</a>-&gt;<a onClick="logVariable('timestart')" class="var it44830" onMouseOver="hilite(44830)" onMouseOut="lolite()" href="../_variables/timestart.html">timestart</a> = <a class="phpfunction" onClick="logFunction('strtotime')" href="../_functions/strtotime.html" onMouseOver="phpfuncPopup(event,'strtotime')">strtotime</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('properties')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>['DTSTART'][0]-&gt;value . ' ' . <a class="var it2632" onMouseOver="hilite(2632)" onMouseOut="lolite()" onClick="logVariable('tz')" href="../_variables/tz.html">$tz</a>);
<a name="l3024"><span class="linenum">3024</span></a>      if (empty(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('properties')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>['DTEND'])) {
<a name="l3025"><span class="linenum">3025</span></a>          <a class="var it39063" onMouseOver="hilite(39063)" onMouseOut="lolite()" onClick="logVariable('eventrecord')" href="../_variables/eventrecord.html">$eventrecord</a>-&gt;<a onClick="logVariable('timeduration')" class="var it44830" onMouseOver="hilite(44830)" onMouseOut="lolite()" href="../_variables/timeduration.html">timeduration</a> = 0; <span class="comment">// no duration if no end time specified</span>
<a name="l3026"><span class="linenum">3026</span></a>      } else {
<a name="l3027"><span class="linenum">3027</span></a>          <a class="var it39064" onMouseOver="hilite(39064)" onMouseOut="lolite()" onClick="logVariable('endtz')" href="../_variables/endtz.html">$endtz</a> = isset(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('properties')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>['DTEND'][0]-&gt;parameters['TZID']) ? <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('properties')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>['DTEND'][0]-&gt;parameters['TZID'] :
<a name="l3028"><span class="linenum">3028</span></a>                  <a class="var it1762" onMouseOver="hilite(1762)" onMouseOut="lolite()" onClick="logVariable('timezone')" href="../_variables/timezone.html">$timezone</a>;
<a name="l3029"><span class="linenum">3029</span></a>          <a class="var it39064" onMouseOver="hilite(39064)" onMouseOut="lolite()" onClick="logVariable('endtz')" href="../_variables/endtz.html">$endtz</a> = <a class="class" onClick="logClass('core_date')" href="../_classes/core_date.html" onMouseOver="classPopup(event,'core_date')">core_date</a>::<a class="function" onClick="logFunction('normalise_timezone')" href="../_functions/normalise_timezone.html" onMouseOver="funcPopup(event,'normalise_timezone')">normalise_timezone</a>(<a class="var it39064" onMouseOver="hilite(39064)" onMouseOut="lolite()" onClick="logVariable('endtz')" href="../_variables/endtz.html">$endtz</a>);
<a name="l3030"><span class="linenum">3030</span></a>          <a class="var it39063" onMouseOver="hilite(39063)" onMouseOut="lolite()" onClick="logVariable('eventrecord')" href="../_variables/eventrecord.html">$eventrecord</a>-&gt;<a onClick="logVariable('timeduration')" class="var it44830" onMouseOver="hilite(44830)" onMouseOut="lolite()" href="../_variables/timeduration.html">timeduration</a> = <a class="phpfunction" onClick="logFunction('strtotime')" href="../_functions/strtotime.html" onMouseOver="phpfuncPopup(event,'strtotime')">strtotime</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('properties')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>['DTEND'][0]-&gt;value . ' ' . <a class="var it39064" onMouseOver="hilite(39064)" onMouseOut="lolite()" onClick="logVariable('endtz')" href="../_variables/endtz.html">$endtz</a>) - <a class="var it39063" onMouseOver="hilite(39063)" onMouseOut="lolite()" onClick="logVariable('eventrecord')" href="../_variables/eventrecord.html">$eventrecord</a>-&gt;<a onClick="logVariable('timestart')" class="var it44830" onMouseOver="hilite(44830)" onMouseOut="lolite()" href="../_variables/timestart.html">timestart</a>;
<a name="l3031"><span class="linenum">3031</span></a>      }
<a name="l3032"><span class="linenum">3032</span></a>  
<a name="l3033"><span class="linenum">3033</span></a>  <span class="comment">    // Check to see if it should be treated as an all day event.</span>
<a name="l3034"><span class="linenum">3034</span></a>      if (<a class="var it39063" onMouseOver="hilite(39063)" onMouseOut="lolite()" onClick="logVariable('eventrecord')" href="../_variables/eventrecord.html">$eventrecord</a>-&gt;<a onClick="logVariable('timeduration')" class="var it44830" onMouseOver="hilite(44830)" onMouseOut="lolite()" href="../_variables/timeduration.html">timeduration</a> == <a class="constant" onClick="logConstant('DAYSECS')" href="../_constants/DAYSECS.html" onMouseOver="constPopup(event,'DAYSECS')">DAYSECS</a>) {
<a name="l3035"><span class="linenum">3035</span></a>  <span class="comment">        // Check to see if the event started at Midnight on the imported calendar.</span>
<a name="l3036"><span class="linenum">3036</span></a>          date_default_timezone_set(<a class="var it1762" onMouseOver="hilite(1762)" onMouseOut="lolite()" onClick="logVariable('timezone')" href="../_variables/timezone.html">$timezone</a>);
<a name="l3037"><span class="linenum">3037</span></a>          if (<a class="phpfunction" onClick="logFunction('date')" href="../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('H:i:s', <a class="var it39063" onMouseOver="hilite(39063)" onMouseOut="lolite()" onClick="logVariable('eventrecord')" href="../_variables/eventrecord.html">$eventrecord</a>-&gt;<a onClick="logVariable('timestart')" class="var it44830" onMouseOver="hilite(44830)" onMouseOut="lolite()" href="../_variables/timestart.html">timestart</a>) === &quot;00:00:00&quot;) {
<a name="l3038"><span class="linenum">3038</span></a>  <span class="comment">            // This event should be an all day event.</span>
<a name="l3039"><span class="linenum">3039</span></a>              <a class="var it39063" onMouseOver="hilite(39063)" onMouseOut="lolite()" onClick="logVariable('eventrecord')" href="../_variables/eventrecord.html">$eventrecord</a>-&gt;<a onClick="logVariable('timeduration')" class="var it44830" onMouseOver="hilite(44830)" onMouseOut="lolite()" href="../_variables/timeduration.html">timeduration</a> = 0;
<a name="l3040"><span class="linenum">3040</span></a>          }
<a name="l3041"><span class="linenum">3041</span></a>          <a class="class" onClick="logClass('core_date')" href="../_classes/core_date.html" onMouseOver="classPopup(event,'core_date')">core_date</a>::<a class="function" onClick="logFunction('set_default_server_timezone')" href="../_functions/set_default_server_timezone.html" onMouseOver="funcPopup(event,'set_default_server_timezone')">set_default_server_timezone</a>();
<a name="l3042"><span class="linenum">3042</span></a>      }
<a name="l3043"><span class="linenum">3043</span></a>  
<a name="l3044"><span class="linenum">3044</span></a>      <a class="var it39063" onMouseOver="hilite(39063)" onMouseOut="lolite()" onClick="logVariable('eventrecord')" href="../_variables/eventrecord.html">$eventrecord</a>-&gt;<a onClick="logVariable('uuid')" class="var it44830" onMouseOver="hilite(44830)" onMouseOut="lolite()" href="../_variables/uuid.html">uuid</a> = <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('properties')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>['UID'][0]-&gt;value;
<a name="l3045"><span class="linenum">3045</span></a>      <a class="var it39063" onMouseOver="hilite(39063)" onMouseOut="lolite()" onClick="logVariable('eventrecord')" href="../_variables/eventrecord.html">$eventrecord</a>-&gt;<a onClick="logVariable('timemodified')" class="var it44830" onMouseOver="hilite(44830)" onMouseOut="lolite()" href="../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l3046"><span class="linenum">3046</span></a>  
<a name="l3047"><span class="linenum">3047</span></a>  <span class="comment">    // Add the iCal subscription details if required.</span>
<a name="l3048"><span class="linenum">3048</span></a>  <span class="comment">    // We should never do anything with an event without a subscription reference.</span>
<a name="l3049"><span class="linenum">3049</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a> = <a class="function" onClick="logFunction('calendar_get_subscription')" href="../_functions/calendar_get_subscription.html" onMouseOver="funcPopup(event,'calendar_get_subscription')">calendar_get_subscription</a>(<a class="var it18685" onMouseOver="hilite(18685)" onMouseOut="lolite()" onClick="logVariable('subscriptionid')" href="../_variables/subscriptionid.html">$subscriptionid</a>);
<a name="l3050"><span class="linenum">3050</span></a>      <a class="var it39063" onMouseOver="hilite(39063)" onMouseOut="lolite()" onClick="logVariable('eventrecord')" href="../_variables/eventrecord.html">$eventrecord</a>-&gt;<a onClick="logVariable('subscriptionid')" class="var it44830" onMouseOver="hilite(44830)" onMouseOut="lolite()" href="../_variables/subscriptionid.html">subscriptionid</a> = <a class="var it18685" onMouseOver="hilite(18685)" onMouseOut="lolite()" onClick="logVariable('subscriptionid')" href="../_variables/subscriptionid.html">$subscriptionid</a>;
<a name="l3051"><span class="linenum">3051</span></a>      <a class="var it39063" onMouseOver="hilite(39063)" onMouseOut="lolite()" onClick="logVariable('eventrecord')" href="../_variables/eventrecord.html">$eventrecord</a>-&gt;<a onClick="logVariable('userid')" class="var it44830" onMouseOver="hilite(44830)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>-&gt;<a onClick="logVariable('userid')" class="var it43072" onMouseOver="hilite(43072)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>;
<a name="l3052"><span class="linenum">3052</span></a>      <a class="var it39063" onMouseOver="hilite(39063)" onMouseOut="lolite()" onClick="logVariable('eventrecord')" href="../_variables/eventrecord.html">$eventrecord</a>-&gt;<a onClick="logVariable('groupid')" class="var it44830" onMouseOver="hilite(44830)" onMouseOut="lolite()" href="../_variables/groupid.html">groupid</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>-&gt;<a onClick="logVariable('groupid')" class="var it43072" onMouseOver="hilite(43072)" onMouseOut="lolite()" href="../_variables/groupid.html">groupid</a>;
<a name="l3053"><span class="linenum">3053</span></a>      <a class="var it39063" onMouseOver="hilite(39063)" onMouseOut="lolite()" onClick="logVariable('eventrecord')" href="../_variables/eventrecord.html">$eventrecord</a>-&gt;<a onClick="logVariable('courseid')" class="var it44830" onMouseOver="hilite(44830)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>-&gt;<a onClick="logVariable('courseid')" class="var it43072" onMouseOver="hilite(43072)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>;
<a name="l3054"><span class="linenum">3054</span></a>      <a class="var it39063" onMouseOver="hilite(39063)" onMouseOut="lolite()" onClick="logVariable('eventrecord')" href="../_variables/eventrecord.html">$eventrecord</a>-&gt;<a onClick="logVariable('eventtype')" class="var it44830" onMouseOver="hilite(44830)" onMouseOut="lolite()" href="../_variables/eventtype.html">eventtype</a> = <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>-&gt;<a onClick="logVariable('eventtype')" class="var it43072" onMouseOver="hilite(43072)" onMouseOut="lolite()" href="../_variables/eventtype.html">eventtype</a>;
<a name="l3055"><span class="linenum">3055</span></a>  
<a name="l3056"><span class="linenum">3056</span></a>      if (<a class="var it39065" onMouseOver="hilite(39065)" onMouseOut="lolite()" onClick="logVariable('updaterecord')" href="../_variables/updaterecord.html">$updaterecord</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('event', array('uuid' =&gt; <a class="var it39063" onMouseOver="hilite(39063)" onMouseOut="lolite()" onClick="logVariable('eventrecord')" href="../_variables/eventrecord.html">$eventrecord</a>-&gt;<a onClick="logVariable('uuid')" class="var it44830" onMouseOver="hilite(44830)" onMouseOut="lolite()" href="../_variables/uuid.html">uuid</a>))) {
<a name="l3057"><span class="linenum">3057</span></a>          <a class="var it39063" onMouseOver="hilite(39063)" onMouseOut="lolite()" onClick="logVariable('eventrecord')" href="../_variables/eventrecord.html">$eventrecord</a>-&gt;<a onClick="logVariable('id')" class="var it44830" onMouseOver="hilite(44830)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it39065" onMouseOver="hilite(39065)" onMouseOut="lolite()" onClick="logVariable('updaterecord')" href="../_variables/updaterecord.html">$updaterecord</a>-&gt;<a onClick="logVariable('id')" class="var it44831" onMouseOver="hilite(44831)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l3058"><span class="linenum">3058</span></a>          <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a> = <a class="constant" onClick="logConstant('CALENDAR_IMPORT_EVENT_UPDATED')" href="../_constants/CALENDAR_IMPORT_EVENT_UPDATED.html" onMouseOver="constPopup(event,'CALENDAR_IMPORT_EVENT_UPDATED')">CALENDAR_IMPORT_EVENT_UPDATED</a>; <span class="comment">// Update.</span>
<a name="l3059"><span class="linenum">3059</span></a>      } else {
<a name="l3060"><span class="linenum">3060</span></a>          <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a> = <a class="constant" onClick="logConstant('CALENDAR_IMPORT_EVENT_INSERTED')" href="../_constants/CALENDAR_IMPORT_EVENT_INSERTED.html" onMouseOver="constPopup(event,'CALENDAR_IMPORT_EVENT_INSERTED')">CALENDAR_IMPORT_EVENT_INSERTED</a>; <span class="comment">// Insert.</span>
<a name="l3061"><span class="linenum">3061</span></a>      }
<a name="l3062"><span class="linenum">3062</span></a>      if (<a class="var it39066" onMouseOver="hilite(39066)" onMouseOut="lolite()" onClick="logVariable('createdevent')" href="../_variables/createdevent.html">$createdevent</a> = <a class="class" onClick="logClass('calendar_event')" href="../_classes/calendar_event.html" onMouseOver="classPopup(event,'calendar_event')">calendar_event</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it39063" onMouseOver="hilite(39063)" onMouseOut="lolite()" onClick="logVariable('eventrecord')" href="../_variables/eventrecord.html">$eventrecord</a>, false)) {
<a name="l3063"><span class="linenum">3063</span></a>          if (!empty(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('properties')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>['RRULE'])) {
<a name="l3064"><span class="linenum">3064</span></a>  <span class="comment">            // Repeating events.</span>
<a name="l3065"><span class="linenum">3065</span></a>              date_default_timezone_set(<a class="var it2632" onMouseOver="hilite(2632)" onMouseOut="lolite()" onClick="logVariable('tz')" href="../_variables/tz.html">$tz</a>); <span class="comment">// Change time zone to parse all events.</span>
<a name="l3066"><span class="linenum">3066</span></a>              <a class="var it22016" onMouseOver="hilite(22016)" onMouseOut="lolite()" onClick="logVariable('rrule')" href="../_variables/rrule.html">$rrule</a> = new \core_calendar\rrule_manager(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('properties')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>['RRULE'][0]-&gt;value);
<a name="l3067"><span class="linenum">3067</span></a>              <a class="var it22016" onMouseOver="hilite(22016)" onMouseOut="lolite()" onClick="logVariable('rrule')" href="../_variables/rrule.html">$rrule</a>-&gt;<a class="function" onClick="logFunction('parse_rrule')" href="../_functions/parse_rrule.html" onMouseOver="funcPopup(event,'parse_rrule')">parse_rrule</a>();
<a name="l3068"><span class="linenum">3068</span></a>              <a class="var it22016" onMouseOver="hilite(22016)" onMouseOut="lolite()" onClick="logVariable('rrule')" href="../_variables/rrule.html">$rrule</a>-&gt;<a class="function" onClick="logFunction('create_events')" href="../_functions/create_events.html" onMouseOver="funcPopup(event,'create_events')">create_events</a>(<a class="var it39066" onMouseOver="hilite(39066)" onMouseOut="lolite()" onClick="logVariable('createdevent')" href="../_variables/createdevent.html">$createdevent</a>);
<a name="l3069"><span class="linenum">3069</span></a>              <a class="class" onClick="logClass('core_date')" href="../_classes/core_date.html" onMouseOver="classPopup(event,'core_date')">core_date</a>::<a class="function" onClick="logFunction('set_default_server_timezone')" href="../_functions/set_default_server_timezone.html" onMouseOver="funcPopup(event,'set_default_server_timezone')">set_default_server_timezone</a>(); <span class="comment">// Change time zone back to what it was.</span>
<a name="l3070"><span class="linenum">3070</span></a>          }
<a name="l3071"><span class="linenum">3071</span></a>          return <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>;
<a name="l3072"><span class="linenum">3072</span></a>      } else {
<a name="l3073"><span class="linenum">3073</span></a>          return 0;
<a name="l3074"><span class="linenum">3074</span></a>      }
<a name="l3075"><span class="linenum">3075</span></a>  }
<a name="l3076"><span class="linenum">3076</span></a>  
<a name="l3077"><span class="linenum">3077</span></a>  <span class="comment">/**</span>
<a name="l3078"><span class="linenum">3078</span></a>  <span class="comment"> * Update a subscription from the form data in one of the rows in the existing subscriptions table.</span>
<a name="l3079"><span class="linenum">3079</span></a>  <span class="comment"> *</span>
<a name="l3080"><span class="linenum">3080</span></a>  <span class="comment"> * @param int $subscriptionid The ID of the subscription we are acting upon.</span>
<a name="l3081"><span class="linenum">3081</span></a>  <span class="comment"> * @param int $pollinterval The poll interval to use.</span>
<a name="l3082"><span class="linenum">3082</span></a>  <span class="comment"> * @param int $action The action to be performed. One of update or remove.</span>
<a name="l3083"><span class="linenum">3083</span></a>  <span class="comment"> * @throws dml_exception if invalid subscriptionid is provided</span>
<a name="l3084"><span class="linenum">3084</span></a>  <span class="comment"> * @return string A log of the import progress, including errors</span>
<a name="l3085"><span class="linenum">3085</span></a>  <span class="comment"> */</span>
<a name="l3086"><span class="linenum">3086</span></a>  function <a class="function" onClick="logFunction('calendar_process_subscription_row')" href="../_functions/calendar_process_subscription_row.html" onMouseOver="funcPopup(event,'calendar_process_subscription_row')">calendar_process_subscription_row</a>(<a class="var it18685" onMouseOver="hilite(18685)" onMouseOut="lolite()" onClick="logVariable('subscriptionid')" href="../_variables/subscriptionid.html">$subscriptionid</a>, <a class="var it15812" onMouseOver="hilite(15812)" onMouseOut="lolite()" onClick="logVariable('pollinterval')" href="../_variables/pollinterval.html">$pollinterval</a>, <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../_variables/action.html">$action</a>) {
<a name="l3087"><span class="linenum">3087</span></a>  
<a name="l3088"><span class="linenum">3088</span></a>  <span class="comment">    // Fetch the subscription from the database making sure it exists.</span>
<a name="l3089"><span class="linenum">3089</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a> = <a class="function" onClick="logFunction('calendar_get_subscription')" href="../_functions/calendar_get_subscription.html" onMouseOver="funcPopup(event,'calendar_get_subscription')">calendar_get_subscription</a>(<a class="var it18685" onMouseOver="hilite(18685)" onMouseOut="lolite()" onClick="logVariable('subscriptionid')" href="../_variables/subscriptionid.html">$subscriptionid</a>);
<a name="l3090"><span class="linenum">3090</span></a>  
<a name="l3091"><span class="linenum">3091</span></a>  <span class="comment">    // Update or remove the subscription, based on action.</span>
<a name="l3092"><span class="linenum">3092</span></a>      switch (<a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../_variables/action.html">$action</a>) {
<a name="l3093"><span class="linenum">3093</span></a>          case <a class="constant" onClick="logConstant('CALENDAR_SUBSCRIPTION_UPDATE')" href="../_constants/CALENDAR_SUBSCRIPTION_UPDATE.html" onMouseOver="constPopup(event,'CALENDAR_SUBSCRIPTION_UPDATE')">CALENDAR_SUBSCRIPTION_UPDATE</a>:
<a name="l3094"><span class="linenum">3094</span></a>  <span class="comment">            // Skip updating file subscriptions.</span>
<a name="l3095"><span class="linenum">3095</span></a>              if (empty(<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>-&gt;<a onClick="logVariable('url')" class="var it43072" onMouseOver="hilite(43072)" onMouseOut="lolite()" href="../_variables/url.html">url</a>)) {
<a name="l3096"><span class="linenum">3096</span></a>                  break;
<a name="l3097"><span class="linenum">3097</span></a>              }
<a name="l3098"><span class="linenum">3098</span></a>              <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>-&gt;<a onClick="logVariable('pollinterval')" class="var it43072" onMouseOver="hilite(43072)" onMouseOut="lolite()" href="../_variables/pollinterval.html">pollinterval</a> = <a class="var it15812" onMouseOver="hilite(15812)" onMouseOut="lolite()" onClick="logVariable('pollinterval')" href="../_variables/pollinterval.html">$pollinterval</a>;
<a name="l3099"><span class="linenum">3099</span></a>              <a class="function" onClick="logFunction('calendar_update_subscription')" href="../_functions/calendar_update_subscription.html" onMouseOver="funcPopup(event,'calendar_update_subscription')">calendar_update_subscription</a>(<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>);
<a name="l3100"><span class="linenum">3100</span></a>  
<a name="l3101"><span class="linenum">3101</span></a>  <span class="comment">            // Update the events.</span>
<a name="l3102"><span class="linenum">3102</span></a>              return &quot;&lt;p&gt;&quot;.<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('subscriptionupdated', 'calendar', <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>-&gt;<a onClick="logVariable('name')" class="var it43072" onMouseOver="hilite(43072)" onMouseOut="lolite()" href="../_variables/name.html">name</a>).&quot;&lt;/p&gt;&quot; . <a class="function" onClick="logFunction('calendar_update_subscription_events')" href="../_functions/calendar_update_subscription_events.html" onMouseOver="funcPopup(event,'calendar_update_subscription_events')">calendar_update_subscription_events</a>(<a class="var it18685" onMouseOver="hilite(18685)" onMouseOut="lolite()" onClick="logVariable('subscriptionid')" href="../_variables/subscriptionid.html">$subscriptionid</a>);
<a name="l3103"><span class="linenum">3103</span></a>  
<a name="l3104"><span class="linenum">3104</span></a>          case <a class="constant" onClick="logConstant('CALENDAR_SUBSCRIPTION_REMOVE')" href="../_constants/CALENDAR_SUBSCRIPTION_REMOVE.html" onMouseOver="constPopup(event,'CALENDAR_SUBSCRIPTION_REMOVE')">CALENDAR_SUBSCRIPTION_REMOVE</a>:
<a name="l3105"><span class="linenum">3105</span></a>              <a class="function" onClick="logFunction('calendar_delete_subscription')" href="../_functions/calendar_delete_subscription.html" onMouseOver="funcPopup(event,'calendar_delete_subscription')">calendar_delete_subscription</a>(<a class="var it18685" onMouseOver="hilite(18685)" onMouseOut="lolite()" onClick="logVariable('subscriptionid')" href="../_variables/subscriptionid.html">$subscriptionid</a>);
<a name="l3106"><span class="linenum">3106</span></a>              return <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('subscriptionremoved', 'calendar', <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>-&gt;<a onClick="logVariable('name')" class="var it43072" onMouseOver="hilite(43072)" onMouseOut="lolite()" href="../_variables/name.html">name</a>);
<a name="l3107"><span class="linenum">3107</span></a>              break;
<a name="l3108"><span class="linenum">3108</span></a>  
<a name="l3109"><span class="linenum">3109</span></a>          default:
<a name="l3110"><span class="linenum">3110</span></a>              break;
<a name="l3111"><span class="linenum">3111</span></a>      }
<a name="l3112"><span class="linenum">3112</span></a>      return '';
<a name="l3113"><span class="linenum">3113</span></a>  }
<a name="l3114"><span class="linenum">3114</span></a>  
<a name="l3115"><span class="linenum">3115</span></a>  <span class="comment">/**</span>
<a name="l3116"><span class="linenum">3116</span></a>  <span class="comment"> * Delete subscription and all related events.</span>
<a name="l3117"><span class="linenum">3117</span></a>  <span class="comment"> *</span>
<a name="l3118"><span class="linenum">3118</span></a>  <span class="comment"> * @param int|stdClass $subscription subscription or it's id, which needs to be deleted.</span>
<a name="l3119"><span class="linenum">3119</span></a>  <span class="comment"> */</span>
<a name="l3120"><span class="linenum">3120</span></a>  function <a class="function" onClick="logFunction('calendar_delete_subscription')" href="../_functions/calendar_delete_subscription.html" onMouseOver="funcPopup(event,'calendar_delete_subscription')">calendar_delete_subscription</a>(<a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a>) {
<a name="l3121"><span class="linenum">3121</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l3122"><span class="linenum">3122</span></a>  
<a name="l3123"><span class="linenum">3123</span></a>      if (!<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a>)) {
<a name="l3124"><span class="linenum">3124</span></a>          <a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('event_subscriptions', array('id' =&gt; <a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l3125"><span class="linenum">3125</span></a>      }
<a name="l3126"><span class="linenum">3126</span></a>  <span class="comment">    // Delete subscription and related events.</span>
<a name="l3127"><span class="linenum">3127</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('event', array('subscriptionid' =&gt; <a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a>-&gt;<a onClick="logVariable('id')" class="var it44636" onMouseOver="hilite(44636)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l3128"><span class="linenum">3128</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('event_subscriptions', array('id' =&gt; <a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a>-&gt;<a onClick="logVariable('id')" class="var it44636" onMouseOver="hilite(44636)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l3129"><span class="linenum">3129</span></a>      <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('invalidate_by_definition')" href="../_functions/invalidate_by_definition.html" onMouseOver="funcPopup(event,'invalidate_by_definition')">invalidate_by_definition</a>('core', 'calendar_subscriptions', array(), array(<a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a>-&gt;<a onClick="logVariable('id')" class="var it44636" onMouseOver="hilite(44636)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l3130"><span class="linenum">3130</span></a>  
<a name="l3131"><span class="linenum">3131</span></a>  <span class="comment">    // Trigger event, calendar subscription deleted.</span>
<a name="l3132"><span class="linenum">3132</span></a>      <a class="var it3033" onMouseOver="hilite(3033)" onMouseOut="lolite()" onClick="logVariable('eventparams')" href="../_variables/eventparams.html">$eventparams</a> = array('objectid' =&gt; <a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a>-&gt;<a onClick="logVariable('id')" class="var it44636" onMouseOver="hilite(44636)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l3133"><span class="linenum">3133</span></a>          'context' =&gt; <a class="function" onClick="logFunction('calendar_get_calendar_context')" href="../_functions/calendar_get_calendar_context.html" onMouseOver="funcPopup(event,'calendar_get_calendar_context')">calendar_get_calendar_context</a>(<a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a>),
<a name="l3134"><span class="linenum">3134</span></a>          'other' =&gt; array('courseid' =&gt; <a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a>-&gt;<a onClick="logVariable('courseid')" class="var it44636" onMouseOver="hilite(44636)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>)
<a name="l3135"><span class="linenum">3135</span></a>      );
<a name="l3136"><span class="linenum">3136</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('calendar_subscription_deleted')" href="../_classes/calendar_subscription_deleted.html" onMouseOver="classPopup(event,'calendar_subscription_deleted')">calendar_subscription_deleted</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it3033" onMouseOver="hilite(3033)" onMouseOut="lolite()" onClick="logVariable('eventparams')" href="../_variables/eventparams.html">$eventparams</a>);
<a name="l3137"><span class="linenum">3137</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l3138"><span class="linenum">3138</span></a>  }
<a name="l3139"><span class="linenum">3139</span></a>  <span class="comment">/**</span>
<a name="l3140"><span class="linenum">3140</span></a>  <span class="comment"> * From a URL, fetch the calendar and return an iCalendar object.</span>
<a name="l3141"><span class="linenum">3141</span></a>  <span class="comment"> *</span>
<a name="l3142"><span class="linenum">3142</span></a>  <span class="comment"> * @param string $url The iCalendar URL</span>
<a name="l3143"><span class="linenum">3143</span></a>  <span class="comment"> * @return stdClass The iCalendar object</span>
<a name="l3144"><span class="linenum">3144</span></a>  <span class="comment"> */</span>
<a name="l3145"><span class="linenum">3145</span></a>  function <a class="function" onClick="logFunction('calendar_get_icalendar')" href="../_functions/calendar_get_icalendar.html" onMouseOver="funcPopup(event,'calendar_get_icalendar')">calendar_get_icalendar</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>) {
<a name="l3146"><span class="linenum">3146</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l3147"><span class="linenum">3147</span></a>  
<a name="l3148"><span class="linenum">3148</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>.'/filelib.php');
<a name="l3149"><span class="linenum">3149</span></a>  
<a name="l3150"><span class="linenum">3150</span></a>      <a class="var it6381" onMouseOver="hilite(6381)" onMouseOut="lolite()" onClick="logVariable('curl')" href="../_variables/curl.html">$curl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('curl')" href="../_classes/curl.html" onMouseOver="classPopup(event,'curl')">curl</a>();
<a name="l3151"><span class="linenum">3151</span></a>      <a class="var it6381" onMouseOver="hilite(6381)" onMouseOut="lolite()" onClick="logVariable('curl')" href="../_variables/curl.html">$curl</a>-&gt;<a class="function" onClick="logFunction('setopt')" href="../_functions/setopt.html" onMouseOver="funcPopup(event,'setopt')">setopt</a>(array('CURLOPT_FOLLOWLOCATION' =&gt; 1, 'CURLOPT_MAXREDIRS' =&gt; 5));
<a name="l3152"><span class="linenum">3152</span></a>      <a class="var it17950" onMouseOver="hilite(17950)" onMouseOut="lolite()" onClick="logVariable('calendar')" href="../_variables/calendar.html">$calendar</a> = <a class="var it6381" onMouseOver="hilite(6381)" onMouseOut="lolite()" onClick="logVariable('curl')" href="../_variables/curl.html">$curl</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>);
<a name="l3153"><span class="linenum">3153</span></a>  <span class="comment">    // Http code validation should actually be the job of curl class.</span>
<a name="l3154"><span class="linenum">3154</span></a>      if (!<a class="var it17950" onMouseOver="hilite(17950)" onMouseOut="lolite()" onClick="logVariable('calendar')" href="../_variables/calendar.html">$calendar</a> || <a class="var it6381" onMouseOver="hilite(6381)" onMouseOut="lolite()" onClick="logVariable('curl')" href="../_variables/curl.html">$curl</a>-&gt;<a onClick="logVariable('info')" class="var it43351" onMouseOver="hilite(43351)" onMouseOut="lolite()" href="../_variables/info.html">info</a>['http_code'] != 200 || !empty(<a class="var it6381" onMouseOver="hilite(6381)" onMouseOut="lolite()" onClick="logVariable('curl')" href="../_variables/curl.html">$curl</a>-&gt;<a onClick="logVariable('errorno')" class="var it43351" onMouseOver="hilite(43351)" onMouseOut="lolite()" href="../_variables/errorno.html">errorno</a>)) {
<a name="l3155"><span class="linenum">3155</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('errorinvalidicalurl', 'calendar');
<a name="l3156"><span class="linenum">3156</span></a>      }
<a name="l3157"><span class="linenum">3157</span></a>  
<a name="l3158"><span class="linenum">3158</span></a>      <a class="var it29510" onMouseOver="hilite(29510)" onMouseOut="lolite()" onClick="logVariable('ical')" href="../_variables/ical.html">$ical</a> = <span class="keyword">new </span><a class="class" onClick="logClass('iCalendar')" href="../_classes/icalendar.html" onMouseOver="classPopup(event,'icalendar')">iCalendar</a>();
<a name="l3159"><span class="linenum">3159</span></a>      <a class="var it29510" onMouseOver="hilite(29510)" onMouseOut="lolite()" onClick="logVariable('ical')" href="../_variables/ical.html">$ical</a>-&gt;<a class="phpfunction" onClick="logFunction('unserialize')" href="../_functions/unserialize.html" onMouseOver="phpfuncPopup(event,'unserialize')">unserialize</a>(<a class="var it17950" onMouseOver="hilite(17950)" onMouseOut="lolite()" onClick="logVariable('calendar')" href="../_variables/calendar.html">$calendar</a>);
<a name="l3160"><span class="linenum">3160</span></a>      return <a class="var it29510" onMouseOver="hilite(29510)" onMouseOut="lolite()" onClick="logVariable('ical')" href="../_variables/ical.html">$ical</a>;
<a name="l3161"><span class="linenum">3161</span></a>  }
<a name="l3162"><span class="linenum">3162</span></a>  
<a name="l3163"><span class="linenum">3163</span></a>  <span class="comment">/**</span>
<a name="l3164"><span class="linenum">3164</span></a>  <span class="comment"> * Import events from an iCalendar object into a course calendar.</span>
<a name="l3165"><span class="linenum">3165</span></a>  <span class="comment"> *</span>
<a name="l3166"><span class="linenum">3166</span></a>  <span class="comment"> * @param stdClass $ical The iCalendar object.</span>
<a name="l3167"><span class="linenum">3167</span></a>  <span class="comment"> * @param int $courseid The course ID for the calendar.</span>
<a name="l3168"><span class="linenum">3168</span></a>  <span class="comment"> * @param int $subscriptionid The subscription ID.</span>
<a name="l3169"><span class="linenum">3169</span></a>  <span class="comment"> * @return string A log of the import progress, including errors.</span>
<a name="l3170"><span class="linenum">3170</span></a>  <span class="comment"> */</span>
<a name="l3171"><span class="linenum">3171</span></a>  function <a class="function" onClick="logFunction('calendar_import_icalendar_events')" href="../_functions/calendar_import_icalendar_events.html" onMouseOver="funcPopup(event,'calendar_import_icalendar_events')">calendar_import_icalendar_events</a>(<a class="var it29510" onMouseOver="hilite(29510)" onMouseOut="lolite()" onClick="logVariable('ical')" href="../_variables/ical.html">$ical</a>, <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it18685" onMouseOver="hilite(18685)" onMouseOut="lolite()" onClick="logVariable('subscriptionid')" href="../_variables/subscriptionid.html">$subscriptionid</a> = null) {
<a name="l3172"><span class="linenum">3172</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l3173"><span class="linenum">3173</span></a>      <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a> = '';
<a name="l3174"><span class="linenum">3174</span></a>      <a class="var it26868" onMouseOver="hilite(26868)" onMouseOut="lolite()" onClick="logVariable('eventcount')" href="../_variables/eventcount.html">$eventcount</a> = 0;
<a name="l3175"><span class="linenum">3175</span></a>      <a class="var it1133" onMouseOver="hilite(1133)" onMouseOut="lolite()" onClick="logVariable('updatecount')" href="../_variables/updatecount.html">$updatecount</a> = 0;
<a name="l3176"><span class="linenum">3176</span></a>  
<a name="l3177"><span class="linenum">3177</span></a>  <span class="comment">    // Large calendars take a while...</span>
<a name="l3178"><span class="linenum">3178</span></a>      if (!<a class="constant" onClick="logConstant('CLI_SCRIPT')" href="../_constants/CLI_SCRIPT.html" onMouseOver="constPopup(event,'CLI_SCRIPT')">CLI_SCRIPT</a>) {
<a name="l3179"><span class="linenum">3179</span></a>          <a class="class" onClick="logClass('core_php_time_limit')" href="../_classes/core_php_time_limit.html" onMouseOver="classPopup(event,'core_php_time_limit')">core_php_time_limit</a>::<a class="function" onClick="logFunction('raise')" href="../_functions/raise.html" onMouseOver="funcPopup(event,'raise')">raise</a>(300);
<a name="l3180"><span class="linenum">3180</span></a>      }
<a name="l3181"><span class="linenum">3181</span></a>  
<a name="l3182"><span class="linenum">3182</span></a>  <span class="comment">    // Mark all events in a subscription with a zero timestamp.</span>
<a name="l3183"><span class="linenum">3183</span></a>      if (!empty(<a class="var it18685" onMouseOver="hilite(18685)" onMouseOut="lolite()" onClick="logVariable('subscriptionid')" href="../_variables/subscriptionid.html">$subscriptionid</a>)) {
<a name="l3184"><span class="linenum">3184</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;UPDATE {event} SET timemodified = :time WHERE subscriptionid = :id&quot;;
<a name="l3185"><span class="linenum">3185</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('execute')" href="../_functions/execute.html" onMouseOver="funcPopup(event,'execute')">execute</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, array('time' =&gt; 0, 'id' =&gt; <a class="var it18685" onMouseOver="hilite(18685)" onMouseOut="lolite()" onClick="logVariable('subscriptionid')" href="../_variables/subscriptionid.html">$subscriptionid</a>));
<a name="l3186"><span class="linenum">3186</span></a>      }
<a name="l3187"><span class="linenum">3187</span></a>  <span class="comment">    // Grab the timezone from the iCalendar file to be used later.</span>
<a name="l3188"><span class="linenum">3188</span></a>      if (isset(<a class="var it29510" onMouseOver="hilite(29510)" onMouseOut="lolite()" onClick="logVariable('ical')" href="../_variables/ical.html">$ical</a>-&gt;<a onClick="logVariable('properties')" class="var it44832" onMouseOver="hilite(44832)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>['X-WR-TIMEZONE'][0]-&gt;value)) {
<a name="l3189"><span class="linenum">3189</span></a>          <a class="var it1762" onMouseOver="hilite(1762)" onMouseOut="lolite()" onClick="logVariable('timezone')" href="../_variables/timezone.html">$timezone</a> = <a class="var it29510" onMouseOver="hilite(29510)" onMouseOut="lolite()" onClick="logVariable('ical')" href="../_variables/ical.html">$ical</a>-&gt;<a onClick="logVariable('properties')" class="var it44832" onMouseOver="hilite(44832)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>['X-WR-TIMEZONE'][0]-&gt;value;
<a name="l3190"><span class="linenum">3190</span></a>      } else {
<a name="l3191"><span class="linenum">3191</span></a>          <a class="var it1762" onMouseOver="hilite(1762)" onMouseOut="lolite()" onClick="logVariable('timezone')" href="../_variables/timezone.html">$timezone</a> = 'UTC';
<a name="l3192"><span class="linenum">3192</span></a>      }
<a name="l3193"><span class="linenum">3193</span></a>      foreach (<a class="var it29510" onMouseOver="hilite(29510)" onMouseOut="lolite()" onClick="logVariable('ical')" href="../_variables/ical.html">$ical</a>-&gt;<a onClick="logVariable('components')" class="var it44832" onMouseOver="hilite(44832)" onMouseOut="lolite()" href="../_variables/components.html">components</a>['VEVENT'] as <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>) {
<a name="l3194"><span class="linenum">3194</span></a>          <a class="var it799" onMouseOver="hilite(799)" onMouseOut="lolite()" onClick="logVariable('res')" href="../_variables/res.html">$res</a> = <a class="function" onClick="logFunction('calendar_add_icalendar_event')" href="../_functions/calendar_add_icalendar_event.html" onMouseOver="funcPopup(event,'calendar_add_icalendar_event')">calendar_add_icalendar_event</a>(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>, <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it18685" onMouseOver="hilite(18685)" onMouseOut="lolite()" onClick="logVariable('subscriptionid')" href="../_variables/subscriptionid.html">$subscriptionid</a>, <a class="var it1762" onMouseOver="hilite(1762)" onMouseOut="lolite()" onClick="logVariable('timezone')" href="../_variables/timezone.html">$timezone</a>);
<a name="l3195"><span class="linenum">3195</span></a>          switch (<a class="var it799" onMouseOver="hilite(799)" onMouseOut="lolite()" onClick="logVariable('res')" href="../_variables/res.html">$res</a>) {
<a name="l3196"><span class="linenum">3196</span></a>            case <a class="constant" onClick="logConstant('CALENDAR_IMPORT_EVENT_UPDATED')" href="../_constants/CALENDAR_IMPORT_EVENT_UPDATED.html" onMouseOver="constPopup(event,'CALENDAR_IMPORT_EVENT_UPDATED')">CALENDAR_IMPORT_EVENT_UPDATED</a>:
<a name="l3197"><span class="linenum">3197</span></a>              <a class="var it1133" onMouseOver="hilite(1133)" onMouseOut="lolite()" onClick="logVariable('updatecount')" href="../_variables/updatecount.html">$updatecount</a>++;
<a name="l3198"><span class="linenum">3198</span></a>              break;
<a name="l3199"><span class="linenum">3199</span></a>            case <a class="constant" onClick="logConstant('CALENDAR_IMPORT_EVENT_INSERTED')" href="../_constants/CALENDAR_IMPORT_EVENT_INSERTED.html" onMouseOver="constPopup(event,'CALENDAR_IMPORT_EVENT_INSERTED')">CALENDAR_IMPORT_EVENT_INSERTED</a>:
<a name="l3200"><span class="linenum">3200</span></a>              <a class="var it26868" onMouseOver="hilite(26868)" onMouseOut="lolite()" onClick="logVariable('eventcount')" href="../_variables/eventcount.html">$eventcount</a>++;
<a name="l3201"><span class="linenum">3201</span></a>              break;
<a name="l3202"><span class="linenum">3202</span></a>            case 0:
<a name="l3203"><span class="linenum">3203</span></a>              <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a> .= '&lt;p&gt;'.<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('erroraddingevent', 'calendar').': '.(empty(<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('properties')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>['SUMMARY'])?'('.<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('notitle', 'calendar').')':<a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('properties')" class="var it42950" onMouseOver="hilite(42950)" onMouseOut="lolite()" href="../_variables/properties.html">properties</a>['SUMMARY'][0]-&gt;value).&quot; &lt;/p&gt;\n&quot;;
<a name="l3204"><span class="linenum">3204</span></a>              break;
<a name="l3205"><span class="linenum">3205</span></a>          }
<a name="l3206"><span class="linenum">3206</span></a>      }
<a name="l3207"><span class="linenum">3207</span></a>      <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a> .= &quot;&lt;p&gt; &quot;.<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('eventsimported', 'calendar', <a class="var it26868" onMouseOver="hilite(26868)" onMouseOut="lolite()" onClick="logVariable('eventcount')" href="../_variables/eventcount.html">$eventcount</a>).&quot;&lt;/p&gt;&quot;;
<a name="l3208"><span class="linenum">3208</span></a>      <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a> .= &quot;&lt;p&gt; &quot;.<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('eventsupdated', 'calendar', <a class="var it1133" onMouseOver="hilite(1133)" onMouseOut="lolite()" onClick="logVariable('updatecount')" href="../_variables/updatecount.html">$updatecount</a>).&quot;&lt;/p&gt;&quot;;
<a name="l3209"><span class="linenum">3209</span></a>  
<a name="l3210"><span class="linenum">3210</span></a>  <span class="comment">    // Delete remaining zero-marked events since they're not in remote calendar.</span>
<a name="l3211"><span class="linenum">3211</span></a>      if (!empty(<a class="var it18685" onMouseOver="hilite(18685)" onMouseOut="lolite()" onClick="logVariable('subscriptionid')" href="../_variables/subscriptionid.html">$subscriptionid</a>)) {
<a name="l3212"><span class="linenum">3212</span></a>          <a class="var it28745" onMouseOver="hilite(28745)" onMouseOut="lolite()" onClick="logVariable('deletecount')" href="../_variables/deletecount.html">$deletecount</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>('event', array('timemodified' =&gt; 0, 'subscriptionid' =&gt; <a class="var it18685" onMouseOver="hilite(18685)" onMouseOut="lolite()" onClick="logVariable('subscriptionid')" href="../_variables/subscriptionid.html">$subscriptionid</a>));
<a name="l3213"><span class="linenum">3213</span></a>          if (!empty(<a class="var it28745" onMouseOver="hilite(28745)" onMouseOut="lolite()" onClick="logVariable('deletecount')" href="../_variables/deletecount.html">$deletecount</a>)) {
<a name="l3214"><span class="linenum">3214</span></a>              <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;DELETE FROM {event} WHERE timemodified = :time AND subscriptionid = :id&quot;;
<a name="l3215"><span class="linenum">3215</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('execute')" href="../_functions/execute.html" onMouseOver="funcPopup(event,'execute')">execute</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, array('time' =&gt; 0, 'id' =&gt; <a class="var it18685" onMouseOver="hilite(18685)" onMouseOut="lolite()" onClick="logVariable('subscriptionid')" href="../_variables/subscriptionid.html">$subscriptionid</a>));
<a name="l3216"><span class="linenum">3216</span></a>              <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a> .= &quot;&lt;p&gt; &quot;.<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('eventsdeleted', 'calendar').&quot;: {<a class="var it28745" onMouseOver="hilite(28745)" onMouseOut="lolite()" onClick="logVariable('deletecount')" href="../_variables/deletecount.html">$deletecount</a>} &lt;/p&gt;\n&quot;;
<a name="l3217"><span class="linenum">3217</span></a>          }
<a name="l3218"><span class="linenum">3218</span></a>      }
<a name="l3219"><span class="linenum">3219</span></a>  
<a name="l3220"><span class="linenum">3220</span></a>      return <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>;
<a name="l3221"><span class="linenum">3221</span></a>  }
<a name="l3222"><span class="linenum">3222</span></a>  
<a name="l3223"><span class="linenum">3223</span></a>  <span class="comment">/**</span>
<a name="l3224"><span class="linenum">3224</span></a>  <span class="comment"> * Fetch a calendar subscription and update the events in the calendar.</span>
<a name="l3225"><span class="linenum">3225</span></a>  <span class="comment"> *</span>
<a name="l3226"><span class="linenum">3226</span></a>  <span class="comment"> * @param int $subscriptionid The course ID for the calendar.</span>
<a name="l3227"><span class="linenum">3227</span></a>  <span class="comment"> * @return string A log of the import progress, including errors.</span>
<a name="l3228"><span class="linenum">3228</span></a>  <span class="comment"> */</span>
<a name="l3229"><span class="linenum">3229</span></a>  function <a class="function" onClick="logFunction('calendar_update_subscription_events')" href="../_functions/calendar_update_subscription_events.html" onMouseOver="funcPopup(event,'calendar_update_subscription_events')">calendar_update_subscription_events</a>(<a class="var it18685" onMouseOver="hilite(18685)" onMouseOut="lolite()" onClick="logVariable('subscriptionid')" href="../_variables/subscriptionid.html">$subscriptionid</a>) {
<a name="l3230"><span class="linenum">3230</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l3231"><span class="linenum">3231</span></a>  
<a name="l3232"><span class="linenum">3232</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a> = <a class="function" onClick="logFunction('calendar_get_subscription')" href="../_functions/calendar_get_subscription.html" onMouseOver="funcPopup(event,'calendar_get_subscription')">calendar_get_subscription</a>(<a class="var it18685" onMouseOver="hilite(18685)" onMouseOut="lolite()" onClick="logVariable('subscriptionid')" href="../_variables/subscriptionid.html">$subscriptionid</a>);
<a name="l3233"><span class="linenum">3233</span></a>  <span class="comment">    // Don't update a file subscription. TODO: Update from a new uploaded file.</span>
<a name="l3234"><span class="linenum">3234</span></a>      if (empty(<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>-&gt;<a onClick="logVariable('url')" class="var it43072" onMouseOver="hilite(43072)" onMouseOut="lolite()" href="../_variables/url.html">url</a>)) {
<a name="l3235"><span class="linenum">3235</span></a>          return 'File subscription not updated.';
<a name="l3236"><span class="linenum">3236</span></a>      }
<a name="l3237"><span class="linenum">3237</span></a>      <a class="var it29510" onMouseOver="hilite(29510)" onMouseOut="lolite()" onClick="logVariable('ical')" href="../_variables/ical.html">$ical</a> = <a class="function" onClick="logFunction('calendar_get_icalendar')" href="../_functions/calendar_get_icalendar.html" onMouseOver="funcPopup(event,'calendar_get_icalendar')">calendar_get_icalendar</a>(<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>-&gt;<a onClick="logVariable('url')" class="var it43072" onMouseOver="hilite(43072)" onMouseOut="lolite()" href="../_variables/url.html">url</a>);
<a name="l3238"><span class="linenum">3238</span></a>      <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a> = <a class="function" onClick="logFunction('calendar_import_icalendar_events')" href="../_functions/calendar_import_icalendar_events.html" onMouseOver="funcPopup(event,'calendar_import_icalendar_events')">calendar_import_icalendar_events</a>(<a class="var it29510" onMouseOver="hilite(29510)" onMouseOut="lolite()" onClick="logVariable('ical')" href="../_variables/ical.html">$ical</a>, <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>-&gt;<a onClick="logVariable('courseid')" class="var it43072" onMouseOver="hilite(43072)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>, <a class="var it18685" onMouseOver="hilite(18685)" onMouseOut="lolite()" onClick="logVariable('subscriptionid')" href="../_variables/subscriptionid.html">$subscriptionid</a>);
<a name="l3239"><span class="linenum">3239</span></a>      <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>-&gt;<a onClick="logVariable('lastupdated')" class="var it43072" onMouseOver="hilite(43072)" onMouseOut="lolite()" href="../_variables/lastupdated.html">lastupdated</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l3240"><span class="linenum">3240</span></a>      <a class="function" onClick="logFunction('calendar_update_subscription')" href="../_functions/calendar_update_subscription.html" onMouseOver="funcPopup(event,'calendar_update_subscription')">calendar_update_subscription</a>(<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>);
<a name="l3241"><span class="linenum">3241</span></a>      return <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>;
<a name="l3242"><span class="linenum">3242</span></a>  }
<a name="l3243"><span class="linenum">3243</span></a>  
<a name="l3244"><span class="linenum">3244</span></a>  <span class="comment">/**</span>
<a name="l3245"><span class="linenum">3245</span></a>  <span class="comment"> * Update a calendar subscription. Also updates the associated cache.</span>
<a name="l3246"><span class="linenum">3246</span></a>  <span class="comment"> *</span>
<a name="l3247"><span class="linenum">3247</span></a>  <span class="comment"> * @param stdClass|array $subscription Subscription record.</span>
<a name="l3248"><span class="linenum">3248</span></a>  <span class="comment"> * @throws coding_exception If something goes wrong</span>
<a name="l3249"><span class="linenum">3249</span></a>  <span class="comment"> * @since Moodle 2.5</span>
<a name="l3250"><span class="linenum">3250</span></a>  <span class="comment"> */</span>
<a name="l3251"><span class="linenum">3251</span></a>  function <a class="function" onClick="logFunction('calendar_update_subscription')" href="../_functions/calendar_update_subscription.html" onMouseOver="funcPopup(event,'calendar_update_subscription')">calendar_update_subscription</a>(<a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a>) {
<a name="l3252"><span class="linenum">3252</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l3253"><span class="linenum">3253</span></a>  
<a name="l3254"><span class="linenum">3254</span></a>      if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a>)) {
<a name="l3255"><span class="linenum">3255</span></a>          <a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a> = (object)<a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a>;
<a name="l3256"><span class="linenum">3256</span></a>      }
<a name="l3257"><span class="linenum">3257</span></a>      if (empty(<a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a>-&gt;<a onClick="logVariable('id')" class="var it44636" onMouseOver="hilite(44636)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) || !<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('event_subscriptions', array('id' =&gt; <a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a>-&gt;<a onClick="logVariable('id')" class="var it44636" onMouseOver="hilite(44636)" onMouseOut="lolite()" href="../_variables/id.html">id</a>))) {
<a name="l3258"><span class="linenum">3258</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Cannot update a subscription without a valid id');
<a name="l3259"><span class="linenum">3259</span></a>      }
<a name="l3260"><span class="linenum">3260</span></a>  
<a name="l3261"><span class="linenum">3261</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('event_subscriptions', <a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a>);
<a name="l3262"><span class="linenum">3262</span></a>  <span class="comment">    // Update cache.</span>
<a name="l3263"><span class="linenum">3263</span></a>      <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a> = <a class="class" onClick="logClass('cache')" href="../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'calendar_subscriptions');
<a name="l3264"><span class="linenum">3264</span></a>      <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>(<a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a>-&gt;<a onClick="logVariable('id')" class="var it44636" onMouseOver="hilite(44636)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a>);
<a name="l3265"><span class="linenum">3265</span></a>  <span class="comment">    // Trigger event, calendar subscription updated.</span>
<a name="l3266"><span class="linenum">3266</span></a>      <a class="var it3033" onMouseOver="hilite(3033)" onMouseOut="lolite()" onClick="logVariable('eventparams')" href="../_variables/eventparams.html">$eventparams</a> = array('userid' =&gt; <a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a>-&gt;<a onClick="logVariable('userid')" class="var it44636" onMouseOver="hilite(44636)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>,
<a name="l3267"><span class="linenum">3267</span></a>          'objectid' =&gt; <a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a>-&gt;<a onClick="logVariable('id')" class="var it44636" onMouseOver="hilite(44636)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l3268"><span class="linenum">3268</span></a>          'context' =&gt; <a class="function" onClick="logFunction('calendar_get_calendar_context')" href="../_functions/calendar_get_calendar_context.html" onMouseOver="funcPopup(event,'calendar_get_calendar_context')">calendar_get_calendar_context</a>(<a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a>),
<a name="l3269"><span class="linenum">3269</span></a>          'other' =&gt; array('eventtype' =&gt; <a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a>-&gt;<a onClick="logVariable('eventtype')" class="var it44636" onMouseOver="hilite(44636)" onMouseOut="lolite()" href="../_variables/eventtype.html">eventtype</a>, 'courseid' =&gt; <a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a>-&gt;<a onClick="logVariable('courseid')" class="var it44636" onMouseOver="hilite(44636)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>)
<a name="l3270"><span class="linenum">3270</span></a>          );
<a name="l3271"><span class="linenum">3271</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('calendar_subscription_updated')" href="../_classes/calendar_subscription_updated.html" onMouseOver="classPopup(event,'calendar_subscription_updated')">calendar_subscription_updated</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it3033" onMouseOver="hilite(3033)" onMouseOut="lolite()" onClick="logVariable('eventparams')" href="../_variables/eventparams.html">$eventparams</a>);
<a name="l3272"><span class="linenum">3272</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l3273"><span class="linenum">3273</span></a>  }
<a name="l3274"><span class="linenum">3274</span></a>  
<a name="l3275"><span class="linenum">3275</span></a>  <span class="comment">/**</span>
<a name="l3276"><span class="linenum">3276</span></a>  <span class="comment"> * Checks to see if the user can edit a given subscription feed.</span>
<a name="l3277"><span class="linenum">3277</span></a>  <span class="comment"> *</span>
<a name="l3278"><span class="linenum">3278</span></a>  <span class="comment"> * @param mixed $subscriptionorid Subscription object or id</span>
<a name="l3279"><span class="linenum">3279</span></a>  <span class="comment"> * @return bool true if current user can edit the subscription else false</span>
<a name="l3280"><span class="linenum">3280</span></a>  <span class="comment"> */</span>
<a name="l3281"><span class="linenum">3281</span></a>  function <a class="function" onClick="logFunction('calendar_can_edit_subscription')" href="../_functions/calendar_can_edit_subscription.html" onMouseOver="funcPopup(event,'calendar_can_edit_subscription')">calendar_can_edit_subscription</a>(<a class="var it39067" onMouseOver="hilite(39067)" onMouseOut="lolite()" onClick="logVariable('subscriptionorid')" href="../_variables/subscriptionorid.html">$subscriptionorid</a>) {
<a name="l3282"><span class="linenum">3282</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l3283"><span class="linenum">3283</span></a>  
<a name="l3284"><span class="linenum">3284</span></a>      if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it39067" onMouseOver="hilite(39067)" onMouseOut="lolite()" onClick="logVariable('subscriptionorid')" href="../_variables/subscriptionorid.html">$subscriptionorid</a>)) {
<a name="l3285"><span class="linenum">3285</span></a>          <a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a> = (object)<a class="var it39067" onMouseOver="hilite(39067)" onMouseOut="lolite()" onClick="logVariable('subscriptionorid')" href="../_variables/subscriptionorid.html">$subscriptionorid</a>;
<a name="l3286"><span class="linenum">3286</span></a>      } else if (<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it39067" onMouseOver="hilite(39067)" onMouseOut="lolite()" onClick="logVariable('subscriptionorid')" href="../_variables/subscriptionorid.html">$subscriptionorid</a>)) {
<a name="l3287"><span class="linenum">3287</span></a>          <a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a> = <a class="var it39067" onMouseOver="hilite(39067)" onMouseOut="lolite()" onClick="logVariable('subscriptionorid')" href="../_variables/subscriptionorid.html">$subscriptionorid</a>;
<a name="l3288"><span class="linenum">3288</span></a>      } else {
<a name="l3289"><span class="linenum">3289</span></a>          <a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a> = <a class="function" onClick="logFunction('calendar_get_subscription')" href="../_functions/calendar_get_subscription.html" onMouseOver="funcPopup(event,'calendar_get_subscription')">calendar_get_subscription</a>(<a class="var it39067" onMouseOver="hilite(39067)" onMouseOut="lolite()" onClick="logVariable('subscriptionorid')" href="../_variables/subscriptionorid.html">$subscriptionorid</a>);
<a name="l3290"><span class="linenum">3290</span></a>      }
<a name="l3291"><span class="linenum">3291</span></a>      <a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a> = new stdClass;
<a name="l3292"><span class="linenum">3292</span></a>      <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a> = <a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a>-&gt;<a onClick="logVariable('courseid')" class="var it44636" onMouseOver="hilite(44636)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>;
<a name="l3293"><span class="linenum">3293</span></a>      <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a> = <a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a>-&gt;<a onClick="logVariable('groupid')" class="var it44636" onMouseOver="hilite(44636)" onMouseOut="lolite()" href="../_variables/groupid.html">groupid</a>;
<a name="l3294"><span class="linenum">3294</span></a>      <a class="function" onClick="logFunction('calendar_get_allowed_types')" href="../_functions/calendar_get_allowed_types.html" onMouseOver="funcPopup(event,'calendar_get_allowed_types')">calendar_get_allowed_types</a>(<a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>, <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l3295"><span class="linenum">3295</span></a>      switch (<a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a>-&gt;<a onClick="logVariable('eventtype')" class="var it44636" onMouseOver="hilite(44636)" onMouseOut="lolite()" href="../_variables/eventtype.html">eventtype</a>) {
<a name="l3296"><span class="linenum">3296</span></a>          case 'user':
<a name="l3297"><span class="linenum">3297</span></a>              return <a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>-&gt;<a onClick="logVariable('user')" class="var it44827" onMouseOver="hilite(44827)" onMouseOut="lolite()" href="../_variables/user.html">user</a>;
<a name="l3298"><span class="linenum">3298</span></a>          case 'course':
<a name="l3299"><span class="linenum">3299</span></a>              if (isset(<a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>-&gt;<a onClick="logVariable('courses')" class="var it44827" onMouseOver="hilite(44827)" onMouseOut="lolite()" href="../_variables/courses.html">courses</a>[<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>])) {
<a name="l3300"><span class="linenum">3300</span></a>                  return <a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>-&gt;<a onClick="logVariable('courses')" class="var it44827" onMouseOver="hilite(44827)" onMouseOut="lolite()" href="../_variables/courses.html">courses</a>[<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>];
<a name="l3301"><span class="linenum">3301</span></a>              } else {
<a name="l3302"><span class="linenum">3302</span></a>                  return false;
<a name="l3303"><span class="linenum">3303</span></a>              }
<a name="l3304"><span class="linenum">3304</span></a>          case 'site':
<a name="l3305"><span class="linenum">3305</span></a>              return <a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>-&gt;<a onClick="logVariable('site')" class="var it44827" onMouseOver="hilite(44827)" onMouseOut="lolite()" href="../_variables/site.html">site</a>;
<a name="l3306"><span class="linenum">3306</span></a>          case 'group':
<a name="l3307"><span class="linenum">3307</span></a>              if (isset(<a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>-&gt;<a onClick="logVariable('groups')" class="var it44827" onMouseOver="hilite(44827)" onMouseOut="lolite()" href="../_variables/groups.html">groups</a>[<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>])) {
<a name="l3308"><span class="linenum">3308</span></a>                  return <a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>-&gt;<a onClick="logVariable('groups')" class="var it44827" onMouseOver="hilite(44827)" onMouseOut="lolite()" href="../_variables/groups.html">groups</a>[<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../_variables/groupid.html">$groupid</a>];
<a name="l3309"><span class="linenum">3309</span></a>              } else {
<a name="l3310"><span class="linenum">3310</span></a>                  return false;
<a name="l3311"><span class="linenum">3311</span></a>              }
<a name="l3312"><span class="linenum">3312</span></a>          default:
<a name="l3313"><span class="linenum">3313</span></a>              return false;
<a name="l3314"><span class="linenum">3314</span></a>      }
<a name="l3315"><span class="linenum">3315</span></a>  }
<a name="l3316"><span class="linenum">3316</span></a>  
<a name="l3317"><span class="linenum">3317</span></a>  <span class="comment">/**</span>
<a name="l3318"><span class="linenum">3318</span></a>  <span class="comment"> * Update calendar subscriptions.</span>
<a name="l3319"><span class="linenum">3319</span></a>  <span class="comment"> *</span>
<a name="l3320"><span class="linenum">3320</span></a>  <span class="comment"> * @return bool</span>
<a name="l3321"><span class="linenum">3321</span></a>  <span class="comment"> */</span>
<a name="l3322"><span class="linenum">3322</span></a>  function <a class="function" onClick="logFunction('calendar_cron')" href="../_functions/calendar_cron.html" onMouseOver="funcPopup(event,'calendar_cron')">calendar_cron</a>() {
<a name="l3323"><span class="linenum">3323</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l3324"><span class="linenum">3324</span></a>  
<a name="l3325"><span class="linenum">3325</span></a>  <span class="comment">    // In order to execute this we need bennu.</span>
<a name="l3326"><span class="linenum">3326</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>.'/bennu/bennu.inc.php');
<a name="l3327"><span class="linenum">3327</span></a>  
<a name="l3328"><span class="linenum">3328</span></a>      <a class="function" onClick="logFunction('mtrace')" href="../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>('Updating calendar subscriptions:');
<a name="l3329"><span class="linenum">3329</span></a>      <a class="function" onClick="logFunction('cron_trace_time_and_memory')" href="../_functions/cron_trace_time_and_memory.html" onMouseOver="funcPopup(event,'cron_trace_time_and_memory')">cron_trace_time_and_memory</a>();
<a name="l3330"><span class="linenum">3330</span></a>  
<a name="l3331"><span class="linenum">3331</span></a>      <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l3332"><span class="linenum">3332</span></a>      <a class="var it8229" onMouseOver="hilite(8229)" onMouseOut="lolite()" onClick="logVariable('subscriptions')" href="../_variables/subscriptions.html">$subscriptions</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>('SELECT * FROM {event_subscriptions} WHERE pollinterval &gt; 0 AND lastupdated + pollinterval &lt; ?', array(<a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>));
<a name="l3333"><span class="linenum">3333</span></a>      foreach (<a class="var it8229" onMouseOver="hilite(8229)" onMouseOut="lolite()" onClick="logVariable('subscriptions')" href="../_variables/subscriptions.html">$subscriptions</a> as <a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>) {
<a name="l3334"><span class="linenum">3334</span></a>          <a class="function" onClick="logFunction('mtrace')" href="../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;Updating calendar subscription {<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>-&gt;<a onClick="logVariable('name')" class="var it43072" onMouseOver="hilite(43072)" onMouseOut="lolite()" href="../_variables/name.html">name</a>} in course {<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>-&gt;<a onClick="logVariable('courseid')" class="var it43072" onMouseOver="hilite(43072)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>}&quot;);
<a name="l3335"><span class="linenum">3335</span></a>          try {
<a name="l3336"><span class="linenum">3336</span></a>              <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a> = <a class="function" onClick="logFunction('calendar_update_subscription_events')" href="../_functions/calendar_update_subscription_events.html" onMouseOver="funcPopup(event,'calendar_update_subscription_events')">calendar_update_subscription_events</a>(<a class="var it150" onMouseOver="hilite(150)" onMouseOut="lolite()" onClick="logVariable('sub')" href="../_variables/sub.html">$sub</a>-&gt;<a onClick="logVariable('id')" class="var it43072" onMouseOver="hilite(43072)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l3337"><span class="linenum">3337</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(<a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="phpfunction" onClick="logFunction('strip_tags')" href="../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../_variables/log.html">$log</a>)));
<a name="l3338"><span class="linenum">3338</span></a>          } catch (moodle_exception <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../_variables/ex.html">$ex</a>) {
<a name="l3339"><span class="linenum">3339</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>('Error updating calendar subscription: ' . <a class="var it341" onMouseOver="hilite(341)" onMouseOut="lolite()" onClick="logVariable('ex')" href="../_variables/ex.html">$ex</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>());
<a name="l3340"><span class="linenum">3340</span></a>          }
<a name="l3341"><span class="linenum">3341</span></a>      }
<a name="l3342"><span class="linenum">3342</span></a>  
<a name="l3343"><span class="linenum">3343</span></a>      <a class="function" onClick="logFunction('mtrace')" href="../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>('Finished updating calendar subscriptions.');
<a name="l3344"><span class="linenum">3344</span></a>  
<a name="l3345"><span class="linenum">3345</span></a>      return true;
<a name="l3346"><span class="linenum">3346</span></a>  }
<a name="l3347"><span class="linenum">3347</span></a>  
<a name="l3348"><span class="linenum">3348</span></a>  <span class="comment">/**</span>
<a name="l3349"><span class="linenum">3349</span></a>  <span class="comment"> * Helper function to determine the context of a calendar subscription.</span>
<a name="l3350"><span class="linenum">3350</span></a>  <span class="comment"> * Subscriptions can be created in two contexts COURSE, or USER.</span>
<a name="l3351"><span class="linenum">3351</span></a>  <span class="comment"> *</span>
<a name="l3352"><span class="linenum">3352</span></a>  <span class="comment"> * @param stdClass $subscription</span>
<a name="l3353"><span class="linenum">3353</span></a>  <span class="comment"> * @return context instance</span>
<a name="l3354"><span class="linenum">3354</span></a>  <span class="comment"> */</span>
<a name="l3355"><span class="linenum">3355</span></a>  function <a class="function" onClick="logFunction('calendar_get_calendar_context')" href="../_functions/calendar_get_calendar_context.html" onMouseOver="funcPopup(event,'calendar_get_calendar_context')">calendar_get_calendar_context</a>(<a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a>) {
<a name="l3356"><span class="linenum">3356</span></a>  
<a name="l3357"><span class="linenum">3357</span></a>  <span class="comment">    // Determine context based on calendar type.</span>
<a name="l3358"><span class="linenum">3358</span></a>      if (<a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a>-&gt;<a onClick="logVariable('eventtype')" class="var it44636" onMouseOver="hilite(44636)" onMouseOut="lolite()" href="../_variables/eventtype.html">eventtype</a> === 'site') {
<a name="l3359"><span class="linenum">3359</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>);
<a name="l3360"><span class="linenum">3360</span></a>      } else if (<a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a>-&gt;<a onClick="logVariable('eventtype')" class="var it44636" onMouseOver="hilite(44636)" onMouseOut="lolite()" href="../_variables/eventtype.html">eventtype</a> === 'group' || <a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a>-&gt;<a onClick="logVariable('eventtype')" class="var it44636" onMouseOver="hilite(44636)" onMouseOut="lolite()" href="../_variables/eventtype.html">eventtype</a> === 'course') {
<a name="l3361"><span class="linenum">3361</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a>-&gt;<a onClick="logVariable('courseid')" class="var it44636" onMouseOver="hilite(44636)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>);
<a name="l3362"><span class="linenum">3362</span></a>      } else {
<a name="l3363"><span class="linenum">3363</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_user')" href="../_classes/context_user.html" onMouseOver="classPopup(event,'context_user')">context_user</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it1800" onMouseOver="hilite(1800)" onMouseOut="lolite()" onClick="logVariable('subscription')" href="../_variables/subscription.html">$subscription</a>-&gt;<a onClick="logVariable('userid')" class="var it44636" onMouseOver="hilite(44636)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>);
<a name="l3364"><span class="linenum">3364</span></a>      }
<a name="l3365"><span class="linenum">3365</span></a>      return <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>;
<a name="l3366"><span class="linenum">3366</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'format_external_text': ['format_external_text', 'Format the text using the external API. This function should we used when text formatting is required in external functions. ', [['calendar','lib.php',2710]], 1],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pdo_moodle_database.php',461],['lib/dml','oci_native_moodle_database.php',1404],['lib/dml','pgsql_native_moodle_database.php',1089],['lib/dml','mssql_native_moodle_database.php',1067],['lib/dml','mysqli_native_moodle_database.php',1405],['lib/dml','sqlsrv_native_moodle_database.php',1148],['lib/dml/tests','dml_test.php',5551]], 650],
'clean_text': ['clean_text', 'Cleans raw text removing nasties. ', [['lib','weblib.php',1637]], 44],
'get_preload_record_columns_sql': ['get_preload_record_columns_sql', 'Returns all fields necessary for context preloading from user $rec. ', [['lib','accesslib.php',6066]], 56],
'timestamp_to_date_array': ['timestamp_to_date_array', 'Given a $time timestamp in GMT (seconds since epoch), returns an array that represents the date in user time. ', [['calendar/tests','calendartype_test_example.php',236],['calendar/type/gregorian/classes','structure.php',345]], 24],
'calendar_top_controls': ['calendar_top_controls', 'Get control options for Calendar ', [['calendar','lib.php',827]], 3],
'create_file_from_storedfile': ['create_file_from_storedfile', 'Create new file from stored file - make sure params are valid. ', [['lib/filebrowser','file_info.php',405],['lib/filebrowser','file_info_stored.php',584],['lib/filestorage','file_storage.php',1186]], 47],
'file_save_draft_area_files': ['file_save_draft_area_files', 'Saves files from a draft file area to a real one (merging the list of files). Can rewrite URLs in some content at the same time if desired. ', [['lib','filelib.php',778]], 61],
'groups_get_group': ['groups_get_group', 'Get the group object ', [['lib','grouplib.php',161]], 20],
'get_course': ['get_course', 'Get the course id. ', [['course','moodleform_mod.php',132],['search/classes','engine.php',102],['course/format','lib.php',231],['mod/quiz','attemptlib.php',180],['mod/quiz','attemptlib.php',722],['tag/classes','index_builder.php',296],['lib','modinfolib.php',180],['lib','modinfolib.php',1424],['lib','modinfolib.php',2706],['lib','datalib.php',568],['availability/classes','info.php',70],['mod/assign','locallib.php',1316],['admin/tool/uploadcourse/classes','processor.php',232],['enrol','locallib.php',912],['search/tests/fixtures','mock_search_engine.php',56]], 302],
'calculate_context': ['calculate_context', 'Calculate the context value needed for calendar_event. Event\'s type can be determine by the available value store in $data It is important to check for the existence of course/courseid to determine the course event. Default value is set to CONTEXT_USER ', [['calendar','lib.php',2107]], 2],
'count_repeats': ['count_repeats', 'Return the number of repeat events there are in this events series ', [['calendar','lib.php',2191]], 2],
'raise': ['raise', 'Sets the PHP time limit to a number of seconds from now. ', [['lib/classes','php_time_limit.php',41]], 90],
'calendar_print_month_selector': ['calendar_print_month_selector', 'Display month selector options ', [['calendar','lib.php',1764]], 0],
'calendar_update_subscription_events': ['calendar_update_subscription_events', 'Fetch a calendar subscription and update the events in the calendar. ', [['calendar','lib.php',3223]], 4],
'out_as_local_url': ['out_as_local_url', 'Returns URL a relative path from $CFG->wwwroot ', [['lib','weblib.php',852]], 44],
'invalidate_by_definition': ['invalidate_by_definition', 'Invalidates a given set of keys from a given definition. ', [['cache/classes','helper.php',206]], 35],
'set': ['set', 'Sets an item in the cache given its key and data value. ', [['cache/stores/static','lib.php',265],['cache','disabledlib.php',81],['search/classes','document.php',241],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',331],['lib/google/src/Google/Cache','Memcache.php',113],['lib','filelib.php',3656],['lib/adodb','adodb-active-record.inc.php',646],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',85],['lib/google/src/Google/Cache','File.php',93],['cache/classes','dummystore.php',170],['cache/classes','loaders.php',496],['cache/classes','loaders.php',1350],['cache/classes','loaders.php',1797],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',47],['lib/horde/framework/Horde','Variables.php',189],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',39],['competency/classes','persistent.php',111],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',203],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',51],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',41],['lib/google/src/Google/Service','ShoppingContent.php',1643],['lib','navigationlib.php',5131],['lib/google/src/Google/Service','Clouddebugger.php',445],['lib/htmlpurifier/HTMLPurifier','Config.php',289],['lib/portfolio','exporter.php',154],['grade/report/singleview/classes/local/ui','finalgrade.php',129],['cache/stores/memcache','lib.php',358],['lib/adodb','adodb-active-recordx.inc.php',676],['cache/classes','interfaces.php',68],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',167],['lib/horde/framework/Horde/Imap/Client','Cache.php',127],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',60],['grade/report/singleview/classes/local/ui','exclude.php',90],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',24],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',114],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Null.php',41],['lib/portfolio','caller.php',187],['cache/stores/session','lib.php',290],['cache/stores/mongodb','lib.php',305],['lib/google/src/Google/Cache','Null.php',44],['grade/report/singleview/classes/local/ui','override.php',95],['cache/stores/file','lib.php',426],['lib/phpmailer','class.phpmailer.php',3554],['grade/report/singleview/classes/local/ui','feedback.php',102],['cache/stores/memcached','lib.php',354],['lib/portfolio','plugin.php',647],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',31],['lib/google/src/Google/Service','YouTube.php',4048],['lib/google/src/Google/Service','YouTube.php',4458],['lib/google/src/Google/Cache','Apc.php',82],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',162],['lib/pear/Net/GeoIP','Location.php',125]], 4904],
'calendar_days_in_month': ['calendar_days_in_month', 'Return the number of days in month ', [['calendar','lib.php',1244]], 11],
'setopt': ['setopt', 'Set curl options. ', [['lib','filelib.php',2865],['lib/phpexcel/PHPExcel/Shared/Escher','DggContainer.php',152],['lib/phpexcel/PHPExcel/Shared/Escher/DgContainer/SpgrContainer','SpContainer.php',214]], 27],
'calendar_add_subscription': ['calendar_add_subscription', 'Add an iCalendar subscription to the database. ', [['calendar','lib.php',2931]], 10],
'get_records_list': ['get_records_list', 'Get a number of records as an array of objects where one field match one list of values. ', [['lib/dml','moodle_database.php',1310]], 34],
'get_records_sql': ['get_records_sql', 'Get a number of records as an array of objects. ', [['lib/dml','pdo_moodle_database.php',309],['lib/dml','oci_native_moodle_database.php',1145],['lib/dml','pgsql_native_moodle_database.php',732],['lib/dml','mssql_native_moodle_database.php',805],['lib/dml','mysqli_native_moodle_database.php',1057],['lib/dml','sqlsrv_native_moodle_database.php',890],['lib/dml/tests','dml_test.php',5545]], 700],
'calendar_filter_controls_element': ['calendar_filter_controls_element', 'Formats a filter control element. ', [['calendar','lib.php',1003]], 4],
'get_name': ['get_name', 'Return localised event name. ', [['lib/classes/event','competency_plan_unlinked.php',72],['admin/tool/langimport/classes/task','update_langpacks_task.php',35],['lib/simplepie/library/SimplePie','Author.php',106],['portfolio/download','lib.php',10],['backup/util/structure','restore_path_element.class.php',98],['lib/classes/message/inbound','private_files_handler.php',56],['lib/classes/event','grouping_group_assigned.php',48],['calendar/tests','calendartype_test_example.php',32],['lib/classes/event','enrol_instance_deleted.php',70],['report/log/classes/event','user_report_viewed.php',54],['lib/classes/task','blog_cron_task.php',31],['mod/quiz/classes/event','attempt_reviewed.php',53],['lib/classes/event','tag_unflagged.php',55],['lib/classes/task','send_new_user_passwords_task.php',31],['lib/classes/event','role_unassigned.php',53],['mod/assign/classes/event','grading_form_viewed.php',82],['question/classes/bank','edit_action_column.php',35],['admin/tool/log/store/standard/classes/task','cleanup_task.php',31],['mod/workshop/classes/event','submission_deleted.php',63],['mod/forum/classes/event','discussion_updated.php',65],['lib/classes/event','course_module_instance_list_viewed.php',75],['lib/classes/event','course_created.php',55],['lib/dml','pdo_moodle_database.php',113],['mod/assign/classes/event','extension_granted.php',77],['lib/classes/task','tag_cron_task.php',33],['enrol/imsenterprise/classes/task','cron_task.php',34],['lib/classes/event','course_deleted.php',56],['lib/classes/task','completion_daily_task.php',33],['mod/forum/classes/event','readtracking_enabled.php',64],['mod/wiki/classes/event','page_created.php',48],['lib/dml','oci_native_moodle_database.php',94],['lib/classes/event','competency_viewed.php',70],['mod/choice/classes/event','answer_updated.php',72],['lib/classes/event','search_indexed.php',47],['lib/classes/event','badge_criteria_updated.php',53],['question/classes/bank','question_type_column.php',26],['mod/wiki/classes/event','page_version_deleted.php',54],['lib/grade','grade_item.php',1384],['lib/classes/event','competency_user_competency_rated_in_plan.php',88],['lib/classes/event','webservice_token_sent.php',56],['mod/glossary/classes/event','entry_deleted.php',54],['admin/tool/messageinbound/classes/message/inbound','invalid_recipient_handler.php',60],['lib/classes/event','competency_template_viewed.php',63],['lib/classes/task','context_cleanup_task.php',32],['mod/assign/tests/fixtures','event_mod_assign_fixtures.php',62],['admin/tool/langimport/classes/event','langpack_removed.php',89],['mod/glossary/classes/event','category_deleted.php',46],['mod/forum/classes/message/inbound','reply_handler.php',51],['competency/classes','competency_rule.php',84],['mod/lti/classes/event','unknown_service_api_called.php',82],['lib/classes/event','badge_deleted.php',49],['mod/quiz/classes/event','user_override_updated.php',54],['lib/classes/event','message_contact_added.php',48],['lib/classes/event','cohort_member_added.php',49],['backup/util/ui','restore_ui.class.php',351],['lib/classes/event','blog_entry_updated.php',74],['mod/assign/classes/event','workflow_state_updated.php',88],['mod/forum/classes/event','assessable_uploaded.php',86],['mod/assign/classes/event','submission_created.php',57],['lib/classes/event','group_deleted.php',65],['lib/classes/event','role_allow_assign_updated.php',47],['mod/lesson/classes/event','highscore_added.php',59],['mod/forum/classes/event','discussion_pinned.php',55],['lib/classes/event','webservice_function_called.php',67],['lib/classes/event','competency_plan_reopened.php',75],['mod/lesson/classes/event','essay_attempt_viewed.php',48],['mod/wiki/classes/event','page_locks_deleted.php',54],['lib/classes/event','webservice_service_deleted.php',59],['mod/forum/classes/event','discussion_subscription_created.php',66],['admin/tool/log/store/database/tests/fixtures','event.php',31],['mod/workshop/classes/event','assessable_uploaded.php',93],['lib','csslib.php',2155],['lib','csslib.php',2283],['lib/classes/event','user_loggedout.php',54],['lib/classes/event','webservice_token_created.php',65],['lib/classes/event','tag_collection_updated.php',65],['competency/classes','competency_rule_all.php',84],['backup/util/settings','base_setting.class.php',145],['mod/data/classes/event','field_deleted.php',57],['mod/book/classes/event','chapter_created.php',79],['lib/classes/event','email_failed.php',56],['lib/classes/task','stats_cron_task.php',31],['mod/survey/classes/event','report_downloaded.php',55],['mod/workshop/classes/event','phase_switched.php',75],['lib/grade','grade_category.php',2300],['lib/grade','grade_scale.php',156],['lib/classes/event','course_reset_started.php',53],['mod/workshop/classes/event','assessment_evaluated.php',66],['lib/classes/event','blog_association_created.php',56],['backup/converter','convertlib.php',109],['report/outline/classes/event','activity_report_viewed.php',48],['lib/classes/task','legacy_plugin_cron_task.php',33],['lib/classes/event','competency_plan_updated.php',75],['mod/choice/classes/event','answer_submitted.php',72],['mod/lesson/classes/event','lesson_ended.php',49],['lib/classes/event','role_allow_switch_updated.php',47],['lib/classes/task','portfolio_cron_task.php',31],['lib/classes/event','competency_user_competency_rated_in_course.php',88],['question/classes/bank','question_text_row.php',35],['lib/classes/event','tag_created.php',75],['report/participation/classes/event','report_viewed.php',58],['lib/classes/event','role_capabilities_updated.php',51],['mod/survey/classes/event','response_submitted.php',53],['lib/classes/event','badge_archived.php',47],['mod/workshop/classes/event','assessment_reevaluated.php',76],['mod/assign/classes/event','submission_locked.php',78],['report/outline/classes/event','report_viewed.php',54],['lib/classes/event','user_deleted.php',57],['lib/classes/event','mnet_access_control_updated.php',57],['mod/lesson/classes/event','essay_assessed.php',78],['mod/book/tool/print/classes/event','book_printed.php',76],['lib/classes/event','grouping_deleted.php',72],['admin/tool/monitor/classes','rule.php',239],['lib/classes/event','course_viewed.php',75],['mod/forum/classes/event','user_report_viewed.php',65],['user/selector','lib.php',309],['mod/quiz/classes/event','attempt_summary_viewed.php',56],['lib/classes/event','webservice_service_user_added.php',59],['mod/forum/classes/event','discussion_unpinned.php',55],['lib/classes/event','grouping_group_unassigned.php',48],['lib/grade','grade_outcome.php',272],['mod/chat/classes/event','message_sent.php',59],['lib/classes/event','role_assigned.php',56],['mod/quiz/classes/question/bank','question_name_text_column.php',37],['question/classes/bank','modifier_name_column.php',27],['mod/glossary/classes/event','entry_viewed.php',48],['mod/data/classes/event','record_created.php',56],['lib/classes/event','course_category_deleted.php',59],['lib/dml','mariadb_native_moodle_database.php',41],['lib/classes/event','role_deleted.php',55],['lib/classes/task','question_cron_task.php',31],['portfolio/flickr','lib.php',41],['lib/classes/task','cache_cron_task.php',31],['mod/wiki/classes/event','page_version_viewed.php',54],['admin/tool/recyclebin/classes/event','category_bin_item_deleted.php',47],['admin/tool/log/store/standard/tests/fixtures','event.php',31],['mod/scorm/classes/event','status_submitted.php',46],['admin/tool/monitor/classes/event','rule_created.php',50],['admin/tool/log/store/legacy/classes/task','cleanup_task.php',31],['question/classes/bank','checkbox_column.php',32],['lib/classes/event','competency_user_competency_plan_viewed.php',81],['mod/assign/feedback/offline','locallib.php',42],['admin/tool/messageinbound/classes/task','cleanup_task.php',38],['mod/workshop/classes/event','submission_updated.php',63],['lib/editor/atto/classes/task','autosave_cleanup_task.php',33],['mod/choice/classes/event','report_viewed.php',53],['mod/lesson/classes/event','group_override_deleted.php',54],['mod/wiki/classes/event','page_map_viewed.php',54],['admin/tool/log/store/legacy/tests/fixtures','event.php',31],['mod/lesson/classes/event','question_answered.php',54],['mod/choice/classes/event','report_downloaded.php',54],['admin/tool/recyclebin/classes/task','cleanup_category_bin.php',36],['backup/util/ui','backup_ui_setting.class.php',86],['lib/classes/event','competency_user_evidence_created.php',64],['lib/classes/event','course_module_completion_updated.php',54],['repository/coursefiles','lib.php',183],['lib/classes/event','note_updated.php',56],['lib/classes/event','note_created.php',56],['lib/classes/event','competency_framework_created.php',63],['lib/classes/event','course_resources_list_viewed.php',60],['lib/classes/event','tag_updated.php',58],['mod/forum/classes/event','subscribers_viewed.php',65],['mod/book/tool/exportimscp/classes/event','book_exported.php',76],['mod/quiz/classes/question/bank','add_action_column.php',45],['lib/classes/task','completion_regular_task.php',33],['lib/classes/event','user_enrolment_deleted.php',54],['grade/report/grader/classes/event','grade_report_viewed.php',39],['lib','enrollib.php',1076],['admin/tool/recyclebin/classes/event','course_bin_item_restored.php',47],['lib/classes/event','webservice_service_updated.php',59],['lib/editor/tinymce/classes','plugin.php',101],['mod/lesson/classes/event','group_override_created.php',55],['mod/scorm/classes/event','attempt_deleted.php',62],['lib/classes/event','competency_user_competency_review_request_cancelled.php',72],['lib/classes/event','webservice_service_created.php',65],['lib/classes/task','events_cron_task.php',31],['mod/wiki/classes/event','page_version_restored.php',54],['mod/forum/classes/event','discussion_deleted.php',66],['lib/classes/event','competency_framework_updated.php',73],['mod/lesson/classes/event','lesson_restarted.php',48],['mod/wiki/classes/event','page_updated.php',54],['mod/assign/classes/event','marker_updated.php',89],['lib','modinfolib.php',1270],['mod/assign/feedback/editpdf/classes/task','convert_submissions.php',38],['lib/classes/event','course_module_updated.php',57],['repository','lib.php',1834],['auth/cas/classes/task','sync_task.php',34],['lib/classes/event','competency_template_deleted.php',73],['mod/assign/classes/event','submission_confirmation_form_viewed.php',79],['lib/bennu','iCalendar_components.php',37],['report/questioninstances/classes/event','report_viewed.php',55],['admin/tool/recyclebin/classes/task','cleanup_course_bin.php',36],['lib/classes/event','message_contact_blocked.php',48],['lib/classes/event','competency_template_updated.php',75],['question/behaviour','behaviourbase.php',83],['grade/report/history/classes/event','grade_report_viewed.php',39],['lib/classes/event','badge_disabled.php',47],['mod/assign/classes/event','grading_table_viewed.php',79],['lib/classes/event','badge_enabled.php',47],['mod/lti','OAuth.php',122],['mod/lti','OAuth.php',149],['mod/lti','OAuth.php',173],['calendar/type/gregorian/classes','structure.php',29],['mod/quiz/classes/event','edit_page_viewed.php',53],['lib/simplepie/library/SimplePie','Credit.php',139],['mod/scorm/classes/event','tracks_viewed.php',64],['mod/wiki/classes/event','page_diff_viewed.php',55],['message/tests/fixtures','inbound_fixtures.php',41],['lib/classes/event','grouping_created.php',65],['lib/classes/event','calendar_event_deleted.php',58],['enrol/flatfile/classes/task','flatfile_sync_task.php',37],['lib/classes/event','group_updated.php',65],['lib/classes/task','registration_cron_task.php',31],['mod/book/classes/event','chapter_updated.php',79],['lib/classes/event','grade_deleted.php',94],['admin/tool/recyclebin/classes/event','course_bin_item_created.php',47],['lib/classes/event','user_loggedin.php',64],['lib/classes/task','check_for_updates_task.php',31],['grade/report/singleview/classes/local/ui','grade_attribute_format.php',56],['mod/assign/submission/file','locallib.php',44],['mod/forum/classes/task','cron_task.php',30],['mod/forum/classes/event','subscription_created.php',65],['lib/classes/event','tag_collection_created.php',65],['grade/report/overview/classes/event','grade_report_viewed.php',48],['mod/assign/classes/event','batch_set_marker_allocation_viewed.php',79],['mod/quiz/classes/event','group_override_updated.php',54],['lib/classes/event','competency_plan_created.php',63],['mod/glossary/classes/event','entry_disapproved.php',46],['lib/classes/task','send_failed_login_notifications_task.php',34],['enrol/lti/classes/task','sync_grades.php',36],['lib/classes/event','message_viewed.php',54],['portfolio/boxnet','lib.php',14],['lib/classes/event','comment_created.php',58],['question/classes/bank','preview_action_column.php',26],['lib/classes/event','course_content_deleted.php',54],['lib/dml','pgsql_native_moodle_database.php',87],['mod/feedback/classes/event','response_deleted.php',83],['lib/classes/event','competency_evidence_created.php',98],['lib/classes/event','comment_deleted.php',58],['lib/classes/event','competency_user_competency_review_requested.php',72],['mod/quiz/classes/event','attempt_abandoned.php',63],['mod/scorm/classes/event','user_report_viewed.php',62],['lib/dml','mssql_native_moodle_database.php',88],['mod/quiz/classes/event','attempt_becameoverdue.php',66],['mod/quiz/classes/event','group_override_created.php',55],['lib/dml','mysqli_native_moodle_database.php',352],['backup/util/ui','backup_ui.class.php',194],['mod/book/tool/print/classes/event','chapter_printed.php',79],['mod/data/classes/event','record_deleted.php',56],['competency/classes','competency_rule_points.php',185],['lib/classes/event','competency_user_competency_viewed.php',81],['lib/classes/event','dashboard_viewed.php',59],['mod/lesson/classes/event','question_viewed.php',54],['lib/classes/event','user_profile_viewed.php',56],['lib','medialib.php',345],['admin/tool/monitor/classes/task','clean_events.php',32],['mod/lesson/classes/event','user_override_deleted.php',53],['lib/classes/event','cohort_member_removed.php',50],['mod/lesson/classes/event','lesson_started.php',48],['mod/lesson/classes/event','page_updated.php',73],['mod/workshop/classes/event','submission_viewed.php',63],['question/classes/bank','question_name_column.php',28],['lib/classes/event','competency_deleted.php',87],['admin/tool/monitor/classes','subscription.php',132],['lib/classes/task','grade_cron_task.php',31],['mod/glossary/classes/event','entry_created.php',52],['lib/classes/task','file_temp_cleanup_task.php',31],['lib/classes/event','dashboard_reset.php',60],['backup/util/structure','base_atom.class.php',71],['portfolio/googledocs','lib.php',54],['mod/assign/feedback/comments','locallib.php',36],['mod/wiki/classes/event','page_history_viewed.php',48],['lib/classes/event','competency_plan_review_request_cancelled.php',75],['lib/classes/event','competency_plan_deleted.php',73],['mod/quiz/classes/event','attempt_viewed.php',54],['mod/data/classes/event','field_updated.php',57],['lib/classes/event','grouping_updated.php',65],['cache/classes','definition.php',621],['lib/classes/task','plagiarism_cron_task.php',31],['backup/converter/moodle1','lib.php',1033],['lib/classes/event','question_category_created.php',48],['grade/report/user/classes/event','grade_report_viewed.php',48],['lib/classes/event','user_login_failed.php',56],['mod/scorm/classes/event','report_viewed.php',63],['mod/chat/classes/event','sessions_viewed.php',65],['admin/tool/recyclebin/classes/event','course_bin_item_deleted.php',47],['mod/quiz/classes/event','user_override_deleted.php',53],['portfolio/mahara','lib.php',61],['mod/quiz/classes/event','attempt_submitted.php',63],['grade/report/outcomes/classes/event','grade_report_viewed.php',39],['mod/lesson/classes/event','group_override_updated.php',54],['mod/workshop/classes/event','submission_created.php',63],['mod/assign/classes/event','submission_updated.php',57],['mod/assign/submission/onlinetext/classes/event','assessable_uploaded.php',83],['lib/classes/event','competency_updated.php',70],['lib/classes/event','note_deleted.php',56],['mod/lesson/classes/event','page_moved.php',56],['lib/classes/event','course_completed.php',73],['lib/classes/event','tag_added.php',58],['lib/classes/event','competency_created.php',70],['mod/lesson/classes/event','highscores_viewed.php',51],['lib/classes/event','message_contact_unblocked.php',48],['lib/classes/event','user_enrolment_created.php',53],['lib/classes/task','search_index_task.php',35],['lib/classes/event','course_module_created.php',86],['lib/classes/event','webservice_service_user_removed.php',59],['report/log/classes/event','report_viewed.php',58],['mod/assign/submission/file/classes/event','assessable_uploaded.php',85],['lib/classes/event','group_member_added.php',78],['mod/forum/classes/event','discussion_viewed.php',60],['mod/assign/classes/event','submission_viewed.php',76],['mod/lti/classes/local/ltiservice','service_base.php',87],['enrol/lti/classes/task','sync_members.php',46],['mod/workshop/classes/event','submission_reassessed.php',77],['lib/classes/task','session_cleanup_task.php',31],['lib/tests','messageinbound_test.php',166],['lib/classes/task','backup_cleanup_task.php',31],['mod/workshop/classes/event','assessment_evaluations_reset.php',75],['mod/scorm/classes/event','scoreraw_submitted.php',46],['mod/assign/classes/event','statement_accepted.php',77],['mod/assign/classes/event','feedback_viewed.php',76],['lib/classes/task','delete_unconfirmed_users_task.php',31],['mod/forum/classes/event','discussion_moved.php',66],['lib/classes/event','competency_user_evidence_deleted.php',64],['mod/assign/classes/event','batch_set_workflow_state_viewed.php',79],['mod/lesson/classes/event','lesson_resumed.php',48],['lib/classes/task','badges_cron_task.php',31],['lib/classes/event','comments_viewed.php',51],['mod/data/classes/event','template_viewed.php',55],['mod/wiki/classes/event','page_deleted.php',54],['mod/quiz/classes/event','report_viewed.php',56],['mod/scorm/classes/event','sco_launched.php',64],['mod/glossary/classes/event','entry_updated.php',52],['mod/lesson/classes/event','user_override_created.php',53],['mod/glossary/classes/event','category_updated.php',46],['lib/classes/event','course_updated.php',58],['grade/report/singleview/classes/event','grade_report_viewed.php',39],['mod/feedback/classes/event','response_submitted.php',83],['lib/classes/event','blog_entry_deleted.php',53],['mod/book/classes/event','chapter_deleted.php',79],['report/completion/classes/event','report_viewed.php',49],['lib/classes/event','recent_activity_viewed.php',49],['mod/quiz/classes/event','question_manually_graded.php',55],['mod/assign/classes/event','submission_status_updated.php',79],['lib/classes/event','user_enrolment_updated.php',53],['lib/classes/event','tag_deleted.php',55],['report/completion/classes/event','user_report_viewed.php',49],['report/stats/classes/event','report_viewed.php',56],['lib/classes/event','calendar_event_created.php',58],['mod/assign/classes/event','submission_duplicated.php',77],['lib/classes/event','competency_framework_deleted.php',73],['lib/classes/event','course_section_updated.php',56],['lib/classes/event','message_sent.php',82],['lib/classes/event','calendar_subscription_deleted.php',56],['lib/classes/event','course_category_updated.php',51],['lib/classes/event','user_password_updated.php',70],['enrol/lti/ims-blti','OAuth.php',65],['enrol/lti/ims-blti','OAuth.php',92],['enrol/lti/ims-blti','OAuth.php',116],['mod/forum/classes/event','subscription_deleted.php',65],['mod/assign/classes/event','reveal_identities_confirmation_page_viewed.php',79],['lib/classes/event','user_loggedinas.php',57],['lib/classes/event','competency_template_created.php',63],['lib/classes/event','user_created.php',48],['admin/tool/recyclebin/classes/event','category_bin_item_restored.php',47],['report/loglive/classes/event','report_viewed.php',48],['admin/tool/monitor/classes/event','subscription_created.php',50],['mod/book/classes/event','chapter_viewed.php',79],['lib/classes/event','badge_awarded.php',54],['lib/classes/event','calendar_subscription_created.php',57],['lib/classes/event','enrol_instance_created.php',69],['lib/classes/event','user_list_viewed.php',56],['lib/classes/task','calendar_cron_task.php',31],['mod/forum/classes/event','post_deleted.php',67],['mod/quiz/classes/event','group_override_deleted.php',54],['lib/classes/event','badge_created.php',47],['backup/util/plan','base_plan.class.php',50],['lib/classes/event','base.php',292],['lib/classes/event','competency_framework_viewed.php',69],['lib/classes/event','tag_collection_deleted.php',65],['lib/classes/event','group_member_removed.php',69],['lib/classes/event','grade_report_viewed.php',54],['lib/classes/event','calendar_event_updated.php',58],['mod/assign/submission/onlinetext','locallib.php',40],['lib/classes/event','user_updated.php',48],['mod/lesson/classes/event','page_created.php',54],['backup/util/ui','base_ui_stage.class.php',110],['mod/assign/classes/event','submission_form_viewed.php',82],['auth/ldap/classes/task','sync_task.php',34],['lib/classes/event','course_completion_updated.php',47],['lib/classes/event','competency_plan_review_started.php',75],['lib/classes/event','course_user_report_viewed.php',66],['mod/folder/classes/event','all_files_downloaded.php',60],['mod/workshop/classes/event','assessments_reset.php',74],['lib/tests/fixtures','task_fixtures.php',35],['lib/tests/fixtures','task_fixtures.php',44],['lib/tests/fixtures','task_fixtures.php',53],['mod/data/classes/event','template_updated.php',56],['mod/assign/classes/event','identities_revealed.php',75],['question/classes/bank','copy_action_column.php',35],['admin/tool/log/store/legacy/classes/event','legacy_logged.php',35],['lib/classes/event','notes_viewed.php',49],['admin/tool/recyclebin/classes/event','category_bin_item_created.php',47],['lib/classes/event','competency_plan_viewed.php',63],['mod/data/classes/event','record_updated.php',56],['mod/assign/feedback/file','locallib.php',45],['lib/classes/event','competency_plan_unapproved.php',75],['mod/lesson/classes/event','content_page_viewed.php',48],['mod/assign/feedback/editpdf','locallib.php',43],['lib/dml','sqlsrv_native_moodle_database.php',108],['admin/tool/monitor/classes/event','subscription_deleted.php',50],['mod/assign/classes/event','assessable_submitted.php',109],['mod/quiz/classes/event','attempt_started.php',62],['lib/classes/task','create_contexts_task.php',31],['lib/classes/task','file_trash_cleanup_task.php',31],['lib/classes/event','competency_user_competency_rated.php',82],['mod/forum/classes/event','post_updated.php',67],['admin/tool/cohortroles/classes/task','cohort_role_sync.php',37],['lib/classes/event','course_module_deleted.php',56],['mod/assign/submission/comments','locallib.php',39],['lib/classes/event','competency_plan_review_requested.php',75],['lib/classes/event','user_graded.php',96],['lib/classes/event','webservice_login_failed.php',71],['mod/forum/classes/event','post_created.php',67],['lib/classes/task','complete_plans_task.php',43],['mod/assign/classes/event','submission_status_viewed.php',81],['lib/classes/event','enrol_instance_updated.php',70],['lib/classes/task','messaging_cleanup_task.php',31],['portfolio/picasa','lib.php',33],['admin/tool/capability/classes/event','report_viewed.php',47],['grade/report/singleview/classes/local/ui','unique_name.php',38],['mod/data/classes/event','field_created.php',58],['mod/folder/classes/event','folder_updated.php',48],['lib/classes/event','badge_updated.php',47],['lib/tests/fixtures','event_fixtures.php',34],['lib/classes/task','cache_cleanup_task.php',31],['mod/survey/classes/event','report_viewed.php',55],['mod/quiz/classes/event','attempt_deleted.php',53],['mod/glossary/classes/event','entry_approved.php',46],['mod/wiki/classes/event','page_viewed.php',57],['lib/classes/log','reader.php',30],['lib/classes/task','password_reset_cleanup_task.php',31],['mod/forum/classes/event','readtracking_disabled.php',64],['admin/tool/langimport/classes/event','langpack_imported.php',80],['lib/classes/event','competency_plan_review_stopped.php',75],['admin/tool/langimport/classes/event','langpack_updated.php',80],['lib/classes/event','unknown_logged.php',43],['lib/classes/event','competency_user_competency_viewed_in_plan.php',85],['lib/classes/event','competency_user_competency_viewed_in_course.php',84],['lib/classes/task','search_optimize_task.php',38],['mod/glossary/classes/event','category_created.php',46],['lib/portfolio','plugin.php',120],['report/stats/classes/event','user_report_viewed.php',48],['lib/classes/event','dashboards_reset.php',59],['lib/classes/event','calendar_subscription_updated.php',57],['lib/classes/event','cohort_updated.php',49],['admin/tool/monitor/classes/event','rule_updated.php',50],['mod/lesson/classes/event','page_deleted.php',54],['lib/classes/event','course_section_deleted.php',57],['lib/classes/task','delete_incomplete_users_task.php',31],['lib/classes/task','automated_backup_task.php',31],['admin/tool/monitor/classes/event','subscription_criteria_met.php',55],['lib/classes/event','mnet_access_control_created.php',57],['admin/tool/messageinbound/classes/task','pickup_task.php',38],['mod/forum/classes/event','discussion_created.php',65],['question/classes/bank','creator_name_column.php',28],['lib/classes/event','blog_entries_viewed.php',62],['lib/classes/task','sync_plans_from_template_cohorts_task.php',41],['mod/quiz/classes/event','attempt_preview_started.php',54],['lib/classes/event','content_viewed.php',80],['lib/classes/event','competency_user_evidence_updated.php',64],['lib/dml/tests','dml_test.php',5530],['mod/assign/classes/event','submission_graded.php',78],['mod/assign/classes/event','all_submissions_downloaded.php',75],['lib/classes/event','course_restored.php',58],['lib/classes/event','group_created.php',65],['lib/classes/event','badge_criteria_deleted.php',52],['lib/classes/event','tag_flagged.php',55],['lib/classes/event','competency_plan_completed.php',75],['mod/lesson/classes/event','user_override_updated.php',54],['lib/classes/event','role_allow_override_updated.php',47],['mod/forum/classes/event','discussion_subscription_deleted.php',66],['lib/classes/event','cohort_deleted.php',49],['lib/classes/event','badge_criteria_created.php',52],['admin/tool/log/classes/helper','reader.php',41],['admin/tool/monitor/classes/task','check_subscriptions.php',50],['lib/classes/event','blog_entry_created.php',76],['mod/scorm/classes/event','interactions_viewed.php',63],['mod/workshop/classes/event','submission_assessed.php',76],['lib/classes/event','badge_duplicated.php',47],['backup/util/plan','base_step.class.php',49],['lib/classes/event','course_category_created.php',48],['lib/classes/event','cohort_created.php',49],['lib/classes/event','tag_removed.php',58],['lib/classes/event','competency_plan_approved.php',75],['mod/choice/classes/event','answer_deleted.php',56],['backup/util/ui','restore_ui_stage.class.php',75],['lib/classes/event','competency_user_competency_review_started.php',72],['lib/classes/event','course_reset_ended.php',53],['mod/quiz/classes/event','user_override_created.php',53],['mod/forum/classes/event','course_searched.php',66],['lib/classes/event','message_contact_removed.php',48],['admin/tool/monitor/classes/event','rule_deleted.php',50],['lib/classes/event','message_deleted.php',91],['mod/assign/classes/event','submission_unlocked.php',78],['lib/classes/event','competency_user_competency_review_stopped.php',72],['lib/classes/event','course_module_viewed.php',62],['backup/util/plan','base_task.class.php',58],['question/classes/bank','delete_action_column.php',36]], 469],
'calendar_show_event_type': ['calendar_show_event_type', 'Checks to see if the requested type of event should be shown for the given user. ', [['calendar','lib.php',1779]], 5],
'delete_records': ['delete_records', 'Delete the records from a table where all the given conditions met. If conditions not specified, table is truncated. ', [['lib/dml','sqlite3_pdo_moodle_database.php',345],['lib/dml','moodle_database.php',1864]], 773],
'calendar_get_pollinterval_choices': ['calendar_get_pollinterval_choices', 'Returns option list for the poll interval setting. ', [['calendar','lib.php',2888]], 2],
'__set': ['__set', '', [['lib/minify/lib','JSMinPlus.php',1681],['lib/adodb','adodb-active-record.inc.php',114],['lib/horde/framework/Horde/Mail/Rfc822','Group.php',74],['lib/simplepie/library/SimplePie','IRI.php',143],['lib/horde/framework/Horde','Variables.php',199],['mod/lesson','locallib.php',2012],['lib','modinfolib.php',168],['lib','modinfolib.php',1206],['lib','adminlib.php',1085],['lib/dml','database_column_info.php',76],['lib','navigationlib.php',5121],['lib/classes/message','message.php',202],['lib/horde/framework/Horde/Support','Array.php',123],['lib','pagelib.php',779],['mod/forum/classes/output','forum_post.php',230],['lib/horde/framework/Horde','Stream.php',84],['lib/simplepie/library/SimplePie','gzdecode.php',175],['lib/adodb','adodb-active-recordx.inc.php',122],['lib','accesslib.php',5277],['lib/mustache/src/Mustache','HelperCollection.php',43],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',121],['tag/classes/output','tagindex.php',113],['lib/portfolio/formats/leap2a','lib.php',277],['lib/horde/framework/Horde/Imap/Client/Data','Namespace.php',94],['lib/horde/framework/Horde/Support','ObjectStub.php',50],['lib/classes/event','base.php',927],['lib','coursecatlib.php',121],['lib','coursecatlib.php',2979],['calendar','lib.php',2061],['lib/horde/framework/Horde/Mail/Rfc822','Address.php',88],['lib/horde/framework/Horde/Stream','TempString.php',83],['lib/horde/framework/Horde/Support','Stub.php',31],['lib','webdavlib.php',98],['lib/pear/Net/GeoIP','Location.php',142]], 4],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 2229],
'calendar_get_upcoming': ['calendar_get_upcoming', 'Gets the calendar upcoming event ', [['calendar','lib.php',540]], 3],
'isloggedin': ['isloggedin', 'Determines if a user is currently logged in ', [['lib','accesslib.php',1910]], 184],
'calendar_can_edit_subscription': ['calendar_can_edit_subscription', 'Checks to see if the user can edit a given subscription feed. ', [['calendar','lib.php',3275]], 2],
'isguestuser': ['isguestuser', 'Determines if a user is logged in as real guest user with username \'guest\'. ', [['lib','accesslib.php',1923]], 260],
'calendar_import_icalendar_events': ['calendar_import_icalendar_events', 'Import events from an iCalendar object into a course calendar. ', [['calendar','lib.php',3163]], 5],
'convert_to_gregorian': ['convert_to_gregorian', 'Provided with a day, month, year, hour and minute convert it into the equivalent Gregorian date. ', [['calendar/tests','calendartype_test_example.php',260],['calendar/type/gregorian/classes','structure.php',383]], 25],
'calendar_day_representation': ['calendar_day_representation', 'Return the representation day ', [['calendar','lib.php',1084]], 4],
'cron_trace_time_and_memory': ['cron_trace_time_and_memory', 'Output some standard information during cron runs. Specifically current time and memory usage. This method also does gc_collect_cycles() (before displaying memory usage) to try to help PHP manage memory better. ', [['lib','cronlib.php',161]], 16],
'sesskey': ['sesskey', 'Makes sure that $USER->sesskey exists, if $USER itself exists. It sets a new sesskey if one does not already exist, but does not overwrite existing sesskeys. Returns the sesskey string if $USER exists, or boolean false if not. ', [['lib','sessionlib.php',28]], 641],
'add_pretend_calendar_block': ['add_pretend_calendar_block', 'Adds a pretent calendar block ', [['calendar','renderer.php',106]], 2],
'clean_param': ['clean_param', 'Used by {@link optional_param()} and {@link required_param()} to clean the variables and/or cast to specific types, based on an options field. <code> $course->format = clean_param($course->format, PARAM_ALPHA); $selectedgradeitem = clean_param($selectedgradeitem, PARAM_INT); </code> ', [['lib','moodlelib.php',769]], 635],
'load': ['load', 'Load the class from cache using `require_once`. ', [['lib/mustache/src/Mustache/Cache','FilesystemCache.php',39],['lib/phpexcel/PHPExcel/Reader','Excel2007.php',320],['lib/phpexcel/PHPExcel/Reader','OOCalc.php',284],['lib/pear/HTML/QuickForm','select.php',430],['lib/phpexcel/PHPExcel/Reader','Excel5.php',612],['lib/mustache/src/Mustache/Cache','NoopCache.php',20],['lib/adodb','adodb-active-record.inc.php',775],['backup/cc/cc_lib','xmlbase.php',92],['lib/mustache/src/Mustache/Loader','FilesystemLoader.php',69],['lib/simplepie/library/SimplePie/Cache','File.php',118],['lib/mustache/src/Mustache/Loader','CascadingLoader.php',48],['lib/phpexcel/PHPExcel','Autoloader.php',58],['lib/phpexcel/PHPExcel/Reader','IReader.php',38],['grade/grading','lib.php',227],['mod/lesson','locallib.php',1022],['mod/lesson','locallib.php',2240],['mod/lesson','locallib.php',3200],['lib/phpexcel/PHPExcel','IOFactory.php',180],['lib/mustache/src/Mustache','Cache.php',20],['lib','outputlib.php',432],['cache/classes','definition.php',335],['lib/phpexcel/PHPExcel/Reader/Excel5','Escher.php',87],['lib/adodb','adodb-active-recordx.inc.php',813],['lib/simplepie/library/SimplePie/Cache','Base.php',87],['lib/phpexcel/PHPExcel/Reader','HTML.php',143],['lib/simplepie/library/SimplePie/Cache','MySQL.php',286],['lib/mustache/src/Mustache/Loader','InlineLoader.php',87],['lib/mustache/src/Mustache','Loader.php',17],['lib/phpexcel/PHPExcel/Reader','CSV.php',203],['lib/simplepie/library/SimplePie/Cache','Memcache.php',123],['lib/mustache/src/Mustache/Loader','StringLoader.php',28],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',44],['lib/phpunit/classes','autoloader.php',46],['lib/phpexcel/PHPExcel/Reader','Excel2003XML.php',216],['lib/htmlpurifier/HTMLPurifier','Language.php',69],['lib/phpexcel/PHPExcel/Reader','SYLK.php',190],['calendar','lib.php',2666],['lib/phpexcel/PHPExcel/Reader','Gnumeric.php',189],['lib/mustache/src/Mustache/Loader','ArrayLoader.php',41],['cache/classes','config.php',128]], 190],
'calendar_get_icalendar': ['calendar_get_icalendar', 'From a URL, fetch the calendar and return an iCalendar object. ', [['calendar','lib.php',3139]], 1],
'get_editoroptions': ['get_editoroptions', 'Returns an array of editoroptions for this event: Called by __get Please use $blah = $event->editoroptions; ', [['calendar','lib.php',2141]], 0],
'calendar_add_event_allowed': ['calendar_add_event_allowed', 'Check wether the current user is permitted to add events ', [['calendar','lib.php',1903]], 4],
'calendar_add_month': ['calendar_add_month', 'Get the next following month ', [['calendar','lib.php',1301]], 8],
'calendar_event_hook': ['calendar_event_hook', 'Attempts to call the hook for the specified action should a calendar type by set $CFG->calendar, and the appopriate function defined ', [['calendar','lib.php',2630]], 6],
'prepare_for_view': ['prepare_for_view', 'Initialize calendar information ', [['calendar','lib.php',2810]], 3],
'set_field': ['set_field', 'Set a single field in every table record where all the given conditions met. ', [['lib/dml','moodle_database.php',1737],['availability/condition/profile/tests','condition_test.php',349]], 485],
'userdate': ['userdate', 'Returns a formatted string that represents a date in user time. ', [['lib','moodlelib.php',2155],['lib/adodb','adodb.inc.php',2842],['lib/adodb','adodb.inc.php',3569]], 525],
'mtrace': ['mtrace', 'Outputs the given message via {@link mtrace()}. ', [['lib/classes','plugin_manager.php',1376],['lib','moodlelib.php',8509]], 406],
'empty_tag': ['empty_tag', 'Outputs an empty tag with attributes ', [['lib','outputcomponents.php',1106]], 522],
'editors_get_preferred_format': ['editors_get_preferred_format', 'Returns users preferred text format. ', [['lib','editorlib.php',79]], 19],
'get_config': ['get_config', 'Config get method. ', [['lib/classes/antivirus','scanner.php',54],['competency/classes','competency_rule.php',59],['question/engine','bank.php',109],['admin/tool/log/classes/helper','store.php',63],['lib','moodlelib.php',1409],['lib','enrollib.php',1142],['lib/editor/tinymce/classes','plugin.php',73],['competency/classes','competency_rule_points.php',43],['search/classes','base.php',169],['mod/assign','assignmentplugin.php',345],['lib/portfolio','plugin.php',546]], 934],
'format_string': ['format_string', 'Given a simple string, this function returns the string processed by enabled string filters if $CFG->filterall is enabled ', [['lib','weblib.php',1379]], 880],
'fake_block_filters': ['fake_block_filters', 'Produces the content for the filters block (pretend block) ', [['calendar','renderer.php',53]], 1],
'normalise_timezone': ['normalise_timezone', 'Normalise the timezone name. If timezone not supported this method falls back to server timezone (if valid) or default PHP timezone. ', [['lib/classes','date.php',114]], 64],
'parse_rrule': ['parse_rrule', 'Parse the recurrence rule and setup all properties. ', [['calendar/classes','rrule_manager.php',191]], 29],
'calendar_preferences_button': ['calendar_preferences_button', 'Display calendar preference button ', [['calendar','lib.php',1657]], 3],
'calendar_get_starting_weekday': ['calendar_get_starting_weekday', 'Gets the first day of the week ', [['calendar','lib.php',154]], 6],
'on': ['on', '', [['lib/requirejs','require.js',508],['lib/jquery','jquery-3.1.0.js',4809]], 3823],
'calendar_get_group_cached': ['calendar_get_group_cached', 'Get group from groupid for calendar display ', [['calendar','lib.php',1459]], 1],
'calendar_get_course_cached': ['calendar_get_course_cached', 'Get current course cache ', [['calendar','lib.php',1445]], 5],
'getmessage': ['getmessage', '', [['lib/google/src/Google/Service','Freebase.php',441],['lib/google/src/Google/Service','AdSense.php',2970],['lib/google/src/Google/Service','Replicapool.php',1165],['lib/google/src/Google/Service','Replicapool.php',1257],['lib/google/src/Google/Service','Computeaccounts.php',1368],['lib/google/src/Google/Service','Computeaccounts.php',1460],['lib/google/src/Google/Service','Appengine.php',1604],['lib/google/src/Google/Service','Books.php',3579],['lib/google/src/Google/Service','Books.php',4429],['lib/google/src/Google/Service','Script.php',360],['lib/google/src/Google/Service','DeploymentManager.php',1116],['lib/google/src/Google/Service','DeploymentManager.php',1604],['lib/google/src/Google/Service','DeploymentManager.php',1641],['lib/google/src/Google/Service','DeploymentManager.php',1823],['lib/google/src/Google/Service','DeploymentManager.php',1860],['lib/google/src/Google/Service','Dataflow.php',2656],['lib/google/src/Google/Service','CloudUserAccounts.php',1807],['lib/google/src/Google/Service','CloudUserAccounts.php',1899],['lib/google/src/Google/Service','Replicapoolupdater.php',617],['lib/google/src/Google/Service','Replicapoolupdater.php',926],['lib/google/src/Google/Service','Replicapoolupdater.php',1018],['lib/google/src/Google/Service','Replicapoolupdater.php',1252],['lib/google/src/Google/Service','Bigquery.php',1367],['lib/google/src/Google/Service','ShoppingContent.php',4125],['lib/google/src/Google/Service','ShoppingContent.php',4527],['lib/google/src/Google/Service','ShoppingContent.php',4572],['lib/google/src/Google/Service','Genomics.php',3622],['lib/google/src/Google/Service','Reports.php',1106],['lib/google/src/Google/Service','Gmail.php',1371],['lib/google/src/Google/Service','Gmail.php',1467],['lib/google/src/Google/Service','Gmail.php',1495],['lib/google/src/Google/Service','Gmail.php',1513],['lib/google/src/Google/Service','Gmail.php',1531],['lib/google/src/Google/Service','Autoscaler.php',1079],['lib/google/src/Google/Service','Autoscaler.php',1171],['lib/google/src/Google/Service','AdExchangeSeller.php',1043],['lib/google/src/Google/Service','IdentityToolkit.php',1266],['lib/pear','PEAR.php',941],['lib/google/src/Google/Service','Storagetransfer.php',948],['lib/htmlpurifier/HTMLPurifier','Language.php',86],['lib/google/src/Google/Service','Resourceviews.php',894],['lib/google/src/Google/Service','Resourceviews.php',986],['lib/google/src/Google/Service','SQLAdmin.php',3029],['lib/google/src/Google/Service','Compute.php',8752],['lib/google/src/Google/Service','Compute.php',9200],['lib/google/src/Google/Service','Compute.php',10292],['lib/google/src/Google/Service','Compute.php',10384],['lib/google/src/Google/Service','Compute.php',10890],['lib/google/src/Google/Service','Compute.php',12525],['lib/google/src/Google/Service','Compute.php',12771],['lib/google/src/Google/Service','Compute.php',13249],['lib/google/src/Google/Service','Compute.php',13652],['lib/google/src/Google/Service','Compute.php',13804],['lib/google/src/Google/Service','Compute.php',14396],['lib/google/src/Google/Service','Compute.php',14488],['lib/google/src/Google/Service','Compute.php',14580],['lib/google/src/Google/Service','Compute.php',15235],['lib/google/src/Google/Service','Compute.php',16249],['lib/google/src/Google/Service','Compute.php',16675],['lib/google/src/Google/Service','Compute.php',17005],['lib/google/src/Google/Service','Compute.php',17723],['lib/google/src/Google/Service','Pubsub.php',711],['lib/google/src/Google/Service','Pubsub.php',748],['lib/google/src/Google/Service','Dfareporting.php',19533]], 489],
'print_error': ['print_error', 'Abort execution by throwing of a general exception, default exception handler displays the error message in most cases. ', [['lib','setuplib.php',481]], 1488],
'calendar_get_events_by_id': ['calendar_get_events_by_id', '', [['calendar','lib.php',815]], 1],
'get_weekdays': ['get_weekdays', 'Returns an indexed list of all the names of the weekdays. ', [['calendar/tests','calendartype_test_example.php',148],['calendar/type/gregorian/classes','structure.php',151]], 4],
'get_records_select': ['get_records_select', 'Load a list of records based on a select query. ', [['competency/classes','persistent.php',751],['lib/dml','moodle_database.php',1332]], 166],
'get_file_storage': ['get_file_storage', 'Returns local file storage instance ', [['lib','moodlelib.php',6144]], 546],
'properties': ['properties', '', [['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',1044],['mod/lesson','locallib.php',2069],['mod/lesson','locallib.php',2960],['calendar','lib.php',2511]], 69],
'count_records': ['count_records', 'Count a list of records. ', [['competency/classes','persistent.php',815],['mod/glossary/classes','entry_query_builder.php',152],['lib/dml','moodle_database.php',1766]], 1630],
'right_to_left': ['right_to_left', 'Returns true if the user is using a right-to-left language. ', [['lib','weblib.php',3109],['lib','javascript-static.js',1156]], 63],
'calendar_update_subscription': ['calendar_update_subscription', 'Update a calendar subscription. Also updates the associated cache. ', [['calendar','lib.php',3244]], 8],
'calendar_time_representation': ['calendar_time_representation', 'return the formatted representation time ', [['calendar','lib.php',1136]], 6],
'create_events': ['create_events', 'Create events for specified rrule. ', [['calendar/classes','rrule_manager.php',333]], 26],
'div': ['div', 'Creates a <div> tag. (Shortcut function.) ', [['lib','outputcomponents.php',1814],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',239]], 207],
'groups_get_all_groups': ['groups_get_all_groups', 'Gets array of all groups in a specified course. ', [['lib','grouplib.php',189]], 108],
'timestamp_today': ['timestamp_today', 'Gets todays timestamp for the calendar ', [['calendar','lib.php',2849]], 4],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'exists': ['exists', 'Checks whether or not the variable exists. ', [['lib/htmlpurifier/HTMLPurifier','Context.php',73],['lib/horde/framework/Horde','Variables.php',101],['admin/tool/uploadcourse/classes','course.php',252],['admin/tool/health','index.php',139],['admin/tool/health','index.php',160],['admin/tool/health','index.php',184],['admin/tool/health','index.php',208],['admin/tool/health','index.php',229],['admin/tool/health','index.php',248],['admin/tool/health','index.php',267],['admin/tool/health','index.php',313],['admin/tool/health','index.php',334],['admin/tool/health','index.php',420],['admin/tool/health','index.php',444],['admin/tool/health','index.php',481],['admin/tool/health','index.php',506],['admin/tool/health','index.php',554],['admin/tool/health','index.php',617],['admin/tool/health','index.php',707],['admin/tool/health','index.php',777],['lib/horde/framework/Horde/Imap/Client/Data','Fetch.php',468],['question/type/ddmarker','shapes.php',160]], 44],
'link_arrow_right': ['link_arrow_right', 'Return the right arrow with text (\'next\'), and optionally embedded in a link. ', [['lib','weblib.php',2185]], 3],
'get_user_timezone_object': ['get_user_timezone_object', 'Return user timezone object. ', [['lib/classes','date.php',275]], 5],
'dayofweek': ['dayofweek', 'Calculate the position in the week of a specific calendar day ', [['lib','moodlelib.php',2415],['lib/phpexcel/PHPExcel/Calculation','DateTime.php',1145]], 13],
'start_tag': ['start_tag', 'Outputs an opening tag with attributes ', [['lib','outputcomponents.php',1085],['backup/util/xml/parser','progressive_parser.class.php',215]], 701],
'optional_param': ['optional_param', 'Returns a particular value for the named variable, taken from POST or GET, otherwise returning a given default. ', [['lib','moodlelib.php',609]], 2210],
'trigger': ['trigger', '', [['lib/evalmath','evalmath.class.php',448],['lib/classes/event','base.php',765]], 964],
'settimezone': ['settimezone', '', [['lib/google/src/Google/Service','AdSense.php',2182],['lib/google/src/Google/Service','Analytics.php',8096],['lib/google/src/Google/Service','ShoppingContent.php',3941],['lib/google/src/Google/Service','IdentityToolkit.php',1704],['lib/phpunit/classes','advanced_testcase.php',557],['lib/google/src/Google/Service','Calendar.php',2140],['lib/google/src/Google/Service','Calendar.php',2368],['lib/google/src/Google/Service','Calendar.php',3204],['lib/google/src/Google/Service','Calendar.php',3548],['lib/google/src/Google/Service','Calendar.php',3677],['lib/phpexcel/PHPExcel/Shared','TimeZone.php',61]], 94],
'fake_block_threemonths': ['fake_block_threemonths', 'Produces the content for the three months block (pretend block) ', [['calendar','renderer.php',70]], 1],
'param': ['param', '', [['lib/adodb/drivers','adodb-postgres64.inc.php',609],['lib','weblib.php',453],['lib/adodb/drivers','adodb-oci8po.inc.php',39],['lib/adodb','adodb.inc.php',934],['lib/adodb/drivers','adodb-oci8.inc.php',1179],['lib/adodb/drivers','adodb-db2oci.inc.php',163]], 640],
'calendar_set_event_type_display': ['calendar_set_event_type_display', 'Sets the display of the event type given $display. ', [['calendar','lib.php',1800]], 4],
'select': ['select', '', [['lib/jquery/ui-1.11.4/external/jquery','jquery.js',2845],['lib','outputcomponents.php',1265]], 591],
'end_tag': ['end_tag', 'Outputs a closing tag ', [['lib','outputcomponents.php',1096],['backup/util/xml/parser','progressive_parser.class.php',261],['backup/util/xml','xml_writer.class.php',177]], 867],
'calendar_get_link_previous': ['calendar_get_link_previous', 'Build and return a previous month HTML link, with an arrow. ', [['calendar','lib.php',1192]], 4],
'get_description': ['get_description', 'Returns description of what happened. ', [['lib/classes/event','competency_plan_unlinked.php',63],['lib/classes/message/inbound','private_files_handler.php',47],['lib/classes/event','grouping_group_assigned.php',38],['lib/classes/event','enrol_instance_deleted.php',60],['report/log/classes/event','user_report_viewed.php',63],['mod/quiz/classes/event','attempt_reviewed.php',62],['lib/classes/event','tag_unflagged.php',64],['lib/classes/event','role_unassigned.php',62],['mod/assign/classes/event','grading_form_viewed.php',91],['mod/workshop/classes/event','submission_deleted.php',53],['mod/forum/classes/event','discussion_updated.php',55],['lib/classes/event','course_module_instance_list_viewed.php',65],['lib/classes/event','course_created.php',64],['mod/assign/classes/event','extension_granted.php',67],['lib/classes/event','course_deleted.php',65],['mod/forum/classes/event','readtracking_enabled.php',54],['mod/wiki/classes/event','page_created.php',57],['lib/classes/event','competency_viewed.php',61],['mod/choice/classes/event','answer_updated.php',46],['lib/classes/event','search_indexed.php',56],['lib/classes/event','badge_criteria_updated.php',62],['mod/wiki/classes/event','page_version_deleted.php',63],['lib/grade','grade_item.php',1415],['lib/classes/event','competency_user_competency_rated_in_plan.php',77],['lib/classes/event','webservice_token_sent.php',38],['mod/glossary/classes/event','entry_deleted.php',63],['admin/tool/messageinbound/classes/message/inbound','invalid_recipient_handler.php',51],['lib/classes/event','competency_template_viewed.php',72],['admin/tool/langimport/classes/event','langpack_removed.php',71],['mod/glossary/classes/event','category_deleted.php',55],['mod/forum/classes/message/inbound','reply_handler.php',42],['mod/lti/classes/event','unknown_service_api_called.php',73],['lib/classes/event','badge_deleted.php',58],['mod/quiz/classes/event','user_override_updated.php',63],['lib/classes/event','message_contact_added.php',66],['lib/classes/event','cohort_member_added.php',58],['lib/classes/event','blog_entry_updated.php',83],['mod/assign/classes/event','workflow_state_updated.php',78],['mod/forum/classes/event','assessable_uploaded.php',46],['lib/classes/event','group_deleted.php',38],['lib/classes/event','role_allow_assign_updated.php',56],['lib/simplepie/library','SimplePie.php',2407],['mod/lesson/classes/event','highscore_added.php',77],['mod/forum/classes/event','discussion_pinned.php',46],['lib/classes/event','webservice_function_called.php',49],['lib/classes/event','competency_plan_reopened.php',66],['mod/lesson/classes/event','essay_attempt_viewed.php',67],['mod/wiki/classes/event','page_locks_deleted.php',63],['mod/glossary/classes/event','comment_created.php',46],['lib/classes/event','webservice_service_deleted.php',38],['mod/forum/classes/event','discussion_subscription_created.php',56],['admin/tool/log/store/database/tests/fixtures','event.php',35],['mod/workshop/classes/event','assessable_uploaded.php',46],['lib/classes/event','user_loggedout.php',63],['lib/classes/event','webservice_token_created.php',44],['lib/classes/event','tag_collection_updated.php',74],['mod/data/classes/event','field_deleted.php',66],['mod/book/classes/event','chapter_created.php',59],['lib/classes/event','email_failed.php',65],['mod/survey/classes/event','report_downloaded.php',64],['mod/workshop/classes/event','phase_switched.php',55],['competency/classes','evidence.php',126],['lib/grade','grade_category.php',2317],['lib/grade','grade_scale.php',319],['lib/classes/event','course_reset_started.php',44],['mod/workshop/classes/event','assessment_evaluated.php',56],['lib/classes/event','blog_association_created.php',65],['report/outline/classes/event','activity_report_viewed.php',57],['lib/classes/event','competency_plan_updated.php',66],['mod/choice/classes/event','answer_submitted.php',46],['lib/simplepie/library/SimplePie','Source.php',459],['mod/lesson/classes/event','lesson_ended.php',67],['lib/classes/event','role_allow_switch_updated.php',56],['availability/condition/grouping/classes','condition.php',124],['lib/classes/event','competency_user_competency_rated_in_course.php',77],['availability/tests/fixtures','mock_condition.php',82],['lib/classes/event','competency_comment_deleted.php',40],['lib/classes/event','tag_created.php',84],['report/participation/classes/event','report_viewed.php',67],['lib/classes/event','role_capabilities_updated.php',60],['mod/survey/classes/event','response_submitted.php',62],['lib/classes/event','badge_archived.php',56],['mod/workshop/classes/event','assessment_reevaluated.php',56],['mod/assign/classes/event','submission_locked.php',68],['report/outline/classes/event','report_viewed.php',63],['lib/classes/event','user_deleted.php',66],['lib/classes/event','mnet_access_control_updated.php',75],['mod/lesson/classes/event','essay_assessed.php',57],['mod/book/tool/print/classes/event','book_printed.php',57],['lib/classes/event','grouping_deleted.php',45],['admin/tool/monitor/classes','rule.php',249],['lib/classes/event','course_viewed.php',56],['mod/forum/classes/event','user_report_viewed.php',55],['mod/quiz/classes/event','attempt_summary_viewed.php',65],['lib/classes/event','webservice_service_user_added.php',38],['mod/forum/classes/event','discussion_unpinned.php',46],['lib/classes/event','grouping_group_unassigned.php',38],['lib/grade','grade_outcome.php',291],['mod/assign/submission/file/classes/event','submission_updated.php',53],['mod/chat/classes/event','message_sent.php',38],['lib/classes/event','role_assigned.php',65],['availability/condition/group/classes','condition.php',93],['mod/glossary/classes/event','entry_viewed.php',57],['mod/data/classes/event','record_created.php',65],['lib/classes/event','course_category_deleted.php',68],['lib/classes/event','role_deleted.php',64],['mod/wiki/classes/event','page_version_viewed.php',63],['admin/tool/recyclebin/classes/event','category_bin_item_deleted.php',56],['admin/tool/log/store/standard/tests/fixtures','event.php',35],['admin/tool/monitor/classes/event','rule_created.php',59],['lib/classes/event','competency_user_competency_plan_viewed.php',72],['mod/data/classes/event','comment_deleted.php',46],['mod/workshop/classes/event','submission_updated.php',53],['mod/choice/classes/event','report_viewed.php',62],['mod/lesson/classes/event','group_override_deleted.php',63],['mod/wiki/classes/event','page_map_viewed.php',63],['admin/tool/log/store/legacy/tests/fixtures','event.php',35],['mod/lesson/classes/event','question_answered.php',72],['mod/choice/classes/event','report_downloaded.php',63],['lib/classes/event','competency_user_evidence_created.php',73],['lib/classes/event','course_module_completion_updated.php',63],['lib/classes/event','note_updated.php',65],['lib/classes/event','note_created.php',65],['lib/classes/event','competency_framework_created.php',72],['lib/classes/event','course_resources_list_viewed.php',51],['lib/classes/event','tag_updated.php',67],['mod/forum/classes/event','subscribers_viewed.php',55],['mod/book/tool/exportimscp/classes/event','book_exported.php',57],['lib/classes/event','user_enrolment_deleted.php',63],['admin/tool/recyclebin/classes/event','course_bin_item_restored.php',56],['lib/classes/event','webservice_service_updated.php',38],['mod/lesson/classes/event','group_override_created.php',64],['mod/scorm/classes/event','attempt_deleted.php',52],['lib/classes/event','competency_user_competency_review_request_cancelled.php',63],['lib/classes/event','webservice_service_created.php',44],['mod/wiki/classes/event','page_version_restored.php',63],['mod/forum/classes/event','discussion_deleted.php',56],['lib/classes/event','competency_framework_updated.php',64],['lib/classes/event','blog_comment_created.php',47],['mod/lesson/classes/event','lesson_restarted.php',66],['mod/wiki/classes/event','page_updated.php',63],['mod/assign/classes/event','marker_updated.php',79],['mod/assign/submission/comments/classes/event','comment_created.php',46],['lib/classes/event','course_module_updated.php',66],['lib/classes/event','competency_template_deleted.php',64],['mod/assign/classes/event','submission_confirmation_form_viewed.php',88],['report/questioninstances/classes/event','report_viewed.php',64],['lib/classes/event','message_contact_blocked.php',66],['lib/simplepie/library/SimplePie','Enclosure.php',434],['lib/classes/event','competency_template_updated.php',66],['lib/classes/event','badge_disabled.php',56],['mod/assign/classes/event','grading_table_viewed.php',88],['lib/classes/event','badge_enabled.php',56],['mod/quiz/classes/event','edit_page_viewed.php',62],['mod/scorm/classes/event','tracks_viewed.php',54],['mod/wiki/classes/event','page_diff_viewed.php',64],['message/tests/fixtures','inbound_fixtures.php',35],['lib/classes/event','grouping_created.php',38],['mod/assign/submission/onlinetext/classes/event','submission_created.php',53],['lib/classes/event','calendar_event_deleted.php',67],['lib/simplepie/library/SimplePie','Item.php',308],['lib/classes/event','group_updated.php',38],['mod/book/classes/event','chapter_updated.php',59],['lib/classes/event','grade_deleted.php',103],['admin/tool/recyclebin/classes/event','course_bin_item_created.php',56],['lib/classes/event','user_loggedin.php',45],['mod/forum/classes/event','subscription_created.php',55],['lib/classes/event','tag_collection_created.php',74],['mod/assign/classes/event','batch_set_marker_allocation_viewed.php',88],['mod/quiz/classes/event','group_override_updated.php',63],['lib/classes/event','competency_plan_created.php',72],['mod/glossary/classes/event','entry_disapproved.php',55],['lib/classes/event','message_viewed.php',72],['lib/classes/event','comment_created.php',67],['lib/classes/event','course_content_deleted.php',63],['mod/feedback/classes/event','response_deleted.php',92],['lib/classes/event','competency_evidence_created.php',107],['lib/classes/event','comment_deleted.php',67],['lib/classes/event','competency_user_competency_review_requested.php',63],['mod/quiz/classes/event','attempt_abandoned.php',53],['mod/scorm/classes/event','user_report_viewed.php',53],['mod/quiz/classes/event','attempt_becameoverdue.php',56],['mod/quiz/classes/event','group_override_created.php',64],['mod/book/tool/print/classes/event','chapter_printed.php',59],['mod/data/classes/event','record_deleted.php',65],['lib/classes/event','competency_user_competency_viewed.php',72],['lib/classes/event','dashboard_viewed.php',50],['mod/lesson/classes/event','question_viewed.php',72],['lib/classes/event','user_profile_viewed.php',65],['mod/lesson/classes/event','user_override_deleted.php',62],['lib/classes/event','cohort_member_removed.php',59],['mod/lesson/classes/event','lesson_started.php',66],['mod/lesson/classes/event','page_updated.php',91],['mod/workshop/classes/event','submission_viewed.php',53],['lib/classes/event','competency_deleted.php',78],['admin/tool/monitor/classes','subscription.php',142],['mod/glossary/classes/event','entry_created.php',61],['lib/classes/event','dashboard_reset.php',51],['mod/wiki/classes/event','page_history_viewed.php',57],['lib/classes/event','competency_plan_review_request_cancelled.php',66],['lib/classes/event','competency_plan_deleted.php',64],['mod/quiz/classes/event','attempt_viewed.php',63],['mod/data/classes/event','field_updated.php',66],['lib/classes/event','grouping_updated.php',38],['lib/classes/event','question_category_created.php',57],['lib/classes/event','user_login_failed.php',65],['mod/scorm/classes/event','report_viewed.php',53],['mod/chat/classes/event','sessions_viewed.php',45],['admin/tool/recyclebin/classes/event','course_bin_item_deleted.php',56],['mod/quiz/classes/event','user_override_deleted.php',62],['mod/quiz/classes/event','attempt_submitted.php',53],['mod/lesson/classes/event','group_override_updated.php',63],['mod/workshop/classes/event','submission_created.php',53],['mod/assign/submission/onlinetext/classes/event','assessable_uploaded.php',45],['lib/classes/event','competency_updated.php',61],['lib/classes/event','note_deleted.php',65],['mod/lesson/classes/event','page_moved.php',74],['lib/classes/event','course_completed.php',82],['lib/classes/event','tag_added.php',67],['lib/classes/event','competency_created.php',61],['mod/lesson/classes/event','highscores_viewed.php',69],['lib/classes/event','message_contact_unblocked.php',66],['mod/wiki/classes/event','comment_deleted.php',47],['lib/classes/event','user_enrolment_created.php',62],['lib/classes/event','course_module_created.php',95],['lib/classes/event','webservice_service_user_removed.php',38],['report/log/classes/event','report_viewed.php',67],['mod/assign/submission/file/classes/event','assessable_uploaded.php',46],['lib/classes/event','group_member_added.php',45],['mod/forum/classes/event','discussion_viewed.php',50],['mod/assign/classes/event','submission_viewed.php',85],['mod/workshop/classes/event','submission_reassessed.php',57],['lib/tests','messageinbound_test.php',168],['mod/workshop/classes/event','assessment_evaluations_reset.php',55],['mod/assign/classes/event','statement_accepted.php',67],['mod/assign/classes/event','feedback_viewed.php',85],['mod/forum/classes/event','discussion_moved.php',56],['lib/classes/event','competency_user_evidence_deleted.php',73],['mod/assign/classes/event','batch_set_workflow_state_viewed.php',88],['mod/lesson/classes/event','lesson_resumed.php',66],['lib/classes/event','comments_viewed.php',60],['mod/data/classes/event','template_viewed.php',64],['mod/wiki/classes/event','page_deleted.php',63],['mod/quiz/classes/event','report_viewed.php',65],['availability/condition/completion/classes','condition.php',154],['mod/scorm/classes/event','sco_launched.php',54],['mod/glossary/classes/event','entry_updated.php',61],['mod/lesson/classes/event','user_override_created.php',62],['mod/glossary/classes/event','category_updated.php',55],['lib/classes/event','course_updated.php',67],['mod/feedback/classes/event','response_submitted.php',92],['lib/classes/event','blog_entry_deleted.php',84],['mod/book/classes/event','chapter_deleted.php',59],['mod/wiki/classes/event','comment_created.php',47],['report/completion/classes/event','report_viewed.php',58],['lib/classes/event','recent_activity_viewed.php',58],['mod/quiz/classes/event','question_manually_graded.php',64],['blocks/rss_client/classes/output','item.php',215],['mod/assign/classes/event','submission_status_updated.php',69],['lib/classes/event','user_enrolment_updated.php',62],['lib/classes/event','competency_comment_created.php',40],['lib/classes/event','tag_deleted.php',64],['report/completion/classes/event','user_report_viewed.php',58],['report/stats/classes/event','report_viewed.php',65],['lib/classes/event','calendar_event_created.php',67],['mod/assign/classes/event','submission_duplicated.php',67],['lib/classes/event','competency_framework_deleted.php',64],['lib/classes/event','course_section_updated.php',65],['lib/classes/event','message_sent.php',100],['lib/classes/event','calendar_subscription_deleted.php',65],['availability/condition/date/classes','condition.php',136],['lib/classes/event','course_category_updated.php',69],['lib/classes/event','user_password_updated.php',79],['mod/forum/classes/event','subscription_deleted.php',55],['mod/assign/classes/event','reveal_identities_confirmation_page_viewed.php',88],['lib/classes/event','user_loggedinas.php',66],['lib/classes/event','competency_template_created.php',72],['lib/classes/event','user_created.php',57],['admin/tool/recyclebin/classes/event','category_bin_item_restored.php',56],['report/loglive/classes/event','report_viewed.php',57],['admin/tool/monitor/classes/event','subscription_created.php',59],['mod/book/classes/event','chapter_viewed.php',59],['lib/classes/event','badge_awarded.php',63],['lib/classes/event','calendar_subscription_created.php',66],['lib/classes/event','enrol_instance_created.php',59],['availability/condition/profile/classes','condition.php',187],['lib/classes/event','user_list_viewed.php',65],['lib','authlib.php',540],['mod/forum/classes/event','post_deleted.php',57],['mod/quiz/classes/event','group_override_deleted.php',63],['mod/assign/submission/comments/classes/event','comment_deleted.php',46],['lib/classes/event','badge_created.php',56],['lib/classes/event','base.php',308],['lib/classes/event','competency_framework_viewed.php',60],['lib/classes/event','tag_collection_deleted.php',74],['lib/classes/event','group_member_removed.php',38],['lib/classes/event','grade_report_viewed.php',63],['lib/classes/event','calendar_event_updated.php',67],['lib/classes/event','user_updated.php',57],['mod/lesson/classes/event','page_created.php',72],['mod/assign/classes/event','submission_form_viewed.php',91],['lib/classes/event','blog_comment_deleted.php',47],['lib/classes/event','course_completion_updated.php',56],['lib/classes/event','competency_plan_review_started.php',66],['lib/classes/event','course_user_report_viewed.php',56],['mod/folder/classes/event','all_files_downloaded.php',50],['mod/workshop/classes/event','assessments_reset.php',54],['mod/glossary/classes/event','comment_deleted.php',46],['mod/data/classes/event','template_updated.php',65],['mod/assign/classes/event','identities_revealed.php',65],['admin/tool/log/store/legacy/classes/event','legacy_logged.php',39],['lib/classes/event','notes_viewed.php',58],['admin/tool/recyclebin/classes/event','category_bin_item_created.php',56],['lib/classes/event','competency_plan_viewed.php',72],['mod/data/classes/event','record_updated.php',65],['lib/classes/event','competency_plan_unapproved.php',66],['mod/lesson/classes/event','content_page_viewed.php',66],['admin/tool/monitor/classes/event','subscription_deleted.php',59],['mod/assign/classes/event','assessable_submitted.php',74],['mod/quiz/classes/event','attempt_started.php',52],['lib/classes/event','competency_user_competency_rated.php',72],['mod/forum/classes/event','post_updated.php',57],['lib/classes/event','course_module_deleted.php',65],['lib/classes/event','competency_plan_review_requested.php',66],['lib/classes/event','user_graded.php',105],['lib/classes/event','webservice_login_failed.php',53],['mod/forum/classes/event','post_created.php',57],['availability/condition/grade/classes','condition.php',123],['mod/assign/classes/event','submission_status_viewed.php',90],['mod/scorm/classes/event','cmielement_submitted.php',55],['lib/classes/event','enrol_instance_updated.php',60],['admin/tool/capability/classes/event','report_viewed.php',56],['mod/data/classes/event','field_created.php',67],['mod/folder/classes/event','folder_updated.php',57],['lib/classes/event','badge_updated.php',56],['lib/tests/fixtures','event_fixtures.php',38],['lib/tests/fixtures','event_fixtures.php',263],['mod/survey/classes/event','report_viewed.php',64],['mod/quiz/classes/event','attempt_deleted.php',62],['mod/glossary/classes/event','entry_approved.php',55],['mod/wiki/classes/event','comments_viewed.php',48],['mod/wiki/classes/event','page_viewed.php',66],['lib/classes/log','reader.php',39],['mod/assign/submission/onlinetext/classes/event','submission_updated.php',53],['mod/forum/classes/event','readtracking_disabled.php',54],['mod/assign/submission/file/classes/event','submission_created.php',53],['admin/tool/langimport/classes/event','langpack_imported.php',71],['lib/classes/event','competency_plan_review_stopped.php',66],['admin/tool/langimport/classes/event','langpack_updated.php',71],['lib/classes/event','unknown_logged.php',47],['lib/classes/event','competency_user_competency_viewed_in_plan.php',75],['lib/classes/event','competency_user_competency_viewed_in_course.php',74],['mod/glossary/classes/event','category_created.php',55],['calendar','lib.php',2151],['report/stats/classes/event','user_report_viewed.php',57],['lib/classes/event','dashboards_reset.php',50],['lib/classes/event','calendar_subscription_updated.php',66],['lib/classes/event','cohort_updated.php',58],['admin/tool/monitor/classes/event','rule_updated.php',59],['mod/lesson/classes/event','page_deleted.php',72],['lib/classes/event','course_section_deleted.php',66],['admin/tool/monitor/classes/event','subscription_criteria_met.php',64],['lib/classes/event','mnet_access_control_created.php',75],['mod/forum/classes/event','discussion_created.php',55],['lib/classes/event','blog_entries_viewed.php',71],['mod/quiz/classes/event','attempt_preview_started.php',63],['lib/classes/event','content_viewed.php',89],['lib/classes/event','competency_user_evidence_updated.php',73],['mod/assign/classes/event','submission_graded.php',68],['mod/assign/classes/event','all_submissions_downloaded.php',65],['lib/classes/event','course_restored.php',67],['mod/data/classes/event','comment_created.php',46],['lib/classes/event','group_created.php',38],['lib/classes/event','badge_criteria_deleted.php',61],['lib/classes/event','tag_flagged.php',64],['lib/classes/event','competency_plan_completed.php',66],['mod/lesson/classes/event','user_override_updated.php',63],['lib/classes/event','role_allow_override_updated.php',56],['mod/forum/classes/event','discussion_subscription_deleted.php',56],['lib/classes/event','cohort_deleted.php',58],['lib/classes/event','badge_criteria_created.php',61],['admin/tool/log/classes/helper','reader.php',53],['lib/classes/event','blog_entry_created.php',85],['mod/scorm/classes/event','interactions_viewed.php',53],['mod/workshop/classes/event','submission_assessed.php',56],['lib/classes/event','badge_duplicated.php',56],['lib/classes/event','course_category_created.php',66],['lib/classes/event','cohort_created.php',58],['lib/classes/event','tag_removed.php',67],['lib/classes/event','competency_plan_approved.php',66],['mod/choice/classes/event','answer_deleted.php',46],['lib/classes/event','competency_user_competency_review_started.php',63],['lib/classes/event','course_reset_ended.php',44],['mod/quiz/classes/event','user_override_created.php',62],['mod/forum/classes/event','course_searched.php',55],['lib/classes/event','message_contact_removed.php',66],['admin/tool/monitor/classes/event','rule_deleted.php',59],['lib/classes/event','message_deleted.php',100],['mod/assign/classes/event','submission_unlocked.php',68],['lib/classes/event','competency_user_competency_review_stopped.php',63],['lib/classes/event','course_module_viewed.php',52]], 93],
'calendar_get_block_upcoming': ['calendar_get_block_upcoming', 'Get the upcoming event block ', [['calendar','lib.php',1256]], 1],
'create': ['create', 'Auto-scan an incoming line to determine the response type. ', [['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',65],['lib/google/src/Google/Service','Partners.php',492],['lib/simplepie/library/SimplePie','Cache.php',95],['lib/google/src/Google/Service','YouTubeReporting.php',237],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',81],['lib/google/src/Google/Service','MapsEngine.php',1677],['lib/google/src/Google/Service','MapsEngine.php',1977],['lib/google/src/Google/Service','MapsEngine.php',2253],['lib/google/src/Google/Service','MapsEngine.php',2330],['lib/google/src/Google/Service','MapsEngine.php',2898],['lib/spout/src/Spout/Writer','WriterFactory.php',18],['lib/google/src/Google/Service','Dns.php',290],['lib/google/src/Google/Service','Dns.php',363],['lib/google/src/Google/Service','Appengine.php',438],['tag/classes','collection.php',188],['lib/adodb','adodb-xmlschema.inc.php',152],['lib/adodb','adodb-xmlschema.inc.php',473],['lib/adodb','adodb-xmlschema.inc.php',738],['lib/adodb','adodb-xmlschema.inc.php',884],['lib/adodb','adodb-xmlschema.inc.php',1129],['mod/quiz','attemptlib.php',100],['mod/quiz','attemptlib.php',596],['lib','weblib.php',3206],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',58],['lib/google/src/Google/Service','Dataflow.php',273],['lib/simplepie/library/SimplePie','Registry.php',153],['competency/classes','persistent.php',387],['lib/google/src/Google/Service','Cloudresourcemanager.php',373],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',270],['lib/google/src/Google/Service','TagManager.php',1007],['lib/google/src/Google/Service','TagManager.php',1097],['lib/google/src/Google/Service','TagManager.php',1249],['lib/google/src/Google/Service','TagManager.php',1342],['lib/google/src/Google/Service','TagManager.php',1436],['lib/google/src/Google/Service','TagManager.php',1530],['lib/google/src/Google/Service','TagManager.php',1681],['mod/lesson','locallib.php',1011],['mod/lesson','locallib.php',2163],['mod/lesson','locallib.php',3212],['lib','modinfolib.php',1732],['repository','lib.php',206],['repository','lib.php',1910],['lib','navigationlib.php',268],['lib/htmlpurifier/HTMLPurifier','Config.php',114],['lib/google/src/Google/Service','Container.php',284],['lib/google/src/Google/Service','Genomics.php',632],['lib/google/src/Google/Service','Genomics.php',721],['lib/google/src/Google/Service','Genomics.php',1312],['lib/google/src/Google/Service','Genomics.php',1427],['lib/google/src/Google/Service','Games.php',1649],['lib/google/src/Google/Service','Games.php',2013],['lib/google/src/Google/Service','Fitness.php',377],['lib/google/src/Google/Service','Gmail.php',747],['lib/google/src/Google/Service','Gmail.php',905],['mod/quiz/classes','structure.php',65],['lib/htmlpurifier/HTMLPurifier','ElementDef.php',135],['lib/adodb','adodb-xmlschema03.inc.php',170],['lib/adodb','adodb-xmlschema03.inc.php',514],['lib/adodb','adodb-xmlschema03.inc.php',779],['lib/adodb','adodb-xmlschema03.inc.php',930],['lib/adodb','adodb-xmlschema03.inc.php',1228],['lib/google/src/Google/Service','Proximitybeacon.php',500],['tag/classes','area.php',205],['course','lib.php',3003],['question/type/ddmarker','shapes.php',170],['lib/classes/event','base.php',149],['lib','coursecatlib.php',325],['repository/filesystem','lib.php',498],['lib/google/src/Google/Service','Storagetransfer.php',281],['calendar','lib.php',2686],['lib/htmlpurifier/HTMLPurifier','Lexer.php',53],['lib/google/src/Google/Service','Classroom.php',445],['lib/google/src/Google/Service','Classroom.php',596],['lib/google/src/Google/Service','Classroom.php',673],['lib/google/src/Google/Service','Classroom.php',783],['lib/google/src/Google/Service','Classroom.php',912],['lib/spout/src/Spout/Reader','ReaderFactory.php',18],['lib/google/src/Google/Service','Pubsub.php',220],['lib/google/src/Google/Service','Pubsub.php',365],['lib/google/src/Google/Service','CloudMonitoring.php',258]], 3276],
'get_user_preferences': ['get_user_preferences', 'Used to fetch user preference(s) ', [['lib','moodlelib.php',1974],['user','externallib.php',1381]], 188],
'add_sidecalendar_blocks': ['add_sidecalendar_blocks', 'Adds the pretend blocks for the calendar ', [['calendar','lib.php',2865]], 3],
'get': ['get', 'Retrieves a variable reference from the context. ', [['lib/htmlpurifier/HTMLPurifier','Context.php',36],['cache/stores/static','lib.php',220],['cache','disabledlib.php',55],['search/classes','document.php',299],['lib/lessphp','Cache.php',27],['lib/google/src/Google/Service','DataTransfer.php',162],['lib/google/src/Google/Service','DataTransfer.php',208],['lib/minify/lib','JSMinPlus.php',1827],['lib/google/src/Google/Service','AdSense.php',1076],['lib/google/src/Google/Service','AdSense.php',1155],['lib/google/src/Google/Service','AdSense.php',1303],['lib/google/src/Google/Service','AdSense.php',1519],['lib/google/src/Google/Service','AdSense.php',1631],['lib/google/src/Google/Service','AdSense.php',1773],['lib/google/src/Google/Service','AdSense.php',2047],['lib/google/src/Google/Service','Replicapool.php',420],['lib/google/src/Google/Service','Replicapool.php',575],['lib/google/src/Google/Service','Tasks.php',323],['lib/google/src/Google/Service','Tasks.php',442],['lib/google/src/Google/Service','Partners.php',362],['lib/google/src/Google/Service','AndroidPublisher.php',1247],['lib/google/src/Google/Service','AndroidPublisher.php',1349],['lib/google/src/Google/Service','AndroidPublisher.php',1510],['lib/google/src/Google/Service','AndroidPublisher.php',1573],['lib/google/src/Google/Service','AndroidPublisher.php',1796],['lib/google/src/Google/Service','AndroidPublisher.php',1884],['lib/google/src/Google/Service','AndroidPublisher.php',1948],['lib/google/src/Google/Service','AndroidPublisher.php',2098],['lib/google/src/Google/Service','AndroidPublisher.php',2223],['lib/google/src/Google/Service','AndroidPublisher.php',2293],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',146],['lib/google/src/Google/Service','YouTubeReporting.php',273],['lib/google/src/Google/Service','YouTubeReporting.php',326],['lib/google/src/Google/Service','Reseller.php',295],['lib/google/src/Google/Service','Reseller.php',458],['lib/google/src/Google/Cache','Memcache.php',74],['lib','filelib.php',3382],['lib','filelib.php',3630],['lib/google/src/Google/Service','Computeaccounts.php',432],['lib/google/src/Google/Service','Computeaccounts.php',512],['lib/google/src/Google/Service','Computeaccounts.php',683],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',64],['lib/google/src/Google/Service','MapsEngine.php',1530],['lib/google/src/Google/Service','MapsEngine.php',1709],['lib/google/src/Google/Service','MapsEngine.php',2006],['lib/google/src/Google/Service','MapsEngine.php',2268],['lib/google/src/Google/Service','MapsEngine.php',2360],['lib/google/src/Google/Service','MapsEngine.php',2666],['lib/google/src/Google/Service','MapsEngine.php',2927],['lib/google/src/Google/Service','MapsEngine.php',3118],['lib/google/src/Google/Cache','File.php',47],['cache/classes','dummystore.php',141],['lib/google/src/Google/Service','Dns.php',307],['lib/google/src/Google/Service','Dns.php',393],['lib/google/src/Google/Service','Dns.php',444],['cache/classes','loaders.php',278],['cache/classes','loaders.php',1422],['cache/classes','loaders.php',1731],['lib/google/src/Google/Service','Appengine.php',320],['lib/google/src/Google/Service','Appengine.php',368],['lib/google/src/Google/Service','Appengine.php',472],['lib/google/src/Google/Service','Appengine.php',525],['lib/google/src/Google/Service','Urlshortener.php',109],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',74],['lib/google/src/Google/Service','AdExchangeBuyer.php',759],['lib/google/src/Google/Service','AdExchangeBuyer.php',829],['lib/google/src/Google/Service','AdExchangeBuyer.php',870],['lib/google/src/Google/Service','AdExchangeBuyer.php',952],['lib/google/src/Google/Service','AdExchangeBuyer.php',1041],['lib/google/src/Google/Service','AdExchangeBuyer.php',1111],['lib/google/src/Google/Service','AdExchangeBuyer.php',1251],['lib/google/src/Google/Service','AdExchangeBuyer.php',1293],['lib/google/src/Google/Service','AdExchangeBuyer.php',1417],['lib/google/src/Google/Service','AdExchangeBuyer.php',1471],['lib/google/src/Google/Service','AdExchangeBuyer.php',1576],['lib/google/src/Google/Service','Books.php',1456],['lib/google/src/Google/Service','Books.php',1625],['lib/google/src/Google/Service','Books.php',1677],['lib/google/src/Google/Service','Books.php',1752],['lib/google/src/Google/Service','Books.php',2086],['lib/google/src/Google/Service','Books.php',2205],['lib/google/src/Google/Service','Books.php',2262],['lib/google/src/Google/Service','Books.php',2345],['lib/google/src/Google/Service','Books.php',2418],['lib/google/src/Google/Service','Books.php',2450],['lib/google/src/Google/Service','Oauth2.php',165],['lib/google/src/Google/Service','Oauth2.php',202],['lib/google/src/Google/Service','Analytics.php',1988],['lib/google/src/Google/Service','Analytics.php',2037],['lib/google/src/Google/Service','Analytics.php',2084],['lib/google/src/Google/Service','Analytics.php',2308],['lib/google/src/Google/Service','Analytics.php',2422],['lib/google/src/Google/Service','Analytics.php',2550],['lib/google/src/Google/Service','Analytics.php',2670],['lib/google/src/Google/Service','Analytics.php',2763],['lib/google/src/Google/Service','Analytics.php',2889],['lib/google/src/Google/Service','Analytics.php',3108],['lib/google/src/Google/Service','Analytics.php',3245],['lib/google/src/Google/Service','Analytics.php',3336],['lib/google/src/Google/Service','Analytics.php',3422],['lib/google/src/Google/Service','Analytics.php',3533],['lib/google/src/Google/Service','Coordinate.php',509],['lib/google/src/Google/Service','Coordinate.php',689],['lib','oauthlib.php',302],['lib/horde/framework/Horde/Support','ConsistentHash.php',69],['lib/google/src/Google/Service','DeploymentManager.php',468],['lib/google/src/Google/Service','DeploymentManager.php',632],['lib/google/src/Google/Service','DeploymentManager.php',693],['lib/google/src/Google/Service','DeploymentManager.php',752],['lib/google/src/Google/Service','Blogger.php',945],['lib/google/src/Google/Service','Blogger.php',976],['lib/google/src/Google/Service','Blogger.php',1080],['lib/google/src/Google/Service','Blogger.php',1199],['lib/google/src/Google/Service','Blogger.php',1241],['lib/google/src/Google/Service','Blogger.php',1382],['lib/google/src/Google/Service','Blogger.php',1465],['lib/google/src/Google/Service','Blogger.php',1686],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',981],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',16595],['question/engine','states.php',116],['lib/google/src/Google/Service','Dataflow.php',292],['lib/horde/framework/Horde','Variables.php',135],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',58],['competency/classes','persistent.php',86],['lib/google/src/Google/Service','CloudUserAccounts.php',542],['lib/google/src/Google/Service','CloudUserAccounts.php',643],['lib/google/src/Google/Service','CloudUserAccounts.php',908],['lib/google/src/Google/Service','Cloudresourcemanager.php',248],['lib/google/src/Google/Service','Cloudresourcemanager.php',427],['lib/editor/tinymce/classes','plugin.php',447],['lib/simplepie/library/SimplePie/Parse','Date.php',567],['lib/google/src/Google/Service','TagManager.php',950],['lib/google/src/Google/Service','TagManager.php',1036],['lib/google/src/Google/Service','TagManager.php',1128],['lib/google/src/Google/Service','TagManager.php',1280],['lib/google/src/Google/Service','TagManager.php',1373],['lib/google/src/Google/Service','TagManager.php',1467],['lib/google/src/Google/Service','TagManager.php',1561],['lib/google/src/Google/Service','TagManager.php',1711],['mod/lesson','locallib.php',3248],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',163],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',34],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',68],['lib/google/src/Google/Service','Replicapoolupdater.php',338],['lib/google/src/Google/Service','Replicapoolupdater.php',489],['lib/google/src/Google/Service','Bigquery.php',552],['lib/google/src/Google/Service','Bigquery.php',668],['lib/google/src/Google/Service','Bigquery.php',879],['lib/google/src/Google/Service','ShoppingContent.php',1066],['lib/google/src/Google/Service','ShoppingContent.php',1183],['lib/google/src/Google/Service','ShoppingContent.php',1283],['lib/google/src/Google/Service','ShoppingContent.php',1346],['lib/google/src/Google/Service','ShoppingContent.php',1464],['lib/google/src/Google/Service','ShoppingContent.php',1578],['lib/google/src/Google/Service','ShoppingContent.php',1773],['lib/google/src/Google/Service','ShoppingContent.php',1986],['lib/google/src/Google/Service','ShoppingContent.php',2063],['lib/google/src/Google/Service','Webmasters.php',371],['lib/google/src/Google/Service','Webmasters.php',464],['lib/google/src/Google/Service','Webmasters.php',540],['lib','navigationlib.php',384],['lib','navigationlib.php',836],['lib','navigationlib.php',2704],['lib','navigationlib.php',3139],['lib/google/src/Google/Service','Clouddebugger.php',399],['lib/htmlpurifier/HTMLPurifier','Config.php',161],['lib/portfolio','exporter.php',134],['lib/google/src/Google/Service','Container.php',329],['lib/google/src/Google/Service','Container.php',396],['backup/cc/cc_lib/gral_lib','cssparser.php',147],['lib/horde/framework/Horde/Support','Array.php',30],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',46],['lib/google/src/Google/Service','Storage.php',1059],['lib/google/src/Google/Service','Storage.php',1175],['lib/google/src/Google/Service','Storage.php',1349],['lib/google/src/Google/Service','Storage.php',1476],['lib/google/src/Google/Service','Storage.php',1709],['cache/stores/memcache','lib.php',312],['lib/google/src/Google/Service','Genomics.php',660],['lib/google/src/Google/Service','Genomics.php',749],['lib/google/src/Google/Service','Genomics.php',918],['lib/google/src/Google/Service','Genomics.php',1007],['lib/google/src/Google/Service','Genomics.php',1185],['lib/google/src/Google/Service','Genomics.php',1268],['lib/google/src/Google/Service','Genomics.php',1340],['lib/google/src/Google/Service','Genomics.php',1475],['lib/google/src/Google/Service','Games.php',1220],['lib/google/src/Google/Service','Games.php',1339],['lib/google/src/Google/Service','Games.php',1441],['lib/google/src/Google/Service','Games.php',1699],['lib/google/src/Google/Service','Games.php',1806],['lib/google/src/Google/Service','Games.php',1948],['lib/google/src/Google/Service','Games.php',2082],['lib/google/src/Google/Service','Licensing.php',239],['lib/google/src/Google/Service','Fitness.php',417],['lib/google/src/Google/Service','Fitness.php',543],['lib/google/src/Google/Service','Reports.php',375],['lib/google/src/Google/Service','Reports.php',409],['lib/google/src/Google/Service','Gmail.php',779],['lib/google/src/Google/Service','Gmail.php',937],['lib/google/src/Google/Service','Gmail.php',1030],['lib/google/src/Google/Service','Gmail.php',1206],['lib/google/src/Google/Service','Gmail.php',1250],['lib/google/src/Google/Service','Taskqueue.php',264],['lib/google/src/Google/Service','Taskqueue.php',308],['lib/mustache/src/Mustache','HelperCollection.php',81],['cache/classes','interfaces.php',41],['lib/google/src/Google/Service','Doubleclicksearch.php',257],['lib/google/src/Google/Service','Doubleclicksearch.php',381],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',105],['lib/google/src/Google/Service','Autoscaler.php',331],['lib/google/src/Google/Service','Autoscaler.php',445],['lib/google/src/Google/Service','AdExchangeSeller.php',444],['lib/google/src/Google/Service','AdExchangeSeller.php',552],['lib/google/src/Google/Service','AdExchangeSeller.php',666],['lib/horde/framework/Horde/Imap/Client','Cache.php',88],['lib/google/src/Google/Service','Prediction.php',276],['lib/behat/classes','behat_context_helper.php',63],['lib/google/src/Google/Service','SiteVerification.php',152],['lib/google/src/Google/Service','Drive.php',1333],['lib/google/src/Google/Service','Drive.php',1369],['lib/google/src/Google/Service','Drive.php',1422],['lib/google/src/Google/Service','Drive.php',1536],['lib/google/src/Google/Service','Drive.php',1617],['lib/google/src/Google/Service','Drive.php',1792],['lib/google/src/Google/Service','Drive.php',2054],['lib/google/src/Google/Service','Drive.php',2124],['lib/google/src/Google/Service','Drive.php',2256],['lib/google/src/Google/Service','Drive.php',2350],['lib/google/src/Google/Service','Drive.php',2418],['lib/google/src/Google/Service','Drive.php',2537],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',79],['lib/google/src/Google/Service','Proximitybeacon.php',348],['lib/google/src/Google/Service','Groupssettings.php',108],['lib/google/src/Google/Service','Directory.php',1698],['lib/google/src/Google/Service','Directory.php',1766],['lib/google/src/Google/Service','Directory.php',1860],['lib/google/src/Google/Service','Directory.php',1930],['lib/google/src/Google/Service','Directory.php',2003],['lib/google/src/Google/Service','Directory.php',2072],['lib/google/src/Google/Service','Directory.php',2238],['lib/google/src/Google/Service','Directory.php',2365],['lib/google/src/Google/Service','Directory.php',2435],['lib/google/src/Google/Service','Directory.php',2531],['lib/google/src/Google/Service','Directory.php',2666],['lib/google/src/Google/Service','Directory.php',2745],['lib/google/src/Google/Service','Directory.php',2850],['lib/google/src/Google/Service','Directory.php',2954],['lib/google/src/Google/Service','Directory.php',3012],['lib/google/src/Google/Service','Directory.php',3287],['lib/google/src/Google/Service','Fusiontables.php',659],['lib/google/src/Google/Service','Fusiontables.php',826],['lib/google/src/Google/Service','Fusiontables.php',950],['lib/google/src/Google/Service','Fusiontables.php',1141],['lib/google/src/Google/Service','Fusiontables.php',1202],['lib/google/src/Google/Service','AdSenseHost.php',645],['lib/google/src/Google/Service','AdSenseHost.php',686],['lib/google/src/Google/Service','AdSenseHost.php',751],['lib/google/src/Google/Service','AdSenseHost.php',918],['lib/google/src/Google/Service','AdSenseHost.php',1026],['lib/google/src/Google/Service','Plus.php',343],['lib/google/src/Google/Service','Plus.php',418],['lib/google/src/Google/Service','Plus.php',525],['lib/google/src/Google/Service','Mirror.php',438],['lib/google/src/Google/Service','Mirror.php',523],['lib/google/src/Google/Service','Mirror.php',563],['lib/google/src/Google/Service','Mirror.php',674],['lib/google/src/Google/Service','Mirror.php',786],['lib/google/src/Google/Service','AndroidEnterprise.php',1002],['lib/google/src/Google/Service','AndroidEnterprise.php',1109],['lib/google/src/Google/Service','AndroidEnterprise.php',1196],['lib/google/src/Google/Service','AndroidEnterprise.php',1312],['lib/google/src/Google/Service','AndroidEnterprise.php',1432],['lib/google/src/Google/Service','AndroidEnterprise.php',1524],['lib/google/src/Google/Service','AndroidEnterprise.php',1616],['lib/google/src/Google/Service','AndroidEnterprise.php',1705],['lib/google/src/Google/Service','AndroidEnterprise.php',1777],['lib/google/src/Google/Service','AndroidEnterprise.php',1879],['lib/htmlpurifier/HTMLPurifier','DoctypeRegistry.php',76],['lib/testing/classes','nasty_strings.php',73],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',52],['lib/google/src/Google/Service','Playmoviespartner.php',411],['lib/google/src/Google/Service','Playmoviespartner.php',475],['lib/google/src/Google/Service','Playmoviespartner.php',580],['lib','coursecatlib.php',212],['lib/google/src/Google/Service','Cloudtrace.php',217],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/media/js','media.js',7],['tag/classes','tag.php',190],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',65],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Null.php',27],['competency/classes','url.php',55],['lib/portfolio','caller.php',170],['lib/portfolio','caller.php',538],['lib/google/src/Google/Service','Calendar.php',919],['lib/google/src/Google/Service','Calendar.php',1086],['lib/google/src/Google/Service','Calendar.php',1285],['lib/google/src/Google/Service','Calendar.php',1387],['lib/google/src/Google/Service','Calendar.php',1431],['lib/google/src/Google/Service','Calendar.php',1873],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',78],['cache/stores/session','lib.php',225],['lib/google/src/Google/Service','Cloudbilling.php',162],['lib/google/src/Google/Service','PlusDomains.php',468],['lib/google/src/Google/Service','PlusDomains.php',593],['lib/google/src/Google/Service','PlusDomains.php',719],['lib/google/src/Google/Service','PlusDomains.php',813],['lib/google/src/Google/Service','Storagetransfer.php',248],['lib/google/src/Google/Service','Storagetransfer.php',295],['lib/google/src/Google/Service','Storagetransfer.php',396],['cache/stores/mongodb','lib.php',252],['lib/google/src/Google/Cache','Null.php',36],['lib/google/src/Google/Service','GamesConfiguration.php',265],['lib/google/src/Google/Service','GamesConfiguration.php',404],['cache/stores/file','lib.php',330],['cache/stores/memcached','lib.php',319],['lib/google/src/Google/Service','AppState.php',171],['lib/google/src/Google/Service','Resourceviews.php',354],['lib/google/src/Google/Service','Resourceviews.php',439],['lib/portfolio','plugin.php',631],['lib/google/src/Google/Service','Classroom.php',484],['lib/google/src/Google/Service','Classroom.php',724],['lib/google/src/Google/Service','Classroom.php',830],['lib/google/src/Google/Service','Classroom.php',951],['lib/google/src/Google/Service','Classroom.php',1010],['lib/google/src/Google/Service','SQLAdmin.php',804],['lib/google/src/Google/Service','SQLAdmin.php',874],['lib/google/src/Google/Service','SQLAdmin.php',1076],['lib/google/src/Google/Service','SQLAdmin.php',1298],['lib/google/src/Google/Service','SQLAdmin.php',1387],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',67],['lib/google/src/Google/Service','Compute.php',4037],['lib/google/src/Google/Service','Compute.php',4166],['lib/google/src/Google/Service','Compute.php',4299],['lib/google/src/Google/Service','Compute.php',4460],['lib/google/src/Google/Service','Compute.php',4590],['lib/google/src/Google/Service','Compute.php',4686],['lib/google/src/Google/Service','Compute.php',4845],['lib/google/src/Google/Service','Compute.php',4957],['lib/google/src/Google/Service','Compute.php',5048],['lib/google/src/Google/Service','Compute.php',5188],['lib/google/src/Google/Service','Compute.php',5264],['lib/google/src/Google/Service','Compute.php',5394],['lib/google/src/Google/Service','Compute.php',5542],['lib/google/src/Google/Service','Compute.php',5726],['lib/google/src/Google/Service','Compute.php',6001],['lib/google/src/Google/Service','Compute.php',6171],['lib/google/src/Google/Service','Compute.php',6369],['lib/google/src/Google/Service','Compute.php',6595],['lib/google/src/Google/Service','Compute.php',6655],['lib/google/src/Google/Service','Compute.php',6732],['lib/google/src/Google/Service','Compute.php',6808],['lib/google/src/Google/Service','Compute.php',6914],['lib/google/src/Google/Service','Compute.php',6977],['lib/google/src/Google/Service','Compute.php',7052],['lib/google/src/Google/Service','Compute.php',7148],['lib/google/src/Google/Service','Compute.php',7223],['lib/google/src/Google/Service','Compute.php',7315],['lib/google/src/Google/Service','Compute.php',7425],['lib/google/src/Google/Service','Compute.php',7586],['lib/google/src/Google/Service','Compute.php',7750],['lib/google/src/Google/Service','Compute.php',7955],['lib/google/src/Google/Service','Compute.php',8050],['lib/google/src/Google/Service','Compute.php',8226],['lib/google/src/Google/Service','Compute.php',8321],['lib/google/src/Google/Service','Compute.php',8384],['lib/google/src/Google/Service','Pubsub.php',255],['lib/google/src/Google/Service','Pubsub.php',394],['lib/google/src/Google/Cache','Apc.php',52],['lib/google/src/Google/Service','Dfareporting.php',4559],['lib/google/src/Google/Service','Dfareporting.php',4587],['lib/google/src/Google/Service','Dfareporting.php',4629],['lib/google/src/Google/Service','Dfareporting.php',4671],['lib/google/src/Google/Service','Dfareporting.php',4779],['lib/google/src/Google/Service','Dfareporting.php',4867],['lib/google/src/Google/Service','Dfareporting.php',5014],['lib/google/src/Google/Service','Dfareporting.php',5117],['lib/google/src/Google/Service','Dfareporting.php',5308],['lib/google/src/Google/Service','Dfareporting.php',5427],['lib/google/src/Google/Service','Dfareporting.php',5525],['lib/google/src/Google/Service','Dfareporting.php',5580],['lib/google/src/Google/Service','Dfareporting.php',5683],['lib/google/src/Google/Service','Dfareporting.php',5769],['lib/google/src/Google/Service','Dfareporting.php',5891],['lib/google/src/Google/Service','Dfareporting.php',5997],['lib/google/src/Google/Service','Dfareporting.php',6105],['lib/google/src/Google/Service','Dfareporting.php',6255],['lib/google/src/Google/Service','Dfareporting.php',6314],['lib/google/src/Google/Service','Dfareporting.php',6411],['lib/google/src/Google/Service','Dfareporting.php',6529],['lib/google/src/Google/Service','Dfareporting.php',6609],['lib/google/src/Google/Service','Dfareporting.php',6746],['lib/google/src/Google/Service','Dfareporting.php',6862],['lib/google/src/Google/Service','Dfareporting.php',6940],['lib/google/src/Google/Service','Dfareporting.php',7011],['lib/google/src/Google/Service','Dfareporting.php',7131],['lib/google/src/Google/Service','Dfareporting.php',7172],['lib/google/src/Google/Service','Dfareporting.php',7214],['lib/google/src/Google/Service','Dfareporting.php',7256],['lib/google/src/Google/Service','Dfareporting.php',7320],['lib/google/src/Google/Service','Dfareporting.php',7378],['lib/google/src/Google/Service','Dfareporting.php',7517],['lib/google/src/Google/Service','Dfareporting.php',7640],['lib/google/src/Google/Service','Dfareporting.php',7771],['lib/google/src/Google/Service','Dfareporting.php',7812],['lib/google/src/Google/Service','Dfareporting.php',7853],['lib/google/src/Google/Service','Dfareporting.php',7935],['lib/google/src/Google/Service','Dfareporting.php',7995],['lib/google/src/Google/Service','Dfareporting.php',8116],['lib/google/src/Google/Service','Dfareporting.php',8258],['lib/google/src/Google/Service','Dfareporting.php',8307],['lib/google/src/Google/Service','Dfareporting.php',8421],['lib/google/src/Google/Service','Dfareporting.php',8482],['lib/google/src/Google/Service','Dfareporting.php',8584],['lib/google/src/Google/Service','Dfareporting.php',8643],['lib/google/src/Google/Service','Dfareporting.php',8682],['lib/google/src/Google/Service','Dfareporting.php',8724],['lib/google/src/Google/Service','Dfareporting.php',8782],['lib/google/src/Google/Service','Manager.php',259],['lib/google/src/Google/Service','Manager.php',338],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',108],['lib','webdavlib.php',264]], 21532],
'usergetmidnight': ['usergetmidnight', 'Given a time, return the GMT timestamp of the most recent midnight for the current user. ', [['lib','moodlelib.php',2252]], 24],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'calendar_get_default_courses': ['calendar_get_default_courses', 'Returns the default courses to display on the calendar when there isn\'t a specific course to display. ', [['calendar','lib.php',1623]], 6],
'make_timestamp': ['make_timestamp', 'Given Gregorian date parts in user time produce a GMT timestamp. ', [['lib','moodlelib.php',2032]], 43],
'timestamp_tomorrow': ['timestamp_tomorrow', 'Gets tomorrows timestamp for the calendar ', [['calendar','lib.php',2857]], 1],
'make': ['make', 'Runs the entire \'make\' process. ', [['admin/tool/generator/classes','course_backend.php',202],['lib/htmlpurifier/HTMLPurifier/AttrDef','Clone.php',38],['lib/htmlpurifier/HTMLPurifier/AttrDef','URI.php',33],['mod/quiz/accessrule/numattempts','rule.php',40],['cache/classes','loaders.php',163],['mod/quiz/accessrule','accessrulebase.php',63],['backup/util/ui','backup_ui_setting.class.php',234],['lib/htmlpurifier/HTMLPurifier/AttrDef','Enum.php',60],['mod/quiz/accessrule/timelimit','rule.php',41],['mod/quiz/accessrule/openclosedate','rule.php',40],['lib/yuilib/2in3/2.9.0/build/yui2-logger','yui2-logger.js',655],['lib/htmlpurifier/HTMLPurifier/ConfigSchema/Interchange','Id.php',52],['mod/quiz/accessrule/password','rule.php',40],['admin/tool/assignmentupgrade','locallib.php',110],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Pixels.php',64],['mod/quiz/accessrule/delaybetweenattempts','rule.php',40],['lib/htmlpurifier/HTMLPurifier','DoctypeRegistry.php',96],['lib/htmlpurifier/HTMLPurifier','AttrDef.php',67],['mod/quiz/accessrule/ipaddress','rule.php',40],['mod/quiz/accessrule/securewindow','rule.php',55],['mod/quiz/accessrule/safebrowser','rule.php',40],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Bool.php',42],['lib/yuilib/2in3/2.9.0/build/yui2-logger','yui2-logger-debug.js',655],['lib/htmlpurifier/HTMLPurifier','Length.php',52],['admin/tool/generator/classes','site_backend.php',89]], 198],
'unset_user_preference': ['unset_user_preference', 'Unsets a preference completely by deleting it from the database ', [['lib','moodlelib.php',1924]], 35],
'has_any_capability': ['has_any_capability', 'Check if the user has any one of several capabilities from a list. ', [['lib','accesslib.php',496]], 100],
'enrol_get_my_courses': ['enrol_get_my_courses', 'Returns list of courses current $USER is enrolled in and can access ', [['lib','enrollib.php',512]], 30],
'string_exists': ['string_exists', 'Does the string actually exist? ', [['lib/classes','string_manager_install.php',64],['lib/classes','string_manager_standard.php',263],['lib/classes','string_manager.php',50]], 85],
'get_num_weekdays': ['get_num_weekdays', 'Returns the number of days in a week. ', [['calendar/tests','calendartype_test_example.php',139],['calendar/type/gregorian/classes','structure.php',142]], 5],
'record_exists': ['record_exists', 'Check if a record exists by ID. ', [['competency/classes','persistent.php',842],['lib/dml','moodle_database.php',1817]], 901],
'calendar_set_filters': ['calendar_set_filters', 'Returns the courses to load events for, the ', [['calendar','lib.php',1473]], 3],
'preload_from_record': ['preload_from_record', 'Preloads context information from db record and strips the cached info. ', [['lib','accesslib.php',5250],['lib','accesslib.php',6079]], 61],
'file_rewrite_pluginfile_urls': ['file_rewrite_pluginfile_urls', 'Convert encoded URLs in $text from the @@PLUGINFILE@@/... form to an actual URL. Passing a new option reverse = true in the $options var will make the function to convert actual URLs in $text to encoded URLs in the @@PLUGINFILE@@ form. ', [['lib','filelib.php',446]], 96],
'gettimestamp': ['gettimestamp', '', [['lib/google/src/Google/Service','AdExchangeBuyer.php',5523],['lib/google/src/Google/Service','Coordinate.php',1087],['lib/google/src/Google/Service','ShoppingContent.php',8264],['lib/google/src/Google/Service','Webmasters.php',887],['lib/tcpdf/include','tcpdf_static.php',373],['lib/google/src/Google/Service','Spectrum.php',873],['lib/google/src/Google/Service','Spectrum.php',1080],['lib/google/src/Google/Service','Mirror.php',1218]], 44],
'get_area_files': ['get_area_files', 'Returns all area files (optionally limited by itemid) ', [['lib/filestorage','file_storage.php',782],['lib','externallib.php',1134]], 216],
'label': ['label', 'Renders form element label ', [['lib','outputcomponents.php',1741]], 107],
'calendar_user_can_add_event': ['calendar_user_can_add_event', 'See if user can add calendar entries at all used to print the "New Event" button ', [['calendar','lib.php',1888]], 5],
'update': ['update', 'In addition to update() as defined in grade_object, handle the grade_outcome and grade_scale objects. Force regrading if necessary, rounds the float numbers using php function, the reason is we need to compare the db value with computed number to skip regrading if possible. ', [['lib/grade','grade_item.php',274],['lib/google/src/Google/Service','Tasks.php',386],['lib/google/src/Google/Service','Tasks.php',556],['lib/google/src/Google/Service','AndroidPublisher.php',1413],['lib/google/src/Google/Service','AndroidPublisher.php',1545],['lib/google/src/Google/Service','AndroidPublisher.php',1615],['lib/google/src/Google/Service','AndroidPublisher.php',1853],['lib/google/src/Google/Service','AndroidPublisher.php',1919],['lib/google/src/Google/Service','AndroidPublisher.php',2003],['lib/google/src/Google/Service','AndroidPublisher.php',2177],['lib/google/src/Google/Service','Reseller.php',344],['lib/grade','grade_category.php',226],['lib/grade','grade_scale.php',125],['lib/adodb','adodb-active-record.inc.php',1004],['lib/grade','grade_object.php',238],['lib/google/src/Google/Service','YouTubeAnalytics.php',534],['completion','data_object.php',252],['mod/lesson/pagetypes','matching.php',308],['tag/classes','collection.php',215],['lib/google/src/Google/Service','AdExchangeBuyer.php',802],['lib/google/src/Google/Service','AdExchangeBuyer.php',906],['lib/google/src/Google/Service','AdExchangeBuyer.php',1013],['lib/google/src/Google/Service','AdExchangeBuyer.php',1181],['lib/google/src/Google/Service','AdExchangeBuyer.php',1357],['lib/google/src/Google/Service','AdExchangeBuyer.php',1640],['lib/google/src/Google/Service','Books.php',2025],['lib/grade','grade_grade.php',1009],['lib/grade','grade_outcome.php',144],['lib/google/src/Google/Service','Analytics.php',2215],['lib/google/src/Google/Service','Analytics.php',2388],['lib/google/src/Google/Service','Analytics.php',2501],['lib/google/src/Google/Service','Analytics.php',2626],['lib/google/src/Google/Service','Analytics.php',2736],['lib/google/src/Google/Service','Analytics.php',2843],['lib/google/src/Google/Service','Analytics.php',2971],['lib/google/src/Google/Service','Analytics.php',3062],['lib/google/src/Google/Service','Analytics.php',3185],['lib/google/src/Google/Service','Analytics.php',3502],['lib/google/src/Google/Service','Analytics.php',3604],['lib/google/src/Google/Service','Analytics.php',3686],['lib/google/src/Google/Service','Coordinate.php',611],['lib/google/src/Google/Service','Coordinate.php',727],['lib/google/src/Google/Service','DeploymentManager.php',589],['tag/classes/output','tagareacollection.php',68],['lib','weblib.php',3312],['lib/google/src/Google/Service','Blogger.php',1349],['lib/google/src/Google/Service','Blogger.php',1647],['lib/google/src/Google/Service','Dataflow.php',350],['tag/classes/output','tagcollname.php',58],['competency/classes','persistent.php',452],['lib/google/src/Google/Service','Cloudresourcemanager.php',344],['lib/google/src/Google/Service','Cloudresourcemanager.php',555],['lib/google/src/Google/Service','TagManager.php',977],['lib/google/src/Google/Service','TagManager.php',1066],['lib/google/src/Google/Service','TagManager.php',1159],['lib/google/src/Google/Service','TagManager.php',1219],['lib/google/src/Google/Service','TagManager.php',1311],['lib/google/src/Google/Service','TagManager.php',1405],['lib/google/src/Google/Service','TagManager.php',1499],['lib/google/src/Google/Service','TagManager.php',1650],['lib/google/src/Google/Service','TagManager.php',1743],['mod/lesson','locallib.php',2691],['lib/google/src/Google/Service','Bigquery.php',621],['lib/google/src/Google/Service','Bigquery.php',953],['lib/google/src/Google/Service','ShoppingContent.php',1136],['lib/google/src/Google/Service','ShoppingContent.php',1238],['lib/google/src/Google/Service','ShoppingContent.php',1401],['lib/google/src/Google/Service','ShoppingContent.php',1534],['mod/lesson/pagetypes','truefalse.php',163],['lib/google/src/Google/Service','Clouddebugger.php',307],['lib/filestorage','stored_file.php',103],['lib/google/src/Google/Service','Container.php',366],['lib/horde/framework/Horde/Support','Array.php',70],['lib/google/src/Google/Service','Storage.php',1127],['lib/google/src/Google/Service','Storage.php',1268],['lib/google/src/Google/Service','Storage.php',1423],['lib/google/src/Google/Service','Storage.php',1564],['lib/google/src/Google/Service','Storage.php',1904],['tag/classes/output','tagname.php',56],['tag/classes/output','tagcollsearchable.php',72],['lib/google/src/Google/Service','Games.php',1508],['lib/google/src/Google/Service','Licensing.php',335],['lib/google/src/Google/Service','Fitness.php',478],['lib/google/src/Google/Service','Fitness.php',691],['lib/google/src/Google/Service','Gmail.php',833],['lib/google/src/Google/Service','Gmail.php',986],['lib/google/src/Google/Service','Taskqueue.php',398],['lib/adodb','adodb-active-recordx.inc.php',1136],['grade/grading/form','lib.php',905],['lib/google/src/Google/Service','Doubleclicksearch.php',326],['lib/google/src/Google/Service','Autoscaler.php',400],['tag/classes/output','tagisstandard.php',70],['lib/google/src/Google/Service','Prediction.php',339],['lib/google/src/Google/Service','SiteVerification.php',227],['lib/google/src/Google/Service','Drive.php',1691],['lib/google/src/Google/Service','Drive.php',1961],['lib/google/src/Google/Service','Drive.php',2208],['lib/google/src/Google/Service','Drive.php',2320],['lib/google/src/Google/Service','Drive.php',2370],['lib/google/src/Google/Service','Drive.php',2494],['lib/google/src/Google/Service','Drive.php',2582],['tag/classes/output','tagflag.php',71],['lib/google/src/Google/Service','Proximitybeacon.php',440],['lib/google/src/Google/Service','Groupssettings.php',138],['lib/google/src/Google/Service','Directory.php',1829],['lib/google/src/Google/Service','Directory.php',1889],['lib/google/src/Google/Service','Directory.php',2141],['lib/google/src/Google/Service','Directory.php',2306],['lib/google/src/Google/Service','Directory.php',2489],['lib/google/src/Google/Service','Directory.php',2597],['lib/google/src/Google/Service','Directory.php',2808],['lib/google/src/Google/Service','Directory.php',2910],['lib/google/src/Google/Service','Directory.php',3131],['lib/google/src/Google/Service','Directory.php',3317],['lib/google/src/Google/Service','Fusiontables.php',727],['lib/google/src/Google/Service','Fusiontables.php',892],['lib/google/src/Google/Service','Fusiontables.php',1094],['lib/google/src/Google/Service','Fusiontables.php',1269],['lib/google/src/Google/Service','AdSenseHost.php',846],['lib/google/src/Google/Service','AdSenseHost.php',1097],['course/classes/output','course_module_name.php',81],['lib/google/src/Google/Service','Mirror.php',496],['lib/google/src/Google/Service','Mirror.php',634],['lib/google/src/Google/Service','Mirror.php',745],['tag/classes','area.php',226],['lib/google/src/Google/Service','AndroidEnterprise.php',1064],['lib/google/src/Google/Service','AndroidEnterprise.php',1165],['lib/google/src/Google/Service','AndroidEnterprise.php',1489],['lib/google/src/Google/Service','AndroidEnterprise.php',1672],['grade/grading/form/rubric','lib.php',828],['lib/xhprof/xhprof_html/jquery','jquery.tooltip.js',200],['mod/lesson/pagetypes','essay.php',158],['lib','coursecatlib.php',438],['tag/classes','tag.php',893],['lib/google/src/Google/Service','Calendar.php',1006],['lib/google/src/Google/Service','Calendar.php',1181],['lib/google/src/Google/Service','Calendar.php',1333],['lib/google/src/Google/Service','Calendar.php',1714],['lib/google/src/Google/Service','PlusDomains.php',692],['lib/google/src/Google/Service','GamesConfiguration.php',334],['lib/google/src/Google/Service','GamesConfiguration.php',473],['mod/lesson/pagetypes','branchtable.php',262],['tag/classes/output','tagareashowstandard.php',64],['lib/google/src/Google/Service','AppState.php',202],['calendar','lib.php',2206],['tag/classes/output','tagareaenabled.php',69],['cohort/classes/output','cohortidnumber.php',53],['lib/google/src/Google/Service','Classroom.php',564],['cohort/classes/output','cohortname.php',53],['lib/google/src/Google/Service','SQLAdmin.php',947],['lib/google/src/Google/Service','SQLAdmin.php',1267],['lib/google/src/Google/Service','SQLAdmin.php',1534],['grade/grading/form/guide','lib.php',836],['lib/google/src/Google/Service','Compute.php',4253],['lib/google/src/Google/Service','Compute.php',4398],['lib/google/src/Google/Service','Compute.php',4767],['lib/google/src/Google/Service','Compute.php',5348],['lib/google/src/Google/Service','Compute.php',5478],['lib/google/src/Google/Service','Compute.php',8131],['lib/google/src/Google/Service','YouTube.php',1959],['lib/google/src/Google/Service','YouTube.php',2194],['lib/google/src/Google/Service','YouTube.php',2303],['lib/google/src/Google/Service','YouTube.php',2429],['lib/google/src/Google/Service','YouTube.php',2570],['lib/google/src/Google/Service','YouTube.php',3111],['lib/google/src/Google/Service','YouTube.php',3348],['lib/google/src/Google/Service','YouTube.php',3518],['lib/google/src/Google/Service','YouTube.php',3708],['lib/google/src/Google/Service','YouTube.php',4400],['lib/google/src/Google/Service','Dfareporting.php',4752],['lib/google/src/Google/Service','Dfareporting.php',4840],['lib/google/src/Google/Service','Dfareporting.php',4973],['lib/google/src/Google/Service','Dfareporting.php',5090],['lib/google/src/Google/Service','Dfareporting.php',5204],['lib/google/src/Google/Service','Dfareporting.php',5400],['lib/google/src/Google/Service','Dfareporting.php',5656],['lib/google/src/Google/Service','Dfareporting.php',5848],['lib/google/src/Google/Service','Dfareporting.php',5970],['lib/google/src/Google/Service','Dfareporting.php',6078],['lib/google/src/Google/Service','Dfareporting.php',6196],['lib/google/src/Google/Service','Dfareporting.php',6502],['lib/google/src/Google/Service','Dfareporting.php',6704],['lib/google/src/Google/Service','Dfareporting.php',6834],['lib/google/src/Google/Service','Dfareporting.php',6912],['lib/google/src/Google/Service','Dfareporting.php',7077],['lib/google/src/Google/Service','Dfareporting.php',7476],['lib/google/src/Google/Service','Dfareporting.php',7594],['lib/google/src/Google/Service','Dfareporting.php',7744],['lib/google/src/Google/Service','Dfareporting.php',7968],['lib/google/src/Google/Service','Dfareporting.php',8075],['lib/google/src/Google/Service','Dfareporting.php',8202],['lib/google/src/Google/Service','Dfareporting.php',8394],['lib/google/src/Google/Service','Dfareporting.php',8557],['lib/google/src/Google/Service','Dfareporting.php',8861],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',72]], 498],
'get_string_manager': ['get_string_manager', 'Returns current string_manager instance. ', [['lib','moodlelib.php',6678]], 163],
'calendar_delete_subscription': ['calendar_delete_subscription', 'Delete subscription and all related events. ', [['calendar','lib.php',3115]], 3],
'calendar_events_by_day': ['calendar_events_by_day', 'Get per-day basis events ', [['calendar','lib.php',1327]], 2],
'calendar_get_events': ['calendar_get_events', 'Get calendar events ', [['calendar','lib.php',713]], 5],
'calendar_filter_controls': ['calendar_filter_controls', 'Get the controls filter for calendar. ', [['calendar','lib.php',1046]], 2],
'calendar_get_popup': ['calendar_get_popup', 'Gets the calendar popup ', [['calendar','lib.php',507]], 4],
'calendar_sub_month': ['calendar_sub_month', 'Get the previous month. ', [['calendar','lib.php',1314]], 3],
'is_user_visible': ['is_user_visible', 'Checks if an activity is visible to the given user. ', [['availability/classes','info_module.php',140]], 26],
'calendar_edit_event_allowed': ['calendar_edit_event_allowed', 'Return the capability for editing calendar event ', [['calendar','lib.php',1570]], 6],
'get_num_days_in_month': ['get_num_days_in_month', 'Returns the number of days in a given month. ', [['calendar/tests','calendartype_test_example.php',182],['calendar/type/gregorian/classes','structure.php',231]], 5],
'execute': ['execute', 'Run langpack update ', [['admin/tool/langimport/classes/task','update_langpacks_task.php',44],['backup/converter/imscc1','lib.php',84],['lib/classes/task','blog_cron_task.php',40],['mod/workshop/allocation/scheduled','lib.php',128],['lib/classes/task','send_new_user_passwords_task.php',40],['admin/tool/log/store/standard/classes/task','cleanup_task.php',40],['lib/dml','pdo_moodle_database.php',227],['lib/classes/task','tag_cron_task.php',42],['enrol/imsenterprise/classes/task','cron_task.php',43],['lib/classes/task','completion_daily_task.php',42],['lib/google/src/Google/Http','Batch.php',61],['lib/dml','oci_native_moodle_database.php',1048],['lib/classes/task','context_cleanup_task.php',41],['backup/util/plan','backup_structure_step.class.php',50],['backup/util/ui','restore_ui.class.php',206],['webservice','lib.php',1319],['lib/classes/task','stats_cron_task.php',40],['lib/htmlpurifier/HTMLPurifier/Strategy','ValidateAttributes.php',16],['lib/htmlpurifier/HTMLPurifier/Strategy','RemoveForeignElements.php',20],['lib/classes/task','legacy_plugin_cron_task.php',42],['backup/moodle2','restore_activity_task.class.php',189],['lib/classes/task','portfolio_cron_task.php',40],['lib/google/src/Google/Http','REST.php',27],['lib/htmlpurifier/HTMLPurifier/Strategy','MakeWellFormed.php',66],['backup/converter/imscc11','backuplib.php',42],['lib/classes/task','question_cron_task.php',40],['lib/classes/task','cache_cron_task.php',40],['admin/tool/log/store/legacy/classes/task','cleanup_task.php',40],['mod/lti/service/memberships/classes/local/resource','linkmemberships.php',62],['admin/tool/messageinbound/classes/task','cleanup_task.php',47],['lib/adodb/drivers','adodb-pdo.inc.php',559],['lib/editor/atto/classes/task','autosave_cleanup_task.php',42],['admin/tool/recyclebin/classes/task','cleanup_category_bin.php',43],['lib/classes/task','completion_regular_task.php',42],['lib/adodb/drivers','adodb-oci8po.inc.php',54],['lib/classes/task','events_cron_task.php',40],['mod/workshop/allocation/random','lib.php',83],['mod/assign/feedback/editpdf/classes/task','convert_submissions.php',47],['auth/cas/classes/task','sync_task.php',43],['admin/tool/recyclebin/classes/task','cleanup_course_bin.php',43],['mod/lti/service/toolsettings/classes/local/resource','contextsettings.php',62],['backup/util/helper','restore_decode_processor.class.php',73],['lib/behat','behat_base.php',840],['enrol/flatfile/classes/task','flatfile_sync_task.php',46],['lib/classes/task','registration_cron_task.php',40],['backup/moodle2','backup_section_task.class.php',97],['lib/classes/task','check_for_updates_task.php',40],['backup/util/plan/tests/fixtures','plan_fixtures.php',48],['backup/util/plan/tests/fixtures','plan_fixtures.php',56],['mod/forum/classes/task','cron_task.php',39],['lib/classes/task','send_failed_login_notifications_task.php',43],['enrol/lti/classes/task','sync_grades.php',45],['lib/dml','pgsql_native_moodle_database.php',665],['lib/htmlpurifier/HTMLPurifier/Strategy','Composite.php',21],['lib/classes/update','validator.php',117],['lib/google/src/Google','Client.php',574],['lib/dml','mssql_native_moodle_database.php',711],['mod/lti/service/profile/classes/local/resource','profile.php',76],['backup/util/plan','backup_plan.class.php',112],['lib/dml','mysqli_native_moodle_database.php',963],['backup/util/ui','backup_ui.class.php',122],['admin/tool/monitor/classes/task','clean_events.php',41],['backup/converter/moodle1','backuplib.php',10],['backup/converter/imscc11','lib.php',85],['lib/classes/task','grade_cron_task.php',40],['lib/classes/task','file_temp_cleanup_task.php',40],['backup/moodle2','restore_section_task.class.php',87],['mod/lti/service/toolsettings/classes/local/resource','linksettings.php',63],['filter/tex','latex.php',70],['lib/adodb','adodb.inc.php',1088],['lib/classes/task','plagiarism_cron_task.php',40],['mod/lti/service/toolproxy/classes/local/resource','toolproxy.php',62],['backup/converter/moodle1','lib.php',142],['backup/util/plan','restore_structure_step.class.php',62],['lib/classes/task','search_index_task.php',44],['enrol/lti/classes/task','sync_members.php',55],['lib/classes/task','session_cleanup_task.php',40],['mod/lti/service/toolsettings/classes/local/resource','systemsettings.php',61],['lib/classes/task','backup_cleanup_task.php',40],['lib/classes/task','delete_unconfirmed_users_task.php',40],['backup/converter/imscc1','backuplib.php',10],['lib/classes/task','badges_cron_task.php',40],['admin/tool/uploadcourse/classes','processor.php',174],['lib/classes/task','calendar_cron_task.php',40],['backup/util/plan','base_plan.class.php',158],['auth/ldap/classes/task','sync_task.php',43],['lib/adodb/drivers','adodb-oci8.inc.php',920],['backup/util/plan','restore_plan.class.php',159],['lib/tests/fixtures','task_fixtures.php',30],['lib/tests/fixtures','task_fixtures.php',39],['lib/tests/fixtures','task_fixtures.php',48],['lib/tests/fixtures','task_fixtures.php',57],['lib/dml','sqlsrv_native_moodle_database.php',795],['lib/classes/task','create_contexts_task.php',40],['lib/classes/task','file_trash_cleanup_task.php',40],['admin/tool/cohortroles/classes/task','cohort_role_sync.php',46],['lib/classes/task','complete_plans_task.php',52],['lib/classes/task','messaging_cleanup_task.php',40],['backup/util/plan','backup_execution_step.class.php',25],['lib/classes/task','cache_cleanup_task.php',40],['backup/moodle2','backup_activity_task.class.php',211],['filter/tex','texdebug.php',287],['lib/classes/task','password_reset_cleanup_task.php',40],['lib/classes/task','search_optimize_task.php',47],['mod/assign','adminlib.php',342],['lib/classes/task','delete_incomplete_users_task.php',40],['lib/classes/task','automated_backup_task.php',40],['admin/tool/messageinbound/classes/task','pickup_task.php',47],['backup/util/plan','restore_execution_step.class.php',25],['lib/classes/task','sync_plans_from_template_cohorts_task.php',50],['admin/tool/monitor/classes','notification_task.php',39],['lib/dml/tests','dml_test.php',5543],['lib/htmlpurifier/HTMLPurifier/Strategy','FixNesting.php',41],['mod/lti/service/memberships/classes/local/resource','contextmemberships.php',60],['admin/tool/monitor/classes/task','check_subscriptions.php',60],['backup/util/interfaces','executable.class.php',32],['backup/util/plan','base_task.class.php',162]], 1058],
'get_accesshide': ['get_accesshide', 'Return a HTML element with the class "accesshide", for accessibility. ', [['lib','weblib.php',2251]], 18],
'file_prepare_draft_area': ['file_prepare_draft_area', 'Initialise a draft file area from a real one by copying the files. A draft area will be created if one does not already exist. Normally you should get $draftitemid by calling file_get_submitted_draft_itemid(\'elementname\'); ', [['lib','filelib.php',362]], 67],
'get_in_or_equal': ['get_in_or_equal', 'Constructs \'IN()\' or \'=\' sql fragment ', [['lib/dml','oci_native_moodle_database.php',1635],['lib/dml','moodle_database.php',711]], 438],
'calendar_get_courselink': ['calendar_get_courselink', 'Get a HTML link to a course. ', [['calendar','lib.php',631]], 3],
'calendar_cron': ['calendar_cron', 'Update calendar subscriptions. ', [['calendar','lib.php',3317]], 3],
'calendar_get_calendar_context': ['calendar_get_calendar_context', 'Helper function to determine the context of a calendar subscription. Subscriptions can be created in two contexts COURSE, or USER. ', [['calendar','lib.php',3348]], 3],
'groups_is_member': ['groups_is_member', 'Determines if the user is a member of the given group. ', [['lib','grouplib.php',353]], 97],
'get_starting_weekday': ['get_starting_weekday', 'Returns the index of the starting week day. ', [['calendar/tests','calendartype_test_example.php',161],['calendar/type/gregorian/classes','structure.php',193]], 4],
'__construct': ['__construct', '', [['lib/adodb/drivers','adodb-odbc_mssql.inc.php',50],['lib/adodb/drivers','adodb-odbc_mssql.inc.php',359],['question/classes/statistics/responses','analyser.php',69],['auth/radius','auth.php',38],['lib/xmldb','xmldb_file.php',43],['lib/lessphp/Tree/Mixin','Definition.php',18],['cache/stores/static','lib.php',127],['lib/classes/session','file.php',40],['lib/htmlpurifier/HTMLPurifier/Lexer','DOMLex.php',35],['backup/util/ui','base_moodleform.class.php',68],['lib/simplepie/library/SimplePie','Author.php',81],['lib/filestorage','zip_archive.php',66],['backup/util/structure','restore_path_element.class.php',47],['backup/util/structure','restore_path_element.class.php',128],['lib/htmlpurifier/HTMLPurifier/ChildDef','Chameleon.php',36],['lib/phpexcel/PHPExcel','HashTable.php',44],['mod/quiz/tests','repaginate_test.php',39],['lib/form','modvisible.php',43],['lib/phpexcel/PHPExcel/Worksheet','Row.php',44],['cache','disabledlib.php',44],['lib/phpexcel/PHPExcel/Worksheet','Dimension.php',58],['lib/mustache/src/Mustache/Cache','FilesystemCache.php',27],['question/type/ddwtos','question.php',61],['mnet/xmlrpc','client.php',25],['lib/horde/framework/Horde/Imap/Client','Url.php',112],['lib/classes','useragent.php',115],['lib/pear/HTML/QuickForm','advcheckbox.php',66],['lib/classes/update','checker_exception.php',37],['lib/phpexcel/PHPExcel/Reader','Excel2007.php',53],['lib/jabber/XMPP','XMPP.php',101],['lib/form','radio.php',44],['lib/spout/src/Spout/Reader/XLSX/Helper','StyleHelper.php',45],['auth/cas/CAS/CAS/ProxiedService/Http','Abstract.php',58],['lib/phpexcel/PHPExcel/Style','Border.php',67],['lib/htmlpurifier/HTMLPurifier','HTMLDefinition.php',182],['lib/adodb/drivers','adodb-oci8quercus.inc.php',31],['lib/adodb/drivers','adodb-oci8quercus.inc.php',45],['lib/spout/src/Spout/Reader/XLSX','SheetIterator.php',29],['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',91],['lib/phpexcel/PHPExcel','DocumentProperties.php',123],['lib/typo3','class.t3lib_cs.php',509],['mod/workshop/allocation/scheduled','lib.php',48],['lib/adodb/drivers','adodb-netezza.inc.php',53],['lib/adodb/drivers','adodb-netezza.inc.php',144],['mod/feedback/classes','complete_form.php',58],['search/classes','document.php',188],['webservice/rest','locallib.php',40],['lib/dml','mssql_native_moodle_recordset.php',34],['mod/assign/feedback/editpdf/fpdi','fpdi_pdf_parser.php',57],['lib/htmlpurifier/HTMLPurifier','TokenFactory.php',43],['backup/moodle2','backup_block_task.class.php',43],['lib/lessphp/Tree','Negative.php',14],['lib/minify/lib/Minify/Cache','APC.php',19],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',54],['lib/pear/HTML/QuickForm','header.php',33],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','InMemoryStrategy.php',26],['lib/phpexcel/PHPExcel/Worksheet','RowCellIterator.php',51],['lib/simplepie/library/SimplePie/XML/Declaration','Parser.php',110],['lib/phpexcel/PHPExcel/Worksheet','ColumnIterator.php',60],['lib/spout/src/Spout/Reader/ODS','Sheet.php',33],['question/type/calculated/tests','helper.php',205],['lib/adodb/drivers','adodb-odbtp.inc.php',38],['lib/adodb/drivers','adodb-odbtp.inc.php',673],['lib/adodb/drivers','adodb-odbtp.inc.php',796],['lib/adodb/drivers','adodb-odbtp.inc.php',806],['lib/adodb/drivers','adodb-odbtp.inc.php',816],['lib/adodb/drivers','adodb-odbtp.inc.php',826],['lib/adodb/drivers','adodb-odbtp.inc.php',836],['enrol/lti/ims-blti','blti.php',28],['backup/cc','cc2moodle.php',105],['mod/chat','locallib.php',181],['mod/chat','locallib.php',229],['user/filters','simpleselect.php',45],['lib/phpexcel/PHPExcel/CachedObjectStorage','Memcache.php',244],['lib/dml','pdo_moodle_database.php',42],['lib/adodb/drivers','adodb-sqlite3.inc.php',36],['lib/adodb/drivers','adodb-sqlite3.inc.php',350],['lib/pear/HTML/QuickForm','static.php',44],['competency/classes/external','comment_area_exporter.php',48],['lib/lessphp/Tree','Selector.php',31],['auth/cas/CAS/CAS','TypeMismatchException.php',43],['auth/fc','fcFPP.php',33],['lib/xmldb','xmldb_key.php',43],['grade/grading/form/rubric','rubriceditor.php',56],['lib/google/src/Google/Service','Cloudlatencytest.php',40],['course','moodleform_mod.php',69],['auth/nntp','auth.php',35],['grade/report/grader','lib.php',111],['admin/tool/generator/classes','course_backend.php',116],['lib/minify/lib','FirePHP.php',189],['lib/adodb/drivers','adodb-sqlitepo.inc.php',38],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',67],['lib/phpexcel/PHPExcel/CachedObjectStorage','CacheBase.php',66],['lib/lessphp/Tree','Rule.php',24],['lib/behat/features/bootstrap','behat_init_context.php',45],['lib','dmllib.php',69],['lib','dmllib.php',84],['lib','dmllib.php',104],['lib','dmllib.php',129],['lib','dmllib.php',159],['lib','dmllib.php',187],['lib','dmllib.php',240],['lib','dmllib.php',270],['lib/google/src/Google/Service','DataTransfer.php',44],['lib/google/src/Google/Http','Batch.php',42],['backup/util/structure','base_processor.class.php',49],['admin/tool/lpmigrate/classes','framework_mapper.php',50],['lib/phpexcel/PHPExcel/Reader','OOCalc.php',46],['lib/lessphp/Tree','NameValue.php',22],['mod/quiz/classes','admin_review_setting.php',82],['lib/htmlpurifier/HTMLPurifier','Generator.php',67],['mod/quiz/report','attemptsreport_table.php',76],['blocks/lp/classes/output','summary.php',59],['lib/google/src/Google/IO','Stream.php',45],['lib/google/src/Google/Service','Freebase.php',38],['grade/tests','reportlib_test.php',36],['search/classes','manager.php',100],['question/behaviour/adaptive','behaviour.php',310],['admin/tool/lp/classes/form','framework_autocomplete.php',48],['lib/minify/lib','JSMinPlus.php',193],['lib/minify/lib','JSMinPlus.php',726],['lib/minify/lib','JSMinPlus.php',1638],['lib/minify/lib','JSMinPlus.php',1656],['lib/minify/lib','JSMinPlus.php',1748],['lib/simplepie/library/SimplePie','Copyright.php',73],['lib/phpexcel/PHPExcel/Style','Conditional.php',93],['lib/google/src/Google/Task','Runner.php',76],['backup/util/settings/root','root_backup_setting.class.php',34],['lib','componentlib.class.php',179],['lib','componentlib.class.php',610],['lib','componentlib.class.php',834],['lib/google/src/Google/Service','AdSense.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef','Clone.php',18],['lib/spout/src/Spout/Reader/CSV','Sheet.php',24],['lib/filebrowser','file_info_context_system.php',37],['lib/grade','grade_item.php',260],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nstring.php',27],['repository/boxnet','lib.php',56],['auth/email','auth.php',34],['mod/wiki/editors','wikifiletable.php',40],['lib/google/src/Google/Service','Replicapool.php',51],['lib/dtl','database_exporter.php',55],['lib/horde/framework/Horde/Imap/Client/Namespace','List.php',34],['lib/phpexcel/PHPExcel/Writer','CSV.php',79],['lib/google/src/Google/Service','Tasks.php',44],['lib/dml','mysqli_native_moodle_recordset.php',42],['lib/google/src/Google/Service','GamesManagement.php',50],['lib/minify/lib/Minify','Source.php',43],['lib/jabber/XMPP','Roster.php',48],['lib/lessphp/Tree','Element.php',19],['lib/classes','string_manager_install.php',43],['question/type','questiontypebase.php',55],['question/type','questiontypebase.php',1442],['lib/form','filemanager.php',54],['lib/form','filemanager.php',316],['lib/htmlpurifier/HTMLPurifier/ChildDef','Custom.php',36],['backup/util/ui','renderer.php',813],['lib/simplepie/library/SimplePie','Rating.php',73],['lib/phpexcel/PHPExcel/Cell','Hyperlink.php',44],['question/classes/statistics/questions','calculator.php',66],['backup/moodle2','backup_xml_transformer.class.php',50],['lib/google/src/Google/Service','Resource.php',62],['lib/form','autocomplete.php',56],['lib/phpexcel/PHPExcel/Worksheet','RowIterator.php',60],['mod/lesson/classes','file_info.php',45],['question/type/tests','question_first_matching_answer_grading_strategy_test.php',40],['lib/google/src/Google/Service','Partners.php',43],['cache','lib.php',66],['cache','lib.php',109],['cache','lib.php',138],['cache','lib.php',183],['grade/edit/tree','lib.php',57],['grade/edit/tree','lib.php',635],['grade/edit/tree','lib.php',668],['grade/edit/tree','lib.php',834],['lib/simplepie/library/SimplePie','Cache.php',69],['mod/wiki/diff','difflib.php',277],['mod/wiki/diff','difflib.php',381],['mod/wiki/diff','difflib.php',478],['lib/pear/HTML/QuickForm','select.php',58],['lib/classes/output','mustache_javascript_helper.php',40],['lib/phpexcel/PHPExcel/Reader/Excel2007','Theme.php',68],['mod/data','export_form.php',16],['lib/pear/HTML/QuickForm','autocomplete.php',67],['question/type/shortanswer','question.php',44],['lib/google/src/Google/Service','AndroidPublisher.php',52],['lib/google/src/Google/Verifier','Pem.php',31],['lib/classes/antivirus','scanner.php',41],['lib/phpexcel/PHPExcel/Reader','Excel5.php',414],['lib/horde/framework/Horde/Imap/Client/Auth','DigestMD5.php',69],['lib/classes/output','mustache_filesystem_loader.php',39],['lib/classes/output','inplace_editable.php',107],['lib/adodb/drivers','adodb-informix.inc.php',37],['competency/classes','competency_rule.php',45],['lib/phpexcel/PHPExcel','RichText.php',37],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',59],['lib/pear/HTML/QuickForm','input.php',38],['repository/picasa','lib.php',41],['mod/feedback/classes','structure.php',48],['backup/util/plan','backup_structure_step.class.php',38],['question/classes/bank','random_question_loader.php',61],['mod/quiz/report/statistics/classes','calculated.php',43],['lib/horde/framework/Horde/Stream','String.php',27],['backup/util/helper','restore_decode_content.class.php',50],['backup/util/helper','restore_decode_content.class.php',125],['mod/workshop/backup/moodle1','lib.php',308],['lib/google/src/Google/Service','YouTubeReporting.php',47],['grade/export/txt','grade_export_txt.php',27],['lib/mustache/src/Mustache/Exception','SyntaxException.php',23],['lib/tcpdf','tcpdf_barcodes_2d.php',58],['mod/imscp','locallib.php',289],['lib/form','selectyesno.php',42],['lib/horde/framework/Horde/Mail/Transport','Smtphorde.php',62],['mod/lti/service/toolsettings/classes/local/service','toolsettings.php',41],['mod/lti/service/profile/classes/local/service','profile.php',41],['repository/flickr_public','lib.php',49],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','BackgroundPosition.php',57],['admin/tool/lp/classes/output','template_cohorts_table.php',53],['lib/simplepie/library','SimplePie.php',611],['lib/horde/framework/Horde/Imap/Client/Base','Debug.php',55],['lib/google/src/Google/Service','Reseller.php',44],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Border.php',18],['lib/testing/generator','component_generator_base.php',45],['lib/horde/framework/Horde/Translation/Handler','Gettext.php',34],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooter.php',175],['lib/classes','plugin_manager.php',91],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',28],['lib/horde/framework/Horde/Support','CombineStream.php',29],['lib/xmldb','xmldb_field.php',84],['lib/adodb/drivers','adodb-ibase.inc.php',59],['lib/adodb/drivers','adodb-ibase.inc.php',764],['lib/htmlpurifier/HTMLPurifier/AttrDef','URI.php',23],['admin/roles/classes','view_role_definition_table.php',28],['lib/google/src/Google/Cache','Memcache.php',44],['lib/pear/HTML/QuickForm','radio.php',48],['lib/filebrowser','file_info_context_coursecat.php',39],['lib/spout/src/Spout/Writer/ODS/Internal','Workbook.php',37],['mod/workshop/eval/best','lib.php',44],['lib/phpexcel/PHPExcel/Writer/PDF','DomPDF.php',38],['grade/report','lib.php',156],['lib','csslib.php',1501],['lib','csslib.php',1587],['lib','csslib.php',2068],['lib','csslib.php',2136],['lib','csslib.php',2242],['availability/classes','info_module.php',40],['mod/book','locallib.php',414],['question/engine','datalib.php',68],['question/engine','datalib.php',1331],['question/engine','datalib.php',1632],['question/engine','datalib.php',1740],['question/engine','datalib.php',1870],['question/engine','datalib.php',1941],['webservice','lib.php',745],['webservice','lib.php',841],['lib/adodb/drivers','adodb-informix72.inc.php',59],['lib/adodb/drivers','adodb-informix72.inc.php',399],['lib/adodb','adodb-pager.inc.php',60],['user/classes/output/myprofile','category.php',68],['lib/lessphp/Visitor','extendFinder.php',15],['backup/util/settings','base_setting.class.php',89],['backup/util/settings','base_setting.class.php',556],['lib','filelib.php',2720],['lib','filelib.php',3601],['lib/phpunit/classes','database_driver_testcase.php',55],['lib/phpexcel/PHPExcel/Shared/OLE/PPS','File.php',32],['report/competency/classes/output','report.php',56],['lib/google/src/Google/Service','Computeaccounts.php',49],['question/type','edit_question_form.php',96],['lib/filebrowser','file_info_context_user.php',39],['admin/tool/lp/classes/output','template_plans_page.php',37],['lib/phpexcel/PHPExcel','Style.php',93],['lib/minify/lib/Minify','HTML.php',49],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ListStyle.php',20],['lib/form','password.php',44],['backup','backup.class.php',146],['mod/feedback/classes','course_select_form.php',39],['lib/google/src/Google/Auth','AppIdentity.php',39],['lib/adodb','adodb-active-record.inc.php',121],['lib/phpexcel/PHPExcel','Chart.php',169],['lib/horde/framework/Horde/Mail/Rfc822','List.php',61],['admin/roles/classes','allow_switch_page.php',33],['lib/grade','grade_object.php',80],['lib/google/src/Google/IO','Exception.php',29],['auth/lti','auth.php',38],['mod/quiz/report/statistics/classes','calculator.php',39],['lib/htmlpurifier','HTMLPurifier.php',104],['admin/tool/lp/classes/output','user_competency_summary_in_plan.php',47],['mod/assign/feedback/editpdf/classes','widget.php',53],['lib/evalmath','evalmath.class.php',120],['lib/form','url.php',46],['lib/dml','pdo_moodle_recordset.php',41],['lib/htmlpurifier/HTMLPurifier/TagTransform','Simple.php',19],['backup/cc/cc_lib','xmlbase.php',52],['badges/lib','bakerlib.php',52],['lib/google/src/Google/Signer','P12.php',35],['availability/classes','info_section.php',40],['lib/form','static.php',47],['backup/converter','convertlib.php',52],['backup/converter','convertlib.php',277],['lib/google/src/Google/Service','YouTubeAnalytics.php',56],['admin/roles/classes','check_capability_table.php',40],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',14],['lib/adodb/drivers','adodb-postgres64.inc.php',127],['lib/adodb/drivers','adodb-postgres64.inc.php',919],['backup/util/helper','restore_prechecks_helper.class.php',213],['user/profile','lib.php',59],['lib/google/src/Google/Service','Admin.php',40],['lib/spout/src/Spout/Reader/CSV','RowIterator.php',62],['lib/google/src/Google/Service','MapsEngine.php',66],['lib','listlib.php',82],['lib','listlib.php',485],['lib/phpexcel/PHPExcel/Writer','HTML.php',128],['backup/moodle2','restore_activity_task.class.php',48],['lib/htmlpurifier/HTMLPurifier','HTMLModuleManager.php',68],['lib/simplepie/library/SimplePie','Source.php',61],['completion','data_object.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','ID.php',28],['grade/report/singleview/classes/local/ui','dropdown_attribute.php',49],['lib/horde/framework/Horde/Support','Stack.php',18],['lib/google/src/Google/Cache','File.php',41],['lib/horde/framework/Horde/Mail/Transport','Mock.php',76],['backup/util/ui','backup_moodleform.class.php',41],['availability/condition/grouping/classes','condition.php',46],['lib/classes/session','memcache.php',50],['cache/classes','dummystore.php',62],['badges/classes','assertion.php',49],['lib/xhprof/xhprof_lib/utils','xhprof_runs.php',87],['availability/tests/fixtures','mock_condition.php',52],['lib/mustache/src/Mustache/Loader','FilesystemLoader.php',33],['mod/quiz/report','attemptsreport_options.php',95],['lib/phpexcel/PHPExcel/Writer/PDF','tcPDF.php',39],['lib/minify/lib/Minify/CSS','Compressor.php',51],['lib/google/src/Google/Service','Dns.php',53],['question/type/calculatedmulti','edit_calculatedmulti_form.php',47],['backup/moodle2','restore_block_task.class.php',45],['lib/phpexcel/PHPExcel/Worksheet','AutoFilter.php',54],['lib/form','recaptcha.php',48],['lib','csvlib.class.php',64],['lib','csvlib.class.php',398],['lib/simplepie/library/SimplePie/Cache','File.php',82],['lib/phpexcel/PHPExcel/Chart','Legend.php',75],['lib/phpexcel/PHPExcel','WorksheetIterator.php',44],['cache/classes','loaders.php',196],['cache/classes','loaders.php',1189],['cache/classes','loaders.php',1586],['lib/google/src/Google/Service','Appengine.php',44],['admin/tool/lp/classes/output','template_cohorts_page.php',37],['search/classes','engine.php',77],['backup/cc/cc_lib','cc_assesment_essay.php',25],['lib/classes/progress','display.php',48],['lib/lessphp/Tree','Call.php',19],['course/format','lib.php',78],['question/type/calculated','datasetdefinitions_form.php',53],['lib/google/src/Google/Service','Translate.php',40],['enrol/database','settingslib.php',34],['lib/lessphp/Tree/Mixin','Call.php',14],['admin/tool/log/store/standard/classes/log','store.php',37],['lib/google/src/Google/Service','Urlshortener.php',40],['lib/horde/framework/Horde/Imap/Client','Socket.php',168],['lib/tests','collator_test.php',310],['lib/google/src/Google/Auth','Simple.php',31],['backup/cc/cc_lib','cc_manifest.php',45],['lib/bennu','iCalendar_properties.php',28],['lib/bennu','iCalendar_properties.php',220],['lib/bennu','iCalendar_properties.php',238],['lib/bennu','iCalendar_properties.php',259],['lib/bennu','iCalendar_properties.php',275],['lib/bennu','iCalendar_properties.php',296],['lib/bennu','iCalendar_properties.php',343],['lib/bennu','iCalendar_properties.php',358],['lib/bennu','iCalendar_properties.php',376],['lib/bennu','iCalendar_properties.php',391],['lib/bennu','iCalendar_properties.php',406],['lib/bennu','iCalendar_properties.php',447],['lib/bennu','iCalendar_properties.php',462],['lib/bennu','iCalendar_properties.php',485],['lib/bennu','iCalendar_properties.php',509],['lib/bennu','iCalendar_properties.php',524],['lib/bennu','iCalendar_properties.php',555],['lib/bennu','iCalendar_properties.php',573],['lib/bennu','iCalendar_properties.php',594],['lib/bennu','iCalendar_properties.php',637],['lib/bennu','iCalendar_properties.php',680],['lib/bennu','iCalendar_properties.php',724],['lib/bennu','iCalendar_properties.php',747],['lib/bennu','iCalendar_properties.php',782],['lib/bennu','iCalendar_properties.php',808],['lib/bennu','iCalendar_properties.php',849],['lib/bennu','iCalendar_properties.php',864],['lib/bennu','iCalendar_properties.php',905],['lib/bennu','iCalendar_properties.php',938],['lib/bennu','iCalendar_properties.php',952],['lib/bennu','iCalendar_properties.php',965],['lib/bennu','iCalendar_properties.php',987],['lib/bennu','iCalendar_properties.php',1017],['lib/bennu','iCalendar_properties.php',1031],['lib/bennu','iCalendar_properties.php',1061],['lib/bennu','iCalendar_properties.php',1075],['lib/bennu','iCalendar_properties.php',1098],['lib/bennu','iCalendar_properties.php',1110],['lib/bennu','iCalendar_properties.php',1139],['lib/bennu','iCalendar_properties.php',1160],['lib/bennu','iCalendar_properties.php',1181],['lib/bennu','iCalendar_properties.php',1203],['lib/bennu','iCalendar_properties.php',1227],['lib/bennu','iCalendar_properties.php',1260],['lib/bennu','iCalendar_properties.php',1386],['lib/bennu','iCalendar_properties.php',1407],['lib/bennu','iCalendar_properties.php',1429],['lib/bennu','iCalendar_properties.php',1450],['lib/mustache/src/Mustache/Exception','UnknownTemplateException.php',22],['lib/phpmailer','moodle_phpmailer.php',47],['availability/tests/fixtures','mock_info.php',40],['lib/horde/framework/Horde/Mail/Transport','Smtpmx.php',138],['admin/tool/lp/classes/form','persistent.php',68],['lib/adodb/drivers','adodb-mysqlt.inc.php',32],['lib/adodb/drivers','adodb-mysqlt.inc.php',96],['webservice/tests','lib_test.php',213],['lib/horde/framework/Horde/Imap/Client/Data/Format','Mailbox.php',35],['filter','local_settings_form.php',33],['mod/quiz/accessrule','accessrulebase.php',52],['lib/horde/framework/Horde/Exception','Wrapped.php',16],['mod/assign/feedback/editpdf/fpdi','pdf_parser.php',170],['lib/lessphp/Tree','Dimension.php',15],['lib/minify/lib/HTTP','ConditionalGet.php',109],['lib/adodb/perf','perf-oci8.inc.php',203],['lib/phpexcel','PHPExcel.php',361],['backup/util/helper','restore_questions_parser_processor.class.php',42],['backup/moodle2','backup_plugin.class.php',44],['lib/classes/antivirus','scanner_exception.php',38],['webservice/xmlrpc','lib.php',43],['report/loglive/classes','renderable.php',73],['course','dnduploadlib.php',109],['course','dnduploadlib.php',407],['lib/filebrowser','file_info.php',43],['lib/adodb/drivers','adodb-access.inc.php',34],['lib/adodb/drivers','adodb-access.inc.php',83],['mod/feedback/classes','responses_table.php',54],['lib/editor/tinymce','adminlib.php',36],['admin/tool/monitor/classes','rule.php',44],['lib/google/src/Google/Service','AdExchangeBuyer.php',55],['lib/filebrowser','virtual_root_file.php',45],['lib/phpexcel/PHPExcel/RichText','Run.php',35],['admin/tool/monitor/classes/output/managesubs','subs.php',51],['auth/cas/CAS/CAS','ProxyChain.php',48],['lib/htmlpurifier/HTMLPurifier','DefinitionCache.php',22],['lib/google/src/Google/Service','CivicInfo.php',40],['mod/feedback/classes/output','summary.php',52],['lib/minify/lib/Minify','Build.php',77],['lib/adodb/drivers','adodb-ado_mssql.inc.php',146],['lib/adodb/drivers','adodb-odbc.inc.php',44],['lib/adodb/drivers','adodb-odbc.inc.php',611],['lib','moodlelib.php',9421],['lib','moodlelib.php',9632],['user/selector','lib.php',85],['user/selector','lib.php',674],['admin/tool/lp/classes/output','plan_page.php',49],['repository/dropbox','lib.php',49],['lib/horde/framework/Horde/Mime','Part.php',261],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','CachingStrategyFactory.php',56],['lib/phpexcel/PHPExcel/Chart','Layout.php',143],['lib/mustache/src/Mustache/Loader','CascadingLoader.php',20],['lib/phpexcel/PHPExcel/Shared/JAMA','EigenvalueDecomposition.php',777],['lib/google/src/Google/Service','Books.php',60],['lib/google/src/Google/Service','Oauth2.php',50],['admin/tool/log/classes/log','store.php',30],['admin/tool/recyclebin/classes','category_bin.php',45],['lib/phpexcel/PHPExcel/Style','Color.php',64],['lib/phpexcel/PHPExcel/Worksheet','SheetView.php',69],['lib/htmlpurifier/HTMLPurifier/Token','Text.php',34],['lib/classes/update','checker.php',50],['lib/horde/framework/Horde/Socket','Client.php',52],['lib/phpexcel/PHPExcel/CachedObjectStorage','APC.php',243],['lib/horde/framework/Horde/Imap/Client/Cache','Backend.php',33],['lib/phpexcel/PHPExcel/Chart','Title.php',45],['lib/horde/framework/Horde/Imap/Client/Data','Format.php',32],['lib/adodb/drivers','adodb-text.inc.php',93],['lib/adodb/drivers','adodb-text.inc.php',379],['lib/phpexcel/PHPExcel','Calculation.php',2071],['lib/adodb/drivers','adodb-sqlite.inc.php',36],['lib/adodb/drivers','adodb-sqlite.inc.php',367],['lib/google/src/Google/Service','Analytics.php',77],['blocks/lp/classes/output','plans_to_review_page.php',48],['lib/google/src/Google/Service','Coordinate.php',48],['availability/condition/group/classes','condition.php',43],['lib/lessphp/Exception','Chunk.php',19],['lib/htmlpurifier/HTMLPurifier','PropertyListIterator.php',22],['backup/cc/cc_lib','cc_resources.php',102],['lib/horde/framework/Horde/Mail/Rfc822','Group.php',45],['backup/util/structure','base_optigroup.class.php',35],['backup/util/structure','base_optigroup.class.php',169],['question/classes/statistics/questions','calculated.php',181],['lib/horde/framework/Horde/Imap/Client/Interaction','Command.php',72],['lib/htmlpurifier/HTMLPurifier/Strategy','Core.php',8],['lib/htmlpurifier/HTMLPurifier/Filter','ExtractStyleBlocks.php',57],['backup/cc/cc_lib','cc_converter_url.php',29],['lib/xmldb','xmldb_structure.php',40],['lib/ddl','sqlite_sql_generator.php',73],['lib/pear/HTML/QuickForm','Renderer.php',31],['backup/util/helper','restore_moodlexml_parser_processor.class.php',38],['lib/pear/HTML/QuickForm','file.php',54],['lib/minify/lib/Minify/Cache','File.php',9],['lib/pear/HTML/QuickForm','xbutton.php',39],['lib/htmlpurifier','locallib.php',134],['admin/tool/recyclebin/classes','course_bin.php',45],['backup/util/plan','backup_task.class.php',32],['backup/util/plan','backup_task.class.php',56],['lib/phpexcel/PHPExcel/CachedObjectStorage','PHPTemp.php',174],['backup/util/helper','backup_helper.class.php',381],['lib/form','htmleditor.php',48],['lib','oauthlib.php',65],['lib','oauthlib.php',409],['auth/cas/CAS/CAS/PGTStorage','File.php',105],['auth/cas/CAS/CAS/ProxiedService','Imap.php',51],['repository/skydrive','lib.php',42],['lib/htmlpurifier/HTMLPurifier','ErrorCollector.php',57],['lib/classes/lock','postgres_lock_factory.php',81],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite.php',260],['lib/horde/framework/Horde/Support','ConsistentHash.php',56],['lib/horde/framework/Horde/Exception','Pear.php',22],['lib/portfolio','exceptions.php',50],['backup/moodle2','restore_plugin.class.php',43],['lib/phpexcel/PHPExcel/CachedObjectStorage','DiscISAM.php',177],['lib/google/src/Google/Service','DoubleClickBidManager.php',40],['lib/minify/lib/Minify/JS','ClosureCompiler.php',101],['lib/horde/framework/Horde/Imap/Client/Data/Format','String.php',38],['lib/form','dateselector.php',70],['lib/spout/src/Spout/Common/Helper','EncodingHelper.php',38],['report/competency/classes/output','user_course_navigation.php',51],['lib/adodb/drivers','adodb-postgres7.inc.php',98],['lib/adodb/drivers','adodb-postgres7.inc.php',311],['lib/adodb/drivers','adodb-postgres7.inc.php',342],['lib/lessphp/Tree','Alpha.php',13],['mod/lti/service/memberships/classes/local/resource','linkmemberships.php',46],['lib/tcpdf','tcpdf.php',1822],['lib/adodb/drivers','adodb-sybase.inc.php',47],['lib/adodb/drivers','adodb-sybase.inc.php',313],['lib/adodb/drivers','adodb-sybase.inc.php',394],['lib/phpexcel/PHPExcel/Chart','PlotArea.php',44],['lib/phpexcel/PHPExcel/Chart','DataSeries.php',136],['mod/lesson','editpage_form.php',41],['question/classes/statistics/responses','analysis_for_question.php',58],['lib/horde/framework/Horde','Domhtml.php',53],['lib','formslib.php',142],['lib','formslib.php',1442],['lib','formslib.php',2653],['rating','lib.php',114],['rating','lib.php',1070],['lib/phpexcel/PHPExcel/Worksheet','Column.php',44],['lib/google/src/Google/Service','Script.php',67],['lib/adodb','adodb-xmlschema.inc.php',118],['lib/adodb','adodb-xmlschema.inc.php',245],['lib/adodb','adodb-xmlschema.inc.php',637],['lib/adodb','adodb-xmlschema.inc.php',781],['lib/adodb','adodb-xmlschema.inc.php',982],['lib/adodb','adodb-xmlschema.inc.php',1295],['lib/google/src/Google/Service','DeploymentManager.php',54],['mod/quiz','attemptlib.php',41],['mod/quiz','attemptlib.php',82],['mod/quiz','attemptlib.php',546],['mod/quiz','attemptlib.php',2337],['mod/quiz','attemptlib.php',2392],['backup/cc/cc_lib','cc_converter_forum.php',29],['lib','boxlib.php',264],['lib/simplepie/library/SimplePie','Restriction.php',81],['admin/roles/classes','allow_assign_page.php',31],['lib/adodb/drivers','adodb-pdo.inc.php',90],['lib/adodb/drivers','adodb-pdo.inc.php',553],['lib/adodb/drivers','adodb-pdo.inc.php',630],['tag/classes/output','tagareacollection.php',40],['admin/tool/lp/classes','template_statistics.php',62],['lib','weblib.php',313],['lib','weblib.php',3183],['lib','weblib.php',3483],['lib','weblib.php',3518],['lib','weblib.php',3593],['backup/cc/cc_lib','cc_converter_basiclti.php',29],['lib/html2text','Html2Text.php',232],['mod/assign/feedback/editpdf/classes','annotation.php',66],['lib/pear/HTML/QuickForm/Renderer','Array.php',143],['question/engine','lib.php',774],['question/engine','lib.php',1011],['question/engine','lib.php',1059],['lib/jabber/XMPP','XMLObj.php',76],['lib/horde/framework/Horde/Exception','PermissionDenied.php',15],['lib/editor/atto','adminlib.php',109],['lib/pear/HTML/QuickForm/Renderer','Tableless.php',116],['grade/report/history/classes/output','tablelog.php',72],['lib/google/src/Google/IO','Curl.php',38],['lib/editor/tinymce/plugins/spellchecker/classes/utils','Logger.php',31],['lib/pear/HTML/QuickForm','hiddenselect.php',41],['backup/util/ui','backup_ui_setting.class.php',70],['backup/util/ui','backup_ui_setting.class.php',200],['backup/util/ui','backup_ui_setting.class.php',398],['backup/util/ui','backup_ui_setting.class.php',504],['backup/util/ui','backup_ui_setting.class.php',583],['lib/adodb/drivers','adodb-mysqlpo.inc.php',35],['lib/adodb/drivers','adodb-mysqlpo.inc.php',82],['lib/adodb/drivers','adodb-mysqlpo.inc.php',119],['lib/google/src/Google/Service','Blogger.php',50],['backup/util/xml/output','file_xml_output.class.php',37],['lib/form','tags.php',75],['admin/tool/installaddon/classes','installer.php',219],['lib/htmlpurifier/HTMLPurifier/AttrDef','Enum.php',30],['lib/simplepie/library/SimplePie','IRI.php',252],['comment','locallib.php',39],['question/engine','states.php',61],['lib/spout/src/Spout/Reader/XLSX/Helper','CellValueFormatter.php',52],['lib/google/src/Google/Service','Dataflow.php',45],['mod/data','locallib.php',66],['mod/data','locallib.php',433],['lib/horde/framework/Horde','Variables.php',60],['backup/util/ui','base_ui.class.php',84],['lib/simplepie/library/SimplePie','Registry.php',99],['cache/locks/file','lib.php',66],['question/classes/statistics/responses','analysis_for_class.php',68],['lib/filebrowser','file_info_stored.php',51],['tag/classes/output','tagcollname.php',42],['competency/classes','persistent.php',54],['admin/tool/lp/classes/output','competency_plan_navigation.php',54],['lib/phpexcel/PHPExcel/Cell','DataValidation.php',146],['lib/pear/HTML/QuickForm','textarea.php',48],['lib/lessphp','Visitor.php',14],['lib/google/src/Google/Service','CloudUserAccounts.php',52],['question/classes/bank','column_base.php',44],['lib/minify/lib/MrClay','Cli.php',74],['lib','outputcomponents.php',80],['lib','outputcomponents.php',204],['lib','outputcomponents.php',469],['lib','outputcomponents.php',523],['lib','outputcomponents.php',589],['lib','outputcomponents.php',665],['lib','outputcomponents.php',783],['lib','outputcomponents.php',925],['lib','outputcomponents.php',1009],['lib','outputcomponents.php',2183],['lib','outputcomponents.php',2222],['lib','outputcomponents.php',2295],['lib','outputcomponents.php',2376],['lib','outputcomponents.php',2579],['lib','outputcomponents.php',2627],['lib','outputcomponents.php',2687],['lib','outputcomponents.php',2860],['lib','outputcomponents.php',3030],['lib','outputcomponents.php',3134],['lib','outputcomponents.php',3201],['lib','outputcomponents.php',3329],['lib','outputcomponents.php',3613],['lib','outputcomponents.php',3642],['lib','outputcomponents.php',3668],['lib','outputcomponents.php',3690],['lib','outputcomponents.php',3719],['lib','outputcomponents.php',3751],['lib/google/src/Google/Service','Pagespeedonline.php',39],['lib/phpexcel/PHPExcel','Cell.php',114],['lib/dml','sqlsrv_native_moodle_recordset.php',40],['repository/wikimedia','wikimedia.php',35],['lib/phpexcel/PHPExcel/Style','Fill.php',81],['lib/google/src/Google/Service','Cloudresourcemanager.php',42],['lib/editor/tinymce/classes','plugin.php',49],['mod/wiki/parser/markups','html.php',21],['lib/simplepie/library/SimplePie/Parse','Date.php',536],['lib/horde/framework/Horde/Support','Inflector.php',115],['question/type/gapselect','question.php',55],['lib/google/src/Google','Config.php',33],['badges/criteria','award_criteria_activity.php',45],['backup/util/xml/output','xml_output.class.php',52],['backup/util/xml/output','xml_output.class.php',158],['course/format/topics','renderer.php',38],['lib/adodb/drivers','adodb-oci8po.inc.php',33],['lib/adodb/drivers','adodb-oci8po.inc.php',99],['mod/workshop/allocation/random','lib.php',52],['mod/workshop/allocation/random','lib.php',727],['backup/util/structure','base_final_element.class.php',38],['backup/util/structure','base_final_element.class.php',239],['backup/util/structure','base_final_element.class.php',256],['lib/htmlpurifier/HTMLPurifier','Zipper.php',25],['lib/horde/framework/Horde/Imap/Client/Data','Thread.php',41],['lib/mustache/src/Mustache/Exception','UnknownHelperException.php',22],['backup/util/settings/activity','activity_backup_setting.class.php',25],['lib/filestorage','tgz_packer.php',749],['lib/filestorage','tgz_packer.php',831],['tag/classes','index_builder.php',96],['lib/pear/HTML/QuickForm','reset.php',37],['lib/classes/lock','lock.php',55],['admin/roles/classes','assign_user_selector_base.php',40],['backup/util/output','output_controller.class.php',44],['question/type/randomsamatch','question.php',114],['lib/google/src/Google/Service','Customsearch.php',38],['lib/lessphp/Tree','Extend.php',28],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',215],['lib/google/src/Google/Service','TagManager.php',67],['question/type/gapselect/tests','edit_form_test.php',41],['mod/lesson','locallib.php',2004],['mod/lesson','locallib.php',2611],['backup/util/helper','restore_structure_parser_processor.class.php',41],['course','renderer.php',52],['backup/util/xml/parser/processors','selective_exact_parser_processor.class.php',35],['lib','modinfolib.php',429],['lib','modinfolib.php',1665],['lib','modinfolib.php',2492],['lib','tablelib.php',128],['lib','tablelib.php',1468],['lib','tablelib.php',1633],['lib','tablelib.php',1698],['user/filters','cohort.php',36],['user/filters','text.php',37],['lib','outputrenderers.php',120],['lib','outputrenderers.php',285],['lib','outputrenderers.php',408],['lib','outputrenderers.php',4578],['lib','outputrenderers.php',4831],['repository','lib.php',116],['repository','lib.php',533],['lib','adminlib.php',791],['lib','adminlib.php',1138],['lib','adminlib.php',1212],['lib','adminlib.php',1355],['lib','adminlib.php',1556],['lib','adminlib.php',1928],['lib','adminlib.php',2040],['lib','adminlib.php',2106],['lib','adminlib.php',2199],['lib','adminlib.php',2260],['lib','adminlib.php',2302],['lib','adminlib.php',2341],['lib','adminlib.php',2429],['lib','adminlib.php',2463],['lib','adminlib.php',2621],['lib','adminlib.php',2706],['lib','adminlib.php',2935],['lib','adminlib.php',3091],['lib','adminlib.php',3233],['lib','adminlib.php',3324],['lib','adminlib.php',3488],['lib','adminlib.php',3571],['lib','adminlib.php',3682],['lib','adminlib.php',3833],['lib','adminlib.php',4067],['lib','adminlib.php',4134],['lib','adminlib.php',4352],['lib','adminlib.php',4381],['lib','adminlib.php',4410],['lib','adminlib.php',4434],['lib','adminlib.php',4464],['lib','adminlib.php',4500],['lib','adminlib.php',4535],['lib','adminlib.php',4567],['lib','adminlib.php',4657],['lib','adminlib.php',4690],['lib','adminlib.php',4748],['lib','adminlib.php',4790],['lib','adminlib.php',4814],['lib','adminlib.php',4840],['lib','adminlib.php',4863],['lib','adminlib.php',4880],['lib','adminlib.php',4925],['lib','adminlib.php',4943],['lib','adminlib.php',5002],['lib','adminlib.php',5045],['lib','adminlib.php',5080],['lib','adminlib.php',5123],['lib','adminlib.php',5206],['lib','adminlib.php',5336],['lib','adminlib.php',5378],['lib','adminlib.php',5423],['lib','adminlib.php',5480],['lib','adminlib.php',5496],['lib','adminlib.php',5552],['lib','adminlib.php',5777],['lib','adminlib.php',5831],['lib','adminlib.php',5885],['lib','adminlib.php',5902],['lib','adminlib.php',5950],['lib','adminlib.php',5992],['lib','adminlib.php',6043],['lib','adminlib.php',6099],['lib','adminlib.php',6328],['lib','adminlib.php',6508],['lib','adminlib.php',6688],['lib','adminlib.php',6782],['lib','adminlib.php',6931],['lib','adminlib.php',7088],['lib','adminlib.php',7712],['lib','adminlib.php',8147],['lib','adminlib.php',8330],['lib','adminlib.php',8617],['lib','adminlib.php',8764],['lib','adminlib.php',8924],['lib','adminlib.php',9071],['lib','adminlib.php',9235],['lib','adminlib.php',9428],['lib','adminlib.php',9482],['lib','adminlib.php',9544],['lib','adminlib.php',9589],['lib','adminlib.php',9626],['backup/cc/cc_lib','cc_organization.php',47],['backup/cc/cc_lib','cc_organization.php',145],['lib/phpexcel/PHPExcel/Chart','DataSeriesValues.php',81],['lib/horde/framework/Horde/Mail/Rfc822','Identification.php',34],['question/type/numerical','questiontype.php',507],['auth/mnet','auth.php',35],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',68],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',29],['auth/imap','auth.php',35],['tag/classes/output','taglist.php',54],['lib','pdflib.php',161],['lib/phpexcel/PHPExcel/RichText','TextElement.php',35],['lib/dml','database_column_info.php',112],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportExtension.php',33],['mod/wiki/editors','wikieditor.php',36],['lib/lessphp/SourceMap','Base64VLQ.php',67],['repository/s3','lib.php',44],['admin/tool/uploadcourse/classes','course.php',111],['lib/google/src/Google/Service','Replicapoolupdater.php',51],['lib/horde/framework/Horde/Imap/Client/Data/Format','Date.php',25],['lib/bennu','iCalendar_components.php',21],['lib/bennu','iCalendar_components.php',333],['lib/bennu','iCalendar_components.php',355],['lib/bennu','iCalendar_components.php',433],['lib/bennu','iCalendar_components.php',513],['lib/bennu','iCalendar_components.php',551],['lib/bennu','iCalendar_components.php',602],['lib/bennu','iCalendar_components.php',659],['lib/bennu','iCalendar_components.php',679],['lib/phpexcel/PHPExcel/Calculation','FormulaToken.php',102],['mod/feedback/item','feedback_item_class.php',28],['lib/adodb/drivers','adodb-mssql_n.inc.php',245],['lib','badgeslib.php',133],['lib/pear/HTML/QuickForm','text.php',38],['lib/simplepie/library/SimplePie','Enclosure.php',219],['calendar/classes','rrule_manager.php',182],['auth/webservice','auth.php',35],['lib','outputrequirementslib.php',171],['mod/lti/service/toolsettings/classes/local/resource','contextsettings.php',44],['lib','questionlib.php',1261],['lib','questionlib.php',1505],['lib','uploadlib.php',40],['lib/spout/src/Spout/Writer/Common/Helper','ZipHelper.php',28],['lib/google/src/Google/Service','Cloudsearch.php',40],['backup/util/structure','backup_nested_element.class.php',44],['lib/spout/src/Spout/Writer/Common','Sheet.php',39],['question/behaviour','behaviourbase.php',50],['blocks/rss_client/classes/output','footer.php',47],['lib/dtl','file_xml_database_importer.php',34],['admin/roles/classes','capability_table_with_risks.php',45],['lib/adodb/drivers','adodb-mssql.inc.php',110],['lib/adodb/drivers','adodb-mssql.inc.php',870],['lib/adodb/drivers','adodb-mssql.inc.php',1077],['lib/google/src/Google/Service','Bigquery.php',62],['lib/google/src/Google/Service','ShoppingContent.php',50],['mod/lti','OAuth.php',73],['mod/lti','OAuth.php',89],['mod/lti','OAuth.php',244],['mod/lti','OAuth.php',499],['repository/equella','lib.php',42],['lib/phpexcel/PHPExcel/Worksheet','PageMargins.php',80],['backup/cc/cc_lib','cc_converter_quiz.php',33],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',60],['lib/phpexcel/PHPExcel/Shared/trend','polynomialBestFitClass.php',199],['backup/util/helper','restore_decode_processor.class.php',47],['backup/util/helper','restore_decode_processor.class.php',182],['cache/classes','helper.php',90],['lib/simplepie/library/SimplePie','Credit.php',81],['lib/classes','chart_series.php',62],['lib/classes/dml','recordset_walk.php',64],['lib/google/src/Google/Service','Webmasters.php',47],['lib/tcpdf/include/barcodes','qrcode.php',631],['backup/moodle2','backup_settingslib.php',42],['backup/moodle2','backup_settingslib.php',138],['lib/spout/src/Spout/Writer/XLSX/Helper','SharedStringsHelper.php',40],['course/tests/fixtures','course_capability_assignment.php',60],['mod/forum/classes','subscriber_selector_base.php',53],['lib','blocklib.php',54],['lib','blocklib.php',152],['report/loglive/classes','table_log.php',50],['lib','navigationlib.php',147],['lib','navigationlib.php',1015],['lib','navigationlib.php',2825],['lib','navigationlib.php',3086],['lib','navigationlib.php',3412],['lib','navigationlib.php',3459],['lib','navigationlib.php',4888],['lib','navigationlib.php',5070],['lib/phpexcel/PHPExcel/Shared/JAMA','CholeskyDecomposition.php',41],['grade/report/history/classes/output','user_button.php',40],['user/filters','courserole.php',34],['lib/phpexcel/PHPExcel','IOFactory.php',69],['lib/lessphp/Tree','Color.php',15],['lib/phpexcel/PHPExcel/Worksheet','MemoryDrawing.php',70],['lib/adodb/drivers','adodb-vfp.inc.php',72],['lib/horde/framework/Horde/Support','Backtrace.php',20],['lib/google/src/Google/Service','Clouddebugger.php',50],['lib/horde/framework/Horde/Exception','NotFound.php',15],['admin/tool/lp/classes/output','user_competency_course_navigation.php',55],['lib/lessphp/Tree','UnicodeDescriptor.php',14],['lib/phpexcel/PHPExcel/Worksheet','PageSetup.php',277],['grade/report/singleview/classes/local/ui','bulk_insert.php',40],['lib','mathslib.php',45],['lib/filestorage','tgz_extractor.php',119],['lib/horde/framework/Horde/Imap/Client/Interaction/Command','Continuation.php',42],['lib/horde/framework/Horde/Imap/Client','Exception.php',247],['filter/emoticon/tests','filter_test.php',68],['mnet/xmlrpc','xmlparser.php',15],['lib/spout/src/Spout/Reader/XLSX','Sheet.php',31],['admin/roles/classes','capability_table_base.php',51],['lib/simplepie/library/SimplePie','Item.php',82],['lib/form','selectgroups.php',57],['auth/shibboleth','auth.php',38],['admin/tool/langimport/classes','controller.php',48],['lib/form','warning.php',49],['lib/filestorage','stored_file.php',63],['grade/grading/form/guide','guideeditor.php',49],['lib/pear/HTML/QuickForm','group.php',80],['backup/moodle2','restore_subplugin.class.php',45],['grade/export','lib.php',60],['grade/export','lib.php',625],['lib/phpexcel/PHPExcel/Style','NumberFormat.php',98],['backup/moodle2','backup_section_task.class.php',40],['lib/htmlpurifier/HTMLPurifier','Config.php',100],['lib','flickrlib.php',53],['mod/assign/classes/output','grading_app.php',59],['grade/report/singleview/classes/local/ui','grade_attribute_format.php',47],['user/profile/field/menu','field.class.php',39],['lib/spout/src/Spout/Writer/Common/Internal','AbstractWorkbook.php',30],['lib/portfolio','exporter.php',113],['lib','ddllib.php',80],['lib','ddllib.php',93],['lib','ddllib.php',107],['lib','ddllib.php',126],['lib','ddllib.php',140],['lib/horde/framework/Horde/Crypt','Blowfish.php',54],['lib/horde/framework/Horde','Secret.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef','Integer.php',36],['lib/classes/update','info.php',48],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','ValidatorAtom.php',31],['lib/lessphp/Tree','Anonymous.php',21],['admin/tool/lp/classes','course_competencies_form_element.php',43],['lib/lessphp/Tree','Comment.php',17],['auth/cas/CAS/CAS','OutOfSequenceBeforeAuthenticationCallException.php',47],['question/type/calculatedsimple','edit_calculatedsimple_form.php',72],['lib/adodb/drivers','adodb-mysql.inc.php',54],['lib/adodb/drivers','adodb-mysql.inc.php',717],['lib/adodb/drivers','adodb-mysql.inc.php',880],['enrol/ldap','lib.php',43],['mod/quiz/report/statistics','statistics_table.php',45],['lib/form','listing.php',68],['lib/google/src/Google/Service','Container.php',43],['mod/quiz','accessmanager.php',45],['lib/classes/message/inbound','processing_failed_exception.php',36],['blocks/online_users/classes','fetcher.php',45],['lib/pear/HTML/QuickForm','checkbox.php',48],['auth/cas/CAS/CAS','OutOfSequenceBeforeProxyException.php',48],['mod/lti/service/toolproxy/classes/local/service','toolproxy.php',41],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','URI.php',15],['lib/classes','chart_axis.php',65],['mod/glossary/classes','entry_query_builder.php',83],['mod/feedback/item/label','lib.php',26],['lib/adodb/drivers','adodb-mssqlnative.inc.php',131],['lib/adodb/drivers','adodb-mssqlnative.inc.php',847],['lib/adodb/drivers','adodb-mssqlnative.inc.php',1099],['lib/horde/framework/Horde/Imap/Client','Ids.php',78],['lib/form','editor.php',62],['lib','environmentlib.php',1258],['mod/workshop','fileinfolib.php',43],['mod/workshop','fileinfolib.php',198],['mod/feedback/classes','templates_table.php',39],['tag/classes','manage_table.php',44],['lib/adodb/drivers','adodb-odbc_db2.inc.php',115],['lib/adodb/drivers','adodb-odbc_db2.inc.php',309],['backup/cc/cc_lib/gral_lib','cssparser.php',21],['lib/horde/framework/Horde/Support','Array.php',21],['lib/google/src/Google/Service','GroupsMigration.php',40],['admin/tool/lp/classes/output','user_evidence_list_page.php',61],['lib/google/src/Google/Service','Audit.php',39],['lib/simplepie/library/SimplePie','File.php',68],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',62],['enrol/lti/classes','manage_table.php',62],['lib/simplepie/library/SimplePie/Content/Type','Sniffer.php',69],['question/type','questionbase.php',124],['question/type','questionbase.php',438],['question/type','questionbase.php',531],['question/type','questionbase.php',750],['question/type','questionbase.php',835],['question/type','questionbase.php',868],['question/type','questionbase.php',914],['question/type','questionbase.php',1013],['question/type/ddimageortext','question.php',64],['question/type/ddimageortext','question.php',122],['lib','excellib.class.php',47],['lib','excellib.class.php',155],['lib','excellib.class.php',456],['lib/minify/lib','CSSmin.php',43],['lib/dml','moodle_temptables.php',51],['lib/minify/lib/Minify/Cache','ZendPlatform.php',23],['backup/util/xml/parser','progressive_parser.class.php',79],['backup/util/xml/parser','progressive_parser.class.php',305],['blocks/rss_client/classes/output','block.php',47],['question/type/ddmarker','question.php',417],['question/type/ddmarker','question.php',469],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Percentage.php',18],['admin/tool/lp/classes/output','user_competency_summary_in_course.php',51],['backup/util/helper','convert_helper.class.php',378],['lib/classes/update','validator.php',265],['lib/lessphp/Tree','Attribute.php',16],['admin/tool/generator/classes','backend.php',84],['backup/util/loggers','file_logger.class.php',35],['lib/adodb','adodb-exceptions.inc.php',30],['lib/google/src/Google','Client.php',70],['user/filters','profilefield.php',36],['backup/util/helper','restore_inforef_parser_processor.class.php',37],['cache/tests/fixtures','lib.php',326],['mod/lti/service/profile/classes/local/resource','profile.php',43],['competency/classes','invalid_persistent_exception.php',38],['backup/util/plan','backup_plan.class.php',36],['backup/util/plan','backup_plan.class.php',130],['lib/phpexcel/PHPExcel/Writer/Excel2007','WriterPart.php',63],['backup/util/settings','setting_dependency.class.php',68],['backup/util/settings','setting_dependency.class.php',175],['backup/util/settings','setting_dependency.class.php',328],['backup/util/settings','setting_dependency.class.php',439],['backup/util/settings','setting_dependency.class.php',465],['backup/util/settings','setting_dependency.class.php',491],['backup/util/settings','setting_dependency.class.php',556],['backup/util/xml','xml_writer.class.php',57],['backup/util/xml','xml_writer.class.php',284],['enrol/imsenterprise','locallib.php',38],['enrol/imsenterprise','locallib.php',115],['lib/dml','moodle_database.php',139],['search/classes','base.php',69],['admin/tool/lp/classes/output','competency_summary.php',54],['lib','upgradelib.php',45],['lib','upgradelib.php',61],['lib','upgradelib.php',76],['lib','upgradelib.php',94],['lib','upgradelib.php',111],['lib/htmlpurifier/HTMLPurifier/AttrTransform','NameSync.php',11],['mod/workshop/form/rubric','lib.php',105],['grade','lib.php',103],['grade','lib.php',927],['grade','lib.php',1089],['grade','lib.php',2053],['grade','lib.php',2213],['lib/horde/framework/Horde/Imap/Client/Data','Acl.php',32],['lib/phpexcel/PHPExcel/Reader/Excel5','RC4.php',35],['lib/google/src/Google/Service','Datastore.php',46],['admin/tool/lpmigrate/classes','framework_processor.php',98],['lib/dtl','database_importer.php',61],['lib/horde/framework/Horde/Imap/Client/Password','Xoauth2.php',44],['badges/lib','awardlib.php',55],['backup/util/helper','backup_array_iterator.class.php',39],['admin/tool/monitor/classes','subscription.php',43],['question/type/calculated','edit_calculated_form.php',51],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','FileBasedStrategy.php',57],['lib/form','datetimeselector.php',72],['lib/horde/framework/Horde/Imap/Client','Base.php',153],['lib/classes','collator.php',58],['admin/tool/lp/classes','course_competency_statistics.php',48],['lib/google/src/Google/Service','Storage.php',57],['lib/spout/src/Spout/Reader/CSV','SheetIterator.php',28],['lib/lessphp/Tree','Paren.php',14],['mod/lti/classes','service_exception_handler.php',63],['lib/tcpdf/include/barcodes','pdf417.php',523],['mod/assign/feedback/offline','importgradeslib.php',66],['lib/filestorage','file_exceptions.php',36],['lib/filestorage','file_exceptions.php',57],['lib/filestorage','file_exceptions.php',89],['lib/filestorage','file_exceptions.php',108],['lib/filestorage','file_exceptions.php',129],['lib/horde/framework/Horde/Mail/Transport','Smtp.php',100],['lib/htmlpurifier/HTMLPurifier/ConfigSchema/Interchange','Id.php',17],['question/engine/upgrade','upgradelib.php',283],['question/engine/upgrade','upgradelib.php',384],['question/type/numerical','question.php',323],['lib/pear/PEAR','Exception.php',107],['course/format','renderer.php',44],['lib/dml','oci_native_moodle_recordset.php',34],['question/behaviour','behaviourtypebase.php',133],['lib/pear/HTML','QuickForm.php',246],['lib/pear/HTML','QuickForm.php',1979],['backup/util/structure','base_atom.class.php',41],['backup/util/structure','base_atom.class.php',114],['backup/util/structure','base_atom.class.php',135],['backup/util/structure','base_atom.class.php',156],['lib/horde/framework/Horde/Imap/Client/Data','BaseSubject.php',39],['lib/google/src/Google/Auth','LoginTicket.php',37],['lib/adodb/drivers','adodb-csv.inc.php',41],['lib/adodb/drivers','adodb-csv.inc.php',196],['user/filters','yesno.php',33],['mod/wiki/parser','parser.php',98],['lib/htmlpurifier/HTMLPurifier/Token','Comment.php',19],['lib/phpexcel/PHPExcel/Calculation','FormulaParser.php',87],['backup/cc/cc_lib','cc_assesment_truefalse.php',27],['lib/htmlpurifier/HTMLPurifier','Encoder.php',10],['admin/tool/lpmigrate/classes/form','migrate_framework.php',45],['backup/util/xml/parser/tests','parser_test.php',797],['lib/htmlpurifier/HTMLPurifier/AttrTransform','EnumToCSS.php',34],['lib/tests','medialib_test.php',644],['lib/google/src/Google/Service','QPXExpress.php',39],['tag/classes/output','tagname.php',41],['lib/mustache/src/Mustache','Context.php',20],['lib/adodb/drivers','adodb-oracle.inc.php',32],['lib/adodb/drivers','adodb-oracle.inc.php',224],['backup/moodle2','restore_section_task.class.php',42],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Composite.php',25],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Nofollow.php',16],['mod/forum/classes/output','forum_post.php',110],['admin/tool/assignmentupgrade','locallib.php',50],['admin/tool/assignmentupgrade','locallib.php',93],['repository/googledocs','lib.php',65],['cache/stores/memcache','lib.php',120],['lib/filestorage','file_storage.php',78],['admin/tool/monitor/classes/output/managerules','renderable.php',56],['mod/lti/service/toolsettings/classes/local/resource','linksettings.php',45],['lib/form','duration.php',55],['lib','outputlib.php',480],['lib','outputlib.php',2038],['filter/tex','latex.php',13],['backup/moodle2','backup_course_task.class.php',39],['lib/adodb','adodb.inc.php',310],['lib/adodb','adodb.inc.php',3035],['lib/adodb','adodb.inc.php',3160],['lib/adodb','adodb.inc.php',3242],['lib/adodb','adodb.inc.php',4353],['lib/horde/framework/Horde/Support','Randomid.php',26],['lib/google/src/Google/Logger','File.php',51],['admin/roles/classes','allow_role_page.php',37],['mod/quiz/report/overview','overview_table.php',41],['lib/lessphp/Tree','Keyword.php',17],['lib/htmlpurifier/HTMLPurifier/Node','Comment.php',19],['question/type/ddmarker','questiontype.php',48],['mod/folder','renderer.php',159],['lib','portfoliolib.php',101],['tag/classes/output','tagcollsearchable.php',40],['webservice/soap/classes','wsdl.php',88],['lib/lessphp/Exception','Parser.php',30],['badges','renderer.php',973],['badges','renderer.php',1014],['badges','renderer.php',1078],['badges','renderer.php',1111],['badges','renderer.php',1137],['competency/classes/external','exporter.php',56],['mod/lti/service/toolproxy/classes/local/resource','toolproxy.php',47],['lib/google/src/Google/Service','Genomics.php',63],['lib/phpexcel/PHPExcel/Writer','PDF.php',38],['lib/phpexcel/PHPExcel/Shared/trend','exponentialBestFitClass.php',125],['lib/google/src/Google/Service','Games.php',60],['backup/converter/moodle1','lib.php',725],['backup/converter/moodle1','lib.php',865],['backup/converter/moodle1','lib.php',1145],['backup/converter/moodle1','lib.php',1190],['backup/converter/moodle1','lib.php',1480],['backup/util/helper','restore_logs_processor.class.php',45],['backup/util/helper','restore_logs_processor.class.php',141],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Input.php',14],['lib/google/src/Google/Service','Licensing.php',40],['mod/workshop/form/comments','lib.php',99],['backup/util/settings/section','section_backup_setting.class.php',25],['lib/htmlpurifier/HTMLPurifier','Doctype.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Font.php',22],['lib/google/src/Google/Service','Fitness.php',58],['blocks/private_files','renderer.php',83],['lib/phpexcel/PHPExcel/Worksheet','ColumnCellIterator.php',51],['enrol/flatfile','adminlib.php',35],['lib/xmldb','xmldb_object.php',55],['lib/google/src/Google/Service','Reports.php',47],['question/classes/statistics/responses','analysis_for_actual_response.php',70],['auth/pam','auth.php',53],['lib/horde/framework/Horde','Stream.php',50],['comment','lib.php',100],['lib/htmlpurifier/HTMLPurifier','URIParser.php',10],['lib/htmlpurifier/HTMLPurifier/Node','Text.php',35],['lib/phpexcel/PHPExcel/Worksheet','RowDimension.php',53],['lib/google/src/Google/Service','Gmail.php',64],['lib/google/src/Google/Service','Taskqueue.php',44],['lib/minify/lib/Minify','ImportProcessor.php',48],['lib/horde/framework/Horde/Mime','Related.php',32],['blocks','moodleblock.class.php',111],['lib/tcpdf','tcpdf_parser.php',92],['backup/util/plan','restore_structure_step.class.php',46],['blocks/rss_client/classes/output','channel_image.php',61],['lib/pear/HTML/QuickForm','hierselect.php',105],['question/type/numerical/tests','form_test.php',40],['badges/lib','backpacklib.php',40],['mod/workshop/allocation/manual','lib.php',51],['mod/quiz/report/responses','last_responses_table.php',39],['lib/simplepie','autoloader.php',62],['lib/spout/src/Spout/Common/Helper','StringHelper.php',21],['lib/phpexcel/PHPExcel/Worksheet','BaseDrawing.php',121],['lib/pear/Crypt','CHAP.php',82],['lib/pear/Crypt','CHAP.php',170],['lib/pear/Crypt','CHAP.php',424],['lib/spout/src/Spout/Writer/Common/Helper','AbstractStyleHelper.php',22],['backup/util/xml/parser/processors','progressive_parser_processor.class.php',57],['mod/quiz/classes/question','qubaids_for_users_attempts.php',37],['lib/spout/src/Spout/Reader/XLSX','RowIterator.php',63],['lib/phpexcel/PHPExcel/Reader/Excel5','Escher.php',77],['lib/simplepie/library/SimplePie','gzdecode.php',186],['mod/wiki','renderer.php',540],['lib/adodb','adodb-active-recordx.inc.php',138],['availability/classes','result.php',46],['lib','accesslib.php',5352],['lib','accesslib.php',5897],['lib','accesslib.php',6167],['lib','accesslib.php',6408],['lib','accesslib.php',6595],['lib','accesslib.php',6827],['lib','accesslib.php',7049],['lib','accesslib.php',7291],['lib/phpexcel/PHPExcel/Shared/OLE','PPS.php',110],['grade/grading/form','lib.php',82],['grade/grading/form','lib.php',766],['question/engine','questionusage.php',78],['question/engine','questionusage.php',973],['auth/manual','auth.php',46],['question/engine/upgrade','behaviourconverters.php',78],['mod/wiki/diff','diff_nwiki.php',35],['mod/wiki/diff','diff_nwiki.php',50],['mod/wiki/diff','diff_nwiki.php',63],['mod/wiki/diff','diff_nwiki.php',76],['mod/wiki/diff','diff_nwiki.php',495],['mod/wiki/diff','diff_nwiki.php',640],['mod/wiki/diff','diff_nwiki.php',850],['mod/wiki/diff','diff_nwiki.php',901],['mod/wiki/diff','diff_nwiki.php',953],['lib/adodb/drivers','adodb-proxy.inc.php',28],['lib/classes/lock','file_lock_factory.php',57],['lib/google/src/Google/Auth','OAuth2.php',55],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Pixels.php',17],['lib/filebrowser','file_info_context_module.php',47],['auth/none','auth.php',34],['lib/simplepie/library/SimplePie/Cache','Base.php',70],['lib/htmlpurifier/HTMLPurifier','Queue.php',24],['lib/horde/framework/Horde/Text','Flowed.php',75],['admin/tool/log/store/legacy/classes/log','store.php',33],['lib/mustache/src/Mustache','HelperCollection.php',19],['backup/util/structure','backup_structure_processor.class.php',45],['backup/util/structure','backup_structure_processor.class.php',133],['admin/tool/lp/classes/output','related_competencies.php',47],['mod/quiz/classes/question/bank','custom_view.php',44],['files','renderer.php',1083],['lib/form','text.php',47],['lib/phpexcel/PHPExcel/Shared/trend','bestFitClass.php',398],['backup/cc','cc112moodle.php',59],['admin/tool/cohortroles/classes/output','cohort_role_assignments_table.php',45],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',46],['lib/google/src/Google/Service','Logging.php',39],['lib/lessphp/Tree','Expression.php',16],['mod/lti/classes/local/ltiservice','service_base.php',63],['lib/phpexcel/PHPExcel/Reader','HTML.php',118],['search/engine/solr/classes','schema.php',60],['backup/util/xml/parser/processors','simplified_parser_processor.class.php',46],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',50],['lib/adodb/drivers','adodb-ado5.inc.php',42],['lib/adodb/drivers','adodb-ado5.inc.php',380],['mod/assign/feedback/editpdf/classes','comment.php',58],['cache/classes','interfaces.php',473],['lib/phpexcel/PHPExcel/Worksheet','Protection.php',157],['repository/merlot','lib.php',37],['lib/adodb/drivers','adodb-firebird.inc.php',69],['backup/util/settings','backup_setting.class.php',43],['lib/adodb/drivers','adodb-fbsql.inc.php',28],['lib/adodb/drivers','adodb-fbsql.inc.php',167],['mnet/xmlrpc','serverlib.php',674],['webservice/soap','lib.php',45],['admin/tool/log/store/database/classes/log','store.php',47],['lib/google/src/Google/Service','Doubleclicksearch.php',43],['lib/form','passwordunmask.php',46],['lib/lessphp/Tree','Variable.php',20],['report/log/classes','renderable.php',96],['mod/lti/service/toolsettings/classes/local/resource','systemsettings.php',43],['question/classes/bank','view.php',70],['grade/report/singleview/classes/local/ui','range.php',38],['lib/simplepie/library/SimplePie/Cache','MySQL.php',80],['admin/roles/classes','define_role_table_basic.php',31],['backup/cc/cc_lib','cc_converter_resource.php',28],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',78],['blocks/rss_client','editfeed.php',36],['admin/tool/lpmigrate/classes/output','migrate_framework_results.php',55],['blocks/lp/classes/output','competencies_to_review_page.php',49],['lib/horde/framework/Horde/Crypt/Blowfish/Php','Base.php',318],['backup/util/loggers','base_logger.class.php',42],['backup/util/loggers','base_logger.class.php',187],['mod/assign/feedback/file','renderable.php',44],['backup/cc/cc_lib','cc_utils.php',313],['backup/cc/cc_lib','cc_utils.php',381],['backup/cc/cc_lib','cc_utils.php',437],['lib/adodb/drivers','adodb-db2.inc.php',66],['lib/adodb/drivers','adodb-db2.inc.php',731],['lib/adodb','adodb-xmlschema03.inc.php',136],['lib/adodb','adodb-xmlschema03.inc.php',270],['lib/adodb','adodb-xmlschema03.inc.php',678],['lib/adodb','adodb-xmlschema03.inc.php',823],['lib/adodb','adodb-xmlschema03.inc.php',1081],['lib/adodb','adodb-xmlschema03.inc.php',1399],['repository/youtube','lib.php',58],['lib/phpexcel/PHPExcel/Writer/PDF','mPDF.php',38],['auth/cas/CAS/CAS','GracefullTerminationException.php',48],['lib/adodb/drivers','adodb-sybase_ase.inc.php',25],['lib/adodb/drivers','adodb-sybase_ase.inc.php',115],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Background.php',20],['lib/adodb','adodb-memcache.lib.inc.php',53],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','FrameTarget.php',19],['lib/phpexcel/PHPExcel/Writer','Excel2007.php',118],['lib/minify/lib/MrClay/Cli','Arg.php',82],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter','Column.php',117],['lib/simplepie','moodle_simplepie.php',50],['lib/simplepie','moodle_simplepie.php',121],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','FontFamily.php',11],['lib/simplepie/library/SimplePie/Decode/HTML','Entities.php',80],['lib/spout/src/Spout/Common/Helper','FileSystemHelper.php',22],['lib/pear/HTML/QuickForm','button.php',37],['lib/google/src/Google/Service','Autoscaler.php',46],['lib/mustache/src/Mustache','Engine.php',63],['lib/google/src/Google/Http','MediaFileUpload.php',75],['lib/phpexcel/PHPExcel','Worksheet.php',327],['mod/assign','gradingtable.php',68],['lib/google/src/Google/Service','AdExchangeSeller.php',53],['question/engine/tests','helpers.php',582],['question/engine/tests','helpers.php',594],['question/engine/tests','helpers.php',608],['question/engine/tests','helpers.php',623],['question/engine/tests','helpers.php',637],['question/engine/tests','helpers.php',652],['question/engine/tests','helpers.php',665],['question/engine/tests','helpers.php',676],['question/engine/tests','helpers.php',1196],['repository/webdav','lib.php',38],['tag/classes/output','tagisstandard.php',39],['lib/google/src/Google/Service','Appsactivity.php',52],['badges/criteria','award_criteria_course.php',47],['lib','searchlib.php',53],['lib','searchlib.php',95],['lib/lessphp/Output','Mapped.php',39],['availability/classes','tree.php',118],['lib/lessphp/Tree','Javascript.php',20],['lib/horde/framework/Horde/Imap/Client','Cache.php',53],['lib/htmlpurifier/HTMLPurifier','AttrCollections.php',16],['lib/mustache/src/Mustache/Loader','InlineLoader.php',56],['repository/url','lib.php',46],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite3.php',293],['lib/lessphp/Tree','Ruleset.php',45],['tag/classes/output','tagindex.php',52],['backup/util/ui','backup_ui_stage.class.php',43],['backup/util/ui','backup_ui_stage.class.php',79],['backup/util/ui','backup_ui_stage.class.php',234],['backup/util/ui','backup_ui_stage.class.php',387],['backup/util/ui','backup_ui_stage.class.php',516],['backup/util/ui','backup_ui_stage.class.php',575],['grade/report/singleview/classes/local/screen','screen.php',67],['lib/tcpdf/include/barcodes','datamatrix.php',229],['lib/horde/framework/Horde/Imap/Client/Socket','Catenate.php',37],['lib/google/src/Google/Service','Prediction.php',51],['lib/classes/output','notification.php',101],['lib/lessphp/Tree','Unit.php',16],['backup/util/settings/course','course_backup_setting.class.php',25],['lib/spout/src/Spout/Writer','AbstractWriter.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','DenyElementDecorator.php',21],['lib','outputfactories.php',120],['lib','outputfactories.php',367],['lib','dtllib.php',66],['mod/assign','assignmentplugin.php',50],['mnet/service/enrol','locallib.php',48],['mnet/service/enrol','locallib.php',466],['mnet/service/enrol','locallib.php',537],['backup/cc/cc_lib','cc_version11.php',57],['availability/condition/completion/classes','condition.php',48],['admin/roles/classes','allow_override_page.php',31],['mod/workshop/allocation','lib.php',103],['lib/htmlpurifier/HTMLPurifier/AttrTransform','BoolToCSS.php',24],['lib/horde/framework/Horde/Imap/Client/Base','Mailbox.php',59],['lib/spout/src/Spout/Reader/Wrapper','SimpleXMLElement.php',23],['lib/google/src/Google/Service','SiteVerification.php',43],['lib/phpexcel/PHPExcel/Calculation','Function.php',64],['availability/classes','capability_checker.php',49],['lib/google/src/Google/Service','Drive.php',76],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',12],['lib/phpexcel/PHPExcel/Shared/JAMA','LUDecomposition.php',56],['lib','setuplib.php',67],['lib','setuplib.php',113],['lib','setuplib.php',165],['lib','setuplib.php',184],['lib','setuplib.php',199],['lib','setuplib.php',219],['lib','setuplib.php',249],['lib','setuplib.php',271],['lib','setuplib.php',287],['lib','setuplib.php',309],['lib','setuplib.php',328],['lib','setuplib.php',346],['lib/form','textarea.php',50],['webservice/soap','locallib.php',57],['availability/classes','info.php',55],['lib/tcpdf','tcpdf_barcodes_1d.php',58],['lib/spout/src/Spout/Reader/XLSX/Helper','SheetHelper.php',49],['filter/urltolink/tests','filter_test.php',209],['lib/simplepie/library/SimplePie','Category.php',81],['admin/tool/lp/classes/output','manage_competencies_page.php',65],['lib/markdown','Markdown.php',99],['mod/assign','locallib.php',160],['mod/assign','locallib.php',8131],['lib/adodb/drivers','adodb-ldap.inc.php',48],['lib/adodb/drivers','adodb-ldap.inc.php',297],['lib/editor/tinymce/plugins/spellchecker/classes/utils','JSON.php',32],['lib/editor/tinymce/plugins/spellchecker/classes/utils','JSON.php',373],['lib','odslib.class.php',42],['lib','odslib.class.php',124],['lib','odslib.class.php',422],['lib','odslib.class.php',827],['lib/horde/framework/Horde/Crypt/Blowfish','Base.php',56],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',36],['grade/report/singleview/classes/local/ui','checkbox_attribute.php',42],['lib/lessphp/Tree','Quoted.php',20],['mod/lesson','mod_form.php',36],['blocks/rss_client/classes/output','item.php',89],['lib/google/src/Google/Service','IdentityToolkit.php',38],['lib/horde/framework/Horde/Stream','Temp.php',25],['tag/classes/output','tagflag.php',39],['admin/tool/monitor/classes/output/managesubs','rules.php',56],['lib/htmlpurifier/HTMLPurifier/ChildDef','Table.php',57],['lib/behat/form_field','behat_form_field.php',59],['lib/phpexcel/PHPExcel/Worksheet/Drawing','Shadow.php',93],['lib/spout/src/Spout/Reader/ODS/Helper','CellValueFormatter.php',42],['tag/classes','collections_table.php',36],['lib/google/src/Google/Service','Spectrum.php',38],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Length.php',19],['admin/tool/lp/classes/output','user_competency_summary.php',49],['lib/phpexcel/PHPExcel','NamedRange.php',65],['lib/pear/HTML/QuickForm','image.php',36],['lib/htmlpurifier/HTMLPurifier/AttrDef/URI','Host.php',15],['lib/form','searchableselector.php',44],['lib/phpexcel/PHPExcel/Shared/JAMA','SingularValueDecomposition.php',52],['lib/adodb/drivers','adodb-oci805.inc.php',51],['lib/google/src/Google','Service.php',28],['lib/google/src/Google/IO','Abstract.php',50],['lib/spout/src/Spout/Writer/ODS/Internal','Worksheet.php',46],['lib/form','header.php',45],['question/type/randomsamatch/tests','helper.php',121],['mod/workshop/form/accumulative','lib.php',99],['lib/phpexcel/PHPExcel/Shared/trend','linearBestFitClass.php',89],['lib/form','submit.php',41],['report/log/classes','table_log.php',45],['admin/roles/classes','admins_potential_selector.php',30],['question/classes/engine/variants','least_used_strategy.php',51],['question/engine/upgrade','logger.php',42],['question/engine/upgrade','logger.php',87],['mod/data','lib.php',68],['mod/data','lib.php',2278],['mod/data','lib.php',2552],['mod/data','lib.php',2573],['backup/util/xml/parser/processors','grouped_parser_processor.class.php',67],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportPop3.php',26],['mod/scorm','renderer.php',129],['lib/phpunit/classes','advanced_testcase.php',45],['lib/spout/src/Spout/Reader/ODS','SheetIterator.php',41],['backup/cc/cc_lib','cc_version1.php',57],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','LinkTypes.php',21],['tag/classes','areas_table.php',36],['lib/phpexcel/PHPExcel/Shared/trend','powerBestFitClass.php',125],['lib/portfolio/formats/leap2a','lib.php',62],['lib/portfolio/formats/leap2a','lib.php',258],['lib/portfolio/formats/leap2a','lib.php',503],['lib/google/src/Google/Service','Proximitybeacon.php',42],['lib/pear','PEAR.php',139],['lib/pear','PEAR.php',818],['competency/classes/external','persistent_exporter.php',42],['lib/google/src/Google/Service','Groupssettings.php',40],['lib/phpexcel/PHPExcel/Reader','CSV.php',87],['lib/horde/framework/Horde/Exception','LastError.php',16],['lib/google/src/Google/Service','Directory.php',134],['lib/google/src/Google/Service','Fusiontables.php',48],['question/type/missingtype','edit_missingtype_form.php',38],['lib/google/src/Google/Service','AdSenseHost.php',49],['lib/lessphp/Tree','Directive.php',20],['auth/ldap','auth.php',119],['auth/cas/CAS/CAS','CookieJar.php',46],['lib/phpexcel/PHPExcel/CachedObjectStorage','Wincache.php',245],['availability/condition/date/classes','condition.php',52],['lib/horde/framework/Horde/Mime','Mail.php',93],['lib','outputactions.php',60],['lib','outputactions.php',91],['lib','outputactions.php',148],['lib/horde/framework/Horde/Crypt/Blowfish','Mcrypt.php',47],['lib/classes','string_manager_standard.php',53],['repository/skydrive','microsoftliveapi.php',50],['user/filters','globalrole.php',35],['enrol/lti/ims-blti','OAuth.php',16],['enrol/lti/ims-blti','OAuth.php',32],['enrol/lti/ims-blti','OAuth.php',187],['enrol/lti/ims-blti','OAuth.php',451],['course/classes/output','course_module_name.php',46],['lib/google/src/Google/Service','Plus.php',52],['lib/horde/framework/Horde/Mime','Mdn.php',35],['lib/pear/HTML/QuickForm','html.php',36],['repository/s3','S3.php',193],['repository/s3','S3.php',2018],['repository/s3','S3.php',2374],['lib/spout/src/Spout/Reader/XLSX/Helper','SharedStringsHelper.php',39],['question/classes/bank/search','hidden_condition.php',42],['lib/htmlpurifier/HTMLPurifier/ChildDef','Empty.php',22],['lib/pear/HTML/QuickForm','element.php',73],['question/classes/statistics/responses','analysis_for_subpart.php',50],['admin/tool/log/classes','setting_managestores.php',30],['lib/google/src/Google/Service','Mirror.php',49],['lib/adodb/drivers','adodb-db2ora.inc.php',80],['lib/minify/lib/HTTP','Encoder.php',75],['mod/feedback/classes','completion.php',47],['admin/tool/uploadcourse/classes','processor.php',122],['lib/lessphp','Parser.php',78],['lib/adodb/drivers','adodb-sapdb.inc.php',36],['lib/adodb/drivers','adodb-sapdb.inc.php',179],['lib/ddl','sql_generator.php',175],['lib/google/src/Google/Service','AndroidEnterprise.php',51],['admin/tool/lp/classes/output','template_competencies_page.php',70],['lib/horde/framework/Horde/Support','ObjectStub.php',29],['mod/assignment/backup/moodle1','lib.php',223],['blocks','edit_form.php',47],['lib/simplepie/library/SimplePie/Cache','Memcache.php',81],['mod/quiz/report/statistics','statistics_question_table.php',49],['mod/workshop/form/numerrors','lib.php',102],['mod/quiz/classes','repaginate.php',49],['lib/classes/session','memcached.php',51],['lib/phpexcel/PHPExcel/Shared/OLE/PPS','Root.php',43],['lib/phpexcel/PHPExcel/Writer/PDF','Core.php',206],['mod/workshop','mod_form.php',43],['mod/assign/feedback/editpdf/fpdi','pdf_context.php',48],['availability/condition/profile/classes','condition.php',73],['lib/horde/framework/Horde/Imap/Client','DateTime.php',29],['auth/cas/CAS/CAS','Client.php',862],['lib/xhprof','xhprof_moodle.php',788],['lib/dtl','file_xml_database_exporter.php',36],['course','lib.php',3061],['lib/adodb/drivers','adodb-mssqlpo.inc.php',54],['lib/xmldb','xmldb_table.php',49],['lib/adodb/perf','perf-postgres.inc.php',92],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Filter.php',15],['question/type/ddmarker','shapes.php',40],['question/type/ddmarker','shapes.php',203],['question/type/ddmarker','shapes.php',267],['question/type/ddmarker','shapes.php',332],['question/type/ddmarker','shapes.php',470],['mod/lti/classes/local/ltiservice','response.php',58],['backup/util/helper','restore_users_parser_processor.class.php',43],['lib/pear/HTML','Common.php',79],['mod/glossary','locallib.php',481],['lib/adodb/perf','perf-mssqlnative.inc.php',70],['lib/adodb/perf','perf-mssql.inc.php',70],['backup/util/plan','base_plan.class.php',39],['backup/util/plan','base_plan.class.php',215],['backup/util/plan','restore_task.class.php',32],['backup/util/plan','restore_task.class.php',121],['lib/classes/event','base.php',124],['lib/form','checkbox.php',46],['admin/roles/classes','permissions_table.php',38],['lib/pear/HTML/QuickForm','submit.php',37],['auth/fc','auth.php',37],['enrol/ldap','settingslib.php',32],['enrol/ldap','settingslib.php',90],['enrol/ldap','settingslib.php',204],['lib/minify/lib/Minify/Cache','Memcache.php',22],['lib/lessphp/Tree','Condition.php',18],['admin/tool/lp/classes/output','plans_page.php',59],['lib/mustache/src/Mustache','Autoloader.php',19],['lib/spout/src/Spout/Writer/XLSX/Internal','Worksheet.php',52],['lib/phpexcel/PHPExcel','Comment.php',93],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','AlphaValue.php',6],['lib/lessphp/Tree','Url.php',17],['mod/lesson','override_form.php',58],['lib/form','button.php',45],['admin/tool/lp/classes/output','manage_templates_page.php',56],['lib/google/src/Google/Service','Playmoviespartner.php',44],['backup/util/ui','base_ui_stage.class.php',67],['backup/cc/cc_lib','cc_converters.php',75],['lib/dtl','database_mover.php',33],['enrol','locallib.php',125],['enrol','locallib.php',1256],['enrol','locallib.php',1379],['enrol','locallib.php',1430],['enrol','locallib.php',1463],['lib/htmlpurifier/HTMLPurifier','URI.php',58],['backup/moodle2','restore_course_task.class.php',41],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',40],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',221],['lib','xmlize.php',31],['lib','googleapi.php',52],['lib','googleapi.php',243],['grade/report/singleview/classes/local/ui','element.php',47],['lib/html2text','lib.php',43],['user/filters','lib.php',52],['user/filters','lib.php',272],['auth/cas/CAS/CAS/PGTStorage','Db.php',122],['lib/classes/lock','db_record_lock_factory.php',61],['lib/pear/HTML/QuickForm','link.php',47],['backup/cc/cc_lib','cc_asssesment.php',290],['backup/cc/cc_lib','cc_asssesment.php',345],['backup/cc/cc_lib','cc_asssesment.php',364],['backup/cc/cc_lib','cc_asssesment.php',415],['backup/cc/cc_lib','cc_asssesment.php',476],['backup/cc/cc_lib','cc_asssesment.php',486],['backup/cc/cc_lib','cc_asssesment.php',561],['backup/cc/cc_lib','cc_asssesment.php',585],['backup/cc/cc_lib','cc_asssesment.php',635],['backup/cc/cc_lib','cc_asssesment.php',668],['backup/cc/cc_lib','cc_asssesment.php',693],['backup/cc/cc_lib','cc_asssesment.php',788],['backup/cc/cc_lib','cc_asssesment.php',814],['backup/cc/cc_lib','cc_asssesment.php',838],['backup/cc/cc_lib','cc_asssesment.php',965],['backup/cc/cc_lib','cc_asssesment.php',971],['backup/cc/cc_lib','cc_asssesment.php',986],['backup/cc/cc_lib','cc_asssesment.php',1003],['backup/cc/cc_lib','cc_asssesment.php',1017],['backup/cc/cc_lib','cc_asssesment.php',1045],['backup/cc/cc_lib','cc_asssesment.php',1186],['backup/cc/cc_lib','cc_asssesment.php',1263],['backup/cc/cc_lib','cc_asssesment.php',1317],['backup/cc/cc_lib','cc_asssesment.php',1389],['backup/cc/cc_lib','cc_asssesment.php',1451],['backup/cc/cc_lib','cc_asssesment.php',1558],['backup/cc/cc_lib','cc_asssesment.php',1620],['backup/cc/cc_lib','cc_asssesment.php',1648],['backup/cc/cc_lib','cc_asssesment.php',1716],['backup/cc/cc_lib','cc_asssesment.php',2155],['backup/cc/cc_lib','cc_asssesment.php',2264],['backup/cc/cc_lib','cc_asssesment.php',2469],['lib/phpunit/classes','hint_resultprinter.php',37],['lib/horde/framework/Horde/Mail/Transport','Mail.php',53],['auth/pop3','auth.php',35],['lib/adodb/drivers','adodb-oci8.inc.php',106],['lib/adodb/drivers','adodb-oci8.inc.php',1539],['lib/adodb/drivers','adodb-oci8.inc.php',1805],['lib/classes/session','database.php',52],['backup/util/ui','restore_ui_components.php',81],['backup/util/ui','restore_ui_components.php',287],['backup/util/ui','restore_ui_components.php',382],['question/classes/bank/search','category_condition.php',60],['lib/google/src/Google/Auth','AssertionCredentials.php',53],['backup/util/plan','restore_plan.class.php',43],['backup/util/plan','restore_plan.class.php',203],['backup/util/xml/parser/processors','findpaths_parser_processor.class.php',35],['lib/phpexcel/PHPExcel/CalcEngine','Logger.php',63],['lib/jabber/XMPP','Log.php',67],['lib/horde/framework/Horde/Imap/Client/Exception','ServerResponse.php',44],['lib/lessphp/Tree','Assignment.php',15],['lib/dtl','string_xml_database_importer.php',34],['admin/tool/lp/classes/output','manage_competency_frameworks_page.php',62],['question/type/calculated','question.php',188],['question/type/calculated','question.php',303],['repository/recent','lib.php',39],['grade/report/singleview/classes/local/ui','text_attribute.php',42],['admin/webservice','lib.php',38],['lib','coursecatlib.php',194],['lib','coursecatlib.php',2782],['lib/google/src/Google/Service','Cloudtrace.php',43],['lib','filterlib.php',73],['lib','filterlib.php',377],['lib','filterlib.php',456],['lib/classes/lock','lock_factory.php',39],['lib/filebrowser','file_info_context_course.php',39],['lib/filebrowser','file_info_context_course.php',492],['lib/filebrowser','file_info_context_course.php',596],['lib/filebrowser','file_info_context_course.php',745],['enrol','renderer.php',426],['enrol','renderer.php',723],['question/classes/statistics/questions','calculated_for_subquestion.php',57],['backup/moodle2','backup_format_plugin.class.php',40],['admin/tool/lp/classes','course_competency_rule_form_element.php',45],['auth/cas/CAS/CAS','ProxyTicketException.php',46],['lib/phpunit/classes','basic_testcase.php',39],['lib/spout/src/Spout/Reader/ODS','RowIterator.php',49],['backup/util/dbops','backup_dbops.class.php',37],['admin/tool/customlang','locallib.php',44],['admin/tool/customlang','locallib.php',405],['admin/tool/customlang','locallib.php',471],['backup/util/structure','backup_optigroup_element.class.php',51],['mod/quiz/report/grading','gradingsettings_form.php',44],['backup/util/plan','restore_step.class.php',32],['backup/util/plan','restore_step.class.php',104],['lib/form','hidden.php',44],['repository/filesystem','lib.php',48],['backup/controller','backup_controller.class.php',68],['backup/controller','backup_controller.class.php',409],['backup/util/helper','restore_log_rule.class.php',62],['tag/classes','tag.php',77],['lib/htmlpurifier/HTMLPurifier/AttrTransform','SafeParam.php',27],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',38],['lib/spout/src/Spout/Writer/Style','StyleBuilder.php',19],['lib/dml','sqlsrv_native_moodle_database.php',53],['user/filters','date.php',40],['auth/nologin','auth.php',35],['lib/google/src/Google','Model.php',35],['lib/horde/framework/Horde/Imap/Client/Socket','ClientSort.php',37],['lib/horde/framework/Horde/Imap/Client/Exception','SearchCharset.php',34],['lib/horde/framework/Horde/Support','StringStream.php',30],['lib/adodb/drivers','adodb-mysqli.inc.php',66],['lib/adodb/drivers','adodb-mysqli.inc.php',887],['lib/adodb/drivers','adodb-mysqli.inc.php',1193],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ImportantDecorator.php',21],['lib/form','questioncategory.php',46],['lib/mustache/src/Mustache','Template.php',29],['backup/util/structure','base_nested_element.class.php',44],['backup/util/structure','base_nested_element.class.php',258],['lib/google/src/Google/Logger','Abstract.php',123],['backup/cc/cc_lib','cc_general.php',38],['lib/phpexcel/PHPExcel','ReferenceHelper.php',58],['lib/pear/HTML/QuickForm','password.php',37],['lib/dml','moodle_transaction.php',40],['lib/phpexcel/PHPExcel/Reader','Excel2003XML.php',53],['lib/htmlpurifier/HTMLPurifier/AttrDef','Switch.php',29],['repository/flickr','lib.php',51],['lib/form','grading.php',57],['lib/classes/update','api.php',71],['backup/cc/cc_lib','cc_converter_lti.php',29],['backup/moodle2','backup_subplugin.class.php',44],['lib/portfolio','caller.php',67],['lib/classes/progress','display_if_slow.php',60],['lib/adodb/perf','perf-informix.inc.php',66],['lib/classes','chart_base.php',52],['lib/lessphp/Tree','Media.php',18],['lib/spout/src/Spout/Common/Escaper','XLSX.php',19],['grade/export/ods','grade_export_ods.php',24],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Length.php',23],['lib/google/src/Google/Service','Calendar.php',50],['lib/form','group.php',44],['lib/phpexcel/PHPExcel/Writer','OpenDocument.php',44],['lib/pear/HTML/QuickForm/Renderer','Object.php',75],['admin/tool/lp/classes/output','user_evidence_page.php',48],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',54],['grade/export/xls','grade_export_xls.php',24],['lib/classes/output','mustache_pix_helper.php',43],['lib/horde/framework/Horde/Imap/Client/Mailbox','List.php',46],['lib/google/src/Google/Auth','ComputeEngine.php',35],['cache/stores/session','lib.php',131],['lib/mustache/src/Mustache/Logger','StreamLogger.php',44],['admin/tool/log/store/database/backup/moodle2','backup_logstore_database_nested_element.php',43],['user','renderer.php',220],['lib/htmlpurifier/HTMLPurifier/ChildDef','Required.php',23],['availability/condition/grade/classes','condition.php',46],['lib/lessphp/Tree','RulesetCall.php',14],['blocks/rss_client/classes/output','feed.php',75],['lib/form','select.php',47],['lib/htmlpurifier/HTMLPurifier','ContentSets.php',33],['lib/lessphp/Visitor','toCSS.php',13],['lib','outputfragmentrequirementslib.php',40],['backup/util/ui','restore_moodleform.class.php',34],['lib/google/src/Google/Service','Cloudbilling.php',43],['lib/google/src/Google/Service','PlusDomains.php',72],['lib','externallib.php',37],['lib','externallib.php',531],['lib','externallib.php',562],['lib','externallib.php',593],['lib','externallib.php',622],['lib','externallib.php',648],['lib','externallib.php',778],['lib','externallib.php',813],['lib','externallib.php',984],['lib','externallib.php',1177],['blog','locallib.php',71],['blog','locallib.php',564],['blog','locallib.php',847],['blog','locallib.php',892],['blog','locallib.php',965],['blog','locallib.php',1016],['blog','locallib.php',1041],['blog','locallib.php',1051],['blog','locallib.php',1063],['blog','locallib.php',1084],['lib/phpexcel/PHPExcel/Worksheet','ColumnDimension.php',53],['auth/cas','auth.php',39],['lib','lexer.php',41],['lib','lexer.php',145],['lib','lexer.php',217],['lib/phpexcel/PHPExcel/Shared/JAMA','QRDecomposition.php',48],['lib/google/src/Google/Service','Exception.php',34],['lib/htmlpurifier/HTMLPurifier','Printer.php',21],['tag/classes/output','tagcloud.php',49],['lib/google/src/Google/Service','Storagetransfer.php',44],['user/filters','select.php',46],['cache/stores/mongodb','lib.php',116],['admin/tool/lp/classes/output','course_competencies_page.php',73],['lib/google/src/Google/Cache','Null.php',28],['lib','graphlib.php',1176],['lib/phpexcel/PHPExcel/Style','Protection.php',49],['lib/google/src/Google/Service','GamesConfiguration.php',42],['repository/dropbox','locallib.php',46],['lib/phpexcel/PHPExcel/Style','Alignment.php',100],['lib/htmlpurifier/HTMLPurifier','Language.php',63],['cache/stores/file','lib.php',117],['tag/classes/output','tagareashowstandard.php',41],['question/type/multianswer','edit_multianswer_form.php',63],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Bool.php',22],['mod/assign','renderable.php',41],['mod/assign','renderable.php',71],['mod/assign','renderable.php',103],['mod/assign','renderable.php',139],['mod/assign','renderable.php',191],['mod/assign','renderable.php',242],['mod/assign','renderable.php',291],['mod/assign','renderable.php',395],['mod/assign','renderable.php',531],['mod/assign','renderable.php',586],['mod/assign','renderable.php',670],['mod/assign','renderable.php',707],['mod/assign','renderable.php',747],['mod/assign','renderable.php',800],['mod/assign','renderable.php',854],['lib/form','selectwithlink.php',56],['backup/moodle2','backup_activity_task.class.php',45],['lib/phpmailer','class.phpmailer.php',633],['lib/horde/framework/Horde/Imap/Client/Data','AclRights.php',39],['auth/db','auth.php',36],['lib/lessphp/Tree','Value.php',14],['lib/form','course.php',62],['question/engine','questionattemptstep.php',97],['question/engine','questionattemptstep.php',608],['cohort','locallib.php',37],['cohort','locallib.php',101],['badges/criteria','award_criteria.php',127],['lib/adodb/perf','perf-mysql.inc.php',86],['cache/stores/memcached','lib.php',133],['grade/report/singleview/classes/local/ui','empty_element.php',38],['lib/google/src/Google/Service','AppState.php',40],['lib/adodb/drivers','adodb-odbc_oracle.inc.php',107],['lib/pear/HTML/QuickForm/Renderer','Default.php',139],['tag/classes/output','tag.php',46],['question','previewlib.php',122],['backup/util/loggers','database_logger.class.php',40],['mod/forum/classes','potential_subscriber_selector.php',47],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','InterchangeBuilder.php',15],['lib/phpexcel/PHPExcel/Reader','SYLK.php',67],['lib/form','submitlink.php',47],['backup/util/dbops','restore_dbops.class.php',1788],['lib/xmldb','xmldb_index.php',56],['question','category_class.php',58],['question','category_class.php',160],['lib/google/src/Google/Service','Webfonts.php',38],['webservice/xmlrpc','locallib.php',41],['admin/roles/classes','check_users_selector.php',38],['lib/htmlpurifier/HTMLPurifier/AttrTransform','ImgSpace.php',24],['user/profile/field/checkbox','field.class.php',33],['lib/form','cancel.php',47],['lib/google/src/Google/Service','Resourceviews.php',57],['lib/phpexcel/PHPExcel/Style','Font.php',100],['lib/portfolio','plugin.php',445],['calendar','lib.php',2003],['calendar','lib.php',2774],['mod/wiki','pagelib.php',93],['mod/wiki','pagelib.php',380],['mod/wiki','pagelib.php',981],['mod/wiki','pagelib.php',1190],['mod/wiki','pagelib.php',2194],['mod/wiki','pagelib.php',2422],['tag/classes/output','tagfeed.php',43],['tag/classes/output','tagareaenabled.php',38],['backup/util/xml/parser/processors','selective_like_parser_processor.class.php',35],['mod/workshop','locallib.php',183],['mod/workshop','locallib.php',2976],['mod/workshop','locallib.php',3411],['mod/workshop','locallib.php',3647],['mod/workshop','locallib.php',3889],['mod/workshop','locallib.php',3975],['mod/workshop','locallib.php',4060],['mod/workshop','locallib.php',4079],['lib/form','advcheckbox.php',48],['backup/cc/cc_lib','cc_assesment_sfib.php',27],['cohort/classes/output','cohortidnumber.php',37],['lib/adodb/drivers','adodb-ado.inc.php',42],['lib/adodb/drivers','adodb-ado.inc.php',346],['lib/form','filepicker.php',53],['mod/assign','adminlib.php',41],['mod/assign','adminlib.php',102],['lib/tests/fixtures','test_renderer_factory.php',41],['backup/cc/cc_lib','cc_converter_label.php',28],['lib/htmlpurifier/HTMLPurifier','Lexer.php',152],['grade/report/singleview','lib.php',69],['backup/cc/cc_lib','cc_converter_page.php',28],['lib/google/src/Google/Logger','Psr.php',39],['lib/simplepie/library/SimplePie/HTTP','Parser.php',131],['backup/util/plan','backup_step.class.php',32],['backup/util/plan','backup_step.class.php',55],['lib/lessphp/Tree','Import.php',30],['lib/jabber/XMPP','XMPP_Old.php',45],['lib/phpexcel/PHPExcel/Worksheet','Drawing.php',37],['lib/google/src/Google/Service','Classroom.php',60],['lib/phpexcel/PHPExcel/Chart/Renderer','jpgraph.php',875],['admin/tool/lp/classes/external','competency_path_exporter.php',38],['cohort/classes/output','cohortname.php',37],['grade/report/overview','lib.php',76],['lib/horde/framework/Horde/Mail/Rfc822','Address.php',66],['admin/roles/classes','admins_existing_selector.php',30],['lib/phpunit/classes','arraydataset.php',45],['question/engine','questionattempt.php',166],['question/engine','questionattempt.php',1532],['question/engine','questionattempt.php',1618],['question/engine','questionattempt.php',1703],['lib/horde/framework/Horde/Support','Uuid.php',23],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nil.php',27],['webservice/rest','lib.php',47],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooterDrawing.php',79],['backup/util/xml/output','memory_xml_output.class.php',37],['repository/flickr_public','image.php',34],['mod/lti/classes/local/ltiservice','resource_base.php',62],['admin/tool/lp/classes/output','template_plans_table.php',53],['mod/quiz','mod_form.php',48],['lib/simplepie/library/SimplePie','Caption.php',98],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Multiple.php',33],['lib/htmlpurifier/HTMLPurifier','PercentEncoder.php',20],['lib/phpexcel/PHPExcel/Calculation','ExceptionHandler.php',30],['lib/htmlpurifier/HTMLPurifier/Token','Tag.php',33],['backup/moodle2','backup_theme_plugin.class.php',61],['mod/chat','chatd.php',78],['mod/chat','chatd.php',103],['lib/phpexcel/PHPExcel','DocumentSecurity.php',65],['lib/htmlpurifier/HTMLPurifier','URIDefinition.php',21],['lib/spout/src/Spout/Writer/XLSX/Internal','Workbook.php',45],['lib/phpexcel/PHPExcel/Shared','XMLWriter.php',49],['lib/lessphp/Tree','Operation.php',19],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',461],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',1699],['backup/cc/cc_lib','cc_converter_folder.php',28],['backup/util/helper','restore_roles_parser_processor.class.php',39],['lib/simplepie/library/SimplePie','Locator.php',68],['lib/google/src/Google/Service','SQLAdmin.php',50],['lib/lessphp/Tree','DetachedRuleset.php',15],['admin/tool/assignmentupgrade','upgradableassignmentstable.php',49],['backup/cc','validator.php',30],['backup/cc','validator.php',116],['backup/cc','validator.php',202],['backup/cc','validator.php',230],['backup/cc','validator.php',236],['backup/cc','validator.php',242],['backup/cc','validator.php',248],['backup/cc','validator.php',254],['backup/cc','validator.php',260],['lib/horde/framework/Horde/Imap/Client/Interaction','Client.php',34],['mod/quiz','override_form.php',58],['auth/cas/CAS/CAS/PGTStorage','AbstractStorage.php',57],['lib/htmlpurifier/HTMLPurifier','Length.php',41],['backup/util/helper','restore_decode_rule.class.php',47],['backup/util/helper','restore_decode_rule.class.php',192],['lib/horde/framework/Horde/Imap/Client/Data','Sync.php',133],['lib/phpexcel/PHPExcel/Shared/trend','logarithmicBestFitClass.php',97],['lib/adodb/perf','perf-db2.inc.php',61],['lib/phpexcel/PHPExcel/Style','Supervisor.php',44],['lib/htmlpurifier/HTMLPurifier/AttrTransform','TargetBlank.php',17],['lib/ddl','database_manager.php',48],['lib/mustache/src/Mustache/Exception','UnknownFilterException.php',22],['admin/roles/classes','define_role_table_advanced.php',46],['lib/dml','oci_native_moodle_temptables.php',40],['lib/horde/framework/Horde/Stream','Existing.php',28],['enrol/manual','locallib.php',37],['enrol/manual','locallib.php',102],['availability/classes','multiple_messages.php',56],['lib/phpexcel/PHPExcel/Reader','Gnumeric.php',55],['admin/roles/classes','override_permissions_table_advanced.php',31],['lib/pear/Net','GeoIP.php',323],['lib/mustache/src/Mustache/Loader','ArrayLoader.php',31],['lib/form','modgrade.php',78],['admin/tool/log/store/database/backup/moodle2','restore_logstore_database_subplugin.class.php',40],['cache/classes','config.php',80],['lib/pear/HTML/QuickForm','hidden.php',37],['question/type/calculated','datasetitems_form.php',72],['lib/tests','navigationlib_test.php',554],['lib/tests','navigationlib_test.php',612],['lib/tests','navigationlib_test.php',639],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Number.php',18],['lib/tests','completionlib_test.php',882],['admin/tool/generator/classes','site_backend.php',58],['lib/jabber/XMPP','XMLStream.php',171],['lib/simplepie/library/SimplePie','Sanitize.php',75],['cache/classes','factory.php',149],['lib/minify/lib/Minify/Cache','WinCache.php',20],['user/classes/output/myprofile','node.php',82],['lib/horde/framework/Horde/Stream','TempString.php',40],['lib/adodb/drivers','adodb-borland_ibase.inc.php',83],['mod/forum','locallib.php',55],['mod/forum','locallib.php',419],['mod/lti/service/memberships/classes/local/resource','contextmemberships.php',44],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter/Column','Rule.php',262],['lib/classes/update','code_manager.php',57],['search/engine/solr/classes','engine.php',103],['lib/horde/framework/Horde/Imap/Client/Interaction/Server','Tagged.php',36],['lib/google/src/Google/Service','Compute.php',89],['lib/phpexcel/PHPExcel/Style','Borders.php',113],['lib','completionlib.php',243],['lib/google/src/Google/Service','Pubsub.php',44],['lib/adodb/drivers','adodb-ads.inc.php',69],['lib/adodb/drivers','adodb-ads.inc.php',657],['lib/markdown','MarkdownExtra.php',56],['lib/minify/lib/Minify/Cache','XCache.php',22],['lib/google/src/Google/Service','YouTube.php',75],['lib/lessphp','Functions.php',15],['auth/cas/CAS/CAS','AuthenticationException.php',53],['mod/quiz','locallib.php',1923],['competency/classes/external','stored_file_exporter.php',45],['user/filters','checkbox.php',51],['backup/moodle2','restore_settingslib.php',86],['backup/moodle2','restore_settingslib.php',149],['lib/htmlpurifier/HTMLPurifier/Node','Element.php',39],['lib/pear/HTML/QuickForm','date.php',260],['lib/lessphp/SourceMap','Generator.php',82],['backup/util/plan','base_step.class.php',35],['backup/util/plan','base_step.class.php',127],['mod/lti/service/memberships/classes/local/service','memberships.php',50],['lib/google/src/Google/Cache','Apc.php',37],['backup/util/ui','restore_ui_stage.class.php',42],['backup/util/ui','restore_ui_stage.class.php',265],['backup/util/ui','restore_ui_stage.class.php',452],['backup/util/ui','restore_ui_stage.class.php',592],['backup/util/ui','restore_ui_stage.class.php',704],['backup/util/ui','restore_ui_stage.class.php',852],['backup/util/ui','restore_ui_stage.class.php',959],['backup/util/ui','restore_ui_stage.class.php',1100],['lib/pear/Auth','RADIUS.php',120],['lib/pear/Auth','RADIUS.php',579],['lib/pear/Auth','RADIUS.php',672],['lib/pear/Auth','RADIUS.php',879],['lib/adodb/drivers','adodb-ado_access.inc.php',46],['admin/tool/xmldb/actions','XMLDBAction.class.php',56],['backup/converter/moodle1','handlerlib.php',120],['backup/converter/moodle1','handlerlib.php',1710],['backup/converter/moodle1','handlerlib.php',1902],['backup/converter/moodle1','handlerlib.php',2155],['backup/controller','restore_controller.class.php',63],['backup/controller','restore_controller.class.php',519],['lib/google/src/Google/Http','Request.php',58],['lib/google/src/Google/Service','Dfareporting.php',99],['lib/google/src/Google/Service','Manager.php',60],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',73],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','Validator.php',30],['lib/google/src/Google/Service','CloudMonitoring.php',45],['lib/editor/tinymce/plugins/spellchecker/classes','SpellChecker.php',11],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',44],['lib/horde/framework/Horde/Mail/Transport','Sendmail.php',65],['lib','webdavlib.php',84],['lib/dml','pgsql_native_moodle_recordset.php',43],['lib/horde/framework/Horde/Support','Guid.php',24],['lib/mustache/src/Mustache','LambdaHelper.php',25],['question/engine/upgrade/tests','helper.php',45],['admin/tool/uploadcourse/classes','tracker.php',72],['grade/report/user','lib.php',188],['lib/adodb/drivers','adodb-sqlanywhere.inc.php',156],['auth/cas/CAS/CAS','OutOfSequenceBeforeClientException.php',47],['backup/util/plan','base_task.class.php',40],['backup/util/plan','base_task.class.php',277],['lib/adodb/drivers','adodb-db2oci.inc.php',220]], 1102],
'delete': ['delete', 'Deletes an item from the cache store. ', [['cache/stores/static','lib.php',374],['cache','disabledlib.php',102],['lib/google/src/Google/Service','AdSense.php',1258],['lib/google/src/Google/Service','AdSense.php',1730],['lib/grade','grade_item.php',396],['lib/google/src/Google/Service','Replicapool.php',378],['lib/google/src/Google/Service','Tasks.php',310],['lib/google/src/Google/Service','Tasks.php',428],['lib/google/src/Google/Service','AndroidPublisher.php',1230],['lib/google/src/Google/Service','AndroidPublisher.php',1310],['lib/google/src/Google/Service','AndroidPublisher.php',1668],['lib/google/src/Google/Service','AndroidPublisher.php',1763],['lib/google/src/Google/Service','AndroidPublisher.php',2083],['lib/google/src/Google/Service','YouTubeReporting.php',255],['lib/google/src/Google/Service','Reseller.php',441],['lib/google/src/Google/Cache','Memcache.php',144],['lib','filelib.php',3481],['lib/google/src/Google/Service','Computeaccounts.php',418],['lib/google/src/Google/Service','Computeaccounts.php',497],['lib/google/src/Google/Service','Computeaccounts.php',668],['lib/grade','grade_category.php',281],['lib/grade','grade_scale.php',136],['lib/adodb','adodb-active-record.inc.php',901],['lib/grade','grade_object.php',270],['lib/google/src/Google/Service','YouTubeAnalytics.php',352],['lib/google/src/Google/Service','YouTubeAnalytics.php',447],['lib/google/src/Google/Service','MapsEngine.php',1693],['lib/google/src/Google/Service','MapsEngine.php',1991],['lib/google/src/Google/Service','MapsEngine.php',2344],['lib/google/src/Google/Service','MapsEngine.php',2651],['lib/google/src/Google/Service','MapsEngine.php',2912],['completion','data_object.php',273],['lib/google/src/Google/Cache','File.php',115],['cache/classes','dummystore.php',198],['lib/google/src/Google/Service','Dns.php',378],['cache/classes','loaders.php',792],['cache/classes','loaders.php',1471],['cache/classes','loaders.php',1841],['lib/google/src/Google/Service','Appengine.php',352],['lib/google/src/Google/Service','Appengine.php',455],['tag/classes','collection.php',260],['lib/filebrowser','file_info.php',418],['lib/google/src/Google/Service','AdExchangeBuyer.php',938],['lib/google/src/Google/Service','AdExchangeBuyer.php',1137],['lib/google/src/Google/Service','AdExchangeBuyer.php',1561],['lib/filebrowser','virtual_root_file.php',69],['lib/google/src/Google/Service','Books.php',1946],['lib/grade','grade_grade.php',1024],['lib/grade','grade_outcome.php',97],['lib/google/src/Google/Service','Analytics.php',2165],['lib/google/src/Google/Service','Analytics.php',2534],['lib/google/src/Google/Service','Analytics.php',2655],['lib/google/src/Google/Service','Analytics.php',2872],['lib/google/src/Google/Service','Analytics.php',3001],['lib/google/src/Google/Service','Analytics.php',3092],['lib/google/src/Google/Service','Analytics.php',3406],['lib/google/src/Google/Service','Analytics.php',3631],['lib/google/src/Google/Service','DeploymentManager.php',452],['lib/google/src/Google/Service','Blogger.php',1065],['lib/google/src/Google/Service','Blogger.php',1227],['lib/google/src/Google/Service','Blogger.php',1451],['lib/filebrowser','file_info_stored.php',631],['competency/classes','persistent.php',510],['lib/google/src/Google/Service','CloudUserAccounts.php',528],['lib/google/src/Google/Service','CloudUserAccounts.php',628],['lib/google/src/Google/Service','CloudUserAccounts.php',893],['lib/google/src/Google/Service','Cloudresourcemanager.php',390],['lib/htmlpurifier/HTMLPurifier','Zipper.php',89],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',960],['lib/google/src/Google/Service','TagManager.php',1022],['lib/google/src/Google/Service','TagManager.php',1113],['lib/google/src/Google/Service','TagManager.php',1265],['lib/google/src/Google/Service','TagManager.php',1358],['lib/google/src/Google/Service','TagManager.php',1452],['lib/google/src/Google/Service','TagManager.php',1546],['lib/google/src/Google/Service','TagManager.php',1696],['mod/lesson','locallib.php',1037],['mod/lesson','locallib.php',2271],['repository','lib.php',427],['repository','lib.php',1962],['admin/tool/uploadcourse/classes','course.php',226],['lib','badgeslib.php',640],['lib/google/src/Google/Service','Bigquery.php',531],['lib/google/src/Google/Service','Bigquery.php',863],['lib/google/src/Google/Service','ShoppingContent.php',1050],['lib/google/src/Google/Service','ShoppingContent.php',1448],['lib/google/src/Google/Service','ShoppingContent.php',1970],['lib/google/src/Google/Service','Webmasters.php',355],['lib/google/src/Google/Service','Webmasters.php',449],['lib/google/src/Google/Service','Clouddebugger.php',384],['lib/filestorage','stored_file.php',323],['lib/google/src/Google/Service','Container.php',309],['lib/google/src/Google/Service','Storage.php',1042],['lib/google/src/Google/Service','Storage.php',1157],['lib/google/src/Google/Service','Storage.php',1332],['lib/google/src/Google/Service','Storage.php',1454],['lib/google/src/Google/Service','Storage.php',1681],['cache/stores/memcache','lib.php',401],['lib/google/src/Google/Service','Genomics.php',646],['lib/google/src/Google/Service','Genomics.php',735],['lib/google/src/Google/Service','Genomics.php',903],['lib/google/src/Google/Service','Genomics.php',971],['lib/google/src/Google/Service','Genomics.php',1326],['lib/google/src/Google/Service','Genomics.php',1443],['lib/google/src/Google/Service','Licensing.php',224],['lib/google/src/Google/Service','Fitness.php',400],['lib/google/src/Google/Service','Fitness.php',512],['lib/google/src/Google/Service','Fitness.php',647],['comment','lib.php',790],['lib/google/src/Google/Service','Gmail.php',763],['lib/google/src/Google/Service','Gmail.php',921],['lib/google/src/Google/Service','Gmail.php',1014],['lib/google/src/Google/Service','Gmail.php',1234],['lib/google/src/Google/Service','Taskqueue.php',293],['lib/adodb','adodb-active-recordx.inc.php',1016],['lib','accesslib.php',5580],['cache/classes','interfaces.php',161],['lib/google/src/Google/Service','Autoscaler.php',315],['lib/google/src/Google/Service','Autoscaler.php',429],['lib/google/src/Google/Service','Prediction.php',262],['lib/google/src/Google/Service','SiteVerification.php',139],['lib/google/src/Google/Service','Drive.php',1522],['lib/google/src/Google/Service','Drive.php',1603],['lib/google/src/Google/Service','Drive.php',1748],['lib/google/src/Google/Service','Drive.php',2040],['lib/google/src/Google/Service','Drive.php',2110],['lib/google/src/Google/Service','Drive.php',2240],['lib/google/src/Google/Service','Drive.php',2403],['lib/google/src/Google/Service','Drive.php',2523],['lib/google/src/Google/Service','Proximitybeacon.php',522],['lib/google/src/Google/Service','Directory.php',1683],['lib/google/src/Google/Service','Directory.php',1916],['lib/google/src/Google/Service','Directory.php',1989],['lib/google/src/Google/Service','Directory.php',2059],['lib/google/src/Google/Service','Directory.php',2169],['lib/google/src/Google/Service','Directory.php',2224],['lib/google/src/Google/Service','Directory.php',2351],['lib/google/src/Google/Service','Directory.php',2420],['lib/google/src/Google/Service','Directory.php',2517],['lib/google/src/Google/Service','Directory.php',2652],['lib/google/src/Google/Service','Directory.php',2731],['lib/google/src/Google/Service','Directory.php',2836],['lib/google/src/Google/Service','Directory.php',2938],['lib/google/src/Google/Service','Directory.php',2999],['lib/google/src/Google/Service','Directory.php',3199],['lib/google/src/Google/Service','Directory.php',3274],['lib/google/src/Google/Service','Fusiontables.php',645],['lib/google/src/Google/Service','Fusiontables.php',812],['lib/google/src/Google/Service','Fusiontables.php',937],['lib/google/src/Google/Service','Fusiontables.php',1126],['lib/google/src/Google/Service','Fusiontables.php',1188],['lib/google/src/Google/Service','AdSenseHost.php',734],['lib/google/src/Google/Service','AdSenseHost.php',1010],['lib/google/src/Google/Service','AdSenseHost.php',1168],['lib/google/src/Google/Service','Mirror.php',425],['lib/google/src/Google/Service','Mirror.php',593],['lib/google/src/Google/Service','Mirror.php',661],['lib/google/src/Google/Service','Mirror.php',772],['tag/classes','area.php',187],['lib/google/src/Google/Service','AndroidEnterprise.php',988],['lib/google/src/Google/Service','AndroidEnterprise.php',1092],['lib/google/src/Google/Service','AndroidEnterprise.php',1280],['lib/google/src/Google/Service','AndroidEnterprise.php',1415],['lib/google/src/Google/Service','AndroidEnterprise.php',1597],['course','lib.php',3263],['mnet','peer.php',118],['search/tests/fixtures','mock_search_engine.php',48],['lib/google/src/Google/Service','Calendar.php',903],['lib/google/src/Google/Service','Calendar.php',1071],['lib/google/src/Google/Service','Calendar.php',1269],['lib/google/src/Google/Service','Calendar.php',1412],['cache/stores/session','lib.php',417],['blog','locallib.php',322],['lib/google/src/Google/Service','Storagetransfer.php',381],['cache/stores/mongodb','lib.php',361],['lib/google/src/Google/Cache','Null.php',53],['lib/google/src/Google/Service','GamesConfiguration.php',251],['lib/google/src/Google/Service','GamesConfiguration.php',390],['cache/stores/file','lib.php',393],['badges/criteria','award_criteria.php',330],['cache/stores/memcached','lib.php',402],['lib/google/src/Google/Service','AppState.php',154],['lib/google/src/Google/Service','Resourceviews.php',423],['lib/portfolio','plugin.php',692],['calendar','lib.php',2423],['lib/google/src/Google/Service','Classroom.php',466],['lib/google/src/Google/Service','Classroom.php',615],['lib/google/src/Google/Service','Classroom.php',701],['lib/google/src/Google/Service','Classroom.php',806],['lib/google/src/Google/Service','Classroom.php',934],['lib/google/src/Google/Service','SQLAdmin.php',786],['lib/google/src/Google/Service','SQLAdmin.php',856],['lib/google/src/Google/Service','SQLAdmin.php',1023],['lib/google/src/Google/Service','SQLAdmin.php',1368],['lib/google/src/Google/Service','SQLAdmin.php',1483],['badges/criteria','award_criteria_manual.php',220],['search/engine/solr/classes','engine.php',1045],['lib/google/src/Google/Service','Compute.php',4021],['lib/google/src/Google/Service','Compute.php',4149],['lib/google/src/Google/Service','Compute.php',4284],['lib/google/src/Google/Service','Compute.php',4571],['lib/google/src/Google/Service','Compute.php',4671],['lib/google/src/Google/Service','Compute.php',4829],['lib/google/src/Google/Service','Compute.php',4942],['lib/google/src/Google/Service','Compute.php',5033],['lib/google/src/Google/Service','Compute.php',5174],['lib/google/src/Google/Service','Compute.php',5248],['lib/google/src/Google/Service','Compute.php',5378],['lib/google/src/Google/Service','Compute.php',5508],['lib/google/src/Google/Service','Compute.php',5683],['lib/google/src/Google/Service','Compute.php',5984],['lib/google/src/Google/Service','Compute.php',6156],['lib/google/src/Google/Service','Compute.php',6316],['lib/google/src/Google/Service','Compute.php',6717],['lib/google/src/Google/Service','Compute.php',6898],['lib/google/src/Google/Service','Compute.php',7037],['lib/google/src/Google/Service','Compute.php',7128],['lib/google/src/Google/Service','Compute.php',7208],['lib/google/src/Google/Service','Compute.php',7299],['lib/google/src/Google/Service','Compute.php',7409],['lib/google/src/Google/Service','Compute.php',7570],['lib/google/src/Google/Service','Compute.php',7734],['lib/google/src/Google/Service','Compute.php',7938],['lib/google/src/Google/Service','Compute.php',8035],['lib/google/src/Google/Service','Compute.php',8210],['lib/google/src/Google/Service','Compute.php',8305],['lib/google/src/Google/Service','Pubsub.php',240],['lib/google/src/Google/Service','Pubsub.php',379],['lib/google/src/Google/Service','YouTube.php',1810],['lib/google/src/Google/Service','YouTube.php',2061],['lib/google/src/Google/Service','YouTube.php',2459],['lib/google/src/Google/Service','YouTube.php',2889],['lib/google/src/Google/Service','YouTube.php',3187],['lib/google/src/Google/Service','YouTube.php',3419],['lib/google/src/Google/Service','YouTube.php',3559],['lib/google/src/Google/Service','YouTube.php',3928],['lib/google/src/Google/Service','YouTube.php',4158],['lib/google/src/Google/Cache','Apc.php',105],['lib/google/src/Google/Service','Dfareporting.php',5000],['lib/google/src/Google/Service','Dfareporting.php',5566],['lib/google/src/Google/Service','Dfareporting.php',5753],['lib/google/src/Google/Service','Dfareporting.php',5877],['lib/google/src/Google/Service','Dfareporting.php',6397],['lib/google/src/Google/Service','Dfareporting.php',6578],['lib/google/src/Google/Service','Dfareporting.php',6731],['lib/google/src/Google/Service','Dfareporting.php',6996],['lib/google/src/Google/Service','Dfareporting.php',7503],['lib/google/src/Google/Service','Dfareporting.php',8102],['lib/google/src/Google/Service','Dfareporting.php',8768],['lib/google/src/Google/Service','Manager.php',244],['lib/google/src/Google/Service','Manager.php',324],['lib/google/src/Google/Service','CloudMonitoring.php',274],['lib','webdavlib.php',691]], 317],
'calendar_format_event_time': ['calendar_format_event_time', 'Get event format time ', [['calendar','lib.php',1674]], 3],
'pix_icon': ['pix_icon', 'Return HTML for a pix_icon. ', [['lib','outputrenderers.php',2161]], 504],
'calendar_get_days': ['calendar_get_days', 'Return the days of the week ', [['calendar','lib.php',123]], 4],
'calendar_add_icalendar_event': ['calendar_add_icalendar_event', 'Add an iCalendar event to the Moodle calendar. ', [['calendar','lib.php',2978]], 2],
'calendar_get_link_next': ['calendar_get_link_next', 'Build and return a next month HTML link, with an arrow. ', [['calendar','lib.php',1213]], 4],
'get_next_month': ['get_next_month', 'Get the next month. ', [['calendar/tests','calendartype_test_example.php',206],['calendar/type/gregorian/classes','structure.php',259]], 3],
'calendar_get_module_cached': ['calendar_get_module_cached', 'Get current module cache ', [['calendar','lib.php',1427]], 1],
'pix_url': ['pix_url', 'Return the moodle_url for an image. ', [['lib','outputrenderers.php',237],['lib','outputlib.php',1394]], 367],
'get_fast_modinfo': ['get_fast_modinfo', 'Returns reference to full info about modules in course (including visibility). Cached and as fast as possible (0 or 1 db query). ', [['lib','modinfolib.php',1977]], 289],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',922],['lib','accesslib.php',344]], 2064],
'calendar_add_event_metadata': ['calendar_add_event_metadata', 'Add calendar event metadata ', [['calendar','lib.php',653]], 2],
'clone': ['clone', '', [['lib/editor/tinymce/tiny_mce/3.5.11/plugins/media/js','media.js',11]], 370],
'calendar_get_subscription': ['calendar_get_subscription', 'Get the subscription from a given id ', [['calendar','lib.php',133]], 12],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'calendar_process_subscription_row': ['calendar_process_subscription_row', 'Update a subscription from the form data in one of the rows in the existing subscriptions table. ', [['calendar','lib.php',3077]], 2],
'set_anchor': ['set_anchor', 'Sets the anchor for the URI (the bit after the hash) ', [['lib','weblib.php',686]], 39],
'add': ['add', 'Add HashTable item ', [['lib/phpexcel/PHPExcel','HashTable.php',78],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',95],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',109],['lib/google/src/Google/Http','Batch.php',52],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',37],['lib','csslib.php',1508],['lib/horde/framework/Horde/Mail/Rfc822','List.php',116],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',33],['lib/horde/framework/Horde/Support','ConsistentHash.php',148],['lib/horde/framework/Horde','Variables.php',297],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',29],['lib','outputcomponents.php',2705],['lib','outputcomponents.php',3380],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',436],['lib','adminlib.php',735],['lib','adminlib.php',894],['lib','adminlib.php',1446],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',27],['lib/xhprof/xhprof_html/jquery','jquery-1.2.6.js',3450],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',80],['lib/google/src/Google/Service','Webmasters.php',436],['lib','navigationlib.php',304],['lib','navigationlib.php',761],['lib','navigationlib.php',3305],['lib','navigationlib.php',3583],['lib/horde/framework/Horde/Imap/Client','Ids.php',155],['backup/cc/cc_lib/gral_lib','cssparser.php',121],['lib/xhprof/xhprof_html/jquery','jquery.autocomplete.js',428],['lib/horde/framework/Horde','Stream.php',116],['comment','lib.php',679],['lib/mustache/src/Mustache','HelperCollection.php',56],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',207],['backup/cc/cc_lib','cc_utils.php',395],['backup/cc/cc_lib','cc_utils.php',454],['lib/lessphp/Output','Mapped.php',50],['lib','licenselib.php',32],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',50],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',74],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',14],['lib/horde/framework/Horde/Mail/Rfc822','GroupList.php',25],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',31],['tag/classes','tag.php',152],['blog','locallib.php',242],['lib/classes','notification.php',50],['lib/lessphp','Output.php',18],['tag/classes/output','tagfeed.php',61],['backup/cc','validator.php',51],['lib/horde/framework/Horde/Stream','TempString.php',118],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',11]], 6188],
'link_arrow_left': ['link_arrow_left', 'Return the left arrow with text (\'previous\'), and optionally embedded in a link. ', [['lib','weblib.php',2218]], 2],
'set_default_server_timezone': ['set_default_server_timezone', 'Set PHP default timezone to $CFG->timezone. ', [['lib/classes','date.php',189]], 23],
'heading': ['heading', 'Outputs a heading ', [['lib','outputrenderers.php',3072],['lib','outputrenderers.php',4364],['lib','outputrenderers.php',4552],['grade/report/singleview/classes/local/screen','screen.php',197],['grade/report/singleview/classes/local/screen','user.php',264],['grade/report/singleview/classes/local/screen','grade.php',283]], 796],
'toggle_visibility': ['toggle_visibility', 'Toggles the visibility of an event ', [['calendar','lib.php',2598]], 6],
'__isset': ['__isset', 'Overload __isset() to provide access via properties ', [['lib/simplepie/library/SimplePie','IRI.php',221],['lib/horde/framework/Horde','Variables.php',111],['mod/lesson','locallib.php',2044],['lib','modinfolib.php',140],['lib','modinfolib.php',1178],['lib','modinfolib.php',2545],['lib','adminlib.php',1101],['lib/dml','database_column_info.php',102],['lib/classes/message','message.php',218],['lib/horde/framework/Horde/Support','Array.php',128],['admin/tool/monitor/classes','subscription.php',68],['lib','accesslib.php',5305],['lib/mustache/src/Mustache','HelperCollection.php',99],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',170],['tag/classes/output','tagindex.php',133],['lib/horde/framework/Horde/Imap/Client/Data','Namespace.php',115],['lib/horde/framework/Horde/Support','ObjectStub.php',57],['course','lib.php',3099],['lib/classes/event','base.php',942],['lib','coursecatlib.php',155],['lib','coursecatlib.php',2933],['tag/classes','tag.php',99],['lib/google/src/Google','Model.php',286],['calendar','lib.php',2096],['lib/horde/framework/Horde/Support','Stub.php',53],['lib/pear/Net/GeoIP','Location.php',187]], 2],
'external_format_text': ['external_format_text', 'Format the text to be returned properly as requested by the either the web service server, either by an internally call. The caller can change the format (raw, filter, file, fileurl) with the external_settings singleton All web service servers must set this singleton when parsing the $_GET and $_POST. ', [['lib','externallib.php',887]], 61],
'calendar_get_mini': ['calendar_get_mini', 'Generates the HTML for a miniature calendar ', [['calendar','lib.php',166]], 6],
'calendar_get_eventtype_choices': ['calendar_get_eventtype_choices', 'Returns option list of available options for the calendar event type, given the current user and course. ', [['calendar','lib.php',2904]], 1],
'debugging': ['debugging', 'Standard Debugging Function ', [['lib','weblib.php',3012]], 1007],
'get_calendar_instance': ['get_calendar_instance', 'Returns an instance of the currently used calendar type. ', [['calendar/classes','type_factory.php',30]], 42],
'get_prev_month': ['get_prev_month', 'Get the previous month. ', [['calendar/tests','calendartype_test_example.php',193],['calendar/type/gregorian/classes','structure.php',242]], 3],
'get_field_sql': ['get_field_sql', 'Get a single field value (first field) using a SQL statement. ', [['lib/dml','moodle_database.php',1588]], 138],
'single_button': ['single_button', 'Returns a form with a single button. ', [['lib','outputrenderers.php',1772]], 316],
'get_records': ['get_records', 'Load a list of records. ', [['competency/classes','persistent.php',709],['mod/glossary/classes','entry_query_builder.php',295],['lib/dml','moodle_database.php',1285],['lib','coursecatlib.php',651],['question','category_class.php',63]], 965],
'tag': ['tag', 'Outputs a tag with attributes and contents ', [['lib','outputcomponents.php',1073]], 1292],
'instance': ['instance', 'Returns an instance of the cache_factor method. ', [['cache','disabledlib.php',171],['cache','disabledlib.php',296],['lib/classes','useragent.php',101],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['search/classes','manager.php',109],['cache','locallib.php',52],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['lib/classes','plugin_manager.php',103],['lib/htmlpurifier','HTMLPurifier.php',251],['course/format','lib.php',156],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['admin/tool/installaddon/classes','installer.php',40],['lib','modinfolib.php',373],['cache/classes','helper.php',76],['lib/tests','string_manager_standard_test.php',124],['lib/portfolio','exporter.php',251],['lib/classes/update','validator.php',88],['search/classes','document_factory.php',49],['lib','accesslib.php',6235],['lib','accesslib.php',6487],['lib','accesslib.php',6665],['lib','accesslib.php',6919],['lib','accesslib.php',7180],['lib','accesslib.php',7392],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443],['lib','filterlib.php',80],['search/tests/fixtures','testable_core_search.php',43],['lib/tests/fixtures','testable_update_checker.php',45],['backup/cc','validator.php',35],['cache/classes','config.php',87],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29]], 4647],
'calendar_wday_name': ['calendar_wday_name', 'Return the name of the weekday ', [['calendar','lib.php',1234]], 0],
'calendar_get_allowed_types': ['calendar_get_allowed_types', 'Get calendar\'s allowed types ', [['calendar','lib.php',1843]], 4],
'checkdate': ['checkdate', 'Ensures the date for the calendar is correct and either sets it to now or throws a moodle_exception if not ', [['calendar','lib.php',2826]], 10],
'usergetdate': ['usergetdate', 'Given a $time timestamp in GMT (seconds since epoch), returns an array that represents the Gregorian date in user time ', [['lib','moodlelib.php',2213]], 14],
'groups_get_user_groups': ['groups_get_user_groups', 'Returns info about user\'s groups in course. ', [['lib','grouplib.php',290]], 20],
'yui_module': ['yui_module', 'Creates a JavaScript function call that requires one or more modules to be loaded. ', [['lib','outputrequirementslib.php',1023]], 81],
'set_user_preference': ['set_user_preference', 'Sets a preference for the specified user. ', [['lib','moodlelib.php',1827]], 172],
'file_get_submitted_draft_itemid': ['file_get_submitted_draft_itemid', 'Returns draft area itemid for a given element. ', [['lib','filelib.php',725]], 48],
'__get': ['__get', '', [['lib/horde/framework/Horde/Imap/Client','Url.php',196],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',84],['lib/minify/lib','JSMinPlus.php',1686],['lib/horde/framework/Horde/Imap/Client/Auth','DigestMD5.php',121],['user/classes/output/myprofile','category.php',185],['lib/adodb','adodb-active-record.inc.php',295],['lib/horde/framework/Horde/Mail/Rfc822','List.php',75],['admin/tool/monitor/classes','rule.php',166],['lib/horde/framework/Horde/Socket','Client.php',91],['lib/horde/framework/Horde/Mail/Rfc822','Group.php',85],['lib/horde/framework/Horde/Imap/Client/Interaction','Command.php',92],['lib/simplepie/library/SimplePie','IRI.php',168],['lib/horde/framework/Horde','Variables.php',150],['mod/lesson','locallib.php',2028],['lib','modinfolib.php',124],['lib','modinfolib.php',1138],['lib','modinfolib.php',2577],['lib','adminlib.php',1071],['lib/dml','database_column_info.php',87],['lib/classes/message/inbound','handler.php',79],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',72],['lib','navigationlib.php',5107],['lib/classes/plugininfo','block.php',44],['lib/classes/message','message.php',187],['lib/horde/framework/Horde/Crypt','Blowfish.php',86],['lib/horde/framework/Horde/Imap/Client','Ids.php',92],['lib/horde/framework/Horde/Support','Array.php',116],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',85],['admin/tool/monitor/classes','subscription.php',54],['lib','pagelib.php',761],['user/classes/output/myprofile','tree.php',144],['lib/horde/framework/Horde','Stream.php',74],['lib/adodb','adodb-active-recordx.inc.php',341],['lib','accesslib.php',5286],['lib/mustache/src/Mustache','HelperCollection.php',67],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',63],['lib/minify/lib/MrClay/Cli','Arg.php',170],['tag/classes/output','tagindex.php',123],['calendar/tests','rrule_manager_tests.php',523],['lib/horde/framework/Horde/Imap/Client/Data','Namespace.php',67],['lib/horde/framework/Horde/Support','ObjectStub.php',41],['lib/classes/plugininfo','mod.php',43],['course','lib.php',3089],['lib/classes/plugininfo','base.php',177],['lib/classes/event','base.php',909],['lib/horde/framework/Horde/Imap/Client/Exception','ServerResponse.php',69],['lib','coursecatlib.php',131],['lib','coursecatlib.php',2943],['tag/classes','tag.php',89],['lib/google/src/Google','Model.php',49],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',70],['calendar','lib.php',2077],['lib/horde/framework/Horde/Mail/Rfc822','Address.php',108],['lib/htmlpurifier/HTMLPurifier','Token.php',48],['mod/quiz','renderer.php',1349],['lib/horde/framework/Horde/Imap/Client/Data','Sync.php',255],['user/classes/output/myprofile','node.php',106],['lib/horde/framework/Horde/Stream','TempString.php',65],['lib/horde/framework/Horde/Support','Stub.php',41],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',56],['lib/pear/Net/GeoIP','Location.php',158]], 20],
'calendar_get_link_href': ['calendar_get_link_href', 'Adds day, month, year arguments to a URL and returns a moodle_url object. ', [['calendar','lib.php',1155]], 15],
'get_coursemodule_from_instance': ['get_coursemodule_from_instance', 'Given an instance number of a module, finds the coursemodule description ', [['lib','datalib.php',1300]], 441],
'add_record_snapshot': ['add_record_snapshot', 'Add cached data that will be most probably used in event observers. ', [['lib/classes/event','base.php',840]], 332],
'array_search': ['array_search', '', [], 170],
'base64_encode': ['base64_encode', '', [], 134],
'method_exists': ['method_exists', '', [], 265],
'is_array': ['is_array', '', [], 1608],
'is_numeric': ['is_numeric', '', [], 672],
'define': ['define', '', [], 2373],
'count': ['count', '', [], 4095],
'time': ['time', '', [], 1959],
'trim': ['trim', '', [], 1948],
'strtolower': ['strtolower', '', [], 817],
'sort': ['sort', '', [], 241],
'intval': ['intval', '', [], 455],
'link': ['link', '', [], 695],
'is_object': ['is_object', '', [], 544],
'in_array': ['in_array', '', [], 1234],
'array_diff': ['array_diff', '', [], 102],
'strip_tags': ['strip_tags', '', [], 150],
'function_exists': ['function_exists', '', [], 419],
'date': ['date', '', [], 693],
'is_readable': ['is_readable', '', [], 196],
'defined': ['defined', '', [], 4731],
'strtotime': ['strtotime', '', [], 245],
'call_user_func_array': ['call_user_func_array', '', [], 94],
'array_merge': ['array_merge', '', [], 2944],
'checkdate': ['checkdate', '', [], 10],
'gmmktime': ['gmmktime', '', [], 26],
'preg_replace': ['preg_replace', '', [], 917],
'reset': ['reset', '', [], 1213],
'unserialize': ['unserialize', '', [], 192],
'str_replace': ['str_replace', '', [], 1648],
'array_keys': ['array_keys', '', [], 1256],
'array_unique': ['array_unique', '', [], 171]};
CLASS_DATA={
'core_date': ['core_date', 'Core date and time related code. ', [['lib/classes','date.php',26]], 192],
'type_factory': ['type_factory', 'Class \core_calendar\type_factory. ', [['calendar/classes','type_factory.php',19]], 48],
'info_module': ['info_module', 'Class handles conditional availability information for an activity. ', [['availability/classes','info_module.php',29]], 39],
'context_helper': ['context_helper', 'Context maintenance and helper methods. ', [['lib','accesslib.php',5875]], 203],
'cache_helper': ['cache_helper', 'The cache helper class. ', [['cache/classes','helper.php',31]], 139],
'moodle_exception': ['moodle_exception', 'Base Moodle Exception class ', [['lib','setuplib.php',75]], 606],
'calendar_event': ['calendar_event', 'Manage calendar events ', [['calendar','lib.php',1951]], 75],
'context_course': ['context_course', 'Course context class ', [['lib','accesslib.php',6817]], 1323],
'calendar_subscription_updated': ['calendar_subscription_updated', 'Event triggered after a calendar subscription is updated. ', [['lib/classes/event','calendar_subscription_updated.php',28]], 1],
'coding_exception': ['coding_exception', 'Exception indicating programming error, must be fixed by a programer. For example a core API might throw this type of exception if a plugin calls it incorrectly. ', [['lib','setuplib.php',239]], 1200],
'calendar_event_created': ['calendar_event_created', 'Calendar event created event. ', [['lib/classes/event','calendar_event_created.php',29]], 5],
'cache': ['cache', 'The main cache class. ', [['cache/classes','loaders.php',31]], 284],
'calendar_subscription_deleted': ['calendar_subscription_deleted', 'Event triggered after a calendar subscription is deleted. ', [['lib/classes/event','calendar_subscription_deleted.php',28]], 1],
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',238]], 3088],
'core_php_time_limit': ['core_php_time_limit', 'Utility class to manage PHP time limit. ', [['lib/classes','php_time_limit.php',27]], 92],
'icalendar': ['icalendar', '', [['lib/bennu','iCalendar_components.php',330]], 6],
'html_writer': ['html_writer', 'Simple html output class ', [['lib','outputcomponents.php',1062]], 5120],
'lang_string': ['lang_string', 'The lang_string class ', [['lib','moodlelib.php',9551]], 1775],
'calendar_information': ['calendar_information', 'Calendar information class ', [['calendar','lib.php',2741]], 3],
'calendar_event_deleted': ['calendar_event_deleted', 'Calendar event deleted event. ', [['lib/classes/event','calendar_event_deleted.php',29]], 4],
'calendar_event_updated': ['calendar_event_updated', 'Calendar event updated event. ', [['lib/classes/event','calendar_event_updated.php',29]], 6],
'curl': ['curl', 'RESTful cURL class ', [['lib','filelib.php',2656]], 74],
'calendar_subscription_created': ['calendar_subscription_created', 'Event triggered after a calendar subscription is added. ', [['lib/classes/event','calendar_subscription_created.php',28]], 1],
'block_contents': ['block_contents', 'This class represents how a block appears on a page. ', [['lib','outputcomponents.php',2469]], 15],
'context_system': ['context_system', 'System context class ', [['lib','accesslib.php',6157]], 1147],
'context_user': ['context_user', 'User context class ', [['lib','accesslib.php',6398]], 414]};
CONST_DATA={
'PARAM_NOTAGS': ['PARAM_NOTAGS', '', [['lib','moodlelib.php',172]], 217],
'CALENDAR_IMPORT_FROM_FILE': ['CALENDAR_IMPORT_FROM_FILE', '', [['calendar','lib.php',96]], 9],
'CALENDAR_DEFAULT_UPCOMING_MAXEVENTS': ['CALENDAR_DEFAULT_UPCOMING_MAXEVENTS', '', [['calendar','lib.php',42]], 4],
'CALENDAR_IMPORT_EVENT_INSERTED': ['CALENDAR_IMPORT_EVENT_INSERTED', '', [['calendar','lib.php',111]], 3],
'CALENDAR_IMPORT_FROM_URL': ['CALENDAR_IMPORT_FROM_URL', '', [['calendar','lib.php',101]], 5],
'CONTEXT_COURSE': ['CONTEXT_COURSE', '', [['lib','accesslib.php',148]], 441],
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1384],
'SITEID': ['SITEID', '', [['admin/cli','install.php',219],['lib/db','install.php',87],['','install.php',242],['lib','setup.php',755]], 608],
'CALENDAR_DEFAULT_STARTING_WEEKDAY': ['CALENDAR_DEFAULT_STARTING_WEEKDAY', '', [['calendar','lib.php',47]], 2],
'BLOCK_POS_RIGHT': ['BLOCK_POS_RIGHT', '', [['lib','blocklib.php',35]], 18],
'CALENDAR_EVENT_GROUP': ['CALENDAR_EVENT_GROUP', '', [['calendar','lib.php',85]], 7],
'CALENDAR_IMPORT_EVENT_UPDATED': ['CALENDAR_IMPORT_EVENT_UPDATED', '', [['calendar','lib.php',106]], 3],
'CALENDAR_EVENT_GLOBAL': ['CALENDAR_EVENT_GLOBAL', '', [['calendar','lib.php',75]], 7],
'CALENDAR_DEFAULT_UPCOMING_LOOKAHEAD': ['CALENDAR_DEFAULT_UPCOMING_LOOKAHEAD', '', [['calendar','lib.php',37]], 4],
'CLI_SCRIPT': ['CLI_SCRIPT', '', [['enrol/ldap/cli','sync.php',43],['lib/filestorage/tests/fixtures','zip_create_test_file.php',25],['admin/cli','fix_course_sequence.php',26],['admin/tool/behat/cli','run.php',30],['admin/cli','upgrade.php',38],['admin/cli','install.php',32],['admin/tool/uploadcourse/cli','uploadcourse.php',25],['admin/cli','fix_orphaned_question_categories.php',29],['admin/tool/generator/cli','maketestsite.php',25],['admin/cli','purge_caches.php',24],['admin/cli','install_database.php',31],['admin/tool/behat/cli','util.php',34],['admin/tool/task/cli','schedule_task.php',25],['admin/tool/replace/cli','replace.php',25],['auth/db/cli','sync_users.php',45],['admin/cli','automated_backups.php',29],['enrol/manual/cli','sync.php',30],['lib/editor/tinymce/cli','update_lang_files.php',25],['auth/ldap/cli','sync_users.php',47],['admin/cli','fix_deleted_users.php',26],['admin/cli','maintenance.php',26],['lib/tests/behat','behat_hooks.php',133],['admin/cli','reset_password.php',27],['admin/tool/dbtransfer/cli','migrate.php',30],['enrol/category/cli','sync.php',33],['admin/cli','mysql_compressed_rows.php',26],['enrol/paypal/cli','sync.php',30],['admin/cli','cron.php',31],['enrol/database/cli','sync.php',34],['admin/cli','mysql_collation.php',25],['auth/cas/cli','sync_users.php',43],['enrol/cohort/cli','sync.php',31],['admin/tool/generator/cli','maketestcourse.php',25],['admin/cli','backup.php',26],['search/cli','indexer.php',25],['admin/cli','check_database_schema.php',26],['admin/tool/behat/cli','util_single_run.php',90],['enrol/self/cli','sync.php',31],['','install.php',46],['theme/base/cli','svgtool.php',26],['admin','cron.php',47],['admin/tool/behat/cli','init.php',36],['enrol/meta/cli','sync.php',31],['admin/cli','alternative_component_cache.php',30],['admin/tool/generator/cli','maketestplan.php',25],['lib/phpunit','bootstrap.php',73],['lib','setup.php',289],['mod/chat','chatd.php',25],['lib/filestorage/tests/fixtures','zip_info.php',25],['enrol/flatfile/cli','sync.php',45],['admin/cli','mysql_engine.php',27]], 114],
'CALENDAR_DEFAULT_WEEKEND': ['CALENDAR_DEFAULT_WEEKEND', '', [['calendar','lib.php',55]], 4],
'CALENDAR_URL': ['CALENDAR_URL', '', [['calendar','lib.php',60]], 21],
'CALENDAR_EVENT_COURSE': ['CALENDAR_EVENT_COURSE', '', [['calendar','lib.php',80]], 7],
'WEEKSECS': ['WEEKSECS', '', [['lib','moodlelib.php',44]], 46],
'CALENDAR_SUBSCRIPTION_UPDATE': ['CALENDAR_SUBSCRIPTION_UPDATE', '', [['calendar','lib.php',116]], 3],
'IGNORE_MULTIPLE': ['IGNORE_MULTIPLE', '', [['lib','dmllib.php',50]], 43],
'CALENDAR_TF_24': ['CALENDAR_TF_24', '', [['calendar','lib.php',65]], 3],
'SQL_PARAMS_NAMED': ['SQL_PARAMS_NAMED', '', [['lib/dml','moodle_database.php',32]], 315],
'PARAM_INT': ['PARAM_INT', '', [['lib','moodlelib.php',156]], 3812],
'DAYSECS': ['DAYSECS', '', [['lib','moodlelib.php',49]], 122],
'CALENDAR_SUBSCRIPTION_REMOVE': ['CALENDAR_SUBSCRIPTION_REMOVE', '', [['calendar','lib.php',121]], 3],
'NOGROUPS': ['NOGROUPS', '', [['lib','grouplib.php',29]], 58],
'DEBUG_DEVELOPER': ['DEBUG_DEVELOPER', '', [['lib','setuplib.php',40]], 736],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153],
'CALENDAR_TF_12': ['CALENDAR_TF_12', '', [['calendar','lib.php',70]], 3],
'CALENDAR_EVENT_USER': ['CALENDAR_EVENT_USER', '', [['calendar','lib.php',90]], 7],
'YEARSECS': ['YEARSECS', '', [['lib','moodlelib.php',39]], 18],
'HOURSECS': ['HOURSECS', '', [['lib','moodlelib.php',54]], 34]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
