<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /message/output/airnotifier/classes/manager.php source</title>
    <link rel="stylesheet" href="../../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../../';
subdir='message/output/airnotifier/classes';
filename='manager.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/message/output/airnotifier/classes/</a> -> <a href="manager.php.html">manager.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="manager.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="manager.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Airnotifier manager class</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package    message_airnotifier</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @category   external</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @copyright  2012 Jerome Mouneyrac &lt;jerome@moodle.com&gt;</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> * @since Moodle 2.7</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> */</span>
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die;
<a name="l28"><span class="linenum">  28</span></a>  
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment">/**</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> * Airnotifier helper manager class</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> *</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * @copyright  2012 Jerome Mouneyrac &lt;jerome@moodle.com&gt;</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> */</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('message_airnotifier_manager')" href="../../../../_classes/message_airnotifier_manager.html" onMouseOver="classPopup(event,'message_airnotifier_manager')">message_airnotifier_manager</a> {
<a name="l36"><span class="linenum">  36</span></a>  
<a name="l37"><span class="linenum">  37</span></a>      <span class="comment">/**</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment">     * Include the relevant javascript and language strings for the device</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment">     * toolbox YUI module</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment">     *</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment">     * @return bool</span>
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment">     */</span>
<a name="l43"><span class="linenum">  43</span></a>      public function <a class="function" onClick="logFunction('include_device_ajax')" href="../../../../_functions/include_device_ajax.html" onMouseOver="funcPopup(event,'include_device_ajax')">include_device_ajax</a>() {
<a name="l44"><span class="linenum">  44</span></a>          global <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../../../_variables/PAGE.html">$PAGE</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>;
<a name="l45"><span class="linenum">  45</span></a>  
<a name="l46"><span class="linenum">  46</span></a>          <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../../../_variables/config.html">$config</a> = new stdClass();
<a name="l47"><span class="linenum">  47</span></a>          <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../../../_variables/config.html">$config</a>-&gt;<a onClick="logVariable('resturl')" class="var it42981" onMouseOver="hilite(42981)" onMouseOut="lolite()" href="../../../../_variables/resturl.html">resturl</a> = '<a class="filename" href="../../../../message/output/airnotifier/rest.php.html">/message/output/airnotifier/rest.php</a>';
<a name="l48"><span class="linenum">  48</span></a>          <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../../../_variables/config.html">$config</a>-&gt;<a onClick="logVariable('pageparams')" class="var it42981" onMouseOver="hilite(42981)" onMouseOut="lolite()" href="../../../../_variables/pageparams.html">pageparams</a> = array();
<a name="l49"><span class="linenum">  49</span></a>  
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment">        // Include toolboxes.</span>
<a name="l51"><span class="linenum">  51</span></a>          <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('requires')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../../../../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('yui_module')" href="../../../../_functions/yui_module.html" onMouseOver="funcPopup(event,'yui_module')">yui_module</a>('moodle-message_airnotifier-toolboxes', 'M.message.init_device_toolbox', array(array(
<a name="l52"><span class="linenum">  52</span></a>                  'ajaxurl' =&gt; <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../../../_variables/config.html">$config</a>-&gt;<a onClick="logVariable('resturl')" class="var it42981" onMouseOver="hilite(42981)" onMouseOut="lolite()" href="../../../../_variables/resturl.html">resturl</a>,
<a name="l53"><span class="linenum">  53</span></a>                  'config' =&gt; <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../../../_variables/config.html">$config</a>,
<a name="l54"><span class="linenum">  54</span></a>                  ))
<a name="l55"><span class="linenum">  55</span></a>          );
<a name="l56"><span class="linenum">  56</span></a>  
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment">        // Required strings for the javascript.</span>
<a name="l58"><span class="linenum">  58</span></a>          <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('requires')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../../../../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('strings_for_js')" href="../../../../_functions/strings_for_js.html" onMouseOver="funcPopup(event,'strings_for_js')">strings_for_js</a>(array('deletecheckdevicename'), 'message_airnotifier');
<a name="l59"><span class="linenum">  59</span></a>          <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('requires')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../../../../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('strings_for_js')" href="../../../../_functions/strings_for_js.html" onMouseOver="funcPopup(event,'strings_for_js')">strings_for_js</a>(array('show', 'hide'), 'moodle');
<a name="l60"><span class="linenum">  60</span></a>  
<a name="l61"><span class="linenum">  61</span></a>          return true;
<a name="l62"><span class="linenum">  62</span></a>      }
<a name="l63"><span class="linenum">  63</span></a>  
<a name="l64"><span class="linenum">  64</span></a>      <span class="comment">/**</span>
<a name="l65"><span class="linenum">  65</span></a>  <span class="comment">     * Return the user devices for a specific app.</span>
<a name="l66"><span class="linenum">  66</span></a>  <span class="comment">     *</span>
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">     * @param string $appname the app name .</span>
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment">     * @param int $userid if empty take the current user.</span>
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment">     * @return array all the devices</span>
<a name="l70"><span class="linenum">  70</span></a>  <span class="comment">     */</span>
<a name="l71"><span class="linenum">  71</span></a>      public function <a class="function" onClick="logFunction('get_user_devices')" href="../../../../_functions/get_user_devices.html" onMouseOver="funcPopup(event,'get_user_devices')">get_user_devices</a>(<a class="var it24229" onMouseOver="hilite(24229)" onMouseOut="lolite()" onClick="logVariable('appname')" href="../../../../_variables/appname.html">$appname</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../../../_variables/userid.html">$userid</a> = null) {
<a name="l72"><span class="linenum">  72</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>;
<a name="l73"><span class="linenum">  73</span></a>  
<a name="l74"><span class="linenum">  74</span></a>          if (empty(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../../../_variables/userid.html">$userid</a>)) {
<a name="l75"><span class="linenum">  75</span></a>              <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../../../_variables/userid.html">$userid</a> = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>;
<a name="l76"><span class="linenum">  76</span></a>          }
<a name="l77"><span class="linenum">  77</span></a>  
<a name="l78"><span class="linenum">  78</span></a>          <a class="var it16565" onMouseOver="hilite(16565)" onMouseOut="lolite()" onClick="logVariable('devices')" href="../../../../_variables/devices.html">$devices</a> = array();
<a name="l79"><span class="linenum">  79</span></a>  
<a name="l80"><span class="linenum">  80</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = array('appid' =&gt; <a class="var it24229" onMouseOver="hilite(24229)" onMouseOut="lolite()" onClick="logVariable('appname')" href="../../../../_variables/appname.html">$appname</a>, 'userid' =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../../../_variables/userid.html">$userid</a>);
<a name="l81"><span class="linenum">  81</span></a>  
<a name="l82"><span class="linenum">  82</span></a>  <span class="comment">        // First, we look all the devices registered for this user in the Moodle core.</span>
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment">        // We are going to allow only ios devices (since these are the ones that supports PUSH notifications).</span>
<a name="l84"><span class="linenum">  84</span></a>          <a class="var it17938" onMouseOver="hilite(17938)" onMouseOut="lolite()" onClick="logVariable('userdevices')" href="../../../../_variables/userdevices.html">$userdevices</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('user_devices', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>);
<a name="l85"><span class="linenum">  85</span></a>          foreach (<a class="var it17938" onMouseOver="hilite(17938)" onMouseOut="lolite()" onClick="logVariable('userdevices')" href="../../../../_variables/userdevices.html">$userdevices</a> as <a class="var it1457" onMouseOver="hilite(1457)" onMouseOut="lolite()" onClick="logVariable('device')" href="../../../../_variables/device.html">$device</a>) {
<a name="l86"><span class="linenum">  86</span></a>              if (<a class="class" onClick="logClass('core_text')" href="../../../../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="phpfunction" onClick="logFunction('strtolower')" href="../../../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="var it1457" onMouseOver="hilite(1457)" onMouseOut="lolite()" onClick="logVariable('device')" href="../../../../_variables/device.html">$device</a>-&gt;<a onClick="logVariable('platform')" class="var it43963" onMouseOver="hilite(43963)" onMouseOut="lolite()" href="../../../../_variables/platform.html">platform</a>)) {
<a name="l87"><span class="linenum">  87</span></a>  <span class="comment">                // Check if the device is known by airnotifier.</span>
<a name="l88"><span class="linenum">  88</span></a>                  if (!<a class="var it24230" onMouseOver="hilite(24230)" onMouseOut="lolite()" onClick="logVariable('airnotifierdev')" href="../../../../_variables/airnotifierdev.html">$airnotifierdev</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('message_airnotifier_devices',
<a name="l89"><span class="linenum">  89</span></a>                          array('userdeviceid' =&gt; <a class="var it1457" onMouseOver="hilite(1457)" onMouseOut="lolite()" onClick="logVariable('device')" href="../../../../_variables/device.html">$device</a>-&gt;<a onClick="logVariable('id')" class="var it43963" onMouseOver="hilite(43963)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>))) {
<a name="l90"><span class="linenum">  90</span></a>  
<a name="l91"><span class="linenum">  91</span></a>  <span class="comment">                    // We have to create the device token in airnotifier.</span>
<a name="l92"><span class="linenum">  92</span></a>                      if (! <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('create_token')" href="../../../../_functions/create_token.html" onMouseOver="funcPopup(event,'create_token')">create_token</a>(<a class="var it1457" onMouseOver="hilite(1457)" onMouseOut="lolite()" onClick="logVariable('device')" href="../../../../_variables/device.html">$device</a>-&gt;<a onClick="logVariable('pushid')" class="var it43963" onMouseOver="hilite(43963)" onMouseOut="lolite()" href="../../../../_variables/pushid.html">pushid</a>)) {
<a name="l93"><span class="linenum">  93</span></a>                          continue;
<a name="l94"><span class="linenum">  94</span></a>                      }
<a name="l95"><span class="linenum">  95</span></a>  
<a name="l96"><span class="linenum">  96</span></a>                      <a class="var it24230" onMouseOver="hilite(24230)" onMouseOut="lolite()" onClick="logVariable('airnotifierdev')" href="../../../../_variables/airnotifierdev.html">$airnotifierdev</a> = new stdClass;
<a name="l97"><span class="linenum">  97</span></a>                      <a class="var it24230" onMouseOver="hilite(24230)" onMouseOut="lolite()" onClick="logVariable('airnotifierdev')" href="../../../../_variables/airnotifierdev.html">$airnotifierdev</a>-&gt;<a onClick="logVariable('userdeviceid')" class="var it43964" onMouseOver="hilite(43964)" onMouseOut="lolite()" href="../../../../_variables/userdeviceid.html">userdeviceid</a> = <a class="var it1457" onMouseOver="hilite(1457)" onMouseOut="lolite()" onClick="logVariable('device')" href="../../../../_variables/device.html">$device</a>-&gt;<a onClick="logVariable('id')" class="var it43963" onMouseOver="hilite(43963)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>;
<a name="l98"><span class="linenum">  98</span></a>                      <a class="var it24230" onMouseOver="hilite(24230)" onMouseOut="lolite()" onClick="logVariable('airnotifierdev')" href="../../../../_variables/airnotifierdev.html">$airnotifierdev</a>-&gt;<a onClick="logVariable('enable')" class="var it43964" onMouseOver="hilite(43964)" onMouseOut="lolite()" href="../../../../_variables/enable.html">enable</a> = 1;
<a name="l99"><span class="linenum">  99</span></a>                      <a class="var it24230" onMouseOver="hilite(24230)" onMouseOut="lolite()" onClick="logVariable('airnotifierdev')" href="../../../../_variables/airnotifierdev.html">$airnotifierdev</a>-&gt;<a onClick="logVariable('id')" class="var it43964" onMouseOver="hilite(43964)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('message_airnotifier_devices', <a class="var it24230" onMouseOver="hilite(24230)" onMouseOut="lolite()" onClick="logVariable('airnotifierdev')" href="../../../../_variables/airnotifierdev.html">$airnotifierdev</a>);
<a name="l100"><span class="linenum"> 100</span></a>                  }
<a name="l101"><span class="linenum"> 101</span></a>                  <a class="var it1457" onMouseOver="hilite(1457)" onMouseOut="lolite()" onClick="logVariable('device')" href="../../../../_variables/device.html">$device</a>-&gt;<a onClick="logVariable('id')" class="var it43963" onMouseOver="hilite(43963)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a> = <a class="var it24230" onMouseOver="hilite(24230)" onMouseOut="lolite()" onClick="logVariable('airnotifierdev')" href="../../../../_variables/airnotifierdev.html">$airnotifierdev</a>-&gt;<a onClick="logVariable('id')" class="var it43964" onMouseOver="hilite(43964)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>;
<a name="l102"><span class="linenum"> 102</span></a>                  <a class="var it1457" onMouseOver="hilite(1457)" onMouseOut="lolite()" onClick="logVariable('device')" href="../../../../_variables/device.html">$device</a>-&gt;<a onClick="logVariable('enable')" class="var it43963" onMouseOver="hilite(43963)" onMouseOut="lolite()" href="../../../../_variables/enable.html">enable</a> = <a class="var it24230" onMouseOver="hilite(24230)" onMouseOut="lolite()" onClick="logVariable('airnotifierdev')" href="../../../../_variables/airnotifierdev.html">$airnotifierdev</a>-&gt;<a onClick="logVariable('enable')" class="var it43964" onMouseOver="hilite(43964)" onMouseOut="lolite()" href="../../../../_variables/enable.html">enable</a>;
<a name="l103"><span class="linenum"> 103</span></a>                  <a class="var it16565" onMouseOver="hilite(16565)" onMouseOut="lolite()" onClick="logVariable('devices')" href="../../../../_variables/devices.html">$devices</a>[] = <a class="var it1457" onMouseOver="hilite(1457)" onMouseOut="lolite()" onClick="logVariable('device')" href="../../../../_variables/device.html">$device</a>;
<a name="l104"><span class="linenum"> 104</span></a>              }
<a name="l105"><span class="linenum"> 105</span></a>          }
<a name="l106"><span class="linenum"> 106</span></a>  
<a name="l107"><span class="linenum"> 107</span></a>          return <a class="var it16565" onMouseOver="hilite(16565)" onMouseOut="lolite()" onClick="logVariable('devices')" href="../../../../_variables/devices.html">$devices</a>;
<a name="l108"><span class="linenum"> 108</span></a>      }
<a name="l109"><span class="linenum"> 109</span></a>  
<a name="l110"><span class="linenum"> 110</span></a>      <span class="comment">/**</span>
<a name="l111"><span class="linenum"> 111</span></a>  <span class="comment">     * Request and access key to Airnotifier</span>
<a name="l112"><span class="linenum"> 112</span></a>  <span class="comment">     *</span>
<a name="l113"><span class="linenum"> 113</span></a>  <span class="comment">     * @return mixed The access key or false in case of error</span>
<a name="l114"><span class="linenum"> 114</span></a>  <span class="comment">     */</span>
<a name="l115"><span class="linenum"> 115</span></a>      public function <a class="function" onClick="logFunction('request_accesskey')" href="../../../../_functions/request_accesskey.html" onMouseOver="funcPopup(event,'request_accesskey')">request_accesskey</a>() {
<a name="l116"><span class="linenum"> 116</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>;
<a name="l117"><span class="linenum"> 117</span></a>  
<a name="l118"><span class="linenum"> 118</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/libdir.html">libdir</a> . '/filelib.php');
<a name="l119"><span class="linenum"> 119</span></a>  
<a name="l120"><span class="linenum"> 120</span></a>  <span class="comment">        // Sending the request access key request to Airnotifier.</span>
<a name="l121"><span class="linenum"> 121</span></a>          <a class="var it2253" onMouseOver="hilite(2253)" onMouseOut="lolite()" onClick="logVariable('serverurl')" href="../../../../_variables/serverurl.html">$serverurl</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('airnotifierurl')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/airnotifierurl.html">airnotifierurl</a> . ':' . <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('airnotifierport')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/airnotifierport.html">airnotifierport</a> . '/accesskeys/';
<a name="l122"><span class="linenum"> 122</span></a>  <span class="comment">        // We use an APP Key &quot;none&quot;, it can be anything.</span>
<a name="l123"><span class="linenum"> 123</span></a>          <a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../../../../_variables/header.html">$header</a> = array('Accept: application/json', 'X-AN-APP-NAME: ' . <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('airnotifierappname')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/airnotifierappname.html">airnotifierappname</a>,
<a name="l124"><span class="linenum"> 124</span></a>              'X-AN-APP-KEY: none');
<a name="l125"><span class="linenum"> 125</span></a>          <a class="var it6381" onMouseOver="hilite(6381)" onMouseOut="lolite()" onClick="logVariable('curl')" href="../../../../_variables/curl.html">$curl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('curl')" href="../../../../_classes/curl.html" onMouseOver="classPopup(event,'curl')">curl</a>();
<a name="l126"><span class="linenum"> 126</span></a>          <a class="var it6381" onMouseOver="hilite(6381)" onMouseOut="lolite()" onClick="logVariable('curl')" href="../../../../_variables/curl.html">$curl</a>-&gt;<a class="function" onClick="logFunction('setHeader')" href="../../../../_functions/setheader.html" onMouseOver="funcPopup(event,'setheader')">setHeader</a>(<a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../../../../_variables/header.html">$header</a>);
<a name="l127"><span class="linenum"> 127</span></a>  
<a name="l128"><span class="linenum"> 128</span></a>  <span class="comment">        // Site ids are stored as secrets in md5 in the Moodle public hub.</span>
<a name="l129"><span class="linenum"> 129</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = array(
<a name="l130"><span class="linenum"> 130</span></a>              'url' =&gt; <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/wwwroot.html">wwwroot</a>,
<a name="l131"><span class="linenum"> 131</span></a>              'siteid' =&gt; md5(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('siteidentifier')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/siteidentifier.html">siteidentifier</a>),
<a name="l132"><span class="linenum"> 132</span></a>              'contact' =&gt; <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('email')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../../../_variables/email.html">email</a>,
<a name="l133"><span class="linenum"> 133</span></a>              'description' =&gt; <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;wwwroot
<a name="l134"><span class="linenum"> 134</span></a>              );
<a name="l135"><span class="linenum"> 135</span></a>          <a class="var it1959" onMouseOver="hilite(1959)" onMouseOut="lolite()" onClick="logVariable('resp')" href="../../../../_variables/resp.html">$resp</a> = <a class="var it6381" onMouseOver="hilite(6381)" onMouseOut="lolite()" onClick="logVariable('curl')" href="../../../../_variables/curl.html">$curl</a>-&gt;<a class="function" onClick="logFunction('post')" href="../../../../_functions/post.html" onMouseOver="funcPopup(event,'post')">post</a>(<a class="var it2253" onMouseOver="hilite(2253)" onMouseOut="lolite()" onClick="logVariable('serverurl')" href="../../../../_variables/serverurl.html">$serverurl</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>);
<a name="l136"><span class="linenum"> 136</span></a>  
<a name="l137"><span class="linenum"> 137</span></a>          if (<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../../_variables/key.html">$key</a> = json_decode(<a class="var it1959" onMouseOver="hilite(1959)" onMouseOut="lolite()" onClick="logVariable('resp')" href="../../../../_variables/resp.html">$resp</a>, true)) {
<a name="l138"><span class="linenum"> 138</span></a>              if (!empty(<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../../_variables/key.html">$key</a>['accesskey'])) {
<a name="l139"><span class="linenum"> 139</span></a>                  return <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../../_variables/key.html">$key</a>['accesskey'];
<a name="l140"><span class="linenum"> 140</span></a>              }
<a name="l141"><span class="linenum"> 141</span></a>          }
<a name="l142"><span class="linenum"> 142</span></a>          <a class="function" onClick="logFunction('debugging')" href="../../../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(&quot;Unexpected response from the Airnotifier server: <a class="var it1959" onMouseOver="hilite(1959)" onMouseOut="lolite()" onClick="logVariable('resp')" href="../../../../_variables/resp.html">$resp</a>&quot;);
<a name="l143"><span class="linenum"> 143</span></a>          return false;
<a name="l144"><span class="linenum"> 144</span></a>      }
<a name="l145"><span class="linenum"> 145</span></a>  
<a name="l146"><span class="linenum"> 146</span></a>      <span class="comment">/**</span>
<a name="l147"><span class="linenum"> 147</span></a>  <span class="comment">     * Create a device token in the Airnotifier instance</span>
<a name="l148"><span class="linenum"> 148</span></a>  <span class="comment">     * @param string $token The token to be created</span>
<a name="l149"><span class="linenum"> 149</span></a>  <span class="comment">     * @return bool True if all was right</span>
<a name="l150"><span class="linenum"> 150</span></a>  <span class="comment">     */</span>
<a name="l151"><span class="linenum"> 151</span></a>      private function <a class="function" onClick="logFunction('create_token')" href="../../../../_functions/create_token.html" onMouseOver="funcPopup(event,'create_token')">create_token</a>(<a class="var it310" onMouseOver="hilite(310)" onMouseOut="lolite()" onClick="logVariable('token')" href="../../../../_variables/token.html">$token</a>) {
<a name="l152"><span class="linenum"> 152</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>;
<a name="l153"><span class="linenum"> 153</span></a>  
<a name="l154"><span class="linenum"> 154</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_system_configured')" href="../../../../_functions/is_system_configured.html" onMouseOver="funcPopup(event,'is_system_configured')">is_system_configured</a>()) {
<a name="l155"><span class="linenum"> 155</span></a>              return false;
<a name="l156"><span class="linenum"> 156</span></a>          }
<a name="l157"><span class="linenum"> 157</span></a>  
<a name="l158"><span class="linenum"> 158</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/libdir.html">libdir</a> . '/filelib.php');
<a name="l159"><span class="linenum"> 159</span></a>  
<a name="l160"><span class="linenum"> 160</span></a>          <a class="var it2253" onMouseOver="hilite(2253)" onMouseOut="lolite()" onClick="logVariable('serverurl')" href="../../../../_variables/serverurl.html">$serverurl</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('airnotifierurl')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/airnotifierurl.html">airnotifierurl</a> . ':' . <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('airnotifierport')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/airnotifierport.html">airnotifierport</a> . '/tokens/' . <a class="var it310" onMouseOver="hilite(310)" onMouseOut="lolite()" onClick="logVariable('token')" href="../../../../_variables/token.html">$token</a>;
<a name="l161"><span class="linenum"> 161</span></a>          <a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../../../../_variables/header.html">$header</a> = array('Accept: application/json', 'X-AN-APP-NAME: ' . <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('airnotifierappname')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/airnotifierappname.html">airnotifierappname</a>,
<a name="l162"><span class="linenum"> 162</span></a>              'X-AN-APP-KEY: ' . <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('airnotifieraccesskey')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/airnotifieraccesskey.html">airnotifieraccesskey</a>);
<a name="l163"><span class="linenum"> 163</span></a>          <a class="var it6381" onMouseOver="hilite(6381)" onMouseOut="lolite()" onClick="logVariable('curl')" href="../../../../_variables/curl.html">$curl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('curl')" href="../../../../_classes/curl.html" onMouseOver="classPopup(event,'curl')">curl</a>;
<a name="l164"><span class="linenum"> 164</span></a>          <a class="var it6381" onMouseOver="hilite(6381)" onMouseOut="lolite()" onClick="logVariable('curl')" href="../../../../_variables/curl.html">$curl</a>-&gt;<a class="function" onClick="logFunction('setHeader')" href="../../../../_functions/setheader.html" onMouseOver="funcPopup(event,'setheader')">setHeader</a>(<a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../../../../_variables/header.html">$header</a>);
<a name="l165"><span class="linenum"> 165</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a> = array();
<a name="l166"><span class="linenum"> 166</span></a>          <a class="var it1959" onMouseOver="hilite(1959)" onMouseOut="lolite()" onClick="logVariable('resp')" href="../../../../_variables/resp.html">$resp</a> = <a class="var it6381" onMouseOver="hilite(6381)" onMouseOut="lolite()" onClick="logVariable('curl')" href="../../../../_variables/curl.html">$curl</a>-&gt;<a class="function" onClick="logFunction('post')" href="../../../../_functions/post.html" onMouseOver="funcPopup(event,'post')">post</a>(<a class="var it2253" onMouseOver="hilite(2253)" onMouseOut="lolite()" onClick="logVariable('serverurl')" href="../../../../_variables/serverurl.html">$serverurl</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../_variables/params.html">$params</a>);
<a name="l167"><span class="linenum"> 167</span></a>  
<a name="l168"><span class="linenum"> 168</span></a>          if (<a class="var it310" onMouseOver="hilite(310)" onMouseOut="lolite()" onClick="logVariable('token')" href="../../../../_variables/token.html">$token</a> = json_decode(<a class="var it1959" onMouseOver="hilite(1959)" onMouseOut="lolite()" onClick="logVariable('resp')" href="../../../../_variables/resp.html">$resp</a>, true)) {
<a name="l169"><span class="linenum"> 169</span></a>              if (!empty(<a class="var it310" onMouseOver="hilite(310)" onMouseOut="lolite()" onClick="logVariable('token')" href="../../../../_variables/token.html">$token</a>['status'])) {
<a name="l170"><span class="linenum"> 170</span></a>                  return <a class="var it310" onMouseOver="hilite(310)" onMouseOut="lolite()" onClick="logVariable('token')" href="../../../../_variables/token.html">$token</a>['status'] == 'ok' || <a class="var it310" onMouseOver="hilite(310)" onMouseOut="lolite()" onClick="logVariable('token')" href="../../../../_variables/token.html">$token</a>['status'] == 'token exists';
<a name="l171"><span class="linenum"> 171</span></a>              }
<a name="l172"><span class="linenum"> 172</span></a>          }
<a name="l173"><span class="linenum"> 173</span></a>          <a class="function" onClick="logFunction('debugging')" href="../../../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(&quot;Unexpected response from the Airnotifier server: <a class="var it1959" onMouseOver="hilite(1959)" onMouseOut="lolite()" onClick="logVariable('resp')" href="../../../../_variables/resp.html">$resp</a>&quot;);
<a name="l174"><span class="linenum"> 174</span></a>          return false;
<a name="l175"><span class="linenum"> 175</span></a>      }
<a name="l176"><span class="linenum"> 176</span></a>  
<a name="l177"><span class="linenum"> 177</span></a>      <span class="comment">/**</span>
<a name="l178"><span class="linenum"> 178</span></a>  <span class="comment">     * Tests whether the airnotifier settings have been configured</span>
<a name="l179"><span class="linenum"> 179</span></a>  <span class="comment">     * @return boolean true if airnotifier is configured</span>
<a name="l180"><span class="linenum"> 180</span></a>  <span class="comment">     */</span>
<a name="l181"><span class="linenum"> 181</span></a>      public function <a class="function" onClick="logFunction('is_system_configured')" href="../../../../_functions/is_system_configured.html" onMouseOver="funcPopup(event,'is_system_configured')">is_system_configured</a>() {
<a name="l182"><span class="linenum"> 182</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>;
<a name="l183"><span class="linenum"> 183</span></a>  
<a name="l184"><span class="linenum"> 184</span></a>          return (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('airnotifierurl')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/airnotifierurl.html">airnotifierurl</a>) &amp;&amp; !empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('airnotifierport')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/airnotifierport.html">airnotifierport</a>) &amp;&amp;
<a name="l185"><span class="linenum"> 185</span></a>                  !empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('airnotifieraccesskey')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/airnotifieraccesskey.html">airnotifieraccesskey</a>)  &amp;&amp; !empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('airnotifierappname')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/airnotifierappname.html">airnotifierappname</a>) &amp;&amp;
<a name="l186"><span class="linenum"> 186</span></a>                  !empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('airnotifiermobileappname')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/airnotifiermobileappname.html">airnotifiermobileappname</a>));
<a name="l187"><span class="linenum"> 187</span></a>      }
<a name="l188"><span class="linenum"> 188</span></a>  
<a name="l189"><span class="linenum"> 189</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'create_token': ['create_token', 'Create a device token in the Airnotifier instance ', [['message/output/airnotifier/classes','manager.php',146]], 1],
'post': ['post', 'HTTP POST method ', [['lib','filelib.php',3354],['lib','oauthlib.php',309]], 38],
'get_user_devices': ['get_user_devices', 'Return the user devices for a specific app. ', [['message/output/airnotifier/classes','manager.php',64]], 2],
'get_records': ['get_records', 'Load a list of records. ', [['competency/classes','persistent.php',709],['mod/glossary/classes','entry_query_builder.php',295],['lib/dml','moodle_database.php',1285],['lib','coursecatlib.php',651],['question','category_class.php',63]], 965],
'yui_module': ['yui_module', 'Creates a JavaScript function call that requires one or more modules to be loaded. ', [['lib','outputrequirementslib.php',1023]], 81],
'debugging': ['debugging', 'Standard Debugging Function ', [['lib','weblib.php',3012]], 1007],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'request_accesskey': ['request_accesskey', 'Request and access key to Airnotifier ', [['message/output/airnotifier/classes','manager.php',110]], 1],
'include_device_ajax': ['include_device_ajax', 'Include the relevant javascript and language strings for the device toolbox YUI module ', [['message/output/airnotifier/classes','manager.php',37]], 1],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'strings_for_js': ['strings_for_js', 'Make an array of language strings available for JS. ', [['lib','outputrequirementslib.php',1183],['enrol','locallib.php',1311]], 73],
'is_system_configured': ['is_system_configured', 'Tests whether the Jabber settings have been configured ', [['message/output/jabber','message_output_jabber.php',135],['message/output/airnotifier','externallib.php',53],['message/output/airnotifier/classes','manager.php',177],['message/output','lib.php',64],['message/output/airnotifier','message_output_airnotifier.php',214]], 8],
'setheader': ['setheader', 'Send header ', [['lib/minify/lib','FirePHP.php',779],['lib','filelib.php',2913],['lib/tcpdf','tcpdf.php',3511],['lib/google/src/Google/Service','Pagespeedonline.php',621],['lib/phpexcel/PHPExcel/Worksheet','PageMargins.php',185],['lib/google/src/Google/Service','Datastore.php',270],['lib/google/src/Google/Service','Datastore.php',314],['lib/google/src/Google/Service','Datastore.php',387],['lib/google/src/Google/Service','Datastore.php',735],['lib/google/src/Google/Service','Datastore.php',1321],['lib/google/src/Google/Service','Datastore.php',1397],['repository/s3','S3.php',2084]], 93],
'defined': ['defined', '', [], 4731],
'strtolower': ['strtolower', '', [], 817]};
CLASS_DATA={
'core_text': ['core_text', 'defines string api\'s for manipulating strings ', [['lib/classes','text.php',27]], 566],
'message_airnotifier_manager': ['message_airnotifier_manager', 'Airnotifier helper manager class ', [['message/output/airnotifier/classes','manager.php',29]], 5],
'curl': ['curl', 'RESTful cURL class ', [['lib','filelib.php',2656]], 74]};
CONST_DATA={
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
