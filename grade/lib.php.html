<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : Detail view of lib.php</title>
    <link rel="stylesheet" href="../sample.css" type="text/css">
    <link rel="stylesheet" href="../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../';
subdir='grade';
filename='lib.php.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="details-heading"><a href="./index.html">/grade/</a> -> <a href="lib.php.source.html">lib.php</a> (summary)</h2>
<div class="details-summary">
<p class="viewlinks">[<a href="lib.php.source.html">Source view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="../_stats.html">Project Stats</a>]</p>
<p><b>Functions used by gradebook plugins and reports.</b></p>
<table>
<tr><td align="right">Copyright: </td><td>2009 Petr Skoda and Nicolas Connault</td></tr>
<tr><td align="right">License: </td><td><a href="http://www.gnu.org/copyleft/gpl.html" target="_blank">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later</td></tr>
<tr><td align="right">File Size: </td><td>3041 lines (110 kb)</td></tr>
<tr><td align="right">Included or required: </td><td><a href="lib.php.xref.html">1 time</a></td></tr>
<tr><td align="right" valign="top">Referenced: </td><td>32 times</td></tr>
<tr><td align="right" valign="top">Includes or requires: </td><td>0 files</td></tr>
</table>
<h3>Defines 6 classes</h3>
<div class="inset">
<p><b>graded_users_iterator::</b> (16 methods):<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
&nbsp;&nbsp;<a href="#init">init</a>()<br>
&nbsp;&nbsp;<a href="#next_user">next_user</a>()<br>
&nbsp;&nbsp;<a href="#close">close</a>()<br>
&nbsp;&nbsp;<a href="#require_active_enrolment">require_active_enrolment</a>()<br>
&nbsp;&nbsp;<a href="#allow_user_custom_fields">allow_user_custom_fields</a>()<br>
&nbsp;&nbsp;<a href="#_push">_push</a>()<br>
&nbsp;&nbsp;<a href="#_pop">_pop</a>()<br>
&nbsp;&nbsp;<a href="#print_graded_users_selector">print_graded_users_selector</a>()<br>
&nbsp;&nbsp;<a href="#grade_get_graded_users_select">grade_get_graded_users_select</a>()<br>
&nbsp;&nbsp;<a href="#hide_natural_aggregation_upgrade_notice">hide_natural_aggregation_upgrade_notice</a>()<br>
&nbsp;&nbsp;<a href="#hide_aggregatesubcats_upgrade_notice">hide_aggregatesubcats_upgrade_notice</a>()<br>
&nbsp;&nbsp;<a href="#print_natural_aggregation_upgrade_notice">print_natural_aggregation_upgrade_notice</a>()<br>
&nbsp;&nbsp;<a href="#print_grade_plugin_selector">print_grade_plugin_selector</a>()<br>
&nbsp;&nbsp;<a href="#grade_print_tabs">grade_print_tabs</a>()<br>
&nbsp;&nbsp;<a href="#grade_get_plugin_info">grade_get_plugin_info</a>()<br>
</p>
<p><b>grade_plugin_info::</b> (2 methods):<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
&nbsp;&nbsp;<a href="#print_grade_page_head">print_grade_page_head</a>()<br>
</p>
<p><b>grade_plugin_return::</b> (7 methods):<br>
&nbsp;&nbsp;<a href="#grade_plugin_return">grade_plugin_return</a>()<br>
&nbsp;&nbsp;<a href="#get_options">get_options</a>()<br>
&nbsp;&nbsp;<a href="#get_return_url">get_return_url</a>()<br>
&nbsp;&nbsp;<a href="#get_form_fields">get_form_fields</a>()<br>
&nbsp;&nbsp;<a href="#add_mform_elements">add_mform_elements</a>()<br>
&nbsp;&nbsp;<a href="#add_url_params">add_url_params</a>()<br>
&nbsp;&nbsp;<a href="#grade_build_nav">grade_build_nav</a>()<br>
</p>
<p><b>grade_structure::</b> (13 methods):<br>
&nbsp;&nbsp;<a href="#get_element_icon">get_element_icon</a>()<br>
&nbsp;&nbsp;<a href="#get_element_header">get_element_header</a>()<br>
&nbsp;&nbsp;<a href="#get_activity_link">get_activity_link</a>()<br>
&nbsp;&nbsp;<a href="#get_grade_analysis_url">get_grade_analysis_url</a>()<br>
&nbsp;&nbsp;<a href="#get_grade_analysis_icon">get_grade_analysis_icon</a>()<br>
&nbsp;&nbsp;<a href="#get_grade_eid">get_grade_eid</a>()<br>
&nbsp;&nbsp;<a href="#get_item_eid">get_item_eid</a>()<br>
&nbsp;&nbsp;<a href="#get_params_for_iconstr">get_params_for_iconstr</a>()<br>
&nbsp;&nbsp;<a href="#get_reset_icon">get_reset_icon</a>()<br>
&nbsp;&nbsp;<a href="#get_edit_icon">get_edit_icon</a>()<br>
&nbsp;&nbsp;<a href="#get_hiding_icon">get_hiding_icon</a>()<br>
&nbsp;&nbsp;<a href="#get_locking_icon">get_locking_icon</a>()<br>
&nbsp;&nbsp;<a href="#get_calculation_icon">get_calculation_icon</a>()<br>
</p>
<p><b>grade_seq::</b> (3 methods):<br>
&nbsp;&nbsp;<a href="#grade_seq">grade_seq</a>()<br>
&nbsp;&nbsp;<a href="#flatten">flatten</a>()<br>
&nbsp;&nbsp;<a href="#locate_element">locate_element</a>()<br>
</p>
<p><b>grade_tree::</b> (27 methods):<br>
&nbsp;&nbsp;<a href="#grade_tree">grade_tree</a>()<br>
&nbsp;&nbsp;<a href="#category_collapse">category_collapse</a>()<br>
&nbsp;&nbsp;<a href="#no_outcomes">no_outcomes</a>()<br>
&nbsp;&nbsp;<a href="#category_grade_last">category_grade_last</a>()<br>
&nbsp;&nbsp;<a href="#fill_levels">fill_levels</a>()<br>
&nbsp;&nbsp;<a href="#inject_fillers">inject_fillers</a>()<br>
&nbsp;&nbsp;<a href="#inject_colspans">inject_colspans</a>()<br>
&nbsp;&nbsp;<a href="#locate_element">locate_element</a>()<br>
&nbsp;&nbsp;<a href="#exporttoxml">exporttoxml</a>()<br>
&nbsp;&nbsp;<a href="#exporttojson">exporttojson</a>()<br>
&nbsp;&nbsp;<a href="#get_levels">get_levels</a>()<br>
&nbsp;&nbsp;<a href="#get_items">get_items</a>()<br>
&nbsp;&nbsp;<a href="#get_item">get_item</a>()<br>
&nbsp;&nbsp;<a href="#grade_button">grade_button</a>()<br>
&nbsp;&nbsp;<a href="#grade_extend_settings">grade_extend_settings</a>()<br>
&nbsp;&nbsp;<a href="#get_plugin_strings">get_plugin_strings</a>()<br>
&nbsp;&nbsp;<a href="#get_aggregation_strings">get_aggregation_strings</a>()<br>
&nbsp;&nbsp;<a href="#get_info_manage_settings">get_info_manage_settings</a>()<br>
&nbsp;&nbsp;<a href="#get_plugins_reports">get_plugins_reports</a>()<br>
&nbsp;&nbsp;<a href="#get_info_scales">get_info_scales</a>()<br>
&nbsp;&nbsp;<a href="#get_info_outcomes">get_info_outcomes</a>()<br>
&nbsp;&nbsp;<a href="#get_info_letters">get_info_letters</a>()<br>
&nbsp;&nbsp;<a href="#get_plugins_import">get_plugins_import</a>()<br>
&nbsp;&nbsp;<a href="#get_plugins_export">get_plugins_export</a>()<br>
&nbsp;&nbsp;<a href="#get_user_field_value">get_user_field_value</a>()<br>
&nbsp;&nbsp;<a href="#get_user_profile_fields">get_user_profile_fields</a>()<br>
&nbsp;&nbsp;<a href="#fetch_all_natural_weights_for_course">fetch_all_natural_weights_for_course</a>()<br>
</p>
</div>
</div>
<br><div class="details-funclist">
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="graded_users_iterator"><b>graded_users_iterator</b></a>&nbsp;&nbsp;- <a href="../_classes/graded_users_iterator.html"><small>X-Ref</small></a>
</p>
<b>This class iterates over all users that are graded in a course.<BR>
Returns detailed info about users and their grades.<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'lib.php.source.html#l103')" href="lib.php.source.html#l103">__construct</a>(<a href="../_variables/course.html">$course</a>, <a href="../_variables/grade_items.html">$grade_items</a>=null, <a href="../_variables/groupid.html">$groupid</a>=0,<a href="../_variables/sortfield1.html">$sortfield1</a>='lastname', <a href="../_variables/sortorder1.html">$sortorder1</a>='ASC',<a href="../_variables/sortfield2.html">$sortfield2</a>='firstname', <a href="../_variables/sortorder2.html">$sortorder2</a>='ASC')&nbsp;&nbsp;
<a href="../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Constructor<BR>
</b><BR><b>param:</b> object $course A course object<br>
<b>param:</b> array&nbsp;&nbsp;$grade_items array of grade items, if not specified only user info returned<br>
<b>param:</b> int&nbsp;&nbsp;&nbsp;&nbsp;$groupid iterate only group users if present<br>
<b>param:</b> string $sortfield1 The first field of the users table by which the array of users will be sorted<br>
<b>param:</b> string $sortorder1 The order in which the first sorting field will be sorted (ASC or DESC)<br>
<b>param:</b> string $sortfield2 The second field of the users table by which the array of users will be sorted<br>
<b>param:</b> string $sortorder2 The order in which the second sorting field will be sorted (ASC or DESC)<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="init" onClick="logFunction('init', 'lib.php.source.html#l128')" href="lib.php.source.html#l128">init</a>()&nbsp;&nbsp;
<a href="../_functions/init.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Initialise the iterator<BR>
</b><BR><b>return:</b> boolean success<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="next_user" onClick="logFunction('next_user', 'lib.php.source.html#l251')" href="lib.php.source.html#l251">next_user</a>()&nbsp;&nbsp;
<a href="../_functions/next_user.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns information about the next user<BR>
</b><BR><b>return:</b> mixed array of user info, all grades and feedback or null when no more users found<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="close" onClick="logFunction('close', 'lib.php.source.html#l323')" href="lib.php.source.html#l323">close</a>()&nbsp;&nbsp;
<a href="../_functions/close.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Close the iterator, do not forget to call this function<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="require_active_enrolment" onClick="logFunction('require_active_enrolment', 'lib.php.source.html#l338')" href="lib.php.source.html#l338">require_active_enrolment</a>(<a href="../_variables/onlyactive.html">$onlyactive</a> = true)&nbsp;&nbsp;
<a href="../_functions/require_active_enrolment.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Should all enrolled users be exported or just those with an active enrolment?<BR>
</b><BR><b>param:</b> bool $onlyactive True to limit the export to users with an active enrolment<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="allow_user_custom_fields" onClick="logFunction('allow_user_custom_fields', 'lib.php.source.html#l350')" href="lib.php.source.html#l350">allow_user_custom_fields</a>(<a href="../_variables/allow.html">$allow</a> = true)&nbsp;&nbsp;
<a href="../_functions/allow_user_custom_fields.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Allow custom fields to be included<BR>
</b><BR><b>param:</b> bool $allow Whether to allow custom fields or not<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="_push" onClick="logFunction('_push', 'lib.php.source.html#l364')" href="lib.php.source.html#l364">_push</a>(<a href="../_variables/grade.html">$grade</a>)&nbsp;&nbsp;
<a href="../_functions/_push.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Add a grade_grade instance to the grade stack<BR>
</b><BR><b>param:</b> grade_grade $grade Grade object<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="_pop" onClick="logFunction('_pop', 'lib.php.source.html#l376')" href="lib.php.source.html#l376">_pop</a>()&nbsp;&nbsp;
<a href="../_functions/_pop.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Remove a grade_grade instance from the grade stack<BR>
</b><BR><b>return:</b> grade_grade current grade object<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="print_graded_users_selector" onClick="logFunction('print_graded_users_selector', 'lib.php.source.html#l399')" href="lib.php.source.html#l399">print_graded_users_selector</a>(<a href="../_variables/course.html">$course</a>, <a href="../_variables/actionpage.html">$actionpage</a>, <a href="../_variables/userid.html">$userid</a>=0, <a href="../_variables/groupid.html">$groupid</a>=0, <a href="../_variables/includeall.html">$includeall</a>=true, <a href="../_variables/return.html">$return</a>=false)&nbsp;&nbsp;
<a href="../_functions/print_graded_users_selector.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Print a selection popup form of the graded users in a course.<BR>
</b><BR><b>param:</b> int&nbsp;&nbsp;&nbsp;&nbsp;$course id of the course<br>
<b>param:</b> string $actionpage The page receiving the data from the popoup form<br>
<b>param:</b> int&nbsp;&nbsp;&nbsp;&nbsp;$userid&nbsp;&nbsp;&nbsp;id of the currently selected user (or 'all' if they are all selected)<br>
<b>param:</b> int&nbsp;&nbsp;&nbsp;&nbsp;$groupid id of requested group, 0 means all<br>
<b>param:</b> int&nbsp;&nbsp;&nbsp;&nbsp;$includeall bool include all option<br>
<b>param:</b> bool&nbsp;&nbsp;&nbsp;$return If true, will return the HTML, otherwise, will print directly<br>
<b>return:</b> null<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="grade_get_graded_users_select" onClick="logFunction('grade_get_graded_users_select', 'lib.php.source.html#l417')" href="lib.php.source.html#l417">grade_get_graded_users_select</a>(<a href="../_variables/report.html">$report</a>, <a href="../_variables/course.html">$course</a>, <a href="../_variables/userid.html">$userid</a>, <a href="../_variables/groupid.html">$groupid</a>, <a href="../_variables/includeall.html">$includeall</a>)&nbsp;&nbsp;
<a href="../_functions/grade_get_graded_users_select.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><i>No description</i></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="hide_natural_aggregation_upgrade_notice" onClick="logFunction('hide_natural_aggregation_upgrade_notice', 'lib.php.source.html#l461')" href="lib.php.source.html#l461">hide_natural_aggregation_upgrade_notice</a>(<a href="../_variables/courseid.html">$courseid</a>)&nbsp;&nbsp;
<a href="../_functions/hide_natural_aggregation_upgrade_notice.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Hide warning about changed grades during upgrade to 2.8.<BR>
</b><BR><b>param:</b> int $courseid The current course id.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="hide_aggregatesubcats_upgrade_notice" onClick="logFunction('hide_aggregatesubcats_upgrade_notice', 'lib.php.source.html#l470')" href="lib.php.source.html#l470">hide_aggregatesubcats_upgrade_notice</a>(<a href="../_variables/courseid.html">$courseid</a>)&nbsp;&nbsp;
<a href="../_functions/hide_aggregatesubcats_upgrade_notice.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Hide warning about changed grades during upgrade to 2.8.<BR>
</b><BR><b>param:</b> int $courseid The current course id.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="print_natural_aggregation_upgrade_notice" onClick="logFunction('print_natural_aggregation_upgrade_notice', 'lib.php.source.html#l479')" href="lib.php.source.html#l479">print_natural_aggregation_upgrade_notice</a>(<a href="../_variables/courseid.html">$courseid</a>, <a href="../_variables/context.html">$context</a>, <a href="../_variables/thispage.html">$thispage</a>, <a href="../_variables/return.html">$return</a>=false)&nbsp;&nbsp;
<a href="../_functions/print_natural_aggregation_upgrade_notice.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Print warning about changed grades during upgrade to 2.8.<BR>
</b><BR><b>param:</b> int $courseid The current course id.<br>
<b>param:</b> context $context The course context.<br>
<b>param:</b> string $thispage The relative path for the current page. E.g. /grade/report/user/index.php<br>
<b>param:</b> boolean $return return as string<br>
<b>return:</b> nothing or string if $return true<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="print_grade_plugin_selector" onClick="logFunction('print_grade_plugin_selector', 'lib.php.source.html#l545')" href="lib.php.source.html#l545">print_grade_plugin_selector</a>(<a href="../_variables/plugin_info.html">$plugin_info</a>, <a href="../_variables/active_type.html">$active_type</a>, <a href="../_variables/active_plugin.html">$active_plugin</a>, <a href="../_variables/return.html">$return</a>=false)&nbsp;&nbsp;
<a href="../_functions/print_grade_plugin_selector.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Print grading plugin selection popup form.<BR>
</b><BR><b>param:</b> array&nbsp;&nbsp;&nbsp;$plugin_info An array of plugins containing information for the selector<br>
<b>param:</b> boolean $return return as string<br>
<b>return:</b> nothing or string if $return true<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="grade_print_tabs" onClick="logFunction('grade_print_tabs', 'lib.php.source.html#l599')" href="lib.php.source.html#l599">grade_print_tabs</a>(<a href="../_variables/active_type.html">$active_type</a>, <a href="../_variables/active_plugin.html">$active_plugin</a>, <a href="../_variables/plugin_info.html">$plugin_info</a>, <a href="../_variables/return.html">$return</a>=false)&nbsp;&nbsp;
<a href="../_functions/grade_print_tabs.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Print grading plugin selection tab-based navigation.<BR>
</b><BR><b>param:</b> string&nbsp;&nbsp;$active_type type of plugin on current page - import, export, report or edit<br>
<b>param:</b> string&nbsp;&nbsp;$active_plugin active plugin type - grader, user, cvs, ...<br>
<b>param:</b> array&nbsp;&nbsp;&nbsp;$plugin_info Array of plugins<br>
<b>param:</b> boolean $return return as string<br>
<b>return:</b> nothing or string if $return true<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="grade_get_plugin_info" onClick="logFunction('grade_get_plugin_info', 'lib.php.source.html#l670')" href="lib.php.source.html#l670">grade_get_plugin_info</a>(<a href="../_variables/courseid.html">$courseid</a>, <a href="../_variables/active_type.html">$active_type</a>, <a href="../_variables/active_plugin.html">$active_plugin</a>)&nbsp;&nbsp;
<a href="../_functions/grade_get_plugin_info.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>grade_get_plugin_info<BR>
</b><BR><b>param:</b> int&nbsp;&nbsp;&nbsp;&nbsp;$courseid The course id<br>
<b>param:</b> string $active_type type of plugin on current page - import, export, report or edit<br>
<b>param:</b> string $active_plugin active plugin type - grader, user, cvs, ...<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="grade_plugin_info"><b>grade_plugin_info</b></a>&nbsp;&nbsp;- <a href="../_classes/grade_plugin_info.html"><small>X-Ref</small></a>
</p>
<b>A simple class containing info about grade plugins.<BR>
Can be subclassed for special rules<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'lib.php.source.html#l785')" href="lib.php.source.html#l785">__construct</a>(<a href="../_variables/id.html">$id</a>, <a href="../_variables/link.html">$link</a>, <a href="../_variables/string.html">$string</a>, <a href="../_variables/parent.html">$parent</a>=null)&nbsp;&nbsp;
<a href="../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Constructor<BR>
</b><BR><b>param:</b> int $id A unique id for this plugin<br>
<b>param:</b> string $link A URL to access this plugin<br>
<b>param:</b> string $string The name of this plugin<br>
<b>param:</b> object $parent Another grade_plugin_info object, parent of the current one<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="print_grade_page_head" onClick="logFunction('print_grade_page_head', 'lib.php.source.html#l803')" href="lib.php.source.html#l803">print_grade_page_head</a>(<a href="../_variables/courseid.html">$courseid</a>, <a href="../_variables/active_type.html">$active_type</a>, <a href="../_variables/active_plugin.html">$active_plugin</a>=null,<a href="../_variables/heading.html">$heading</a> = false, <a href="../_variables/return.html">$return</a>=false,<a href="../_variables/buttons.html">$buttons</a>=false, <a href="../_variables/shownavigation.html">$shownavigation</a>=true, <a href="../_variables/headerhelpidentifier.html">$headerhelpidentifier</a> = null, <a href="../_variables/headerhelpcomponent.html">$headerhelpcomponent</a> = null,<a href="../_variables/user.html">$user</a> = null)&nbsp;&nbsp;
<a href="../_functions/print_grade_page_head.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Prints the page headers, breadcrumb trail, page heading, (optional) dropdown navigation menu and<BR>
(optional) navigation tabs for any gradebook page. All gradebook pages MUST use these functions<BR>
in favour of the usual print_header(), print_header_simple(), print_heading() etc.<BR>
!IMPORTANT! Use of tabs.php file in gradebook pages is forbidden unless tabs are switched off at<BR>
the site level for the gradebook ($CFG-&gt;grade_navmethod = GRADE_NAVMETHOD_DROPDOWN).<BR>
</b><BR><b>param:</b> int&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$courseid Course id<br>
<b>param:</b> string&nbsp;&nbsp;$active_type The type of the current page (report, settings,<br>
<b>param:</b> string&nbsp;&nbsp;$active_plugin The plugin of the current page (grader, fullview etc...)<br>
<b>param:</b> string&nbsp;&nbsp;$heading The heading of the page. Tries to guess if none is given<br>
<b>param:</b> boolean $return Whether to return (true) or echo (false) the HTML generated by this function<br>
<b>param:</b> string&nbsp;&nbsp;$bodytags Additional attributes that will be added to the &lt;body&gt; tag<br>
<b>param:</b> string&nbsp;&nbsp;$buttons Additional buttons to display on the page<br>
<b>param:</b> boolean $shownavigation should the gradebook navigation drop down (or tabs) be shown?<br>
<b>param:</b> string&nbsp;&nbsp;$headerhelpidentifier The help string identifier if required.<br>
<b>param:</b> string&nbsp;&nbsp;$headerhelpcomponent The component for the help string.<br>
<b>param:</b> stdClass $user The user object for use with the user context header.<br>
<b>return:</b> string HTML code or nothing if $return == false<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="grade_plugin_return"><b>grade_plugin_return</b></a>&nbsp;&nbsp;- <a href="../_classes/grade_plugin_return.html"><small>X-Ref</small></a>
</p>
<b>Utility class used for return tracking when using edit and other forms in grade plugins<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="grade_plugin_return" onClick="logFunction('grade_plugin_return', 'lib.php.source.html#l941')" href="lib.php.source.html#l941">grade_plugin_return</a>(<a href="../_variables/params.html">$params</a> = null)&nbsp;&nbsp;
<a href="../_functions/grade_plugin_return.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Constructor<BR>
</b><BR><b>param:</b> array $params - associative array with return parameters, if null parameter are taken from _GET or _POST<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_options" onClick="logFunction('get_options', 'lib.php.source.html#l963')" href="lib.php.source.html#l963">get_options</a>()&nbsp;&nbsp;
<a href="../_functions/get_options.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns return parameters as options array suitable for buttons.<BR>
</b><BR><b>return:</b> array options<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_return_url" onClick="logFunction('get_return_url', 'lib.php.source.html#l993')" href="lib.php.source.html#l993">get_return_url</a>(<a href="../_variables/default.html">$default</a>, <a href="../_variables/extras.html">$extras</a>=null)&nbsp;&nbsp;
<a href="../_functions/get_return_url.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns return url<BR>
</b><BR><b>param:</b> string $default default url when params not set<br>
<b>param:</b> array&nbsp;&nbsp;$extras Extra URL parameters<br>
<b>return:</b> string url<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_form_fields" onClick="logFunction('get_form_fields', 'lib.php.source.html#l1036')" href="lib.php.source.html#l1036">get_form_fields</a>()&nbsp;&nbsp;
<a href="../_functions/get_form_fields.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns string with hidden return tracking form elements.<BR>
</b><BR><b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="add_mform_elements" onClick="logFunction('add_mform_elements', 'lib.php.source.html#l1064')" href="lib.php.source.html#l1064">add_mform_elements</a>(&amp;<a href="../_variables/mform.html">$mform</a>)&nbsp;&nbsp;
<a href="../_functions/add_mform_elements.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Add hidden elements into mform<BR>
</b><BR><b>param:</b> object &amp;$mform moodle form object<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="add_url_params" onClick="logFunction('add_url_params', 'lib.php.source.html#l1100')" href="lib.php.source.html#l1100">add_url_params</a>(moodle_url <a href="../_variables/url.html">$url</a>)&nbsp;&nbsp;
<a href="../_functions/add_url_params.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Add return tracking params into url<BR>
</b><BR><b>param:</b> moodle_url $url A URL<br>
<b>return:</b> string $url with return tracking params<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="grade_build_nav" onClick="logFunction('grade_build_nav', 'lib.php.source.html#l1134')" href="lib.php.source.html#l1134">grade_build_nav</a>(<a href="../_variables/path.html">$path</a>, <a href="../_variables/pagename.html">$pagename</a>=null, <a href="../_variables/id.html">$id</a>=null)&nbsp;&nbsp;
<a href="../_functions/grade_build_nav.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Function central to gradebook for building and printing the navigation (breadcrumb trail).<BR>
</b><BR><b>param:</b> string $path The path of the calling script (using __FILE__?)<br>
<b>param:</b> string $pagename The language string to use as the last part of the navigation (non-link)<br>
<b>param:</b> mixed&nbsp;&nbsp;$id Either a plain integer (assuming the key is 'id') or<br>
<b>return:</b> string<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="grade_structure"><b>grade_structure</b></a>&nbsp;&nbsp;- <a href="../_classes/grade_structure.html"><small>X-Ref</small></a>
</p>
<b>General structure representing grade items in course<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_element_icon" onClick="logFunction('get_element_icon', 'lib.php.source.html#l1258')" href="lib.php.source.html#l1258">get_element_icon</a>(&amp;<a href="../_variables/element.html">$element</a>, <a href="../_variables/spacerifnone.html">$spacerifnone</a>=false)&nbsp;&nbsp;
<a href="../_functions/get_element_icon.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns icon of element<BR>
</b><BR><b>param:</b> array &amp;$element An array representing an element in the grade_tree<br>
<b>param:</b> bool&nbsp;&nbsp;$spacerifnone return spacer if no icon found<br>
<b>return:</b> string icon or spacer<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_element_header" onClick="logFunction('get_element_header', 'lib.php.source.html#l1357')" href="lib.php.source.html#l1357">get_element_header</a>(&amp;<a href="../_variables/element.html">$element</a>, <a href="../_variables/withlink.html">$withlink</a> = false, <a href="../_variables/icon.html">$icon</a> = true, <a href="../_variables/spacerifnone.html">$spacerifnone</a> = false,<a href="../_variables/withdescription.html">$withdescription</a> = false, <a href="../_variables/fulltotal.html">$fulltotal</a> = false)&nbsp;&nbsp;
<a href="../_functions/get_element_header.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns name of element optionally with icon and link<BR>
</b><BR><b>param:</b> array &amp;$element An array representing an element in the grade_tree<br>
<b>param:</b> bool&nbsp;&nbsp;$withlink Whether or not this header has a link<br>
<b>param:</b> bool&nbsp;&nbsp;$icon Whether or not to display an icon with this header<br>
<b>param:</b> bool&nbsp;&nbsp;$spacerifnone return spacer if no icon found<br>
<b>param:</b> bool&nbsp;&nbsp;$withdescription Show description if defined by this item.<br>
<b>param:</b> bool&nbsp;&nbsp;$fulltotal If the item is a category total, returns $categoryname.&quot;total&quot;<br>
<b>return:</b> string header<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_activity_link" onClick="logFunction('get_activity_link', 'lib.php.source.html#l1405')" href="lib.php.source.html#l1405">get_activity_link</a>(<a href="../_variables/element.html">$element</a>)&nbsp;&nbsp;
<a href="../_functions/get_activity_link.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><i>No description</i></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_grade_analysis_url" onClick="logFunction('get_grade_analysis_url', 'lib.php.source.html#l1453')" href="lib.php.source.html#l1453">get_grade_analysis_url</a>(grade_grade <a href="../_variables/grade.html">$grade</a>)&nbsp;&nbsp;
<a href="../_functions/get_grade_analysis_url.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns URL of a page that is supposed to contain detailed grade analysis<BR>
</b><BR>At the moment, only activity modules are supported. The method generates link<BR>
to the module's file grade.php with the parameters id (cmid), itemid, itemnumber,<BR>
gradeid and userid. If the grade.php does not exist, null is returned.<BR>
<BR>
<b>return:</b> moodle_url|null URL or null if unable to construct it<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_grade_analysis_icon" onClick="logFunction('get_grade_analysis_icon', 'lib.php.source.html#l1515')" href="lib.php.source.html#l1515">get_grade_analysis_icon</a>(grade_grade <a href="../_variables/grade.html">$grade</a>)&nbsp;&nbsp;
<a href="../_functions/get_grade_analysis_icon.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns an action icon leading to the grade analysis page<BR>
</b><BR><b>param:</b> grade_grade $grade<br>
<b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_grade_eid" onClick="logFunction('get_grade_eid', 'lib.php.source.html#l1533')" href="lib.php.source.html#l1533">get_grade_eid</a>(<a href="../_variables/grade_grade.html">$grade_grade</a>)&nbsp;&nbsp;
<a href="../_functions/get_grade_eid.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the grade eid - the grade may not exist yet.<BR>
</b><BR><b>param:</b> grade_grade $grade_grade A grade_grade object<br>
<b>return:</b> string eid<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_item_eid" onClick="logFunction('get_item_eid', 'lib.php.source.html#l1548')" href="lib.php.source.html#l1548">get_item_eid</a>(<a href="../_variables/grade_item.html">$grade_item</a>)&nbsp;&nbsp;
<a href="../_functions/get_item_eid.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the grade_item eid<BR>
</b><BR><b>param:</b> grade_item $grade_item A grade_item object<br>
<b>return:</b> string eid<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_params_for_iconstr" onClick="logFunction('get_params_for_iconstr', 'lib.php.source.html#l1557')" href="lib.php.source.html#l1557">get_params_for_iconstr</a>(<a href="../_variables/element.html">$element</a>)&nbsp;&nbsp;
<a href="../_functions/get_params_for_iconstr.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Given a grade_tree element, returns an array of parameters<BR>
used to build an icon for that element.<BR>
</b><BR><b>param:</b> array $element An array representing an element in the grade_tree<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_reset_icon" onClick="logFunction('get_reset_icon', 'lib.php.source.html#l1592')" href="lib.php.source.html#l1592">get_reset_icon</a>(<a href="../_variables/element.html">$element</a>, <a href="../_variables/gpr.html">$gpr</a>, <a href="../_variables/returnactionmenulink.html">$returnactionmenulink</a> = false)&nbsp;&nbsp;
<a href="../_functions/get_reset_icon.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Return a reset icon for the given element.<BR>
</b><BR><b>param:</b> array&nbsp;&nbsp;$element An array representing an element in the grade_tree<br>
<b>param:</b> object $gpr A grade_plugin_return object<br>
<b>param:</b> bool $returnactionmenulink return the instance of action_menu_link instead of string<br>
<b>return:</b> string|action_menu_link<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_edit_icon" onClick="logFunction('get_edit_icon', 'lib.php.source.html#l1626')" href="lib.php.source.html#l1626">get_edit_icon</a>(<a href="../_variables/element.html">$element</a>, <a href="../_variables/gpr.html">$gpr</a>, <a href="../_variables/returnactionmenulink.html">$returnactionmenulink</a> = false)&nbsp;&nbsp;
<a href="../_functions/get_edit_icon.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Return edit icon for give element<BR>
</b><BR><b>param:</b> array&nbsp;&nbsp;$element An array representing an element in the grade_tree<br>
<b>param:</b> object $gpr A grade_plugin_return object<br>
<b>param:</b> bool $returnactionmenulink return the instance of action_menu_link instead of string<br>
<b>return:</b> string|action_menu_link<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_hiding_icon" onClick="logFunction('get_hiding_icon', 'lib.php.source.html#l1708')" href="lib.php.source.html#l1708">get_hiding_icon</a>(<a href="../_variables/element.html">$element</a>, <a href="../_variables/gpr.html">$gpr</a>, <a href="../_variables/returnactionmenulink.html">$returnactionmenulink</a> = false)&nbsp;&nbsp;
<a href="../_functions/get_hiding_icon.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Return hiding icon for give element<BR>
</b><BR><b>param:</b> array&nbsp;&nbsp;$element An array representing an element in the grade_tree<br>
<b>param:</b> object $gpr A grade_plugin_return object<br>
<b>param:</b> bool $returnactionmenulink return the instance of action_menu_link instead of string<br>
<b>return:</b> string|action_menu_link<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_locking_icon" onClick="logFunction('get_locking_icon', 'lib.php.source.html#l1766')" href="lib.php.source.html#l1766">get_locking_icon</a>(<a href="../_variables/element.html">$element</a>, <a href="../_variables/gpr.html">$gpr</a>)&nbsp;&nbsp;
<a href="../_functions/get_locking_icon.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Return locking icon for given element<BR>
</b><BR><b>param:</b> array&nbsp;&nbsp;$element An array representing an element in the grade_tree<br>
<b>param:</b> object $gpr A grade_plugin_return object<br>
<b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_calculation_icon" onClick="logFunction('get_calculation_icon', 'lib.php.source.html#l1823')" href="lib.php.source.html#l1823">get_calculation_icon</a>(<a href="../_variables/element.html">$element</a>, <a href="../_variables/gpr.html">$gpr</a>, <a href="../_variables/returnactionmenulink.html">$returnactionmenulink</a> = false)&nbsp;&nbsp;
<a href="../_functions/get_calculation_icon.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Return calculation icon for given element<BR>
</b><BR><b>param:</b> array&nbsp;&nbsp;$element An array representing an element in the grade_tree<br>
<b>param:</b> object $gpr A grade_plugin_return object<br>
<b>param:</b> bool $returnactionmenulink return the instance of action_menu_link instead of string<br>
<b>return:</b> string|action_menu_link<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="grade_seq"><b>grade_seq</b></a>&nbsp;&nbsp;- <a href="../_classes/grade_seq.html"><small>X-Ref</small></a>
</p>
<b>Flat structure similar to grade tree.<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="grade_seq" onClick="logFunction('grade_seq', 'lib.php.source.html#l1886')" href="lib.php.source.html#l1886">grade_seq</a>(<a href="../_variables/courseid.html">$courseid</a>, <a href="../_variables/category_grade_last.html">$category_grade_last</a>=false, <a href="../_variables/nooutcomes.html">$nooutcomes</a>=false)&nbsp;&nbsp;
<a href="../_functions/grade_seq.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Constructor, retrieves and stores array of all grade_category and grade_item<BR>
objects for the given courseid. Full objects are instantiated. Ordering sequence is fixed if needed.<BR>
</b><BR><b>param:</b> int&nbsp;&nbsp;$courseid The course id<br>
<b>param:</b> bool $category_grade_last category grade item is the last child<br>
<b>param:</b> bool $nooutcomes Whether or not outcomes should be included<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="flatten" onClick="logFunction('flatten', 'lib.php.source.html#l1910')" href="lib.php.source.html#l1910">flatten</a>(&amp;<a href="../_variables/element.html">$element</a>, <a href="../_variables/category_grade_last.html">$category_grade_last</a>, <a href="../_variables/nooutcomes.html">$nooutcomes</a>)&nbsp;&nbsp;
<a href="../_functions/flatten.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Static recursive helper - makes the grade_item for category the last children<BR>
</b><BR><b>param:</b> array &amp;$element The seed of the recursion<br>
<b>param:</b> bool $category_grade_last category grade item is the last child<br>
<b>param:</b> bool $nooutcomes Whether or not outcomes should be included<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="locate_element" onClick="logFunction('locate_element', 'lib.php.source.html#l1952')" href="lib.php.source.html#l1952">locate_element</a>(<a href="../_variables/eid.html">$eid</a>)&nbsp;&nbsp;
<a href="../_functions/locate_element.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Parses the array in search of a given eid and returns a element object with<BR>
information about the element it has found.<BR>
</b><BR><b>param:</b> int $eid Gradetree Element ID<br>
<b>return:</b> object element<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="grade_tree"><b>grade_tree</b></a>&nbsp;&nbsp;- <a href="../_classes/grade_tree.html"><small>X-Ref</small></a>
</p>
<b>This class represents a complete tree of categories, grade_items and final grades,<BR>
organises as an array primarily, but which can also be converted to other formats.<BR>
It has simple method calls with complex implementations, allowing for easy insertion,<BR>
deletion and moving of items and categories within the tree.<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="grade_tree" onClick="logFunction('grade_tree', 'lib.php.source.html#l2036')" href="lib.php.source.html#l2036">grade_tree</a>(<a href="../_variables/courseid.html">$courseid</a>, <a href="../_variables/fillers.html">$fillers</a>=true, <a href="../_variables/category_grade_last.html">$category_grade_last</a>=false,<a href="../_variables/collapsed.html">$collapsed</a>=null, <a href="../_variables/nooutcomes.html">$nooutcomes</a>=false)&nbsp;&nbsp;
<a href="../_functions/grade_tree.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Constructor, retrieves and stores a hierarchical array of all grade_category and grade_item<BR>
objects for the given courseid. Full objects are instantiated. Ordering sequence is fixed if needed.<BR>
</b><BR><b>param:</b> int&nbsp;&nbsp;&nbsp;$courseid The Course ID<br>
<b>param:</b> bool&nbsp;&nbsp;$fillers include fillers and colspans, make the levels var &quot;rectangular&quot;<br>
<b>param:</b> bool&nbsp;&nbsp;$category_grade_last category grade item is the last child<br>
<b>param:</b> array $collapsed array of collapsed categories<br>
<b>param:</b> bool&nbsp;&nbsp;$nooutcomes Whether or not outcomes should be included<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="category_collapse" onClick="logFunction('category_collapse', 'lib.php.source.html#l2090')" href="lib.php.source.html#l2090">category_collapse</a>(&amp;<a href="../_variables/element.html">$element</a>, <a href="../_variables/collapsed.html">$collapsed</a>)&nbsp;&nbsp;
<a href="../_functions/category_collapse.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Static recursive helper - removes items from collapsed categories<BR>
</b><BR><b>param:</b> array &amp;$element The seed of the recursion<br>
<b>param:</b> array $collapsed array of collapsed categories<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="no_outcomes" onClick="logFunction('no_outcomes', 'lib.php.source.html#l2122')" href="lib.php.source.html#l2122">no_outcomes</a>(&amp;<a href="../_variables/element.html">$element</a>)&nbsp;&nbsp;
<a href="../_functions/no_outcomes.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Static recursive helper - removes all outcomes<BR>
</b><BR><b>param:</b> array &amp;$element The seed of the recursion<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="category_grade_last" onClick="logFunction('category_grade_last', 'lib.php.source.html#l2144')" href="lib.php.source.html#l2144">category_grade_last</a>(&amp;<a href="../_variables/element.html">$element</a>)&nbsp;&nbsp;
<a href="../_functions/category_grade_last.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Static recursive helper - makes the grade_item for category the last children<BR>
</b><BR><b>param:</b> array &amp;$element The seed of the recursion<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="fill_levels" onClick="logFunction('fill_levels', 'lib.php.source.html#l2170')" href="lib.php.source.html#l2170">fill_levels</a>(&amp;<a href="../_variables/levels.html">$levels</a>, &amp;<a href="../_variables/element.html">$element</a>, <a href="../_variables/depth.html">$depth</a>)&nbsp;&nbsp;
<a href="../_functions/fill_levels.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Static recursive helper - fills the levels array, useful when accessing tree elements of one level<BR>
</b><BR><b>param:</b> array &amp;$levels The levels of the grade tree through which to recurse<br>
<b>param:</b> array &amp;$element The seed of the recursion<br>
<b>param:</b> int&nbsp;&nbsp;&nbsp;$depth How deep are we?<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="inject_fillers" onClick="logFunction('inject_fillers', 'lib.php.source.html#l2208')" href="lib.php.source.html#l2208">inject_fillers</a>(&amp;<a href="../_variables/element.html">$element</a>, <a href="../_variables/depth.html">$depth</a>)&nbsp;&nbsp;
<a href="../_functions/inject_fillers.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Static recursive helper - makes full tree (all leafes are at the same level)<BR>
</b><BR><b>param:</b> array &amp;$element The seed of the recursion<br>
<b>param:</b> int&nbsp;&nbsp;&nbsp;$depth How deep are we?<br>
<b>return:</b> int<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="inject_colspans" onClick="logFunction('inject_colspans', 'lib.php.source.html#l2255')" href="lib.php.source.html#l2255">inject_colspans</a>(&amp;<a href="../_variables/element.html">$element</a>)&nbsp;&nbsp;
<a href="../_functions/inject_colspans.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Static recursive helper - add colspan information into categories<BR>
</b><BR><b>param:</b> array &amp;$element The seed of the recursion<br>
<b>return:</b> int<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="locate_element" onClick="logFunction('locate_element', 'lib.php.source.html#l2274')" href="lib.php.source.html#l2274">locate_element</a>(<a href="../_variables/eid.html">$eid</a>)&nbsp;&nbsp;
<a href="../_functions/locate_element.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Parses the array in search of a given eid and returns a element object with<BR>
information about the element it has found.<BR>
</b><BR><b>param:</b> int $eid Gradetree Element ID<br>
<b>return:</b> object element<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="exporttoxml" onClick="logFunction('exporttoxml', 'lib.php.source.html#l2329')" href="lib.php.source.html#l2329">exporttoxml</a>(<a href="../_variables/root.html">$root</a>=null, <a href="../_variables/tabs.html">$tabs</a>=&quot;\t&quot;)&nbsp;&nbsp;
<a href="../_functions/exporttoxml.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns a well-formed XML representation of the grade-tree using recursion.<BR>
</b><BR><b>param:</b> array&nbsp;&nbsp;$root The current element in the recursion. If null, starts at the top of the tree.<br>
<b>param:</b> string $tabs The control character to use for tabs<br>
<b>return:</b> string $xml<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="exporttojson" onClick="logFunction('exporttojson', 'lib.php.source.html#l2380')" href="lib.php.source.html#l2380">exporttojson</a>(<a href="../_variables/root.html">$root</a>=null, <a href="../_variables/tabs.html">$tabs</a>=&quot;\t&quot;)&nbsp;&nbsp;
<a href="../_functions/exporttojson.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns a JSON representation of the grade-tree using recursion.<BR>
</b><BR><b>param:</b> array $root The current element in the recursion. If null, starts at the top of the tree.<br>
<b>param:</b> string $tabs Tab characters used to indent the string nicely for humans to enjoy<br>
<b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_levels" onClick="logFunction('get_levels', 'lib.php.source.html#l2440')" href="lib.php.source.html#l2440">get_levels</a>()&nbsp;&nbsp;
<a href="../_functions/get_levels.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the array of levels<BR>
</b><BR><b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_items" onClick="logFunction('get_items', 'lib.php.source.html#l2449')" href="lib.php.source.html#l2449">get_items</a>()&nbsp;&nbsp;
<a href="../_functions/get_items.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the array of grade items<BR>
</b><BR><b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_item" onClick="logFunction('get_item', 'lib.php.source.html#l2458')" href="lib.php.source.html#l2458">get_item</a>(<a href="../_variables/itemid.html">$itemid</a>)&nbsp;&nbsp;
<a href="../_functions/get_item.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns a specific Grade Item<BR>
</b><BR><b>param:</b> int $itemid The ID of the grade_item object<br>
<b>return:</b> grade_item<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="grade_button" onClick="logFunction('grade_button', 'lib.php.source.html#l2474')" href="lib.php.source.html#l2474">grade_button</a>(<a href="../_variables/type.html">$type</a>, <a href="../_variables/courseid.html">$courseid</a>, <a href="../_variables/object.html">$object</a>)&nbsp;&nbsp;
<a href="../_functions/grade_button.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Local shortcut function for creating an edit/delete button for a grade_* object.<BR>
</b><BR><b>param:</b> string $type 'edit' or 'delete'<br>
<b>param:</b> int $courseid The Course ID<br>
<b>param:</b> grade_* $object The grade_* object<br>
<b>return:</b> string html<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="grade_extend_settings" onClick="logFunction('grade_extend_settings', 'lib.php.source.html#l2502')" href="lib.php.source.html#l2502">grade_extend_settings</a>(<a href="../_variables/plugininfo.html">$plugininfo</a>, <a href="../_variables/courseid.html">$courseid</a>)&nbsp;&nbsp;
<a href="../_functions/grade_extend_settings.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>This method adds settings to the settings block for the grade system and its<BR>
plugins<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_plugin_strings" onClick="logFunction('get_plugin_strings', 'lib.php.source.html#l2631')" href="lib.php.source.html#l2631">get_plugin_strings</a>()&nbsp;&nbsp;
<a href="../_functions/get_plugin_strings.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Gets strings commonly used by the describe plugins<BR>
</b><BR>report =&gt; get_string('view'),<BR>
scale =&gt; get_string('scales'),<BR>
outcome =&gt; get_string('outcomes', 'grades'),<BR>
letter =&gt; get_string('letters', 'grades'),<BR>
export =&gt; get_string('export', 'grades'),<BR>
import =&gt; get_string('import'),<BR>
settings =&gt; get_string('settings')<BR>
<BR>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_aggregation_strings" onClick="logFunction('get_aggregation_strings', 'lib.php.source.html#l2659')" href="lib.php.source.html#l2659">get_aggregation_strings</a>()&nbsp;&nbsp;
<a href="../_functions/get_aggregation_strings.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Gets strings describing the available aggregation methods.<BR>
</b><BR><b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_info_manage_settings" onClick="logFunction('get_info_manage_settings', 'lib.php.source.html#l2681')" href="lib.php.source.html#l2681">get_info_manage_settings</a>(<a href="../_variables/courseid.html">$courseid</a>)&nbsp;&nbsp;
<a href="../_functions/get_info_manage_settings.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get grade_plugin_info object for managing settings if the user can<BR>
</b><BR><b>param:</b> int $courseid<br>
<b>return:</b> grade_plugin_info[]<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_plugins_reports" onClick="logFunction('get_plugins_reports', 'lib.php.source.html#l2709')" href="lib.php.source.html#l2709">get_plugins_reports</a>(<a href="../_variables/courseid.html">$courseid</a>)&nbsp;&nbsp;
<a href="../_functions/get_plugins_reports.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns an array of plugin reports as grade_plugin_info objects<BR>
</b><BR><b>param:</b> int $courseid<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_info_scales" onClick="logFunction('get_info_scales', 'lib.php.source.html#l2761')" href="lib.php.source.html#l2761">get_info_scales</a>(<a href="../_variables/courseid.html">$courseid</a>)&nbsp;&nbsp;
<a href="../_functions/get_info_scales.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get information on scales<BR>
</b><BR><b>param:</b> int $courseid<br>
<b>return:</b> grade_plugin_info<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_info_outcomes" onClick="logFunction('get_info_outcomes', 'lib.php.source.html#l2778')" href="lib.php.source.html#l2778">get_info_outcomes</a>(<a href="../_variables/courseid.html">$courseid</a>)&nbsp;&nbsp;
<a href="../_functions/get_info_outcomes.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get information on outcomes<BR>
</b><BR><b>param:</b> int $courseid<br>
<b>return:</b> grade_plugin_info<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_info_letters" onClick="logFunction('get_info_letters', 'lib.php.source.html#l2815')" href="lib.php.source.html#l2815">get_info_letters</a>(<a href="../_variables/courseid.html">$courseid</a>)&nbsp;&nbsp;
<a href="../_functions/get_info_letters.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get information on letters<BR>
</b><BR><b>param:</b> int $courseid<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_plugins_import" onClick="logFunction('get_plugins_import', 'lib.php.source.html#l2844')" href="lib.php.source.html#l2844">get_plugins_import</a>(<a href="../_variables/courseid.html">$courseid</a>)&nbsp;&nbsp;
<a href="../_functions/get_plugins_import.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get information import plugins<BR>
</b><BR><b>param:</b> int $courseid<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_plugins_export" onClick="logFunction('get_plugins_export', 'lib.php.source.html#l2884')" href="lib.php.source.html#l2884">get_plugins_export</a>(<a href="../_variables/courseid.html">$courseid</a>)&nbsp;&nbsp;
<a href="../_functions/get_plugins_export.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get information export plugins<BR>
</b><BR><b>param:</b> int $courseid<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_user_field_value" onClick="logFunction('get_user_field_value', 'lib.php.source.html#l2928')" href="lib.php.source.html#l2928">get_user_field_value</a>(<a href="../_variables/user.html">$user</a>, <a href="../_variables/field.html">$field</a>)&nbsp;&nbsp;
<a href="../_functions/get_user_field_value.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the value of a field from a user record<BR>
</b><BR><b>param:</b> stdClass $user object<br>
<b>param:</b> stdClass $field object<br>
<b>return:</b> string value of the field<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_user_profile_fields" onClick="logFunction('get_user_profile_fields', 'lib.php.source.html#l2949')" href="lib.php.source.html#l2949">get_user_profile_fields</a>(<a href="../_variables/courseid.html">$courseid</a>, <a href="../_variables/includecustomfields.html">$includecustomfields</a> = false)&nbsp;&nbsp;
<a href="../_functions/get_user_profile_fields.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns an array of user profile fields to be included in export<BR>
</b><BR><b>param:</b> int $courseid<br>
<b>param:</b> bool $includecustomfields<br>
<b>return:</b> array An array of stdClass instances with customid, shortname, datatype, default and fullname fields<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="fetch_all_natural_weights_for_course" onClick="logFunction('fetch_all_natural_weights_for_course', 'lib.php.source.html#l3024')" href="lib.php.source.html#l3024">fetch_all_natural_weights_for_course</a>(<a href="../_variables/courseid.html">$courseid</a>)&nbsp;&nbsp;
<a href="../_functions/fetch_all_natural_weights_for_course.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>This helper method gets a snapshot of all the weights for a course.<BR>
It is used as a quick method to see if any wieghts have been automatically adjusted.<BR>
</b><BR><b>param:</b> int $courseid<br>
<b>return:</b> array of itemid -&gt; aggregationcoef2<br>
</td></tr></table>

<br>
</div>
</div>

</div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
