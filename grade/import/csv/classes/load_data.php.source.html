<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /grade/import/csv/classes/load_data.php source</title>
    <link rel="stylesheet" href="../../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../../';
subdir='grade/import/csv/classes';
filename='load_data.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/grade/import/csv/classes/</a> -> <a href="load_data.php.html">load_data.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="load_data.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="load_data.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * A class for loading and preparing grade data from import.</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package   gradeimport_csv</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @copyright 2014 Adrian Greeve &lt;adrian@moodle.com&gt;</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> */</span>
<a name="l24"><span class="linenum">  24</span></a>  
<a name="l25"><span class="linenum">  25</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment">/**</span>
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment"> * A class for loading and preparing grade data from import.</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> *</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> * @package   gradeimport_csv</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> * @copyright 2014 Adrian Greeve &lt;adrian@moodle.com&gt;</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> */</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('gradeimport_csv_load_data')" href="../../../../_classes/gradeimport_csv_load_data.html" onMouseOver="classPopup(event,'gradeimport_csv_load_data')">gradeimport_csv_load_data</a> {
<a name="l35"><span class="linenum">  35</span></a>  
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment">    /** @var string $error csv import error. */</span>
<a name="l37"><span class="linenum">  37</span></a>      protected <a class="var it275" onMouseOver="hilite(275)" onMouseOut="lolite()" onClick="logVariable('error')" href="../../../../_variables/error.html">$error</a>;
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment">    /** @var int $iid Unique identifier for these csv records. */</span>
<a name="l39"><span class="linenum">  39</span></a>      protected <a class="var it8317" onMouseOver="hilite(8317)" onMouseOut="lolite()" onClick="logVariable('iid')" href="../../../../_variables/iid.html">$iid</a>;
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment">    /** @var array $headers Column names for the data. */</span>
<a name="l41"><span class="linenum">  41</span></a>      protected <a class="var it1021" onMouseOver="hilite(1021)" onMouseOut="lolite()" onClick="logVariable('headers')" href="../../../../_variables/headers.html">$headers</a>;
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment">    /** @var array $previewdata A subsection of the csv imported data. */</span>
<a name="l43"><span class="linenum">  43</span></a>      protected <a class="var it31148" onMouseOver="hilite(31148)" onMouseOut="lolite()" onClick="logVariable('previewdata')" href="../../../../_variables/previewdata.html">$previewdata</a>;
<a name="l44"><span class="linenum">  44</span></a>  
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment">    // The map_user_data_with_value variables.</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment">    /** @var array $newgrades Grades to be inserted into the gradebook. */</span>
<a name="l47"><span class="linenum">  47</span></a>      protected <a class="var it8608" onMouseOver="hilite(8608)" onMouseOut="lolite()" onClick="logVariable('newgrades')" href="../../../../_variables/newgrades.html">$newgrades</a>;
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment">    /** @var array $newfeedbacks Feedback to be inserted into the gradebook. */</span>
<a name="l49"><span class="linenum">  49</span></a>      protected <a class="var it8609" onMouseOver="hilite(8609)" onMouseOut="lolite()" onClick="logVariable('newfeedbacks')" href="../../../../_variables/newfeedbacks.html">$newfeedbacks</a>;
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment">    /** @var int $studentid Student ID*/</span>
<a name="l51"><span class="linenum">  51</span></a>      protected <a class="var it8603" onMouseOver="hilite(8603)" onMouseOut="lolite()" onClick="logVariable('studentid')" href="../../../../_variables/studentid.html">$studentid</a>;
<a name="l52"><span class="linenum">  52</span></a>  
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment">    // The prepare_import_grade_data() variables.</span>
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment">    /** @var bool $status The current status of the import. True = okay, False = errors. */</span>
<a name="l55"><span class="linenum">  55</span></a>      protected <a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../../_variables/status.html">$status</a>;
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment">    /** @var int $importcode The code for this batch insert. */</span>
<a name="l57"><span class="linenum">  57</span></a>      protected <a class="var it8106" onMouseOver="hilite(8106)" onMouseOut="lolite()" onClick="logVariable('importcode')" href="../../../../_variables/importcode.html">$importcode</a>;
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment">    /** @var array $gradebookerrors An array of errors from trying to import into the gradebook. */</span>
<a name="l59"><span class="linenum">  59</span></a>      protected <a class="var it31149" onMouseOver="hilite(31149)" onMouseOut="lolite()" onClick="logVariable('gradebookerrors')" href="../../../../_variables/gradebookerrors.html">$gradebookerrors</a>;
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment">    /** @var array $newgradeitems An array of new grade items to be inserted into the gradebook. */</span>
<a name="l61"><span class="linenum">  61</span></a>      protected <a class="var it8604" onMouseOver="hilite(8604)" onMouseOut="lolite()" onClick="logVariable('newgradeitems')" href="../../../../_variables/newgradeitems.html">$newgradeitems</a>;
<a name="l62"><span class="linenum">  62</span></a>  
<a name="l63"><span class="linenum">  63</span></a>      <span class="comment">/**</span>
<a name="l64"><span class="linenum">  64</span></a>  <span class="comment">     * Load CSV content for previewing.</span>
<a name="l65"><span class="linenum">  65</span></a>  <span class="comment">     *</span>
<a name="l66"><span class="linenum">  66</span></a>  <span class="comment">     * @param string $text The grade data being imported.</span>
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">     * @param string $encoding The type of encoding the file uses.</span>
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment">     * @param string $separator The separator being used to define each field.</span>
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment">     * @param int $previewrows How many rows are being previewed.</span>
<a name="l70"><span class="linenum">  70</span></a>  <span class="comment">     */</span>
<a name="l71"><span class="linenum">  71</span></a>      public function <a class="function" onClick="logFunction('load_csv_content')" href="../../../../_functions/load_csv_content.html" onMouseOver="funcPopup(event,'load_csv_content')">load_csv_content</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../../_variables/text.html">$text</a>, <a class="var it479" onMouseOver="hilite(479)" onMouseOut="lolite()" onClick="logVariable('encoding')" href="../../../../_variables/encoding.html">$encoding</a>, <a class="var it2203" onMouseOver="hilite(2203)" onMouseOut="lolite()" onClick="logVariable('separator')" href="../../../../_variables/separator.html">$separator</a>, <a class="var it12149" onMouseOver="hilite(12149)" onMouseOut="lolite()" onClick="logVariable('previewrows')" href="../../../../_variables/previewrows.html">$previewrows</a>) {
<a name="l72"><span class="linenum">  72</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('raise_limits')" href="../../../../_functions/raise_limits.html" onMouseOver="funcPopup(event,'raise_limits')">raise_limits</a>();
<a name="l73"><span class="linenum">  73</span></a>  
<a name="l74"><span class="linenum">  74</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('iid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/iid.html">iid</a> = <a class="class" onClick="logClass('csv_import_reader')" href="../../../../_classes/csv_import_reader.html" onMouseOver="classPopup(event,'csv_import_reader')">csv_import_reader</a>::<a class="function" onClick="logFunction('get_new_iid')" href="../../../../_functions/get_new_iid.html" onMouseOver="funcPopup(event,'get_new_iid')">get_new_iid</a>('grade');
<a name="l75"><span class="linenum">  75</span></a>          <a class="var it12354" onMouseOver="hilite(12354)" onMouseOut="lolite()" onClick="logVariable('csvimport')" href="../../../../_variables/csvimport.html">$csvimport</a> = <span class="keyword">new </span><a class="class" onClick="logClass('csv_import_reader')" href="../../../../_classes/csv_import_reader.html" onMouseOver="classPopup(event,'csv_import_reader')">csv_import_reader</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('iid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/iid.html">iid</a>, 'grade');
<a name="l76"><span class="linenum">  76</span></a>  
<a name="l77"><span class="linenum">  77</span></a>          <a class="var it12354" onMouseOver="hilite(12354)" onMouseOut="lolite()" onClick="logVariable('csvimport')" href="../../../../_variables/csvimport.html">$csvimport</a>-&gt;<a class="function" onClick="logFunction('load_csv_content')" href="../../../../_functions/load_csv_content.html" onMouseOver="funcPopup(event,'load_csv_content')">load_csv_content</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../../../_variables/text.html">$text</a>, <a class="var it479" onMouseOver="hilite(479)" onMouseOut="lolite()" onClick="logVariable('encoding')" href="../../../../_variables/encoding.html">$encoding</a>, <a class="var it2203" onMouseOver="hilite(2203)" onMouseOut="lolite()" onClick="logVariable('separator')" href="../../../../_variables/separator.html">$separator</a>);
<a name="l78"><span class="linenum">  78</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('error')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/error.html">error</a> = <a class="var it12354" onMouseOver="hilite(12354)" onMouseOut="lolite()" onClick="logVariable('csvimport')" href="../../../../_variables/csvimport.html">$csvimport</a>-&gt;<a class="function" onClick="logFunction('get_error')" href="../../../../_functions/get_error.html" onMouseOver="funcPopup(event,'get_error')">get_error</a>();
<a name="l79"><span class="linenum">  79</span></a>  
<a name="l80"><span class="linenum">  80</span></a>  <span class="comment">        // If there are no import errors then proceed.</span>
<a name="l81"><span class="linenum">  81</span></a>          if (empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('error')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/error.html">error</a>)) {
<a name="l82"><span class="linenum">  82</span></a>  
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment">            // Get header (field names).</span>
<a name="l84"><span class="linenum">  84</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('headers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/headers.html">headers</a> = <a class="var it12354" onMouseOver="hilite(12354)" onMouseOut="lolite()" onClick="logVariable('csvimport')" href="../../../../_variables/csvimport.html">$csvimport</a>-&gt;<a class="function" onClick="logFunction('get_columns')" href="../../../../_functions/get_columns.html" onMouseOver="funcPopup(event,'get_columns')">get_columns</a>();
<a name="l85"><span class="linenum">  85</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('trim_headers')" href="../../../../_functions/trim_headers.html" onMouseOver="funcPopup(event,'trim_headers')">trim_headers</a>();
<a name="l86"><span class="linenum">  86</span></a>  
<a name="l87"><span class="linenum">  87</span></a>              <a class="var it12354" onMouseOver="hilite(12354)" onMouseOut="lolite()" onClick="logVariable('csvimport')" href="../../../../_variables/csvimport.html">$csvimport</a>-&gt;<a class="function" onClick="logFunction('init')" href="../../../../_functions/init.html" onMouseOver="funcPopup(event,'init')">init</a>();
<a name="l88"><span class="linenum">  88</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('previewdata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/previewdata.html">previewdata</a> = array();
<a name="l89"><span class="linenum">  89</span></a>  
<a name="l90"><span class="linenum">  90</span></a>              for (<a class="var it31150" onMouseOver="hilite(31150)" onMouseOut="lolite()" onClick="logVariable('numlines')" href="../../../../_variables/numlines.html">$numlines</a> = 0; <a class="var it31150" onMouseOver="hilite(31150)" onMouseOut="lolite()" onClick="logVariable('numlines')" href="../../../../_variables/numlines.html">$numlines</a> &lt;= <a class="var it12149" onMouseOver="hilite(12149)" onMouseOut="lolite()" onClick="logVariable('previewrows')" href="../../../../_variables/previewrows.html">$previewrows</a>; <a class="var it31150" onMouseOver="hilite(31150)" onMouseOut="lolite()" onClick="logVariable('numlines')" href="../../../../_variables/numlines.html">$numlines</a>++) {
<a name="l91"><span class="linenum">  91</span></a>                  <a class="var it255" onMouseOver="hilite(255)" onMouseOut="lolite()" onClick="logVariable('lines')" href="../../../../_variables/lines.html">$lines</a> = <a class="var it12354" onMouseOver="hilite(12354)" onMouseOut="lolite()" onClick="logVariable('csvimport')" href="../../../../_variables/csvimport.html">$csvimport</a>-&gt;<a class="phpfunction" onClick="logFunction('next')" href="../../../../_functions/next.html" onMouseOver="phpfuncPopup(event,'next')">next</a>();
<a name="l92"><span class="linenum">  92</span></a>                  if (<a class="var it255" onMouseOver="hilite(255)" onMouseOut="lolite()" onClick="logVariable('lines')" href="../../../../_variables/lines.html">$lines</a>) {
<a name="l93"><span class="linenum">  93</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('previewdata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/previewdata.html">previewdata</a>[] = <a class="var it255" onMouseOver="hilite(255)" onMouseOut="lolite()" onClick="logVariable('lines')" href="../../../../_variables/lines.html">$lines</a>;
<a name="l94"><span class="linenum">  94</span></a>                  }
<a name="l95"><span class="linenum">  95</span></a>              }
<a name="l96"><span class="linenum">  96</span></a>          }
<a name="l97"><span class="linenum">  97</span></a>      }
<a name="l98"><span class="linenum">  98</span></a>  
<a name="l99"><span class="linenum">  99</span></a>      <span class="comment">/**</span>
<a name="l100"><span class="linenum"> 100</span></a>  <span class="comment">     * Gets all of the grade items in this course.</span>
<a name="l101"><span class="linenum"> 101</span></a>  <span class="comment">     *</span>
<a name="l102"><span class="linenum"> 102</span></a>  <span class="comment">     * @param int $courseid Course id;</span>
<a name="l103"><span class="linenum"> 103</span></a>  <span class="comment">     * @return array An array of grade items for the course.</span>
<a name="l104"><span class="linenum"> 104</span></a>  <span class="comment">     */</span>
<a name="l105"><span class="linenum"> 105</span></a>      public static function <a class="function" onClick="logFunction('fetch_grade_items')" href="../../../../_functions/fetch_grade_items.html" onMouseOver="funcPopup(event,'fetch_grade_items')">fetch_grade_items</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../../_variables/courseid.html">$courseid</a>) {
<a name="l106"><span class="linenum"> 106</span></a>          <a class="var it9994" onMouseOver="hilite(9994)" onMouseOut="lolite()" onClick="logVariable('gradeitems')" href="../../../../_variables/gradeitems.html">$gradeitems</a> = null;
<a name="l107"><span class="linenum"> 107</span></a>          if (<a class="var it4074" onMouseOver="hilite(4074)" onMouseOut="lolite()" onClick="logVariable('allgradeitems')" href="../../../../_variables/allgradeitems.html">$allgradeitems</a> = <a class="class" onClick="logClass('grade_item')" href="../../../../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>::<a class="function" onClick="logFunction('fetch_all')" href="../../../../_functions/fetch_all.html" onMouseOver="funcPopup(event,'fetch_all')">fetch_all</a>(array('courseid' =&gt; <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../../_variables/courseid.html">$courseid</a>))) {
<a name="l108"><span class="linenum"> 108</span></a>              foreach (<a class="var it4074" onMouseOver="hilite(4074)" onMouseOut="lolite()" onClick="logVariable('allgradeitems')" href="../../../../_variables/allgradeitems.html">$allgradeitems</a> as <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../../../_variables/gradeitem.html">$gradeitem</a>) {
<a name="l109"><span class="linenum"> 109</span></a>  <span class="comment">                // Skip course type and category type.</span>
<a name="l110"><span class="linenum"> 110</span></a>                  if (<a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('itemtype')" class="var it42964" onMouseOver="hilite(42964)" onMouseOut="lolite()" href="../../../../_variables/itemtype.html">itemtype</a> == 'course' || <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('itemtype')" class="var it42964" onMouseOver="hilite(42964)" onMouseOut="lolite()" href="../../../../_variables/itemtype.html">itemtype</a> == 'category') {
<a name="l111"><span class="linenum"> 111</span></a>                      continue;
<a name="l112"><span class="linenum"> 112</span></a>                  }
<a name="l113"><span class="linenum"> 113</span></a>  
<a name="l114"><span class="linenum"> 114</span></a>                  <a class="var it31151" onMouseOver="hilite(31151)" onMouseOut="lolite()" onClick="logVariable('displaystring')" href="../../../../_variables/displaystring.html">$displaystring</a> = null;
<a name="l115"><span class="linenum"> 115</span></a>                  if (!empty(<a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('itemmodule')" class="var it42964" onMouseOver="hilite(42964)" onMouseOut="lolite()" href="../../../../_variables/itemmodule.html">itemmodule</a>)) {
<a name="l116"><span class="linenum"> 116</span></a>                      <a class="var it31151" onMouseOver="hilite(31151)" onMouseOut="lolite()" onClick="logVariable('displaystring')" href="../../../../_variables/displaystring.html">$displaystring</a> = <a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulename', <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('itemmodule')" class="var it42964" onMouseOver="hilite(42964)" onMouseOut="lolite()" href="../../../../_variables/itemmodule.html">itemmodule</a>).<a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('labelsep', 'langconfig')
<a name="l117"><span class="linenum"> 117</span></a>                              .<a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>();
<a name="l118"><span class="linenum"> 118</span></a>                  } else {
<a name="l119"><span class="linenum"> 119</span></a>                      <a class="var it31151" onMouseOver="hilite(31151)" onMouseOut="lolite()" onClick="logVariable('displaystring')" href="../../../../_variables/displaystring.html">$displaystring</a> = <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>();
<a name="l120"><span class="linenum"> 120</span></a>                  }
<a name="l121"><span class="linenum"> 121</span></a>                  <a class="var it9994" onMouseOver="hilite(9994)" onMouseOut="lolite()" onClick="logVariable('gradeitems')" href="../../../../_variables/gradeitems.html">$gradeitems</a>[<a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('id')" class="var it42964" onMouseOver="hilite(42964)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>] = <a class="var it31151" onMouseOver="hilite(31151)" onMouseOut="lolite()" onClick="logVariable('displaystring')" href="../../../../_variables/displaystring.html">$displaystring</a>;
<a name="l122"><span class="linenum"> 122</span></a>              }
<a name="l123"><span class="linenum"> 123</span></a>          }
<a name="l124"><span class="linenum"> 124</span></a>          return <a class="var it9994" onMouseOver="hilite(9994)" onMouseOut="lolite()" onClick="logVariable('gradeitems')" href="../../../../_variables/gradeitems.html">$gradeitems</a>;
<a name="l125"><span class="linenum"> 125</span></a>      }
<a name="l126"><span class="linenum"> 126</span></a>  
<a name="l127"><span class="linenum"> 127</span></a>      <span class="comment">/**</span>
<a name="l128"><span class="linenum"> 128</span></a>  <span class="comment">     * Cleans the column headers from the CSV file.</span>
<a name="l129"><span class="linenum"> 129</span></a>  <span class="comment">     */</span>
<a name="l130"><span class="linenum"> 130</span></a>      protected function <a class="function" onClick="logFunction('trim_headers')" href="../../../../_functions/trim_headers.html" onMouseOver="funcPopup(event,'trim_headers')">trim_headers</a>() {
<a name="l131"><span class="linenum"> 131</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('headers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/headers.html">headers</a> as <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../../_variables/i.html">$i</a> =&gt; <a class="var it1022" onMouseOver="hilite(1022)" onMouseOut="lolite()" onClick="logVariable('h')" href="../../../../_variables/h.html">$h</a>) {
<a name="l132"><span class="linenum"> 132</span></a>              <a class="var it1022" onMouseOver="hilite(1022)" onMouseOut="lolite()" onClick="logVariable('h')" href="../../../../_variables/h.html">$h</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it1022" onMouseOver="hilite(1022)" onMouseOut="lolite()" onClick="logVariable('h')" href="../../../../_variables/h.html">$h</a>); <span class="comment">// Remove whitespace.</span>
<a name="l133"><span class="linenum"> 133</span></a>              <a class="var it1022" onMouseOver="hilite(1022)" onMouseOut="lolite()" onClick="logVariable('h')" href="../../../../_variables/h.html">$h</a> = <a class="function" onClick="logFunction('clean_param')" href="../../../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it1022" onMouseOver="hilite(1022)" onMouseOut="lolite()" onClick="logVariable('h')" href="../../../../_variables/h.html">$h</a>, <a class="constant" onClick="logConstant('PARAM_RAW')" href="../../../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>); <span class="comment">// Clean the header.</span>
<a name="l134"><span class="linenum"> 134</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('headers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/headers.html">headers</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../../_variables/i.html">$i</a>] = <a class="var it1022" onMouseOver="hilite(1022)" onMouseOut="lolite()" onClick="logVariable('h')" href="../../../../_variables/h.html">$h</a>;
<a name="l135"><span class="linenum"> 135</span></a>          }
<a name="l136"><span class="linenum"> 136</span></a>      }
<a name="l137"><span class="linenum"> 137</span></a>  
<a name="l138"><span class="linenum"> 138</span></a>      <span class="comment">/**</span>
<a name="l139"><span class="linenum"> 139</span></a>  <span class="comment">     * Raises the php execution time and memory limits for importing the CSV file.</span>
<a name="l140"><span class="linenum"> 140</span></a>  <span class="comment">     */</span>
<a name="l141"><span class="linenum"> 141</span></a>      protected function <a class="function" onClick="logFunction('raise_limits')" href="../../../../_functions/raise_limits.html" onMouseOver="funcPopup(event,'raise_limits')">raise_limits</a>() {
<a name="l142"><span class="linenum"> 142</span></a>  <span class="comment">        // Large files are likely to take their time and memory. Let PHP know</span>
<a name="l143"><span class="linenum"> 143</span></a>  <span class="comment">        // that we'll take longer, and that the process should be recycled soon</span>
<a name="l144"><span class="linenum"> 144</span></a>  <span class="comment">        // to free up memory.</span>
<a name="l145"><span class="linenum"> 145</span></a>          <a class="class" onClick="logClass('core_php_time_limit')" href="../../../../_classes/core_php_time_limit.html" onMouseOver="classPopup(event,'core_php_time_limit')">core_php_time_limit</a>::<a class="function" onClick="logFunction('raise')" href="../../../../_functions/raise.html" onMouseOver="funcPopup(event,'raise')">raise</a>();
<a name="l146"><span class="linenum"> 146</span></a>          <a class="function" onClick="logFunction('raise_memory_limit')" href="../../../../_functions/raise_memory_limit.html" onMouseOver="funcPopup(event,'raise_memory_limit')">raise_memory_limit</a>(<a class="constant" onClick="logConstant('MEMORY_EXTRA')" href="../../../../_constants/MEMORY_EXTRA.html" onMouseOver="constPopup(event,'MEMORY_EXTRA')">MEMORY_EXTRA</a>);
<a name="l147"><span class="linenum"> 147</span></a>      }
<a name="l148"><span class="linenum"> 148</span></a>  
<a name="l149"><span class="linenum"> 149</span></a>      <span class="comment">/**</span>
<a name="l150"><span class="linenum"> 150</span></a>  <span class="comment">     * Inserts a record into the grade_import_values table. This also adds common record information.</span>
<a name="l151"><span class="linenum"> 151</span></a>  <span class="comment">     *</span>
<a name="l152"><span class="linenum"> 152</span></a>  <span class="comment">     * @param object $record The grade record being inserted into the database.</span>
<a name="l153"><span class="linenum"> 153</span></a>  <span class="comment">     * @param int $studentid The student ID.</span>
<a name="l154"><span class="linenum"> 154</span></a>  <span class="comment">     * @return bool|int true or insert id on success. Null if the grade value is too high.</span>
<a name="l155"><span class="linenum"> 155</span></a>  <span class="comment">     */</span>
<a name="l156"><span class="linenum"> 156</span></a>      protected function <a class="function" onClick="logFunction('insert_grade_record')" href="../../../../_functions/insert_grade_record.html" onMouseOver="funcPopup(event,'insert_grade_record')">insert_grade_record</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>, <a class="var it8603" onMouseOver="hilite(8603)" onMouseOut="lolite()" onClick="logVariable('studentid')" href="../../../../_variables/studentid.html">$studentid</a>) {
<a name="l157"><span class="linenum"> 157</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>;
<a name="l158"><span class="linenum"> 158</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('importcode')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/importcode.html">importcode</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('importcode')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/importcode.html">importcode</a>;
<a name="l159"><span class="linenum"> 159</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('userid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/userid.html">userid</a>     = <a class="var it8603" onMouseOver="hilite(8603)" onMouseOut="lolite()" onClick="logVariable('studentid')" href="../../../../_variables/studentid.html">$studentid</a>;
<a name="l160"><span class="linenum"> 160</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('importer')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/importer.html">importer</a>   = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>;
<a name="l161"><span class="linenum"> 161</span></a>  <span class="comment">        // By default the maximum grade is 100.</span>
<a name="l162"><span class="linenum"> 162</span></a>          <a class="var it31152" onMouseOver="hilite(31152)" onMouseOut="lolite()" onClick="logVariable('gradepointmaximum')" href="../../../../_variables/gradepointmaximum.html">$gradepointmaximum</a> = 100;
<a name="l163"><span class="linenum"> 163</span></a>  <span class="comment">        // If the grade limit has been increased then use the gradepointmax setting.</span>
<a name="l164"><span class="linenum"> 164</span></a>          if (<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('unlimitedgrades')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/unlimitedgrades.html">unlimitedgrades</a>) {
<a name="l165"><span class="linenum"> 165</span></a>              <a class="var it31152" onMouseOver="hilite(31152)" onMouseOut="lolite()" onClick="logVariable('gradepointmaximum')" href="../../../../_variables/gradepointmaximum.html">$gradepointmaximum</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('gradepointmax')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/gradepointmax.html">gradepointmax</a>;
<a name="l166"><span class="linenum"> 166</span></a>          }
<a name="l167"><span class="linenum"> 167</span></a>  <span class="comment">        // If the record final grade is set then check that the grade value isn't too high.</span>
<a name="l168"><span class="linenum"> 168</span></a>  <span class="comment">        // Final grade will not be set if we are inserting feedback.</span>
<a name="l169"><span class="linenum"> 169</span></a>          if (!isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('finalgrade')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/finalgrade.html">finalgrade</a>) || <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('finalgrade')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/finalgrade.html">finalgrade</a> &lt;= <a class="var it31152" onMouseOver="hilite(31152)" onMouseOut="lolite()" onClick="logVariable('gradepointmaximum')" href="../../../../_variables/gradepointmaximum.html">$gradepointmaximum</a>) {
<a name="l170"><span class="linenum"> 170</span></a>              return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('grade_import_values', <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>);
<a name="l171"><span class="linenum"> 171</span></a>          } else {
<a name="l172"><span class="linenum"> 172</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('cleanup_import')" href="../../../../_functions/cleanup_import.html" onMouseOver="funcPopup(event,'cleanup_import')">cleanup_import</a>(<a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('gradevaluetoobig', 'grades', <a class="var it31152" onMouseOver="hilite(31152)" onMouseOut="lolite()" onClick="logVariable('gradepointmaximum')" href="../../../../_variables/gradepointmaximum.html">$gradepointmaximum</a>));
<a name="l173"><span class="linenum"> 173</span></a>              return null;
<a name="l174"><span class="linenum"> 174</span></a>          }
<a name="l175"><span class="linenum"> 175</span></a>      }
<a name="l176"><span class="linenum"> 176</span></a>  
<a name="l177"><span class="linenum"> 177</span></a>      <span class="comment">/**</span>
<a name="l178"><span class="linenum"> 178</span></a>  <span class="comment">     * Insert the new grade into the grade item buffer table.</span>
<a name="l179"><span class="linenum"> 179</span></a>  <span class="comment">     *</span>
<a name="l180"><span class="linenum"> 180</span></a>  <span class="comment">     * @param array $header The column headers from the CSV file.</span>
<a name="l181"><span class="linenum"> 181</span></a>  <span class="comment">     * @param int $key Current row identifier.</span>
<a name="l182"><span class="linenum"> 182</span></a>  <span class="comment">     * @param string $value The value for this row (final grade).</span>
<a name="l183"><span class="linenum"> 183</span></a>  <span class="comment">     * @return stdClass new grade that is ready for commiting to the gradebook.</span>
<a name="l184"><span class="linenum"> 184</span></a>  <span class="comment">     */</span>
<a name="l185"><span class="linenum"> 185</span></a>      protected function <a class="function" onClick="logFunction('import_new_grade_item')" href="../../../../_functions/import_new_grade_item.html" onMouseOver="funcPopup(event,'import_new_grade_item')">import_new_grade_item</a>(<a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../../../../_variables/header.html">$header</a>, <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../../_variables/key.html">$key</a>, <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a>) {
<a name="l186"><span class="linenum"> 186</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>;
<a name="l187"><span class="linenum"> 187</span></a>  
<a name="l188"><span class="linenum"> 188</span></a>  <span class="comment">        // First check if header is already in temp database.</span>
<a name="l189"><span class="linenum"> 189</span></a>          if (empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('newgradeitems')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/newgradeitems.html">newgradeitems</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../../_variables/key.html">$key</a>])) {
<a name="l190"><span class="linenum"> 190</span></a>  
<a name="l191"><span class="linenum"> 191</span></a>              <a class="var it8108" onMouseOver="hilite(8108)" onMouseOut="lolite()" onClick="logVariable('newgradeitem')" href="../../../../_variables/newgradeitem.html">$newgradeitem</a> = new stdClass();
<a name="l192"><span class="linenum"> 192</span></a>              <a class="var it8108" onMouseOver="hilite(8108)" onMouseOut="lolite()" onClick="logVariable('newgradeitem')" href="../../../../_variables/newgradeitem.html">$newgradeitem</a>-&gt;<a onClick="logVariable('itemname')" class="var it45119" onMouseOver="hilite(45119)" onMouseOut="lolite()" href="../../../../_variables/itemname.html">itemname</a> = <a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../../../../_variables/header.html">$header</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../../_variables/key.html">$key</a>];
<a name="l193"><span class="linenum"> 193</span></a>              <a class="var it8108" onMouseOver="hilite(8108)" onMouseOut="lolite()" onClick="logVariable('newgradeitem')" href="../../../../_variables/newgradeitem.html">$newgradeitem</a>-&gt;<a onClick="logVariable('importcode')" class="var it45119" onMouseOver="hilite(45119)" onMouseOut="lolite()" href="../../../../_variables/importcode.html">importcode</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('importcode')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/importcode.html">importcode</a>;
<a name="l194"><span class="linenum"> 194</span></a>              <a class="var it8108" onMouseOver="hilite(8108)" onMouseOut="lolite()" onClick="logVariable('newgradeitem')" href="../../../../_variables/newgradeitem.html">$newgradeitem</a>-&gt;<a onClick="logVariable('importer')" class="var it45119" onMouseOver="hilite(45119)" onMouseOut="lolite()" href="../../../../_variables/importer.html">importer</a> = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>;
<a name="l195"><span class="linenum"> 195</span></a>  
<a name="l196"><span class="linenum"> 196</span></a>  <span class="comment">            // Insert into new grade item buffer.</span>
<a name="l197"><span class="linenum"> 197</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('newgradeitems')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/newgradeitems.html">newgradeitems</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../../_variables/key.html">$key</a>] = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('grade_import_newitem', <a class="var it8108" onMouseOver="hilite(8108)" onMouseOut="lolite()" onClick="logVariable('newgradeitem')" href="../../../../_variables/newgradeitem.html">$newgradeitem</a>);
<a name="l198"><span class="linenum"> 198</span></a>          }
<a name="l199"><span class="linenum"> 199</span></a>          <a class="var it8647" onMouseOver="hilite(8647)" onMouseOut="lolite()" onClick="logVariable('newgrade')" href="../../../../_variables/newgrade.html">$newgrade</a> = new stdClass();
<a name="l200"><span class="linenum"> 200</span></a>          <a class="var it8647" onMouseOver="hilite(8647)" onMouseOut="lolite()" onClick="logVariable('newgrade')" href="../../../../_variables/newgrade.html">$newgrade</a>-&gt;<a onClick="logVariable('newgradeitem')" class="var it44154" onMouseOver="hilite(44154)" onMouseOut="lolite()" href="../../../../_variables/newgradeitem.html">newgradeitem</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('newgradeitems')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/newgradeitems.html">newgradeitems</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../../_variables/key.html">$key</a>];
<a name="l201"><span class="linenum"> 201</span></a>  
<a name="l202"><span class="linenum"> 202</span></a>          <a class="var it4006" onMouseOver="hilite(4006)" onMouseOut="lolite()" onClick="logVariable('trimmed')" href="../../../../_variables/trimmed.html">$trimmed</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a>);
<a name="l203"><span class="linenum"> 203</span></a>          if (<a class="var it4006" onMouseOver="hilite(4006)" onMouseOut="lolite()" onClick="logVariable('trimmed')" href="../../../../_variables/trimmed.html">$trimmed</a> === '' or <a class="var it4006" onMouseOver="hilite(4006)" onMouseOut="lolite()" onClick="logVariable('trimmed')" href="../../../../_variables/trimmed.html">$trimmed</a> == '-') {
<a name="l204"><span class="linenum"> 204</span></a>  <span class="comment">            // Blank or dash grade means null, ie &quot;no grade&quot;.</span>
<a name="l205"><span class="linenum"> 205</span></a>              <a class="var it8647" onMouseOver="hilite(8647)" onMouseOut="lolite()" onClick="logVariable('newgrade')" href="../../../../_variables/newgrade.html">$newgrade</a>-&gt;<a onClick="logVariable('finalgrade')" class="var it44154" onMouseOver="hilite(44154)" onMouseOut="lolite()" href="../../../../_variables/finalgrade.html">finalgrade</a> = null;
<a name="l206"><span class="linenum"> 206</span></a>          } else {
<a name="l207"><span class="linenum"> 207</span></a>  <span class="comment">            // We have an actual grade.</span>
<a name="l208"><span class="linenum"> 208</span></a>              <a class="var it8647" onMouseOver="hilite(8647)" onMouseOut="lolite()" onClick="logVariable('newgrade')" href="../../../../_variables/newgrade.html">$newgrade</a>-&gt;<a onClick="logVariable('finalgrade')" class="var it44154" onMouseOver="hilite(44154)" onMouseOut="lolite()" href="../../../../_variables/finalgrade.html">finalgrade</a> = <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a>;
<a name="l209"><span class="linenum"> 209</span></a>          }
<a name="l210"><span class="linenum"> 210</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('newgrades')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/newgrades.html">newgrades</a>[] = <a class="var it8647" onMouseOver="hilite(8647)" onMouseOut="lolite()" onClick="logVariable('newgrade')" href="../../../../_variables/newgrade.html">$newgrade</a>;
<a name="l211"><span class="linenum"> 211</span></a>          return <a class="var it8647" onMouseOver="hilite(8647)" onMouseOut="lolite()" onClick="logVariable('newgrade')" href="../../../../_variables/newgrade.html">$newgrade</a>;
<a name="l212"><span class="linenum"> 212</span></a>      }
<a name="l213"><span class="linenum"> 213</span></a>  
<a name="l214"><span class="linenum"> 214</span></a>      <span class="comment">/**</span>
<a name="l215"><span class="linenum"> 215</span></a>  <span class="comment">     * Check that the user is in the system.</span>
<a name="l216"><span class="linenum"> 216</span></a>  <span class="comment">     *</span>
<a name="l217"><span class="linenum"> 217</span></a>  <span class="comment">     * @param string $value The value, from the csv file, being mapped to identify the user.</span>
<a name="l218"><span class="linenum"> 218</span></a>  <span class="comment">     * @param array $userfields Contains the field and label being mapped from.</span>
<a name="l219"><span class="linenum"> 219</span></a>  <span class="comment">     * @return int Returns the user ID if it exists, otherwise null.</span>
<a name="l220"><span class="linenum"> 220</span></a>  <span class="comment">     */</span>
<a name="l221"><span class="linenum"> 221</span></a>      protected function <a class="function" onClick="logFunction('check_user_exists')" href="../../../../_functions/check_user_exists.html" onMouseOver="funcPopup(event,'check_user_exists')">check_user_exists</a>(<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a>, <a class="var it4004" onMouseOver="hilite(4004)" onMouseOut="lolite()" onClick="logVariable('userfields')" href="../../../../_variables/userfields.html">$userfields</a>) {
<a name="l222"><span class="linenum"> 222</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>;
<a name="l223"><span class="linenum"> 223</span></a>  
<a name="l224"><span class="linenum"> 224</span></a>          <a class="var it31153" onMouseOver="hilite(31153)" onMouseOut="lolite()" onClick="logVariable('usercheckproblem')" href="../../../../_variables/usercheckproblem.html">$usercheckproblem</a> = false;
<a name="l225"><span class="linenum"> 225</span></a>          <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../../_variables/user.html">$user</a> = null;
<a name="l226"><span class="linenum"> 226</span></a>  <span class="comment">        // The user may use the incorrect field to match the user. This could result in an exception.</span>
<a name="l227"><span class="linenum"> 227</span></a>          try {
<a name="l228"><span class="linenum"> 228</span></a>              <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../../_variables/user.html">$user</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array(<a class="var it4004" onMouseOver="hilite(4004)" onMouseOut="lolite()" onClick="logVariable('userfields')" href="../../../../_variables/userfields.html">$userfields</a>['field'] =&gt; <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a>));
<a name="l229"><span class="linenum"> 229</span></a>          } catch (Exception <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../../../_variables/e.html">$e</a>) {
<a name="l230"><span class="linenum"> 230</span></a>              <a class="var it31153" onMouseOver="hilite(31153)" onMouseOut="lolite()" onClick="logVariable('usercheckproblem')" href="../../../../_variables/usercheckproblem.html">$usercheckproblem</a> = true;
<a name="l231"><span class="linenum"> 231</span></a>          }
<a name="l232"><span class="linenum"> 232</span></a>  <span class="comment">        // Field may be fine, but no records were returned.</span>
<a name="l233"><span class="linenum"> 233</span></a>          if (!<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../../_variables/user.html">$user</a> || <a class="var it31153" onMouseOver="hilite(31153)" onMouseOut="lolite()" onClick="logVariable('usercheckproblem')" href="../../../../_variables/usercheckproblem.html">$usercheckproblem</a>) {
<a name="l234"><span class="linenum"> 234</span></a>              <a class="var it31154" onMouseOver="hilite(31154)" onMouseOut="lolite()" onClick="logVariable('usermappingerrorobj')" href="../../../../_variables/usermappingerrorobj.html">$usermappingerrorobj</a> = new stdClass();
<a name="l235"><span class="linenum"> 235</span></a>              <a class="var it31154" onMouseOver="hilite(31154)" onMouseOut="lolite()" onClick="logVariable('usermappingerrorobj')" href="../../../../_variables/usermappingerrorobj.html">$usermappingerrorobj</a>-&gt;<a onClick="logVariable('field')" class="var it45559" onMouseOver="hilite(45559)" onMouseOut="lolite()" href="../../../../_variables/field.html">field</a> = <a class="var it4004" onMouseOver="hilite(4004)" onMouseOut="lolite()" onClick="logVariable('userfields')" href="../../../../_variables/userfields.html">$userfields</a>['label'];
<a name="l236"><span class="linenum"> 236</span></a>              <a class="var it31154" onMouseOver="hilite(31154)" onMouseOut="lolite()" onClick="logVariable('usermappingerrorobj')" href="../../../../_variables/usermappingerrorobj.html">$usermappingerrorobj</a>-&gt;<a onClick="logVariable('value')" class="var it45559" onMouseOver="hilite(45559)" onMouseOut="lolite()" href="../../../../_variables/value.html">value</a> = <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a>;
<a name="l237"><span class="linenum"> 237</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('cleanup_import')" href="../../../../_functions/cleanup_import.html" onMouseOver="funcPopup(event,'cleanup_import')">cleanup_import</a>(<a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('usermappingerror', 'grades', <a class="var it31154" onMouseOver="hilite(31154)" onMouseOut="lolite()" onClick="logVariable('usermappingerrorobj')" href="../../../../_variables/usermappingerrorobj.html">$usermappingerrorobj</a>));
<a name="l238"><span class="linenum"> 238</span></a>              unset(<a class="var it31154" onMouseOver="hilite(31154)" onMouseOut="lolite()" onClick="logVariable('usermappingerrorobj')" href="../../../../_variables/usermappingerrorobj.html">$usermappingerrorobj</a>);
<a name="l239"><span class="linenum"> 239</span></a>              return null;
<a name="l240"><span class="linenum"> 240</span></a>          }
<a name="l241"><span class="linenum"> 241</span></a>          return <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>;
<a name="l242"><span class="linenum"> 242</span></a>      }
<a name="l243"><span class="linenum"> 243</span></a>  
<a name="l244"><span class="linenum"> 244</span></a>      <span class="comment">/**</span>
<a name="l245"><span class="linenum"> 245</span></a>  <span class="comment">     * Check to see if the feedback matches a grade item.</span>
<a name="l246"><span class="linenum"> 246</span></a>  <span class="comment">     *</span>
<a name="l247"><span class="linenum"> 247</span></a>  <span class="comment">     * @param int $courseid The course ID.</span>
<a name="l248"><span class="linenum"> 248</span></a>  <span class="comment">     * @param int $itemid The ID of the grade item that the feedback relates to.</span>
<a name="l249"><span class="linenum"> 249</span></a>  <span class="comment">     * @param string $value The actual feedback being imported.</span>
<a name="l250"><span class="linenum"> 250</span></a>  <span class="comment">     * @return object Creates a feedback object with the item ID and the feedback value.</span>
<a name="l251"><span class="linenum"> 251</span></a>  <span class="comment">     */</span>
<a name="l252"><span class="linenum"> 252</span></a>      protected function <a class="function" onClick="logFunction('create_feedback')" href="../../../../_functions/create_feedback.html" onMouseOver="funcPopup(event,'create_feedback')">create_feedback</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../../_variables/courseid.html">$courseid</a>, <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../../../_variables/itemid.html">$itemid</a>, <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a>) {
<a name="l253"><span class="linenum"> 253</span></a>  <span class="comment">        // Case of an id, only maps id of a grade_item.</span>
<a name="l254"><span class="linenum"> 254</span></a>  <span class="comment">        // This was idnumber.</span>
<a name="l255"><span class="linenum"> 255</span></a>          if (!<span class="keyword">new </span><a class="class" onClick="logClass('grade_item')" href="../../../../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>(array('id' =&gt; <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../../../_variables/itemid.html">$itemid</a>, 'courseid' =&gt; <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../../_variables/courseid.html">$courseid</a>))) {
<a name="l256"><span class="linenum"> 256</span></a>  <span class="comment">            // Supplied bad mapping, should not be possible since user</span>
<a name="l257"><span class="linenum"> 257</span></a>  <span class="comment">            // had to pick mapping.</span>
<a name="l258"><span class="linenum"> 258</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('cleanup_import')" href="../../../../_functions/cleanup_import.html" onMouseOver="funcPopup(event,'cleanup_import')">cleanup_import</a>(<a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('importfailed', 'grades'));
<a name="l259"><span class="linenum"> 259</span></a>              return null;
<a name="l260"><span class="linenum"> 260</span></a>          }
<a name="l261"><span class="linenum"> 261</span></a>  
<a name="l262"><span class="linenum"> 262</span></a>  <span class="comment">        // The itemid is the id of the grade item.</span>
<a name="l263"><span class="linenum"> 263</span></a>          <a class="var it954" onMouseOver="hilite(954)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../../../_variables/feedback.html">$feedback</a> = new stdClass();
<a name="l264"><span class="linenum"> 264</span></a>          <a class="var it954" onMouseOver="hilite(954)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('itemid')" class="var it43060" onMouseOver="hilite(43060)" onMouseOut="lolite()" href="../../../../_variables/itemid.html">itemid</a>   = <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../../../_variables/itemid.html">$itemid</a>;
<a name="l265"><span class="linenum"> 265</span></a>          <a class="var it954" onMouseOver="hilite(954)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('feedback')" class="var it43060" onMouseOver="hilite(43060)" onMouseOut="lolite()" href="../../../../_variables/feedback.html">feedback</a> = <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a>;
<a name="l266"><span class="linenum"> 266</span></a>          return <a class="var it954" onMouseOver="hilite(954)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../../../_variables/feedback.html">$feedback</a>;
<a name="l267"><span class="linenum"> 267</span></a>      }
<a name="l268"><span class="linenum"> 268</span></a>  
<a name="l269"><span class="linenum"> 269</span></a>      <span class="comment">/**</span>
<a name="l270"><span class="linenum"> 270</span></a>  <span class="comment">     * This updates existing grade items.</span>
<a name="l271"><span class="linenum"> 271</span></a>  <span class="comment">     *</span>
<a name="l272"><span class="linenum"> 272</span></a>  <span class="comment">     * @param int $courseid The course ID.</span>
<a name="l273"><span class="linenum"> 273</span></a>  <span class="comment">     * @param array $map Mapping information provided by the user.</span>
<a name="l274"><span class="linenum"> 274</span></a>  <span class="comment">     * @param int $key The line that we are currently working on.</span>
<a name="l275"><span class="linenum"> 275</span></a>  <span class="comment">     * @param bool $verbosescales Form setting for grading with scales.</span>
<a name="l276"><span class="linenum"> 276</span></a>  <span class="comment">     * @param string $value The grade value.</span>
<a name="l277"><span class="linenum"> 277</span></a>  <span class="comment">     * @return array grades to be updated.</span>
<a name="l278"><span class="linenum"> 278</span></a>  <span class="comment">     */</span>
<a name="l279"><span class="linenum"> 279</span></a>      protected function <a class="function" onClick="logFunction('update_grade_item')" href="../../../../_functions/update_grade_item.html" onMouseOver="funcPopup(event,'update_grade_item')">update_grade_item</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../../_variables/courseid.html">$courseid</a>, <a class="var it2071" onMouseOver="hilite(2071)" onMouseOut="lolite()" onClick="logVariable('map')" href="../../../../_variables/map.html">$map</a>, <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../../_variables/key.html">$key</a>, <a class="var it8605" onMouseOver="hilite(8605)" onMouseOut="lolite()" onClick="logVariable('verbosescales')" href="../../../../_variables/verbosescales.html">$verbosescales</a>, <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a>) {
<a name="l280"><span class="linenum"> 280</span></a>  <span class="comment">        // Case of an id, only maps id of a grade_item.</span>
<a name="l281"><span class="linenum"> 281</span></a>  <span class="comment">        // This was idnumber.</span>
<a name="l282"><span class="linenum"> 282</span></a>          if (!<a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../../../_variables/gradeitem.html">$gradeitem</a> = <span class="keyword">new </span><a class="class" onClick="logClass('grade_item')" href="../../../../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>(array('id' =&gt; <a class="var it2071" onMouseOver="hilite(2071)" onMouseOut="lolite()" onClick="logVariable('map')" href="../../../../_variables/map.html">$map</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../../_variables/key.html">$key</a>], 'courseid' =&gt; <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../../_variables/courseid.html">$courseid</a>))) {
<a name="l283"><span class="linenum"> 283</span></a>  <span class="comment">            // Supplied bad mapping, should not be possible since user</span>
<a name="l284"><span class="linenum"> 284</span></a>  <span class="comment">            // had to pick mapping.</span>
<a name="l285"><span class="linenum"> 285</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('cleanup_import')" href="../../../../_functions/cleanup_import.html" onMouseOver="funcPopup(event,'cleanup_import')">cleanup_import</a>(<a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('importfailed', 'grades'));
<a name="l286"><span class="linenum"> 286</span></a>              return null;
<a name="l287"><span class="linenum"> 287</span></a>          }
<a name="l288"><span class="linenum"> 288</span></a>  
<a name="l289"><span class="linenum"> 289</span></a>  <span class="comment">        // Check if grade item is locked if so, abort.</span>
<a name="l290"><span class="linenum"> 290</span></a>          if (<a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a class="function" onClick="logFunction('is_locked')" href="../../../../_functions/is_locked.html" onMouseOver="funcPopup(event,'is_locked')">is_locked</a>()) {
<a name="l291"><span class="linenum"> 291</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('cleanup_import')" href="../../../../_functions/cleanup_import.html" onMouseOver="funcPopup(event,'cleanup_import')">cleanup_import</a>(<a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('gradeitemlocked', 'grades'));
<a name="l292"><span class="linenum"> 292</span></a>              return null;
<a name="l293"><span class="linenum"> 293</span></a>          }
<a name="l294"><span class="linenum"> 294</span></a>  
<a name="l295"><span class="linenum"> 295</span></a>          <a class="var it8647" onMouseOver="hilite(8647)" onMouseOut="lolite()" onClick="logVariable('newgrade')" href="../../../../_variables/newgrade.html">$newgrade</a> = new stdClass();
<a name="l296"><span class="linenum"> 296</span></a>          <a class="var it8647" onMouseOver="hilite(8647)" onMouseOut="lolite()" onClick="logVariable('newgrade')" href="../../../../_variables/newgrade.html">$newgrade</a>-&gt;<a onClick="logVariable('itemid')" class="var it44154" onMouseOver="hilite(44154)" onMouseOut="lolite()" href="../../../../_variables/itemid.html">itemid</a> = <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('id')" class="var it42964" onMouseOver="hilite(42964)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>;
<a name="l297"><span class="linenum"> 297</span></a>          if (<a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('gradetype')" class="var it42964" onMouseOver="hilite(42964)" onMouseOut="lolite()" href="../../../../_variables/gradetype.html">gradetype</a> == <a class="constant" onClick="logConstant('GRADE_TYPE_SCALE')" href="../../../../_constants/GRADE_TYPE_SCALE.html" onMouseOver="constPopup(event,'GRADE_TYPE_SCALE')">GRADE_TYPE_SCALE</a> and <a class="var it8605" onMouseOver="hilite(8605)" onMouseOut="lolite()" onClick="logVariable('verbosescales')" href="../../../../_variables/verbosescales.html">$verbosescales</a>) {
<a name="l298"><span class="linenum"> 298</span></a>              if (<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a> === '' or <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a> == '-') {
<a name="l299"><span class="linenum"> 299</span></a>                  <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a> = null; <span class="comment">// No grade.</span>
<a name="l300"><span class="linenum"> 300</span></a>              } else {
<a name="l301"><span class="linenum"> 301</span></a>                  <a class="var it94" onMouseOver="hilite(94)" onMouseOut="lolite()" onClick="logVariable('scale')" href="../../../../_variables/scale.html">$scale</a> = <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a class="function" onClick="logFunction('load_scale')" href="../../../../_functions/load_scale.html" onMouseOver="funcPopup(event,'load_scale')">load_scale</a>();
<a name="l302"><span class="linenum"> 302</span></a>                  <a class="var it2459" onMouseOver="hilite(2459)" onMouseOut="lolite()" onClick="logVariable('scales')" href="../../../../_variables/scales.html">$scales</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it94" onMouseOver="hilite(94)" onMouseOut="lolite()" onClick="logVariable('scale')" href="../../../../_variables/scale.html">$scale</a>-&gt;<a onClick="logVariable('scale')" class="var it43117" onMouseOver="hilite(43117)" onMouseOut="lolite()" href="../../../../_variables/scale.html">scale</a>);
<a name="l303"><span class="linenum"> 303</span></a>                  <a class="var it2459" onMouseOver="hilite(2459)" onMouseOut="lolite()" onClick="logVariable('scales')" href="../../../../_variables/scales.html">$scales</a> = <a class="phpfunction" onClick="logFunction('array_map')" href="../../../../_functions/array_map.html" onMouseOver="phpfuncPopup(event,'array_map')">array_map</a>('trim', <a class="var it2459" onMouseOver="hilite(2459)" onMouseOut="lolite()" onClick="logVariable('scales')" href="../../../../_variables/scales.html">$scales</a>); <span class="comment">// Hack - trim whitespace around scale options.</span>
<a name="l304"><span class="linenum"> 304</span></a>                  <a class="phpfunction" onClick="logFunction('array_unshift')" href="../../../../_functions/array_unshift.html" onMouseOver="phpfuncPopup(event,'array_unshift')">array_unshift</a>(<a class="var it2459" onMouseOver="hilite(2459)" onMouseOut="lolite()" onClick="logVariable('scales')" href="../../../../_variables/scales.html">$scales</a>, '-'); <span class="comment">// Scales start at key 1.</span>
<a name="l305"><span class="linenum"> 305</span></a>                  <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../../_variables/key.html">$key</a> = <a class="phpfunction" onClick="logFunction('array_search')" href="../../../../_functions/array_search.html" onMouseOver="phpfuncPopup(event,'array_search')">array_search</a>(<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a>, <a class="var it2459" onMouseOver="hilite(2459)" onMouseOut="lolite()" onClick="logVariable('scales')" href="../../../../_variables/scales.html">$scales</a>);
<a name="l306"><span class="linenum"> 306</span></a>                  if (<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../../_variables/key.html">$key</a> === false) {
<a name="l307"><span class="linenum"> 307</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('cleanup_import')" href="../../../../_functions/cleanup_import.html" onMouseOver="funcPopup(event,'cleanup_import')">cleanup_import</a>(<a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('badgrade', 'grades'));
<a name="l308"><span class="linenum"> 308</span></a>                      return null;
<a name="l309"><span class="linenum"> 309</span></a>                  }
<a name="l310"><span class="linenum"> 310</span></a>                  <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a> = <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../../_variables/key.html">$key</a>;
<a name="l311"><span class="linenum"> 311</span></a>              }
<a name="l312"><span class="linenum"> 312</span></a>              <a class="var it8647" onMouseOver="hilite(8647)" onMouseOut="lolite()" onClick="logVariable('newgrade')" href="../../../../_variables/newgrade.html">$newgrade</a>-&gt;<a onClick="logVariable('finalgrade')" class="var it44154" onMouseOver="hilite(44154)" onMouseOut="lolite()" href="../../../../_variables/finalgrade.html">finalgrade</a> = <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a>;
<a name="l313"><span class="linenum"> 313</span></a>          } else {
<a name="l314"><span class="linenum"> 314</span></a>              if (<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a> === '' or <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a> == '-') {
<a name="l315"><span class="linenum"> 315</span></a>                  <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a> = null; <span class="comment">// No grade.</span>
<a name="l316"><span class="linenum"> 316</span></a>              } else {
<a name="l317"><span class="linenum"> 317</span></a>  <span class="comment">                // If the value has a local decimal or can correctly be unformatted, do it.</span>
<a name="l318"><span class="linenum"> 318</span></a>                  <a class="var it31155" onMouseOver="hilite(31155)" onMouseOut="lolite()" onClick="logVariable('validvalue')" href="../../../../_variables/validvalue.html">$validvalue</a> = <a class="function" onClick="logFunction('unformat_float')" href="../../../../_functions/unformat_float.html" onMouseOver="funcPopup(event,'unformat_float')">unformat_float</a>(<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a>, true);
<a name="l319"><span class="linenum"> 319</span></a>                  if (<a class="var it31155" onMouseOver="hilite(31155)" onMouseOut="lolite()" onClick="logVariable('validvalue')" href="../../../../_variables/validvalue.html">$validvalue</a> !== false) {
<a name="l320"><span class="linenum"> 320</span></a>                      <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a> = <a class="var it31155" onMouseOver="hilite(31155)" onMouseOut="lolite()" onClick="logVariable('validvalue')" href="../../../../_variables/validvalue.html">$validvalue</a>;
<a name="l321"><span class="linenum"> 321</span></a>                  } else {
<a name="l322"><span class="linenum"> 322</span></a>  <span class="comment">                    // Non numeric grade value supplied, possibly mapped wrong column.</span>
<a name="l323"><span class="linenum"> 323</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('cleanup_import')" href="../../../../_functions/cleanup_import.html" onMouseOver="funcPopup(event,'cleanup_import')">cleanup_import</a>(<a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('badgrade', 'grades'));
<a name="l324"><span class="linenum"> 324</span></a>                      return null;
<a name="l325"><span class="linenum"> 325</span></a>                  }
<a name="l326"><span class="linenum"> 326</span></a>              }
<a name="l327"><span class="linenum"> 327</span></a>              <a class="var it8647" onMouseOver="hilite(8647)" onMouseOut="lolite()" onClick="logVariable('newgrade')" href="../../../../_variables/newgrade.html">$newgrade</a>-&gt;<a onClick="logVariable('finalgrade')" class="var it44154" onMouseOver="hilite(44154)" onMouseOut="lolite()" href="../../../../_variables/finalgrade.html">finalgrade</a> = <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a>;
<a name="l328"><span class="linenum"> 328</span></a>          }
<a name="l329"><span class="linenum"> 329</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('newgrades')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/newgrades.html">newgrades</a>[] = <a class="var it8647" onMouseOver="hilite(8647)" onMouseOut="lolite()" onClick="logVariable('newgrade')" href="../../../../_variables/newgrade.html">$newgrade</a>;
<a name="l330"><span class="linenum"> 330</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('newgrades')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/newgrades.html">newgrades</a>;
<a name="l331"><span class="linenum"> 331</span></a>      }
<a name="l332"><span class="linenum"> 332</span></a>  
<a name="l333"><span class="linenum"> 333</span></a>      <span class="comment">/**</span>
<a name="l334"><span class="linenum"> 334</span></a>  <span class="comment">     * Clean up failed CSV grade import. Clears the temp table for inserting grades.</span>
<a name="l335"><span class="linenum"> 335</span></a>  <span class="comment">     *</span>
<a name="l336"><span class="linenum"> 336</span></a>  <span class="comment">     * @param string $notification The error message to display from the unsuccessful grade import.</span>
<a name="l337"><span class="linenum"> 337</span></a>  <span class="comment">     */</span>
<a name="l338"><span class="linenum"> 338</span></a>      protected function <a class="function" onClick="logFunction('cleanup_import')" href="../../../../_functions/cleanup_import.html" onMouseOver="funcPopup(event,'cleanup_import')">cleanup_import</a>(<a class="var it2407" onMouseOver="hilite(2407)" onMouseOut="lolite()" onClick="logVariable('notification')" href="../../../../_variables/notification.html">$notification</a>) {
<a name="l339"><span class="linenum"> 339</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/status.html">status</a> = false;
<a name="l340"><span class="linenum"> 340</span></a>          <a class="function" onClick="logFunction('import_cleanup')" href="../../../../_functions/import_cleanup.html" onMouseOver="funcPopup(event,'import_cleanup')">import_cleanup</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('importcode')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/importcode.html">importcode</a>);
<a name="l341"><span class="linenum"> 341</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('gradebookerrors')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/gradebookerrors.html">gradebookerrors</a>[] = <a class="var it2407" onMouseOver="hilite(2407)" onMouseOut="lolite()" onClick="logVariable('notification')" href="../../../../_variables/notification.html">$notification</a>;
<a name="l342"><span class="linenum"> 342</span></a>      }
<a name="l343"><span class="linenum"> 343</span></a>  
<a name="l344"><span class="linenum"> 344</span></a>      <span class="comment">/**</span>
<a name="l345"><span class="linenum"> 345</span></a>  <span class="comment">     * Check user mapping.</span>
<a name="l346"><span class="linenum"> 346</span></a>  <span class="comment">     *</span>
<a name="l347"><span class="linenum"> 347</span></a>  <span class="comment">     * @param string $mappingidentifier The user field that we are matching together.</span>
<a name="l348"><span class="linenum"> 348</span></a>  <span class="comment">     * @param string $value The value we are checking / importing.</span>
<a name="l349"><span class="linenum"> 349</span></a>  <span class="comment">     * @param array $header The column headers of the csv file.</span>
<a name="l350"><span class="linenum"> 350</span></a>  <span class="comment">     * @param array $map Mapping information provided by the user.</span>
<a name="l351"><span class="linenum"> 351</span></a>  <span class="comment">     * @param int $key Current row identifier.</span>
<a name="l352"><span class="linenum"> 352</span></a>  <span class="comment">     * @param int $courseid The course ID.</span>
<a name="l353"><span class="linenum"> 353</span></a>  <span class="comment">     * @param int $feedbackgradeid The ID of the grade item that the feedback relates to.</span>
<a name="l354"><span class="linenum"> 354</span></a>  <span class="comment">     * @param bool $verbosescales Form setting for grading with scales.</span>
<a name="l355"><span class="linenum"> 355</span></a>  <span class="comment">     */</span>
<a name="l356"><span class="linenum"> 356</span></a>      protected function <a class="function" onClick="logFunction('map_user_data_with_value')" href="../../../../_functions/map_user_data_with_value.html" onMouseOver="funcPopup(event,'map_user_data_with_value')">map_user_data_with_value</a>(<a class="var it8606" onMouseOver="hilite(8606)" onMouseOut="lolite()" onClick="logVariable('mappingidentifier')" href="../../../../_variables/mappingidentifier.html">$mappingidentifier</a>, <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a>, <a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../../../../_variables/header.html">$header</a>, <a class="var it2071" onMouseOver="hilite(2071)" onMouseOut="lolite()" onClick="logVariable('map')" href="../../../../_variables/map.html">$map</a>, <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../../_variables/key.html">$key</a>, <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../../_variables/courseid.html">$courseid</a>, <a class="var it8607" onMouseOver="hilite(8607)" onMouseOut="lolite()" onClick="logVariable('feedbackgradeid')" href="../../../../_variables/feedbackgradeid.html">$feedbackgradeid</a>,
<a name="l357"><span class="linenum"> 357</span></a>              <a class="var it8605" onMouseOver="hilite(8605)" onMouseOut="lolite()" onClick="logVariable('verbosescales')" href="../../../../_variables/verbosescales.html">$verbosescales</a>) {
<a name="l358"><span class="linenum"> 358</span></a>  
<a name="l359"><span class="linenum"> 359</span></a>  <span class="comment">        // Fields that the user can be mapped from.</span>
<a name="l360"><span class="linenum"> 360</span></a>          <a class="var it4004" onMouseOver="hilite(4004)" onMouseOut="lolite()" onClick="logVariable('userfields')" href="../../../../_variables/userfields.html">$userfields</a> = array(
<a name="l361"><span class="linenum"> 361</span></a>              'userid' =&gt; array(
<a name="l362"><span class="linenum"> 362</span></a>                  'field' =&gt; 'id',
<a name="l363"><span class="linenum"> 363</span></a>                  'label' =&gt; 'id',
<a name="l364"><span class="linenum"> 364</span></a>              ),
<a name="l365"><span class="linenum"> 365</span></a>              'useridnumber' =&gt; array(
<a name="l366"><span class="linenum"> 366</span></a>                  'field' =&gt; 'idnumber',
<a name="l367"><span class="linenum"> 367</span></a>                  'label' =&gt; 'idnumber',
<a name="l368"><span class="linenum"> 368</span></a>              ),
<a name="l369"><span class="linenum"> 369</span></a>              'useremail' =&gt; array(
<a name="l370"><span class="linenum"> 370</span></a>                  'field' =&gt; 'email',
<a name="l371"><span class="linenum"> 371</span></a>                  'label' =&gt; 'email address',
<a name="l372"><span class="linenum"> 372</span></a>              ),
<a name="l373"><span class="linenum"> 373</span></a>              'username' =&gt; array(
<a name="l374"><span class="linenum"> 374</span></a>                  'field' =&gt; 'username',
<a name="l375"><span class="linenum"> 375</span></a>                  'label' =&gt; 'username',
<a name="l376"><span class="linenum"> 376</span></a>              ),
<a name="l377"><span class="linenum"> 377</span></a>          );
<a name="l378"><span class="linenum"> 378</span></a>  
<a name="l379"><span class="linenum"> 379</span></a>          switch (<a class="var it8606" onMouseOver="hilite(8606)" onMouseOut="lolite()" onClick="logVariable('mappingidentifier')" href="../../../../_variables/mappingidentifier.html">$mappingidentifier</a>) {
<a name="l380"><span class="linenum"> 380</span></a>              case 'userid':
<a name="l381"><span class="linenum"> 381</span></a>              case 'useridnumber':
<a name="l382"><span class="linenum"> 382</span></a>              case 'useremail':
<a name="l383"><span class="linenum"> 383</span></a>              case 'username':
<a name="l384"><span class="linenum"> 384</span></a>  <span class="comment">                // Skip invalid row with blank user field.</span>
<a name="l385"><span class="linenum"> 385</span></a>                  if (!empty(<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a>)) {
<a name="l386"><span class="linenum"> 386</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('studentid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/studentid.html">studentid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_user_exists')" href="../../../../_functions/check_user_exists.html" onMouseOver="funcPopup(event,'check_user_exists')">check_user_exists</a>(<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a>, <a class="var it4004" onMouseOver="hilite(4004)" onMouseOut="lolite()" onClick="logVariable('userfields')" href="../../../../_variables/userfields.html">$userfields</a>[<a class="var it8606" onMouseOver="hilite(8606)" onMouseOut="lolite()" onClick="logVariable('mappingidentifier')" href="../../../../_variables/mappingidentifier.html">$mappingidentifier</a>]);
<a name="l387"><span class="linenum"> 387</span></a>                  }
<a name="l388"><span class="linenum"> 388</span></a>              break;
<a name="l389"><span class="linenum"> 389</span></a>              case 'new':
<a name="l390"><span class="linenum"> 390</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('import_new_grade_item')" href="../../../../_functions/import_new_grade_item.html" onMouseOver="funcPopup(event,'import_new_grade_item')">import_new_grade_item</a>(<a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../../../../_variables/header.html">$header</a>, <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../../_variables/key.html">$key</a>, <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a>);
<a name="l391"><span class="linenum"> 391</span></a>              break;
<a name="l392"><span class="linenum"> 392</span></a>              case 'feedback':
<a name="l393"><span class="linenum"> 393</span></a>                  if (<a class="var it8607" onMouseOver="hilite(8607)" onMouseOut="lolite()" onClick="logVariable('feedbackgradeid')" href="../../../../_variables/feedbackgradeid.html">$feedbackgradeid</a>) {
<a name="l394"><span class="linenum"> 394</span></a>                      <a class="var it954" onMouseOver="hilite(954)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../../../_variables/feedback.html">$feedback</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('create_feedback')" href="../../../../_functions/create_feedback.html" onMouseOver="funcPopup(event,'create_feedback')">create_feedback</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../../_variables/courseid.html">$courseid</a>, <a class="var it8607" onMouseOver="hilite(8607)" onMouseOut="lolite()" onClick="logVariable('feedbackgradeid')" href="../../../../_variables/feedbackgradeid.html">$feedbackgradeid</a>, <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a>);
<a name="l395"><span class="linenum"> 395</span></a>                      if (isset(<a class="var it954" onMouseOver="hilite(954)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../../../_variables/feedback.html">$feedback</a>)) {
<a name="l396"><span class="linenum"> 396</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('newfeedbacks')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/newfeedbacks.html">newfeedbacks</a>[] = <a class="var it954" onMouseOver="hilite(954)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../../../_variables/feedback.html">$feedback</a>;
<a name="l397"><span class="linenum"> 397</span></a>                      }
<a name="l398"><span class="linenum"> 398</span></a>                  }
<a name="l399"><span class="linenum"> 399</span></a>              break;
<a name="l400"><span class="linenum"> 400</span></a>              default:
<a name="l401"><span class="linenum"> 401</span></a>  <span class="comment">                // Existing grade items.</span>
<a name="l402"><span class="linenum"> 402</span></a>                  if (!empty(<a class="var it2071" onMouseOver="hilite(2071)" onMouseOut="lolite()" onClick="logVariable('map')" href="../../../../_variables/map.html">$map</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../../_variables/key.html">$key</a>])) {
<a name="l403"><span class="linenum"> 403</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('newgrades')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/newgrades.html">newgrades</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_grade_item')" href="../../../../_functions/update_grade_item.html" onMouseOver="funcPopup(event,'update_grade_item')">update_grade_item</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../../_variables/courseid.html">$courseid</a>, <a class="var it2071" onMouseOver="hilite(2071)" onMouseOut="lolite()" onClick="logVariable('map')" href="../../../../_variables/map.html">$map</a>, <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../../_variables/key.html">$key</a>, <a class="var it8605" onMouseOver="hilite(8605)" onMouseOut="lolite()" onClick="logVariable('verbosescales')" href="../../../../_variables/verbosescales.html">$verbosescales</a>, <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a>,
<a name="l404"><span class="linenum"> 404</span></a>                              <a class="var it8606" onMouseOver="hilite(8606)" onMouseOut="lolite()" onClick="logVariable('mappingidentifier')" href="../../../../_variables/mappingidentifier.html">$mappingidentifier</a>);
<a name="l405"><span class="linenum"> 405</span></a>                  }
<a name="l406"><span class="linenum"> 406</span></a>  <span class="comment">                // Otherwise, we ignore this column altogether because user has chosen</span>
<a name="l407"><span class="linenum"> 407</span></a>  <span class="comment">                // to ignore them (e.g. institution, address etc).</span>
<a name="l408"><span class="linenum"> 408</span></a>              break;
<a name="l409"><span class="linenum"> 409</span></a>          }
<a name="l410"><span class="linenum"> 410</span></a>      }
<a name="l411"><span class="linenum"> 411</span></a>  
<a name="l412"><span class="linenum"> 412</span></a>      <span class="comment">/**</span>
<a name="l413"><span class="linenum"> 413</span></a>  <span class="comment">     * Checks and prepares grade data for inserting into the gradebook.</span>
<a name="l414"><span class="linenum"> 414</span></a>  <span class="comment">     *</span>
<a name="l415"><span class="linenum"> 415</span></a>  <span class="comment">     * @param array $header Column headers of the CSV file.</span>
<a name="l416"><span class="linenum"> 416</span></a>  <span class="comment">     * @param object $formdata Mapping information from the preview page.</span>
<a name="l417"><span class="linenum"> 417</span></a>  <span class="comment">     * @param object $csvimport csv import reader object for iterating over the imported CSV file.</span>
<a name="l418"><span class="linenum"> 418</span></a>  <span class="comment">     * @param int $courseid The course ID.</span>
<a name="l419"><span class="linenum"> 419</span></a>  <span class="comment">     * @param bool $separatemode If we have groups are they separate?</span>
<a name="l420"><span class="linenum"> 420</span></a>  <span class="comment">     * @param mixed $currentgroup current group information.</span>
<a name="l421"><span class="linenum"> 421</span></a>  <span class="comment">     * @param bool $verbosescales Form setting for grading with scales.</span>
<a name="l422"><span class="linenum"> 422</span></a>  <span class="comment">     * @return bool True if the status for importing is okay, false if there are errors.</span>
<a name="l423"><span class="linenum"> 423</span></a>  <span class="comment">     */</span>
<a name="l424"><span class="linenum"> 424</span></a>      public function <a class="function" onClick="logFunction('prepare_import_grade_data')" href="../../../../_functions/prepare_import_grade_data.html" onMouseOver="funcPopup(event,'prepare_import_grade_data')">prepare_import_grade_data</a>(<a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../../../../_variables/header.html">$header</a>, <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../../../_variables/formdata.html">$formdata</a>, <a class="var it12354" onMouseOver="hilite(12354)" onMouseOut="lolite()" onClick="logVariable('csvimport')" href="../../../../_variables/csvimport.html">$csvimport</a>, <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../../_variables/courseid.html">$courseid</a>, <a class="var it23251" onMouseOver="hilite(23251)" onMouseOut="lolite()" onClick="logVariable('separatemode')" href="../../../../_variables/separatemode.html">$separatemode</a>, <a class="var it2561" onMouseOver="hilite(2561)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../../../_variables/currentgroup.html">$currentgroup</a>,
<a name="l425"><span class="linenum"> 425</span></a>              <a class="var it8605" onMouseOver="hilite(8605)" onMouseOut="lolite()" onClick="logVariable('verbosescales')" href="../../../../_variables/verbosescales.html">$verbosescales</a>) {
<a name="l426"><span class="linenum"> 426</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>;
<a name="l427"><span class="linenum"> 427</span></a>  
<a name="l428"><span class="linenum"> 428</span></a>  <span class="comment">        // The import code is used for inserting data into the grade tables.</span>
<a name="l429"><span class="linenum"> 429</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('importcode')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/importcode.html">importcode</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('importcode')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../../../_variables/importcode.html">importcode</a>;
<a name="l430"><span class="linenum"> 430</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/status.html">status</a> = true;
<a name="l431"><span class="linenum"> 431</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('headers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/headers.html">headers</a> = <a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../../../../_variables/header.html">$header</a>;
<a name="l432"><span class="linenum"> 432</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('studentid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/studentid.html">studentid</a> = null;
<a name="l433"><span class="linenum"> 433</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('gradebookerrors')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/gradebookerrors.html">gradebookerrors</a> = null;
<a name="l434"><span class="linenum"> 434</span></a>          <a class="var it23250" onMouseOver="hilite(23250)" onMouseOut="lolite()" onClick="logVariable('forceimport')" href="../../../../_variables/forceimport.html">$forceimport</a> = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('forceimport')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../../../_variables/forceimport.html">forceimport</a>;
<a name="l435"><span class="linenum"> 435</span></a>  <span class="comment">        // Temporary array to keep track of what new headers are processed.</span>
<a name="l436"><span class="linenum"> 436</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('newgradeitems')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/newgradeitems.html">newgradeitems</a> = array();
<a name="l437"><span class="linenum"> 437</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('trim_headers')" href="../../../../_functions/trim_headers.html" onMouseOver="funcPopup(event,'trim_headers')">trim_headers</a>();
<a name="l438"><span class="linenum"> 438</span></a>          <a class="var it31156" onMouseOver="hilite(31156)" onMouseOut="lolite()" onClick="logVariable('timeexportkey')" href="../../../../_variables/timeexportkey.html">$timeexportkey</a> = null;
<a name="l439"><span class="linenum"> 439</span></a>          <a class="var it2071" onMouseOver="hilite(2071)" onMouseOut="lolite()" onClick="logVariable('map')" href="../../../../_variables/map.html">$map</a> = array();
<a name="l440"><span class="linenum"> 440</span></a>  <span class="comment">        // Loops mapping_0, mapping_1 .. mapping_n and construct $map array.</span>
<a name="l441"><span class="linenum"> 441</span></a>          foreach (<a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../../../../_variables/header.html">$header</a> as <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../../_variables/i.html">$i</a> =&gt; <a class="var it902" onMouseOver="hilite(902)" onMouseOut="lolite()" onClick="logVariable('head')" href="../../../../_variables/head.html">$head</a>) {
<a name="l442"><span class="linenum"> 442</span></a>              if (isset(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../../../_variables/formdata.html">$formdata</a>-&gt;{'mapping_'.<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../../_variables/i.html">$i</a>})) {
<a name="l443"><span class="linenum"> 443</span></a>                  <a class="var it2071" onMouseOver="hilite(2071)" onMouseOut="lolite()" onClick="logVariable('map')" href="../../../../_variables/map.html">$map</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../../_variables/i.html">$i</a>] = <a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../../../_variables/formdata.html">$formdata</a>-&gt;{'mapping_'.<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../../_variables/i.html">$i</a>};
<a name="l444"><span class="linenum"> 444</span></a>              }
<a name="l445"><span class="linenum"> 445</span></a>              if (<a class="var it902" onMouseOver="hilite(902)" onMouseOut="lolite()" onClick="logVariable('head')" href="../../../../_variables/head.html">$head</a> == <a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('timeexported', 'gradeexport_txt')) {
<a name="l446"><span class="linenum"> 446</span></a>                  <a class="var it31156" onMouseOver="hilite(31156)" onMouseOut="lolite()" onClick="logVariable('timeexportkey')" href="../../../../_variables/timeexportkey.html">$timeexportkey</a> = <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../../_variables/i.html">$i</a>;
<a name="l447"><span class="linenum"> 447</span></a>              }
<a name="l448"><span class="linenum"> 448</span></a>          }
<a name="l449"><span class="linenum"> 449</span></a>  
<a name="l450"><span class="linenum"> 450</span></a>  <span class="comment">        // If mapping information is supplied.</span>
<a name="l451"><span class="linenum"> 451</span></a>          <a class="var it2071" onMouseOver="hilite(2071)" onMouseOut="lolite()" onClick="logVariable('map')" href="../../../../_variables/map.html">$map</a>[<a class="function" onClick="logFunction('clean_param')" href="../../../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('mapfrom')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../../../_variables/mapfrom.html">mapfrom</a>, <a class="constant" onClick="logConstant('PARAM_RAW')" href="../../../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>)] = <a class="function" onClick="logFunction('clean_param')" href="../../../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it466" onMouseOver="hilite(466)" onMouseOut="lolite()" onClick="logVariable('formdata')" href="../../../../_variables/formdata.html">$formdata</a>-&gt;<a onClick="logVariable('mapto')" class="var it43216" onMouseOver="hilite(43216)" onMouseOut="lolite()" href="../../../../_variables/mapto.html">mapto</a>, <a class="constant" onClick="logConstant('PARAM_RAW')" href="../../../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>);
<a name="l452"><span class="linenum"> 452</span></a>  
<a name="l453"><span class="linenum"> 453</span></a>  <span class="comment">        // Check for mapto collisions.</span>
<a name="l454"><span class="linenum"> 454</span></a>          <a class="var it31158" onMouseOver="hilite(31158)" onMouseOut="lolite()" onClick="logVariable('maperrors')" href="../../../../_variables/maperrors.html">$maperrors</a> = array();
<a name="l455"><span class="linenum"> 455</span></a>          foreach (<a class="var it2071" onMouseOver="hilite(2071)" onMouseOut="lolite()" onClick="logVariable('map')" href="../../../../_variables/map.html">$map</a> as <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../../_variables/i.html">$i</a> =&gt; <a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('j')" href="../../../../_variables/j.html">$j</a>) {
<a name="l456"><span class="linenum"> 456</span></a>              if (<a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('j')" href="../../../../_variables/j.html">$j</a> == 0) {
<a name="l457"><span class="linenum"> 457</span></a>  <span class="comment">                // You can have multiple ignores.</span>
<a name="l458"><span class="linenum"> 458</span></a>                  continue;
<a name="l459"><span class="linenum"> 459</span></a>              } else {
<a name="l460"><span class="linenum"> 460</span></a>                  if (!isset(<a class="var it31158" onMouseOver="hilite(31158)" onMouseOut="lolite()" onClick="logVariable('maperrors')" href="../../../../_variables/maperrors.html">$maperrors</a>[<a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('j')" href="../../../../_variables/j.html">$j</a>])) {
<a name="l461"><span class="linenum"> 461</span></a>                      <a class="var it31158" onMouseOver="hilite(31158)" onMouseOut="lolite()" onClick="logVariable('maperrors')" href="../../../../_variables/maperrors.html">$maperrors</a>[<a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('j')" href="../../../../_variables/j.html">$j</a>] = true;
<a name="l462"><span class="linenum"> 462</span></a>                  } else {
<a name="l463"><span class="linenum"> 463</span></a>  <span class="comment">                    // Collision.</span>
<a name="l464"><span class="linenum"> 464</span></a>                      <a class="function" onClick="logFunction('print_error')" href="../../../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('cannotmapfield', '', '', <a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('j')" href="../../../../_variables/j.html">$j</a>);
<a name="l465"><span class="linenum"> 465</span></a>                  }
<a name="l466"><span class="linenum"> 466</span></a>              }
<a name="l467"><span class="linenum"> 467</span></a>          }
<a name="l468"><span class="linenum"> 468</span></a>  
<a name="l469"><span class="linenum"> 469</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('raise_limits')" href="../../../../_functions/raise_limits.html" onMouseOver="funcPopup(event,'raise_limits')">raise_limits</a>();
<a name="l470"><span class="linenum"> 470</span></a>  
<a name="l471"><span class="linenum"> 471</span></a>          <a class="var it12354" onMouseOver="hilite(12354)" onMouseOut="lolite()" onClick="logVariable('csvimport')" href="../../../../_variables/csvimport.html">$csvimport</a>-&gt;<a class="function" onClick="logFunction('init')" href="../../../../_functions/init.html" onMouseOver="funcPopup(event,'init')">init</a>();
<a name="l472"><span class="linenum"> 472</span></a>  
<a name="l473"><span class="linenum"> 473</span></a>          while (<a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../../../_variables/line.html">$line</a> = <a class="var it12354" onMouseOver="hilite(12354)" onMouseOut="lolite()" onClick="logVariable('csvimport')" href="../../../../_variables/csvimport.html">$csvimport</a>-&gt;<a class="phpfunction" onClick="logFunction('next')" href="../../../../_functions/next.html" onMouseOver="phpfuncPopup(event,'next')">next</a>()) {
<a name="l474"><span class="linenum"> 474</span></a>              if (<a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../../../_variables/line.html">$line</a>) &lt;= 1) {
<a name="l475"><span class="linenum"> 475</span></a>  <span class="comment">                // There is no data on this line, move on.</span>
<a name="l476"><span class="linenum"> 476</span></a>                  continue;
<a name="l477"><span class="linenum"> 477</span></a>              }
<a name="l478"><span class="linenum"> 478</span></a>  
<a name="l479"><span class="linenum"> 479</span></a>  <span class="comment">            // Array to hold all grades to be inserted.</span>
<a name="l480"><span class="linenum"> 480</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('newgrades')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/newgrades.html">newgrades</a> = array();
<a name="l481"><span class="linenum"> 481</span></a>  <span class="comment">            // Array to hold all feedback.</span>
<a name="l482"><span class="linenum"> 482</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('newfeedbacks')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/newfeedbacks.html">newfeedbacks</a> = array();
<a name="l483"><span class="linenum"> 483</span></a>  <span class="comment">            // Each line is a student record.</span>
<a name="l484"><span class="linenum"> 484</span></a>              foreach (<a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../../../_variables/line.html">$line</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../../_variables/key.html">$key</a> =&gt; <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a>) {
<a name="l485"><span class="linenum"> 485</span></a>  
<a name="l486"><span class="linenum"> 486</span></a>                  <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a> = <a class="function" onClick="logFunction('clean_param')" href="../../../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a>, <a class="constant" onClick="logConstant('PARAM_RAW')" href="../../../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>);
<a name="l487"><span class="linenum"> 487</span></a>                  <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a>);
<a name="l488"><span class="linenum"> 488</span></a>  
<a name="l489"><span class="linenum"> 489</span></a>                  <span class="comment">/*</span>
<a name="l490"><span class="linenum"> 490</span></a>  <span class="comment">                 * the options are</span>
<a name="l491"><span class="linenum"> 491</span></a>  <span class="comment">                 * 1) userid, useridnumber, usermail, username - used to identify user row</span>
<a name="l492"><span class="linenum"> 492</span></a>  <span class="comment">                 * 2) new - new grade item</span>
<a name="l493"><span class="linenum"> 493</span></a>  <span class="comment">                 * 3) id - id of the old grade item to map onto</span>
<a name="l494"><span class="linenum"> 494</span></a>  <span class="comment">                 * 3) feedback_id - feedback for grade item id</span>
<a name="l495"><span class="linenum"> 495</span></a>  <span class="comment">                 */</span>
<a name="l496"><span class="linenum"> 496</span></a>  
<a name="l497"><span class="linenum"> 497</span></a>  <span class="comment">                // Explode the mapping for feedback into a label 'feedback' and the identifying number.</span>
<a name="l498"><span class="linenum"> 498</span></a>                  <a class="var it31159" onMouseOver="hilite(31159)" onMouseOut="lolite()" onClick="logVariable('mappingbase')" href="../../../../_variables/mappingbase.html">$mappingbase</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(&quot;_&quot;, <a class="var it2071" onMouseOver="hilite(2071)" onMouseOut="lolite()" onClick="logVariable('map')" href="../../../../_variables/map.html">$map</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../../_variables/key.html">$key</a>]);
<a name="l499"><span class="linenum"> 499</span></a>                  <a class="var it8606" onMouseOver="hilite(8606)" onMouseOut="lolite()" onClick="logVariable('mappingidentifier')" href="../../../../_variables/mappingidentifier.html">$mappingidentifier</a> = <a class="var it31159" onMouseOver="hilite(31159)" onMouseOut="lolite()" onClick="logVariable('mappingbase')" href="../../../../_variables/mappingbase.html">$mappingbase</a>[0];
<a name="l500"><span class="linenum"> 500</span></a>  <span class="comment">                // Set the feedback identifier if it exists.</span>
<a name="l501"><span class="linenum"> 501</span></a>                  if (isset(<a class="var it31159" onMouseOver="hilite(31159)" onMouseOut="lolite()" onClick="logVariable('mappingbase')" href="../../../../_variables/mappingbase.html">$mappingbase</a>[1])) {
<a name="l502"><span class="linenum"> 502</span></a>                      <a class="var it8607" onMouseOver="hilite(8607)" onMouseOut="lolite()" onClick="logVariable('feedbackgradeid')" href="../../../../_variables/feedbackgradeid.html">$feedbackgradeid</a> = (int)<a class="var it31159" onMouseOver="hilite(31159)" onMouseOut="lolite()" onClick="logVariable('mappingbase')" href="../../../../_variables/mappingbase.html">$mappingbase</a>[1];
<a name="l503"><span class="linenum"> 503</span></a>                  } else {
<a name="l504"><span class="linenum"> 504</span></a>                      <a class="var it8607" onMouseOver="hilite(8607)" onMouseOut="lolite()" onClick="logVariable('feedbackgradeid')" href="../../../../_variables/feedbackgradeid.html">$feedbackgradeid</a> = '';
<a name="l505"><span class="linenum"> 505</span></a>                  }
<a name="l506"><span class="linenum"> 506</span></a>  
<a name="l507"><span class="linenum"> 507</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('map_user_data_with_value')" href="../../../../_functions/map_user_data_with_value.html" onMouseOver="funcPopup(event,'map_user_data_with_value')">map_user_data_with_value</a>(<a class="var it8606" onMouseOver="hilite(8606)" onMouseOut="lolite()" onClick="logVariable('mappingidentifier')" href="../../../../_variables/mappingidentifier.html">$mappingidentifier</a>, <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../../_variables/value.html">$value</a>, <a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../../../../_variables/header.html">$header</a>, <a class="var it2071" onMouseOver="hilite(2071)" onMouseOut="lolite()" onClick="logVariable('map')" href="../../../../_variables/map.html">$map</a>, <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../../_variables/key.html">$key</a>, <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../../_variables/courseid.html">$courseid</a>, <a class="var it8607" onMouseOver="hilite(8607)" onMouseOut="lolite()" onClick="logVariable('feedbackgradeid')" href="../../../../_variables/feedbackgradeid.html">$feedbackgradeid</a>,
<a name="l508"><span class="linenum"> 508</span></a>                          <a class="var it8605" onMouseOver="hilite(8605)" onMouseOut="lolite()" onClick="logVariable('verbosescales')" href="../../../../_variables/verbosescales.html">$verbosescales</a>);
<a name="l509"><span class="linenum"> 509</span></a>                  if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/status.html">status</a> === false) {
<a name="l510"><span class="linenum"> 510</span></a>                      return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/status.html">status</a>;
<a name="l511"><span class="linenum"> 511</span></a>                  }
<a name="l512"><span class="linenum"> 512</span></a>              }
<a name="l513"><span class="linenum"> 513</span></a>  
<a name="l514"><span class="linenum"> 514</span></a>  <span class="comment">            // No user mapping supplied at all, or user mapping failed.</span>
<a name="l515"><span class="linenum"> 515</span></a>              if (empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('studentid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/studentid.html">studentid</a>) || !<a class="phpfunction" onClick="logFunction('is_numeric')" href="../../../../_functions/is_numeric.html" onMouseOver="phpfuncPopup(event,'is_numeric')">is_numeric</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('studentid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/studentid.html">studentid</a>)) {
<a name="l516"><span class="linenum"> 516</span></a>  <span class="comment">                // User not found, abort whole import.</span>
<a name="l517"><span class="linenum"> 517</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('cleanup_import')" href="../../../../_functions/cleanup_import.html" onMouseOver="funcPopup(event,'cleanup_import')">cleanup_import</a>(<a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('usermappingerrorusernotfound', 'grades'));
<a name="l518"><span class="linenum"> 518</span></a>                  break;
<a name="l519"><span class="linenum"> 519</span></a>              }
<a name="l520"><span class="linenum"> 520</span></a>  
<a name="l521"><span class="linenum"> 521</span></a>              if (<a class="var it23251" onMouseOver="hilite(23251)" onMouseOut="lolite()" onClick="logVariable('separatemode')" href="../../../../_variables/separatemode.html">$separatemode</a> and !<a class="function" onClick="logFunction('groups_is_member')" href="../../../../_functions/groups_is_member.html" onMouseOver="funcPopup(event,'groups_is_member')">groups_is_member</a>(<a class="var it2561" onMouseOver="hilite(2561)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../../../../_variables/currentgroup.html">$currentgroup</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('studentid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/studentid.html">studentid</a>)) {
<a name="l522"><span class="linenum"> 522</span></a>  <span class="comment">                // Not allowed to import into this group, abort.</span>
<a name="l523"><span class="linenum"> 523</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('cleanup_import')" href="../../../../_functions/cleanup_import.html" onMouseOver="funcPopup(event,'cleanup_import')">cleanup_import</a>(<a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('usermappingerrorcurrentgroup', 'grades'));
<a name="l524"><span class="linenum"> 524</span></a>                  break;
<a name="l525"><span class="linenum"> 525</span></a>              }
<a name="l526"><span class="linenum"> 526</span></a>  
<a name="l527"><span class="linenum"> 527</span></a>  <span class="comment">            // Insert results of this students into buffer.</span>
<a name="l528"><span class="linenum"> 528</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/status.html">status</a> and !empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('newgrades')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/newgrades.html">newgrades</a>)) {
<a name="l529"><span class="linenum"> 529</span></a>  
<a name="l530"><span class="linenum"> 530</span></a>                  foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('newgrades')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/newgrades.html">newgrades</a> as <a class="var it8647" onMouseOver="hilite(8647)" onMouseOut="lolite()" onClick="logVariable('newgrade')" href="../../../../_variables/newgrade.html">$newgrade</a>) {
<a name="l531"><span class="linenum"> 531</span></a>  
<a name="l532"><span class="linenum"> 532</span></a>  <span class="comment">                    // Check if grade_grade is locked and if so, abort.</span>
<a name="l533"><span class="linenum"> 533</span></a>                      if (!empty(<a class="var it8647" onMouseOver="hilite(8647)" onMouseOut="lolite()" onClick="logVariable('newgrade')" href="../../../../_variables/newgrade.html">$newgrade</a>-&gt;<a onClick="logVariable('itemid')" class="var it44154" onMouseOver="hilite(44154)" onMouseOut="lolite()" href="../../../../_variables/itemid.html">itemid</a>) and <a class="var it8111" onMouseOver="hilite(8111)" onMouseOut="lolite()" onClick="logVariable('gradegrade')" href="../../../../_variables/gradegrade.html">$gradegrade</a> = <span class="keyword">new </span><a class="class" onClick="logClass('grade_grade')" href="../../../../_classes/grade_grade.html" onMouseOver="classPopup(event,'grade_grade')">grade_grade</a>(array('itemid' =&gt; <a class="var it8647" onMouseOver="hilite(8647)" onMouseOut="lolite()" onClick="logVariable('newgrade')" href="../../../../_variables/newgrade.html">$newgrade</a>-&gt;<a onClick="logVariable('itemid')" class="var it44154" onMouseOver="hilite(44154)" onMouseOut="lolite()" href="../../../../_variables/itemid.html">itemid</a>,
<a name="l534"><span class="linenum"> 534</span></a>                              'userid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('studentid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/studentid.html">studentid</a>))) {
<a name="l535"><span class="linenum"> 535</span></a>                          if (<a class="var it8111" onMouseOver="hilite(8111)" onMouseOut="lolite()" onClick="logVariable('gradegrade')" href="../../../../_variables/gradegrade.html">$gradegrade</a>-&gt;<a class="function" onClick="logFunction('is_locked')" href="../../../../_functions/is_locked.html" onMouseOver="funcPopup(event,'is_locked')">is_locked</a>()) {
<a name="l536"><span class="linenum"> 536</span></a>  <span class="comment">                            // Individual grade locked.</span>
<a name="l537"><span class="linenum"> 537</span></a>                              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('cleanup_import')" href="../../../../_functions/cleanup_import.html" onMouseOver="funcPopup(event,'cleanup_import')">cleanup_import</a>(<a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('gradelocked', 'grades'));
<a name="l538"><span class="linenum"> 538</span></a>                              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/status.html">status</a>;
<a name="l539"><span class="linenum"> 539</span></a>                          }
<a name="l540"><span class="linenum"> 540</span></a>  <span class="comment">                        // Check if the force import option is disabled and the last exported date column is present.</span>
<a name="l541"><span class="linenum"> 541</span></a>                          if (!<a class="var it23250" onMouseOver="hilite(23250)" onMouseOut="lolite()" onClick="logVariable('forceimport')" href="../../../../_variables/forceimport.html">$forceimport</a> &amp;&amp; !empty(<a class="var it31156" onMouseOver="hilite(31156)" onMouseOut="lolite()" onClick="logVariable('timeexportkey')" href="../../../../_variables/timeexportkey.html">$timeexportkey</a>)) {
<a name="l542"><span class="linenum"> 542</span></a>                              <a class="var it31160" onMouseOver="hilite(31160)" onMouseOut="lolite()" onClick="logVariable('exportedtime')" href="../../../../_variables/exportedtime.html">$exportedtime</a> = <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('line')" href="../../../../_variables/line.html">$line</a>[<a class="var it31156" onMouseOver="hilite(31156)" onMouseOut="lolite()" onClick="logVariable('timeexportkey')" href="../../../../_variables/timeexportkey.html">$timeexportkey</a>];
<a name="l543"><span class="linenum"> 543</span></a>                              if (<a class="function" onClick="logFunction('clean_param')" href="../../../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it31160" onMouseOver="hilite(31160)" onMouseOut="lolite()" onClick="logVariable('exportedtime')" href="../../../../_variables/exportedtime.html">$exportedtime</a>, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>) != <a class="var it31160" onMouseOver="hilite(31160)" onMouseOut="lolite()" onClick="logVariable('exportedtime')" href="../../../../_variables/exportedtime.html">$exportedtime</a> || <a class="var it31160" onMouseOver="hilite(31160)" onMouseOut="lolite()" onClick="logVariable('exportedtime')" href="../../../../_variables/exportedtime.html">$exportedtime</a> &gt; <a class="phpfunction" onClick="logFunction('time')" href="../../../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>() ||
<a name="l544"><span class="linenum"> 544</span></a>                                      <a class="var it31160" onMouseOver="hilite(31160)" onMouseOut="lolite()" onClick="logVariable('exportedtime')" href="../../../../_variables/exportedtime.html">$exportedtime</a> &lt; <a class="phpfunction" onClick="logFunction('strtotime')" href="../../../../_functions/strtotime.html" onMouseOver="phpfuncPopup(event,'strtotime')">strtotime</a>(&quot;-1 year&quot;, <a class="phpfunction" onClick="logFunction('time')" href="../../../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>())) {
<a name="l545"><span class="linenum"> 545</span></a>  <span class="comment">                                // The date is invalid, or in the future, or more than a year old.</span>
<a name="l546"><span class="linenum"> 546</span></a>                                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('cleanup_import')" href="../../../../_functions/cleanup_import.html" onMouseOver="funcPopup(event,'cleanup_import')">cleanup_import</a>(<a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('invalidgradeexporteddate', 'grades'));
<a name="l547"><span class="linenum"> 547</span></a>                                  return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/status.html">status</a>;
<a name="l548"><span class="linenum"> 548</span></a>  
<a name="l549"><span class="linenum"> 549</span></a>                              }
<a name="l550"><span class="linenum"> 550</span></a>                              <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('timemodified')" href="../../../../_variables/timemodified.html">$timemodified</a> = <a class="var it8111" onMouseOver="hilite(8111)" onMouseOut="lolite()" onClick="logVariable('gradegrade')" href="../../../../_variables/gradegrade.html">$gradegrade</a>-&gt;<a class="function" onClick="logFunction('get_dategraded')" href="../../../../_functions/get_dategraded.html" onMouseOver="funcPopup(event,'get_dategraded')">get_dategraded</a>();
<a name="l551"><span class="linenum"> 551</span></a>                              if (!empty(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('timemodified')" href="../../../../_variables/timemodified.html">$timemodified</a>) &amp;&amp; (<a class="var it31160" onMouseOver="hilite(31160)" onMouseOut="lolite()" onClick="logVariable('exportedtime')" href="../../../../_variables/exportedtime.html">$exportedtime</a> &lt; <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('timemodified')" href="../../../../_variables/timemodified.html">$timemodified</a>)) {
<a name="l552"><span class="linenum"> 552</span></a>  <span class="comment">                                // The item was graded after we exported it, we return here not to override it.</span>
<a name="l553"><span class="linenum"> 553</span></a>                                  <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../../_variables/user.html">$user</a> = <a class="class" onClick="logClass('core_user')" href="../../../../_classes/core_user.html" onMouseOver="classPopup(event,'core_user')">core_user</a>::<a class="function" onClick="logFunction('get_user')" href="../../../../_functions/get_user.html" onMouseOver="funcPopup(event,'get_user')">get_user</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('studentid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/studentid.html">studentid</a>);
<a name="l554"><span class="linenum"> 554</span></a>                                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('cleanup_import')" href="../../../../_functions/cleanup_import.html" onMouseOver="funcPopup(event,'cleanup_import')">cleanup_import</a>(<a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('gradealreadyupdated', 'grades', <a class="function" onClick="logFunction('fullname')" href="../../../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../../_variables/user.html">$user</a>)));
<a name="l555"><span class="linenum"> 555</span></a>                                  return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/status.html">status</a>;
<a name="l556"><span class="linenum"> 556</span></a>                              }
<a name="l557"><span class="linenum"> 557</span></a>                          }
<a name="l558"><span class="linenum"> 558</span></a>                      }
<a name="l559"><span class="linenum"> 559</span></a>                      <a class="var it986" onMouseOver="hilite(986)" onMouseOut="lolite()" onClick="logVariable('insertid')" href="../../../../_variables/insertid.html">$insertid</a> = self::<a class="function" onClick="logFunction('insert_grade_record')" href="../../../../_functions/insert_grade_record.html" onMouseOver="funcPopup(event,'insert_grade_record')">insert_grade_record</a>(<a class="var it8647" onMouseOver="hilite(8647)" onMouseOut="lolite()" onClick="logVariable('newgrade')" href="../../../../_variables/newgrade.html">$newgrade</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('studentid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/studentid.html">studentid</a>);
<a name="l560"><span class="linenum"> 560</span></a>  <span class="comment">                    // Check to see if the insert was successful.</span>
<a name="l561"><span class="linenum"> 561</span></a>                      if (empty(<a class="var it986" onMouseOver="hilite(986)" onMouseOut="lolite()" onClick="logVariable('insertid')" href="../../../../_variables/insertid.html">$insertid</a>)) {
<a name="l562"><span class="linenum"> 562</span></a>                          return null;
<a name="l563"><span class="linenum"> 563</span></a>                      }
<a name="l564"><span class="linenum"> 564</span></a>                  }
<a name="l565"><span class="linenum"> 565</span></a>              }
<a name="l566"><span class="linenum"> 566</span></a>  
<a name="l567"><span class="linenum"> 567</span></a>  <span class="comment">            // Updating/inserting all comments here.</span>
<a name="l568"><span class="linenum"> 568</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/status.html">status</a> and !empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('newfeedbacks')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/newfeedbacks.html">newfeedbacks</a>)) {
<a name="l569"><span class="linenum"> 569</span></a>                  foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('newfeedbacks')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/newfeedbacks.html">newfeedbacks</a> as <a class="var it31161" onMouseOver="hilite(31161)" onMouseOut="lolite()" onClick="logVariable('newfeedback')" href="../../../../_variables/newfeedback.html">$newfeedback</a>) {
<a name="l570"><span class="linenum"> 570</span></a>                      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../../_variables/sql.html">$sql</a> = &quot;SELECT *
<a name="l571"><span class="linenum"> 571</span></a>                                FROM {grade_import_values}
<a name="l572"><span class="linenum"> 572</span></a>                               WHERE importcode=? AND userid=? AND itemid=? AND importer=?&quot;;
<a name="l573"><span class="linenum"> 573</span></a>                      if (<a class="var it954" onMouseOver="hilite(954)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../../../_variables/feedback.html">$feedback</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record_sql')" href="../../../../_functions/get_record_sql.html" onMouseOver="funcPopup(event,'get_record_sql')">get_record_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../../_variables/sql.html">$sql</a>, array(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('importcode')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/importcode.html">importcode</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('studentid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/studentid.html">studentid</a>, <a class="var it31161" onMouseOver="hilite(31161)" onMouseOut="lolite()" onClick="logVariable('newfeedback')" href="../../../../_variables/newfeedback.html">$newfeedback</a>-&gt;<a onClick="logVariable('itemid')" class="var it45560" onMouseOver="hilite(45560)" onMouseOut="lolite()" href="../../../../_variables/itemid.html">itemid</a>,
<a name="l574"><span class="linenum"> 574</span></a>                              <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>))) {
<a name="l575"><span class="linenum"> 575</span></a>                          <a class="var it31161" onMouseOver="hilite(31161)" onMouseOut="lolite()" onClick="logVariable('newfeedback')" href="../../../../_variables/newfeedback.html">$newfeedback</a>-&gt;<a onClick="logVariable('id')" class="var it45560" onMouseOver="hilite(45560)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a> = <a class="var it954" onMouseOver="hilite(954)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it43060" onMouseOver="hilite(43060)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>;
<a name="l576"><span class="linenum"> 576</span></a>                          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('grade_import_values', <a class="var it31161" onMouseOver="hilite(31161)" onMouseOut="lolite()" onClick="logVariable('newfeedback')" href="../../../../_variables/newfeedback.html">$newfeedback</a>);
<a name="l577"><span class="linenum"> 577</span></a>  
<a name="l578"><span class="linenum"> 578</span></a>                      } else {
<a name="l579"><span class="linenum"> 579</span></a>  <span class="comment">                        // The grade item for this is not updated.</span>
<a name="l580"><span class="linenum"> 580</span></a>                          <a class="var it31161" onMouseOver="hilite(31161)" onMouseOut="lolite()" onClick="logVariable('newfeedback')" href="../../../../_variables/newfeedback.html">$newfeedback</a>-&gt;<a onClick="logVariable('importonlyfeedback')" class="var it45560" onMouseOver="hilite(45560)" onMouseOut="lolite()" href="../../../../_variables/importonlyfeedback.html">importonlyfeedback</a> = true;
<a name="l581"><span class="linenum"> 581</span></a>                          <a class="var it986" onMouseOver="hilite(986)" onMouseOut="lolite()" onClick="logVariable('insertid')" href="../../../../_variables/insertid.html">$insertid</a> = self::<a class="function" onClick="logFunction('insert_grade_record')" href="../../../../_functions/insert_grade_record.html" onMouseOver="funcPopup(event,'insert_grade_record')">insert_grade_record</a>(<a class="var it31161" onMouseOver="hilite(31161)" onMouseOut="lolite()" onClick="logVariable('newfeedback')" href="../../../../_variables/newfeedback.html">$newfeedback</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('studentid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/studentid.html">studentid</a>);
<a name="l582"><span class="linenum"> 582</span></a>  <span class="comment">                        // Check to see if the insert was successful.</span>
<a name="l583"><span class="linenum"> 583</span></a>                          if (empty(<a class="var it986" onMouseOver="hilite(986)" onMouseOut="lolite()" onClick="logVariable('insertid')" href="../../../../_variables/insertid.html">$insertid</a>)) {
<a name="l584"><span class="linenum"> 584</span></a>                              return null;
<a name="l585"><span class="linenum"> 585</span></a>                          }
<a name="l586"><span class="linenum"> 586</span></a>                      }
<a name="l587"><span class="linenum"> 587</span></a>                  }
<a name="l588"><span class="linenum"> 588</span></a>              }
<a name="l589"><span class="linenum"> 589</span></a>          }
<a name="l590"><span class="linenum"> 590</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('status')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/status.html">status</a>;
<a name="l591"><span class="linenum"> 591</span></a>      }
<a name="l592"><span class="linenum"> 592</span></a>  
<a name="l593"><span class="linenum"> 593</span></a>      <span class="comment">/**</span>
<a name="l594"><span class="linenum"> 594</span></a>  <span class="comment">     * Returns the headers parameter for this class.</span>
<a name="l595"><span class="linenum"> 595</span></a>  <span class="comment">     *</span>
<a name="l596"><span class="linenum"> 596</span></a>  <span class="comment">     * @return array returns headers parameter for this class.</span>
<a name="l597"><span class="linenum"> 597</span></a>  <span class="comment">     */</span>
<a name="l598"><span class="linenum"> 598</span></a>      public function <a class="function" onClick="logFunction('get_headers')" href="../../../../_functions/get_headers.html" onMouseOver="funcPopup(event,'get_headers')">get_headers</a>() {
<a name="l599"><span class="linenum"> 599</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('headers')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/headers.html">headers</a>;
<a name="l600"><span class="linenum"> 600</span></a>      }
<a name="l601"><span class="linenum"> 601</span></a>  
<a name="l602"><span class="linenum"> 602</span></a>      <span class="comment">/**</span>
<a name="l603"><span class="linenum"> 603</span></a>  <span class="comment">     * Returns the error parameter for this class.</span>
<a name="l604"><span class="linenum"> 604</span></a>  <span class="comment">     *</span>
<a name="l605"><span class="linenum"> 605</span></a>  <span class="comment">     * @return string returns error parameter for this class.</span>
<a name="l606"><span class="linenum"> 606</span></a>  <span class="comment">     */</span>
<a name="l607"><span class="linenum"> 607</span></a>      public function <a class="function" onClick="logFunction('get_error')" href="../../../../_functions/get_error.html" onMouseOver="funcPopup(event,'get_error')">get_error</a>() {
<a name="l608"><span class="linenum"> 608</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('error')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/error.html">error</a>;
<a name="l609"><span class="linenum"> 609</span></a>      }
<a name="l610"><span class="linenum"> 610</span></a>  
<a name="l611"><span class="linenum"> 611</span></a>      <span class="comment">/**</span>
<a name="l612"><span class="linenum"> 612</span></a>  <span class="comment">     * Returns the iid parameter for this class.</span>
<a name="l613"><span class="linenum"> 613</span></a>  <span class="comment">     *</span>
<a name="l614"><span class="linenum"> 614</span></a>  <span class="comment">     * @return int returns iid parameter for this class.</span>
<a name="l615"><span class="linenum"> 615</span></a>  <span class="comment">     */</span>
<a name="l616"><span class="linenum"> 616</span></a>      public function <a class="function" onClick="logFunction('get_iid')" href="../../../../_functions/get_iid.html" onMouseOver="funcPopup(event,'get_iid')">get_iid</a>() {
<a name="l617"><span class="linenum"> 617</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('iid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/iid.html">iid</a>;
<a name="l618"><span class="linenum"> 618</span></a>      }
<a name="l619"><span class="linenum"> 619</span></a>  
<a name="l620"><span class="linenum"> 620</span></a>      <span class="comment">/**</span>
<a name="l621"><span class="linenum"> 621</span></a>  <span class="comment">     * Returns the preview_data parameter for this class.</span>
<a name="l622"><span class="linenum"> 622</span></a>  <span class="comment">     *</span>
<a name="l623"><span class="linenum"> 623</span></a>  <span class="comment">     * @return array returns previewdata parameter for this class.</span>
<a name="l624"><span class="linenum"> 624</span></a>  <span class="comment">     */</span>
<a name="l625"><span class="linenum"> 625</span></a>      public function <a class="function" onClick="logFunction('get_previewdata')" href="../../../../_functions/get_previewdata.html" onMouseOver="funcPopup(event,'get_previewdata')">get_previewdata</a>() {
<a name="l626"><span class="linenum"> 626</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('previewdata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/previewdata.html">previewdata</a>;
<a name="l627"><span class="linenum"> 627</span></a>      }
<a name="l628"><span class="linenum"> 628</span></a>  
<a name="l629"><span class="linenum"> 629</span></a>      <span class="comment">/**</span>
<a name="l630"><span class="linenum"> 630</span></a>  <span class="comment">     * Returns the gradebookerrors parameter for this class.</span>
<a name="l631"><span class="linenum"> 631</span></a>  <span class="comment">     *</span>
<a name="l632"><span class="linenum"> 632</span></a>  <span class="comment">     * @return array returns gradebookerrors parameter for this class.</span>
<a name="l633"><span class="linenum"> 633</span></a>  <span class="comment">     */</span>
<a name="l634"><span class="linenum"> 634</span></a>      public function <a class="function" onClick="logFunction('get_gradebookerrors')" href="../../../../_functions/get_gradebookerrors.html" onMouseOver="funcPopup(event,'get_gradebookerrors')">get_gradebookerrors</a>() {
<a name="l635"><span class="linenum"> 635</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('gradebookerrors')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/gradebookerrors.html">gradebookerrors</a>;
<a name="l636"><span class="linenum"> 636</span></a>      }
<a name="l637"><span class="linenum"> 637</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'get_gradebookerrors': ['get_gradebookerrors', 'Returns the gradebookerrors parameter for this class. ', [['grade/import/csv/classes','load_data.php',629]], 9],
'get_columns': ['get_columns', 'Returns detailed information about columns in table. This information is cached internally. ', [['lib/dml','oci_native_moodle_database.php',464],['lib','csvlib.class.php',190],['lib/dml','sqlite3_pdo_moodle_database.php',195],['lib/dml','pgsql_native_moodle_database.php',353],['lib/dml','mssql_native_moodle_database.php',432],['lib/dml','mysqli_native_moodle_database.php',572],['lib/dml','sqlsrv_native_moodle_database.php',503],['lib/dml/tests','dml_test.php',5538]], 107],
'update_grade_item': ['update_grade_item', 'This updates existing grade items. ', [['grade/import/csv/classes','load_data.php',269]], 2],
'get_new_iid': ['get_new_iid', 'Create new import id ', [['lib','csvlib.class.php',342]], 20],
'import_cleanup': ['import_cleanup', 'removes entries from grade import buffer tables grade_import_value and grade_import_newitem after a successful import, or during an import abort ', [['grade/import','lib.php',218]], 6],
'raise_limits': ['raise_limits', 'Raises the php execution time and memory limits for importing the CSV file. ', [['grade/import/csv/classes','load_data.php',138]], 2],
'get_previewdata': ['get_previewdata', 'Returns the preview_data parameter for this class. ', [['grade/import/csv/classes','load_data.php',620]], 3],
'unformat_float': ['unformat_float', 'Converts locale specific floating point/comma number back to standard PHP float value Do NOT try to do any math operations before this conversion on any user submitted floats! ', [['lib','moodlelib.php',8093]], 62],
'groups_is_member': ['groups_is_member', 'Determines if the user is a member of the given group. ', [['lib','grouplib.php',353]], 97],
'print_error': ['print_error', 'Abort execution by throwing of a general exception, default exception handler displays the error message in most cases. ', [['lib','setuplib.php',481]], 1488],
'fetch_grade_items': ['fetch_grade_items', 'Gets all of the grade items in this course. ', [['grade/import/csv/classes','load_data.php',99]], 3],
'raise': ['raise', 'Sets the PHP time limit to a number of seconds from now. ', [['lib/classes','php_time_limit.php',41]], 90],
'get_dategraded': ['get_dategraded', 'Returns timestamp when last graded, null if no grade present ', [['lib/grade','grade_grade.php',399]], 5],
'fullname': ['fullname', 'Returns a persons full name ', [['lib','moodlelib.php',3249],['mod/assign','locallib.php',3915]], 546],
'map_user_data_with_value': ['map_user_data_with_value', 'Check user mapping. ', [['grade/import/csv/classes','load_data.php',344]], 2],
'trim_headers': ['trim_headers', 'Cleans the column headers from the CSV file. ', [['grade/import/csv/classes','load_data.php',127]], 2],
'get_iid': ['get_iid', 'Returns the iid parameter for this class. ', [['grade/import/csv/classes','load_data.php',611]], 2],
'raise_memory_limit': ['raise_memory_limit', 'Function to raise the memory limit to a new value. Will respect the memory limit if it is higher, thus allowing settings in php.ini, apache conf or command line switches to override it. ', [['lib','setuplib.php',1206]], 59],
'load_csv_content': ['load_csv_content', 'Parse this content ', [['lib','csvlib.class.php',82],['grade/import/csv/classes','load_data.php',63]], 25],
'fetch_all': ['fetch_all', 'Finds and returns all grade_item instances based on params. ', [['lib/grade','grade_item.php',385],['lib/grade','grade_category.php',209],['lib/grade','grade_scale.php',100],['lib/grade','grade_object.php',138],['completion','data_object.php',165],['lib/grade','grade_grade.php',645],['lib/grade','grade_outcome.php',193],['completion','completion_aggregation.php',79],['completion/criteria','completion_criteria.php',153],['completion','completion_criteria_completion.php',84]], 66],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pdo_moodle_database.php',461],['lib/dml','oci_native_moodle_database.php',1404],['lib/dml','pgsql_native_moodle_database.php',1089],['lib/dml','mssql_native_moodle_database.php',1067],['lib/dml','mysqli_native_moodle_database.php',1405],['lib/dml','sqlsrv_native_moodle_database.php',1148],['lib/dml/tests','dml_test.php',5551]], 650],
'load_scale': ['load_scale', 'Instantiates a grade_scale object from the DB if this item\'s scaleid variable is set ', [['lib/grade','grade_item.php',922],['lib/grade','grade_outcome.php',204]], 13],
'init': ['init', 'Init method. ', [['lib/classes/event','competency_plan_unlinked.php',90],['lib/classes/session','file.php',53],['lib/classes/event','grouping_group_assigned.php',66],['admin/tool/xmldb/actions/view_table_sql','view_table_sql.class.php',33],['lib/classes/event','enrol_instance_deleted.php',88],['report/log/classes/event','user_report_viewed.php',44],['mod/quiz/classes/event','attempt_reviewed.php',44],['lib/classes/event','tag_unflagged.php',46],['mod/workshop/allocation/scheduled','lib.php',52],['lib/classes/event','role_unassigned.php',47],['mod/assign/classes/event','grading_form_viewed.php',74],['question/classes/bank','edit_action_column.php',29],['blocks/blog_menu','block_blog_menu.php',32],['mod/workshop/classes/event','submission_deleted.php',44],['admin/tool/xmldb/actions/view_table_php','view_table_php.class.php',33],['mod/forum/classes/event','discussion_updated.php',44],['lib/classes/event','course_module_instance_list_viewed.php',49],['lib/classes/event','course_created.php',46],['mod/assign/classes/event','extension_granted.php',86],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/xhtmlxtras/js','attributes.js',1],['blocks/course_overview','block_course_overview.php',38],['admin/tool/xmldb/actions/delete_index','delete_index.class.php',32],['lib/classes/event','course_deleted.php',47],['lib/minify/lib','FirePHP.php',221],['lib/lessphp','Environment.php',56],['mod/forum/classes/event','readtracking_enabled.php',44],['mod/wiki/classes/event','page_created.php',37],['lib/classes/event','competency_viewed.php',88],['mod/choice/classes/event','answer_updated.php',90],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/table/js','row.js',3],['lib/minify/lib','JSMinPlus.php',1753],['lib/classes/event','search_indexed.php',39],['lib/classes/event','badge_criteria_updated.php',44],['mod/wiki/classes/event','page_version_deleted.php',43],['lib/classes/event','competency_user_competency_rated_in_plan.php',107],['lib/classes/event','webservice_token_sent.php',65],['mod/glossary/classes/event','entry_deleted.php',45],['lib/classes/event','competency_template_viewed.php',90],['mod/feedback/classes','responses_anon_table.php',42],['mod/assign/tests/fixtures','event_mod_assign_fixtures.php',57],['admin/tool/langimport/classes/event','langpack_removed.php',61],['mod/glossary/classes/event','category_deleted.php',37],['mod/lti/classes/event','unknown_service_api_called.php',64],['lib/classes/event','badge_deleted.php',40],['mod/quiz/classes/event','user_override_updated.php',45],['lib/classes/event','message_contact_added.php',39],['lib/classes/event','cohort_member_added.php',38],['lib/classes/event','blog_entry_updated.php',42],['admin/tool/xmldb/actions/move_updown_table','move_updown_table.class.php',32],['mod/assign/classes/event','workflow_state_updated.php',97],['blocks/completionstatus','block_completionstatus.php',36],['mod/forum/classes/event','assessable_uploaded.php',104],['mod/assign/classes/event','submission_created.php',49],['lib/classes/event','group_deleted.php',83],['lib/classes/event','role_allow_assign_updated.php',39],['lib/simplepie/library','SimplePie.php',1198],['blocks/globalsearch','block_globalsearch.php',36],['lib/tests','blocklib_test.php',564],['lib/tests/fixtures','stats_events.php',32],['lib/tests/fixtures','stats_events.php',39],['lib/tests/fixtures','stats_events.php',46],['lib/tests/fixtures','stats_events.php',53],['mod/lesson/classes/event','highscore_added.php',50],['mod/forum/classes/event','discussion_pinned.php',35],['lib/classes/event','webservice_function_called.php',76],['lib/classes/event','competency_plan_reopened.php',93],['mod/lesson/classes/event','essay_attempt_viewed.php',39],['mod/wiki/classes/event','page_locks_deleted.php',43],['lib/classes/event','webservice_service_deleted.php',77],['mod/forum/classes/event','discussion_subscription_created.php',45],['lib/editor/atto/yui/build/moodle-editor_atto-rangy','moodle-editor_atto-rangy-debug.js',242],['admin/tool/log/store/database/tests/fixtures','event.php',39],['mod/workshop/classes/event','assessable_uploaded.php',112],['lib','csslib.php',1493],['lib','csslib.php',1579],['lib','csslib.php',2462],['lib','csslib.php',2572],['lib','csslib.php',2593],['lib','csslib.php',2732],['lib','csslib.php',2762],['lib','csslib.php',2792],['lib','csslib.php',2822],['lib','csslib.php',2852],['lib','csslib.php',3186],['lib','csslib.php',3266],['lib','csslib.php',3309],['lib','csslib.php',3352],['lib','csslib.php',3395],['lib','csslib.php',3438],['lib','csslib.php',3525],['lib','csslib.php',3578],['lib','csslib.php',3608],['lib','csslib.php',3638],['lib','csslib.php',3668],['lib','csslib.php',3698],['lib','csslib.php',3728],['lib','csslib.php',3758],['lib','csslib.php',3788],['lib','csslib.php',3818],['lib','csslib.php',3848],['lib','csslib.php',3878],['lib','csslib.php',3908],['lib','csslib.php',3938],['lib','csslib.php',4243],['lib','csslib.php',4277],['lib','csslib.php',4328],['lib','csslib.php',4381],['lib','csslib.php',4413],['lib','csslib.php',4464],['lib','csslib.php',4515],['lib','csslib.php',4566],['lib','csslib.php',4596],['lib','csslib.php',4626],['lib','csslib.php',4656],['lib','csslib.php',4791],['lib','csslib.php',4821],['lib','csslib.php',4851],['lib','csslib.php',4881],['lib','csslib.php',4910],['lib','csslib.php',4945],['lib','csslib.php',4977],['lib/classes/event','user_loggedout.php',44],['lib/classes/event','webservice_token_created.php',83],['lib/classes/event','tag_collection_updated.php',39],['mod/data/classes/event','field_deleted.php',46],['lib/phpexcel/PHPExcel/Shared/OLE/PPS','File.php',44],['mod/book/classes/event','chapter_created.php',100],['lib/classes/event','email_failed.php',48],['admin/tool/xmldb/actions/view_structure_sql','view_structure_sql.class.php',33],['blocks/calendar_upcoming','block_calendar_upcoming.php',26],['mod/survey/classes/event','report_downloaded.php',46],['mod/workshop/classes/event','phase_switched.php',44],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/table/js','table.js',295],['admin/tool/xmldb/actions/edit_key_save','edit_key_save.class.php',33],['blocks/private_files','block_private_files.php',28],['mod/page/classes/event','course_module_viewed.php',38],['lib/classes/event','course_reset_started.php',71],['mod/workshop/classes/event','assessment_evaluated.php',45],['lib/classes/event','blog_association_created.php',46],['backup/converter','convertlib.php',211],['report/outline/classes/event','activity_report_viewed.php',38],['lib/classes/event','competency_plan_updated.php',93],['mod/choice/classes/event','answer_submitted.php',90],['blocks/admin_bookmarks','block_admin_bookmarks.php',41],['admin/tool/xmldb/actions/view_field_xml','view_field_xml.class.php',32],['blocks/myprofile','block_myprofile.php',40],['mod/lesson/classes/event','lesson_ended.php',40],['lib/classes/event','role_allow_switch_updated.php',39],['lib/classes/session','memcache.php',88],['lib/classes/event','competency_user_competency_rated_in_course.php',107],['question/classes/bank','question_text_row.php',29],['lib/classes/event','tag_created.php',46],['report/participation/classes/event','report_viewed.php',48],['lib/classes/event','role_capabilities_updated.php',42],['blocks/mentees','block_mentees.php',27],['lib','csvlib.class.php',216],['mod/survey/classes/event','response_submitted.php',45],['lib/classes/event','badge_archived.php',38],['mod/workshop/classes/event','assessment_reevaluated.php',45],['mod/assign/classes/event','submission_locked.php',87],['admin/tool/xmldb/actions/view_table_xml','view_table_xml.class.php',32],['report/outline/classes/event','report_viewed.php',44],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/style/js','props.js',57],['lib/classes/event','user_deleted.php',48],['lib/classes/event','mnet_access_control_updated.php',48],['mod/lesson/classes/event','essay_assessed.php',46],['blocks/html','block_html.php',27],['mod/book/tool/print/classes/event','book_printed.php',94],['mod/feedback/classes','responses_table.php',82],['lib/classes/event','grouping_deleted.php',90],['blocks/section_links','block_section_links.php',34],['lib/classes/event','course_viewed.php',46],['mod/forum/classes/event','user_report_viewed.php',45],['admin/tool/xmldb/actions/check_bigints','check_bigints.class.php',32],['admin/tool/xmldb/actions/check_defaults','check_defaults.class.php',34],['admin/tool/xmldb/actions/edit_xml_file_save','edit_xml_file_save.class.php',32],['admin/tool/xmldb/actions/move_updown_index','move_updown_index.class.php',32],['mod/quiz/classes/event','attempt_summary_viewed.php',45],['lib/classes/event','webservice_service_user_added.php',77],['mod/forum/classes/event','discussion_unpinned.php',35],['lib/classes/event','grouping_group_unassigned.php',66],['blocks/lp','block_lp.php',45],['mod/assign/submission/file/classes/event','submission_updated.php',45],['mod/quiz/report','attemptsreport.php',67],['mod/chat/classes/event','message_sent.php',77],['mod/chat/classes/event','course_module_viewed.php',38],['lib/classes/event','role_assigned.php',47],['blocks/site_main_menu','block_site_main_menu.php',26],['blocks/social_activities','block_social_activities.php',26],['lib/htmlpurifier/HTMLPurifier/ChildDef','StrictBlockquote.php',97],['mod/glossary/classes/event','entry_viewed.php',39],['mod/data/classes/event','record_created.php',45],['admin/tool/xmldb/actions/main_view','main_view.class.php',35],['lib/classes/event','course_category_deleted.php',50],['mod/quiz/classes/event','course_module_viewed.php',39],['lib/classes/event','role_deleted.php',46],['blocks/tag_flickr','block_tag_flickr.php',30],['mod/wiki/classes/event','page_version_viewed.php',43],['admin/tool/recyclebin/classes/event','category_bin_item_deleted.php',38],['mod/data/classes/event','course_module_viewed.php',40],['auth/cas/CAS/CAS/PGTStorage','File.php',150],['mod/choice/classes/event','course_module_viewed.php',38],['admin/tool/log/store/standard/tests/fixtures','event.php',39],['admin/tool/monitor/classes/event','rule_created.php',39],['admin/tool/xmldb/actions/check_oracle_semantics','check_oracle_semantics.class.php',37],['question/classes/bank','checkbox_column.php',28],['lib/classes/event','competency_user_competency_plan_viewed.php',100],['lib/adodb/drivers','adodb-pdo.inc.php',651],['mod/forum/classes/event','course_module_viewed.php',39],['mod/workshop/classes/event','submission_updated.php',44],['mod/choice/classes/event','report_viewed.php',44],['mod/lesson/classes/event','group_override_deleted.php',45],['mod/wiki/classes/event','page_map_viewed.php',43],['blocks/mnet_hosts','block_mnet_hosts.php',26],['admin/tool/log/store/legacy/tests/fixtures','event.php',39],['admin/tool/xmldb/actions/new_index','new_index.class.php',32],['admin/tool/xmldb/actions/get_db_directories','get_db_directories.class.php',33],['mod/lesson/classes/event','question_answered.php',45],['mod/choice/classes/event','report_downloaded.php',46],['lib/classes/event','competency_user_evidence_created.php',91],['lib/classes/event','course_module_completion_updated.php',45],['admin/tool/xmldb/actions/delete_xml_file','delete_xml_file.class.php',32],['backup/util/xml/output','file_xml_output.class.php',44],['question/engine','states.php',64],['lib/classes/event','note_updated.php',47],['lib/classes/event','note_created.php',47],['lib/classes/event','competency_framework_created.php',90],['lib/classes/event','course_resources_list_viewed.php',41],['lib/classes/event','tag_updated.php',49],['mod/forum/classes/event','subscribers_viewed.php',45],['question/classes/bank','column_base.php',53],['mod/book/tool/exportimscp/classes/event','book_exported.php',94],['mod/quiz/classes/question/bank','add_action_column.php',40],['blocks/quiz_results','block_quiz_results.php',40],['lib/classes/event','user_enrolment_deleted.php',45],['admin/tool/recyclebin/classes/event','course_bin_item_restored.php',38],['admin/tool/xmldb/actions/unload_xml_file','unload_xml_file.class.php',32],['lib/classes/event','webservice_service_updated.php',77],['mod/lesson/classes/event','group_override_created.php',46],['admin/tool/xmldb/actions/view_index_xml','view_index_xml.class.php',32],['admin/tool/xmldb/actions/generate_documentation','generate_documentation.class.php',32],['mod/scorm/classes/event','attempt_deleted.php',44],['admin/tool/xmldb/actions/new_field','new_field.class.php',32],['lib/classes/event','competency_user_competency_review_request_cancelled.php',90],['lib/classes/event','webservice_service_created.php',83],['mod/workshop/allocation/random','lib.php',56],['mod/wiki/classes/event','page_version_restored.php',43],['mod/forum/classes/event','discussion_deleted.php',45],['lib/classes/event','competency_framework_updated.php',91],['mod/lesson/classes/event','lesson_restarted.php',39],['mod/wiki/classes/event','page_updated.php',43],['mod/assign/classes/event','marker_updated.php',98],['admin/tool/xmldb/actions/new_key','new_key.class.php',32],['admin/tool/xmldb/actions/check_indexes','check_indexes.class.php',34],['admin/tool/xmldb/actions/new_table_from_mysql','new_table_from_mysql.class.php',33],['lib/classes/event','course_module_updated.php',48],['admin/tool/xmldb/actions/delete_field','delete_field.class.php',32],['lib/classes/event','competency_template_deleted.php',82],['blocks/settings','block_settings.php',46],['mod/assign/classes/event','submission_confirmation_form_viewed.php',71],['report/questioninstances/classes/event','report_viewed.php',44],['lib/classes/event','message_contact_blocked.php',39],['lib/classes/event','competency_template_updated.php',93],['lib/classes/event','badge_disabled.php',38],['mod/assign/classes/event','grading_table_viewed.php',71],['lib/classes/event','badge_enabled.php',38],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/xhtmlxtras/js','del.js',1],['mod/quiz/classes/event','edit_page_viewed.php',45],['blocks/activity_modules','block_activity_modules.php',29],['mod/scorm/classes/event','tracks_viewed.php',46],['mod/wiki/classes/event','page_diff_viewed.php',44],['lib/tcpdf/include/barcodes','qrcode.php',854],['lib/classes/event','assessable_submitted.php',46],['lib/classes/event','grouping_created.php',83],['mod/assign/submission/onlinetext/classes/event','submission_created.php',45],['lib/classes/event','calendar_event_deleted.php',47],['lib/classes/event','group_updated.php',83],['mod/book/classes/event','chapter_updated.php',100],['lib/classes/event','grade_deleted.php',50],['admin/tool/recyclebin/classes/event','course_bin_item_created.php',38],['lib/classes/event','user_loggedin.php',91],['mod/forum/classes/event','subscription_created.php',44],['lib/classes/event','tag_collection_created.php',39],['grade/report/overview/classes/event','grade_report_viewed.php',39],['mod/assign/classes/event','batch_set_marker_allocation_viewed.php',71],['mod/quiz/classes/event','group_override_updated.php',45],['lib/classes/event','competency_plan_created.php',90],['mod/glossary/classes/event','entry_disapproved.php',37],['lib/classes/event','message_viewed.php',45],['lib/classes/event','comment_created.php',47],['lib/classes/event','course_content_deleted.php',45],['blocks/glossary_random','block_glossary_random.php',38],['mod/feedback/classes/event','response_deleted.php',48],['lib/classes/event','competency_evidence_created.php',125],['lib/classes/event','comment_deleted.php',47],['lib/classes/event','competency_user_competency_review_requested.php',90],['mod/quiz/classes/event','attempt_abandoned.php',44],['admin/tool/xmldb/actions/delete_table','delete_table.class.php',32],['mod/scorm/classes/event','user_report_viewed.php',45],['mod/quiz/classes/event','attempt_becameoverdue.php',47],['mod/quiz/classes/event','group_override_created.php',46],['mod/book/tool/print/classes/event','chapter_printed.php',97],['mod/data/classes/event','record_deleted.php',45],['admin/tool/xmldb/actions/view_structure_xml','view_structure_xml.class.php',32],['lib/classes/event','competency_user_competency_viewed.php',99],['lib/classes/event','dashboard_viewed.php',40],['mod/lesson/classes/event','question_viewed.php',45],['lib/classes/event','user_profile_viewed.php',47],['mod/lesson/classes/event','user_override_deleted.php',44],['mod/data/preset/imagegallery','jstemplate.js',4],['grade','lib.php',128],['lib/classes/event','cohort_member_removed.php',39],['mod/lesson/classes/event','lesson_started.php',39],['blocks/news_items','block_news_items.php',33],['mod/lesson/classes/event','page_updated.php',64],['mod/resource/classes/event','course_module_viewed.php',39],['mod/workshop/classes/event','submission_viewed.php',44],['lib/editor/tinymce/plugins/moodlemedia/tinymce/js','media.js',13],['lib/classes/event','competency_deleted.php',96],['admin/tool/xmldb/actions/revert_changes','revert_changes.class.php',32],['lib/xhprof/xhprof_html/jquery','jquery.autocomplete.js',565],['mod/assign/feedback/offline','importgradeslib.php',91],['mod/glossary/classes/event','entry_created.php',43],['lib/classes/event','dashboard_reset.php',40],['admin/tool/xmldb/actions/edit_index_save','edit_index_save.class.php',33],['lib/classes','component.php',119],['admin/tool/xmldb/actions/view_structure_php','view_structure_php.class.php',33],['mod/wiki/classes/event','page_history_viewed.php',37],['blocks/blog_tags','block_blog_tags.php',32],['lib/classes/event','competency_plan_review_request_cancelled.php',93],['lib/classes/event','competency_plan_deleted.php',82],['blocks/feedback','block_feedback.php',31],['mod/quiz/classes/event','attempt_viewed.php',45],['lib/adodb','adodb.inc.php',3102],['lib/adodb','adodb.inc.php',3266],['mod/data/classes/event','field_updated.php',46],['lib/classes/event','grouping_updated.php',83],['lib/editor/tinymce/tiny_mce/3.5.11/themes/advanced/js','about.js',3],['backup/converter/moodle1','lib.php',111],['lib/classes/event','question_category_created.php',39],['grade/report/user/classes/event','grade_report_viewed.php',39],['lib/classes/event','user_login_failed.php',45],['mod/scorm/classes/event','report_viewed.php',45],['mod/chat/classes/event','sessions_viewed.php',83],['admin/tool/recyclebin/classes/event','course_bin_item_deleted.php',38],['mod/quiz/classes/event','user_override_deleted.php',44],['portfolio/mahara','lib.php',53],['mod/quiz/classes/event','attempt_submitted.php',44],['mod/lesson/classes/event','group_override_updated.php',45],['mod/workshop/classes/event','submission_created.php',44],['mod/assign/classes/event','submission_updated.php',49],['lib/editor/atto/yui/build/moodle-editor_atto-rangy','moodle-editor_atto-rangy.js',242],['comment','lib.php',241],['mod/assign/submission/onlinetext/classes/event','assessable_uploaded.php',101],['lib/classes/event','competency_updated.php',88],['lib/classes/event','note_deleted.php',47],['mod/lesson/classes/event','page_moved.php',47],['admin/tool/xmldb/actions/edit_key','edit_key.class.php',32],['mod/book/classes/event','course_module_viewed.php',57],['mod/workshop/allocation/manual','lib.php',55],['lib/classes/event','course_completed.php',64],['lib/classes/event','tag_added.php',49],['lib/classes/event','competency_created.php',88],['mod/lesson/classes/event','highscores_viewed.php',42],['lib/classes/event','message_contact_unblocked.php',39],['admin/tool/xmldb/actions/template','template.class.php',31],['admin/tool/xmldb/actions/view_key_xml','view_key_xml.class.php',32],['blocks/search_forums','block_search_forums.php',26],['lib/classes/event','user_enrolment_created.php',44],['admin/tool/xmldb/actions/generate_all_documentation','generate_all_documentation.class.php',33],['lib/classes/event','course_module_created.php',48],['lib/classes/event','webservice_service_user_removed.php',77],['report/log/classes/event','report_viewed.php',48],['mod/assign/submission/file/classes/event','assessable_uploaded.php',113],['mod/imscp/classes/event','course_module_viewed.php',40],['lib/classes/event','group_member_added.php',96],['mod/forum/classes/event','discussion_viewed.php',39],['mod/assign/classes/event','submission_viewed.php',67],['mod/lti/classes/event','course_module_viewed.php',39],['mod/workshop/classes/event','submission_reassessed.php',46],['mod/feedback/classes/event','course_module_viewed.php',44],['admin/tool/xmldb/actions/load_xml_file','load_xml_file.class.php',32],['admin/tool/log/store/database/classes/log','store.php',62],['mod/workshop/classes/event','assessment_evaluations_reset.php',45],['mod/assign/classes/event','statement_accepted.php',86],['mod/assign/classes/event','feedback_viewed.php',67],['admin/tool/xmldb/actions/edit_field_save','edit_field_save.class.php',33],['mod/forum/classes/event','discussion_moved.php',45],['lib/classes/event','competency_user_evidence_deleted.php',82],['mod/assign/classes/event','batch_set_workflow_state_viewed.php',71],['mod/lesson/classes/event','lesson_resumed.php',39],['lib/editor/tinymce/tiny_mce/3.5.11/themes/advanced/js','color_picker.js',63],['blocks/navigation','block_navigation.php',55],['blocks/comments','block_comments.php',32],['lib/classes/event','comments_viewed.php',41],['mod/data/classes/event','template_viewed.php',45],['mod/wiki/classes/event','page_deleted.php',43],['mod/quiz/classes/event','report_viewed.php',46],['admin/tool/xmldb/actions/save_xml_file','save_xml_file.class.php',37],['admin/tool/xmldb/actions','XMLDBCheckAction.class.php',38],['mod/workshop/allocation','lib.php',40],['admin/tool/xmldb/actions/edit_table','edit_table.class.php',36],['mod/scorm/classes/event','sco_launched.php',45],['mod/glossary/classes/event','entry_updated.php',43],['mod/lesson/classes/event','user_override_created.php',44],['mod/glossary/classes/event','category_updated.php',37],['lib/classes/event','course_updated.php',49],['mod/feedback/classes/event','response_submitted.php',48],['lib/classes/event','blog_entry_deleted.php',43],['mod/book/classes/event','chapter_deleted.php',97],['report/completion/classes/event','report_viewed.php',39],['lib/classes/event','recent_activity_viewed.php',39],['mod/quiz/classes/event','question_manually_graded.php',46],['mod/assign/classes/event','submission_status_updated.php',88],['lib/classes/event','user_enrolment_updated.php',44],['admin/tool/xmldb/actions/delete_key','delete_key.class.php',32],['admin/tool/log/classes/log','manager.php',39],['lib/google/src/Google/Service','Spectrum.php',131],['lib/classes/event','tag_deleted.php',46],['report/completion/classes/event','user_report_viewed.php',39],['report/stats/classes/event','report_viewed.php',46],['lib/classes/event','calendar_event_created.php',47],['mod/survey/classes/event','course_module_viewed.php',45],['blocks/badges','block_badges.php',35],['mod/assign/classes/event','submission_duplicated.php',86],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/advlink/js','advlink.js',22],['lib/classes/event','competency_framework_deleted.php',82],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/xhtmlxtras/js','abbr.js',1],['lib/classes/event','course_section_updated.php',45],['lib/classes/event','message_sent.php',74],['lib/classes/event','calendar_subscription_deleted.php',45],['blocks/blog_recent','block_blog_recent.php',33],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/xhtmlxtras/js','ins.js',1],['lib/classes/event','course_category_updated.php',42],['admin/tool/xmldb/actions/create_xml_file','create_xml_file.class.php',31],['lib/classes/event','user_password_updated.php',62],['mod/forum/classes/event','subscription_deleted.php',44],['mod/assign/classes/event','reveal_identities_confirmation_page_viewed.php',71],['lib/classes/event','user_loggedinas.php',46],['lib/classes/event','competency_template_created.php',90],['blocks/selfcompletion','block_selfcompletion.php',37],['lib/classes/event','user_created.php',39],['blocks/community','block_community.php',28],['admin/tool/recyclebin/classes/event','category_bin_item_restored.php',38],['report/loglive/classes/event','report_viewed.php',38],['admin/tool/monitor/classes/event','subscription_created.php',39],['lib/classes/session','memcached.php',118],['mod/book/classes/event','chapter_viewed.php',97],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/xhtmlxtras/js','acronym.js',1],['lib/classes/event','badge_awarded.php',45],['lib/classes/event','calendar_subscription_created.php',46],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/table/js','cell.js',5],['lib/classes/event','enrol_instance_created.php',87],['mod/folder/classes/event','course_module_viewed.php',39],['lib/classes/event','user_list_viewed.php',47],['mod/forum/classes/event','post_deleted.php',46],['mod/quiz/classes/event','group_override_deleted.php',45],['lib/classes/event','badge_created.php',38],['blocks/recent_activity','block_recent_activity.php',43],['lib/classes/event','competency_framework_viewed.php',87],['lib/classes/event','tag_collection_deleted.php',39],['mod/glossary/classes/event','course_module_viewed.php',44],['admin/tool/xmldb/actions/edit_xml_file','edit_xml_file.class.php',35],['lib/classes/event','group_member_removed.php',87],['lib/classes/event','grade_report_viewed.php',42],['mod/scorm/classes/event','course_module_viewed.php',38],['lib/classes/event','calendar_event_updated.php',47],['lib/classes/event','user_updated.php',39],['mod/lesson/classes/event','page_created.php',45],['grade/report/singleview/classes/local/screen','select.php',41],['lib/classes/event','assessable_uploaded.php',53],['grade/report/singleview/classes/local/screen','user.php',94],['mod/assign/classes/event','submission_form_viewed.php',74],['mod/url/classes/event','course_module_viewed.php',39],['auth/cas/CAS/CAS/PGTStorage','Db.php',174],['lib/adodb/drivers','adodb-oci8.inc.php',1564],['lib/classes/session','database.php',65],['question/classes/bank/search','category_condition.php',79],['lib/classes/event','course_completion_updated.php',39],['lib/classes/event','competency_plan_review_started.php',93],['lib/classes/event','course_user_report_viewed.php',46],['mod/folder/classes/event','all_files_downloaded.php',39],['mod/workshop/classes/event','assessments_reset.php',44],['mod/data/classes/event','template_updated.php',46],['mod/assign/classes/event','identities_revealed.php',84],['question/classes/bank','copy_action_column.php',30],['admin/tool/log/store/legacy/classes/event','legacy_logged.php',31],['lib/classes/event','notes_viewed.php',41],['admin/tool/recyclebin/classes/event','category_bin_item_created.php',38],['lib/classes/event','competency_plan_viewed.php',90],['mod/data/classes/event','record_updated.php',45],['lib/classes/event','competency_plan_unapproved.php',93],['mod/lesson/classes/event','content_page_viewed.php',39],['admin/tool/monitor/classes/event','subscription_deleted.php',39],['mod/assign/classes/event','assessable_submitted.php',118],['grade/report/singleview/classes/local/screen','grade.php',126],['admin/tool/xmldb/actions/move_updown_field','move_updown_field.class.php',32],['mod/quiz/classes/event','attempt_started.php',43],['blocks/tag_youtube','block_tag_youtube.php',34],['lib/editor/atto/yui/src/rangy/js','rangy-core.js',242],['mod/wiki/classes/event','course_module_viewed.php',38],['lib/classes/event','competency_user_competency_rated.php',100],['mod/forum/classes/event','post_updated.php',46],['admin/tool/xmldb/actions/edit_table_save','edit_table_save.class.php',32],['lib/classes/event','course_module_deleted.php',47],['lib/classes/event','competency_plan_review_requested.php',93],['lib/classes/event','user_graded.php',85],['lib/classes/event','webservice_login_failed.php',80],['blocks/course_summary','block_course_summary.php',32],['mod/forum/classes/event','post_created.php',46],['mod/assign/classes/event','submission_status_viewed.php',71],['mod/scorm/classes/event','cmielement_submitted.php',46],['lib/classes/event','enrol_instance_updated.php',88],['admin/tool/capability/classes/event','report_viewed.php',36],['mod/data/classes/event','field_created.php',47],['admin/tool/xmldb/actions/edit_index','edit_index.class.php',32],['mod/folder/classes/event','folder_updated.php',39],['lib/classes/event','badge_updated.php',38],['lib/tests/fixtures','event_fixtures.php',42],['lib/tests/fixtures','event_fixtures.php',117],['lib/tests/fixtures','event_fixtures.php',124],['lib/tests/fixtures','event_fixtures.php',131],['lib/tests/fixtures','event_fixtures.php',139],['lib/tests/fixtures','event_fixtures.php',147],['lib/tests/fixtures','event_fixtures.php',155],['lib/tests/fixtures','event_fixtures.php',162],['lib/tests/fixtures','event_fixtures.php',170],['lib/tests/fixtures','event_fixtures.php',178],['lib/tests/fixtures','event_fixtures.php',186],['lib/tests/fixtures','event_fixtures.php',193],['lib/tests/fixtures','event_fixtures.php',201],['lib/tests/fixtures','event_fixtures.php',216],['lib/tests/fixtures','event_fixtures.php',225],['lib/tests/fixtures','event_fixtures.php',238],['lib/tests/fixtures','event_fixtures.php',267],['lib/tests/fixtures','event_fixtures.php',304],['lib/tests/fixtures','event_fixtures.php',315],['lib/tests/fixtures','event_fixtures.php',338],['lib/tests/fixtures','event_fixtures.php',345],['mod/lesson/classes/event','course_module_viewed.php',40],['admin/tool/xmldb/actions/edit_field','edit_field.class.php',32],['admin/tool/xmldb/actions/move_updown_key','move_updown_key.class.php',32],['lib','graphlib.php',158],['mod/survey/classes/event','report_viewed.php',46],['grade/report/singleview/tests/fixtures','screen.php',38],['blocks/tags','block_tags.php',26],['mod/quiz/classes/event','attempt_deleted.php',44],['blocks/participants','block_participants.php',26],['mod/glossary/classes/event','entry_approved.php',37],['mod/wiki/classes/event','comments_viewed.php',38],['mod/wiki/classes/event','page_viewed.php',46],['mod/assign/submission/onlinetext/classes/event','submission_updated.php',45],['mod/forum/classes/event','readtracking_disabled.php',44],['mod/assign/submission/file/classes/event','submission_created.php',45],['admin/tool/langimport/classes/event','langpack_imported.php',61],['lib/classes/event','competency_plan_review_stopped.php',93],['admin/tool/langimport/classes/event','langpack_updated.php',61],['blocks/online_users','block_online_users.php',33],['admin/tool/xmldb/actions/load_xml_files','load_xml_files.class.php',32],['lib/classes/event','unknown_logged.php',39],['lib/classes/event','competency_user_competency_viewed_in_plan.php',104],['lib/classes/event','competency_user_competency_viewed_in_course.php',103],['mod/glossary/classes/event','category_created.php',37],['lib/portfolio','plugin.php',476],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/xhtmlxtras/js','cite.js',1],['mnet','environment.php',20],['blocks/login','block_login.php',26],['report/stats/classes/event','user_report_viewed.php',38],['lib/classes/event','dashboards_reset.php',40],['lib/classes/event','calendar_subscription_updated.php',46],['lib/classes/event','cohort_updated.php',38],['admin/tool/monitor/classes/event','rule_updated.php',39],['mod/lesson/classes/event','page_deleted.php',45],['lib/classes/event','course_section_deleted.php',46],['admin/tool/monitor/classes/event','subscription_criteria_met.php',45],['admin/tool/xmldb/actions/new_table','new_table.class.php',32],['lib/classes/event','mnet_access_control_created.php',48],['mod/forum/classes/event','discussion_created.php',44],['lib/classes/event','blog_entries_viewed.php',53],['mod/quiz/classes/event','attempt_preview_started.php',45],['lib/classes/event','content_viewed.php',56],['lib/classes/event','competency_user_evidence_updated.php',91],['blocks/activity_results','block_activity_results.php',51],['blocks/calendar_month','block_calendar_month.php',26],['backup/util/xml/output','memory_xml_output.class.php',51],['mod/assign/classes/event','submission_graded.php',87],['admin/tool/xmldb/actions/view_reserved_words','view_reserved_words.class.php',35],['mod/assign/classes/event','all_submissions_downloaded.php',84],['lib/classes/event','course_restored.php',49],['auth/cas/CAS/CAS/PGTStorage','AbstractStorage.php',173],['lib/classes/event','group_created.php',83],['lib/classes/event','badge_criteria_deleted.php',43],['lib/classes/event','tag_flagged.php',46],['lib/classes/event','competency_plan_completed.php',93],['mod/lesson/classes/event','user_override_updated.php',45],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/fullpage/js','fullpage.js',162],['lib/classes/event','role_allow_override_updated.php',39],['admin/tool/xmldb/actions/check_foreign_keys','check_foreign_keys.class.php',38],['mod/forum/classes/event','discussion_subscription_deleted.php',45],['lib/classes/event','cohort_deleted.php',38],['blocks/course_list','block_course_list.php',29],['lib/classes/event','badge_criteria_created.php',43],['blocks/messages','block_messages.php',26],['mod/workshop/classes/event','course_module_viewed.php',42],['admin/tool/xmldb/actions/view_xml','view_xml.class.php',32],['lib/classes/event','blog_entry_created.php',44],['blocks/rss_client','block_rss_client.php',36],['mod/scorm/classes/event','interactions_viewed.php',45],['mod/workshop/classes/event','submission_assessed.php',45],['lib/classes/event','badge_duplicated.php',38],['lib/classes/event','course_category_created.php',39],['lib/classes/event','cohort_created.php',38],['lib/classes/event','tag_removed.php',49],['lib/classes/event','competency_plan_approved.php',93],['mod/choice/classes/event','answer_deleted.php',74],['lib/classes/event','competency_user_competency_review_started.php',90],['lib/classes/event','course_reset_ended.php',71],['mod/quiz/classes/event','user_override_created.php',44],['admin/tool/xmldb/actions','XMLDBAction.class.php',63],['mod/forum/classes/event','course_searched.php',45],['lib/classes/event','message_contact_removed.php',39],['admin/tool/monitor/classes/event','rule_deleted.php',39],['lib/classes/event','message_deleted.php',83],['mod/assign/classes/event','submission_unlocked.php',87],['lib/classes/event','competency_user_competency_review_stopped.php',90],['lib/classes/event','course_module_viewed.php',40],['question/classes/bank','delete_action_column.php',30]], 470],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'get_record_sql': ['get_record_sql', 'Get a single database record as an object using a SQL statement. ', [['lib/dml','oci_native_moodle_database.php',1076],['lib/dml','moodle_database.php',1506]], 157],
'is_locked': ['is_locked', 'Returns the locked state of this grade_item (if the grade_item is locked OR no specific $userid is given) or the locked state of a specific grade within this item if a specific $userid is given and the grade_item is unlocked. ', [['lib/grade','grade_item.php',518],['lib/grade','grade_category.php',2484],['user/profile','lib.php',364],['lib/grade','grade_grade.php',265],['lib','badgeslib.php',337],['backup/util/settings','setting_dependency.class.php',187],['backup/util/settings','setting_dependency.class.php',340],['backup/util/settings','setting_dependency.class.php',534],['backup/util/settings','setting_dependency.class.php',598]], 57],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'cleanup_import': ['cleanup_import', 'Clean up failed CSV grade import. Clears the temp table for inserting grades. ', [['grade/import/csv/classes','load_data.php',333]], 12],
'get_error': ['get_error', 'This function returns the errorstring ', [['lib','componentlib.class.php',559],['lib','csvlib.class.php',268],['lib','mathslib.php',112],['grade/import/csv/classes','load_data.php',602],['mod/assign','assignmentplugin.php',130]], 35],
'get_headers': ['get_headers', '', [['mod/lti','OAuth.php',753],['grade/import/csv/classes','load_data.php',593],['enrol/lti/ims-blti','OAuth.php',720]], 11],
'get_user': ['get_user', 'Returns user data checking the internal static cache. ', [['search/classes','engine.php',119],['lib/classes','user.php',55]], 53],
'create_feedback': ['create_feedback', 'Check to see if the feedback matches a grade item. ', [['grade/import/csv/classes','load_data.php',244]], 2],
'clean_param': ['clean_param', 'Used by {@link optional_param()} and {@link required_param()} to clean the variables and/or cast to specific types, based on an options field. <code> $course->format = clean_param($course->format, PARAM_ALPHA); $selectedgradeitem = clean_param($selectedgradeitem, PARAM_INT); </code> ', [['lib','moodlelib.php',769]], 635],
'get_name': ['get_name', 'Return localised event name. ', [['lib/classes/event','competency_plan_unlinked.php',72],['admin/tool/langimport/classes/task','update_langpacks_task.php',35],['lib/simplepie/library/SimplePie','Author.php',106],['portfolio/download','lib.php',10],['backup/util/structure','restore_path_element.class.php',98],['lib/classes/message/inbound','private_files_handler.php',56],['lib/classes/event','grouping_group_assigned.php',48],['calendar/tests','calendartype_test_example.php',32],['lib/classes/event','enrol_instance_deleted.php',70],['report/log/classes/event','user_report_viewed.php',54],['lib/classes/task','blog_cron_task.php',31],['mod/quiz/classes/event','attempt_reviewed.php',53],['lib/classes/event','tag_unflagged.php',55],['lib/classes/task','send_new_user_passwords_task.php',31],['lib/classes/event','role_unassigned.php',53],['mod/assign/classes/event','grading_form_viewed.php',82],['question/classes/bank','edit_action_column.php',35],['admin/tool/log/store/standard/classes/task','cleanup_task.php',31],['mod/workshop/classes/event','submission_deleted.php',63],['mod/forum/classes/event','discussion_updated.php',65],['lib/classes/event','course_module_instance_list_viewed.php',75],['lib/classes/event','course_created.php',55],['lib/dml','pdo_moodle_database.php',113],['mod/assign/classes/event','extension_granted.php',77],['lib/classes/task','tag_cron_task.php',33],['enrol/imsenterprise/classes/task','cron_task.php',34],['lib/classes/event','course_deleted.php',56],['lib/classes/task','completion_daily_task.php',33],['mod/forum/classes/event','readtracking_enabled.php',64],['mod/wiki/classes/event','page_created.php',48],['lib/dml','oci_native_moodle_database.php',94],['lib/classes/event','competency_viewed.php',70],['mod/choice/classes/event','answer_updated.php',72],['lib/classes/event','search_indexed.php',47],['lib/classes/event','badge_criteria_updated.php',53],['question/classes/bank','question_type_column.php',26],['mod/wiki/classes/event','page_version_deleted.php',54],['lib/grade','grade_item.php',1384],['lib/classes/event','competency_user_competency_rated_in_plan.php',88],['lib/classes/event','webservice_token_sent.php',56],['mod/glossary/classes/event','entry_deleted.php',54],['admin/tool/messageinbound/classes/message/inbound','invalid_recipient_handler.php',60],['lib/classes/event','competency_template_viewed.php',63],['lib/classes/task','context_cleanup_task.php',32],['mod/assign/tests/fixtures','event_mod_assign_fixtures.php',62],['admin/tool/langimport/classes/event','langpack_removed.php',89],['mod/glossary/classes/event','category_deleted.php',46],['mod/forum/classes/message/inbound','reply_handler.php',51],['competency/classes','competency_rule.php',84],['mod/lti/classes/event','unknown_service_api_called.php',82],['lib/classes/event','badge_deleted.php',49],['mod/quiz/classes/event','user_override_updated.php',54],['lib/classes/event','message_contact_added.php',48],['lib/classes/event','cohort_member_added.php',49],['backup/util/ui','restore_ui.class.php',351],['lib/classes/event','blog_entry_updated.php',74],['mod/assign/classes/event','workflow_state_updated.php',88],['mod/forum/classes/event','assessable_uploaded.php',86],['mod/assign/classes/event','submission_created.php',57],['lib/classes/event','group_deleted.php',65],['lib/classes/event','role_allow_assign_updated.php',47],['mod/lesson/classes/event','highscore_added.php',59],['mod/forum/classes/event','discussion_pinned.php',55],['lib/classes/event','webservice_function_called.php',67],['lib/classes/event','competency_plan_reopened.php',75],['mod/lesson/classes/event','essay_attempt_viewed.php',48],['mod/wiki/classes/event','page_locks_deleted.php',54],['lib/classes/event','webservice_service_deleted.php',59],['mod/forum/classes/event','discussion_subscription_created.php',66],['admin/tool/log/store/database/tests/fixtures','event.php',31],['mod/workshop/classes/event','assessable_uploaded.php',93],['lib','csslib.php',2155],['lib','csslib.php',2283],['lib/classes/event','user_loggedout.php',54],['lib/classes/event','webservice_token_created.php',65],['lib/classes/event','tag_collection_updated.php',65],['competency/classes','competency_rule_all.php',84],['backup/util/settings','base_setting.class.php',145],['mod/data/classes/event','field_deleted.php',57],['mod/book/classes/event','chapter_created.php',79],['lib/classes/event','email_failed.php',56],['lib/classes/task','stats_cron_task.php',31],['mod/survey/classes/event','report_downloaded.php',55],['mod/workshop/classes/event','phase_switched.php',75],['lib/grade','grade_category.php',2300],['lib/grade','grade_scale.php',156],['lib/classes/event','course_reset_started.php',53],['mod/workshop/classes/event','assessment_evaluated.php',66],['lib/classes/event','blog_association_created.php',56],['backup/converter','convertlib.php',109],['report/outline/classes/event','activity_report_viewed.php',48],['lib/classes/task','legacy_plugin_cron_task.php',33],['lib/classes/event','competency_plan_updated.php',75],['mod/choice/classes/event','answer_submitted.php',72],['mod/lesson/classes/event','lesson_ended.php',49],['lib/classes/event','role_allow_switch_updated.php',47],['lib/classes/task','portfolio_cron_task.php',31],['lib/classes/event','competency_user_competency_rated_in_course.php',88],['question/classes/bank','question_text_row.php',35],['lib/classes/event','tag_created.php',75],['report/participation/classes/event','report_viewed.php',58],['lib/classes/event','role_capabilities_updated.php',51],['mod/survey/classes/event','response_submitted.php',53],['lib/classes/event','badge_archived.php',47],['mod/workshop/classes/event','assessment_reevaluated.php',76],['mod/assign/classes/event','submission_locked.php',78],['report/outline/classes/event','report_viewed.php',54],['lib/classes/event','user_deleted.php',57],['lib/classes/event','mnet_access_control_updated.php',57],['mod/lesson/classes/event','essay_assessed.php',78],['mod/book/tool/print/classes/event','book_printed.php',76],['lib/classes/event','grouping_deleted.php',72],['admin/tool/monitor/classes','rule.php',239],['lib/classes/event','course_viewed.php',75],['mod/forum/classes/event','user_report_viewed.php',65],['user/selector','lib.php',309],['mod/quiz/classes/event','attempt_summary_viewed.php',56],['lib/classes/event','webservice_service_user_added.php',59],['mod/forum/classes/event','discussion_unpinned.php',55],['lib/classes/event','grouping_group_unassigned.php',48],['lib/grade','grade_outcome.php',272],['mod/chat/classes/event','message_sent.php',59],['lib/classes/event','role_assigned.php',56],['mod/quiz/classes/question/bank','question_name_text_column.php',37],['question/classes/bank','modifier_name_column.php',27],['mod/glossary/classes/event','entry_viewed.php',48],['mod/data/classes/event','record_created.php',56],['lib/classes/event','course_category_deleted.php',59],['lib/dml','mariadb_native_moodle_database.php',41],['lib/classes/event','role_deleted.php',55],['lib/classes/task','question_cron_task.php',31],['portfolio/flickr','lib.php',41],['lib/classes/task','cache_cron_task.php',31],['mod/wiki/classes/event','page_version_viewed.php',54],['admin/tool/recyclebin/classes/event','category_bin_item_deleted.php',47],['admin/tool/log/store/standard/tests/fixtures','event.php',31],['mod/scorm/classes/event','status_submitted.php',46],['admin/tool/monitor/classes/event','rule_created.php',50],['admin/tool/log/store/legacy/classes/task','cleanup_task.php',31],['question/classes/bank','checkbox_column.php',32],['lib/classes/event','competency_user_competency_plan_viewed.php',81],['mod/assign/feedback/offline','locallib.php',42],['admin/tool/messageinbound/classes/task','cleanup_task.php',38],['mod/workshop/classes/event','submission_updated.php',63],['lib/editor/atto/classes/task','autosave_cleanup_task.php',33],['mod/choice/classes/event','report_viewed.php',53],['mod/lesson/classes/event','group_override_deleted.php',54],['mod/wiki/classes/event','page_map_viewed.php',54],['admin/tool/log/store/legacy/tests/fixtures','event.php',31],['mod/lesson/classes/event','question_answered.php',54],['mod/choice/classes/event','report_downloaded.php',54],['admin/tool/recyclebin/classes/task','cleanup_category_bin.php',36],['backup/util/ui','backup_ui_setting.class.php',86],['lib/classes/event','competency_user_evidence_created.php',64],['lib/classes/event','course_module_completion_updated.php',54],['repository/coursefiles','lib.php',183],['lib/classes/event','note_updated.php',56],['lib/classes/event','note_created.php',56],['lib/classes/event','competency_framework_created.php',63],['lib/classes/event','course_resources_list_viewed.php',60],['lib/classes/event','tag_updated.php',58],['mod/forum/classes/event','subscribers_viewed.php',65],['mod/book/tool/exportimscp/classes/event','book_exported.php',76],['mod/quiz/classes/question/bank','add_action_column.php',45],['lib/classes/task','completion_regular_task.php',33],['lib/classes/event','user_enrolment_deleted.php',54],['grade/report/grader/classes/event','grade_report_viewed.php',39],['lib','enrollib.php',1076],['admin/tool/recyclebin/classes/event','course_bin_item_restored.php',47],['lib/classes/event','webservice_service_updated.php',59],['lib/editor/tinymce/classes','plugin.php',101],['mod/lesson/classes/event','group_override_created.php',55],['mod/scorm/classes/event','attempt_deleted.php',62],['lib/classes/event','competency_user_competency_review_request_cancelled.php',72],['lib/classes/event','webservice_service_created.php',65],['lib/classes/task','events_cron_task.php',31],['mod/wiki/classes/event','page_version_restored.php',54],['mod/forum/classes/event','discussion_deleted.php',66],['lib/classes/event','competency_framework_updated.php',73],['mod/lesson/classes/event','lesson_restarted.php',48],['mod/wiki/classes/event','page_updated.php',54],['mod/assign/classes/event','marker_updated.php',89],['lib','modinfolib.php',1270],['mod/assign/feedback/editpdf/classes/task','convert_submissions.php',38],['lib/classes/event','course_module_updated.php',57],['repository','lib.php',1834],['auth/cas/classes/task','sync_task.php',34],['lib/classes/event','competency_template_deleted.php',73],['mod/assign/classes/event','submission_confirmation_form_viewed.php',79],['lib/bennu','iCalendar_components.php',37],['report/questioninstances/classes/event','report_viewed.php',55],['admin/tool/recyclebin/classes/task','cleanup_course_bin.php',36],['lib/classes/event','message_contact_blocked.php',48],['lib/classes/event','competency_template_updated.php',75],['question/behaviour','behaviourbase.php',83],['grade/report/history/classes/event','grade_report_viewed.php',39],['lib/classes/event','badge_disabled.php',47],['mod/assign/classes/event','grading_table_viewed.php',79],['lib/classes/event','badge_enabled.php',47],['mod/lti','OAuth.php',122],['mod/lti','OAuth.php',149],['mod/lti','OAuth.php',173],['calendar/type/gregorian/classes','structure.php',29],['mod/quiz/classes/event','edit_page_viewed.php',53],['lib/simplepie/library/SimplePie','Credit.php',139],['mod/scorm/classes/event','tracks_viewed.php',64],['mod/wiki/classes/event','page_diff_viewed.php',55],['message/tests/fixtures','inbound_fixtures.php',41],['lib/classes/event','grouping_created.php',65],['lib/classes/event','calendar_event_deleted.php',58],['enrol/flatfile/classes/task','flatfile_sync_task.php',37],['lib/classes/event','group_updated.php',65],['lib/classes/task','registration_cron_task.php',31],['mod/book/classes/event','chapter_updated.php',79],['lib/classes/event','grade_deleted.php',94],['admin/tool/recyclebin/classes/event','course_bin_item_created.php',47],['lib/classes/event','user_loggedin.php',64],['lib/classes/task','check_for_updates_task.php',31],['grade/report/singleview/classes/local/ui','grade_attribute_format.php',56],['mod/assign/submission/file','locallib.php',44],['mod/forum/classes/task','cron_task.php',30],['mod/forum/classes/event','subscription_created.php',65],['lib/classes/event','tag_collection_created.php',65],['grade/report/overview/classes/event','grade_report_viewed.php',48],['mod/assign/classes/event','batch_set_marker_allocation_viewed.php',79],['mod/quiz/classes/event','group_override_updated.php',54],['lib/classes/event','competency_plan_created.php',63],['mod/glossary/classes/event','entry_disapproved.php',46],['lib/classes/task','send_failed_login_notifications_task.php',34],['enrol/lti/classes/task','sync_grades.php',36],['lib/classes/event','message_viewed.php',54],['portfolio/boxnet','lib.php',14],['lib/classes/event','comment_created.php',58],['question/classes/bank','preview_action_column.php',26],['lib/classes/event','course_content_deleted.php',54],['lib/dml','pgsql_native_moodle_database.php',87],['mod/feedback/classes/event','response_deleted.php',83],['lib/classes/event','competency_evidence_created.php',98],['lib/classes/event','comment_deleted.php',58],['lib/classes/event','competency_user_competency_review_requested.php',72],['mod/quiz/classes/event','attempt_abandoned.php',63],['mod/scorm/classes/event','user_report_viewed.php',62],['lib/dml','mssql_native_moodle_database.php',88],['mod/quiz/classes/event','attempt_becameoverdue.php',66],['mod/quiz/classes/event','group_override_created.php',55],['lib/dml','mysqli_native_moodle_database.php',352],['backup/util/ui','backup_ui.class.php',194],['mod/book/tool/print/classes/event','chapter_printed.php',79],['mod/data/classes/event','record_deleted.php',56],['competency/classes','competency_rule_points.php',185],['lib/classes/event','competency_user_competency_viewed.php',81],['lib/classes/event','dashboard_viewed.php',59],['mod/lesson/classes/event','question_viewed.php',54],['lib/classes/event','user_profile_viewed.php',56],['lib','medialib.php',345],['admin/tool/monitor/classes/task','clean_events.php',32],['mod/lesson/classes/event','user_override_deleted.php',53],['lib/classes/event','cohort_member_removed.php',50],['mod/lesson/classes/event','lesson_started.php',48],['mod/lesson/classes/event','page_updated.php',73],['mod/workshop/classes/event','submission_viewed.php',63],['question/classes/bank','question_name_column.php',28],['lib/classes/event','competency_deleted.php',87],['admin/tool/monitor/classes','subscription.php',132],['lib/classes/task','grade_cron_task.php',31],['mod/glossary/classes/event','entry_created.php',52],['lib/classes/task','file_temp_cleanup_task.php',31],['lib/classes/event','dashboard_reset.php',60],['backup/util/structure','base_atom.class.php',71],['portfolio/googledocs','lib.php',54],['mod/assign/feedback/comments','locallib.php',36],['mod/wiki/classes/event','page_history_viewed.php',48],['lib/classes/event','competency_plan_review_request_cancelled.php',75],['lib/classes/event','competency_plan_deleted.php',73],['mod/quiz/classes/event','attempt_viewed.php',54],['mod/data/classes/event','field_updated.php',57],['lib/classes/event','grouping_updated.php',65],['cache/classes','definition.php',621],['lib/classes/task','plagiarism_cron_task.php',31],['backup/converter/moodle1','lib.php',1033],['lib/classes/event','question_category_created.php',48],['grade/report/user/classes/event','grade_report_viewed.php',48],['lib/classes/event','user_login_failed.php',56],['mod/scorm/classes/event','report_viewed.php',63],['mod/chat/classes/event','sessions_viewed.php',65],['admin/tool/recyclebin/classes/event','course_bin_item_deleted.php',47],['mod/quiz/classes/event','user_override_deleted.php',53],['portfolio/mahara','lib.php',61],['mod/quiz/classes/event','attempt_submitted.php',63],['grade/report/outcomes/classes/event','grade_report_viewed.php',39],['mod/lesson/classes/event','group_override_updated.php',54],['mod/workshop/classes/event','submission_created.php',63],['mod/assign/classes/event','submission_updated.php',57],['mod/assign/submission/onlinetext/classes/event','assessable_uploaded.php',83],['lib/classes/event','competency_updated.php',70],['lib/classes/event','note_deleted.php',56],['mod/lesson/classes/event','page_moved.php',56],['lib/classes/event','course_completed.php',73],['lib/classes/event','tag_added.php',58],['lib/classes/event','competency_created.php',70],['mod/lesson/classes/event','highscores_viewed.php',51],['lib/classes/event','message_contact_unblocked.php',48],['lib/classes/event','user_enrolment_created.php',53],['lib/classes/task','search_index_task.php',35],['lib/classes/event','course_module_created.php',86],['lib/classes/event','webservice_service_user_removed.php',59],['report/log/classes/event','report_viewed.php',58],['mod/assign/submission/file/classes/event','assessable_uploaded.php',85],['lib/classes/event','group_member_added.php',78],['mod/forum/classes/event','discussion_viewed.php',60],['mod/assign/classes/event','submission_viewed.php',76],['mod/lti/classes/local/ltiservice','service_base.php',87],['enrol/lti/classes/task','sync_members.php',46],['mod/workshop/classes/event','submission_reassessed.php',77],['lib/classes/task','session_cleanup_task.php',31],['lib/tests','messageinbound_test.php',166],['lib/classes/task','backup_cleanup_task.php',31],['mod/workshop/classes/event','assessment_evaluations_reset.php',75],['mod/scorm/classes/event','scoreraw_submitted.php',46],['mod/assign/classes/event','statement_accepted.php',77],['mod/assign/classes/event','feedback_viewed.php',76],['lib/classes/task','delete_unconfirmed_users_task.php',31],['mod/forum/classes/event','discussion_moved.php',66],['lib/classes/event','competency_user_evidence_deleted.php',64],['mod/assign/classes/event','batch_set_workflow_state_viewed.php',79],['mod/lesson/classes/event','lesson_resumed.php',48],['lib/classes/task','badges_cron_task.php',31],['lib/classes/event','comments_viewed.php',51],['mod/data/classes/event','template_viewed.php',55],['mod/wiki/classes/event','page_deleted.php',54],['mod/quiz/classes/event','report_viewed.php',56],['mod/scorm/classes/event','sco_launched.php',64],['mod/glossary/classes/event','entry_updated.php',52],['mod/lesson/classes/event','user_override_created.php',53],['mod/glossary/classes/event','category_updated.php',46],['lib/classes/event','course_updated.php',58],['grade/report/singleview/classes/event','grade_report_viewed.php',39],['mod/feedback/classes/event','response_submitted.php',83],['lib/classes/event','blog_entry_deleted.php',53],['mod/book/classes/event','chapter_deleted.php',79],['report/completion/classes/event','report_viewed.php',49],['lib/classes/event','recent_activity_viewed.php',49],['mod/quiz/classes/event','question_manually_graded.php',55],['mod/assign/classes/event','submission_status_updated.php',79],['lib/classes/event','user_enrolment_updated.php',53],['lib/classes/event','tag_deleted.php',55],['report/completion/classes/event','user_report_viewed.php',49],['report/stats/classes/event','report_viewed.php',56],['lib/classes/event','calendar_event_created.php',58],['mod/assign/classes/event','submission_duplicated.php',77],['lib/classes/event','competency_framework_deleted.php',73],['lib/classes/event','course_section_updated.php',56],['lib/classes/event','message_sent.php',82],['lib/classes/event','calendar_subscription_deleted.php',56],['lib/classes/event','course_category_updated.php',51],['lib/classes/event','user_password_updated.php',70],['enrol/lti/ims-blti','OAuth.php',65],['enrol/lti/ims-blti','OAuth.php',92],['enrol/lti/ims-blti','OAuth.php',116],['mod/forum/classes/event','subscription_deleted.php',65],['mod/assign/classes/event','reveal_identities_confirmation_page_viewed.php',79],['lib/classes/event','user_loggedinas.php',57],['lib/classes/event','competency_template_created.php',63],['lib/classes/event','user_created.php',48],['admin/tool/recyclebin/classes/event','category_bin_item_restored.php',47],['report/loglive/classes/event','report_viewed.php',48],['admin/tool/monitor/classes/event','subscription_created.php',50],['mod/book/classes/event','chapter_viewed.php',79],['lib/classes/event','badge_awarded.php',54],['lib/classes/event','calendar_subscription_created.php',57],['lib/classes/event','enrol_instance_created.php',69],['lib/classes/event','user_list_viewed.php',56],['lib/classes/task','calendar_cron_task.php',31],['mod/forum/classes/event','post_deleted.php',67],['mod/quiz/classes/event','group_override_deleted.php',54],['lib/classes/event','badge_created.php',47],['backup/util/plan','base_plan.class.php',50],['lib/classes/event','base.php',292],['lib/classes/event','competency_framework_viewed.php',69],['lib/classes/event','tag_collection_deleted.php',65],['lib/classes/event','group_member_removed.php',69],['lib/classes/event','grade_report_viewed.php',54],['lib/classes/event','calendar_event_updated.php',58],['mod/assign/submission/onlinetext','locallib.php',40],['lib/classes/event','user_updated.php',48],['mod/lesson/classes/event','page_created.php',54],['backup/util/ui','base_ui_stage.class.php',110],['mod/assign/classes/event','submission_form_viewed.php',82],['auth/ldap/classes/task','sync_task.php',34],['lib/classes/event','course_completion_updated.php',47],['lib/classes/event','competency_plan_review_started.php',75],['lib/classes/event','course_user_report_viewed.php',66],['mod/folder/classes/event','all_files_downloaded.php',60],['mod/workshop/classes/event','assessments_reset.php',74],['lib/tests/fixtures','task_fixtures.php',35],['lib/tests/fixtures','task_fixtures.php',44],['lib/tests/fixtures','task_fixtures.php',53],['mod/data/classes/event','template_updated.php',56],['mod/assign/classes/event','identities_revealed.php',75],['question/classes/bank','copy_action_column.php',35],['admin/tool/log/store/legacy/classes/event','legacy_logged.php',35],['lib/classes/event','notes_viewed.php',49],['admin/tool/recyclebin/classes/event','category_bin_item_created.php',47],['lib/classes/event','competency_plan_viewed.php',63],['mod/data/classes/event','record_updated.php',56],['mod/assign/feedback/file','locallib.php',45],['lib/classes/event','competency_plan_unapproved.php',75],['mod/lesson/classes/event','content_page_viewed.php',48],['mod/assign/feedback/editpdf','locallib.php',43],['lib/dml','sqlsrv_native_moodle_database.php',108],['admin/tool/monitor/classes/event','subscription_deleted.php',50],['mod/assign/classes/event','assessable_submitted.php',109],['mod/quiz/classes/event','attempt_started.php',62],['lib/classes/task','create_contexts_task.php',31],['lib/classes/task','file_trash_cleanup_task.php',31],['lib/classes/event','competency_user_competency_rated.php',82],['mod/forum/classes/event','post_updated.php',67],['admin/tool/cohortroles/classes/task','cohort_role_sync.php',37],['lib/classes/event','course_module_deleted.php',56],['mod/assign/submission/comments','locallib.php',39],['lib/classes/event','competency_plan_review_requested.php',75],['lib/classes/event','user_graded.php',96],['lib/classes/event','webservice_login_failed.php',71],['mod/forum/classes/event','post_created.php',67],['lib/classes/task','complete_plans_task.php',43],['mod/assign/classes/event','submission_status_viewed.php',81],['lib/classes/event','enrol_instance_updated.php',70],['lib/classes/task','messaging_cleanup_task.php',31],['portfolio/picasa','lib.php',33],['admin/tool/capability/classes/event','report_viewed.php',47],['grade/report/singleview/classes/local/ui','unique_name.php',38],['mod/data/classes/event','field_created.php',58],['mod/folder/classes/event','folder_updated.php',48],['lib/classes/event','badge_updated.php',47],['lib/tests/fixtures','event_fixtures.php',34],['lib/classes/task','cache_cleanup_task.php',31],['mod/survey/classes/event','report_viewed.php',55],['mod/quiz/classes/event','attempt_deleted.php',53],['mod/glossary/classes/event','entry_approved.php',46],['mod/wiki/classes/event','page_viewed.php',57],['lib/classes/log','reader.php',30],['lib/classes/task','password_reset_cleanup_task.php',31],['mod/forum/classes/event','readtracking_disabled.php',64],['admin/tool/langimport/classes/event','langpack_imported.php',80],['lib/classes/event','competency_plan_review_stopped.php',75],['admin/tool/langimport/classes/event','langpack_updated.php',80],['lib/classes/event','unknown_logged.php',43],['lib/classes/event','competency_user_competency_viewed_in_plan.php',85],['lib/classes/event','competency_user_competency_viewed_in_course.php',84],['lib/classes/task','search_optimize_task.php',38],['mod/glossary/classes/event','category_created.php',46],['lib/portfolio','plugin.php',120],['report/stats/classes/event','user_report_viewed.php',48],['lib/classes/event','dashboards_reset.php',59],['lib/classes/event','calendar_subscription_updated.php',57],['lib/classes/event','cohort_updated.php',49],['admin/tool/monitor/classes/event','rule_updated.php',50],['mod/lesson/classes/event','page_deleted.php',54],['lib/classes/event','course_section_deleted.php',57],['lib/classes/task','delete_incomplete_users_task.php',31],['lib/classes/task','automated_backup_task.php',31],['admin/tool/monitor/classes/event','subscription_criteria_met.php',55],['lib/classes/event','mnet_access_control_created.php',57],['admin/tool/messageinbound/classes/task','pickup_task.php',38],['mod/forum/classes/event','discussion_created.php',65],['question/classes/bank','creator_name_column.php',28],['lib/classes/event','blog_entries_viewed.php',62],['lib/classes/task','sync_plans_from_template_cohorts_task.php',41],['mod/quiz/classes/event','attempt_preview_started.php',54],['lib/classes/event','content_viewed.php',80],['lib/classes/event','competency_user_evidence_updated.php',64],['lib/dml/tests','dml_test.php',5530],['mod/assign/classes/event','submission_graded.php',78],['mod/assign/classes/event','all_submissions_downloaded.php',75],['lib/classes/event','course_restored.php',58],['lib/classes/event','group_created.php',65],['lib/classes/event','badge_criteria_deleted.php',52],['lib/classes/event','tag_flagged.php',55],['lib/classes/event','competency_plan_completed.php',75],['mod/lesson/classes/event','user_override_updated.php',54],['lib/classes/event','role_allow_override_updated.php',47],['mod/forum/classes/event','discussion_subscription_deleted.php',66],['lib/classes/event','cohort_deleted.php',49],['lib/classes/event','badge_criteria_created.php',52],['admin/tool/log/classes/helper','reader.php',41],['admin/tool/monitor/classes/task','check_subscriptions.php',50],['lib/classes/event','blog_entry_created.php',76],['mod/scorm/classes/event','interactions_viewed.php',63],['mod/workshop/classes/event','submission_assessed.php',76],['lib/classes/event','badge_duplicated.php',47],['backup/util/plan','base_step.class.php',49],['lib/classes/event','course_category_created.php',48],['lib/classes/event','cohort_created.php',49],['lib/classes/event','tag_removed.php',58],['lib/classes/event','competency_plan_approved.php',75],['mod/choice/classes/event','answer_deleted.php',56],['backup/util/ui','restore_ui_stage.class.php',75],['lib/classes/event','competency_user_competency_review_started.php',72],['lib/classes/event','course_reset_ended.php',53],['mod/quiz/classes/event','user_override_created.php',53],['mod/forum/classes/event','course_searched.php',66],['lib/classes/event','message_contact_removed.php',48],['admin/tool/monitor/classes/event','rule_deleted.php',50],['lib/classes/event','message_deleted.php',91],['mod/assign/classes/event','submission_unlocked.php',78],['lib/classes/event','competency_user_competency_review_stopped.php',72],['lib/classes/event','course_module_viewed.php',62],['backup/util/plan','base_task.class.php',58],['question/classes/bank','delete_action_column.php',36]], 469],
'prepare_import_grade_data': ['prepare_import_grade_data', 'Checks and prepares grade data for inserting into the gradebook. ', [['grade/import/csv/classes','load_data.php',412]], 9],
'check_user_exists': ['check_user_exists', 'Check that the user is in the system. ', [['grade/import/csv/classes','load_data.php',214]], 2],
'import_new_grade_item': ['import_new_grade_item', 'Insert the new grade into the grade item buffer table. ', [['grade/import/csv/classes','load_data.php',177]], 2],
'insert_grade_record': ['insert_grade_record', 'Inserts a record into the grade_import_values table. This also adds common record information. ', [['grade/import/csv/classes','load_data.php',149]], 3],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'defined': ['defined', '', [], 4731],
'array_unshift': ['array_unshift', '', [], 115],
'strtotime': ['strtotime', '', [], 245],
'next': ['next', '', [], 624],
'trim': ['trim', '', [], 1948],
'count': ['count', '', [], 4095],
'is_numeric': ['is_numeric', '', [], 672],
'time': ['time', '', [], 1959],
'array_search': ['array_search', '', [], 170],
'array_map': ['array_map', '', [], 169],
'explode': ['explode', '', [], 1572]};
CLASS_DATA={
'gradeimport_csv_load_data': ['gradeimport_csv_load_data', 'A class for loading and preparing grade data from import. ', [['grade/import/csv/classes','load_data.php',27]], 7],
'core_php_time_limit': ['core_php_time_limit', 'Utility class to manage PHP time limit. ', [['lib/classes','php_time_limit.php',27]], 92],
'grade_grade': ['grade_grade', 'grade_grades is an object mapped to DB table {prefix}grade_grades ', [['lib/grade','grade_grade.php',30]], 154],
'grade_item': ['grade_item', 'Class representing a grade item. ', [['lib/grade','grade_item.php',29]], 246],
'csv_import_reader': ['csv_import_reader', 'Utitily class for importing of CSV files. ', [['lib','csvlib.class.php',31]], 55],
'core_user': ['core_user', 'User class to access user details. ', [['lib/classes','user.php',27]], 457]};
CONST_DATA={
'PARAM_INT': ['PARAM_INT', '', [['lib','moodlelib.php',156]], 3812],
'GRADE_TYPE_SCALE': ['GRADE_TYPE_SCALE', '', [['lib/grade','constants.php',90]], 70],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153],
'PARAM_RAW': ['PARAM_RAW', '', [['lib','moodlelib.php',193]], 921],
'MEMORY_EXTRA': ['MEMORY_EXTRA', '', [['lib','setuplib.php',50]], 40]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
