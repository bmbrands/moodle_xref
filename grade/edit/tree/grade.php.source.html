<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /grade/edit/tree/grade.php source</title>
    <link rel="stylesheet" href="../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../';
subdir='grade/edit/tree';
filename='grade.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/grade/edit/tree/</a> -> <a href="grade.php.html">grade.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="grade.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="grade.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Edit a user's grade for a particular activity</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package   core_grades</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @copyright 2007 Petr Skoda</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> */</span>
<a name="l24"><span class="linenum">  24</span></a>  
<a name="l25"><span class="linenum">  25</span></a>  require_once '../../../config.php';
<a name="l26"><span class="linenum">  26</span></a>  require_once <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../../../grade/lib.php.html">/grade/lib.php</a>';
<a name="l27"><span class="linenum">  27</span></a>  require_once <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../../../grade/report/lib.php.html">/grade/report/lib.php</a>';
<a name="l28"><span class="linenum">  28</span></a>  <span class="keyword">require_once</span> <a class="filename" href="../../../grade/edit/tree/grade_form.php.html" onMouseOver="reqPopup(event, 'grade_form.php', '../../../grade/edit/tree/grade_form.php')"> 'grade_form.php'</a>;
<a name="l29"><span class="linenum">  29</span></a>  
<a name="l30"><span class="linenum">  30</span></a>  <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../_variables/courseid.html">$courseid</a> = <a class="function" onClick="logFunction('required_param')" href="../../../_functions/required_param.html" onMouseOver="funcPopup(event,'required_param')">required_param</a>('courseid', <a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l31"><span class="linenum">  31</span></a>  <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../_variables/id.html">$id</a>       = <a class="function" onClick="logFunction('optional_param')" href="../../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('id', 0, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l32"><span class="linenum">  32</span></a>  <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../../_variables/itemid.html">$itemid</a>   = <a class="function" onClick="logFunction('optional_param')" href="../../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('itemid', 0, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l33"><span class="linenum">  33</span></a>  <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../../_variables/userid.html">$userid</a>   = <a class="function" onClick="logFunction('optional_param')" href="../../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('userid', 0, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l34"><span class="linenum">  34</span></a>  
<a name="l35"><span class="linenum">  35</span></a>  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../../grade/edit/tree/grade.php.html">/grade/edit/tree/grade.php</a>', array('courseid'=&gt;<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../_variables/courseid.html">$courseid</a>));
<a name="l36"><span class="linenum">  36</span></a>  if (<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../_variables/id.html">$id</a> !== 0) {
<a name="l37"><span class="linenum">  37</span></a>      <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>-&gt;<a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('id', <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../_variables/id.html">$id</a>);
<a name="l38"><span class="linenum">  38</span></a>  }
<a name="l39"><span class="linenum">  39</span></a>  if (<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../../_variables/itemid.html">$itemid</a> !== 0) {
<a name="l40"><span class="linenum">  40</span></a>      <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>-&gt;<a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('itemid', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../../_variables/itemid.html">$itemid</a>);
<a name="l41"><span class="linenum">  41</span></a>  }
<a name="l42"><span class="linenum">  42</span></a>  if (<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../../_variables/userid.html">$userid</a> !== 0) {
<a name="l43"><span class="linenum">  43</span></a>      <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>-&gt;<a class="function" onClick="logFunction('param')" href="../../../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('userid', <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../../_variables/userid.html">$userid</a>);
<a name="l44"><span class="linenum">  44</span></a>  }
<a name="l45"><span class="linenum">  45</span></a>  <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_url')" href="../../../_functions/set_url.html" onMouseOver="funcPopup(event,'set_url')">set_url</a>(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../../_variables/url.html">$url</a>);
<a name="l46"><span class="linenum">  46</span></a>  
<a name="l47"><span class="linenum">  47</span></a>  if (!<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../../_variables/course.html">$course</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id' =&gt; <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../_variables/courseid.html">$courseid</a>))) {
<a name="l48"><span class="linenum">  48</span></a>      <a class="function" onClick="logFunction('print_error')" href="../../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('nocourseid');
<a name="l49"><span class="linenum">  49</span></a>  }
<a name="l50"><span class="linenum">  50</span></a>  
<a name="l51"><span class="linenum">  51</span></a>  <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_pagelayout')" href="../../../_functions/set_pagelayout.html" onMouseOver="funcPopup(event,'set_pagelayout')">set_pagelayout</a>('incourse');
<a name="l52"><span class="linenum">  52</span></a>  <a class="function" onClick="logFunction('require_login')" href="../../../_functions/require_login.html" onMouseOver="funcPopup(event,'require_login')">require_login</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../../_variables/course.html">$course</a>);
<a name="l53"><span class="linenum">  53</span></a>  <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../../../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>);
<a name="l54"><span class="linenum">  54</span></a>  if (!<a class="function" onClick="logFunction('has_capability')" href="../../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/grade:manage', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>)) {
<a name="l55"><span class="linenum">  55</span></a>      <a class="function" onClick="logFunction('require_capability')" href="../../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('moodle/grade:edit', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>);
<a name="l56"><span class="linenum">  56</span></a>  }
<a name="l57"><span class="linenum">  57</span></a>  
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment">// default return url</span>
<a name="l59"><span class="linenum">  59</span></a>  <a class="var it5768" onMouseOver="hilite(5768)" onMouseOut="lolite()" onClick="logVariable('gpr')" href="../../../_variables/gpr.html">$gpr</a> = <span class="keyword">new </span><a class="class" onClick="logClass('grade_plugin_return')" href="../../../_classes/grade_plugin_return.html" onMouseOver="classPopup(event,'grade_plugin_return')">grade_plugin_return</a>();
<a name="l60"><span class="linenum">  60</span></a>  <a class="var it1872" onMouseOver="hilite(1872)" onMouseOut="lolite()" onClick="logVariable('returnurl')" href="../../../_variables/returnurl.html">$returnurl</a> = <a class="var it5768" onMouseOver="hilite(5768)" onMouseOut="lolite()" onClick="logVariable('gpr')" href="../../../_variables/gpr.html">$gpr</a>-&gt;<a class="function" onClick="logFunction('get_return_url')" href="../../../_functions/get_return_url.html" onMouseOver="funcPopup(event,'get_return_url')">get_return_url</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/wwwroot.html">wwwroot</a>.'/grade/report/index.php?id='.<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>);
<a name="l61"><span class="linenum">  61</span></a>  
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment">// security checks!</span>
<a name="l63"><span class="linenum">  63</span></a>  if (!empty(<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../_variables/id.html">$id</a>)) {
<a name="l64"><span class="linenum">  64</span></a>      if (!<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('grade_grades', array('id' =&gt; <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../_variables/id.html">$id</a>))) {
<a name="l65"><span class="linenum">  65</span></a>          <a class="function" onClick="logFunction('print_error')" href="../../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('invalidgroupid');
<a name="l66"><span class="linenum">  66</span></a>      }
<a name="l67"><span class="linenum">  67</span></a>  
<a name="l68"><span class="linenum">  68</span></a>      if (!empty(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../../_variables/itemid.html">$itemid</a>) and <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../../_variables/itemid.html">$itemid</a> != <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('itemid')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/itemid.html">itemid</a>) {
<a name="l69"><span class="linenum">  69</span></a>          <a class="function" onClick="logFunction('print_error')" href="../../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('invaliditemid');
<a name="l70"><span class="linenum">  70</span></a>      }
<a name="l71"><span class="linenum">  71</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../../_variables/itemid.html">$itemid</a> = <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('itemid')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/itemid.html">itemid</a>;
<a name="l72"><span class="linenum">  72</span></a>  
<a name="l73"><span class="linenum">  73</span></a>      if (!empty(<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../../_variables/userid.html">$userid</a>) and <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../../_variables/userid.html">$userid</a> != <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('userid')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/userid.html">userid</a>) {
<a name="l74"><span class="linenum">  74</span></a>          <a class="function" onClick="logFunction('print_error')" href="../../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('invaliduser');
<a name="l75"><span class="linenum">  75</span></a>      }
<a name="l76"><span class="linenum">  76</span></a>      <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../../_variables/userid.html">$userid</a> = <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('userid')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/userid.html">userid</a>;
<a name="l77"><span class="linenum">  77</span></a>  
<a name="l78"><span class="linenum">  78</span></a>      unset(<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>);
<a name="l79"><span class="linenum">  79</span></a>  
<a name="l80"><span class="linenum">  80</span></a>  } else if (empty(<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../../_variables/userid.html">$userid</a>) or empty(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../../_variables/itemid.html">$itemid</a>)) {
<a name="l81"><span class="linenum">  81</span></a>      <a class="function" onClick="logFunction('print_error')" href="../../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('missinguseranditemid');
<a name="l82"><span class="linenum">  82</span></a>  }
<a name="l83"><span class="linenum">  83</span></a>  
<a name="l84"><span class="linenum">  84</span></a>  if (!<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../../../_variables/grade_item.html">$grade_item</a> = <a class="class" onClick="logClass('grade_item')" href="../../../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>::<a class="function" onClick="logFunction('fetch')" href="../../../_functions/fetch.html" onMouseOver="funcPopup(event,'fetch')">fetch</a>(array('id'=&gt;<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../../_variables/itemid.html">$itemid</a>, 'courseid'=&gt;<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../_variables/courseid.html">$courseid</a>))) {
<a name="l85"><span class="linenum">  85</span></a>      <a class="function" onClick="logFunction('print_error')" href="../../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('cannotfindgradeitem');
<a name="l86"><span class="linenum">  86</span></a>  }
<a name="l87"><span class="linenum">  87</span></a>  
<a name="l88"><span class="linenum">  88</span></a>  <span class="comment">// now verify grading user has access to all groups or is member of the same group when separate groups used in course</span>
<a name="l89"><span class="linenum">  89</span></a>  if (<a class="function" onClick="logFunction('groups_get_course_groupmode')" href="../../../_functions/groups_get_course_groupmode.html" onMouseOver="funcPopup(event,'groups_get_course_groupmode')">groups_get_course_groupmode</a>(<a class="var it2554" onMouseOver="hilite(2554)" onMouseOut="lolite()" onClick="logVariable('COURSE')" href="../../../_variables/COURSE.html">$COURSE</a>) == <a class="constant" onClick="logConstant('SEPARATEGROUPS')" href="../../../_constants/SEPARATEGROUPS.html" onMouseOver="constPopup(event,'SEPARATEGROUPS')">SEPARATEGROUPS</a> and !<a class="function" onClick="logFunction('has_capability')" href="../../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:accessallgroups', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>)) {
<a name="l90"><span class="linenum">  90</span></a>      if (<a class="var it5191" onMouseOver="hilite(5191)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../../_variables/groups.html">$groups</a> = <a class="function" onClick="logFunction('groups_get_all_groups')" href="../../../_functions/groups_get_all_groups.html" onMouseOver="funcPopup(event,'groups_get_all_groups')">groups_get_all_groups</a>(<a class="var it2554" onMouseOver="hilite(2554)" onMouseOut="lolite()" onClick="logVariable('COURSE')" href="../../../_variables/COURSE.html">$COURSE</a>-&gt;<a onClick="logVariable('id')" class="var it39504" onMouseOver="hilite(39504)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../../_variables/userid.html">$userid</a>)) {
<a name="l91"><span class="linenum">  91</span></a>          <a class="var it2013" onMouseOver="hilite(2013)" onMouseOut="lolite()" onClick="logVariable('ok')" href="../../../_variables/ok.html">$ok</a> = false;
<a name="l92"><span class="linenum">  92</span></a>          foreach (<a class="var it5191" onMouseOver="hilite(5191)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../../_variables/groups.html">$groups</a> as <a class="var it4136" onMouseOver="hilite(4136)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../../_variables/group.html">$group</a>) {
<a name="l93"><span class="linenum">  93</span></a>              if (<a class="function" onClick="logFunction('groups_is_member')" href="../../../_functions/groups_is_member.html" onMouseOver="funcPopup(event,'groups_is_member')">groups_is_member</a>(<a class="var it4136" onMouseOver="hilite(4136)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('id')" class="var it39663" onMouseOver="hilite(39663)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>)) {
<a name="l94"><span class="linenum">  94</span></a>                  <a class="var it2013" onMouseOver="hilite(2013)" onMouseOut="lolite()" onClick="logVariable('ok')" href="../../../_variables/ok.html">$ok</a> = true;
<a name="l95"><span class="linenum">  95</span></a>              }
<a name="l96"><span class="linenum">  96</span></a>          }
<a name="l97"><span class="linenum">  97</span></a>          if (!<a class="var it2013" onMouseOver="hilite(2013)" onMouseOut="lolite()" onClick="logVariable('ok')" href="../../../_variables/ok.html">$ok</a>) {
<a name="l98"><span class="linenum">  98</span></a>              <a class="function" onClick="logFunction('print_error')" href="../../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('cannotgradeuser');
<a name="l99"><span class="linenum">  99</span></a>          }
<a name="l100"><span class="linenum"> 100</span></a>      } else {
<a name="l101"><span class="linenum"> 101</span></a>          <a class="function" onClick="logFunction('print_error')" href="../../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('cannotgradeuser');
<a name="l102"><span class="linenum"> 102</span></a>      }
<a name="l103"><span class="linenum"> 103</span></a>  }
<a name="l104"><span class="linenum"> 104</span></a>  
<a name="l105"><span class="linenum"> 105</span></a>  <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../../_variables/mform.html">$mform</a> = <span class="keyword">new </span><a class="class" onClick="logClass('edit_grade_form')" href="../../../_classes/edit_grade_form.html" onMouseOver="classPopup(event,'edit_grade_form')">edit_grade_form</a>(null, array('grade_item'=&gt;<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../../../_variables/grade_item.html">$grade_item</a>, 'gpr'=&gt;<a class="var it5768" onMouseOver="hilite(5768)" onMouseOut="lolite()" onClick="logVariable('gpr')" href="../../../_variables/gpr.html">$gpr</a>));
<a name="l106"><span class="linenum"> 106</span></a>  
<a name="l107"><span class="linenum"> 107</span></a>  if (<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('grade_grades', array('itemid' =&gt; <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../../../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('id')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>, 'userid' =&gt; <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../../_variables/userid.html">$userid</a>))) {
<a name="l108"><span class="linenum"> 108</span></a>  
<a name="l109"><span class="linenum"> 109</span></a>  <span class="comment">    // always clean existing feedback - grading should not have XSS risk</span>
<a name="l110"><span class="linenum"> 110</span></a>      if (empty(<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('feedback')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/feedback.html">feedback</a>)) {
<a name="l111"><span class="linenum"> 111</span></a>          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('feedback')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/feedback.html">feedback</a>  = '';
<a name="l112"><span class="linenum"> 112</span></a>      } else {
<a name="l113"><span class="linenum"> 113</span></a>          <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a> = new stdClass();
<a name="l114"><span class="linenum"> 114</span></a>          <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('smiley')" class="var it39524" onMouseOver="hilite(39524)" onMouseOut="lolite()" href="../../../_variables/smiley.html">smiley</a>  = false;
<a name="l115"><span class="linenum"> 115</span></a>          <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('filter')" class="var it39524" onMouseOver="hilite(39524)" onMouseOut="lolite()" href="../../../_variables/filter.html">filter</a>  = false;
<a name="l116"><span class="linenum"> 116</span></a>          <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('noclean')" class="var it39524" onMouseOver="hilite(39524)" onMouseOut="lolite()" href="../../../_variables/noclean.html">noclean</a> = false;
<a name="l117"><span class="linenum"> 117</span></a>          <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('para')" class="var it39524" onMouseOver="hilite(39524)" onMouseOut="lolite()" href="../../../_variables/para.html">para</a>    = false;
<a name="l118"><span class="linenum"> 118</span></a>          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('feedback')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/feedback.html">feedback</a>  = <a class="function" onClick="logFunction('format_text')" href="../../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('feedback')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/feedback.html">feedback</a>, <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('feedbackformat')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/feedbackformat.html">feedbackformat</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>);
<a name="l119"><span class="linenum"> 119</span></a>      }
<a name="l120"><span class="linenum"> 120</span></a>      <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('feedbackformat')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/feedbackformat.html">feedbackformat</a> = <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../../../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>;
<a name="l121"><span class="linenum"> 121</span></a>  
<a name="l122"><span class="linenum"> 122</span></a>      <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('locked')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/locked.html">locked</a>      = <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('locked')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/locked.html">locked</a>     &gt; 0 ? 1:0;
<a name="l123"><span class="linenum"> 123</span></a>      <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('overridden')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/overridden.html">overridden</a>  = <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('overridden')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/overridden.html">overridden</a> &gt; 0 ? 1:0;
<a name="l124"><span class="linenum"> 124</span></a>      <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('excluded')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/excluded.html">excluded</a>    = <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('excluded')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/excluded.html">excluded</a>   &gt; 0 ? 1:0;
<a name="l125"><span class="linenum"> 125</span></a>  
<a name="l126"><span class="linenum"> 126</span></a>      if (<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('hidden')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/hidden.html">hidden</a> &gt; 1) {
<a name="l127"><span class="linenum"> 127</span></a>          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('hiddenuntil')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/hiddenuntil.html">hiddenuntil</a> = <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('hidden')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/hidden.html">hidden</a>;
<a name="l128"><span class="linenum"> 128</span></a>          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('hidden')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/hidden.html">hidden</a> = 1;
<a name="l129"><span class="linenum"> 129</span></a>      } else {
<a name="l130"><span class="linenum"> 130</span></a>          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('hiddenuntil')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/hiddenuntil.html">hiddenuntil</a> = 0;
<a name="l131"><span class="linenum"> 131</span></a>      }
<a name="l132"><span class="linenum"> 132</span></a>  
<a name="l133"><span class="linenum"> 133</span></a>      if (<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../../../_variables/grade_item.html">$grade_item</a>-&gt;<a class="function" onClick="logFunction('is_hidden')" href="../../../_functions/is_hidden.html" onMouseOver="funcPopup(event,'is_hidden')">is_hidden</a>()) {
<a name="l134"><span class="linenum"> 134</span></a>          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('hidden')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/hidden.html">hidden</a> = 1;
<a name="l135"><span class="linenum"> 135</span></a>      }
<a name="l136"><span class="linenum"> 136</span></a>  
<a name="l137"><span class="linenum"> 137</span></a>      if (<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../../../_variables/grade_item.html">$grade_item</a>-&gt;<a class="function" onClick="logFunction('is_locked')" href="../../../_functions/is_locked.html" onMouseOver="funcPopup(event,'is_locked')">is_locked</a>()) {
<a name="l138"><span class="linenum"> 138</span></a>          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('locked')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/locked.html">locked</a> = 1;
<a name="l139"><span class="linenum"> 139</span></a>      }
<a name="l140"><span class="linenum"> 140</span></a>  
<a name="l141"><span class="linenum"> 141</span></a>  <span class="comment">    // normalize the final grade value</span>
<a name="l142"><span class="linenum"> 142</span></a>      if (<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../../../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('gradetype')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../../../_variables/gradetype.html">gradetype</a> == <a class="constant" onClick="logConstant('GRADE_TYPE_SCALE')" href="../../../_constants/GRADE_TYPE_SCALE.html" onMouseOver="constPopup(event,'GRADE_TYPE_SCALE')">GRADE_TYPE_SCALE</a>) {
<a name="l143"><span class="linenum"> 143</span></a>          if (empty(<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('finalgrade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/finalgrade.html">finalgrade</a>)) {
<a name="l144"><span class="linenum"> 144</span></a>              <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('finalgrade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/finalgrade.html">finalgrade</a> = -1;
<a name="l145"><span class="linenum"> 145</span></a>          } else {
<a name="l146"><span class="linenum"> 146</span></a>              <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('finalgrade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/finalgrade.html">finalgrade</a> = (int)<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('finalgrade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/finalgrade.html">finalgrade</a>;
<a name="l147"><span class="linenum"> 147</span></a>          }
<a name="l148"><span class="linenum"> 148</span></a>      } else if (<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../../../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('gradetype')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../../../_variables/gradetype.html">gradetype</a> == <a class="constant" onClick="logConstant('GRADE_TYPE_VALUE')" href="../../../_constants/GRADE_TYPE_VALUE.html" onMouseOver="constPopup(event,'GRADE_TYPE_VALUE')">GRADE_TYPE_VALUE</a>) {
<a name="l149"><span class="linenum"> 149</span></a>          <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('finalgrade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/finalgrade.html">finalgrade</a> = <a class="function" onClick="logFunction('format_float')" href="../../../_functions/format_float.html" onMouseOver="funcPopup(event,'format_float')">format_float</a>(<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('finalgrade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/finalgrade.html">finalgrade</a>, <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../../../_variables/grade_item.html">$grade_item</a>-&gt;<a class="function" onClick="logFunction('get_decimals')" href="../../../_functions/get_decimals.html" onMouseOver="funcPopup(event,'get_decimals')">get_decimals</a>());
<a name="l150"><span class="linenum"> 150</span></a>      }
<a name="l151"><span class="linenum"> 151</span></a>  
<a name="l152"><span class="linenum"> 152</span></a>      <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('oldgrade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/oldgrade.html">oldgrade</a>    = <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('finalgrade')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/finalgrade.html">finalgrade</a>;
<a name="l153"><span class="linenum"> 153</span></a>      <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('oldfeedback')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/oldfeedback.html">oldfeedback</a> = <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('feedback')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/feedback.html">feedback</a>;
<a name="l154"><span class="linenum"> 154</span></a>  
<a name="l155"><span class="linenum"> 155</span></a>      <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('feedback')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/feedback.html">feedback</a> = array('text'=&gt;<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('feedback')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/feedback.html">feedback</a>, 'format'=&gt;<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('feedbackformat')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/feedbackformat.html">feedbackformat</a>);
<a name="l156"><span class="linenum"> 156</span></a>  
<a name="l157"><span class="linenum"> 157</span></a>      <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('set_data')" href="../../../_functions/set_data.html" onMouseOver="funcPopup(event,'set_data')">set_data</a>(<a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>);
<a name="l158"><span class="linenum"> 158</span></a>  } else {
<a name="l159"><span class="linenum"> 159</span></a>      <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a> = new stdClass();
<a name="l160"><span class="linenum"> 160</span></a>      <a class="var it607" onMouseOver="hilite(607)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('feedback')" class="var it39944" onMouseOver="hilite(39944)" onMouseOut="lolite()" href="../../../_variables/feedback.html">feedback</a> = array('text'=&gt;'', 'format'=&gt;<a class="constant" onClick="logConstant('FORMAT_HTML')" href="../../../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>);
<a name="l161"><span class="linenum"> 161</span></a>      <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('set_data')" href="../../../_functions/set_data.html" onMouseOver="funcPopup(event,'set_data')">set_data</a>(array('itemid'=&gt;<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../../_variables/itemid.html">$itemid</a>, 'userid'=&gt;<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../../_variables/userid.html">$userid</a>, 'locked'=&gt;<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../../../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('locked')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../../../_variables/locked.html">locked</a>, 'locktime'=&gt;<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../../../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('locktime')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../../../_variables/locktime.html">locktime</a>));
<a name="l162"><span class="linenum"> 162</span></a>  }
<a name="l163"><span class="linenum"> 163</span></a>  
<a name="l164"><span class="linenum"> 164</span></a>  if (<a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('is_cancelled')" href="../../../_functions/is_cancelled.html" onMouseOver="funcPopup(event,'is_cancelled')">is_cancelled</a>()) {
<a name="l165"><span class="linenum"> 165</span></a>      <a class="function" onClick="logFunction('redirect')" href="../../../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it1872" onMouseOver="hilite(1872)" onMouseOut="lolite()" onClick="logVariable('returnurl')" href="../../../_variables/returnurl.html">$returnurl</a>);
<a name="l166"><span class="linenum"> 166</span></a>  
<a name="l167"><span class="linenum"> 167</span></a>  <span class="comment">// form processing</span>
<a name="l168"><span class="linenum"> 168</span></a>  } else if (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a> = <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('get_data')" href="../../../_functions/get_data.html" onMouseOver="funcPopup(event,'get_data')">get_data</a>(false)) {
<a name="l169"><span class="linenum"> 169</span></a>  
<a name="l170"><span class="linenum"> 170</span></a>      if (isset(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('feedback')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/feedback.html">feedback</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('is_array')" href="../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('feedback')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/feedback.html">feedback</a>)) {
<a name="l171"><span class="linenum"> 171</span></a>          <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('feedbackformat')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/feedbackformat.html">feedbackformat</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('feedback')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/feedback.html">feedback</a>['format'];
<a name="l172"><span class="linenum"> 172</span></a>          <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('feedback')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/feedback.html">feedback</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('feedback')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/feedback.html">feedback</a>['text'];
<a name="l173"><span class="linenum"> 173</span></a>      }
<a name="l174"><span class="linenum"> 174</span></a>  
<a name="l175"><span class="linenum"> 175</span></a>      <a class="var it9480" onMouseOver="hilite(9480)" onMouseOut="lolite()" onClick="logVariable('old_grade_grade')" href="../../../_variables/old_grade_grade.html">$old_grade_grade</a> = <span class="keyword">new </span><a class="class" onClick="logClass('grade_grade')" href="../../../_classes/grade_grade.html" onMouseOver="classPopup(event,'grade_grade')">grade_grade</a>(array('userid'=&gt;<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('userid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/userid.html">userid</a>, 'itemid'=&gt;<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../../../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('id')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>), true); <span class="comment">//might not exist yet</span>
<a name="l176"><span class="linenum"> 176</span></a>  
<a name="l177"><span class="linenum"> 177</span></a>  <span class="comment">    // fix no grade for scales</span>
<a name="l178"><span class="linenum"> 178</span></a>      if (!isset(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('finalgrade')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/finalgrade.html">finalgrade</a>) or <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('finalgrade')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/finalgrade.html">finalgrade</a> == <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('oldgrade')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/oldgrade.html">oldgrade</a>) {
<a name="l179"><span class="linenum"> 179</span></a>          <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('finalgrade')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/finalgrade.html">finalgrade</a> = <a class="var it9480" onMouseOver="hilite(9480)" onMouseOut="lolite()" onClick="logVariable('old_grade_grade')" href="../../../_variables/old_grade_grade.html">$old_grade_grade</a>-&gt;<a onClick="logVariable('finalgrade')" class="var it40318" onMouseOver="hilite(40318)" onMouseOut="lolite()" href="../../../_variables/finalgrade.html">finalgrade</a>;
<a name="l180"><span class="linenum"> 180</span></a>  
<a name="l181"><span class="linenum"> 181</span></a>      } else if (<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../../../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('gradetype')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../../../_variables/gradetype.html">gradetype</a> == <a class="constant" onClick="logConstant('GRADE_TYPE_SCALE')" href="../../../_constants/GRADE_TYPE_SCALE.html" onMouseOver="constPopup(event,'GRADE_TYPE_SCALE')">GRADE_TYPE_SCALE</a>) {
<a name="l182"><span class="linenum"> 182</span></a>          if (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('finalgrade')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/finalgrade.html">finalgrade</a> &lt; 1) {
<a name="l183"><span class="linenum"> 183</span></a>              <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('finalgrade')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/finalgrade.html">finalgrade</a> = NULL;
<a name="l184"><span class="linenum"> 184</span></a>          }
<a name="l185"><span class="linenum"> 185</span></a>  
<a name="l186"><span class="linenum"> 186</span></a>      } else if (<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../../../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('gradetype')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../../../_variables/gradetype.html">gradetype</a> == <a class="constant" onClick="logConstant('GRADE_TYPE_VALUE')" href="../../../_constants/GRADE_TYPE_VALUE.html" onMouseOver="constPopup(event,'GRADE_TYPE_VALUE')">GRADE_TYPE_VALUE</a>) {
<a name="l187"><span class="linenum"> 187</span></a>          <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('finalgrade')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/finalgrade.html">finalgrade</a> = <a class="function" onClick="logFunction('unformat_float')" href="../../../_functions/unformat_float.html" onMouseOver="funcPopup(event,'unformat_float')">unformat_float</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('finalgrade')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/finalgrade.html">finalgrade</a>);
<a name="l188"><span class="linenum"> 188</span></a>  
<a name="l189"><span class="linenum"> 189</span></a>      } else {
<a name="l190"><span class="linenum"> 190</span></a>  <span class="comment">        //this should not happen</span>
<a name="l191"><span class="linenum"> 191</span></a>          <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('finalgrade')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/finalgrade.html">finalgrade</a> = <a class="var it9480" onMouseOver="hilite(9480)" onMouseOut="lolite()" onClick="logVariable('old_grade_grade')" href="../../../_variables/old_grade_grade.html">$old_grade_grade</a>-&gt;<a onClick="logVariable('finalgrade')" class="var it40318" onMouseOver="hilite(40318)" onMouseOut="lolite()" href="../../../_variables/finalgrade.html">finalgrade</a>;
<a name="l192"><span class="linenum"> 192</span></a>      }
<a name="l193"><span class="linenum"> 193</span></a>  
<a name="l194"><span class="linenum"> 194</span></a>  <span class="comment">    // the overriding of feedback is tricky - we have to care about external items only</span>
<a name="l195"><span class="linenum"> 195</span></a>      if (!property_exists(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>, 'feedback') or <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('feedback')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/feedback.html">feedback</a> == <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('oldfeedback')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/oldfeedback.html">oldfeedback</a>) {
<a name="l196"><span class="linenum"> 196</span></a>          <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('feedback')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/feedback.html">feedback</a>       = <a class="var it9480" onMouseOver="hilite(9480)" onMouseOut="lolite()" onClick="logVariable('old_grade_grade')" href="../../../_variables/old_grade_grade.html">$old_grade_grade</a>-&gt;<a onClick="logVariable('feedback')" class="var it40318" onMouseOver="hilite(40318)" onMouseOut="lolite()" href="../../../_variables/feedback.html">feedback</a>;
<a name="l197"><span class="linenum"> 197</span></a>          <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('feedbackformat')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/feedbackformat.html">feedbackformat</a> = <a class="var it9480" onMouseOver="hilite(9480)" onMouseOut="lolite()" onClick="logVariable('old_grade_grade')" href="../../../_variables/old_grade_grade.html">$old_grade_grade</a>-&gt;<a onClick="logVariable('feedbackformat')" class="var it40318" onMouseOver="hilite(40318)" onMouseOut="lolite()" href="../../../_variables/feedbackformat.html">feedbackformat</a>;
<a name="l198"><span class="linenum"> 198</span></a>      }
<a name="l199"><span class="linenum"> 199</span></a>  
<a name="l200"><span class="linenum"> 200</span></a>  <span class="comment">    // update final grade or feedback</span>
<a name="l201"><span class="linenum"> 201</span></a>  <span class="comment">    // when we set override grade the first time, it happens here</span>
<a name="l202"><span class="linenum"> 202</span></a>      <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../../../_variables/grade_item.html">$grade_item</a>-&gt;<a class="function" onClick="logFunction('update_final_grade')" href="../../../_functions/update_final_grade.html" onMouseOver="funcPopup(event,'update_final_grade')">update_final_grade</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('userid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/userid.html">userid</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('finalgrade')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/finalgrade.html">finalgrade</a>, 'editgrade', <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('feedback')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/feedback.html">feedback</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('feedbackformat')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/feedbackformat.html">feedbackformat</a>);
<a name="l203"><span class="linenum"> 203</span></a>  
<a name="l204"><span class="linenum"> 204</span></a>      <a class="var it6048" onMouseOver="hilite(6048)" onMouseOut="lolite()" onClick="logVariable('grade_grade')" href="../../../_variables/grade_grade.html">$grade_grade</a> = <span class="keyword">new </span><a class="class" onClick="logClass('grade_grade')" href="../../../_classes/grade_grade.html" onMouseOver="classPopup(event,'grade_grade')">grade_grade</a>(array('userid'=&gt;<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('userid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/userid.html">userid</a>, 'itemid'=&gt;<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../../../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('id')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>), true);
<a name="l205"><span class="linenum"> 205</span></a>      <a class="var it6048" onMouseOver="hilite(6048)" onMouseOut="lolite()" onClick="logVariable('grade_grade')" href="../../../_variables/grade_grade.html">$grade_grade</a>-&gt;<a onClick="logVariable('grade_item')" class="var it39508" onMouseOver="hilite(39508)" onMouseOut="lolite()" href="../../../_variables/grade_item.html">grade_item</a> =&amp; <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../../../_variables/grade_item.html">$grade_item</a>; <span class="comment">// no db fetching</span>
<a name="l206"><span class="linenum"> 206</span></a>  
<a name="l207"><span class="linenum"> 207</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/grade:manage', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>) or <a class="function" onClick="logFunction('has_capability')" href="../../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/grade:edit', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>)) {
<a name="l208"><span class="linenum"> 208</span></a>  <span class="comment">        // change overridden flag</span>
<a name="l209"><span class="linenum"> 209</span></a>          if (!isset(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('overridden')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/overridden.html">overridden</a>)) {
<a name="l210"><span class="linenum"> 210</span></a>              <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('overridden')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/overridden.html">overridden</a> = 0; <span class="comment">// checkbox unticked</span>
<a name="l211"><span class="linenum"> 211</span></a>          }
<a name="l212"><span class="linenum"> 212</span></a>          <a class="var it6048" onMouseOver="hilite(6048)" onMouseOut="lolite()" onClick="logVariable('grade_grade')" href="../../../_variables/grade_grade.html">$grade_grade</a>-&gt;<a class="function" onClick="logFunction('set_overridden')" href="../../../_functions/set_overridden.html" onMouseOver="funcPopup(event,'set_overridden')">set_overridden</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('overridden')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/overridden.html">overridden</a>);
<a name="l213"><span class="linenum"> 213</span></a>      }
<a name="l214"><span class="linenum"> 214</span></a>  
<a name="l215"><span class="linenum"> 215</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/grade:manage', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>) or <a class="function" onClick="logFunction('has_capability')" href="../../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/grade:hide', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>)) {
<a name="l216"><span class="linenum"> 216</span></a>          <a class="var it1532" onMouseOver="hilite(1532)" onMouseOut="lolite()" onClick="logVariable('hidden')" href="../../../_variables/hidden.html">$hidden</a>      = empty(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('hidden')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/hidden.html">hidden</a>) ? 0: <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('hidden')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/hidden.html">hidden</a>;
<a name="l217"><span class="linenum"> 217</span></a>          <a class="var it9476" onMouseOver="hilite(9476)" onMouseOut="lolite()" onClick="logVariable('hiddenuntil')" href="../../../_variables/hiddenuntil.html">$hiddenuntil</a> = empty(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('hiddenuntil')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/hiddenuntil.html">hiddenuntil</a>) ? 0: <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('hiddenuntil')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/hiddenuntil.html">hiddenuntil</a>;
<a name="l218"><span class="linenum"> 218</span></a>  
<a name="l219"><span class="linenum"> 219</span></a>          if (<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../../../_variables/grade_item.html">$grade_item</a>-&gt;<a class="function" onClick="logFunction('is_hidden')" href="../../../_functions/is_hidden.html" onMouseOver="funcPopup(event,'is_hidden')">is_hidden</a>()) {
<a name="l220"><span class="linenum"> 220</span></a>              if (<a class="var it9480" onMouseOver="hilite(9480)" onMouseOut="lolite()" onClick="logVariable('old_grade_grade')" href="../../../_variables/old_grade_grade.html">$old_grade_grade</a>-&gt;<a onClick="logVariable('hidden')" class="var it40318" onMouseOver="hilite(40318)" onMouseOut="lolite()" href="../../../_variables/hidden.html">hidden</a> == 1 and <a class="var it9476" onMouseOver="hilite(9476)" onMouseOut="lolite()" onClick="logVariable('hiddenuntil')" href="../../../_variables/hiddenuntil.html">$hiddenuntil</a> == 0) {
<a name="l221"><span class="linenum"> 221</span></a>  <span class="comment">                //nothing to do - grade was originally hidden, we want to keep it that way</span>
<a name="l222"><span class="linenum"> 222</span></a>              } else {
<a name="l223"><span class="linenum"> 223</span></a>                  <a class="var it6048" onMouseOver="hilite(6048)" onMouseOut="lolite()" onClick="logVariable('grade_grade')" href="../../../_variables/grade_grade.html">$grade_grade</a>-&gt;<a class="function" onClick="logFunction('set_hidden')" href="../../../_functions/set_hidden.html" onMouseOver="funcPopup(event,'set_hidden')">set_hidden</a>(<a class="var it9476" onMouseOver="hilite(9476)" onMouseOut="lolite()" onClick="logVariable('hiddenuntil')" href="../../../_variables/hiddenuntil.html">$hiddenuntil</a>);
<a name="l224"><span class="linenum"> 224</span></a>              }
<a name="l225"><span class="linenum"> 225</span></a>          } else {
<a name="l226"><span class="linenum"> 226</span></a>              if (<a class="var it9476" onMouseOver="hilite(9476)" onMouseOut="lolite()" onClick="logVariable('hiddenuntil')" href="../../../_variables/hiddenuntil.html">$hiddenuntil</a>) {
<a name="l227"><span class="linenum"> 227</span></a>                  <a class="var it6048" onMouseOver="hilite(6048)" onMouseOut="lolite()" onClick="logVariable('grade_grade')" href="../../../_variables/grade_grade.html">$grade_grade</a>-&gt;<a class="function" onClick="logFunction('set_hidden')" href="../../../_functions/set_hidden.html" onMouseOver="funcPopup(event,'set_hidden')">set_hidden</a>(<a class="var it9476" onMouseOver="hilite(9476)" onMouseOut="lolite()" onClick="logVariable('hiddenuntil')" href="../../../_variables/hiddenuntil.html">$hiddenuntil</a>);
<a name="l228"><span class="linenum"> 228</span></a>              } else {
<a name="l229"><span class="linenum"> 229</span></a>                  <a class="var it6048" onMouseOver="hilite(6048)" onMouseOut="lolite()" onClick="logVariable('grade_grade')" href="../../../_variables/grade_grade.html">$grade_grade</a>-&gt;<a class="function" onClick="logFunction('set_hidden')" href="../../../_functions/set_hidden.html" onMouseOver="funcPopup(event,'set_hidden')">set_hidden</a>(<a class="var it1532" onMouseOver="hilite(1532)" onMouseOut="lolite()" onClick="logVariable('hidden')" href="../../../_variables/hidden.html">$hidden</a>); <span class="comment">// checkbox data might be undefined</span>
<a name="l230"><span class="linenum"> 230</span></a>              }
<a name="l231"><span class="linenum"> 231</span></a>          }
<a name="l232"><span class="linenum"> 232</span></a>      }
<a name="l233"><span class="linenum"> 233</span></a>  
<a name="l234"><span class="linenum"> 234</span></a>      if (isset(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('locked')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/locked.html">locked</a>) and !<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../../../_variables/grade_item.html">$grade_item</a>-&gt;<a class="function" onClick="logFunction('is_locked')" href="../../../_functions/is_locked.html" onMouseOver="funcPopup(event,'is_locked')">is_locked</a>()) {
<a name="l235"><span class="linenum"> 235</span></a>          if ((<a class="var it9480" onMouseOver="hilite(9480)" onMouseOut="lolite()" onClick="logVariable('old_grade_grade')" href="../../../_variables/old_grade_grade.html">$old_grade_grade</a>-&gt;<a onClick="logVariable('locked')" class="var it40318" onMouseOver="hilite(40318)" onMouseOut="lolite()" href="../../../_variables/locked.html">locked</a> or <a class="var it9480" onMouseOver="hilite(9480)" onMouseOut="lolite()" onClick="logVariable('old_grade_grade')" href="../../../_variables/old_grade_grade.html">$old_grade_grade</a>-&gt;<a onClick="logVariable('locktime')" class="var it40318" onMouseOver="hilite(40318)" onMouseOut="lolite()" href="../../../_variables/locktime.html">locktime</a>)
<a name="l236"><span class="linenum"> 236</span></a>            and (!<a class="function" onClick="logFunction('has_capability')" href="../../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/grade:manage', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>) and !<a class="function" onClick="logFunction('has_capability')" href="../../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/grade:unlock', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>))) {
<a name="l237"><span class="linenum"> 237</span></a>  <span class="comment">            //ignore data</span>
<a name="l238"><span class="linenum"> 238</span></a>  
<a name="l239"><span class="linenum"> 239</span></a>          } else if ((!<a class="var it9480" onMouseOver="hilite(9480)" onMouseOut="lolite()" onClick="logVariable('old_grade_grade')" href="../../../_variables/old_grade_grade.html">$old_grade_grade</a>-&gt;<a onClick="logVariable('locked')" class="var it40318" onMouseOver="hilite(40318)" onMouseOut="lolite()" href="../../../_variables/locked.html">locked</a> and !<a class="var it9480" onMouseOver="hilite(9480)" onMouseOut="lolite()" onClick="logVariable('old_grade_grade')" href="../../../_variables/old_grade_grade.html">$old_grade_grade</a>-&gt;<a onClick="logVariable('locktime')" class="var it40318" onMouseOver="hilite(40318)" onMouseOut="lolite()" href="../../../_variables/locktime.html">locktime</a>)
<a name="l240"><span class="linenum"> 240</span></a>            and (!<a class="function" onClick="logFunction('has_capability')" href="../../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/grade:manage', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>) and !<a class="function" onClick="logFunction('has_capability')" href="../../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/grade:lock', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>))) {
<a name="l241"><span class="linenum"> 241</span></a>  <span class="comment">            //ignore data</span>
<a name="l242"><span class="linenum"> 242</span></a>  
<a name="l243"><span class="linenum"> 243</span></a>          } else {
<a name="l244"><span class="linenum"> 244</span></a>              <a class="var it6048" onMouseOver="hilite(6048)" onMouseOut="lolite()" onClick="logVariable('grade_grade')" href="../../../_variables/grade_grade.html">$grade_grade</a>-&gt;<a class="function" onClick="logFunction('set_locktime')" href="../../../_functions/set_locktime.html" onMouseOver="funcPopup(event,'set_locktime')">set_locktime</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('locktime')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/locktime.html">locktime</a>); <span class="comment">//set_lock may reset locktime</span>
<a name="l245"><span class="linenum"> 245</span></a>              <a class="var it6048" onMouseOver="hilite(6048)" onMouseOut="lolite()" onClick="logVariable('grade_grade')" href="../../../_variables/grade_grade.html">$grade_grade</a>-&gt;<a class="function" onClick="logFunction('set_locked')" href="../../../_functions/set_locked.html" onMouseOver="funcPopup(event,'set_locked')">set_locked</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('locked')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/locked.html">locked</a>, false, true);
<a name="l246"><span class="linenum"> 246</span></a>  <span class="comment">            // reload grade in case it was regraded from activity</span>
<a name="l247"><span class="linenum"> 247</span></a>              <a class="var it6048" onMouseOver="hilite(6048)" onMouseOut="lolite()" onClick="logVariable('grade_grade')" href="../../../_variables/grade_grade.html">$grade_grade</a> = <span class="keyword">new </span><a class="class" onClick="logClass('grade_grade')" href="../../../_classes/grade_grade.html" onMouseOver="classPopup(event,'grade_grade')">grade_grade</a>(array('userid'=&gt;<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('userid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/userid.html">userid</a>, 'itemid'=&gt;<a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../../../_variables/grade_item.html">$grade_item</a>-&gt;<a onClick="logVariable('id')" class="var it39507" onMouseOver="hilite(39507)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>), true);
<a name="l248"><span class="linenum"> 248</span></a>              <a class="var it6048" onMouseOver="hilite(6048)" onMouseOut="lolite()" onClick="logVariable('grade_grade')" href="../../../_variables/grade_grade.html">$grade_grade</a>-&gt;<a onClick="logVariable('grade_item')" class="var it39508" onMouseOver="hilite(39508)" onMouseOut="lolite()" href="../../../_variables/grade_item.html">grade_item</a> =&amp; <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../../../_variables/grade_item.html">$grade_item</a>; <span class="comment">// no db fetching</span>
<a name="l249"><span class="linenum"> 249</span></a>          }
<a name="l250"><span class="linenum"> 250</span></a>      }
<a name="l251"><span class="linenum"> 251</span></a>  
<a name="l252"><span class="linenum"> 252</span></a>      if (isset(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('excluded')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/excluded.html">excluded</a>) and <a class="function" onClick="logFunction('has_capability')" href="../../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/grade:manage', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>)) {
<a name="l253"><span class="linenum"> 253</span></a>          <a class="var it6048" onMouseOver="hilite(6048)" onMouseOut="lolite()" onClick="logVariable('grade_grade')" href="../../../_variables/grade_grade.html">$grade_grade</a>-&gt;<a class="function" onClick="logFunction('set_excluded')" href="../../../_functions/set_excluded.html" onMouseOver="funcPopup(event,'set_excluded')">set_excluded</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('excluded')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/excluded.html">excluded</a>);
<a name="l254"><span class="linenum"> 254</span></a>      }
<a name="l255"><span class="linenum"> 255</span></a>  
<a name="l256"><span class="linenum"> 256</span></a>  <span class="comment">    // detect cases when we need to do full regrading</span>
<a name="l257"><span class="linenum"> 257</span></a>      if (<a class="var it9480" onMouseOver="hilite(9480)" onMouseOut="lolite()" onClick="logVariable('old_grade_grade')" href="../../../_variables/old_grade_grade.html">$old_grade_grade</a>-&gt;<a onClick="logVariable('excluded')" class="var it40318" onMouseOver="hilite(40318)" onMouseOut="lolite()" href="../../../_variables/excluded.html">excluded</a> != <a class="var it6048" onMouseOver="hilite(6048)" onMouseOut="lolite()" onClick="logVariable('grade_grade')" href="../../../_variables/grade_grade.html">$grade_grade</a>-&gt;<a onClick="logVariable('excluded')" class="var it39508" onMouseOver="hilite(39508)" onMouseOut="lolite()" href="../../../_variables/excluded.html">excluded</a>) {
<a name="l258"><span class="linenum"> 258</span></a>          <a class="var it75" onMouseOver="hilite(75)" onMouseOut="lolite()" onClick="logVariable('parent')" href="../../../_variables/parent.html">$parent</a> = <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../../../_variables/grade_item.html">$grade_item</a>-&gt;<a class="function" onClick="logFunction('get_parent_category')" href="../../../_functions/get_parent_category.html" onMouseOver="funcPopup(event,'get_parent_category')">get_parent_category</a>();
<a name="l259"><span class="linenum"> 259</span></a>          <a class="var it75" onMouseOver="hilite(75)" onMouseOut="lolite()" onClick="logVariable('parent')" href="../../../_variables/parent.html">$parent</a>-&gt;<a class="function" onClick="logFunction('force_regrading')" href="../../../_functions/force_regrading.html" onMouseOver="funcPopup(event,'force_regrading')">force_regrading</a>();
<a name="l260"><span class="linenum"> 260</span></a>  
<a name="l261"><span class="linenum"> 261</span></a>      } else if (<a class="var it9480" onMouseOver="hilite(9480)" onMouseOut="lolite()" onClick="logVariable('old_grade_grade')" href="../../../_variables/old_grade_grade.html">$old_grade_grade</a>-&gt;<a onClick="logVariable('overridden')" class="var it40318" onMouseOver="hilite(40318)" onMouseOut="lolite()" href="../../../_variables/overridden.html">overridden</a> != <a class="var it6048" onMouseOver="hilite(6048)" onMouseOut="lolite()" onClick="logVariable('grade_grade')" href="../../../_variables/grade_grade.html">$grade_grade</a>-&gt;<a onClick="logVariable('overridden')" class="var it39508" onMouseOver="hilite(39508)" onMouseOut="lolite()" href="../../../_variables/overridden.html">overridden</a> and empty(<a class="var it6048" onMouseOver="hilite(6048)" onMouseOut="lolite()" onClick="logVariable('grade_grade')" href="../../../_variables/grade_grade.html">$grade_grade</a>-&gt;<a onClick="logVariable('overridden')" class="var it39508" onMouseOver="hilite(39508)" onMouseOut="lolite()" href="../../../_variables/overridden.html">overridden</a>)) { // only when unoverridding
<a name="l262"><span class="linenum"> 262</span></a>          <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../../../_variables/grade_item.html">$grade_item</a>-&gt;<a class="function" onClick="logFunction('force_regrading')" href="../../../_functions/force_regrading.html" onMouseOver="funcPopup(event,'force_regrading')">force_regrading</a>();
<a name="l263"><span class="linenum"> 263</span></a>  
<a name="l264"><span class="linenum"> 264</span></a>      } else if (<a class="var it9480" onMouseOver="hilite(9480)" onMouseOut="lolite()" onClick="logVariable('old_grade_grade')" href="../../../_variables/old_grade_grade.html">$old_grade_grade</a>-&gt;<a onClick="logVariable('locktime')" class="var it40318" onMouseOver="hilite(40318)" onMouseOut="lolite()" href="../../../_variables/locktime.html">locktime</a> != <a class="var it6048" onMouseOver="hilite(6048)" onMouseOut="lolite()" onClick="logVariable('grade_grade')" href="../../../_variables/grade_grade.html">$grade_grade</a>-&gt;<a onClick="logVariable('locktime')" class="var it39508" onMouseOver="hilite(39508)" onMouseOut="lolite()" href="../../../_variables/locktime.html">locktime</a>) {
<a name="l265"><span class="linenum"> 265</span></a>          <a class="var it6046" onMouseOver="hilite(6046)" onMouseOut="lolite()" onClick="logVariable('grade_item')" href="../../../_variables/grade_item.html">$grade_item</a>-&gt;<a class="function" onClick="logFunction('force_regrading')" href="../../../_functions/force_regrading.html" onMouseOver="funcPopup(event,'force_regrading')">force_regrading</a>();
<a name="l266"><span class="linenum"> 266</span></a>      }
<a name="l267"><span class="linenum"> 267</span></a>  
<a name="l268"><span class="linenum"> 268</span></a>      <a class="function" onClick="logFunction('redirect')" href="../../../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it1872" onMouseOver="hilite(1872)" onMouseOut="lolite()" onClick="logVariable('returnurl')" href="../../../_variables/returnurl.html">$returnurl</a>);
<a name="l269"><span class="linenum"> 269</span></a>  }
<a name="l270"><span class="linenum"> 270</span></a>  
<a name="l271"><span class="linenum"> 271</span></a>  <a class="var it9481" onMouseOver="hilite(9481)" onMouseOut="lolite()" onClick="logVariable('strgrades')" href="../../../_variables/strgrades.html">$strgrades</a>       = <a class="function" onClick="logFunction('get_string')" href="../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('grades');
<a name="l272"><span class="linenum"> 272</span></a>  <a class="var it9482" onMouseOver="hilite(9482)" onMouseOut="lolite()" onClick="logVariable('strgraderreport')" href="../../../_variables/strgraderreport.html">$strgraderreport</a> = <a class="function" onClick="logFunction('get_string')" href="../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('graderreport', 'grades');
<a name="l273"><span class="linenum"> 273</span></a>  <a class="var it9483" onMouseOver="hilite(9483)" onMouseOut="lolite()" onClick="logVariable('strgradeedit')" href="../../../_variables/strgradeedit.html">$strgradeedit</a>    = <a class="function" onClick="logFunction('get_string')" href="../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('editgrade', 'grades');
<a name="l274"><span class="linenum"> 274</span></a>  <a class="var it9484" onMouseOver="hilite(9484)" onMouseOut="lolite()" onClick="logVariable('struser')" href="../../../_variables/struser.html">$struser</a>         = <a class="function" onClick="logFunction('get_string')" href="../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('user');
<a name="l275"><span class="linenum"> 275</span></a>  
<a name="l276"><span class="linenum"> 276</span></a>  <a class="function" onClick="logFunction('grade_build_nav')" href="../../../_functions/grade_build_nav.html" onMouseOver="funcPopup(event,'grade_build_nav')">grade_build_nav</a>(__FILE__, <a class="var it9483" onMouseOver="hilite(9483)" onMouseOut="lolite()" onClick="logVariable('strgradeedit')" href="../../../_variables/strgradeedit.html">$strgradeedit</a>, array('courseid' =&gt; <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../_variables/courseid.html">$courseid</a>));
<a name="l277"><span class="linenum"> 277</span></a>  
<a name="l278"><span class="linenum"> 278</span></a>  <span class="comment">/*********** BEGIN OUTPUT *************/</span>
<a name="l279"><span class="linenum"> 279</span></a>  <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_title')" href="../../../_functions/set_title.html" onMouseOver="funcPopup(event,'set_title')">set_title</a>(<a class="var it9481" onMouseOver="hilite(9481)" onMouseOut="lolite()" onClick="logVariable('strgrades')" href="../../../_variables/strgrades.html">$strgrades</a> . ': ' . <a class="var it9482" onMouseOver="hilite(9482)" onMouseOut="lolite()" onClick="logVariable('strgraderreport')" href="../../../_variables/strgraderreport.html">$strgraderreport</a> . ': ' . <a class="var it9483" onMouseOver="hilite(9483)" onMouseOut="lolite()" onClick="logVariable('strgradeedit')" href="../../../_variables/strgradeedit.html">$strgradeedit</a>);
<a name="l280"><span class="linenum"> 280</span></a>  <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_heading')" href="../../../_functions/set_heading.html" onMouseOver="funcPopup(event,'set_heading')">set_heading</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('fullname')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../../_variables/fullname.html">fullname</a>);
<a name="l281"><span class="linenum"> 281</span></a>  
<a name="l282"><span class="linenum"> 282</span></a>  echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="phpfunction" onClick="logFunction('header')" href="../../../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>();
<a name="l283"><span class="linenum"> 283</span></a>  echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('heading')" href="../../../_functions/heading.html" onMouseOver="funcPopup(event,'heading')">heading</a>(<a class="var it9483" onMouseOver="hilite(9483)" onMouseOut="lolite()" onClick="logVariable('strgradeedit')" href="../../../_variables/strgradeedit.html">$strgradeedit</a>);
<a name="l284"><span class="linenum"> 284</span></a>  
<a name="l285"><span class="linenum"> 285</span></a>  echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('box_start')" href="../../../_functions/box_start.html" onMouseOver="funcPopup(event,'box_start')">box_start</a>();
<a name="l286"><span class="linenum"> 286</span></a>  
<a name="l287"><span class="linenum"> 287</span></a>  <span class="comment">// Form if in edit or add modes</span>
<a name="l288"><span class="linenum"> 288</span></a>  <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('display')" href="../../../_functions/display.html" onMouseOver="funcPopup(event,'display')">display</a>();
<a name="l289"><span class="linenum"> 289</span></a>  
<a name="l290"><span class="linenum"> 290</span></a>  echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('box_end')" href="../../../_functions/box_end.html" onMouseOver="funcPopup(event,'box_end')">box_end</a>();
<a name="l291"><span class="linenum"> 291</span></a>  
<a name="l292"><span class="linenum"> 292</span></a>  echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('footer')" href="../../../_functions/footer.html" onMouseOver="funcPopup(event,'footer')">footer</a>();
<a name="l293"><span class="linenum"> 293</span></a>  die;
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'set_locked': ['set_locked', 'Locks or unlocks this grade_item and (optionally) all its associated final grades. ', [['lib/grade','grade_item.php',499],['lib/grade','grade_grade.php',412],['lib/grade','grade_category.php',2324]], 17],
'is_locked': ['is_locked', 'Returns the locked state of this grade_item (if the grade_item is locked OR no specific $userid is given) or the locked state of a specific grade within this item if a specific $userid is given and the grade_item is unlocked. ', [['lib/grade','grade_item.php',476],['backup/util/settings','setting_dependency.class.php',187],['backup/util/settings','setting_dependency.class.php',340],['backup/util/settings','setting_dependency.class.php',534],['backup/util/settings','setting_dependency.class.php',598],['user/profile','lib.php',354],['lib/grade','grade_grade.php',265],['lib/grade','grade_category.php',2312],['lib','badgeslib.php',317]], 57],
'grade_build_nav': ['grade_build_nav', 'Function central to gradebook for building and printing the navigation (breadcrumb trail). ', [['grade','lib.php',1134]], 3],
'set_excluded': ['set_excluded', 'Set the excluded status of grade ', [['lib/grade','grade_grade.php',392]], 2],
'box_start': ['box_start', 'Outputs the opening section of a box. ', [['lib','outputrenderers.php',2987]], 351],
'set_url': ['set_url', 'Set the url specifics ', [['backup/cc/cc_lib','cc_weblink.php',50],['backup/util/ui','restore_ui_components.php',141],['mod/wiki','pagelib.php',246],['mod/wiki','pagelib.php',334],['mod/wiki','pagelib.php',421],['mod/wiki','pagelib.php',701],['mod/wiki','pagelib.php',726],['mod/wiki','pagelib.php',840],['mod/wiki','pagelib.php',884],['mod/wiki','pagelib.php',1013],['mod/wiki','pagelib.php',1117],['mod/wiki','pagelib.php',1224],['mod/wiki','pagelib.php',1467],['mod/wiki','pagelib.php',1869],['mod/wiki','pagelib.php',1937],['mod/wiki','pagelib.php',2111],['mod/wiki','pagelib.php',2172],['mod/wiki','pagelib.php',2228],['mod/wiki','pagelib.php',2293],['mod/wiki','pagelib.php',2341],['mod/wiki','pagelib.php',2389],['mod/wiki','pagelib.php',2493],['lib','outputcomponents.php',2823],['lib','pagelib.php',1198]], 574],
'box_end': ['box_end', 'Outputs the closing section of a box. ', [['lib','outputrenderers.php',3002]], 351],
'set_pagelayout': ['set_pagelayout', 'Sets the layout to use for this page. ', [['lib','pagelib.php',1063]], 277],
'groups_is_member': ['groups_is_member', 'Determines if the user is a member of the given group. ', [['lib','grouplib.php',353]], 97],
'param': ['param', 'Returns a placeholder for query parameters e.g. $DB->Param(\'a\') will return - \'?\' for most databases - \':a\' for Oracle - \'$1\', \'$2\', etc. for PostgreSQL ', [['lib/adodb','adodb.inc.php',815],['lib/adodb/drivers','adodb-postgres64.inc.php',591],['lib','weblib.php',455],['lib/adodb/drivers','adodb-oci8po.inc.php',37],['lib/adodb/drivers','adodb-db2oci.inc.php',166],['lib/adodb/drivers','adodb-oci8.inc.php',1014]], 641],
'is_cancelled': ['is_cancelled', '', [['mod/feedback/item/captcha','lib.php',72],['backup/util/ui','base_moodleform.class.php',330],['lib','formslib.php',567],['mod/feedback/item/multichoice','lib.php',83],['mod/feedback/item/textfield','lib.php',85],['mod/feedback/item/multichoicerated','lib.php',88],['mod/feedback/item/label','lib.php',95],['mod/feedback/item/textarea','lib.php',88],['mod/feedback/item/numeric','lib.php',101],['mod/feedback/item/info','lib.php',72],['mod/feedback/item','feedback_item_class.php',33],['mod/feedback/item','feedback_item_class.php',147]], 160],
'require_login': ['require_login', 'This function checks that the current user is logged in and has the required privileges ', [['lib','moodlelib.php',2444]], 635],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',884],['lib','accesslib.php',346]], 1929],
'get_string': ['get_string', 'Return a core get_string() call ', [['lib/external','externallib.php',112],['lib','moodlelib.php',6538],['lib','moodlelib.php',9417],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38],['lib/classes','string_manager_install.php',95],['question/behaviour','behaviourbase.php',756]], 19235],
'set_overridden': ['set_overridden', 'Set the overridden status of grade ', [['lib/grade','grade_grade.php',356]], 3],
'update_final_grade': ['update_final_grade', 'Updates final grade value for given user, this is a only way to update final grades from gradebook and import because it logs the change in history table and deals with overridden flag. This flag is set to prevent later overriding from raw grades submitted from modules. ', [['lib/grade','grade_item.php',1521]], 14],
'fetch': ['fetch', 'Fetches the available update status from the remote site ', [['lib/classes/update','checker.php',113],['lib/minify/lib/Minify/Cache','XCache.php',86],['lib/grade','grade_object.php',126],['completion/criteria','completion_criteria_unenrol.php',43],['completion/criteria','completion_criteria_grade.php',45],['lib/grade','grade_item.php',332],['lib/minify/lib/Minify/Cache','Memcache.php',97],['lib/minify/lib/Minify/Cache','APC.php',91],['completion/criteria','completion_criteria_activity.php',45],['lib/horde/framework/Horde/Imap/Client','Base.php',2373],['completion','data_object.php',152],['completion/criteria','completion_criteria_course.php',46],['completion','completion_completion.php',70],['completion/criteria','completion_criteria_role.php',43],['completion','completion_criteria_completion.php',74],['lib/grade','grade_grade.php',576],['lib/minify/lib/Minify/Cache','ZendPlatform.php',97],['completion/criteria','completion_criteria_date.php',43],['lib/grade','grade_category.php',184],['completion/criteria','completion_criteria_self.php',43],['lib/grade','grade_scale.php',89],['lib/minify/lib/Minify/Cache','File.php',90],['completion','completion_aggregation.php',68],['completion/criteria','completion_criteria_duration.php',43],['lib/grade','grade_outcome.php',182]], 192],
'get_parent_category': ['get_parent_category', 'Returns the grade_category object this grade_item belongs to (referenced by categoryid) or category attached to category item. ', [['lib/grade','grade_item.php',868],['lib/grade','grade_category.php',2114]], 28],
'get_record': ['get_record', 'Get a single database record as an object where all the given conditions met. ', [['lib/dml','moodle_database.php',1413]], 2960],
'require_capability': ['require_capability', 'Adds a required capability which all results will be checked against ', [['backup/util/ui','restore_ui_components.php',157],['mod/quiz','attemptlib.php',306],['mod/quiz','attemptlib.php',891],['lib','accesslib.php',764]], 628],
'set_title': ['set_title', '', [['backup/cc/cc_lib','cc_basiclti.php',57],['backup/cc/cc_lib','cc_weblink.php',41],['backup/cc/cc_lib','cc_metadata.php',225],['backup/cc/cc_lib','cc_forum.php',39],['mod/wiki','pagelib.php',216],['lib','outputcomponents.php',2815],['backup/cc/cc_lib','cc_asssesment.php',595],['backup/cc/cc_lib','cc_asssesment.php',843],['backup/cc/cc_lib','cc_asssesment.php',1060],['backup/cc/cc_lib','cc_asssesment.php',1829],['lib','pagelib.php',1128],['backup/cc/cc_lib','cc_page.php',38]], 445],
'get_return_url': ['get_return_url', '', [['mod/chat','locallib.php',147],['mod/forum','locallib.php',143],['lib/portfolio','caller.php',526],['grade','lib.php',993]], 30],
'unformat_float': ['unformat_float', 'Converts locale specific floating point/comma number back to standard PHP float value Do NOT try to do any math operations before this conversion on any user submitted floats! ', [['lib','moodlelib.php',7739]], 50],
'get_decimals': ['get_decimals', 'Returns the value of the decimals field ', [['lib/grade','grade_item.php',2102]], 21],
'set_locktime': ['set_locktime', 'Set the locktime for this grade item. ', [['lib/grade','grade_item.php',570],['lib/grade','grade_grade.php',474]], 4],
'footer': ['footer', 'Returns the footer ', [['mod/lesson','renderer.php',78],['lib/tcpdf','tcpdf.php',3464],['lib','outputrenderers.php',1021],['lib','outputrenderers.php',4143],['lib','outputrenderers.php',4248]], 780],
'display': ['display', '', [['mod/lesson/pagetypes','matching.php',50],['mod/lesson/pagetypes','cluster.php',39],['lib/minify/lib/Minify/Cache','XCache.php',74],['mod/quiz/report/grading','report.php',51],['question/classes/bank','view.php',451],['mod/scorm/report/objectives/classes','report.php',37],['backup/util/ui','base_ui.class.php',169],['lib/minify/lib/Minify/Cache','Memcache.php',85],['lib/minify/lib/Minify/Cache','APC.php',79],['mod/lesson/pagetypes','numerical.php',50],['mod/scorm/report/interactions/classes','report.php',31],['lib/pear/HTML','Common.php',428],['backup/util/ui','import_extensions.php',154],['mod/quiz/report/responses','report.php',51],['mod/quiz/report/statistics','report.php',51],['question/classes/bank','column_base.php',164],['backup/util/ui','restore_ui.class.php',373],['course/format/singleactivity','renderer.php',36],['mod/lesson/pagetypes','endofcluster.php',39],['user/selector','lib.php',205],['backup/util/ui','base_moodleform.class.php',365],['admin/roles/classes','capability_table_with_risks.php',132],['lib','formslib.php',913],['backup/util/ui','restore_ui_stage.class.php',355],['backup/util/ui','restore_ui_stage.class.php',497],['backup/util/ui','restore_ui_stage.class.php',1025],['backup/util/ui','restore_ui_stage.class.php',1112],['mod/lesson/pagetypes','truefalse.php',50],['repository/flickr_public','image.php',149],['mod/scorm/report/basic/classes','report.php',30],['admin/roles/classes','capability_table_base.php',71],['mod/lesson/pagetypes','endofbranch.php',39],['mod/lesson/pagetypes','essay.php',67],['mod/scorm/classes','report.php',39],['mod/quiz/report/overview','report.php',42],['backup/util/ui','backup_ui_stage.class.php',545],['backup/util/ui','backup_ui_stage.class.php',588],['lib/minify/lib/Minify/Cache','ZendPlatform.php',84],['mod/lesson/pagetypes','shortanswer.php',50],['cohort','upload_form.php',316],['mod/scorm/report/graphs/classes','report.php',36],['backup/util/ui','base_ui_stage.class.php',126],['mod/lesson/pagetypes','multichoice.php',87],['lib/minify/lib/Minify/Cache','File.php',72],['admin/roles/classes','define_role_table_advanced.php',603],['mod/lesson/pagetypes','branchtable.php',105]], 297],
'groups_get_course_groupmode': ['groups_get_course_groupmode', 'Returns effective groupmode used in course ', [['lib','grouplib.php',457]], 28],
'is_hidden': ['is_hidden', 'Returns the current hidden state of this grade_item ', [['lib/grade','grade_object.php',415],['lib/grade','grade_grade.php',503],['lib','adminlib.php',709],['lib','adminlib.php',996],['lib','adminlib.php',1306],['lib','adminlib.php',1503]], 55],
'optional_param': ['optional_param', 'Returns a particular value for the named variable, taken from POST or GET, otherwise returning a given default. ', [['lib','moodlelib.php',605]], 2167],
'force_regrading': ['force_regrading', 'Sets this grade_item\'s needsupdate to true. Also marks the course item as needing update. ', [['lib/grade','grade_item.php',808],['lib/grade','grade_category.php',411]], 29],
'instance': ['instance', 'Retrieve sole instance of the registry. ', [['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29],['lib/classes','useragent.php',101],['backup/cc','validator.php',35],['lib/portfolio','exporter.php',251],['lib/tests','update_deployer_test.php',69],['lib/tests','string_manager_standard_test.php',124],['lib','modinfolib.php',373],['','mdeploy.php',96],['cache','disabledlib.php',171],['cache','disabledlib.php',296],['admin/tool/installaddon/classes','validator.php',85],['cache/classes','config.php',87],['course/format','lib.php',156],['lib','accesslib.php',6184],['lib','accesslib.php',6436],['lib','accesslib.php',6614],['lib','accesslib.php',6868],['lib','accesslib.php',7129],['lib','accesslib.php',7341],['cache','locallib.php',52],['lib/htmlpurifier','HTMLPurifier.php',251],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['cache/classes','helper.php',76],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['lib/classes','plugin_manager.php',83],['lib','filterlib.php',81],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/classes/update','deployer.php',54],['admin/tool/installaddon/classes','pluginfo_client.php',37],['admin/tool/installaddon/classes','installer.php',40],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443]], 3942],
'get_data': ['get_data', '', [['mod/feedback/item/captcha','lib.php',76],['grade/grading/form/guide','edit_form.php',142],['grade/grading/form','lib.php',841],['grade/grading/form/rubric','edit_form.php',136],['mod/feedback/item/multichoicerated','multichoicerated_form.php',93],['mod/scorm','mod_form.php',514],['lib/classes/event','base.php',564],['mod/feedback','mod_form.php',163],['mod/feedback/item/multichoice','multichoice_form.php',93],['grade/export','grade_export_form.php',206],['lib/simplepie/library/SimplePie','Parser.php',263],['lib','completionlib.php',882],['lib','formslib.php',584],['mod/workshop','locallib.php',3815],['mod/glossary','mod_form.php',203],['mod/feedback/item/textfield','textfield_form.php',57],['blocks/rss_client','editfeed.php',101],['admin/tool/filetypes','edit_form.php',97],['mod/lesson','mod_form.php',383],['admin/tool/uploaduser','user_form.php',394],['admin/webservice','forms.php',299],['mod/feedback/item/numeric','numeric_form.php',60],['mod/feedback/item/multichoice','lib.php',87],['mod/choice','mod_form.php',128],['mod/feedback/item/textarea','textarea_form.php',57],['mod/forum','mod_form.php',270],['mod/feedback/item/textfield','lib.php',89],['mod/feedback/item/multichoicerated','lib.php',92],['admin/tool/uploadcourse/classes','course.php',269],['mod/feedback/item/label','lib.php',99],['mod/feedback/item/textarea','lib.php',92],['backup/util/structure','restore_path_element.class.php',118],['mod/feedback/item/numeric','lib.php',105],['mod/feedback/item/info','lib.php',76],['mod/feedback/item','feedback_item_class.php',37],['mod/feedback/item','feedback_item_class.php',149],['lib/classes/message/inbound','address_manager.php',361],['course','editsection_form.php',96],['message/tests','inbound_test.php',632]], 364],
'set_data': ['set_data', '', [['question/type/missingtype','edit_missingtype_form.php',52],['question/type/multianswer','edit_multianswer_form.php',256],['mod/feedback/item/multichoicerated','multichoicerated_form.php',81],['mod/scorm','mod_form.php',444],['question','category_form.php',73],['course','moodleform_mod.php',338],['mod/feedback/item/multichoice','multichoice_form.php',79],['blocks','edit_form.php',255],['badges','edit_form.php',137],['lib','formslib.php',434],['blocks/html','edit_form.php',53],['admin/tool/filetypes','edit_form.php',83],['question/type/random','edit_random_form.php',68],['cache','forms.php',232],['backup/util/structure','restore_path_element.class.php',95],['lib/classes/message/inbound','address_manager.php',146],['course','editsection_form.php',79],['question/type','edit_question_form.php',449],['question/type/calculated','datasetitems_form.php',360]], 234],
'heading': ['heading', 'Get the heading for this page. ', [['grade/report/singleview/classes/local/screen','grade.php',283],['grade/report/singleview/classes/local/screen','user.php',281],['lib','outputrenderers.php',2957],['lib','outputrenderers.php',4080],['lib','outputrenderers.php',4254],['grade/report/singleview/classes/local/screen','screen.php',197]], 763],
'required_param': ['required_param', 'Returns a particular value for the named variable, taken from POST or GET.  If the parameter doesn\'t exist then an error is thrown because we require this variable. ', [['lib','moodlelib.php',521]], 816],
'redirect': ['redirect', 'Redirect the browser ', [['','mdeploy.php',1474],['lib','weblib.php',2514]], 948],
'set_hidden': ['set_hidden', 'Set a grade object hidden status ', [['lib/grade','grade_object.php',444],['lib/grade','grade_item.php',590],['lib/grade','grade_grade.php',565],['lib/grade','grade_category.php',2403]], 32],
'groups_get_all_groups': ['groups_get_all_groups', 'Gets array of all groups in a specified course. ', [['lib','grouplib.php',189]], 104],
'print_error': ['print_error', 'Abort execution by throwing of a general exception, default exception handler displays the error message in most cases. ', [['lib','setuplib.php',449]], 1560],
'format_float': ['format_float', 'This function should be identical to {@link qtype_calculated_variable_substituter::format_float()}. Except that we do not try to do locale-aware replacement of the decimal point. ', [['question/type/calculated/db','upgradelib.php',205],['lib','moodlelib.php',7707],['question/type/calculatedmulti/db','upgradelib.php',229],['question/type/calculated','question.php',328]], 154],
'set_heading': ['set_heading', 'Sets the heading to use for the page. This is normally used as the main heading at the top of the content. ', [['lib','pagelib.php',1141]], 419],
'format_text': ['format_text', 'Given text in a variety of format codings, this function returns the text as safe HTML. ', [['lib','weblib.php',1115],['lib','tablelib.php',846],['lib','tablelib.php',1583],['lib','tablelib.php',1900],['question/type','questionbase.php',345],['lib/classes','grading_external.php',182]], 325],
'is_array': ['is_array', '', [], 1820],
'header': ['header', '', [], 1294]};
CLASS_DATA={
'grade_item': ['grade_item', 'Class representing a grade item. ', [['lib/grade','grade_item.php',29]], 206],
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',240]], 2887],
'context_course': ['context_course', 'Course context class ', [['lib','accesslib.php',6766]], 1197],
'grade_grade': ['grade_grade', 'grade_grades is an object mapped to DB table {prefix}grade_grades ', [['lib/grade','grade_grade.php',30]], 129],
'edit_grade_form': ['edit_grade_form', '', [['grade/edit/tree','grade_form.php',31]], 1],
'grade_plugin_return': ['grade_plugin_return', 'Utility class used for return tracking when using edit and other forms in grade plugins ', [['grade','lib.php',927]], 25]};
CONST_DATA={
'PARAM_INT': ['PARAM_INT', '', [['lib','moodlelib.php',156]], 2948],
'FORMAT_HTML': ['FORMAT_HTML', '', [['lib','weblib.php',47]], 999],
'GRADE_TYPE_SCALE': ['GRADE_TYPE_SCALE', '', [['lib/grade','constants.php',90]], 63],
'GRADE_TYPE_VALUE': ['GRADE_TYPE_VALUE', '', [['lib/grade','constants.php',85]], 71],
'SEPARATEGROUPS': ['SEPARATEGROUPS', '', [['lib','grouplib.php',34]], 158]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
