<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /grade/grading/lib.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='grade/grading';
filename='lib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/grade/grading/</a> -> <a href="lib.php.html">lib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="lib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="lib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Advanced grading methods support</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package    core_grading</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @copyright  2011 David Mudrak &lt;david@moodle.com&gt;</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> */</span>
<a name="l24"><span class="linenum">  24</span></a>  
<a name="l25"><span class="linenum">  25</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment">/**</span>
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment"> * Factory method returning an instance of the grading manager</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> *</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> * There are basically ways how to use this factory method. If the area record</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> * id is known to the caller, get the manager for that area by providing just</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * the id. If the area record id is not know, the context, component and area name</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> * can be provided. Note that null values are allowed in the second case as the context,</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> * component and the area name can be set explicitly later.</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment"> *</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment"> * @category grading</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment"> * @example $manager = get_grading_manager($areaid);</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment"> * @example $manager = get_grading_manager(context_system::instance());</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment"> * @example $manager = get_grading_manager($context, 'mod_assignment', 'submission');</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment"> * @param stdClass|int|null $context_or_areaid if $areaid is passed, no other parameter is needed</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment"> * @param string|null $component the frankenstyle name of the component</span>
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment"> * @param string|null $area the name of the gradable area</span>
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment"> * @return grading_manager</span>
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment"> */</span>
<a name="l45"><span class="linenum">  45</span></a>  function <a class="function" onClick="logFunction('get_grading_manager')" href="../../_functions/get_grading_manager.html" onMouseOver="funcPopup(event,'get_grading_manager')">get_grading_manager</a>(<a class="var it20388" onMouseOver="hilite(20388)" onMouseOut="lolite()" onClick="logVariable('context_or_areaid')" href="../../_variables/context_or_areaid.html">$context_or_areaid</a> = null, <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a> = null, <a class="var it1044" onMouseOver="hilite(1044)" onMouseOut="lolite()" onClick="logVariable('area')" href="../../_variables/area.html">$area</a> = null) {
<a name="l46"><span class="linenum">  46</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l47"><span class="linenum">  47</span></a>  
<a name="l48"><span class="linenum">  48</span></a>      <a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('manager')" href="../../_variables/manager.html">$manager</a> = <span class="keyword">new </span><a class="class" onClick="logClass('grading_manager')" href="../../_classes/grading_manager.html" onMouseOver="classPopup(event,'grading_manager')">grading_manager</a>();
<a name="l49"><span class="linenum">  49</span></a>  
<a name="l50"><span class="linenum">  50</span></a>      if (<a class="phpfunction" onClick="logFunction('is_object')" href="../../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it20388" onMouseOver="hilite(20388)" onMouseOut="lolite()" onClick="logVariable('context_or_areaid')" href="../../_variables/context_or_areaid.html">$context_or_areaid</a>)) {
<a name="l51"><span class="linenum">  51</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="var it20388" onMouseOver="hilite(20388)" onMouseOut="lolite()" onClick="logVariable('context_or_areaid')" href="../../_variables/context_or_areaid.html">$context_or_areaid</a>;
<a name="l52"><span class="linenum">  52</span></a>      } else {
<a name="l53"><span class="linenum">  53</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = null;
<a name="l54"><span class="linenum">  54</span></a>  
<a name="l55"><span class="linenum">  55</span></a>          if (<a class="phpfunction" onClick="logFunction('is_numeric')" href="../../_functions/is_numeric.html" onMouseOver="phpfuncPopup(event,'is_numeric')">is_numeric</a>(<a class="var it20388" onMouseOver="hilite(20388)" onMouseOut="lolite()" onClick="logVariable('context_or_areaid')" href="../../_variables/context_or_areaid.html">$context_or_areaid</a>)) {
<a name="l56"><span class="linenum">  56</span></a>              <a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('manager')" href="../../_variables/manager.html">$manager</a>-&gt;<a class="function" onClick="logFunction('load')" href="../../_functions/load.html" onMouseOver="funcPopup(event,'load')">load</a>(<a class="var it20388" onMouseOver="hilite(20388)" onMouseOut="lolite()" onClick="logVariable('context_or_areaid')" href="../../_variables/context_or_areaid.html">$context_or_areaid</a>);
<a name="l57"><span class="linenum">  57</span></a>              return <a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('manager')" href="../../_variables/manager.html">$manager</a>;
<a name="l58"><span class="linenum">  58</span></a>          }
<a name="l59"><span class="linenum">  59</span></a>      }
<a name="l60"><span class="linenum">  60</span></a>  
<a name="l61"><span class="linenum">  61</span></a>      if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l62"><span class="linenum">  62</span></a>          <a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('manager')" href="../../_variables/manager.html">$manager</a>-&gt;<a class="function" onClick="logFunction('set_context')" href="../../_functions/set_context.html" onMouseOver="funcPopup(event,'set_context')">set_context</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l63"><span class="linenum">  63</span></a>      }
<a name="l64"><span class="linenum">  64</span></a>  
<a name="l65"><span class="linenum">  65</span></a>      if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>)) {
<a name="l66"><span class="linenum">  66</span></a>          <a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('manager')" href="../../_variables/manager.html">$manager</a>-&gt;<a class="function" onClick="logFunction('set_component')" href="../../_functions/set_component.html" onMouseOver="funcPopup(event,'set_component')">set_component</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>);
<a name="l67"><span class="linenum">  67</span></a>      }
<a name="l68"><span class="linenum">  68</span></a>  
<a name="l69"><span class="linenum">  69</span></a>      if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it1044" onMouseOver="hilite(1044)" onMouseOut="lolite()" onClick="logVariable('area')" href="../../_variables/area.html">$area</a>)) {
<a name="l70"><span class="linenum">  70</span></a>          <a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('manager')" href="../../_variables/manager.html">$manager</a>-&gt;<a class="function" onClick="logFunction('set_area')" href="../../_functions/set_area.html" onMouseOver="funcPopup(event,'set_area')">set_area</a>(<a class="var it1044" onMouseOver="hilite(1044)" onMouseOut="lolite()" onClick="logVariable('area')" href="../../_variables/area.html">$area</a>);
<a name="l71"><span class="linenum">  71</span></a>      }
<a name="l72"><span class="linenum">  72</span></a>  
<a name="l73"><span class="linenum">  73</span></a>      return <a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('manager')" href="../../_variables/manager.html">$manager</a>;
<a name="l74"><span class="linenum">  74</span></a>  }
<a name="l75"><span class="linenum">  75</span></a>  
<a name="l76"><span class="linenum">  76</span></a>  <span class="comment">/**</span>
<a name="l77"><span class="linenum">  77</span></a>  <span class="comment"> * General class providing access to common grading features</span>
<a name="l78"><span class="linenum">  78</span></a>  <span class="comment"> *</span>
<a name="l79"><span class="linenum">  79</span></a>  <span class="comment"> * Grading manager provides access to the particular grading method controller</span>
<a name="l80"><span class="linenum">  80</span></a>  <span class="comment"> * in that area.</span>
<a name="l81"><span class="linenum">  81</span></a>  <span class="comment"> *</span>
<a name="l82"><span class="linenum">  82</span></a>  <span class="comment"> * Fully initialized instance of the grading manager operates over a single</span>
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment"> * gradable area. It is possible to work with a partially initialized manager</span>
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment"> * that knows just context and component without known area, for example.</span>
<a name="l85"><span class="linenum">  85</span></a>  <span class="comment"> * It is also possible to change context, component and area of an existing</span>
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment"> * manager. Such pattern is used when copying form definitions, for example.</span>
<a name="l87"><span class="linenum">  87</span></a>  <span class="comment"> *</span>
<a name="l88"><span class="linenum">  88</span></a>  <span class="comment"> * @package    core_grading</span>
<a name="l89"><span class="linenum">  89</span></a>  <span class="comment"> * @copyright  2011 David Mudrak &lt;david@moodle.com&gt;</span>
<a name="l90"><span class="linenum">  90</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l91"><span class="linenum">  91</span></a>  <span class="comment"> * @category   grading</span>
<a name="l92"><span class="linenum">  92</span></a>  <span class="comment"> */</span>
<a name="l93"><span class="linenum">  93</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('grading_manager')" href="../../_classes/grading_manager.html" onMouseOver="classPopup(event,'grading_manager')">grading_manager</a> {
<a name="l94"><span class="linenum">  94</span></a>  
<a name="l95"><span class="linenum">  95</span></a>  <span class="comment">    /** @var stdClass the context */</span>
<a name="l96"><span class="linenum">  96</span></a>      protected <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>;
<a name="l97"><span class="linenum">  97</span></a>  
<a name="l98"><span class="linenum">  98</span></a>  <span class="comment">    /** @var string the frankenstyle name of the component */</span>
<a name="l99"><span class="linenum">  99</span></a>      protected <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>;
<a name="l100"><span class="linenum"> 100</span></a>  
<a name="l101"><span class="linenum"> 101</span></a>  <span class="comment">    /** @var string the name of the gradable area */</span>
<a name="l102"><span class="linenum"> 102</span></a>      protected <a class="var it1044" onMouseOver="hilite(1044)" onMouseOut="lolite()" onClick="logVariable('area')" href="../../_variables/area.html">$area</a>;
<a name="l103"><span class="linenum"> 103</span></a>  
<a name="l104"><span class="linenum"> 104</span></a>  <span class="comment">    /** @var stdClass|false|null the raw record from {grading_areas}, false if does not exist, null if invalidated cache */</span>
<a name="l105"><span class="linenum"> 105</span></a>      private <a class="var it20389" onMouseOver="hilite(20389)" onMouseOut="lolite()" onClick="logVariable('areacache')" href="../../_variables/areacache.html">$areacache</a> = null;
<a name="l106"><span class="linenum"> 106</span></a>  
<a name="l107"><span class="linenum"> 107</span></a>      <span class="comment">/**</span>
<a name="l108"><span class="linenum"> 108</span></a>  <span class="comment">     * Returns grading manager context</span>
<a name="l109"><span class="linenum"> 109</span></a>  <span class="comment">     *</span>
<a name="l110"><span class="linenum"> 110</span></a>  <span class="comment">     * @return stdClass grading manager context</span>
<a name="l111"><span class="linenum"> 111</span></a>  <span class="comment">     */</span>
<a name="l112"><span class="linenum"> 112</span></a>      public function <a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>() {
<a name="l113"><span class="linenum"> 113</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>;
<a name="l114"><span class="linenum"> 114</span></a>      }
<a name="l115"><span class="linenum"> 115</span></a>  
<a name="l116"><span class="linenum"> 116</span></a>      <span class="comment">/**</span>
<a name="l117"><span class="linenum"> 117</span></a>  <span class="comment">     * Sets the context the manager operates on</span>
<a name="l118"><span class="linenum"> 118</span></a>  <span class="comment">     *</span>
<a name="l119"><span class="linenum"> 119</span></a>  <span class="comment">     * @param stdClass $context</span>
<a name="l120"><span class="linenum"> 120</span></a>  <span class="comment">     */</span>
<a name="l121"><span class="linenum"> 121</span></a>      public function <a class="function" onClick="logFunction('set_context')" href="../../_functions/set_context.html" onMouseOver="funcPopup(event,'set_context')">set_context</a>(stdClass <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>) {
<a name="l122"><span class="linenum"> 122</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('areacache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/areacache.html">areacache</a> = null;
<a name="l123"><span class="linenum"> 123</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a> = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>;
<a name="l124"><span class="linenum"> 124</span></a>      }
<a name="l125"><span class="linenum"> 125</span></a>  
<a name="l126"><span class="linenum"> 126</span></a>      <span class="comment">/**</span>
<a name="l127"><span class="linenum"> 127</span></a>  <span class="comment">     * Returns grading manager component</span>
<a name="l128"><span class="linenum"> 128</span></a>  <span class="comment">     *</span>
<a name="l129"><span class="linenum"> 129</span></a>  <span class="comment">     * @return string grading manager component</span>
<a name="l130"><span class="linenum"> 130</span></a>  <span class="comment">     */</span>
<a name="l131"><span class="linenum"> 131</span></a>      public function <a class="function" onClick="logFunction('get_component')" href="../../_functions/get_component.html" onMouseOver="funcPopup(event,'get_component')">get_component</a>() {
<a name="l132"><span class="linenum"> 132</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('component')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/component.html">component</a>;
<a name="l133"><span class="linenum"> 133</span></a>      }
<a name="l134"><span class="linenum"> 134</span></a>  
<a name="l135"><span class="linenum"> 135</span></a>      <span class="comment">/**</span>
<a name="l136"><span class="linenum"> 136</span></a>  <span class="comment">     * Sets the component the manager operates on</span>
<a name="l137"><span class="linenum"> 137</span></a>  <span class="comment">     *</span>
<a name="l138"><span class="linenum"> 138</span></a>  <span class="comment">     * @param string $component the frankenstyle name of the component</span>
<a name="l139"><span class="linenum"> 139</span></a>  <span class="comment">     */</span>
<a name="l140"><span class="linenum"> 140</span></a>      public function <a class="function" onClick="logFunction('set_component')" href="../../_functions/set_component.html" onMouseOver="funcPopup(event,'set_component')">set_component</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>) {
<a name="l141"><span class="linenum"> 141</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('areacache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/areacache.html">areacache</a> = null;
<a name="l142"><span class="linenum"> 142</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>, <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>) = <a class="class" onClick="logClass('core_component')" href="../../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('normalize_component')" href="../../_functions/normalize_component.html" onMouseOver="funcPopup(event,'normalize_component')">normalize_component</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>);
<a name="l143"><span class="linenum"> 143</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('component')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/component.html">component</a> = <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>.'_'.<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>;
<a name="l144"><span class="linenum"> 144</span></a>      }
<a name="l145"><span class="linenum"> 145</span></a>  
<a name="l146"><span class="linenum"> 146</span></a>      <span class="comment">/**</span>
<a name="l147"><span class="linenum"> 147</span></a>  <span class="comment">     * Returns grading manager area name</span>
<a name="l148"><span class="linenum"> 148</span></a>  <span class="comment">     *</span>
<a name="l149"><span class="linenum"> 149</span></a>  <span class="comment">     * @return string grading manager area name</span>
<a name="l150"><span class="linenum"> 150</span></a>  <span class="comment">     */</span>
<a name="l151"><span class="linenum"> 151</span></a>      public function <a class="function" onClick="logFunction('get_area')" href="../../_functions/get_area.html" onMouseOver="funcPopup(event,'get_area')">get_area</a>() {
<a name="l152"><span class="linenum"> 152</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('area')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/area.html">area</a>;
<a name="l153"><span class="linenum"> 153</span></a>      }
<a name="l154"><span class="linenum"> 154</span></a>  
<a name="l155"><span class="linenum"> 155</span></a>      <span class="comment">/**</span>
<a name="l156"><span class="linenum"> 156</span></a>  <span class="comment">     * Sets the area the manager operates on</span>
<a name="l157"><span class="linenum"> 157</span></a>  <span class="comment">     *</span>
<a name="l158"><span class="linenum"> 158</span></a>  <span class="comment">     * @param string $area the name of the gradable area</span>
<a name="l159"><span class="linenum"> 159</span></a>  <span class="comment">     */</span>
<a name="l160"><span class="linenum"> 160</span></a>      public function <a class="function" onClick="logFunction('set_area')" href="../../_functions/set_area.html" onMouseOver="funcPopup(event,'set_area')">set_area</a>(<a class="var it1044" onMouseOver="hilite(1044)" onMouseOut="lolite()" onClick="logVariable('area')" href="../../_variables/area.html">$area</a>) {
<a name="l161"><span class="linenum"> 161</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('areacache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/areacache.html">areacache</a> = null;
<a name="l162"><span class="linenum"> 162</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('area')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/area.html">area</a> = <a class="var it1044" onMouseOver="hilite(1044)" onMouseOut="lolite()" onClick="logVariable('area')" href="../../_variables/area.html">$area</a>;
<a name="l163"><span class="linenum"> 163</span></a>      }
<a name="l164"><span class="linenum"> 164</span></a>  
<a name="l165"><span class="linenum"> 165</span></a>      <span class="comment">/**</span>
<a name="l166"><span class="linenum"> 166</span></a>  <span class="comment">     * Returns a text describing the context and the component</span>
<a name="l167"><span class="linenum"> 167</span></a>  <span class="comment">     *</span>
<a name="l168"><span class="linenum"> 168</span></a>  <span class="comment">     * At the moment this works for gradable areas in course modules. In the future, this</span>
<a name="l169"><span class="linenum"> 169</span></a>  <span class="comment">     * method should be improved so it works for other contexts (blocks, gradebook items etc)</span>
<a name="l170"><span class="linenum"> 170</span></a>  <span class="comment">     * or subplugins.</span>
<a name="l171"><span class="linenum"> 171</span></a>  <span class="comment">     *</span>
<a name="l172"><span class="linenum"> 172</span></a>  <span class="comment">     * @return string</span>
<a name="l173"><span class="linenum"> 173</span></a>  <span class="comment">     */</span>
<a name="l174"><span class="linenum"> 174</span></a>      public function <a class="function" onClick="logFunction('get_component_title')" href="../../_functions/get_component_title.html" onMouseOver="funcPopup(event,'get_component_title')">get_component_title</a>() {
<a name="l175"><span class="linenum"> 175</span></a>  
<a name="l176"><span class="linenum"> 176</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_isset')" href="../../_functions/ensure_isset.html" onMouseOver="funcPopup(event,'ensure_isset')">ensure_isset</a>(array('context', 'component'));
<a name="l177"><span class="linenum"> 177</span></a>  
<a name="l178"><span class="linenum"> 178</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>()-&gt;contextlevel == <a class="constant" onClick="logConstant('CONTEXT_SYSTEM')" href="../../_constants/CONTEXT_SYSTEM.html" onMouseOver="constPopup(event,'CONTEXT_SYSTEM')">CONTEXT_SYSTEM</a>) {
<a name="l179"><span class="linenum"> 179</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_component')" href="../../_functions/get_component.html" onMouseOver="funcPopup(event,'get_component')">get_component</a>() == 'core_grading') {
<a name="l180"><span class="linenum"> 180</span></a>                  <a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a> = ''; <span class="comment">// we are in the bank UI</span>
<a name="l181"><span class="linenum"> 181</span></a>              } else {
<a name="l182"><span class="linenum"> 182</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Unsupported component at the system context');
<a name="l183"><span class="linenum"> 183</span></a>              }
<a name="l184"><span class="linenum"> 184</span></a>  
<a name="l185"><span class="linenum"> 185</span></a>          } else if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>()-&gt;contextlevel &gt;= <a class="constant" onClick="logConstant('CONTEXT_COURSE')" href="../../_constants/CONTEXT_COURSE.html" onMouseOver="constPopup(event,'CONTEXT_COURSE')">CONTEXT_COURSE</a>) {
<a name="l186"><span class="linenum"> 186</span></a>              <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>) = <a class="function" onClick="logFunction('get_context_info_array')" href="../../_functions/get_context_info_array.html" onMouseOver="funcPopup(event,'get_context_info_array')">get_context_info_array</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>()-&gt;id);
<a name="l187"><span class="linenum"> 187</span></a>  
<a name="l188"><span class="linenum"> 188</span></a>              if (<a class="phpfunction" onClick="logFunction('strval')" href="../../_functions/strval.html" onMouseOver="phpfuncPopup(event,'strval')">strval</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('name')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>) !== '') {
<a name="l189"><span class="linenum"> 189</span></a>                  <a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a> = <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('name')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>;
<a name="l190"><span class="linenum"> 190</span></a>              } else {
<a name="l191"><span class="linenum"> 191</span></a>                  <a class="function" onClick="logFunction('debugging')" href="../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Gradable areas are currently supported at the course module level only', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l192"><span class="linenum"> 192</span></a>                  <a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_component')" href="../../_functions/get_component.html" onMouseOver="funcPopup(event,'get_component')">get_component</a>();
<a name="l193"><span class="linenum"> 193</span></a>              }
<a name="l194"><span class="linenum"> 194</span></a>  
<a name="l195"><span class="linenum"> 195</span></a>          } else {
<a name="l196"><span class="linenum"> 196</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Unsupported gradable area context level');
<a name="l197"><span class="linenum"> 197</span></a>          }
<a name="l198"><span class="linenum"> 198</span></a>  
<a name="l199"><span class="linenum"> 199</span></a>          return <a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a>;
<a name="l200"><span class="linenum"> 200</span></a>      }
<a name="l201"><span class="linenum"> 201</span></a>  
<a name="l202"><span class="linenum"> 202</span></a>      <span class="comment">/**</span>
<a name="l203"><span class="linenum"> 203</span></a>  <span class="comment">     * Returns the localized title of the currently set area</span>
<a name="l204"><span class="linenum"> 204</span></a>  <span class="comment">     *</span>
<a name="l205"><span class="linenum"> 205</span></a>  <span class="comment">     * @return string</span>
<a name="l206"><span class="linenum"> 206</span></a>  <span class="comment">     */</span>
<a name="l207"><span class="linenum"> 207</span></a>      public function <a class="function" onClick="logFunction('get_area_title')" href="../../_functions/get_area_title.html" onMouseOver="funcPopup(event,'get_area_title')">get_area_title</a>() {
<a name="l208"><span class="linenum"> 208</span></a>  
<a name="l209"><span class="linenum"> 209</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>()-&gt;contextlevel == <a class="constant" onClick="logConstant('CONTEXT_SYSTEM')" href="../../_constants/CONTEXT_SYSTEM.html" onMouseOver="constPopup(event,'CONTEXT_SYSTEM')">CONTEXT_SYSTEM</a>) {
<a name="l210"><span class="linenum"> 210</span></a>              return '';
<a name="l211"><span class="linenum"> 211</span></a>  
<a name="l212"><span class="linenum"> 212</span></a>          } else if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>()-&gt;contextlevel &gt;= <a class="constant" onClick="logConstant('CONTEXT_COURSE')" href="../../_constants/CONTEXT_COURSE.html" onMouseOver="constPopup(event,'CONTEXT_COURSE')">CONTEXT_COURSE</a>) {
<a name="l213"><span class="linenum"> 213</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_isset')" href="../../_functions/ensure_isset.html" onMouseOver="funcPopup(event,'ensure_isset')">ensure_isset</a>(array('context', 'component', 'area'));
<a name="l214"><span class="linenum"> 214</span></a>              <a class="var it2274" onMouseOver="hilite(2274)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_available_areas')" href="../../_functions/get_available_areas.html" onMouseOver="funcPopup(event,'get_available_areas')">get_available_areas</a>();
<a name="l215"><span class="linenum"> 215</span></a>              if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_area')" href="../../_functions/get_area.html" onMouseOver="funcPopup(event,'get_area')">get_area</a>(), <a class="var it2274" onMouseOver="hilite(2274)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a>)) {
<a name="l216"><span class="linenum"> 216</span></a>                  return <a class="var it2274" onMouseOver="hilite(2274)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a>[<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_area')" href="../../_functions/get_area.html" onMouseOver="funcPopup(event,'get_area')">get_area</a>()];
<a name="l217"><span class="linenum"> 217</span></a>              } else {
<a name="l218"><span class="linenum"> 218</span></a>                  <a class="function" onClick="logFunction('debugging')" href="../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Unknown area!');
<a name="l219"><span class="linenum"> 219</span></a>                  return '???';
<a name="l220"><span class="linenum"> 220</span></a>              }
<a name="l221"><span class="linenum"> 221</span></a>  
<a name="l222"><span class="linenum"> 222</span></a>          } else {
<a name="l223"><span class="linenum"> 223</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Unsupported context level');
<a name="l224"><span class="linenum"> 224</span></a>          }
<a name="l225"><span class="linenum"> 225</span></a>      }
<a name="l226"><span class="linenum"> 226</span></a>  
<a name="l227"><span class="linenum"> 227</span></a>      <span class="comment">/**</span>
<a name="l228"><span class="linenum"> 228</span></a>  <span class="comment">     * Loads the gradable area info from the database</span>
<a name="l229"><span class="linenum"> 229</span></a>  <span class="comment">     *</span>
<a name="l230"><span class="linenum"> 230</span></a>  <span class="comment">     * @param int $areaid</span>
<a name="l231"><span class="linenum"> 231</span></a>  <span class="comment">     */</span>
<a name="l232"><span class="linenum"> 232</span></a>      public function <a class="function" onClick="logFunction('load')" href="../../_functions/load.html" onMouseOver="funcPopup(event,'load')">load</a>(<a class="var it1948" onMouseOver="hilite(1948)" onMouseOut="lolite()" onClick="logVariable('areaid')" href="../../_variables/areaid.html">$areaid</a>) {
<a name="l233"><span class="linenum"> 233</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l234"><span class="linenum"> 234</span></a>  
<a name="l235"><span class="linenum"> 235</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('areacache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/areacache.html">areacache</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('grading_areas', array('id' =&gt; <a class="var it1948" onMouseOver="hilite(1948)" onMouseOut="lolite()" onClick="logVariable('areaid')" href="../../_variables/areaid.html">$areaid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l236"><span class="linenum"> 236</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a> = context::<a class="function" onClick="logFunction('instance_by_id')" href="../../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('areacache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/areacache.html">areacache</a>-&gt;contextid, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l237"><span class="linenum"> 237</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('component')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/component.html">component</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('areacache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/areacache.html">areacache</a>-&gt;component;
<a name="l238"><span class="linenum"> 238</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('area')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/area.html">area</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('areacache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/areacache.html">areacache</a>-&gt;areaname;
<a name="l239"><span class="linenum"> 239</span></a>      }
<a name="l240"><span class="linenum"> 240</span></a>  
<a name="l241"><span class="linenum"> 241</span></a>      <span class="comment">/**</span>
<a name="l242"><span class="linenum"> 242</span></a>  <span class="comment">     * Returns the list of installed grading plugins together, optionally extended</span>
<a name="l243"><span class="linenum"> 243</span></a>  <span class="comment">     * with a simple direct grading.</span>
<a name="l244"><span class="linenum"> 244</span></a>  <span class="comment">     *</span>
<a name="l245"><span class="linenum"> 245</span></a>  <span class="comment">     * @param bool $includenone should the 'Simple direct grading' be included</span>
<a name="l246"><span class="linenum"> 246</span></a>  <span class="comment">     * @return array of the (string)name =&gt; (string)localized title of the method</span>
<a name="l247"><span class="linenum"> 247</span></a>  <span class="comment">     */</span>
<a name="l248"><span class="linenum"> 248</span></a>      public static function <a class="function" onClick="logFunction('available_methods')" href="../../_functions/available_methods.html" onMouseOver="funcPopup(event,'available_methods')">available_methods</a>(<a class="var it20390" onMouseOver="hilite(20390)" onMouseOut="lolite()" onClick="logVariable('includenone')" href="../../_variables/includenone.html">$includenone</a> = true) {
<a name="l249"><span class="linenum"> 249</span></a>  
<a name="l250"><span class="linenum"> 250</span></a>          if (<a class="var it20390" onMouseOver="hilite(20390)" onMouseOut="lolite()" onClick="logVariable('includenone')" href="../../_variables/includenone.html">$includenone</a>) {
<a name="l251"><span class="linenum"> 251</span></a>              <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../../_variables/list.html">$list</a> = array('' =&gt; <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('gradingmethodnone', 'core_grading'));
<a name="l252"><span class="linenum"> 252</span></a>          } else {
<a name="l253"><span class="linenum"> 253</span></a>              <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../../_variables/list.html">$list</a> = array();
<a name="l254"><span class="linenum"> 254</span></a>          }
<a name="l255"><span class="linenum"> 255</span></a>  
<a name="l256"><span class="linenum"> 256</span></a>          foreach (<a class="class" onClick="logClass('core_component')" href="../../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_list')" href="../../_functions/get_plugin_list.html" onMouseOver="funcPopup(event,'get_plugin_list')">get_plugin_list</a>('gradingform') as <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> =&gt; <a class="var it3200" onMouseOver="hilite(3200)" onMouseOut="lolite()" onClick="logVariable('location')" href="../../_variables/location.html">$location</a>) {
<a name="l257"><span class="linenum"> 257</span></a>              <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../../_variables/list.html">$list</a>[<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('pluginname', 'gradingform_'.<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>);
<a name="l258"><span class="linenum"> 258</span></a>          }
<a name="l259"><span class="linenum"> 259</span></a>  
<a name="l260"><span class="linenum"> 260</span></a>          return <a class="var it567" onMouseOver="hilite(567)" onMouseOut="lolite()" onClick="logVariable('list')" href="../../_variables/list.html">$list</a>;
<a name="l261"><span class="linenum"> 261</span></a>      }
<a name="l262"><span class="linenum"> 262</span></a>  
<a name="l263"><span class="linenum"> 263</span></a>      <span class="comment">/**</span>
<a name="l264"><span class="linenum"> 264</span></a>  <span class="comment">     * Returns the list of available grading methods in the given context</span>
<a name="l265"><span class="linenum"> 265</span></a>  <span class="comment">     *</span>
<a name="l266"><span class="linenum"> 266</span></a>  <span class="comment">     * Currently this is just a static list obtained from {@link self::available_methods()}.</span>
<a name="l267"><span class="linenum"> 267</span></a>  <span class="comment">     * In the future, the list of available methods may be controlled per-context.</span>
<a name="l268"><span class="linenum"> 268</span></a>  <span class="comment">     *</span>
<a name="l269"><span class="linenum"> 269</span></a>  <span class="comment">     * Requires the context property to be set in advance.</span>
<a name="l270"><span class="linenum"> 270</span></a>  <span class="comment">     *</span>
<a name="l271"><span class="linenum"> 271</span></a>  <span class="comment">     * @param bool $includenone should the 'Simple direct grading' be included</span>
<a name="l272"><span class="linenum"> 272</span></a>  <span class="comment">     * @return array of the (string)name =&gt; (string)localized title of the method</span>
<a name="l273"><span class="linenum"> 273</span></a>  <span class="comment">     */</span>
<a name="l274"><span class="linenum"> 274</span></a>      public function <a class="function" onClick="logFunction('get_available_methods')" href="../../_functions/get_available_methods.html" onMouseOver="funcPopup(event,'get_available_methods')">get_available_methods</a>(<a class="var it20390" onMouseOver="hilite(20390)" onMouseOut="lolite()" onClick="logVariable('includenone')" href="../../_variables/includenone.html">$includenone</a> = true) {
<a name="l275"><span class="linenum"> 275</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_isset')" href="../../_functions/ensure_isset.html" onMouseOver="funcPopup(event,'ensure_isset')">ensure_isset</a>(array('context'));
<a name="l276"><span class="linenum"> 276</span></a>          return self::<a class="function" onClick="logFunction('available_methods')" href="../../_functions/available_methods.html" onMouseOver="funcPopup(event,'available_methods')">available_methods</a>(<a class="var it20390" onMouseOver="hilite(20390)" onMouseOut="lolite()" onClick="logVariable('includenone')" href="../../_variables/includenone.html">$includenone</a>);
<a name="l277"><span class="linenum"> 277</span></a>      }
<a name="l278"><span class="linenum"> 278</span></a>  
<a name="l279"><span class="linenum"> 279</span></a>      <span class="comment">/**</span>
<a name="l280"><span class="linenum"> 280</span></a>  <span class="comment">     * Returns the list of gradable areas provided by the given component</span>
<a name="l281"><span class="linenum"> 281</span></a>  <span class="comment">     *</span>
<a name="l282"><span class="linenum"> 282</span></a>  <span class="comment">     * This performs a callback to the library of the relevant plugin to obtain</span>
<a name="l283"><span class="linenum"> 283</span></a>  <span class="comment">     * the list of supported areas.</span>
<a name="l284"><span class="linenum"> 284</span></a>  <span class="comment">     *</span>
<a name="l285"><span class="linenum"> 285</span></a>  <span class="comment">     * @param string $component normalized component name</span>
<a name="l286"><span class="linenum"> 286</span></a>  <span class="comment">     * @return array of (string)areacode =&gt; (string)localized title of the area</span>
<a name="l287"><span class="linenum"> 287</span></a>  <span class="comment">     */</span>
<a name="l288"><span class="linenum"> 288</span></a>      public static function <a class="function" onClick="logFunction('available_areas')" href="../../_functions/available_areas.html" onMouseOver="funcPopup(event,'available_areas')">available_areas</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>) {
<a name="l289"><span class="linenum"> 289</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l290"><span class="linenum"> 290</span></a>  
<a name="l291"><span class="linenum"> 291</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it2536" onMouseOver="hilite(2536)" onMouseOut="lolite()" onClick="logVariable('plugintype')" href="../../_variables/plugintype.html">$plugintype</a>, <a class="var it2767" onMouseOver="hilite(2767)" onMouseOut="lolite()" onClick="logVariable('pluginname')" href="../../_variables/pluginname.html">$pluginname</a>) = <a class="class" onClick="logClass('core_component')" href="../../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('normalize_component')" href="../../_functions/normalize_component.html" onMouseOver="funcPopup(event,'normalize_component')">normalize_component</a>(<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>);
<a name="l292"><span class="linenum"> 292</span></a>  
<a name="l293"><span class="linenum"> 293</span></a>          if (<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a> === 'core_grading') {
<a name="l294"><span class="linenum"> 294</span></a>              return array();
<a name="l295"><span class="linenum"> 295</span></a>  
<a name="l296"><span class="linenum"> 296</span></a>          } else if (<a class="var it2536" onMouseOver="hilite(2536)" onMouseOut="lolite()" onClick="logVariable('plugintype')" href="../../_variables/plugintype.html">$plugintype</a> === 'mod') {
<a name="l297"><span class="linenum"> 297</span></a>              return <a class="function" onClick="logFunction('plugin_callback')" href="../../_functions/plugin_callback.html" onMouseOver="funcPopup(event,'plugin_callback')">plugin_callback</a>('mod', <a class="var it2767" onMouseOver="hilite(2767)" onMouseOut="lolite()" onClick="logVariable('pluginname')" href="../../_variables/pluginname.html">$pluginname</a>, 'grading', 'areas_list', null, array());
<a name="l298"><span class="linenum"> 298</span></a>  
<a name="l299"><span class="linenum"> 299</span></a>          } else {
<a name="l300"><span class="linenum"> 300</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Unsupported area location');
<a name="l301"><span class="linenum"> 301</span></a>          }
<a name="l302"><span class="linenum"> 302</span></a>      }
<a name="l303"><span class="linenum"> 303</span></a>  
<a name="l304"><span class="linenum"> 304</span></a>  
<a name="l305"><span class="linenum"> 305</span></a>      <span class="comment">/**</span>
<a name="l306"><span class="linenum"> 306</span></a>  <span class="comment">     * Returns the list of gradable areas in the given context and component</span>
<a name="l307"><span class="linenum"> 307</span></a>  <span class="comment">     *</span>
<a name="l308"><span class="linenum"> 308</span></a>  <span class="comment">     * This performs a callback to the library of the relevant plugin to obtain</span>
<a name="l309"><span class="linenum"> 309</span></a>  <span class="comment">     * the list of supported areas.</span>
<a name="l310"><span class="linenum"> 310</span></a>  <span class="comment">     * @return array of (string)areacode =&gt; (string)localized title of the area</span>
<a name="l311"><span class="linenum"> 311</span></a>  <span class="comment">     */</span>
<a name="l312"><span class="linenum"> 312</span></a>      public function <a class="function" onClick="logFunction('get_available_areas')" href="../../_functions/get_available_areas.html" onMouseOver="funcPopup(event,'get_available_areas')">get_available_areas</a>() {
<a name="l313"><span class="linenum"> 313</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l314"><span class="linenum"> 314</span></a>  
<a name="l315"><span class="linenum"> 315</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_isset')" href="../../_functions/ensure_isset.html" onMouseOver="funcPopup(event,'ensure_isset')">ensure_isset</a>(array('context', 'component'));
<a name="l316"><span class="linenum"> 316</span></a>  
<a name="l317"><span class="linenum"> 317</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>()-&gt;contextlevel == <a class="constant" onClick="logConstant('CONTEXT_SYSTEM')" href="../../_constants/CONTEXT_SYSTEM.html" onMouseOver="constPopup(event,'CONTEXT_SYSTEM')">CONTEXT_SYSTEM</a>) {
<a name="l318"><span class="linenum"> 318</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_component')" href="../../_functions/get_component.html" onMouseOver="funcPopup(event,'get_component')">get_component</a>() !== 'core_grading') {
<a name="l319"><span class="linenum"> 319</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Unsupported component at the system context');
<a name="l320"><span class="linenum"> 320</span></a>              } else {
<a name="l321"><span class="linenum"> 321</span></a>                  return array();
<a name="l322"><span class="linenum"> 322</span></a>              }
<a name="l323"><span class="linenum"> 323</span></a>  
<a name="l324"><span class="linenum"> 324</span></a>          } else if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>()-&gt;contextlevel == <a class="constant" onClick="logConstant('CONTEXT_MODULE')" href="../../_constants/CONTEXT_MODULE.html" onMouseOver="constPopup(event,'CONTEXT_MODULE')">CONTEXT_MODULE</a>) {
<a name="l325"><span class="linenum"> 325</span></a>              <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>) = <a class="function" onClick="logFunction('get_context_info_array')" href="../../_functions/get_context_info_array.html" onMouseOver="funcPopup(event,'get_context_info_array')">get_context_info_array</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>()-&gt;id);
<a name="l326"><span class="linenum"> 326</span></a>              return self::<a class="function" onClick="logFunction('available_areas')" href="../../_functions/available_areas.html" onMouseOver="funcPopup(event,'available_areas')">available_areas</a>('mod_'.<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('modname')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/modname.html">modname</a>);
<a name="l327"><span class="linenum"> 327</span></a>  
<a name="l328"><span class="linenum"> 328</span></a>          } else {
<a name="l329"><span class="linenum"> 329</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Unsupported gradable area context level');
<a name="l330"><span class="linenum"> 330</span></a>          }
<a name="l331"><span class="linenum"> 331</span></a>      }
<a name="l332"><span class="linenum"> 332</span></a>  
<a name="l333"><span class="linenum"> 333</span></a>      <span class="comment">/**</span>
<a name="l334"><span class="linenum"> 334</span></a>  <span class="comment">     * Returns the currently active grading method in the gradable area</span>
<a name="l335"><span class="linenum"> 335</span></a>  <span class="comment">     *</span>
<a name="l336"><span class="linenum"> 336</span></a>  <span class="comment">     * @return string|null the name of the grading plugin of null if it has not been set</span>
<a name="l337"><span class="linenum"> 337</span></a>  <span class="comment">     */</span>
<a name="l338"><span class="linenum"> 338</span></a>      public function <a class="function" onClick="logFunction('get_active_method')" href="../../_functions/get_active_method.html" onMouseOver="funcPopup(event,'get_active_method')">get_active_method</a>() {
<a name="l339"><span class="linenum"> 339</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l340"><span class="linenum"> 340</span></a>  
<a name="l341"><span class="linenum"> 341</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_isset')" href="../../_functions/ensure_isset.html" onMouseOver="funcPopup(event,'ensure_isset')">ensure_isset</a>(array('context', 'component', 'area'));
<a name="l342"><span class="linenum"> 342</span></a>  
<a name="l343"><span class="linenum"> 343</span></a>  <span class="comment">        // get the current grading area record if it exists</span>
<a name="l344"><span class="linenum"> 344</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('areacache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/areacache.html">areacache</a>)) {
<a name="l345"><span class="linenum"> 345</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('areacache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/areacache.html">areacache</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('grading_areas', array(
<a name="l346"><span class="linenum"> 346</span></a>                  'contextid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>-&gt;id,
<a name="l347"><span class="linenum"> 347</span></a>                  'component' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('component')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/component.html">component</a>,
<a name="l348"><span class="linenum"> 348</span></a>                  'areaname'  =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('area')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/area.html">area</a>),
<a name="l349"><span class="linenum"> 349</span></a>              '*', <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>);
<a name="l350"><span class="linenum"> 350</span></a>          }
<a name="l351"><span class="linenum"> 351</span></a>  
<a name="l352"><span class="linenum"> 352</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('areacache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/areacache.html">areacache</a> === false) {
<a name="l353"><span class="linenum"> 353</span></a>  <span class="comment">            // no area record yet</span>
<a name="l354"><span class="linenum"> 354</span></a>              return null;
<a name="l355"><span class="linenum"> 355</span></a>          }
<a name="l356"><span class="linenum"> 356</span></a>  
<a name="l357"><span class="linenum"> 357</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('areacache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/areacache.html">areacache</a>-&gt;activemethod;
<a name="l358"><span class="linenum"> 358</span></a>      }
<a name="l359"><span class="linenum"> 359</span></a>  
<a name="l360"><span class="linenum"> 360</span></a>      <span class="comment">/**</span>
<a name="l361"><span class="linenum"> 361</span></a>  <span class="comment">     * Sets the currently active grading method in the gradable area</span>
<a name="l362"><span class="linenum"> 362</span></a>  <span class="comment">     *</span>
<a name="l363"><span class="linenum"> 363</span></a>  <span class="comment">     * @param string $method the method name, eg 'rubric' (must be available)</span>
<a name="l364"><span class="linenum"> 364</span></a>  <span class="comment">     * @return bool true if the method changed or was just set, false otherwise</span>
<a name="l365"><span class="linenum"> 365</span></a>  <span class="comment">     */</span>
<a name="l366"><span class="linenum"> 366</span></a>      public function <a class="function" onClick="logFunction('set_active_method')" href="../../_functions/set_active_method.html" onMouseOver="funcPopup(event,'set_active_method')">set_active_method</a>(<a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../_variables/method.html">$method</a>) {
<a name="l367"><span class="linenum"> 367</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l368"><span class="linenum"> 368</span></a>  
<a name="l369"><span class="linenum"> 369</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_isset')" href="../../_functions/ensure_isset.html" onMouseOver="funcPopup(event,'ensure_isset')">ensure_isset</a>(array('context', 'component', 'area'));
<a name="l370"><span class="linenum"> 370</span></a>  
<a name="l371"><span class="linenum"> 371</span></a>  <span class="comment">        // make sure the passed method is empty or a valid plugin name</span>
<a name="l372"><span class="linenum"> 372</span></a>          if (empty(<a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../_variables/method.html">$method</a>)) {
<a name="l373"><span class="linenum"> 373</span></a>              <a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../_variables/method.html">$method</a> = null;
<a name="l374"><span class="linenum"> 374</span></a>          } else {
<a name="l375"><span class="linenum"> 375</span></a>              if ('gradingform_'.<a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../_variables/method.html">$method</a> !== <a class="function" onClick="logFunction('clean_param')" href="../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>('gradingform_'.<a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../_variables/method.html">$method</a>, <a class="constant" onClick="logConstant('PARAM_COMPONENT')" href="../../_constants/PARAM_COMPONENT.html" onMouseOver="constPopup(event,'PARAM_COMPONENT')">PARAM_COMPONENT</a>)) {
<a name="l376"><span class="linenum"> 376</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('invalid_method_name', 'core_grading');
<a name="l377"><span class="linenum"> 377</span></a>              }
<a name="l378"><span class="linenum"> 378</span></a>              <a class="var it1211" onMouseOver="hilite(1211)" onMouseOut="lolite()" onClick="logVariable('available')" href="../../_variables/available.html">$available</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_available_methods')" href="../../_functions/get_available_methods.html" onMouseOver="funcPopup(event,'get_available_methods')">get_available_methods</a>(false);
<a name="l379"><span class="linenum"> 379</span></a>              if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../_variables/method.html">$method</a>, <a class="var it1211" onMouseOver="hilite(1211)" onMouseOut="lolite()" onClick="logVariable('available')" href="../../_variables/available.html">$available</a>)) {
<a name="l380"><span class="linenum"> 380</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('invalid_method_name', 'core_grading');
<a name="l381"><span class="linenum"> 381</span></a>              }
<a name="l382"><span class="linenum"> 382</span></a>          }
<a name="l383"><span class="linenum"> 383</span></a>  
<a name="l384"><span class="linenum"> 384</span></a>  <span class="comment">        // get the current grading area record if it exists</span>
<a name="l385"><span class="linenum"> 385</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('areacache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/areacache.html">areacache</a>)) {
<a name="l386"><span class="linenum"> 386</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('areacache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/areacache.html">areacache</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('grading_areas', array(
<a name="l387"><span class="linenum"> 387</span></a>                  'contextid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>-&gt;id,
<a name="l388"><span class="linenum"> 388</span></a>                  'component' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('component')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/component.html">component</a>,
<a name="l389"><span class="linenum"> 389</span></a>                  'areaname'  =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('area')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/area.html">area</a>),
<a name="l390"><span class="linenum"> 390</span></a>              '*', <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>);
<a name="l391"><span class="linenum"> 391</span></a>          }
<a name="l392"><span class="linenum"> 392</span></a>  
<a name="l393"><span class="linenum"> 393</span></a>          <a class="var it20391" onMouseOver="hilite(20391)" onMouseOut="lolite()" onClick="logVariable('methodchanged')" href="../../_variables/methodchanged.html">$methodchanged</a> = false;
<a name="l394"><span class="linenum"> 394</span></a>  
<a name="l395"><span class="linenum"> 395</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('areacache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/areacache.html">areacache</a> === false) {
<a name="l396"><span class="linenum"> 396</span></a>  <span class="comment">            // no area record yet, create one with the active method set</span>
<a name="l397"><span class="linenum"> 397</span></a>              <a class="var it1044" onMouseOver="hilite(1044)" onMouseOut="lolite()" onClick="logVariable('area')" href="../../_variables/area.html">$area</a> = array(
<a name="l398"><span class="linenum"> 398</span></a>                  'contextid'     =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>-&gt;id,
<a name="l399"><span class="linenum"> 399</span></a>                  'component'     =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('component')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/component.html">component</a>,
<a name="l400"><span class="linenum"> 400</span></a>                  'areaname'      =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('area')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/area.html">area</a>,
<a name="l401"><span class="linenum"> 401</span></a>                  'activemethod'  =&gt; <a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../_variables/method.html">$method</a>);
<a name="l402"><span class="linenum"> 402</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('grading_areas', <a class="var it1044" onMouseOver="hilite(1044)" onMouseOut="lolite()" onClick="logVariable('area')" href="../../_variables/area.html">$area</a>);
<a name="l403"><span class="linenum"> 403</span></a>              <a class="var it20391" onMouseOver="hilite(20391)" onMouseOut="lolite()" onClick="logVariable('methodchanged')" href="../../_variables/methodchanged.html">$methodchanged</a> = true;
<a name="l404"><span class="linenum"> 404</span></a>  
<a name="l405"><span class="linenum"> 405</span></a>          } else {
<a name="l406"><span class="linenum"> 406</span></a>  <span class="comment">            // update the existing record if needed</span>
<a name="l407"><span class="linenum"> 407</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('areacache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/areacache.html">areacache</a>-&gt;activemethod !== <a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../_variables/method.html">$method</a>) {
<a name="l408"><span class="linenum"> 408</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('grading_areas', 'activemethod', <a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../_variables/method.html">$method</a>, array('id' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('areacache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/areacache.html">areacache</a>-&gt;id));
<a name="l409"><span class="linenum"> 409</span></a>                  <a class="var it20391" onMouseOver="hilite(20391)" onMouseOut="lolite()" onClick="logVariable('methodchanged')" href="../../_variables/methodchanged.html">$methodchanged</a> = true;
<a name="l410"><span class="linenum"> 410</span></a>              }
<a name="l411"><span class="linenum"> 411</span></a>          }
<a name="l412"><span class="linenum"> 412</span></a>  
<a name="l413"><span class="linenum"> 413</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('areacache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/areacache.html">areacache</a> = null;
<a name="l414"><span class="linenum"> 414</span></a>  
<a name="l415"><span class="linenum"> 415</span></a>          return <a class="var it20391" onMouseOver="hilite(20391)" onMouseOut="lolite()" onClick="logVariable('methodchanged')" href="../../_variables/methodchanged.html">$methodchanged</a>;
<a name="l416"><span class="linenum"> 416</span></a>      }
<a name="l417"><span class="linenum"> 417</span></a>  
<a name="l418"><span class="linenum"> 418</span></a>      <span class="comment">/**</span>
<a name="l419"><span class="linenum"> 419</span></a>  <span class="comment">     * Extends the settings navigation with the grading settings</span>
<a name="l420"><span class="linenum"> 420</span></a>  <span class="comment">     *</span>
<a name="l421"><span class="linenum"> 421</span></a>  <span class="comment">     * This function is called when the context for the page is an activity module with the</span>
<a name="l422"><span class="linenum"> 422</span></a>  <span class="comment">     * FEATURE_ADVANCED_GRADING and the user has the permission moodle/grade:managegradingforms.</span>
<a name="l423"><span class="linenum"> 423</span></a>  <span class="comment">     *</span>
<a name="l424"><span class="linenum"> 424</span></a>  <span class="comment">     * @param settings_navigation $settingsnav {@link settings_navigation}</span>
<a name="l425"><span class="linenum"> 425</span></a>  <span class="comment">     * @param navigation_node $modulenode {@link navigation_node}</span>
<a name="l426"><span class="linenum"> 426</span></a>  <span class="comment">     */</span>
<a name="l427"><span class="linenum"> 427</span></a>      public function <a class="function" onClick="logFunction('extend_settings_navigation')" href="../../_functions/extend_settings_navigation.html" onMouseOver="funcPopup(event,'extend_settings_navigation')">extend_settings_navigation</a>(settings_navigation <a class="var it5557" onMouseOver="hilite(5557)" onMouseOut="lolite()" onClick="logVariable('settingsnav')" href="../../_variables/settingsnav.html">$settingsnav</a>, navigation_node <a class="var it20392" onMouseOver="hilite(20392)" onMouseOut="lolite()" onClick="logVariable('modulenode')" href="../../_variables/modulenode.html">$modulenode</a>=null) {
<a name="l428"><span class="linenum"> 428</span></a>  
<a name="l429"><span class="linenum"> 429</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_isset')" href="../../_functions/ensure_isset.html" onMouseOver="funcPopup(event,'ensure_isset')">ensure_isset</a>(array('context', 'component'));
<a name="l430"><span class="linenum"> 430</span></a>  
<a name="l431"><span class="linenum"> 431</span></a>          <a class="var it2274" onMouseOver="hilite(2274)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_available_areas')" href="../../_functions/get_available_areas.html" onMouseOver="funcPopup(event,'get_available_areas')">get_available_areas</a>();
<a name="l432"><span class="linenum"> 432</span></a>  
<a name="l433"><span class="linenum"> 433</span></a>          if (empty(<a class="var it2274" onMouseOver="hilite(2274)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a>)) {
<a name="l434"><span class="linenum"> 434</span></a>  <span class="comment">            // no money, no funny</span>
<a name="l435"><span class="linenum"> 435</span></a>              return;
<a name="l436"><span class="linenum"> 436</span></a>  
<a name="l437"><span class="linenum"> 437</span></a>          } else if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it2274" onMouseOver="hilite(2274)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a>) == 1) {
<a name="l438"><span class="linenum"> 438</span></a>  <span class="comment">            // make just a single node for the management screen</span>
<a name="l439"><span class="linenum"> 439</span></a>              <a class="var it20393" onMouseOver="hilite(20393)" onMouseOut="lolite()" onClick="logVariable('areatitle')" href="../../_variables/areatitle.html">$areatitle</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it2274" onMouseOver="hilite(2274)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a>);
<a name="l440"><span class="linenum"> 440</span></a>              <a class="var it2225" onMouseOver="hilite(2225)" onMouseOut="lolite()" onClick="logVariable('areaname')" href="../../_variables/areaname.html">$areaname</a>  = <a class="phpfunction" onClick="logFunction('key')" href="../../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a>(<a class="var it2274" onMouseOver="hilite(2274)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a>);
<a name="l441"><span class="linenum"> 441</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_area')" href="../../_functions/set_area.html" onMouseOver="funcPopup(event,'set_area')">set_area</a>(<a class="var it2225" onMouseOver="hilite(2225)" onMouseOut="lolite()" onClick="logVariable('areaname')" href="../../_variables/areaname.html">$areaname</a>);
<a name="l442"><span class="linenum"> 442</span></a>              <a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../_variables/method.html">$method</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_active_method')" href="../../_functions/get_active_method.html" onMouseOver="funcPopup(event,'get_active_method')">get_active_method</a>();
<a name="l443"><span class="linenum"> 443</span></a>              <a class="var it20394" onMouseOver="hilite(20394)" onMouseOut="lolite()" onClick="logVariable('managementnode')" href="../../_variables/managementnode.html">$managementnode</a> = <a class="var it20392" onMouseOver="hilite(20392)" onMouseOut="lolite()" onClick="logVariable('modulenode')" href="../../_variables/modulenode.html">$modulenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('gradingmanagement', 'core_grading'),
<a name="l444"><span class="linenum"> 444</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_management_url')" href="../../_functions/get_management_url.html" onMouseOver="funcPopup(event,'get_management_url')">get_management_url</a>(), <a class="class" onClick="logClass('settings_navigation')" href="../../_classes/settings_navigation.html" onMouseOver="classPopup(event,'settings_navigation')">settings_navigation</a>::TYPE_CUSTOM);
<a name="l445"><span class="linenum"> 445</span></a>              if (<a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../_variables/method.html">$method</a>) {
<a name="l446"><span class="linenum"> 446</span></a>                  <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../_variables/controller.html">$controller</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_controller')" href="../../_functions/get_controller.html" onMouseOver="funcPopup(event,'get_controller')">get_controller</a>(<a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../_variables/method.html">$method</a>);
<a name="l447"><span class="linenum"> 447</span></a>                  <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('extend_settings_navigation')" href="../../_functions/extend_settings_navigation.html" onMouseOver="funcPopup(event,'extend_settings_navigation')">extend_settings_navigation</a>(<a class="var it5557" onMouseOver="hilite(5557)" onMouseOut="lolite()" onClick="logVariable('settingsnav')" href="../../_variables/settingsnav.html">$settingsnav</a>, <a class="var it20394" onMouseOver="hilite(20394)" onMouseOut="lolite()" onClick="logVariable('managementnode')" href="../../_variables/managementnode.html">$managementnode</a>);
<a name="l448"><span class="linenum"> 448</span></a>              }
<a name="l449"><span class="linenum"> 449</span></a>  
<a name="l450"><span class="linenum"> 450</span></a>          } else {
<a name="l451"><span class="linenum"> 451</span></a>  <span class="comment">            // make management screen node for each area</span>
<a name="l452"><span class="linenum"> 452</span></a>              <a class="var it20394" onMouseOver="hilite(20394)" onMouseOut="lolite()" onClick="logVariable('managementnode')" href="../../_variables/managementnode.html">$managementnode</a> = <a class="var it20392" onMouseOver="hilite(20392)" onMouseOut="lolite()" onClick="logVariable('modulenode')" href="../../_variables/modulenode.html">$modulenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('gradingmanagement', 'core_grading'),
<a name="l453"><span class="linenum"> 453</span></a>                  null, <a class="class" onClick="logClass('settings_navigation')" href="../../_classes/settings_navigation.html" onMouseOver="classPopup(event,'settings_navigation')">settings_navigation</a>::TYPE_CUSTOM);
<a name="l454"><span class="linenum"> 454</span></a>              foreach (<a class="var it2274" onMouseOver="hilite(2274)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a> as <a class="var it2225" onMouseOver="hilite(2225)" onMouseOut="lolite()" onClick="logVariable('areaname')" href="../../_variables/areaname.html">$areaname</a> =&gt; <a class="var it20393" onMouseOver="hilite(20393)" onMouseOut="lolite()" onClick="logVariable('areatitle')" href="../../_variables/areatitle.html">$areatitle</a>) {
<a name="l455"><span class="linenum"> 455</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_area')" href="../../_functions/set_area.html" onMouseOver="funcPopup(event,'set_area')">set_area</a>(<a class="var it2225" onMouseOver="hilite(2225)" onMouseOut="lolite()" onClick="logVariable('areaname')" href="../../_variables/areaname.html">$areaname</a>);
<a name="l456"><span class="linenum"> 456</span></a>                  <a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../_variables/method.html">$method</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_active_method')" href="../../_functions/get_active_method.html" onMouseOver="funcPopup(event,'get_active_method')">get_active_method</a>();
<a name="l457"><span class="linenum"> 457</span></a>                  <a class="var it481" onMouseOver="hilite(481)" onMouseOut="lolite()" onClick="logVariable('node')" href="../../_variables/node.html">$node</a> = <a class="var it20394" onMouseOver="hilite(20394)" onMouseOut="lolite()" onClick="logVariable('managementnode')" href="../../_variables/managementnode.html">$managementnode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it20393" onMouseOver="hilite(20393)" onMouseOut="lolite()" onClick="logVariable('areatitle')" href="../../_variables/areatitle.html">$areatitle</a>,
<a name="l458"><span class="linenum"> 458</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_management_url')" href="../../_functions/get_management_url.html" onMouseOver="funcPopup(event,'get_management_url')">get_management_url</a>(), <a class="class" onClick="logClass('settings_navigation')" href="../../_classes/settings_navigation.html" onMouseOver="classPopup(event,'settings_navigation')">settings_navigation</a>::TYPE_CUSTOM);
<a name="l459"><span class="linenum"> 459</span></a>                  if (<a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../_variables/method.html">$method</a>) {
<a name="l460"><span class="linenum"> 460</span></a>                      <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../_variables/controller.html">$controller</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_controller')" href="../../_functions/get_controller.html" onMouseOver="funcPopup(event,'get_controller')">get_controller</a>(<a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../_variables/method.html">$method</a>);
<a name="l461"><span class="linenum"> 461</span></a>                      <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('extend_settings_navigation')" href="../../_functions/extend_settings_navigation.html" onMouseOver="funcPopup(event,'extend_settings_navigation')">extend_settings_navigation</a>(<a class="var it5557" onMouseOver="hilite(5557)" onMouseOut="lolite()" onClick="logVariable('settingsnav')" href="../../_variables/settingsnav.html">$settingsnav</a>, <a class="var it481" onMouseOver="hilite(481)" onMouseOut="lolite()" onClick="logVariable('node')" href="../../_variables/node.html">$node</a>);
<a name="l462"><span class="linenum"> 462</span></a>                  }
<a name="l463"><span class="linenum"> 463</span></a>              }
<a name="l464"><span class="linenum"> 464</span></a>          }
<a name="l465"><span class="linenum"> 465</span></a>      }
<a name="l466"><span class="linenum"> 466</span></a>  
<a name="l467"><span class="linenum"> 467</span></a>      <span class="comment">/**</span>
<a name="l468"><span class="linenum"> 468</span></a>  <span class="comment">     * Extends the module navigation with the advanced grading information</span>
<a name="l469"><span class="linenum"> 469</span></a>  <span class="comment">     *</span>
<a name="l470"><span class="linenum"> 470</span></a>  <span class="comment">     * This function is called when the context for the page is an activity module with the</span>
<a name="l471"><span class="linenum"> 471</span></a>  <span class="comment">     * FEATURE_ADVANCED_GRADING.</span>
<a name="l472"><span class="linenum"> 472</span></a>  <span class="comment">     *</span>
<a name="l473"><span class="linenum"> 473</span></a>  <span class="comment">     * @param global_navigation $navigation</span>
<a name="l474"><span class="linenum"> 474</span></a>  <span class="comment">     * @param navigation_node $modulenode</span>
<a name="l475"><span class="linenum"> 475</span></a>  <span class="comment">     */</span>
<a name="l476"><span class="linenum"> 476</span></a>      public function <a class="function" onClick="logFunction('extend_navigation')" href="../../_functions/extend_navigation.html" onMouseOver="funcPopup(event,'extend_navigation')">extend_navigation</a>(global_navigation <a class="var it2565" onMouseOver="hilite(2565)" onMouseOut="lolite()" onClick="logVariable('navigation')" href="../../_variables/navigation.html">$navigation</a>, navigation_node <a class="var it20392" onMouseOver="hilite(20392)" onMouseOut="lolite()" onClick="logVariable('modulenode')" href="../../_variables/modulenode.html">$modulenode</a>=null) {
<a name="l477"><span class="linenum"> 477</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_isset')" href="../../_functions/ensure_isset.html" onMouseOver="funcPopup(event,'ensure_isset')">ensure_isset</a>(array('context', 'component'));
<a name="l478"><span class="linenum"> 478</span></a>  
<a name="l479"><span class="linenum"> 479</span></a>          <a class="var it2274" onMouseOver="hilite(2274)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_available_areas')" href="../../_functions/get_available_areas.html" onMouseOver="funcPopup(event,'get_available_areas')">get_available_areas</a>();
<a name="l480"><span class="linenum"> 480</span></a>          foreach (<a class="var it2274" onMouseOver="hilite(2274)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a> as <a class="var it2225" onMouseOver="hilite(2225)" onMouseOut="lolite()" onClick="logVariable('areaname')" href="../../_variables/areaname.html">$areaname</a> =&gt; <a class="var it20393" onMouseOver="hilite(20393)" onMouseOut="lolite()" onClick="logVariable('areatitle')" href="../../_variables/areatitle.html">$areatitle</a>) {
<a name="l481"><span class="linenum"> 481</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_area')" href="../../_functions/set_area.html" onMouseOver="funcPopup(event,'set_area')">set_area</a>(<a class="var it2225" onMouseOver="hilite(2225)" onMouseOut="lolite()" onClick="logVariable('areaname')" href="../../_variables/areaname.html">$areaname</a>);
<a name="l482"><span class="linenum"> 482</span></a>              if (<a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../_variables/controller.html">$controller</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_active_controller')" href="../../_functions/get_active_controller.html" onMouseOver="funcPopup(event,'get_active_controller')">get_active_controller</a>()) {
<a name="l483"><span class="linenum"> 483</span></a>                  <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('extend_navigation')" href="../../_functions/extend_navigation.html" onMouseOver="funcPopup(event,'extend_navigation')">extend_navigation</a>(<a class="var it2565" onMouseOver="hilite(2565)" onMouseOut="lolite()" onClick="logVariable('navigation')" href="../../_variables/navigation.html">$navigation</a>, <a class="var it20392" onMouseOver="hilite(20392)" onMouseOut="lolite()" onClick="logVariable('modulenode')" href="../../_variables/modulenode.html">$modulenode</a>);
<a name="l484"><span class="linenum"> 484</span></a>              }
<a name="l485"><span class="linenum"> 485</span></a>          }
<a name="l486"><span class="linenum"> 486</span></a>      }
<a name="l487"><span class="linenum"> 487</span></a>  
<a name="l488"><span class="linenum"> 488</span></a>      <span class="comment">/**</span>
<a name="l489"><span class="linenum"> 489</span></a>  <span class="comment">     * Returns the given method's controller in the gradable area</span>
<a name="l490"><span class="linenum"> 490</span></a>  <span class="comment">     *</span>
<a name="l491"><span class="linenum"> 491</span></a>  <span class="comment">     * @param string $method the method name, eg 'rubric' (must be available)</span>
<a name="l492"><span class="linenum"> 492</span></a>  <span class="comment">     * @return grading_controller</span>
<a name="l493"><span class="linenum"> 493</span></a>  <span class="comment">     */</span>
<a name="l494"><span class="linenum"> 494</span></a>      public function <a class="function" onClick="logFunction('get_controller')" href="../../_functions/get_controller.html" onMouseOver="funcPopup(event,'get_controller')">get_controller</a>(<a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../_variables/method.html">$method</a>) {
<a name="l495"><span class="linenum"> 495</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l496"><span class="linenum"> 496</span></a>  
<a name="l497"><span class="linenum"> 497</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_isset')" href="../../_functions/ensure_isset.html" onMouseOver="funcPopup(event,'ensure_isset')">ensure_isset</a>(array('context', 'component', 'area'));
<a name="l498"><span class="linenum"> 498</span></a>  
<a name="l499"><span class="linenum"> 499</span></a>  <span class="comment">        // make sure the passed method is a valid plugin name</span>
<a name="l500"><span class="linenum"> 500</span></a>          if ('gradingform_'.<a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../_variables/method.html">$method</a> !== <a class="function" onClick="logFunction('clean_param')" href="../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>('gradingform_'.<a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../_variables/method.html">$method</a>, <a class="constant" onClick="logConstant('PARAM_COMPONENT')" href="../../_constants/PARAM_COMPONENT.html" onMouseOver="constPopup(event,'PARAM_COMPONENT')">PARAM_COMPONENT</a>)) {
<a name="l501"><span class="linenum"> 501</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('invalid_method_name', 'core_grading');
<a name="l502"><span class="linenum"> 502</span></a>          }
<a name="l503"><span class="linenum"> 503</span></a>          <a class="var it1211" onMouseOver="hilite(1211)" onMouseOut="lolite()" onClick="logVariable('available')" href="../../_variables/available.html">$available</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_available_methods')" href="../../_functions/get_available_methods.html" onMouseOver="funcPopup(event,'get_available_methods')">get_available_methods</a>(false);
<a name="l504"><span class="linenum"> 504</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../_variables/method.html">$method</a>, <a class="var it1211" onMouseOver="hilite(1211)" onMouseOut="lolite()" onClick="logVariable('available')" href="../../_variables/available.html">$available</a>)) {
<a name="l505"><span class="linenum"> 505</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('invalid_method_name', 'core_grading');
<a name="l506"><span class="linenum"> 506</span></a>          }
<a name="l507"><span class="linenum"> 507</span></a>  
<a name="l508"><span class="linenum"> 508</span></a>  <span class="comment">        // get the current grading area record if it exists</span>
<a name="l509"><span class="linenum"> 509</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('areacache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/areacache.html">areacache</a>)) {
<a name="l510"><span class="linenum"> 510</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('areacache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/areacache.html">areacache</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('grading_areas', array(
<a name="l511"><span class="linenum"> 511</span></a>                  'contextid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>-&gt;id,
<a name="l512"><span class="linenum"> 512</span></a>                  'component' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('component')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/component.html">component</a>,
<a name="l513"><span class="linenum"> 513</span></a>                  'areaname'  =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('area')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/area.html">area</a>),
<a name="l514"><span class="linenum"> 514</span></a>              '*', <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>);
<a name="l515"><span class="linenum"> 515</span></a>          }
<a name="l516"><span class="linenum"> 516</span></a>  
<a name="l517"><span class="linenum"> 517</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('areacache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/areacache.html">areacache</a> === false) {
<a name="l518"><span class="linenum"> 518</span></a>  <span class="comment">            // no area record yet, create one</span>
<a name="l519"><span class="linenum"> 519</span></a>              <a class="var it1044" onMouseOver="hilite(1044)" onMouseOut="lolite()" onClick="logVariable('area')" href="../../_variables/area.html">$area</a> = array(
<a name="l520"><span class="linenum"> 520</span></a>                  'contextid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>-&gt;id,
<a name="l521"><span class="linenum"> 521</span></a>                  'component' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('component')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/component.html">component</a>,
<a name="l522"><span class="linenum"> 522</span></a>                  'areaname'  =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('area')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/area.html">area</a>);
<a name="l523"><span class="linenum"> 523</span></a>              <a class="var it1948" onMouseOver="hilite(1948)" onMouseOut="lolite()" onClick="logVariable('areaid')" href="../../_variables/areaid.html">$areaid</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('grading_areas', <a class="var it1044" onMouseOver="hilite(1044)" onMouseOut="lolite()" onClick="logVariable('area')" href="../../_variables/area.html">$area</a>);
<a name="l524"><span class="linenum"> 524</span></a>  <span class="comment">            // reload the cache</span>
<a name="l525"><span class="linenum"> 525</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('areacache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/areacache.html">areacache</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('grading_areas', array('id' =&gt; <a class="var it1948" onMouseOver="hilite(1948)" onMouseOut="lolite()" onClick="logVariable('areaid')" href="../../_variables/areaid.html">$areaid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l526"><span class="linenum"> 526</span></a>          }
<a name="l527"><span class="linenum"> 527</span></a>  
<a name="l528"><span class="linenum"> 528</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'/grade/grading/form/'.<a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../_variables/method.html">$method</a>.'/lib.php');
<a name="l529"><span class="linenum"> 529</span></a>          <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../_variables/classname.html">$classname</a> = 'gradingform_'.<a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../_variables/method.html">$method</a>.'_controller';
<a name="l530"><span class="linenum"> 530</span></a>  
<a name="l531"><span class="linenum"> 531</span></a>          return new <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../_variables/classname.html">$classname</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('component')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/component.html">component</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('area')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/area.html">area</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('areacache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/areacache.html">areacache</a>-&gt;id);
<a name="l532"><span class="linenum"> 532</span></a>      }
<a name="l533"><span class="linenum"> 533</span></a>  
<a name="l534"><span class="linenum"> 534</span></a>      <span class="comment">/**</span>
<a name="l535"><span class="linenum"> 535</span></a>  <span class="comment">     * Returns the controller for the active method if it is available</span>
<a name="l536"><span class="linenum"> 536</span></a>  <span class="comment">     *</span>
<a name="l537"><span class="linenum"> 537</span></a>  <span class="comment">     * @return null|grading_controller</span>
<a name="l538"><span class="linenum"> 538</span></a>  <span class="comment">     */</span>
<a name="l539"><span class="linenum"> 539</span></a>      public function <a class="function" onClick="logFunction('get_active_controller')" href="../../_functions/get_active_controller.html" onMouseOver="funcPopup(event,'get_active_controller')">get_active_controller</a>() {
<a name="l540"><span class="linenum"> 540</span></a>          if (<a class="var it20395" onMouseOver="hilite(20395)" onMouseOut="lolite()" onClick="logVariable('gradingmethod')" href="../../_variables/gradingmethod.html">$gradingmethod</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_active_method')" href="../../_functions/get_active_method.html" onMouseOver="funcPopup(event,'get_active_method')">get_active_method</a>()) {
<a name="l541"><span class="linenum"> 541</span></a>              <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../_variables/controller.html">$controller</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_controller')" href="../../_functions/get_controller.html" onMouseOver="funcPopup(event,'get_controller')">get_controller</a>(<a class="var it20395" onMouseOver="hilite(20395)" onMouseOut="lolite()" onClick="logVariable('gradingmethod')" href="../../_variables/gradingmethod.html">$gradingmethod</a>);
<a name="l542"><span class="linenum"> 542</span></a>              if (<a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('is_form_available')" href="../../_functions/is_form_available.html" onMouseOver="funcPopup(event,'is_form_available')">is_form_available</a>()) {
<a name="l543"><span class="linenum"> 543</span></a>                  return <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../_variables/controller.html">$controller</a>;
<a name="l544"><span class="linenum"> 544</span></a>              }
<a name="l545"><span class="linenum"> 545</span></a>          }
<a name="l546"><span class="linenum"> 546</span></a>          return null;
<a name="l547"><span class="linenum"> 547</span></a>      }
<a name="l548"><span class="linenum"> 548</span></a>  
<a name="l549"><span class="linenum"> 549</span></a>      <span class="comment">/**</span>
<a name="l550"><span class="linenum"> 550</span></a>  <span class="comment">     * Returns the URL of the grading area management page</span>
<a name="l551"><span class="linenum"> 551</span></a>  <span class="comment">     *</span>
<a name="l552"><span class="linenum"> 552</span></a>  <span class="comment">     * @param moodle_url $returnurl optional URL of the page where the user should be sent back to</span>
<a name="l553"><span class="linenum"> 553</span></a>  <span class="comment">     * @return moodle_url</span>
<a name="l554"><span class="linenum"> 554</span></a>  <span class="comment">     */</span>
<a name="l555"><span class="linenum"> 555</span></a>      public function <a class="function" onClick="logFunction('get_management_url')" href="../../_functions/get_management_url.html" onMouseOver="funcPopup(event,'get_management_url')">get_management_url</a>(moodle_url <a class="var it1440" onMouseOver="hilite(1440)" onMouseOut="lolite()" onClick="logVariable('returnurl')" href="../../_variables/returnurl.html">$returnurl</a> = null) {
<a name="l556"><span class="linenum"> 556</span></a>  
<a name="l557"><span class="linenum"> 557</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_isset')" href="../../_functions/ensure_isset.html" onMouseOver="funcPopup(event,'ensure_isset')">ensure_isset</a>(array('context', 'component'));
<a name="l558"><span class="linenum"> 558</span></a>  
<a name="l559"><span class="linenum"> 559</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('areacache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/areacache.html">areacache</a>) {
<a name="l560"><span class="linenum"> 560</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('areaid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('areacache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/areacache.html">areacache</a>-&gt;id);
<a name="l561"><span class="linenum"> 561</span></a>          } else {
<a name="l562"><span class="linenum"> 562</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('contextid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>-&gt;id, 'component' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('component')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/component.html">component</a>);
<a name="l563"><span class="linenum"> 563</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('area')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/area.html">area</a>) {
<a name="l564"><span class="linenum"> 564</span></a>                  <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['area'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('area')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/area.html">area</a>;
<a name="l565"><span class="linenum"> 565</span></a>              }
<a name="l566"><span class="linenum"> 566</span></a>          }
<a name="l567"><span class="linenum"> 567</span></a>  
<a name="l568"><span class="linenum"> 568</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it1440" onMouseOver="hilite(1440)" onMouseOut="lolite()" onClick="logVariable('returnurl')" href="../../_variables/returnurl.html">$returnurl</a>)) {
<a name="l569"><span class="linenum"> 569</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['returnurl'] = <a class="var it1440" onMouseOver="hilite(1440)" onMouseOut="lolite()" onClick="logVariable('returnurl')" href="../../_variables/returnurl.html">$returnurl</a>-&gt;<a class="function" onClick="logFunction('out')" href="../../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(false);
<a name="l570"><span class="linenum"> 570</span></a>          }
<a name="l571"><span class="linenum"> 571</span></a>  
<a name="l572"><span class="linenum"> 572</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../grade/grading/manage.php.html">/grade/grading/manage.php</a>', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l573"><span class="linenum"> 573</span></a>      }
<a name="l574"><span class="linenum"> 574</span></a>  
<a name="l575"><span class="linenum"> 575</span></a>      <span class="comment">/**</span>
<a name="l576"><span class="linenum"> 576</span></a>  <span class="comment">     * Creates a new shared area to hold a grading form template</span>
<a name="l577"><span class="linenum"> 577</span></a>  <span class="comment">     *</span>
<a name="l578"><span class="linenum"> 578</span></a>  <span class="comment">     * Shared area are implemented as virtual gradable areas at the system level context</span>
<a name="l579"><span class="linenum"> 579</span></a>  <span class="comment">     * with the component set to core_grading and unique random area name.</span>
<a name="l580"><span class="linenum"> 580</span></a>  <span class="comment">     *</span>
<a name="l581"><span class="linenum"> 581</span></a>  <span class="comment">     * @param string $method the name of the plugin we create the area for</span>
<a name="l582"><span class="linenum"> 582</span></a>  <span class="comment">     * @return int the new area id</span>
<a name="l583"><span class="linenum"> 583</span></a>  <span class="comment">     */</span>
<a name="l584"><span class="linenum"> 584</span></a>      public function <a class="function" onClick="logFunction('create_shared_area')" href="../../_functions/create_shared_area.html" onMouseOver="funcPopup(event,'create_shared_area')">create_shared_area</a>(<a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../_variables/method.html">$method</a>) {
<a name="l585"><span class="linenum"> 585</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l586"><span class="linenum"> 586</span></a>  
<a name="l587"><span class="linenum"> 587</span></a>  <span class="comment">        // generate some unique random name for the new area</span>
<a name="l588"><span class="linenum"> 588</span></a>          <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = <a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../_variables/method.html">$method</a> . '_' . <a class="phpfunction" onClick="logFunction('sha1')" href="../../_functions/sha1.html" onMouseOver="phpfuncPopup(event,'sha1')">sha1</a>(<a class="phpfunction" onClick="logFunction('rand')" href="../../_functions/rand.html" onMouseOver="phpfuncPopup(event,'rand')">rand</a>().<a class="phpfunction" onClick="logFunction('uniqid')" href="../../_functions/uniqid.html" onMouseOver="phpfuncPopup(event,'uniqid')">uniqid</a>(<a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../_variables/method.html">$method</a>, true));
<a name="l589"><span class="linenum"> 589</span></a>  <span class="comment">        // create new area record</span>
<a name="l590"><span class="linenum"> 590</span></a>          <a class="var it1044" onMouseOver="hilite(1044)" onMouseOut="lolite()" onClick="logVariable('area')" href="../../_variables/area.html">$area</a> = array(
<a name="l591"><span class="linenum"> 591</span></a>              'contextid'     =&gt; <a class="class" onClick="logClass('context_system')" href="../../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>()-&gt;id,
<a name="l592"><span class="linenum"> 592</span></a>              'component'     =&gt; 'core_grading',
<a name="l593"><span class="linenum"> 593</span></a>              'areaname'      =&gt; <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>,
<a name="l594"><span class="linenum"> 594</span></a>              'activemethod'  =&gt; <a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../_variables/method.html">$method</a>);
<a name="l595"><span class="linenum"> 595</span></a>          return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('grading_areas', <a class="var it1044" onMouseOver="hilite(1044)" onMouseOut="lolite()" onClick="logVariable('area')" href="../../_variables/area.html">$area</a>);
<a name="l596"><span class="linenum"> 596</span></a>      }
<a name="l597"><span class="linenum"> 597</span></a>  
<a name="l598"><span class="linenum"> 598</span></a>      <span class="comment">/**</span>
<a name="l599"><span class="linenum"> 599</span></a>  <span class="comment">     * Removes all data associated with the given context</span>
<a name="l600"><span class="linenum"> 600</span></a>  <span class="comment">     *</span>
<a name="l601"><span class="linenum"> 601</span></a>  <span class="comment">     * This is called by {@link context::delete_content()}</span>
<a name="l602"><span class="linenum"> 602</span></a>  <span class="comment">     *</span>
<a name="l603"><span class="linenum"> 603</span></a>  <span class="comment">     * @param int $contextid context id</span>
<a name="l604"><span class="linenum"> 604</span></a>  <span class="comment">     */</span>
<a name="l605"><span class="linenum"> 605</span></a>      public static function <a class="function" onClick="logFunction('delete_all_for_context')" href="../../_functions/delete_all_for_context.html" onMouseOver="funcPopup(event,'delete_all_for_context')">delete_all_for_context</a>(<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>) {
<a name="l606"><span class="linenum"> 606</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l607"><span class="linenum"> 607</span></a>  
<a name="l608"><span class="linenum"> 608</span></a>          <a class="var it9033" onMouseOver="hilite(9033)" onMouseOut="lolite()" onClick="logVariable('areaids')" href="../../_variables/areaids.html">$areaids</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_fieldset_select')" href="../../_functions/get_fieldset_select.html" onMouseOver="funcPopup(event,'get_fieldset_select')">get_fieldset_select</a>('grading_areas', 'id', 'contextid = ?', array(<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>));
<a name="l609"><span class="linenum"> 609</span></a>          <a class="var it6183" onMouseOver="hilite(6183)" onMouseOut="lolite()" onClick="logVariable('methods')" href="../../_variables/methods.html">$methods</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(self::<a class="function" onClick="logFunction('available_methods')" href="../../_functions/available_methods.html" onMouseOver="funcPopup(event,'available_methods')">available_methods</a>(false));
<a name="l610"><span class="linenum"> 610</span></a>  
<a name="l611"><span class="linenum"> 611</span></a>          foreach(<a class="var it9033" onMouseOver="hilite(9033)" onMouseOut="lolite()" onClick="logVariable('areaids')" href="../../_variables/areaids.html">$areaids</a> as <a class="var it1948" onMouseOver="hilite(1948)" onMouseOut="lolite()" onClick="logVariable('areaid')" href="../../_variables/areaid.html">$areaid</a>) {
<a name="l612"><span class="linenum"> 612</span></a>              <a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('manager')" href="../../_variables/manager.html">$manager</a> = <a class="function" onClick="logFunction('get_grading_manager')" href="../../_functions/get_grading_manager.html" onMouseOver="funcPopup(event,'get_grading_manager')">get_grading_manager</a>(<a class="var it1948" onMouseOver="hilite(1948)" onMouseOut="lolite()" onClick="logVariable('areaid')" href="../../_variables/areaid.html">$areaid</a>);
<a name="l613"><span class="linenum"> 613</span></a>              foreach (<a class="var it6183" onMouseOver="hilite(6183)" onMouseOut="lolite()" onClick="logVariable('methods')" href="../../_variables/methods.html">$methods</a> as <a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../_variables/method.html">$method</a>) {
<a name="l614"><span class="linenum"> 614</span></a>                  <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../_variables/controller.html">$controller</a> = <a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('manager')" href="../../_variables/manager.html">$manager</a>-&gt;<a class="function" onClick="logFunction('get_controller')" href="../../_functions/get_controller.html" onMouseOver="funcPopup(event,'get_controller')">get_controller</a>(<a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../../_variables/method.html">$method</a>);
<a name="l615"><span class="linenum"> 615</span></a>                  <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('delete_definition')" href="../../_functions/delete_definition.html" onMouseOver="funcPopup(event,'delete_definition')">delete_definition</a>();
<a name="l616"><span class="linenum"> 616</span></a>              }
<a name="l617"><span class="linenum"> 617</span></a>          }
<a name="l618"><span class="linenum"> 618</span></a>  
<a name="l619"><span class="linenum"> 619</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_list')" href="../../_functions/delete_records_list.html" onMouseOver="funcPopup(event,'delete_records_list')">delete_records_list</a>('grading_areas', 'id', <a class="var it9033" onMouseOver="hilite(9033)" onMouseOut="lolite()" onClick="logVariable('areaids')" href="../../_variables/areaids.html">$areaids</a>);
<a name="l620"><span class="linenum"> 620</span></a>      }
<a name="l621"><span class="linenum"> 621</span></a>  
<a name="l622"><span class="linenum"> 622</span></a>      <span class="comment">/**</span>
<a name="l623"><span class="linenum"> 623</span></a>  <span class="comment">     * Helper method to tokenize the given string</span>
<a name="l624"><span class="linenum"> 624</span></a>  <span class="comment">     *</span>
<a name="l625"><span class="linenum"> 625</span></a>  <span class="comment">     * Splits the given string into smaller strings. This is a helper method for</span>
<a name="l626"><span class="linenum"> 626</span></a>  <span class="comment">     * full text searching in grading forms. If the given string is surrounded with</span>
<a name="l627"><span class="linenum"> 627</span></a>  <span class="comment">     * double quotes, the resulting array consists of a single item containing the</span>
<a name="l628"><span class="linenum"> 628</span></a>  <span class="comment">     * quoted content.</span>
<a name="l629"><span class="linenum"> 629</span></a>  <span class="comment">     *</span>
<a name="l630"><span class="linenum"> 630</span></a>  <span class="comment">     * Otherwise, string like 'grammar, english language' would be tokenized into</span>
<a name="l631"><span class="linenum"> 631</span></a>  <span class="comment">     * the three tokens 'grammar', 'english', 'language'.</span>
<a name="l632"><span class="linenum"> 632</span></a>  <span class="comment">     *</span>
<a name="l633"><span class="linenum"> 633</span></a>  <span class="comment">     * One-letter tokens like are dropped in non-phrase mode. Repeated tokens are</span>
<a name="l634"><span class="linenum"> 634</span></a>  <span class="comment">     * returned just once.</span>
<a name="l635"><span class="linenum"> 635</span></a>  <span class="comment">     *</span>
<a name="l636"><span class="linenum"> 636</span></a>  <span class="comment">     * @param string $needle</span>
<a name="l637"><span class="linenum"> 637</span></a>  <span class="comment">     * @return array</span>
<a name="l638"><span class="linenum"> 638</span></a>  <span class="comment">     */</span>
<a name="l639"><span class="linenum"> 639</span></a>      public static function <a class="function" onClick="logFunction('tokenize')" href="../../_functions/tokenize.html" onMouseOver="funcPopup(event,'tokenize')">tokenize</a>(<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('needle')" href="../../_variables/needle.html">$needle</a>) {
<a name="l640"><span class="linenum"> 640</span></a>  
<a name="l641"><span class="linenum"> 641</span></a>  <span class="comment">        // check if we are searching for the exact phrase</span>
<a name="l642"><span class="linenum"> 642</span></a>          if (<a class="phpfunction" onClick="logFunction('preg_match')" href="../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>('/^[\s]*&quot;[\s]*(.*?)[\s]*&quot;[\s]*$/', <a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('needle')" href="../../_variables/needle.html">$needle</a>, <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>)) {
<a name="l643"><span class="linenum"> 643</span></a>              <a class="var it310" onMouseOver="hilite(310)" onMouseOut="lolite()" onClick="logVariable('token')" href="../../_variables/token.html">$token</a> = <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>[1];
<a name="l644"><span class="linenum"> 644</span></a>              if (<a class="var it310" onMouseOver="hilite(310)" onMouseOut="lolite()" onClick="logVariable('token')" href="../../_variables/token.html">$token</a> === '') {
<a name="l645"><span class="linenum"> 645</span></a>                  return array();
<a name="l646"><span class="linenum"> 646</span></a>              } else {
<a name="l647"><span class="linenum"> 647</span></a>                  return array(<a class="var it310" onMouseOver="hilite(310)" onMouseOut="lolite()" onClick="logVariable('token')" href="../../_variables/token.html">$token</a>);
<a name="l648"><span class="linenum"> 648</span></a>              }
<a name="l649"><span class="linenum"> 649</span></a>          }
<a name="l650"><span class="linenum"> 650</span></a>  
<a name="l651"><span class="linenum"> 651</span></a>  <span class="comment">        // split the needle into smaller parts separated by non-word characters</span>
<a name="l652"><span class="linenum"> 652</span></a>          <a class="var it480" onMouseOver="hilite(480)" onMouseOut="lolite()" onClick="logVariable('tokens')" href="../../_variables/tokens.html">$tokens</a> = <a class="phpfunction" onClick="logFunction('preg_split')" href="../../_functions/preg_split.html" onMouseOver="phpfuncPopup(event,'preg_split')">preg_split</a>(&quot;/\W/u&quot;, <a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('needle')" href="../../_variables/needle.html">$needle</a>);
<a name="l653"><span class="linenum"> 653</span></a>  <span class="comment">        // keep just non-empty parts</span>
<a name="l654"><span class="linenum"> 654</span></a>          <a class="var it480" onMouseOver="hilite(480)" onMouseOut="lolite()" onClick="logVariable('tokens')" href="../../_variables/tokens.html">$tokens</a> = <a class="phpfunction" onClick="logFunction('array_filter')" href="../../_functions/array_filter.html" onMouseOver="phpfuncPopup(event,'array_filter')">array_filter</a>(<a class="var it480" onMouseOver="hilite(480)" onMouseOut="lolite()" onClick="logVariable('tokens')" href="../../_variables/tokens.html">$tokens</a>);
<a name="l655"><span class="linenum"> 655</span></a>  <span class="comment">        // distinct</span>
<a name="l656"><span class="linenum"> 656</span></a>          <a class="var it480" onMouseOver="hilite(480)" onMouseOut="lolite()" onClick="logVariable('tokens')" href="../../_variables/tokens.html">$tokens</a> = <a class="phpfunction" onClick="logFunction('array_unique')" href="../../_functions/array_unique.html" onMouseOver="phpfuncPopup(event,'array_unique')">array_unique</a>(<a class="var it480" onMouseOver="hilite(480)" onMouseOut="lolite()" onClick="logVariable('tokens')" href="../../_variables/tokens.html">$tokens</a>);
<a name="l657"><span class="linenum"> 657</span></a>  <span class="comment">        // drop one-letter tokens</span>
<a name="l658"><span class="linenum"> 658</span></a>          foreach (<a class="var it480" onMouseOver="hilite(480)" onMouseOut="lolite()" onClick="logVariable('tokens')" href="../../_variables/tokens.html">$tokens</a> as <a class="var it12312" onMouseOver="hilite(12312)" onMouseOut="lolite()" onClick="logVariable('ix')" href="../../_variables/ix.html">$ix</a> =&gt; <a class="var it310" onMouseOver="hilite(310)" onMouseOut="lolite()" onClick="logVariable('token')" href="../../_variables/token.html">$token</a>) {
<a name="l659"><span class="linenum"> 659</span></a>              if (<a class="function" onClick="logFunction('strlen')" href="../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it310" onMouseOver="hilite(310)" onMouseOut="lolite()" onClick="logVariable('token')" href="../../_variables/token.html">$token</a>) == 1) {
<a name="l660"><span class="linenum"> 660</span></a>                  unset(<a class="var it480" onMouseOver="hilite(480)" onMouseOut="lolite()" onClick="logVariable('tokens')" href="../../_variables/tokens.html">$tokens</a>[<a class="var it12312" onMouseOver="hilite(12312)" onMouseOut="lolite()" onClick="logVariable('ix')" href="../../_variables/ix.html">$ix</a>]);
<a name="l661"><span class="linenum"> 661</span></a>              }
<a name="l662"><span class="linenum"> 662</span></a>          }
<a name="l663"><span class="linenum"> 663</span></a>  
<a name="l664"><span class="linenum"> 664</span></a>          return <a class="phpfunction" onClick="logFunction('array_values')" href="../../_functions/array_values.html" onMouseOver="phpfuncPopup(event,'array_values')">array_values</a>(<a class="var it480" onMouseOver="hilite(480)" onMouseOut="lolite()" onClick="logVariable('tokens')" href="../../_variables/tokens.html">$tokens</a>);
<a name="l665"><span class="linenum"> 665</span></a>      }
<a name="l666"><span class="linenum"> 666</span></a>  
<a name="l667"><span class="linenum"> 667</span></a>  <span class="comment">    // //////////////////////////////////////////////////////////////////////////</span>
<a name="l668"><span class="linenum"> 668</span></a>  
<a name="l669"><span class="linenum"> 669</span></a>      <span class="comment">/**</span>
<a name="l670"><span class="linenum"> 670</span></a>  <span class="comment">     * Make sure that the given properties were set to some not-null value</span>
<a name="l671"><span class="linenum"> 671</span></a>  <span class="comment">     *</span>
<a name="l672"><span class="linenum"> 672</span></a>  <span class="comment">     * @param array $properties the list of properties</span>
<a name="l673"><span class="linenum"> 673</span></a>  <span class="comment">     * @throws coding_exception</span>
<a name="l674"><span class="linenum"> 674</span></a>  <span class="comment">     */</span>
<a name="l675"><span class="linenum"> 675</span></a>      private function <a class="function" onClick="logFunction('ensure_isset')" href="../../_functions/ensure_isset.html" onMouseOver="funcPopup(event,'ensure_isset')">ensure_isset</a>(array <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a>) {
<a name="l676"><span class="linenum"> 676</span></a>          foreach (<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../../_variables/properties.html">$properties</a> as <a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../../_variables/property.html">$property</a>) {
<a name="l677"><span class="linenum"> 677</span></a>              if (!isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../../_variables/property.html">$property</a>)) {
<a name="l678"><span class="linenum"> 678</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('The property &quot;'.<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../../_variables/property.html">$property</a>.'&quot; is not set.');
<a name="l679"><span class="linenum"> 679</span></a>              }
<a name="l680"><span class="linenum"> 680</span></a>          }
<a name="l681"><span class="linenum"> 681</span></a>      }
<a name="l682"><span class="linenum"> 682</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'add': ['add', 'Add HashTable item ', [['lib/phpexcel/PHPExcel','HashTable.php',78],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',95],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',109],['lib/google/src/Google/Http','Batch.php',52],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',37],['lib','csslib.php',1508],['lib/horde/framework/Horde/Mail/Rfc822','List.php',116],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',33],['lib/horde/framework/Horde/Support','ConsistentHash.php',148],['lib/horde/framework/Horde','Variables.php',297],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',29],['lib','outputcomponents.php',2705],['lib','outputcomponents.php',3380],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',436],['lib','adminlib.php',735],['lib','adminlib.php',894],['lib','adminlib.php',1446],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',27],['lib/xhprof/xhprof_html/jquery','jquery-1.2.6.js',3450],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',80],['lib/google/src/Google/Service','Webmasters.php',436],['lib','navigationlib.php',304],['lib','navigationlib.php',761],['lib','navigationlib.php',3305],['lib','navigationlib.php',3583],['lib/horde/framework/Horde/Imap/Client','Ids.php',155],['backup/cc/cc_lib/gral_lib','cssparser.php',121],['lib/xhprof/xhprof_html/jquery','jquery.autocomplete.js',428],['lib/horde/framework/Horde','Stream.php',116],['comment','lib.php',679],['lib/mustache/src/Mustache','HelperCollection.php',56],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',207],['backup/cc/cc_lib','cc_utils.php',395],['backup/cc/cc_lib','cc_utils.php',454],['lib/lessphp/Output','Mapped.php',50],['lib','licenselib.php',32],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',50],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',74],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',14],['lib/horde/framework/Horde/Mail/Rfc822','GroupList.php',25],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',31],['tag/classes','tag.php',152],['blog','locallib.php',242],['lib/classes','notification.php',50],['lib/lessphp','Output.php',18],['tag/classes/output','tagfeed.php',61],['backup/cc','validator.php',51],['lib/horde/framework/Horde/Stream','TempString.php',118],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',11]], 6188],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'instance': ['instance', 'Returns an instance of the cache_factor method. ', [['cache','disabledlib.php',171],['cache','disabledlib.php',296],['lib/classes','useragent.php',101],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['search/classes','manager.php',109],['cache','locallib.php',52],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['lib/classes','plugin_manager.php',103],['lib/htmlpurifier','HTMLPurifier.php',251],['course/format','lib.php',156],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['admin/tool/installaddon/classes','installer.php',40],['lib','modinfolib.php',373],['cache/classes','helper.php',76],['lib/tests','string_manager_standard_test.php',124],['lib/portfolio','exporter.php',251],['lib/classes/update','validator.php',88],['search/classes','document_factory.php',49],['lib','accesslib.php',6235],['lib','accesslib.php',6487],['lib','accesslib.php',6665],['lib','accesslib.php',6919],['lib','accesslib.php',7180],['lib','accesslib.php',7392],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443],['lib','filterlib.php',80],['search/tests/fixtures','testable_core_search.php',43],['lib/tests/fixtures','testable_update_checker.php',45],['backup/cc','validator.php',35],['cache/classes','config.php',87],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29]], 4647],
'normalize_component': ['normalize_component', 'Normalize the component name using the "frankenstyle" names. ', [['lib','deprecatedlib.php',211],['lib/classes','component.php',1016]], 89],
'create_shared_area': ['create_shared_area', 'Creates a new shared area to hold a grading form template ', [['grade/grading','lib.php',575]], 1],
'set_context': ['set_context', 'Sets the context the manager operates on ', [['grade/grading','lib.php',116],['lib','pagelib.php',970],['mod/assign','locallib.php',274],['lib/portfolio','caller.php',568]], 278],
'get_available_methods': ['get_available_methods', 'Returns the list of available grading methods in the given context ', [['grade/grading','lib.php',263]], 6],
'ensure_isset': ['ensure_isset', 'Make sure that the given properties were set to some not-null value ', [['grade/grading','lib.php',669]], 10],
'set_component': ['set_component', 'Setter for $component. ', [['lib/classes/task','task_base.php',117],['grade/grading','lib.php',135],['lib/classes/message/inbound','handler.php',110],['comment','lib.php',272]], 9],
'delete_all_for_context': ['delete_all_for_context', 'Removes all data associated with the given context ', [['grade/grading','lib.php',598],['repository','lib.php',1983]], 4],
'instance_by_id': ['instance_by_id', 'Get a context instance as an object, from a given context id. ', [['lib','accesslib.php',5434]], 235],
'debugging': ['debugging', 'Standard Debugging Function ', [['lib','weblib.php',3012]], 1007],
'get_area_title': ['get_area_title', 'Returns the localized title of the currently set area ', [['grade/grading','lib.php',202]], 8],
'get_active_controller': ['get_active_controller', 'Returns the controller for the active method if it is available ', [['grade/grading','lib.php',534]], 7],
'set_area': ['set_area', 'Sets the area the manager operates on ', [['grade/grading','lib.php',155]], 8],
'out': ['out', 'Returns the selector for use in a CSS rule ', [['lib','csslib.php',1540],['lib','csslib.php',1698],['lib','csslib.php',2078],['lib','csslib.php',2162],['lib','csslib.php',2306],['lib','csslib.php',2495],['lib','csslib.php',3240],['mod/feedback/classes','responses_table.php',332],['lib','moodlelib.php',9729],['lib','weblib.php',545],['lib','tablelib.php',1594],['report/loglive/classes','table_log_ajax.php',37]], 626],
'get_available_areas': ['get_available_areas', 'Returns the list of gradable areas in the given context and component ', [['grade/grading','lib.php',305]], 5],
'get_controller': ['get_controller', 'Returns the controller object. ', [['backup/util/ui','base_ui.class.php',302],['grade/grading','lib.php',488],['grade/grading/form','lib.php',832]], 72],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'plugin_callback': ['plugin_callback', 'Invoke plugin\'s callback functions ', [['lib','moodlelib.php',7396]], 13],
'delete_records_list': ['delete_records_list', 'Delete the records from a table where one field match one list of values. ', [['lib/dml','moodle_database.php',1883]], 37],
'available_methods': ['available_methods', 'Returns the list of installed grading plugins together, optionally extended with a simple direct grading. ', [['grade/grading','lib.php',241]], 7],
'extend_settings_navigation': ['extend_settings_navigation', 'Extends the settings navigation with the grading settings ', [['grade/grading','lib.php',418],['grade/grading/form','lib.php',219],['grade/grading/form/rubric','lib.php',55],['grade/grading/form/guide','lib.php',58]], 3],
'strlen': ['strlen', 'Counts the number of characters. Unit-tested by Kasper (single byte charsets only) ', [['lib/typo3','class.t3lib_cs.php',1520],['lib/classes','text.php',305]], 1649],
'get_component_title': ['get_component_title', 'Returns a text describing the context and the component ', [['grade/grading','lib.php',165]], 4],
'tokenize': ['tokenize', '', [['lib/editor/atto/yui/build/moodle-editor_atto-rangy','moodle-editor_atto-rangy-debug.js',6271],['lib/jquery/ui-1.11.4/external/jquery','jquery.js',2398],['grade/grading','lib.php',622],['lib/editor/atto/yui/src/rangy/js','rangy-textrange.js',172],['lib/editor/atto/yui/build/moodle-editor_atto-rangy','moodle-editor_atto-rangy.js',6271],['lib/mustache/src/Mustache','Engine.php',717]], 23],
'get_active_method': ['get_active_method', 'Returns the currently active grading method in the gradable area ', [['grade/grading','lib.php',333]], 15],
'get_context': ['get_context', 'Return the course context for new modules, or the module context for existing modules. ', [['course','moodleform_mod.php',148],['availability/classes','info_module.php',72],['availability/classes','info_section.php',55],['competency/classes','user_competency_plan.php',83],['availability/tests/fixtures','mock_info.php',59],['mod/feedback/classes','responses_table.php',146],['competency/classes','competency.php',730],['competency/classes','plan.php',258],['mod/quiz','attemptlib.php',220],['competency/classes','user_competency.php',216],['grade/grading','lib.php',107],['lib','modinfolib.php',1486],['lib','badgeslib.php',157],['competency/classes/external','exporter.php',172],['comment','lib.php',994],['grade/grading/form','lib.php',102],['mod/assign','locallib.php',1307],['competency/classes','user_evidence.php',90],['competency/classes','user_competency_course.php',80],['lib/classes/event','base.php',627],['enrol','locallib.php',921],['lib','coursecatlib.php',2369],['lib','coursecatlib.php',3065],['competency/classes','course_competency_settings.php',133],['lib/tests/behat','behat_data_generators.php',769],['competency/classes','competency_framework.php',70],['competency/classes','template.php',139]], 1033],
'set_field': ['set_field', 'Set a single field in every table record where all the given conditions met. ', [['lib/dml','moodle_database.php',1737],['availability/condition/profile/tests','condition_test.php',349]], 485],
'get_management_url': ['get_management_url', 'Returns the URL of the grading area management page ', [['grade/grading','lib.php',549]], 8],
'get_grading_manager': ['get_grading_manager', 'Factory method returning an instance of the grading manager ', [['grade/grading','lib.php',27]], 37],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'delete_definition': ['delete_definition', 'Deletes the form definition and all the associated data ', [['grade/grading/form','lib.php',544]], 3],
'is_form_available': ['is_form_available', 'Is the grading form defined and ready for usage? ', [['grade/grading/form','lib.php',150]], 6],
'get_area': ['get_area', 'Returns grading manager area name ', [['grade/grading','lib.php',146],['cache/classes','definition.php',642],['grade/grading/form','lib.php',120]], 6],
'extend_navigation': ['extend_navigation', 'Extends the module navigation with the advanced grading information ', [['grade/grading','lib.php',467],['grade/grading/form','lib.php',233],['grade/grading/form/rubric','lib.php',71],['grade/grading/form/guide','lib.php',74]], 2],
'get_context_info_array': ['get_context_info_array', 'Returns context instance plus related course and cm instances ', [['lib','accesslib.php',1419]], 55],
'get_component': ['get_component', 'Gets the Frankenstyle component name for this plugin. ', [['availability/classes','frontend.php',86],['lib/classes/task','task_base.php',125],['lib/filebrowser','virtual_root_file.php',191],['grade/grading','lib.php',126],['lib/filestorage','stored_file.php',661],['cache/classes','definition.php',650],['comment','lib.php',975],['grade/grading/form','lib.php',111]], 71],
'get_plugin_list': ['get_plugin_list', 'Use when listing real plugins of one type. ', [['lib','deprecatedlib.php',150],['lib/classes','component.php',796],['admin/tool/monitor/classes','eventlist.php',176]], 191],
'available_areas': ['available_areas', 'Returns the list of gradable areas provided by the given component ', [['grade/grading','lib.php',279]], 2],
'get_fieldset_select': ['get_fieldset_select', 'Selects records and return values of chosen field as an array which match a particular WHERE clause. ', [['lib/dml','moodle_database.php',1608]], 32],
'clean_param': ['clean_param', 'Used by {@link optional_param()} and {@link required_param()} to clean the variables and/or cast to specific types, based on an options field. <code> $course->format = clean_param($course->format, PARAM_ALPHA); $selectedgradeitem = clean_param($selectedgradeitem, PARAM_INT); </code> ', [['lib','moodlelib.php',769]], 635],
'load': ['load', 'Load the class from cache using `require_once`. ', [['lib/mustache/src/Mustache/Cache','FilesystemCache.php',39],['lib/phpexcel/PHPExcel/Reader','Excel2007.php',320],['lib/phpexcel/PHPExcel/Reader','OOCalc.php',284],['lib/pear/HTML/QuickForm','select.php',430],['lib/phpexcel/PHPExcel/Reader','Excel5.php',612],['lib/mustache/src/Mustache/Cache','NoopCache.php',20],['lib/adodb','adodb-active-record.inc.php',775],['backup/cc/cc_lib','xmlbase.php',92],['lib/mustache/src/Mustache/Loader','FilesystemLoader.php',69],['lib/simplepie/library/SimplePie/Cache','File.php',118],['lib/mustache/src/Mustache/Loader','CascadingLoader.php',48],['lib/phpexcel/PHPExcel','Autoloader.php',58],['lib/phpexcel/PHPExcel/Reader','IReader.php',38],['grade/grading','lib.php',227],['mod/lesson','locallib.php',1022],['mod/lesson','locallib.php',2240],['mod/lesson','locallib.php',3200],['lib/phpexcel/PHPExcel','IOFactory.php',180],['lib/mustache/src/Mustache','Cache.php',20],['lib','outputlib.php',432],['cache/classes','definition.php',335],['lib/phpexcel/PHPExcel/Reader/Excel5','Escher.php',87],['lib/adodb','adodb-active-recordx.inc.php',813],['lib/simplepie/library/SimplePie/Cache','Base.php',87],['lib/phpexcel/PHPExcel/Reader','HTML.php',143],['lib/simplepie/library/SimplePie/Cache','MySQL.php',286],['lib/mustache/src/Mustache/Loader','InlineLoader.php',87],['lib/mustache/src/Mustache','Loader.php',17],['lib/phpexcel/PHPExcel/Reader','CSV.php',203],['lib/simplepie/library/SimplePie/Cache','Memcache.php',123],['lib/mustache/src/Mustache/Loader','StringLoader.php',28],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',44],['lib/phpunit/classes','autoloader.php',46],['lib/phpexcel/PHPExcel/Reader','Excel2003XML.php',216],['lib/htmlpurifier/HTMLPurifier','Language.php',69],['lib/phpexcel/PHPExcel/Reader','SYLK.php',190],['calendar','lib.php',2666],['lib/phpexcel/PHPExcel/Reader','Gnumeric.php',189],['lib/mustache/src/Mustache/Loader','ArrayLoader.php',41],['cache/classes','config.php',128]], 190],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 2229],
'set_active_method': ['set_active_method', 'Sets the currently active grading method in the gradable area ', [['grade/grading','lib.php',360]], 6],
'defined': ['defined', '', [], 4731],
'strval': ['strval', '', [], 151],
'preg_match': ['preg_match', '', [], 1286],
'array_unique': ['array_unique', '', [], 171],
'array_keys': ['array_keys', '', [], 1256],
'reset': ['reset', '', [], 1213],
'array_key_exists': ['array_key_exists', '', [], 1445],
'sha1': ['sha1', '', [], 186],
'array_values': ['array_values', '', [], 342],
'uniqid': ['uniqid', '', [], 86],
'count': ['count', '', [], 4095],
'is_numeric': ['is_numeric', '', [], 672],
'preg_split': ['preg_split', '', [], 146],
'key': ['key', '', [], 204],
'is_null': ['is_null', '', [], 2003],
'is_object': ['is_object', '', [], 544],
'array_filter': ['array_filter', '', [], 70],
'rand': ['rand', '', [], 99]};
CLASS_DATA={
'coding_exception': ['coding_exception', 'Exception indicating programming error, must be fixed by a programer. For example a core API might throw this type of exception if a plugin calls it incorrectly. ', [['lib','setuplib.php',239]], 1200],
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',238]], 3088],
'settings_navigation': ['settings_navigation', 'Class used to manage the settings option for the current page ', [['lib','navigationlib.php',3434]], 17],
'grading_manager': ['grading_manager', 'General class providing access to common grading features ', [['grade/grading','lib.php',76]], 10],
'moodle_exception': ['moodle_exception', 'Base Moodle Exception class ', [['lib','setuplib.php',75]], 606],
'context_system': ['context_system', 'System context class ', [['lib','accesslib.php',6157]], 1147],
'core_component': ['core_component', 'Collection of components related methods. ', [['lib/classes','component.php',41]], 511]};
CONST_DATA={
'DEBUG_DEVELOPER': ['DEBUG_DEVELOPER', '', [['lib','setuplib.php',40]], 736],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153],
'CONTEXT_MODULE': ['CONTEXT_MODULE', '', [['lib','accesslib.php',150]], 466],
'PARAM_COMPONENT': ['PARAM_COMPONENT', '', [['lib','moodlelib.php',310]], 113],
'IGNORE_MISSING': ['IGNORE_MISSING', '', [['lib','dmllib.php',48]], 215],
'CONTEXT_SYSTEM': ['CONTEXT_SYSTEM', '', [['lib','accesslib.php',142]], 184],
'CONTEXT_COURSE': ['CONTEXT_COURSE', '', [['lib','accesslib.php',148]], 441],
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1384]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
