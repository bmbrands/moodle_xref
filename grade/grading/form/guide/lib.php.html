<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : Detail view of lib.php</title>
    <link rel="stylesheet" href="../../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../../';
subdir='grade/grading/form/guide';
filename='lib.php.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="details-heading"><a href="./index.html">/grade/grading/form/guide/</a> -> <a href="lib.php.source.html">lib.php</a> (summary)</h2>
<div class="details-summary">
<p class="viewlinks">[<a href="lib.php.source.html">Source view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="../../../../_stats.html">Project Stats</a>]</p>
<p><b>Grading method controller for the guide plugin</b></p>
<table>
<tr><td align="right">Copyright: </td><td>2012 Dan Marsden <<a href="mailto:dan@danmarsden.com">dan@danmarsden.com</a>></td></tr>
<tr><td align="right">License: </td><td><a href="http://www.gnu.org/copyleft/gpl.html" target="_blank">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later</td></tr>
<tr><td align="right">File Size: </td><td>984 lines (44 kb)</td></tr>
<tr><td align="right">Included or required:</td><td>0 times</td></tr>
<tr><td align="right" valign="top">Referenced: </td><td>0 times</td></tr>
<tr><td align="right" valign="top">Includes or requires: </td><td>0 files</td></tr>
</table>
<h3>Defines 2 classes</h3>
<div class="inset">
<p><b>gradingform_guide_controller::</b> (22 methods):<br>
&nbsp;&nbsp;<a href="#extend_settings_navigation">extend_settings_navigation</a>()<br>
&nbsp;&nbsp;<a href="#extend_navigation">extend_navigation</a>()<br>
&nbsp;&nbsp;<a href="#update_definition">update_definition</a>()<br>
&nbsp;&nbsp;<a href="#update_or_check_guide">update_or_check_guide</a>()<br>
&nbsp;&nbsp;<a href="#mark_for_regrade">mark_for_regrade</a>()<br>
&nbsp;&nbsp;<a href="#load_definition">load_definition</a>()<br>
&nbsp;&nbsp;<a href="#get_default_options">get_default_options</a>()<br>
&nbsp;&nbsp;<a href="#get_options">get_options</a>()<br>
&nbsp;&nbsp;<a href="#get_definition_for_editing">get_definition_for_editing</a>()<br>
&nbsp;&nbsp;<a href="#get_definition_copy">get_definition_copy</a>()<br>
&nbsp;&nbsp;<a href="#description_form_field_options">description_form_field_options</a>()<br>
&nbsp;&nbsp;<a href="#get_formatted_description">get_formatted_description</a>()<br>
&nbsp;&nbsp;<a href="#get_renderer">get_renderer</a>()<br>
&nbsp;&nbsp;<a href="#render_preview">render_preview</a>()<br>
&nbsp;&nbsp;<a href="#delete_plugin_definition">delete_plugin_definition</a>()<br>
&nbsp;&nbsp;<a href="#get_or_create_instance">get_or_create_instance</a>()<br>
&nbsp;&nbsp;<a href="#render_grade">render_grade</a>()<br>
&nbsp;&nbsp;<a href="#sql_search_from_tables">sql_search_from_tables</a>()<br>
&nbsp;&nbsp;<a href="#sql_search_where">sql_search_where</a>()<br>
&nbsp;&nbsp;<a href="#get_min_max_score">get_min_max_score</a>()<br>
&nbsp;&nbsp;<a href="#get_external_definition_details">get_external_definition_details</a>()<br>
&nbsp;&nbsp;<a href="#get_external_instance_filling_details">get_external_instance_filling_details</a>()<br>
</p>
<p><b>gradingform_guide_instance::</b> (9 methods):<br>
&nbsp;&nbsp;<a href="#cancel">cancel</a>()<br>
&nbsp;&nbsp;<a href="#copy">copy</a>()<br>
&nbsp;&nbsp;<a href="#is_empty_form">is_empty_form</a>()<br>
&nbsp;&nbsp;<a href="#validate_grading_element">validate_grading_element</a>()<br>
&nbsp;&nbsp;<a href="#get_guide_filling">get_guide_filling</a>()<br>
&nbsp;&nbsp;<a href="#update">update</a>()<br>
&nbsp;&nbsp;<a href="#clear_attempt">clear_attempt</a>()<br>
&nbsp;&nbsp;<a href="#get_grade">get_grade</a>()<br>
&nbsp;&nbsp;<a href="#render_grading_element">render_grading_element</a>()<br>
</p>
</div>
</div>
<br><div class="details-funclist">
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="gradingform_guide_controller"><b>gradingform_guide_controller</b></a>&nbsp;&nbsp;- <a href="../../../../_classes/gradingform_guide_controller.html"><small>X-Ref</small></a>
</p>
<b>This controller encapsulates the guide grading logic<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="extend_settings_navigation" onClick="logFunction('extend_settings_navigation', 'lib.php.source.html#l58')" href="lib.php.source.html#l58">extend_settings_navigation</a>(settings_navigation <a href="../../../../_variables/settingsnav.html">$settingsnav</a>, navigation_node <a href="../../../../_variables/node.html">$node</a>=null)&nbsp;&nbsp;
<a href="../../../../_functions/extend_settings_navigation.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Extends the module settings navigation with the guide grading settings<BR>
</b><BR>This function is called when the context for the page is an activity module with the<BR>
FEATURE_ADVANCED_GRADING, the user has the permission moodle/grade:managegradingforms<BR>
and there is an area with the active grading method set to 'guide'.<BR>
<BR>
<b>param:</b> settings_navigation $settingsnav {@link settings_navigation}<br>
<b>param:</b> navigation_node $node {@link navigation_node}<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="extend_navigation" onClick="logFunction('extend_navigation', 'lib.php.source.html#l74')" href="lib.php.source.html#l74">extend_navigation</a>(global_navigation <a href="../../../../_variables/navigation.html">$navigation</a>, navigation_node <a href="../../../../_variables/node.html">$node</a>=null)&nbsp;&nbsp;
<a href="../../../../_functions/extend_navigation.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Extends the module navigation<BR>
</b><BR>This function is called when the context for the page is an activity module with the<BR>
FEATURE_ADVANCED_GRADING and there is an area with the active grading method set to the given plugin.<BR>
<BR>
<b>param:</b> global_navigation $navigation {@link global_navigation}<br>
<b>param:</b> navigation_node $node {@link navigation_node}<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="update_definition" onClick="logFunction('update_definition', 'lib.php.source.html#l96')" href="lib.php.source.html#l96">update_definition</a>(stdClass <a href="../../../../_variables/newdefinition.html">$newdefinition</a>, <a href="../../../../_variables/usermodified.html">$usermodified</a> = null)&nbsp;&nbsp;
<a href="../../../../_functions/update_definition.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Saves the guide definition into the database<BR>
</b><BR><b>param:</b> stdClass $newdefinition guide definition data as coming from gradingform_guide_editguide::get_data()<br>
<b>param:</b> int $usermodified optional userid of the author of the definition, defaults to the current user<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="update_or_check_guide" onClick="logFunction('update_or_check_guide', 'lib.php.source.html#l110')" href="lib.php.source.html#l110">update_or_check_guide</a>(stdClass <a href="../../../../_variables/newdefinition.html">$newdefinition</a>, <a href="../../../../_variables/usermodified.html">$usermodified</a> = null, <a href="../../../../_variables/doupdate.html">$doupdate</a> = false)&nbsp;&nbsp;
<a href="../../../../_functions/update_or_check_guide.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Either saves the guide definition into the database or check if it has been changed.<BR>
</b><BR>Returns the level of changes:<BR>
0 - no changes<BR>
1 - only texts or criteria sortorders are changed, students probably do not require re-grading<BR>
2 - added levels but maximum score on guide is the same, students still may not require re-grading<BR>
3 - removed criteria or changed number of points, students require re-grading but may be re-graded automatically<BR>
4 - removed levels - students require re-grading and not all students may be re-graded automatically<BR>
5 - added criteria - all students require manual re-grading<BR>
<BR>
<b>param:</b> stdClass $newdefinition guide definition data as coming from gradingform_guide_editguide::get_data()<br>
<b>param:</b> int|null $usermodified optional userid of the author of the definition, defaults to the current user<br>
<b>param:</b> bool $doupdate if true actually updates DB, otherwise performs a check<br>
<b>return:</b> int<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="mark_for_regrade" onClick="logFunction('mark_for_regrade', 'lib.php.source.html#l269')" href="lib.php.source.html#l269">mark_for_regrade</a>()&nbsp;&nbsp;
<a href="../../../../_functions/mark_for_regrade.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Marks all instances filled with this guide with the status INSTANCE_STATUS_NEEDUPDATE<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="load_definition" onClick="logFunction('load_definition', 'lib.php.source.html#l281')" href="lib.php.source.html#l281">load_definition</a>()&nbsp;&nbsp;
<a href="../../../../_functions/load_definition.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Loads the guide form definition if it exists<BR>
</b><BR>There is a new array called 'guide_criteria' appended to the list of parent's definition properties.<BR>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_default_options" onClick="logFunction('get_default_options', 'lib.php.source.html#l350')" href="lib.php.source.html#l350">get_default_options</a>()&nbsp;&nbsp;
<a href="../../../../_functions/get_default_options.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the default options for the guide display<BR>
</b><BR><b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_options" onClick="logFunction('get_options', 'lib.php.source.html#l363')" href="lib.php.source.html#l363">get_options</a>()&nbsp;&nbsp;
<a href="../../../../_functions/get_options.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Gets the options of this guide definition, fills the missing options with default values<BR>
</b><BR><b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_definition_for_editing" onClick="logFunction('get_definition_for_editing', 'lib.php.source.html#l379')" href="lib.php.source.html#l379">get_definition_for_editing</a>(<a href="../../../../_variables/addemptycriterion.html">$addemptycriterion</a> = false)&nbsp;&nbsp;
<a href="../../../../_functions/get_definition_for_editing.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Converts the current definition into an object suitable for the editor form's set_data()<BR>
</b><BR><b>param:</b> bool $addemptycriterion whether to add an empty criterion if the guide is completely empty (just being created)<br>
<b>return:</b> stdClass<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_definition_copy" onClick="logFunction('get_definition_copy', 'lib.php.source.html#l415')" href="lib.php.source.html#l415">get_definition_copy</a>(gradingform_controller <a href="../../../../_variables/target.html">$target</a>)&nbsp;&nbsp;
<a href="../../../../_functions/get_definition_copy.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the form definition suitable for cloning into another area<BR>
</b><BR><b>param:</b> gradingform_controller $target the controller of the new copy<br>
<b>return:</b> stdClass definition structure to pass to the target's {@link update_definition()}<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="description_form_field_options" onClick="logFunction('description_form_field_options', 'lib.php.source.html#l443')" href="lib.php.source.html#l443">description_form_field_options</a>(<a href="../../../../_variables/context.html">$context</a>)&nbsp;&nbsp;
<a href="../../../../_functions/description_form_field_options.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Options for displaying the guide description field in the form<BR>
</b><BR><b>param:</b> context $context<br>
<b>return:</b> array options for the form description field<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_formatted_description" onClick="logFunction('get_formatted_description', 'lib.php.source.html#l458')" href="lib.php.source.html#l458">get_formatted_description</a>()&nbsp;&nbsp;
<a href="../../../../_functions/get_formatted_description.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Formats the definition description for display on page<BR>
</b><BR><b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_renderer" onClick="logFunction('get_renderer', 'lib.php.source.html#l482')" href="lib.php.source.html#l482">get_renderer</a>(moodle_page <a href="../../../../_variables/page.html">$page</a>)&nbsp;&nbsp;
<a href="../../../../_functions/get_renderer.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the guide plugin renderer<BR>
</b><BR><b>param:</b> moodle_page $page the target page<br>
<b>return:</b> gradingform_guide_renderer<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="render_preview" onClick="logFunction('render_preview', 'lib.php.source.html#l492')" href="lib.php.source.html#l492">render_preview</a>(moodle_page <a href="../../../../_variables/page.html">$page</a>)&nbsp;&nbsp;
<a href="../../../../_functions/render_preview.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the HTML code displaying the preview of the grading form<BR>
</b><BR><b>param:</b> moodle_page $page the target page<br>
<b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="delete_plugin_definition" onClick="logFunction('delete_plugin_definition', 'lib.php.source.html#l526')" href="lib.php.source.html#l526">delete_plugin_definition</a>()&nbsp;&nbsp;
<a href="../../../../_functions/delete_plugin_definition.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Deletes the guide definition and all the associated information<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_or_create_instance" onClick="logFunction('get_or_create_instance', 'lib.php.source.html#l547')" href="lib.php.source.html#l547">get_or_create_instance</a>(<a href="../../../../_variables/instanceid.html">$instanceid</a>, <a href="../../../../_variables/raterid.html">$raterid</a>, <a href="../../../../_variables/itemid.html">$itemid</a>)&nbsp;&nbsp;
<a href="../../../../_functions/get_or_create_instance.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>If instanceid is specified and grading instance exists and it is created by this rater for<BR>
this item, this instance is returned.<BR>
If there exists a draft for this raterid+itemid, take this draft (this is the change from parent)<BR>
Otherwise new instance is created for the specified rater and itemid<BR>
</b><BR><b>param:</b> int $instanceid<br>
<b>param:</b> int $raterid<br>
<b>param:</b> int $itemid<br>
<b>return:</b> gradingform_instance<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="render_grade" onClick="logFunction('render_grade', 'lib.php.source.html#l580')" href="lib.php.source.html#l580">render_grade</a>(<a href="../../../../_variables/page.html">$page</a>, <a href="../../../../_variables/itemid.html">$itemid</a>, <a href="../../../../_variables/gradinginfo.html">$gradinginfo</a>, <a href="../../../../_variables/defaultcontent.html">$defaultcontent</a>, <a href="../../../../_variables/cangrade.html">$cangrade</a>)&nbsp;&nbsp;
<a href="../../../../_functions/render_grade.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns html code to be included in student's feedback.<BR>
</b><BR><b>param:</b> moodle_page $page<br>
<b>param:</b> int $itemid<br>
<b>param:</b> array $gradinginfo result of function grade_get_grades<br>
<b>param:</b> string $defaultcontent default string to be returned if no active grading is found<br>
<b>param:</b> bool $cangrade whether current user has capability to grade in this context<br>
<b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sql_search_from_tables" onClick="logFunction('sql_search_from_tables', 'lib.php.source.html#l596')" href="lib.php.source.html#l596">sql_search_from_tables</a>(<a href="../../../../_variables/gdid.html">$gdid</a>)&nbsp;&nbsp;
<a href="../../../../_functions/sql_search_from_tables.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Prepare the part of the search query to append to the FROM statement<BR>
</b><BR><b>param:</b> string $gdid the alias of grading_definitions.id column used by the caller<br>
<b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sql_search_where" onClick="logFunction('sql_search_where', 'lib.php.source.html#l606')" href="lib.php.source.html#l606">sql_search_where</a>(<a href="../../../../_variables/token.html">$token</a>)&nbsp;&nbsp;
<a href="../../../../_functions/sql_search_where.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Prepare the parts of the SQL WHERE statement to search for the given token<BR>
</b><BR>The returned array cosists of the list of SQL comparions and the list of<BR>
respective parameters for the comparisons. The returned chunks will be joined<BR>
with other conditions using the OR operator.<BR>
<BR>
<b>param:</b> string $token token to search for<br>
<b>return:</b> array An array containing two more arrays<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_min_max_score" onClick="logFunction('get_min_max_score', 'lib.php.source.html#l631')" href="lib.php.source.html#l631">get_min_max_score</a>()&nbsp;&nbsp;
<a href="../../../../_functions/get_min_max_score.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Calculates and returns the possible minimum and maximum score (in points) for this guide<BR>
</b><BR><b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_external_definition_details" onClick="logFunction('get_external_definition_details', 'lib.php.source.html#l660')" href="lib.php.source.html#l660">get_external_definition_details</a>()&nbsp;&nbsp;
<a href="../../../../_functions/get_external_definition_details.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR><b>return:</b> array An array containing 2 key/value pairs which hold the external_multiple_structure<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_external_instance_filling_details" onClick="logFunction('get_external_instance_filling_details', 'lib.php.source.html#l688')" href="lib.php.source.html#l688">get_external_instance_filling_details</a>()&nbsp;&nbsp;
<a href="../../../../_functions/get_external_instance_filling_details.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns an array that defines the structure of the guide's filling. This function is used by<BR>
the web service function core_grading_external::get_gradingform_instances().<BR>
</b><BR><b>return:</b> An array containing a single key/value pair with the 'criteria' external_multiple_structure<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="gradingform_guide_instance"><b>gradingform_guide_instance</b></a>&nbsp;&nbsp;- <a href="../../../../_classes/gradingform_guide_instance.html"><small>X-Ref</small></a>
</p>
<b>Class to manage one guide grading instance. Stores information and performs actions like<BR>
update, copy, validate, submit, etc.<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="cancel" onClick="logFunction('cancel', 'lib.php.source.html#l730')" href="lib.php.source.html#l730">cancel</a>()&nbsp;&nbsp;
<a href="../../../../_functions/cancel.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Deletes this (INCOMPLETE) instance from database.<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="copy" onClick="logFunction('copy', 'lib.php.source.html#l739')" href="lib.php.source.html#l739">copy</a>(<a href="../../../../_variables/raterid.html">$raterid</a>, <a href="../../../../_variables/itemid.html">$itemid</a>)&nbsp;&nbsp;
<a href="../../../../_functions/copy.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Duplicates the instance before editing (optionally substitutes raterid and/or itemid with<BR>
the specified values)<BR>
</b><BR><b>param:</b> int $raterid value for raterid in the duplicate<br>
<b>param:</b> int $itemid value for itemid in the duplicate<br>
<b>return:</b> int id of the new instance<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_empty_form" onClick="logFunction('is_empty_form', 'lib.php.source.html#l759')" href="lib.php.source.html#l759">is_empty_form</a>(<a href="../../../../_variables/elementvalue.html">$elementvalue</a>)&nbsp;&nbsp;
<a href="../../../../_functions/is_empty_form.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Determines whether the submitted form was empty.<BR>
</b><BR><b>param:</b> array $elementvalue value of element submitted from the form<br>
<b>return:</b> boolean true if the form is empty<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="validate_grading_element" onClick="logFunction('validate_grading_element', 'lib.php.source.html#l779')" href="lib.php.source.html#l779">validate_grading_element</a>(<a href="../../../../_variables/elementvalue.html">$elementvalue</a>)&nbsp;&nbsp;
<a href="../../../../_functions/validate_grading_element.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Validates that guide is fully completed and contains valid grade on each criterion<BR>
</b><BR><b>param:</b> array $elementvalue value of element as came in form submit<br>
<b>return:</b> boolean true if the form data is validated and contains no errors<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_guide_filling" onClick="logFunction('get_guide_filling', 'lib.php.source.html#l807')" href="lib.php.source.html#l807">get_guide_filling</a>(<a href="../../../../_variables/force.html">$force</a> = false)&nbsp;&nbsp;
<a href="../../../../_functions/get_guide_filling.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Retrieves from DB and returns the data how this guide was filled<BR>
</b><BR><b>param:</b> bool $force whether to force DB query even if the data is cached<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="update" onClick="logFunction('update', 'lib.php.source.html#l826')" href="lib.php.source.html#l826">update</a>(<a href="../../../../_variables/data.html">$data</a>)&nbsp;&nbsp;
<a href="../../../../_functions/update.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Updates the instance with the data received from grading form. This function may be<BR>
called via AJAX when grading is not yet completed, so it does not change the<BR>
status of the instance.<BR>
</b><BR><b>param:</b> array $data<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="clear_attempt" onClick="logFunction('clear_attempt', 'lib.php.source.html#l866')" href="lib.php.source.html#l866">clear_attempt</a>(<a href="../../../../_variables/data.html">$data</a>)&nbsp;&nbsp;
<a href="../../../../_functions/clear_attempt.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Removes the attempt from the gradingform_guide_fillings table<BR>
</b><BR><b>param:</b> array $data the attempt data<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_grade" onClick="logFunction('get_grade', 'lib.php.source.html#l879')" href="lib.php.source.html#l879">get_grade</a>()&nbsp;&nbsp;
<a href="../../../../_functions/get_grade.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Calculates the grade to be pushed to the gradebook<BR>
</b><BR><b>return:</b> float|int the valid grade from $this-&gt;get_controller()-&gt;get_grade_range()<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="render_grading_element" onClick="logFunction('render_grading_element', 'lib.php.source.html#l911')" href="lib.php.source.html#l911">render_grading_element</a>(<a href="../../../../_variables/page.html">$page</a>, <a href="../../../../_variables/gradingformelement.html">$gradingformelement</a>)&nbsp;&nbsp;
<a href="../../../../_functions/render_grading_element.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns html for form element of type 'grading'.<BR>
</b><BR><b>param:</b> moodle_page $page<br>
<b>param:</b> MoodleQuickForm_grading $gradingformelement<br>
<b>return:</b> string<br>
</td></tr></table>

<br>
</div>
</div>

</div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
