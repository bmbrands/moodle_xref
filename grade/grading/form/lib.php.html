<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : Detail view of lib.php</title>
    <link rel="stylesheet" href="../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../';
subdir='grade/grading/form';
filename='lib.php.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="details-heading"><a href="./index.html">/grade/grading/form/</a> -> <a href="lib.php.source.html">lib.php</a> (summary)</h2>
<div class="details-summary">
<p class="viewlinks">[<a href="lib.php.source.html">Source view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="../../../_stats.html">Project Stats</a>]</p>
<p><b>Common classes used by gradingform plugintypes are defined here</b></p>
<table>
<tr><td align="right">Copyright: </td><td>2011 David Mudrak <<a href="mailto:david@moodle.com">david@moodle.com</a>></td></tr>
<tr><td align="right">License: </td><td><a href="http://www.gnu.org/copyleft/gpl.html" target="_blank">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later</td></tr>
<tr><td align="right">File Size: </td><td>1044 lines (39 kb)</td></tr>
<tr><td align="right">Included or required:</td><td>0 times</td></tr>
<tr><td align="right" valign="top">Referenced: </td><td>3 times</td></tr>
<tr><td align="right" valign="top">Includes or requires: </td><td>0 files</td></tr>
</table>
<h3>Defines 51 functions</h3>
<div class="inset">
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
&nbsp;&nbsp;<a href="#get_context">get_context</a>()<br>
&nbsp;&nbsp;<a href="#get_component">get_component</a>()<br>
&nbsp;&nbsp;<a href="#get_area">get_area</a>()<br>
&nbsp;&nbsp;<a href="#get_areaid">get_areaid</a>()<br>
&nbsp;&nbsp;<a href="#is_form_defined">is_form_defined</a>()<br>
&nbsp;&nbsp;<a href="#is_form_available">is_form_available</a>()<br>
&nbsp;&nbsp;<a href="#is_shared_template">is_shared_template</a>()<br>
&nbsp;&nbsp;<a href="#is_own_form">is_own_form</a>()<br>
&nbsp;&nbsp;<a href="#form_unavailable_notification">form_unavailable_notification</a>()<br>
&nbsp;&nbsp;<a href="#get_editor_url">get_editor_url</a>()<br>
&nbsp;&nbsp;<a href="#extend_settings_navigation">extend_settings_navigation</a>()<br>
&nbsp;&nbsp;<a href="#extend_navigation">extend_navigation</a>()<br>
&nbsp;&nbsp;<a href="#get_definition">get_definition</a>()<br>
&nbsp;&nbsp;<a href="#get_definition_copy">get_definition_copy</a>()<br>
&nbsp;&nbsp;<a href="#update_definition">update_definition</a>()<br>
&nbsp;&nbsp;<a href="#get_formatted_description">get_formatted_description</a>()<br>
&nbsp;&nbsp;<a href="#get_current_instance">get_current_instance</a>()<br>
&nbsp;&nbsp;<a href="#get_active_instances">get_active_instances</a>()<br>
&nbsp;&nbsp;<a href="#get_all_active_instances">get_all_active_instances</a>()<br>
&nbsp;&nbsp;<a href="#has_active_instances">has_active_instances</a>()<br>
&nbsp;&nbsp;<a href="#get_instance">get_instance</a>()<br>
&nbsp;&nbsp;<a href="#create_instance">create_instance</a>()<br>
&nbsp;&nbsp;<a href="#get_or_create_instance">get_or_create_instance</a>()<br>
&nbsp;&nbsp;<a href="#delete_definition">delete_definition</a>()<br>
&nbsp;&nbsp;<a href="#sql_search_from_tables">sql_search_from_tables</a>()<br>
&nbsp;&nbsp;<a href="#sql_search_where">sql_search_where</a>()<br>
&nbsp;&nbsp;<a href="#load_definition">load_definition</a>()<br>
&nbsp;&nbsp;<a href="#get_method_name">get_method_name</a>()<br>
&nbsp;&nbsp;<a href="#render_grade">render_grade</a>()<br>
&nbsp;&nbsp;<a href="#set_grade_range">set_grade_range</a>()<br>
&nbsp;&nbsp;<a href="#get_grade_range">get_grade_range</a>()<br>
&nbsp;&nbsp;<a href="#get_allow_grade_decimals">get_allow_grade_decimals</a>()<br>
&nbsp;&nbsp;<a href="#get_external_definition_details">get_external_definition_details</a>()<br>
&nbsp;&nbsp;<a href="#get_external_instance_filling_details">get_external_instance_filling_details</a>()<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
&nbsp;&nbsp;<a href="#create_new">create_new</a>()<br>
&nbsp;&nbsp;<a href="#copy">copy</a>()<br>
&nbsp;&nbsp;<a href="#get_current_instance">get_current_instance</a>()<br>
&nbsp;&nbsp;<a href="#get_controller">get_controller</a>()<br>
&nbsp;&nbsp;<a href="#get_data">get_data</a>()<br>
&nbsp;&nbsp;<a href="#get_id">get_id</a>()<br>
&nbsp;&nbsp;<a href="#get_status">get_status</a>()<br>
&nbsp;&nbsp;<a href="#make_active">make_active</a>()<br>
&nbsp;&nbsp;<a href="#cancel">cancel</a>()<br>
&nbsp;&nbsp;<a href="#update">update</a>()<br>
&nbsp;&nbsp;<a href="#is_empty_form">is_empty_form</a>()<br>
&nbsp;&nbsp;<a href="#clear_attempt">clear_attempt</a>()<br>
&nbsp;&nbsp;<a href="#submit_and_get_grade">submit_and_get_grade</a>()<br>
&nbsp;&nbsp;<a href="#validate_grading_element">validate_grading_element</a>()<br>
&nbsp;&nbsp;<a href="#default_validation_error_message">default_validation_error_message</a>()<br>
</div>
</div>
<br><div class="details-funclist">
<div class="details-classtitle"><a name="functions"><b>Functions</b></a></div>
<div class="details-classinfo">
Functions that are not part of a class:<br><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'lib.php.source.html#l82')" href="lib.php.source.html#l82">__construct</a>(stdClass <a href="../../../_variables/context.html">$context</a>, <a href="../../../_variables/component.html">$component</a>, <a href="../../../_variables/area.html">$area</a>, <a href="../../../_variables/areaid.html">$areaid</a>)&nbsp;&nbsp;
<a href="../../../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Do not instantinate this directly, use {@link grading_manager::get_controller()}<BR>
</b><BR><b>param:</b> stdClass $context the context of the form<br>
<b>param:</b> string $component the frankenstyle name of the component<br>
<b>param:</b> string $area the name of the gradable area<br>
<b>param:</b> int $areaid the id of the gradable area record<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_context" onClick="logFunction('get_context', 'lib.php.source.html#l102')" href="lib.php.source.html#l102">get_context</a>()&nbsp;&nbsp;
<a href="../../../_functions/get_context.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns controller context<BR>
</b><BR><b>return:</b> stdClass controller context<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_component" onClick="logFunction('get_component', 'lib.php.source.html#l111')" href="lib.php.source.html#l111">get_component</a>()&nbsp;&nbsp;
<a href="../../../_functions/get_component.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns gradable component name<BR>
</b><BR><b>return:</b> string gradable component name<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_area" onClick="logFunction('get_area', 'lib.php.source.html#l120')" href="lib.php.source.html#l120">get_area</a>()&nbsp;&nbsp;
<a href="../../../_functions/get_area.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns gradable area name<BR>
</b><BR><b>return:</b> string gradable area name<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_areaid" onClick="logFunction('get_areaid', 'lib.php.source.html#l129')" href="lib.php.source.html#l129">get_areaid</a>()&nbsp;&nbsp;
<a href="../../../_functions/get_areaid.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns gradable area id<BR>
</b><BR><b>return:</b> int gradable area id<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_form_defined" onClick="logFunction('is_form_defined', 'lib.php.source.html#l138')" href="lib.php.source.html#l138">is_form_defined</a>()&nbsp;&nbsp;
<a href="../../../_functions/is_form_defined.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Is the form definition record available?<BR>
</b><BR>Note that this actually checks whether the process of defining the form ever started<BR>
and not whether the form definition should be considered as final.<BR>
<BR>
<b>return:</b> boolean<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_form_available" onClick="logFunction('is_form_available', 'lib.php.source.html#l150')" href="lib.php.source.html#l150">is_form_available</a>()&nbsp;&nbsp;
<a href="../../../_functions/is_form_available.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Is the grading form defined and ready for usage?<BR>
</b><BR><b>return:</b> boolean<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_shared_template" onClick="logFunction('is_shared_template', 'lib.php.source.html#l159')" href="lib.php.source.html#l159">is_shared_template</a>()&nbsp;&nbsp;
<a href="../../../_functions/is_shared_template.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Is the grading form saved as a shared public template?<BR>
</b><BR><b>return:</b> boolean<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_own_form" onClick="logFunction('is_own_form', 'lib.php.source.html#l169')" href="lib.php.source.html#l169">is_own_form</a>(<a href="../../../_variables/userid.html">$userid</a> = null)&nbsp;&nbsp;
<a href="../../../_functions/is_own_form.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Is the grading form owned by the given user?<BR>
</b><BR>The form owner is the user who created this instance of the form.<BR>
<BR>
<b>param:</b> int $userid the user id to check, defaults to the current user<br>
<b>return:</b> boolean|null null if the form not defined yet, boolean otherwise<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="form_unavailable_notification" onClick="logFunction('form_unavailable_notification', 'lib.php.source.html#l189')" href="lib.php.source.html#l189">form_unavailable_notification</a>()&nbsp;&nbsp;
<a href="../../../_functions/form_unavailable_notification.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns a message why this form is unavailable. Maybe overriden by plugins to give more details.<BR>
</b><BR><b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_editor_url" onClick="logFunction('get_editor_url', 'lib.php.source.html#l202')" href="lib.php.source.html#l202">get_editor_url</a>(moodle_url <a href="../../../_variables/returnurl.html">$returnurl</a> = null)&nbsp;&nbsp;
<a href="../../../_functions/get_editor_url.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns URL of a page where the grading form can be defined and edited.<BR>
</b><BR><b>param:</b> moodle_url $returnurl optional URL of a page where the user should be sent once they are finished with editing<br>
<b>return:</b> moodle_url<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="extend_settings_navigation" onClick="logFunction('extend_settings_navigation', 'lib.php.source.html#l219')" href="lib.php.source.html#l219">extend_settings_navigation</a>(settings_navigation <a href="../../../_variables/settingsnav.html">$settingsnav</a>, navigation_node <a href="../../../_variables/node.html">$node</a>=null)&nbsp;&nbsp;
<a href="../../../_functions/extend_settings_navigation.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Extends the module settings navigation<BR>
</b><BR>This function is called when the context for the page is an activity module with the<BR>
FEATURE_ADVANCED_GRADING, the user has the permission moodle/grade:managegradingforms<BR>
and there is an area with the active grading method set to the given plugin.<BR>
<BR>
<b>param:</b> settings_navigation $settingsnav {@link settings_navigation}<br>
<b>param:</b> navigation_node $node {@link navigation_node}<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="extend_navigation" onClick="logFunction('extend_navigation', 'lib.php.source.html#l233')" href="lib.php.source.html#l233">extend_navigation</a>(global_navigation <a href="../../../_variables/navigation.html">$navigation</a>, navigation_node <a href="../../../_variables/node.html">$node</a>=null)&nbsp;&nbsp;
<a href="../../../_functions/extend_navigation.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Extends the module navigation<BR>
</b><BR>This function is called when the context for the page is an activity module with the<BR>
FEATURE_ADVANCED_GRADING and there is an area with the active grading method set to the given plugin.<BR>
<BR>
<b>param:</b> global_navigation $navigation {@link global_navigation}<br>
<b>param:</b> navigation_node $node {@link navigation_node}<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_definition" onClick="logFunction('get_definition', 'lib.php.source.html#l246')" href="lib.php.source.html#l246">get_definition</a>(<a href="../../../_variables/force.html">$force</a> = false)&nbsp;&nbsp;
<a href="../../../_functions/get_definition.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the grading form definition structure<BR>
</b><BR><b>param:</b> boolean $force whether to force loading from DB even if it was already loaded<br>
<b>return:</b> stdClass|false definition data or false if the form is not defined yet<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_definition_copy" onClick="logFunction('get_definition_copy', 'lib.php.source.html#l259')" href="lib.php.source.html#l259">get_definition_copy</a>(gradingform_controller <a href="../../../_variables/target.html">$target</a>)&nbsp;&nbsp;
<a href="../../../_functions/get_definition_copy.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the form definition suitable for cloning into another area<BR>
</b><BR><b>param:</b> gradingform_controller $target the controller of the new copy<br>
<b>return:</b> stdClass definition structure to pass to the target's {@link update_definition()}<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="update_definition" onClick="logFunction('update_definition', 'lib.php.source.html#l290')" href="lib.php.source.html#l290">update_definition</a>(stdClass <a href="../../../_variables/definition.html">$definition</a>, <a href="../../../_variables/usermodified.html">$usermodified</a> = null)&nbsp;&nbsp;
<a href="../../../_functions/update_definition.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Saves the defintion data into the database<BR>
</b><BR>The implementation in this base class stores the common data into the record<BR>
into the {grading_definition} table. The plugins are likely to extend this<BR>
and save their data into own tables, too.<BR>
<BR>
<b>param:</b> stdClass $definition data containing values for the {grading_definition} table<br>
<b>param:</b> int|null $usermodified optional userid of the author of the definition, defaults to the current user<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_formatted_description" onClick="logFunction('get_formatted_description', 'lib.php.source.html#l368')" href="lib.php.source.html#l368">get_formatted_description</a>()&nbsp;&nbsp;
<a href="../../../_functions/get_formatted_description.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Formats the definition description for display on page<BR>
</b><BR><b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_current_instance" onClick="logFunction('get_current_instance', 'lib.php.source.html#l380')" href="lib.php.source.html#l380">get_current_instance</a>(<a href="../../../_variables/raterid.html">$raterid</a>, <a href="../../../_variables/itemid.html">$itemid</a>, <a href="../../../_variables/idonly.html">$idonly</a> = false)&nbsp;&nbsp;
<a href="../../../_functions/get_current_instance.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the current instance (either with status ACTIVE or NEEDUPDATE) for this definition for the<BR>
specified $raterid and $itemid (if multiple raters are allowed, or only for $itemid otherwise).<BR>
</b><BR><b>param:</b> int $raterid<br>
<b>param:</b> int $itemid<br>
<b>param:</b> boolean $idonly<br>
<b>return:</b> mixed if $idonly=true returns id of the found instance, otherwise returns the instance object<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_active_instances" onClick="logFunction('get_active_instances', 'lib.php.source.html#l414')" href="lib.php.source.html#l414">get_active_instances</a>(<a href="../../../_variables/itemid.html">$itemid</a>)&nbsp;&nbsp;
<a href="../../../_functions/get_active_instances.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns list of ACTIVE instances for the specified $itemid<BR>
(intentionally does not return instances with status NEEDUPDATE)<BR>
</b><BR><b>param:</b> int $itemid<br>
<b>return:</b> array of gradingform_instance objects<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_all_active_instances" onClick="logFunction('get_all_active_instances', 'lib.php.source.html#l434')" href="lib.php.source.html#l434">get_all_active_instances</a>(<a href="../../../_variables/since.html">$since</a> = 0)&nbsp;&nbsp;
<a href="../../../_functions/get_all_active_instances.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns an array of all active instances for this definition.<BR>
(intentionally does not return instances with status NEEDUPDATE)<BR>
</b><BR><b>param:</b> int since only return instances with timemodified &gt;= since<br>
<b>return:</b> array of gradingform_instance objects<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="has_active_instances" onClick="logFunction('has_active_instances', 'lib.php.source.html#l455')" href="lib.php.source.html#l455">has_active_instances</a>()&nbsp;&nbsp;
<a href="../../../_functions/has_active_instances.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if there are already people who has been graded on this definition.<BR>
In this case plugins may restrict changes of the grading definition<BR>
</b><BR><b>return:</b> boolean<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_instance" onClick="logFunction('get_instance', 'lib.php.source.html#l474')" href="lib.php.source.html#l474">get_instance</a>(<a href="../../../_variables/instance.html">$instance</a>)&nbsp;&nbsp;
<a href="../../../_functions/get_instance.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the object of type gradingform_XXX_instance (where XXX is the plugin method name)<BR>
</b><BR><b>param:</b> mixed $instance id or row from grading_isntances table<br>
<b>return:</b> gradingform_instance<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="create_instance" onClick="logFunction('create_instance', 'lib.php.source.html#l493')" href="lib.php.source.html#l493">create_instance</a>(<a href="../../../_variables/raterid.html">$raterid</a>, <a href="../../../_variables/itemid.html">$itemid</a> = null)&nbsp;&nbsp;
<a href="../../../_functions/create_instance.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>This function is invoked when user (teacher) starts grading.<BR>
It creates and returns copy of the current ACTIVE instance if it exists. If this is the<BR>
first grading attempt, a new instance is created.<BR>
The status of the returned instance is INCOMPLETE<BR>
</b><BR><b>param:</b> int $raterid<br>
<b>param:</b> int $itemid<br>
<b>return:</b> gradingform_instance<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_or_create_instance" onClick="logFunction('get_or_create_instance', 'lib.php.source.html#l514')" href="lib.php.source.html#l514">get_or_create_instance</a>(<a href="../../../_variables/instanceid.html">$instanceid</a>, <a href="../../../_variables/raterid.html">$raterid</a>, <a href="../../../_variables/itemid.html">$itemid</a>)&nbsp;&nbsp;
<a href="../../../_functions/get_or_create_instance.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>If instanceid is specified and grading instance exists and it is created by this rater for<BR>
this item, this instance is returned.<BR>
Otherwise new instance is created for the specified rater and itemid<BR>
</b><BR><b>param:</b> int $instanceid<br>
<b>param:</b> int $raterid<br>
<b>param:</b> int $itemid<br>
<b>return:</b> gradingform_instance<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="delete_definition" onClick="logFunction('delete_definition', 'lib.php.source.html#l544')" href="lib.php.source.html#l544">delete_definition</a>()&nbsp;&nbsp;
<a href="../../../_functions/delete_definition.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Deletes the form definition and all the associated data<BR>
</b><BR><b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sql_search_from_tables" onClick="logFunction('sql_search_from_tables', 'lib.php.source.html#l568')" href="lib.php.source.html#l568">sql_search_from_tables</a>(<a href="../../../_variables/gdid.html">$gdid</a>)&nbsp;&nbsp;
<a href="../../../_functions/sql_search_from_tables.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Prepare the part of the search query to append to the FROM statement<BR>
</b><BR><b>param:</b> string $gdid the alias of grading_definitions.id column used by the caller<br>
<b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sql_search_where" onClick="logFunction('sql_search_where', 'lib.php.source.html#l578')" href="lib.php.source.html#l578">sql_search_where</a>(<a href="../../../_variables/token.html">$token</a>)&nbsp;&nbsp;
<a href="../../../_functions/sql_search_where.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Prepare the parts of the SQL WHERE statement to search for the given token<BR>
</b><BR>The returned array cosists of the list of SQL comparions and the list of<BR>
respective parameters for the comparisons. The returned chunks will be joined<BR>
with other conditions using the OR operator.<BR>
<BR>
<b>param:</b> string $token token to search for<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="load_definition" onClick="logFunction('load_definition', 'lib.php.source.html#l598')" href="lib.php.source.html#l598">load_definition</a>()&nbsp;&nbsp;
<a href="../../../_functions/load_definition.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Loads the form definition if it exists<BR>
</b><BR>The default implementation just tries to load the record from the {grading_definitions}<BR>
table. The plugins are likely to override this with a more complex query that loads<BR>
all required data at once.<BR>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_method_name" onClick="logFunction('get_method_name', 'lib.php.source.html#l619')" href="lib.php.source.html#l619">get_method_name</a>()&nbsp;&nbsp;
<a href="../../../_functions/get_method_name.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the name of the grading method plugin, eg 'rubric'<BR>
</b><BR><b>return:</b> string the name of the grading method plugin, eg 'rubric'<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="render_grade" onClick="logFunction('render_grade', 'lib.php.source.html#l633')" href="lib.php.source.html#l633">render_grade</a>(<a href="../../../_variables/page.html">$page</a>, <a href="../../../_variables/itemid.html">$itemid</a>, <a href="../../../_variables/gradinginfo.html">$gradinginfo</a>, <a href="../../../_variables/defaultcontent.html">$defaultcontent</a>, <a href="../../../_variables/cangrade.html">$cangrade</a>)&nbsp;&nbsp;
<a href="../../../_functions/render_grade.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns html code to be included in student's feedback.<BR>
</b><BR><b>param:</b> moodle_page $page<br>
<b>param:</b> int $itemid<br>
<b>param:</b> array $gradinginfo result of function grade_get_grades if plugin want to use some of their info<br>
<b>param:</b> string $defaultcontent default string to be returned if no active grading is found or for some reason can not be shown to a user<br>
<b>param:</b> boolean $cangrade whether current user has capability to grade in this context<br>
<b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_grade_range" onClick="logFunction('set_grade_range', 'lib.php.source.html#l647')" href="lib.php.source.html#l647">set_grade_range</a>(array <a href="../../../_variables/graderange.html">$graderange</a>, <a href="../../../_variables/allowgradedecimals.html">$allowgradedecimals</a> = false)&nbsp;&nbsp;
<a href="../../../_functions/set_grade_range.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Sets the range of grades used in this area. This is usually either range like 0-100<BR>
or the scale where keys start from 1.<BR>
</b><BR>Typically modules will call it:<BR>
$controller-&gt;set_grade_range(make_grades_menu($gradingtype), $gradingtype &gt; 0);<BR>
Negative $gradingtype means that scale is used and the grade must be rounded<BR>
to the nearest int. Positive $gradingtype means that range 0..$gradingtype<BR>
is used for the grades and in this case grade does not have to be rounded.<BR>
<BR>
Sometimes modules always expect grade to be rounded (like mod_assignment does).<BR>
<BR>
<b>param:</b> array $graderange array where first _key_ is the minimum grade and the<br>
<b>param:</b> bool $allowgradedecimals if decimal values are allowed as grades.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_grade_range" onClick="logFunction('get_grade_range', 'lib.php.source.html#l668')" href="lib.php.source.html#l668">get_grade_range</a>()&nbsp;&nbsp;
<a href="../../../_functions/get_grade_range.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the range of grades used in this area<BR>
</b><BR><b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_allow_grade_decimals" onClick="logFunction('get_allow_grade_decimals', 'lib.php.source.html#l680')" href="lib.php.source.html#l680">get_allow_grade_decimals</a>()&nbsp;&nbsp;
<a href="../../../_functions/get_allow_grade_decimals.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns if decimal values are allowed as grades<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_external_definition_details" onClick="logFunction('get_external_definition_details', 'lib.php.source.html#l689')" href="lib.php.source.html#l689">get_external_definition_details</a>()&nbsp;&nbsp;
<a href="../../../_functions/get_external_definition_details.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Overridden by sub classes that wish to make definition details available to web services.<BR>
When not overridden, only definition data common to all grading methods is made available.<BR>
When overriding, the return value should be an array containing one or more key/value pairs.<BR>
These key/value pairs should match the definition returned by the get_definition() function.<BR>
For examples, look at:<BR>
$gradingform_rubric_controller-&gt;get_external_definition_details()<BR>
$gradingform_guide_controller-&gt;get_external_definition_details()<BR>
</b><BR><b>return:</b> array An array of one or more key/value pairs containing the external_multiple_structure/s<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_external_instance_filling_details" onClick="logFunction('get_external_instance_filling_details', 'lib.php.source.html#l705')" href="lib.php.source.html#l705">get_external_instance_filling_details</a>()&nbsp;&nbsp;
<a href="../../../_functions/get_external_instance_filling_details.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Overridden by sub classes that wish to make instance filling details available to web services.<BR>
When not overridden, only instance filling data common to all grading methods is made available.<BR>
When overriding, the return value should be an array containing one or more key/value pairs.<BR>
These key/value pairs should match the filling data returned by the get_&lt;method&gt;_filling() function<BR>
in the gradingform_instance subclass.<BR>
For examples, look at:<BR>
$gradingform_rubric_controller-&gt;get_external_instance_filling_details()<BR>
$gradingform_guide_controller-&gt;get_external_instance_filling_details()<BR>
</b><BR><b>return:</b> array An array of one or more key/value pairs containing the external_multiple_structure/s<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'lib.php.source.html#l766')" href="lib.php.source.html#l766">__construct</a>(<a href="../../../_variables/controller.html">$controller</a>, <a href="../../../_variables/data.html">$data</a>)&nbsp;&nbsp;
<a href="../../../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Creates an instance<BR>
</b><BR><b>param:</b> gradingform_controller $controller<br>
<b>param:</b> stdClass $data<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="create_new" onClick="logFunction('create_new', 'lib.php.source.html#l777')" href="lib.php.source.html#l777">create_new</a>(<a href="../../../_variables/definitionid.html">$definitionid</a>, <a href="../../../_variables/raterid.html">$raterid</a>, <a href="../../../_variables/itemid.html">$itemid</a>)&nbsp;&nbsp;
<a href="../../../_functions/create_new.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Creates a new empty instance in DB and mark its status as INCOMPLETE<BR>
</b><BR><b>param:</b> int $definitionid<br>
<b>param:</b> int $raterid<br>
<b>param:</b> int $itemid<br>
<b>return:</b> int id of the created instance<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="copy" onClick="logFunction('copy', 'lib.php.source.html#l798')" href="lib.php.source.html#l798">copy</a>(<a href="../../../_variables/raterid.html">$raterid</a>, <a href="../../../_variables/itemid.html">$itemid</a>)&nbsp;&nbsp;
<a href="../../../_functions/copy.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Duplicates the instance before editing (optionally substitutes raterid and/or itemid with<BR>
the specified values)<BR>
Plugins may want to override this function to copy data from additional tables as well<BR>
</b><BR><b>param:</b> int $raterid value for raterid in the duplicate<br>
<b>param:</b> int $itemid value for itemid in the duplicate<br>
<b>return:</b> int id of the new instance<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_current_instance" onClick="logFunction('get_current_instance', 'lib.php.source.html#l819')" href="lib.php.source.html#l819">get_current_instance</a>()&nbsp;&nbsp;
<a href="../../../_functions/get_current_instance.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the current (active or needupdate) instance for the same raterid and itemid as this<BR>
instance. This function is useful to find the status of the currently modified instance<BR>
</b><BR><b>return:</b> gradingform_instance<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_controller" onClick="logFunction('get_controller', 'lib.php.source.html#l832')" href="lib.php.source.html#l832">get_controller</a>()&nbsp;&nbsp;
<a href="../../../_functions/get_controller.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the controller<BR>
</b><BR><b>return:</b> gradingform_controller<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_data" onClick="logFunction('get_data', 'lib.php.source.html#l841')" href="lib.php.source.html#l841">get_data</a>(<a href="../../../_variables/key.html">$key</a>)&nbsp;&nbsp;
<a href="../../../_functions/get_data.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the specified element from object $this-&gt;data<BR>
</b><BR><b>param:</b> string $key<br>
<b>return:</b> mixed<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_id" onClick="logFunction('get_id', 'lib.php.source.html#l854')" href="lib.php.source.html#l854">get_id</a>()&nbsp;&nbsp;
<a href="../../../_functions/get_id.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns instance id<BR>
</b><BR><b>return:</b> int<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_status" onClick="logFunction('get_status', 'lib.php.source.html#l863')" href="lib.php.source.html#l863">get_status</a>()&nbsp;&nbsp;
<a href="../../../_functions/get_status.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns instance status<BR>
</b><BR><b>return:</b> int<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="make_active" onClick="logFunction('make_active', 'lib.php.source.html#l872')" href="lib.php.source.html#l872">make_active</a>()&nbsp;&nbsp;
<a href="../../../_functions/make_active.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Marks the instance as ACTIVE and current active instance (if exists) as ARCHIVE<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="cancel" onClick="logFunction('cancel', 'lib.php.source.html#l892')" href="lib.php.source.html#l892">cancel</a>()&nbsp;&nbsp;
<a href="../../../_functions/cancel.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Deletes this (INCOMPLETE) instance from database. This function is invoked on cancelling the<BR>
grading form and/or during cron cleanup.<BR>
Plugins using additional tables must override this method to remove additional data.<BR>
Note that if the teacher just closes the window or presses 'Back' button of the browser,<BR>
this function is not invoked.<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="update" onClick="logFunction('update', 'lib.php.source.html#l905')" href="lib.php.source.html#l905">update</a>(<a href="../../../_variables/elementvalue.html">$elementvalue</a>)&nbsp;&nbsp;
<a href="../../../_functions/update.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Updates the instance with the data received from grading form. This function may be<BR>
called via AJAX when grading is not yet completed, so it does not change the<BR>
status of the instance.<BR>
</b><BR><b>param:</b> array $elementvalue<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_empty_form" onClick="logFunction('is_empty_form', 'lib.php.source.html#l938')" href="lib.php.source.html#l938">is_empty_form</a>(<a href="../../../_variables/elementvalue.html">$elementvalue</a>)&nbsp;&nbsp;
<a href="../../../_functions/is_empty_form.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Determines whether the submitted form was empty.<BR>
</b><BR><b>param:</b> array $elementvalue value of element submitted from the form<br>
<b>return:</b> boolean true if the form is empty<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="clear_attempt" onClick="logFunction('clear_attempt', 'lib.php.source.html#l948')" href="lib.php.source.html#l948">clear_attempt</a>(<a href="../../../_variables/data.html">$data</a>)&nbsp;&nbsp;
<a href="../../../_functions/clear_attempt.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Removes the attempt from the gradingform_*_fillings table.<BR>
This function is not abstract as to not break plugins that might<BR>
use advanced grading.<BR>
</b><BR><b>param:</b> array $data the attempt data<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="submit_and_get_grade" onClick="logFunction('submit_and_get_grade', 'lib.php.source.html#l960')" href="lib.php.source.html#l960">submit_and_get_grade</a>(<a href="../../../_variables/elementvalue.html">$elementvalue</a>, <a href="../../../_variables/itemid.html">$itemid</a>)&nbsp;&nbsp;
<a href="../../../_functions/submit_and_get_grade.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Called when teacher submits the grading form:<BR>
updates the instance in DB, marks it as ACTIVE and returns the grade to be pushed to the gradebook.<BR>
$itemid must be specified here (it was not required when the instance was<BR>
created, because it might not existed in draft)<BR>
</b><BR><b>param:</b> array $elementvalue<br>
<b>param:</b> int $itemid<br>
<b>return:</b> int the grade on 0-100 scale<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="validate_grading_element" onClick="logFunction('validate_grading_element', 'lib.php.source.html#l1020')" href="lib.php.source.html#l1020">validate_grading_element</a>(<a href="../../../_variables/elementvalue.html">$elementvalue</a>)&nbsp;&nbsp;
<a href="../../../_functions/validate_grading_element.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Server-side validation of the data received from grading form.<BR>
</b><BR><b>param:</b> mixed $elementvalue is the scalar or array received in $_POST<br>
<b>return:</b> boolean true if the form data is validated and contains no errors<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="default_validation_error_message" onClick="logFunction('default_validation_error_message', 'lib.php.source.html#l1030')" href="lib.php.source.html#l1030">default_validation_error_message</a>()&nbsp;&nbsp;
<a href="../../../_functions/default_validation_error_message.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the error message displayed if validation failed.<BR>
If plugin wants to display custom message, the empty string should be returned here<BR>
and the custom message should be output in render_grading_element()<BR>
</b><BR>Please note that in assignments grading in 2.2 the grading form is not validated<BR>
properly and this message is not being displayed.<BR>
<BR>
<b>return:</b> string<br>
</td></tr></table>

<br>
</div></div>

</div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
