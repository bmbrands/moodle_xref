<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /badges/criteria/award_criteria_overall.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='badges/criteria';
filename='award_criteria_overall.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/badges/criteria/</a> -> <a href="award_criteria_overall.php.html">award_criteria_overall.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="award_criteria_overall.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="award_criteria_overall.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * This file contains the overall badge award criteria type</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package    core</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @subpackage badges</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @copyright  2012 onwards Totara Learning Solutions Ltd {@link http://www.totaralms.com/}</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> * @author     Yuliya Bozhko &lt;yuliya.bozhko@totaralms.com&gt;</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> */</span>
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l28"><span class="linenum">  28</span></a>  
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment">/**</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> * Overall badge award criteria</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> *</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> */</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('award_criteria_overall')" href="../../_classes/award_criteria_overall.html" onMouseOver="classPopup(event,'award_criteria_overall')">award_criteria_overall</a> extends award_criteria {
<a name="l34"><span class="linenum">  34</span></a>  
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment">    /* @var int Criteria [BADGE_CRITERIA_TYPE_OVERALL] */</span>
<a name="l36"><span class="linenum">  36</span></a>      public <a class="var it2175" onMouseOver="hilite(2175)" onMouseOut="lolite()" onClick="logVariable('criteriatype')" href="../../_variables/criteriatype.html">$criteriatype</a> = <a class="constant" onClick="logConstant('BADGE_CRITERIA_TYPE_OVERALL')" href="../../_constants/BADGE_CRITERIA_TYPE_OVERALL.html" onMouseOver="constPopup(event,'BADGE_CRITERIA_TYPE_OVERALL')">BADGE_CRITERIA_TYPE_OVERALL</a>;
<a name="l37"><span class="linenum">  37</span></a>  
<a name="l38"><span class="linenum">  38</span></a>      <span class="comment">/**</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment">     * Add appropriate form elements to the criteria form</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment">     *</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment">     * @param stdClass $data details of overall criterion</span>
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment">     */</span>
<a name="l43"><span class="linenum">  43</span></a>      public function <a class="function" onClick="logFunction('config_form_criteria')" href="../../_functions/config_form_criteria.html" onMouseOver="funcPopup(event,'config_form_criteria')">config_form_criteria</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) {
<a name="l44"><span class="linenum">  44</span></a>          global <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l45"><span class="linenum">  45</span></a>          <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../_variables/prefix.html">$prefix</a> = 'criteria-' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l46"><span class="linenum">  46</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('criteria')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/criteria.html">criteria</a>) &gt; 2) {
<a name="l47"><span class="linenum">  47</span></a>              echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('box_start')" href="../../_functions/box_start.html" onMouseOver="funcPopup(event,'box_start')">box_start</a>();
<a name="l48"><span class="linenum">  48</span></a>              if (!empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('description')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/description.html">description</a>)) {
<a name="l49"><span class="linenum">  49</span></a>                  <a class="var it2751" onMouseOver="hilite(2751)" onMouseOut="lolite()" onClick="logVariable('badge')" href="../../_variables/badge.html">$badge</a> = <span class="keyword">new </span><a class="class" onClick="logClass('badge')" href="../../_classes/badge.html" onMouseOver="classPopup(event,'badge')">badge</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('badgeid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/badgeid.html">badgeid</a>);
<a name="l50"><span class="linenum">  50</span></a>                  echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('box')" href="../../_functions/box.html" onMouseOver="funcPopup(event,'box')">box</a>(
<a name="l51"><span class="linenum">  51</span></a>                      <a class="function" onClick="logFunction('format_text')" href="../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('description')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/description.html">description</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('descriptionformat')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/descriptionformat.html">descriptionformat</a>, array('context' =&gt; <a class="var it2751" onMouseOver="hilite(2751)" onMouseOut="lolite()" onClick="logVariable('badge')" href="../../_variables/badge.html">$badge</a>-&gt;<a class="function" onClick="logFunction('get_context')" href="../../_functions/get_context.html" onMouseOver="funcPopup(event,'get_context')">get_context</a>())),
<a name="l52"><span class="linenum">  52</span></a>                      'criteria-description');
<a name="l53"><span class="linenum">  53</span></a>              }
<a name="l54"><span class="linenum">  54</span></a>              echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('heading')" href="../../_functions/heading.html" onMouseOver="funcPopup(event,'heading')">heading</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_title')" href="../../_functions/get_title.html" onMouseOver="funcPopup(event,'get_title')">get_title</a>(), 2);
<a name="l55"><span class="linenum">  55</span></a>  
<a name="l56"><span class="linenum">  56</span></a>              <a class="var it20163" onMouseOver="hilite(20163)" onMouseOut="lolite()" onClick="logVariable('agg')" href="../../_variables/agg.html">$agg</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a class="function" onClick="logFunction('get_aggregation_methods')" href="../../_functions/get_aggregation_methods.html" onMouseOver="funcPopup(event,'get_aggregation_methods')">get_aggregation_methods</a>();
<a name="l57"><span class="linenum">  57</span></a>              if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a class="function" onClick="logFunction('is_locked')" href="../../_functions/is_locked.html" onMouseOver="funcPopup(event,'is_locked')">is_locked</a>() &amp;&amp; !<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a class="function" onClick="logFunction('is_active')" href="../../_functions/is_active.html" onMouseOver="funcPopup(event,'is_active')">is_active</a>()) {
<a name="l58"><span class="linenum">  58</span></a>                  <a class="var it8405" onMouseOver="hilite(8405)" onMouseOut="lolite()" onClick="logVariable('editurl')" href="../../_variables/editurl.html">$editurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../badges/criteria_settings.php.html">/badges/criteria_settings.php</a>',
<a name="l59"><span class="linenum">  59</span></a>                                 array('badgeid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('badgeid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/badgeid.html">badgeid</a>,
<a name="l60"><span class="linenum">  60</span></a>                                     'edit' =&gt; true,
<a name="l61"><span class="linenum">  61</span></a>                                     'type' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('criteriatype')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/criteriatype.html">criteriatype</a>,
<a name="l62"><span class="linenum">  62</span></a>                                     'crit' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;id
<a name="l63"><span class="linenum">  63</span></a>                                 )
<a name="l64"><span class="linenum">  64</span></a>                          );
<a name="l65"><span class="linenum">  65</span></a>                  <a class="var it2458" onMouseOver="hilite(2458)" onMouseOut="lolite()" onClick="logVariable('editaction')" href="../../_variables/editaction.html">$editaction</a> = <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('action_icon')" href="../../_functions/action_icon.html" onMouseOver="funcPopup(event,'action_icon')">action_icon</a>(<a class="var it8405" onMouseOver="hilite(8405)" onMouseOut="lolite()" onClick="logVariable('editurl')" href="../../_variables/editurl.html">$editurl</a>, <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('t/edit', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('edit')), null,
<a name="l66"><span class="linenum">  66</span></a>                                array('class' =&gt; 'criteria-action'));
<a name="l67"><span class="linenum">  67</span></a>                  echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('box')" href="../../_functions/box.html" onMouseOver="funcPopup(event,'box')">box</a>(<a class="var it2458" onMouseOver="hilite(2458)" onMouseOut="lolite()" onClick="logVariable('editaction')" href="../../_variables/editaction.html">$editaction</a>, array('criteria-header'));
<a name="l68"><span class="linenum">  68</span></a>  
<a name="l69"><span class="linenum">  69</span></a>                  <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('criteria.php', array('id' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'sesskey' =&gt; <a class="function" onClick="logFunction('sesskey')" href="../../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>()));
<a name="l70"><span class="linenum">  70</span></a>                  echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('single_select')" href="../../_functions/single_select.html" onMouseOver="funcPopup(event,'single_select')">single_select</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, 'update', <a class="var it20163" onMouseOver="hilite(20163)" onMouseOut="lolite()" onClick="logVariable('agg')" href="../../_variables/agg.html">$agg</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a class="function" onClick="logFunction('get_aggregation_method')" href="../../_functions/get_aggregation_method.html" onMouseOver="funcPopup(event,'get_aggregation_method')">get_aggregation_method</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('criteriatype')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/criteriatype.html">criteriatype</a>),
<a name="l71"><span class="linenum">  71</span></a>                      null, null, array('aria-describedby' =&gt; 'overall'));
<a name="l72"><span class="linenum">  72</span></a>                  echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('span')" href="../../_functions/span.html" onMouseOver="funcPopup(event,'span')">span</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('overallcrit', 'badges'), '', array('id' =&gt; 'overall'));
<a name="l73"><span class="linenum">  73</span></a>              } else {
<a name="l74"><span class="linenum">  74</span></a>                  echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('box')" href="../../_functions/box.html" onMouseOver="funcPopup(event,'box')">box</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('criteria_descr_' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('criteriatype')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/criteriatype.html">criteriatype</a>, 'badges',
<a name="l75"><span class="linenum">  75</span></a>                          <a class="class" onClick="logClass('core_text')" href="../../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="phpfunction" onClick="logFunction('strtoupper')" href="../../_functions/strtoupper.html" onMouseOver="phpfuncPopup(event,'strtoupper')">strtoupper</a>(<a class="var it20163" onMouseOver="hilite(20163)" onMouseOut="lolite()" onClick="logVariable('agg')" href="../../_variables/agg.html">$agg</a>[<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a class="function" onClick="logFunction('get_aggregation_method')" href="../../_functions/get_aggregation_method.html" onMouseOver="funcPopup(event,'get_aggregation_method')">get_aggregation_method</a>()])), 'clearfix');
<a name="l76"><span class="linenum">  76</span></a>              }
<a name="l77"><span class="linenum">  77</span></a>              echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('box_end')" href="../../_functions/box_end.html" onMouseOver="funcPopup(event,'box_end')">box_end</a>();
<a name="l78"><span class="linenum">  78</span></a>          }
<a name="l79"><span class="linenum">  79</span></a>      }
<a name="l80"><span class="linenum">  80</span></a>  
<a name="l81"><span class="linenum">  81</span></a>      <span class="comment">/**</span>
<a name="l82"><span class="linenum">  82</span></a>  <span class="comment">     * Add appropriate parameter elements to the criteria form</span>
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment">     *</span>
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment">     */</span>
<a name="l85"><span class="linenum">  85</span></a>      public function <a class="function" onClick="logFunction('config_options')" href="../../_functions/config_options.html" onMouseOver="funcPopup(event,'config_options')">config_options</a>(&amp;<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>, <a class="var it334" onMouseOver="hilite(334)" onMouseOut="lolite()" onClick="logVariable('param')" href="../../_variables/param.html">$param</a>) {
<a name="l86"><span class="linenum">  86</span></a>      }
<a name="l87"><span class="linenum">  87</span></a>  
<a name="l88"><span class="linenum">  88</span></a>      <span class="comment">/**</span>
<a name="l89"><span class="linenum">  89</span></a>  <span class="comment">     * Get criteria details for displaying to users</span>
<a name="l90"><span class="linenum">  90</span></a>  <span class="comment">     *</span>
<a name="l91"><span class="linenum">  91</span></a>  <span class="comment">     * @return string</span>
<a name="l92"><span class="linenum">  92</span></a>  <span class="comment">     */</span>
<a name="l93"><span class="linenum">  93</span></a>      public function <a class="function" onClick="logFunction('get_details')" href="../../_functions/get_details.html" onMouseOver="funcPopup(event,'get_details')">get_details</a>(<a class="var it2618" onMouseOver="hilite(2618)" onMouseOut="lolite()" onClick="logVariable('short')" href="../../_variables/short.html">$short</a> = '') {
<a name="l94"><span class="linenum">  94</span></a>      }
<a name="l95"><span class="linenum">  95</span></a>  
<a name="l96"><span class="linenum">  96</span></a>      <span class="comment">/**</span>
<a name="l97"><span class="linenum">  97</span></a>  <span class="comment">     * Review this criteria and decide if it has been completed</span>
<a name="l98"><span class="linenum">  98</span></a>  <span class="comment">     * Overall criteria review should be called only from other criteria handlers.</span>
<a name="l99"><span class="linenum">  99</span></a>  <span class="comment">     *</span>
<a name="l100"><span class="linenum"> 100</span></a>  <span class="comment">     * @param int $userid User whose criteria completion needs to be reviewed.</span>
<a name="l101"><span class="linenum"> 101</span></a>  <span class="comment">     * @param bool $filtered An additional parameter indicating that user list</span>
<a name="l102"><span class="linenum"> 102</span></a>  <span class="comment">     *        has been reduced and some expensive checks can be skipped.</span>
<a name="l103"><span class="linenum"> 103</span></a>  <span class="comment">     *</span>
<a name="l104"><span class="linenum"> 104</span></a>  <span class="comment">     * @return bool Whether criteria is complete</span>
<a name="l105"><span class="linenum"> 105</span></a>  <span class="comment">     */</span>
<a name="l106"><span class="linenum"> 106</span></a>      public function <a class="function" onClick="logFunction('review')" href="../../_functions/review.html" onMouseOver="funcPopup(event,'review')">review</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it1753" onMouseOver="hilite(1753)" onMouseOut="lolite()" onClick="logVariable('filtered')" href="../../_variables/filtered.html">$filtered</a> = false) {
<a name="l107"><span class="linenum"> 107</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l108"><span class="linenum"> 108</span></a>  
<a name="l109"><span class="linenum"> 109</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT bc.*, bcm.critid, bcm.userid, bcm.datemet
<a name="l110"><span class="linenum"> 110</span></a>                  FROM {badge_criteria} bc
<a name="l111"><span class="linenum"> 111</span></a>                  LEFT JOIN {badge_criteria_met} bcm
<a name="l112"><span class="linenum"> 112</span></a>                      ON bc.id = bcm.critid AND bcm.userid = :userid
<a name="l113"><span class="linenum"> 113</span></a>                  WHERE bc.badgeid = :badgeid
<a name="l114"><span class="linenum"> 114</span></a>                      AND bc.criteriatype != :criteriatype &quot;;
<a name="l115"><span class="linenum"> 115</span></a>  
<a name="l116"><span class="linenum"> 116</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array(
<a name="l117"><span class="linenum"> 117</span></a>                      'userid' =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>,
<a name="l118"><span class="linenum"> 118</span></a>                      'badgeid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('badgeid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/badgeid.html">badgeid</a>,
<a name="l119"><span class="linenum"> 119</span></a>                      'criteriatype' =&gt; <a class="constant" onClick="logConstant('BADGE_CRITERIA_TYPE_OVERALL')" href="../../_constants/BADGE_CRITERIA_TYPE_OVERALL.html" onMouseOver="constPopup(event,'BADGE_CRITERIA_TYPE_OVERALL')">BADGE_CRITERIA_TYPE_OVERALL</a>
<a name="l120"><span class="linenum"> 120</span></a>                  );
<a name="l121"><span class="linenum"> 121</span></a>  
<a name="l122"><span class="linenum"> 122</span></a>          <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('criteria')" href="../../_variables/criteria.html">$criteria</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l123"><span class="linenum"> 123</span></a>          <a class="var it7755" onMouseOver="hilite(7755)" onMouseOut="lolite()" onClick="logVariable('overall')" href="../../_variables/overall.html">$overall</a> = false;
<a name="l124"><span class="linenum"> 124</span></a>          foreach (<a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('criteria')" href="../../_variables/criteria.html">$criteria</a> as <a class="var it12471" onMouseOver="hilite(12471)" onMouseOut="lolite()" onClick="logVariable('crit')" href="../../_variables/crit.html">$crit</a>) {
<a name="l125"><span class="linenum"> 125</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('method')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/method.html">method</a> == <a class="constant" onClick="logConstant('BADGE_CRITERIA_AGGREGATION_ALL')" href="../../_constants/BADGE_CRITERIA_AGGREGATION_ALL.html" onMouseOver="constPopup(event,'BADGE_CRITERIA_AGGREGATION_ALL')">BADGE_CRITERIA_AGGREGATION_ALL</a>) {
<a name="l126"><span class="linenum"> 126</span></a>                  if (<a class="var it12471" onMouseOver="hilite(12471)" onMouseOut="lolite()" onClick="logVariable('crit')" href="../../_variables/crit.html">$crit</a>-&gt;<a onClick="logVariable('datemet')" class="var it43669" onMouseOver="hilite(43669)" onMouseOut="lolite()" href="../../_variables/datemet.html">datemet</a> === null) {
<a name="l127"><span class="linenum"> 127</span></a>                      return false;
<a name="l128"><span class="linenum"> 128</span></a>                  } else {
<a name="l129"><span class="linenum"> 129</span></a>                      <a class="var it7755" onMouseOver="hilite(7755)" onMouseOut="lolite()" onClick="logVariable('overall')" href="../../_variables/overall.html">$overall</a> = true;
<a name="l130"><span class="linenum"> 130</span></a>                      continue;
<a name="l131"><span class="linenum"> 131</span></a>                  }
<a name="l132"><span class="linenum"> 132</span></a>              } else {
<a name="l133"><span class="linenum"> 133</span></a>                  if (<a class="var it12471" onMouseOver="hilite(12471)" onMouseOut="lolite()" onClick="logVariable('crit')" href="../../_variables/crit.html">$crit</a>-&gt;<a onClick="logVariable('datemet')" class="var it43669" onMouseOver="hilite(43669)" onMouseOut="lolite()" href="../../_variables/datemet.html">datemet</a> === null) {
<a name="l134"><span class="linenum"> 134</span></a>                      <a class="var it7755" onMouseOver="hilite(7755)" onMouseOut="lolite()" onClick="logVariable('overall')" href="../../_variables/overall.html">$overall</a> = false;
<a name="l135"><span class="linenum"> 135</span></a>                      continue;
<a name="l136"><span class="linenum"> 136</span></a>                  } else {
<a name="l137"><span class="linenum"> 137</span></a>                      return true;
<a name="l138"><span class="linenum"> 138</span></a>                  }
<a name="l139"><span class="linenum"> 139</span></a>              }
<a name="l140"><span class="linenum"> 140</span></a>          }
<a name="l141"><span class="linenum"> 141</span></a>  
<a name="l142"><span class="linenum"> 142</span></a>          return <a class="var it7755" onMouseOver="hilite(7755)" onMouseOut="lolite()" onClick="logVariable('overall')" href="../../_variables/overall.html">$overall</a>;
<a name="l143"><span class="linenum"> 143</span></a>      }
<a name="l144"><span class="linenum"> 144</span></a>  
<a name="l145"><span class="linenum"> 145</span></a>      <span class="comment">/**</span>
<a name="l146"><span class="linenum"> 146</span></a>  <span class="comment">     * Returns array with sql code and parameters returning all ids</span>
<a name="l147"><span class="linenum"> 147</span></a>  <span class="comment">     * of users who meet this particular criterion.</span>
<a name="l148"><span class="linenum"> 148</span></a>  <span class="comment">     *</span>
<a name="l149"><span class="linenum"> 149</span></a>  <span class="comment">     * @return array list($join, $where, $params)</span>
<a name="l150"><span class="linenum"> 150</span></a>  <span class="comment">     */</span>
<a name="l151"><span class="linenum"> 151</span></a>      public function <a class="function" onClick="logFunction('get_completed_criteria_sql')" href="../../_functions/get_completed_criteria_sql.html" onMouseOver="funcPopup(event,'get_completed_criteria_sql')">get_completed_criteria_sql</a>() {
<a name="l152"><span class="linenum"> 152</span></a>          return array('', '', array());
<a name="l153"><span class="linenum"> 153</span></a>      }
<a name="l154"><span class="linenum"> 154</span></a>  
<a name="l155"><span class="linenum"> 155</span></a>      <span class="comment">/**</span>
<a name="l156"><span class="linenum"> 156</span></a>  <span class="comment">     * Add appropriate criteria elements to the form</span>
<a name="l157"><span class="linenum"> 157</span></a>  <span class="comment">     *</span>
<a name="l158"><span class="linenum"> 158</span></a>  <span class="comment">     */</span>
<a name="l159"><span class="linenum"> 159</span></a>      public function <a class="function" onClick="logFunction('get_options')" href="../../_functions/get_options.html" onMouseOver="funcPopup(event,'get_options')">get_options</a>(&amp;<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>) {
<a name="l160"><span class="linenum"> 160</span></a>      }
<a name="l161"><span class="linenum"> 161</span></a>  
<a name="l162"><span class="linenum"> 162</span></a>      <span class="comment">/**</span>
<a name="l163"><span class="linenum"> 163</span></a>  <span class="comment">     * Return criteria parameters</span>
<a name="l164"><span class="linenum"> 164</span></a>  <span class="comment">     *</span>
<a name="l165"><span class="linenum"> 165</span></a>  <span class="comment">     * @param int $critid Criterion ID</span>
<a name="l166"><span class="linenum"> 166</span></a>  <span class="comment">     * @return array</span>
<a name="l167"><span class="linenum"> 167</span></a>  <span class="comment">     */</span>
<a name="l168"><span class="linenum"> 168</span></a>      public function <a class="function" onClick="logFunction('get_params')" href="../../_functions/get_params.html" onMouseOver="funcPopup(event,'get_params')">get_params</a>(<a class="var it2797" onMouseOver="hilite(2797)" onMouseOut="lolite()" onClick="logVariable('cid')" href="../../_variables/cid.html">$cid</a>) {
<a name="l169"><span class="linenum"> 169</span></a>      }
<a name="l170"><span class="linenum"> 170</span></a>  
<a name="l171"><span class="linenum"> 171</span></a>      <span class="comment">/**</span>
<a name="l172"><span class="linenum"> 172</span></a>  <span class="comment">     * Saves overall badge criteria description.</span>
<a name="l173"><span class="linenum"> 173</span></a>  <span class="comment">     *</span>
<a name="l174"><span class="linenum"> 174</span></a>  <span class="comment">     * @param array $params Values from the form or any other array.</span>
<a name="l175"><span class="linenum"> 175</span></a>  <span class="comment">     */</span>
<a name="l176"><span class="linenum"> 176</span></a>      public function <a class="function" onClick="logFunction('save')" href="../../_functions/save.html" onMouseOver="funcPopup(event,'save')">save</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array()) {
<a name="l177"><span class="linenum"> 177</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l178"><span class="linenum"> 178</span></a>  
<a name="l179"><span class="linenum"> 179</span></a>  <span class="comment">        // Sort out criteria description.</span>
<a name="l180"><span class="linenum"> 180</span></a>  <span class="comment">        // If it is coming from the form editor, it is an array of (text, format).</span>
<a name="l181"><span class="linenum"> 181</span></a>          <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('description')" href="../../_variables/description.html">$description</a> = '';
<a name="l182"><span class="linenum"> 182</span></a>          <a class="var it2649" onMouseOver="hilite(2649)" onMouseOut="lolite()" onClick="logVariable('descriptionformat')" href="../../_variables/descriptionformat.html">$descriptionformat</a> = <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>;
<a name="l183"><span class="linenum"> 183</span></a>          if (isset(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['description']['text'])) {
<a name="l184"><span class="linenum"> 184</span></a>              <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('description')" href="../../_variables/description.html">$description</a> = <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['description']['text'];
<a name="l185"><span class="linenum"> 185</span></a>              <a class="var it2649" onMouseOver="hilite(2649)" onMouseOut="lolite()" onClick="logVariable('descriptionformat')" href="../../_variables/descriptionformat.html">$descriptionformat</a> = <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['description']['format'];
<a name="l186"><span class="linenum"> 186</span></a>          } else if (isset(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['description'])) {
<a name="l187"><span class="linenum"> 187</span></a>              <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('description')" href="../../_variables/description.html">$description</a> = <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['description'];
<a name="l188"><span class="linenum"> 188</span></a>          }
<a name="l189"><span class="linenum"> 189</span></a>  
<a name="l190"><span class="linenum"> 190</span></a>          <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('fordb')" href="../../_variables/fordb.html">$fordb</a> = new stdClass();
<a name="l191"><span class="linenum"> 191</span></a>          <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('fordb')" href="../../_variables/fordb.html">$fordb</a>-&gt;<a onClick="logVariable('criteriatype')" class="var it43360" onMouseOver="hilite(43360)" onMouseOut="lolite()" href="../../_variables/criteriatype.html">criteriatype</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('criteriatype')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/criteriatype.html">criteriatype</a>;
<a name="l192"><span class="linenum"> 192</span></a>          <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('fordb')" href="../../_variables/fordb.html">$fordb</a>-&gt;<a onClick="logVariable('badgeid')" class="var it43360" onMouseOver="hilite(43360)" onMouseOut="lolite()" href="../../_variables/badgeid.html">badgeid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('badgeid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/badgeid.html">badgeid</a>;
<a name="l193"><span class="linenum"> 193</span></a>          <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('fordb')" href="../../_variables/fordb.html">$fordb</a>-&gt;<a onClick="logVariable('description')" class="var it43360" onMouseOver="hilite(43360)" onMouseOut="lolite()" href="../../_variables/description.html">description</a> = <a class="var it313" onMouseOver="hilite(313)" onMouseOut="lolite()" onClick="logVariable('description')" href="../../_variables/description.html">$description</a>;
<a name="l194"><span class="linenum"> 194</span></a>          <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('fordb')" href="../../_variables/fordb.html">$fordb</a>-&gt;<a onClick="logVariable('descriptionformat')" class="var it43360" onMouseOver="hilite(43360)" onMouseOut="lolite()" href="../../_variables/descriptionformat.html">descriptionformat</a> = <a class="var it2649" onMouseOver="hilite(2649)" onMouseOut="lolite()" onClick="logVariable('descriptionformat')" href="../../_variables/descriptionformat.html">$descriptionformat</a>;
<a name="l195"><span class="linenum"> 195</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> !== 0) {
<a name="l196"><span class="linenum"> 196</span></a>              <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('fordb')" href="../../_variables/fordb.html">$fordb</a>-&gt;<a onClick="logVariable('id')" class="var it43360" onMouseOver="hilite(43360)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l197"><span class="linenum"> 197</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('badge_criteria', <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('fordb')" href="../../_variables/fordb.html">$fordb</a>);
<a name="l198"><span class="linenum"> 198</span></a>          } else {
<a name="l199"><span class="linenum"> 199</span></a>  <span class="comment">            // New record in DB, set aggregation to ALL by default.</span>
<a name="l200"><span class="linenum"> 200</span></a>              <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('fordb')" href="../../_variables/fordb.html">$fordb</a>-&gt;<a onClick="logVariable('method')" class="var it43360" onMouseOver="hilite(43360)" onMouseOut="lolite()" href="../../_variables/method.html">method</a> = <a class="constant" onClick="logConstant('BADGE_CRITERIA_AGGREGATION_ALL')" href="../../_constants/BADGE_CRITERIA_AGGREGATION_ALL.html" onMouseOver="constPopup(event,'BADGE_CRITERIA_AGGREGATION_ALL')">BADGE_CRITERIA_AGGREGATION_ALL</a>;
<a name="l201"><span class="linenum"> 201</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('badge_criteria', <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('fordb')" href="../../_variables/fordb.html">$fordb</a>);
<a name="l202"><span class="linenum"> 202</span></a>          }
<a name="l203"><span class="linenum"> 203</span></a>      }
<a name="l204"><span class="linenum"> 204</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'get_params': ['get_params', 'Get the parameters that the user submitted using the form. ', [['admin/webservice','testclient_forms.php',85],['admin/webservice','testclient_forms.php',166],['admin/webservice','testclient_forms.php',260],['mod/lesson/classes','file_info.php',63],['mod/imscp','locallib.php',297],['mod/book','locallib.php',432],['lib/filebrowser','file_info.php',54],['mod/data','locallib.php',457],['lib/filebrowser','file_info_stored.php',76],['mod/workshop','fileinfolib.php',51],['mod/workshop','fileinfolib.php',206],['badges/criteria','award_criteria_overall.php',162],['mod/glossary','locallib.php',505],['backup/util/ui','base_ui_stage.class.php',78],['lib/filebrowser','file_info_context_course.php',610],['lib/filebrowser','file_info_context_course.php',759],['badges/criteria','award_criteria.php',311],['mod/forum','locallib.php',443]], 34],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pdo_moodle_database.php',461],['lib/dml','oci_native_moodle_database.php',1404],['lib/dml','pgsql_native_moodle_database.php',1089],['lib/dml','mssql_native_moodle_database.php',1067],['lib/dml','mysqli_native_moodle_database.php',1405],['lib/dml','sqlsrv_native_moodle_database.php',1148],['lib/dml/tests','dml_test.php',5551]], 650],
'is_active': ['is_active', 'Is this state one of the ones that mean the question attempt is in progress? That is, started, but no finished. ', [['question/engine','states.php',120],['question/engine','states.php',309],['question/engine','states.php',320],['question/engine','states.php',331],['lib','badgeslib.php',293]], 48],
'action_icon': ['action_icon', 'Renders an action_icon. ', [['course/classes','management_renderer.php',987],['lib','outputrenderers.php',1694]], 113],
'save': ['save', 'Save PHPExcel to file ', [['lib/phpexcel/PHPExcel/Writer','CSV.php',89],['lib/phpexcel/PHPExcel/Writer/PDF','DomPDF.php',48],['question/engine','datalib.php',1531],['lib/adodb','adodb-active-record.inc.php',834],['backup/cc/cc_lib','xmlbase.php',168],['lib/phpexcel/PHPExcel/Writer','HTML.php',139],['availability/condition/grouping/classes','condition.php',71],['availability/tests/fixtures','mock_condition.php',67],['lib/phpexcel/PHPExcel/Writer/PDF','tcPDF.php',49],['lib/simplepie/library/SimplePie/Cache','File.php',97],['availability/condition/group/classes','condition.php',60],['completion','completion_aggregation.php',106],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',111],['lib','badgeslib.php',208],['lib/portfolio','exporter.php',638],['mod/assign/submission/file','locallib.php',189],['mod/assign/feedback/comments','locallib.php',323],['lib/phpexcel/PHPExcel/Writer','PDF.php',82],['lib/adodb','adodb-active-recordx.inc.php',943],['lib/simplepie/library/SimplePie/Cache','Base.php',79],['lib/simplepie/library/SimplePie/Cache','MySQL.php',147],['lib/phpexcel/PHPExcel/Writer/PDF','mPDF.php',48],['lib/phpexcel/PHPExcel/Writer','IWriter.php',30],['badges/criteria','award_criteria_overall.php',171],['lib/phpexcel/PHPExcel/Writer','Excel2007.php',175],['availability/classes','tree.php',618],['mod/assign','assignmentplugin.php',190],['availability/condition/completion/classes','condition.php',72],['availability/condition/date/classes','condition.php',75],['lib/lessphp','Parser.php',654],['lib/simplepie/library/SimplePie/Cache','Memcache.php',108],['lib/phpexcel/PHPExcel/Shared/OLE/PPS','Root.php',50],['availability/condition/profile/classes','condition.php',127],['lib/xhprof/xhprof_html/jquery','jquery.tooltip.js',137],['mod/assign/submission/onlinetext','locallib.php',182],['mod/assign/feedback/file','locallib.php',257],['mod/assign/feedback/editpdf','locallib.php',252],['lib/phpexcel/PHPExcel/Writer','OpenDocument.php',83],['availability/condition/grade/classes','condition.php',77],['badges/criteria','award_criteria.php',354],['lib/portfolio','plugin.php',670],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',476],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',4783],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',270]], 212],
'get_completed_criteria_sql': ['get_completed_criteria_sql', 'Returns array with sql code and parameters returning all ids of users who meet this particular criterion. ', [['badges/criteria','award_criteria_activity.php',227],['badges/criteria','award_criteria_overall.php',145],['badges/criteria','award_criteria_course.php',217],['badges/criteria','award_criteria_courseset.php',256],['badges/criteria','award_criteria_profile.php',203],['badges/criteria','award_criteria_manual.php',185]], 3],
'get_context': ['get_context', 'Return the course context for new modules, or the module context for existing modules. ', [['course','moodleform_mod.php',148],['availability/classes','info_module.php',72],['availability/classes','info_section.php',55],['competency/classes','user_competency_plan.php',83],['availability/tests/fixtures','mock_info.php',59],['mod/feedback/classes','responses_table.php',146],['competency/classes','competency.php',730],['competency/classes','plan.php',258],['mod/quiz','attemptlib.php',220],['competency/classes','user_competency.php',216],['grade/grading','lib.php',107],['lib','modinfolib.php',1486],['lib','badgeslib.php',157],['competency/classes/external','exporter.php',172],['comment','lib.php',994],['grade/grading/form','lib.php',102],['mod/assign','locallib.php',1307],['competency/classes','user_evidence.php',90],['competency/classes','user_competency_course.php',80],['lib/classes/event','base.php',627],['enrol','locallib.php',921],['lib','coursecatlib.php',2369],['lib','coursecatlib.php',3065],['competency/classes','course_competency_settings.php',133],['lib/tests/behat','behat_data_generators.php',769],['competency/classes','competency_framework.php',70],['competency/classes','template.php',139]], 1033],
'span': ['span', 'Creates a <span> tag. (Shortcut function.) ', [['lib','outputcomponents.php',1846]], 161],
'box_start': ['box_start', 'Outputs the opening section of a box. ', [['lib','outputrenderers.php',3102]], 259],
'get_records_sql': ['get_records_sql', 'Get a number of records as an array of objects. ', [['lib/dml','pdo_moodle_database.php',309],['lib/dml','oci_native_moodle_database.php',1145],['lib/dml','pgsql_native_moodle_database.php',732],['lib/dml','mssql_native_moodle_database.php',805],['lib/dml','mysqli_native_moodle_database.php',1057],['lib/dml','sqlsrv_native_moodle_database.php',890],['lib/dml/tests','dml_test.php',5545]], 700],
'review': ['review', 'Review this criteria and decide if the user has completed ', [['completion/criteria','completion_criteria_course.php',94],['completion/criteria','completion_criteria_date.php',87],['badges/criteria','award_criteria_activity.php',176],['completion/criteria','completion_criteria_role.php',98],['badges/criteria','award_criteria_overall.php',96],['badges/criteria','award_criteria_course.php',172],['badges/criteria','award_criteria_courseset.php',202],['badges/criteria','award_criteria_profile.php',155],['completion/criteria','completion_criteria_self.php',89],['completion/criteria','completion_criteria_grade.php',107],['completion/criteria','completion_criteria_unenrol.php',80],['completion/criteria','completion_criteria_activity.php',138],['completion/criteria','completion_criteria_duration.php',127],['badges/criteria','award_criteria_manual.php',141]], 18],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'get_aggregation_method': ['get_aggregation_method', 'Converts an aggregation method constant into something that can be included in SQL ', [['rating','lib.php',898],['lib','badgeslib.php',578],['lib','completionlib.php',452]], 24],
'single_select': ['single_select', 'Returns a form with a single select widget. ', [['lib','outputrenderers.php',1854]], 67],
'box': ['box', 'Outputs a box. ', [['lib','outputrenderers.php',3089]], 288],
'heading': ['heading', 'Outputs a heading ', [['lib','outputrenderers.php',3072],['lib','outputrenderers.php',4364],['lib','outputrenderers.php',4552],['grade/report/singleview/classes/local/screen','screen.php',197],['grade/report/singleview/classes/local/screen','user.php',264],['grade/report/singleview/classes/local/screen','grade.php',283]], 796],
'get_title': ['get_title', 'Return criteria title for display in reports ', [['completion/criteria','completion_criteria_course.php',120],['question/classes/bank','question_type_column.php',30],['lib/simplepie/library','SimplePie.php',1969],['completion/criteria','completion_criteria_date.php',106],['lib/simplepie/library/SimplePie','Source.php',104],['question/classes/bank','question_text_row.php',39],['question/classes/bank','modifier_name_column.php',31],['question/classes/bank','checkbox_column.php',36],['lib','outputcomponents.php',2764],['question/classes/bank','action_column_base.php',28],['lib/simplepie/library/SimplePie','Enclosure.php',860],['lib','navigationlib.php',582],['completion/criteria','completion_criteria_role.php',118],['lib/simplepie/library/SimplePie','Item.php',260],['question/classes/bank','question_name_column.php',32],['blocks','moodleblock.class.php',155],['blocks/rss_client/classes/output','channel_image.php',122],['blocks/rss_client/classes/output','item.php',194],['completion/criteria','completion_criteria_self.php',109],['completion/criteria','completion_criteria_grade.php',131],['completion/criteria','completion_criteria_unenrol.php',92],['lib','authlib.php',531],['enrol','locallib.php',1404],['lib/classes','chart_base.php',141],['blocks/rss_client/classes/output','feed.php',125],['badges/criteria','award_criteria.php',162],['completion/criteria','completion_criteria_activity.php',166],['question/classes/bank','creator_name_column.php',32],['enrol/manual','locallib.php',167],['enrol/manual','locallib.php',314],['completion/criteria','completion_criteria_duration.php',153]], 73],
'sesskey': ['sesskey', 'Makes sure that $USER->sesskey exists, if $USER itself exists. It sets a new sesskey if one does not already exist, but does not overwrite existing sesskeys. Returns the sesskey string if $USER exists, or boolean false if not. ', [['lib','sessionlib.php',28]], 641],
'get_aggregation_methods': ['get_aggregation_methods', 'Return array of aggregation methods ', [['lib','badgeslib.php',171],['lib','completionlib.php',232]], 5],
'get_details': ['get_details', 'Return criteria progress details for display in reports ', [['completion/criteria','completion_criteria_course.php',202],['completion/criteria','completion_criteria_date.php',189],['badges/criteria','award_criteria_activity.php',76],['completion/criteria','completion_criteria_role.php',150],['badges/criteria','award_criteria_overall.php',88],['badges/criteria','award_criteria_course.php',92],['badges/criteria','award_criteria_courseset.php',45],['badges/criteria','award_criteria_profile.php',127],['completion/criteria','completion_criteria_self.php',136],['completion/criteria','completion_criteria_grade.php',239],['completion/criteria','completion_criteria_unenrol.php',119],['completion/criteria','completion_criteria_activity.php',251],['completion/criteria','completion_criteria_duration.php',265],['badges/criteria','award_criteria_manual.php',117]], 12],
'get_options': ['get_options', 'Note: this function must be implemented if you use the search ajax field (e.g. set $options[\'file\'] = \'/admin/filecontainingyourclass.php\';) ', [['user/selector','lib.php',356],['user/selector','lib.php',689],['badges/criteria','award_criteria_activity.php',104],['admin/roles/classes','assign_user_selector_base.php',53],['repository','lib.php',179],['lib','adminlib.php',9088],['mod/forum/classes','subscriber_selector_base.php',72],['mod/data/field/textarea','field.class.php',31],['grade','lib.php',1121],['badges/lib','awardlib.php',82],['badges/criteria','award_criteria_overall.php',155],['badges/criteria','award_criteria_course.php',117],['mnet/service/enrol','locallib.php',519],['mnet/service/enrol','locallib.php',607],['badges/criteria','award_criteria_courseset.php',145],['badges/criteria','award_criteria_profile.php',42],['admin/roles/classes','admins_potential_selector.php',85],['grade/grading/form/rubric','lib.php',368],['mod/feedback/item/multichoice','lib.php',283],['admin/webservice','lib.php',112],['lib/tests','filelib_test.php',1199],['cohort','locallib.php',86],['cohort','locallib.php',150],['mod/forum/classes','potential_subscriber_selector.php',59],['admin/roles/classes','check_users_selector.php',147],['mod/workshop','locallib.php',3997],['admin/roles/classes','admins_existing_selector.php',92],['mod/feedback/item/multichoicerated','lib.php',270],['enrol/manual','locallib.php',87],['enrol/manual','locallib.php',151],['grade/grading/form/guide','lib.php',373],['badges/criteria','award_criteria_manual.php',58]], 46],
'box_end': ['box_end', 'Outputs the closing section of a box. ', [['lib','outputrenderers.php',3117]], 257],
'config_options': ['config_options', 'Add appropriate parameter elements to the criteria form ', [['badges/criteria','award_criteria_overall.php',81],['badges/criteria','award_criteria.php',185]], 9],
'is_locked': ['is_locked', 'Returns the locked state of this grade_item (if the grade_item is locked OR no specific $userid is given) or the locked state of a specific grade within this item if a specific $userid is given and the grade_item is unlocked. ', [['lib/grade','grade_item.php',518],['lib/grade','grade_category.php',2484],['user/profile','lib.php',364],['lib/grade','grade_grade.php',265],['lib','badgeslib.php',337],['backup/util/settings','setting_dependency.class.php',187],['backup/util/settings','setting_dependency.class.php',340],['backup/util/settings','setting_dependency.class.php',534],['backup/util/settings','setting_dependency.class.php',598]], 57],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'config_form_criteria': ['config_form_criteria', 'Add appropriate form elements to the criteria form ', [['badges/criteria','award_criteria_overall.php',38],['badges/criteria','award_criteria_course.php',57],['badges/criteria','award_criteria.php',234]], 1],
'format_text': ['format_text', 'Formats a text string coming from the search engine. ', [['search/classes','document.php',606],['lib/classes','grading_external.php',182],['search/engine/solr/classes','document.php',129],['lib','weblib.php',1158],['lib','tablelib.php',860],['lib','tablelib.php',1667],['question/type','questionbase.php',345]], 322],
'defined': ['defined', '', [], 4731],
'strtoupper': ['strtoupper', '', [], 565],
'count': ['count', '', [], 4095]};
CLASS_DATA={
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',238]], 3088],
'core_text': ['core_text', 'defines string api\'s for manipulating strings ', [['lib/classes','text.php',27]], 566],
'badge': ['badge', 'Class that represents badge. ', [['lib','badgeslib.php',101]], 75],
'award_criteria_overall': ['award_criteria_overall', 'Overall badge award criteria ', [['badges/criteria','award_criteria_overall.php',29]], 0],
'html_writer': ['html_writer', 'Simple html output class ', [['lib','outputcomponents.php',1062]], 5120],
'pix_icon': ['pix_icon', 'Data structure representing an icon. ', [['lib','outputcomponents.php',497]], 275]};
CONST_DATA={
'BADGE_CRITERIA_TYPE_OVERALL': ['BADGE_CRITERIA_TYPE_OVERALL', '', [['badges/criteria','award_criteria.php',33]], 42],
'BADGE_CRITERIA_AGGREGATION_ALL': ['BADGE_CRITERIA_AGGREGATION_ALL', '', [['lib','badgeslib.php',40]], 27],
'FORMAT_HTML': ['FORMAT_HTML', '', [['lib','weblib.php',47]], 1121],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
