<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /badges/newbadge.php source</title>
    <link rel="stylesheet" href="../sample.css" type="text/css">
    <link rel="stylesheet" href="../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../';
subdir='badges';
filename='newbadge.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/badges/</a> -> <a href="newbadge.php.html">newbadge.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="newbadge.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="newbadge.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * First step page for creating a new badge</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package    core</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @subpackage badges</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @copyright  2012 onwards Totara Learning Solutions Ltd {@link http://www.totaralms.com/}</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> * @author     Yuliya Bozhko &lt;yuliya.bozhko@totaralms.com&gt;</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> */</span>
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  require_once(__DIR__ . '/../config.php');
<a name="l28"><span class="linenum">  28</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> . '/badgeslib.php');
<a name="l29"><span class="linenum">  29</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../badges/edit_form.php.html">/badges/edit_form.php</a>');
<a name="l30"><span class="linenum">  30</span></a>  
<a name="l31"><span class="linenum">  31</span></a>  <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> = <a class="function" onClick="logFunction('required_param')" href="../_functions/required_param.html" onMouseOver="funcPopup(event,'required_param')">required_param</a>('type', <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l32"><span class="linenum">  32</span></a>  <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a> = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('id', 0, <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l33"><span class="linenum">  33</span></a>  
<a name="l34"><span class="linenum">  34</span></a>  <a class="function" onClick="logFunction('require_login')" href="../_functions/require_login.html" onMouseOver="funcPopup(event,'require_login')">require_login</a>();
<a name="l35"><span class="linenum">  35</span></a>  
<a name="l36"><span class="linenum">  36</span></a>  if (empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enablebadges')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/enablebadges.html">enablebadges</a>)) {
<a name="l37"><span class="linenum">  37</span></a>      <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('badgesdisabled', 'badges');
<a name="l38"><span class="linenum">  38</span></a>  }
<a name="l39"><span class="linenum">  39</span></a>  
<a name="l40"><span class="linenum">  40</span></a>  if (empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('badges_allowcoursebadges')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/badges_allowcoursebadges.html">badges_allowcoursebadges</a>) &amp;&amp; (<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> == <a class="constant" onClick="logConstant('BADGE_TYPE_COURSE')" href="../_constants/BADGE_TYPE_COURSE.html" onMouseOver="constPopup(event,'BADGE_TYPE_COURSE')">BADGE_TYPE_COURSE</a>)) {
<a name="l41"><span class="linenum">  41</span></a>      <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('coursebadgesdisabled', 'badges');
<a name="l42"><span class="linenum">  42</span></a>  }
<a name="l43"><span class="linenum">  43</span></a>  
<a name="l44"><span class="linenum">  44</span></a>  <a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../_variables/title.html">$title</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('create', 'badges');
<a name="l45"><span class="linenum">  45</span></a>  
<a name="l46"><span class="linenum">  46</span></a>  if ((<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> == <a class="constant" onClick="logConstant('BADGE_TYPE_COURSE')" href="../_constants/BADGE_TYPE_COURSE.html" onMouseOver="constPopup(event,'BADGE_TYPE_COURSE')">BADGE_TYPE_COURSE</a>) &amp;&amp; (<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id' =&gt; <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>)))) {
<a name="l47"><span class="linenum">  47</span></a>      <a class="function" onClick="logFunction('require_login')" href="../_functions/require_login.html" onMouseOver="funcPopup(event,'require_login')">require_login</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l48"><span class="linenum">  48</span></a>      <a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l49"><span class="linenum">  49</span></a>      <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_context')" href="../_functions/set_context.html" onMouseOver="funcPopup(event,'set_context')">set_context</a>(<a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>);
<a name="l50"><span class="linenum">  50</span></a>      <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_pagelayout')" href="../_functions/set_pagelayout.html" onMouseOver="funcPopup(event,'set_pagelayout')">set_pagelayout</a>('incourse');
<a name="l51"><span class="linenum">  51</span></a>      <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_url')" href="../_functions/set_url.html" onMouseOver="funcPopup(event,'set_url')">set_url</a>('<a class="filename" href="../badges/newbadge.php.html">/badges/newbadge.php</a>', array('type' =&gt; <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>, 'id' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l52"><span class="linenum">  52</span></a>      <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('heading')" href="../_variables/heading.html">$heading</a> = <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('fullname')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/fullname.html">fullname</a>, true, array('context' =&gt; <a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>)) . &quot;: &quot; . <a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../_variables/title.html">$title</a>;
<a name="l53"><span class="linenum">  53</span></a>      <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_heading')" href="../_functions/set_heading.html" onMouseOver="funcPopup(event,'set_heading')">set_heading</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('heading')" href="../_variables/heading.html">$heading</a>);
<a name="l54"><span class="linenum">  54</span></a>      <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_title')" href="../_functions/set_title.html" onMouseOver="funcPopup(event,'set_title')">set_title</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('heading')" href="../_variables/heading.html">$heading</a>);
<a name="l55"><span class="linenum">  55</span></a>  } else {
<a name="l56"><span class="linenum">  56</span></a>      <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_context')" href="../_functions/set_context.html" onMouseOver="funcPopup(event,'set_context')">set_context</a>(<a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>());
<a name="l57"><span class="linenum">  57</span></a>      <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_pagelayout')" href="../_functions/set_pagelayout.html" onMouseOver="funcPopup(event,'set_pagelayout')">set_pagelayout</a>('admin');
<a name="l58"><span class="linenum">  58</span></a>      <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_url')" href="../_functions/set_url.html" onMouseOver="funcPopup(event,'set_url')">set_url</a>('<a class="filename" href="../badges/newbadge.php.html">/badges/newbadge.php</a>', array('type' =&gt; <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>));
<a name="l59"><span class="linenum">  59</span></a>      <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_heading')" href="../_functions/set_heading.html" onMouseOver="funcPopup(event,'set_heading')">set_heading</a>(<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../_variables/title.html">$title</a>);
<a name="l60"><span class="linenum">  60</span></a>      <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_title')" href="../_functions/set_title.html" onMouseOver="funcPopup(event,'set_title')">set_title</a>(<a class="var it229" onMouseOver="hilite(229)" onMouseOut="lolite()" onClick="logVariable('title')" href="../_variables/title.html">$title</a>);
<a name="l61"><span class="linenum">  61</span></a>  }
<a name="l62"><span class="linenum">  62</span></a>  
<a name="l63"><span class="linenum">  63</span></a>  <a class="function" onClick="logFunction('require_capability')" href="../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('moodle/badges:createbadge', <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('context')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/context.html">context</a>);
<a name="l64"><span class="linenum">  64</span></a>  
<a name="l65"><span class="linenum">  65</span></a>  <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('requires')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('js')" href="../_functions/js.html" onMouseOver="funcPopup(event,'js')">js</a>('<a class="filename" href="../badges/backpack.js.html">/badges/backpack.js</a>');
<a name="l66"><span class="linenum">  66</span></a>  <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('requires')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('js_init_call')" href="../_functions/js_init_call.html" onMouseOver="funcPopup(event,'js_init_call')">js_init_call</a>('check_site_access', null, false);
<a name="l67"><span class="linenum">  67</span></a>  
<a name="l68"><span class="linenum">  68</span></a>  <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('fordb')" href="../_variables/fordb.html">$fordb</a> = new stdClass();
<a name="l69"><span class="linenum">  69</span></a>  <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('fordb')" href="../_variables/fordb.html">$fordb</a>-&gt;<a onClick="logVariable('id')" class="var it43360" onMouseOver="hilite(43360)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = null;
<a name="l70"><span class="linenum">  70</span></a>  
<a name="l71"><span class="linenum">  71</span></a>  <a class="var it371" onMouseOver="hilite(371)" onMouseOut="lolite()" onClick="logVariable('form')" href="../_variables/form.html">$form</a> = <span class="keyword">new </span><a class="class" onClick="logClass('edit_details_form')" href="../_classes/edit_details_form.html" onMouseOver="classPopup(event,'edit_details_form')">edit_details_form</a>(<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('url')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/url.html">url</a>, array('action' =&gt; 'new'));
<a name="l72"><span class="linenum">  72</span></a>  
<a name="l73"><span class="linenum">  73</span></a>  if (<a class="var it371" onMouseOver="hilite(371)" onMouseOut="lolite()" onClick="logVariable('form')" href="../_variables/form.html">$form</a>-&gt;<a class="function" onClick="logFunction('is_cancelled')" href="../_functions/is_cancelled.html" onMouseOver="funcPopup(event,'is_cancelled')">is_cancelled</a>()) {
<a name="l74"><span class="linenum">  74</span></a>      <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../badges/index.php.html">/badges/index.php</a>', array('type' =&gt; <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>, 'id' =&gt; <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>)));
<a name="l75"><span class="linenum">  75</span></a>  } else if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a> = <a class="var it371" onMouseOver="hilite(371)" onMouseOut="lolite()" onClick="logVariable('form')" href="../_variables/form.html">$form</a>-&gt;<a class="function" onClick="logFunction('get_data')" href="../_functions/get_data.html" onMouseOver="funcPopup(event,'get_data')">get_data</a>()) {
<a name="l76"><span class="linenum">  76</span></a>  <span class="comment">    // Creating new badge here.</span>
<a name="l77"><span class="linenum">  77</span></a>      <a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../_variables/now.html">$now</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l78"><span class="linenum">  78</span></a>  
<a name="l79"><span class="linenum">  79</span></a>      <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('fordb')" href="../_variables/fordb.html">$fordb</a>-&gt;<a onClick="logVariable('name')" class="var it43360" onMouseOver="hilite(43360)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('name')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/name.html">name</a>;
<a name="l80"><span class="linenum">  80</span></a>      <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('fordb')" href="../_variables/fordb.html">$fordb</a>-&gt;<a onClick="logVariable('description')" class="var it43360" onMouseOver="hilite(43360)" onMouseOut="lolite()" href="../_variables/description.html">description</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('description')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/description.html">description</a>;
<a name="l81"><span class="linenum">  81</span></a>      <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('fordb')" href="../_variables/fordb.html">$fordb</a>-&gt;<a onClick="logVariable('timecreated')" class="var it43360" onMouseOver="hilite(43360)" onMouseOut="lolite()" href="../_variables/timecreated.html">timecreated</a> = <a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../_variables/now.html">$now</a>;
<a name="l82"><span class="linenum">  82</span></a>      <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('fordb')" href="../_variables/fordb.html">$fordb</a>-&gt;<a onClick="logVariable('timemodified')" class="var it43360" onMouseOver="hilite(43360)" onMouseOut="lolite()" href="../_variables/timemodified.html">timemodified</a> = <a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../_variables/now.html">$now</a>;
<a name="l83"><span class="linenum">  83</span></a>      <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('fordb')" href="../_variables/fordb.html">$fordb</a>-&gt;<a onClick="logVariable('usercreated')" class="var it43360" onMouseOver="hilite(43360)" onMouseOut="lolite()" href="../_variables/usercreated.html">usercreated</a> = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l84"><span class="linenum">  84</span></a>      <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('fordb')" href="../_variables/fordb.html">$fordb</a>-&gt;<a onClick="logVariable('usermodified')" class="var it43360" onMouseOver="hilite(43360)" onMouseOut="lolite()" href="../_variables/usermodified.html">usermodified</a> = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l85"><span class="linenum">  85</span></a>      <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('fordb')" href="../_variables/fordb.html">$fordb</a>-&gt;<a onClick="logVariable('issuername')" class="var it43360" onMouseOver="hilite(43360)" onMouseOut="lolite()" href="../_variables/issuername.html">issuername</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('issuername')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/issuername.html">issuername</a>;
<a name="l86"><span class="linenum">  86</span></a>      <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('fordb')" href="../_variables/fordb.html">$fordb</a>-&gt;<a onClick="logVariable('issuerurl')" class="var it43360" onMouseOver="hilite(43360)" onMouseOut="lolite()" href="../_variables/issuerurl.html">issuerurl</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('issuerurl')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/issuerurl.html">issuerurl</a>;
<a name="l87"><span class="linenum">  87</span></a>      <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('fordb')" href="../_variables/fordb.html">$fordb</a>-&gt;<a onClick="logVariable('issuercontact')" class="var it43360" onMouseOver="hilite(43360)" onMouseOut="lolite()" href="../_variables/issuercontact.html">issuercontact</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('issuercontact')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/issuercontact.html">issuercontact</a>;
<a name="l88"><span class="linenum">  88</span></a>      <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('fordb')" href="../_variables/fordb.html">$fordb</a>-&gt;<a onClick="logVariable('expiredate')" class="var it43360" onMouseOver="hilite(43360)" onMouseOut="lolite()" href="../_variables/expiredate.html">expiredate</a> = (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('expiry')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/expiry.html">expiry</a> == 1) ? <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('expiredate')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/expiredate.html">expiredate</a> : null;
<a name="l89"><span class="linenum">  89</span></a>      <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('fordb')" href="../_variables/fordb.html">$fordb</a>-&gt;<a onClick="logVariable('expireperiod')" class="var it43360" onMouseOver="hilite(43360)" onMouseOut="lolite()" href="../_variables/expireperiod.html">expireperiod</a> = (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('expiry')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/expiry.html">expiry</a> == 2) ? <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('expireperiod')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/expireperiod.html">expireperiod</a> : null;
<a name="l90"><span class="linenum">  90</span></a>      <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('fordb')" href="../_variables/fordb.html">$fordb</a>-&gt;<a onClick="logVariable('type')" class="var it43360" onMouseOver="hilite(43360)" onMouseOut="lolite()" href="../_variables/type.html">type</a> = <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>;
<a name="l91"><span class="linenum">  91</span></a>      <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('fordb')" href="../_variables/fordb.html">$fordb</a>-&gt;<a onClick="logVariable('courseid')" class="var it43360" onMouseOver="hilite(43360)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a> = (<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> == <a class="constant" onClick="logConstant('BADGE_TYPE_COURSE')" href="../_constants/BADGE_TYPE_COURSE.html" onMouseOver="constPopup(event,'BADGE_TYPE_COURSE')">BADGE_TYPE_COURSE</a>) ? <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a> : null;
<a name="l92"><span class="linenum">  92</span></a>      <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('fordb')" href="../_variables/fordb.html">$fordb</a>-&gt;<a onClick="logVariable('messagesubject')" class="var it43360" onMouseOver="hilite(43360)" onMouseOut="lolite()" href="../_variables/messagesubject.html">messagesubject</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('messagesubject', 'badges');
<a name="l93"><span class="linenum">  93</span></a>      <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('fordb')" href="../_variables/fordb.html">$fordb</a>-&gt;<a onClick="logVariable('message')" class="var it43360" onMouseOver="hilite(43360)" onMouseOut="lolite()" href="../_variables/message.html">message</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('messagebody', 'badges',
<a name="l94"><span class="linenum">  94</span></a>              <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a> . '<a class="filename" href="../badges/mybadges.php.html">/badges/mybadges.php</a>', <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('managebadges', 'badges')));
<a name="l95"><span class="linenum">  95</span></a>      <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('fordb')" href="../_variables/fordb.html">$fordb</a>-&gt;<a onClick="logVariable('attachment')" class="var it43360" onMouseOver="hilite(43360)" onMouseOut="lolite()" href="../_variables/attachment.html">attachment</a> = 1;
<a name="l96"><span class="linenum">  96</span></a>      <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('fordb')" href="../_variables/fordb.html">$fordb</a>-&gt;<a onClick="logVariable('notification')" class="var it43360" onMouseOver="hilite(43360)" onMouseOut="lolite()" href="../_variables/notification.html">notification</a> = <a class="constant" onClick="logConstant('BADGE_MESSAGE_NEVER')" href="../_constants/BADGE_MESSAGE_NEVER.html" onMouseOver="constPopup(event,'BADGE_MESSAGE_NEVER')">BADGE_MESSAGE_NEVER</a>;
<a name="l97"><span class="linenum">  97</span></a>      <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('fordb')" href="../_variables/fordb.html">$fordb</a>-&gt;<a onClick="logVariable('status')" class="var it43360" onMouseOver="hilite(43360)" onMouseOut="lolite()" href="../_variables/status.html">status</a> = <a class="constant" onClick="logConstant('BADGE_STATUS_INACTIVE')" href="../_constants/BADGE_STATUS_INACTIVE.html" onMouseOver="constPopup(event,'BADGE_STATUS_INACTIVE')">BADGE_STATUS_INACTIVE</a>;
<a name="l98"><span class="linenum">  98</span></a>  
<a name="l99"><span class="linenum">  99</span></a>      <a class="var it3717" onMouseOver="hilite(3717)" onMouseOut="lolite()" onClick="logVariable('newid')" href="../_variables/newid.html">$newid</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('badge', <a class="var it6847" onMouseOver="hilite(6847)" onMouseOut="lolite()" onClick="logVariable('fordb')" href="../_variables/fordb.html">$fordb</a>, true);
<a name="l100"><span class="linenum"> 100</span></a>  
<a name="l101"><span class="linenum"> 101</span></a>  <span class="comment">    // Trigger event, badge created.</span>
<a name="l102"><span class="linenum"> 102</span></a>      <a class="var it3033" onMouseOver="hilite(3033)" onMouseOut="lolite()" onClick="logVariable('eventparams')" href="../_variables/eventparams.html">$eventparams</a> = array('objectid' =&gt; <a class="var it3717" onMouseOver="hilite(3717)" onMouseOut="lolite()" onClick="logVariable('newid')" href="../_variables/newid.html">$newid</a>, 'context' =&gt; <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('context')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/context.html">context</a>);
<a name="l103"><span class="linenum"> 103</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('badge_created')" href="../_classes/badge_created.html" onMouseOver="classPopup(event,'badge_created')">badge_created</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it3033" onMouseOver="hilite(3033)" onMouseOut="lolite()" onClick="logVariable('eventparams')" href="../_variables/eventparams.html">$eventparams</a>);
<a name="l104"><span class="linenum"> 104</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l105"><span class="linenum"> 105</span></a>  
<a name="l106"><span class="linenum"> 106</span></a>      <a class="var it6855" onMouseOver="hilite(6855)" onMouseOut="lolite()" onClick="logVariable('newbadge')" href="../_variables/newbadge.html">$newbadge</a> = <span class="keyword">new </span><a class="class" onClick="logClass('badge')" href="../_classes/badge.html" onMouseOver="classPopup(event,'badge')">badge</a>(<a class="var it3717" onMouseOver="hilite(3717)" onMouseOut="lolite()" onClick="logVariable('newid')" href="../_variables/newid.html">$newid</a>);
<a name="l107"><span class="linenum"> 107</span></a>      <a class="function" onClick="logFunction('badges_process_badge_image')" href="../_functions/badges_process_badge_image.html" onMouseOver="funcPopup(event,'badges_process_badge_image')">badges_process_badge_image</a>(<a class="var it6855" onMouseOver="hilite(6855)" onMouseOut="lolite()" onClick="logVariable('newbadge')" href="../_variables/newbadge.html">$newbadge</a>, <a class="var it371" onMouseOver="hilite(371)" onMouseOut="lolite()" onClick="logVariable('form')" href="../_variables/form.html">$form</a>-&gt;<a class="function" onClick="logFunction('save_temp_file')" href="../_functions/save_temp_file.html" onMouseOver="funcPopup(event,'save_temp_file')">save_temp_file</a>('image'));
<a name="l108"><span class="linenum"> 108</span></a>  <span class="comment">    // If a user can configure badge criteria, they will be redirected to the criteria page.</span>
<a name="l109"><span class="linenum"> 109</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/badges:configurecriteria', <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('context')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/context.html">context</a>)) {
<a name="l110"><span class="linenum"> 110</span></a>          <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../badges/criteria.php.html">/badges/criteria.php</a>', array('id' =&gt; <a class="var it3717" onMouseOver="hilite(3717)" onMouseOut="lolite()" onClick="logVariable('newid')" href="../_variables/newid.html">$newid</a>)));
<a name="l111"><span class="linenum"> 111</span></a>      }
<a name="l112"><span class="linenum"> 112</span></a>      <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../badges/overview.php.html">/badges/overview.php</a>', array('id' =&gt; <a class="var it3717" onMouseOver="hilite(3717)" onMouseOut="lolite()" onClick="logVariable('newid')" href="../_variables/newid.html">$newid</a>)));
<a name="l113"><span class="linenum"> 113</span></a>  }
<a name="l114"><span class="linenum"> 114</span></a>  
<a name="l115"><span class="linenum"> 115</span></a>  echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>();
<a name="l116"><span class="linenum"> 116</span></a>  echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('box')" href="../_functions/box.html" onMouseOver="funcPopup(event,'box')">box</a>('', 'notifyproblem hide', 'check_connection');
<a name="l117"><span class="linenum"> 117</span></a>  
<a name="l118"><span class="linenum"> 118</span></a>  <a class="var it371" onMouseOver="hilite(371)" onMouseOut="lolite()" onClick="logVariable('form')" href="../_variables/form.html">$form</a>-&gt;<a class="function" onClick="logFunction('display')" href="../_functions/display.html" onMouseOver="funcPopup(event,'display')">display</a>();
<a name="l119"><span class="linenum"> 119</span></a>  
<a name="l120"><span class="linenum"> 120</span></a>  echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('footer')" href="../_functions/footer.html" onMouseOver="funcPopup(event,'footer')">footer</a>();
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'display': ['display', 'Displays the form ', [['backup/util/ui','base_moodleform.class.php',365],['mod/feedback/classes','complete_form.php',536],['lib/minify/lib/Minify/Cache','APC.php',79],['mod/lesson/pagetypes','numerical.php',50],['mod/scorm/report/interactions/classes','report.php',31],['mod/scorm/report/basic/classes','report.php',30],['backup/util/ui','restore_ui.class.php',375],['mod/scorm/report/objectives/classes','report.php',37],['mod/lesson/pagetypes','endofcluster.php',39],['mod/lesson/pagetypes','matching.php',50],['mod/feedback/classes','responses_table.php',344],['user/selector','lib.php',205],['lib/minify/lib/Minify/Cache','File.php',72],['lib','formslib.php',935],['backup/util/ui','base_ui.class.php',169],['mod/lesson/pagetypes','multichoice.php',87],['question/classes/bank','column_base.php',164],['cohort','upload_form.php',316],['mod/quiz/report/statistics','report.php',51],['admin/roles/classes','capability_table_with_risks.php',131],['mod/lesson/pagetypes','truefalse.php',50],['admin/roles/classes','capability_table_base.php',71],['mod/quiz/report/overview','report.php',42],['mod/feedback/classes','templates_table.php',62],['lib/minify/lib/Minify/Cache','ZendPlatform.php',84],['mod/lesson/pagetypes','endofbranch.php',39],['mod/scorm/classes','report.php',39],['backup/util/ui','import_extensions.php',154],['question/classes/bank','view.php',451],['backup/util/ui','backup_ui_stage.class.php',545],['backup/util/ui','backup_ui_stage.class.php',588],['mod/quiz/report/grading','report.php',51],['mod/lesson/pagetypes','shortanswer.php',50],['lib/pear/HTML','Common.php',438],['mod/lesson/pagetypes','essay.php',67],['lib/minify/lib/Minify/Cache','Memcache.php',85],['backup/util/ui','base_ui_stage.class.php',126],['mod/scorm/report/graphs/classes','report.php',127],['mod/lesson/pagetypes','branchtable.php',105],['repository/flickr_public','image.php',149],['admin/roles/classes','define_role_table_advanced.php',612],['mod/quiz/report/responses','report.php',51],['mod/lesson/pagetypes','cluster.php',39],['lib/minify/lib/Minify/Cache','WinCache.php',79],['lib/minify/lib/Minify/Cache','XCache.php',74],['course/format/singleactivity','renderer.php',36],['backup/util/ui','restore_ui_stage.class.php',355],['backup/util/ui','restore_ui_stage.class.php',497],['backup/util/ui','restore_ui_stage.class.php',1025],['backup/util/ui','restore_ui_stage.class.php',1112]], 320],
'get_data': ['get_data', '', [['mod/scorm','mod_form.php',526],['mod/feedback/item/multichoicerated','multichoicerated_form.php',96],['backup/util/structure','restore_path_element.class.php',118],['admin/tool/uploaduser','user_form.php',399],['mod/feedback/item/textfield','textfield_form.php',58],['admin/tool/lp/classes/form','persistent.php',202],['grade/export','grade_export_form.php',206],['mod/feedback','mod_form.php',163],['message/tests','inbound_test.php',632],['mod/feedback/item/textarea','textarea_form.php',57],['mod/survey','mod_form.php',49],['lib/simplepie/library/SimplePie','Parser.php',263],['lib','formslib.php',606],['mod/feedback/item/numeric','numeric_form.php',60],['admin/tool/uploadcourse/classes','course.php',269],['mod/feedback/item','feedback_item_class.php',52],['mod/feedback/item','feedback_item_class.php',264],['admin/webservice','forms.php',299],['grade/grading/form','lib.php',841],['blocks/rss_client','editfeed.php',101],['mod/lesson','mod_form.php',417],['grade/grading/form/guide','edit_form.php',142],['course','editsection_form.php',105],['lib/classes/event','base.php',647],['grade/grading/form/rubric','edit_form.php',136],['mod/feedback/item','feedback_item_form_class.php',112],['admin/tool/filetypes','edit_form.php',97],['mod/forum','mod_form.php',270],['mod/scorm/report/graphs/classes','report.php',49],['lib/classes/message/inbound','address_manager.php',361],['mod/workshop','locallib.php',3990],['mod/glossary','mod_form.php',203],['mod/feedback/item/captcha','lib.php',67],['lib','completionlib.php',869],['mod/feedback/item/multichoice','multichoice_form.php',93],['mod/choice','mod_form.php',121]], 388],
'save_temp_file': ['save_temp_file', 'Returns a temporary file, do not forget to delete after not needed any more. ', [['lib','formslib.php',766]], 5],
'redirect': ['redirect', '', [['enrol/lti/ims-blti','blti.php',230],['lib','weblib.php',2659]], 999],
'set_url': ['set_url', 'Convenience method handling moodle_urls. ', [['competency/classes','evidence.php',151],['lib','outputcomponents.php',2828],['backup/cc/cc_lib','cc_weblink.php',50],['lib','pagelib.php',1227],['blocks/rss_client/classes/output','channel_image.php',89],['backup/util/ui','restore_ui_components.php',141],['mod/wiki','pagelib.php',245],['mod/wiki','pagelib.php',333],['mod/wiki','pagelib.php',425],['mod/wiki','pagelib.php',696],['mod/wiki','pagelib.php',721],['mod/wiki','pagelib.php',835],['mod/wiki','pagelib.php',879],['mod/wiki','pagelib.php',1008],['mod/wiki','pagelib.php',1112],['mod/wiki','pagelib.php',1219],['mod/wiki','pagelib.php',1462],['mod/wiki','pagelib.php',1864],['mod/wiki','pagelib.php',1932],['mod/wiki','pagelib.php',2104],['mod/wiki','pagelib.php',2165],['mod/wiki','pagelib.php',2221],['mod/wiki','pagelib.php',2286],['mod/wiki','pagelib.php',2334],['mod/wiki','pagelib.php',2382],['mod/wiki','pagelib.php',2486]], 596],
'is_cancelled': ['is_cancelled', 'Returns true if the form was cancelled, false otherwise ', [['backup/util/ui','base_moodleform.class.php',330],['lib','formslib.php',589],['mod/feedback/item','feedback_item_class.php',43],['mod/feedback/item','feedback_item_class.php',258],['mod/feedback/item/captcha','lib.php',63]], 156],
'set_pagelayout': ['set_pagelayout', 'Sets the layout to use for this page. ', [['lib','pagelib.php',1086]], 293],
'set_title': ['set_title', 'Sets the title for the node ', [['lib','outputcomponents.php',2820],['backup/cc/cc_lib','cc_weblink.php',41],['backup/cc/cc_lib','cc_basiclti.php',57],['lib','pagelib.php',1157],['blocks/rss_client/classes/output','channel_image.php',110],['blocks/rss_client/classes/output','item.php',182],['backup/cc/cc_lib','cc_asssesment.php',595],['backup/cc/cc_lib','cc_asssesment.php',843],['backup/cc/cc_lib','cc_asssesment.php',1060],['backup/cc/cc_lib','cc_asssesment.php',1829],['backup/cc/cc_lib','cc_page.php',38],['lib/classes','chart_base.php',222],['blocks/rss_client/classes/output','feed.php',113],['backup/cc/cc_lib','cc_metadata.php',225],['mod/wiki','pagelib.php',215],['backup/cc/cc_lib','cc_forum.php',39]], 460],
'box': ['box', 'Outputs a box. ', [['lib','outputrenderers.php',3089]], 288],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'create': ['create', 'Auto-scan an incoming line to determine the response type. ', [['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',65],['lib/google/src/Google/Service','Partners.php',492],['lib/simplepie/library/SimplePie','Cache.php',95],['lib/google/src/Google/Service','YouTubeReporting.php',237],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',81],['lib/google/src/Google/Service','MapsEngine.php',1677],['lib/google/src/Google/Service','MapsEngine.php',1977],['lib/google/src/Google/Service','MapsEngine.php',2253],['lib/google/src/Google/Service','MapsEngine.php',2330],['lib/google/src/Google/Service','MapsEngine.php',2898],['lib/spout/src/Spout/Writer','WriterFactory.php',18],['lib/google/src/Google/Service','Dns.php',290],['lib/google/src/Google/Service','Dns.php',363],['lib/google/src/Google/Service','Appengine.php',438],['tag/classes','collection.php',188],['lib/adodb','adodb-xmlschema.inc.php',152],['lib/adodb','adodb-xmlschema.inc.php',473],['lib/adodb','adodb-xmlschema.inc.php',738],['lib/adodb','adodb-xmlschema.inc.php',884],['lib/adodb','adodb-xmlschema.inc.php',1129],['mod/quiz','attemptlib.php',100],['mod/quiz','attemptlib.php',596],['lib','weblib.php',3206],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',58],['lib/google/src/Google/Service','Dataflow.php',273],['lib/simplepie/library/SimplePie','Registry.php',153],['competency/classes','persistent.php',387],['lib/google/src/Google/Service','Cloudresourcemanager.php',373],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',270],['lib/google/src/Google/Service','TagManager.php',1007],['lib/google/src/Google/Service','TagManager.php',1097],['lib/google/src/Google/Service','TagManager.php',1249],['lib/google/src/Google/Service','TagManager.php',1342],['lib/google/src/Google/Service','TagManager.php',1436],['lib/google/src/Google/Service','TagManager.php',1530],['lib/google/src/Google/Service','TagManager.php',1681],['mod/lesson','locallib.php',1011],['mod/lesson','locallib.php',2163],['mod/lesson','locallib.php',3212],['lib','modinfolib.php',1732],['repository','lib.php',206],['repository','lib.php',1910],['lib','navigationlib.php',268],['lib/htmlpurifier/HTMLPurifier','Config.php',114],['lib/google/src/Google/Service','Container.php',284],['lib/google/src/Google/Service','Genomics.php',632],['lib/google/src/Google/Service','Genomics.php',721],['lib/google/src/Google/Service','Genomics.php',1312],['lib/google/src/Google/Service','Genomics.php',1427],['lib/google/src/Google/Service','Games.php',1649],['lib/google/src/Google/Service','Games.php',2013],['lib/google/src/Google/Service','Fitness.php',377],['lib/google/src/Google/Service','Gmail.php',747],['lib/google/src/Google/Service','Gmail.php',905],['mod/quiz/classes','structure.php',65],['lib/htmlpurifier/HTMLPurifier','ElementDef.php',135],['lib/adodb','adodb-xmlschema03.inc.php',170],['lib/adodb','adodb-xmlschema03.inc.php',514],['lib/adodb','adodb-xmlschema03.inc.php',779],['lib/adodb','adodb-xmlschema03.inc.php',930],['lib/adodb','adodb-xmlschema03.inc.php',1228],['lib/google/src/Google/Service','Proximitybeacon.php',500],['tag/classes','area.php',205],['course','lib.php',3003],['question/type/ddmarker','shapes.php',170],['lib/classes/event','base.php',149],['lib','coursecatlib.php',325],['repository/filesystem','lib.php',498],['lib/google/src/Google/Service','Storagetransfer.php',281],['calendar','lib.php',2686],['lib/htmlpurifier/HTMLPurifier','Lexer.php',53],['lib/google/src/Google/Service','Classroom.php',445],['lib/google/src/Google/Service','Classroom.php',596],['lib/google/src/Google/Service','Classroom.php',673],['lib/google/src/Google/Service','Classroom.php',783],['lib/google/src/Google/Service','Classroom.php',912],['lib/spout/src/Spout/Reader','ReaderFactory.php',18],['lib/google/src/Google/Service','Pubsub.php',220],['lib/google/src/Google/Service','Pubsub.php',365],['lib/google/src/Google/Service','CloudMonitoring.php',258]], 3276],
'js_init_call': ['js_init_call', 'Ensure that the specified JavaScript function is called from an inline script from page footer. ', [['lib','outputrequirementslib.php',1066]], 95],
'trigger': ['trigger', '', [['lib/evalmath','evalmath.class.php',448],['lib/classes/event','base.php',765]], 964],
'require_capability': ['require_capability', 'Wrapper round the require_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',306],['mod/quiz','attemptlib.php',929],['lib','accesslib.php',762],['backup/util/ui','restore_ui_components.php',157]], 690],
'set_context': ['set_context', 'Sets the context the manager operates on ', [['grade/grading','lib.php',116],['lib','pagelib.php',970],['mod/assign','locallib.php',274],['lib/portfolio','caller.php',568]], 278],
'optional_param': ['optional_param', 'Returns a particular value for the named variable, taken from POST or GET, otherwise returning a given default. ', [['lib','moodlelib.php',609]], 2210],
'required_param': ['required_param', 'Returns a particular value for the named variable, taken from POST or GET.  If the parameter doesn\'t exist then an error is thrown because we require this variable. ', [['lib','moodlelib.php',525]], 815],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'instance': ['instance', 'Returns an instance of the cache_factor method. ', [['cache','disabledlib.php',171],['cache','disabledlib.php',296],['lib/classes','useragent.php',101],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['search/classes','manager.php',109],['cache','locallib.php',52],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['lib/classes','plugin_manager.php',103],['lib/htmlpurifier','HTMLPurifier.php',251],['course/format','lib.php',156],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['admin/tool/installaddon/classes','installer.php',40],['lib','modinfolib.php',373],['cache/classes','helper.php',76],['lib/tests','string_manager_standard_test.php',124],['lib/portfolio','exporter.php',251],['lib/classes/update','validator.php',88],['search/classes','document_factory.php',49],['lib','accesslib.php',6235],['lib','accesslib.php',6487],['lib','accesslib.php',6665],['lib','accesslib.php',6919],['lib','accesslib.php',7180],['lib','accesslib.php',7392],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443],['lib','filterlib.php',80],['search/tests/fixtures','testable_core_search.php',43],['lib/tests/fixtures','testable_update_checker.php',45],['backup/cc','validator.php',35],['cache/classes','config.php',87],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29]], 4647],
'set_heading': ['set_heading', 'Sets the heading to use for the page. This is normally used as the main heading at the top of the content. ', [['lib','pagelib.php',1170]], 426],
'badges_process_badge_image': ['badges_process_badge_image', 'Process badge image from form data ', [['lib','badgeslib.php',991]], 3],
'print_error': ['print_error', 'Abort execution by throwing of a general exception, default exception handler displays the error message in most cases. ', [['lib','setuplib.php',481]], 1488],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'require_login': ['require_login', 'This function checks that the current user is logged in and has the required privileges ', [['lib','moodlelib.php',2449]], 636],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',922],['lib','accesslib.php',344]], 2064],
'format_string': ['format_string', 'Given a simple string, this function returns the string processed by enabled string filters if $CFG->filterall is enabled ', [['lib','weblib.php',1379]], 880],
'footer': ['footer', 'This method is used to render the page footer. It is automatically called by AddPage() and could be overwritten in your own inherited class. ', [['lib/tcpdf','tcpdf.php',3464],['lib','outputrenderers.php',1034],['lib','outputrenderers.php',4427],['lib','outputrenderers.php',4546],['mod/lesson','renderer.php',78]], 810],
'js': ['js', 'Minify JS code. ', [['lib/classes','minify.php',31],['lib','outputrequirementslib.php',407],['grade/report/singleview/classes/local/screen','screen.php',245]], 68],
'link': ['link', '', [], 695],
'header': ['header', '', [], 1355],
'time': ['time', '', [], 1959]};
CLASS_DATA={
'edit_details_form': ['edit_details_form', 'Form to edit badge details. ', [['badges','edit_form.php',33]], 1],
'html_writer': ['html_writer', 'Simple html output class ', [['lib','outputcomponents.php',1062]], 5120],
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',238]], 3088],
'context_system': ['context_system', 'System context class ', [['lib','accesslib.php',6157]], 1147],
'badge': ['badge', 'Class that represents badge. ', [['lib','badgeslib.php',101]], 75],
'badge_created': ['badge_created', 'Event triggered after a badge is created. ', [['lib/classes/event','badge_created.php',28]], 2],
'context_course': ['context_course', 'Course context class ', [['lib','accesslib.php',6817]], 1323]};
CONST_DATA={
'BADGE_TYPE_COURSE': ['BADGE_TYPE_COURSE', '', [['lib','badgeslib.php',85]], 28],
'BADGE_STATUS_INACTIVE': ['BADGE_STATUS_INACTIVE', '', [['lib','badgeslib.php',51]], 12],
'PARAM_INT': ['PARAM_INT', '', [['lib','moodlelib.php',156]], 3812],
'BADGE_MESSAGE_NEVER': ['BADGE_MESSAGE_NEVER', '', [['lib','badgeslib.php',90]], 3]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
