<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /admin/tool/dbtransfer/index.php source</title>
    <link rel="stylesheet" href="../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../';
subdir='admin/tool/dbtransfer';
filename='index.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/admin/tool/dbtransfer/</a> -> <a href="index.php.html">index.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="index.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="index.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Transfer tool</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package    tool_dbtransfer</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @copyright  2008 Petr Skoda {@link http://skodak.org/}</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> */</span>
<a name="l24"><span class="linenum">  24</span></a>  
<a name="l25"><span class="linenum">  25</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('NO_OUTPUT_BUFFERING')" href="../../../_constants/NO_OUTPUT_BUFFERING.html" onMouseOver="constPopup(event,'NO_OUTPUT_BUFFERING')">NO_OUTPUT_BUFFERING</a>', true);
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  <a class="function" onClick="logFunction('require')" href="../../../_functions/require.html" onMouseOver="funcPopup(event,'require')">require</a>('../../../config.php');
<a name="l28"><span class="linenum">  28</span></a>  <span class="keyword">require_once</span> <a class="filename" href="../../../tag/locallib.php.html" onMouseOver="reqPopup(event, 'locallib.php', '../../../tag/locallib.php')">('locallib.php')</a>;
<a name="l29"><span class="linenum">  29</span></a>  <span class="keyword">require_once</span> <a class="filename" href="../../../admin/tool/dbtransfer/database_transfer_form.php.html" onMouseOver="reqPopup(event, 'database_transfer_form.php', '../../../admin/tool/dbtransfer/database_transfer_form.php')">('database_transfer_form.php')</a>;
<a name="l30"><span class="linenum">  30</span></a>  
<a name="l31"><span class="linenum">  31</span></a>  <a class="function" onClick="logFunction('require_login')" href="../../../_functions/require_login.html" onMouseOver="funcPopup(event,'require_login')">require_login</a>();
<a name="l32"><span class="linenum">  32</span></a>  <a class="function" onClick="logFunction('admin_externalpage_setup')" href="../../../_functions/admin_externalpage_setup.html" onMouseOver="funcPopup(event,'admin_externalpage_setup')">admin_externalpage_setup</a>('tooldbtransfer');
<a name="l33"><span class="linenum">  33</span></a>  
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment">// Create the form.</span>
<a name="l35"><span class="linenum">  35</span></a>  <a class="var it596" onMouseOver="hilite(596)" onMouseOut="lolite()" onClick="logVariable('form')" href="../../../_variables/form.html">$form</a> = <span class="keyword">new </span><a class="class" onClick="logClass('database_transfer_form')" href="../../../_classes/database_transfer_form.html" onMouseOver="classPopup(event,'database_transfer_form')">database_transfer_form</a>();
<a name="l36"><span class="linenum">  36</span></a>  <a class="var it11184" onMouseOver="hilite(11184)" onMouseOut="lolite()" onClick="logVariable('problem')" href="../../../_variables/problem.html">$problem</a> = '';
<a name="l37"><span class="linenum">  37</span></a>  
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment">// If we have valid input.</span>
<a name="l39"><span class="linenum">  39</span></a>  if (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a> = <a class="var it596" onMouseOver="hilite(596)" onMouseOut="lolite()" onClick="logVariable('form')" href="../../../_variables/form.html">$form</a>-&gt;<a class="function" onClick="logFunction('get_data')" href="../../../_functions/get_data.html" onMouseOver="funcPopup(event,'get_data')">get_data</a>()) {
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment">    // Connect to the other database.</span>
<a name="l41"><span class="linenum">  41</span></a>      <a class="function" onClick="logFunction('list')" href="../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it632" onMouseOver="hilite(632)" onMouseOut="lolite()" onClick="logVariable('dbtype')" href="../../../_variables/dbtype.html">$dbtype</a>, <a class="var it631" onMouseOver="hilite(631)" onMouseOut="lolite()" onClick="logVariable('dblibrary')" href="../../../_variables/dblibrary.html">$dblibrary</a>) = <a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('/', <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('driver')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/driver.html">driver</a>);
<a name="l42"><span class="linenum">  42</span></a>      <a class="var it17606" onMouseOver="hilite(17606)" onMouseOut="lolite()" onClick="logVariable('targetdb')" href="../../../_variables/targetdb.html">$targetdb</a> = moodle_database::<a class="function" onClick="logFunction('get_driver_instance')" href="../../../_functions/get_driver_instance.html" onMouseOver="funcPopup(event,'get_driver_instance')">get_driver_instance</a>(<a class="var it632" onMouseOver="hilite(632)" onMouseOut="lolite()" onClick="logVariable('dbtype')" href="../../../_variables/dbtype.html">$dbtype</a>, <a class="var it631" onMouseOver="hilite(631)" onMouseOut="lolite()" onClick="logVariable('dblibrary')" href="../../../_variables/dblibrary.html">$dblibrary</a>);
<a name="l43"><span class="linenum">  43</span></a>      <a class="var it638" onMouseOver="hilite(638)" onMouseOut="lolite()" onClick="logVariable('dboptions')" href="../../../_variables/dboptions.html">$dboptions</a> = array();
<a name="l44"><span class="linenum">  44</span></a>      if (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('dbport')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/dbport.html">dbport</a>) {
<a name="l45"><span class="linenum">  45</span></a>          <a class="var it638" onMouseOver="hilite(638)" onMouseOut="lolite()" onClick="logVariable('dboptions')" href="../../../_variables/dboptions.html">$dboptions</a>['dbport'] = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('dbport')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/dbport.html">dbport</a>;
<a name="l46"><span class="linenum">  46</span></a>      }
<a name="l47"><span class="linenum">  47</span></a>      if (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('dbsocket')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/dbsocket.html">dbsocket</a>) {
<a name="l48"><span class="linenum">  48</span></a>          <a class="var it638" onMouseOver="hilite(638)" onMouseOut="lolite()" onClick="logVariable('dboptions')" href="../../../_variables/dboptions.html">$dboptions</a>['dbsocket'] = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('dbsocket')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/dbsocket.html">dbsocket</a>;
<a name="l49"><span class="linenum">  49</span></a>      }
<a name="l50"><span class="linenum">  50</span></a>      try {
<a name="l51"><span class="linenum">  51</span></a>          <a class="var it17606" onMouseOver="hilite(17606)" onMouseOut="lolite()" onClick="logVariable('targetdb')" href="../../../_variables/targetdb.html">$targetdb</a>-&gt;<a class="function" onClick="logFunction('connect')" href="../../../_functions/connect.html" onMouseOver="funcPopup(event,'connect')">connect</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('dbhost')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/dbhost.html">dbhost</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('dbuser')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/dbuser.html">dbuser</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('dbpass')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/dbpass.html">dbpass</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('dbname')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/dbname.html">dbname</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('prefix')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/prefix.html">prefix</a>, <a class="var it638" onMouseOver="hilite(638)" onMouseOut="lolite()" onClick="logVariable('dboptions')" href="../../../_variables/dboptions.html">$dboptions</a>);
<a name="l52"><span class="linenum">  52</span></a>          if (<a class="var it17606" onMouseOver="hilite(17606)" onMouseOut="lolite()" onClick="logVariable('targetdb')" href="../../../_variables/targetdb.html">$targetdb</a>-&gt;<a class="function" onClick="logFunction('get_tables')" href="../../../_functions/get_tables.html" onMouseOver="funcPopup(event,'get_tables')">get_tables</a>()) {
<a name="l53"><span class="linenum">  53</span></a>              <a class="var it11184" onMouseOver="hilite(11184)" onMouseOut="lolite()" onClick="logVariable('problem')" href="../../../_variables/problem.html">$problem</a> .= <a class="function" onClick="logFunction('get_string')" href="../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('targetdatabasenotempty', 'tool_dbtransfer');
<a name="l54"><span class="linenum">  54</span></a>          }
<a name="l55"><span class="linenum">  55</span></a>      } catch (moodle_exception <a class="var it193" onMouseOver="hilite(193)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../../_variables/e.html">$e</a>) {
<a name="l56"><span class="linenum">  56</span></a>          <a class="var it11184" onMouseOver="hilite(11184)" onMouseOut="lolite()" onClick="logVariable('problem')" href="../../../_variables/problem.html">$problem</a> .= <a class="function" onClick="logFunction('get_string')" href="../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('notargetconectexception', 'tool_dbtransfer').'&lt;br /&gt;'.<a class="var it193" onMouseOver="hilite(193)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../../_variables/e.html">$e</a>-&gt;<a onClick="logVariable('debuginfo')" class="var it39497" onMouseOver="hilite(39497)" onMouseOut="lolite()" href="../../../_variables/debuginfo.html">debuginfo</a>;
<a name="l57"><span class="linenum">  57</span></a>      }
<a name="l58"><span class="linenum">  58</span></a>  
<a name="l59"><span class="linenum">  59</span></a>      if (<a class="var it11184" onMouseOver="hilite(11184)" onMouseOut="lolite()" onClick="logVariable('problem')" href="../../../_variables/problem.html">$problem</a> === '') {
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment">        // Scroll down to the bottom when finished.</span>
<a name="l61"><span class="linenum">  61</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('requires')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('js_init_code')" href="../../../_functions/js_init_code.html" onMouseOver="funcPopup(event,'js_init_code')">js_init_code</a>(&quot;window.scrollTo(0, 5000000);&quot;);
<a name="l62"><span class="linenum">  62</span></a>  
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment">        // Enable CLI maintenance mode if requested.</span>
<a name="l64"><span class="linenum">  64</span></a>          if (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('enablemaintenance')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/enablemaintenance.html">enablemaintenance</a>) {
<a name="l65"><span class="linenum">  65</span></a>              <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_pagelayout')" href="../../../_functions/set_pagelayout.html" onMouseOver="funcPopup(event,'set_pagelayout')">set_pagelayout</a>('maintenance');
<a name="l66"><span class="linenum">  66</span></a>              <a class="function" onClick="logFunction('tool_dbtransfer_create_maintenance_file')" href="../../../_functions/tool_dbtransfer_create_maintenance_file.html" onMouseOver="funcPopup(event,'tool_dbtransfer_create_maintenance_file')">tool_dbtransfer_create_maintenance_file</a>();
<a name="l67"><span class="linenum">  67</span></a>          }
<a name="l68"><span class="linenum">  68</span></a>  
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment">        // Start output.</span>
<a name="l70"><span class="linenum">  70</span></a>          echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="phpfunction" onClick="logFunction('header')" href="../../../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>();
<a name="l71"><span class="linenum">  71</span></a>          <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('dbtype')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/dbtype.html">dbtype</a> = <a class="var it632" onMouseOver="hilite(632)" onMouseOut="lolite()" onClick="logVariable('dbtype')" href="../../../_variables/dbtype.html">$dbtype</a>;
<a name="l72"><span class="linenum">  72</span></a>          <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('dbtypefrom')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/dbtypefrom.html">dbtypefrom</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dbtype')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/dbtype.html">dbtype</a>;
<a name="l73"><span class="linenum">  73</span></a>          echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('heading')" href="../../../_functions/heading.html" onMouseOver="funcPopup(event,'heading')">heading</a>(<a class="function" onClick="logFunction('get_string')" href="../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('transferringdbto', 'tool_dbtransfer', <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>));
<a name="l74"><span class="linenum">  74</span></a>  
<a name="l75"><span class="linenum">  75</span></a>  <span class="comment">        // Do the transfer.</span>
<a name="l76"><span class="linenum">  76</span></a>          <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('tool_dbransfer_migration_running')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/tool_dbransfer_migration_running.html">tool_dbransfer_migration_running</a> = true;
<a name="l77"><span class="linenum">  77</span></a>          try {
<a name="l78"><span class="linenum">  78</span></a>              <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../../_variables/feedback.html">$feedback</a> = <span class="keyword">new </span><a class="class" onClick="logClass('html_list_progress_trace')" href="../../../_classes/html_list_progress_trace.html" onMouseOver="classPopup(event,'html_list_progress_trace')">html_list_progress_trace</a>();
<a name="l79"><span class="linenum">  79</span></a>              <a class="function" onClick="logFunction('tool_dbtransfer_transfer_database')" href="../../../_functions/tool_dbtransfer_transfer_database.html" onMouseOver="funcPopup(event,'tool_dbtransfer_transfer_database')">tool_dbtransfer_transfer_database</a>(<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it17606" onMouseOver="hilite(17606)" onMouseOut="lolite()" onClick="logVariable('targetdb')" href="../../../_variables/targetdb.html">$targetdb</a>, <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../../_variables/feedback.html">$feedback</a>);
<a name="l80"><span class="linenum">  80</span></a>              <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../../_variables/feedback.html">$feedback</a>-&gt;<a class="function" onClick="logFunction('finished')" href="../../../_functions/finished.html" onMouseOver="funcPopup(event,'finished')">finished</a>();
<a name="l81"><span class="linenum">  81</span></a>          } catch (Exception <a class="var it193" onMouseOver="hilite(193)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../../_variables/e.html">$e</a>) {
<a name="l82"><span class="linenum">  82</span></a>              if (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('enablemaintenance')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../_variables/enablemaintenance.html">enablemaintenance</a>) {
<a name="l83"><span class="linenum">  83</span></a>                  <a class="function" onClick="logFunction('tool_dbtransfer_maintenance_callback')" href="../../../_functions/tool_dbtransfer_maintenance_callback.html" onMouseOver="funcPopup(event,'tool_dbtransfer_maintenance_callback')">tool_dbtransfer_maintenance_callback</a>();
<a name="l84"><span class="linenum">  84</span></a>              }
<a name="l85"><span class="linenum">  85</span></a>              unset(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('tool_dbransfer_migration_running')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/tool_dbransfer_migration_running.html">tool_dbransfer_migration_running</a>);
<a name="l86"><span class="linenum">  86</span></a>              throw <a class="var it193" onMouseOver="hilite(193)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../../_variables/e.html">$e</a>;
<a name="l87"><span class="linenum">  87</span></a>          }
<a name="l88"><span class="linenum">  88</span></a>          unset(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('tool_dbransfer_migration_running')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/tool_dbransfer_migration_running.html">tool_dbransfer_migration_running</a>);
<a name="l89"><span class="linenum">  89</span></a>  
<a name="l90"><span class="linenum">  90</span></a>  <span class="comment">        // Finish up.</span>
<a name="l91"><span class="linenum">  91</span></a>          echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('notification')" href="../../../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(<a class="function" onClick="logFunction('get_string')" href="../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('success'), 'notifysuccess');
<a name="l92"><span class="linenum">  92</span></a>          echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('continue_button')" href="../../../_functions/continue_button.html" onMouseOver="funcPopup(event,'continue_button')">continue_button</a>(&quot;<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/wwwroot.html">wwwroot</a>/<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/admin.html">admin</a>/&quot;);
<a name="l93"><span class="linenum">  93</span></a>          echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('footer')" href="../../../_functions/footer.html" onMouseOver="funcPopup(event,'footer')">footer</a>();
<a name="l94"><span class="linenum">  94</span></a>          die;
<a name="l95"><span class="linenum">  95</span></a>      }
<a name="l96"><span class="linenum">  96</span></a>  }
<a name="l97"><span class="linenum">  97</span></a>  
<a name="l98"><span class="linenum">  98</span></a>  <span class="comment">// Otherwise display the settings form.</span>
<a name="l99"><span class="linenum">  99</span></a>  echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="phpfunction" onClick="logFunction('header')" href="../../../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>();
<a name="l100"><span class="linenum"> 100</span></a>  echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('heading')" href="../../../_functions/heading.html" onMouseOver="funcPopup(event,'heading')">heading</a>(<a class="function" onClick="logFunction('get_string')" href="../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('transferdbtoserver', 'tool_dbtransfer'));
<a name="l101"><span class="linenum"> 101</span></a>  
<a name="l102"><span class="linenum"> 102</span></a>  <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../../_variables/info.html">$info</a> = <a class="function" onClick="logFunction('format_text')" href="../../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="function" onClick="logFunction('get_string')" href="../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('transferdbintro', 'tool_dbtransfer'), <a class="constant" onClick="logConstant('FORMAT_MARKDOWN')" href="../../../_constants/FORMAT_MARKDOWN.html" onMouseOver="constPopup(event,'FORMAT_MARKDOWN')">FORMAT_MARKDOWN</a>);
<a name="l103"><span class="linenum"> 103</span></a>  echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('box')" href="../../../_functions/box.html" onMouseOver="funcPopup(event,'box')">box</a>(<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../../_variables/info.html">$info</a>);
<a name="l104"><span class="linenum"> 104</span></a>  
<a name="l105"><span class="linenum"> 105</span></a>  <a class="var it596" onMouseOver="hilite(596)" onMouseOut="lolite()" onClick="logVariable('form')" href="../../../_variables/form.html">$form</a>-&gt;<a class="function" onClick="logFunction('display')" href="../../../_functions/display.html" onMouseOver="funcPopup(event,'display')">display</a>();
<a name="l106"><span class="linenum"> 106</span></a>  if (<a class="var it11184" onMouseOver="hilite(11184)" onMouseOut="lolite()" onClick="logVariable('problem')" href="../../../_variables/problem.html">$problem</a> !== '') {
<a name="l107"><span class="linenum"> 107</span></a>      echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('box')" href="../../../_functions/box.html" onMouseOver="funcPopup(event,'box')">box</a>(<a class="var it11184" onMouseOver="hilite(11184)" onMouseOut="lolite()" onClick="logVariable('problem')" href="../../../_variables/problem.html">$problem</a>, 'generalbox error');
<a name="l108"><span class="linenum"> 108</span></a>  }
<a name="l109"><span class="linenum"> 109</span></a>  echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('footer')" href="../../../_functions/footer.html" onMouseOver="funcPopup(event,'footer')">footer</a>();
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'continue_button': ['continue_button', 'Displays a continue button ', [['backup/util/ui','renderer.php',501],['lib','outputrenderers.php',2875]], 104],
'tool_dbtransfer_transfer_database': ['tool_dbtransfer_transfer_database', 'Initiate database transfer. ', [['admin/tool/dbtransfer','locallib.php',72]], 2],
'get_driver_instance': ['get_driver_instance', 'Loads and returns a database instance with the specified type and library. ', [['lib/dml','moodle_database.php',171]], 32],
'notification': ['notification', 'Output a notification (that is, a status message about something that has just happened). ', [['lib','outputrenderers.php',2762],['lib','outputrenderers.php',4128],['lib','outputrenderers.php',4201]], 495],
'set_pagelayout': ['set_pagelayout', 'Sets the layout to use for this page. ', [['lib','pagelib.php',1063]], 277],
'require_login': ['require_login', 'This function checks that the current user is logged in and has the required privileges ', [['lib','moodlelib.php',2444]], 635],
'get_string': ['get_string', 'Return a core get_string() call ', [['lib/external','externallib.php',112],['lib','moodlelib.php',6538],['lib','moodlelib.php',9417],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38],['lib/classes','string_manager_install.php',95],['question/behaviour','behaviourbase.php',756]], 19235],
'js_init_code': ['js_init_code', 'Add short static javascript code fragment to page footer. This is intended primarily for loading of js modules and initialising page layout. Ideally the JS code fragment should be stored in plugin renderer so that themes may override it. ', [['lib','outputrequirementslib.php',1074]], 7],
'get_tables': ['get_tables', 'Return tables in database WITHOUT current prefix. ', [['lib/dml','pgsql_native_moodle_database.php',304],['lib/dml','oci_native_moodle_database.php',384],['lib/dml','sqlsrv_native_moodle_database.php',366],['lib/dml','sqlite3_pdo_moodle_database.php',137],['lib/dml','mssql_native_moodle_database.php',309],['lib/dml','mysqli_native_moodle_database.php',512],['lib/dml/tests','dml_test.php',5415]], 38],
'connect': ['connect', 'Connect to the remote server ', [['lib/zend/Zend/Http/Client/Adapter','Socket.php',185],['lib/adodb','adodb.inc.php',528],['lib/dml','pgsql_native_moodle_database.php',106],['lib/dml','oci_native_moodle_database.php',122],['lib/zend/Zend/Http/Client/Adapter','Test.php',124],['lib/google/src/Google/Cache','Memcache.php',157],['lib/dml','sqlsrv_native_moodle_database.php',120],['lib/zend/Zend/Gdata/App','LoggingHttpClientAdapterSocket.php',66],['lib/zend/Zend/Http/Client/Adapter','Proxy.php',79],['lib/phpmailer','class.smtp.php',220],['lib/zend/Zend/Http/Client/Adapter','Interface.php',45],['lib/adodb','adodb-pear.inc.php',120],['lib/jabber/XMPP','XMLStream.php',288],['lib/dml','mssql_native_moodle_database.php',101],['lib/adodb','adodb-memcache.lib.inc.php',59],['lib/dml','mysqli_native_moodle_database.php',404],['lib/zend/Zend/Http/Client/Adapter','Curl.php',193],['lib/zend/Zend/Amf/Adobe','DbInspector.php',76],['lib/dml/tests','dml_test.php',5411],['lib/jabber/XMPP','BOSH.php',51],['lib/dml','pdo_moodle_database.php',51]], 55],
'display': ['display', '', [['mod/lesson/pagetypes','matching.php',50],['mod/lesson/pagetypes','cluster.php',39],['lib/minify/lib/Minify/Cache','XCache.php',74],['mod/quiz/report/grading','report.php',51],['question/classes/bank','view.php',451],['mod/scorm/report/objectives/classes','report.php',37],['backup/util/ui','base_ui.class.php',169],['lib/minify/lib/Minify/Cache','Memcache.php',85],['lib/minify/lib/Minify/Cache','APC.php',79],['mod/lesson/pagetypes','numerical.php',50],['mod/scorm/report/interactions/classes','report.php',31],['lib/pear/HTML','Common.php',428],['backup/util/ui','import_extensions.php',154],['mod/quiz/report/responses','report.php',51],['mod/quiz/report/statistics','report.php',51],['question/classes/bank','column_base.php',164],['backup/util/ui','restore_ui.class.php',373],['course/format/singleactivity','renderer.php',36],['mod/lesson/pagetypes','endofcluster.php',39],['user/selector','lib.php',205],['backup/util/ui','base_moodleform.class.php',365],['admin/roles/classes','capability_table_with_risks.php',132],['lib','formslib.php',913],['backup/util/ui','restore_ui_stage.class.php',355],['backup/util/ui','restore_ui_stage.class.php',497],['backup/util/ui','restore_ui_stage.class.php',1025],['backup/util/ui','restore_ui_stage.class.php',1112],['mod/lesson/pagetypes','truefalse.php',50],['repository/flickr_public','image.php',149],['mod/scorm/report/basic/classes','report.php',30],['admin/roles/classes','capability_table_base.php',71],['mod/lesson/pagetypes','endofbranch.php',39],['mod/lesson/pagetypes','essay.php',67],['mod/scorm/classes','report.php',39],['mod/quiz/report/overview','report.php',42],['backup/util/ui','backup_ui_stage.class.php',545],['backup/util/ui','backup_ui_stage.class.php',588],['lib/minify/lib/Minify/Cache','ZendPlatform.php',84],['mod/lesson/pagetypes','shortanswer.php',50],['cohort','upload_form.php',316],['mod/scorm/report/graphs/classes','report.php',36],['backup/util/ui','base_ui_stage.class.php',126],['mod/lesson/pagetypes','multichoice.php',87],['lib/minify/lib/Minify/Cache','File.php',72],['admin/roles/classes','define_role_table_advanced.php',603],['mod/lesson/pagetypes','branchtable.php',105]], 297],
'footer': ['footer', 'Returns the footer ', [['mod/lesson','renderer.php',78],['lib/tcpdf','tcpdf.php',3464],['lib','outputrenderers.php',1021],['lib','outputrenderers.php',4143],['lib','outputrenderers.php',4248]], 780],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 1891],
'tool_dbtransfer_maintenance_callback': ['tool_dbtransfer_maintenance_callback', 'This callback is responsible for unsetting maintenance mode if the migration is interrupted. ', [['admin/tool/dbtransfer','locallib.php',192]], 1],
'admin_externalpage_setup': ['admin_externalpage_setup', 'Initialise admin page - this function does require login and permission checks specified in page definition. ', [['lib','adminlib.php',6627]], 144],
'get_data': ['get_data', '', [['mod/feedback/item/captcha','lib.php',76],['grade/grading/form/guide','edit_form.php',142],['grade/grading/form','lib.php',841],['grade/grading/form/rubric','edit_form.php',136],['mod/feedback/item/multichoicerated','multichoicerated_form.php',93],['mod/scorm','mod_form.php',514],['lib/classes/event','base.php',564],['mod/feedback','mod_form.php',163],['mod/feedback/item/multichoice','multichoice_form.php',93],['grade/export','grade_export_form.php',206],['lib/simplepie/library/SimplePie','Parser.php',263],['lib','completionlib.php',882],['lib','formslib.php',584],['mod/workshop','locallib.php',3815],['mod/glossary','mod_form.php',203],['mod/feedback/item/textfield','textfield_form.php',57],['blocks/rss_client','editfeed.php',101],['admin/tool/filetypes','edit_form.php',97],['mod/lesson','mod_form.php',383],['admin/tool/uploaduser','user_form.php',394],['admin/webservice','forms.php',299],['mod/feedback/item/numeric','numeric_form.php',60],['mod/feedback/item/multichoice','lib.php',87],['mod/choice','mod_form.php',128],['mod/feedback/item/textarea','textarea_form.php',57],['mod/forum','mod_form.php',270],['mod/feedback/item/textfield','lib.php',89],['mod/feedback/item/multichoicerated','lib.php',92],['admin/tool/uploadcourse/classes','course.php',269],['mod/feedback/item/label','lib.php',99],['mod/feedback/item/textarea','lib.php',92],['backup/util/structure','restore_path_element.class.php',118],['mod/feedback/item/numeric','lib.php',105],['mod/feedback/item/info','lib.php',76],['mod/feedback/item','feedback_item_class.php',37],['mod/feedback/item','feedback_item_class.php',149],['lib/classes/message/inbound','address_manager.php',361],['course','editsection_form.php',96],['message/tests','inbound_test.php',632]], 364],
'box': ['box', 'Outputs a box. ', [['lib','outputrenderers.php',2974]], 295],
'tool_dbtransfer_create_maintenance_file': ['tool_dbtransfer_create_maintenance_file', 'Create CLI maintenance file to prevent all access. ', [['admin/tool/dbtransfer','locallib.php',162]], 1],
'require': ['require', '', [['lib/yuilib/3.17.2/timers','timers-debug.js',27],['lib/yuilib/3.17.2/timers','timers.js',27]], 454],
'heading': ['heading', 'Get the heading for this page. ', [['grade/report/singleview/classes/local/screen','grade.php',283],['grade/report/singleview/classes/local/screen','user.php',281],['lib','outputrenderers.php',2957],['lib','outputrenderers.php',4080],['lib','outputrenderers.php',4254],['grade/report/singleview/classes/local/screen','screen.php',197]], 763],
'finished': ['finished', 'Called when the processing is finished. ', [['lib','weblib.php',3195],['lib','weblib.php',3303],['lib','weblib.php',3390],['lib','weblib.php',3456]], 55],
'format_text': ['format_text', 'Given text in a variety of format codings, this function returns the text as safe HTML. ', [['lib','weblib.php',1115],['lib','tablelib.php',846],['lib','tablelib.php',1583],['lib','tablelib.php',1900],['question/type','questionbase.php',345],['lib/classes','grading_external.php',182]], 325],
'explode': ['explode', '', [], 1599],
'define': ['define', '', [], 2170],
'header': ['header', '', [], 1294]};
CLASS_DATA={
'database_transfer_form': ['database_transfer_form', 'Definition of db transfer settings form. ', [['admin/tool/dbtransfer','database_transfer_form.php',31]], 1],
'html_list_progress_trace': ['html_list_progress_trace', 'HTML List Progress Tree ', [['lib','weblib.php',3263]], 4]};
CONST_DATA={
'FORMAT_MARKDOWN': ['FORMAT_MARKDOWN', '', [['lib','weblib.php',65]], 64],
'NO_OUTPUT_BUFFERING': ['NO_OUTPUT_BUFFERING', '', [['admin/tool/generator','maketestcourse.php',27],['admin/tool/behat/cli','util_single_run.php',91],['admin/tool/innodb','index.php',26],['admin/tool/dbtransfer','dbexport.php',25],['admin/tool/behat/cli','util.php',35],['report/security','index.php',26],['admin/tool/multilangupgrade','index.php',29],['admin/tool/generator/cli','maketestsite.php',26],['admin','cron.php',49],['admin/tool/generator/cli','maketestcourse.php',26],['admin/tool/customlang','index.php',26],['admin/tool/replace','index.php',25],['admin/tool/phpunit','webrunner.php',25],['admin/tool/dbtransfer','index.php',25],['mod/chat/gui_header_js','jsupdated.php',34],['report/performance','index.php',25],['admin/tool/behat/cli','run.php',33],['repository/boxnet','migrationv1.php',34],['lib','setup.php',242],['admin','enrol.php',26],['lib/phpunit','bootstrap.php',87],['admin/tool/assignmentupgrade','batchupgrade.php',25],['admin/tool/generator/cli','maketestplan.php',26],['admin','index.php',55]], 26]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
