<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /admin/tool/messageinbound/classes/manager.php source</title>
    <link rel="stylesheet" href="../../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../../';
subdir='admin/tool/messageinbound/classes';
filename='manager.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/admin/tool/messageinbound/classes/</a> -> <a href="manager.php.html">manager.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="manager.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="manager.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * The Mail Pickup Manager.</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package    tool_messageinbound</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @copyright  2014 Andrew Nicols</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> */</span>
<a name="l24"><span class="linenum">  24</span></a>  
<a name="l25"><span class="linenum">  25</span></a>  namespace tool_messageinbound;
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l28"><span class="linenum">  28</span></a>  
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment">/**</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> * Mail Pickup Manager.</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> *</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * @copyright  2014 Andrew Nicols</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> */</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('manager')" href="../../../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a> {
<a name="l36"><span class="linenum">  36</span></a>  
<a name="l37"><span class="linenum">  37</span></a>      <span class="comment">/**</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment">     * @var string The main mailbox to check.</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment">     */</span>
<a name="l40"><span class="linenum">  40</span></a>      const MAILBOX = 'INBOX';
<a name="l41"><span class="linenum">  41</span></a>  
<a name="l42"><span class="linenum">  42</span></a>      <span class="comment">/**</span>
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment">     * @var string The mailbox to store messages in when they are awaiting confirmation.</span>
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment">     */</span>
<a name="l45"><span class="linenum">  45</span></a>      const CONFIRMATIONFOLDER = 'tobeconfirmed';
<a name="l46"><span class="linenum">  46</span></a>  
<a name="l47"><span class="linenum">  47</span></a>      <span class="comment">/**</span>
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment">     * @var string The flag for seen/read messages.</span>
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment">     */</span>
<a name="l50"><span class="linenum">  50</span></a>      const MESSAGE_SEEN = '\seen';
<a name="l51"><span class="linenum">  51</span></a>  
<a name="l52"><span class="linenum">  52</span></a>      <span class="comment">/**</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment">     * @var string The flag for flagged messages.</span>
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment">     */</span>
<a name="l55"><span class="linenum">  55</span></a>      const MESSAGE_FLAGGED = '\flagged';
<a name="l56"><span class="linenum">  56</span></a>  
<a name="l57"><span class="linenum">  57</span></a>      <span class="comment">/**</span>
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment">     * @var string The flag for deleted messages.</span>
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment">     */</span>
<a name="l60"><span class="linenum">  60</span></a>      const MESSAGE_DELETED = '\deleted';
<a name="l61"><span class="linenum">  61</span></a>  
<a name="l62"><span class="linenum">  62</span></a>      <span class="comment">/**</span>
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment">     * @var \string IMAP folder namespace.</span>
<a name="l64"><span class="linenum">  64</span></a>  <span class="comment">     */</span>
<a name="l65"><span class="linenum">  65</span></a>      protected <a class="var it26500" onMouseOver="hilite(26500)" onMouseOut="lolite()" onClick="logVariable('imapnamespace')" href="../../../../_variables/imapnamespace.html">$imapnamespace</a> = null;
<a name="l66"><span class="linenum">  66</span></a>  
<a name="l67"><span class="linenum">  67</span></a>      <span class="comment">/**</span>
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment">     * @var \Horde_Imap_Client_Socket A reference to the IMAP client.</span>
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment">     */</span>
<a name="l70"><span class="linenum">  70</span></a>      protected <a class="var it2496" onMouseOver="hilite(2496)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../../../_variables/client.html">$client</a> = null;
<a name="l71"><span class="linenum">  71</span></a>  
<a name="l72"><span class="linenum">  72</span></a>      <span class="comment">/**</span>
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment">     * @var \core\message\inbound\address_manager A reference to the Inbound Message Address Manager instance.</span>
<a name="l74"><span class="linenum">  74</span></a>  <span class="comment">     */</span>
<a name="l75"><span class="linenum">  75</span></a>      protected <a class="var it26501" onMouseOver="hilite(26501)" onMouseOut="lolite()" onClick="logVariable('addressmanager')" href="../../../../_variables/addressmanager.html">$addressmanager</a> = null;
<a name="l76"><span class="linenum">  76</span></a>  
<a name="l77"><span class="linenum">  77</span></a>      <span class="comment">/**</span>
<a name="l78"><span class="linenum">  78</span></a>  <span class="comment">     * @var \stdClass The data for the current message being processed.</span>
<a name="l79"><span class="linenum">  79</span></a>  <span class="comment">     */</span>
<a name="l80"><span class="linenum">  80</span></a>      protected <a class="var it26502" onMouseOver="hilite(26502)" onMouseOut="lolite()" onClick="logVariable('currentmessagedata')" href="../../../../_variables/currentmessagedata.html">$currentmessagedata</a> = null;
<a name="l81"><span class="linenum">  81</span></a>  
<a name="l82"><span class="linenum">  82</span></a>      <span class="comment">/**</span>
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment">     * Retrieve the connection to the IMAP client.</span>
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment">     *</span>
<a name="l85"><span class="linenum">  85</span></a>  <span class="comment">     * @return bool Whether a connection was successfully established.</span>
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment">     */</span>
<a name="l87"><span class="linenum">  87</span></a>      protected function <a class="function" onClick="logFunction('get_imap_client')" href="../../../../_functions/get_imap_client.html" onMouseOver="funcPopup(event,'get_imap_client')">get_imap_client</a>() {
<a name="l88"><span class="linenum">  88</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>;
<a name="l89"><span class="linenum">  89</span></a>  
<a name="l90"><span class="linenum">  90</span></a>          if (!\core\message\inbound\<a class="class" onClick="logClass('manager')" href="../../../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('is_enabled')" href="../../../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>()) {
<a name="l91"><span class="linenum">  91</span></a>  <span class="comment">            // E-mail processing not set up.</span>
<a name="l92"><span class="linenum">  92</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;Inbound Message not fully configured - exiting early.&quot;);
<a name="l93"><span class="linenum">  93</span></a>              return false;
<a name="l94"><span class="linenum">  94</span></a>          }
<a name="l95"><span class="linenum">  95</span></a>  
<a name="l96"><span class="linenum">  96</span></a>          <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;Connecting to {<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('messageinbound_host')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/messageinbound_host.html">messageinbound_host</a>} as {<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('messageinbound_hostuser')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/messageinbound_hostuser.html">messageinbound_hostuser</a>}...&quot;);
<a name="l97"><span class="linenum">  97</span></a>  
<a name="l98"><span class="linenum">  98</span></a>          <a class="var it406" onMouseOver="hilite(406)" onMouseOut="lolite()" onClick="logVariable('configuration')" href="../../../../_variables/configuration.html">$configuration</a> = array(
<a name="l99"><span class="linenum">  99</span></a>              'username' =&gt; <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('messageinbound_hostuser')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/messageinbound_hostuser.html">messageinbound_hostuser</a>,
<a name="l100"><span class="linenum"> 100</span></a>              'password' =&gt; <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('messageinbound_hostpass')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/messageinbound_hostpass.html">messageinbound_hostpass</a>,
<a name="l101"><span class="linenum"> 101</span></a>              'hostspec' =&gt; <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('messageinbound_host')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/messageinbound_host.html">messageinbound_host</a>,
<a name="l102"><span class="linenum"> 102</span></a>              'secure'   =&gt; <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('messageinbound_hostssl')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/messageinbound_hostssl.html">messageinbound_hostssl</a>,
<a name="l103"><span class="linenum"> 103</span></a>              'debug'    =&gt; empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('debugimap')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/debugimap.html">debugimap</a>) ? null : <a class="function" onClick="logFunction('fopen')" href="../../../../_functions/fopen.html" onMouseOver="funcPopup(event,'fopen')">fopen</a>('php://stderr', 'w'),
<a name="l104"><span class="linenum"> 104</span></a>          );
<a name="l105"><span class="linenum"> 105</span></a>  
<a name="l106"><span class="linenum"> 106</span></a>          if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it406" onMouseOver="hilite(406)" onMouseOut="lolite()" onClick="logVariable('configuration')" href="../../../../_variables/configuration.html">$configuration</a>['hostspec'], ':')) {
<a name="l107"><span class="linenum"> 107</span></a>              <a class="var it26508" onMouseOver="hilite(26508)" onMouseOut="lolite()" onClick="logVariable('hostdata')" href="../../../../_variables/hostdata.html">$hostdata</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(':', <a class="var it406" onMouseOver="hilite(406)" onMouseOut="lolite()" onClick="logVariable('configuration')" href="../../../../_variables/configuration.html">$configuration</a>['hostspec']);
<a name="l108"><span class="linenum"> 108</span></a>              if (<a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it26508" onMouseOver="hilite(26508)" onMouseOut="lolite()" onClick="logVariable('hostdata')" href="../../../../_variables/hostdata.html">$hostdata</a>) === 2) {
<a name="l109"><span class="linenum"> 109</span></a>  <span class="comment">                // A hostname in the format hostname:port has been provided.</span>
<a name="l110"><span class="linenum"> 110</span></a>                  <a class="var it406" onMouseOver="hilite(406)" onMouseOut="lolite()" onClick="logVariable('configuration')" href="../../../../_variables/configuration.html">$configuration</a>['hostspec'] = <a class="var it26508" onMouseOver="hilite(26508)" onMouseOut="lolite()" onClick="logVariable('hostdata')" href="../../../../_variables/hostdata.html">$hostdata</a>[0];
<a name="l111"><span class="linenum"> 111</span></a>                  <a class="var it406" onMouseOver="hilite(406)" onMouseOut="lolite()" onClick="logVariable('configuration')" href="../../../../_variables/configuration.html">$configuration</a>['port'] = <a class="var it26508" onMouseOver="hilite(26508)" onMouseOut="lolite()" onClick="logVariable('hostdata')" href="../../../../_variables/hostdata.html">$hostdata</a>[1];
<a name="l112"><span class="linenum"> 112</span></a>              }
<a name="l113"><span class="linenum"> 113</span></a>          }
<a name="l114"><span class="linenum"> 114</span></a>  
<a name="l115"><span class="linenum"> 115</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a> = new \Horde_Imap_Client_Socket(<a class="var it406" onMouseOver="hilite(406)" onMouseOut="lolite()" onClick="logVariable('configuration')" href="../../../../_variables/configuration.html">$configuration</a>);
<a name="l116"><span class="linenum"> 116</span></a>  
<a name="l117"><span class="linenum"> 117</span></a>          try {
<a name="l118"><span class="linenum"> 118</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('login')" href="../../../../_functions/login.html" onMouseOver="funcPopup(event,'login')">login</a>();
<a name="l119"><span class="linenum"> 119</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;Connection established.&quot;);
<a name="l120"><span class="linenum"> 120</span></a>  
<a name="l121"><span class="linenum"> 121</span></a>  <span class="comment">            // Ensure that mailboxes exist.</span>
<a name="l122"><span class="linenum"> 122</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_mailboxes_exist')" href="../../../../_functions/ensure_mailboxes_exist.html" onMouseOver="funcPopup(event,'ensure_mailboxes_exist')">ensure_mailboxes_exist</a>();
<a name="l123"><span class="linenum"> 123</span></a>  
<a name="l124"><span class="linenum"> 124</span></a>              return true;
<a name="l125"><span class="linenum"> 125</span></a>  
<a name="l126"><span class="linenum"> 126</span></a>          } catch (\Horde_Imap_Client_Exception <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../../../_variables/e.html">$e</a>) {
<a name="l127"><span class="linenum"> 127</span></a>              <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a> = <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>();
<a name="l128"><span class="linenum"> 128</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;Unable to connect to IMAP server. Failed with '{<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a>}'&quot;);
<a name="l129"><span class="linenum"> 129</span></a>  
<a name="l130"><span class="linenum"> 130</span></a>              return false;
<a name="l131"><span class="linenum"> 131</span></a>          }
<a name="l132"><span class="linenum"> 132</span></a>      }
<a name="l133"><span class="linenum"> 133</span></a>  
<a name="l134"><span class="linenum"> 134</span></a>      <span class="comment">/**</span>
<a name="l135"><span class="linenum"> 135</span></a>  <span class="comment">     * Shutdown and close the connection to the IMAP client.</span>
<a name="l136"><span class="linenum"> 136</span></a>  <span class="comment">     */</span>
<a name="l137"><span class="linenum"> 137</span></a>      protected function <a class="function" onClick="logFunction('close_connection')" href="../../../../_functions/close_connection.html" onMouseOver="funcPopup(event,'close_connection')">close_connection</a>() {
<a name="l138"><span class="linenum"> 138</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>) {
<a name="l139"><span class="linenum"> 139</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l140"><span class="linenum"> 140</span></a>          }
<a name="l141"><span class="linenum"> 141</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a> = null;
<a name="l142"><span class="linenum"> 142</span></a>      }
<a name="l143"><span class="linenum"> 143</span></a>  
<a name="l144"><span class="linenum"> 144</span></a>      <span class="comment">/**</span>
<a name="l145"><span class="linenum"> 145</span></a>  <span class="comment">     * Get the confirmation folder imap name</span>
<a name="l146"><span class="linenum"> 146</span></a>  <span class="comment">     *</span>
<a name="l147"><span class="linenum"> 147</span></a>  <span class="comment">     * @return string</span>
<a name="l148"><span class="linenum"> 148</span></a>  <span class="comment">     */</span>
<a name="l149"><span class="linenum"> 149</span></a>      protected function <a class="function" onClick="logFunction('get_confirmation_folder')" href="../../../../_functions/get_confirmation_folder.html" onMouseOver="funcPopup(event,'get_confirmation_folder')">get_confirmation_folder</a>() {
<a name="l150"><span class="linenum"> 150</span></a>  
<a name="l151"><span class="linenum"> 151</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('imapnamespace')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/imapnamespace.html">imapnamespace</a> === null) {
<a name="l152"><span class="linenum"> 152</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('queryCapability')" href="../../../../_functions/querycapability.html" onMouseOver="funcPopup(event,'querycapability')">queryCapability</a>('NAMESPACE')) {
<a name="l153"><span class="linenum"> 153</span></a>                  <a class="var it3236" onMouseOver="hilite(3236)" onMouseOut="lolite()" onClick="logVariable('namespaces')" href="../../../../_variables/namespaces.html">$namespaces</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('getNamespaces')" href="../../../../_functions/getnamespaces.html" onMouseOver="funcPopup(event,'getnamespaces')">getNamespaces</a>(array(), array('ob_return' =&gt; true));
<a name="l154"><span class="linenum"> 154</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('imapnamespace')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/imapnamespace.html">imapnamespace</a> = <a class="var it3236" onMouseOver="hilite(3236)" onMouseOut="lolite()" onClick="logVariable('namespaces')" href="../../../../_variables/namespaces.html">$namespaces</a>-&gt;<a class="function" onClick="logFunction('getNamespace')" href="../../../../_functions/getnamespace.html" onMouseOver="funcPopup(event,'getnamespace')">getNamespace</a>('INBOX');
<a name="l155"><span class="linenum"> 155</span></a>              } else {
<a name="l156"><span class="linenum"> 156</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('imapnamespace')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/imapnamespace.html">imapnamespace</a> = '';
<a name="l157"><span class="linenum"> 157</span></a>              }
<a name="l158"><span class="linenum"> 158</span></a>          }
<a name="l159"><span class="linenum"> 159</span></a>  
<a name="l160"><span class="linenum"> 160</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('imapnamespace')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/imapnamespace.html">imapnamespace</a> . self::CONFIRMATIONFOLDER;
<a name="l161"><span class="linenum"> 161</span></a>      }
<a name="l162"><span class="linenum"> 162</span></a>  
<a name="l163"><span class="linenum"> 163</span></a>      <span class="comment">/**</span>
<a name="l164"><span class="linenum"> 164</span></a>  <span class="comment">     * Get the current mailbox information.</span>
<a name="l165"><span class="linenum"> 165</span></a>  <span class="comment">     *</span>
<a name="l166"><span class="linenum"> 166</span></a>  <span class="comment">     * @return \Horde_Imap_Client_Mailbox</span>
<a name="l167"><span class="linenum"> 167</span></a>  <span class="comment">     * @throws \core\message\inbound\processing_failed_exception if the mailbox could not be opened.</span>
<a name="l168"><span class="linenum"> 168</span></a>  <span class="comment">     */</span>
<a name="l169"><span class="linenum"> 169</span></a>      protected function <a class="function" onClick="logFunction('get_mailbox')" href="../../../../_functions/get_mailbox.html" onMouseOver="funcPopup(event,'get_mailbox')">get_mailbox</a>() {
<a name="l170"><span class="linenum"> 170</span></a>  <span class="comment">        // Get the current mailbox.</span>
<a name="l171"><span class="linenum"> 171</span></a>          <a class="var it1406" onMouseOver="hilite(1406)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('currentMailbox')" href="../../../../_functions/currentmailbox.html" onMouseOver="funcPopup(event,'currentmailbox')">currentMailbox</a>();
<a name="l172"><span class="linenum"> 172</span></a>  
<a name="l173"><span class="linenum"> 173</span></a>          if (isset(<a class="var it1406" onMouseOver="hilite(1406)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a>['mailbox'])) {
<a name="l174"><span class="linenum"> 174</span></a>              return <a class="var it1406" onMouseOver="hilite(1406)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a>['mailbox'];
<a name="l175"><span class="linenum"> 175</span></a>          } else {
<a name="l176"><span class="linenum"> 176</span></a>              throw new \core\message\inbound\processing_failed_exception('couldnotopenmailbox', 'tool_messageinbound');
<a name="l177"><span class="linenum"> 177</span></a>          }
<a name="l178"><span class="linenum"> 178</span></a>      }
<a name="l179"><span class="linenum"> 179</span></a>  
<a name="l180"><span class="linenum"> 180</span></a>      <span class="comment">/**</span>
<a name="l181"><span class="linenum"> 181</span></a>  <span class="comment">     * Execute the main Inbound Message pickup task.</span>
<a name="l182"><span class="linenum"> 182</span></a>  <span class="comment">     *</span>
<a name="l183"><span class="linenum"> 183</span></a>  <span class="comment">     * @return bool</span>
<a name="l184"><span class="linenum"> 184</span></a>  <span class="comment">     */</span>
<a name="l185"><span class="linenum"> 185</span></a>      public function <a class="function" onClick="logFunction('pickup_messages')" href="../../../../_functions/pickup_messages.html" onMouseOver="funcPopup(event,'pickup_messages')">pickup_messages</a>() {
<a name="l186"><span class="linenum"> 186</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_imap_client')" href="../../../../_functions/get_imap_client.html" onMouseOver="funcPopup(event,'get_imap_client')">get_imap_client</a>()) {
<a name="l187"><span class="linenum"> 187</span></a>              return false;
<a name="l188"><span class="linenum"> 188</span></a>          }
<a name="l189"><span class="linenum"> 189</span></a>  
<a name="l190"><span class="linenum"> 190</span></a>  <span class="comment">        // Restrict results to messages which are unseen, and have not been flagged.</span>
<a name="l191"><span class="linenum"> 191</span></a>          <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../../_variables/search.html">$search</a> = new \Horde_Imap_Client_Search_Query();
<a name="l192"><span class="linenum"> 192</span></a>          <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../../_variables/search.html">$search</a>-&gt;<a class="function" onClick="logFunction('flag')" href="../../../../_functions/flag.html" onMouseOver="funcPopup(event,'flag')">flag</a>(self::MESSAGE_SEEN, false);
<a name="l193"><span class="linenum"> 193</span></a>          <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../../_variables/search.html">$search</a>-&gt;<a class="function" onClick="logFunction('flag')" href="../../../../_functions/flag.html" onMouseOver="funcPopup(event,'flag')">flag</a>(self::MESSAGE_FLAGGED, false);
<a name="l194"><span class="linenum"> 194</span></a>          <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;Searching for Unseen, Unflagged email in the folder '&quot; . self::MAILBOX . &quot;'&quot;);
<a name="l195"><span class="linenum"> 195</span></a>          <a class="var it4821" onMouseOver="hilite(4821)" onMouseOut="lolite()" onClick="logVariable('results')" href="../../../../_variables/results.html">$results</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('search')" href="../../../../_functions/search.html" onMouseOver="funcPopup(event,'search')">search</a>(self::MAILBOX, <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../../_variables/search.html">$search</a>);
<a name="l196"><span class="linenum"> 196</span></a>  
<a name="l197"><span class="linenum"> 197</span></a>  <span class="comment">        // We require the envelope data and structure of each message.</span>
<a name="l198"><span class="linenum"> 198</span></a>          <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a> = new \Horde_Imap_Client_Fetch_Query();
<a name="l199"><span class="linenum"> 199</span></a>          <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>-&gt;<a class="function" onClick="logFunction('envelope')" href="../../../../_functions/envelope.html" onMouseOver="funcPopup(event,'envelope')">envelope</a>();
<a name="l200"><span class="linenum"> 200</span></a>          <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>-&gt;<a class="function" onClick="logFunction('structure')" href="../../../../_functions/structure.html" onMouseOver="funcPopup(event,'structure')">structure</a>();
<a name="l201"><span class="linenum"> 201</span></a>  
<a name="l202"><span class="linenum"> 202</span></a>  <span class="comment">        // Retrieve the message id.</span>
<a name="l203"><span class="linenum"> 203</span></a>          <a class="var it925" onMouseOver="hilite(925)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../../../../_variables/messages.html">$messages</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('fetch')" href="../../../../_functions/fetch.html" onMouseOver="funcPopup(event,'fetch')">fetch</a>(self::MAILBOX, <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>, array('ids' =&gt; <a class="var it4821" onMouseOver="hilite(4821)" onMouseOut="lolite()" onClick="logVariable('results')" href="../../../../_variables/results.html">$results</a>['match']));
<a name="l204"><span class="linenum"> 204</span></a>  
<a name="l205"><span class="linenum"> 205</span></a>          <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;Found &quot; . <a class="var it925" onMouseOver="hilite(925)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../../../../_variables/messages.html">$messages</a>-&gt;<a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>() . &quot; messages to parse. Parsing...&quot;);
<a name="l206"><span class="linenum"> 206</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addressmanager')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/addressmanager.html">addressmanager</a> = new \core\message\inbound\address_manager();
<a name="l207"><span class="linenum"> 207</span></a>          foreach (<a class="var it925" onMouseOver="hilite(925)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../../../../_variables/messages.html">$messages</a> as <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a>) {
<a name="l208"><span class="linenum"> 208</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_message')" href="../../../../_functions/process_message.html" onMouseOver="funcPopup(event,'process_message')">process_message</a>(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a>);
<a name="l209"><span class="linenum"> 209</span></a>          }
<a name="l210"><span class="linenum"> 210</span></a>  
<a name="l211"><span class="linenum"> 211</span></a>  <span class="comment">        // Close the client connection.</span>
<a name="l212"><span class="linenum"> 212</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('close_connection')" href="../../../../_functions/close_connection.html" onMouseOver="funcPopup(event,'close_connection')">close_connection</a>();
<a name="l213"><span class="linenum"> 213</span></a>  
<a name="l214"><span class="linenum"> 214</span></a>          return true;
<a name="l215"><span class="linenum"> 215</span></a>      }
<a name="l216"><span class="linenum"> 216</span></a>  
<a name="l217"><span class="linenum"> 217</span></a>      <span class="comment">/**</span>
<a name="l218"><span class="linenum"> 218</span></a>  <span class="comment">     * Process a message received and validated by the Inbound Message processor.</span>
<a name="l219"><span class="linenum"> 219</span></a>  <span class="comment">     *</span>
<a name="l220"><span class="linenum"> 220</span></a>  <span class="comment">     * @param \stdClass $maildata The data retrieved from the database for the current record.</span>
<a name="l221"><span class="linenum"> 221</span></a>  <span class="comment">     * @return bool Whether the message was successfully processed.</span>
<a name="l222"><span class="linenum"> 222</span></a>  <span class="comment">     * @throws \core\message\inbound\processing_failed_exception if the message cannot be found.</span>
<a name="l223"><span class="linenum"> 223</span></a>  <span class="comment">     */</span>
<a name="l224"><span class="linenum"> 224</span></a>      public function <a class="function" onClick="logFunction('process_existing_message')" href="../../../../_functions/process_existing_message.html" onMouseOver="funcPopup(event,'process_existing_message')">process_existing_message</a>(\stdClass <a class="var it5662" onMouseOver="hilite(5662)" onMouseOut="lolite()" onClick="logVariable('maildata')" href="../../../../_variables/maildata.html">$maildata</a>) {
<a name="l225"><span class="linenum"> 225</span></a>  <span class="comment">        // Grab the new IMAP client.</span>
<a name="l226"><span class="linenum"> 226</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_imap_client')" href="../../../../_functions/get_imap_client.html" onMouseOver="funcPopup(event,'get_imap_client')">get_imap_client</a>()) {
<a name="l227"><span class="linenum"> 227</span></a>              return false;
<a name="l228"><span class="linenum"> 228</span></a>          }
<a name="l229"><span class="linenum"> 229</span></a>  
<a name="l230"><span class="linenum"> 230</span></a>  <span class="comment">        // Build the search.</span>
<a name="l231"><span class="linenum"> 231</span></a>          <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../../_variables/search.html">$search</a> = new \Horde_Imap_Client_Search_Query();
<a name="l232"><span class="linenum"> 232</span></a>  <span class="comment">        // When dealing with Inbound Message messages, we mark them as flagged and seen. Restrict the search to those criterion.</span>
<a name="l233"><span class="linenum"> 233</span></a>          <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../../_variables/search.html">$search</a>-&gt;<a class="function" onClick="logFunction('flag')" href="../../../../_functions/flag.html" onMouseOver="funcPopup(event,'flag')">flag</a>(self::MESSAGE_SEEN, true);
<a name="l234"><span class="linenum"> 234</span></a>          <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../../_variables/search.html">$search</a>-&gt;<a class="function" onClick="logFunction('flag')" href="../../../../_functions/flag.html" onMouseOver="funcPopup(event,'flag')">flag</a>(self::MESSAGE_FLAGGED, true);
<a name="l235"><span class="linenum"> 235</span></a>          <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;Searching for a Seen, Flagged message in the folder '&quot; . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_confirmation_folder')" href="../../../../_functions/get_confirmation_folder.html" onMouseOver="funcPopup(event,'get_confirmation_folder')">get_confirmation_folder</a>() . &quot;'&quot;);
<a name="l236"><span class="linenum"> 236</span></a>  
<a name="l237"><span class="linenum"> 237</span></a>  <span class="comment">        // Match the message ID.</span>
<a name="l238"><span class="linenum"> 238</span></a>          <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../../_variables/search.html">$search</a>-&gt;<a class="function" onClick="logFunction('headerText')" href="../../../../_functions/headertext.html" onMouseOver="funcPopup(event,'headertext')">headerText</a>('message-id', <a class="var it5662" onMouseOver="hilite(5662)" onMouseOut="lolite()" onClick="logVariable('maildata')" href="../../../../_variables/maildata.html">$maildata</a>-&gt;<a onClick="logVariable('messageid')" class="var it44726" onMouseOver="hilite(44726)" onMouseOut="lolite()" href="../../../../_variables/messageid.html">messageid</a>);
<a name="l239"><span class="linenum"> 239</span></a>          <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../../_variables/search.html">$search</a>-&gt;<a class="function" onClick="logFunction('headerText')" href="../../../../_functions/headertext.html" onMouseOver="funcPopup(event,'headertext')">headerText</a>('to', <a class="var it5662" onMouseOver="hilite(5662)" onMouseOut="lolite()" onClick="logVariable('maildata')" href="../../../../_variables/maildata.html">$maildata</a>-&gt;<a onClick="logVariable('address')" class="var it44726" onMouseOver="hilite(44726)" onMouseOut="lolite()" href="../../../../_variables/address.html">address</a>);
<a name="l240"><span class="linenum"> 240</span></a>  
<a name="l241"><span class="linenum"> 241</span></a>          <a class="var it4821" onMouseOver="hilite(4821)" onMouseOut="lolite()" onClick="logVariable('results')" href="../../../../_variables/results.html">$results</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('search')" href="../../../../_functions/search.html" onMouseOver="funcPopup(event,'search')">search</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_confirmation_folder')" href="../../../../_functions/get_confirmation_folder.html" onMouseOver="funcPopup(event,'get_confirmation_folder')">get_confirmation_folder</a>(), <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../../_variables/search.html">$search</a>);
<a name="l242"><span class="linenum"> 242</span></a>  
<a name="l243"><span class="linenum"> 243</span></a>  <span class="comment">        // Build the base query.</span>
<a name="l244"><span class="linenum"> 244</span></a>          <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a> = new \Horde_Imap_Client_Fetch_Query();
<a name="l245"><span class="linenum"> 245</span></a>          <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>-&gt;<a class="function" onClick="logFunction('envelope')" href="../../../../_functions/envelope.html" onMouseOver="funcPopup(event,'envelope')">envelope</a>();
<a name="l246"><span class="linenum"> 246</span></a>          <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>-&gt;<a class="function" onClick="logFunction('structure')" href="../../../../_functions/structure.html" onMouseOver="funcPopup(event,'structure')">structure</a>();
<a name="l247"><span class="linenum"> 247</span></a>  
<a name="l248"><span class="linenum"> 248</span></a>  
<a name="l249"><span class="linenum"> 249</span></a>  <span class="comment">        // Fetch the first message from the client.</span>
<a name="l250"><span class="linenum"> 250</span></a>          <a class="var it925" onMouseOver="hilite(925)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../../../../_variables/messages.html">$messages</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('fetch')" href="../../../../_functions/fetch.html" onMouseOver="funcPopup(event,'fetch')">fetch</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_confirmation_folder')" href="../../../../_functions/get_confirmation_folder.html" onMouseOver="funcPopup(event,'get_confirmation_folder')">get_confirmation_folder</a>(), <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>, array('ids' =&gt; <a class="var it4821" onMouseOver="hilite(4821)" onMouseOut="lolite()" onClick="logVariable('results')" href="../../../../_variables/results.html">$results</a>['match']));
<a name="l251"><span class="linenum"> 251</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addressmanager')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/addressmanager.html">addressmanager</a> = new \core\message\inbound\address_manager();
<a name="l252"><span class="linenum"> 252</span></a>          if (<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a> = <a class="var it925" onMouseOver="hilite(925)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../../../../_variables/messages.html">$messages</a>-&gt;<a class="function" onClick="logFunction('first')" href="../../../../_functions/first.html" onMouseOver="funcPopup(event,'first')">first</a>()) {
<a name="l253"><span class="linenum"> 253</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;--&gt; Found the message. Passing back to the pickup system.&quot;);
<a name="l254"><span class="linenum"> 254</span></a>  
<a name="l255"><span class="linenum"> 255</span></a>  <span class="comment">            // Process the message.</span>
<a name="l256"><span class="linenum"> 256</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_message')" href="../../../../_functions/process_message.html" onMouseOver="funcPopup(event,'process_message')">process_message</a>(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a>, true, true);
<a name="l257"><span class="linenum"> 257</span></a>  
<a name="l258"><span class="linenum"> 258</span></a>  <span class="comment">            // Close the client connection.</span>
<a name="l259"><span class="linenum"> 259</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('close_connection')" href="../../../../_functions/close_connection.html" onMouseOver="funcPopup(event,'close_connection')">close_connection</a>();
<a name="l260"><span class="linenum"> 260</span></a>  
<a name="l261"><span class="linenum"> 261</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;============================================================================&quot;);
<a name="l262"><span class="linenum"> 262</span></a>              return true;
<a name="l263"><span class="linenum"> 263</span></a>          } else {
<a name="l264"><span class="linenum"> 264</span></a>  <span class="comment">            // Close the client connection.</span>
<a name="l265"><span class="linenum"> 265</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('close_connection')" href="../../../../_functions/close_connection.html" onMouseOver="funcPopup(event,'close_connection')">close_connection</a>();
<a name="l266"><span class="linenum"> 266</span></a>  
<a name="l267"><span class="linenum"> 267</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;============================================================================&quot;);
<a name="l268"><span class="linenum"> 268</span></a>              throw new \core\message\inbound\processing_failed_exception('oldmessagenotfound', 'tool_messageinbound');
<a name="l269"><span class="linenum"> 269</span></a>          }
<a name="l270"><span class="linenum"> 270</span></a>      }
<a name="l271"><span class="linenum"> 271</span></a>  
<a name="l272"><span class="linenum"> 272</span></a>      <span class="comment">/**</span>
<a name="l273"><span class="linenum"> 273</span></a>  <span class="comment">     * Tidy up old messages in the confirmation folder.</span>
<a name="l274"><span class="linenum"> 274</span></a>  <span class="comment">     *</span>
<a name="l275"><span class="linenum"> 275</span></a>  <span class="comment">     * @return bool Whether tidying occurred successfully.</span>
<a name="l276"><span class="linenum"> 276</span></a>  <span class="comment">     */</span>
<a name="l277"><span class="linenum"> 277</span></a>      public function <a class="function" onClick="logFunction('tidy_old_messages')" href="../../../../_functions/tidy_old_messages.html" onMouseOver="funcPopup(event,'tidy_old_messages')">tidy_old_messages</a>() {
<a name="l278"><span class="linenum"> 278</span></a>  <span class="comment">        // Grab the new IMAP client.</span>
<a name="l279"><span class="linenum"> 279</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_imap_client')" href="../../../../_functions/get_imap_client.html" onMouseOver="funcPopup(event,'get_imap_client')">get_imap_client</a>()) {
<a name="l280"><span class="linenum"> 280</span></a>              return false;
<a name="l281"><span class="linenum"> 281</span></a>          }
<a name="l282"><span class="linenum"> 282</span></a>  
<a name="l283"><span class="linenum"> 283</span></a>  <span class="comment">        // Open the mailbox.</span>
<a name="l284"><span class="linenum"> 284</span></a>          <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;Searching for messages older than 24 hours in the '&quot; .
<a name="l285"><span class="linenum"> 285</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_confirmation_folder')" href="../../../../_functions/get_confirmation_folder.html" onMouseOver="funcPopup(event,'get_confirmation_folder')">get_confirmation_folder</a>() . &quot;' folder.&quot;);
<a name="l286"><span class="linenum"> 286</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('openMailbox')" href="../../../../_functions/openmailbox.html" onMouseOver="funcPopup(event,'openmailbox')">openMailbox</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_confirmation_folder')" href="../../../../_functions/get_confirmation_folder.html" onMouseOver="funcPopup(event,'get_confirmation_folder')">get_confirmation_folder</a>());
<a name="l287"><span class="linenum"> 287</span></a>  
<a name="l288"><span class="linenum"> 288</span></a>          <a class="var it1406" onMouseOver="hilite(1406)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_mailbox')" href="../../../../_functions/get_mailbox.html" onMouseOver="funcPopup(event,'get_mailbox')">get_mailbox</a>();
<a name="l289"><span class="linenum"> 289</span></a>  
<a name="l290"><span class="linenum"> 290</span></a>  <span class="comment">        // Build the search.</span>
<a name="l291"><span class="linenum"> 291</span></a>          <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../../_variables/search.html">$search</a> = new \Horde_Imap_Client_Search_Query();
<a name="l292"><span class="linenum"> 292</span></a>  
<a name="l293"><span class="linenum"> 293</span></a>  <span class="comment">        // Delete messages older than 24 hours old.</span>
<a name="l294"><span class="linenum"> 294</span></a>          <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../../_variables/search.html">$search</a>-&gt;<a class="function" onClick="logFunction('intervalSearch')" href="../../../../_functions/intervalsearch.html" onMouseOver="funcPopup(event,'intervalsearch')">intervalSearch</a>(<a class="constant" onClick="logConstant('DAYSECS')" href="../../../../_constants/DAYSECS.html" onMouseOver="constPopup(event,'DAYSECS')">DAYSECS</a>, \<a class="class" onClick="logClass('Horde_Imap_Client_Search_Query')" href="../../../../_classes/horde_imap_client_search_query.html" onMouseOver="classPopup(event,'horde_imap_client_search_query')">Horde_Imap_Client_Search_Query</a>::INTERVAL_OLDER);
<a name="l295"><span class="linenum"> 295</span></a>  
<a name="l296"><span class="linenum"> 296</span></a>          <a class="var it4821" onMouseOver="hilite(4821)" onMouseOut="lolite()" onClick="logVariable('results')" href="../../../../_variables/results.html">$results</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('search')" href="../../../../_functions/search.html" onMouseOver="funcPopup(event,'search')">search</a>(<a class="var it1406" onMouseOver="hilite(1406)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a>, <a class="var it228" onMouseOver="hilite(228)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../../_variables/search.html">$search</a>);
<a name="l297"><span class="linenum"> 297</span></a>  
<a name="l298"><span class="linenum"> 298</span></a>  <span class="comment">        // Build the base query.</span>
<a name="l299"><span class="linenum"> 299</span></a>          <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a> = new \Horde_Imap_Client_Fetch_Query();
<a name="l300"><span class="linenum"> 300</span></a>          <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>-&gt;<a class="function" onClick="logFunction('envelope')" href="../../../../_functions/envelope.html" onMouseOver="funcPopup(event,'envelope')">envelope</a>();
<a name="l301"><span class="linenum"> 301</span></a>  
<a name="l302"><span class="linenum"> 302</span></a>  <span class="comment">        // Retrieve the messages and mark them for removal.</span>
<a name="l303"><span class="linenum"> 303</span></a>          <a class="var it925" onMouseOver="hilite(925)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../../../../_variables/messages.html">$messages</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('fetch')" href="../../../../_functions/fetch.html" onMouseOver="funcPopup(event,'fetch')">fetch</a>(<a class="var it1406" onMouseOver="hilite(1406)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a>, <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>, array('ids' =&gt; <a class="var it4821" onMouseOver="hilite(4821)" onMouseOut="lolite()" onClick="logVariable('results')" href="../../../../_variables/results.html">$results</a>['match']));
<a name="l304"><span class="linenum"> 304</span></a>          <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;Found &quot; . <a class="var it925" onMouseOver="hilite(925)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../../../../_variables/messages.html">$messages</a>-&gt;<a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>() . &quot; messages for removal.&quot;);
<a name="l305"><span class="linenum"> 305</span></a>          foreach (<a class="var it925" onMouseOver="hilite(925)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../../../../_variables/messages.html">$messages</a> as <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a>) {
<a name="l306"><span class="linenum"> 306</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_flag_to_message')" href="../../../../_functions/add_flag_to_message.html" onMouseOver="funcPopup(event,'add_flag_to_message')">add_flag_to_message</a>(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a>-&gt;<a class="function" onClick="logFunction('getUid')" href="../../../../_functions/getuid.html" onMouseOver="funcPopup(event,'getuid')">getUid</a>(), self::MESSAGE_DELETED);
<a name="l307"><span class="linenum"> 307</span></a>          }
<a name="l308"><span class="linenum"> 308</span></a>  
<a name="l309"><span class="linenum"> 309</span></a>          <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;Finished removing messages.&quot;);
<a name="l310"><span class="linenum"> 310</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('close_connection')" href="../../../../_functions/close_connection.html" onMouseOver="funcPopup(event,'close_connection')">close_connection</a>();
<a name="l311"><span class="linenum"> 311</span></a>  
<a name="l312"><span class="linenum"> 312</span></a>          return true;
<a name="l313"><span class="linenum"> 313</span></a>      }
<a name="l314"><span class="linenum"> 314</span></a>  
<a name="l315"><span class="linenum"> 315</span></a>      <span class="comment">/**</span>
<a name="l316"><span class="linenum"> 316</span></a>  <span class="comment">     * Process a message and pass it through the Inbound Message handling systems.</span>
<a name="l317"><span class="linenum"> 317</span></a>  <span class="comment">     *</span>
<a name="l318"><span class="linenum"> 318</span></a>  <span class="comment">     * @param \Horde_Imap_Client_Data_Fetch $message The message to process</span>
<a name="l319"><span class="linenum"> 319</span></a>  <span class="comment">     * @param bool $viewreadmessages Whether to also look at messages which have been marked as read</span>
<a name="l320"><span class="linenum"> 320</span></a>  <span class="comment">     * @param bool $skipsenderverification Whether to skip the sender verification stage</span>
<a name="l321"><span class="linenum"> 321</span></a>  <span class="comment">     */</span>
<a name="l322"><span class="linenum"> 322</span></a>      public function <a class="function" onClick="logFunction('process_message')" href="../../../../_functions/process_message.html" onMouseOver="funcPopup(event,'process_message')">process_message</a>(
<a name="l323"><span class="linenum"> 323</span></a>              \Horde_Imap_Client_Data_Fetch <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a>,
<a name="l324"><span class="linenum"> 324</span></a>              <a class="var it26509" onMouseOver="hilite(26509)" onMouseOut="lolite()" onClick="logVariable('viewreadmessages')" href="../../../../_variables/viewreadmessages.html">$viewreadmessages</a> = false,
<a name="l325"><span class="linenum"> 325</span></a>              <a class="var it26510" onMouseOver="hilite(26510)" onMouseOut="lolite()" onClick="logVariable('skipsenderverification')" href="../../../../_variables/skipsenderverification.html">$skipsenderverification</a> = false) {
<a name="l326"><span class="linenum"> 326</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>;
<a name="l327"><span class="linenum"> 327</span></a>  
<a name="l328"><span class="linenum"> 328</span></a>  <span class="comment">        // We use the Client IDs several times - store them here.</span>
<a name="l329"><span class="linenum"> 329</span></a>          <a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a> = new \Horde_Imap_Client_Ids(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a>-&gt;<a class="function" onClick="logFunction('getUid')" href="../../../../_functions/getuid.html" onMouseOver="funcPopup(event,'getuid')">getUid</a>());
<a name="l330"><span class="linenum"> 330</span></a>  
<a name="l331"><span class="linenum"> 331</span></a>          <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;- Parsing message &quot; . <a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>);
<a name="l332"><span class="linenum"> 332</span></a>  
<a name="l333"><span class="linenum"> 333</span></a>  <span class="comment">        // First flag this message to prevent another running hitting this message while we look at the headers.</span>
<a name="l334"><span class="linenum"> 334</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_flag_to_message')" href="../../../../_functions/add_flag_to_message.html" onMouseOver="funcPopup(event,'add_flag_to_message')">add_flag_to_message</a>(<a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>, self::MESSAGE_FLAGGED);
<a name="l335"><span class="linenum"> 335</span></a>  
<a name="l336"><span class="linenum"> 336</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_bulk_message')" href="../../../../_functions/is_bulk_message.html" onMouseOver="funcPopup(event,'is_bulk_message')">is_bulk_message</a>(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a>, <a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>)) {
<a name="l337"><span class="linenum"> 337</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;- The message has a bulk header set. This is likely an auto-generated reply - discarding.&quot;);
<a name="l338"><span class="linenum"> 338</span></a>              return;
<a name="l339"><span class="linenum"> 339</span></a>          }
<a name="l340"><span class="linenum"> 340</span></a>  
<a name="l341"><span class="linenum"> 341</span></a>  <span class="comment">        // Record the user that this script is currently being run as.  This is important when re-processing existing</span>
<a name="l342"><span class="linenum"> 342</span></a>  <span class="comment">        // messages, as cron_setup_user is called multiple times.</span>
<a name="l343"><span class="linenum"> 343</span></a>          <a class="var it26511" onMouseOver="hilite(26511)" onMouseOut="lolite()" onClick="logVariable('originaluser')" href="../../../../_variables/originaluser.html">$originaluser</a> = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>;
<a name="l344"><span class="linenum"> 344</span></a>  
<a name="l345"><span class="linenum"> 345</span></a>          <a class="var it7442" onMouseOver="hilite(7442)" onMouseOut="lolite()" onClick="logVariable('envelope')" href="../../../../_variables/envelope.html">$envelope</a> = <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a>-&gt;<a class="function" onClick="logFunction('getEnvelope')" href="../../../../_functions/getenvelope.html" onMouseOver="funcPopup(event,'getenvelope')">getEnvelope</a>();
<a name="l346"><span class="linenum"> 346</span></a>          <a class="var it8031" onMouseOver="hilite(8031)" onMouseOut="lolite()" onClick="logVariable('recipients')" href="../../../../_variables/recipients.html">$recipients</a> = <a class="var it7442" onMouseOver="hilite(7442)" onMouseOut="lolite()" onClick="logVariable('envelope')" href="../../../../_variables/envelope.html">$envelope</a>-&gt;<a onClick="logVariable('to')" class="var it45545" onMouseOver="hilite(45545)" onMouseOut="lolite()" href="../../../../_variables/to.html">to</a>-&gt;bare_addresses;
<a name="l347"><span class="linenum"> 347</span></a>          foreach (<a class="var it8031" onMouseOver="hilite(8031)" onMouseOut="lolite()" onClick="logVariable('recipients')" href="../../../../_variables/recipients.html">$recipients</a> as <a class="var it2752" onMouseOver="hilite(2752)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../../_variables/recipient.html">$recipient</a>) {
<a name="l348"><span class="linenum"> 348</span></a>              if (!\core\message\inbound\<a class="class" onClick="logClass('address_manager')" href="../../../../_classes/address_manager.html" onMouseOver="classPopup(event,'address_manager')">address_manager</a>::<a class="function" onClick="logFunction('is_correct_format')" href="../../../../_functions/is_correct_format.html" onMouseOver="funcPopup(event,'is_correct_format')">is_correct_format</a>(<a class="var it2752" onMouseOver="hilite(2752)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../../_variables/recipient.html">$recipient</a>)) {
<a name="l349"><span class="linenum"> 349</span></a>  <span class="comment">                // Message did not contain a subaddress.</span>
<a name="l350"><span class="linenum"> 350</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;- Recipient '{<a class="var it2752" onMouseOver="hilite(2752)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../../_variables/recipient.html">$recipient</a>}' did not match Inbound Message headers.&quot;);
<a name="l351"><span class="linenum"> 351</span></a>                  continue;
<a name="l352"><span class="linenum"> 352</span></a>              }
<a name="l353"><span class="linenum"> 353</span></a>  
<a name="l354"><span class="linenum"> 354</span></a>  <span class="comment">            // Message contained a match.</span>
<a name="l355"><span class="linenum"> 355</span></a>              <a class="var it26512" onMouseOver="hilite(26512)" onMouseOut="lolite()" onClick="logVariable('senders')" href="../../../../_variables/senders.html">$senders</a> = <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a>-&gt;<a class="function" onClick="logFunction('getEnvelope')" href="../../../../_functions/getenvelope.html" onMouseOver="funcPopup(event,'getenvelope')">getEnvelope</a>()-&gt;from-&gt;bare_addresses;
<a name="l356"><span class="linenum"> 356</span></a>              if (<a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it26512" onMouseOver="hilite(26512)" onMouseOut="lolite()" onClick="logVariable('senders')" href="../../../../_variables/senders.html">$senders</a>) !== 1) {
<a name="l357"><span class="linenum"> 357</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;- Received multiple senders. Only the first sender will be used.&quot;);
<a name="l358"><span class="linenum"> 358</span></a>              }
<a name="l359"><span class="linenum"> 359</span></a>              <a class="var it12912" onMouseOver="hilite(12912)" onMouseOut="lolite()" onClick="logVariable('sender')" href="../../../../_variables/sender.html">$sender</a> = <a class="phpfunction" onClick="logFunction('array_shift')" href="../../../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it26512" onMouseOver="hilite(26512)" onMouseOut="lolite()" onClick="logVariable('senders')" href="../../../../_variables/senders.html">$senders</a>);
<a name="l360"><span class="linenum"> 360</span></a>  
<a name="l361"><span class="linenum"> 361</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-- Subject:\t&quot;      . <a class="var it7442" onMouseOver="hilite(7442)" onMouseOut="lolite()" onClick="logVariable('envelope')" href="../../../../_variables/envelope.html">$envelope</a>-&gt;<a onClick="logVariable('subject')" class="var it45545" onMouseOver="hilite(45545)" onMouseOut="lolite()" href="../../../../_variables/subject.html">subject</a>);
<a name="l362"><span class="linenum"> 362</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-- From:\t&quot;         . <a class="var it12912" onMouseOver="hilite(12912)" onMouseOut="lolite()" onClick="logVariable('sender')" href="../../../../_variables/sender.html">$sender</a>);
<a name="l363"><span class="linenum"> 363</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-- Recipient:\t&quot;    . <a class="var it2752" onMouseOver="hilite(2752)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../../_variables/recipient.html">$recipient</a>);
<a name="l364"><span class="linenum"> 364</span></a>  
<a name="l365"><span class="linenum"> 365</span></a>  <span class="comment">            // Grab messagedata including flags.</span>
<a name="l366"><span class="linenum"> 366</span></a>              <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a> = new \Horde_Imap_Client_Fetch_Query();
<a name="l367"><span class="linenum"> 367</span></a>              <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>-&gt;<a class="function" onClick="logFunction('structure')" href="../../../../_functions/structure.html" onMouseOver="funcPopup(event,'structure')">structure</a>();
<a name="l368"><span class="linenum"> 368</span></a>              <a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('fetch')" href="../../../../_functions/fetch.html" onMouseOver="funcPopup(event,'fetch')">fetch</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_mailbox')" href="../../../../_functions/get_mailbox.html" onMouseOver="funcPopup(event,'get_mailbox')">get_mailbox</a>(), <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>, array(
<a name="l369"><span class="linenum"> 369</span></a>                  'ids' =&gt; <a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>,
<a name="l370"><span class="linenum"> 370</span></a>              ))-&gt;<a class="function" onClick="logFunction('first')" href="../../../../_functions/first.html" onMouseOver="funcPopup(event,'first')">first</a>();
<a name="l371"><span class="linenum"> 371</span></a>  
<a name="l372"><span class="linenum"> 372</span></a>              if (!<a class="var it26509" onMouseOver="hilite(26509)" onMouseOut="lolite()" onClick="logVariable('viewreadmessages')" href="../../../../_variables/viewreadmessages.html">$viewreadmessages</a> &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('message_has_flag')" href="../../../../_functions/message_has_flag.html" onMouseOver="funcPopup(event,'message_has_flag')">message_has_flag</a>(<a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>, self::MESSAGE_SEEN)) {
<a name="l373"><span class="linenum"> 373</span></a>  <span class="comment">                // Something else has already seen this message. Skip it now.</span>
<a name="l374"><span class="linenum"> 374</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-- Skipping the message - it has been marked as seen - perhaps by another process.&quot;);
<a name="l375"><span class="linenum"> 375</span></a>                  continue;
<a name="l376"><span class="linenum"> 376</span></a>              }
<a name="l377"><span class="linenum"> 377</span></a>  
<a name="l378"><span class="linenum"> 378</span></a>  <span class="comment">            // Mark it as read to lock the message.</span>
<a name="l379"><span class="linenum"> 379</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_flag_to_message')" href="../../../../_functions/add_flag_to_message.html" onMouseOver="funcPopup(event,'add_flag_to_message')">add_flag_to_message</a>(<a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>, self::MESSAGE_SEEN);
<a name="l380"><span class="linenum"> 380</span></a>  
<a name="l381"><span class="linenum"> 381</span></a>  <span class="comment">            // Now pass it through the Inbound Message processor.</span>
<a name="l382"><span class="linenum"> 382</span></a>              <a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../../_variables/status.html">$status</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addressmanager')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/addressmanager.html">addressmanager</a>-&gt;<a class="function" onClick="logFunction('process_envelope')" href="../../../../_functions/process_envelope.html" onMouseOver="funcPopup(event,'process_envelope')">process_envelope</a>(<a class="var it2752" onMouseOver="hilite(2752)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../../_variables/recipient.html">$recipient</a>, <a class="var it12912" onMouseOver="hilite(12912)" onMouseOut="lolite()" onClick="logVariable('sender')" href="../../../../_variables/sender.html">$sender</a>);
<a name="l383"><span class="linenum"> 383</span></a>  
<a name="l384"><span class="linenum"> 384</span></a>              if ((<a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../../_variables/status.html">$status</a> &amp; ~ \core\message\inbound\<a class="class" onClick="logClass('address_manager')" href="../../../../_classes/address_manager.html" onMouseOver="classPopup(event,'address_manager')">address_manager</a>::VALIDATION_DISABLED_HANDLER) !== <a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../../_variables/status.html">$status</a>) {
<a name="l385"><span class="linenum"> 385</span></a>  <span class="comment">                // The handler is disabled.</span>
<a name="l386"><span class="linenum"> 386</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-- Skipped message - Handler is disabled. Fail code {<a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../../_variables/status.html">$status</a>}&quot;);
<a name="l387"><span class="linenum"> 387</span></a>  <span class="comment">                // In order to handle the user error, we need more information about the message being failed.</span>
<a name="l388"><span class="linenum"> 388</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_message_data')" href="../../../../_functions/process_message_data.html" onMouseOver="funcPopup(event,'process_message_data')">process_message_data</a>(<a class="var it7442" onMouseOver="hilite(7442)" onMouseOut="lolite()" onClick="logVariable('envelope')" href="../../../../_variables/envelope.html">$envelope</a>, <a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>, <a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>);
<a name="l389"><span class="linenum"> 389</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('inform_user_of_error')" href="../../../../_functions/inform_user_of_error.html" onMouseOver="funcPopup(event,'inform_user_of_error')">inform_user_of_error</a>(<a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('handlerdisabled', 'tool_messageinbound', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>));
<a name="l390"><span class="linenum"> 390</span></a>                  return;
<a name="l391"><span class="linenum"> 391</span></a>              }
<a name="l392"><span class="linenum"> 392</span></a>  
<a name="l393"><span class="linenum"> 393</span></a>  <span class="comment">            // Check the validation status early. No point processing garbage messages, but we do need to process it</span>
<a name="l394"><span class="linenum"> 394</span></a>  <span class="comment">            // for some validation failure types.</span>
<a name="l395"><span class="linenum"> 395</span></a>              if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('passes_key_validation')" href="../../../../_functions/passes_key_validation.html" onMouseOver="funcPopup(event,'passes_key_validation')">passes_key_validation</a>(<a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../../_variables/status.html">$status</a>, <a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>)) {
<a name="l396"><span class="linenum"> 396</span></a>  <span class="comment">                // None of the above validation failures were found. Skip this message.</span>
<a name="l397"><span class="linenum"> 397</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-- Skipped message - it does not appear to relate to a Inbound Message pickup. Fail code {<a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../../_variables/status.html">$status</a>}&quot;);
<a name="l398"><span class="linenum"> 398</span></a>  
<a name="l399"><span class="linenum"> 399</span></a>  <span class="comment">                // Remove the seen flag from the message as there may be multiple recipients.</span>
<a name="l400"><span class="linenum"> 400</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('remove_flag_from_message')" href="../../../../_functions/remove_flag_from_message.html" onMouseOver="funcPopup(event,'remove_flag_from_message')">remove_flag_from_message</a>(<a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>, self::MESSAGE_SEEN);
<a name="l401"><span class="linenum"> 401</span></a>  
<a name="l402"><span class="linenum"> 402</span></a>  <span class="comment">                // Skip further processing for this recipient.</span>
<a name="l403"><span class="linenum"> 403</span></a>                  continue;
<a name="l404"><span class="linenum"> 404</span></a>              }
<a name="l405"><span class="linenum"> 405</span></a>  
<a name="l406"><span class="linenum"> 406</span></a>  <span class="comment">            // Process the message as the user.</span>
<a name="l407"><span class="linenum"> 407</span></a>              <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../../_variables/user.html">$user</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addressmanager')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/addressmanager.html">addressmanager</a>-&gt;<a class="function" onClick="logFunction('get_data')" href="../../../../_functions/get_data.html" onMouseOver="funcPopup(event,'get_data')">get_data</a>()-&gt;user;
<a name="l408"><span class="linenum"> 408</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-- Processing the message as user {<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>} ({<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('username')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../../../_variables/username.html">username</a>}).&quot;);
<a name="l409"><span class="linenum"> 409</span></a>              <a class="function" onClick="logFunction('cron_setup_user')" href="../../../../_functions/cron_setup_user.html" onMouseOver="funcPopup(event,'cron_setup_user')">cron_setup_user</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../../_variables/user.html">$user</a>);
<a name="l410"><span class="linenum"> 410</span></a>  
<a name="l411"><span class="linenum"> 411</span></a>  <span class="comment">            // Process and retrieve the message data for this message.</span>
<a name="l412"><span class="linenum"> 412</span></a>  <span class="comment">            // This includes fetching the full content, as well as all headers, and attachments.</span>
<a name="l413"><span class="linenum"> 413</span></a>              if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_message_data')" href="../../../../_functions/process_message_data.html" onMouseOver="funcPopup(event,'process_message_data')">process_message_data</a>(<a class="var it7442" onMouseOver="hilite(7442)" onMouseOut="lolite()" onClick="logVariable('envelope')" href="../../../../_variables/envelope.html">$envelope</a>, <a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>, <a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>)) {
<a name="l414"><span class="linenum"> 414</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;--- Message could not be found on the server. Is another process removing messages?&quot;);
<a name="l415"><span class="linenum"> 415</span></a>                  return;
<a name="l416"><span class="linenum"> 416</span></a>              }
<a name="l417"><span class="linenum"> 417</span></a>  
<a name="l418"><span class="linenum"> 418</span></a>  <span class="comment">            // When processing validation replies, we need to skip the sender verification phase as this has been</span>
<a name="l419"><span class="linenum"> 419</span></a>  <span class="comment">            // manually completed.</span>
<a name="l420"><span class="linenum"> 420</span></a>              if (!<a class="var it26510" onMouseOver="hilite(26510)" onMouseOut="lolite()" onClick="logVariable('skipsenderverification')" href="../../../../_variables/skipsenderverification.html">$skipsenderverification</a> &amp;&amp; <a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../../_variables/status.html">$status</a> !== 0) {
<a name="l421"><span class="linenum"> 421</span></a>  <span class="comment">                // Check the validation status for failure types which require confirmation.</span>
<a name="l422"><span class="linenum"> 422</span></a>  <span class="comment">                // The validation result is tested in a bitwise operation.</span>
<a name="l423"><span class="linenum"> 423</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-- Message did not meet validation but is possibly recoverable. Fail code {<a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../../_variables/status.html">$status</a>}&quot;);
<a name="l424"><span class="linenum"> 424</span></a>  <span class="comment">                // This is a recoverable error, but requires user input.</span>
<a name="l425"><span class="linenum"> 425</span></a>  
<a name="l426"><span class="linenum"> 426</span></a>                  if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('handle_verification_failure')" href="../../../../_functions/handle_verification_failure.html" onMouseOver="funcPopup(event,'handle_verification_failure')">handle_verification_failure</a>(<a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>, <a class="var it2752" onMouseOver="hilite(2752)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../../_variables/recipient.html">$recipient</a>)) {
<a name="l427"><span class="linenum"> 427</span></a>                      <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;--- Original message retained on mail server and confirmation message sent to user.&quot;);
<a name="l428"><span class="linenum"> 428</span></a>                  } else {
<a name="l429"><span class="linenum"> 429</span></a>                      <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;--- Invalid Recipient Handler - unable to save. Informing the user of the failure.&quot;);
<a name="l430"><span class="linenum"> 430</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('inform_user_of_error')" href="../../../../_functions/inform_user_of_error.html" onMouseOver="funcPopup(event,'inform_user_of_error')">inform_user_of_error</a>(<a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('invalidrecipientfinal', 'tool_messageinbound', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>));
<a name="l431"><span class="linenum"> 431</span></a>                  }
<a name="l432"><span class="linenum"> 432</span></a>  
<a name="l433"><span class="linenum"> 433</span></a>  <span class="comment">                // Returning to normal cron user.</span>
<a name="l434"><span class="linenum"> 434</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-- Returning to the original user.&quot;);
<a name="l435"><span class="linenum"> 435</span></a>                  <a class="function" onClick="logFunction('cron_setup_user')" href="../../../../_functions/cron_setup_user.html" onMouseOver="funcPopup(event,'cron_setup_user')">cron_setup_user</a>(<a class="var it26511" onMouseOver="hilite(26511)" onMouseOut="lolite()" onClick="logVariable('originaluser')" href="../../../../_variables/originaluser.html">$originaluser</a>);
<a name="l436"><span class="linenum"> 436</span></a>                  return;
<a name="l437"><span class="linenum"> 437</span></a>              }
<a name="l438"><span class="linenum"> 438</span></a>  
<a name="l439"><span class="linenum"> 439</span></a>  <span class="comment">            // Add the content and attachment data.</span>
<a name="l440"><span class="linenum"> 440</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-- Validation completed. Fetching rest of message content.&quot;);
<a name="l441"><span class="linenum"> 441</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_message_data_body')" href="../../../../_functions/process_message_data_body.html" onMouseOver="funcPopup(event,'process_message_data_body')">process_message_data_body</a>(<a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>, <a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>);
<a name="l442"><span class="linenum"> 442</span></a>  
<a name="l443"><span class="linenum"> 443</span></a>  <span class="comment">            // The message processor throws exceptions upon failure. These must be caught and notifications sent to</span>
<a name="l444"><span class="linenum"> 444</span></a>  <span class="comment">            // the user here.</span>
<a name="l445"><span class="linenum"> 445</span></a>              try {
<a name="l446"><span class="linenum"> 446</span></a>                  <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('send_to_handler')" href="../../../../_functions/send_to_handler.html" onMouseOver="funcPopup(event,'send_to_handler')">send_to_handler</a>();
<a name="l447"><span class="linenum"> 447</span></a>              } catch (\core\message\inbound\processing_failed_exception <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../../../_variables/e.html">$e</a>) {
<a name="l448"><span class="linenum"> 448</span></a>  <span class="comment">                // We know about these kinds of errors and they should result in the user being notified of the</span>
<a name="l449"><span class="linenum"> 449</span></a>  <span class="comment">                // failure. Send the user a notification here.</span>
<a name="l450"><span class="linenum"> 450</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('inform_user_of_error')" href="../../../../_functions/inform_user_of_error.html" onMouseOver="funcPopup(event,'inform_user_of_error')">inform_user_of_error</a>(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>());
<a name="l451"><span class="linenum"> 451</span></a>  
<a name="l452"><span class="linenum"> 452</span></a>  <span class="comment">                // Returning to normal cron user.</span>
<a name="l453"><span class="linenum"> 453</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-- Returning to the original user.&quot;);
<a name="l454"><span class="linenum"> 454</span></a>                  <a class="function" onClick="logFunction('cron_setup_user')" href="../../../../_functions/cron_setup_user.html" onMouseOver="funcPopup(event,'cron_setup_user')">cron_setup_user</a>(<a class="var it26511" onMouseOver="hilite(26511)" onMouseOut="lolite()" onClick="logVariable('originaluser')" href="../../../../_variables/originaluser.html">$originaluser</a>);
<a name="l455"><span class="linenum"> 455</span></a>                  return;
<a name="l456"><span class="linenum"> 456</span></a>              } catch (\Exception <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../../../_variables/e.html">$e</a>) {
<a name="l457"><span class="linenum"> 457</span></a>  <span class="comment">                // An unknown error occurred. The user is not informed, but the administrator is.</span>
<a name="l458"><span class="linenum"> 458</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-- Message processing failed. An unexpected exception was thrown. Details follow.&quot;);
<a name="l459"><span class="linenum"> 459</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>());
<a name="l460"><span class="linenum"> 460</span></a>  
<a name="l461"><span class="linenum"> 461</span></a>  <span class="comment">                // Returning to normal cron user.</span>
<a name="l462"><span class="linenum"> 462</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-- Returning to the original user.&quot;);
<a name="l463"><span class="linenum"> 463</span></a>                  <a class="function" onClick="logFunction('cron_setup_user')" href="../../../../_functions/cron_setup_user.html" onMouseOver="funcPopup(event,'cron_setup_user')">cron_setup_user</a>(<a class="var it26511" onMouseOver="hilite(26511)" onMouseOut="lolite()" onClick="logVariable('originaluser')" href="../../../../_variables/originaluser.html">$originaluser</a>);
<a name="l464"><span class="linenum"> 464</span></a>                  return;
<a name="l465"><span class="linenum"> 465</span></a>              }
<a name="l466"><span class="linenum"> 466</span></a>  
<a name="l467"><span class="linenum"> 467</span></a>              if (<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a>) {
<a name="l468"><span class="linenum"> 468</span></a>  <span class="comment">                // Handle message cleanup. Messages are deleted once fully processed.</span>
<a name="l469"><span class="linenum"> 469</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-- Marking the message for removal.&quot;);
<a name="l470"><span class="linenum"> 470</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_flag_to_message')" href="../../../../_functions/add_flag_to_message.html" onMouseOver="funcPopup(event,'add_flag_to_message')">add_flag_to_message</a>(<a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>, self::MESSAGE_DELETED);
<a name="l471"><span class="linenum"> 471</span></a>              } else {
<a name="l472"><span class="linenum"> 472</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-- The Inbound Message processor did not return a success status. Skipping message removal.&quot;);
<a name="l473"><span class="linenum"> 473</span></a>              }
<a name="l474"><span class="linenum"> 474</span></a>  
<a name="l475"><span class="linenum"> 475</span></a>  <span class="comment">            // Returning to normal cron user.</span>
<a name="l476"><span class="linenum"> 476</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-- Returning to the original user.&quot;);
<a name="l477"><span class="linenum"> 477</span></a>              <a class="function" onClick="logFunction('cron_setup_user')" href="../../../../_functions/cron_setup_user.html" onMouseOver="funcPopup(event,'cron_setup_user')">cron_setup_user</a>(<a class="var it26511" onMouseOver="hilite(26511)" onMouseOut="lolite()" onClick="logVariable('originaluser')" href="../../../../_variables/originaluser.html">$originaluser</a>);
<a name="l478"><span class="linenum"> 478</span></a>  
<a name="l479"><span class="linenum"> 479</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-- Finished processing &quot; . <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a>-&gt;<a class="function" onClick="logFunction('getUid')" href="../../../../_functions/getuid.html" onMouseOver="funcPopup(event,'getuid')">getUid</a>());
<a name="l480"><span class="linenum"> 480</span></a>  
<a name="l481"><span class="linenum"> 481</span></a>  <span class="comment">            // Skip the outer loop too. The message has already been processed and it could be possible for there to</span>
<a name="l482"><span class="linenum"> 482</span></a>  <span class="comment">            // be two recipients in the envelope which match somehow.</span>
<a name="l483"><span class="linenum"> 483</span></a>              return;
<a name="l484"><span class="linenum"> 484</span></a>          }
<a name="l485"><span class="linenum"> 485</span></a>      }
<a name="l486"><span class="linenum"> 486</span></a>  
<a name="l487"><span class="linenum"> 487</span></a>      <span class="comment">/**</span>
<a name="l488"><span class="linenum"> 488</span></a>  <span class="comment">     * Process a message to retrieve it's header data without body and attachemnts.</span>
<a name="l489"><span class="linenum"> 489</span></a>  <span class="comment">     *</span>
<a name="l490"><span class="linenum"> 490</span></a>  <span class="comment">     * @param \Horde_Imap_Client_Data_Envelope $envelope The Envelope of the message</span>
<a name="l491"><span class="linenum"> 491</span></a>  <span class="comment">     * @param \Horde_Imap_Client_Data_Fetch $basemessagedata The structure and part of the message body</span>
<a name="l492"><span class="linenum"> 492</span></a>  <span class="comment">     * @param string|\Horde_Imap_Client_Ids $messageid The Hore message Uid</span>
<a name="l493"><span class="linenum"> 493</span></a>  <span class="comment">     * @return \stdClass The current value of the messagedata</span>
<a name="l494"><span class="linenum"> 494</span></a>  <span class="comment">     */</span>
<a name="l495"><span class="linenum"> 495</span></a>      private function <a class="function" onClick="logFunction('process_message_data')" href="../../../../_functions/process_message_data.html" onMouseOver="funcPopup(event,'process_message_data')">process_message_data</a>(
<a name="l496"><span class="linenum"> 496</span></a>              \Horde_Imap_Client_Data_Envelope <a class="var it7442" onMouseOver="hilite(7442)" onMouseOut="lolite()" onClick="logVariable('envelope')" href="../../../../_variables/envelope.html">$envelope</a>,
<a name="l497"><span class="linenum"> 497</span></a>              \Horde_Imap_Client_Data_Fetch <a class="var it26513" onMouseOver="hilite(26513)" onMouseOut="lolite()" onClick="logVariable('basemessagedata')" href="../../../../_variables/basemessagedata.html">$basemessagedata</a>,
<a name="l498"><span class="linenum"> 498</span></a>              <a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>) {
<a name="l499"><span class="linenum"> 499</span></a>  
<a name="l500"><span class="linenum"> 500</span></a>  <span class="comment">        // Get the current mailbox.</span>
<a name="l501"><span class="linenum"> 501</span></a>          <a class="var it1406" onMouseOver="hilite(1406)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_mailbox')" href="../../../../_functions/get_mailbox.html" onMouseOver="funcPopup(event,'get_mailbox')">get_mailbox</a>();
<a name="l502"><span class="linenum"> 502</span></a>  
<a name="l503"><span class="linenum"> 503</span></a>  <span class="comment">        // We need the structure at various points below.</span>
<a name="l504"><span class="linenum"> 504</span></a>          <a class="var it273" onMouseOver="hilite(273)" onMouseOut="lolite()" onClick="logVariable('structure')" href="../../../../_variables/structure.html">$structure</a> = <a class="var it26513" onMouseOver="hilite(26513)" onMouseOut="lolite()" onClick="logVariable('basemessagedata')" href="../../../../_variables/basemessagedata.html">$basemessagedata</a>-&gt;<a class="function" onClick="logFunction('getStructure')" href="../../../../_functions/getstructure.html" onMouseOver="funcPopup(event,'getstructure')">getStructure</a>();
<a name="l505"><span class="linenum"> 505</span></a>  
<a name="l506"><span class="linenum"> 506</span></a>  <span class="comment">        // Now fetch the rest of the message content.</span>
<a name="l507"><span class="linenum"> 507</span></a>          <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a> = new \Horde_Imap_Client_Fetch_Query();
<a name="l508"><span class="linenum"> 508</span></a>          <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>-&gt;<a class="function" onClick="logFunction('imapDate')" href="../../../../_functions/imapdate.html" onMouseOver="funcPopup(event,'imapdate')">imapDate</a>();
<a name="l509"><span class="linenum"> 509</span></a>  
<a name="l510"><span class="linenum"> 510</span></a>  <span class="comment">        // Fetch the message header.</span>
<a name="l511"><span class="linenum"> 511</span></a>          <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>-&gt;<a class="function" onClick="logFunction('headerText')" href="../../../../_functions/headertext.html" onMouseOver="funcPopup(event,'headertext')">headerText</a>();
<a name="l512"><span class="linenum"> 512</span></a>  
<a name="l513"><span class="linenum"> 513</span></a>  <span class="comment">        // Retrieve the message with the above components.</span>
<a name="l514"><span class="linenum"> 514</span></a>          <a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('fetch')" href="../../../../_functions/fetch.html" onMouseOver="funcPopup(event,'fetch')">fetch</a>(<a class="var it1406" onMouseOver="hilite(1406)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a>, <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>, array('ids' =&gt; <a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>))-&gt;<a class="function" onClick="logFunction('first')" href="../../../../_functions/first.html" onMouseOver="funcPopup(event,'first')">first</a>();
<a name="l515"><span class="linenum"> 515</span></a>  
<a name="l516"><span class="linenum"> 516</span></a>          if (!<a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>) {
<a name="l517"><span class="linenum"> 517</span></a>  <span class="comment">            // Message was not found! Somehow it has been removed or is no longer returned.</span>
<a name="l518"><span class="linenum"> 518</span></a>              return null;
<a name="l519"><span class="linenum"> 519</span></a>          }
<a name="l520"><span class="linenum"> 520</span></a>  
<a name="l521"><span class="linenum"> 521</span></a>  <span class="comment">        // The message ID should always be in the first part.</span>
<a name="l522"><span class="linenum"> 522</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a> = new \stdClass();
<a name="l523"><span class="linenum"> 523</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('messageid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/messageid.html">messageid</a> = <a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>-&gt;<a class="function" onClick="logFunction('getHeaderText')" href="../../../../_functions/getheadertext.html" onMouseOver="funcPopup(event,'getheadertext')">getHeaderText</a>(0, \<a class="class" onClick="logClass('Horde_Imap_Client_Data_Fetch')" href="../../../../_classes/horde_imap_client_data_fetch.html" onMouseOver="classPopup(event,'horde_imap_client_data_fetch')">Horde_Imap_Client_Data_Fetch</a>::HEADER_PARSE)-&gt;<a class="function" onClick="logFunction('getValue')" href="../../../../_functions/getvalue.html" onMouseOver="funcPopup(event,'getvalue')">getValue</a>('Message-ID');
<a name="l524"><span class="linenum"> 524</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('subject')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/subject.html">subject</a> = <a class="var it7442" onMouseOver="hilite(7442)" onMouseOut="lolite()" onClick="logVariable('envelope')" href="../../../../_variables/envelope.html">$envelope</a>-&gt;<a onClick="logVariable('subject')" class="var it45545" onMouseOver="hilite(45545)" onMouseOut="lolite()" href="../../../../_variables/subject.html">subject</a>;
<a name="l525"><span class="linenum"> 525</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timestamp')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/timestamp.html">timestamp</a> = <a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>-&gt;<a class="function" onClick="logFunction('getImapDate')" href="../../../../_functions/getimapdate.html" onMouseOver="funcPopup(event,'getimapdate')">getImapDate</a>()-&gt;<a class="function" onClick="logFunction('__toString')" href="../../../../_functions/__tostring.html" onMouseOver="funcPopup(event,'__tostring')">__toString</a>();
<a name="l526"><span class="linenum"> 526</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('envelope')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/envelope.html">envelope</a> = <a class="var it7442" onMouseOver="hilite(7442)" onMouseOut="lolite()" onClick="logVariable('envelope')" href="../../../../_variables/envelope.html">$envelope</a>;
<a name="l527"><span class="linenum"> 527</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('data')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/data.html">data</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addressmanager')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/addressmanager.html">addressmanager</a>-&gt;<a class="function" onClick="logFunction('get_data')" href="../../../../_functions/get_data.html" onMouseOver="funcPopup(event,'get_data')">get_data</a>();
<a name="l528"><span class="linenum"> 528</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('headers')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../_variables/headers.html">headers</a> = <a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>-&gt;<a class="function" onClick="logFunction('getHeaderText')" href="../../../../_functions/getheadertext.html" onMouseOver="funcPopup(event,'getheadertext')">getHeaderText</a>();
<a name="l529"><span class="linenum"> 529</span></a>  
<a name="l530"><span class="linenum"> 530</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>;
<a name="l531"><span class="linenum"> 531</span></a>  
<a name="l532"><span class="linenum"> 532</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>;
<a name="l533"><span class="linenum"> 533</span></a>      }
<a name="l534"><span class="linenum"> 534</span></a>  
<a name="l535"><span class="linenum"> 535</span></a>      <span class="comment">/**</span>
<a name="l536"><span class="linenum"> 536</span></a>  <span class="comment">     * Process a message again to add body and attachment data.</span>
<a name="l537"><span class="linenum"> 537</span></a>  <span class="comment">     *</span>
<a name="l538"><span class="linenum"> 538</span></a>  <span class="comment">     * @param \Horde_Imap_Client_Data_Fetch $basemessagedata The structure and part of the message body</span>
<a name="l539"><span class="linenum"> 539</span></a>  <span class="comment">     * @param string|\Horde_Imap_Client_Ids $messageid The Hore message Uid</span>
<a name="l540"><span class="linenum"> 540</span></a>  <span class="comment">     * @return \stdClass The current value of the messagedata</span>
<a name="l541"><span class="linenum"> 541</span></a>  <span class="comment">     */</span>
<a name="l542"><span class="linenum"> 542</span></a>      private function <a class="function" onClick="logFunction('process_message_data_body')" href="../../../../_functions/process_message_data_body.html" onMouseOver="funcPopup(event,'process_message_data_body')">process_message_data_body</a>(
<a name="l543"><span class="linenum"> 543</span></a>              \Horde_Imap_Client_Data_Fetch <a class="var it26513" onMouseOver="hilite(26513)" onMouseOut="lolite()" onClick="logVariable('basemessagedata')" href="../../../../_variables/basemessagedata.html">$basemessagedata</a>,
<a name="l544"><span class="linenum"> 544</span></a>              <a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>) {
<a name="l545"><span class="linenum"> 545</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>;
<a name="l546"><span class="linenum"> 546</span></a>  
<a name="l547"><span class="linenum"> 547</span></a>  <span class="comment">        // Get the current mailbox.</span>
<a name="l548"><span class="linenum"> 548</span></a>          <a class="var it1406" onMouseOver="hilite(1406)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_mailbox')" href="../../../../_functions/get_mailbox.html" onMouseOver="funcPopup(event,'get_mailbox')">get_mailbox</a>();
<a name="l549"><span class="linenum"> 549</span></a>  
<a name="l550"><span class="linenum"> 550</span></a>  <span class="comment">        // We need the structure at various points below.</span>
<a name="l551"><span class="linenum"> 551</span></a>          <a class="var it273" onMouseOver="hilite(273)" onMouseOut="lolite()" onClick="logVariable('structure')" href="../../../../_variables/structure.html">$structure</a> = <a class="var it26513" onMouseOver="hilite(26513)" onMouseOut="lolite()" onClick="logVariable('basemessagedata')" href="../../../../_variables/basemessagedata.html">$basemessagedata</a>-&gt;<a class="function" onClick="logFunction('getStructure')" href="../../../../_functions/getstructure.html" onMouseOver="funcPopup(event,'getstructure')">getStructure</a>();
<a name="l552"><span class="linenum"> 552</span></a>  
<a name="l553"><span class="linenum"> 553</span></a>  <span class="comment">        // Now fetch the rest of the message content.</span>
<a name="l554"><span class="linenum"> 554</span></a>          <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a> = new \Horde_Imap_Client_Fetch_Query();
<a name="l555"><span class="linenum"> 555</span></a>          <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>-&gt;<a class="function" onClick="logFunction('fullText')" href="../../../../_functions/fulltext.html" onMouseOver="funcPopup(event,'fulltext')">fullText</a>();
<a name="l556"><span class="linenum"> 556</span></a>  
<a name="l557"><span class="linenum"> 557</span></a>  <span class="comment">        // Fetch all of the message parts too.</span>
<a name="l558"><span class="linenum"> 558</span></a>          <a class="var it26514" onMouseOver="hilite(26514)" onMouseOut="lolite()" onClick="logVariable('typemap')" href="../../../../_variables/typemap.html">$typemap</a> = <a class="var it273" onMouseOver="hilite(273)" onMouseOut="lolite()" onClick="logVariable('structure')" href="../../../../_variables/structure.html">$structure</a>-&gt;<a class="function" onClick="logFunction('contentTypeMap')" href="../../../../_functions/contenttypemap.html" onMouseOver="funcPopup(event,'contenttypemap')">contentTypeMap</a>();
<a name="l559"><span class="linenum"> 559</span></a>          foreach (<a class="var it26514" onMouseOver="hilite(26514)" onMouseOut="lolite()" onClick="logVariable('typemap')" href="../../../../_variables/typemap.html">$typemap</a> as <a class="var it2545" onMouseOver="hilite(2545)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../../../_variables/part.html">$part</a> =&gt; <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../../_variables/type.html">$type</a>) {
<a name="l560"><span class="linenum"> 560</span></a>  <span class="comment">            // The body of the part - attempt to decode it on the server.</span>
<a name="l561"><span class="linenum"> 561</span></a>              <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>-&gt;<a class="function" onClick="logFunction('bodyPart')" href="../../../../_functions/bodypart.html" onMouseOver="funcPopup(event,'bodypart')">bodyPart</a>(<a class="var it2545" onMouseOver="hilite(2545)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../../../_variables/part.html">$part</a>, array(
<a name="l562"><span class="linenum"> 562</span></a>                  'decode' =&gt; true,
<a name="l563"><span class="linenum"> 563</span></a>                  'peek' =&gt; true,
<a name="l564"><span class="linenum"> 564</span></a>              ));
<a name="l565"><span class="linenum"> 565</span></a>              <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>-&gt;<a class="function" onClick="logFunction('bodyPartSize')" href="../../../../_functions/bodypartsize.html" onMouseOver="funcPopup(event,'bodypartsize')">bodyPartSize</a>(<a class="var it2545" onMouseOver="hilite(2545)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../../../_variables/part.html">$part</a>);
<a name="l566"><span class="linenum"> 566</span></a>          }
<a name="l567"><span class="linenum"> 567</span></a>  
<a name="l568"><span class="linenum"> 568</span></a>          <a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('fetch')" href="../../../../_functions/fetch.html" onMouseOver="funcPopup(event,'fetch')">fetch</a>(<a class="var it1406" onMouseOver="hilite(1406)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a>, <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>, array('ids' =&gt; <a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>))-&gt;<a class="function" onClick="logFunction('first')" href="../../../../_functions/first.html" onMouseOver="funcPopup(event,'first')">first</a>();
<a name="l569"><span class="linenum"> 569</span></a>  
<a name="l570"><span class="linenum"> 570</span></a>  <span class="comment">        // Store the data for this message.</span>
<a name="l571"><span class="linenum"> 571</span></a>          <a class="var it26515" onMouseOver="hilite(26515)" onMouseOut="lolite()" onClick="logVariable('contentplain')" href="../../../../_variables/contentplain.html">$contentplain</a> = '';
<a name="l572"><span class="linenum"> 572</span></a>          <a class="var it5245" onMouseOver="hilite(5245)" onMouseOut="lolite()" onClick="logVariable('contenthtml')" href="../../../../_variables/contenthtml.html">$contenthtml</a> = '';
<a name="l573"><span class="linenum"> 573</span></a>          <a class="var it1326" onMouseOver="hilite(1326)" onMouseOut="lolite()" onClick="logVariable('attachments')" href="../../../../_variables/attachments.html">$attachments</a> = array(
<a name="l574"><span class="linenum"> 574</span></a>              'inline' =&gt; array(),
<a name="l575"><span class="linenum"> 575</span></a>              'attachment' =&gt; array(),
<a name="l576"><span class="linenum"> 576</span></a>          );
<a name="l577"><span class="linenum"> 577</span></a>  
<a name="l578"><span class="linenum"> 578</span></a>          <a class="var it26516" onMouseOver="hilite(26516)" onMouseOut="lolite()" onClick="logVariable('plainpartid')" href="../../../../_variables/plainpartid.html">$plainpartid</a> = <a class="var it273" onMouseOver="hilite(273)" onMouseOut="lolite()" onClick="logVariable('structure')" href="../../../../_variables/structure.html">$structure</a>-&gt;<a class="function" onClick="logFunction('findBody')" href="../../../../_functions/findbody.html" onMouseOver="funcPopup(event,'findbody')">findBody</a>('plain');
<a name="l579"><span class="linenum"> 579</span></a>          <a class="var it26517" onMouseOver="hilite(26517)" onMouseOut="lolite()" onClick="logVariable('htmlpartid')" href="../../../../_variables/htmlpartid.html">$htmlpartid</a> = <a class="var it273" onMouseOver="hilite(273)" onMouseOut="lolite()" onClick="logVariable('structure')" href="../../../../_variables/structure.html">$structure</a>-&gt;<a class="function" onClick="logFunction('findBody')" href="../../../../_functions/findbody.html" onMouseOver="funcPopup(event,'findbody')">findBody</a>('html');
<a name="l580"><span class="linenum"> 580</span></a>  
<a name="l581"><span class="linenum"> 581</span></a>          foreach (<a class="var it26514" onMouseOver="hilite(26514)" onMouseOut="lolite()" onClick="logVariable('typemap')" href="../../../../_variables/typemap.html">$typemap</a> as <a class="var it2545" onMouseOver="hilite(2545)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../../../_variables/part.html">$part</a> =&gt; <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../../_variables/type.html">$type</a>) {
<a name="l582"><span class="linenum"> 582</span></a>  <span class="comment">            // Get the message data from the body part, and combine it with the structure to give a fully-formed output.</span>
<a name="l583"><span class="linenum"> 583</span></a>              <a class="var it807" onMouseOver="hilite(807)" onMouseOut="lolite()" onClick="logVariable('stream')" href="../../../../_variables/stream.html">$stream</a> = <a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>-&gt;<a class="function" onClick="logFunction('getBodyPart')" href="../../../../_functions/getbodypart.html" onMouseOver="funcPopup(event,'getbodypart')">getBodyPart</a>(<a class="var it2545" onMouseOver="hilite(2545)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../../../_variables/part.html">$part</a>, true);
<a name="l584"><span class="linenum"> 584</span></a>              <a class="var it26518" onMouseOver="hilite(26518)" onMouseOut="lolite()" onClick="logVariable('partdata')" href="../../../../_variables/partdata.html">$partdata</a> = <a class="var it273" onMouseOver="hilite(273)" onMouseOut="lolite()" onClick="logVariable('structure')" href="../../../../_variables/structure.html">$structure</a>-&gt;<a class="function" onClick="logFunction('getPart')" href="../../../../_functions/getpart.html" onMouseOver="funcPopup(event,'getpart')">getPart</a>(<a class="var it2545" onMouseOver="hilite(2545)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../../../_variables/part.html">$part</a>);
<a name="l585"><span class="linenum"> 585</span></a>              <a class="var it26518" onMouseOver="hilite(26518)" onMouseOut="lolite()" onClick="logVariable('partdata')" href="../../../../_variables/partdata.html">$partdata</a>-&gt;<a class="function" onClick="logFunction('setContents')" href="../../../../_functions/setcontents.html" onMouseOver="funcPopup(event,'setcontents')">setContents</a>(<a class="var it807" onMouseOver="hilite(807)" onMouseOut="lolite()" onClick="logVariable('stream')" href="../../../../_variables/stream.html">$stream</a>, array(
<a name="l586"><span class="linenum"> 586</span></a>                  'usestream' =&gt; true,
<a name="l587"><span class="linenum"> 587</span></a>              ));
<a name="l588"><span class="linenum"> 588</span></a>  
<a name="l589"><span class="linenum"> 589</span></a>              if (<a class="var it2545" onMouseOver="hilite(2545)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../../../_variables/part.html">$part</a> === <a class="var it26516" onMouseOver="hilite(26516)" onMouseOut="lolite()" onClick="logVariable('plainpartid')" href="../../../../_variables/plainpartid.html">$plainpartid</a>) {
<a name="l590"><span class="linenum"> 590</span></a>                  <a class="var it26515" onMouseOver="hilite(26515)" onMouseOut="lolite()" onClick="logVariable('contentplain')" href="../../../../_variables/contentplain.html">$contentplain</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_message_part_body')" href="../../../../_functions/process_message_part_body.html" onMouseOver="funcPopup(event,'process_message_part_body')">process_message_part_body</a>(<a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>, <a class="var it26518" onMouseOver="hilite(26518)" onMouseOut="lolite()" onClick="logVariable('partdata')" href="../../../../_variables/partdata.html">$partdata</a>, <a class="var it2545" onMouseOver="hilite(2545)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../../../_variables/part.html">$part</a>);
<a name="l591"><span class="linenum"> 591</span></a>  
<a name="l592"><span class="linenum"> 592</span></a>              } else if (<a class="var it2545" onMouseOver="hilite(2545)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../../../_variables/part.html">$part</a> === <a class="var it26517" onMouseOver="hilite(26517)" onMouseOut="lolite()" onClick="logVariable('htmlpartid')" href="../../../../_variables/htmlpartid.html">$htmlpartid</a>) {
<a name="l593"><span class="linenum"> 593</span></a>                  <a class="var it5245" onMouseOver="hilite(5245)" onMouseOut="lolite()" onClick="logVariable('contenthtml')" href="../../../../_variables/contenthtml.html">$contenthtml</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_message_part_body')" href="../../../../_functions/process_message_part_body.html" onMouseOver="funcPopup(event,'process_message_part_body')">process_message_part_body</a>(<a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>, <a class="var it26518" onMouseOver="hilite(26518)" onMouseOut="lolite()" onClick="logVariable('partdata')" href="../../../../_variables/partdata.html">$partdata</a>, <a class="var it2545" onMouseOver="hilite(2545)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../../../_variables/part.html">$part</a>);
<a name="l594"><span class="linenum"> 594</span></a>  
<a name="l595"><span class="linenum"> 595</span></a>              } else if (<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../../_variables/filename.html">$filename</a> = <a class="var it26518" onMouseOver="hilite(26518)" onMouseOut="lolite()" onClick="logVariable('partdata')" href="../../../../_variables/partdata.html">$partdata</a>-&gt;<a class="function" onClick="logFunction('getName')" href="../../../../_functions/getname.html" onMouseOver="funcPopup(event,'getname')">getName</a>(<a class="var it2545" onMouseOver="hilite(2545)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../../../_variables/part.html">$part</a>)) {
<a name="l596"><span class="linenum"> 596</span></a>                  if (<a class="var it1327" onMouseOver="hilite(1327)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../../_variables/attachment.html">$attachment</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_message_part_attachment')" href="../../../../_functions/process_message_part_attachment.html" onMouseOver="funcPopup(event,'process_message_part_attachment')">process_message_part_attachment</a>(<a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>, <a class="var it26518" onMouseOver="hilite(26518)" onMouseOut="lolite()" onClick="logVariable('partdata')" href="../../../../_variables/partdata.html">$partdata</a>, <a class="var it2545" onMouseOver="hilite(2545)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../../../_variables/part.html">$part</a>, <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../../_variables/filename.html">$filename</a>)) {
<a name="l597"><span class="linenum"> 597</span></a>  <span class="comment">                    // The disposition should be one of 'attachment', 'inline'.</span>
<a name="l598"><span class="linenum"> 598</span></a>  <span class="comment">                    // If an empty string is provided, default to 'attachment'.</span>
<a name="l599"><span class="linenum"> 599</span></a>                      <a class="var it14246" onMouseOver="hilite(14246)" onMouseOut="lolite()" onClick="logVariable('disposition')" href="../../../../_variables/disposition.html">$disposition</a> = <a class="var it26518" onMouseOver="hilite(26518)" onMouseOut="lolite()" onClick="logVariable('partdata')" href="../../../../_variables/partdata.html">$partdata</a>-&gt;<a class="function" onClick="logFunction('getDisposition')" href="../../../../_functions/getdisposition.html" onMouseOver="funcPopup(event,'getdisposition')">getDisposition</a>();
<a name="l600"><span class="linenum"> 600</span></a>                      <a class="var it14246" onMouseOver="hilite(14246)" onMouseOut="lolite()" onClick="logVariable('disposition')" href="../../../../_variables/disposition.html">$disposition</a> = <a class="var it14246" onMouseOver="hilite(14246)" onMouseOut="lolite()" onClick="logVariable('disposition')" href="../../../../_variables/disposition.html">$disposition</a> == 'inline' ? 'inline' : 'attachment';
<a name="l601"><span class="linenum"> 601</span></a>                      <a class="var it1326" onMouseOver="hilite(1326)" onMouseOut="lolite()" onClick="logVariable('attachments')" href="../../../../_variables/attachments.html">$attachments</a>[<a class="var it14246" onMouseOver="hilite(14246)" onMouseOut="lolite()" onClick="logVariable('disposition')" href="../../../../_variables/disposition.html">$disposition</a>][] = <a class="var it1327" onMouseOver="hilite(1327)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../../_variables/attachment.html">$attachment</a>;
<a name="l602"><span class="linenum"> 602</span></a>                  }
<a name="l603"><span class="linenum"> 603</span></a>              }
<a name="l604"><span class="linenum"> 604</span></a>  
<a name="l605"><span class="linenum"> 605</span></a>  <span class="comment">            // We don't handle any of the other MIME content at this stage.</span>
<a name="l606"><span class="linenum"> 606</span></a>          }
<a name="l607"><span class="linenum"> 607</span></a>  
<a name="l608"><span class="linenum"> 608</span></a>  <span class="comment">        // The message ID should always be in the first part.</span>
<a name="l609"><span class="linenum"> 609</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>-&gt;plain = <a class="var it26515" onMouseOver="hilite(26515)" onMouseOut="lolite()" onClick="logVariable('contentplain')" href="../../../../_variables/contentplain.html">$contentplain</a>;
<a name="l610"><span class="linenum"> 610</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>-&gt;html = <a class="var it5245" onMouseOver="hilite(5245)" onMouseOut="lolite()" onClick="logVariable('contenthtml')" href="../../../../_variables/contenthtml.html">$contenthtml</a>;
<a name="l611"><span class="linenum"> 611</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>-&gt;attachments = <a class="var it1326" onMouseOver="hilite(1326)" onMouseOut="lolite()" onClick="logVariable('attachments')" href="../../../../_variables/attachments.html">$attachments</a>;
<a name="l612"><span class="linenum"> 612</span></a>  
<a name="l613"><span class="linenum"> 613</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>;
<a name="l614"><span class="linenum"> 614</span></a>      }
<a name="l615"><span class="linenum"> 615</span></a>  
<a name="l616"><span class="linenum"> 616</span></a>      <span class="comment">/**</span>
<a name="l617"><span class="linenum"> 617</span></a>  <span class="comment">     * Process the messagedata and part data to extract the content of this part.</span>
<a name="l618"><span class="linenum"> 618</span></a>  <span class="comment">     *</span>
<a name="l619"><span class="linenum"> 619</span></a>  <span class="comment">     * @param \Horde_Imap_Client_Data_Fetch $messagedata The structure and part of the message body</span>
<a name="l620"><span class="linenum"> 620</span></a>  <span class="comment">     * @param \Horde_Mime_Part $partdata The part data</span>
<a name="l621"><span class="linenum"> 621</span></a>  <span class="comment">     * @param string $part The part ID</span>
<a name="l622"><span class="linenum"> 622</span></a>  <span class="comment">     * @return string</span>
<a name="l623"><span class="linenum"> 623</span></a>  <span class="comment">     */</span>
<a name="l624"><span class="linenum"> 624</span></a>      private function <a class="function" onClick="logFunction('process_message_part_body')" href="../../../../_functions/process_message_part_body.html" onMouseOver="funcPopup(event,'process_message_part_body')">process_message_part_body</a>(<a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>, <a class="var it26518" onMouseOver="hilite(26518)" onMouseOut="lolite()" onClick="logVariable('partdata')" href="../../../../_variables/partdata.html">$partdata</a>, <a class="var it2545" onMouseOver="hilite(2545)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../../../_variables/part.html">$part</a>) {
<a name="l625"><span class="linenum"> 625</span></a>  <span class="comment">        // This is a content section for the main body.</span>
<a name="l626"><span class="linenum"> 626</span></a>  
<a name="l627"><span class="linenum"> 627</span></a>  <span class="comment">        // Get the string version of it.</span>
<a name="l628"><span class="linenum"> 628</span></a>          <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../../_variables/content.html">$content</a> = <a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>-&gt;<a class="function" onClick="logFunction('getBodyPart')" href="../../../../_functions/getbodypart.html" onMouseOver="funcPopup(event,'getbodypart')">getBodyPart</a>(<a class="var it2545" onMouseOver="hilite(2545)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../../../_variables/part.html">$part</a>);
<a name="l629"><span class="linenum"> 629</span></a>          if (!<a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>-&gt;<a class="function" onClick="logFunction('getBodyPartDecode')" href="../../../../_functions/getbodypartdecode.html" onMouseOver="funcPopup(event,'getbodypartdecode')">getBodyPartDecode</a>(<a class="var it2545" onMouseOver="hilite(2545)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../../../_variables/part.html">$part</a>)) {
<a name="l630"><span class="linenum"> 630</span></a>  <span class="comment">            // Decode the content.</span>
<a name="l631"><span class="linenum"> 631</span></a>              <a class="var it26518" onMouseOver="hilite(26518)" onMouseOut="lolite()" onClick="logVariable('partdata')" href="../../../../_variables/partdata.html">$partdata</a>-&gt;<a class="function" onClick="logFunction('setContents')" href="../../../../_functions/setcontents.html" onMouseOver="funcPopup(event,'setcontents')">setContents</a>(<a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../../_variables/content.html">$content</a>);
<a name="l632"><span class="linenum"> 632</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../../_variables/content.html">$content</a> = <a class="var it26518" onMouseOver="hilite(26518)" onMouseOut="lolite()" onClick="logVariable('partdata')" href="../../../../_variables/partdata.html">$partdata</a>-&gt;<a class="function" onClick="logFunction('getContents')" href="../../../../_functions/getcontents.html" onMouseOver="funcPopup(event,'getcontents')">getContents</a>();
<a name="l633"><span class="linenum"> 633</span></a>          }
<a name="l634"><span class="linenum"> 634</span></a>  
<a name="l635"><span class="linenum"> 635</span></a>  <span class="comment">        // Convert the text from the current encoding to UTF8.</span>
<a name="l636"><span class="linenum"> 636</span></a>          <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../../_variables/content.html">$content</a> = \<a class="class" onClick="logClass('core_text')" href="../../../../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="function" onClick="logFunction('convert')" href="../../../../_functions/convert.html" onMouseOver="funcPopup(event,'convert')">convert</a>(<a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../../_variables/content.html">$content</a>, <a class="var it26518" onMouseOver="hilite(26518)" onMouseOut="lolite()" onClick="logVariable('partdata')" href="../../../../_variables/partdata.html">$partdata</a>-&gt;<a class="function" onClick="logFunction('getCharset')" href="../../../../_functions/getcharset.html" onMouseOver="funcPopup(event,'getcharset')">getCharset</a>());
<a name="l637"><span class="linenum"> 637</span></a>  
<a name="l638"><span class="linenum"> 638</span></a>  <span class="comment">        // Fix any invalid UTF8 characters.</span>
<a name="l639"><span class="linenum"> 639</span></a>  <span class="comment">        // Note: XSS cleaning is not the responsibility of this code. It occurs immediately before display when</span>
<a name="l640"><span class="linenum"> 640</span></a>  <span class="comment">        // format_text is called.</span>
<a name="l641"><span class="linenum"> 641</span></a>          <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../../_variables/content.html">$content</a> = <a class="function" onClick="logFunction('clean_param')" href="../../../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../../_variables/content.html">$content</a>, <a class="constant" onClick="logConstant('PARAM_RAW')" href="../../../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>);
<a name="l642"><span class="linenum"> 642</span></a>  
<a name="l643"><span class="linenum"> 643</span></a>          return <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../../_variables/content.html">$content</a>;
<a name="l644"><span class="linenum"> 644</span></a>      }
<a name="l645"><span class="linenum"> 645</span></a>  
<a name="l646"><span class="linenum"> 646</span></a>      <span class="comment">/**</span>
<a name="l647"><span class="linenum"> 647</span></a>  <span class="comment">     * Process a message again to add body and attachment data.</span>
<a name="l648"><span class="linenum"> 648</span></a>  <span class="comment">     *</span>
<a name="l649"><span class="linenum"> 649</span></a>  <span class="comment">     * @param \Horde_Imap_Client_Data_Fetch $messagedata The structure and part of the message body</span>
<a name="l650"><span class="linenum"> 650</span></a>  <span class="comment">     * @param \Horde_Mime_Part $partdata The part data</span>
<a name="l651"><span class="linenum"> 651</span></a>  <span class="comment">     * @param string $part The part ID.</span>
<a name="l652"><span class="linenum"> 652</span></a>  <span class="comment">     * @param string $filename The filename of the attachment</span>
<a name="l653"><span class="linenum"> 653</span></a>  <span class="comment">     * @return \stdClass</span>
<a name="l654"><span class="linenum"> 654</span></a>  <span class="comment">     * @throws \core\message\inbound\processing_failed_exception If the attachment can't be saved to disk.</span>
<a name="l655"><span class="linenum"> 655</span></a>  <span class="comment">     */</span>
<a name="l656"><span class="linenum"> 656</span></a>      private function <a class="function" onClick="logFunction('process_message_part_attachment')" href="../../../../_functions/process_message_part_attachment.html" onMouseOver="funcPopup(event,'process_message_part_attachment')">process_message_part_attachment</a>(<a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>, <a class="var it26518" onMouseOver="hilite(26518)" onMouseOut="lolite()" onClick="logVariable('partdata')" href="../../../../_variables/partdata.html">$partdata</a>, <a class="var it2545" onMouseOver="hilite(2545)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../../../_variables/part.html">$part</a>, <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../../_variables/filename.html">$filename</a>) {
<a name="l657"><span class="linenum"> 657</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>;
<a name="l658"><span class="linenum"> 658</span></a>  
<a name="l659"><span class="linenum"> 659</span></a>  <span class="comment">        // If a filename is present, assume that this part is an attachment.</span>
<a name="l660"><span class="linenum"> 660</span></a>          <a class="var it1327" onMouseOver="hilite(1327)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../../_variables/attachment.html">$attachment</a> = new \stdClass();
<a name="l661"><span class="linenum"> 661</span></a>          <a class="var it1327" onMouseOver="hilite(1327)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../../_variables/attachment.html">$attachment</a>-&gt;<a onClick="logVariable('filename')" class="var it44350" onMouseOver="hilite(44350)" onMouseOut="lolite()" href="../../../../_variables/filename.html">filename</a>       = <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../../_variables/filename.html">$filename</a>;
<a name="l662"><span class="linenum"> 662</span></a>          <a class="var it1327" onMouseOver="hilite(1327)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../../_variables/attachment.html">$attachment</a>-&gt;<a onClick="logVariable('type')" class="var it44350" onMouseOver="hilite(44350)" onMouseOut="lolite()" href="../../../../_variables/type.html">type</a>           = <a class="var it26518" onMouseOver="hilite(26518)" onMouseOut="lolite()" onClick="logVariable('partdata')" href="../../../../_variables/partdata.html">$partdata</a>-&gt;<a class="phpfunction" onClick="logFunction('getType')" href="../../../../_functions/gettype.html" onMouseOver="phpfuncPopup(event,'gettype')">getType</a>();
<a name="l663"><span class="linenum"> 663</span></a>          <a class="var it1327" onMouseOver="hilite(1327)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../../_variables/attachment.html">$attachment</a>-&gt;<a onClick="logVariable('content')" class="var it44350" onMouseOver="hilite(44350)" onMouseOut="lolite()" href="../../../../_variables/content.html">content</a>        = <a class="var it26518" onMouseOver="hilite(26518)" onMouseOut="lolite()" onClick="logVariable('partdata')" href="../../../../_variables/partdata.html">$partdata</a>-&gt;<a class="function" onClick="logFunction('getContents')" href="../../../../_functions/getcontents.html" onMouseOver="funcPopup(event,'getcontents')">getContents</a>();
<a name="l664"><span class="linenum"> 664</span></a>          <a class="var it1327" onMouseOver="hilite(1327)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../../_variables/attachment.html">$attachment</a>-&gt;<a onClick="logVariable('charset')" class="var it44350" onMouseOver="hilite(44350)" onMouseOut="lolite()" href="../../../../_variables/charset.html">charset</a>        = <a class="var it26518" onMouseOver="hilite(26518)" onMouseOut="lolite()" onClick="logVariable('partdata')" href="../../../../_variables/partdata.html">$partdata</a>-&gt;<a class="function" onClick="logFunction('getCharset')" href="../../../../_functions/getcharset.html" onMouseOver="funcPopup(event,'getcharset')">getCharset</a>();
<a name="l665"><span class="linenum"> 665</span></a>          <a class="var it1327" onMouseOver="hilite(1327)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../../_variables/attachment.html">$attachment</a>-&gt;<a onClick="logVariable('description')" class="var it44350" onMouseOver="hilite(44350)" onMouseOut="lolite()" href="../../../../_variables/description.html">description</a>    = <a class="var it26518" onMouseOver="hilite(26518)" onMouseOut="lolite()" onClick="logVariable('partdata')" href="../../../../_variables/partdata.html">$partdata</a>-&gt;<a class="function" onClick="logFunction('getDescription')" href="../../../../_functions/getdescription.html" onMouseOver="funcPopup(event,'getdescription')">getDescription</a>();
<a name="l666"><span class="linenum"> 666</span></a>          <a class="var it1327" onMouseOver="hilite(1327)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../../_variables/attachment.html">$attachment</a>-&gt;<a onClick="logVariable('contentid')" class="var it44350" onMouseOver="hilite(44350)" onMouseOut="lolite()" href="../../../../_variables/contentid.html">contentid</a>      = <a class="var it26518" onMouseOver="hilite(26518)" onMouseOut="lolite()" onClick="logVariable('partdata')" href="../../../../_variables/partdata.html">$partdata</a>-&gt;<a class="function" onClick="logFunction('getContentId')" href="../../../../_functions/getcontentid.html" onMouseOver="funcPopup(event,'getcontentid')">getContentId</a>();
<a name="l667"><span class="linenum"> 667</span></a>          <a class="var it1327" onMouseOver="hilite(1327)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../../_variables/attachment.html">$attachment</a>-&gt;<a onClick="logVariable('filesize')" class="var it44350" onMouseOver="hilite(44350)" onMouseOut="lolite()" href="../../../../_variables/filesize.html">filesize</a>       = <a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>-&gt;<a class="function" onClick="logFunction('getBodyPartSize')" href="../../../../_functions/getbodypartsize.html" onMouseOver="funcPopup(event,'getbodypartsize')">getBodyPartSize</a>(<a class="var it2545" onMouseOver="hilite(2545)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../../../_variables/part.html">$part</a>);
<a name="l668"><span class="linenum"> 668</span></a>  
<a name="l669"><span class="linenum"> 669</span></a>          if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('antiviruses')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/antiviruses.html">antiviruses</a>)) {
<a name="l670"><span class="linenum"> 670</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;--&gt; Attempting virus scan of '{<a class="var it1327" onMouseOver="hilite(1327)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../../_variables/attachment.html">$attachment</a>-&gt;<a onClick="logVariable('filename')" class="var it44350" onMouseOver="hilite(44350)" onMouseOut="lolite()" href="../../../../_variables/filename.html">filename</a>}'&quot;);
<a name="l671"><span class="linenum"> 671</span></a>  
<a name="l672"><span class="linenum"> 672</span></a>  <span class="comment">            // Store the file on disk - it will need to be virus scanned first.</span>
<a name="l673"><span class="linenum"> 673</span></a>              <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../../../_variables/itemid.html">$itemid</a> = <a class="phpfunction" onClick="logFunction('rand')" href="../../../../_functions/rand.html" onMouseOver="phpfuncPopup(event,'rand')">rand</a>(1, 999999999);;
<a name="l674"><span class="linenum"> 674</span></a>              <a class="var it6532" onMouseOver="hilite(6532)" onMouseOut="lolite()" onClick="logVariable('directory')" href="../../../../_variables/directory.html">$directory</a> = <a class="function" onClick="logFunction('make_temp_directory')" href="../../../../_functions/make_temp_directory.html" onMouseOver="funcPopup(event,'make_temp_directory')">make_temp_directory</a>(&quot;/messageinbound/{<a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../../../_variables/itemid.html">$itemid</a>}&quot;, false);
<a name="l675"><span class="linenum"> 675</span></a>              <a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../../../_variables/filepath.html">$filepath</a> = <a class="var it6532" onMouseOver="hilite(6532)" onMouseOut="lolite()" onClick="logVariable('directory')" href="../../../../_variables/directory.html">$directory</a> . &quot;/&quot; . <a class="var it1327" onMouseOver="hilite(1327)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../../_variables/attachment.html">$attachment</a>-&gt;<a onClick="logVariable('filename')" class="var it44350" onMouseOver="hilite(44350)" onMouseOut="lolite()" href="../../../../_variables/filename.html">filename</a>;
<a name="l676"><span class="linenum"> 676</span></a>              if (!<a class="var it808" onMouseOver="hilite(808)" onMouseOut="lolite()" onClick="logVariable('fp')" href="../../../../_variables/fp.html">$fp</a> = <a class="function" onClick="logFunction('fopen')" href="../../../../_functions/fopen.html" onMouseOver="funcPopup(event,'fopen')">fopen</a>(<a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../../../_variables/filepath.html">$filepath</a>, &quot;w&quot;)) {
<a name="l677"><span class="linenum"> 677</span></a>  <span class="comment">                // Unable to open the temporary file to write this to disk.</span>
<a name="l678"><span class="linenum"> 678</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;--&gt; Unable to save the file to disk for virus scanning. Check file permissions.&quot;);
<a name="l679"><span class="linenum"> 679</span></a>  
<a name="l680"><span class="linenum"> 680</span></a>                  throw new \core\message\inbound\processing_failed_exception('attachmentfilepermissionsfailed',
<a name="l681"><span class="linenum"> 681</span></a>                          'tool_messageinbound');
<a name="l682"><span class="linenum"> 682</span></a>              }
<a name="l683"><span class="linenum"> 683</span></a>  
<a name="l684"><span class="linenum"> 684</span></a>              <a class="phpfunction" onClick="logFunction('fwrite')" href="../../../../_functions/fwrite.html" onMouseOver="phpfuncPopup(event,'fwrite')">fwrite</a>(<a class="var it808" onMouseOver="hilite(808)" onMouseOut="lolite()" onClick="logVariable('fp')" href="../../../../_variables/fp.html">$fp</a>, <a class="var it1327" onMouseOver="hilite(1327)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../../_variables/attachment.html">$attachment</a>-&gt;<a onClick="logVariable('content')" class="var it44350" onMouseOver="hilite(44350)" onMouseOut="lolite()" href="../../../../_variables/content.html">content</a>);
<a name="l685"><span class="linenum"> 685</span></a>              <a class="phpfunction" onClick="logFunction('fclose')" href="../../../../_functions/fclose.html" onMouseOver="phpfuncPopup(event,'fclose')">fclose</a>(<a class="var it808" onMouseOver="hilite(808)" onMouseOut="lolite()" onClick="logVariable('fp')" href="../../../../_variables/fp.html">$fp</a>);
<a name="l686"><span class="linenum"> 686</span></a>  
<a name="l687"><span class="linenum"> 687</span></a>  <span class="comment">            // Perform a virus scan now.</span>
<a name="l688"><span class="linenum"> 688</span></a>              try {
<a name="l689"><span class="linenum"> 689</span></a>                  \core\antivirus\<a class="class" onClick="logClass('manager')" href="../../../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('scan_file')" href="../../../../_functions/scan_file.html" onMouseOver="funcPopup(event,'scan_file')">scan_file</a>(<a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../../../_variables/filepath.html">$filepath</a>, <a class="var it1327" onMouseOver="hilite(1327)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../../_variables/attachment.html">$attachment</a>-&gt;<a onClick="logVariable('filename')" class="var it44350" onMouseOver="hilite(44350)" onMouseOut="lolite()" href="../../../../_variables/filename.html">filename</a>, true);
<a name="l690"><span class="linenum"> 690</span></a>              } catch (\core\antivirus\scanner_exception <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../../../_variables/e.html">$e</a>) {
<a name="l691"><span class="linenum"> 691</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;--&gt; A virus was found in the attachment '{<a class="var it1327" onMouseOver="hilite(1327)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../../_variables/attachment.html">$attachment</a>-&gt;<a onClick="logVariable('filename')" class="var it44350" onMouseOver="hilite(44350)" onMouseOut="lolite()" href="../../../../_variables/filename.html">filename</a>}'.&quot;);
<a name="l692"><span class="linenum"> 692</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;inform_attachment_virus();
<a name="l693"><span class="linenum"> 693</span></a>                  return;
<a name="l694"><span class="linenum"> 694</span></a>              }
<a name="l695"><span class="linenum"> 695</span></a>          }
<a name="l696"><span class="linenum"> 696</span></a>  
<a name="l697"><span class="linenum"> 697</span></a>          return <a class="var it1327" onMouseOver="hilite(1327)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../../_variables/attachment.html">$attachment</a>;
<a name="l698"><span class="linenum"> 698</span></a>      }
<a name="l699"><span class="linenum"> 699</span></a>  
<a name="l700"><span class="linenum"> 700</span></a>      <span class="comment">/**</span>
<a name="l701"><span class="linenum"> 701</span></a>  <span class="comment">     * Check whether the key provided is valid.</span>
<a name="l702"><span class="linenum"> 702</span></a>  <span class="comment">     *</span>
<a name="l703"><span class="linenum"> 703</span></a>  <span class="comment">     * @param bool $status</span>
<a name="l704"><span class="linenum"> 704</span></a>  <span class="comment">     * @param mixed $messageid The Hore message Uid</span>
<a name="l705"><span class="linenum"> 705</span></a>  <span class="comment">     * @return bool</span>
<a name="l706"><span class="linenum"> 706</span></a>  <span class="comment">     */</span>
<a name="l707"><span class="linenum"> 707</span></a>      private function <a class="function" onClick="logFunction('passes_key_validation')" href="../../../../_functions/passes_key_validation.html" onMouseOver="funcPopup(event,'passes_key_validation')">passes_key_validation</a>(<a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../../_variables/status.html">$status</a>, <a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>) {
<a name="l708"><span class="linenum"> 708</span></a>  <span class="comment">        // The validation result is tested in a bitwise operation.</span>
<a name="l709"><span class="linenum"> 709</span></a>          if ((
<a name="l710"><span class="linenum"> 710</span></a>              <a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../../_variables/status.html">$status</a> &amp; ~ \core\message\inbound\<a class="class" onClick="logClass('address_manager')" href="../../../../_classes/address_manager.html" onMouseOver="classPopup(event,'address_manager')">address_manager</a>::VALIDATION_SUCCESS
<a name="l711"><span class="linenum"> 711</span></a>                      &amp; ~ \core\message\inbound\<a class="class" onClick="logClass('address_manager')" href="../../../../_classes/address_manager.html" onMouseOver="classPopup(event,'address_manager')">address_manager</a>::VALIDATION_UNKNOWN_DATAKEY
<a name="l712"><span class="linenum"> 712</span></a>                      &amp; ~ \core\message\inbound\<a class="class" onClick="logClass('address_manager')" href="../../../../_classes/address_manager.html" onMouseOver="classPopup(event,'address_manager')">address_manager</a>::VALIDATION_EXPIRED_DATAKEY
<a name="l713"><span class="linenum"> 713</span></a>                      &amp; ~ \core\message\inbound\<a class="class" onClick="logClass('address_manager')" href="../../../../_classes/address_manager.html" onMouseOver="classPopup(event,'address_manager')">address_manager</a>::VALIDATION_INVALID_HASH
<a name="l714"><span class="linenum"> 714</span></a>                      &amp; ~ \core\message\inbound\<a class="class" onClick="logClass('address_manager')" href="../../../../_classes/address_manager.html" onMouseOver="classPopup(event,'address_manager')">address_manager</a>::VALIDATION_ADDRESS_MISMATCH) !== 0) {
<a name="l715"><span class="linenum"> 715</span></a>  
<a name="l716"><span class="linenum"> 716</span></a>  <span class="comment">            // One of the above bits was found in the status - fail the validation.</span>
<a name="l717"><span class="linenum"> 717</span></a>              return false;
<a name="l718"><span class="linenum"> 718</span></a>          }
<a name="l719"><span class="linenum"> 719</span></a>          return true;
<a name="l720"><span class="linenum"> 720</span></a>      }
<a name="l721"><span class="linenum"> 721</span></a>  
<a name="l722"><span class="linenum"> 722</span></a>      <span class="comment">/**</span>
<a name="l723"><span class="linenum"> 723</span></a>  <span class="comment">     * Add the specified flag to the message.</span>
<a name="l724"><span class="linenum"> 724</span></a>  <span class="comment">     *</span>
<a name="l725"><span class="linenum"> 725</span></a>  <span class="comment">     * @param mixed $messageid</span>
<a name="l726"><span class="linenum"> 726</span></a>  <span class="comment">     * @param string $flag The flag to add</span>
<a name="l727"><span class="linenum"> 727</span></a>  <span class="comment">     */</span>
<a name="l728"><span class="linenum"> 728</span></a>      private function <a class="function" onClick="logFunction('add_flag_to_message')" href="../../../../_functions/add_flag_to_message.html" onMouseOver="funcPopup(event,'add_flag_to_message')">add_flag_to_message</a>(<a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>, <a class="var it4598" onMouseOver="hilite(4598)" onMouseOut="lolite()" onClick="logVariable('flag')" href="../../../../_variables/flag.html">$flag</a>) {
<a name="l729"><span class="linenum"> 729</span></a>  <span class="comment">        // Get the current mailbox.</span>
<a name="l730"><span class="linenum"> 730</span></a>          <a class="var it1406" onMouseOver="hilite(1406)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_mailbox')" href="../../../../_functions/get_mailbox.html" onMouseOver="funcPopup(event,'get_mailbox')">get_mailbox</a>();
<a name="l731"><span class="linenum"> 731</span></a>  
<a name="l732"><span class="linenum"> 732</span></a>  <span class="comment">        // Mark it as read to lock the message.</span>
<a name="l733"><span class="linenum"> 733</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('store')" href="../../../../_functions/store.html" onMouseOver="funcPopup(event,'store')">store</a>(<a class="var it1406" onMouseOver="hilite(1406)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a>, array(
<a name="l734"><span class="linenum"> 734</span></a>              'ids' =&gt; new \Horde_Imap_Client_Ids(<a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>),
<a name="l735"><span class="linenum"> 735</span></a>              'add' =&gt; <a class="var it4598" onMouseOver="hilite(4598)" onMouseOut="lolite()" onClick="logVariable('flag')" href="../../../../_variables/flag.html">$flag</a>,
<a name="l736"><span class="linenum"> 736</span></a>          ));
<a name="l737"><span class="linenum"> 737</span></a>      }
<a name="l738"><span class="linenum"> 738</span></a>  
<a name="l739"><span class="linenum"> 739</span></a>      <span class="comment">/**</span>
<a name="l740"><span class="linenum"> 740</span></a>  <span class="comment">     * Remove the specified flag from the message.</span>
<a name="l741"><span class="linenum"> 741</span></a>  <span class="comment">     *</span>
<a name="l742"><span class="linenum"> 742</span></a>  <span class="comment">     * @param mixed $messageid</span>
<a name="l743"><span class="linenum"> 743</span></a>  <span class="comment">     * @param string $flag The flag to remove</span>
<a name="l744"><span class="linenum"> 744</span></a>  <span class="comment">     */</span>
<a name="l745"><span class="linenum"> 745</span></a>      private function <a class="function" onClick="logFunction('remove_flag_from_message')" href="../../../../_functions/remove_flag_from_message.html" onMouseOver="funcPopup(event,'remove_flag_from_message')">remove_flag_from_message</a>(<a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>, <a class="var it4598" onMouseOver="hilite(4598)" onMouseOut="lolite()" onClick="logVariable('flag')" href="../../../../_variables/flag.html">$flag</a>) {
<a name="l746"><span class="linenum"> 746</span></a>  <span class="comment">        // Get the current mailbox.</span>
<a name="l747"><span class="linenum"> 747</span></a>          <a class="var it1406" onMouseOver="hilite(1406)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_mailbox')" href="../../../../_functions/get_mailbox.html" onMouseOver="funcPopup(event,'get_mailbox')">get_mailbox</a>();
<a name="l748"><span class="linenum"> 748</span></a>  
<a name="l749"><span class="linenum"> 749</span></a>  <span class="comment">        // Mark it as read to lock the message.</span>
<a name="l750"><span class="linenum"> 750</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('store')" href="../../../../_functions/store.html" onMouseOver="funcPopup(event,'store')">store</a>(<a class="var it1406" onMouseOver="hilite(1406)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a>, array(
<a name="l751"><span class="linenum"> 751</span></a>              'ids' =&gt; <a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>,
<a name="l752"><span class="linenum"> 752</span></a>              'delete' =&gt; <a class="var it4598" onMouseOver="hilite(4598)" onMouseOut="lolite()" onClick="logVariable('flag')" href="../../../../_variables/flag.html">$flag</a>,
<a name="l753"><span class="linenum"> 753</span></a>          ));
<a name="l754"><span class="linenum"> 754</span></a>      }
<a name="l755"><span class="linenum"> 755</span></a>  
<a name="l756"><span class="linenum"> 756</span></a>      <span class="comment">/**</span>
<a name="l757"><span class="linenum"> 757</span></a>  <span class="comment">     * Check whether the message has the specified flag</span>
<a name="l758"><span class="linenum"> 758</span></a>  <span class="comment">     *</span>
<a name="l759"><span class="linenum"> 759</span></a>  <span class="comment">     * @param mixed $messageid</span>
<a name="l760"><span class="linenum"> 760</span></a>  <span class="comment">     * @param string $flag The flag to check</span>
<a name="l761"><span class="linenum"> 761</span></a>  <span class="comment">     * @return bool</span>
<a name="l762"><span class="linenum"> 762</span></a>  <span class="comment">     */</span>
<a name="l763"><span class="linenum"> 763</span></a>      private function <a class="function" onClick="logFunction('message_has_flag')" href="../../../../_functions/message_has_flag.html" onMouseOver="funcPopup(event,'message_has_flag')">message_has_flag</a>(<a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>, <a class="var it4598" onMouseOver="hilite(4598)" onMouseOut="lolite()" onClick="logVariable('flag')" href="../../../../_variables/flag.html">$flag</a>) {
<a name="l764"><span class="linenum"> 764</span></a>  <span class="comment">        // Get the current mailbox.</span>
<a name="l765"><span class="linenum"> 765</span></a>          <a class="var it1406" onMouseOver="hilite(1406)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_mailbox')" href="../../../../_functions/get_mailbox.html" onMouseOver="funcPopup(event,'get_mailbox')">get_mailbox</a>();
<a name="l766"><span class="linenum"> 766</span></a>  
<a name="l767"><span class="linenum"> 767</span></a>  <span class="comment">        // Grab messagedata including flags.</span>
<a name="l768"><span class="linenum"> 768</span></a>          <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a> = new \Horde_Imap_Client_Fetch_Query();
<a name="l769"><span class="linenum"> 769</span></a>          <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>-&gt;<a class="function" onClick="logFunction('flags')" href="../../../../_functions/flags.html" onMouseOver="funcPopup(event,'flags')">flags</a>();
<a name="l770"><span class="linenum"> 770</span></a>          <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>-&gt;<a class="function" onClick="logFunction('structure')" href="../../../../_functions/structure.html" onMouseOver="funcPopup(event,'structure')">structure</a>();
<a name="l771"><span class="linenum"> 771</span></a>          <a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('fetch')" href="../../../../_functions/fetch.html" onMouseOver="funcPopup(event,'fetch')">fetch</a>(<a class="var it1406" onMouseOver="hilite(1406)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a>, <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>, array(
<a name="l772"><span class="linenum"> 772</span></a>              'ids' =&gt; <a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>,
<a name="l773"><span class="linenum"> 773</span></a>          ))-&gt;<a class="function" onClick="logFunction('first')" href="../../../../_functions/first.html" onMouseOver="funcPopup(event,'first')">first</a>();
<a name="l774"><span class="linenum"> 774</span></a>          <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../../../_variables/flags.html">$flags</a> = <a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>-&gt;<a class="function" onClick="logFunction('getFlags')" href="../../../../_functions/getflags.html" onMouseOver="funcPopup(event,'getflags')">getFlags</a>();
<a name="l775"><span class="linenum"> 775</span></a>  
<a name="l776"><span class="linenum"> 776</span></a>          return <a class="phpfunction" onClick="logFunction('in_array')" href="../../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it4598" onMouseOver="hilite(4598)" onMouseOut="lolite()" onClick="logVariable('flag')" href="../../../../_variables/flag.html">$flag</a>, <a class="var it207" onMouseOver="hilite(207)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../../../_variables/flags.html">$flags</a>);
<a name="l777"><span class="linenum"> 777</span></a>      }
<a name="l778"><span class="linenum"> 778</span></a>  
<a name="l779"><span class="linenum"> 779</span></a>      <span class="comment">/**</span>
<a name="l780"><span class="linenum"> 780</span></a>  <span class="comment">     * Ensure that all mailboxes exist.</span>
<a name="l781"><span class="linenum"> 781</span></a>  <span class="comment">     */</span>
<a name="l782"><span class="linenum"> 782</span></a>      private function <a class="function" onClick="logFunction('ensure_mailboxes_exist')" href="../../../../_functions/ensure_mailboxes_exist.html" onMouseOver="funcPopup(event,'ensure_mailboxes_exist')">ensure_mailboxes_exist</a>() {
<a name="l783"><span class="linenum"> 783</span></a>  
<a name="l784"><span class="linenum"> 784</span></a>          <a class="var it26519" onMouseOver="hilite(26519)" onMouseOut="lolite()" onClick="logVariable('requiredmailboxes')" href="../../../../_variables/requiredmailboxes.html">$requiredmailboxes</a> = array(
<a name="l785"><span class="linenum"> 785</span></a>              self::MAILBOX,
<a name="l786"><span class="linenum"> 786</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_confirmation_folder')" href="../../../../_functions/get_confirmation_folder.html" onMouseOver="funcPopup(event,'get_confirmation_folder')">get_confirmation_folder</a>(),
<a name="l787"><span class="linenum"> 787</span></a>          );
<a name="l788"><span class="linenum"> 788</span></a>  
<a name="l789"><span class="linenum"> 789</span></a>          <a class="var it26520" onMouseOver="hilite(26520)" onMouseOut="lolite()" onClick="logVariable('existingmailboxes')" href="../../../../_variables/existingmailboxes.html">$existingmailboxes</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('listMailboxes')" href="../../../../_functions/listmailboxes.html" onMouseOver="funcPopup(event,'listmailboxes')">listMailboxes</a>(<a class="var it26519" onMouseOver="hilite(26519)" onMouseOut="lolite()" onClick="logVariable('requiredmailboxes')" href="../../../../_variables/requiredmailboxes.html">$requiredmailboxes</a>);
<a name="l790"><span class="linenum"> 790</span></a>          foreach (<a class="var it26519" onMouseOver="hilite(26519)" onMouseOut="lolite()" onClick="logVariable('requiredmailboxes')" href="../../../../_variables/requiredmailboxes.html">$requiredmailboxes</a> as <a class="var it1406" onMouseOver="hilite(1406)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a>) {
<a name="l791"><span class="linenum"> 791</span></a>              if (isset(<a class="var it26520" onMouseOver="hilite(26520)" onMouseOut="lolite()" onClick="logVariable('existingmailboxes')" href="../../../../_variables/existingmailboxes.html">$existingmailboxes</a>[<a class="var it1406" onMouseOver="hilite(1406)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a>])) {
<a name="l792"><span class="linenum"> 792</span></a>  <span class="comment">                // This mailbox was found.</span>
<a name="l793"><span class="linenum"> 793</span></a>                  continue;
<a name="l794"><span class="linenum"> 794</span></a>              }
<a name="l795"><span class="linenum"> 795</span></a>  
<a name="l796"><span class="linenum"> 796</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;Unable to find the '{<a class="var it1406" onMouseOver="hilite(1406)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a>}' mailbox - creating it.&quot;);
<a name="l797"><span class="linenum"> 797</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('createMailbox')" href="../../../../_functions/createmailbox.html" onMouseOver="funcPopup(event,'createmailbox')">createMailbox</a>(<a class="var it1406" onMouseOver="hilite(1406)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a>);
<a name="l798"><span class="linenum"> 798</span></a>          }
<a name="l799"><span class="linenum"> 799</span></a>      }
<a name="l800"><span class="linenum"> 800</span></a>  
<a name="l801"><span class="linenum"> 801</span></a>      <span class="comment">/**</span>
<a name="l802"><span class="linenum"> 802</span></a>  <span class="comment">     * Attempt to determine whether this message is a bulk message (e.g. automated reply).</span>
<a name="l803"><span class="linenum"> 803</span></a>  <span class="comment">     *</span>
<a name="l804"><span class="linenum"> 804</span></a>  <span class="comment">     * @param \Horde_Imap_Client_Data_Fetch $message The message to process</span>
<a name="l805"><span class="linenum"> 805</span></a>  <span class="comment">     * @param string|\Horde_Imap_Client_Ids $messageid The Hore message Uid</span>
<a name="l806"><span class="linenum"> 806</span></a>  <span class="comment">     * @return boolean</span>
<a name="l807"><span class="linenum"> 807</span></a>  <span class="comment">     */</span>
<a name="l808"><span class="linenum"> 808</span></a>      private function <a class="function" onClick="logFunction('is_bulk_message')" href="../../../../_functions/is_bulk_message.html" onMouseOver="funcPopup(event,'is_bulk_message')">is_bulk_message</a>(
<a name="l809"><span class="linenum"> 809</span></a>              \Horde_Imap_Client_Data_Fetch <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a>,
<a name="l810"><span class="linenum"> 810</span></a>              <a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>) {
<a name="l811"><span class="linenum"> 811</span></a>          <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a> = new \Horde_Imap_Client_Fetch_Query();
<a name="l812"><span class="linenum"> 812</span></a>          <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>-&gt;<a class="function" onClick="logFunction('headerText')" href="../../../../_functions/headertext.html" onMouseOver="funcPopup(event,'headertext')">headerText</a>(array('peek' =&gt; true));
<a name="l813"><span class="linenum"> 813</span></a>  
<a name="l814"><span class="linenum"> 814</span></a>          <a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('fetch')" href="../../../../_functions/fetch.html" onMouseOver="funcPopup(event,'fetch')">fetch</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_mailbox')" href="../../../../_functions/get_mailbox.html" onMouseOver="funcPopup(event,'get_mailbox')">get_mailbox</a>(), <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>, array('ids' =&gt; <a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>))-&gt;<a class="function" onClick="logFunction('first')" href="../../../../_functions/first.html" onMouseOver="funcPopup(event,'first')">first</a>();
<a name="l815"><span class="linenum"> 815</span></a>  
<a name="l816"><span class="linenum"> 816</span></a>  <span class="comment">        // Assume that this message is not bulk to begin with.</span>
<a name="l817"><span class="linenum"> 817</span></a>          <a class="var it26521" onMouseOver="hilite(26521)" onMouseOut="lolite()" onClick="logVariable('isbulk')" href="../../../../_variables/isbulk.html">$isbulk</a> = false;
<a name="l818"><span class="linenum"> 818</span></a>  
<a name="l819"><span class="linenum"> 819</span></a>  <span class="comment">        // An auto-reply may itself include the Bulk Precedence.</span>
<a name="l820"><span class="linenum"> 820</span></a>          <a class="var it21459" onMouseOver="hilite(21459)" onMouseOut="lolite()" onClick="logVariable('precedence')" href="../../../../_variables/precedence.html">$precedence</a> = <a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>-&gt;<a class="function" onClick="logFunction('getHeaderText')" href="../../../../_functions/getheadertext.html" onMouseOver="funcPopup(event,'getheadertext')">getHeaderText</a>(0, \<a class="class" onClick="logClass('Horde_Imap_Client_Data_Fetch')" href="../../../../_classes/horde_imap_client_data_fetch.html" onMouseOver="classPopup(event,'horde_imap_client_data_fetch')">Horde_Imap_Client_Data_Fetch</a>::HEADER_PARSE)-&gt;<a class="function" onClick="logFunction('getValue')" href="../../../../_functions/getvalue.html" onMouseOver="funcPopup(event,'getvalue')">getValue</a>('Precedence');
<a name="l821"><span class="linenum"> 821</span></a>          <a class="var it26521" onMouseOver="hilite(26521)" onMouseOut="lolite()" onClick="logVariable('isbulk')" href="../../../../_variables/isbulk.html">$isbulk</a> = <a class="var it26521" onMouseOver="hilite(26521)" onMouseOut="lolite()" onClick="logVariable('isbulk')" href="../../../../_variables/isbulk.html">$isbulk</a> || <a class="phpfunction" onClick="logFunction('strtolower')" href="../../../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="var it21459" onMouseOver="hilite(21459)" onMouseOut="lolite()" onClick="logVariable('precedence')" href="../../../../_variables/precedence.html">$precedence</a>) == 'bulk';
<a name="l822"><span class="linenum"> 822</span></a>  
<a name="l823"><span class="linenum"> 823</span></a>  <span class="comment">        // If the X-Autoreply header is set, and not 'no', then this is an automatic reply.</span>
<a name="l824"><span class="linenum"> 824</span></a>          <a class="var it26522" onMouseOver="hilite(26522)" onMouseOut="lolite()" onClick="logVariable('autoreply')" href="../../../../_variables/autoreply.html">$autoreply</a> = <a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>-&gt;<a class="function" onClick="logFunction('getHeaderText')" href="../../../../_functions/getheadertext.html" onMouseOver="funcPopup(event,'getheadertext')">getHeaderText</a>(0, \<a class="class" onClick="logClass('Horde_Imap_Client_Data_Fetch')" href="../../../../_classes/horde_imap_client_data_fetch.html" onMouseOver="classPopup(event,'horde_imap_client_data_fetch')">Horde_Imap_Client_Data_Fetch</a>::HEADER_PARSE)-&gt;<a class="function" onClick="logFunction('getValue')" href="../../../../_functions/getvalue.html" onMouseOver="funcPopup(event,'getvalue')">getValue</a>('X-Autoreply');
<a name="l825"><span class="linenum"> 825</span></a>          <a class="var it26521" onMouseOver="hilite(26521)" onMouseOut="lolite()" onClick="logVariable('isbulk')" href="../../../../_variables/isbulk.html">$isbulk</a> = <a class="var it26521" onMouseOver="hilite(26521)" onMouseOut="lolite()" onClick="logVariable('isbulk')" href="../../../../_variables/isbulk.html">$isbulk</a> || (<a class="var it26522" onMouseOver="hilite(26522)" onMouseOut="lolite()" onClick="logVariable('autoreply')" href="../../../../_variables/autoreply.html">$autoreply</a> &amp;&amp; <a class="var it26522" onMouseOver="hilite(26522)" onMouseOut="lolite()" onClick="logVariable('autoreply')" href="../../../../_variables/autoreply.html">$autoreply</a> != 'no');
<a name="l826"><span class="linenum"> 826</span></a>  
<a name="l827"><span class="linenum"> 827</span></a>  <span class="comment">        // If the X-Autorespond header is set, and not 'no', then this is an automatic response.</span>
<a name="l828"><span class="linenum"> 828</span></a>          <a class="var it26523" onMouseOver="hilite(26523)" onMouseOut="lolite()" onClick="logVariable('autorespond')" href="../../../../_variables/autorespond.html">$autorespond</a> = <a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>-&gt;<a class="function" onClick="logFunction('getHeaderText')" href="../../../../_functions/getheadertext.html" onMouseOver="funcPopup(event,'getheadertext')">getHeaderText</a>(0, \<a class="class" onClick="logClass('Horde_Imap_Client_Data_Fetch')" href="../../../../_classes/horde_imap_client_data_fetch.html" onMouseOver="classPopup(event,'horde_imap_client_data_fetch')">Horde_Imap_Client_Data_Fetch</a>::HEADER_PARSE)-&gt;<a class="function" onClick="logFunction('getValue')" href="../../../../_functions/getvalue.html" onMouseOver="funcPopup(event,'getvalue')">getValue</a>('X-Autorespond');
<a name="l829"><span class="linenum"> 829</span></a>          <a class="var it26521" onMouseOver="hilite(26521)" onMouseOut="lolite()" onClick="logVariable('isbulk')" href="../../../../_variables/isbulk.html">$isbulk</a> = <a class="var it26521" onMouseOver="hilite(26521)" onMouseOut="lolite()" onClick="logVariable('isbulk')" href="../../../../_variables/isbulk.html">$isbulk</a> || (<a class="var it26523" onMouseOver="hilite(26523)" onMouseOut="lolite()" onClick="logVariable('autorespond')" href="../../../../_variables/autorespond.html">$autorespond</a> &amp;&amp; <a class="var it26523" onMouseOver="hilite(26523)" onMouseOut="lolite()" onClick="logVariable('autorespond')" href="../../../../_variables/autorespond.html">$autorespond</a> != 'no');
<a name="l830"><span class="linenum"> 830</span></a>  
<a name="l831"><span class="linenum"> 831</span></a>  <span class="comment">        // If the Auto-Submitted header is set, and not 'no', then this is a non-human response.</span>
<a name="l832"><span class="linenum"> 832</span></a>          <a class="var it26524" onMouseOver="hilite(26524)" onMouseOut="lolite()" onClick="logVariable('autosubmitted')" href="../../../../_variables/autosubmitted.html">$autosubmitted</a> = <a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>-&gt;<a class="function" onClick="logFunction('getHeaderText')" href="../../../../_functions/getheadertext.html" onMouseOver="funcPopup(event,'getheadertext')">getHeaderText</a>(0, \<a class="class" onClick="logClass('Horde_Imap_Client_Data_Fetch')" href="../../../../_classes/horde_imap_client_data_fetch.html" onMouseOver="classPopup(event,'horde_imap_client_data_fetch')">Horde_Imap_Client_Data_Fetch</a>::HEADER_PARSE)-&gt;<a class="function" onClick="logFunction('getValue')" href="../../../../_functions/getvalue.html" onMouseOver="funcPopup(event,'getvalue')">getValue</a>('Auto-Submitted');
<a name="l833"><span class="linenum"> 833</span></a>          <a class="var it26521" onMouseOver="hilite(26521)" onMouseOut="lolite()" onClick="logVariable('isbulk')" href="../../../../_variables/isbulk.html">$isbulk</a> = <a class="var it26521" onMouseOver="hilite(26521)" onMouseOut="lolite()" onClick="logVariable('isbulk')" href="../../../../_variables/isbulk.html">$isbulk</a> || (<a class="var it26524" onMouseOver="hilite(26524)" onMouseOut="lolite()" onClick="logVariable('autosubmitted')" href="../../../../_variables/autosubmitted.html">$autosubmitted</a> &amp;&amp; <a class="var it26524" onMouseOver="hilite(26524)" onMouseOut="lolite()" onClick="logVariable('autosubmitted')" href="../../../../_variables/autosubmitted.html">$autosubmitted</a> != 'no');
<a name="l834"><span class="linenum"> 834</span></a>  
<a name="l835"><span class="linenum"> 835</span></a>          return <a class="var it26521" onMouseOver="hilite(26521)" onMouseOut="lolite()" onClick="logVariable('isbulk')" href="../../../../_variables/isbulk.html">$isbulk</a>;
<a name="l836"><span class="linenum"> 836</span></a>      }
<a name="l837"><span class="linenum"> 837</span></a>  
<a name="l838"><span class="linenum"> 838</span></a>      <span class="comment">/**</span>
<a name="l839"><span class="linenum"> 839</span></a>  <span class="comment">     * Send the message to the appropriate handler.</span>
<a name="l840"><span class="linenum"> 840</span></a>  <span class="comment">     *</span>
<a name="l841"><span class="linenum"> 841</span></a>  <span class="comment">     * @return bool</span>
<a name="l842"><span class="linenum"> 842</span></a>  <span class="comment">     * @throws \core\message\inbound\processing_failed_exception if anything goes wrong.</span>
<a name="l843"><span class="linenum"> 843</span></a>  <span class="comment">     */</span>
<a name="l844"><span class="linenum"> 844</span></a>      private function <a class="function" onClick="logFunction('send_to_handler')" href="../../../../_functions/send_to_handler.html" onMouseOver="funcPopup(event,'send_to_handler')">send_to_handler</a>() {
<a name="l845"><span class="linenum"> 845</span></a>          try {
<a name="l846"><span class="linenum"> 846</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;--&gt; Passing to Inbound Message handler {<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addressmanager')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/addressmanager.html">addressmanager</a>-&gt;<a class="function" onClick="logFunction('get_handler')" href="../../../../_functions/get_handler.html" onMouseOver="funcPopup(event,'get_handler')">get_handler</a>()-&gt;classname}&quot;);
<a name="l847"><span class="linenum"> 847</span></a>              if (<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addressmanager')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/addressmanager.html">addressmanager</a>-&gt;<a class="function" onClick="logFunction('handle_message')" href="../../../../_functions/handle_message.html" onMouseOver="funcPopup(event,'handle_message')">handle_message</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>)) {
<a name="l848"><span class="linenum"> 848</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('inform_user_of_success')" href="../../../../_functions/inform_user_of_success.html" onMouseOver="funcPopup(event,'inform_user_of_success')">inform_user_of_success</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>, <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a>);
<a name="l849"><span class="linenum"> 849</span></a>  <span class="comment">                // Request that this message be marked for deletion.</span>
<a name="l850"><span class="linenum"> 850</span></a>                  return true;
<a name="l851"><span class="linenum"> 851</span></a>              }
<a name="l852"><span class="linenum"> 852</span></a>  
<a name="l853"><span class="linenum"> 853</span></a>          } catch (\core\message\inbound\processing_failed_exception <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../../../_variables/e.html">$e</a>) {
<a name="l854"><span class="linenum"> 854</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-&gt; The Inbound Message handler threw an exception. Unable to process this message. The user has been informed.&quot;);
<a name="l855"><span class="linenum"> 855</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;--&gt; &quot; . <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>());
<a name="l856"><span class="linenum"> 856</span></a>  <span class="comment">            // Throw the exception again, with additional data.</span>
<a name="l857"><span class="linenum"> 857</span></a>              <a class="var it275" onMouseOver="hilite(275)" onMouseOut="lolite()" onClick="logVariable('error')" href="../../../../_variables/error.html">$error</a> = new \stdClass();
<a name="l858"><span class="linenum"> 858</span></a>              <a class="var it275" onMouseOver="hilite(275)" onMouseOut="lolite()" onClick="logVariable('error')" href="../../../../_variables/error.html">$error</a>-&gt;<a onClick="logVariable('subject')" class="var it43394" onMouseOver="hilite(43394)" onMouseOut="lolite()" href="../../../../_variables/subject.html">subject</a>     = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>-&gt;envelope-&gt;subject;
<a name="l859"><span class="linenum"> 859</span></a>              <a class="var it275" onMouseOver="hilite(275)" onMouseOut="lolite()" onClick="logVariable('error')" href="../../../../_variables/error.html">$error</a>-&gt;<a onClick="logVariable('message')" class="var it43394" onMouseOver="hilite(43394)" onMouseOut="lolite()" href="../../../../_variables/message.html">message</a>     = <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>();
<a name="l860"><span class="linenum"> 860</span></a>              throw new \core\message\inbound\processing_failed_exception('messageprocessingfailed', 'tool_messageinbound', <a class="var it275" onMouseOver="hilite(275)" onMouseOut="lolite()" onClick="logVariable('error')" href="../../../../_variables/error.html">$error</a>);
<a name="l861"><span class="linenum"> 861</span></a>  
<a name="l862"><span class="linenum"> 862</span></a>          } catch (\Exception <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../../../_variables/e.html">$e</a>) {
<a name="l863"><span class="linenum"> 863</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-&gt; The Inbound Message handler threw an exception. Unable to process this message. User informed.&quot;);
<a name="l864"><span class="linenum"> 864</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;--&gt; &quot; . <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>());
<a name="l865"><span class="linenum"> 865</span></a>  <span class="comment">            // An unknown error occurred. Still inform the user but, this time do not include the specific</span>
<a name="l866"><span class="linenum"> 866</span></a>  <span class="comment">            // message information.</span>
<a name="l867"><span class="linenum"> 867</span></a>              <a class="var it275" onMouseOver="hilite(275)" onMouseOut="lolite()" onClick="logVariable('error')" href="../../../../_variables/error.html">$error</a> = new \stdClass();
<a name="l868"><span class="linenum"> 868</span></a>              <a class="var it275" onMouseOver="hilite(275)" onMouseOut="lolite()" onClick="logVariable('error')" href="../../../../_variables/error.html">$error</a>-&gt;<a onClick="logVariable('subject')" class="var it43394" onMouseOver="hilite(43394)" onMouseOut="lolite()" href="../../../../_variables/subject.html">subject</a>     = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>-&gt;envelope-&gt;subject;
<a name="l869"><span class="linenum"> 869</span></a>              throw new \core\message\inbound\processing_failed_exception('messageprocessingfailedunknown',
<a name="l870"><span class="linenum"> 870</span></a>                      'tool_messageinbound', <a class="var it275" onMouseOver="hilite(275)" onMouseOut="lolite()" onClick="logVariable('error')" href="../../../../_variables/error.html">$error</a>);
<a name="l871"><span class="linenum"> 871</span></a>  
<a name="l872"><span class="linenum"> 872</span></a>          }
<a name="l873"><span class="linenum"> 873</span></a>  
<a name="l874"><span class="linenum"> 874</span></a>  <span class="comment">        // Something went wrong and the message was not handled well in the Inbound Message handler.</span>
<a name="l875"><span class="linenum"> 875</span></a>          <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-&gt; The Inbound Message handler reported an error. The message may not have been processed.&quot;);
<a name="l876"><span class="linenum"> 876</span></a>  
<a name="l877"><span class="linenum"> 877</span></a>  <span class="comment">        // It is the responsiblity of the handler to throw an appropriate exception if the message was not processed.</span>
<a name="l878"><span class="linenum"> 878</span></a>  <span class="comment">        // Do not inform the user at this point.</span>
<a name="l879"><span class="linenum"> 879</span></a>          return false;
<a name="l880"><span class="linenum"> 880</span></a>      }
<a name="l881"><span class="linenum"> 881</span></a>  
<a name="l882"><span class="linenum"> 882</span></a>      <span class="comment">/**</span>
<a name="l883"><span class="linenum"> 883</span></a>  <span class="comment">     * Handle failure of sender verification.</span>
<a name="l884"><span class="linenum"> 884</span></a>  <span class="comment">     *</span>
<a name="l885"><span class="linenum"> 885</span></a>  <span class="comment">     * This will send a notification to the user identified in the Inbound Message address informing them that a message has been</span>
<a name="l886"><span class="linenum"> 886</span></a>  <span class="comment">     * stored. The message includes a verification link and reply-to address which is handled by the</span>
<a name="l887"><span class="linenum"> 887</span></a>  <span class="comment">     * invalid_recipient_handler.</span>
<a name="l888"><span class="linenum"> 888</span></a>  <span class="comment">     *</span>
<a name="l889"><span class="linenum"> 889</span></a>  <span class="comment">     * @param \Horde_Imap_Client_Ids $messageids</span>
<a name="l890"><span class="linenum"> 890</span></a>  <span class="comment">     * @param string $recipient The message recipient</span>
<a name="l891"><span class="linenum"> 891</span></a>  <span class="comment">     * @return bool</span>
<a name="l892"><span class="linenum"> 892</span></a>  <span class="comment">     */</span>
<a name="l893"><span class="linenum"> 893</span></a>      private function <a class="function" onClick="logFunction('handle_verification_failure')" href="../../../../_functions/handle_verification_failure.html" onMouseOver="funcPopup(event,'handle_verification_failure')">handle_verification_failure</a>(
<a name="l894"><span class="linenum"> 894</span></a>              \Horde_Imap_Client_Ids <a class="var it16340" onMouseOver="hilite(16340)" onMouseOut="lolite()" onClick="logVariable('messageids')" href="../../../../_variables/messageids.html">$messageids</a>,
<a name="l895"><span class="linenum"> 895</span></a>              <a class="var it2752" onMouseOver="hilite(2752)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../../_variables/recipient.html">$recipient</a>) {
<a name="l896"><span class="linenum"> 896</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>;
<a name="l897"><span class="linenum"> 897</span></a>  
<a name="l898"><span class="linenum"> 898</span></a>          if (!<a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>-&gt;messageid) {
<a name="l899"><span class="linenum"> 899</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;---&gt; Warning: Unable to determine the Message-ID of the message.&quot;);
<a name="l900"><span class="linenum"> 900</span></a>              return false;
<a name="l901"><span class="linenum"> 901</span></a>          }
<a name="l902"><span class="linenum"> 902</span></a>  
<a name="l903"><span class="linenum"> 903</span></a>  <span class="comment">        // Move the message into a new mailbox.</span>
<a name="l904"><span class="linenum"> 904</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="phpfunction" onClick="logFunction('copy')" href="../../../../_functions/copy.html" onMouseOver="phpfuncPopup(event,'copy')">copy</a>(self::MAILBOX, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_confirmation_folder')" href="../../../../_functions/get_confirmation_folder.html" onMouseOver="funcPopup(event,'get_confirmation_folder')">get_confirmation_folder</a>(), array(
<a name="l905"><span class="linenum"> 905</span></a>                  'create'    =&gt; true,
<a name="l906"><span class="linenum"> 906</span></a>                  'ids'       =&gt; <a class="var it16340" onMouseOver="hilite(16340)" onMouseOut="lolite()" onClick="logVariable('messageids')" href="../../../../_variables/messageids.html">$messageids</a>,
<a name="l907"><span class="linenum"> 907</span></a>                  'move'      =&gt; true,
<a name="l908"><span class="linenum"> 908</span></a>              ));
<a name="l909"><span class="linenum"> 909</span></a>  
<a name="l910"><span class="linenum"> 910</span></a>  <span class="comment">        // Store the data from the failed message in the associated table.</span>
<a name="l911"><span class="linenum"> 911</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a> = new \stdClass();
<a name="l912"><span class="linenum"> 912</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('messageid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/messageid.html">messageid</a> = <a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>;
<a name="l913"><span class="linenum"> 913</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('userid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/userid.html">userid</a> = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>;
<a name="l914"><span class="linenum"> 914</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('address')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/address.html">address</a> = <a class="var it2752" onMouseOver="hilite(2752)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../../_variables/recipient.html">$recipient</a>;
<a name="l915"><span class="linenum"> 915</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('timecreated')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/timecreated.html">timecreated</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l916"><span class="linenum"> 916</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('messageinbound_messagelist', <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>);
<a name="l917"><span class="linenum"> 917</span></a>  
<a name="l918"><span class="linenum"> 918</span></a>  <span class="comment">        // Setup the Inbound Message generator for the invalid recipient handler.</span>
<a name="l919"><span class="linenum"> 919</span></a>          <a class="var it26501" onMouseOver="hilite(26501)" onMouseOut="lolite()" onClick="logVariable('addressmanager')" href="../../../../_variables/addressmanager.html">$addressmanager</a> = new \core\message\inbound\address_manager();
<a name="l920"><span class="linenum"> 920</span></a>          <a class="var it26501" onMouseOver="hilite(26501)" onMouseOut="lolite()" onClick="logVariable('addressmanager')" href="../../../../_variables/addressmanager.html">$addressmanager</a>-&gt;<a class="function" onClick="logFunction('set_handler')" href="../../../../_functions/set_handler.html" onMouseOver="funcPopup(event,'set_handler')">set_handler</a>('\tool_messageinbound\message\inbound\invalid_recipient_handler');
<a name="l921"><span class="linenum"> 921</span></a>          <a class="var it26501" onMouseOver="hilite(26501)" onMouseOut="lolite()" onClick="logVariable('addressmanager')" href="../../../../_variables/addressmanager.html">$addressmanager</a>-&gt;<a class="function" onClick="logFunction('set_data')" href="../../../../_functions/set_data.html" onMouseOver="funcPopup(event,'set_data')">set_data</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>);
<a name="l922"><span class="linenum"> 922</span></a>  
<a name="l923"><span class="linenum"> 923</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a> = new \stdClass();
<a name="l924"><span class="linenum"> 924</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('component')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../../../_variables/component.html">component</a>           = 'tool_messageinbound';
<a name="l925"><span class="linenum"> 925</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('name')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../../../_variables/name.html">name</a>                = 'invalidrecipienthandler';
<a name="l926"><span class="linenum"> 926</span></a>  
<a name="l927"><span class="linenum"> 927</span></a>          <a class="var it6660" onMouseOver="hilite(6660)" onMouseOut="lolite()" onClick="logVariable('userfrom')" href="../../../../_variables/userfrom.html">$userfrom</a> = clone <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>;
<a name="l928"><span class="linenum"> 928</span></a>          <a class="var it6660" onMouseOver="hilite(6660)" onMouseOut="lolite()" onClick="logVariable('userfrom')" href="../../../../_variables/userfrom.html">$userfrom</a>-&gt;<a onClick="logVariable('customheaders')" class="var it43355" onMouseOver="hilite(43355)" onMouseOut="lolite()" href="../../../../_variables/customheaders.html">customheaders</a> = array();
<a name="l929"><span class="linenum"> 929</span></a>  <span class="comment">        // Adding the In-Reply-To header ensures that it is seen as a reply.</span>
<a name="l930"><span class="linenum"> 930</span></a>          <a class="var it6660" onMouseOver="hilite(6660)" onMouseOut="lolite()" onClick="logVariable('userfrom')" href="../../../../_variables/userfrom.html">$userfrom</a>-&gt;<a onClick="logVariable('customheaders')" class="var it43355" onMouseOver="hilite(43355)" onMouseOut="lolite()" href="../../../../_variables/customheaders.html">customheaders</a>[] = 'In-Reply-To: ' . <a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>;
<a name="l931"><span class="linenum"> 931</span></a>  
<a name="l932"><span class="linenum"> 932</span></a>  <span class="comment">        // The message will be sent from the intended user.</span>
<a name="l933"><span class="linenum"> 933</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('userfrom')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../../../_variables/userfrom.html">userfrom</a>            = \<a class="class" onClick="logClass('core_user')" href="../../../../_classes/core_user.html" onMouseOver="classPopup(event,'core_user')">core_user</a>::<a class="function" onClick="logFunction('get_support_user')" href="../../../../_functions/get_support_user.html" onMouseOver="funcPopup(event,'get_support_user')">get_support_user</a>();
<a name="l934"><span class="linenum"> 934</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('userto')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../../../_variables/userto.html">userto</a>              = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>;
<a name="l935"><span class="linenum"> 935</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('subject')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../../../_variables/subject.html">subject</a>             = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_reply_subject')" href="../../../../_functions/get_reply_subject.html" onMouseOver="funcPopup(event,'get_reply_subject')">get_reply_subject</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>-&gt;envelope-&gt;subject);
<a name="l936"><span class="linenum"> 936</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessage')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../../../_variables/fullmessage.html">fullmessage</a>         = <a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('invalidrecipientdescription', 'tool_messageinbound', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>);
<a name="l937"><span class="linenum"> 937</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessageformat')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../../../_variables/fullmessageformat.html">fullmessageformat</a>   = <a class="constant" onClick="logConstant('FORMAT_PLAIN')" href="../../../../_constants/FORMAT_PLAIN.html" onMouseOver="constPopup(event,'FORMAT_PLAIN')">FORMAT_PLAIN</a>;
<a name="l938"><span class="linenum"> 938</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessagehtml')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../../../_variables/fullmessagehtml.html">fullmessagehtml</a>     = <a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('invalidrecipientdescriptionhtml', 'tool_messageinbound', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>);
<a name="l939"><span class="linenum"> 939</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('smallmessage')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../../../_variables/smallmessage.html">smallmessage</a>        = <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessage')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../../../_variables/fullmessage.html">fullmessage</a>;
<a name="l940"><span class="linenum"> 940</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('notification')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../../../_variables/notification.html">notification</a>        = 1;
<a name="l941"><span class="linenum"> 941</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('replyto')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../../../_variables/replyto.html">replyto</a>             = <a class="var it26501" onMouseOver="hilite(26501)" onMouseOut="lolite()" onClick="logVariable('addressmanager')" href="../../../../_variables/addressmanager.html">$addressmanager</a>-&gt;<a class="function" onClick="logFunction('generate')" href="../../../../_functions/generate.html" onMouseOver="funcPopup(event,'generate')">generate</a>(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>);
<a name="l942"><span class="linenum"> 942</span></a>  
<a name="l943"><span class="linenum"> 943</span></a>          <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;--&gt; Sending a message to the user to report an verification failure.&quot;);
<a name="l944"><span class="linenum"> 944</span></a>          if (!<a class="function" onClick="logFunction('message_send')" href="../../../../_functions/message_send.html" onMouseOver="funcPopup(event,'message_send')">message_send</a>(<a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>)) {
<a name="l945"><span class="linenum"> 945</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;---&gt; Warning: Message could not be sent.&quot;);
<a name="l946"><span class="linenum"> 946</span></a>              return false;
<a name="l947"><span class="linenum"> 947</span></a>          }
<a name="l948"><span class="linenum"> 948</span></a>  
<a name="l949"><span class="linenum"> 949</span></a>          return true;
<a name="l950"><span class="linenum"> 950</span></a>      }
<a name="l951"><span class="linenum"> 951</span></a>  
<a name="l952"><span class="linenum"> 952</span></a>      <span class="comment">/**</span>
<a name="l953"><span class="linenum"> 953</span></a>  <span class="comment">     * Inform the identified sender of a processing error.</span>
<a name="l954"><span class="linenum"> 954</span></a>  <span class="comment">     *</span>
<a name="l955"><span class="linenum"> 955</span></a>  <span class="comment">     * @param string $error The error message</span>
<a name="l956"><span class="linenum"> 956</span></a>  <span class="comment">     */</span>
<a name="l957"><span class="linenum"> 957</span></a>      private function <a class="function" onClick="logFunction('inform_user_of_error')" href="../../../../_functions/inform_user_of_error.html" onMouseOver="funcPopup(event,'inform_user_of_error')">inform_user_of_error</a>(<a class="var it275" onMouseOver="hilite(275)" onMouseOut="lolite()" onClick="logVariable('error')" href="../../../../_variables/error.html">$error</a>) {
<a name="l958"><span class="linenum"> 958</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>;
<a name="l959"><span class="linenum"> 959</span></a>  
<a name="l960"><span class="linenum"> 960</span></a>  <span class="comment">        // The message will be sent from the intended user.</span>
<a name="l961"><span class="linenum"> 961</span></a>          <a class="var it6660" onMouseOver="hilite(6660)" onMouseOut="lolite()" onClick="logVariable('userfrom')" href="../../../../_variables/userfrom.html">$userfrom</a> = clone <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>;
<a name="l962"><span class="linenum"> 962</span></a>          <a class="var it6660" onMouseOver="hilite(6660)" onMouseOut="lolite()" onClick="logVariable('userfrom')" href="../../../../_variables/userfrom.html">$userfrom</a>-&gt;<a onClick="logVariable('customheaders')" class="var it43355" onMouseOver="hilite(43355)" onMouseOut="lolite()" href="../../../../_variables/customheaders.html">customheaders</a> = array();
<a name="l963"><span class="linenum"> 963</span></a>  
<a name="l964"><span class="linenum"> 964</span></a>          if (<a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>-&gt;messageid) {
<a name="l965"><span class="linenum"> 965</span></a>  <span class="comment">            // Adding the In-Reply-To header ensures that it is seen as a reply and threading is maintained.</span>
<a name="l966"><span class="linenum"> 966</span></a>              <a class="var it6660" onMouseOver="hilite(6660)" onMouseOut="lolite()" onClick="logVariable('userfrom')" href="../../../../_variables/userfrom.html">$userfrom</a>-&gt;<a onClick="logVariable('customheaders')" class="var it43355" onMouseOver="hilite(43355)" onMouseOut="lolite()" href="../../../../_variables/customheaders.html">customheaders</a>[] = 'In-Reply-To: ' . <a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>;
<a name="l967"><span class="linenum"> 967</span></a>          }
<a name="l968"><span class="linenum"> 968</span></a>  
<a name="l969"><span class="linenum"> 969</span></a>          <a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a> = new \stdClass();
<a name="l970"><span class="linenum"> 970</span></a>          <a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>-&gt;<a onClick="logVariable('subject')" class="var it44448" onMouseOver="hilite(44448)" onMouseOut="lolite()" href="../../../../_variables/subject.html">subject</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>-&gt;envelope-&gt;subject;
<a name="l971"><span class="linenum"> 971</span></a>          <a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>-&gt;<a onClick="logVariable('error')" class="var it44448" onMouseOver="hilite(44448)" onMouseOut="lolite()" href="../../../../_variables/error.html">error</a> = <a class="var it275" onMouseOver="hilite(275)" onMouseOut="lolite()" onClick="logVariable('error')" href="../../../../_variables/error.html">$error</a>;
<a name="l972"><span class="linenum"> 972</span></a>  
<a name="l973"><span class="linenum"> 973</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a> = new \stdClass();
<a name="l974"><span class="linenum"> 974</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('component')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../../../_variables/component.html">component</a>           = 'tool_messageinbound';
<a name="l975"><span class="linenum"> 975</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('name')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../../../_variables/name.html">name</a>                = 'messageprocessingerror';
<a name="l976"><span class="linenum"> 976</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('userfrom')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../../../_variables/userfrom.html">userfrom</a>            = <a class="var it6660" onMouseOver="hilite(6660)" onMouseOut="lolite()" onClick="logVariable('userfrom')" href="../../../../_variables/userfrom.html">$userfrom</a>;
<a name="l977"><span class="linenum"> 977</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('userto')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../../../_variables/userto.html">userto</a>              = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>;
<a name="l978"><span class="linenum"> 978</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('subject')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../../../_variables/subject.html">subject</a>             = self::<a class="function" onClick="logFunction('get_reply_subject')" href="../../../../_functions/get_reply_subject.html" onMouseOver="funcPopup(event,'get_reply_subject')">get_reply_subject</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>-&gt;envelope-&gt;subject);
<a name="l979"><span class="linenum"> 979</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessage')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../../../_variables/fullmessage.html">fullmessage</a>         = <a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('messageprocessingerror', 'tool_messageinbound', <a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>);
<a name="l980"><span class="linenum"> 980</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessageformat')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../../../_variables/fullmessageformat.html">fullmessageformat</a>   = <a class="constant" onClick="logConstant('FORMAT_PLAIN')" href="../../../../_constants/FORMAT_PLAIN.html" onMouseOver="constPopup(event,'FORMAT_PLAIN')">FORMAT_PLAIN</a>;
<a name="l981"><span class="linenum"> 981</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessagehtml')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../../../_variables/fullmessagehtml.html">fullmessagehtml</a>     = <a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('messageprocessingerrorhtml', 'tool_messageinbound', <a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>);
<a name="l982"><span class="linenum"> 982</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('smallmessage')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../../../_variables/smallmessage.html">smallmessage</a>        = <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessage')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../../../_variables/fullmessage.html">fullmessage</a>;
<a name="l983"><span class="linenum"> 983</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('notification')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../../../_variables/notification.html">notification</a>        = 1;
<a name="l984"><span class="linenum"> 984</span></a>  
<a name="l985"><span class="linenum"> 985</span></a>          if (<a class="function" onClick="logFunction('message_send')" href="../../../../_functions/message_send.html" onMouseOver="funcPopup(event,'message_send')">message_send</a>(<a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>)) {
<a name="l986"><span class="linenum"> 986</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;---&gt; Notification sent to {<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('email')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../../../_variables/email.html">email</a>}.&quot;);
<a name="l987"><span class="linenum"> 987</span></a>          } else {
<a name="l988"><span class="linenum"> 988</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;---&gt; Unable to send notification.&quot;);
<a name="l989"><span class="linenum"> 989</span></a>          }
<a name="l990"><span class="linenum"> 990</span></a>      }
<a name="l991"><span class="linenum"> 991</span></a>  
<a name="l992"><span class="linenum"> 992</span></a>      <span class="comment">/**</span>
<a name="l993"><span class="linenum"> 993</span></a>  <span class="comment">     * Inform the identified sender that message processing was successful.</span>
<a name="l994"><span class="linenum"> 994</span></a>  <span class="comment">     *</span>
<a name="l995"><span class="linenum"> 995</span></a>  <span class="comment">     * @param \stdClass $messagedata The data for the current message being processed.</span>
<a name="l996"><span class="linenum"> 996</span></a>  <span class="comment">     * @param mixed $handlerresult The result returned by the handler.</span>
<a name="l997"><span class="linenum"> 997</span></a>  <span class="comment">     * @return bool</span>
<a name="l998"><span class="linenum"> 998</span></a>  <span class="comment">     */</span>
<a name="l999"><span class="linenum"> 999</span></a>      private function <a class="function" onClick="logFunction('inform_user_of_success')" href="../../../../_functions/inform_user_of_success.html" onMouseOver="funcPopup(event,'inform_user_of_success')">inform_user_of_success</a>(\stdClass <a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>, <a class="var it7454" onMouseOver="hilite(7454)" onMouseOut="lolite()" onClick="logVariable('handlerresult')" href="../../../../_variables/handlerresult.html">$handlerresult</a>) {
<a name="l1000"><span class="linenum">1000</span></a>          global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>;
<a name="l1001"><span class="linenum">1001</span></a>  
<a name="l1002"><span class="linenum">1002</span></a>  <span class="comment">        // Check whether the handler has a success notification.</span>
<a name="l1003"><span class="linenum">1003</span></a>          <a class="var it2691" onMouseOver="hilite(2691)" onMouseOut="lolite()" onClick="logVariable('handler')" href="../../../../_variables/handler.html">$handler</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addressmanager')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/addressmanager.html">addressmanager</a>-&gt;<a class="function" onClick="logFunction('get_handler')" href="../../../../_functions/get_handler.html" onMouseOver="funcPopup(event,'get_handler')">get_handler</a>();
<a name="l1004"><span class="linenum">1004</span></a>          <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a> = <a class="var it2691" onMouseOver="hilite(2691)" onMouseOut="lolite()" onClick="logVariable('handler')" href="../../../../_variables/handler.html">$handler</a>-&gt;<a class="function" onClick="logFunction('get_success_message')" href="../../../../_functions/get_success_message.html" onMouseOver="funcPopup(event,'get_success_message')">get_success_message</a>(<a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>, <a class="var it7454" onMouseOver="hilite(7454)" onMouseOut="lolite()" onClick="logVariable('handlerresult')" href="../../../../_variables/handlerresult.html">$handlerresult</a>);
<a name="l1005"><span class="linenum">1005</span></a>  
<a name="l1006"><span class="linenum">1006</span></a>          if (!<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a>) {
<a name="l1007"><span class="linenum">1007</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;---&gt; Handler has not defined a success notification e-mail.&quot;);
<a name="l1008"><span class="linenum">1008</span></a>              return false;
<a name="l1009"><span class="linenum">1009</span></a>          }
<a name="l1010"><span class="linenum">1010</span></a>  
<a name="l1011"><span class="linenum">1011</span></a>  <span class="comment">        // Wrap the message in the notification wrapper.</span>
<a name="l1012"><span class="linenum">1012</span></a>          <a class="var it26525" onMouseOver="hilite(26525)" onMouseOut="lolite()" onClick="logVariable('messageparams')" href="../../../../_variables/messageparams.html">$messageparams</a> = new \stdClass();
<a name="l1013"><span class="linenum">1013</span></a>          <a class="var it26525" onMouseOver="hilite(26525)" onMouseOut="lolite()" onClick="logVariable('messageparams')" href="../../../../_variables/messageparams.html">$messageparams</a>-&gt;<a onClick="logVariable('html')" class="var it45546" onMouseOver="hilite(45546)" onMouseOut="lolite()" href="../../../../_variables/html.html">html</a>    = <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a>-&gt;<a onClick="logVariable('html')" class="var it42910" onMouseOver="hilite(42910)" onMouseOut="lolite()" href="../../../../_variables/html.html">html</a>;
<a name="l1014"><span class="linenum">1014</span></a>          <a class="var it26525" onMouseOver="hilite(26525)" onMouseOut="lolite()" onClick="logVariable('messageparams')" href="../../../../_variables/messageparams.html">$messageparams</a>-&gt;<a onClick="logVariable('plain')" class="var it45546" onMouseOver="hilite(45546)" onMouseOut="lolite()" href="../../../../_variables/plain.html">plain</a>   = <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a>-&gt;<a onClick="logVariable('plain')" class="var it42910" onMouseOver="hilite(42910)" onMouseOut="lolite()" href="../../../../_variables/plain.html">plain</a>;
<a name="l1015"><span class="linenum">1015</span></a>          <a class="var it15644" onMouseOver="hilite(15644)" onMouseOut="lolite()" onClick="logVariable('messagepreferencesurl')" href="../../../../_variables/messagepreferencesurl.html">$messagepreferencesurl</a> = new \moodle_url("<a class="filename" href="../../../../message/edit.php.html">/message/edit.php</a>", array('id' =&gt; <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>));
<a name="l1016"><span class="linenum">1016</span></a>          <a class="var it26525" onMouseOver="hilite(26525)" onMouseOut="lolite()" onClick="logVariable('messageparams')" href="../../../../_variables/messageparams.html">$messageparams</a>-&gt;<a onClick="logVariable('messagepreferencesurl')" class="var it45546" onMouseOver="hilite(45546)" onMouseOut="lolite()" href="../../../../_variables/messagepreferencesurl.html">messagepreferencesurl</a> = <a class="var it15644" onMouseOver="hilite(15644)" onMouseOut="lolite()" onClick="logVariable('messagepreferencesurl')" href="../../../../_variables/messagepreferencesurl.html">$messagepreferencesurl</a>-&gt;<a class="function" onClick="logFunction('out')" href="../../../../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>();
<a name="l1017"><span class="linenum">1017</span></a>          <a class="var it26526" onMouseOver="hilite(26526)" onMouseOut="lolite()" onClick="logVariable('htmlmessage')" href="../../../../_variables/htmlmessage.html">$htmlmessage</a> = <a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('messageprocessingsuccesshtml', 'tool_messageinbound', <a class="var it26525" onMouseOver="hilite(26525)" onMouseOut="lolite()" onClick="logVariable('messageparams')" href="../../../../_variables/messageparams.html">$messageparams</a>);
<a name="l1018"><span class="linenum">1018</span></a>          <a class="var it26527" onMouseOver="hilite(26527)" onMouseOut="lolite()" onClick="logVariable('plainmessage')" href="../../../../_variables/plainmessage.html">$plainmessage</a> = <a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('messageprocessingsuccess', 'tool_messageinbound', <a class="var it26525" onMouseOver="hilite(26525)" onMouseOut="lolite()" onClick="logVariable('messageparams')" href="../../../../_variables/messageparams.html">$messageparams</a>);
<a name="l1019"><span class="linenum">1019</span></a>  
<a name="l1020"><span class="linenum">1020</span></a>  <span class="comment">        // The message will be sent from the intended user.</span>
<a name="l1021"><span class="linenum">1021</span></a>          <a class="var it6660" onMouseOver="hilite(6660)" onMouseOut="lolite()" onClick="logVariable('userfrom')" href="../../../../_variables/userfrom.html">$userfrom</a> = clone <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>;
<a name="l1022"><span class="linenum">1022</span></a>          <a class="var it6660" onMouseOver="hilite(6660)" onMouseOut="lolite()" onClick="logVariable('userfrom')" href="../../../../_variables/userfrom.html">$userfrom</a>-&gt;<a onClick="logVariable('customheaders')" class="var it43355" onMouseOver="hilite(43355)" onMouseOut="lolite()" href="../../../../_variables/customheaders.html">customheaders</a> = array();
<a name="l1023"><span class="linenum">1023</span></a>  
<a name="l1024"><span class="linenum">1024</span></a>          if (<a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>-&gt;messageid) {
<a name="l1025"><span class="linenum">1025</span></a>  <span class="comment">            // Adding the In-Reply-To header ensures that it is seen as a reply and threading is maintained.</span>
<a name="l1026"><span class="linenum">1026</span></a>              <a class="var it6660" onMouseOver="hilite(6660)" onMouseOut="lolite()" onClick="logVariable('userfrom')" href="../../../../_variables/userfrom.html">$userfrom</a>-&gt;<a onClick="logVariable('customheaders')" class="var it43355" onMouseOver="hilite(43355)" onMouseOut="lolite()" href="../../../../_variables/customheaders.html">customheaders</a>[] = 'In-Reply-To: ' . <a class="var it5664" onMouseOver="hilite(5664)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>;
<a name="l1027"><span class="linenum">1027</span></a>          }
<a name="l1028"><span class="linenum">1028</span></a>  
<a name="l1029"><span class="linenum">1029</span></a>          <a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a> = new \stdClass();
<a name="l1030"><span class="linenum">1030</span></a>          <a class="var it7438" onMouseOver="hilite(7438)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>-&gt;<a onClick="logVariable('subject')" class="var it44448" onMouseOver="hilite(44448)" onMouseOut="lolite()" href="../../../../_variables/subject.html">subject</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>-&gt;envelope-&gt;subject;
<a name="l1031"><span class="linenum">1031</span></a>  
<a name="l1032"><span class="linenum">1032</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a> = new \stdClass();
<a name="l1033"><span class="linenum">1033</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('component')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../../../_variables/component.html">component</a>           = 'tool_messageinbound';
<a name="l1034"><span class="linenum">1034</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('name')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../../../_variables/name.html">name</a>                = 'messageprocessingsuccess';
<a name="l1035"><span class="linenum">1035</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('userfrom')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../../../_variables/userfrom.html">userfrom</a>            = <a class="var it6660" onMouseOver="hilite(6660)" onMouseOut="lolite()" onClick="logVariable('userfrom')" href="../../../../_variables/userfrom.html">$userfrom</a>;
<a name="l1036"><span class="linenum">1036</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('userto')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../../../_variables/userto.html">userto</a>              = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>;
<a name="l1037"><span class="linenum">1037</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('subject')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../../../_variables/subject.html">subject</a>             = self::<a class="function" onClick="logFunction('get_reply_subject')" href="../../../../_functions/get_reply_subject.html" onMouseOver="funcPopup(event,'get_reply_subject')">get_reply_subject</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>-&gt;envelope-&gt;subject);
<a name="l1038"><span class="linenum">1038</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessage')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../../../_variables/fullmessage.html">fullmessage</a>         = <a class="var it26527" onMouseOver="hilite(26527)" onMouseOut="lolite()" onClick="logVariable('plainmessage')" href="../../../../_variables/plainmessage.html">$plainmessage</a>;
<a name="l1039"><span class="linenum">1039</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessageformat')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../../../_variables/fullmessageformat.html">fullmessageformat</a>   = <a class="constant" onClick="logConstant('FORMAT_PLAIN')" href="../../../../_constants/FORMAT_PLAIN.html" onMouseOver="constPopup(event,'FORMAT_PLAIN')">FORMAT_PLAIN</a>;
<a name="l1040"><span class="linenum">1040</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessagehtml')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../../../_variables/fullmessagehtml.html">fullmessagehtml</a>     = <a class="var it26526" onMouseOver="hilite(26526)" onMouseOut="lolite()" onClick="logVariable('htmlmessage')" href="../../../../_variables/htmlmessage.html">$htmlmessage</a>;
<a name="l1041"><span class="linenum">1041</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('smallmessage')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../../../_variables/smallmessage.html">smallmessage</a>        = <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessage')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../../../_variables/fullmessage.html">fullmessage</a>;
<a name="l1042"><span class="linenum">1042</span></a>          <a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('notification')" class="var it42966" onMouseOver="hilite(42966)" onMouseOut="lolite()" href="../../../../_variables/notification.html">notification</a>        = 1;
<a name="l1043"><span class="linenum">1043</span></a>  
<a name="l1044"><span class="linenum">1044</span></a>          if (<a class="function" onClick="logFunction('message_send')" href="../../../../_functions/message_send.html" onMouseOver="funcPopup(event,'message_send')">message_send</a>(<a class="var it841" onMouseOver="hilite(841)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>)) {
<a name="l1045"><span class="linenum">1045</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;---&gt; Success notification sent to {<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('email')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../../../_variables/email.html">email</a>}.&quot;);
<a name="l1046"><span class="linenum">1046</span></a>          } else {
<a name="l1047"><span class="linenum">1047</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;---&gt; Unable to send success notification.&quot;);
<a name="l1048"><span class="linenum">1048</span></a>          }
<a name="l1049"><span class="linenum">1049</span></a>          return true;
<a name="l1050"><span class="linenum">1050</span></a>      }
<a name="l1051"><span class="linenum">1051</span></a>  
<a name="l1052"><span class="linenum">1052</span></a>      <span class="comment">/**</span>
<a name="l1053"><span class="linenum">1053</span></a>  <span class="comment">     * Return a formatted subject line for replies.</span>
<a name="l1054"><span class="linenum">1054</span></a>  <span class="comment">     *</span>
<a name="l1055"><span class="linenum">1055</span></a>  <span class="comment">     * @param string $subject The subject string</span>
<a name="l1056"><span class="linenum">1056</span></a>  <span class="comment">     * @return string The formatted reply subject</span>
<a name="l1057"><span class="linenum">1057</span></a>  <span class="comment">     */</span>
<a name="l1058"><span class="linenum">1058</span></a>      private function <a class="function" onClick="logFunction('get_reply_subject')" href="../../../../_functions/get_reply_subject.html" onMouseOver="funcPopup(event,'get_reply_subject')">get_reply_subject</a>(<a class="var it1792" onMouseOver="hilite(1792)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../../_variables/subject.html">$subject</a>) {
<a name="l1059"><span class="linenum">1059</span></a>          <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../../_variables/prefix.html">$prefix</a> = <a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('replysubjectprefix', 'tool_messageinbound');
<a name="l1060"><span class="linenum">1060</span></a>          if (!(<a class="phpfunction" onClick="logFunction('substr')" href="../../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it1792" onMouseOver="hilite(1792)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../../_variables/subject.html">$subject</a>, 0, <a class="function" onClick="logFunction('strlen')" href="../../../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../../_variables/prefix.html">$prefix</a>)) == <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../../_variables/prefix.html">$prefix</a>)) {
<a name="l1061"><span class="linenum">1061</span></a>              <a class="var it1792" onMouseOver="hilite(1792)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../../_variables/subject.html">$subject</a> = <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../../_variables/prefix.html">$prefix</a> . ' ' . <a class="var it1792" onMouseOver="hilite(1792)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../../_variables/subject.html">$subject</a>;
<a name="l1062"><span class="linenum">1062</span></a>          }
<a name="l1063"><span class="linenum">1063</span></a>  
<a name="l1064"><span class="linenum">1064</span></a>          return <a class="var it1792" onMouseOver="hilite(1792)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../../_variables/subject.html">$subject</a>;
<a name="l1065"><span class="linenum">1065</span></a>      }
<a name="l1066"><span class="linenum">1066</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'inform_user_of_error': ['inform_user_of_error', 'Inform the identified sender of a processing error. ', [['admin/tool/messageinbound/classes','manager.php',952]], 3],
'getnamespace': ['getnamespace', 'Get namespace info for a full mailbox path. ', [['lib/horde/framework/Horde/Imap/Client/Namespace','List.php',46],['lib/google/src/Google/Service','Datastore.php',869]], 1],
'intervalsearch': ['intervalsearch', 'Search for messages within a given interval. Only one interval of each type can be specified per search query. If the IMAP server supports the WITHIN extension (RFC 5032), it will be used.  Otherwise, the search query will be dynamically created using IMAP4rev1 search terms. ', [['lib/horde/framework/Horde/Imap/Client/Search','Query.php',591]], 1],
'contenttypemap': ['contenttypemap', 'Returns a mapping of all MIME IDs to their content-types. ', [['lib/horde/framework/Horde/Mime','Part.php',1619]], 4],
'getflags': ['getflags', 'Get IMAP flags. ', [['lib/horde/framework/Horde/Imap/Client/Data','Fetch.php',292]], 2],
'close': ['close', 'Close archive, write changes to disk. ', [['lib/filestorage','zip_archive.php',183],['lib/dml','mssql_native_moodle_recordset.php',87],['auth/fc','fcFPP.php',78],['lib/dml','mysqli_native_moodle_recordset.php',86],['lib/spout/src/Spout/Reader','ReaderInterface.php',30],['lib/spout/src/Spout/Writer/ODS/Internal','Workbook.php',81],['lib/dml','pdo_moodle_recordset.php',79],['lib','csvlib.class.php',256],['lib/horde/framework/Horde/Socket','Client.php',135],['backup/util/helper','backup_null_iterator.class.php',53],['admin/tool/uploaduser','locallib.php',149],['lib/tcpdf','tcpdf.php',2943],['lib/phpunit/classes','phpmailer_sink.php',41],['lib/phpmailer','class.smtp.php',582],['lib/dml','sqlsrv_native_moodle_recordset.php',133],['lib/classes/dml','recordset_walk.php',153],['lib/spout/src/Spout/Writer/XLSX/Helper','SharedStringsHelper.php',84],['grade/export','lib.php',689],['lib','excellib.class.php',93],['backup/util/loggers','file_logger.class.php',69],['grade','lib.php',324],['backup/util/helper','backup_array_iterator.class.php',63],['lib/horde/framework/Horde/Imap/Client','Base.php',1846],['mod/assign/feedback/offline','importgradeslib.php',204],['lib/dml','oci_native_moodle_recordset.php',80],['lib/adodb','adodb.inc.php',2361],['lib/adodb','adodb.inc.php',3090],['lib/adodb','adodb.inc.php',3870],['lib/google/src/Google/Logger','File.php',132],['lib/phpunit/classes','event_sink.php',39],['lib/horde/framework/Horde','Stream.php',585],['backup/util/loggers','base_logger.class.php',89],['lib/phpexcel/PHPExcel/Shared','ZipArchive.php',71],['question/engine/tests','helpers.php',1241],['lib/spout/src/Spout/Writer','AbstractWriter.php',312],['lib','odslib.class.php',71],['lib/spout/src/Spout/Writer/Common/Internal','WorksheetInterface.php',34],['lib/spout/src/Spout/Writer/ODS/Internal','Worksheet.php',214],['lib/spout/src/Spout/Writer','WriterInterface.php',84],['lib/spout/src/Spout/Writer/XLSX/Internal','Worksheet.php',174],['lib/spout/src/Spout/Reader','AbstractReader.php',183],['lib/phpunit/classes','message_sink.php',39],['lib/spout/src/Spout/Writer/Common/Internal','WorkbookInterface.php',65],['lib/spout/src/Spout/Writer/XLSX/Internal','Workbook.php',95],['lib/pear/Net','GeoIP.php',556],['lib/tests','completionlib_test.php',907],['lib/pear/Auth','RADIUS.php',550],['lib/pear/Auth','RADIUS.php',710],['lib/pear/Auth','RADIUS.php',829],['lib','webdavlib.php',176],['lib/dml','pgsql_native_moodle_recordset.php',107]], 1128],
'getcharset': ['getcharset', 'Get the character set to use for this part. ', [['lib/horde/framework/Horde/Mime','Part.php',691],['lib/adodb/drivers','adodb-postgres7.inc.php',277],['lib/horde/framework/Horde','Domhtml.php',230],['lib/adodb','adodb.inc.php',2236],['lib/mustache/src/Mustache','Engine.php',242],['lib/adodb/drivers','adodb-mysqli.inc.php',847],['lib/google/src/Google/Service','SQLAdmin.php',1870]], 9],
'message_send': ['message_send', 'Called when a message provider wants to send a message. This functions checks the message recipient\'s message processor configuration then sends the message to the configured processors ', [['lib','messagelib.php',29]], 94],
'is_bulk_message': ['is_bulk_message', 'Attempt to determine whether this message is a bulk message (e.g. automated reply). ', [['admin/tool/messageinbound/classes','manager.php',801]], 1],
'getdescription': ['getdescription', 'Get Description ', [['lib/phpexcel/PHPExcel','DocumentProperties.php',264],['lib/google/src/Google/Service','AdSense.php',3096],['lib/google/src/Google/Service','Replicapool.php',677],['lib/google/src/Google/Service','Tasks.php',734],['lib/google/src/Google/Service','AndroidPublisher.php',3101],['lib/google/src/Google/Service','Computeaccounts.php',802],['lib/google/src/Google/Service','Computeaccounts.php',1515],['lib/google/src/Google/Service','Computeaccounts.php',1574],['lib/google/src/Google/Service','MapsEngine.php',3381],['lib/google/src/Google/Service','MapsEngine.php',4051],['lib/google/src/Google/Service','MapsEngine.php',4292],['lib/google/src/Google/Service','MapsEngine.php',4592],['lib/google/src/Google/Service','MapsEngine.php',5241],['lib/google/src/Google/Service','MapsEngine.php',5340],['lib/google/src/Google/Service','MapsEngine.php',5470],['lib/google/src/Google/Service','MapsEngine.php',5640],['lib/google/src/Google/Service','MapsEngine.php',5806],['lib/google/src/Google/Service','MapsEngine.php',6161],['lib/google/src/Google/Service','Dns.php',630],['lib/google/src/Google/Service','AdExchangeBuyer.php',1864],['lib/google/src/Google/Service','AdExchangeBuyer.php',2057],['lib/google/src/Google/Service','AdExchangeBuyer.php',3281],['lib/google/src/Google/Service','AdExchangeBuyer.php',6442],['lib/horde/framework/Horde/Mime','Part.php',802],['lib/google/src/Google/Service','Books.php',3381],['lib/google/src/Google/Service','Books.php',5203],['lib/google/src/Google/Service','Books.php',5463],['lib/google/src/Google/Service','Books.php',6586],['lib/google/src/Google/Service','Analytics.php',4418],['lib/google/src/Google/Service','Analytics.php',5550],['lib/google/src/Google/Service','DeploymentManager.php',888],['lib/google/src/Google/Service','Blogger.php',1738],['lib/google/src/Google/Service','CloudUserAccounts.php',1197],['lib/google/src/Google/Service','CloudUserAccounts.php',2001],['lib/google/src/Google/Service','CloudUserAccounts.php',2067],['lib/google/src/Google/Service','CloudUserAccounts.php',2170],['lib/google/src/Google/Service','Replicapoolupdater.php',1094],['lib/google/src/Google/Service','Bigquery.php',1095],['lib/google/src/Google/Service','Bigquery.php',2995],['lib/google/src/Google/Service','Bigquery.php',3346],['lib/google/src/Google/Service','ShoppingContent.php',7440],['lib/google/src/Google/Service','Clouddebugger.php',734],['lib/google/src/Google/Service','Clouddebugger.php',1245],['lib/google/src/Google/Service','Container.php',503],['lib/google/src/Google/Service','QPXExpress.php',210],['lib/google/src/Google/Service','Genomics.php',2233],['lib/google/src/Google/Service','Genomics.php',2648],['lib/google/src/Google/Service','Genomics.php',2928],['lib/google/src/Google/Service','Genomics.php',3934],['lib/google/src/Google/Service','Games.php',2294],['lib/google/src/Google/Service','Games.php',2869],['lib/google/src/Google/Service','Games.php',3136],['lib/google/src/Google/Service','Games.php',5377],['lib/google/src/Google/Service','Games.php',5758],['lib/google/src/Google/Service','Games.php',6595],['lib/google/src/Google/Service','Games.php',6878],['lib/google/src/Google/Service','Fitness.php',1451],['lib/phpexcel/PHPExcel/Worksheet','BaseDrawing.php',176],['lib/minify/lib/MrClay/Cli','Arg.php',136],['lib/google/src/Google/Service','Autoscaler.php',551],['lib/google/src/Google/Service','Autoscaler.php',1242],['lib/google/src/Google/Service','Autoscaler.php',1381],['lib/google/src/Google/Service','AdExchangeSeller.php',1169],['lib/google/src/Google/Service','Drive.php',4192],['lib/google/src/Google/Service','Proximitybeacon.php',722],['lib/google/src/Google/Service','Proximitybeacon.php',852],['lib/google/src/Google/Service','Groupssettings.php',243],['lib/google/src/Google/Service','Directory.php',4451],['lib/google/src/Google/Service','Directory.php',5235],['lib/google/src/Google/Service','Directory.php',6763],['lib/google/src/Google/Service','Fusiontables.php',1407],['lib/google/src/Google/Service','Fusiontables.php',2180],['lib/google/src/Google/Service','Plus.php',634],['lib/google/src/Google/Service','Plus.php',1570],['lib/google/src/Google/Service','Plus.php',2387],['lib/google/src/Google/Service','Plus.php',3438],['lib/google/src/Google/Service','AndroidEnterprise.php',2016],['lib/google/src/Google/Service','AndroidEnterprise.php',2758],['lib/google/src/Google/Service','Calendar.php',2096],['lib/google/src/Google/Service','Calendar.php',2276],['lib/google/src/Google/Service','Calendar.php',2746],['lib/google/src/Google/Service','Calendar.php',3496],['lib/google/src/Google/Service','PlusDomains.php',917],['lib/google/src/Google/Service','PlusDomains.php',1898],['lib/google/src/Google/Service','PlusDomains.php',2239],['lib/google/src/Google/Service','PlusDomains.php',3631],['lib/google/src/Google/Service','Storagetransfer.php',1191],['lib/google/src/Google/Service','GamesConfiguration.php',593],['lib/google/src/Google/Service','Resourceviews.php',1051],['lib/google/src/Google/Service','Classroom.php',1080],['lib/google/src/Google/Service','Compute.php',8517],['lib/google/src/Google/Service','Compute.php',8973],['lib/google/src/Google/Service','Compute.php',9400],['lib/google/src/Google/Service','Compute.php',9479],['lib/google/src/Google/Service','Compute.php',9739],['lib/google/src/Google/Service','Compute.php',10065],['lib/google/src/Google/Service','Compute.php',10455],['lib/google/src/Google/Service','Compute.php',10655],['lib/google/src/Google/Service','Compute.php',10997],['lib/google/src/Google/Service','Compute.php',11058],['lib/google/src/Google/Service','Compute.php',11238],['lib/google/src/Google/Service','Compute.php',11431],['lib/google/src/Google/Service','Compute.php',11674],['lib/google/src/Google/Service','Compute.php',11881],['lib/google/src/Google/Service','Compute.php',12122],['lib/google/src/Google/Service','Compute.php',12946],['lib/google/src/Google/Service','Compute.php',13051],['lib/google/src/Google/Service','Compute.php',13368],['lib/google/src/Google/Service','Compute.php',13934],['lib/google/src/Google/Service','Compute.php',14636],['lib/google/src/Google/Service','Compute.php',14725],['lib/google/src/Google/Service','Compute.php',14861],['lib/google/src/Google/Service','Compute.php',15031],['lib/google/src/Google/Service','Compute.php',15396],['lib/google/src/Google/Service','Compute.php',15579],['lib/google/src/Google/Service','Compute.php',15732],['lib/google/src/Google/Service','Compute.php',15878],['lib/google/src/Google/Service','Compute.php',16014],['lib/google/src/Google/Service','Compute.php',16320],['lib/google/src/Google/Service','Compute.php',16754],['lib/google/src/Google/Service','Compute.php',17122],['lib/google/src/Google/Service','Compute.php',17278],['lib/google/src/Google/Service','Compute.php',17448],['lib/google/src/Google/Service','Compute.php',17794],['lib/google/src/Google/Service','Compute.php',17933],['lib/google/src/Google/Service','YouTube.php',5197],['lib/google/src/Google/Service','YouTube.php',6050],['lib/google/src/Google/Service','YouTube.php',6403],['lib/google/src/Google/Service','YouTube.php',6524],['lib/google/src/Google/Service','YouTube.php',8957],['lib/google/src/Google/Service','YouTube.php',9259],['lib/google/src/Google/Service','YouTube.php',9468],['lib/google/src/Google/Service','YouTube.php',9991],['lib/google/src/Google/Service','YouTube.php',10167],['lib/google/src/Google/Service','YouTube.php',10248],['lib/google/src/Google/Service','YouTube.php',10644],['lib/google/src/Google/Service','YouTube.php',10910],['lib/google/src/Google/Service','YouTube.php',10971],['lib/google/src/Google/Service','YouTube.php',12349],['lib/google/src/Google/Service','YouTube.php',12663],['lib/google/src/Google/Service','Dfareporting.php',8991],['lib/google/src/Google/Service','Dfareporting.php',13946],['lib/google/src/Google/Service','Dfareporting.php',18971],['lib/google/src/Google/Service','Dfareporting.php',20836],['lib/google/src/Google/Service','Manager.php',507],['lib/google/src/Google/Service','Manager.php',625],['lib/google/src/Google/Service','Manager.php',808],['lib/google/src/Google/Service','Manager.php',889],['lib/google/src/Google/Service','Manager.php',978],['lib/google/src/Google/Service','Manager.php',1344],['lib/google/src/Google/Service','Manager.php',1641],['lib/google/src/Google/Service','Manager.php',1805],['lib/google/src/Google/Service','CloudMonitoring.php',714],['lib/google/src/Google/Service','CloudMonitoring.php',764]], 9],
'process_envelope': ['process_envelope', 'Process the message recipient, load the handler, and then validate the sender with the associated data record. ', [['lib/classes/message/inbound','address_manager.php',426]], 1],
'setcontents': ['setcontents', '', [['lib/google/src/Google/Service','MapsEngine.php',4556],['lib/google/src/Google/Service','MapsEngine.php',4719],['lib/google/src/Google/Service','MapsEngine.php',5320],['lib/horde/framework/Horde/Mime','Part.php',394],['lib/google/src/Google/Service','Webmasters.php',1094],['lib/google/src/Google/Service','Compute.php',15311]], 13],
'search': ['search', 'Search Freebase open data. (search) ', [['lib/google/src/Google/Service','Freebase.php',219],['search/classes','manager.php',469],['repository/boxnet','lib.php',169],['repository/picasa','lib.php',87],['repository/flickr_public','lib.php',233],['competency/classes','competency.php',383],['lib/google/src/Google/Service','AdExchangeBuyer.php',1266],['lib/google/src/Google/Service','AdExchangeBuyer.php',1342],['lib/google/src/Google/Service','CivicInfo.php',176],['lib','boxlib.php',216],['lib/google/src/Google/Service','Blogger.php',1627],['repository','lib.php',2286],['lib','adminlib.php',687],['lib','adminlib.php',847],['lib','adminlib.php',1266],['lib','adminlib.php',1398],['lib','adminlib.php',5504],['lib','adminlib.php',5785],['lib','adminlib.php',5839],['lib','adminlib.php',5911],['lib','adminlib.php',5959],['lib','adminlib.php',6001],['lib','adminlib.php',6052],['lib','adminlib.php',7096],['repository/wikimedia','lib.php',165],['lib/horde/framework/Horde/Imap/Client','Base.php',1958],['lib/google/src/Google/Service','QPXExpress.php',81],['repository/googledocs','lib.php',265],['lib/google/src/Google/Service','Genomics.php',693],['lib/google/src/Google/Service','Genomics.php',1066],['lib/google/src/Google/Service','Genomics.php',1149],['lib/google/src/Google/Service','Genomics.php',1201],['lib/google/src/Google/Service','Genomics.php',1284],['lib/google/src/Google/Service','Genomics.php',1399],['lib/google/src/Google/Service','Genomics.php',1510],['lib/horde/framework/Horde','Stream.php',255],['repository/merlot','lib.php',62],['repository/youtube','lib.php',127],['repository/local','lib.php',255],['lib/google/src/Google/Service','Plus.php',381],['lib/google/src/Google/Service','Plus.php',590],['backup/util/ui','restore_ui_components.php',172],['repository/filesystem','lib.php',129],['repository/flickr','lib.php',207],['mod/assign','adminlib.php',54],['lib/horde/framework/Horde/Stream','TempString.php',165]], 104],
'out': ['out', 'Returns the selector for use in a CSS rule ', [['lib','csslib.php',1540],['lib','csslib.php',1698],['lib','csslib.php',2078],['lib','csslib.php',2162],['lib','csslib.php',2306],['lib','csslib.php',2495],['lib','csslib.php',3240],['mod/feedback/classes','responses_table.php',332],['lib','moodlelib.php',9729],['lib','weblib.php',545],['lib','tablelib.php',1594],['report/loglive/classes','table_log_ajax.php',37]], 626],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'tidy_old_messages': ['tidy_old_messages', 'Tidy up old messages in the confirmation folder. ', [['admin/tool/messageinbound/classes','manager.php',272]], 1],
'getmessage': ['getmessage', '', [['lib/google/src/Google/Service','Freebase.php',441],['lib/google/src/Google/Service','AdSense.php',2970],['lib/google/src/Google/Service','Replicapool.php',1165],['lib/google/src/Google/Service','Replicapool.php',1257],['lib/google/src/Google/Service','Computeaccounts.php',1368],['lib/google/src/Google/Service','Computeaccounts.php',1460],['lib/google/src/Google/Service','Appengine.php',1604],['lib/google/src/Google/Service','Books.php',3579],['lib/google/src/Google/Service','Books.php',4429],['lib/google/src/Google/Service','Script.php',360],['lib/google/src/Google/Service','DeploymentManager.php',1116],['lib/google/src/Google/Service','DeploymentManager.php',1604],['lib/google/src/Google/Service','DeploymentManager.php',1641],['lib/google/src/Google/Service','DeploymentManager.php',1823],['lib/google/src/Google/Service','DeploymentManager.php',1860],['lib/google/src/Google/Service','Dataflow.php',2656],['lib/google/src/Google/Service','CloudUserAccounts.php',1807],['lib/google/src/Google/Service','CloudUserAccounts.php',1899],['lib/google/src/Google/Service','Replicapoolupdater.php',617],['lib/google/src/Google/Service','Replicapoolupdater.php',926],['lib/google/src/Google/Service','Replicapoolupdater.php',1018],['lib/google/src/Google/Service','Replicapoolupdater.php',1252],['lib/google/src/Google/Service','Bigquery.php',1367],['lib/google/src/Google/Service','ShoppingContent.php',4125],['lib/google/src/Google/Service','ShoppingContent.php',4527],['lib/google/src/Google/Service','ShoppingContent.php',4572],['lib/google/src/Google/Service','Genomics.php',3622],['lib/google/src/Google/Service','Reports.php',1106],['lib/google/src/Google/Service','Gmail.php',1371],['lib/google/src/Google/Service','Gmail.php',1467],['lib/google/src/Google/Service','Gmail.php',1495],['lib/google/src/Google/Service','Gmail.php',1513],['lib/google/src/Google/Service','Gmail.php',1531],['lib/google/src/Google/Service','Autoscaler.php',1079],['lib/google/src/Google/Service','Autoscaler.php',1171],['lib/google/src/Google/Service','AdExchangeSeller.php',1043],['lib/google/src/Google/Service','IdentityToolkit.php',1266],['lib/pear','PEAR.php',941],['lib/google/src/Google/Service','Storagetransfer.php',948],['lib/htmlpurifier/HTMLPurifier','Language.php',86],['lib/google/src/Google/Service','Resourceviews.php',894],['lib/google/src/Google/Service','Resourceviews.php',986],['lib/google/src/Google/Service','SQLAdmin.php',3029],['lib/google/src/Google/Service','Compute.php',8752],['lib/google/src/Google/Service','Compute.php',9200],['lib/google/src/Google/Service','Compute.php',10292],['lib/google/src/Google/Service','Compute.php',10384],['lib/google/src/Google/Service','Compute.php',10890],['lib/google/src/Google/Service','Compute.php',12525],['lib/google/src/Google/Service','Compute.php',12771],['lib/google/src/Google/Service','Compute.php',13249],['lib/google/src/Google/Service','Compute.php',13652],['lib/google/src/Google/Service','Compute.php',13804],['lib/google/src/Google/Service','Compute.php',14396],['lib/google/src/Google/Service','Compute.php',14488],['lib/google/src/Google/Service','Compute.php',14580],['lib/google/src/Google/Service','Compute.php',15235],['lib/google/src/Google/Service','Compute.php',16249],['lib/google/src/Google/Service','Compute.php',16675],['lib/google/src/Google/Service','Compute.php',17005],['lib/google/src/Google/Service','Compute.php',17723],['lib/google/src/Google/Service','Pubsub.php',711],['lib/google/src/Google/Service','Pubsub.php',748],['lib/google/src/Google/Service','Dfareporting.php',19533]], 489],
'close_connection': ['close_connection', 'Shutdown and close the connection to the IMAP client. ', [['admin/tool/messageinbound/classes','manager.php',134]], 4],
'process_existing_message': ['process_existing_message', 'Process a message received and validated by the Inbound Message processor. ', [['admin/tool/messageinbound/classes','manager.php',217]], 1],
'get_reply_subject': ['get_reply_subject', 'Return a formatted subject line for replies. ', [['admin/tool/messageinbound/classes','manager.php',1052]], 3],
'__tostring': ['__tostring', 'String-ified version ', [['lib/simplepie/library/SimplePie','Author.php',95],['lib/horde/framework/Horde/Imap/Client','Url.php',132],['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',139],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',101],['lib/simplepie/library/SimplePie','Copyright.php',85],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nstring.php',39],['lib/horde/framework/Horde/Imap/Client/Search','Query.php',60],['lib/simplepie/library/SimplePie','Rating.php',85],['lib/horde/framework/Horde/Imap/Client/Auth','DigestMD5.php',107],['lib/phpexcel/PHPExcel','RichText.php',122],['lib/simplepie/library','SimplePie.php',655],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',68],['question/engine','datalib.php',1687],['question/engine','datalib.php',1755],['lib/simplepie/library/SimplePie','Source.php',72],['lib/phpexcel/PHPExcel/Worksheet','AutoFilter.php',838],['lib/horde/framework/Horde/Imap/Client/Data/Format','Mailbox.php',44],['lib/lessphp/Tree','Dimension.php',74],['lib','moodlelib.php',9747],['lib/horde/framework/Horde/Imap/Client/Data','Format.php',44],['lib/classes/output','mustache_uniqid_helper.php',41],['lib/horde/framework/Horde/Imap/Client/Data/Format','String.php',81],['lib/simplepie/library/SimplePie','Restriction.php',94],['lib','weblib.php',536],['lib/simplepie/library/SimplePie','IRI.php',133],['question/engine','states.php',108],['lib/phpexcel/PHPExcel','Cell.php',1023],['lib/horde/framework/Horde/Imap/Client/Data/Format','Date.php',44],['lib/simplepie/library/SimplePie','Enclosure.php',264],['mod/lti','OAuth.php',79],['mod/lti','OAuth.php',109],['mod/lti','OAuth.php',460],['lib/simplepie/library/SimplePie','Credit.php',94],['lib/horde/framework/Horde/Support','Backtrace.php',121],['lib/simplepie/library/SimplePie','Item.php',110],['lib/horde/framework/Horde/Imap/Client','Ids.php',150],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',116],['lib/horde/framework/Horde/Imap/Client/Data','Acl.php',43],['lib/pear/PEAR','Exception.php',315],['lib/horde/framework/Horde/Imap/Client/Data','BaseSubject.php',84],['lib/adodb','adodb.inc.php',3261],['lib/horde/framework/Horde/Support','Randomid.php',65],['lib/horde/framework/Horde','Stream.php',103],['lib/horde/framework/Horde/Mail/Rfc822','Object.php',25],['availability/classes','tree.php',91],['availability/classes','condition.php',93],['lib/horde/framework/Horde/Imap/Client/Data/Format','Number.php',27],['lib/lessphp/Tree','Unit.php',48],['lib/spout/src/Spout/Reader/Wrapper','SimpleXMLElement.php',173],['lib/simplepie/library/SimplePie','Category.php',95],['lib/pear','PEAR.php',1024],['lib/horde/framework/Horde/Imap/Client/Data','Namespace.php',122],['enrol/lti/ims-blti','OAuth.php',22],['enrol/lti/ims-blti','OAuth.php',52],['enrol/lti/ims-blti','OAuth.php',406],['lib/horde/framework/Horde/Imap/Client','DateTime.php',59],['lib/phpexcel/PHPExcel','Comment.php',329],['lib/horde/framework/Horde/Imap/Client/Data','AclRights.php',59],['lib/horde/framework/Horde/Support','Uuid.php',75],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nil.php',34],['lib/dml/tests','dml_test.php',5567],['lib/simplepie/library/SimplePie','Caption.php',113],['backup/cc','validator.php',97],['grade/report/singleview/classes/local/ui','attribute_format.php',44],['lib/horde/framework/Horde/Imap/Client/Data/Format','DateTime.php',27],['lib/horde/framework/Horde/Stream','TempString.php',109],['lib/horde/framework/Horde/Support','Stub.php',21],['lib/horde/framework/Horde/Support','Guid.php',63],['lib/pear/Net/GeoIP','Location.php',176]], 11],
'headertext': ['headertext', 'Search for text in the header of a message. ', [['lib/horde/framework/Horde/Imap/Client/Search','Query.php',457],['lib/horde/framework/Horde/Imap/Client/Fetch','Query.php',50]], 6],
'getbodypartdecode': ['getbodypartdecode', 'Determines if/how a body part was MIME decoded on the server. ', [['lib/horde/framework/Horde/Imap/Client/Data','Fetch.php',204]], 1],
'passes_key_validation': ['passes_key_validation', 'Check whether the key provided is valid. ', [['admin/tool/messageinbound/classes','manager.php',700]], 1],
'openmailbox': ['openmailbox', 'Open a mailbox. ', [['lib/horde/framework/Horde/Imap/Client','Base.php',962]], 18],
'getcontentid': ['getcontentid', 'Returns the Content-ID for this part. ', [['lib/horde/framework/Horde/Mime','Part.php',1525],['lib/google/src/Google/Service','Playmoviespartner.php',670]], 2],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'listmailboxes': ['listmailboxes', 'Obtain a list of mailboxes matching a pattern. ', [['lib/horde/framework/Horde/Imap/Client','Base.php',1247]], 8],
'imapdate': ['imapdate', 'Return the internal (IMAP) date of the message. ', [['lib/horde/framework/Horde/Imap/Client/Fetch','Query.php',216]], 4],
'getbodypartsize': ['getbodypartsize', 'Returns the body part size, if returned by the server. ', [['lib/horde/framework/Horde/Imap/Client/Data','Fetch.php',218]], 1],
'get_confirmation_folder': ['get_confirmation_folder', 'Get the confirmation folder imap name ', [['admin/tool/messageinbound/classes','manager.php',144]], 7],
'get_imap_client': ['get_imap_client', 'Retrieve the connection to the IMAP client. ', [['admin/tool/messageinbound/classes','manager.php',82]], 3],
'first': ['first', 'Return the first fetch object in the results, if there is only one object. ', [['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',106]], 91],
'process_message': ['process_message', 'Process a message received and validated by the Inbound Message processor. ', [['lib/classes/message/inbound','private_files_handler.php',66],['admin/tool/messageinbound/classes/message/inbound','invalid_recipient_handler.php',70],['mod/forum/classes/message/inbound','reply_handler.php',61],['message/tests/fixtures','inbound_fixtures.php',47],['admin/tool/messageinbound/classes','manager.php',315],['lib/tests','messageinbound_test.php',170]], 4],
'getname': ['getname', '', [['lib/spout/src/Spout/Reader/ODS','Sheet.php',62],['lib/pear/HTML/QuickForm','static.php',87],['lib/google/src/Google/Service','DataTransfer.php',304],['lib/google/src/Google/Service','Freebase.php',305],['lib/google/src/Google/Service','Freebase.php',339],['lib/google/src/Google/Service','AdSense.php',2162],['lib/google/src/Google/Service','AdSense.php',2577],['lib/google/src/Google/Service','AdSense.php',2916],['lib/google/src/Google/Service','AdSense.php',3060],['lib/google/src/Google/Service','AdSense.php',3384],['lib/google/src/Google/Service','AdSense.php',3465],['mod/wiki/editors','wikifiletable.php',76],['lib/google/src/Google/Service','Replicapool.php',725],['lib/google/src/Google/Service','Replicapool.php',1015],['lib/google/src/Google/Service','GamesManagement.php',1238],['lib/form','filemanager.php',119],['lib/google/src/Google/Service','Partners.php',720],['lib/pear/HTML/QuickForm','select.php',160],['lib/google/src/Google/Service','AndroidPublisher.php',2881],['lib/pear/HTML/QuickForm','input.php',98],['lib/google/src/Google/Service','YouTubeReporting.php',473],['lib/google/src/Google/Service','YouTubeReporting.php',670],['lib/google/src/Google/Service','Computeaccounts.php',834],['lib/google/src/Google/Service','Computeaccounts.php',1218],['lib/google/src/Google/Service','Computeaccounts.php',1606],['lib/phpexcel/PHPExcel','Chart.php',188],['lib/google/src/Google/Service','YouTubeAnalytics.php',727],['lib/google/src/Google/Service','YouTubeAnalytics.php',1193],['lib/google/src/Google/Service','MapsEngine.php',3421],['lib/google/src/Google/Service','MapsEngine.php',3611],['lib/google/src/Google/Service','MapsEngine.php',4067],['lib/google/src/Google/Service','MapsEngine.php',4097],['lib/google/src/Google/Service','MapsEngine.php',4348],['lib/google/src/Google/Service','MapsEngine.php',4640],['lib/google/src/Google/Service','MapsEngine.php',4755],['lib/google/src/Google/Service','MapsEngine.php',4820],['lib/google/src/Google/Service','MapsEngine.php',4877],['lib/google/src/Google/Service','MapsEngine.php',5197],['lib/google/src/Google/Service','MapsEngine.php',5265],['lib/google/src/Google/Service','MapsEngine.php',5356],['lib/google/src/Google/Service','MapsEngine.php',5534],['lib/google/src/Google/Service','MapsEngine.php',5696],['lib/google/src/Google/Service','MapsEngine.php',5830],['lib/google/src/Google/Service','MapsEngine.php',6217],['lib/google/src/Google/Service','MapsEngine.php',6291],['lib/google/src/Google/Service','Dns.php',662],['lib/google/src/Google/Service','Dns.php',861],['lib/google/src/Google/Service','Appengine.php',687],['lib/google/src/Google/Service','Appengine.php',1048],['lib/google/src/Google/Service','Appengine.php',1185],['lib/google/src/Google/Service','Appengine.php',1229],['lib/google/src/Google/Service','Appengine.php',1275],['lib/google/src/Google/Service','Appengine.php',1964],['lib/google/src/Google/Service','Translate.php',320],['lib/google/src/Google/Service','AdExchangeBuyer.php',1872],['lib/google/src/Google/Service','AdExchangeBuyer.php',2029],['lib/google/src/Google/Service','AdExchangeBuyer.php',2073],['lib/google/src/Google/Service','AdExchangeBuyer.php',2189],['lib/google/src/Google/Service','AdExchangeBuyer.php',2392],['lib/google/src/Google/Service','AdExchangeBuyer.php',3250],['lib/google/src/Google/Service','AdExchangeBuyer.php',4338],['lib/google/src/Google/Service','AdExchangeBuyer.php',4658],['lib/google/src/Google/Service','AdExchangeBuyer.php',4862],['lib/google/src/Google/Service','AdExchangeBuyer.php',6618],['lib/google/src/Google/Service','CivicInfo.php',355],['lib/google/src/Google/Service','CivicInfo.php',469],['lib/google/src/Google/Service','CivicInfo.php',543],['lib/google/src/Google/Service','CivicInfo.php',885],['lib/google/src/Google/Service','CivicInfo.php',929],['lib/google/src/Google/Service','CivicInfo.php',974],['lib/google/src/Google/Service','CivicInfo.php',1045],['lib/google/src/Google/Service','CivicInfo.php',1081],['lib/google/src/Google/Service','CivicInfo.php',1129],['lib/google/src/Google/Service','CivicInfo.php',1204],['lib/google/src/Google/Service','CivicInfo.php',1288],['lib/google/src/Google/Service','CivicInfo.php',1522],['lib/horde/framework/Horde/Mime','Part.php',374],['lib/google/src/Google/Service','Books.php',3528],['lib/google/src/Google/Service','Oauth2.php',483],['lib/google/src/Google/Service','Analytics.php',3826],['lib/google/src/Google/Service','Analytics.php',3938],['lib/google/src/Google/Service','Analytics.php',4058],['lib/google/src/Google/Service','Analytics.php',4450],['lib/google/src/Google/Service','Analytics.php',4717],['lib/google/src/Google/Service','Analytics.php',4963],['lib/google/src/Google/Service','Analytics.php',5177],['lib/google/src/Google/Service','Analytics.php',5614],['lib/google/src/Google/Service','Analytics.php',5797],['lib/google/src/Google/Service','Analytics.php',6013],['lib/google/src/Google/Service','Analytics.php',6353],['lib/google/src/Google/Service','Analytics.php',6706],['lib/google/src/Google/Service','Analytics.php',7079],['lib/google/src/Google/Service','Analytics.php',7340],['lib/google/src/Google/Service','Analytics.php',7673],['lib/google/src/Google/Service','Analytics.php',8036],['lib/google/src/Google/Service','Analytics.php',8411],['lib/google/src/Google/Service','Analytics.php',8455],['lib/google/src/Google/Service','Analytics.php',8673],['lib/google/src/Google/Service','Analytics.php',8860],['lib/google/src/Google/Service','Analytics.php',9515],['lib/google/src/Google/Service','Analytics.php',9572],['lib/google/src/Google/Service','Analytics.php',9777],['lib/google/src/Google/Service','Coordinate.php',897],['lib/google/src/Google/Service','Coordinate.php',1449],['lib/pear/HTML/QuickForm','xbutton.php',90],['lib/google/src/Google/Service','Script.php',282],['lib/google/src/Google/Service','DeploymentManager.php',928],['lib/google/src/Google/Service','DeploymentManager.php',1031],['lib/google/src/Google/Service','DeploymentManager.php',1230],['lib/google/src/Google/Service','DeploymentManager.php',1305],['lib/google/src/Google/Service','DeploymentManager.php',1454],['lib/google/src/Google/Service','DeploymentManager.php',1979],['lib/google/src/Google/Service','Blogger.php',1770],['lib/google/src/Google/Service','Blogger.php',3010],['lib/google/src/Google/Service','Dataflow.php',927],['lib/google/src/Google/Service','Dataflow.php',1030],['lib/google/src/Google/Service','Dataflow.php',1483],['lib/google/src/Google/Service','Dataflow.php',1561],['lib/google/src/Google/Service','Dataflow.php',1645],['lib/google/src/Google/Service','Dataflow.php',1745],['lib/google/src/Google/Service','Dataflow.php',2069],['lib/google/src/Google/Service','Dataflow.php',2687],['lib/pear/HTML/QuickForm','textarea.php',93],['lib/google/src/Google/Service','CloudUserAccounts.php',1229],['lib/google/src/Google/Service','CloudUserAccounts.php',1657],['lib/google/src/Google/Service','CloudUserAccounts.php',2202],['lib/google/src/Google/Service','Cloudresourcemanager.php',800],['lib/google/src/Google/Service','Customsearch.php',1077],['lib/google/src/Google/Service','TagManager.php',1793],['lib/google/src/Google/Service','TagManager.php',1915],['lib/google/src/Google/Service','TagManager.php',2084],['lib/google/src/Google/Service','TagManager.php',2182],['lib/google/src/Google/Service','TagManager.php',2241],['lib/google/src/Google/Service','TagManager.php',2337],['lib/google/src/Google/Service','TagManager.php',2617],['lib/google/src/Google/Service','TagManager.php',2805],['lib/google/src/Google/Service','TagManager.php',2952],['lib/google/src/Google/Service','TagManager.php',3202],['lib/google/src/Google/Service','TagManager.php',3385],['lib/google/src/Google/Service','Replicapoolupdater.php',776],['lib/spout/src/Spout/Writer/Common','Sheet.php',59],['lib/google/src/Google/Service','Bigquery.php',3370],['lib/google/src/Google/Service','ShoppingContent.php',2156],['lib/google/src/Google/Service','ShoppingContent.php',2363],['lib/google/src/Google/Service','ShoppingContent.php',2492],['lib/google/src/Google/Service','ShoppingContent.php',2563],['lib/google/src/Google/Service','ShoppingContent.php',2646],['lib/google/src/Google/Service','ShoppingContent.php',3882],['lib/google/src/Google/Service','ShoppingContent.php',4882],['lib/google/src/Google/Service','ShoppingContent.php',7879],['lib/google/src/Google/Service','ShoppingContent.php',7931],['lib/google/src/Google/Service','Clouddebugger.php',662],['lib/google/src/Google/Service','Clouddebugger.php',1315],['lib/spout/src/Spout/Reader/XLSX','Sheet.php',60],['lib/form','selectgroups.php',124],['lib/pear/HTML/QuickForm','group.php',138],['lib/google/src/Google/Service','Container.php',567],['lib/google/src/Google/Service','Container.php',816],['lib/form','editor.php',138],['lib/google/src/Google/Service','Audit.php',334],['lib/google/src/Google/Service','Audit.php',360],['lib/google/src/Google/Service','Datastore.php',580],['lib/google/src/Google/Service','Datastore.php',652],['lib/google/src/Google/Service','Datastore.php',669],['lib/google/src/Google/Service','Datastore.php',1097],['lib/google/src/Google/Service','Storage.php',2088],['lib/google/src/Google/Service','Storage.php',2767],['lib/google/src/Google/Service','Storage.php',3260],['lib/google/src/Google/Service','QPXExpress.php',128],['lib/google/src/Google/Service','QPXExpress.php',172],['lib/google/src/Google/Service','QPXExpress.php',261],['lib/google/src/Google/Service','QPXExpress.php',305],['lib/google/src/Google/Service','QPXExpress.php',1224],['lib/google/src/Google/Service','Genomics.php',1598],['lib/google/src/Google/Service','Genomics.php',1720],['lib/google/src/Google/Service','Genomics.php',2208],['lib/google/src/Google/Service','Genomics.php',2396],['lib/google/src/Google/Service','Genomics.php',2680],['lib/google/src/Google/Service','Genomics.php',2773],['lib/google/src/Google/Service','Genomics.php',2845],['lib/google/src/Google/Service','Genomics.php',2997],['lib/google/src/Google/Service','Genomics.php',3078],['lib/google/src/Google/Service','Games.php',2358],['lib/google/src/Google/Service','Games.php',2925],['lib/google/src/Google/Service','Games.php',3556],['lib/google/src/Google/Service','Games.php',3632],['lib/google/src/Google/Service','Games.php',3868],['lib/google/src/Google/Service','Games.php',4531],['lib/google/src/Google/Service','Games.php',5449],['lib/google/src/Google/Service','Fitness.php',924],['lib/google/src/Google/Service','Fitness.php',1148],['lib/google/src/Google/Service','Fitness.php',1184],['lib/google/src/Google/Service','Fitness.php',1211],['lib/google/src/Google/Service','Fitness.php',1483],['lib/xmldb','xmldb_object.php',118],['lib/google/src/Google/Service','Reports.php',621],['lib/google/src/Google/Service','Reports.php',692],['lib/google/src/Google/Service','Reports.php',1001],['lib/google/src/Google/Service','Gmail.php',1596],['lib/google/src/Google/Service','Gmail.php',1997],['lib/phpexcel/PHPExcel/Worksheet','BaseDrawing.php',154],['lib/google/src/Google/Service','Doubleclicksearch.php',865],['lib/google/src/Google/Service','Doubleclicksearch.php',891],['lib/google/src/Google/Service','Autoscaler.php',575],['lib/google/src/Google/Service','Autoscaler.php',929],['lib/google/src/Google/Service','Autoscaler.php',1274],['lib/google/src/Google/Service','Autoscaler.php',1397],['lib/google/src/Google/Service','AdExchangeSeller.php',861],['lib/google/src/Google/Service','AdExchangeSeller.php',1133],['lib/google/src/Google/Service','AdExchangeSeller.php',1467],['lib/google/src/Google/Service','AdExchangeSeller.php',1582],['lib/google/src/Google/Service','Appsactivity.php',392],['lib/google/src/Google/Service','Appsactivity.php',539],['lib/google/src/Google/Service','Appsactivity.php',558],['lib/google/src/Google/Service','Drive.php',2740],['lib/google/src/Google/Service','Drive.php',3129],['lib/google/src/Google/Service','Drive.php',5242],['lib/google/src/Google/Service','Spectrum.php',246],['lib/phpexcel/PHPExcel','NamedRange.php',90],['lib/google/src/Google/Service','Proximitybeacon.php',1013],['lib/google/src/Google/Service','Groupssettings.php',315],['lib/google/src/Google/Service','Directory.php',3539],['lib/google/src/Google/Service','Directory.php',4499],['lib/google/src/Google/Service','Directory.php',4862],['lib/google/src/Google/Service','Directory.php',5259],['lib/google/src/Google/Service','Directory.php',6256],['lib/google/src/Google/Service','Directory.php',6787],['lib/google/src/Google/Service','Fusiontables.php',1439],['lib/google/src/Google/Service','Fusiontables.php',2031],['lib/google/src/Google/Service','Fusiontables.php',2204],['lib/google/src/Google/Service','Fusiontables.php',2419],['lib/google/src/Google/Service','AdSenseHost.php',1254],['lib/google/src/Google/Service','AdSenseHost.php',1624],['lib/google/src/Google/Service','AdSenseHost.php',1927],['lib/google/src/Google/Service','AdSenseHost.php',2073],['lib/google/src/Google/Service','Plus.php',902],['lib/google/src/Google/Service','Plus.php',2515],['lib/google/src/Google/Service','Plus.php',3071],['lib/google/src/Google/Service','Plus.php',3462],['lib/pear/HTML/QuickForm','element.php',152],['lib/google/src/Google/Service','AndroidEnterprise.php',2200],['lib/google/src/Google/Service','AndroidEnterprise.php',2397],['lib/google/src/Google/Service','AndroidEnterprise.php',2774],['lib/google/src/Google/Service','Playmoviespartner.php',1022],['lib/google/src/Google/Service','Playmoviespartner.php',1326],['lib/google/src/Google/Service','Playmoviespartner.php',1576],['lib/pear/HTML/QuickForm','link.php',99],['lib/google/src/Google/Service','Cloudtrace.php',409],['lib/google/src/Google/Service','Cloudbilling.php',334],['lib/google/src/Google/Service','Cloudbilling.php',434],['lib/google/src/Google/Service','PlusDomains.php',1193],['lib/google/src/Google/Service','PlusDomains.php',3290],['lib/google/src/Google/Service','PlusDomains.php',3655],['lib/google/src/Google/Service','Storagetransfer.php',850],['lib/google/src/Google/Service','Storagetransfer.php',1207],['lib/google/src/Google/Service','Storagetransfer.php',1292],['lib/google/src/Google/Service','GamesConfiguration.php',617],['lib/google/src/Google/Service','GamesConfiguration.php',948],['lib/google/src/Google/Service','Resourceviews.php',744],['lib/google/src/Google/Service','Resourceviews.php',1099],['lib/google/src/Google/Service','Resourceviews.php',1149],['lib/phpexcel/PHPExcel/Style','Font.php',219],['lib/google/src/Google/Service','Classroom.php',1112],['lib/google/src/Google/Service','Classroom.php',1513],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooterDrawing.php',94],['lib/google/src/Google/Service','SQLAdmin.php',1587],['lib/google/src/Google/Service','SQLAdmin.php',1910],['lib/google/src/Google/Service','SQLAdmin.php',1944],['lib/google/src/Google/Service','SQLAdmin.php',2066],['lib/google/src/Google/Service','SQLAdmin.php',2373],['lib/google/src/Google/Service','SQLAdmin.php',2930],['lib/google/src/Google/Service','SQLAdmin.php',3659],['lib/google/src/Google/Service','Compute.php',8458],['lib/google/src/Google/Service','Compute.php',8541],['lib/google/src/Google/Service','Compute.php',8997],['lib/google/src/Google/Service','Compute.php',9519],['lib/google/src/Google/Service','Compute.php',9787],['lib/google/src/Google/Service','Compute.php',10089],['lib/google/src/Google/Service','Compute.php',10479],['lib/google/src/Google/Service','Compute.php',10679],['lib/google/src/Google/Service','Compute.php',11098],['lib/google/src/Google/Service','Compute.php',11278],['lib/google/src/Google/Service','Compute.php',11471],['lib/google/src/Google/Service','Compute.php',11722],['lib/google/src/Google/Service','Compute.php',11913],['lib/google/src/Google/Service','Compute.php',12170],['lib/google/src/Google/Service','Compute.php',13075],['lib/google/src/Google/Service','Compute.php',13311],['lib/google/src/Google/Service','Compute.php',13432],['lib/google/src/Google/Service','Compute.php',13885],['lib/google/src/Google/Service','Compute.php',13966],['lib/google/src/Google/Service','Compute.php',14004],['lib/google/src/Google/Service','Compute.php',14188],['lib/google/src/Google/Service','Compute.php',14644],['lib/google/src/Google/Service','Compute.php',14757],['lib/google/src/Google/Service','Compute.php',14885],['lib/google/src/Google/Service','Compute.php',15063],['lib/google/src/Google/Service','Compute.php',15436],['lib/google/src/Google/Service','Compute.php',15603],['lib/google/src/Google/Service','Compute.php',15756],['lib/google/src/Google/Service','Compute.php',15902],['lib/google/src/Google/Service','Compute.php',16046],['lib/google/src/Google/Service','Compute.php',16368],['lib/google/src/Google/Service','Compute.php',16786],['lib/google/src/Google/Service','Compute.php',17162],['lib/google/src/Google/Service','Compute.php',17488],['lib/google/src/Google/Service','Compute.php',17826],['lib/google/src/Google/Service','Compute.php',17949],['lib/google/src/Google/Service','Pubsub.php',954],['lib/google/src/Google/Service','Pubsub.php',987],['lib/google/src/Google/Service','YouTube.php',5438],['lib/google/src/Google/Service','YouTube.php',8084],['lib/google/src/Google/Service','YouTube.php',8210],['lib/google/src/Google/Service','YouTube.php',9156],['lib/google/src/Google/Service','Dfareporting.php',9031],['lib/google/src/Google/Service','Dfareporting.php',9163],['lib/google/src/Google/Service','Dfareporting.php',9206],['lib/google/src/Google/Service','Dfareporting.php',9370],['lib/google/src/Google/Service','Dfareporting.php',9819],['lib/google/src/Google/Service','Dfareporting.php',9947],['lib/google/src/Google/Service','Dfareporting.php',10120],['lib/google/src/Google/Service','Dfareporting.php',10188],['lib/google/src/Google/Service','Dfareporting.php',10297],['lib/google/src/Google/Service','Dfareporting.php',10334],['lib/google/src/Google/Service','Dfareporting.php',10396],['lib/google/src/Google/Service','Dfareporting.php',10664],['lib/google/src/Google/Service','Dfareporting.php',11068],['lib/google/src/Google/Service','Dfareporting.php',11111],['lib/google/src/Google/Service','Dfareporting.php',11309],['lib/google/src/Google/Service','Dfareporting.php',11418],['lib/google/src/Google/Service','Dfareporting.php',11491],['lib/google/src/Google/Service','Dfareporting.php',11850],['lib/google/src/Google/Service','Dfareporting.php',12438],['lib/google/src/Google/Service','Dfareporting.php',12796],['lib/google/src/Google/Service','Dfareporting.php',13012],['lib/google/src/Google/Service','Dfareporting.php',13113],['lib/google/src/Google/Service','Dfareporting.php',13682],['lib/google/src/Google/Service','Dfareporting.php',13994],['lib/google/src/Google/Service','Dfareporting.php',14390],['lib/google/src/Google/Service','Dfareporting.php',14855],['lib/google/src/Google/Service','Dfareporting.php',14954],['lib/google/src/Google/Service','Dfareporting.php',15057],['lib/google/src/Google/Service','Dfareporting.php',15692],['lib/google/src/Google/Service','Dfareporting.php',15855],['lib/google/src/Google/Service','Dfareporting.php',16113],['lib/google/src/Google/Service','Dfareporting.php',16184],['lib/google/src/Google/Service','Dfareporting.php',16265],['lib/google/src/Google/Service','Dfareporting.php',16434],['lib/google/src/Google/Service','Dfareporting.php',16489],['lib/google/src/Google/Service','Dfareporting.php',16708],['lib/google/src/Google/Service','Dfareporting.php',17328],['lib/google/src/Google/Service','Dfareporting.php',17691],['lib/google/src/Google/Service','Dfareporting.php',17881],['lib/google/src/Google/Service','Dfareporting.php',18009],['lib/google/src/Google/Service','Dfareporting.php',18606],['lib/google/src/Google/Service','Dfareporting.php',18872],['lib/google/src/Google/Service','Dfareporting.php',19027],['lib/google/src/Google/Service','Dfareporting.php',19246],['lib/google/src/Google/Service','Dfareporting.php',20213],['lib/google/src/Google/Service','Dfareporting.php',20527],['lib/google/src/Google/Service','Dfareporting.php',20589],['lib/google/src/Google/Service','Dfareporting.php',20884],['lib/google/src/Google/Service','Dfareporting.php',21234],['lib/google/src/Google/Service','Dfareporting.php',21303],['lib/google/src/Google/Service','Dfareporting.php',21346],['lib/google/src/Google/Service','Manager.php',405],['lib/google/src/Google/Service','Manager.php',641],['lib/google/src/Google/Service','Manager.php',1300],['lib/google/src/Google/Service','Manager.php',1821],['lib/google/src/Google/Service','CloudMonitoring.php',730]], 827],
'process_message_part_attachment': ['process_message_part_attachment', 'Process a message again to add body and attachment data. ', [['admin/tool/messageinbound/classes','manager.php',646]], 1],
'getcontents': ['getcontents', '', [['lib/google/src/Google/Service','MapsEngine.php',4560],['lib/google/src/Google/Service','MapsEngine.php',4723],['lib/google/src/Google/Service','MapsEngine.php',5324],['lib/horde/framework/Horde/Mime','Part.php',458],['lib/google/src/Google/Service','Webmasters.php',1098],['lib/google/src/Google/Service','Compute.php',15315]], 5],
'pickup_messages': ['pickup_messages', 'Execute the main Inbound Message pickup task. ', [['admin/tool/messageinbound/classes','manager.php',180]], 1],
'createmailbox': ['createmailbox', 'Create a mailbox. ', [['lib/horde/framework/Horde/Imap/Client','Base.php',1072]], 3],
'process_message_data': ['process_message_data', 'Process a message to retrieve it\'s header data without body and attachemnts. ', [['admin/tool/messageinbound/classes','manager.php',487]], 2],
'mtrace': ['mtrace', 'Outputs the given message via {@link mtrace()}. ', [['lib/classes','plugin_manager.php',1376],['lib','moodlelib.php',8509]], 406],
'clean_param': ['clean_param', 'Used by {@link optional_param()} and {@link required_param()} to clean the variables and/or cast to specific types, based on an options field. <code> $course->format = clean_param($course->format, PARAM_ALPHA); $selectedgradeitem = clean_param($selectedgradeitem, PARAM_INT); </code> ', [['lib','moodlelib.php',769]], 635],
'getnamespaces': ['getnamespaces', 'Get the NAMESPACE information from the IMAP server (RFC 2342). ', [['lib/horde/framework/Horde/Imap/Client','Base.php',645],['lib/google/src/Google/Service','Proximitybeacon.php',1142]], 10],
'bodypartsize': ['bodypartsize', 'Returns the decoded body part size for a MIME ID. ', [['lib/horde/framework/Horde/Imap/Client/Fetch','Query.php',148]], 1],
'fopen': ['fopen', 'Return a stream handle to this stream. ', [['lib/horde/framework/Horde/Support','CombineStream.php',41],['lib/spout/src/Spout/Common/Helper','GlobalFunctionsHelper.php',15],['lib/horde/framework/Horde/Support','StringStream.php',41]], 221],
'getbodypart': ['getbodypart', 'Get a body part entry. ', [['lib/horde/framework/Horde/Imap/Client/Data','Fetch.php',191]], 3],
'structure': ['structure', 'Return MIME structure information. ', [['lib/horde/framework/Horde/Imap/Client/Fetch','Query.php',192]], 16],
'getuid': ['getuid', '', [['lib/google/src/Google/Service','Computeaccounts.php',1097],['lib/google/src/Google/Service','Books.php',4291],['lib/google/src/Google/Service','CloudUserAccounts.php',1492],['lib/google/src/Google/Service','Clouddebugger.php',1085],['lib/google/src/Google/Service','Fitness.php',1319],['lib/horde/framework/Horde/Imap/Client/Data','Fetch.php',361]], 10],
'scan_file': ['scan_file', 'Scan file, throws exception in case of infected file. ', [['lib/antivirus/clamav/classes','scanner.php',43],['lib/classes/antivirus','manager.php',60]], 14],
'getdisposition': ['getdisposition', 'Get the content-disposition of this part. ', [['lib/horde/framework/Horde/Mime','Part.php',308]], 3],
'strlen': ['strlen', 'Counts the number of characters. Unit-tested by Kasper (single byte charsets only) ', [['lib/typo3','class.t3lib_cs.php',1520],['lib/classes','text.php',305]], 1649],
'message_has_flag': ['message_has_flag', 'Check whether the message has the specified flag ', [['admin/tool/messageinbound/classes','manager.php',756]], 1],
'get_data': ['get_data', '', [['mod/scorm','mod_form.php',526],['mod/feedback/item/multichoicerated','multichoicerated_form.php',96],['backup/util/structure','restore_path_element.class.php',118],['admin/tool/uploaduser','user_form.php',399],['mod/feedback/item/textfield','textfield_form.php',58],['admin/tool/lp/classes/form','persistent.php',202],['grade/export','grade_export_form.php',206],['mod/feedback','mod_form.php',163],['message/tests','inbound_test.php',632],['mod/feedback/item/textarea','textarea_form.php',57],['mod/survey','mod_form.php',49],['lib/simplepie/library/SimplePie','Parser.php',263],['lib','formslib.php',606],['mod/feedback/item/numeric','numeric_form.php',60],['admin/tool/uploadcourse/classes','course.php',269],['mod/feedback/item','feedback_item_class.php',52],['mod/feedback/item','feedback_item_class.php',264],['admin/webservice','forms.php',299],['grade/grading/form','lib.php',841],['blocks/rss_client','editfeed.php',101],['mod/lesson','mod_form.php',417],['grade/grading/form/guide','edit_form.php',142],['course','editsection_form.php',105],['lib/classes/event','base.php',647],['grade/grading/form/rubric','edit_form.php',136],['mod/feedback/item','feedback_item_form_class.php',112],['admin/tool/filetypes','edit_form.php',97],['mod/forum','mod_form.php',270],['mod/scorm/report/graphs/classes','report.php',49],['lib/classes/message/inbound','address_manager.php',361],['mod/workshop','locallib.php',3990],['mod/glossary','mod_form.php',203],['mod/feedback/item/captcha','lib.php',67],['lib','completionlib.php',869],['mod/feedback/item/multichoice','multichoice_form.php',93],['mod/choice','mod_form.php',121]], 388],
'ensure_mailboxes_exist': ['ensure_mailboxes_exist', 'Ensure that all mailboxes exist. ', [['admin/tool/messageinbound/classes','manager.php',779]], 1],
'set_data': ['set_data', '', [['mod/scorm','mod_form.php',456],['mod/feedback/item/multichoicerated','multichoicerated_form.php',84],['backup/util/structure','restore_path_element.class.php',95],['course','moodleform_mod.php',458],['blocks/html','edit_form.php',53],['question/type','edit_question_form.php',450],['question/type/random','edit_random_form.php',68],['lib','formslib.php',456],['question/type/missingtype','edit_missingtype_form.php',52],['badges','edit_form.php',137],['blocks','edit_form.php',255],['course','editsection_form.php',88],['admin/tool/filetypes','edit_form.php',83],['question','category_form.php',73],['lib/classes/message/inbound','address_manager.php',146],['question/type/multianswer','edit_multianswer_form.php',262],['cache','forms.php',242],['question/type/calculated','datasetitems_form.php',360],['mod/feedback/item/multichoice','multichoice_form.php',79]], 235],
'getvalue': ['getvalue', 'Returns the element\'s value ', [['lib/pear/HTML/QuickForm','advcheckbox.php',179],['lib/google/src/Google/Service','Cloudlatencytest.php',174],['lib/google/src/Google/Service','Cloudlatencytest.php',200],['lib/google/src/Google/Service','Cloudlatencytest.php',291],['lib/google/src/Google/Service','DataTransfer.php',376],['mod/wiki/editors','wikifiletable.php',84],['lib/google/src/Google/Service','Replicapool.php',1283],['lib/form','filemanager.php',137],['lib/google/src/Google/Service','Partners.php',1454],['lib/pear/HTML/QuickForm','select.php',210],['lib/google/src/Google/Utils','URITemplate.php',322],['lib/pear/HTML/QuickForm','input.php',129],['lib/google/src/Google/Service','Computeaccounts.php',1486],['lib/google/src/Google/Service','MapsEngine.php',3863],['lib/google/src/Google/Service','AdExchangeBuyer.php',5990],['lib/google/src/Google/Service','Books.php',4010],['lib/google/src/Google/Service','Analytics.php',7135],['lib/google/src/Google/Service','Coordinate.php',840],['lib/google/src/Google/Service','Coordinate.php',1004],['lib/pear/HTML/QuickForm','file.php',147],['lib/pear/HTML/QuickForm','xbutton.php',104],['backup/cc','entity11.lti.class.php',75],['lib/google/src/Google/Service','DoubleClickBidManager.php',376],['lib/google/src/Google/Service','DeploymentManager.php',1142],['lib/google/src/Google/Service','DeploymentManager.php',1667],['lib/google/src/Google/Service','DeploymentManager.php',1886],['backup/cc','entity11.basiclti.class.php',80],['lib/pear/HTML/QuickForm','textarea.php',124],['lib/google/src/Google/Service','CloudUserAccounts.php',1157],['lib/google/src/Google/Service','CloudUserAccounts.php',1925],['lib/google/src/Google/Service','Pagespeedonline.php',216],['lib/phpexcel/PHPExcel','Cell.php',171],['lib/google/src/Google/Service','TagManager.php',2721],['lib/google/src/Google/Service','Replicapoolupdater.php',1044],['lib/phpexcel/PHPExcel/Calculation','FormulaToken.php',117],['lib/google/src/Google/Service','ShoppingContent.php',4160],['lib/google/src/Google/Service','ShoppingContent.php',5588],['lib/google/src/Google/Service','ShoppingContent.php',7168],['lib/google/src/Google/Service','ShoppingContent.php',7903],['lib/google/src/Google/Service','ShoppingContent.php',8082],['lib/google/src/Google/Service','ShoppingContent.php',8108],['lib/google/src/Google/Service','ShoppingContent.php',8403],['lib/google/src/Google/Service','ShoppingContent.php',8429],['lib/google/src/Google/Service','ShoppingContent.php',9172],['lib/google/src/Google/Service','Clouddebugger.php',1331],['lib/form','selectgroups.php',158],['lib/pear/HTML/QuickForm','group.php',188],['lib/pear/HTML/QuickForm','checkbox.php',206],['lib/form','editor.php',161],['lib/google/src/Google/Service','Audit.php',368],['lib/google/src/Google/Service','Datastore.php',588],['lib/google/src/Google/Service','Datastore.php',1053],['lib/google/src/Google/Service','Genomics.php',3982],['lib/google/src/Google/Service','Games.php',5508],['lib/google/src/Google/Service','Fitness.php',1082],['lib/google/src/Google/Service','Fitness.php',1564],['lib/google/src/Google/Service','Reports.php',700],['lib/google/src/Google/Service','Reports.php',1132],['lib/google/src/Google/Service','Gmail.php',2005],['lib/google/src/Google/Service','Doubleclicksearch.php',873],['lib/google/src/Google/Service','Doubleclicksearch.php',899],['lib/google/src/Google/Service','Autoscaler.php',1197],['lib','searchlib.php',75],['lib/google/src/Google/Service','Prediction.php',548],['lib/google/src/Google/Service','Prediction.php',690],['lib/google/src/Google/Service','Drive.php',3859],['lib/google/src/Google/Service','Drive.php',5282],['lib/google/src/Google/Service','Drive.php',5416],['lib/editor/tinymce/plugins/spellchecker/classes/utils','JSON.php',95],['lib/horde/framework/Horde/Mime','Headers.php',433],['lib/google/src/Google/Service','Directory.php',6386],['lib/google/src/Google/Service','Directory.php',6598],['lib/google/src/Google/Service','Directory.php',6863],['lib/google/src/Google/Service','Directory.php',6978],['lib/google/src/Google/Service','Directory.php',7039],['lib/google/src/Google/Service','Plus.php',3317],['lib/google/src/Google/Service','Plus.php',3520],['lib/google/src/Google/Service','Plus.php',3555],['lib/pear/HTML/QuickForm','element.php',183],['lib/google/src/Google/Service','Mirror.php',1471],['lib/google/src/Google/Service','Mirror.php',1928],['lib/pear/HTML/QuickForm','link.php',132],['lib/google/src/Google/Service','Calendar.php',2073],['lib/google/src/Google/Service','Calendar.php',3805],['lib/google/src/Google/Service','PlusDomains.php',3510],['lib/google/src/Google/Service','PlusDomains.php',3713],['lib/google/src/Google/Service','PlusDomains.php',3748],['lib/google/src/Google/Service','GamesConfiguration.php',1036],['lib/google/src/Google/Service','Resourceviews.php',601],['lib/google/src/Google/Service','Resourceviews.php',1012],['lib/google/src/Google/Service','SQLAdmin.php',1595],['lib/google/src/Google/Service','SQLAdmin.php',1952],['mod/scorm/datamodels','scorm_13.js',376],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter/Column','Rule.php',300],['lib/google/src/Google/Service','Compute.php',8778],['lib/google/src/Google/Service','Compute.php',9226],['lib/google/src/Google/Service','Compute.php',10318],['lib/google/src/Google/Service','Compute.php',10410],['lib/google/src/Google/Service','Compute.php',10916],['lib/google/src/Google/Service','Compute.php',12551],['lib/google/src/Google/Service','Compute.php',12797],['lib/google/src/Google/Service','Compute.php',13275],['lib/google/src/Google/Service','Compute.php',13678],['lib/google/src/Google/Service','Compute.php',13867],['lib/google/src/Google/Service','Compute.php',14514],['lib/google/src/Google/Service','Compute.php',14606],['lib/google/src/Google/Service','Compute.php',15261],['lib/google/src/Google/Service','Compute.php',16275],['lib/google/src/Google/Service','Compute.php',16701],['lib/google/src/Google/Service','Compute.php',17031],['lib/google/src/Google/Service','Compute.php',17749],['lib/google/src/Google/Service','YouTube.php',5939],['lib/google/src/Google/Service','YouTube.php',8637],['lib/google/src/Google/Service','YouTube.php',9583],['lib/google/src/Google/Service','YouTube.php',10421],['lib/google/src/Google/Service','Dfareporting.php',11119],['lib/google/src/Google/Service','Dfareporting.php',12865],['lib/google/src/Google/Service','Dfareporting.php',13717],['lib/google/src/Google/Service','Dfareporting.php',13779],['lib/google/src/Google/Service','Dfareporting.php',16028],['lib/google/src/Google/Service','Manager.php',749],['lib/google/src/Google/Service','Manager.php',1106],['lib/google/src/Google/Service','Manager.php',1476],['lib/google/src/Google/Service','CloudMonitoring.php',1086]], 307],
'get_mailbox': ['get_mailbox', 'Get the current mailbox information. ', [['admin/tool/messageinbound/classes','manager.php',163]], 8],
'store': ['store', 'Write data to cache. ', [['lib/minify/lib/Minify/Cache','APC.php',34],['admin/tool/log/classes/log','observer.php',30],['lib/minify/lib/Minify/Cache','File.php',18],['blocks/recent_activity/classes','observer.php',45],['lib/minify/lib/Minify/Cache','ZendPlatform.php',38],['lib/horde/framework/Horde/Imap/Client','Base.php',2770],['lib/minify/lib/Minify/Cache','Memcache.php',39],['backup/cc/cc_lib','cc_converters.php',128],['lib/minify/lib/Minify/Cache','WinCache.php',36],['lib/minify/lib/Minify/Cache','XCache.php',34]], 23],
'login': ['login', '', [['auth/fc','fcFPP.php',97],['repository/wikimedia','wikimedia.php',45],['lib/horde/framework/Horde/Imap/Client','Base.php',777]], 34],
'getstructure': ['getstructure', '', [['lib/xmldb','xmldb_file.php',75],['lib/horde/framework/Horde/Imap/Client/Data','Fetch.php',70]], 59],
'make_temp_directory': ['make_temp_directory', 'Create a directory under tempdir and make sure it is writable. ', [['lib','setuplib.php',1642]], 50],
'findbody': ['findbody', 'Finds the main "body" text part (if any) in a message. "Body" data is the first text part under this part. ', [['lib/horde/framework/Horde/Mime','Part.php',1764]], 4],
'add_flag_to_message': ['add_flag_to_message', 'Add the specified flag to the message. ', [['admin/tool/messageinbound/classes','manager.php',722]], 4],
'is_enabled': ['is_enabled', 'Tools cannot be disabled. ', [['lib/classes/plugininfo','tool.php',39],['admin/tool/recyclebin/classes','category_bin.php',54],['admin/tool/log/classes/plugininfo','logstore.php',35],['admin/tool/recyclebin/classes','course_bin.php',54],['mod/assign/feedback/offline','locallib.php',380],['admin/tool/recyclebin/classes','base_bin.php',38],['lib','adminlib.php',1955],['search/classes','base.php',190],['lib','medialib.php',318],['lib','medialib.php',635],['lib','medialib.php',1268],['admin/tool/health','index.php',393],['lib/classes/plugininfo','mnetservice.php',33],['lib/classes/message/inbound','manager.php',37],['mod/assignment/classes/plugininfo','assignment.php',32],['competency/classes','api.php',49],['mod/assign','assignmentplugin.php',223],['lib/classes/plugininfo','orphaned.php',37],['search/tests/fixtures','mock_search_area.php',38],['tag/classes','area.php',106],['lib/classes/plugininfo','base.php',383],['mod/assign/feedback/editpdf','locallib.php',340],['tag/classes','tag.php',1269],['mod/assign/submission/comments','locallib.php',172],['lib','completionlib.php',269]], 276],
'getenvelope': ['getenvelope', 'Get envelope data. ', [['lib/horde/framework/Horde/Imap/Client/Data','Fetch.php',270]], 10],
'get_handler': ['get_handler', 'Create a new SimplePie_Cache object ', [['lib/simplepie/library/SimplePie','Cache.php',74],['lib/simplepie/library/SimplePie','Enclosure.php',529],['lib/classes/message/inbound','manager.php',221],['lib/classes/message/inbound','address_manager.php',137]], 9],
'set_handler': ['set_handler', 'Set the handler to use for the subsequent Inbound Message commands. ', [['lib/classes/message/inbound','address_manager.php',128]], 19],
'get_support_user': ['get_support_user', 'Return support user record, this is currently used in messaging system only for sending messages to support email. $CFG->supportuserid is set then returns user record $CFG->supportemail is set then return dummy record with $CFG->supportemail else return admin user record with hard-coded $user->emailstop = 0, so user gets support message. ', [['lib/classes','user.php',166]], 21],
'currentmailbox': ['currentmailbox', 'Return the currently opened mailbox and access mode. ', [['lib/horde/framework/Horde/Imap/Client','Base.php',1052]], 2],
'is_correct_format': ['is_correct_format', 'Determine whether the supplied address is of the correct format. ', [['lib/classes/message/inbound','address_manager.php',273]], 2],
'inform_user_of_success': ['inform_user_of_success', 'Inform the identified sender that message processing was successful. ', [['admin/tool/messageinbound/classes','manager.php',992]], 1],
'getimapdate': ['getimapdate', 'Get internal IMAP date. ', [['lib/horde/framework/Horde/Imap/Client/Data','Fetch.php',317]], 3],
'fetch': ['fetch', 'Finds and returns a data_object instance based on params. ', [['completion/criteria','completion_criteria_course.php',46],['lib/minify/lib/Minify/Cache','APC.php',91],['lib/grade','grade_item.php',346],['completion/criteria','completion_criteria_date.php',43],['lib/grade','grade_category.php',184],['lib/grade','grade_scale.php',89],['lib/grade','grade_object.php',126],['completion','data_object.php',152],['completion','completion_completion.php',70],['lib/grade','grade_grade.php',635],['lib/classes/update','checker.php',117],['lib/grade','grade_outcome.php',182],['lib/minify/lib/Minify/Cache','File.php',90],['completion','completion_aggregation.php',68],['completion/criteria','completion_criteria_role.php',43],['lib/minify/lib/Minify/Cache','ZendPlatform.php',97],['lib/horde/framework/Horde/Imap/Client','Base.php',2373],['completion','completion_criteria_completion.php',74],['completion/criteria','completion_criteria_self.php',43],['completion/criteria','completion_criteria_grade.php',45],['completion/criteria','completion_criteria_unenrol.php',43],['lib/minify/lib/Minify/Cache','Memcache.php',97],['lib/classes','notification.php',93],['completion/criteria','completion_criteria_activity.php',45],['completion/criteria','completion_criteria_duration.php',43],['lib/minify/lib/Minify/Cache','WinCache.php',89],['lib/minify/lib/Minify/Cache','XCache.php',86]], 253],
'handle_verification_failure': ['handle_verification_failure', 'Handle failure of sender verification. ', [['admin/tool/messageinbound/classes','manager.php',882]], 1],
'flags': ['flags', 'Return flags set for the message. ', [['lib/horde/framework/Horde/Imap/Client/Fetch','Query.php',208]], 2],
'fulltext': ['fulltext', 'Get the full text of the message. ', [['lib/horde/framework/Horde/Imap/Client/Fetch','Query.php',32]], 2],
'process_message_data_body': ['process_message_data_body', 'Process a message again to add body and attachment data. ', [['admin/tool/messageinbound/classes','manager.php',535]], 1],
'getheadertext': ['getheadertext', '', [['lib/google/src/Google/Service','Doubleclicksearch.php',1057],['lib/horde/framework/Horde/Imap/Client/Data','Fetch.php',121]], 7],
'envelope': ['envelope', 'Return envelope header data. ', [['lib/horde/framework/Horde/Imap/Client/Fetch','Query.php',200]], 9],
'querycapability': ['querycapability', 'Returns whether the IMAP server supports the given capability (See RFC 3501 [6.1.1]). ', [['lib/horde/framework/Horde/Imap/Client','Base.php',563]], 80],
'bodypart': ['bodypart', 'Return the body part data for a MIME ID. ', [['lib/horde/framework/Horde/Imap/Client/Fetch','Query.php',126]], 4],
'getpart': ['getpart', 'Retrieve a specific MIME part. ', [['lib/horde/framework/Horde/Mime','Part.php',880],['lib','environmentlib.php',1434]], 19],
'generate': ['generate', 'Generate an AdSense report based on the report request sent in the query parameters. Returns the result as JSON; to retrieve output in CSV format specify "alt=csv" as a query parameter. (reports.generate) ', [['lib/google/src/Google/Service','AdSense.php',1416],['lib/google/src/Google/Service','AdSense.php',1465],['lib/google/src/Google/Service','AdSense.php',1946],['lib/google/src/Google/Service','AdSense.php',1995],['lib/horde/framework/Horde/Support','Randomid.php',34],['lib/google/src/Google/Service','Doubleclicksearch.php',367],['lib/google/src/Google/Service','AdExchangeSeller.php',708],['lib/google/src/Google/Service','AdExchangeSeller.php',752],['lib/google/src/Google/Service','Directory.php',3344],['lib/google/src/Google/Service','AdSenseHost.php',874],['lib/google/src/Google/Service','AdSenseHost.php',1125],['lib/horde/framework/Horde/Mime','Mdn.php',119],['backup/cc/cc_lib','cc_asssesment.php',260],['backup/cc/cc_lib','cc_asssesment.php',406],['backup/cc/cc_lib','cc_asssesment.php',419],['backup/cc/cc_lib','cc_asssesment.php',426],['backup/cc/cc_lib','cc_asssesment.php',433],['backup/cc/cc_lib','cc_asssesment.php',465],['backup/cc/cc_lib','cc_asssesment.php',500],['backup/cc/cc_lib','cc_asssesment.php',516],['backup/cc/cc_lib','cc_asssesment.php',531],['backup/cc/cc_lib','cc_asssesment.php',569],['backup/cc/cc_lib','cc_asssesment.php',607],['backup/cc/cc_lib','cc_asssesment.php',623],['backup/cc/cc_lib','cc_asssesment.php',651],['backup/cc/cc_lib','cc_asssesment.php',659],['backup/cc/cc_lib','cc_asssesment.php',686],['backup/cc/cc_lib','cc_asssesment.php',712],['backup/cc/cc_lib','cc_asssesment.php',764],['backup/cc/cc_lib','cc_asssesment.php',801],['backup/cc/cc_lib','cc_asssesment.php',824],['backup/cc/cc_lib','cc_asssesment.php',863],['backup/cc/cc_lib','cc_asssesment.php',904],['backup/cc/cc_lib','cc_asssesment.php',947],['backup/cc/cc_lib','cc_asssesment.php',990],['backup/cc/cc_lib','cc_asssesment.php',1089],['backup/cc/cc_lib','cc_asssesment.php',1140],['backup/cc/cc_lib','cc_asssesment.php',1217],['backup/cc/cc_lib','cc_asssesment.php',1283],['backup/cc/cc_lib','cc_asssesment.php',1361],['backup/cc/cc_lib','cc_asssesment.php',1405],['backup/cc/cc_lib','cc_asssesment.php',1511],['backup/cc/cc_lib','cc_asssesment.php',1597],['backup/cc/cc_lib','cc_asssesment.php',1676],['backup/cc/cc_lib','cc_asssesment.php',1759],['backup/cc/cc_lib','cc_asssesment.php',2249],['lib/classes/message/inbound','address_manager.php',226],['lib/horde/framework/Horde/Support','Uuid.php',31],['lib/horde/framework/Horde/Support','Guid.php',41]], 94],
'handle_message': ['handle_message', 'Process the message against the relevant handler. ', [['lib/classes/message/inbound','address_manager.php',443]], 1],
'send_to_handler': ['send_to_handler', 'Send the message to the appropriate handler. ', [['admin/tool/messageinbound/classes','manager.php',838]], 1],
'remove_flag_from_message': ['remove_flag_from_message', 'Remove the specified flag from the message. ', [['admin/tool/messageinbound/classes','manager.php',739]], 1],
'cron_setup_user': ['cron_setup_user', 'Sets up current user and course environment (lang, etc.) in cron. Do not use outside of cron script! ', [['lib','sessionlib.php',153]], 35],
'get_success_message': ['get_success_message', 'Return the content of any success notification to be sent. Both an HTML and Plain Text variant must be provided. ', [['mod/forum/classes/message/inbound','reply_handler.php',296],['lib/classes/message/inbound','handler.php',225]], 1],
'convert': ['convert', '', [['lib','wiki_to_markdown.php',314],['backup/converter','convertlib.php',119],['backup/cc/cc_lib','cc_converter_url.php',36],['backup/cc/cc_lib','cc_converter_forum.php',36],['backup/cc/cc_lib','cc_converter_basiclti.php',36],['lib/html2text','Html2Text.php',325],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',18498],['backup/cc/cc_lib','cc_converter_quiz.php',40],['lib','navigationlib.php',4932],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',63],['backup/cc/cc_lib','cc_converter_resource.php',34],['backup/cc/cc_lib','cc_convert_moodle2.php',29],['backup/cc/cc_lib','cc_converter_lti.php',36],['lib/classes','text.php',162],['backup/cc/cc_lib','cc_converter_label.php',33],['backup/cc/cc_lib','cc_converter_page.php',35],['backup/cc/cc_lib','cc_converter_folder.php',33],['lib/lessphp','Functions.php',569],['backup/controller','restore_controller.class.php',439]], 141],
'process_message_part_body': ['process_message_part_body', 'Process the messagedata and part data to extract the content of this part. ', [['admin/tool/messageinbound/classes','manager.php',616]], 2],
'flag': ['flag', 'Search for a flag/keywords. ', [['lib/horde/framework/Horde/Imap/Client/Search','Query.php',396],['tag/classes','tag.php',970]], 12],
'gettype': ['gettype', '', [], 266],
'defined': ['defined', '', [], 4731],
'fclose': ['fclose', '', [], 275],
'fwrite': ['fwrite', '', [], 227],
'copy': ['copy', '', [], 49],
'strpos': ['strpos', '', [], 1604],
'time': ['time', '', [], 1959],
'count': ['count', '', [], 4095],
'rand': ['rand', '', [], 99],
'strtolower': ['strtolower', '', [], 817],
'explode': ['explode', '', [], 1572],
'array_shift': ['array_shift', '', [], 700],
'substr': ['substr', '', [], 2823],
'in_array': ['in_array', '', [], 1234]};
CLASS_DATA={
'address_manager': ['address_manager', 'Incoming Message address manager. ', [['lib/classes/message/inbound','address_manager.php',29]], 19],
'horde_imap_client_data_fetch': ['horde_imap_client_data_fetch', 'Object containing data returned by the Horde_Imap_Client_Base#fetch() command. ', [['lib/horde/framework/Horde/Imap/Client/Data','Fetch.php',14]], 9],
'core_user': ['core_user', 'User class to access user details. ', [['lib/classes','user.php',27]], 457],
'horde_imap_client_search_query': ['horde_imap_client_search_query', 'Abstraction of the IMAP4rev1 search criteria (see RFC 3501 [6.4.4]). Allows translation between abstracted search criteria and a generated IMAP search criteria string suitable for sending to a remote IMAP server. ', [['lib/horde/framework/Horde/Imap/Client/Search','Query.php',14]], 12],
'manager': ['manager', 'Search subsystem manager. ', [['search/classes','manager.php',31],['user/classes/output/myprofile','manager.php',28],['lib/classes/antivirus','manager.php',29],['lib/classes/event','manager.php',30],['lib/classes/task','manager.php',28],['admin/tool/messageinbound/classes','manager.php',29],['lib/classes/message/inbound','manager.php',29],['admin/tool/log/classes/log','manager.php',29],['lib/classes/log','manager.php',29],['lib/classes/session','manager.php',29],['lib/classes/message','manager.php',31]], 585],
'core_text': ['core_text', 'defines string api\'s for manipulating strings ', [['lib/classes','text.php',27]], 566]};
CONST_DATA={
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153],
'FORMAT_PLAIN': ['FORMAT_PLAIN', '', [['lib','weblib.php',52]], 152],
'DAYSECS': ['DAYSECS', '', [['lib','moodlelib.php',49]], 122],
'PARAM_RAW': ['PARAM_RAW', '', [['lib','moodlelib.php',193]], 921]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
