<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /admin/tool/messageinbound/classes/manager.php source</title>
    <link rel="stylesheet" href="../../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../../';
subdir='admin/tool/messageinbound/classes';
filename='manager.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/admin/tool/messageinbound/classes/</a> -> <a href="manager.php.html">manager.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="manager.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="manager.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * The Mail Pickup Manager.</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package    tool_messageinbound</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @copyright  2014 Andrew Nicols</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> */</span>
<a name="l24"><span class="linenum">  24</span></a>  
<a name="l25"><span class="linenum">  25</span></a>  namespace tool_messageinbound;
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l28"><span class="linenum">  28</span></a>  
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment">/**</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> * Mail Pickup Manager.</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> *</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * @copyright  2014 Andrew Nicols</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> */</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('manager')" href="../../../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a> {
<a name="l36"><span class="linenum">  36</span></a>  
<a name="l37"><span class="linenum">  37</span></a>      <span class="comment">/**</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment">     * @var string The main mailbox to check.</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment">     */</span>
<a name="l40"><span class="linenum">  40</span></a>      const MAILBOX = 'INBOX';
<a name="l41"><span class="linenum">  41</span></a>  
<a name="l42"><span class="linenum">  42</span></a>      <span class="comment">/**</span>
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment">     * @var string The mailbox to store messages in when they are awaiting confirmation.</span>
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment">     */</span>
<a name="l45"><span class="linenum">  45</span></a>      const CONFIRMATIONFOLDER = 'tobeconfirmed';
<a name="l46"><span class="linenum">  46</span></a>  
<a name="l47"><span class="linenum">  47</span></a>      <span class="comment">/**</span>
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment">     * @var string The flag for seen/read messages.</span>
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment">     */</span>
<a name="l50"><span class="linenum">  50</span></a>      const MESSAGE_SEEN = '\seen';
<a name="l51"><span class="linenum">  51</span></a>  
<a name="l52"><span class="linenum">  52</span></a>      <span class="comment">/**</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment">     * @var string The flag for flagged messages.</span>
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment">     */</span>
<a name="l55"><span class="linenum">  55</span></a>      const MESSAGE_FLAGGED = '\flagged';
<a name="l56"><span class="linenum">  56</span></a>  
<a name="l57"><span class="linenum">  57</span></a>      <span class="comment">/**</span>
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment">     * @var string The flag for deleted messages.</span>
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment">     */</span>
<a name="l60"><span class="linenum">  60</span></a>      const MESSAGE_DELETED = '\deleted';
<a name="l61"><span class="linenum">  61</span></a>  
<a name="l62"><span class="linenum">  62</span></a>      <span class="comment">/**</span>
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment">     * @var \Horde_Imap_Client_Socket A reference to the IMAP client.</span>
<a name="l64"><span class="linenum">  64</span></a>  <span class="comment">     */</span>
<a name="l65"><span class="linenum">  65</span></a>      protected <a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('client')" href="../../../../_variables/client.html">$client</a> = null;
<a name="l66"><span class="linenum">  66</span></a>  
<a name="l67"><span class="linenum">  67</span></a>      <span class="comment">/**</span>
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment">     * @var \core\message\inbound\address_manager A reference to the Inbound Message Address Manager instance.</span>
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment">     */</span>
<a name="l70"><span class="linenum">  70</span></a>      protected <a class="var it24563" onMouseOver="hilite(24563)" onMouseOut="lolite()" onClick="logVariable('addressmanager')" href="../../../../_variables/addressmanager.html">$addressmanager</a> = null;
<a name="l71"><span class="linenum">  71</span></a>  
<a name="l72"><span class="linenum">  72</span></a>      <span class="comment">/**</span>
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment">     * @var \stdClass The data for the current message being processed.</span>
<a name="l74"><span class="linenum">  74</span></a>  <span class="comment">     */</span>
<a name="l75"><span class="linenum">  75</span></a>      protected <a class="var it24564" onMouseOver="hilite(24564)" onMouseOut="lolite()" onClick="logVariable('currentmessagedata')" href="../../../../_variables/currentmessagedata.html">$currentmessagedata</a> = null;
<a name="l76"><span class="linenum">  76</span></a>  
<a name="l77"><span class="linenum">  77</span></a>      <span class="comment">/**</span>
<a name="l78"><span class="linenum">  78</span></a>  <span class="comment">     * Retrieve the connection to the IMAP client.</span>
<a name="l79"><span class="linenum">  79</span></a>  <span class="comment">     *</span>
<a name="l80"><span class="linenum">  80</span></a>  <span class="comment">     * @return bool Whether a connection was successfully established.</span>
<a name="l81"><span class="linenum">  81</span></a>  <span class="comment">     */</span>
<a name="l82"><span class="linenum">  82</span></a>      protected function <a class="function" onClick="logFunction('get_imap_client')" href="../../../../_functions/get_imap_client.html" onMouseOver="funcPopup(event,'get_imap_client')">get_imap_client</a>() {
<a name="l83"><span class="linenum">  83</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>;
<a name="l84"><span class="linenum">  84</span></a>  
<a name="l85"><span class="linenum">  85</span></a>          if (!\core\message\inbound\<a class="class" onClick="logClass('manager')" href="../../../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('is_enabled')" href="../../../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>()) {
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment">            // E-mail processing not set up.</span>
<a name="l87"><span class="linenum">  87</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;Inbound Message not fully configured - exiting early.&quot;);
<a name="l88"><span class="linenum">  88</span></a>              return false;
<a name="l89"><span class="linenum">  89</span></a>          }
<a name="l90"><span class="linenum">  90</span></a>  
<a name="l91"><span class="linenum">  91</span></a>          <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;Connecting to {<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('messageinbound_host')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../../_variables/messageinbound_host.html">messageinbound_host</a>} as {<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('messageinbound_hostuser')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../../_variables/messageinbound_hostuser.html">messageinbound_hostuser</a>}...&quot;);
<a name="l92"><span class="linenum">  92</span></a>  
<a name="l93"><span class="linenum">  93</span></a>          <a class="var it2682" onMouseOver="hilite(2682)" onMouseOut="lolite()" onClick="logVariable('configuration')" href="../../../../_variables/configuration.html">$configuration</a> = array(
<a name="l94"><span class="linenum">  94</span></a>              'username' =&gt; <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('messageinbound_hostuser')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../../_variables/messageinbound_hostuser.html">messageinbound_hostuser</a>,
<a name="l95"><span class="linenum">  95</span></a>              'password' =&gt; <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('messageinbound_hostpass')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../../_variables/messageinbound_hostpass.html">messageinbound_hostpass</a>,
<a name="l96"><span class="linenum">  96</span></a>              'hostspec' =&gt; <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('messageinbound_host')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../../_variables/messageinbound_host.html">messageinbound_host</a>,
<a name="l97"><span class="linenum">  97</span></a>              'secure'   =&gt; <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('messageinbound_hostssl')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../../_variables/messageinbound_hostssl.html">messageinbound_hostssl</a>,
<a name="l98"><span class="linenum">  98</span></a>          );
<a name="l99"><span class="linenum">  99</span></a>  
<a name="l100"><span class="linenum"> 100</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a> = new \Horde_Imap_Client_Socket(<a class="var it2682" onMouseOver="hilite(2682)" onMouseOut="lolite()" onClick="logVariable('configuration')" href="../../../../_variables/configuration.html">$configuration</a>);
<a name="l101"><span class="linenum"> 101</span></a>  
<a name="l102"><span class="linenum"> 102</span></a>          try {
<a name="l103"><span class="linenum"> 103</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('login')" href="../../../../_functions/login.html" onMouseOver="funcPopup(event,'login')">login</a>();
<a name="l104"><span class="linenum"> 104</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;Connection established.&quot;);
<a name="l105"><span class="linenum"> 105</span></a>              return true;
<a name="l106"><span class="linenum"> 106</span></a>  
<a name="l107"><span class="linenum"> 107</span></a>          } catch (\Horde_Imap_Client_Exception <a class="var it193" onMouseOver="hilite(193)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../../../_variables/e.html">$e</a>) {
<a name="l108"><span class="linenum"> 108</span></a>              <a class="var it643" onMouseOver="hilite(643)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a> = <a class="var it193" onMouseOver="hilite(193)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>();
<a name="l109"><span class="linenum"> 109</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;Unable to connect to IMAP server. Failed with '{<a class="var it643" onMouseOver="hilite(643)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a>}'&quot;);
<a name="l110"><span class="linenum"> 110</span></a>  
<a name="l111"><span class="linenum"> 111</span></a>              return false;
<a name="l112"><span class="linenum"> 112</span></a>          }
<a name="l113"><span class="linenum"> 113</span></a>      }
<a name="l114"><span class="linenum"> 114</span></a>  
<a name="l115"><span class="linenum"> 115</span></a>      <span class="comment">/**</span>
<a name="l116"><span class="linenum"> 116</span></a>  <span class="comment">     * Shutdown and close the connection to the IMAP client.</span>
<a name="l117"><span class="linenum"> 117</span></a>  <span class="comment">     */</span>
<a name="l118"><span class="linenum"> 118</span></a>      protected function <a class="function" onClick="logFunction('close_connection')" href="../../../../_functions/close_connection.html" onMouseOver="funcPopup(event,'close_connection')">close_connection</a>() {
<a name="l119"><span class="linenum"> 119</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>) {
<a name="l120"><span class="linenum"> 120</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l121"><span class="linenum"> 121</span></a>          }
<a name="l122"><span class="linenum"> 122</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a> = null;
<a name="l123"><span class="linenum"> 123</span></a>      }
<a name="l124"><span class="linenum"> 124</span></a>  
<a name="l125"><span class="linenum"> 125</span></a>      <span class="comment">/**</span>
<a name="l126"><span class="linenum"> 126</span></a>  <span class="comment">     * Get the current mailbox information.</span>
<a name="l127"><span class="linenum"> 127</span></a>  <span class="comment">     *</span>
<a name="l128"><span class="linenum"> 128</span></a>  <span class="comment">     * @return \Horde_Imap_Client_Mailbox</span>
<a name="l129"><span class="linenum"> 129</span></a>  <span class="comment">     * @throws \core\message\inbound\processing_failed_exception if the mailbox could not be opened.</span>
<a name="l130"><span class="linenum"> 130</span></a>  <span class="comment">     */</span>
<a name="l131"><span class="linenum"> 131</span></a>      protected function <a class="function" onClick="logFunction('get_mailbox')" href="../../../../_functions/get_mailbox.html" onMouseOver="funcPopup(event,'get_mailbox')">get_mailbox</a>() {
<a name="l132"><span class="linenum"> 132</span></a>  <span class="comment">        // Get the current mailbox.</span>
<a name="l133"><span class="linenum"> 133</span></a>          <a class="var it9649" onMouseOver="hilite(9649)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('currentMailbox')" href="../../../../_functions/currentmailbox.html" onMouseOver="funcPopup(event,'currentmailbox')">currentMailbox</a>();
<a name="l134"><span class="linenum"> 134</span></a>  
<a name="l135"><span class="linenum"> 135</span></a>          if (isset(<a class="var it9649" onMouseOver="hilite(9649)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a>['mailbox'])) {
<a name="l136"><span class="linenum"> 136</span></a>              return <a class="var it9649" onMouseOver="hilite(9649)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a>['mailbox'];
<a name="l137"><span class="linenum"> 137</span></a>          } else {
<a name="l138"><span class="linenum"> 138</span></a>              throw new \core\message\inbound\processing_failed_exception('couldnotopenmailbox', 'tool_messageinbound');
<a name="l139"><span class="linenum"> 139</span></a>          }
<a name="l140"><span class="linenum"> 140</span></a>      }
<a name="l141"><span class="linenum"> 141</span></a>  
<a name="l142"><span class="linenum"> 142</span></a>      <span class="comment">/**</span>
<a name="l143"><span class="linenum"> 143</span></a>  <span class="comment">     * Execute the main Inbound Message pickup task.</span>
<a name="l144"><span class="linenum"> 144</span></a>  <span class="comment">     *</span>
<a name="l145"><span class="linenum"> 145</span></a>  <span class="comment">     * @return bool</span>
<a name="l146"><span class="linenum"> 146</span></a>  <span class="comment">     */</span>
<a name="l147"><span class="linenum"> 147</span></a>      public function <a class="function" onClick="logFunction('pickup_messages')" href="../../../../_functions/pickup_messages.html" onMouseOver="funcPopup(event,'pickup_messages')">pickup_messages</a>() {
<a name="l148"><span class="linenum"> 148</span></a>          if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_imap_client')" href="../../../../_functions/get_imap_client.html" onMouseOver="funcPopup(event,'get_imap_client')">get_imap_client</a>()) {
<a name="l149"><span class="linenum"> 149</span></a>              return false;
<a name="l150"><span class="linenum"> 150</span></a>          }
<a name="l151"><span class="linenum"> 151</span></a>  
<a name="l152"><span class="linenum"> 152</span></a>  <span class="comment">        // Restrict results to messages which are unseen, and have not been flagged.</span>
<a name="l153"><span class="linenum"> 153</span></a>          <a class="var it1502" onMouseOver="hilite(1502)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../../_variables/search.html">$search</a> = new \Horde_Imap_Client_Search_Query();
<a name="l154"><span class="linenum"> 154</span></a>          <a class="var it1502" onMouseOver="hilite(1502)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../../_variables/search.html">$search</a>-&gt;<a class="function" onClick="logFunction('flag')" href="../../../../_functions/flag.html" onMouseOver="funcPopup(event,'flag')">flag</a>(self::MESSAGE_SEEN, false);
<a name="l155"><span class="linenum"> 155</span></a>          <a class="var it1502" onMouseOver="hilite(1502)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../../_variables/search.html">$search</a>-&gt;<a class="function" onClick="logFunction('flag')" href="../../../../_functions/flag.html" onMouseOver="funcPopup(event,'flag')">flag</a>(self::MESSAGE_FLAGGED, false);
<a name="l156"><span class="linenum"> 156</span></a>          <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;Searching for Unseen, Unflagged email in the folder '&quot; . self::MAILBOX . &quot;'&quot;);
<a name="l157"><span class="linenum"> 157</span></a>          <a class="var it594" onMouseOver="hilite(594)" onMouseOut="lolite()" onClick="logVariable('results')" href="../../../../_variables/results.html">$results</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('search')" href="../../../../_functions/search.html" onMouseOver="funcPopup(event,'search')">search</a>(self::MAILBOX, <a class="var it1502" onMouseOver="hilite(1502)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../../_variables/search.html">$search</a>);
<a name="l158"><span class="linenum"> 158</span></a>  
<a name="l159"><span class="linenum"> 159</span></a>  <span class="comment">        // We require the envelope data and structure of each message.</span>
<a name="l160"><span class="linenum"> 160</span></a>          <a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a> = new \Horde_Imap_Client_Fetch_Query();
<a name="l161"><span class="linenum"> 161</span></a>          <a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>-&gt;<a class="function" onClick="logFunction('envelope')" href="../../../../_functions/envelope.html" onMouseOver="funcPopup(event,'envelope')">envelope</a>();
<a name="l162"><span class="linenum"> 162</span></a>          <a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>-&gt;<a class="function" onClick="logFunction('structure')" href="../../../../_functions/structure.html" onMouseOver="funcPopup(event,'structure')">structure</a>();
<a name="l163"><span class="linenum"> 163</span></a>  
<a name="l164"><span class="linenum"> 164</span></a>  <span class="comment">        // Retrieve the message id.</span>
<a name="l165"><span class="linenum"> 165</span></a>          <a class="var it1262" onMouseOver="hilite(1262)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../../../../_variables/messages.html">$messages</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('fetch')" href="../../../../_functions/fetch.html" onMouseOver="funcPopup(event,'fetch')">fetch</a>(self::MAILBOX, <a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>, array('ids' =&gt; <a class="var it594" onMouseOver="hilite(594)" onMouseOut="lolite()" onClick="logVariable('results')" href="../../../../_variables/results.html">$results</a>['match']));
<a name="l166"><span class="linenum"> 166</span></a>  
<a name="l167"><span class="linenum"> 167</span></a>          <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;Found &quot; . <a class="var it1262" onMouseOver="hilite(1262)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../../../../_variables/messages.html">$messages</a>-&gt;<a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>() . &quot; messages to parse. Parsing...&quot;);
<a name="l168"><span class="linenum"> 168</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addressmanager')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/addressmanager.html">addressmanager</a> = new \core\message\inbound\address_manager();
<a name="l169"><span class="linenum"> 169</span></a>          foreach (<a class="var it1262" onMouseOver="hilite(1262)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../../../../_variables/messages.html">$messages</a> as <a class="var it643" onMouseOver="hilite(643)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a>) {
<a name="l170"><span class="linenum"> 170</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_message')" href="../../../../_functions/process_message.html" onMouseOver="funcPopup(event,'process_message')">process_message</a>(<a class="var it643" onMouseOver="hilite(643)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a>);
<a name="l171"><span class="linenum"> 171</span></a>          }
<a name="l172"><span class="linenum"> 172</span></a>  
<a name="l173"><span class="linenum"> 173</span></a>  <span class="comment">        // Close the client connection.</span>
<a name="l174"><span class="linenum"> 174</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('close_connection')" href="../../../../_functions/close_connection.html" onMouseOver="funcPopup(event,'close_connection')">close_connection</a>();
<a name="l175"><span class="linenum"> 175</span></a>  
<a name="l176"><span class="linenum"> 176</span></a>          return true;
<a name="l177"><span class="linenum"> 177</span></a>      }
<a name="l178"><span class="linenum"> 178</span></a>  
<a name="l179"><span class="linenum"> 179</span></a>      <span class="comment">/**</span>
<a name="l180"><span class="linenum"> 180</span></a>  <span class="comment">     * Process a message received and validated by the Inbound Message processor.</span>
<a name="l181"><span class="linenum"> 181</span></a>  <span class="comment">     *</span>
<a name="l182"><span class="linenum"> 182</span></a>  <span class="comment">     * @param \stdClass $maildata The data retrieved from the database for the current record.</span>
<a name="l183"><span class="linenum"> 183</span></a>  <span class="comment">     * @return bool Whether the message was successfully processed.</span>
<a name="l184"><span class="linenum"> 184</span></a>  <span class="comment">     * @throws \core\message\inbound\processing_failed_exception if the message cannot be found.</span>
<a name="l185"><span class="linenum"> 185</span></a>  <span class="comment">     */</span>
<a name="l186"><span class="linenum"> 186</span></a>      public function <a class="function" onClick="logFunction('process_existing_message')" href="../../../../_functions/process_existing_message.html" onMouseOver="funcPopup(event,'process_existing_message')">process_existing_message</a>(\stdClass <a class="var it18816" onMouseOver="hilite(18816)" onMouseOut="lolite()" onClick="logVariable('maildata')" href="../../../../_variables/maildata.html">$maildata</a>) {
<a name="l187"><span class="linenum"> 187</span></a>  <span class="comment">        // Grab the new IMAP client.</span>
<a name="l188"><span class="linenum"> 188</span></a>          if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_imap_client')" href="../../../../_functions/get_imap_client.html" onMouseOver="funcPopup(event,'get_imap_client')">get_imap_client</a>()) {
<a name="l189"><span class="linenum"> 189</span></a>              return false;
<a name="l190"><span class="linenum"> 190</span></a>          }
<a name="l191"><span class="linenum"> 191</span></a>  
<a name="l192"><span class="linenum"> 192</span></a>  <span class="comment">        // Build the search.</span>
<a name="l193"><span class="linenum"> 193</span></a>          <a class="var it1502" onMouseOver="hilite(1502)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../../_variables/search.html">$search</a> = new \Horde_Imap_Client_Search_Query();
<a name="l194"><span class="linenum"> 194</span></a>  <span class="comment">        // When dealing with Inbound Message messages, we mark them as flagged and seen. Restrict the search to those criterion.</span>
<a name="l195"><span class="linenum"> 195</span></a>          <a class="var it1502" onMouseOver="hilite(1502)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../../_variables/search.html">$search</a>-&gt;<a class="function" onClick="logFunction('flag')" href="../../../../_functions/flag.html" onMouseOver="funcPopup(event,'flag')">flag</a>(self::MESSAGE_SEEN, true);
<a name="l196"><span class="linenum"> 196</span></a>          <a class="var it1502" onMouseOver="hilite(1502)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../../_variables/search.html">$search</a>-&gt;<a class="function" onClick="logFunction('flag')" href="../../../../_functions/flag.html" onMouseOver="funcPopup(event,'flag')">flag</a>(self::MESSAGE_FLAGGED, true);
<a name="l197"><span class="linenum"> 197</span></a>          <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;Searching for a Seen, Flagged message in the folder '&quot; . self::CONFIRMATIONFOLDER . &quot;'&quot;);
<a name="l198"><span class="linenum"> 198</span></a>  
<a name="l199"><span class="linenum"> 199</span></a>  <span class="comment">        // Match the message ID.</span>
<a name="l200"><span class="linenum"> 200</span></a>          <a class="var it1502" onMouseOver="hilite(1502)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../../_variables/search.html">$search</a>-&gt;<a class="function" onClick="logFunction('headerText')" href="../../../../_functions/headertext.html" onMouseOver="funcPopup(event,'headertext')">headerText</a>('message-id', <a class="var it18816" onMouseOver="hilite(18816)" onMouseOut="lolite()" onClick="logVariable('maildata')" href="../../../../_variables/maildata.html">$maildata</a>-&gt;<a onClick="logVariable('messageid')" class="var it39712" onMouseOver="hilite(39712)" onMouseOut="lolite()" href="../../../../_variables/messageid.html">messageid</a>);
<a name="l201"><span class="linenum"> 201</span></a>          <a class="var it1502" onMouseOver="hilite(1502)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../../_variables/search.html">$search</a>-&gt;<a class="function" onClick="logFunction('headerText')" href="../../../../_functions/headertext.html" onMouseOver="funcPopup(event,'headertext')">headerText</a>('to', <a class="var it18816" onMouseOver="hilite(18816)" onMouseOut="lolite()" onClick="logVariable('maildata')" href="../../../../_variables/maildata.html">$maildata</a>-&gt;<a onClick="logVariable('address')" class="var it39712" onMouseOver="hilite(39712)" onMouseOut="lolite()" href="../../../../_variables/address.html">address</a>);
<a name="l202"><span class="linenum"> 202</span></a>  
<a name="l203"><span class="linenum"> 203</span></a>          <a class="var it594" onMouseOver="hilite(594)" onMouseOut="lolite()" onClick="logVariable('results')" href="../../../../_variables/results.html">$results</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('search')" href="../../../../_functions/search.html" onMouseOver="funcPopup(event,'search')">search</a>(self::CONFIRMATIONFOLDER, <a class="var it1502" onMouseOver="hilite(1502)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../../_variables/search.html">$search</a>);
<a name="l204"><span class="linenum"> 204</span></a>  
<a name="l205"><span class="linenum"> 205</span></a>  <span class="comment">        // Build the base query.</span>
<a name="l206"><span class="linenum"> 206</span></a>          <a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a> = new \Horde_Imap_Client_Fetch_Query();
<a name="l207"><span class="linenum"> 207</span></a>          <a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>-&gt;<a class="function" onClick="logFunction('envelope')" href="../../../../_functions/envelope.html" onMouseOver="funcPopup(event,'envelope')">envelope</a>();
<a name="l208"><span class="linenum"> 208</span></a>          <a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>-&gt;<a class="function" onClick="logFunction('structure')" href="../../../../_functions/structure.html" onMouseOver="funcPopup(event,'structure')">structure</a>();
<a name="l209"><span class="linenum"> 209</span></a>  
<a name="l210"><span class="linenum"> 210</span></a>  
<a name="l211"><span class="linenum"> 211</span></a>  <span class="comment">        // Fetch the first message from the client.</span>
<a name="l212"><span class="linenum"> 212</span></a>          <a class="var it1262" onMouseOver="hilite(1262)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../../../../_variables/messages.html">$messages</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('fetch')" href="../../../../_functions/fetch.html" onMouseOver="funcPopup(event,'fetch')">fetch</a>(self::CONFIRMATIONFOLDER, <a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>, array('ids' =&gt; <a class="var it594" onMouseOver="hilite(594)" onMouseOut="lolite()" onClick="logVariable('results')" href="../../../../_variables/results.html">$results</a>['match']));
<a name="l213"><span class="linenum"> 213</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addressmanager')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/addressmanager.html">addressmanager</a> = new \core\message\inbound\address_manager();
<a name="l214"><span class="linenum"> 214</span></a>          if (<a class="var it643" onMouseOver="hilite(643)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a> = <a class="var it1262" onMouseOver="hilite(1262)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../../../../_variables/messages.html">$messages</a>-&gt;<a class="function" onClick="logFunction('first')" href="../../../../_functions/first.html" onMouseOver="funcPopup(event,'first')">first</a>()) {
<a name="l215"><span class="linenum"> 215</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;--&gt; Found the message. Passing back to the pickup system.&quot;);
<a name="l216"><span class="linenum"> 216</span></a>  
<a name="l217"><span class="linenum"> 217</span></a>  <span class="comment">            // Process the message.</span>
<a name="l218"><span class="linenum"> 218</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_message')" href="../../../../_functions/process_message.html" onMouseOver="funcPopup(event,'process_message')">process_message</a>(<a class="var it643" onMouseOver="hilite(643)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a>, true, true);
<a name="l219"><span class="linenum"> 219</span></a>  
<a name="l220"><span class="linenum"> 220</span></a>  <span class="comment">            // Close the client connection.</span>
<a name="l221"><span class="linenum"> 221</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('close_connection')" href="../../../../_functions/close_connection.html" onMouseOver="funcPopup(event,'close_connection')">close_connection</a>();
<a name="l222"><span class="linenum"> 222</span></a>  
<a name="l223"><span class="linenum"> 223</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;============================================================================&quot;);
<a name="l224"><span class="linenum"> 224</span></a>              return true;
<a name="l225"><span class="linenum"> 225</span></a>          } else {
<a name="l226"><span class="linenum"> 226</span></a>  <span class="comment">            // Close the client connection.</span>
<a name="l227"><span class="linenum"> 227</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('close_connection')" href="../../../../_functions/close_connection.html" onMouseOver="funcPopup(event,'close_connection')">close_connection</a>();
<a name="l228"><span class="linenum"> 228</span></a>  
<a name="l229"><span class="linenum"> 229</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;============================================================================&quot;);
<a name="l230"><span class="linenum"> 230</span></a>              throw new \core\message\inbound\processing_failed_exception('oldmessagenotfound', 'tool_messageinbound');
<a name="l231"><span class="linenum"> 231</span></a>          }
<a name="l232"><span class="linenum"> 232</span></a>      }
<a name="l233"><span class="linenum"> 233</span></a>  
<a name="l234"><span class="linenum"> 234</span></a>      <span class="comment">/**</span>
<a name="l235"><span class="linenum"> 235</span></a>  <span class="comment">     * Tidy up old messages in the confirmation folder.</span>
<a name="l236"><span class="linenum"> 236</span></a>  <span class="comment">     *</span>
<a name="l237"><span class="linenum"> 237</span></a>  <span class="comment">     * @return bool Whether tidying occurred successfully.</span>
<a name="l238"><span class="linenum"> 238</span></a>  <span class="comment">     */</span>
<a name="l239"><span class="linenum"> 239</span></a>      public function <a class="function" onClick="logFunction('tidy_old_messages')" href="../../../../_functions/tidy_old_messages.html" onMouseOver="funcPopup(event,'tidy_old_messages')">tidy_old_messages</a>() {
<a name="l240"><span class="linenum"> 240</span></a>  <span class="comment">        // Grab the new IMAP client.</span>
<a name="l241"><span class="linenum"> 241</span></a>          if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_imap_client')" href="../../../../_functions/get_imap_client.html" onMouseOver="funcPopup(event,'get_imap_client')">get_imap_client</a>()) {
<a name="l242"><span class="linenum"> 242</span></a>              return false;
<a name="l243"><span class="linenum"> 243</span></a>          }
<a name="l244"><span class="linenum"> 244</span></a>  
<a name="l245"><span class="linenum"> 245</span></a>  <span class="comment">        // Open the mailbox.</span>
<a name="l246"><span class="linenum"> 246</span></a>          <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;Searching for messages older than 24 hours in the '&quot; .
<a name="l247"><span class="linenum"> 247</span></a>                  self::CONFIRMATIONFOLDER . &quot;' folder.&quot;);
<a name="l248"><span class="linenum"> 248</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('openMailbox')" href="../../../../_functions/openmailbox.html" onMouseOver="funcPopup(event,'openmailbox')">openMailbox</a>(self::CONFIRMATIONFOLDER);
<a name="l249"><span class="linenum"> 249</span></a>  
<a name="l250"><span class="linenum"> 250</span></a>          <a class="var it9649" onMouseOver="hilite(9649)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_mailbox')" href="../../../../_functions/get_mailbox.html" onMouseOver="funcPopup(event,'get_mailbox')">get_mailbox</a>();
<a name="l251"><span class="linenum"> 251</span></a>  
<a name="l252"><span class="linenum"> 252</span></a>  <span class="comment">        // Build the search.</span>
<a name="l253"><span class="linenum"> 253</span></a>          <a class="var it1502" onMouseOver="hilite(1502)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../../_variables/search.html">$search</a> = new \Horde_Imap_Client_Search_Query();
<a name="l254"><span class="linenum"> 254</span></a>  
<a name="l255"><span class="linenum"> 255</span></a>  <span class="comment">        // Delete messages older than 24 hours old.</span>
<a name="l256"><span class="linenum"> 256</span></a>          <a class="var it1502" onMouseOver="hilite(1502)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../../_variables/search.html">$search</a>-&gt;<a class="function" onClick="logFunction('intervalSearch')" href="../../../../_functions/intervalsearch.html" onMouseOver="funcPopup(event,'intervalsearch')">intervalSearch</a>(<a class="constant" onClick="logConstant('DAYSECS')" href="../../../../_constants/DAYSECS.html" onMouseOver="constPopup(event,'DAYSECS')">DAYSECS</a>, \<a class="class" onClick="logClass('Horde_Imap_Client_Search_Query')" href="../../../../_classes/horde_imap_client_search_query.html" onMouseOver="classPopup(event,'horde_imap_client_search_query')">Horde_Imap_Client_Search_Query</a>::INTERVAL_OLDER);
<a name="l257"><span class="linenum"> 257</span></a>  
<a name="l258"><span class="linenum"> 258</span></a>          <a class="var it594" onMouseOver="hilite(594)" onMouseOut="lolite()" onClick="logVariable('results')" href="../../../../_variables/results.html">$results</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('search')" href="../../../../_functions/search.html" onMouseOver="funcPopup(event,'search')">search</a>(<a class="var it9649" onMouseOver="hilite(9649)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a>, <a class="var it1502" onMouseOver="hilite(1502)" onMouseOut="lolite()" onClick="logVariable('search')" href="../../../../_variables/search.html">$search</a>);
<a name="l259"><span class="linenum"> 259</span></a>  
<a name="l260"><span class="linenum"> 260</span></a>  <span class="comment">        // Build the base query.</span>
<a name="l261"><span class="linenum"> 261</span></a>          <a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a> = new \Horde_Imap_Client_Fetch_Query();
<a name="l262"><span class="linenum"> 262</span></a>          <a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>-&gt;<a class="function" onClick="logFunction('envelope')" href="../../../../_functions/envelope.html" onMouseOver="funcPopup(event,'envelope')">envelope</a>();
<a name="l263"><span class="linenum"> 263</span></a>  
<a name="l264"><span class="linenum"> 264</span></a>  <span class="comment">        // Retrieve the messages and mark them for removal.</span>
<a name="l265"><span class="linenum"> 265</span></a>          <a class="var it1262" onMouseOver="hilite(1262)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../../../../_variables/messages.html">$messages</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('fetch')" href="../../../../_functions/fetch.html" onMouseOver="funcPopup(event,'fetch')">fetch</a>(<a class="var it9649" onMouseOver="hilite(9649)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a>, <a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>, array('ids' =&gt; <a class="var it594" onMouseOver="hilite(594)" onMouseOut="lolite()" onClick="logVariable('results')" href="../../../../_variables/results.html">$results</a>['match']));
<a name="l266"><span class="linenum"> 266</span></a>          <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;Found &quot; . <a class="var it1262" onMouseOver="hilite(1262)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../../../../_variables/messages.html">$messages</a>-&gt;<a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>() . &quot; messages for removal.&quot;);
<a name="l267"><span class="linenum"> 267</span></a>          foreach (<a class="var it1262" onMouseOver="hilite(1262)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../../../../_variables/messages.html">$messages</a> as <a class="var it643" onMouseOver="hilite(643)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a>) {
<a name="l268"><span class="linenum"> 268</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_flag_to_message')" href="../../../../_functions/add_flag_to_message.html" onMouseOver="funcPopup(event,'add_flag_to_message')">add_flag_to_message</a>(<a class="var it643" onMouseOver="hilite(643)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a>-&gt;<a class="function" onClick="logFunction('getUid')" href="../../../../_functions/getuid.html" onMouseOver="funcPopup(event,'getuid')">getUid</a>(), self::MESSAGE_DELETED);
<a name="l269"><span class="linenum"> 269</span></a>          }
<a name="l270"><span class="linenum"> 270</span></a>  
<a name="l271"><span class="linenum"> 271</span></a>          <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;Finished removing messages.&quot;);
<a name="l272"><span class="linenum"> 272</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('close_connection')" href="../../../../_functions/close_connection.html" onMouseOver="funcPopup(event,'close_connection')">close_connection</a>();
<a name="l273"><span class="linenum"> 273</span></a>  
<a name="l274"><span class="linenum"> 274</span></a>          return true;
<a name="l275"><span class="linenum"> 275</span></a>      }
<a name="l276"><span class="linenum"> 276</span></a>  
<a name="l277"><span class="linenum"> 277</span></a>      <span class="comment">/**</span>
<a name="l278"><span class="linenum"> 278</span></a>  <span class="comment">     * Process a message and pass it through the Inbound Message handling systems.</span>
<a name="l279"><span class="linenum"> 279</span></a>  <span class="comment">     *</span>
<a name="l280"><span class="linenum"> 280</span></a>  <span class="comment">     * @param \Horde_Imap_Client_Data_Fetch $message The message to process</span>
<a name="l281"><span class="linenum"> 281</span></a>  <span class="comment">     * @param bool $viewreadmessages Whether to also look at messages which have been marked as read</span>
<a name="l282"><span class="linenum"> 282</span></a>  <span class="comment">     * @param bool $skipsenderverification Whether to skip the sender verification stage</span>
<a name="l283"><span class="linenum"> 283</span></a>  <span class="comment">     */</span>
<a name="l284"><span class="linenum"> 284</span></a>      public function <a class="function" onClick="logFunction('process_message')" href="../../../../_functions/process_message.html" onMouseOver="funcPopup(event,'process_message')">process_message</a>(
<a name="l285"><span class="linenum"> 285</span></a>              \Horde_Imap_Client_Data_Fetch <a class="var it643" onMouseOver="hilite(643)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a>,
<a name="l286"><span class="linenum"> 286</span></a>              <a class="var it24569" onMouseOver="hilite(24569)" onMouseOut="lolite()" onClick="logVariable('viewreadmessages')" href="../../../../_variables/viewreadmessages.html">$viewreadmessages</a> = false,
<a name="l287"><span class="linenum"> 287</span></a>              <a class="var it24570" onMouseOver="hilite(24570)" onMouseOut="lolite()" onClick="logVariable('skipsenderverification')" href="../../../../_variables/skipsenderverification.html">$skipsenderverification</a> = false) {
<a name="l288"><span class="linenum"> 288</span></a>          global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>;
<a name="l289"><span class="linenum"> 289</span></a>  
<a name="l290"><span class="linenum"> 290</span></a>  <span class="comment">        // We use the Client IDs several times - store them here.</span>
<a name="l291"><span class="linenum"> 291</span></a>          <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a> = new \Horde_Imap_Client_Ids(<a class="var it643" onMouseOver="hilite(643)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a>-&gt;<a class="function" onClick="logFunction('getUid')" href="../../../../_functions/getuid.html" onMouseOver="funcPopup(event,'getuid')">getUid</a>());
<a name="l292"><span class="linenum"> 292</span></a>  
<a name="l293"><span class="linenum"> 293</span></a>          <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;- Parsing message &quot; . <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>);
<a name="l294"><span class="linenum"> 294</span></a>  
<a name="l295"><span class="linenum"> 295</span></a>  <span class="comment">        // First flag this message to prevent another running hitting this message while we look at the headers.</span>
<a name="l296"><span class="linenum"> 296</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_flag_to_message')" href="../../../../_functions/add_flag_to_message.html" onMouseOver="funcPopup(event,'add_flag_to_message')">add_flag_to_message</a>(<a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>, self::MESSAGE_FLAGGED);
<a name="l297"><span class="linenum"> 297</span></a>  
<a name="l298"><span class="linenum"> 298</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_bulk_message')" href="../../../../_functions/is_bulk_message.html" onMouseOver="funcPopup(event,'is_bulk_message')">is_bulk_message</a>(<a class="var it643" onMouseOver="hilite(643)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a>, <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>)) {
<a name="l299"><span class="linenum"> 299</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;- The message has a bulk header set. This is likely an auto-generated reply - discarding.&quot;);
<a name="l300"><span class="linenum"> 300</span></a>              return;
<a name="l301"><span class="linenum"> 301</span></a>          }
<a name="l302"><span class="linenum"> 302</span></a>  
<a name="l303"><span class="linenum"> 303</span></a>  <span class="comment">        // Record the user that this script is currently being run as.  This is important when re-processing existing</span>
<a name="l304"><span class="linenum"> 304</span></a>  <span class="comment">        // messages, as cron_setup_user is called multiple times.</span>
<a name="l305"><span class="linenum"> 305</span></a>          <a class="var it24571" onMouseOver="hilite(24571)" onMouseOut="lolite()" onClick="logVariable('originaluser')" href="../../../../_variables/originaluser.html">$originaluser</a> = <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>;
<a name="l306"><span class="linenum"> 306</span></a>  
<a name="l307"><span class="linenum"> 307</span></a>          <a class="var it1427" onMouseOver="hilite(1427)" onMouseOut="lolite()" onClick="logVariable('envelope')" href="../../../../_variables/envelope.html">$envelope</a> = <a class="var it643" onMouseOver="hilite(643)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a>-&gt;<a class="function" onClick="logFunction('getEnvelope')" href="../../../../_functions/getenvelope.html" onMouseOver="funcPopup(event,'getenvelope')">getEnvelope</a>();
<a name="l308"><span class="linenum"> 308</span></a>          <a class="var it4436" onMouseOver="hilite(4436)" onMouseOut="lolite()" onClick="logVariable('recipients')" href="../../../../_variables/recipients.html">$recipients</a> = <a class="var it1427" onMouseOver="hilite(1427)" onMouseOut="lolite()" onClick="logVariable('envelope')" href="../../../../_variables/envelope.html">$envelope</a>-&gt;<a onClick="logVariable('to')" class="var it39713" onMouseOver="hilite(39713)" onMouseOut="lolite()" href="../../../../_variables/to.html">to</a>-&gt;bare_addresses;
<a name="l309"><span class="linenum"> 309</span></a>          foreach (<a class="var it4436" onMouseOver="hilite(4436)" onMouseOut="lolite()" onClick="logVariable('recipients')" href="../../../../_variables/recipients.html">$recipients</a> as <a class="var it3859" onMouseOver="hilite(3859)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../../_variables/recipient.html">$recipient</a>) {
<a name="l310"><span class="linenum"> 310</span></a>              if (!\core\message\inbound\<a class="class" onClick="logClass('address_manager')" href="../../../../_classes/address_manager.html" onMouseOver="classPopup(event,'address_manager')">address_manager</a>::<a class="function" onClick="logFunction('is_correct_format')" href="../../../../_functions/is_correct_format.html" onMouseOver="funcPopup(event,'is_correct_format')">is_correct_format</a>(<a class="var it3859" onMouseOver="hilite(3859)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../../_variables/recipient.html">$recipient</a>)) {
<a name="l311"><span class="linenum"> 311</span></a>  <span class="comment">                // Message did not contain a subaddress.</span>
<a name="l312"><span class="linenum"> 312</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;- Recipient '{<a class="var it3859" onMouseOver="hilite(3859)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../../_variables/recipient.html">$recipient</a>}' did not match Inbound Message headers.&quot;);
<a name="l313"><span class="linenum"> 313</span></a>                  continue;
<a name="l314"><span class="linenum"> 314</span></a>              }
<a name="l315"><span class="linenum"> 315</span></a>  
<a name="l316"><span class="linenum"> 316</span></a>  <span class="comment">            // Message contained a match.</span>
<a name="l317"><span class="linenum"> 317</span></a>              <a class="var it24572" onMouseOver="hilite(24572)" onMouseOut="lolite()" onClick="logVariable('senders')" href="../../../../_variables/senders.html">$senders</a> = <a class="var it643" onMouseOver="hilite(643)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a>-&gt;<a class="function" onClick="logFunction('getEnvelope')" href="../../../../_functions/getenvelope.html" onMouseOver="funcPopup(event,'getenvelope')">getEnvelope</a>()-&gt;from-&gt;bare_addresses;
<a name="l318"><span class="linenum"> 318</span></a>              if (<a class="phpfunction" onClick="logFunction('count')" href="../../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it24572" onMouseOver="hilite(24572)" onMouseOut="lolite()" onClick="logVariable('senders')" href="../../../../_variables/senders.html">$senders</a>) !== 1) {
<a name="l319"><span class="linenum"> 319</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;- Received multiple senders. Only the first sender will be used.&quot;);
<a name="l320"><span class="linenum"> 320</span></a>              }
<a name="l321"><span class="linenum"> 321</span></a>              <a class="var it22107" onMouseOver="hilite(22107)" onMouseOut="lolite()" onClick="logVariable('sender')" href="../../../../_variables/sender.html">$sender</a> = <a class="phpfunction" onClick="logFunction('array_shift')" href="../../../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it24572" onMouseOver="hilite(24572)" onMouseOut="lolite()" onClick="logVariable('senders')" href="../../../../_variables/senders.html">$senders</a>);
<a name="l322"><span class="linenum"> 322</span></a>  
<a name="l323"><span class="linenum"> 323</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-- Subject:\t&quot;      . <a class="var it1427" onMouseOver="hilite(1427)" onMouseOut="lolite()" onClick="logVariable('envelope')" href="../../../../_variables/envelope.html">$envelope</a>-&gt;<a onClick="logVariable('subject')" class="var it39713" onMouseOver="hilite(39713)" onMouseOut="lolite()" href="../../../../_variables/subject.html">subject</a>);
<a name="l324"><span class="linenum"> 324</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-- From:\t&quot;         . <a class="var it22107" onMouseOver="hilite(22107)" onMouseOut="lolite()" onClick="logVariable('sender')" href="../../../../_variables/sender.html">$sender</a>);
<a name="l325"><span class="linenum"> 325</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-- Recipient:\t&quot;    . <a class="var it3859" onMouseOver="hilite(3859)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../../_variables/recipient.html">$recipient</a>);
<a name="l326"><span class="linenum"> 326</span></a>  
<a name="l327"><span class="linenum"> 327</span></a>  <span class="comment">            // Grab messagedata including flags.</span>
<a name="l328"><span class="linenum"> 328</span></a>              <a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a> = new \Horde_Imap_Client_Fetch_Query();
<a name="l329"><span class="linenum"> 329</span></a>              <a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>-&gt;<a class="function" onClick="logFunction('structure')" href="../../../../_functions/structure.html" onMouseOver="funcPopup(event,'structure')">structure</a>();
<a name="l330"><span class="linenum"> 330</span></a>              <a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('fetch')" href="../../../../_functions/fetch.html" onMouseOver="funcPopup(event,'fetch')">fetch</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_mailbox')" href="../../../../_functions/get_mailbox.html" onMouseOver="funcPopup(event,'get_mailbox')">get_mailbox</a>(), <a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>, array(
<a name="l331"><span class="linenum"> 331</span></a>                  'ids' =&gt; <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>,
<a name="l332"><span class="linenum"> 332</span></a>              ))-&gt;<a class="function" onClick="logFunction('first')" href="../../../../_functions/first.html" onMouseOver="funcPopup(event,'first')">first</a>();
<a name="l333"><span class="linenum"> 333</span></a>  
<a name="l334"><span class="linenum"> 334</span></a>              if (!<a class="var it24569" onMouseOver="hilite(24569)" onMouseOut="lolite()" onClick="logVariable('viewreadmessages')" href="../../../../_variables/viewreadmessages.html">$viewreadmessages</a> &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('message_has_flag')" href="../../../../_functions/message_has_flag.html" onMouseOver="funcPopup(event,'message_has_flag')">message_has_flag</a>(<a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>, self::MESSAGE_SEEN)) {
<a name="l335"><span class="linenum"> 335</span></a>  <span class="comment">                // Something else has already seen this message. Skip it now.</span>
<a name="l336"><span class="linenum"> 336</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-- Skipping the message - it has been marked as seen - perhaps by another process.&quot;);
<a name="l337"><span class="linenum"> 337</span></a>                  continue;
<a name="l338"><span class="linenum"> 338</span></a>              }
<a name="l339"><span class="linenum"> 339</span></a>  
<a name="l340"><span class="linenum"> 340</span></a>  <span class="comment">            // Mark it as read to lock the message.</span>
<a name="l341"><span class="linenum"> 341</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_flag_to_message')" href="../../../../_functions/add_flag_to_message.html" onMouseOver="funcPopup(event,'add_flag_to_message')">add_flag_to_message</a>(<a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>, self::MESSAGE_SEEN);
<a name="l342"><span class="linenum"> 342</span></a>  
<a name="l343"><span class="linenum"> 343</span></a>  <span class="comment">            // Now pass it through the Inbound Message processor.</span>
<a name="l344"><span class="linenum"> 344</span></a>              <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../../_variables/status.html">$status</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addressmanager')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/addressmanager.html">addressmanager</a>-&gt;<a class="function" onClick="logFunction('process_envelope')" href="../../../../_functions/process_envelope.html" onMouseOver="funcPopup(event,'process_envelope')">process_envelope</a>(<a class="var it3859" onMouseOver="hilite(3859)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../../_variables/recipient.html">$recipient</a>, <a class="var it22107" onMouseOver="hilite(22107)" onMouseOut="lolite()" onClick="logVariable('sender')" href="../../../../_variables/sender.html">$sender</a>);
<a name="l345"><span class="linenum"> 345</span></a>  
<a name="l346"><span class="linenum"> 346</span></a>              if ((<a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../../_variables/status.html">$status</a> &amp; ~ \core\message\inbound\<a class="class" onClick="logClass('address_manager')" href="../../../../_classes/address_manager.html" onMouseOver="classPopup(event,'address_manager')">address_manager</a>::VALIDATION_DISABLED_HANDLER) !== <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../../_variables/status.html">$status</a>) {
<a name="l347"><span class="linenum"> 347</span></a>  <span class="comment">                // The handler is disabled.</span>
<a name="l348"><span class="linenum"> 348</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-- Skipped message - Handler is disabled. Fail code {<a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../../_variables/status.html">$status</a>}&quot;);
<a name="l349"><span class="linenum"> 349</span></a>  <span class="comment">                // In order to handle the user error, we need more information about the message being failed.</span>
<a name="l350"><span class="linenum"> 350</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_message_data')" href="../../../../_functions/process_message_data.html" onMouseOver="funcPopup(event,'process_message_data')">process_message_data</a>(<a class="var it1427" onMouseOver="hilite(1427)" onMouseOut="lolite()" onClick="logVariable('envelope')" href="../../../../_variables/envelope.html">$envelope</a>, <a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>, <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>);
<a name="l351"><span class="linenum"> 351</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('inform_user_of_error')" href="../../../../_functions/inform_user_of_error.html" onMouseOver="funcPopup(event,'inform_user_of_error')">inform_user_of_error</a>(<a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('handlerdisabled', 'tool_messageinbound', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>));
<a name="l352"><span class="linenum"> 352</span></a>                  return;
<a name="l353"><span class="linenum"> 353</span></a>              }
<a name="l354"><span class="linenum"> 354</span></a>  
<a name="l355"><span class="linenum"> 355</span></a>  <span class="comment">            // Check the validation status early. No point processing garbage messages, but we do need to process it</span>
<a name="l356"><span class="linenum"> 356</span></a>  <span class="comment">            // for some validation failure types.</span>
<a name="l357"><span class="linenum"> 357</span></a>              if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('passes_key_validation')" href="../../../../_functions/passes_key_validation.html" onMouseOver="funcPopup(event,'passes_key_validation')">passes_key_validation</a>(<a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../../_variables/status.html">$status</a>, <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>)) {
<a name="l358"><span class="linenum"> 358</span></a>  <span class="comment">                // None of the above validation failures were found. Skip this message.</span>
<a name="l359"><span class="linenum"> 359</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-- Skipped message - it does not appear to relate to a Inbound Message pickup. Fail code {<a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../../_variables/status.html">$status</a>}&quot;);
<a name="l360"><span class="linenum"> 360</span></a>  
<a name="l361"><span class="linenum"> 361</span></a>  <span class="comment">                // Remove the seen flag from the message as there may be multiple recipients.</span>
<a name="l362"><span class="linenum"> 362</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('remove_flag_from_message')" href="../../../../_functions/remove_flag_from_message.html" onMouseOver="funcPopup(event,'remove_flag_from_message')">remove_flag_from_message</a>(<a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>, self::MESSAGE_SEEN);
<a name="l363"><span class="linenum"> 363</span></a>  
<a name="l364"><span class="linenum"> 364</span></a>  <span class="comment">                // Skip further processing for this recipient.</span>
<a name="l365"><span class="linenum"> 365</span></a>                  continue;
<a name="l366"><span class="linenum"> 366</span></a>              }
<a name="l367"><span class="linenum"> 367</span></a>  
<a name="l368"><span class="linenum"> 368</span></a>  <span class="comment">            // Process the message as the user.</span>
<a name="l369"><span class="linenum"> 369</span></a>              <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../../_variables/user.html">$user</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addressmanager')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/addressmanager.html">addressmanager</a>-&gt;<a class="function" onClick="logFunction('get_data')" href="../../../../_functions/get_data.html" onMouseOver="funcPopup(event,'get_data')">get_data</a>()-&gt;user;
<a name="l370"><span class="linenum"> 370</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-- Processing the message as user {<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>} ({<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('username')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../../../../_variables/username.html">username</a>}).&quot;);
<a name="l371"><span class="linenum"> 371</span></a>              <a class="function" onClick="logFunction('cron_setup_user')" href="../../../../_functions/cron_setup_user.html" onMouseOver="funcPopup(event,'cron_setup_user')">cron_setup_user</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../../../_variables/user.html">$user</a>);
<a name="l372"><span class="linenum"> 372</span></a>  
<a name="l373"><span class="linenum"> 373</span></a>  <span class="comment">            // Process and retrieve the message data for this message.</span>
<a name="l374"><span class="linenum"> 374</span></a>  <span class="comment">            // This includes fetching the full content, as well as all headers, and attachments.</span>
<a name="l375"><span class="linenum"> 375</span></a>              if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_message_data')" href="../../../../_functions/process_message_data.html" onMouseOver="funcPopup(event,'process_message_data')">process_message_data</a>(<a class="var it1427" onMouseOver="hilite(1427)" onMouseOut="lolite()" onClick="logVariable('envelope')" href="../../../../_variables/envelope.html">$envelope</a>, <a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>, <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>)) {
<a name="l376"><span class="linenum"> 376</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;--- Message could not be found on the server. Is another process removing messages?&quot;);
<a name="l377"><span class="linenum"> 377</span></a>                  return;
<a name="l378"><span class="linenum"> 378</span></a>              }
<a name="l379"><span class="linenum"> 379</span></a>  
<a name="l380"><span class="linenum"> 380</span></a>  <span class="comment">            // When processing validation replies, we need to skip the sender verification phase as this has been</span>
<a name="l381"><span class="linenum"> 381</span></a>  <span class="comment">            // manually completed.</span>
<a name="l382"><span class="linenum"> 382</span></a>              if (!<a class="var it24570" onMouseOver="hilite(24570)" onMouseOut="lolite()" onClick="logVariable('skipsenderverification')" href="../../../../_variables/skipsenderverification.html">$skipsenderverification</a> &amp;&amp; <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../../_variables/status.html">$status</a> !== 0) {
<a name="l383"><span class="linenum"> 383</span></a>  <span class="comment">                // Check the validation status for failure types which require confirmation.</span>
<a name="l384"><span class="linenum"> 384</span></a>  <span class="comment">                // The validation result is tested in a bitwise operation.</span>
<a name="l385"><span class="linenum"> 385</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-- Message did not meet validation but is possibly recoverable. Fail code {<a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../../_variables/status.html">$status</a>}&quot;);
<a name="l386"><span class="linenum"> 386</span></a>  <span class="comment">                // This is a recoverable error, but requires user input.</span>
<a name="l387"><span class="linenum"> 387</span></a>  
<a name="l388"><span class="linenum"> 388</span></a>                  if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('handle_verification_failure')" href="../../../../_functions/handle_verification_failure.html" onMouseOver="funcPopup(event,'handle_verification_failure')">handle_verification_failure</a>(<a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>, <a class="var it3859" onMouseOver="hilite(3859)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../../_variables/recipient.html">$recipient</a>)) {
<a name="l389"><span class="linenum"> 389</span></a>                      <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;--- Original message retained on mail server and confirmation message sent to user.&quot;);
<a name="l390"><span class="linenum"> 390</span></a>                  } else {
<a name="l391"><span class="linenum"> 391</span></a>                      <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;--- Invalid Recipient Handler - unable to save. Informing the user of the failure.&quot;);
<a name="l392"><span class="linenum"> 392</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('inform_user_of_error')" href="../../../../_functions/inform_user_of_error.html" onMouseOver="funcPopup(event,'inform_user_of_error')">inform_user_of_error</a>(<a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('invalidrecipientfinal', 'tool_messageinbound', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>));
<a name="l393"><span class="linenum"> 393</span></a>                  }
<a name="l394"><span class="linenum"> 394</span></a>  
<a name="l395"><span class="linenum"> 395</span></a>  <span class="comment">                // Returning to normal cron user.</span>
<a name="l396"><span class="linenum"> 396</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-- Returning to the original user.&quot;);
<a name="l397"><span class="linenum"> 397</span></a>                  <a class="function" onClick="logFunction('cron_setup_user')" href="../../../../_functions/cron_setup_user.html" onMouseOver="funcPopup(event,'cron_setup_user')">cron_setup_user</a>(<a class="var it24571" onMouseOver="hilite(24571)" onMouseOut="lolite()" onClick="logVariable('originaluser')" href="../../../../_variables/originaluser.html">$originaluser</a>);
<a name="l398"><span class="linenum"> 398</span></a>                  return;
<a name="l399"><span class="linenum"> 399</span></a>              }
<a name="l400"><span class="linenum"> 400</span></a>  
<a name="l401"><span class="linenum"> 401</span></a>  <span class="comment">            // Add the content and attachment data.</span>
<a name="l402"><span class="linenum"> 402</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-- Validation completed. Fetching rest of message content.&quot;);
<a name="l403"><span class="linenum"> 403</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_message_data_body')" href="../../../../_functions/process_message_data_body.html" onMouseOver="funcPopup(event,'process_message_data_body')">process_message_data_body</a>(<a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>, <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>);
<a name="l404"><span class="linenum"> 404</span></a>  
<a name="l405"><span class="linenum"> 405</span></a>  <span class="comment">            // The message processor throws exceptions upon failure. These must be caught and notifications sent to</span>
<a name="l406"><span class="linenum"> 406</span></a>  <span class="comment">            // the user here.</span>
<a name="l407"><span class="linenum"> 407</span></a>              try {
<a name="l408"><span class="linenum"> 408</span></a>                  <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('send_to_handler')" href="../../../../_functions/send_to_handler.html" onMouseOver="funcPopup(event,'send_to_handler')">send_to_handler</a>();
<a name="l409"><span class="linenum"> 409</span></a>              } catch (\core\message\inbound\processing_failed_exception <a class="var it193" onMouseOver="hilite(193)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../../../_variables/e.html">$e</a>) {
<a name="l410"><span class="linenum"> 410</span></a>  <span class="comment">                // We know about these kinds of errors and they should result in the user being notified of the</span>
<a name="l411"><span class="linenum"> 411</span></a>  <span class="comment">                // failure. Send the user a notification here.</span>
<a name="l412"><span class="linenum"> 412</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('inform_user_of_error')" href="../../../../_functions/inform_user_of_error.html" onMouseOver="funcPopup(event,'inform_user_of_error')">inform_user_of_error</a>(<a class="var it193" onMouseOver="hilite(193)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>());
<a name="l413"><span class="linenum"> 413</span></a>  
<a name="l414"><span class="linenum"> 414</span></a>  <span class="comment">                // Returning to normal cron user.</span>
<a name="l415"><span class="linenum"> 415</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-- Returning to the original user.&quot;);
<a name="l416"><span class="linenum"> 416</span></a>                  <a class="function" onClick="logFunction('cron_setup_user')" href="../../../../_functions/cron_setup_user.html" onMouseOver="funcPopup(event,'cron_setup_user')">cron_setup_user</a>(<a class="var it24571" onMouseOver="hilite(24571)" onMouseOut="lolite()" onClick="logVariable('originaluser')" href="../../../../_variables/originaluser.html">$originaluser</a>);
<a name="l417"><span class="linenum"> 417</span></a>                  return;
<a name="l418"><span class="linenum"> 418</span></a>              } catch (\Exception <a class="var it193" onMouseOver="hilite(193)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../../../_variables/e.html">$e</a>) {
<a name="l419"><span class="linenum"> 419</span></a>  <span class="comment">                // An unknown error occurred. The user is not informed, but the administrator is.</span>
<a name="l420"><span class="linenum"> 420</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-- Message processing failed. An unexpected exception was thrown. Details follow.&quot;);
<a name="l421"><span class="linenum"> 421</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(<a class="var it193" onMouseOver="hilite(193)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>());
<a name="l422"><span class="linenum"> 422</span></a>  
<a name="l423"><span class="linenum"> 423</span></a>  <span class="comment">                // Returning to normal cron user.</span>
<a name="l424"><span class="linenum"> 424</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-- Returning to the original user.&quot;);
<a name="l425"><span class="linenum"> 425</span></a>                  <a class="function" onClick="logFunction('cron_setup_user')" href="../../../../_functions/cron_setup_user.html" onMouseOver="funcPopup(event,'cron_setup_user')">cron_setup_user</a>(<a class="var it24571" onMouseOver="hilite(24571)" onMouseOut="lolite()" onClick="logVariable('originaluser')" href="../../../../_variables/originaluser.html">$originaluser</a>);
<a name="l426"><span class="linenum"> 426</span></a>                  return;
<a name="l427"><span class="linenum"> 427</span></a>              }
<a name="l428"><span class="linenum"> 428</span></a>  
<a name="l429"><span class="linenum"> 429</span></a>              if (<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a>) {
<a name="l430"><span class="linenum"> 430</span></a>  <span class="comment">                // Handle message cleanup. Messages are deleted once fully processed.</span>
<a name="l431"><span class="linenum"> 431</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-- Marking the message for removal.&quot;);
<a name="l432"><span class="linenum"> 432</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_flag_to_message')" href="../../../../_functions/add_flag_to_message.html" onMouseOver="funcPopup(event,'add_flag_to_message')">add_flag_to_message</a>(<a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>, self::MESSAGE_DELETED);
<a name="l433"><span class="linenum"> 433</span></a>              } else {
<a name="l434"><span class="linenum"> 434</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-- The Inbound Message processor did not return a success status. Skipping message removal.&quot;);
<a name="l435"><span class="linenum"> 435</span></a>              }
<a name="l436"><span class="linenum"> 436</span></a>  
<a name="l437"><span class="linenum"> 437</span></a>  <span class="comment">            // Returning to normal cron user.</span>
<a name="l438"><span class="linenum"> 438</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-- Returning to the original user.&quot;);
<a name="l439"><span class="linenum"> 439</span></a>              <a class="function" onClick="logFunction('cron_setup_user')" href="../../../../_functions/cron_setup_user.html" onMouseOver="funcPopup(event,'cron_setup_user')">cron_setup_user</a>(<a class="var it24571" onMouseOver="hilite(24571)" onMouseOut="lolite()" onClick="logVariable('originaluser')" href="../../../../_variables/originaluser.html">$originaluser</a>);
<a name="l440"><span class="linenum"> 440</span></a>  
<a name="l441"><span class="linenum"> 441</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-- Finished processing &quot; . <a class="var it643" onMouseOver="hilite(643)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a>-&gt;<a class="function" onClick="logFunction('getUid')" href="../../../../_functions/getuid.html" onMouseOver="funcPopup(event,'getuid')">getUid</a>());
<a name="l442"><span class="linenum"> 442</span></a>  
<a name="l443"><span class="linenum"> 443</span></a>  <span class="comment">            // Skip the outer loop too. The message has already been processed and it could be possible for there to</span>
<a name="l444"><span class="linenum"> 444</span></a>  <span class="comment">            // be two recipients in the envelope which match somehow.</span>
<a name="l445"><span class="linenum"> 445</span></a>              return;
<a name="l446"><span class="linenum"> 446</span></a>          }
<a name="l447"><span class="linenum"> 447</span></a>      }
<a name="l448"><span class="linenum"> 448</span></a>  
<a name="l449"><span class="linenum"> 449</span></a>      <span class="comment">/**</span>
<a name="l450"><span class="linenum"> 450</span></a>  <span class="comment">     * Process a message to retrieve it's header data without body and attachemnts.</span>
<a name="l451"><span class="linenum"> 451</span></a>  <span class="comment">     *</span>
<a name="l452"><span class="linenum"> 452</span></a>  <span class="comment">     * @param \Horde_Imap_Client_Data_Envelope $envelope The Envelope of the message</span>
<a name="l453"><span class="linenum"> 453</span></a>  <span class="comment">     * @param \Horde_Imap_Client_Data_Fetch $basemessagedata The structure and part of the message body</span>
<a name="l454"><span class="linenum"> 454</span></a>  <span class="comment">     * @param string|\Horde_Imap_Client_Ids $messageid The Hore message Uid</span>
<a name="l455"><span class="linenum"> 455</span></a>  <span class="comment">     * @return \stdClass The current value of the messagedata</span>
<a name="l456"><span class="linenum"> 456</span></a>  <span class="comment">     */</span>
<a name="l457"><span class="linenum"> 457</span></a>      private function <a class="function" onClick="logFunction('process_message_data')" href="../../../../_functions/process_message_data.html" onMouseOver="funcPopup(event,'process_message_data')">process_message_data</a>(
<a name="l458"><span class="linenum"> 458</span></a>              \Horde_Imap_Client_Data_Envelope <a class="var it1427" onMouseOver="hilite(1427)" onMouseOut="lolite()" onClick="logVariable('envelope')" href="../../../../_variables/envelope.html">$envelope</a>,
<a name="l459"><span class="linenum"> 459</span></a>              \Horde_Imap_Client_Data_Fetch <a class="var it24573" onMouseOver="hilite(24573)" onMouseOut="lolite()" onClick="logVariable('basemessagedata')" href="../../../../_variables/basemessagedata.html">$basemessagedata</a>,
<a name="l460"><span class="linenum"> 460</span></a>              <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>) {
<a name="l461"><span class="linenum"> 461</span></a>  
<a name="l462"><span class="linenum"> 462</span></a>  <span class="comment">        // Get the current mailbox.</span>
<a name="l463"><span class="linenum"> 463</span></a>          <a class="var it9649" onMouseOver="hilite(9649)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_mailbox')" href="../../../../_functions/get_mailbox.html" onMouseOver="funcPopup(event,'get_mailbox')">get_mailbox</a>();
<a name="l464"><span class="linenum"> 464</span></a>  
<a name="l465"><span class="linenum"> 465</span></a>  <span class="comment">        // We need the structure at various points below.</span>
<a name="l466"><span class="linenum"> 466</span></a>          <a class="var it997" onMouseOver="hilite(997)" onMouseOut="lolite()" onClick="logVariable('structure')" href="../../../../_variables/structure.html">$structure</a> = <a class="var it24573" onMouseOver="hilite(24573)" onMouseOut="lolite()" onClick="logVariable('basemessagedata')" href="../../../../_variables/basemessagedata.html">$basemessagedata</a>-&gt;<a class="function" onClick="logFunction('getStructure')" href="../../../../_functions/getstructure.html" onMouseOver="funcPopup(event,'getstructure')">getStructure</a>();
<a name="l467"><span class="linenum"> 467</span></a>  
<a name="l468"><span class="linenum"> 468</span></a>  <span class="comment">        // Now fetch the rest of the message content.</span>
<a name="l469"><span class="linenum"> 469</span></a>          <a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a> = new \Horde_Imap_Client_Fetch_Query();
<a name="l470"><span class="linenum"> 470</span></a>          <a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>-&gt;<a class="function" onClick="logFunction('imapDate')" href="../../../../_functions/imapdate.html" onMouseOver="funcPopup(event,'imapdate')">imapDate</a>();
<a name="l471"><span class="linenum"> 471</span></a>  
<a name="l472"><span class="linenum"> 472</span></a>  <span class="comment">        // Fetch the message header.</span>
<a name="l473"><span class="linenum"> 473</span></a>          <a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>-&gt;<a class="function" onClick="logFunction('headerText')" href="../../../../_functions/headertext.html" onMouseOver="funcPopup(event,'headertext')">headerText</a>();
<a name="l474"><span class="linenum"> 474</span></a>  
<a name="l475"><span class="linenum"> 475</span></a>  <span class="comment">        // Retrieve the message with the above components.</span>
<a name="l476"><span class="linenum"> 476</span></a>          <a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('fetch')" href="../../../../_functions/fetch.html" onMouseOver="funcPopup(event,'fetch')">fetch</a>(<a class="var it9649" onMouseOver="hilite(9649)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a>, <a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>, array('ids' =&gt; <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>))-&gt;<a class="function" onClick="logFunction('first')" href="../../../../_functions/first.html" onMouseOver="funcPopup(event,'first')">first</a>();
<a name="l477"><span class="linenum"> 477</span></a>  
<a name="l478"><span class="linenum"> 478</span></a>          if (!<a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>) {
<a name="l479"><span class="linenum"> 479</span></a>  <span class="comment">            // Message was not found! Somehow it has been removed or is no longer returned.</span>
<a name="l480"><span class="linenum"> 480</span></a>              return null;
<a name="l481"><span class="linenum"> 481</span></a>          }
<a name="l482"><span class="linenum"> 482</span></a>  
<a name="l483"><span class="linenum"> 483</span></a>  <span class="comment">        // The message ID should always be in the first part.</span>
<a name="l484"><span class="linenum"> 484</span></a>          <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a> = new \stdClass();
<a name="l485"><span class="linenum"> 485</span></a>          <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('messageid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../../_variables/messageid.html">messageid</a> = <a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>-&gt;<a class="function" onClick="logFunction('getHeaderText')" href="../../../../_functions/getheadertext.html" onMouseOver="funcPopup(event,'getheadertext')">getHeaderText</a>(0, \<a class="class" onClick="logClass('Horde_Imap_Client_Data_Fetch')" href="../../../../_classes/horde_imap_client_data_fetch.html" onMouseOver="classPopup(event,'horde_imap_client_data_fetch')">Horde_Imap_Client_Data_Fetch</a>::HEADER_PARSE)-&gt;<a class="function" onClick="logFunction('getValue')" href="../../../../_functions/getvalue.html" onMouseOver="funcPopup(event,'getvalue')">getValue</a>('Message-ID');
<a name="l486"><span class="linenum"> 486</span></a>          <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('subject')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../../_variables/subject.html">subject</a> = <a class="var it1427" onMouseOver="hilite(1427)" onMouseOut="lolite()" onClick="logVariable('envelope')" href="../../../../_variables/envelope.html">$envelope</a>-&gt;<a onClick="logVariable('subject')" class="var it39713" onMouseOver="hilite(39713)" onMouseOut="lolite()" href="../../../../_variables/subject.html">subject</a>;
<a name="l487"><span class="linenum"> 487</span></a>          <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timestamp')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../../_variables/timestamp.html">timestamp</a> = <a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>-&gt;<a class="function" onClick="logFunction('getImapDate')" href="../../../../_functions/getimapdate.html" onMouseOver="funcPopup(event,'getimapdate')">getImapDate</a>()-&gt;<a class="function" onClick="logFunction('__toString')" href="../../../../_functions/__tostring.html" onMouseOver="funcPopup(event,'__tostring')">__toString</a>();
<a name="l488"><span class="linenum"> 488</span></a>          <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('envelope')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../../_variables/envelope.html">envelope</a> = <a class="var it1427" onMouseOver="hilite(1427)" onMouseOut="lolite()" onClick="logVariable('envelope')" href="../../../../_variables/envelope.html">$envelope</a>;
<a name="l489"><span class="linenum"> 489</span></a>          <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('data')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../../_variables/data.html">data</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addressmanager')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/addressmanager.html">addressmanager</a>-&gt;<a class="function" onClick="logFunction('get_data')" href="../../../../_functions/get_data.html" onMouseOver="funcPopup(event,'get_data')">get_data</a>();
<a name="l490"><span class="linenum"> 490</span></a>          <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('headers')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../../../_variables/headers.html">headers</a> = <a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>-&gt;<a class="function" onClick="logFunction('getHeaderText')" href="../../../../_functions/getheadertext.html" onMouseOver="funcPopup(event,'getheadertext')">getHeaderText</a>();
<a name="l491"><span class="linenum"> 491</span></a>  
<a name="l492"><span class="linenum"> 492</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../_variables/data.html">$data</a>;
<a name="l493"><span class="linenum"> 493</span></a>  
<a name="l494"><span class="linenum"> 494</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>;
<a name="l495"><span class="linenum"> 495</span></a>      }
<a name="l496"><span class="linenum"> 496</span></a>  
<a name="l497"><span class="linenum"> 497</span></a>      <span class="comment">/**</span>
<a name="l498"><span class="linenum"> 498</span></a>  <span class="comment">     * Process a message again to add body and attachment data.</span>
<a name="l499"><span class="linenum"> 499</span></a>  <span class="comment">     *</span>
<a name="l500"><span class="linenum"> 500</span></a>  <span class="comment">     * @param \Horde_Imap_Client_Data_Fetch $basemessagedata The structure and part of the message body</span>
<a name="l501"><span class="linenum"> 501</span></a>  <span class="comment">     * @param string|\Horde_Imap_Client_Ids $messageid The Hore message Uid</span>
<a name="l502"><span class="linenum"> 502</span></a>  <span class="comment">     * @return \stdClass The current value of the messagedata</span>
<a name="l503"><span class="linenum"> 503</span></a>  <span class="comment">     */</span>
<a name="l504"><span class="linenum"> 504</span></a>      private function <a class="function" onClick="logFunction('process_message_data_body')" href="../../../../_functions/process_message_data_body.html" onMouseOver="funcPopup(event,'process_message_data_body')">process_message_data_body</a>(
<a name="l505"><span class="linenum"> 505</span></a>              \Horde_Imap_Client_Data_Fetch <a class="var it24573" onMouseOver="hilite(24573)" onMouseOut="lolite()" onClick="logVariable('basemessagedata')" href="../../../../_variables/basemessagedata.html">$basemessagedata</a>,
<a name="l506"><span class="linenum"> 506</span></a>              <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>) {
<a name="l507"><span class="linenum"> 507</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>;
<a name="l508"><span class="linenum"> 508</span></a>  
<a name="l509"><span class="linenum"> 509</span></a>  <span class="comment">        // Get the current mailbox.</span>
<a name="l510"><span class="linenum"> 510</span></a>          <a class="var it9649" onMouseOver="hilite(9649)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_mailbox')" href="../../../../_functions/get_mailbox.html" onMouseOver="funcPopup(event,'get_mailbox')">get_mailbox</a>();
<a name="l511"><span class="linenum"> 511</span></a>  
<a name="l512"><span class="linenum"> 512</span></a>  <span class="comment">        // We need the structure at various points below.</span>
<a name="l513"><span class="linenum"> 513</span></a>          <a class="var it997" onMouseOver="hilite(997)" onMouseOut="lolite()" onClick="logVariable('structure')" href="../../../../_variables/structure.html">$structure</a> = <a class="var it24573" onMouseOver="hilite(24573)" onMouseOut="lolite()" onClick="logVariable('basemessagedata')" href="../../../../_variables/basemessagedata.html">$basemessagedata</a>-&gt;<a class="function" onClick="logFunction('getStructure')" href="../../../../_functions/getstructure.html" onMouseOver="funcPopup(event,'getstructure')">getStructure</a>();
<a name="l514"><span class="linenum"> 514</span></a>  
<a name="l515"><span class="linenum"> 515</span></a>  <span class="comment">        // Now fetch the rest of the message content.</span>
<a name="l516"><span class="linenum"> 516</span></a>          <a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a> = new \Horde_Imap_Client_Fetch_Query();
<a name="l517"><span class="linenum"> 517</span></a>          <a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>-&gt;<a class="function" onClick="logFunction('fullText')" href="../../../../_functions/fulltext.html" onMouseOver="funcPopup(event,'fulltext')">fullText</a>();
<a name="l518"><span class="linenum"> 518</span></a>  
<a name="l519"><span class="linenum"> 519</span></a>  <span class="comment">        // Fetch all of the message parts too.</span>
<a name="l520"><span class="linenum"> 520</span></a>          <a class="var it24574" onMouseOver="hilite(24574)" onMouseOut="lolite()" onClick="logVariable('typemap')" href="../../../../_variables/typemap.html">$typemap</a> = <a class="var it997" onMouseOver="hilite(997)" onMouseOut="lolite()" onClick="logVariable('structure')" href="../../../../_variables/structure.html">$structure</a>-&gt;<a class="function" onClick="logFunction('contentTypeMap')" href="../../../../_functions/contenttypemap.html" onMouseOver="funcPopup(event,'contenttypemap')">contentTypeMap</a>();
<a name="l521"><span class="linenum"> 521</span></a>          foreach (<a class="var it24574" onMouseOver="hilite(24574)" onMouseOut="lolite()" onClick="logVariable('typemap')" href="../../../../_variables/typemap.html">$typemap</a> as <a class="var it779" onMouseOver="hilite(779)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../../../_variables/part.html">$part</a> =&gt; <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../../_variables/type.html">$type</a>) {
<a name="l522"><span class="linenum"> 522</span></a>  <span class="comment">            // The body of the part - attempt to decode it on the server.</span>
<a name="l523"><span class="linenum"> 523</span></a>              <a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>-&gt;<a class="function" onClick="logFunction('bodyPart')" href="../../../../_functions/bodypart.html" onMouseOver="funcPopup(event,'bodypart')">bodyPart</a>(<a class="var it779" onMouseOver="hilite(779)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../../../_variables/part.html">$part</a>, array(
<a name="l524"><span class="linenum"> 524</span></a>                  'decode' =&gt; true,
<a name="l525"><span class="linenum"> 525</span></a>                  'peek' =&gt; true,
<a name="l526"><span class="linenum"> 526</span></a>              ));
<a name="l527"><span class="linenum"> 527</span></a>              <a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>-&gt;<a class="function" onClick="logFunction('bodyPartSize')" href="../../../../_functions/bodypartsize.html" onMouseOver="funcPopup(event,'bodypartsize')">bodyPartSize</a>(<a class="var it779" onMouseOver="hilite(779)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../../../_variables/part.html">$part</a>);
<a name="l528"><span class="linenum"> 528</span></a>          }
<a name="l529"><span class="linenum"> 529</span></a>  
<a name="l530"><span class="linenum"> 530</span></a>          <a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('fetch')" href="../../../../_functions/fetch.html" onMouseOver="funcPopup(event,'fetch')">fetch</a>(<a class="var it9649" onMouseOver="hilite(9649)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a>, <a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>, array('ids' =&gt; <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>))-&gt;<a class="function" onClick="logFunction('first')" href="../../../../_functions/first.html" onMouseOver="funcPopup(event,'first')">first</a>();
<a name="l531"><span class="linenum"> 531</span></a>  
<a name="l532"><span class="linenum"> 532</span></a>  <span class="comment">        // Store the data for this message.</span>
<a name="l533"><span class="linenum"> 533</span></a>          <a class="var it24575" onMouseOver="hilite(24575)" onMouseOut="lolite()" onClick="logVariable('contentplain')" href="../../../../_variables/contentplain.html">$contentplain</a> = '';
<a name="l534"><span class="linenum"> 534</span></a>          <a class="var it24576" onMouseOver="hilite(24576)" onMouseOut="lolite()" onClick="logVariable('contenthtml')" href="../../../../_variables/contenthtml.html">$contenthtml</a> = '';
<a name="l535"><span class="linenum"> 535</span></a>          <a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('attachments')" href="../../../../_variables/attachments.html">$attachments</a> = array(
<a name="l536"><span class="linenum"> 536</span></a>              'inline' =&gt; array(),
<a name="l537"><span class="linenum"> 537</span></a>              'attachment' =&gt; array(),
<a name="l538"><span class="linenum"> 538</span></a>          );
<a name="l539"><span class="linenum"> 539</span></a>  
<a name="l540"><span class="linenum"> 540</span></a>          <a class="var it24577" onMouseOver="hilite(24577)" onMouseOut="lolite()" onClick="logVariable('plainpartid')" href="../../../../_variables/plainpartid.html">$plainpartid</a> = <a class="var it997" onMouseOver="hilite(997)" onMouseOut="lolite()" onClick="logVariable('structure')" href="../../../../_variables/structure.html">$structure</a>-&gt;<a class="function" onClick="logFunction('findBody')" href="../../../../_functions/findbody.html" onMouseOver="funcPopup(event,'findbody')">findBody</a>('plain');
<a name="l541"><span class="linenum"> 541</span></a>          <a class="var it24578" onMouseOver="hilite(24578)" onMouseOut="lolite()" onClick="logVariable('htmlpartid')" href="../../../../_variables/htmlpartid.html">$htmlpartid</a> = <a class="var it997" onMouseOver="hilite(997)" onMouseOut="lolite()" onClick="logVariable('structure')" href="../../../../_variables/structure.html">$structure</a>-&gt;<a class="function" onClick="logFunction('findBody')" href="../../../../_functions/findbody.html" onMouseOver="funcPopup(event,'findbody')">findBody</a>('html');
<a name="l542"><span class="linenum"> 542</span></a>  
<a name="l543"><span class="linenum"> 543</span></a>          foreach (<a class="var it24574" onMouseOver="hilite(24574)" onMouseOut="lolite()" onClick="logVariable('typemap')" href="../../../../_variables/typemap.html">$typemap</a> as <a class="var it779" onMouseOver="hilite(779)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../../../_variables/part.html">$part</a> =&gt; <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../../_variables/type.html">$type</a>) {
<a name="l544"><span class="linenum"> 544</span></a>  <span class="comment">            // Get the message data from the body part, and combine it with the structure to give a fully-formed output.</span>
<a name="l545"><span class="linenum"> 545</span></a>              <a class="var it1257" onMouseOver="hilite(1257)" onMouseOut="lolite()" onClick="logVariable('stream')" href="../../../../_variables/stream.html">$stream</a> = <a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>-&gt;<a class="function" onClick="logFunction('getBodyPart')" href="../../../../_functions/getbodypart.html" onMouseOver="funcPopup(event,'getbodypart')">getBodyPart</a>(<a class="var it779" onMouseOver="hilite(779)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../../../_variables/part.html">$part</a>, true);
<a name="l546"><span class="linenum"> 546</span></a>              <a class="var it24579" onMouseOver="hilite(24579)" onMouseOut="lolite()" onClick="logVariable('partdata')" href="../../../../_variables/partdata.html">$partdata</a> = <a class="var it997" onMouseOver="hilite(997)" onMouseOut="lolite()" onClick="logVariable('structure')" href="../../../../_variables/structure.html">$structure</a>-&gt;<a class="function" onClick="logFunction('getPart')" href="../../../../_functions/getpart.html" onMouseOver="funcPopup(event,'getpart')">getPart</a>(<a class="var it779" onMouseOver="hilite(779)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../../../_variables/part.html">$part</a>);
<a name="l547"><span class="linenum"> 547</span></a>              <a class="var it24579" onMouseOver="hilite(24579)" onMouseOut="lolite()" onClick="logVariable('partdata')" href="../../../../_variables/partdata.html">$partdata</a>-&gt;<a class="function" onClick="logFunction('setContents')" href="../../../../_functions/setcontents.html" onMouseOver="funcPopup(event,'setcontents')">setContents</a>(<a class="var it1257" onMouseOver="hilite(1257)" onMouseOut="lolite()" onClick="logVariable('stream')" href="../../../../_variables/stream.html">$stream</a>, array(
<a name="l548"><span class="linenum"> 548</span></a>                  'usestream' =&gt; true,
<a name="l549"><span class="linenum"> 549</span></a>              ));
<a name="l550"><span class="linenum"> 550</span></a>  
<a name="l551"><span class="linenum"> 551</span></a>              if (<a class="var it779" onMouseOver="hilite(779)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../../../_variables/part.html">$part</a> === <a class="var it24577" onMouseOver="hilite(24577)" onMouseOut="lolite()" onClick="logVariable('plainpartid')" href="../../../../_variables/plainpartid.html">$plainpartid</a>) {
<a name="l552"><span class="linenum"> 552</span></a>                  <a class="var it24575" onMouseOver="hilite(24575)" onMouseOut="lolite()" onClick="logVariable('contentplain')" href="../../../../_variables/contentplain.html">$contentplain</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_message_part_body')" href="../../../../_functions/process_message_part_body.html" onMouseOver="funcPopup(event,'process_message_part_body')">process_message_part_body</a>(<a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>, <a class="var it24579" onMouseOver="hilite(24579)" onMouseOut="lolite()" onClick="logVariable('partdata')" href="../../../../_variables/partdata.html">$partdata</a>, <a class="var it779" onMouseOver="hilite(779)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../../../_variables/part.html">$part</a>);
<a name="l553"><span class="linenum"> 553</span></a>  
<a name="l554"><span class="linenum"> 554</span></a>              } else if (<a class="var it779" onMouseOver="hilite(779)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../../../_variables/part.html">$part</a> === <a class="var it24578" onMouseOver="hilite(24578)" onMouseOut="lolite()" onClick="logVariable('htmlpartid')" href="../../../../_variables/htmlpartid.html">$htmlpartid</a>) {
<a name="l555"><span class="linenum"> 555</span></a>                  <a class="var it24576" onMouseOver="hilite(24576)" onMouseOut="lolite()" onClick="logVariable('contenthtml')" href="../../../../_variables/contenthtml.html">$contenthtml</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_message_part_body')" href="../../../../_functions/process_message_part_body.html" onMouseOver="funcPopup(event,'process_message_part_body')">process_message_part_body</a>(<a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>, <a class="var it24579" onMouseOver="hilite(24579)" onMouseOut="lolite()" onClick="logVariable('partdata')" href="../../../../_variables/partdata.html">$partdata</a>, <a class="var it779" onMouseOver="hilite(779)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../../../_variables/part.html">$part</a>);
<a name="l556"><span class="linenum"> 556</span></a>  
<a name="l557"><span class="linenum"> 557</span></a>              } else if (<a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../../_variables/filename.html">$filename</a> = <a class="var it24579" onMouseOver="hilite(24579)" onMouseOut="lolite()" onClick="logVariable('partdata')" href="../../../../_variables/partdata.html">$partdata</a>-&gt;<a class="function" onClick="logFunction('getName')" href="../../../../_functions/getname.html" onMouseOver="funcPopup(event,'getname')">getName</a>(<a class="var it779" onMouseOver="hilite(779)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../../../_variables/part.html">$part</a>)) {
<a name="l558"><span class="linenum"> 558</span></a>                  if (<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../../_variables/attachment.html">$attachment</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_message_part_attachment')" href="../../../../_functions/process_message_part_attachment.html" onMouseOver="funcPopup(event,'process_message_part_attachment')">process_message_part_attachment</a>(<a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>, <a class="var it24579" onMouseOver="hilite(24579)" onMouseOut="lolite()" onClick="logVariable('partdata')" href="../../../../_variables/partdata.html">$partdata</a>, <a class="var it779" onMouseOver="hilite(779)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../../../_variables/part.html">$part</a>, <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../../_variables/filename.html">$filename</a>)) {
<a name="l559"><span class="linenum"> 559</span></a>  <span class="comment">                    // The disposition should be one of 'attachment', 'inline'.</span>
<a name="l560"><span class="linenum"> 560</span></a>  <span class="comment">                    // If an empty string is provided, default to 'attachment'.</span>
<a name="l561"><span class="linenum"> 561</span></a>                      <a class="var it21862" onMouseOver="hilite(21862)" onMouseOut="lolite()" onClick="logVariable('disposition')" href="../../../../_variables/disposition.html">$disposition</a> = <a class="var it24579" onMouseOver="hilite(24579)" onMouseOut="lolite()" onClick="logVariable('partdata')" href="../../../../_variables/partdata.html">$partdata</a>-&gt;<a class="function" onClick="logFunction('getDisposition')" href="../../../../_functions/getdisposition.html" onMouseOver="funcPopup(event,'getdisposition')">getDisposition</a>();
<a name="l562"><span class="linenum"> 562</span></a>                      <a class="var it21862" onMouseOver="hilite(21862)" onMouseOut="lolite()" onClick="logVariable('disposition')" href="../../../../_variables/disposition.html">$disposition</a> = <a class="var it21862" onMouseOver="hilite(21862)" onMouseOut="lolite()" onClick="logVariable('disposition')" href="../../../../_variables/disposition.html">$disposition</a> == 'inline' ? 'inline' : 'attachment';
<a name="l563"><span class="linenum"> 563</span></a>                      <a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('attachments')" href="../../../../_variables/attachments.html">$attachments</a>[<a class="var it21862" onMouseOver="hilite(21862)" onMouseOut="lolite()" onClick="logVariable('disposition')" href="../../../../_variables/disposition.html">$disposition</a>][] = <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../../_variables/attachment.html">$attachment</a>;
<a name="l564"><span class="linenum"> 564</span></a>                  }
<a name="l565"><span class="linenum"> 565</span></a>              }
<a name="l566"><span class="linenum"> 566</span></a>  
<a name="l567"><span class="linenum"> 567</span></a>  <span class="comment">            // We don't handle any of the other MIME content at this stage.</span>
<a name="l568"><span class="linenum"> 568</span></a>          }
<a name="l569"><span class="linenum"> 569</span></a>  
<a name="l570"><span class="linenum"> 570</span></a>  <span class="comment">        // The message ID should always be in the first part.</span>
<a name="l571"><span class="linenum"> 571</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>-&gt;plain = <a class="var it24575" onMouseOver="hilite(24575)" onMouseOut="lolite()" onClick="logVariable('contentplain')" href="../../../../_variables/contentplain.html">$contentplain</a>;
<a name="l572"><span class="linenum"> 572</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>-&gt;html = <a class="var it24576" onMouseOver="hilite(24576)" onMouseOut="lolite()" onClick="logVariable('contenthtml')" href="../../../../_variables/contenthtml.html">$contenthtml</a>;
<a name="l573"><span class="linenum"> 573</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>-&gt;attachments = <a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('attachments')" href="../../../../_variables/attachments.html">$attachments</a>;
<a name="l574"><span class="linenum"> 574</span></a>  
<a name="l575"><span class="linenum"> 575</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>;
<a name="l576"><span class="linenum"> 576</span></a>      }
<a name="l577"><span class="linenum"> 577</span></a>  
<a name="l578"><span class="linenum"> 578</span></a>      <span class="comment">/**</span>
<a name="l579"><span class="linenum"> 579</span></a>  <span class="comment">     * Process the messagedata and part data to extract the content of this part.</span>
<a name="l580"><span class="linenum"> 580</span></a>  <span class="comment">     *</span>
<a name="l581"><span class="linenum"> 581</span></a>  <span class="comment">     * @param \Horde_Imap_Client_Data_Fetch $messagedata The structure and part of the message body</span>
<a name="l582"><span class="linenum"> 582</span></a>  <span class="comment">     * @param \Horde_Mime_Part $partdata The part data</span>
<a name="l583"><span class="linenum"> 583</span></a>  <span class="comment">     * @param string $part The part ID</span>
<a name="l584"><span class="linenum"> 584</span></a>  <span class="comment">     * @return string</span>
<a name="l585"><span class="linenum"> 585</span></a>  <span class="comment">     */</span>
<a name="l586"><span class="linenum"> 586</span></a>      private function <a class="function" onClick="logFunction('process_message_part_body')" href="../../../../_functions/process_message_part_body.html" onMouseOver="funcPopup(event,'process_message_part_body')">process_message_part_body</a>(<a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>, <a class="var it24579" onMouseOver="hilite(24579)" onMouseOut="lolite()" onClick="logVariable('partdata')" href="../../../../_variables/partdata.html">$partdata</a>, <a class="var it779" onMouseOver="hilite(779)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../../../_variables/part.html">$part</a>) {
<a name="l587"><span class="linenum"> 587</span></a>  <span class="comment">        // This is a content section for the main body.</span>
<a name="l588"><span class="linenum"> 588</span></a>  
<a name="l589"><span class="linenum"> 589</span></a>  <span class="comment">        // Get the string version of it.</span>
<a name="l590"><span class="linenum"> 590</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../../_variables/content.html">$content</a> = <a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>-&gt;<a class="function" onClick="logFunction('getBodyPart')" href="../../../../_functions/getbodypart.html" onMouseOver="funcPopup(event,'getbodypart')">getBodyPart</a>(<a class="var it779" onMouseOver="hilite(779)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../../../_variables/part.html">$part</a>);
<a name="l591"><span class="linenum"> 591</span></a>          if (!<a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>-&gt;<a class="function" onClick="logFunction('getBodyPartDecode')" href="../../../../_functions/getbodypartdecode.html" onMouseOver="funcPopup(event,'getbodypartdecode')">getBodyPartDecode</a>(<a class="var it779" onMouseOver="hilite(779)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../../../_variables/part.html">$part</a>)) {
<a name="l592"><span class="linenum"> 592</span></a>  <span class="comment">            // Decode the content.</span>
<a name="l593"><span class="linenum"> 593</span></a>              <a class="var it24579" onMouseOver="hilite(24579)" onMouseOut="lolite()" onClick="logVariable('partdata')" href="../../../../_variables/partdata.html">$partdata</a>-&gt;<a class="function" onClick="logFunction('setContents')" href="../../../../_functions/setcontents.html" onMouseOver="funcPopup(event,'setcontents')">setContents</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../../_variables/content.html">$content</a>);
<a name="l594"><span class="linenum"> 594</span></a>              <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../../_variables/content.html">$content</a> = <a class="var it24579" onMouseOver="hilite(24579)" onMouseOut="lolite()" onClick="logVariable('partdata')" href="../../../../_variables/partdata.html">$partdata</a>-&gt;<a class="function" onClick="logFunction('getContents')" href="../../../../_functions/getcontents.html" onMouseOver="funcPopup(event,'getcontents')">getContents</a>();
<a name="l595"><span class="linenum"> 595</span></a>          }
<a name="l596"><span class="linenum"> 596</span></a>  
<a name="l597"><span class="linenum"> 597</span></a>  <span class="comment">        // Convert the text from the current encoding to UTF8.</span>
<a name="l598"><span class="linenum"> 598</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../../_variables/content.html">$content</a> = \<a class="class" onClick="logClass('core_text')" href="../../../../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="function" onClick="logFunction('convert')" href="../../../../_functions/convert.html" onMouseOver="funcPopup(event,'convert')">convert</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../../_variables/content.html">$content</a>, <a class="var it24579" onMouseOver="hilite(24579)" onMouseOut="lolite()" onClick="logVariable('partdata')" href="../../../../_variables/partdata.html">$partdata</a>-&gt;<a class="function" onClick="logFunction('getCharset')" href="../../../../_functions/getcharset.html" onMouseOver="funcPopup(event,'getcharset')">getCharset</a>());
<a name="l599"><span class="linenum"> 599</span></a>  
<a name="l600"><span class="linenum"> 600</span></a>  <span class="comment">        // Fix any invalid UTF8 characters.</span>
<a name="l601"><span class="linenum"> 601</span></a>  <span class="comment">        // Note: XSS cleaning is not the responsibility of this code. It occurs immediately before display when</span>
<a name="l602"><span class="linenum"> 602</span></a>  <span class="comment">        // format_text is called.</span>
<a name="l603"><span class="linenum"> 603</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../../_variables/content.html">$content</a> = <a class="function" onClick="logFunction('clean_param')" href="../../../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../../_variables/content.html">$content</a>, <a class="constant" onClick="logConstant('PARAM_RAW')" href="../../../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>);
<a name="l604"><span class="linenum"> 604</span></a>  
<a name="l605"><span class="linenum"> 605</span></a>          return <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../../../_variables/content.html">$content</a>;
<a name="l606"><span class="linenum"> 606</span></a>      }
<a name="l607"><span class="linenum"> 607</span></a>  
<a name="l608"><span class="linenum"> 608</span></a>      <span class="comment">/**</span>
<a name="l609"><span class="linenum"> 609</span></a>  <span class="comment">     * Process a message again to add body and attachment data.</span>
<a name="l610"><span class="linenum"> 610</span></a>  <span class="comment">     *</span>
<a name="l611"><span class="linenum"> 611</span></a>  <span class="comment">     * @param \Horde_Imap_Client_Data_Fetch $messagedata The structure and part of the message body</span>
<a name="l612"><span class="linenum"> 612</span></a>  <span class="comment">     * @param \Horde_Mime_Part $partdata The part data</span>
<a name="l613"><span class="linenum"> 613</span></a>  <span class="comment">     * @param string $part The part ID.</span>
<a name="l614"><span class="linenum"> 614</span></a>  <span class="comment">     * @param string $filename The filename of the attachment</span>
<a name="l615"><span class="linenum"> 615</span></a>  <span class="comment">     * @return \stdClass</span>
<a name="l616"><span class="linenum"> 616</span></a>  <span class="comment">     * @throws \core\message\inbound\processing_failed_exception If the attachment can't be saved to disk.</span>
<a name="l617"><span class="linenum"> 617</span></a>  <span class="comment">     */</span>
<a name="l618"><span class="linenum"> 618</span></a>      private function <a class="function" onClick="logFunction('process_message_part_attachment')" href="../../../../_functions/process_message_part_attachment.html" onMouseOver="funcPopup(event,'process_message_part_attachment')">process_message_part_attachment</a>(<a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>, <a class="var it24579" onMouseOver="hilite(24579)" onMouseOut="lolite()" onClick="logVariable('partdata')" href="../../../../_variables/partdata.html">$partdata</a>, <a class="var it779" onMouseOver="hilite(779)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../../../_variables/part.html">$part</a>, <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../../_variables/filename.html">$filename</a>) {
<a name="l619"><span class="linenum"> 619</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>;
<a name="l620"><span class="linenum"> 620</span></a>  
<a name="l621"><span class="linenum"> 621</span></a>  <span class="comment">        // For Antivirus, the repository/lib.php must be included as it is not autoloaded.</span>
<a name="l622"><span class="linenum"> 622</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../../../repository/lib.php.html">/repository/lib.php</a>');
<a name="l623"><span class="linenum"> 623</span></a>  
<a name="l624"><span class="linenum"> 624</span></a>  <span class="comment">        // If a filename is present, assume that this part is an attachment.</span>
<a name="l625"><span class="linenum"> 625</span></a>          <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../../_variables/attachment.html">$attachment</a> = new \stdClass();
<a name="l626"><span class="linenum"> 626</span></a>          <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../../_variables/attachment.html">$attachment</a>-&gt;<a onClick="logVariable('filename')" class="var it39714" onMouseOver="hilite(39714)" onMouseOut="lolite()" href="../../../../_variables/filename.html">filename</a>       = <a class="var it93" onMouseOver="hilite(93)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../../../_variables/filename.html">$filename</a>;
<a name="l627"><span class="linenum"> 627</span></a>          <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../../_variables/attachment.html">$attachment</a>-&gt;<a onClick="logVariable('type')" class="var it39714" onMouseOver="hilite(39714)" onMouseOut="lolite()" href="../../../../_variables/type.html">type</a>           = <a class="var it24579" onMouseOver="hilite(24579)" onMouseOut="lolite()" onClick="logVariable('partdata')" href="../../../../_variables/partdata.html">$partdata</a>-&gt;<a class="phpfunction" onClick="logFunction('getType')" href="../../../../_functions/gettype.html" onMouseOver="phpfuncPopup(event,'gettype')">getType</a>();
<a name="l628"><span class="linenum"> 628</span></a>          <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../../_variables/attachment.html">$attachment</a>-&gt;<a onClick="logVariable('content')" class="var it39714" onMouseOver="hilite(39714)" onMouseOut="lolite()" href="../../../../_variables/content.html">content</a>        = <a class="var it24579" onMouseOver="hilite(24579)" onMouseOut="lolite()" onClick="logVariable('partdata')" href="../../../../_variables/partdata.html">$partdata</a>-&gt;<a class="function" onClick="logFunction('getContents')" href="../../../../_functions/getcontents.html" onMouseOver="funcPopup(event,'getcontents')">getContents</a>();
<a name="l629"><span class="linenum"> 629</span></a>          <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../../_variables/attachment.html">$attachment</a>-&gt;<a onClick="logVariable('charset')" class="var it39714" onMouseOver="hilite(39714)" onMouseOut="lolite()" href="../../../../_variables/charset.html">charset</a>        = <a class="var it24579" onMouseOver="hilite(24579)" onMouseOut="lolite()" onClick="logVariable('partdata')" href="../../../../_variables/partdata.html">$partdata</a>-&gt;<a class="function" onClick="logFunction('getCharset')" href="../../../../_functions/getcharset.html" onMouseOver="funcPopup(event,'getcharset')">getCharset</a>();
<a name="l630"><span class="linenum"> 630</span></a>          <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../../_variables/attachment.html">$attachment</a>-&gt;<a onClick="logVariable('description')" class="var it39714" onMouseOver="hilite(39714)" onMouseOut="lolite()" href="../../../../_variables/description.html">description</a>    = <a class="var it24579" onMouseOver="hilite(24579)" onMouseOut="lolite()" onClick="logVariable('partdata')" href="../../../../_variables/partdata.html">$partdata</a>-&gt;<a class="function" onClick="logFunction('getDescription')" href="../../../../_functions/getdescription.html" onMouseOver="funcPopup(event,'getdescription')">getDescription</a>();
<a name="l631"><span class="linenum"> 631</span></a>          <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../../_variables/attachment.html">$attachment</a>-&gt;<a onClick="logVariable('contentid')" class="var it39714" onMouseOver="hilite(39714)" onMouseOut="lolite()" href="../../../../_variables/contentid.html">contentid</a>      = <a class="var it24579" onMouseOver="hilite(24579)" onMouseOut="lolite()" onClick="logVariable('partdata')" href="../../../../_variables/partdata.html">$partdata</a>-&gt;<a class="function" onClick="logFunction('getContentId')" href="../../../../_functions/getcontentid.html" onMouseOver="funcPopup(event,'getcontentid')">getContentId</a>();
<a name="l632"><span class="linenum"> 632</span></a>          <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../../_variables/attachment.html">$attachment</a>-&gt;<a onClick="logVariable('filesize')" class="var it39714" onMouseOver="hilite(39714)" onMouseOut="lolite()" href="../../../../_variables/filesize.html">filesize</a>       = <a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>-&gt;<a class="function" onClick="logFunction('getBodyPartSize')" href="../../../../_functions/getbodypartsize.html" onMouseOver="funcPopup(event,'getbodypartsize')">getBodyPartSize</a>(<a class="var it779" onMouseOver="hilite(779)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../../../_variables/part.html">$part</a>);
<a name="l633"><span class="linenum"> 633</span></a>  
<a name="l634"><span class="linenum"> 634</span></a>          if (empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('runclamonupload')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../../_variables/runclamonupload.html">runclamonupload</a>) or empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('pathtoclam')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../../_variables/pathtoclam.html">pathtoclam</a>)) {
<a name="l635"><span class="linenum"> 635</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;--&gt; Attempting virus scan of '{<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../../_variables/attachment.html">$attachment</a>-&gt;<a onClick="logVariable('filename')" class="var it39714" onMouseOver="hilite(39714)" onMouseOut="lolite()" href="../../../../_variables/filename.html">filename</a>}'&quot;);
<a name="l636"><span class="linenum"> 636</span></a>  
<a name="l637"><span class="linenum"> 637</span></a>  <span class="comment">            // Store the file on disk - it will need to be virus scanned first.</span>
<a name="l638"><span class="linenum"> 638</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../../../_variables/itemid.html">$itemid</a> = <a class="phpfunction" onClick="logFunction('rand')" href="../../../../_functions/rand.html" onMouseOver="phpfuncPopup(event,'rand')">rand</a>(1, 999999999);;
<a name="l639"><span class="linenum"> 639</span></a>              <a class="var it3461" onMouseOver="hilite(3461)" onMouseOut="lolite()" onClick="logVariable('directory')" href="../../../../_variables/directory.html">$directory</a> = <a class="function" onClick="logFunction('make_temp_directory')" href="../../../../_functions/make_temp_directory.html" onMouseOver="funcPopup(event,'make_temp_directory')">make_temp_directory</a>(&quot;/messageinbound/{<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../../../_variables/itemid.html">$itemid</a>}&quot;, false);
<a name="l640"><span class="linenum"> 640</span></a>              <a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../../../_variables/filepath.html">$filepath</a> = <a class="var it3461" onMouseOver="hilite(3461)" onMouseOut="lolite()" onClick="logVariable('directory')" href="../../../../_variables/directory.html">$directory</a> . &quot;/&quot; . <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../../_variables/attachment.html">$attachment</a>-&gt;<a onClick="logVariable('filename')" class="var it39714" onMouseOver="hilite(39714)" onMouseOut="lolite()" href="../../../../_variables/filename.html">filename</a>;
<a name="l641"><span class="linenum"> 641</span></a>              if (!<a class="var it773" onMouseOver="hilite(773)" onMouseOut="lolite()" onClick="logVariable('fp')" href="../../../../_variables/fp.html">$fp</a> = <a class="function" onClick="logFunction('fopen')" href="../../../../_functions/fopen.html" onMouseOver="funcPopup(event,'fopen')">fopen</a>(<a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../../../_variables/filepath.html">$filepath</a>, &quot;w&quot;)) {
<a name="l642"><span class="linenum"> 642</span></a>  <span class="comment">                // Unable to open the temporary file to write this to disk.</span>
<a name="l643"><span class="linenum"> 643</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;--&gt; Unable to save the file to disk for virus scanning. Check file permissions.&quot;);
<a name="l644"><span class="linenum"> 644</span></a>  
<a name="l645"><span class="linenum"> 645</span></a>                  throw new \core\message\inbound\processing_failed_exception('attachmentfilepermissionsfailed',
<a name="l646"><span class="linenum"> 646</span></a>                          'tool_messageinbound');
<a name="l647"><span class="linenum"> 647</span></a>              }
<a name="l648"><span class="linenum"> 648</span></a>  
<a name="l649"><span class="linenum"> 649</span></a>              <a class="phpfunction" onClick="logFunction('fwrite')" href="../../../../_functions/fwrite.html" onMouseOver="phpfuncPopup(event,'fwrite')">fwrite</a>(<a class="var it773" onMouseOver="hilite(773)" onMouseOut="lolite()" onClick="logVariable('fp')" href="../../../../_variables/fp.html">$fp</a>, <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../../_variables/attachment.html">$attachment</a>-&gt;<a onClick="logVariable('content')" class="var it39714" onMouseOver="hilite(39714)" onMouseOut="lolite()" href="../../../../_variables/content.html">content</a>);
<a name="l650"><span class="linenum"> 650</span></a>              <a class="phpfunction" onClick="logFunction('fclose')" href="../../../../_functions/fclose.html" onMouseOver="phpfuncPopup(event,'fclose')">fclose</a>(<a class="var it773" onMouseOver="hilite(773)" onMouseOut="lolite()" onClick="logVariable('fp')" href="../../../../_variables/fp.html">$fp</a>);
<a name="l651"><span class="linenum"> 651</span></a>  
<a name="l652"><span class="linenum"> 652</span></a>  <span class="comment">            // Perform a virus scan now.</span>
<a name="l653"><span class="linenum"> 653</span></a>              try {
<a name="l654"><span class="linenum"> 654</span></a>                  \<a class="class" onClick="logClass('repository')" href="../../../../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('antivir_scan_file')" href="../../../../_functions/antivir_scan_file.html" onMouseOver="funcPopup(event,'antivir_scan_file')">antivir_scan_file</a>(<a class="var it549" onMouseOver="hilite(549)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../../../_variables/filepath.html">$filepath</a>, <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../../_variables/attachment.html">$attachment</a>-&gt;<a onClick="logVariable('filename')" class="var it39714" onMouseOver="hilite(39714)" onMouseOut="lolite()" href="../../../../_variables/filename.html">filename</a>, true);
<a name="l655"><span class="linenum"> 655</span></a>              } catch (\moodle_exception <a class="var it193" onMouseOver="hilite(193)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../../../_variables/e.html">$e</a>) {
<a name="l656"><span class="linenum"> 656</span></a>                  <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;--&gt; A virus was found in the attachment '{<a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../../_variables/attachment.html">$attachment</a>-&gt;<a onClick="logVariable('filename')" class="var it39714" onMouseOver="hilite(39714)" onMouseOut="lolite()" href="../../../../_variables/filename.html">filename</a>}'.&quot;);
<a name="l657"><span class="linenum"> 657</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;inform_attachment_virus();
<a name="l658"><span class="linenum"> 658</span></a>                  return;
<a name="l659"><span class="linenum"> 659</span></a>              }
<a name="l660"><span class="linenum"> 660</span></a>          }
<a name="l661"><span class="linenum"> 661</span></a>  
<a name="l662"><span class="linenum"> 662</span></a>          return <a class="var it1437" onMouseOver="hilite(1437)" onMouseOut="lolite()" onClick="logVariable('attachment')" href="../../../../_variables/attachment.html">$attachment</a>;
<a name="l663"><span class="linenum"> 663</span></a>      }
<a name="l664"><span class="linenum"> 664</span></a>  
<a name="l665"><span class="linenum"> 665</span></a>      <span class="comment">/**</span>
<a name="l666"><span class="linenum"> 666</span></a>  <span class="comment">     * Check whether the key provided is valid.</span>
<a name="l667"><span class="linenum"> 667</span></a>  <span class="comment">     *</span>
<a name="l668"><span class="linenum"> 668</span></a>  <span class="comment">     * @param bool $status</span>
<a name="l669"><span class="linenum"> 669</span></a>  <span class="comment">     * @param mixed $messageid The Hore message Uid</span>
<a name="l670"><span class="linenum"> 670</span></a>  <span class="comment">     * @return bool</span>
<a name="l671"><span class="linenum"> 671</span></a>  <span class="comment">     */</span>
<a name="l672"><span class="linenum"> 672</span></a>      private function <a class="function" onClick="logFunction('passes_key_validation')" href="../../../../_functions/passes_key_validation.html" onMouseOver="funcPopup(event,'passes_key_validation')">passes_key_validation</a>(<a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../../_variables/status.html">$status</a>, <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>) {
<a name="l673"><span class="linenum"> 673</span></a>  <span class="comment">        // The validation result is tested in a bitwise operation.</span>
<a name="l674"><span class="linenum"> 674</span></a>          if ((
<a name="l675"><span class="linenum"> 675</span></a>              <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../../_variables/status.html">$status</a> &amp; ~ \core\message\inbound\<a class="class" onClick="logClass('address_manager')" href="../../../../_classes/address_manager.html" onMouseOver="classPopup(event,'address_manager')">address_manager</a>::VALIDATION_SUCCESS
<a name="l676"><span class="linenum"> 676</span></a>                      &amp; ~ \core\message\inbound\<a class="class" onClick="logClass('address_manager')" href="../../../../_classes/address_manager.html" onMouseOver="classPopup(event,'address_manager')">address_manager</a>::VALIDATION_UNKNOWN_DATAKEY
<a name="l677"><span class="linenum"> 677</span></a>                      &amp; ~ \core\message\inbound\<a class="class" onClick="logClass('address_manager')" href="../../../../_classes/address_manager.html" onMouseOver="classPopup(event,'address_manager')">address_manager</a>::VALIDATION_EXPIRED_DATAKEY
<a name="l678"><span class="linenum"> 678</span></a>                      &amp; ~ \core\message\inbound\<a class="class" onClick="logClass('address_manager')" href="../../../../_classes/address_manager.html" onMouseOver="classPopup(event,'address_manager')">address_manager</a>::VALIDATION_INVALID_HASH
<a name="l679"><span class="linenum"> 679</span></a>                      &amp; ~ \core\message\inbound\<a class="class" onClick="logClass('address_manager')" href="../../../../_classes/address_manager.html" onMouseOver="classPopup(event,'address_manager')">address_manager</a>::VALIDATION_ADDRESS_MISMATCH) !== 0) {
<a name="l680"><span class="linenum"> 680</span></a>  
<a name="l681"><span class="linenum"> 681</span></a>  <span class="comment">            // One of the above bits was found in the status - fail the validation.</span>
<a name="l682"><span class="linenum"> 682</span></a>              return false;
<a name="l683"><span class="linenum"> 683</span></a>          }
<a name="l684"><span class="linenum"> 684</span></a>          return true;
<a name="l685"><span class="linenum"> 685</span></a>      }
<a name="l686"><span class="linenum"> 686</span></a>  
<a name="l687"><span class="linenum"> 687</span></a>      <span class="comment">/**</span>
<a name="l688"><span class="linenum"> 688</span></a>  <span class="comment">     * Add the specified flag to the message.</span>
<a name="l689"><span class="linenum"> 689</span></a>  <span class="comment">     *</span>
<a name="l690"><span class="linenum"> 690</span></a>  <span class="comment">     * @param mixed $messageid</span>
<a name="l691"><span class="linenum"> 691</span></a>  <span class="comment">     * @param string $flag The flag to add</span>
<a name="l692"><span class="linenum"> 692</span></a>  <span class="comment">     */</span>
<a name="l693"><span class="linenum"> 693</span></a>      private function <a class="function" onClick="logFunction('add_flag_to_message')" href="../../../../_functions/add_flag_to_message.html" onMouseOver="funcPopup(event,'add_flag_to_message')">add_flag_to_message</a>(<a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>, <a class="var it3085" onMouseOver="hilite(3085)" onMouseOut="lolite()" onClick="logVariable('flag')" href="../../../../_variables/flag.html">$flag</a>) {
<a name="l694"><span class="linenum"> 694</span></a>  <span class="comment">        // Get the current mailbox.</span>
<a name="l695"><span class="linenum"> 695</span></a>          <a class="var it9649" onMouseOver="hilite(9649)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_mailbox')" href="../../../../_functions/get_mailbox.html" onMouseOver="funcPopup(event,'get_mailbox')">get_mailbox</a>();
<a name="l696"><span class="linenum"> 696</span></a>  
<a name="l697"><span class="linenum"> 697</span></a>  <span class="comment">        // Mark it as read to lock the message.</span>
<a name="l698"><span class="linenum"> 698</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('store')" href="../../../../_functions/store.html" onMouseOver="funcPopup(event,'store')">store</a>(<a class="var it9649" onMouseOver="hilite(9649)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a>, array(
<a name="l699"><span class="linenum"> 699</span></a>              'ids' =&gt; new \Horde_Imap_Client_Ids(<a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>),
<a name="l700"><span class="linenum"> 700</span></a>              'add' =&gt; <a class="var it3085" onMouseOver="hilite(3085)" onMouseOut="lolite()" onClick="logVariable('flag')" href="../../../../_variables/flag.html">$flag</a>,
<a name="l701"><span class="linenum"> 701</span></a>          ));
<a name="l702"><span class="linenum"> 702</span></a>      }
<a name="l703"><span class="linenum"> 703</span></a>  
<a name="l704"><span class="linenum"> 704</span></a>      <span class="comment">/**</span>
<a name="l705"><span class="linenum"> 705</span></a>  <span class="comment">     * Remove the specified flag from the message.</span>
<a name="l706"><span class="linenum"> 706</span></a>  <span class="comment">     *</span>
<a name="l707"><span class="linenum"> 707</span></a>  <span class="comment">     * @param mixed $messageid</span>
<a name="l708"><span class="linenum"> 708</span></a>  <span class="comment">     * @param string $flag The flag to remove</span>
<a name="l709"><span class="linenum"> 709</span></a>  <span class="comment">     */</span>
<a name="l710"><span class="linenum"> 710</span></a>      private function <a class="function" onClick="logFunction('remove_flag_from_message')" href="../../../../_functions/remove_flag_from_message.html" onMouseOver="funcPopup(event,'remove_flag_from_message')">remove_flag_from_message</a>(<a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>, <a class="var it3085" onMouseOver="hilite(3085)" onMouseOut="lolite()" onClick="logVariable('flag')" href="../../../../_variables/flag.html">$flag</a>) {
<a name="l711"><span class="linenum"> 711</span></a>  <span class="comment">        // Get the current mailbox.</span>
<a name="l712"><span class="linenum"> 712</span></a>          <a class="var it9649" onMouseOver="hilite(9649)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_mailbox')" href="../../../../_functions/get_mailbox.html" onMouseOver="funcPopup(event,'get_mailbox')">get_mailbox</a>();
<a name="l713"><span class="linenum"> 713</span></a>  
<a name="l714"><span class="linenum"> 714</span></a>  <span class="comment">        // Mark it as read to lock the message.</span>
<a name="l715"><span class="linenum"> 715</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('store')" href="../../../../_functions/store.html" onMouseOver="funcPopup(event,'store')">store</a>(<a class="var it9649" onMouseOver="hilite(9649)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a>, array(
<a name="l716"><span class="linenum"> 716</span></a>              'ids' =&gt; <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>,
<a name="l717"><span class="linenum"> 717</span></a>              'delete' =&gt; <a class="var it3085" onMouseOver="hilite(3085)" onMouseOut="lolite()" onClick="logVariable('flag')" href="../../../../_variables/flag.html">$flag</a>,
<a name="l718"><span class="linenum"> 718</span></a>          ));
<a name="l719"><span class="linenum"> 719</span></a>      }
<a name="l720"><span class="linenum"> 720</span></a>  
<a name="l721"><span class="linenum"> 721</span></a>      <span class="comment">/**</span>
<a name="l722"><span class="linenum"> 722</span></a>  <span class="comment">     * Check whether the message has the specified flag</span>
<a name="l723"><span class="linenum"> 723</span></a>  <span class="comment">     *</span>
<a name="l724"><span class="linenum"> 724</span></a>  <span class="comment">     * @param mixed $messageid</span>
<a name="l725"><span class="linenum"> 725</span></a>  <span class="comment">     * @param string $flag The flag to check</span>
<a name="l726"><span class="linenum"> 726</span></a>  <span class="comment">     * @return bool</span>
<a name="l727"><span class="linenum"> 727</span></a>  <span class="comment">     */</span>
<a name="l728"><span class="linenum"> 728</span></a>      private function <a class="function" onClick="logFunction('message_has_flag')" href="../../../../_functions/message_has_flag.html" onMouseOver="funcPopup(event,'message_has_flag')">message_has_flag</a>(<a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>, <a class="var it3085" onMouseOver="hilite(3085)" onMouseOut="lolite()" onClick="logVariable('flag')" href="../../../../_variables/flag.html">$flag</a>) {
<a name="l729"><span class="linenum"> 729</span></a>  <span class="comment">        // Get the current mailbox.</span>
<a name="l730"><span class="linenum"> 730</span></a>          <a class="var it9649" onMouseOver="hilite(9649)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_mailbox')" href="../../../../_functions/get_mailbox.html" onMouseOver="funcPopup(event,'get_mailbox')">get_mailbox</a>();
<a name="l731"><span class="linenum"> 731</span></a>  
<a name="l732"><span class="linenum"> 732</span></a>  <span class="comment">        // Grab messagedata including flags.</span>
<a name="l733"><span class="linenum"> 733</span></a>          <a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a> = new \Horde_Imap_Client_Fetch_Query();
<a name="l734"><span class="linenum"> 734</span></a>          <a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>-&gt;<a class="function" onClick="logFunction('flags')" href="../../../../_functions/flags.html" onMouseOver="funcPopup(event,'flags')">flags</a>();
<a name="l735"><span class="linenum"> 735</span></a>          <a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>-&gt;<a class="function" onClick="logFunction('structure')" href="../../../../_functions/structure.html" onMouseOver="funcPopup(event,'structure')">structure</a>();
<a name="l736"><span class="linenum"> 736</span></a>          <a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('fetch')" href="../../../../_functions/fetch.html" onMouseOver="funcPopup(event,'fetch')">fetch</a>(<a class="var it9649" onMouseOver="hilite(9649)" onMouseOut="lolite()" onClick="logVariable('mailbox')" href="../../../../_variables/mailbox.html">$mailbox</a>, <a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>, array(
<a name="l737"><span class="linenum"> 737</span></a>              'ids' =&gt; <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>,
<a name="l738"><span class="linenum"> 738</span></a>          ))-&gt;<a class="function" onClick="logFunction('first')" href="../../../../_functions/first.html" onMouseOver="funcPopup(event,'first')">first</a>();
<a name="l739"><span class="linenum"> 739</span></a>          <a class="var it2309" onMouseOver="hilite(2309)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../../../_variables/flags.html">$flags</a> = <a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>-&gt;<a class="function" onClick="logFunction('getFlags')" href="../../../../_functions/getflags.html" onMouseOver="funcPopup(event,'getflags')">getFlags</a>();
<a name="l740"><span class="linenum"> 740</span></a>  
<a name="l741"><span class="linenum"> 741</span></a>          return <a class="phpfunction" onClick="logFunction('in_array')" href="../../../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it3085" onMouseOver="hilite(3085)" onMouseOut="lolite()" onClick="logVariable('flag')" href="../../../../_variables/flag.html">$flag</a>, <a class="var it2309" onMouseOver="hilite(2309)" onMouseOut="lolite()" onClick="logVariable('flags')" href="../../../../_variables/flags.html">$flags</a>);
<a name="l742"><span class="linenum"> 742</span></a>      }
<a name="l743"><span class="linenum"> 743</span></a>  
<a name="l744"><span class="linenum"> 744</span></a>      <span class="comment">/**</span>
<a name="l745"><span class="linenum"> 745</span></a>  <span class="comment">     * Attempt to determine whether this message is a bulk message (e.g. automated reply).</span>
<a name="l746"><span class="linenum"> 746</span></a>  <span class="comment">     *</span>
<a name="l747"><span class="linenum"> 747</span></a>  <span class="comment">     * @param \Horde_Imap_Client_Data_Fetch $message The message to process</span>
<a name="l748"><span class="linenum"> 748</span></a>  <span class="comment">     * @param string|\Horde_Imap_Client_Ids $messageid The Hore message Uid</span>
<a name="l749"><span class="linenum"> 749</span></a>  <span class="comment">     * @return boolean</span>
<a name="l750"><span class="linenum"> 750</span></a>  <span class="comment">     */</span>
<a name="l751"><span class="linenum"> 751</span></a>      private function <a class="function" onClick="logFunction('is_bulk_message')" href="../../../../_functions/is_bulk_message.html" onMouseOver="funcPopup(event,'is_bulk_message')">is_bulk_message</a>(
<a name="l752"><span class="linenum"> 752</span></a>              \Horde_Imap_Client_Data_Fetch <a class="var it643" onMouseOver="hilite(643)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a>,
<a name="l753"><span class="linenum"> 753</span></a>              <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>) {
<a name="l754"><span class="linenum"> 754</span></a>          <a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a> = new \Horde_Imap_Client_Fetch_Query();
<a name="l755"><span class="linenum"> 755</span></a>          <a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>-&gt;<a class="function" onClick="logFunction('headerText')" href="../../../../_functions/headertext.html" onMouseOver="funcPopup(event,'headertext')">headerText</a>(array('peek' =&gt; true));
<a name="l756"><span class="linenum"> 756</span></a>  
<a name="l757"><span class="linenum"> 757</span></a>          <a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="function" onClick="logFunction('fetch')" href="../../../../_functions/fetch.html" onMouseOver="funcPopup(event,'fetch')">fetch</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_mailbox')" href="../../../../_functions/get_mailbox.html" onMouseOver="funcPopup(event,'get_mailbox')">get_mailbox</a>(), <a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../../../_variables/query.html">$query</a>, array('ids' =&gt; <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>))-&gt;<a class="function" onClick="logFunction('first')" href="../../../../_functions/first.html" onMouseOver="funcPopup(event,'first')">first</a>();
<a name="l758"><span class="linenum"> 758</span></a>  
<a name="l759"><span class="linenum"> 759</span></a>  <span class="comment">        // Assume that this message is not bulk to begin with.</span>
<a name="l760"><span class="linenum"> 760</span></a>          <a class="var it24582" onMouseOver="hilite(24582)" onMouseOut="lolite()" onClick="logVariable('isbulk')" href="../../../../_variables/isbulk.html">$isbulk</a> = false;
<a name="l761"><span class="linenum"> 761</span></a>  
<a name="l762"><span class="linenum"> 762</span></a>  <span class="comment">        // An auto-reply may itself include the Bulk Precedence.</span>
<a name="l763"><span class="linenum"> 763</span></a>          <a class="var it24583" onMouseOver="hilite(24583)" onMouseOut="lolite()" onClick="logVariable('precedence')" href="../../../../_variables/precedence.html">$precedence</a> = <a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>-&gt;<a class="function" onClick="logFunction('getHeaderText')" href="../../../../_functions/getheadertext.html" onMouseOver="funcPopup(event,'getheadertext')">getHeaderText</a>(0, \<a class="class" onClick="logClass('Horde_Imap_Client_Data_Fetch')" href="../../../../_classes/horde_imap_client_data_fetch.html" onMouseOver="classPopup(event,'horde_imap_client_data_fetch')">Horde_Imap_Client_Data_Fetch</a>::HEADER_PARSE)-&gt;<a class="function" onClick="logFunction('getValue')" href="../../../../_functions/getvalue.html" onMouseOver="funcPopup(event,'getvalue')">getValue</a>('Precedence');
<a name="l764"><span class="linenum"> 764</span></a>          <a class="var it24582" onMouseOver="hilite(24582)" onMouseOut="lolite()" onClick="logVariable('isbulk')" href="../../../../_variables/isbulk.html">$isbulk</a> = <a class="var it24582" onMouseOver="hilite(24582)" onMouseOut="lolite()" onClick="logVariable('isbulk')" href="../../../../_variables/isbulk.html">$isbulk</a> || <a class="phpfunction" onClick="logFunction('strtolower')" href="../../../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="var it24583" onMouseOver="hilite(24583)" onMouseOut="lolite()" onClick="logVariable('precedence')" href="../../../../_variables/precedence.html">$precedence</a>) == 'bulk';
<a name="l765"><span class="linenum"> 765</span></a>  
<a name="l766"><span class="linenum"> 766</span></a>  <span class="comment">        // If the X-Autoreply header is set, and not 'no', then this is an automatic reply.</span>
<a name="l767"><span class="linenum"> 767</span></a>          <a class="var it24584" onMouseOver="hilite(24584)" onMouseOut="lolite()" onClick="logVariable('autoreply')" href="../../../../_variables/autoreply.html">$autoreply</a> = <a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>-&gt;<a class="function" onClick="logFunction('getHeaderText')" href="../../../../_functions/getheadertext.html" onMouseOver="funcPopup(event,'getheadertext')">getHeaderText</a>(0, \<a class="class" onClick="logClass('Horde_Imap_Client_Data_Fetch')" href="../../../../_classes/horde_imap_client_data_fetch.html" onMouseOver="classPopup(event,'horde_imap_client_data_fetch')">Horde_Imap_Client_Data_Fetch</a>::HEADER_PARSE)-&gt;<a class="function" onClick="logFunction('getValue')" href="../../../../_functions/getvalue.html" onMouseOver="funcPopup(event,'getvalue')">getValue</a>('X-Autoreply');
<a name="l768"><span class="linenum"> 768</span></a>          <a class="var it24582" onMouseOver="hilite(24582)" onMouseOut="lolite()" onClick="logVariable('isbulk')" href="../../../../_variables/isbulk.html">$isbulk</a> = <a class="var it24582" onMouseOver="hilite(24582)" onMouseOut="lolite()" onClick="logVariable('isbulk')" href="../../../../_variables/isbulk.html">$isbulk</a> || (<a class="var it24584" onMouseOver="hilite(24584)" onMouseOut="lolite()" onClick="logVariable('autoreply')" href="../../../../_variables/autoreply.html">$autoreply</a> &amp;&amp; <a class="var it24584" onMouseOver="hilite(24584)" onMouseOut="lolite()" onClick="logVariable('autoreply')" href="../../../../_variables/autoreply.html">$autoreply</a> != 'no');
<a name="l769"><span class="linenum"> 769</span></a>  
<a name="l770"><span class="linenum"> 770</span></a>  <span class="comment">        // If the X-Autorespond header is set, and not 'no', then this is an automatic response.</span>
<a name="l771"><span class="linenum"> 771</span></a>          <a class="var it24585" onMouseOver="hilite(24585)" onMouseOut="lolite()" onClick="logVariable('autorespond')" href="../../../../_variables/autorespond.html">$autorespond</a> = <a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>-&gt;<a class="function" onClick="logFunction('getHeaderText')" href="../../../../_functions/getheadertext.html" onMouseOver="funcPopup(event,'getheadertext')">getHeaderText</a>(0, \<a class="class" onClick="logClass('Horde_Imap_Client_Data_Fetch')" href="../../../../_classes/horde_imap_client_data_fetch.html" onMouseOver="classPopup(event,'horde_imap_client_data_fetch')">Horde_Imap_Client_Data_Fetch</a>::HEADER_PARSE)-&gt;<a class="function" onClick="logFunction('getValue')" href="../../../../_functions/getvalue.html" onMouseOver="funcPopup(event,'getvalue')">getValue</a>('X-Autorespond');
<a name="l772"><span class="linenum"> 772</span></a>          <a class="var it24582" onMouseOver="hilite(24582)" onMouseOut="lolite()" onClick="logVariable('isbulk')" href="../../../../_variables/isbulk.html">$isbulk</a> = <a class="var it24582" onMouseOver="hilite(24582)" onMouseOut="lolite()" onClick="logVariable('isbulk')" href="../../../../_variables/isbulk.html">$isbulk</a> || (<a class="var it24585" onMouseOver="hilite(24585)" onMouseOut="lolite()" onClick="logVariable('autorespond')" href="../../../../_variables/autorespond.html">$autorespond</a> &amp;&amp; <a class="var it24585" onMouseOver="hilite(24585)" onMouseOut="lolite()" onClick="logVariable('autorespond')" href="../../../../_variables/autorespond.html">$autorespond</a> != 'no');
<a name="l773"><span class="linenum"> 773</span></a>  
<a name="l774"><span class="linenum"> 774</span></a>  <span class="comment">        // If the Auto-Submitted header is set, and not 'no', then this is a non-human response.</span>
<a name="l775"><span class="linenum"> 775</span></a>          <a class="var it24586" onMouseOver="hilite(24586)" onMouseOut="lolite()" onClick="logVariable('autosubmitted')" href="../../../../_variables/autosubmitted.html">$autosubmitted</a> = <a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>-&gt;<a class="function" onClick="logFunction('getHeaderText')" href="../../../../_functions/getheadertext.html" onMouseOver="funcPopup(event,'getheadertext')">getHeaderText</a>(0, \<a class="class" onClick="logClass('Horde_Imap_Client_Data_Fetch')" href="../../../../_classes/horde_imap_client_data_fetch.html" onMouseOver="classPopup(event,'horde_imap_client_data_fetch')">Horde_Imap_Client_Data_Fetch</a>::HEADER_PARSE)-&gt;<a class="function" onClick="logFunction('getValue')" href="../../../../_functions/getvalue.html" onMouseOver="funcPopup(event,'getvalue')">getValue</a>('Auto-Submitted');
<a name="l776"><span class="linenum"> 776</span></a>          <a class="var it24582" onMouseOver="hilite(24582)" onMouseOut="lolite()" onClick="logVariable('isbulk')" href="../../../../_variables/isbulk.html">$isbulk</a> = <a class="var it24582" onMouseOver="hilite(24582)" onMouseOut="lolite()" onClick="logVariable('isbulk')" href="../../../../_variables/isbulk.html">$isbulk</a> || (<a class="var it24586" onMouseOver="hilite(24586)" onMouseOut="lolite()" onClick="logVariable('autosubmitted')" href="../../../../_variables/autosubmitted.html">$autosubmitted</a> &amp;&amp; <a class="var it24586" onMouseOver="hilite(24586)" onMouseOut="lolite()" onClick="logVariable('autosubmitted')" href="../../../../_variables/autosubmitted.html">$autosubmitted</a> != 'no');
<a name="l777"><span class="linenum"> 777</span></a>  
<a name="l778"><span class="linenum"> 778</span></a>          return <a class="var it24582" onMouseOver="hilite(24582)" onMouseOut="lolite()" onClick="logVariable('isbulk')" href="../../../../_variables/isbulk.html">$isbulk</a>;
<a name="l779"><span class="linenum"> 779</span></a>      }
<a name="l780"><span class="linenum"> 780</span></a>  
<a name="l781"><span class="linenum"> 781</span></a>      <span class="comment">/**</span>
<a name="l782"><span class="linenum"> 782</span></a>  <span class="comment">     * Send the message to the appropriate handler.</span>
<a name="l783"><span class="linenum"> 783</span></a>  <span class="comment">     *</span>
<a name="l784"><span class="linenum"> 784</span></a>  <span class="comment">     * @return bool</span>
<a name="l785"><span class="linenum"> 785</span></a>  <span class="comment">     * @throws \core\message\inbound\processing_failed_exception if anything goes wrong.</span>
<a name="l786"><span class="linenum"> 786</span></a>  <span class="comment">     */</span>
<a name="l787"><span class="linenum"> 787</span></a>      private function <a class="function" onClick="logFunction('send_to_handler')" href="../../../../_functions/send_to_handler.html" onMouseOver="funcPopup(event,'send_to_handler')">send_to_handler</a>() {
<a name="l788"><span class="linenum"> 788</span></a>          try {
<a name="l789"><span class="linenum"> 789</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;--&gt; Passing to Inbound Message handler {<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addressmanager')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/addressmanager.html">addressmanager</a>-&gt;<a class="function" onClick="logFunction('get_handler')" href="../../../../_functions/get_handler.html" onMouseOver="funcPopup(event,'get_handler')">get_handler</a>()-&gt;classname}&quot;);
<a name="l790"><span class="linenum"> 790</span></a>              if (<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addressmanager')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/addressmanager.html">addressmanager</a>-&gt;<a class="function" onClick="logFunction('handle_message')" href="../../../../_functions/handle_message.html" onMouseOver="funcPopup(event,'handle_message')">handle_message</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>)) {
<a name="l791"><span class="linenum"> 791</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('inform_user_of_success')" href="../../../../_functions/inform_user_of_success.html" onMouseOver="funcPopup(event,'inform_user_of_success')">inform_user_of_success</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>, <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../../_variables/result.html">$result</a>);
<a name="l792"><span class="linenum"> 792</span></a>  <span class="comment">                // Request that this message be marked for deletion.</span>
<a name="l793"><span class="linenum"> 793</span></a>                  return true;
<a name="l794"><span class="linenum"> 794</span></a>              }
<a name="l795"><span class="linenum"> 795</span></a>  
<a name="l796"><span class="linenum"> 796</span></a>          } catch (\core\message\inbound\processing_failed_exception <a class="var it193" onMouseOver="hilite(193)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../../../_variables/e.html">$e</a>) {
<a name="l797"><span class="linenum"> 797</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-&gt; The Inbound Message handler threw an exception. Unable to process this message. The user has been informed.&quot;);
<a name="l798"><span class="linenum"> 798</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;--&gt; &quot; . <a class="var it193" onMouseOver="hilite(193)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>());
<a name="l799"><span class="linenum"> 799</span></a>  <span class="comment">            // Throw the exception again, with additional data.</span>
<a name="l800"><span class="linenum"> 800</span></a>              <a class="var it111" onMouseOver="hilite(111)" onMouseOut="lolite()" onClick="logVariable('error')" href="../../../../_variables/error.html">$error</a> = new \stdClass();
<a name="l801"><span class="linenum"> 801</span></a>              <a class="var it111" onMouseOver="hilite(111)" onMouseOut="lolite()" onClick="logVariable('error')" href="../../../../_variables/error.html">$error</a>-&gt;<a onClick="logVariable('subject')" class="var it39715" onMouseOver="hilite(39715)" onMouseOut="lolite()" href="../../../../_variables/subject.html">subject</a>     = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>-&gt;envelope-&gt;subject;
<a name="l802"><span class="linenum"> 802</span></a>              <a class="var it111" onMouseOver="hilite(111)" onMouseOut="lolite()" onClick="logVariable('error')" href="../../../../_variables/error.html">$error</a>-&gt;<a onClick="logVariable('message')" class="var it39715" onMouseOver="hilite(39715)" onMouseOut="lolite()" href="../../../../_variables/message.html">message</a>     = <a class="var it193" onMouseOver="hilite(193)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>();
<a name="l803"><span class="linenum"> 803</span></a>              throw new \core\message\inbound\processing_failed_exception('messageprocessingfailed', 'tool_messageinbound', <a class="var it111" onMouseOver="hilite(111)" onMouseOut="lolite()" onClick="logVariable('error')" href="../../../../_variables/error.html">$error</a>);
<a name="l804"><span class="linenum"> 804</span></a>  
<a name="l805"><span class="linenum"> 805</span></a>          } catch (\Exception <a class="var it193" onMouseOver="hilite(193)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../../../_variables/e.html">$e</a>) {
<a name="l806"><span class="linenum"> 806</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-&gt; The Inbound Message handler threw an exception. Unable to process this message. User informed.&quot;);
<a name="l807"><span class="linenum"> 807</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;--&gt; &quot; . <a class="var it193" onMouseOver="hilite(193)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>());
<a name="l808"><span class="linenum"> 808</span></a>  <span class="comment">            // An unknown error occurred. Still inform the user but, this time do not include the specific</span>
<a name="l809"><span class="linenum"> 809</span></a>  <span class="comment">            // message information.</span>
<a name="l810"><span class="linenum"> 810</span></a>              <a class="var it111" onMouseOver="hilite(111)" onMouseOut="lolite()" onClick="logVariable('error')" href="../../../../_variables/error.html">$error</a> = new \stdClass();
<a name="l811"><span class="linenum"> 811</span></a>              <a class="var it111" onMouseOver="hilite(111)" onMouseOut="lolite()" onClick="logVariable('error')" href="../../../../_variables/error.html">$error</a>-&gt;<a onClick="logVariable('subject')" class="var it39715" onMouseOver="hilite(39715)" onMouseOut="lolite()" href="../../../../_variables/subject.html">subject</a>     = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>-&gt;envelope-&gt;subject;
<a name="l812"><span class="linenum"> 812</span></a>              throw new \core\message\inbound\processing_failed_exception('messageprocessingfailedunknown',
<a name="l813"><span class="linenum"> 813</span></a>                      'tool_messageinbound', <a class="var it111" onMouseOver="hilite(111)" onMouseOut="lolite()" onClick="logVariable('error')" href="../../../../_variables/error.html">$error</a>);
<a name="l814"><span class="linenum"> 814</span></a>  
<a name="l815"><span class="linenum"> 815</span></a>          }
<a name="l816"><span class="linenum"> 816</span></a>  
<a name="l817"><span class="linenum"> 817</span></a>  <span class="comment">        // Something went wrong and the message was not handled well in the Inbound Message handler.</span>
<a name="l818"><span class="linenum"> 818</span></a>          <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;-&gt; The Inbound Message handler reported an error. The message may not have been processed.&quot;);
<a name="l819"><span class="linenum"> 819</span></a>  
<a name="l820"><span class="linenum"> 820</span></a>  <span class="comment">        // It is the responsiblity of the handler to throw an appropriate exception if the message was not processed.</span>
<a name="l821"><span class="linenum"> 821</span></a>  <span class="comment">        // Do not inform the user at this point.</span>
<a name="l822"><span class="linenum"> 822</span></a>          return false;
<a name="l823"><span class="linenum"> 823</span></a>      }
<a name="l824"><span class="linenum"> 824</span></a>  
<a name="l825"><span class="linenum"> 825</span></a>      <span class="comment">/**</span>
<a name="l826"><span class="linenum"> 826</span></a>  <span class="comment">     * Handle failure of sender verification.</span>
<a name="l827"><span class="linenum"> 827</span></a>  <span class="comment">     *</span>
<a name="l828"><span class="linenum"> 828</span></a>  <span class="comment">     * This will send a notification to the user identified in the Inbound Message address informing them that a message has been</span>
<a name="l829"><span class="linenum"> 829</span></a>  <span class="comment">     * stored. The message includes a verification link and reply-to address which is handled by the</span>
<a name="l830"><span class="linenum"> 830</span></a>  <span class="comment">     * invalid_recipient_handler.</span>
<a name="l831"><span class="linenum"> 831</span></a>  <span class="comment">     *</span>
<a name="l832"><span class="linenum"> 832</span></a>  <span class="comment">     * @param \Horde_Imap_Client_Ids $messageids</span>
<a name="l833"><span class="linenum"> 833</span></a>  <span class="comment">     * @param string $recipient The message recipient</span>
<a name="l834"><span class="linenum"> 834</span></a>  <span class="comment">     * @return bool</span>
<a name="l835"><span class="linenum"> 835</span></a>  <span class="comment">     */</span>
<a name="l836"><span class="linenum"> 836</span></a>      private function <a class="function" onClick="logFunction('handle_verification_failure')" href="../../../../_functions/handle_verification_failure.html" onMouseOver="funcPopup(event,'handle_verification_failure')">handle_verification_failure</a>(
<a name="l837"><span class="linenum"> 837</span></a>              \Horde_Imap_Client_Ids <a class="var it24587" onMouseOver="hilite(24587)" onMouseOut="lolite()" onClick="logVariable('messageids')" href="../../../../_variables/messageids.html">$messageids</a>,
<a name="l838"><span class="linenum"> 838</span></a>              <a class="var it3859" onMouseOver="hilite(3859)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../../_variables/recipient.html">$recipient</a>) {
<a name="l839"><span class="linenum"> 839</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>;
<a name="l840"><span class="linenum"> 840</span></a>  
<a name="l841"><span class="linenum"> 841</span></a>          if (!<a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>-&gt;messageid) {
<a name="l842"><span class="linenum"> 842</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;---&gt; Warning: Unable to determine the Message-ID of the message.&quot;);
<a name="l843"><span class="linenum"> 843</span></a>              return false;
<a name="l844"><span class="linenum"> 844</span></a>          }
<a name="l845"><span class="linenum"> 845</span></a>  
<a name="l846"><span class="linenum"> 846</span></a>  <span class="comment">        // Move the message into a new mailbox.</span>
<a name="l847"><span class="linenum"> 847</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('client')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/client.html">client</a>-&gt;<a class="phpfunction" onClick="logFunction('copy')" href="../../../../_functions/copy.html" onMouseOver="phpfuncPopup(event,'copy')">copy</a>(self::MAILBOX, self::CONFIRMATIONFOLDER, array(
<a name="l848"><span class="linenum"> 848</span></a>                  'create'    =&gt; true,
<a name="l849"><span class="linenum"> 849</span></a>                  'ids'       =&gt; <a class="var it24587" onMouseOver="hilite(24587)" onMouseOut="lolite()" onClick="logVariable('messageids')" href="../../../../_variables/messageids.html">$messageids</a>,
<a name="l850"><span class="linenum"> 850</span></a>                  'move'      =&gt; true,
<a name="l851"><span class="linenum"> 851</span></a>              ));
<a name="l852"><span class="linenum"> 852</span></a>  
<a name="l853"><span class="linenum"> 853</span></a>  <span class="comment">        // Store the data from the failed message in the associated table.</span>
<a name="l854"><span class="linenum"> 854</span></a>          <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a> = new \stdClass();
<a name="l855"><span class="linenum"> 855</span></a>          <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('messageid')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../../../_variables/messageid.html">messageid</a> = <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>;
<a name="l856"><span class="linenum"> 856</span></a>          <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('userid')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../../../_variables/userid.html">userid</a> = <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>;
<a name="l857"><span class="linenum"> 857</span></a>          <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('address')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../../../_variables/address.html">address</a> = <a class="var it3859" onMouseOver="hilite(3859)" onMouseOut="lolite()" onClick="logVariable('recipient')" href="../../../../_variables/recipient.html">$recipient</a>;
<a name="l858"><span class="linenum"> 858</span></a>          <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('timecreated')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../../../_variables/timecreated.html">timecreated</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l859"><span class="linenum"> 859</span></a>          <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('messageinbound_messagelist', <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>);
<a name="l860"><span class="linenum"> 860</span></a>  
<a name="l861"><span class="linenum"> 861</span></a>  <span class="comment">        // Setup the Inbound Message generator for the invalid recipient handler.</span>
<a name="l862"><span class="linenum"> 862</span></a>          <a class="var it24563" onMouseOver="hilite(24563)" onMouseOut="lolite()" onClick="logVariable('addressmanager')" href="../../../../_variables/addressmanager.html">$addressmanager</a> = new \core\message\inbound\address_manager();
<a name="l863"><span class="linenum"> 863</span></a>          <a class="var it24563" onMouseOver="hilite(24563)" onMouseOut="lolite()" onClick="logVariable('addressmanager')" href="../../../../_variables/addressmanager.html">$addressmanager</a>-&gt;<a class="function" onClick="logFunction('set_handler')" href="../../../../_functions/set_handler.html" onMouseOver="funcPopup(event,'set_handler')">set_handler</a>('\tool_messageinbound\message\inbound\invalid_recipient_handler');
<a name="l864"><span class="linenum"> 864</span></a>          <a class="var it24563" onMouseOver="hilite(24563)" onMouseOut="lolite()" onClick="logVariable('addressmanager')" href="../../../../_variables/addressmanager.html">$addressmanager</a>-&gt;<a class="function" onClick="logFunction('set_data')" href="../../../../_functions/set_data.html" onMouseOver="funcPopup(event,'set_data')">set_data</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>);
<a name="l865"><span class="linenum"> 865</span></a>  
<a name="l866"><span class="linenum"> 866</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a> = new \stdClass();
<a name="l867"><span class="linenum"> 867</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('component')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../../../_variables/component.html">component</a>           = 'tool_messageinbound';
<a name="l868"><span class="linenum"> 868</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('name')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../../../_variables/name.html">name</a>                = 'invalidrecipienthandler';
<a name="l869"><span class="linenum"> 869</span></a>  
<a name="l870"><span class="linenum"> 870</span></a>          <a class="var it1853" onMouseOver="hilite(1853)" onMouseOut="lolite()" onClick="logVariable('userfrom')" href="../../../../_variables/userfrom.html">$userfrom</a> = clone <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>;
<a name="l871"><span class="linenum"> 871</span></a>          <a class="var it1853" onMouseOver="hilite(1853)" onMouseOut="lolite()" onClick="logVariable('userfrom')" href="../../../../_variables/userfrom.html">$userfrom</a>-&gt;<a onClick="logVariable('customheaders')" class="var it39716" onMouseOver="hilite(39716)" onMouseOut="lolite()" href="../../../../_variables/customheaders.html">customheaders</a> = array();
<a name="l872"><span class="linenum"> 872</span></a>  <span class="comment">        // Adding the In-Reply-To header ensures that it is seen as a reply.</span>
<a name="l873"><span class="linenum"> 873</span></a>          <a class="var it1853" onMouseOver="hilite(1853)" onMouseOut="lolite()" onClick="logVariable('userfrom')" href="../../../../_variables/userfrom.html">$userfrom</a>-&gt;<a onClick="logVariable('customheaders')" class="var it39716" onMouseOver="hilite(39716)" onMouseOut="lolite()" href="../../../../_variables/customheaders.html">customheaders</a>[] = 'In-Reply-To: ' . <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>;
<a name="l874"><span class="linenum"> 874</span></a>  
<a name="l875"><span class="linenum"> 875</span></a>  <span class="comment">        // The message will be sent from the intended user.</span>
<a name="l876"><span class="linenum"> 876</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('userfrom')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../../../_variables/userfrom.html">userfrom</a>            = \<a class="class" onClick="logClass('core_user')" href="../../../../_classes/core_user.html" onMouseOver="classPopup(event,'core_user')">core_user</a>::<a class="function" onClick="logFunction('get_noreply_user')" href="../../../../_functions/get_noreply_user.html" onMouseOver="funcPopup(event,'get_noreply_user')">get_noreply_user</a>();
<a name="l877"><span class="linenum"> 877</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('userto')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../../../_variables/userto.html">userto</a>              = <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>;
<a name="l878"><span class="linenum"> 878</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('subject')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../../../_variables/subject.html">subject</a>             = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_reply_subject')" href="../../../../_functions/get_reply_subject.html" onMouseOver="funcPopup(event,'get_reply_subject')">get_reply_subject</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>-&gt;envelope-&gt;subject);
<a name="l879"><span class="linenum"> 879</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessage')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../../../_variables/fullmessage.html">fullmessage</a>         = <a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('invalidrecipientdescription', 'tool_messageinbound', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>);
<a name="l880"><span class="linenum"> 880</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessageformat')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../../../_variables/fullmessageformat.html">fullmessageformat</a>   = <a class="constant" onClick="logConstant('FORMAT_PLAIN')" href="../../../../_constants/FORMAT_PLAIN.html" onMouseOver="constPopup(event,'FORMAT_PLAIN')">FORMAT_PLAIN</a>;
<a name="l881"><span class="linenum"> 881</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessagehtml')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../../../_variables/fullmessagehtml.html">fullmessagehtml</a>     = <a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('invalidrecipientdescriptionhtml', 'tool_messageinbound', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>);
<a name="l882"><span class="linenum"> 882</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('smallmessage')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../../../_variables/smallmessage.html">smallmessage</a>        = <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessage')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../../../_variables/fullmessage.html">fullmessage</a>;
<a name="l883"><span class="linenum"> 883</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('notification')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../../../_variables/notification.html">notification</a>        = 1;
<a name="l884"><span class="linenum"> 884</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('replyto')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../../../_variables/replyto.html">replyto</a>             = <a class="var it24563" onMouseOver="hilite(24563)" onMouseOut="lolite()" onClick="logVariable('addressmanager')" href="../../../../_variables/addressmanager.html">$addressmanager</a>-&gt;<a class="function" onClick="logFunction('generate')" href="../../../../_functions/generate.html" onMouseOver="funcPopup(event,'generate')">generate</a>(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>);
<a name="l885"><span class="linenum"> 885</span></a>  
<a name="l886"><span class="linenum"> 886</span></a>          <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;--&gt; Sending a message to the user to report an verification failure.&quot;);
<a name="l887"><span class="linenum"> 887</span></a>          if (!<a class="function" onClick="logFunction('message_send')" href="../../../../_functions/message_send.html" onMouseOver="funcPopup(event,'message_send')">message_send</a>(<a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>)) {
<a name="l888"><span class="linenum"> 888</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;---&gt; Warning: Message could not be sent.&quot;);
<a name="l889"><span class="linenum"> 889</span></a>              return false;
<a name="l890"><span class="linenum"> 890</span></a>          }
<a name="l891"><span class="linenum"> 891</span></a>  
<a name="l892"><span class="linenum"> 892</span></a>          return true;
<a name="l893"><span class="linenum"> 893</span></a>      }
<a name="l894"><span class="linenum"> 894</span></a>  
<a name="l895"><span class="linenum"> 895</span></a>      <span class="comment">/**</span>
<a name="l896"><span class="linenum"> 896</span></a>  <span class="comment">     * Inform the identified sender of a processing error.</span>
<a name="l897"><span class="linenum"> 897</span></a>  <span class="comment">     *</span>
<a name="l898"><span class="linenum"> 898</span></a>  <span class="comment">     * @param string $error The error message</span>
<a name="l899"><span class="linenum"> 899</span></a>  <span class="comment">     */</span>
<a name="l900"><span class="linenum"> 900</span></a>      private function <a class="function" onClick="logFunction('inform_user_of_error')" href="../../../../_functions/inform_user_of_error.html" onMouseOver="funcPopup(event,'inform_user_of_error')">inform_user_of_error</a>(<a class="var it111" onMouseOver="hilite(111)" onMouseOut="lolite()" onClick="logVariable('error')" href="../../../../_variables/error.html">$error</a>) {
<a name="l901"><span class="linenum"> 901</span></a>          global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>;
<a name="l902"><span class="linenum"> 902</span></a>  
<a name="l903"><span class="linenum"> 903</span></a>  <span class="comment">        // The message will be sent from the intended user.</span>
<a name="l904"><span class="linenum"> 904</span></a>          <a class="var it1853" onMouseOver="hilite(1853)" onMouseOut="lolite()" onClick="logVariable('userfrom')" href="../../../../_variables/userfrom.html">$userfrom</a> = clone <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>;
<a name="l905"><span class="linenum"> 905</span></a>          <a class="var it1853" onMouseOver="hilite(1853)" onMouseOut="lolite()" onClick="logVariable('userfrom')" href="../../../../_variables/userfrom.html">$userfrom</a>-&gt;<a onClick="logVariable('customheaders')" class="var it39716" onMouseOver="hilite(39716)" onMouseOut="lolite()" href="../../../../_variables/customheaders.html">customheaders</a> = array();
<a name="l906"><span class="linenum"> 906</span></a>  
<a name="l907"><span class="linenum"> 907</span></a>          if (<a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>-&gt;messageid) {
<a name="l908"><span class="linenum"> 908</span></a>  <span class="comment">            // Adding the In-Reply-To header ensures that it is seen as a reply and threading is maintained.</span>
<a name="l909"><span class="linenum"> 909</span></a>              <a class="var it1853" onMouseOver="hilite(1853)" onMouseOut="lolite()" onClick="logVariable('userfrom')" href="../../../../_variables/userfrom.html">$userfrom</a>-&gt;<a onClick="logVariable('customheaders')" class="var it39716" onMouseOver="hilite(39716)" onMouseOut="lolite()" href="../../../../_variables/customheaders.html">customheaders</a>[] = 'In-Reply-To: ' . <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>;
<a name="l910"><span class="linenum"> 910</span></a>          }
<a name="l911"><span class="linenum"> 911</span></a>  
<a name="l912"><span class="linenum"> 912</span></a>          <a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a> = new \stdClass();
<a name="l913"><span class="linenum"> 913</span></a>          <a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>-&gt;<a onClick="logVariable('subject')" class="var it39717" onMouseOver="hilite(39717)" onMouseOut="lolite()" href="../../../../_variables/subject.html">subject</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>-&gt;envelope-&gt;subject;
<a name="l914"><span class="linenum"> 914</span></a>          <a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>-&gt;<a onClick="logVariable('error')" class="var it39717" onMouseOver="hilite(39717)" onMouseOut="lolite()" href="../../../../_variables/error.html">error</a> = <a class="var it111" onMouseOver="hilite(111)" onMouseOut="lolite()" onClick="logVariable('error')" href="../../../../_variables/error.html">$error</a>;
<a name="l915"><span class="linenum"> 915</span></a>  
<a name="l916"><span class="linenum"> 916</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a> = new \stdClass();
<a name="l917"><span class="linenum"> 917</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('component')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../../../_variables/component.html">component</a>           = 'tool_messageinbound';
<a name="l918"><span class="linenum"> 918</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('name')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../../../_variables/name.html">name</a>                = 'messageprocessingerror';
<a name="l919"><span class="linenum"> 919</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('userfrom')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../../../_variables/userfrom.html">userfrom</a>            = <a class="var it1853" onMouseOver="hilite(1853)" onMouseOut="lolite()" onClick="logVariable('userfrom')" href="../../../../_variables/userfrom.html">$userfrom</a>;
<a name="l920"><span class="linenum"> 920</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('userto')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../../../_variables/userto.html">userto</a>              = <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>;
<a name="l921"><span class="linenum"> 921</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('subject')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../../../_variables/subject.html">subject</a>             = self::<a class="function" onClick="logFunction('get_reply_subject')" href="../../../../_functions/get_reply_subject.html" onMouseOver="funcPopup(event,'get_reply_subject')">get_reply_subject</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>-&gt;envelope-&gt;subject);
<a name="l922"><span class="linenum"> 922</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessage')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../../../_variables/fullmessage.html">fullmessage</a>         = <a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('messageprocessingerror', 'tool_messageinbound', <a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>);
<a name="l923"><span class="linenum"> 923</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessageformat')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../../../_variables/fullmessageformat.html">fullmessageformat</a>   = <a class="constant" onClick="logConstant('FORMAT_PLAIN')" href="../../../../_constants/FORMAT_PLAIN.html" onMouseOver="constPopup(event,'FORMAT_PLAIN')">FORMAT_PLAIN</a>;
<a name="l924"><span class="linenum"> 924</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessagehtml')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../../../_variables/fullmessagehtml.html">fullmessagehtml</a>     = <a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('messageprocessingerrorhtml', 'tool_messageinbound', <a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>);
<a name="l925"><span class="linenum"> 925</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('smallmessage')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../../../_variables/smallmessage.html">smallmessage</a>        = <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessage')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../../../_variables/fullmessage.html">fullmessage</a>;
<a name="l926"><span class="linenum"> 926</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('notification')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../../../_variables/notification.html">notification</a>        = 1;
<a name="l927"><span class="linenum"> 927</span></a>  
<a name="l928"><span class="linenum"> 928</span></a>          if (<a class="function" onClick="logFunction('message_send')" href="../../../../_functions/message_send.html" onMouseOver="funcPopup(event,'message_send')">message_send</a>(<a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>)) {
<a name="l929"><span class="linenum"> 929</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;---&gt; Notification sent to {<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('email')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../../../_variables/email.html">email</a>}.&quot;);
<a name="l930"><span class="linenum"> 930</span></a>          } else {
<a name="l931"><span class="linenum"> 931</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;---&gt; Unable to send notification.&quot;);
<a name="l932"><span class="linenum"> 932</span></a>          }
<a name="l933"><span class="linenum"> 933</span></a>      }
<a name="l934"><span class="linenum"> 934</span></a>  
<a name="l935"><span class="linenum"> 935</span></a>      <span class="comment">/**</span>
<a name="l936"><span class="linenum"> 936</span></a>  <span class="comment">     * Inform the identified sender that message processing was successful.</span>
<a name="l937"><span class="linenum"> 937</span></a>  <span class="comment">     *</span>
<a name="l938"><span class="linenum"> 938</span></a>  <span class="comment">     * @param \stdClass $messagedata The data for the current message being processed.</span>
<a name="l939"><span class="linenum"> 939</span></a>  <span class="comment">     * @param mixed $handlerresult The result returned by the handler.</span>
<a name="l940"><span class="linenum"> 940</span></a>  <span class="comment">     * @return bool</span>
<a name="l941"><span class="linenum"> 941</span></a>  <span class="comment">     */</span>
<a name="l942"><span class="linenum"> 942</span></a>      private function <a class="function" onClick="logFunction('inform_user_of_success')" href="../../../../_functions/inform_user_of_success.html" onMouseOver="funcPopup(event,'inform_user_of_success')">inform_user_of_success</a>(\stdClass <a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>, <a class="var it1444" onMouseOver="hilite(1444)" onMouseOut="lolite()" onClick="logVariable('handlerresult')" href="../../../../_variables/handlerresult.html">$handlerresult</a>) {
<a name="l943"><span class="linenum"> 943</span></a>          global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>;
<a name="l944"><span class="linenum"> 944</span></a>  
<a name="l945"><span class="linenum"> 945</span></a>  <span class="comment">        // Check whether the handler has a success notification.</span>
<a name="l946"><span class="linenum"> 946</span></a>          <a class="var it5372" onMouseOver="hilite(5372)" onMouseOut="lolite()" onClick="logVariable('handler')" href="../../../../_variables/handler.html">$handler</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addressmanager')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/addressmanager.html">addressmanager</a>-&gt;<a class="function" onClick="logFunction('get_handler')" href="../../../../_functions/get_handler.html" onMouseOver="funcPopup(event,'get_handler')">get_handler</a>();
<a name="l947"><span class="linenum"> 947</span></a>          <a class="var it643" onMouseOver="hilite(643)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a> = <a class="var it5372" onMouseOver="hilite(5372)" onMouseOut="lolite()" onClick="logVariable('handler')" href="../../../../_variables/handler.html">$handler</a>-&gt;<a class="function" onClick="logFunction('get_success_message')" href="../../../../_functions/get_success_message.html" onMouseOver="funcPopup(event,'get_success_message')">get_success_message</a>(<a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>, <a class="var it1444" onMouseOver="hilite(1444)" onMouseOut="lolite()" onClick="logVariable('handlerresult')" href="../../../../_variables/handlerresult.html">$handlerresult</a>);
<a name="l948"><span class="linenum"> 948</span></a>  
<a name="l949"><span class="linenum"> 949</span></a>          if (!<a class="var it643" onMouseOver="hilite(643)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a>) {
<a name="l950"><span class="linenum"> 950</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;---&gt; Handler has not defined a success notification e-mail.&quot;);
<a name="l951"><span class="linenum"> 951</span></a>              return false;
<a name="l952"><span class="linenum"> 952</span></a>          }
<a name="l953"><span class="linenum"> 953</span></a>  
<a name="l954"><span class="linenum"> 954</span></a>  <span class="comment">        // Wrap the message in the notification wrapper.</span>
<a name="l955"><span class="linenum"> 955</span></a>          <a class="var it24588" onMouseOver="hilite(24588)" onMouseOut="lolite()" onClick="logVariable('messageparams')" href="../../../../_variables/messageparams.html">$messageparams</a> = new \stdClass();
<a name="l956"><span class="linenum"> 956</span></a>          <a class="var it24588" onMouseOver="hilite(24588)" onMouseOut="lolite()" onClick="logVariable('messageparams')" href="../../../../_variables/messageparams.html">$messageparams</a>-&gt;<a onClick="logVariable('html')" class="var it39718" onMouseOver="hilite(39718)" onMouseOut="lolite()" href="../../../../_variables/html.html">html</a>    = <a class="var it643" onMouseOver="hilite(643)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a>-&gt;<a onClick="logVariable('html')" class="var it39615" onMouseOver="hilite(39615)" onMouseOut="lolite()" href="../../../../_variables/html.html">html</a>;
<a name="l957"><span class="linenum"> 957</span></a>          <a class="var it24588" onMouseOver="hilite(24588)" onMouseOut="lolite()" onClick="logVariable('messageparams')" href="../../../../_variables/messageparams.html">$messageparams</a>-&gt;<a onClick="logVariable('plain')" class="var it39718" onMouseOver="hilite(39718)" onMouseOut="lolite()" href="../../../../_variables/plain.html">plain</a>   = <a class="var it643" onMouseOver="hilite(643)" onMouseOut="lolite()" onClick="logVariable('message')" href="../../../../_variables/message.html">$message</a>-&gt;<a onClick="logVariable('plain')" class="var it39615" onMouseOver="hilite(39615)" onMouseOut="lolite()" href="../../../../_variables/plain.html">plain</a>;
<a name="l958"><span class="linenum"> 958</span></a>          <a class="var it24589" onMouseOver="hilite(24589)" onMouseOut="lolite()" onClick="logVariable('messagepreferencesurl')" href="../../../../_variables/messagepreferencesurl.html">$messagepreferencesurl</a> = new \moodle_url("<a class="filename" href="../../../../message/edit.php.html">/message/edit.php</a>", array('id' =&gt; <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>));
<a name="l959"><span class="linenum"> 959</span></a>          <a class="var it24588" onMouseOver="hilite(24588)" onMouseOut="lolite()" onClick="logVariable('messageparams')" href="../../../../_variables/messageparams.html">$messageparams</a>-&gt;<a onClick="logVariable('messagepreferencesurl')" class="var it39718" onMouseOver="hilite(39718)" onMouseOut="lolite()" href="../../../../_variables/messagepreferencesurl.html">messagepreferencesurl</a> = <a class="var it24589" onMouseOver="hilite(24589)" onMouseOut="lolite()" onClick="logVariable('messagepreferencesurl')" href="../../../../_variables/messagepreferencesurl.html">$messagepreferencesurl</a>-&gt;<a class="function" onClick="logFunction('out')" href="../../../../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>();
<a name="l960"><span class="linenum"> 960</span></a>          <a class="var it24590" onMouseOver="hilite(24590)" onMouseOut="lolite()" onClick="logVariable('htmlmessage')" href="../../../../_variables/htmlmessage.html">$htmlmessage</a> = <a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('messageprocessingsuccesshtml', 'tool_messageinbound', <a class="var it24588" onMouseOver="hilite(24588)" onMouseOut="lolite()" onClick="logVariable('messageparams')" href="../../../../_variables/messageparams.html">$messageparams</a>);
<a name="l961"><span class="linenum"> 961</span></a>          <a class="var it24591" onMouseOver="hilite(24591)" onMouseOut="lolite()" onClick="logVariable('plainmessage')" href="../../../../_variables/plainmessage.html">$plainmessage</a> = <a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('messageprocessingsuccess', 'tool_messageinbound', <a class="var it24588" onMouseOver="hilite(24588)" onMouseOut="lolite()" onClick="logVariable('messageparams')" href="../../../../_variables/messageparams.html">$messageparams</a>);
<a name="l962"><span class="linenum"> 962</span></a>  
<a name="l963"><span class="linenum"> 963</span></a>  <span class="comment">        // The message will be sent from the intended user.</span>
<a name="l964"><span class="linenum"> 964</span></a>          <a class="var it1853" onMouseOver="hilite(1853)" onMouseOut="lolite()" onClick="logVariable('userfrom')" href="../../../../_variables/userfrom.html">$userfrom</a> = clone <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>;
<a name="l965"><span class="linenum"> 965</span></a>          <a class="var it1853" onMouseOver="hilite(1853)" onMouseOut="lolite()" onClick="logVariable('userfrom')" href="../../../../_variables/userfrom.html">$userfrom</a>-&gt;<a onClick="logVariable('customheaders')" class="var it39716" onMouseOver="hilite(39716)" onMouseOut="lolite()" href="../../../../_variables/customheaders.html">customheaders</a> = array();
<a name="l966"><span class="linenum"> 966</span></a>  
<a name="l967"><span class="linenum"> 967</span></a>          if (<a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>-&gt;messageid) {
<a name="l968"><span class="linenum"> 968</span></a>  <span class="comment">            // Adding the In-Reply-To header ensures that it is seen as a reply and threading is maintained.</span>
<a name="l969"><span class="linenum"> 969</span></a>              <a class="var it1853" onMouseOver="hilite(1853)" onMouseOut="lolite()" onClick="logVariable('userfrom')" href="../../../../_variables/userfrom.html">$userfrom</a>-&gt;<a onClick="logVariable('customheaders')" class="var it39716" onMouseOver="hilite(39716)" onMouseOut="lolite()" href="../../../../_variables/customheaders.html">customheaders</a>[] = 'In-Reply-To: ' . <a class="var it177" onMouseOver="hilite(177)" onMouseOut="lolite()" onClick="logVariable('messageid')" href="../../../../_variables/messageid.html">$messageid</a>;
<a name="l970"><span class="linenum"> 970</span></a>          }
<a name="l971"><span class="linenum"> 971</span></a>  
<a name="l972"><span class="linenum"> 972</span></a>          <a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a> = new \stdClass();
<a name="l973"><span class="linenum"> 973</span></a>          <a class="var it1415" onMouseOver="hilite(1415)" onMouseOut="lolite()" onClick="logVariable('messagedata')" href="../../../../_variables/messagedata.html">$messagedata</a>-&gt;<a onClick="logVariable('subject')" class="var it39717" onMouseOver="hilite(39717)" onMouseOut="lolite()" href="../../../../_variables/subject.html">subject</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>-&gt;envelope-&gt;subject;
<a name="l974"><span class="linenum"> 974</span></a>  
<a name="l975"><span class="linenum"> 975</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a> = new \stdClass();
<a name="l976"><span class="linenum"> 976</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('component')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../../../_variables/component.html">component</a>           = 'tool_messageinbound';
<a name="l977"><span class="linenum"> 977</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('name')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../../../_variables/name.html">name</a>                = 'messageprocessingsuccess';
<a name="l978"><span class="linenum"> 978</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('userfrom')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../../../_variables/userfrom.html">userfrom</a>            = <a class="var it1853" onMouseOver="hilite(1853)" onMouseOut="lolite()" onClick="logVariable('userfrom')" href="../../../../_variables/userfrom.html">$userfrom</a>;
<a name="l979"><span class="linenum"> 979</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('userto')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../../../_variables/userto.html">userto</a>              = <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>;
<a name="l980"><span class="linenum"> 980</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('subject')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../../../_variables/subject.html">subject</a>             = self::<a class="function" onClick="logFunction('get_reply_subject')" href="../../../../_functions/get_reply_subject.html" onMouseOver="funcPopup(event,'get_reply_subject')">get_reply_subject</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentmessagedata')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../../_variables/currentmessagedata.html">currentmessagedata</a>-&gt;envelope-&gt;subject);
<a name="l981"><span class="linenum"> 981</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessage')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../../../_variables/fullmessage.html">fullmessage</a>         = <a class="var it24591" onMouseOver="hilite(24591)" onMouseOut="lolite()" onClick="logVariable('plainmessage')" href="../../../../_variables/plainmessage.html">$plainmessage</a>;
<a name="l982"><span class="linenum"> 982</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessageformat')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../../../_variables/fullmessageformat.html">fullmessageformat</a>   = <a class="constant" onClick="logConstant('FORMAT_PLAIN')" href="../../../../_constants/FORMAT_PLAIN.html" onMouseOver="constPopup(event,'FORMAT_PLAIN')">FORMAT_PLAIN</a>;
<a name="l983"><span class="linenum"> 983</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessagehtml')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../../../_variables/fullmessagehtml.html">fullmessagehtml</a>     = <a class="var it24590" onMouseOver="hilite(24590)" onMouseOut="lolite()" onClick="logVariable('htmlmessage')" href="../../../../_variables/htmlmessage.html">$htmlmessage</a>;
<a name="l984"><span class="linenum"> 984</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('smallmessage')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../../../_variables/smallmessage.html">smallmessage</a>        = <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessage')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../../../_variables/fullmessage.html">fullmessage</a>;
<a name="l985"><span class="linenum"> 985</span></a>          <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('notification')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../../../_variables/notification.html">notification</a>        = 1;
<a name="l986"><span class="linenum"> 986</span></a>  
<a name="l987"><span class="linenum"> 987</span></a>          if (<a class="function" onClick="logFunction('message_send')" href="../../../../_functions/message_send.html" onMouseOver="funcPopup(event,'message_send')">message_send</a>(<a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../../../_variables/eventdata.html">$eventdata</a>)) {
<a name="l988"><span class="linenum"> 988</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;---&gt; Success notification sent to {<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('email')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../../../_variables/email.html">email</a>}.&quot;);
<a name="l989"><span class="linenum"> 989</span></a>          } else {
<a name="l990"><span class="linenum"> 990</span></a>              <a class="function" onClick="logFunction('mtrace')" href="../../../../_functions/mtrace.html" onMouseOver="funcPopup(event,'mtrace')">mtrace</a>(&quot;---&gt; Unable to send success notification.&quot;);
<a name="l991"><span class="linenum"> 991</span></a>          }
<a name="l992"><span class="linenum"> 992</span></a>          return true;
<a name="l993"><span class="linenum"> 993</span></a>      }
<a name="l994"><span class="linenum"> 994</span></a>  
<a name="l995"><span class="linenum"> 995</span></a>      <span class="comment">/**</span>
<a name="l996"><span class="linenum"> 996</span></a>  <span class="comment">     * Return a formatted subject line for replies.</span>
<a name="l997"><span class="linenum"> 997</span></a>  <span class="comment">     *</span>
<a name="l998"><span class="linenum"> 998</span></a>  <span class="comment">     * @param string $subject The subject string</span>
<a name="l999"><span class="linenum"> 999</span></a>  <span class="comment">     * @return string The formatted reply subject</span>
<a name="l1000"><span class="linenum">1000</span></a>  <span class="comment">     */</span>
<a name="l1001"><span class="linenum">1001</span></a>      private function <a class="function" onClick="logFunction('get_reply_subject')" href="../../../../_functions/get_reply_subject.html" onMouseOver="funcPopup(event,'get_reply_subject')">get_reply_subject</a>(<a class="var it1426" onMouseOver="hilite(1426)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../../_variables/subject.html">$subject</a>) {
<a name="l1002"><span class="linenum">1002</span></a>          <a class="var it637" onMouseOver="hilite(637)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../../_variables/prefix.html">$prefix</a> = <a class="function" onClick="logFunction('get_string')" href="../../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('replysubjectprefix', 'tool_messageinbound');
<a name="l1003"><span class="linenum">1003</span></a>          if (!(<a class="phpfunction" onClick="logFunction('substr')" href="../../../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it1426" onMouseOver="hilite(1426)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../../_variables/subject.html">$subject</a>, 0, <a class="function" onClick="logFunction('strlen')" href="../../../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it637" onMouseOver="hilite(637)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../../_variables/prefix.html">$prefix</a>)) == <a class="var it637" onMouseOver="hilite(637)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../../_variables/prefix.html">$prefix</a>)) {
<a name="l1004"><span class="linenum">1004</span></a>              <a class="var it1426" onMouseOver="hilite(1426)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../../_variables/subject.html">$subject</a> = <a class="var it637" onMouseOver="hilite(637)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../../_variables/prefix.html">$prefix</a> . ' ' . <a class="var it1426" onMouseOver="hilite(1426)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../../_variables/subject.html">$subject</a>;
<a name="l1005"><span class="linenum">1005</span></a>          }
<a name="l1006"><span class="linenum">1006</span></a>  
<a name="l1007"><span class="linenum">1007</span></a>          return <a class="var it1426" onMouseOver="hilite(1426)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../../../../_variables/subject.html">$subject</a>;
<a name="l1008"><span class="linenum">1008</span></a>      }
<a name="l1009"><span class="linenum">1009</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'fopen': ['fopen', 'Return a stream handle to this string stream. ', [['lib/horde/framework/Horde/Support','StringStream.php',41],['lib/horde/framework/Horde/Support','CombineStream.php',41]], 231],
'getbodypartsize': ['getbodypartsize', 'Returns the body part size, if returned by the server. ', [['lib/horde/framework/Horde/Imap/Client/Data','Fetch.php',218]], 1],
'getvalue': ['getvalue', 'Return the value of this object, convert the XML-RPC native nill value into a PHP NULL ', [['lib/zend/Zend/XmlRpc/Value','Nil.php',50],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter/Column','Rule.php',306],['backup/cc','entity11.lti.class.php',75],['lib/zend/Zend/XmlRpc/Value','Base64.php',58],['lib/pear/HTML/QuickForm','input.php',120],['lib/form','filemanager.php',127],['lib/horde/framework/Horde/Mime','Headers.php',433],['lib/zend/Zend/Gdata/Calendar/Extension','QuickAdd.php',101],['lib/zend/Zend/Http','Cookie.php',143],['lib/zend/Zend/XmlRpc/Value','BigInteger.php',56],['lib/google/src/Google/Service','DoubleClickBidManager.php',366],['lib/google/src/Google/Service','Doubleclicksearch.php',800],['lib/google/src/Google/Service','Doubleclicksearch.php',826],['lib/google/src/Google/Service','Manager.php',745],['lib/google/src/Google/Service','Manager.php',1102],['lib/google/src/Google/Service','Manager.php',1472],['lib/pear/HTML/QuickForm','link.php',122],['lib/google/src/Google/Service','Reports.php',699],['lib/google/src/Google/Service','Reports.php',1131],['lib/zend/Zend/Gdata/YouTube/Extension','Position.php',56],['lib/google/src/Google/Service','Gmail.php',1776],['lib/google/src/Google/Service','Plus.php',3123],['lib/google/src/Google/Service','Plus.php',3326],['lib/google/src/Google/Service','Plus.php',3361],['lib/google/src/Google/Service','Mirror.php',1470],['lib/google/src/Google/Service','Mirror.php',1927],['lib/form','editor.php',151],['lib/google/src/Google/Service','Genomics.php',2647],['lib/form','selectgroups.php',148],['lib/zend/Zend/XmlRpc/Value','String.php',51],['lib/zend/Zend/Gdata/Calendar/Extension','AccessLevel.php',93],['lib/google/src/Google/Service','Dfareporting.php',1121],['lib/google/src/Google/Service','Dfareporting.php',1183],['lib/google/src/Google/Service','PlusDomains.php',3293],['lib/google/src/Google/Service','PlusDomains.php',3496],['lib/google/src/Google/Service','PlusDomains.php',3531],['lib/pear/HTML/QuickForm','checkbox.php',197],['lib/zend/Zend/XmlRpc/Value','DateTime.php',82],['lib/zend/Zend/Gdata/Books/Extension','Viewability.php',95],['lib/google/src/Google/Service','Drive.php',3741],['lib/google/src/Google/Service','Drive.php',5074],['lib/google/src/Google/Service','Drive.php',5208],['backup/cc','entity11.basiclti.class.php',80],['lib/google/src/Google/Service','Books.php',3697],['lib','searchlib.php',65],['lib/pear/HTML/QuickForm','select.php',201],['lib/google/src/Google/Service','YouTube.php',7381],['lib/google/src/Google/Service','YouTube.php',8160],['lib/zend/Zend/Gdata/Calendar/Extension','Timezone.php',93],['lib/zend/Zend/XmlRpc/Value','Collection.php',59],['lib/google/src/Google/Service','Coordinate.php',761],['lib/zend/Zend/Gdata/Extension','Transparency.php',91],['lib/google/src/Google/Service','Autoscaler.php',1196],['lib/google/src/Google/Service','Audit.php',368],['lib/google/src/Google/Service','Datastore.php',587],['lib/google/src/Google/Service','Datastore.php',1052],['lib/google/src/Google/Service','Pagespeedonline.php',384],['lib/google/src/Google/Service','Pagespeedonline.php',467],['lib/google/src/Google/Service','Pagespeedonline.php',521],['lib/pear/HTML/QuickForm','textarea.php',115],['lib/google/src/Google/Service','ShoppingContent.php',2131],['lib/google/src/Google/Service','ShoppingContent.php',2877],['lib/google/src/Google/Service','ShoppingContent.php',3483],['lib/google/src/Google/Service','ShoppingContent.php',3662],['lib/google/src/Google/Service','ShoppingContent.php',3921],['lib/google/src/Google/Service','ShoppingContent.php',3947],['lib/google/src/Google/Utils','URITemplate.php',322],['lib/zend/Zend/XmlRpc/Value','Integer.php',56],['lib/zend/Zend/Gdata/Extension','AttendeeStatus.php',91],['lib/google/src/Google/Service','SQLAdmin.php',1307],['lib/pear/HTML/QuickForm','advcheckbox.php',170],['lib/google/src/Google/Service','Fitness.php',751],['lib/google/src/Google/Service','TagManager.php',2690],['lib/google/src/Google/Service','Directory.php',4910],['lib/google/src/Google/Service','Directory.php',5175],['lib/google/src/Google/Service','Directory.php',5290],['lib/zend/Zend/Gdata/Books/Extension','Embeddability.php',95],['lib/pear/HTML/QuickForm','element.php',174],['lib/zend/Zend/XmlRpc/Value','Double.php',53],['lib/zend/Zend/Gdata/Calendar/Extension','Color.php',94],['lib/zend/Zend/Server/Reflection','Node.php',145],['lib/zend/Zend/Gdata/Extension','EventStatus.php',70],['lib/zend/Zend/XmlRpc/Value','Boolean.php',54],['mod/scorm/datamodels','scorm_13.js',376],['lib/google/src/Google/Service','Games.php',5489],['lib/phpexcel/PHPExcel','Cell.php',183],['lib/phpexcel/PHPExcel/Calculation','FormulaToken.php',123],['lib/google/src/Google/Service','MapsEngine.php',3862],['lib/zend/Zend/Gdata/Calendar/Extension','Hidden.php',102],['lib/editor/tinymce/plugins/spellchecker/classes/utils','JSON.php',85],['lib/zend/Zend/Gdata/Extension','Visibility.php',91],['lib/google/src/Google/Service','Prediction.php',547],['lib/google/src/Google/Service','Prediction.php',689],['lib/google/src/Google/Service','Compute.php',5811],['lib/google/src/Google/Service','Compute.php',6868],['lib/google/src/Google/Service','Compute.php',6960],['lib/google/src/Google/Service','Compute.php',7466],['lib/google/src/Google/Service','Compute.php',8592],['lib/google/src/Google/Service','Compute.php',8995],['lib/google/src/Google/Service','Compute.php',9058],['lib/google/src/Google/Service','Compute.php',9679],['lib/google/src/Google/Service','Compute.php',9771],['lib/google/src/Google/Service','Compute.php',10408],['lib/google/src/Google/Service','Compute.php',11124],['lib/google/src/Google/Service','Compute.php',11550],['lib/zend/Zend/Gdata/Calendar/Extension','Selected.php',102],['lib/google/src/Google/Service','CloudMonitoring.php',945],['lib/google/src/Google/Service','Calendar.php',1980],['lib/google/src/Google/Service','Calendar.php',3666],['lib/google/src/Google/Service','Analytics.php',6683],['lib/pear/HTML/QuickForm','file.php',138],['mod/wiki/editors','wikifiletable.php',74],['lib/zend/Zend/Gdata/Calendar/Extension','SendEventNotifications.php',100],['lib/zend/Zend/Gdata/Extension','AttendeeType.php',91],['lib/zend/Zend/Service/DeveloperGarden/ConferenceCall','ParticipantStatus.php',82],['lib/pear/HTML/QuickForm','group.php',179],['lib/pear/HTML/QuickForm','xbutton.php',96],['lib/google/src/Google/Service','Replicapool.php',1269],['lib/google/src/Google/Service','Resourceviews.php',597],['lib/google/src/Google/Service','Resourceviews.php',1008],['lib/zend/Zend/Gdata/Extension','Rating.php',218],['lib/zend/Zend/Gdata/Extension','ExtendedProperty.php',95]], 265],
'getbodypart': ['getbodypart', 'Get a body part entry. ', [['lib/horde/framework/Horde/Imap/Client/Data','Fetch.php',191]], 3],
'process_message_data': ['process_message_data', 'Process a message to retrieve it\'s header data without body and attachemnts. ', [['admin/tool/messageinbound/classes','manager.php',449]], 2],
'getheadertext': ['getheadertext', '', [['lib/google/src/Google/Service','Doubleclicksearch.php',983],['lib/horde/framework/Horde/Imap/Client/Data','Fetch.php',121]], 7],
'getdescription': ['getdescription', '', [['lib/alfresco/Service','Version.php',112],['lib/minify/lib/MrClay/Cli','Arg.php',136],['lib/zend/Zend/Server/Reflection','Parameter.php',115],['lib/google/src/Google/Service','Fusiontables.php',1407],['lib/google/src/Google/Service','Fusiontables.php',2180],['lib/google/src/Google/Service','QPXExpress.php',209],['lib/zend/Zend/Server/Reflection/Function','Abstract.php',455],['lib/google/src/Google/Service','Blogger.php',1721],['lib/google/src/Google/Service','Manager.php',503],['lib/google/src/Google/Service','Manager.php',621],['lib/google/src/Google/Service','Manager.php',804],['lib/google/src/Google/Service','Manager.php',885],['lib/google/src/Google/Service','Manager.php',974],['lib/google/src/Google/Service','Manager.php',1340],['lib/google/src/Google/Service','Manager.php',1637],['lib/google/src/Google/Service','Manager.php',1801],['lib/google/src/Google/Service','Plus.php',656],['lib/google/src/Google/Service','Plus.php',1448],['lib/google/src/Google/Service','Plus.php',2193],['lib/google/src/Google/Service','Plus.php',3244],['lib/zend/Zend/Service/Simpy','Watchlist.php',142],['lib/zend/Zend/Server/Method','Parameter.php',123],['lib/google/src/Google/Service','Genomics.php',2599],['lib/google/src/Google/Service','Genomics.php',2959],['lib/google/src/Google/Service','Genomics.php',3323],['lib/google/src/Google/Service','PlusDomains.php',916],['lib/google/src/Google/Service','PlusDomains.php',1753],['lib/google/src/Google/Service','PlusDomains.php',2094],['lib/google/src/Google/Service','PlusDomains.php',3414],['lib/google/src/Google/Service','Drive.php',4060],['lib/phpexcel/PHPExcel/Worksheet','BaseDrawing.php',181],['lib/google/src/Google/Service','Books.php',3131],['lib/google/src/Google/Service','Books.php',4663],['lib/google/src/Google/Service','Books.php',4923],['lib/google/src/Google/Service','Books.php',5881],['lib/google/src/Google/Service','AdExchangeSeller.php',1168],['lib/google/src/Google/Service','Bigquery.php',981],['lib/google/src/Google/Service','Bigquery.php',2659],['lib/google/src/Google/Service','Bigquery.php',2968],['lib/google/src/Google/Service','Groupssettings.php',242],['lib/zend/Zend/Gdata/Media/Extension','MediaGroup.php',425],['lib/google/src/Google/Service','YouTube.php',4212],['lib/google/src/Google/Service','YouTube.php',5022],['lib/google/src/Google/Service','YouTube.php',5123],['lib/google/src/Google/Service','YouTube.php',6988],['lib/google/src/Google/Service','YouTube.php',7294],['lib/google/src/Google/Service','YouTube.php',7779],['lib/google/src/Google/Service','YouTube.php',7995],['lib/google/src/Google/Service','YouTube.php',8383],['lib/google/src/Google/Service','YouTube.php',8649],['lib/google/src/Google/Service','YouTube.php',8710],['lib/google/src/Google/Service','YouTube.php',10135],['lib/google/src/Google/Service','Autoscaler.php',550],['lib/google/src/Google/Service','Autoscaler.php',1241],['lib/google/src/Google/Service','Autoscaler.php',1380],['lib/google/src/Google/Service','ShoppingContent.php',3127],['lib/zend/Zend/Service/Simpy','Note.php',206],['lib/zend/Zend/Server/Reflection','ReturnValue.php',85],['lib/google/src/Google/Service','Fitness.php',1085],['lib/google/src/Google/Service','Directory.php',3260],['lib/google/src/Google/Service','Directory.php',3997],['lib/google/src/Google/Service','Directory.php',5075],['lib/zend/Zend/Service/Technorati','Author.php',146],['lib/phpexcel/PHPExcel','DocumentProperties.php',262],['lib/google/src/Google/Service','Container.php',502],['lib/google/src/Google/Service','AndroidPublisher.php',2700],['lib/google/src/Google/Service','Games.php',2293],['lib/google/src/Google/Service','Games.php',2868],['lib/google/src/Google/Service','Games.php',3135],['lib/google/src/Google/Service','Games.php',5358],['lib/google/src/Google/Service','Games.php',5739],['lib/google/src/Google/Service','Games.php',6576],['lib/google/src/Google/Service','Games.php',6859],['lib/google/src/Google/Service','MapsEngine.php',3380],['lib/google/src/Google/Service','MapsEngine.php',4050],['lib/google/src/Google/Service','MapsEngine.php',4291],['lib/google/src/Google/Service','MapsEngine.php',4591],['lib/google/src/Google/Service','MapsEngine.php',5240],['lib/google/src/Google/Service','MapsEngine.php',5339],['lib/google/src/Google/Service','MapsEngine.php',5469],['lib/google/src/Google/Service','MapsEngine.php',5639],['lib/google/src/Google/Service','MapsEngine.php',5805],['lib/google/src/Google/Service','MapsEngine.php',6160],['lib/horde/framework/Horde/Mime','Part.php',802],['lib/google/src/Google/Service','Compute.php',5550],['lib/google/src/Google/Service','Compute.php',6003],['lib/google/src/Google/Service','Compute.php',6082],['lib/google/src/Google/Service','Compute.php',6339],['lib/google/src/Google/Service','Compute.php',6615],['lib/google/src/Google/Service','Compute.php',7005],['lib/google/src/Google/Service','Compute.php',7205],['lib/google/src/Google/Service','Compute.php',7547],['lib/google/src/Google/Service','Compute.php',7608],['lib/google/src/Google/Service','Compute.php',7801],['lib/google/src/Google/Service','Compute.php',8035],['lib/google/src/Google/Service','Compute.php',8300],['lib/google/src/Google/Service','Compute.php',8405],['lib/google/src/Google/Service','Compute.php',8685],['lib/google/src/Google/Service','Compute.php',9099],['lib/google/src/Google/Service','Compute.php',9801],['lib/google/src/Google/Service','Compute.php',9889],['lib/google/src/Google/Service','Compute.php',10017],['lib/google/src/Google/Service','Compute.php',10186],['lib/google/src/Google/Service','Compute.php',10534],['lib/google/src/Google/Service','Compute.php',10735],['lib/google/src/Google/Service','Compute.php',10863],['lib/google/src/Google/Service','Compute.php',11169],['lib/google/src/Google/Service','Compute.php',11658],['lib/google/src/Google/Service','Compute.php',11814],['lib/google/src/Google/Service','Compute.php',11991],['lib/google/src/Google/Service','Compute.php',12130],['lib/zend/Zend/Gdata/YouTube','InboxEntry.php',173],['lib/google/src/Google/Service','CloudMonitoring.php',573],['lib/google/src/Google/Service','CloudMonitoring.php',623],['lib/google/src/Google/Service','Calendar.php',2003],['lib/google/src/Google/Service','Calendar.php',2183],['lib/google/src/Google/Service','Calendar.php',2643],['lib/google/src/Google/Service','Calendar.php',3357],['lib/google/src/Google/Service','Analytics.php',4193],['lib/google/src/Google/Service','Analytics.php',5161],['lib/zend/Zend/Gdata/YouTube','PlaylistListEntry.php',193],['lib/google/src/Google/Service','Tasks.php',733],['lib/zend/Zend/Service/DeveloperGarden/ConferenceCall','ConferenceDetail.php',105],['lib/zend/Zend/Service/SlideShare','SlideShow.php',340],['lib/google/src/Google/Service','AdSense.php',3085],['lib/google/src/Google/Service','Dns.php',619],['lib/google/src/Google/Service','Replicapool.php',663],['lib/google/src/Google/Service','Resourceviews.php',1047]], 18],
'currentmailbox': ['currentmailbox', 'Return the currently opened mailbox and access mode. ', [['lib/horde/framework/Horde/Imap/Client','Base.php',1052]], 2],
'get_success_message': ['get_success_message', 'Return the content of any success notification to be sent. Both an HTML and Plain Text variant must be provided. ', [['mod/forum/classes/message/inbound','reply_handler.php',287],['lib/classes/message/inbound','handler.php',225]], 1],
'getflags': ['getflags', 'returns the value of $flags ', [['lib/zend/Zend/Service/DeveloperGarden/ConferenceCall','ParticipantDetail.php',174],['lib/horde/framework/Horde/Imap/Client/Data','Fetch.php',292]], 2],
'intervalsearch': ['intervalsearch', 'Search for messages within a given interval. Only one interval of each type can be specified per search query. If the IMAP server supports the WITHIN extension (RFC 5032), it will be used.  Otherwise, the search query will be dynamically created using IMAP4rev1 search terms. ', [['lib/horde/framework/Horde/Imap/Client/Search','Query.php',591]], 1],
'flags': ['flags', 'Return flags set for the message. ', [['lib/horde/framework/Horde/Imap/Client/Fetch','Query.php',208]], 2],
'get_reply_subject': ['get_reply_subject', 'Return a formatted subject line for replies. ', [['admin/tool/messageinbound/classes','manager.php',995]], 3],
'add_flag_to_message': ['add_flag_to_message', 'Add the specified flag to the message. ', [['admin/tool/messageinbound/classes','manager.php',687]], 4],
'contenttypemap': ['contenttypemap', 'Returns a mapping of all MIME IDs to their content-types. ', [['lib/horde/framework/Horde/Mime','Part.php',1619]], 4],
'strlen': ['strlen', 'Multibyte safe strlen() function, uses mbstring or iconv for UTF-8, falls back to typo3. ', [['lib/classes','text.php',281],['lib/typo3','class.t3lib_cs.php',1520]], 1698],
'make_temp_directory': ['make_temp_directory', 'Create a directory under tempdir and make sure it is writable. ', [['lib','setuplib.php',1578]], 58],
'remove_flag_from_message': ['remove_flag_from_message', 'Remove the specified flag from the message. ', [['admin/tool/messageinbound/classes','manager.php',704]], 1],
'inform_user_of_success': ['inform_user_of_success', 'Inform the identified sender that message processing was successful. ', [['admin/tool/messageinbound/classes','manager.php',935]], 1],
'getuid': ['getuid', '', [['lib/google/src/Google/Service','Fitness.php',979],['lib/horde/framework/Horde/Imap/Client/Data','Fetch.php',361]], 10],
'bodypartsize': ['bodypartsize', 'Returns the decoded body part size for a MIME ID. ', [['lib/horde/framework/Horde/Imap/Client/Fetch','Query.php',148]], 1],
'message_has_flag': ['message_has_flag', 'Check whether the message has the specified flag ', [['admin/tool/messageinbound/classes','manager.php',721]], 1],
'process_message_data_body': ['process_message_data_body', 'Process a message again to add body and attachment data. ', [['admin/tool/messageinbound/classes','manager.php',497]], 1],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required. ', [['lib/dml','pgsql_native_moodle_database.php',883],['lib/dml','oci_native_moodle_database.php',1249],['lib/dml','sqlsrv_native_moodle_database.php',978],['lib/dml','mssql_native_moodle_database.php',898],['lib/dml','mysqli_native_moodle_database.php',1177],['lib/dml/tests','dml_test.php',5427],['lib/dml','pdo_moodle_database.php',386],['question/engine/upgrade','upgradelib.php',121]], 1512],
'process_message_part_body': ['process_message_part_body', 'Process the messagedata and part data to extract the content of this part. ', [['admin/tool/messageinbound/classes','manager.php',578]], 2],
'get_string': ['get_string', 'Return a core get_string() call ', [['lib/external','externallib.php',112],['lib','moodlelib.php',6538],['lib','moodlelib.php',9417],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38],['lib/classes','string_manager_install.php',95],['question/behaviour','behaviourbase.php',756]], 19235],
'mtrace': ['mtrace', 'For outputting debugging info ', [['lib','moodlelib.php',8221]], 323],
'getbodypartdecode': ['getbodypartdecode', 'Determines if/how a body part was MIME decoded on the server. ', [['lib/horde/framework/Horde/Imap/Client/Data','Fetch.php',204]], 1],
'getmessage': ['getmessage', 'Get the error message from an error object. ', [['lib/pear','PEAR.php',921],['lib/htmlpurifier/HTMLPurifier','Language.php',86],['lib/google/src/Google/Service','Reports.php',1105],['lib/google/src/Google/Service','Gmail.php',1283],['lib/google/src/Google/Service','IdentityToolkit.php',1159],['lib/google/src/Google/Service','Dfareporting.php',2039],['lib/zend/Zend/XmlRpc','Fault.php',152],['lib/google/src/Google/Service','Books.php',3266],['lib/google/src/Google/Service','Books.php',3951],['lib/google/src/Google/Service','AdExchangeSeller.php',1042],['lib/google/src/Google/Service','Bigquery.php',1245],['lib/google/src/Google/Service','Freebase.php',440],['lib/google/src/Google/Service','Autoscaler.php',1078],['lib/google/src/Google/Service','Autoscaler.php',1170],['lib/google/src/Google/Service','ShoppingContent.php',2096],['lib/google/src/Google/Service','ShoppingContent.php',2498],['lib/google/src/Google/Service','ShoppingContent.php',2543],['lib/zend/Zend/Http','Response.php',323],['lib/google/src/Google/Service','Compute.php',5785],['lib/google/src/Google/Service','Compute.php',6842],['lib/google/src/Google/Service','Compute.php',6934],['lib/google/src/Google/Service','Compute.php',7440],['lib/google/src/Google/Service','Compute.php',8566],['lib/google/src/Google/Service','Compute.php',8969],['lib/google/src/Google/Service','Compute.php',9561],['lib/google/src/Google/Service','Compute.php',9653],['lib/google/src/Google/Service','Compute.php',9745],['lib/google/src/Google/Service','Compute.php',10382],['lib/google/src/Google/Service','Compute.php',11098],['lib/google/src/Google/Service','Compute.php',11524],['lib/zend/Zend/Service/DeveloperGarden/Request/SendSms','SendSmsAbstract.php',148],['lib/google/src/Google/Service','AdSense.php',2959],['lib/google/src/Google/Service','Pubsub.php',700],['lib/google/src/Google/Service','Pubsub.php',737],['lib/google/src/Google/Service','Replicapool.php',1151],['lib/google/src/Google/Service','Replicapool.php',1243],['lib/google/src/Google/Service','Resourceviews.php',890],['lib/google/src/Google/Service','Resourceviews.php',982]], 434],
'headertext': ['headertext', 'Return header text. ', [['lib/horde/framework/Horde/Imap/Client/Fetch','Query.php',50],['lib/horde/framework/Horde/Imap/Client/Search','Query.php',457]], 6],
'getcontents': ['getcontents', '', [['lib/google/src/Google/Service','Webmasters.php',815],['lib/google/src/Google/Service','MapsEngine.php',4559],['lib/google/src/Google/Service','MapsEngine.php',4722],['lib/google/src/Google/Service','MapsEngine.php',5323],['lib/horde/framework/Horde/Mime','Part.php',458],['lib/google/src/Google/Service','Compute.php',10453],['lib/zend/Zend/Service/Nirvanix/Namespace','Imfs.php',39]], 5],
'get_mailbox': ['get_mailbox', 'Get the current mailbox information. ', [['admin/tool/messageinbound/classes','manager.php',125]], 8],
'flag': ['flag', 'Search for a flag/keywords. ', [['lib/horde/framework/Horde/Imap/Client/Search','Query.php',396]], 7],
'fetch': ['fetch', 'Fetches the available update status from the remote site ', [['lib/classes/update','checker.php',113],['lib/minify/lib/Minify/Cache','XCache.php',86],['lib/grade','grade_object.php',126],['completion/criteria','completion_criteria_unenrol.php',43],['completion/criteria','completion_criteria_grade.php',45],['lib/grade','grade_item.php',332],['lib/minify/lib/Minify/Cache','Memcache.php',97],['lib/minify/lib/Minify/Cache','APC.php',91],['completion/criteria','completion_criteria_activity.php',45],['lib/horde/framework/Horde/Imap/Client','Base.php',2373],['completion','data_object.php',152],['completion/criteria','completion_criteria_course.php',46],['completion','completion_completion.php',70],['completion/criteria','completion_criteria_role.php',43],['completion','completion_criteria_completion.php',74],['lib/grade','grade_grade.php',576],['lib/minify/lib/Minify/Cache','ZendPlatform.php',97],['completion/criteria','completion_criteria_date.php',43],['lib/grade','grade_category.php',184],['completion/criteria','completion_criteria_self.php',43],['lib/grade','grade_scale.php',89],['lib/minify/lib/Minify/Cache','File.php',90],['completion','completion_aggregation.php',68],['completion/criteria','completion_criteria_duration.php',43],['lib/grade','grade_outcome.php',182]], 192],
'getdisposition': ['getdisposition', 'Get the content-disposition of this part. ', [['lib/horde/framework/Horde/Mime','Part.php',308]], 3],
'getcharset': ['getcharset', '', [['lib/adodb','adodb.inc.php',2062],['lib/horde/framework/Horde','Domhtml.php',230],['lib/mustache/src/Mustache','Engine.php',240],['lib/adodb/drivers','adodb-mysqli.inc.php',839],['lib/adodb/drivers','adodb-postgres7.inc.php',239],['lib/horde/framework/Horde/Mime','Part.php',691],['lib/zend/Zend/Service','Akismet.php',142]], 10],
'convert': ['convert', '', [['backup/cc/cc_lib','cc_converter_basiclti.php',36],['backup/cc/cc_lib','cc_converter_page.php',35],['backup/cc/cc_lib','cc_converter_lti.php',36],['backup/cc/cc_lib','cc_converter_url.php',36],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',63],['backup/cc/cc_lib','cc_converter_resource.php',34],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',18498],['backup/cc/cc_lib','cc_converter_quiz.php',40],['lib/lessphp','Functions.php',450],['lib/classes','text.php',162],['backup/converter','convertlib.php',119],['backup/cc/cc_lib','cc_converter_label.php',33],['backup/controller','restore_controller.class.php',437],['lib','wiki_to_markdown.php',315],['backup/cc/cc_lib','cc_convert_moodle2.php',29],['backup/cc/cc_lib','cc_converter_forum.php',36],['lib','navigationlib.php',4819],['backup/cc/cc_lib','cc_converter_folder.php',33]], 138],
'is_bulk_message': ['is_bulk_message', 'Attempt to determine whether this message is a bulk message (e.g. automated reply). ', [['admin/tool/messageinbound/classes','manager.php',744]], 1],
'antivir_scan_file': ['antivir_scan_file', 'Scan file, throws exception in case of infected file. ', [['repository','lib.php',1181]], 3],
'openmailbox': ['openmailbox', 'Open a mailbox. ', [['lib/horde/framework/Horde/Imap/Client','Base.php',962]], 18],
'is_correct_format': ['is_correct_format', 'Determine whether the supplied address is of the correct format. ', [['lib/classes/message/inbound','address_manager.php',273]], 2],
'process_existing_message': ['process_existing_message', 'Process a message received and validated by the Inbound Message processor. ', [['admin/tool/messageinbound/classes','manager.php',179]], 1],
'findbody': ['findbody', 'Finds the main "body" text part (if any) in a message. "Body" data is the first text part under this part. ', [['lib/horde/framework/Horde/Mime','Part.php',1764]], 4],
'is_enabled': ['is_enabled', 'Allows hiding this plugin from the submission/feedback screen if it is not enabled. ', [['mod/assign','assignmentplugin.php',223],['lib/classes/plugininfo','orphaned.php',37],['lib','completionlib.php',269],['mod/assign/submission/comments','locallib.php',172],['mod/assign/feedback/editpdf','locallib.php',276],['lib/classes/plugininfo','base.php',371],['lib/classes/plugininfo','tool.php',39],['admin/tool/health','index.php',393],['admin/tool/log/classes/plugininfo','logstore.php',35],['lib/classes/message/inbound','manager.php',37],['lib/classes/plugininfo','mnetservice.php',33],['mod/assignment/classes/plugininfo','assignment.php',32],['lib','adminlib.php',1952],['mod/assign/feedback/offline','locallib.php',365],['lib','medialib.php',318],['lib','medialib.php',634],['lib','medialib.php',1265]], 200],
'inform_user_of_error': ['inform_user_of_error', 'Inform the identified sender of a processing error. ', [['admin/tool/messageinbound/classes','manager.php',895]], 3],
'get_noreply_user': ['get_noreply_user', 'Return noreply user record, this is currently used in messaging system only for sending messages from noreply email. It will return record of $CFG->noreplyuserid if set else return dummy user object with hard-coded $user->emailstop = 1 so noreply can be sent to user. ', [['lib/classes','user.php',134]], 17],
'envelope': ['envelope', 'Return envelope header data. ', [['lib/horde/framework/Horde/Imap/Client/Fetch','Query.php',200]], 9],
'login': ['login', '', [['repository/wikimedia','wikimedia.php',45],['lib/horde/framework/Horde/Imap/Client','Base.php',777],['lib/zend/Zend/Service','LiveDocx.php',221],['auth/fc','fcFPP.php',91]], 68],
'get_imap_client': ['get_imap_client', 'Retrieve the connection to the IMAP client. ', [['admin/tool/messageinbound/classes','manager.php',77]], 3],
'process_message': ['process_message', 'Process a message received and validated by the Inbound Message processor. ', [['mod/forum/classes/message/inbound','reply_handler.php',60],['admin/tool/messageinbound/classes/message/inbound','invalid_recipient_handler.php',70],['admin/tool/messageinbound/classes','manager.php',277],['lib/classes/message/inbound','private_files_handler.php',66],['lib/tests','messageinbound_test.php',174],['message/tests/fixtures','inbound_fixtures.php',47]], 4],
'cron_setup_user': ['cron_setup_user', 'Sets up current user and course environment (lang, etc.) in cron. Do not use outside of cron script! ', [['lib','sessionlib.php',153]], 34],
'tidy_old_messages': ['tidy_old_messages', 'Tidy up old messages in the confirmation folder. ', [['admin/tool/messageinbound/classes','manager.php',234]], 1],
'process_envelope': ['process_envelope', 'Process the message recipient, load the handler, and then validate the sender with the associated data record. ', [['lib/classes/message/inbound','address_manager.php',426]], 1],
'handle_message': ['handle_message', 'Process the message against the relevant handler. ', [['lib/classes/message/inbound','address_manager.php',443]], 1],
'fulltext': ['fulltext', 'Get the full text of the message. ', [['lib/horde/framework/Horde/Imap/Client/Fetch','Query.php',32]], 2],
'getname': ['getname', '', [['lib/google/src/Google/Service','Fusiontables.php',1439],['lib/google/src/Google/Service','Fusiontables.php',2031],['lib/google/src/Google/Service','Fusiontables.php',2204],['lib/google/src/Google/Service','Fusiontables.php',2419],['lib/pear/HTML/QuickForm','input.php',89],['lib/form','filemanager.php',109],['lib/xmldb','xmldb_object.php',118],['lib/zend/Zend/Http','Cookie.php',133],['lib/google/src/Google/Service','QPXExpress.php',127],['lib/google/src/Google/Service','QPXExpress.php',171],['lib/google/src/Google/Service','QPXExpress.php',260],['lib/google/src/Google/Service','QPXExpress.php',304],['lib/google/src/Google/Service','QPXExpress.php',1223],['lib/google/src/Google/Service','Blogger.php',1753],['lib/google/src/Google/Service','Blogger.php',2957],['lib/google/src/Google/Service','Doubleclicksearch.php',792],['lib/google/src/Google/Service','Doubleclicksearch.php',818],['lib/google/src/Google/Service','AdExchangeBuyer.php',1339],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooterDrawing.php',102],['lib/google/src/Google/Service','Manager.php',401],['lib/google/src/Google/Service','Manager.php',637],['lib/google/src/Google/Service','Manager.php',1296],['lib/google/src/Google/Service','Manager.php',1817],['lib/pear/HTML/QuickForm','link.php',89],['lib/google/src/Google/Service','Reports.php',620],['lib/google/src/Google/Service','Reports.php',691],['lib/google/src/Google/Service','Reports.php',1000],['lib/google/src/Google/Service','Customsearch.php',1076],['lib/google/src/Google/Service','Gmail.php',1376],['lib/google/src/Google/Service','Gmail.php',1768],['lib/google/src/Google/Service','Plus.php',912],['lib/google/src/Google/Service','Plus.php',2321],['lib/google/src/Google/Service','Plus.php',2877],['lib/google/src/Google/Service','Plus.php',3268],['lib/google/src/Google/Service','Spectrum.php',245],['lib/zend/Zend/Service/Simpy','Watchlist.php',132],['lib/zend/Zend/Server/Method','Parameter.php',145],['lib/form','editor.php',128],['lib/google/src/Google/Service','Genomics.php',1708],['lib/google/src/Google/Service','Genomics.php',1826],['lib/google/src/Google/Service','Genomics.php',2991],['lib/google/src/Google/Service','Genomics.php',3108],['lib/google/src/Google/Service','Genomics.php',3172],['lib/google/src/Google/Service','Genomics.php',3240],['lib/google/src/Google/Service','Genomics.php',3392],['lib/google/src/Google/Service','Genomics.php',3564],['lib/form','selectgroups.php',114],['lib/zend/Zend/Gdata/Gapps/Extension','EmailList.php',108],['lib/zend/Zend/Gdata/Gapps','UserEntry.php',204],['lib/google/src/Google/Service','Dfareporting.php',1086],['lib/google/src/Google/Service','Dfareporting.php',1404],['lib/google/src/Google/Service','Dfareporting.php',1704],['lib/google/src/Google/Service','Dfareporting.php',2569],['lib/google/src/Google/Service','PlusDomains.php',1180],['lib/google/src/Google/Service','PlusDomains.php',3073],['lib/google/src/Google/Service','PlusDomains.php',3438],['lib/zend/Zend/Server/Method','Definition.php',106],['lib/google/src/Google/Service','Drive.php',2622],['lib/google/src/Google/Service','Drive.php',3011],['lib/google/src/Google/Service','Drive.php',5034],['lib/zend/Zend/Gdata/Gapps/Extension','Nickname.php',107],['lib/phpexcel/PHPExcel/Worksheet','BaseDrawing.php',161],['lib/google/src/Google/Service','AdExchangeSeller.php',860],['lib/google/src/Google/Service','AdExchangeSeller.php',1132],['lib/google/src/Google/Service','AdExchangeSeller.php',1466],['lib/google/src/Google/Service','AdExchangeSeller.php',1581],['lib/google/src/Google/Service','Bigquery.php',2992],['lib/pear/HTML/QuickForm','select.php',151],['lib/google/src/Google/Service','Freebase.php',304],['lib/google/src/Google/Service','Freebase.php',338],['lib/zend/Zend/Gdata/Gbase/Extension','BaseAttribute.php',68],['lib/google/src/Google/Service','Groupssettings.php',314],['lib/google/src/Google/Service','YouTube.php',6163],['lib/google/src/Google/Service','YouTube.php',6289],['lib/google/src/Google/Service','Coordinate.php',807],['lib/google/src/Google/Service','Autoscaler.php',574],['lib/google/src/Google/Service','Autoscaler.php',928],['lib/google/src/Google/Service','Autoscaler.php',1273],['lib/google/src/Google/Service','Autoscaler.php',1396],['lib/google/src/Google/Service','Audit.php',334],['lib/google/src/Google/Service','Audit.php',360],['lib/pear/HTML/QuickForm','static.php',78],['lib/google/src/Google/Service','Datastore.php',579],['lib/google/src/Google/Service','Datastore.php',651],['lib/google/src/Google/Service','Datastore.php',668],['lib/google/src/Google/Service','Datastore.php',1096],['lib/google/src/Google/Service','YouTubeAnalytics.php',344],['lib/google/src/Google/Service','YouTubeAnalytics.php',604],['lib/pear/HTML/QuickForm','textarea.php',84],['lib/google/src/Google/Service','ShoppingContent.php',1155],['lib/google/src/Google/Service','ShoppingContent.php',1862],['lib/google/src/Google/Service','ShoppingContent.php',2835],['lib/google/src/Google/Service','ShoppingContent.php',3459],['lib/google/src/Google/Service','ShoppingContent.php',3511],['lib/google/src/Google/Service','Appsactivity.php',388],['lib/google/src/Google/Service','Appsactivity.php',535],['lib/google/src/Google/Service','Appsactivity.php',554],['lib/phpexcel/PHPExcel','NamedRange.php',99],['lib/google/src/Google/Service','SQLAdmin.php',1299],['lib/google/src/Google/Service','SQLAdmin.php',1572],['lib/google/src/Google/Service','Fitness.php',653],['lib/google/src/Google/Service','Fitness.php',817],['lib/google/src/Google/Service','Fitness.php',853],['lib/google/src/Google/Service','Fitness.php',879],['lib/google/src/Google/Service','Fitness.php',1117],['lib/google/src/Google/Service','TagManager.php',1854],['lib/google/src/Google/Service','TagManager.php',1976],['lib/google/src/Google/Service','TagManager.php',2135],['lib/google/src/Google/Service','TagManager.php',2233],['lib/google/src/Google/Service','TagManager.php',2292],['lib/google/src/Google/Service','TagManager.php',2594],['lib/google/src/Google/Service','TagManager.php',2774],['lib/google/src/Google/Service','TagManager.php',2889],['lib/google/src/Google/Service','TagManager.php',3080],['lib/google/src/Google/Service','TagManager.php',3254],['lib/google/src/Google/Service','Directory.php',2745],['lib/google/src/Google/Service','Directory.php',3308],['lib/google/src/Google/Service','Directory.php',3650],['lib/google/src/Google/Service','Directory.php',4021],['lib/google/src/Google/Service','Directory.php',4618],['lib/google/src/Google/Service','Directory.php',5099],['lib/zend/Zend/Gdata/YouTube/Extension','State.php',116],['lib/pear/HTML/QuickForm','element.php',143],['lib/zend/Zend/Service/Simpy','WatchlistFilter.php',62],['lib/google/src/Google/Service','CivicInfo.php',354],['lib/google/src/Google/Service','CivicInfo.php',468],['lib/google/src/Google/Service','CivicInfo.php',542],['lib/google/src/Google/Service','CivicInfo.php',821],['lib/google/src/Google/Service','CivicInfo.php',864],['lib/google/src/Google/Service','CivicInfo.php',901],['lib/google/src/Google/Service','CivicInfo.php',972],['lib/google/src/Google/Service','CivicInfo.php',1008],['lib/google/src/Google/Service','CivicInfo.php',1056],['lib/google/src/Google/Service','CivicInfo.php',1131],['lib/google/src/Google/Service','CivicInfo.php',1215],['lib/google/src/Google/Service','CivicInfo.php',1449],['lib/google/src/Google/Service','Container.php',526],['lib/google/src/Google/Service','Container.php',758],['lib/phpexcel/PHPExcel/Style','Font.php',226],['lib/google/src/Google/Service','AdSenseHost.php',1253],['lib/google/src/Google/Service','AdSenseHost.php',1623],['lib/google/src/Google/Service','AdSenseHost.php',1926],['lib/google/src/Google/Service','AdSenseHost.php',2072],['lib/google/src/Google/Service','Games.php',2357],['lib/google/src/Google/Service','Games.php',2924],['lib/google/src/Google/Service','Games.php',3555],['lib/google/src/Google/Service','Games.php',3631],['lib/google/src/Google/Service','Games.php',3867],['lib/google/src/Google/Service','Games.php',4512],['lib/google/src/Google/Service','Games.php',5430],['lib/google/src/Google/Service','MapsEngine.php',3420],['lib/google/src/Google/Service','MapsEngine.php',3610],['lib/google/src/Google/Service','MapsEngine.php',4066],['lib/google/src/Google/Service','MapsEngine.php',4096],['lib/google/src/Google/Service','MapsEngine.php',4347],['lib/google/src/Google/Service','MapsEngine.php',4639],['lib/google/src/Google/Service','MapsEngine.php',4754],['lib/google/src/Google/Service','MapsEngine.php',4819],['lib/google/src/Google/Service','MapsEngine.php',4876],['lib/google/src/Google/Service','MapsEngine.php',5196],['lib/google/src/Google/Service','MapsEngine.php',5264],['lib/google/src/Google/Service','MapsEngine.php',5355],['lib/google/src/Google/Service','MapsEngine.php',5533],['lib/google/src/Google/Service','MapsEngine.php',5695],['lib/google/src/Google/Service','MapsEngine.php',5829],['lib/google/src/Google/Service','MapsEngine.php',6216],['lib/google/src/Google/Service','MapsEngine.php',6290],['lib/horde/framework/Horde/Mime','Part.php',374],['lib/google/src/Google/Service','Compute.php',5491],['lib/google/src/Google/Service','Compute.php',5574],['lib/google/src/Google/Service','Compute.php',6122],['lib/google/src/Google/Service','Compute.php',6371],['lib/google/src/Google/Service','Compute.php',6639],['lib/google/src/Google/Service','Compute.php',7029],['lib/google/src/Google/Service','Compute.php',7229],['lib/google/src/Google/Service','Compute.php',7648],['lib/google/src/Google/Service','Compute.php',7841],['lib/google/src/Google/Service','Compute.php',8083],['lib/google/src/Google/Service','Compute.php',8429],['lib/google/src/Google/Service','Compute.php',8628],['lib/google/src/Google/Service','Compute.php',8749],['lib/google/src/Google/Service','Compute.php',9131],['lib/google/src/Google/Service','Compute.php',9169],['lib/google/src/Google/Service','Compute.php',9353],['lib/google/src/Google/Service','Compute.php',9809],['lib/google/src/Google/Service','Compute.php',9913],['lib/google/src/Google/Service','Compute.php',10041],['lib/google/src/Google/Service','Compute.php',10218],['lib/google/src/Google/Service','Compute.php',10574],['lib/google/src/Google/Service','Compute.php',10759],['lib/google/src/Google/Service','Compute.php',10895],['lib/google/src/Google/Service','Compute.php',11217],['lib/google/src/Google/Service','Compute.php',11698],['lib/google/src/Google/Service','Compute.php',12023],['lib/google/src/Google/Service','Compute.php',12146],['lib/google/src/Google/Service','CloudMonitoring.php',589],['lib/google/src/Google/Service','Analytics.php',3601],['lib/google/src/Google/Service','Analytics.php',3713],['lib/google/src/Google/Service','Analytics.php',3833],['lib/google/src/Google/Service','Analytics.php',4225],['lib/google/src/Google/Service','Analytics.php',4788],['lib/google/src/Google/Service','Analytics.php',5225],['lib/google/src/Google/Service','Analytics.php',5408],['lib/google/src/Google/Service','Analytics.php',5624],['lib/google/src/Google/Service','Analytics.php',5919],['lib/google/src/Google/Service','Analytics.php',6254],['lib/google/src/Google/Service','Analytics.php',6627],['lib/google/src/Google/Service','Analytics.php',6888],['lib/google/src/Google/Service','Analytics.php',7221],['lib/google/src/Google/Service','Analytics.php',7584],['lib/google/src/Google/Service','Analytics.php',7959],['lib/google/src/Google/Service','Analytics.php',8003],['lib/google/src/Google/Service','Analytics.php',8221],['lib/google/src/Google/Service','Analytics.php',8408],['lib/google/src/Google/Service','Analytics.php',9063],['lib/google/src/Google/Service','Analytics.php',9120],['lib/google/src/Google/Service','Analytics.php',9325],['lib/zend/Zend/Service/DeveloperGarden/ConferenceCall','ConferenceDetail.php',125],['lib/google/src/Google/Service','GamesManagement.php',1219],['lib/google/src/Google/Service','Oauth2.php',370],['lib/google/src/Google/Service','Storage.php',1900],['lib/google/src/Google/Service','Storage.php',2571],['lib/google/src/Google/Service','Storage.php',3000],['mod/wiki/editors','wikifiletable.php',66],['lib/google/src/Google/Service','AdSense.php',2151],['lib/google/src/Google/Service','AdSense.php',2566],['lib/google/src/Google/Service','AdSense.php',2905],['lib/google/src/Google/Service','AdSense.php',3049],['lib/google/src/Google/Service','AdSense.php',3373],['lib/google/src/Google/Service','AdSense.php',3454],['lib/google/src/Google/Service','Pubsub.php',943],['lib/google/src/Google/Service','Pubsub.php',976],['lib/zend/Zend/Gdata/App/Extension','Person.php',112],['lib/alfresco/Service','ChildAssociation.php',55],['lib/zend/Zend/Service/Technorati','Weblog.php',212],['lib/zend/Zend/Service/DeveloperGarden/ConferenceCall','ParticipantStatus.php',60],['lib/google/src/Google/Service','Translate.php',319],['lib/pear/HTML/QuickForm','group.php',129],['lib/google/src/Google/Service','Dns.php',651],['lib/google/src/Google/Service','Dns.php',842],['lib/pear/HTML/QuickForm','xbutton.php',82],['lib/phpexcel/PHPExcel','Chart.php',165],['lib/google/src/Google/Service','Replicapool.php',711],['lib/google/src/Google/Service','Replicapool.php',1001],['lib/google/src/Google/Service','Resourceviews.php',740],['lib/google/src/Google/Service','Resourceviews.php',1095],['lib/google/src/Google/Service','Resourceviews.php',1145],['lib/zend/Zend/Gdata/Extension','ExtendedProperty.php',84]], 882],
'out': ['out', 'Returns the string ', [['lib','moodlelib.php',9451],['lib','weblib.php',547],['lib','tablelib.php',1526],['lib','csslib.php',1540],['lib','csslib.php',1698],['lib','csslib.php',2078],['lib','csslib.php',2162],['lib','csslib.php',2306],['lib','csslib.php',2495],['lib','csslib.php',3240],['report/loglive/classes','table_log_ajax.php',37]], 549],
'process_message_part_attachment': ['process_message_part_attachment', 'Process a message again to add body and attachment data. ', [['admin/tool/messageinbound/classes','manager.php',608]], 1],
'bodypart': ['bodypart', 'Return the body part data for a MIME ID. ', [['lib/horde/framework/Horde/Imap/Client/Fetch','Query.php',126]], 4],
'getenvelope': ['getenvelope', 'Get envelope data. ', [['lib/horde/framework/Horde/Imap/Client/Data','Fetch.php',270]], 10],
'passes_key_validation': ['passes_key_validation', 'Check whether the key provided is valid. ', [['admin/tool/messageinbound/classes','manager.php',665]], 1],
'getcontentid': ['getcontentid', 'Returns the Content-ID for this part. ', [['lib/horde/framework/Horde/Mime','Part.php',1525]], 2],
'imapdate': ['imapdate', 'Return the internal (IMAP) date of the message. ', [['lib/horde/framework/Horde/Imap/Client/Fetch','Query.php',216]], 4],
'clean_param': ['clean_param', 'Used by {@link optional_param()} and {@link required_param()} to clean the variables and/or cast to specific types, based on an options field. <code> $course->format = clean_param($course->format, PARAM_ALPHA); $selectedgradeitem = clean_param($selectedgradeitem, PARAM_INT); </code> ', [['lib','moodlelib.php',768]], 607],
'get_data': ['get_data', '', [['mod/feedback/item/captcha','lib.php',76],['grade/grading/form/guide','edit_form.php',142],['grade/grading/form','lib.php',841],['grade/grading/form/rubric','edit_form.php',136],['mod/feedback/item/multichoicerated','multichoicerated_form.php',93],['mod/scorm','mod_form.php',514],['lib/classes/event','base.php',564],['mod/feedback','mod_form.php',163],['mod/feedback/item/multichoice','multichoice_form.php',93],['grade/export','grade_export_form.php',206],['lib/simplepie/library/SimplePie','Parser.php',263],['lib','completionlib.php',882],['lib','formslib.php',584],['mod/workshop','locallib.php',3815],['mod/glossary','mod_form.php',203],['mod/feedback/item/textfield','textfield_form.php',57],['blocks/rss_client','editfeed.php',101],['admin/tool/filetypes','edit_form.php',97],['mod/lesson','mod_form.php',383],['admin/tool/uploaduser','user_form.php',394],['admin/webservice','forms.php',299],['mod/feedback/item/numeric','numeric_form.php',60],['mod/feedback/item/multichoice','lib.php',87],['mod/choice','mod_form.php',128],['mod/feedback/item/textarea','textarea_form.php',57],['mod/forum','mod_form.php',270],['mod/feedback/item/textfield','lib.php',89],['mod/feedback/item/multichoicerated','lib.php',92],['admin/tool/uploadcourse/classes','course.php',269],['mod/feedback/item/label','lib.php',99],['mod/feedback/item/textarea','lib.php',92],['backup/util/structure','restore_path_element.class.php',118],['mod/feedback/item/numeric','lib.php',105],['mod/feedback/item/info','lib.php',76],['mod/feedback/item','feedback_item_class.php',37],['mod/feedback/item','feedback_item_class.php',149],['lib/classes/message/inbound','address_manager.php',361],['course','editsection_form.php',96],['message/tests','inbound_test.php',632]], 364],
'set_data': ['set_data', '', [['question/type/missingtype','edit_missingtype_form.php',52],['question/type/multianswer','edit_multianswer_form.php',256],['mod/feedback/item/multichoicerated','multichoicerated_form.php',81],['mod/scorm','mod_form.php',444],['question','category_form.php',73],['course','moodleform_mod.php',338],['mod/feedback/item/multichoice','multichoice_form.php',79],['blocks','edit_form.php',255],['badges','edit_form.php',137],['lib','formslib.php',434],['blocks/html','edit_form.php',53],['admin/tool/filetypes','edit_form.php',83],['question/type/random','edit_random_form.php',68],['cache','forms.php',232],['backup/util/structure','restore_path_element.class.php',95],['lib/classes/message/inbound','address_manager.php',146],['course','editsection_form.php',79],['question/type','edit_question_form.php',449],['question/type/calculated','datasetitems_form.php',360]], 234],
'get_handler': ['get_handler', 'Get the preferred handler ', [['lib/simplepie/library/SimplePie','Enclosure.php',529],['lib/simplepie/library/SimplePie','Cache.php',74],['lib/classes/message/inbound','manager.php',221],['lib/classes/message/inbound','address_manager.php',137]], 9],
'getstructure': ['getstructure', 'Get the message structure. ', [['lib/horde/framework/Horde/Imap/Client/Data','Fetch.php',70],['lib/xmldb','xmldb_file.php',75]], 59],
'close': ['close', 'Close the connection to the server ', [['lib/zend/Zend/Http/Client/Adapter','Socket.php',486],['lib/tests','completionlib_test.php',888],['lib/adodb','adodb.inc.php',2164],['lib/adodb','adodb.inc.php',2844],['lib/adodb','adodb.inc.php',3536],['lib','webdavlib.php',176],['admin/tool/uploaduser','locallib.php',149],['lib/dml','oci_native_moodle_recordset.php',80],['lib/tcpdf','tcpdf.php',2943],['lib/horde/framework/Horde/Imap/Client','Base.php',1846],['lib','excellib.class.php',93],['lib/zend/Zend/Http/Client/Adapter','Test.php',187],['lib/classes/dml','recordset_walk.php',153],['mod/assign/feedback/offline','importgradeslib.php',178],['lib/pear/Net','GeoIP.php',556],['backup/util/helper','backup_array_iterator.class.php',63],['lib/zend/Zend/Gdata/App','LoggingHttpClientAdapterSocket.php',109],['lib/zend/Zend/Http/Client/Adapter','Proxy.php',266],['lib/dml','mssql_native_moodle_recordset.php',87],['lib/pear/Auth','RADIUS.php',542],['lib/pear/Auth','RADIUS.php',703],['lib/pear/Auth','RADIUS.php',824],['lib/phpmailer','class.smtp.php',507],['lib/phpexcel/PHPExcel/Shared','ZipArchive.php',80],['lib/phpunit/classes','event_sink.php',39],['lib/zend/Zend/Http/Client/Adapter','Interface.php',73],['lib/dml','pgsql_native_moodle_recordset.php',104],['auth/fc','fcFPP.php',72],['lib/filestorage','zip_archive.php',183],['lib','odslib.class.php',71],['lib/horde/framework/Horde/Socket','Client.php',135],['question/engine/tests','helpers.php',1225],['grade','lib.php',323],['lib/dml','mysqli_native_moodle_recordset.php',86],['lib','csvlib.class.php',256],['lib/google/src/Google/Logger','File.php',130],['lib/horde/framework/Horde','Stream.php',585],['lib/phpunit/classes','phpmailer_sink.php',41],['lib/phpunit/classes','message_sink.php',39],['lib/zend/Zend/Http/Client/Adapter','Curl.php',460],['lib/dml','sqlsrv_native_moodle_recordset.php',133],['lib/zend/Zend/Service/WindowsAzure','SessionHandler.php',109],['backup/util/helper','backup_null_iterator.class.php',53],['grade/export','lib.php',662],['lib/dml','pdo_moodle_recordset.php',79]], 1036],
'generate': ['generate', 'Generate a 36-character RFC 4122 UUID, without the urn:uuid: prefix. ', [['lib/horde/framework/Horde/Support','Uuid.php',31],['lib/horde/framework/Horde/Support','Randomid.php',34],['lib/google/src/Google/Service','Doubleclicksearch.php',366],['lib/google/src/Google/Service','AdExchangeSeller.php',707],['lib/google/src/Google/Service','AdExchangeSeller.php',751],['lib/google/src/Google/Service','Directory.php',2550],['lib/horde/framework/Horde/Mime','Mdn.php',119],['lib/google/src/Google/Service','AdSenseHost.php',873],['lib/google/src/Google/Service','AdSenseHost.php',1124],['lib/horde/framework/Horde/Support','Guid.php',41],['backup/cc/cc_lib','cc_asssesment.php',260],['backup/cc/cc_lib','cc_asssesment.php',406],['backup/cc/cc_lib','cc_asssesment.php',419],['backup/cc/cc_lib','cc_asssesment.php',426],['backup/cc/cc_lib','cc_asssesment.php',433],['backup/cc/cc_lib','cc_asssesment.php',465],['backup/cc/cc_lib','cc_asssesment.php',500],['backup/cc/cc_lib','cc_asssesment.php',516],['backup/cc/cc_lib','cc_asssesment.php',531],['backup/cc/cc_lib','cc_asssesment.php',569],['backup/cc/cc_lib','cc_asssesment.php',607],['backup/cc/cc_lib','cc_asssesment.php',623],['backup/cc/cc_lib','cc_asssesment.php',651],['backup/cc/cc_lib','cc_asssesment.php',659],['backup/cc/cc_lib','cc_asssesment.php',686],['backup/cc/cc_lib','cc_asssesment.php',712],['backup/cc/cc_lib','cc_asssesment.php',764],['backup/cc/cc_lib','cc_asssesment.php',801],['backup/cc/cc_lib','cc_asssesment.php',824],['backup/cc/cc_lib','cc_asssesment.php',863],['backup/cc/cc_lib','cc_asssesment.php',904],['backup/cc/cc_lib','cc_asssesment.php',947],['backup/cc/cc_lib','cc_asssesment.php',990],['backup/cc/cc_lib','cc_asssesment.php',1089],['backup/cc/cc_lib','cc_asssesment.php',1140],['backup/cc/cc_lib','cc_asssesment.php',1217],['backup/cc/cc_lib','cc_asssesment.php',1283],['backup/cc/cc_lib','cc_asssesment.php',1361],['backup/cc/cc_lib','cc_asssesment.php',1405],['backup/cc/cc_lib','cc_asssesment.php',1511],['backup/cc/cc_lib','cc_asssesment.php',1597],['backup/cc/cc_lib','cc_asssesment.php',1676],['backup/cc/cc_lib','cc_asssesment.php',1759],['backup/cc/cc_lib','cc_asssesment.php',2249],['lib/google/src/Google/Service','AdSense.php',1415],['lib/google/src/Google/Service','AdSense.php',1464],['lib/google/src/Google/Service','AdSense.php',1945],['lib/google/src/Google/Service','AdSense.php',1994],['lib/classes/message/inbound','address_manager.php',226]], 94],
'store': ['store', 'Write data to cache. ', [['lib/minify/lib/Minify/Cache','XCache.php',34],['lib/minify/lib/Minify/Cache','Memcache.php',39],['lib/minify/lib/Minify/Cache','APC.php',34],['lib/horde/framework/Horde/Imap/Client','Base.php',2770],['blocks/recent_activity/classes','observer.php',45],['admin/tool/log/classes/log','observer.php',30],['lib/minify/lib/Minify/Cache','ZendPlatform.php',38],['backup/cc/cc_lib','cc_converters.php',128],['lib/minify/lib/Minify/Cache','File.php',18]], 29],
'setcontents': ['setcontents', '', [['lib/google/src/Google/Service','Webmasters.php',811],['lib/google/src/Google/Service','MapsEngine.php',4555],['lib/google/src/Google/Service','MapsEngine.php',4718],['lib/google/src/Google/Service','MapsEngine.php',5319],['lib/horde/framework/Horde/Mime','Part.php',394],['lib/google/src/Google/Service','Compute.php',10449]], 13],
'message_send': ['message_send', 'Called when a message provider wants to send a message. This functions checks the message recipient\'s message processor configuration then sends the message to the configured processors ', [['lib','messagelib.php',29]], 99],
'getpart': ['getpart', 'Get the part this result belongs to ', [['lib','environmentlib.php',1424],['lib/horde/framework/Horde/Mime','Part.php',880]], 19],
'handle_verification_failure': ['handle_verification_failure', 'Handle failure of sender verification. ', [['admin/tool/messageinbound/classes','manager.php',825]], 1],
'close_connection': ['close_connection', 'Shutdown and close the connection to the IMAP client. ', [['admin/tool/messageinbound/classes','manager.php',115]], 4],
'send_to_handler': ['send_to_handler', 'Send the message to the appropriate handler. ', [['admin/tool/messageinbound/classes','manager.php',781]], 1],
'search': ['search', 'Search through all the files. ', [['repository/local','lib.php',255],['lib/zend/Zend/Service/Amazon','Query.php',86],['repository/flickr_public','lib.php',233],['repository/boxnet','lib.php',169],['lib/google/src/Google/Service','QPXExpress.php',80],['lib/google/src/Google/Service','Blogger.php',1610],['lib/google/src/Google/Service','Plus.php',390],['lib/google/src/Google/Service','Plus.php',612],['lib/zend/Zend/Service/Twitter','Search.php',124],['lib/google/src/Google/Service','Genomics.php',674],['lib/google/src/Google/Service','Genomics.php',905],['lib/google/src/Google/Service','Genomics.php',1048],['lib/google/src/Google/Service','Genomics.php',1148],['lib/google/src/Google/Service','Genomics.php',1203],['lib/google/src/Google/Service','Genomics.php',1285],['lib/google/src/Google/Service','Genomics.php',1354],['lib/google/src/Google/Service','Genomics.php',1505],['repository/picasa','lib.php',87],['lib/horde/framework/Horde/Imap/Client','Base.php',1958],['backup/util/ui','restore_ui_components.php',172],['lib/horde/framework/Horde/Stream','TempString.php',165],['lib/google/src/Google/Service','Freebase.php',218],['repository/merlot','lib.php',62],['lib','boxlib.php',216],['lib/google/src/Google/Service','CivicInfo.php',175],['repository','lib.php',2336],['repository/wikimedia','lib.php',165],['repository/flickr','lib.php',207],['repository/googledocs','lib.php',265],['lib/horde/framework/Horde','Stream.php',255],['lib','adminlib.php',688],['lib','adminlib.php',848],['lib','adminlib.php',1267],['lib','adminlib.php',1399],['lib','adminlib.php',5337],['lib','adminlib.php',5618],['lib','adminlib.php',5672],['lib','adminlib.php',5744],['lib','adminlib.php',5792],['lib','adminlib.php',5834],['lib','adminlib.php',5885],['lib','adminlib.php',6590],['lib/zend/Zend/Service','Technorati.php',166],['repository/youtube','lib.php',54],['mod/assign','adminlib.php',54],['repository/alfresco','lib.php',229]], 65],
'set_handler': ['set_handler', 'Sets the exception handler ', [['','mdeploy.php',1491],['lib/classes/message/inbound','address_manager.php',128]], 21],
'pickup_messages': ['pickup_messages', 'Execute the main Inbound Message pickup task. ', [['admin/tool/messageinbound/classes','manager.php',142]], 1],
'__tostring': ['__tostring', 'Cooerce to string. ', [['lib/horde/framework/Horde/Support','Uuid.php',75],['lib/simplepie/library/SimplePie','Restriction.php',94],['lib/horde/framework/Horde/Imap/Client','DateTime.php',59],['lib/zend/Zend/XmlRpc','Request.php',437],['lib/zend/Zend/Gdata/Extension','Who.php',174],['lib/horde/framework/Horde/Support','Randomid.php',65],['lib/zend/Zend/Rest/Client','Result.php',215],['lib/horde/framework/Horde/Imap/Client/Data/Format','DateTime.php',27],['lib/pear','PEAR.php',1004],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nstring.php',39],['lib/pear/PEAR','Exception.php',315],['lib/zend/Zend/Gdata/YouTube/Extension','Racy.php',115],['lib/adodb','adodb.inc.php',2971],['lib/horde/framework/Horde/Imap/Client/Data/Format','String.php',81],['lib/zend/Zend/Gdata/Calendar/Extension','QuickAdd.php',123],['lib/zend/Zend/XmlRpc/Response','Http.php',38],['lib/zend/Zend/Http','Cookie.php',260],['backup/cc','validator.php',97],['lib/horde/framework/Horde/Imap/Client/Data/Format','Mailbox.php',44],['lib/alfresco/Service','SpacesStore.php',33],['lib/zend/Zend/Gdata/App','MediaFileSource.php',136],['lib/zend/Zend/Gdata/YouTube/Extension','Position.php',78],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',68],['lib/pear/Net/GeoIP','Location.php',176],['lib/horde/framework/Horde/Imap/Client','Ids.php',150],['lib/horde/framework/Horde/Support','Stub.php',21],['lib/zend/Zend/Gdata/Calendar/Extension','AccessLevel.php',116],['lib/zend/Zend/Gdata/Gapps/Extension','EmailList.php',133],['lib','moodlelib.php',9469],['lib/zend/Zend/Gdata/Media/Extension','MediaContent.php',259],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',101],['lib/horde/framework/Horde/Stream','TempString.php',109],['lib/horde/framework/Horde/Imap/Client/Data/Format','Date.php',44],['lib/zend/Zend/Gdata/Gapps/Extension','Login.php',472],['lib/zend/Zend/Gdata/Gapps','ServiceException.php',196],['lib/zend/Zend/XmlRpc','Fault.php',298],['lib/zend/Zend','Uri.php',48],['lib/zend/Zend/Gdata/YouTube/Extension','Duration.php',115],['lib/horde/framework/Horde/Imap/Client/Data/Format','Number.php',27],['lib/zend/Zend/Gdata/Gapps/Extension','Nickname.php',133],['lib/simplepie/library/SimplePie','Caption.php',113],['mod/lti','OAuth.php',79],['mod/lti','OAuth.php',109],['mod/lti','OAuth.php',460],['lib/horde/framework/Horde/Imap/Client/Data','Namespace.php',122],['lib/horde/framework/Horde/Imap/Client/Search','Query.php',60],['lib/alfresco/Service','ContentData.php',57],['lib/classes/output','mustache_uniqid_helper.php',41],['lib/zend/Zend/Gdata/Gapps/Extension','Quota.php',133],['lib/zend/Zend/Gdata/Calendar/Extension','Timezone.php',115],['lib/zend/Zend/Gdata/Extension','Transparency.php',113],['lib/simplepie/library/SimplePie','Enclosure.php',264],['lib/simplepie/library','SimplePie.php',655],['lib/alfresco/Service','Store.php',38],['lib/simplepie/library/SimplePie','Rating.php',85],['lib/horde/framework/Horde/Support','Backtrace.php',121],['lib/simplepie/library/SimplePie','Author.php',95],['lib/horde/framework/Horde/Imap/Client','Url.php',132],['lib/phpexcel/PHPExcel','Comment.php',318],['lib/phpexcel/PHPExcel','RichText.php',130],['lib/zend/Zend/Gdata/App','Base.php',561],['lib/zend/Zend/Service/WindowsAzure/Storage','TableEntityQuery.php',317],['lib','weblib.php',538],['lib/zend/Zend/Gdata/Extension','AttendeeStatus.php',113],['lib/simplepie/library/SimplePie','Item.php',110],['lib/zend/Zend/Service','ReCaptcha.php',153],['lib/horde/framework/Horde/Imap/Client/Data','Format.php',44],['lib/zend/Zend/Amf','Response.php',140],['lib/zend/Zend/Gdata/YouTube/Extension','State.php',182],['question/engine','states.php',108],['lib/zend/Zend/XmlRpc/Generator','GeneratorAbstract.php',109],['lib/horde/framework/Horde/Imap/Client/Data','Acl.php',43],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',116],['lib/zend/Zend/Gdata/Calendar/Extension','Color.php',116],['lib/zend/Zend','Date.php',468],['lib/zend/Zend/Gdata/Extension','EventStatus.php',92],['lib/phpexcel/PHPExcel','Cell.php',979],['lib/zend/Zend/Gdata/Calendar/Extension','Hidden.php',124],['lib/zend/Zend/Http','Response.php',400],['lib/lessphp/Tree','Dimension.php',74],['lib/zend/Zend/Gdata/Extension','Visibility.php',113],['lib/zend/Zend/Gdata/YouTube/Extension','Statistics.php',294],['lib/zend/Zend/Gdata/Calendar/Extension','Selected.php',124],['lib/simplepie/library/SimplePie','Category.php',95],['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',139],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nil.php',34],['lib/simplepie/library/SimplePie','Credit.php',94],['lib/zend/Zend/Gdata/Extension','Reminder.php',103],['lib/phpexcel/PHPExcel/Worksheet','AutoFilter.php',850],['lib/horde/framework/Horde','Stream.php',103],['lib/zend/Zend/XmlRpc','Response.php',239],['availability/classes','condition.php',93],['lib/horde/framework/Horde/Support','Guid.php',63],['lib/zend/Zend/Gdata/Extension','Where.php',117],['lib/simplepie/library/SimplePie','IRI.php',133],['lib/zend/Zend/Gdata/Calendar/Extension','SendEventNotifications.php',122],['lib/horde/framework/Horde/Imap/Client/Data','AclRights.php',59],['lib/zend/Zend/Service/DeveloperGarden/Response/VoiceButler','NewCallResponse.php',51],['lib/alfresco/Service','Node.php',292],['lib/horde/framework/Horde/Imap/Client/Data','BaseSubject.php',84],['lib/zend/Zend/Gdata/Extension','AttendeeType.php',113],['lib/dml/tests','dml_test.php',5446],['lib/zend/Zend','Exception.php',69],['lib/zend/Zend/Service/ReCaptcha','MailHide.php',161],['grade/report/singleview/classes/local/ui','attribute_format.php',44],['lib/simplepie/library/SimplePie','Source.php',72],['lib/zend/Zend/Gdata/Extension','When.php',115],['lib/simplepie/library/SimplePie','Copyright.php',85],['availability/classes','tree.php',91],['lib/zend/Zend/Gdata/Gapps','Error.php',223],['lib/lessphp/Tree','Unit.php',48],['lib/zend/Zend/Gdata/Gapps/Extension','Name.php',172],['lib/horde/framework/Horde/Imap/Client/Auth','DigestMD5.php',107],['lib/zend/Zend/Gdata/Extension','ExtendedProperty.php',79],['lib/horde/framework/Horde/Mail/Rfc822','Object.php',25],['question/engine','datalib.php',1686],['question/engine','datalib.php',1754]], 41],
'getimapdate': ['getimapdate', 'Get internal IMAP date. ', [['lib/horde/framework/Horde/Imap/Client/Data','Fetch.php',317]], 3],
'first': ['first', 'Return the first fetch object in the results, if there is only one object. ', [['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',106]], 22],
'structure': ['structure', 'Return MIME structure information. ', [['lib/horde/framework/Horde/Imap/Client/Fetch','Query.php',192]], 16],
'substr': ['substr', '', [], 2883],
'strtolower': ['strtolower', '', [], 922],
'copy': ['copy', '', [], 48],
'gettype': ['gettype', '', [], 288],
'fclose': ['fclose', '', [], 280],
'count': ['count', '', [], 3984],
'defined': ['defined', '', [], 4098],
'in_array': ['in_array', '', [], 1173],
'fwrite': ['fwrite', '', [], 209],
'time': ['time', '', [], 1768],
'array_shift': ['array_shift', '', [], 607],
'rand': ['rand', '', [], 107]};
CLASS_DATA={
'core_user': ['core_user', 'User class to access user details. ', [['lib/classes','user.php',27]], 143],
'address_manager': ['address_manager', 'Incoming Message address manager. ', [['lib/classes/message/inbound','address_manager.php',29]], 19],
'manager': ['manager', 'Defines MAnager class for myprofile navigation tree. ', [['user/classes/output/myprofile','manager.php',28],['lib/classes/log','manager.php',29],['admin/tool/messageinbound/classes','manager.php',29],['lib/classes/message','manager.php',31],['lib/classes/message/inbound','manager.php',29],['admin/tool/log/classes/log','manager.php',29],['lib/classes/session','manager.php',29],['lib/classes/task','manager.php',28],['lib/classes/event','manager.php',30]], 346],
'horde_imap_client_data_fetch': ['horde_imap_client_data_fetch', 'Object containing data returned by the Horde_Imap_Client_Base#fetch() command. ', [['lib/horde/framework/Horde/Imap/Client/Data','Fetch.php',14]], 9],
'horde_imap_client_search_query': ['horde_imap_client_search_query', 'Abstraction of the IMAP4rev1 search criteria (see RFC 3501 [6.4.4]). Allows translation between abstracted search criteria and a generated IMAP search criteria string suitable for sending to a remote IMAP server. ', [['lib/horde/framework/Horde/Imap/Client/Search','Query.php',14]], 12],
'repository': ['repository', 'Class for repositories ', [['lib/classes/plugininfo','repository.php',30]], 213],
'core_text': ['core_text', 'defines string api\'s for manipulating strings ', [['lib/classes','text.php',27]], 512]};
CONST_DATA={
'FORMAT_PLAIN': ['FORMAT_PLAIN', '', [['lib','weblib.php',52]], 124],
'PARAM_RAW': ['PARAM_RAW', '', [['lib','moodlelib.php',193]], 692],
'DAYSECS': ['DAYSECS', '', [['lib','moodlelib.php',49]], 68],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',138],['','install.php',93],['lib','setup.php',386]], 3532]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
