<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /admin/tool/health/index.php source</title>
    <link rel="stylesheet" href="../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../';
subdir='admin/tool/health';
filename='index.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/admin/tool/health/</a> -> <a href="index.php.html">index.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="index.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="index.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Strings for component 'tool_health', language 'en', branch 'MOODLE_22_STABLE'</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package    tool</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @subpackage health</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @copyright  1999 onwards Martin Dougiamas (http://dougiamas.com)</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> */</span>
<a name="l25"><span class="linenum">  25</span></a>  
<a name="l26"><span class="linenum">  26</span></a>      <a class="phpfunction" onClick="logFunction('ob_start')" href="../../../_functions/ob_start.html" onMouseOver="phpfuncPopup(event,'ob_start')">ob_start</a>(); <span class="comment">//for whitespace test</span>
<a name="l27"><span class="linenum">  27</span></a>      <a class="function" onClick="logFunction('require')" href="../../../_functions/require.html" onMouseOver="funcPopup(event,'require')">require</a>('../../../config.php');
<a name="l28"><span class="linenum">  28</span></a>      <a class="var it27600" onMouseOver="hilite(27600)" onMouseOut="lolite()" onClick="logVariable('extraws')" href="../../../_variables/extraws.html">$extraws</a> = <a class="phpfunction" onClick="logFunction('ob_get_clean')" href="../../../_functions/ob_get_clean.html" onMouseOver="phpfuncPopup(event,'ob_get_clean')">ob_get_clean</a>();
<a name="l29"><span class="linenum">  29</span></a>  
<a name="l30"><span class="linenum">  30</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/libdir.html">libdir</a>.'/adminlib.php');
<a name="l31"><span class="linenum">  31</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/dirroot.html">dirroot</a> . '/' . <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/admin.html">admin</a> . '/tool/health/locallib.php');
<a name="l32"><span class="linenum">  32</span></a>  
<a name="l33"><span class="linenum">  33</span></a>      <a class="function" onClick="logFunction('admin_externalpage_setup')" href="../../../_functions/admin_externalpage_setup.html" onMouseOver="funcPopup(event,'admin_externalpage_setup')">admin_externalpage_setup</a>('toolhealth');
<a name="l34"><span class="linenum">  34</span></a>  
<a name="l35"><span class="linenum">  35</span></a>      <a class="phpfunction" onClick="logFunction('define')" href="../../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('SEVERITY_NOTICE')" href="../../../_constants/SEVERITY_NOTICE.html" onMouseOver="constPopup(event,'SEVERITY_NOTICE')">SEVERITY_NOTICE</a>',      'notice');
<a name="l36"><span class="linenum">  36</span></a>      <a class="phpfunction" onClick="logFunction('define')" href="../../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('SEVERITY_ANNOYANCE')" href="../../../_constants/SEVERITY_ANNOYANCE.html" onMouseOver="constPopup(event,'SEVERITY_ANNOYANCE')">SEVERITY_ANNOYANCE</a>',   'annoyance');
<a name="l37"><span class="linenum">  37</span></a>      <a class="phpfunction" onClick="logFunction('define')" href="../../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('SEVERITY_SIGNIFICANT')" href="../../../_constants/SEVERITY_SIGNIFICANT.html" onMouseOver="constPopup(event,'SEVERITY_SIGNIFICANT')">SEVERITY_SIGNIFICANT</a>', 'significant');
<a name="l38"><span class="linenum">  38</span></a>      <a class="phpfunction" onClick="logFunction('define')" href="../../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('SEVERITY_CRITICAL')" href="../../../_constants/SEVERITY_CRITICAL.html" onMouseOver="constPopup(event,'SEVERITY_CRITICAL')">SEVERITY_CRITICAL</a>',    'critical');
<a name="l39"><span class="linenum">  39</span></a>  
<a name="l40"><span class="linenum">  40</span></a>      <a class="var it27601" onMouseOver="hilite(27601)" onMouseOut="lolite()" onClick="logVariable('solution')" href="../../../_variables/solution.html">$solution</a> = <a class="function" onClick="logFunction('optional_param')" href="../../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('solution', 0, <a class="constant" onClick="logConstant('PARAM_PLUGIN')" href="../../../_constants/PARAM_PLUGIN.html" onMouseOver="constPopup(event,'PARAM_PLUGIN')">PARAM_PLUGIN</a>);
<a name="l41"><span class="linenum">  41</span></a>  
<a name="l42"><span class="linenum">  42</span></a>      <a class="function" onClick="logFunction('require_login')" href="../../../_functions/require_login.html" onMouseOver="funcPopup(event,'require_login')">require_login</a>();
<a name="l43"><span class="linenum">  43</span></a>      <a class="function" onClick="logFunction('require_capability')" href="../../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('moodle/site:config', <a class="class" onClick="logClass('context_system')" href="../../../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>());
<a name="l44"><span class="linenum">  44</span></a>  
<a name="l45"><span class="linenum">  45</span></a>      <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('site')" href="../../../_variables/site.html">$site</a> = <a class="function" onClick="logFunction('get_site')" href="../../../_functions/get_site.html" onMouseOver="funcPopup(event,'get_site')">get_site</a>();
<a name="l46"><span class="linenum">  46</span></a>  
<a name="l47"><span class="linenum">  47</span></a>      echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="phpfunction" onClick="logFunction('header')" href="../../../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>();
<a name="l48"><span class="linenum">  48</span></a>  
<a name="l49"><span class="linenum">  49</span></a>      if(<a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it27601" onMouseOver="hilite(27601)" onMouseOut="lolite()" onClick="logVariable('solution')" href="../../../_variables/solution.html">$solution</a>, 'problem_') === 0 &amp;&amp; <a class="phpfunction" onClick="logFunction('class_exists')" href="../../../_functions/class_exists.html" onMouseOver="phpfuncPopup(event,'class_exists')">class_exists</a>(<a class="var it27601" onMouseOver="hilite(27601)" onMouseOut="lolite()" onClick="logVariable('solution')" href="../../../_variables/solution.html">$solution</a>)) {
<a name="l50"><span class="linenum">  50</span></a>          <a class="function" onClick="logFunction('health_print_solution')" href="../../../_functions/health_print_solution.html" onMouseOver="funcPopup(event,'health_print_solution')">health_print_solution</a>(<a class="var it27601" onMouseOver="hilite(27601)" onMouseOut="lolite()" onClick="logVariable('solution')" href="../../../_variables/solution.html">$solution</a>);
<a name="l51"><span class="linenum">  51</span></a>      }
<a name="l52"><span class="linenum">  52</span></a>      else {
<a name="l53"><span class="linenum">  53</span></a>          <a class="function" onClick="logFunction('health_find_problems')" href="../../../_functions/health_find_problems.html" onMouseOver="funcPopup(event,'health_find_problems')">health_find_problems</a>();
<a name="l54"><span class="linenum">  54</span></a>      }
<a name="l55"><span class="linenum">  55</span></a>  
<a name="l56"><span class="linenum">  56</span></a>  
<a name="l57"><span class="linenum">  57</span></a>      echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('footer')" href="../../../_functions/footer.html" onMouseOver="funcPopup(event,'footer')">footer</a>();
<a name="l58"><span class="linenum">  58</span></a>  
<a name="l59"><span class="linenum">  59</span></a>  
<a name="l60"><span class="linenum">  60</span></a>  function <a class="function" onClick="logFunction('health_find_problems')" href="../../../_functions/health_find_problems.html" onMouseOver="funcPopup(event,'health_find_problems')">health_find_problems</a>() {
<a name="l61"><span class="linenum">  61</span></a>      global <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l62"><span class="linenum">  62</span></a>  
<a name="l63"><span class="linenum">  63</span></a>      echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('heading')" href="../../../_functions/heading.html" onMouseOver="funcPopup(event,'heading')">heading</a>(<a class="function" onClick="logFunction('get_string')" href="../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('pluginname', 'tool_health'));
<a name="l64"><span class="linenum">  64</span></a>  
<a name="l65"><span class="linenum">  65</span></a>      <a class="var it22269" onMouseOver="hilite(22269)" onMouseOut="lolite()" onClick="logVariable('issues')" href="../../../_variables/issues.html">$issues</a>   = array(
<a name="l66"><span class="linenum">  66</span></a>          <a class="constant" onClick="logConstant('SEVERITY_CRITICAL')" href="../../../_constants/SEVERITY_CRITICAL.html" onMouseOver="constPopup(event,'SEVERITY_CRITICAL')">SEVERITY_CRITICAL</a>    =&gt; array(),
<a name="l67"><span class="linenum">  67</span></a>          <a class="constant" onClick="logConstant('SEVERITY_SIGNIFICANT')" href="../../../_constants/SEVERITY_SIGNIFICANT.html" onMouseOver="constPopup(event,'SEVERITY_SIGNIFICANT')">SEVERITY_SIGNIFICANT</a> =&gt; array(),
<a name="l68"><span class="linenum">  68</span></a>          <a class="constant" onClick="logConstant('SEVERITY_ANNOYANCE')" href="../../../_constants/SEVERITY_ANNOYANCE.html" onMouseOver="constPopup(event,'SEVERITY_ANNOYANCE')">SEVERITY_ANNOYANCE</a>   =&gt; array(),
<a name="l69"><span class="linenum">  69</span></a>          <a class="constant" onClick="logConstant('SEVERITY_NOTICE')" href="../../../_constants/SEVERITY_NOTICE.html" onMouseOver="constPopup(event,'SEVERITY_NOTICE')">SEVERITY_NOTICE</a>      =&gt; array(),
<a name="l70"><span class="linenum">  70</span></a>      );
<a name="l71"><span class="linenum">  71</span></a>      <a class="var it11183" onMouseOver="hilite(11183)" onMouseOut="lolite()" onClick="logVariable('problems')" href="../../../_variables/problems.html">$problems</a> = 0;
<a name="l72"><span class="linenum">  72</span></a>  
<a name="l73"><span class="linenum">  73</span></a>      for(<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> = 1; <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> &lt; 1000000; ++<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>) {
<a name="l74"><span class="linenum">  74</span></a>          <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../_variables/classname.html">$classname</a> = sprintf('problem_%06d', <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>);
<a name="l75"><span class="linenum">  75</span></a>          if(!<a class="phpfunction" onClick="logFunction('class_exists')" href="../../../_functions/class_exists.html" onMouseOver="phpfuncPopup(event,'class_exists')">class_exists</a>(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../_variables/classname.html">$classname</a>)) {
<a name="l76"><span class="linenum">  76</span></a>              continue;
<a name="l77"><span class="linenum">  77</span></a>          }
<a name="l78"><span class="linenum">  78</span></a>          <a class="var it11184" onMouseOver="hilite(11184)" onMouseOut="lolite()" onClick="logVariable('problem')" href="../../../_variables/problem.html">$problem</a> = new <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../_variables/classname.html">$classname</a>;
<a name="l79"><span class="linenum">  79</span></a>  
<a name="l80"><span class="linenum">  80</span></a>          if(<a class="var it11184" onMouseOver="hilite(11184)" onMouseOut="lolite()" onClick="logVariable('problem')" href="../../../_variables/problem.html">$problem</a>-&gt;<a class="function" onClick="logFunction('exists')" href="../../../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">exists</a>()) {
<a name="l81"><span class="linenum">  81</span></a>              <a class="var it3636" onMouseOver="hilite(3636)" onMouseOut="lolite()" onClick="logVariable('severity')" href="../../../_variables/severity.html">$severity</a> = <a class="var it11184" onMouseOver="hilite(11184)" onMouseOut="lolite()" onClick="logVariable('problem')" href="../../../_variables/problem.html">$problem</a>-&gt;<a class="function" onClick="logFunction('severity')" href="../../../_functions/severity.html" onMouseOver="funcPopup(event,'severity')">severity</a>();
<a name="l82"><span class="linenum">  82</span></a>              <a class="var it22269" onMouseOver="hilite(22269)" onMouseOut="lolite()" onClick="logVariable('issues')" href="../../../_variables/issues.html">$issues</a>[<a class="var it3636" onMouseOver="hilite(3636)" onMouseOut="lolite()" onClick="logVariable('severity')" href="../../../_variables/severity.html">$severity</a>][<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../_variables/classname.html">$classname</a>] = array(
<a name="l83"><span class="linenum">  83</span></a>                  'severity'    =&gt; <a class="var it3636" onMouseOver="hilite(3636)" onMouseOut="lolite()" onClick="logVariable('severity')" href="../../../_variables/severity.html">$severity</a>,
<a name="l84"><span class="linenum">  84</span></a>                  'description' =&gt; <a class="var it11184" onMouseOver="hilite(11184)" onMouseOut="lolite()" onClick="logVariable('problem')" href="../../../_variables/problem.html">$problem</a>-&gt;<a class="function" onClick="logFunction('description')" href="../../../_functions/description.html" onMouseOver="funcPopup(event,'description')">description</a>(),
<a name="l85"><span class="linenum">  85</span></a>                  'title'       =&gt; <a class="var it11184" onMouseOver="hilite(11184)" onMouseOut="lolite()" onClick="logVariable('problem')" href="../../../_variables/problem.html">$problem</a>-&gt;<a class="function" onClick="logFunction('title')" href="../../../_functions/title.html" onMouseOver="funcPopup(event,'title')">title</a>()
<a name="l86"><span class="linenum">  86</span></a>              );
<a name="l87"><span class="linenum">  87</span></a>              ++<a class="var it11183" onMouseOver="hilite(11183)" onMouseOut="lolite()" onClick="logVariable('problems')" href="../../../_variables/problems.html">$problems</a>;
<a name="l88"><span class="linenum">  88</span></a>          }
<a name="l89"><span class="linenum">  89</span></a>          unset(<a class="var it11184" onMouseOver="hilite(11184)" onMouseOut="lolite()" onClick="logVariable('problem')" href="../../../_variables/problem.html">$problem</a>);
<a name="l90"><span class="linenum">  90</span></a>      }
<a name="l91"><span class="linenum">  91</span></a>  
<a name="l92"><span class="linenum">  92</span></a>      if(<a class="var it11183" onMouseOver="hilite(11183)" onMouseOut="lolite()" onClick="logVariable('problems')" href="../../../_variables/problems.html">$problems</a> == 0) {
<a name="l93"><span class="linenum">  93</span></a>          echo '&lt;div id=&quot;healthnoproblemsfound&quot;&gt;';
<a name="l94"><span class="linenum">  94</span></a>          echo <a class="function" onClick="logFunction('get_string')" href="../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('healthnoproblemsfound', 'tool_health');
<a name="l95"><span class="linenum">  95</span></a>          echo '&lt;/div&gt;';
<a name="l96"><span class="linenum">  96</span></a>      }
<a name="l97"><span class="linenum">  97</span></a>      else {
<a name="l98"><span class="linenum">  98</span></a>          echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('heading')" href="../../../_functions/heading.html" onMouseOver="funcPopup(event,'heading')">heading</a>(<a class="function" onClick="logFunction('get_string')" href="../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('healthproblemsdetected', 'tool_health'));
<a name="l99"><span class="linenum">  99</span></a>          <a class="var it27602" onMouseOver="hilite(27602)" onMouseOut="lolite()" onClick="logVariable('severities')" href="../../../_variables/severities.html">$severities</a> = array(<a class="constant" onClick="logConstant('SEVERITY_CRITICAL')" href="../../../_constants/SEVERITY_CRITICAL.html" onMouseOver="constPopup(event,'SEVERITY_CRITICAL')">SEVERITY_CRITICAL</a>, <a class="constant" onClick="logConstant('SEVERITY_SIGNIFICANT')" href="../../../_constants/SEVERITY_SIGNIFICANT.html" onMouseOver="constPopup(event,'SEVERITY_SIGNIFICANT')">SEVERITY_SIGNIFICANT</a>, <a class="constant" onClick="logConstant('SEVERITY_ANNOYANCE')" href="../../../_constants/SEVERITY_ANNOYANCE.html" onMouseOver="constPopup(event,'SEVERITY_ANNOYANCE')">SEVERITY_ANNOYANCE</a>, <a class="constant" onClick="logConstant('SEVERITY_NOTICE')" href="../../../_constants/SEVERITY_NOTICE.html" onMouseOver="constPopup(event,'SEVERITY_NOTICE')">SEVERITY_NOTICE</a>);
<a name="l100"><span class="linenum"> 100</span></a>          foreach(<a class="var it27602" onMouseOver="hilite(27602)" onMouseOut="lolite()" onClick="logVariable('severities')" href="../../../_variables/severities.html">$severities</a> as <a class="var it3636" onMouseOver="hilite(3636)" onMouseOut="lolite()" onClick="logVariable('severity')" href="../../../_variables/severity.html">$severity</a>) {
<a name="l101"><span class="linenum"> 101</span></a>              if(!empty(<a class="var it22269" onMouseOver="hilite(22269)" onMouseOut="lolite()" onClick="logVariable('issues')" href="../../../_variables/issues.html">$issues</a>[<a class="var it3636" onMouseOver="hilite(3636)" onMouseOut="lolite()" onClick="logVariable('severity')" href="../../../_variables/severity.html">$severity</a>])) {
<a name="l102"><span class="linenum"> 102</span></a>                  echo '&lt;dl class=&quot;healthissues '.<a class="var it3636" onMouseOver="hilite(3636)" onMouseOut="lolite()" onClick="logVariable('severity')" href="../../../_variables/severity.html">$severity</a>.'&quot;&gt;';
<a name="l103"><span class="linenum"> 103</span></a>                  foreach(<a class="var it22269" onMouseOver="hilite(22269)" onMouseOut="lolite()" onClick="logVariable('issues')" href="../../../_variables/issues.html">$issues</a>[<a class="var it3636" onMouseOver="hilite(3636)" onMouseOut="lolite()" onClick="logVariable('severity')" href="../../../_variables/severity.html">$severity</a>] as <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../_variables/classname.html">$classname</a> =&gt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>) {
<a name="l104"><span class="linenum"> 104</span></a>                      echo '&lt;dt id=&quot;'.<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../_variables/classname.html">$classname</a>.'&quot;&gt;'.<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>['title'].'&lt;/dt&gt;';
<a name="l105"><span class="linenum"> 105</span></a>                      echo '&lt;dd&gt;'.<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>['description'];
<a name="l106"><span class="linenum"> 106</span></a>                      echo '&lt;form action=&quot;index.php#solution&quot; method=&quot;get&quot;&gt;';
<a name="l107"><span class="linenum"> 107</span></a>                      echo '&lt;input type=&quot;hidden&quot; name=&quot;solution&quot; value=&quot;'.<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../_variables/classname.html">$classname</a>.'&quot; /&gt;&lt;input type=&quot;submit&quot; value=&quot;'.<a class="function" onClick="logFunction('get_string')" href="../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('viewsolution').'&quot; /&gt;';
<a name="l108"><span class="linenum"> 108</span></a>                      echo '&lt;/form&gt;&lt;/dd&gt;';
<a name="l109"><span class="linenum"> 109</span></a>                  }
<a name="l110"><span class="linenum"> 110</span></a>                  echo '&lt;/dl&gt;';
<a name="l111"><span class="linenum"> 111</span></a>              }
<a name="l112"><span class="linenum"> 112</span></a>          }
<a name="l113"><span class="linenum"> 113</span></a>      }
<a name="l114"><span class="linenum"> 114</span></a>  }
<a name="l115"><span class="linenum"> 115</span></a>  
<a name="l116"><span class="linenum"> 116</span></a>  function <a class="function" onClick="logFunction('health_print_solution')" href="../../../_functions/health_print_solution.html" onMouseOver="funcPopup(event,'health_print_solution')">health_print_solution</a>(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../_variables/classname.html">$classname</a>) {
<a name="l117"><span class="linenum"> 117</span></a>      global <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l118"><span class="linenum"> 118</span></a>      <a class="var it11184" onMouseOver="hilite(11184)" onMouseOut="lolite()" onClick="logVariable('problem')" href="../../../_variables/problem.html">$problem</a> = new <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../_variables/classname.html">$classname</a>;
<a name="l119"><span class="linenum"> 119</span></a>      <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a> = array(
<a name="l120"><span class="linenum"> 120</span></a>          'title'       =&gt; <a class="var it11184" onMouseOver="hilite(11184)" onMouseOut="lolite()" onClick="logVariable('problem')" href="../../../_variables/problem.html">$problem</a>-&gt;<a class="function" onClick="logFunction('title')" href="../../../_functions/title.html" onMouseOver="funcPopup(event,'title')">title</a>(),
<a name="l121"><span class="linenum"> 121</span></a>          'severity'    =&gt; <a class="var it11184" onMouseOver="hilite(11184)" onMouseOut="lolite()" onClick="logVariable('problem')" href="../../../_variables/problem.html">$problem</a>-&gt;<a class="function" onClick="logFunction('severity')" href="../../../_functions/severity.html" onMouseOver="funcPopup(event,'severity')">severity</a>(),
<a name="l122"><span class="linenum"> 122</span></a>          'description' =&gt; <a class="var it11184" onMouseOver="hilite(11184)" onMouseOut="lolite()" onClick="logVariable('problem')" href="../../../_variables/problem.html">$problem</a>-&gt;<a class="function" onClick="logFunction('description')" href="../../../_functions/description.html" onMouseOver="funcPopup(event,'description')">description</a>(),
<a name="l123"><span class="linenum"> 123</span></a>          'solution'    =&gt; <a class="var it11184" onMouseOver="hilite(11184)" onMouseOut="lolite()" onClick="logVariable('problem')" href="../../../_variables/problem.html">$problem</a>-&gt;<a class="function" onClick="logFunction('solution')" href="../../../_functions/solution.html" onMouseOver="funcPopup(event,'solution')">solution</a>()
<a name="l124"><span class="linenum"> 124</span></a>      );
<a name="l125"><span class="linenum"> 125</span></a>  
<a name="l126"><span class="linenum"> 126</span></a>      echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('heading')" href="../../../_functions/heading.html" onMouseOver="funcPopup(event,'heading')">heading</a>(<a class="function" onClick="logFunction('get_string')" href="../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('pluginname', 'tool_health'));
<a name="l127"><span class="linenum"> 127</span></a>      echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('heading')" href="../../../_functions/heading.html" onMouseOver="funcPopup(event,'heading')">heading</a>(<a class="function" onClick="logFunction('get_string')" href="../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('healthproblemsolution', 'tool_health'));
<a name="l128"><span class="linenum"> 128</span></a>      echo '&lt;dl class=&quot;healthissues '.<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>['severity'].'&quot;&gt;';
<a name="l129"><span class="linenum"> 129</span></a>      echo '&lt;dt&gt;'.<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>['title'].'&lt;/dt&gt;';
<a name="l130"><span class="linenum"> 130</span></a>      echo '&lt;dd&gt;'.<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>['description'].'&lt;/dd&gt;';
<a name="l131"><span class="linenum"> 131</span></a>      echo '&lt;dt id=&quot;solution&quot; class=&quot;solution&quot;&gt;'.<a class="function" onClick="logFunction('get_string')" href="../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('healthsolution', 'tool_health').'&lt;/dt&gt;';
<a name="l132"><span class="linenum"> 132</span></a>      echo '&lt;dd class=&quot;solution&quot;&gt;'.<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../_variables/data.html">$data</a>['solution'].'&lt;/dd&gt;&lt;/dl&gt;';
<a name="l133"><span class="linenum"> 133</span></a>      echo '&lt;form id=&quot;healthformreturn&quot; action=&quot;index.php#'.<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../_variables/classname.html">$classname</a>.'&quot; method=&quot;get&quot;&gt;';
<a name="l134"><span class="linenum"> 134</span></a>      echo '&lt;input type=&quot;submit&quot; value=&quot;'.<a class="function" onClick="logFunction('get_string')" href="../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('healthreturntomain', 'tool_health').'&quot; /&gt;';
<a name="l135"><span class="linenum"> 135</span></a>      echo '&lt;/form&gt;';
<a name="l136"><span class="linenum"> 136</span></a>  }
<a name="l137"><span class="linenum"> 137</span></a>  
<a name="l138"><span class="linenum"> 138</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('problem_base')" href="../../../_classes/problem_base.html" onMouseOver="classPopup(event,'problem_base')">problem_base</a> {
<a name="l139"><span class="linenum"> 139</span></a>      function <a class="function" onClick="logFunction('exists')" href="../../../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">exists</a>() {
<a name="l140"><span class="linenum"> 140</span></a>          return false;
<a name="l141"><span class="linenum"> 141</span></a>      }
<a name="l142"><span class="linenum"> 142</span></a>      function <a class="function" onClick="logFunction('title')" href="../../../_functions/title.html" onMouseOver="funcPopup(event,'title')">title</a>() {
<a name="l143"><span class="linenum"> 143</span></a>          return '???';
<a name="l144"><span class="linenum"> 144</span></a>      }
<a name="l145"><span class="linenum"> 145</span></a>      function <a class="function" onClick="logFunction('severity')" href="../../../_functions/severity.html" onMouseOver="funcPopup(event,'severity')">severity</a>() {
<a name="l146"><span class="linenum"> 146</span></a>          return <a class="constant" onClick="logConstant('SEVERITY_NOTICE')" href="../../../_constants/SEVERITY_NOTICE.html" onMouseOver="constPopup(event,'SEVERITY_NOTICE')">SEVERITY_NOTICE</a>;
<a name="l147"><span class="linenum"> 147</span></a>      }
<a name="l148"><span class="linenum"> 148</span></a>      function <a class="function" onClick="logFunction('description')" href="../../../_functions/description.html" onMouseOver="funcPopup(event,'description')">description</a>() {
<a name="l149"><span class="linenum"> 149</span></a>          return '';
<a name="l150"><span class="linenum"> 150</span></a>      }
<a name="l151"><span class="linenum"> 151</span></a>      function <a class="function" onClick="logFunction('solution')" href="../../../_functions/solution.html" onMouseOver="funcPopup(event,'solution')">solution</a>() {
<a name="l152"><span class="linenum"> 152</span></a>          return '';
<a name="l153"><span class="linenum"> 153</span></a>      }
<a name="l154"><span class="linenum"> 154</span></a>  }
<a name="l155"><span class="linenum"> 155</span></a>  
<a name="l156"><span class="linenum"> 156</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('problem_000002')" href="../../../_classes/problem_000002.html" onMouseOver="classPopup(event,'problem_000002')">problem_000002</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('problem_base')" href="../../../_classes/problem_base.html" onMouseOver="classPopup(event,'problem_base')">problem_base</a> {
<a name="l157"><span class="linenum"> 157</span></a>      function <a class="function" onClick="logFunction('title')" href="../../../_functions/title.html" onMouseOver="funcPopup(event,'title')">title</a>() {
<a name="l158"><span class="linenum"> 158</span></a>          return 'Extra characters at the end of config.php or other library function';
<a name="l159"><span class="linenum"> 159</span></a>      }
<a name="l160"><span class="linenum"> 160</span></a>      function <a class="function" onClick="logFunction('exists')" href="../../../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">exists</a>() {
<a name="l161"><span class="linenum"> 161</span></a>          global <a class="var it27600" onMouseOver="hilite(27600)" onMouseOut="lolite()" onClick="logVariable('extraws')" href="../../../_variables/extraws.html">$extraws</a>;
<a name="l162"><span class="linenum"> 162</span></a>  
<a name="l163"><span class="linenum"> 163</span></a>          if(<a class="var it27600" onMouseOver="hilite(27600)" onMouseOut="lolite()" onClick="logVariable('extraws')" href="../../../_variables/extraws.html">$extraws</a> === '') {
<a name="l164"><span class="linenum"> 164</span></a>              return false;
<a name="l165"><span class="linenum"> 165</span></a>          }
<a name="l166"><span class="linenum"> 166</span></a>          return true;
<a name="l167"><span class="linenum"> 167</span></a>      }
<a name="l168"><span class="linenum"> 168</span></a>      function <a class="function" onClick="logFunction('severity')" href="../../../_functions/severity.html" onMouseOver="funcPopup(event,'severity')">severity</a>() {
<a name="l169"><span class="linenum"> 169</span></a>          return <a class="constant" onClick="logConstant('SEVERITY_SIGNIFICANT')" href="../../../_constants/SEVERITY_SIGNIFICANT.html" onMouseOver="constPopup(event,'SEVERITY_SIGNIFICANT')">SEVERITY_SIGNIFICANT</a>;
<a name="l170"><span class="linenum"> 170</span></a>      }
<a name="l171"><span class="linenum"> 171</span></a>      function <a class="function" onClick="logFunction('description')" href="../../../_functions/description.html" onMouseOver="funcPopup(event,'description')">description</a>() {
<a name="l172"><span class="linenum"> 172</span></a>          return 'Your Moodle configuration file config.php or another library file, contains some characters after the closing PHP <a class="function" onClick="logFunction('tag')" href="../../../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a> (?&gt;). This causes Moodle to exhibit several kinds of problems (such as broken downloaded files) and must be fixed.';
<a name="l173"><span class="linenum"> 173</span></a>      }
<a name="l174"><span class="linenum"> 174</span></a>      function <a class="function" onClick="logFunction('solution')" href="../../../_functions/solution.html" onMouseOver="funcPopup(event,'solution')">solution</a>() {
<a name="l175"><span class="linenum"> 175</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>;
<a name="l176"><span class="linenum"> 176</span></a>          return 'You need to edit &lt;strong&gt;'.<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/dirroot.html">dirroot</a>.'/config.php&lt;/strong&gt; and remove all <a class="function" onClick="logFunction('characters')" href="../../../_functions/characters.html" onMouseOver="funcPopup(event,'characters')">characters</a> (including spaces and returns) after the ending ?&gt; tag. These two characters should be the very last in that file. The extra trailing whitespace may be also present in other PHP files that are included from lib/setup.php.';
<a name="l177"><span class="linenum"> 177</span></a>      }
<a name="l178"><span class="linenum"> 178</span></a>  }
<a name="l179"><span class="linenum"> 179</span></a>  
<a name="l180"><span class="linenum"> 180</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('problem_000003')" href="../../../_classes/problem_000003.html" onMouseOver="classPopup(event,'problem_000003')">problem_000003</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('problem_base')" href="../../../_classes/problem_base.html" onMouseOver="classPopup(event,'problem_base')">problem_base</a> {
<a name="l181"><span class="linenum"> 181</span></a>      function <a class="function" onClick="logFunction('title')" href="../../../_functions/title.html" onMouseOver="funcPopup(event,'title')">title</a>() {
<a name="l182"><span class="linenum"> 182</span></a>          return '<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dataroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/dataroot.html">dataroot</a> does not exist or does not have write permissions';
<a name="l183"><span class="linenum"> 183</span></a>      }
<a name="l184"><span class="linenum"> 184</span></a>      function <a class="function" onClick="logFunction('exists')" href="../../../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">exists</a>() {
<a name="l185"><span class="linenum"> 185</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>;
<a name="l186"><span class="linenum"> 186</span></a>          if(!<a class="phpfunction" onClick="logFunction('is_dir')" href="../../../_functions/is_dir.html" onMouseOver="phpfuncPopup(event,'is_dir')">is_dir</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dataroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/dataroot.html">dataroot</a>) || !<a class="phpfunction" onClick="logFunction('is_writable')" href="../../../_functions/is_writable.html" onMouseOver="phpfuncPopup(event,'is_writable')">is_writable</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dataroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/dataroot.html">dataroot</a>)) {
<a name="l187"><span class="linenum"> 187</span></a>              return true;
<a name="l188"><span class="linenum"> 188</span></a>          }
<a name="l189"><span class="linenum"> 189</span></a>          return false;
<a name="l190"><span class="linenum"> 190</span></a>      }
<a name="l191"><span class="linenum"> 191</span></a>      function <a class="function" onClick="logFunction('severity')" href="../../../_functions/severity.html" onMouseOver="funcPopup(event,'severity')">severity</a>() {
<a name="l192"><span class="linenum"> 192</span></a>          return <a class="constant" onClick="logConstant('SEVERITY_SIGNIFICANT')" href="../../../_constants/SEVERITY_SIGNIFICANT.html" onMouseOver="constPopup(event,'SEVERITY_SIGNIFICANT')">SEVERITY_SIGNIFICANT</a>;
<a name="l193"><span class="linenum"> 193</span></a>      }
<a name="l194"><span class="linenum"> 194</span></a>      function <a class="function" onClick="logFunction('description')" href="../../../_functions/description.html" onMouseOver="funcPopup(event,'description')">description</a>() {
<a name="l195"><span class="linenum"> 195</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>;
<a name="l196"><span class="linenum"> 196</span></a>          return 'Your &lt;strong&gt;config.php&lt;/strong&gt; says that your &quot;data root&quot; directory is &lt;strong&gt;'.<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dataroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/dataroot.html">dataroot</a>.'&lt;/strong&gt;. However, this directory either does not exist or cannot be written to by Moodle. This means that a variety of problems will be present, such as users not being able to log in and not being able to upload any files. It is imperative that you address this problem for Moodle to work correctly.';
<a name="l197"><span class="linenum"> 197</span></a>      }
<a name="l198"><span class="linenum"> 198</span></a>      function <a class="function" onClick="logFunction('solution')" href="../../../_functions/solution.html" onMouseOver="funcPopup(event,'solution')">solution</a>() {
<a name="l199"><span class="linenum"> 199</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>;
<a name="l200"><span class="linenum"> 200</span></a>          return 'First of all, make sure that the directory &lt;strong&gt;'.<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dataroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/dataroot.html">dataroot</a>.'&lt;/strong&gt; exists. If the directory does exist, then you must make sure that Moodle is able to write to it. Contact your web server administrator and request that he gives write permissions for that directory to the user that the web server process is running as.';
<a name="l201"><span class="linenum"> 201</span></a>      }
<a name="l202"><span class="linenum"> 202</span></a>  }
<a name="l203"><span class="linenum"> 203</span></a>  
<a name="l204"><span class="linenum"> 204</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('problem_000004')" href="../../../_classes/problem_000004.html" onMouseOver="classPopup(event,'problem_000004')">problem_000004</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('problem_base')" href="../../../_classes/problem_base.html" onMouseOver="classPopup(event,'problem_base')">problem_base</a> {
<a name="l205"><span class="linenum"> 205</span></a>      function <a class="function" onClick="logFunction('title')" href="../../../_functions/title.html" onMouseOver="funcPopup(event,'title')">title</a>() {
<a name="l206"><span class="linenum"> 206</span></a>          return 'cron.php is not set up to run automatically';
<a name="l207"><span class="linenum"> 207</span></a>      }
<a name="l208"><span class="linenum"> 208</span></a>      function <a class="function" onClick="logFunction('exists')" href="../../../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">exists</a>() {
<a name="l209"><span class="linenum"> 209</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l210"><span class="linenum"> 210</span></a>          <a class="var it2496" onMouseOver="hilite(2496)" onMouseOut="lolite()" onClick="logVariable('lastcron')" href="../../../_variables/lastcron.html">$lastcron</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field_sql')" href="../../../_functions/get_field_sql.html" onMouseOver="funcPopup(event,'get_field_sql')">get_field_sql</a>('SELECT <a class="phpfunction" onClick="logFunction('max')" href="../../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">max</a>(lastcron) FROM {modules}');
<a name="l211"><span class="linenum"> 211</span></a>          return (<a class="phpfunction" onClick="logFunction('time')" href="../../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>() - <a class="var it2496" onMouseOver="hilite(2496)" onMouseOut="lolite()" onClick="logVariable('lastcron')" href="../../../_variables/lastcron.html">$lastcron</a> &gt; 3600 * 24);
<a name="l212"><span class="linenum"> 212</span></a>      }
<a name="l213"><span class="linenum"> 213</span></a>      function <a class="function" onClick="logFunction('severity')" href="../../../_functions/severity.html" onMouseOver="funcPopup(event,'severity')">severity</a>() {
<a name="l214"><span class="linenum"> 214</span></a>          return <a class="constant" onClick="logConstant('SEVERITY_SIGNIFICANT')" href="../../../_constants/SEVERITY_SIGNIFICANT.html" onMouseOver="constPopup(event,'SEVERITY_SIGNIFICANT')">SEVERITY_SIGNIFICANT</a>;
<a name="l215"><span class="linenum"> 215</span></a>      }
<a name="l216"><span class="linenum"> 216</span></a>      function <a class="function" onClick="logFunction('description')" href="../../../_functions/description.html" onMouseOver="funcPopup(event,'description')">description</a>() {
<a name="l217"><span class="linenum"> 217</span></a>          return 'The cron.php mainenance script has not been run in the past 24 hours. This probably means that your server is not configured to automatically run this script in regular time intervals. If this is the case, then Moodle will mostly work as it should but some operations (notably sending email to users) will not be carried out at all.';
<a name="l218"><span class="linenum"> 218</span></a>      }
<a name="l219"><span class="linenum"> 219</span></a>      function <a class="function" onClick="logFunction('solution')" href="../../../_functions/solution.html" onMouseOver="funcPopup(event,'solution')">solution</a>() {
<a name="l220"><span class="linenum"> 220</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>;
<a name="l221"><span class="linenum"> 221</span></a>          return 'For detailed instructions on how to enable cron, see &lt;a href=&quot;'.<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/wwwroot.html">wwwroot</a>.'/doc/?file=install.html#cron&quot;&gt;this section&lt;/a&gt; of the installation manual.';
<a name="l222"><span class="linenum"> 222</span></a>      }
<a name="l223"><span class="linenum"> 223</span></a>  }
<a name="l224"><span class="linenum"> 224</span></a>  
<a name="l225"><span class="linenum"> 225</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('problem_000005')" href="../../../_classes/problem_000005.html" onMouseOver="classPopup(event,'problem_000005')">problem_000005</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('problem_base')" href="../../../_classes/problem_base.html" onMouseOver="classPopup(event,'problem_base')">problem_base</a> {
<a name="l226"><span class="linenum"> 226</span></a>      function <a class="function" onClick="logFunction('title')" href="../../../_functions/title.html" onMouseOver="funcPopup(event,'title')">title</a>() {
<a name="l227"><span class="linenum"> 227</span></a>          return 'PHP: session.auto_start is enabled';
<a name="l228"><span class="linenum"> 228</span></a>      }
<a name="l229"><span class="linenum"> 229</span></a>      function <a class="function" onClick="logFunction('exists')" href="../../../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">exists</a>() {
<a name="l230"><span class="linenum"> 230</span></a>          return <a class="function" onClick="logFunction('ini_get_bool')" href="../../../_functions/ini_get_bool.html" onMouseOver="funcPopup(event,'ini_get_bool')">ini_get_bool</a>('session.auto_start');
<a name="l231"><span class="linenum"> 231</span></a>      }
<a name="l232"><span class="linenum"> 232</span></a>      function <a class="function" onClick="logFunction('severity')" href="../../../_functions/severity.html" onMouseOver="funcPopup(event,'severity')">severity</a>() {
<a name="l233"><span class="linenum"> 233</span></a>          return <a class="constant" onClick="logConstant('SEVERITY_CRITICAL')" href="../../../_constants/SEVERITY_CRITICAL.html" onMouseOver="constPopup(event,'SEVERITY_CRITICAL')">SEVERITY_CRITICAL</a>;
<a name="l234"><span class="linenum"> 234</span></a>      }
<a name="l235"><span class="linenum"> 235</span></a>      function <a class="function" onClick="logFunction('description')" href="../../../_functions/description.html" onMouseOver="funcPopup(event,'description')">description</a>() {
<a name="l236"><span class="linenum"> 236</span></a>          return 'Your PHP configuration includes an enabled setting, session.auto_start, that &lt;strong&gt;must be disabled&lt;/strong&gt; in order for Moodle to work correctly. Notable symptoms arising from this misconfiguration include fatal errors and/or blank pages when trying to log in.';
<a name="l237"><span class="linenum"> 237</span></a>      }
<a name="l238"><span class="linenum"> 238</span></a>      function <a class="function" onClick="logFunction('solution')" href="../../../_functions/solution.html" onMouseOver="funcPopup(event,'solution')">solution</a>() {
<a name="l239"><span class="linenum"> 239</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>;
<a name="l240"><span class="linenum"> 240</span></a>          return '&lt;p&gt;There are two ways you can solve this problem:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;If you have access to your main &lt;strong&gt;php.ini&lt;/strong&gt; file, then find the line that looks like this: &lt;pre&gt;session.auto_start = 1&lt;/pre&gt; and change it to &lt;pre&gt;session.auto_start = 0&lt;/pre&gt; and then restart your web server. Be warned that this, as any other PHP setting change, might affect other web applications running on the server.&lt;/li&gt;&lt;li&gt;Finally, you may be able to change this setting just for your site by creating or editing the file &lt;strong&gt;'.<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/dirroot.html">dirroot</a>.'/.htaccess&lt;/strong&gt; to contain this line: &lt;pre&gt;php_value session.auto_start &quot;0&quot;&lt;/pre&gt;&lt;/li&gt;&lt;/ol&gt;';
<a name="l241"><span class="linenum"> 241</span></a>      }
<a name="l242"><span class="linenum"> 242</span></a>  }
<a name="l243"><span class="linenum"> 243</span></a>  
<a name="l244"><span class="linenum"> 244</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('problem_000007')" href="../../../_classes/problem_000007.html" onMouseOver="classPopup(event,'problem_000007')">problem_000007</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('problem_base')" href="../../../_classes/problem_base.html" onMouseOver="classPopup(event,'problem_base')">problem_base</a> {
<a name="l245"><span class="linenum"> 245</span></a>      function <a class="function" onClick="logFunction('title')" href="../../../_functions/title.html" onMouseOver="funcPopup(event,'title')">title</a>() {
<a name="l246"><span class="linenum"> 246</span></a>          return 'PHP: file_uploads is disabled';
<a name="l247"><span class="linenum"> 247</span></a>      }
<a name="l248"><span class="linenum"> 248</span></a>      function <a class="function" onClick="logFunction('exists')" href="../../../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">exists</a>() {
<a name="l249"><span class="linenum"> 249</span></a>          return !<a class="function" onClick="logFunction('ini_get_bool')" href="../../../_functions/ini_get_bool.html" onMouseOver="funcPopup(event,'ini_get_bool')">ini_get_bool</a>('file_uploads');
<a name="l250"><span class="linenum"> 250</span></a>      }
<a name="l251"><span class="linenum"> 251</span></a>      function <a class="function" onClick="logFunction('severity')" href="../../../_functions/severity.html" onMouseOver="funcPopup(event,'severity')">severity</a>() {
<a name="l252"><span class="linenum"> 252</span></a>          return <a class="constant" onClick="logConstant('SEVERITY_SIGNIFICANT')" href="../../../_constants/SEVERITY_SIGNIFICANT.html" onMouseOver="constPopup(event,'SEVERITY_SIGNIFICANT')">SEVERITY_SIGNIFICANT</a>;
<a name="l253"><span class="linenum"> 253</span></a>      }
<a name="l254"><span class="linenum"> 254</span></a>      function <a class="function" onClick="logFunction('description')" href="../../../_functions/description.html" onMouseOver="funcPopup(event,'description')">description</a>() {
<a name="l255"><span class="linenum"> 255</span></a>          return 'Your PHP configuration includes a disabled setting, file_uploads, that &lt;strong&gt;must be enabled&lt;/strong&gt; to let Moodle offer its full functionality. Until this setting is enabled, it will not be possible to upload any files into Moodle. This includes, for example, course content and user pictures.';
<a name="l256"><span class="linenum"> 256</span></a>      }
<a name="l257"><span class="linenum"> 257</span></a>      function <a class="function" onClick="logFunction('solution')" href="../../../_functions/solution.html" onMouseOver="funcPopup(event,'solution')">solution</a>() {
<a name="l258"><span class="linenum"> 258</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>;
<a name="l259"><span class="linenum"> 259</span></a>          return '&lt;p&gt;There are two ways you can solve this problem:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;If you have access to your main &lt;strong&gt;php.ini&lt;/strong&gt; file, then find the line that looks like this: &lt;pre&gt;file_uploads = Off&lt;/pre&gt; and change it to &lt;pre&gt;file_uploads = On&lt;/pre&gt; and then restart your web server. Be warned that this, as any other PHP setting change, might affect other web applications running on the server.&lt;/li&gt;&lt;li&gt;Finally, you may be able to change this setting just for your site by creating or editing the file &lt;strong&gt;'.<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/dirroot.html">dirroot</a>.'/.htaccess&lt;/strong&gt; to contain this line: &lt;pre&gt;php_value file_uploads &quot;On&quot;&lt;/pre&gt;&lt;/li&gt;&lt;/ol&gt;';
<a name="l260"><span class="linenum"> 260</span></a>      }
<a name="l261"><span class="linenum"> 261</span></a>  }
<a name="l262"><span class="linenum"> 262</span></a>  
<a name="l263"><span class="linenum"> 263</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('problem_000008')" href="../../../_classes/problem_000008.html" onMouseOver="classPopup(event,'problem_000008')">problem_000008</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('problem_base')" href="../../../_classes/problem_base.html" onMouseOver="classPopup(event,'problem_base')">problem_base</a> {
<a name="l264"><span class="linenum"> 264</span></a>      function <a class="function" onClick="logFunction('title')" href="../../../_functions/title.html" onMouseOver="funcPopup(event,'title')">title</a>() {
<a name="l265"><span class="linenum"> 265</span></a>          return 'PHP: memory_limit cannot be controlled by Moodle';
<a name="l266"><span class="linenum"> 266</span></a>      }
<a name="l267"><span class="linenum"> 267</span></a>      function <a class="function" onClick="logFunction('exists')" href="../../../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">exists</a>() {
<a name="l268"><span class="linenum"> 268</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>;
<a name="l269"><span class="linenum"> 269</span></a>  
<a name="l270"><span class="linenum"> 270</span></a>          <a class="var it27603" onMouseOver="hilite(27603)" onMouseOut="lolite()" onClick="logVariable('oldmemlimit')" href="../../../_variables/oldmemlimit.html">$oldmemlimit</a> = @<a class="phpfunction" onClick="logFunction('ini_get')" href="../../../_functions/ini_get.html" onMouseOver="phpfuncPopup(event,'ini_get')">ini_get</a>('memory_limit');
<a name="l271"><span class="linenum"> 271</span></a>          if (empty(<a class="var it27603" onMouseOver="hilite(27603)" onMouseOut="lolite()" onClick="logVariable('oldmemlimit')" href="../../../_variables/oldmemlimit.html">$oldmemlimit</a>)) {
<a name="l272"><span class="linenum"> 272</span></a>  <span class="comment">            // PHP not compiled with memory limits, this means that it's</span>
<a name="l273"><span class="linenum"> 273</span></a>  <span class="comment">            // probably limited to 8M or in case of Windows not at all.</span>
<a name="l274"><span class="linenum"> 274</span></a>  <span class="comment">            // We can ignore it for now - there is not much to test anyway</span>
<a name="l275"><span class="linenum"> 275</span></a>  <span class="comment">            // TODO: add manual test that fills memory??</span>
<a name="l276"><span class="linenum"> 276</span></a>              return false;
<a name="l277"><span class="linenum"> 277</span></a>          }
<a name="l278"><span class="linenum"> 278</span></a>          <a class="var it27603" onMouseOver="hilite(27603)" onMouseOut="lolite()" onClick="logVariable('oldmemlimit')" href="../../../_variables/oldmemlimit.html">$oldmemlimit</a> = <a class="function" onClick="logFunction('get_real_size')" href="../../../_functions/get_real_size.html" onMouseOver="funcPopup(event,'get_real_size')">get_real_size</a>(<a class="var it27603" onMouseOver="hilite(27603)" onMouseOut="lolite()" onClick="logVariable('oldmemlimit')" href="../../../_variables/oldmemlimit.html">$oldmemlimit</a>);
<a name="l279"><span class="linenum"> 279</span></a>  <span class="comment">        //now lets change the memory limit to something higher</span>
<a name="l280"><span class="linenum"> 280</span></a>          <a class="var it27604" onMouseOver="hilite(27604)" onMouseOut="lolite()" onClick="logVariable('newmemlimit')" href="../../../_variables/newmemlimit.html">$newmemlimit</a> = (<a class="var it27603" onMouseOver="hilite(27603)" onMouseOut="lolite()" onClick="logVariable('oldmemlimit')" href="../../../_variables/oldmemlimit.html">$oldmemlimit</a> + 1024*1024*5);
<a name="l281"><span class="linenum"> 281</span></a>          <a class="function" onClick="logFunction('raise_memory_limit')" href="../../../_functions/raise_memory_limit.html" onMouseOver="funcPopup(event,'raise_memory_limit')">raise_memory_limit</a>(<a class="var it27604" onMouseOver="hilite(27604)" onMouseOut="lolite()" onClick="logVariable('newmemlimit')" href="../../../_variables/newmemlimit.html">$newmemlimit</a>);
<a name="l282"><span class="linenum"> 282</span></a>          <a class="var it27605" onMouseOver="hilite(27605)" onMouseOut="lolite()" onClick="logVariable('testmemlimit')" href="../../../_variables/testmemlimit.html">$testmemlimit</a> = <a class="function" onClick="logFunction('get_real_size')" href="../../../_functions/get_real_size.html" onMouseOver="funcPopup(event,'get_real_size')">get_real_size</a>(@<a class="phpfunction" onClick="logFunction('ini_get')" href="../../../_functions/ini_get.html" onMouseOver="phpfuncPopup(event,'ini_get')">ini_get</a>('memory_limit'));
<a name="l283"><span class="linenum"> 283</span></a>  <span class="comment">        //verify the change had any effect at all</span>
<a name="l284"><span class="linenum"> 284</span></a>          if (<a class="var it27603" onMouseOver="hilite(27603)" onMouseOut="lolite()" onClick="logVariable('oldmemlimit')" href="../../../_variables/oldmemlimit.html">$oldmemlimit</a> == <a class="var it27605" onMouseOver="hilite(27605)" onMouseOut="lolite()" onClick="logVariable('testmemlimit')" href="../../../_variables/testmemlimit.html">$testmemlimit</a>) {
<a name="l285"><span class="linenum"> 285</span></a>  <span class="comment">            //memory limit can not be changed - is it big enough then?</span>
<a name="l286"><span class="linenum"> 286</span></a>              if (<a class="var it27603" onMouseOver="hilite(27603)" onMouseOut="lolite()" onClick="logVariable('oldmemlimit')" href="../../../_variables/oldmemlimit.html">$oldmemlimit</a> &lt; <a class="function" onClick="logFunction('get_real_size')" href="../../../_functions/get_real_size.html" onMouseOver="funcPopup(event,'get_real_size')">get_real_size</a>('128M')) {
<a name="l287"><span class="linenum"> 287</span></a>                  return true;
<a name="l288"><span class="linenum"> 288</span></a>              } else {
<a name="l289"><span class="linenum"> 289</span></a>                  return false;
<a name="l290"><span class="linenum"> 290</span></a>              }
<a name="l291"><span class="linenum"> 291</span></a>          }
<a name="l292"><span class="linenum"> 292</span></a>          <a class="function" onClick="logFunction('reduce_memory_limit')" href="../../../_functions/reduce_memory_limit.html" onMouseOver="funcPopup(event,'reduce_memory_limit')">reduce_memory_limit</a>(<a class="var it27603" onMouseOver="hilite(27603)" onMouseOut="lolite()" onClick="logVariable('oldmemlimit')" href="../../../_variables/oldmemlimit.html">$oldmemlimit</a>);
<a name="l293"><span class="linenum"> 293</span></a>          return false;
<a name="l294"><span class="linenum"> 294</span></a>      }
<a name="l295"><span class="linenum"> 295</span></a>      function <a class="function" onClick="logFunction('severity')" href="../../../_functions/severity.html" onMouseOver="funcPopup(event,'severity')">severity</a>() {
<a name="l296"><span class="linenum"> 296</span></a>          return <a class="constant" onClick="logConstant('SEVERITY_NOTICE')" href="../../../_constants/SEVERITY_NOTICE.html" onMouseOver="constPopup(event,'SEVERITY_NOTICE')">SEVERITY_NOTICE</a>;
<a name="l297"><span class="linenum"> 297</span></a>      }
<a name="l298"><span class="linenum"> 298</span></a>      function <a class="function" onClick="logFunction('description')" href="../../../_functions/description.html" onMouseOver="funcPopup(event,'description')">description</a>() {
<a name="l299"><span class="linenum"> 299</span></a>          return 'The settings for PHP on your server do not allow a script to request more memory during its execution. '.
<a name="l300"><span class="linenum"> 300</span></a>                 'This means that there is a hard limit of '.@<a class="phpfunction" onClick="logFunction('ini_get')" href="../../../_functions/ini_get.html" onMouseOver="phpfuncPopup(event,'ini_get')">ini_get</a>('memory_limit').' for each script. '.
<a name="l301"><span class="linenum"> 301</span></a>                 'It is possible that certain operations within Moodle will require more than this amount in order '.
<a name="l302"><span class="linenum"> 302</span></a>                 'to complete successfully, especially if there are lots of data to be processed.';
<a name="l303"><span class="linenum"> 303</span></a>      }
<a name="l304"><span class="linenum"> 304</span></a>      function <a class="function" onClick="logFunction('solution')" href="../../../_functions/solution.html" onMouseOver="funcPopup(event,'solution')">solution</a>() {
<a name="l305"><span class="linenum"> 305</span></a>          return 'It is recommended that you contact your web server administrator to address this issue.';
<a name="l306"><span class="linenum"> 306</span></a>      }
<a name="l307"><span class="linenum"> 307</span></a>  }
<a name="l308"><span class="linenum"> 308</span></a>  
<a name="l309"><span class="linenum"> 309</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('problem_000009')" href="../../../_classes/problem_000009.html" onMouseOver="classPopup(event,'problem_000009')">problem_000009</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('problem_base')" href="../../../_classes/problem_base.html" onMouseOver="classPopup(event,'problem_base')">problem_base</a> {
<a name="l310"><span class="linenum"> 310</span></a>      function <a class="function" onClick="logFunction('title')" href="../../../_functions/title.html" onMouseOver="funcPopup(event,'title')">title</a>() {
<a name="l311"><span class="linenum"> 311</span></a>          return 'SQL: using account without password';
<a name="l312"><span class="linenum"> 312</span></a>      }
<a name="l313"><span class="linenum"> 313</span></a>      function <a class="function" onClick="logFunction('exists')" href="../../../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">exists</a>() {
<a name="l314"><span class="linenum"> 314</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>;
<a name="l315"><span class="linenum"> 315</span></a>          return empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dbpass')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/dbpass.html">dbpass</a>);
<a name="l316"><span class="linenum"> 316</span></a>      }
<a name="l317"><span class="linenum"> 317</span></a>      function <a class="function" onClick="logFunction('severity')" href="../../../_functions/severity.html" onMouseOver="funcPopup(event,'severity')">severity</a>() {
<a name="l318"><span class="linenum"> 318</span></a>          return <a class="constant" onClick="logConstant('SEVERITY_CRITICAL')" href="../../../_constants/SEVERITY_CRITICAL.html" onMouseOver="constPopup(event,'SEVERITY_CRITICAL')">SEVERITY_CRITICAL</a>;
<a name="l319"><span class="linenum"> 319</span></a>      }
<a name="l320"><span class="linenum"> 320</span></a>      function <a class="function" onClick="logFunction('description')" href="../../../_functions/description.html" onMouseOver="funcPopup(event,'description')">description</a>() {
<a name="l321"><span class="linenum"> 321</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>;
<a name="l322"><span class="linenum"> 322</span></a>          return 'The user account your are connecting to the database server with is set up without a password. This is a very big security risk and is only somewhat lessened if your database is configured to not accept connections from any hosts other than the server Moodle is running on. Unless you use a strong password to connect to the database, you risk unauthorized access to and manipulation of your data.'.(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dbuser')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/dbuser.html">dbuser</a> != 'root'?'':' &lt;strong&gt;This is especially alarming because such access to the database would be as the superuser (root)!&lt;/strong&gt;');
<a name="l323"><span class="linenum"> 323</span></a>      }
<a name="l324"><span class="linenum"> 324</span></a>      function <a class="function" onClick="logFunction('solution')" href="../../../_functions/solution.html" onMouseOver="funcPopup(event,'solution')">solution</a>() {
<a name="l325"><span class="linenum"> 325</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>;
<a name="l326"><span class="linenum"> 326</span></a>          return 'You should change the password of the user &lt;strong&gt;'.<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dbuser')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/dbuser.html">dbuser</a>.'&lt;/strong&gt; both in your database and in your Moodle &lt;strong&gt;config.php&lt;/strong&gt; immediately!'.(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dbuser')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/dbuser.html">dbuser</a> != 'root'?'':' It would also be a good idea to change the user account from root to something else, because this would lessen the impact in the event that your database is compromised anyway.');
<a name="l327"><span class="linenum"> 327</span></a>      }
<a name="l328"><span class="linenum"> 328</span></a>  }
<a name="l329"><span class="linenum"> 329</span></a>  <span class="comment">/* // not implemented in 2.0 yet</span>
<a name="l330"><span class="linenum"> 330</span></a>  <span class="comment">class problem_000010 extends problem_base {</span>
<a name="l331"><span class="linenum"> 331</span></a>  <span class="comment">    function title() {</span>
<a name="l332"><span class="linenum"> 332</span></a>  <span class="comment">        return 'Uploaded files: slasharguments disabled or not working';</span>
<a name="l333"><span class="linenum"> 333</span></a>  <span class="comment">    }</span>
<a name="l334"><span class="linenum"> 334</span></a>  <span class="comment">    function exists() {</span>
<a name="l335"><span class="linenum"> 335</span></a>  <span class="comment">        if (!$this-&gt;is_enabled()) {</span>
<a name="l336"><span class="linenum"> 336</span></a>  <span class="comment">            return true;</span>
<a name="l337"><span class="linenum"> 337</span></a>  <span class="comment">        }</span>
<a name="l338"><span class="linenum"> 338</span></a>  <span class="comment">        if ($this-&gt;status() &lt; 1) {</span>
<a name="l339"><span class="linenum"> 339</span></a>  <span class="comment">            return true;</span>
<a name="l340"><span class="linenum"> 340</span></a>  <span class="comment">        }</span>
<a name="l341"><span class="linenum"> 341</span></a>  <span class="comment">        return false;</span>
<a name="l342"><span class="linenum"> 342</span></a>  <span class="comment">    }</span>
<a name="l343"><span class="linenum"> 343</span></a>  <span class="comment">    function severity() {</span>
<a name="l344"><span class="linenum"> 344</span></a>  <span class="comment">        if ($this-&gt;is_enabled() and $this-&gt;status() == 0) {</span>
<a name="l345"><span class="linenum"> 345</span></a>  <span class="comment">            return SEVERITY_SIGNIFICANT;</span>
<a name="l346"><span class="linenum"> 346</span></a>  <span class="comment">        } else {</span>
<a name="l347"><span class="linenum"> 347</span></a>  <span class="comment">            return SEVERITY_ANNOYANCE;</span>
<a name="l348"><span class="linenum"> 348</span></a>  <span class="comment">        }</span>
<a name="l349"><span class="linenum"> 349</span></a>  <span class="comment">    }</span>
<a name="l350"><span class="linenum"> 350</span></a>  <span class="comment">    function description() {</span>
<a name="l351"><span class="linenum"> 351</span></a>  <span class="comment">        global $CFG;</span>
<a name="l352"><span class="linenum"> 352</span></a>  <span class="comment">        $desc = 'Slasharguments are needed for relative linking in uploaded resources:&lt;ul&gt;';</span>
<a name="l353"><span class="linenum"> 353</span></a>  <span class="comment">        if (!$this-&gt;is_enabled()) {</span>
<a name="l354"><span class="linenum"> 354</span></a>  <span class="comment">            $desc .= '&lt;li&gt;slasharguments are &lt;strong&gt;disabled&lt;/strong&gt; in Moodle configuration&lt;/li&gt;';</span>
<a name="l355"><span class="linenum"> 355</span></a>  <span class="comment">        } else {</span>
<a name="l356"><span class="linenum"> 356</span></a>  <span class="comment">            $desc .= '&lt;li&gt;slasharguments are enabled in Moodle configuration&lt;/li&gt;';</span>
<a name="l357"><span class="linenum"> 357</span></a>  <span class="comment">        }</span>
<a name="l358"><span class="linenum"> 358</span></a>  <span class="comment">        if ($this-&gt;status() == -1) {</span>
<a name="l359"><span class="linenum"> 359</span></a>  <span class="comment">            $desc .= '&lt;li&gt;can not run automatic test, you can verify it &lt;a href=&quot;'.$CFG-&gt;wwwroot.'/file.php/testslasharguments&quot; target=&quot;_blank&quot;&gt;here&lt;/a&gt; manually&lt;/li&gt;';</span>
<a name="l360"><span class="linenum"> 360</span></a>  <span class="comment">        } else if ($this-&gt;status() == 0) {</span>
<a name="l361"><span class="linenum"> 361</span></a>  <span class="comment">            $desc .= '&lt;li&gt;slashargument test &lt;strong&gt;failed&lt;/strong&gt;, please check server configuration&lt;/li&gt;';</span>
<a name="l362"><span class="linenum"> 362</span></a>  <span class="comment">        } else {</span>
<a name="l363"><span class="linenum"> 363</span></a>  <span class="comment">            $desc .= '&lt;li&gt;slashargument test passed&lt;/li&gt;';</span>
<a name="l364"><span class="linenum"> 364</span></a>  <span class="comment">        }</span>
<a name="l365"><span class="linenum"> 365</span></a>  <span class="comment">        $desc .= '&lt;/ul&gt;';</span>
<a name="l366"><span class="linenum"> 366</span></a>  <span class="comment">        return $desc;</span>
<a name="l367"><span class="linenum"> 367</span></a>  <span class="comment">    }</span>
<a name="l368"><span class="linenum"> 368</span></a>  <span class="comment">    function solution() {</span>
<a name="l369"><span class="linenum"> 369</span></a>  <span class="comment">        global $CFG;</span>
<a name="l370"><span class="linenum"> 370</span></a>  <span class="comment">        $enabled = $this-&gt;is_enabled();</span>
<a name="l371"><span class="linenum"> 371</span></a>  <span class="comment">        $status = $this-&gt;status();</span>
<a name="l372"><span class="linenum"> 372</span></a>  <span class="comment">        $solution = '';</span>
<a name="l373"><span class="linenum"> 373</span></a>  <span class="comment">        if ($enabled and ($status == 0)) {</span>
<a name="l374"><span class="linenum"> 374</span></a>  <span class="comment">            $solution .= 'Slasharguments are enabled, but the test failed. Please disable slasharguments in Moodle configuration or fix the server configuration.&lt;hr /&gt;';</span>
<a name="l375"><span class="linenum"> 375</span></a>  <span class="comment">        } else if ((!$enabled) and ($status == 0)) {</span>
<a name="l376"><span class="linenum"> 376</span></a>  <span class="comment">            $solution .= 'Slasharguments are disabled and the test failed. You may try to fix the server configuration.&lt;hr /&gt;';</span>
<a name="l377"><span class="linenum"> 377</span></a>  <span class="comment">        } else if ($enabled and ($status == -1)) {</span>
<a name="l378"><span class="linenum"> 378</span></a>  <span class="comment">            $solution .= 'Slasharguments are enabled, &lt;a href=&quot;'.$CFG-&gt;wwwroot.'/file.php/testslasharguments&quot;&gt;automatic testing&lt;/a&gt; not possible.&lt;hr /&gt;';</span>
<a name="l379"><span class="linenum"> 379</span></a>  <span class="comment">        } else if ((!$enabled) and ($status == -1)) {</span>
<a name="l380"><span class="linenum"> 380</span></a>  <span class="comment">            $solution .= 'Slasharguments are disabled, &lt;a href=&quot;'.$CFG-&gt;wwwroot.'/file.php/testslasharguments&quot;&gt;automatic testing&lt;/a&gt; not possible.&lt;hr /&gt;';</span>
<a name="l381"><span class="linenum"> 381</span></a>  <span class="comment">        } else if ((!$enabled) and ($status &gt; 0)) {</span>
<a name="l382"><span class="linenum"> 382</span></a>  <span class="comment">            $solution .= 'Slasharguments are disabled though the iternal test is OK. You should enable slasharguments in Moodle configuration.';</span>
<a name="l383"><span class="linenum"> 383</span></a>  <span class="comment">        } else if ($enabled and ($status &gt; 0)) {</span>
<a name="l384"><span class="linenum"> 384</span></a>  <span class="comment">            $solution .= 'Congratulations - everything seems OK now :-D';</span>
<a name="l385"><span class="linenum"> 385</span></a>  <span class="comment">        }</span>
<a name="l386"><span class="linenum"> 386</span></a>  <span class="comment">        if ($status &lt; 1) {</span>
<a name="l387"><span class="linenum"> 387</span></a>  <span class="comment">            $solution .= '&lt;p&gt;IIS:&lt;ul&gt;&lt;li&gt;try to add &lt;code&gt;cgi.fix_pathinfo=1&lt;/code&gt; to php.ini&lt;/li&gt;&lt;li&gt;do NOT enable AllowPathInfoForScriptMappings !!!&lt;/li&gt;&lt;li&gt;slasharguments may not work when using ISAPI and PHP 4.3.10 and older&lt;/li&gt;&lt;/ul&gt;&lt;/p&gt;';</span>
<a name="l388"><span class="linenum"> 388</span></a>  <span class="comment">            $solution .= '&lt;p&gt;Apache 1:&lt;ul&gt;&lt;li&gt;try to add &lt;code&gt;cgi.fix_pathinfo=1&lt;/code&gt; to php.ini&lt;/li&gt;&lt;/ul&gt;&lt;/p&gt;';</span>
<a name="l389"><span class="linenum"> 389</span></a>  <span class="comment">            $solution .= '&lt;p&gt;Apache 2:&lt;ul&gt;&lt;li&gt;you must add &lt;code&gt;AcceptPathInfo on&lt;/code&gt; to php.ini or .htaccess&lt;/li&gt;&lt;li&gt;try to add &lt;code&gt;cgi.fix_pathinfo=1&lt;/code&gt; to php.ini&lt;/li&gt;&lt;/ul&gt;&lt;/p&gt;';</span>
<a name="l390"><span class="linenum"> 390</span></a>  <span class="comment">        }</span>
<a name="l391"><span class="linenum"> 391</span></a>  <span class="comment">        return $solution;</span>
<a name="l392"><span class="linenum"> 392</span></a>  <span class="comment">    }</span>
<a name="l393"><span class="linenum"> 393</span></a>  <span class="comment">    function is_enabled() {</span>
<a name="l394"><span class="linenum"> 394</span></a>  <span class="comment">        global $CFG;</span>
<a name="l395"><span class="linenum"> 395</span></a>  <span class="comment">        return !empty($CFG-&gt;slasharguments);</span>
<a name="l396"><span class="linenum"> 396</span></a>  <span class="comment">    }</span>
<a name="l397"><span class="linenum"> 397</span></a>  <span class="comment">    function status() {</span>
<a name="l398"><span class="linenum"> 398</span></a>  <span class="comment">        global $CFG;</span>
<a name="l399"><span class="linenum"> 399</span></a>  <span class="comment">        $handle = @fopen($CFG-&gt;wwwroot.'/file.php?file=/testslasharguments', &quot;r&quot;);</span>
<a name="l400"><span class="linenum"> 400</span></a>  <span class="comment">        $contents = @trim(fread($handle, 10));</span>
<a name="l401"><span class="linenum"> 401</span></a>  <span class="comment">        @fclose($handle);</span>
<a name="l402"><span class="linenum"> 402</span></a>  <span class="comment">        if ($contents != 'test -1') {</span>
<a name="l403"><span class="linenum"> 403</span></a>  <span class="comment">            return -1;</span>
<a name="l404"><span class="linenum"> 404</span></a>  <span class="comment">        }</span>
<a name="l405"><span class="linenum"> 405</span></a>  <span class="comment">        $handle = @fopen($CFG-&gt;wwwroot.'/file.php/testslasharguments', &quot;r&quot;);</span>
<a name="l406"><span class="linenum"> 406</span></a>  <span class="comment">        $contents = trim(@fread($handle, 10));</span>
<a name="l407"><span class="linenum"> 407</span></a>  <span class="comment">        @fclose($handle);</span>
<a name="l408"><span class="linenum"> 408</span></a>  <span class="comment">        switch ($contents) {</span>
<a name="l409"><span class="linenum"> 409</span></a>  <span class="comment">            case 'test 1': return 1;</span>
<a name="l410"><span class="linenum"> 410</span></a>  <span class="comment">            case 'test 2': return 2;</span>
<a name="l411"><span class="linenum"> 411</span></a>  <span class="comment">            default:  return 0;</span>
<a name="l412"><span class="linenum"> 412</span></a>  <span class="comment">        }</span>
<a name="l413"><span class="linenum"> 413</span></a>  <span class="comment">    }</span>
<a name="l414"><span class="linenum"> 414</span></a>  <span class="comment">}*/</span>
<a name="l415"><span class="linenum"> 415</span></a>  
<a name="l416"><span class="linenum"> 416</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('problem_000012')" href="../../../_classes/problem_000012.html" onMouseOver="classPopup(event,'problem_000012')">problem_000012</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('problem_base')" href="../../../_classes/problem_base.html" onMouseOver="classPopup(event,'problem_base')">problem_base</a> {
<a name="l417"><span class="linenum"> 417</span></a>      function <a class="function" onClick="logFunction('title')" href="../../../_functions/title.html" onMouseOver="funcPopup(event,'title')">title</a>() {
<a name="l418"><span class="linenum"> 418</span></a>          return 'Random questions data consistency';
<a name="l419"><span class="linenum"> 419</span></a>      }
<a name="l420"><span class="linenum"> 420</span></a>      function <a class="function" onClick="logFunction('exists')" href="../../../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">exists</a>() {
<a name="l421"><span class="linenum"> 421</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l422"><span class="linenum"> 422</span></a>          return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists_select')" href="../../../_functions/record_exists_select.html" onMouseOver="funcPopup(event,'record_exists_select')">record_exists_select</a>('question', &quot;qtype = 'random' AND parent &lt;&gt; id&quot;, array());
<a name="l423"><span class="linenum"> 423</span></a>      }
<a name="l424"><span class="linenum"> 424</span></a>      function <a class="function" onClick="logFunction('severity')" href="../../../_functions/severity.html" onMouseOver="funcPopup(event,'severity')">severity</a>() {
<a name="l425"><span class="linenum"> 425</span></a>          return <a class="constant" onClick="logConstant('SEVERITY_ANNOYANCE')" href="../../../_constants/SEVERITY_ANNOYANCE.html" onMouseOver="constPopup(event,'SEVERITY_ANNOYANCE')">SEVERITY_ANNOYANCE</a>;
<a name="l426"><span class="linenum"> 426</span></a>      }
<a name="l427"><span class="linenum"> 427</span></a>      function <a class="function" onClick="logFunction('description')" href="../../../_functions/description.html" onMouseOver="funcPopup(event,'description')">description</a>() {
<a name="l428"><span class="linenum"> 428</span></a>          return '&lt;p&gt;For random questions, question.parent should equal question.id. ' .
<a name="l429"><span class="linenum"> 429</span></a>          'There are some questions in your database for which this is not true. ' .
<a name="l430"><span class="linenum"> 430</span></a>          'One way that this could have happened is for random questions restored from backup before ' .
<a name="l431"><span class="linenum"> 431</span></a>          '&lt;a href=&quot;http://tracker.moodle.org/browse/MDL-5482&quot;&gt;MDL-5482&lt;/a&gt; was fixed.&lt;/p&gt;';
<a name="l432"><span class="linenum"> 432</span></a>      }
<a name="l433"><span class="linenum"> 433</span></a>      function <a class="function" onClick="logFunction('solution')" href="../../../_functions/solution.html" onMouseOver="funcPopup(event,'solution')">solution</a>() {
<a name="l434"><span class="linenum"> 434</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>;
<a name="l435"><span class="linenum"> 435</span></a>          return '&lt;p&gt;Upgrade to Moodle 1.9.1 or later, or manually execute the SQL&lt;/p&gt;' .
<a name="l436"><span class="linenum"> 436</span></a>          '&lt;pre&gt;UPDATE ' . <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('prefix')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/prefix.html">prefix</a> . 'question SET parent = id WHERE qtype = \'random\' and parent &amp;lt;&gt; id;&lt;/pre&gt;';
<a name="l437"><span class="linenum"> 437</span></a>      }
<a name="l438"><span class="linenum"> 438</span></a>  }
<a name="l439"><span class="linenum"> 439</span></a>  
<a name="l440"><span class="linenum"> 440</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('problem_000013')" href="../../../_classes/problem_000013.html" onMouseOver="classPopup(event,'problem_000013')">problem_000013</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('problem_base')" href="../../../_classes/problem_base.html" onMouseOver="classPopup(event,'problem_base')">problem_base</a> {
<a name="l441"><span class="linenum"> 441</span></a>      function <a class="function" onClick="logFunction('title')" href="../../../_functions/title.html" onMouseOver="funcPopup(event,'title')">title</a>() {
<a name="l442"><span class="linenum"> 442</span></a>          return 'Multi-answer questions data consistency';
<a name="l443"><span class="linenum"> 443</span></a>      }
<a name="l444"><span class="linenum"> 444</span></a>      function <a class="function" onClick="logFunction('exists')" href="../../../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">exists</a>() {
<a name="l445"><span class="linenum"> 445</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l446"><span class="linenum"> 446</span></a>          <a class="var it27606" onMouseOver="hilite(27606)" onMouseOut="lolite()" onClick="logVariable('positionexpr')" href="../../../_variables/positionexpr.html">$positionexpr</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_position')" href="../../../_functions/sql_position.html" onMouseOver="funcPopup(event,'sql_position')">sql_position</a>(<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_concat')" href="../../../_functions/sql_concat.html" onMouseOver="funcPopup(event,'sql_concat')">sql_concat</a>(&quot;','&quot;, &quot;q.id&quot;, &quot;','&quot;),
<a name="l447"><span class="linenum"> 447</span></a>                  <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_concat')" href="../../../_functions/sql_concat.html" onMouseOver="funcPopup(event,'sql_concat')">sql_concat</a>(&quot;','&quot;, &quot;qma.sequence&quot;, &quot;','&quot;));
<a name="l448"><span class="linenum"> 448</span></a>          return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists_sql')" href="../../../_functions/record_exists_sql.html" onMouseOver="funcPopup(event,'record_exists_sql')">record_exists_sql</a>(&quot;
<a name="l449"><span class="linenum"> 449</span></a>                  SELECT * FROM {question} q
<a name="l450"><span class="linenum"> 450</span></a>                      JOIN {question_multianswer} qma ON <a class="var it27606" onMouseOver="hilite(27606)" onMouseOut="lolite()" onClick="logVariable('positionexpr')" href="../../../_variables/positionexpr.html">$positionexpr</a> &gt; 0
<a name="l451"><span class="linenum"> 451</span></a>                  WHERE qma.question &lt;&gt; q.parent&quot;) ||
<a name="l452"><span class="linenum"> 452</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists_sql')" href="../../../_functions/record_exists_sql.html" onMouseOver="funcPopup(event,'record_exists_sql')">record_exists_sql</a>(&quot;
<a name="l453"><span class="linenum"> 453</span></a>                  SELECT * FROM {question} q
<a name="l454"><span class="linenum"> 454</span></a>                      JOIN {question} parent_q ON parent_q.id = q.parent
<a name="l455"><span class="linenum"> 455</span></a>                  WHERE q.category &lt;&gt; parent_q.category&quot;);
<a name="l456"><span class="linenum"> 456</span></a>      }
<a name="l457"><span class="linenum"> 457</span></a>      function <a class="function" onClick="logFunction('severity')" href="../../../_functions/severity.html" onMouseOver="funcPopup(event,'severity')">severity</a>() {
<a name="l458"><span class="linenum"> 458</span></a>          return <a class="constant" onClick="logConstant('SEVERITY_ANNOYANCE')" href="../../../_constants/SEVERITY_ANNOYANCE.html" onMouseOver="constPopup(event,'SEVERITY_ANNOYANCE')">SEVERITY_ANNOYANCE</a>;
<a name="l459"><span class="linenum"> 459</span></a>      }
<a name="l460"><span class="linenum"> 460</span></a>      function <a class="function" onClick="logFunction('description')" href="../../../_functions/description.html" onMouseOver="funcPopup(event,'description')">description</a>() {
<a name="l461"><span class="linenum"> 461</span></a>          return '&lt;p&gt;For each sub-question whose id is listed in ' .
<a name="l462"><span class="linenum"> 462</span></a>          'question_multianswer.sequence, its question.parent field should equal ' .
<a name="l463"><span class="linenum"> 463</span></a>          'question_multianswer.question; and each sub-question should be in the same ' .
<a name="l464"><span class="linenum"> 464</span></a>          'category as its parent. There are questions in your database for ' .
<a name="l465"><span class="linenum"> 465</span></a>          'which this is not the case. One way that this could have happened is ' .
<a name="l466"><span class="linenum"> 466</span></a>          'for multi-answer questions restored from backup before ' .
<a name="l467"><span class="linenum"> 467</span></a>          '&lt;a href=&quot;http://tracker.moodle.org/browse/MDL-14750&quot;&gt;MDL-14750&lt;/a&gt; was fixed.&lt;/p&gt;';
<a name="l468"><span class="linenum"> 468</span></a>      }
<a name="l469"><span class="linenum"> 469</span></a>      function <a class="function" onClick="logFunction('solution')" href="../../../_functions/solution.html" onMouseOver="funcPopup(event,'solution')">solution</a>() {
<a name="l470"><span class="linenum"> 470</span></a>          return '&lt;p&gt;Upgrade to Moodle 1.9.1 or later, or manually execute the ' .
<a name="l471"><span class="linenum"> 471</span></a>          'code in question_multianswer_fix_subquestion_parents_and_categories in ' .
<a name="l472"><span class="linenum"> 472</span></a>          '&lt;a href=&quot;http://cvs.moodle.org/moodle/question/type/multianswer/db/upgrade.php?revision=1.1.10.2&amp;amp;view=markup&quot;&gt;/question/type/multianswer/db/upgrade.php' .
<a name="l473"><span class="linenum"> 473</span></a>          'from the 1.9 stable branch&lt;/a&gt;.&lt;/p&gt;';
<a name="l474"><span class="linenum"> 474</span></a>      }
<a name="l475"><span class="linenum"> 475</span></a>  }
<a name="l476"><span class="linenum"> 476</span></a>  
<a name="l477"><span class="linenum"> 477</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('problem_000014')" href="../../../_classes/problem_000014.html" onMouseOver="classPopup(event,'problem_000014')">problem_000014</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('problem_base')" href="../../../_classes/problem_base.html" onMouseOver="classPopup(event,'problem_base')">problem_base</a> {
<a name="l478"><span class="linenum"> 478</span></a>      function <a class="function" onClick="logFunction('title')" href="../../../_functions/title.html" onMouseOver="funcPopup(event,'title')">title</a>() {
<a name="l479"><span class="linenum"> 479</span></a>          return 'Only multianswer and random questions should be the parent of another question';
<a name="l480"><span class="linenum"> 480</span></a>      }
<a name="l481"><span class="linenum"> 481</span></a>      function <a class="function" onClick="logFunction('exists')" href="../../../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">exists</a>() {
<a name="l482"><span class="linenum"> 482</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l483"><span class="linenum"> 483</span></a>          return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists_sql')" href="../../../_functions/record_exists_sql.html" onMouseOver="funcPopup(event,'record_exists_sql')">record_exists_sql</a>(&quot;
<a name="l484"><span class="linenum"> 484</span></a>                  SELECT * FROM {question} q
<a name="l485"><span class="linenum"> 485</span></a>                      JOIN {question} parent_q ON parent_q.id = q.parent
<a name="l486"><span class="linenum"> 486</span></a>                  WHERE parent_q.qtype NOT IN ('random', 'multianswer')&quot;);
<a name="l487"><span class="linenum"> 487</span></a>      }
<a name="l488"><span class="linenum"> 488</span></a>      function <a class="function" onClick="logFunction('severity')" href="../../../_functions/severity.html" onMouseOver="funcPopup(event,'severity')">severity</a>() {
<a name="l489"><span class="linenum"> 489</span></a>          return <a class="constant" onClick="logConstant('SEVERITY_ANNOYANCE')" href="../../../_constants/SEVERITY_ANNOYANCE.html" onMouseOver="constPopup(event,'SEVERITY_ANNOYANCE')">SEVERITY_ANNOYANCE</a>;
<a name="l490"><span class="linenum"> 490</span></a>      }
<a name="l491"><span class="linenum"> 491</span></a>      function <a class="function" onClick="logFunction('description')" href="../../../_functions/description.html" onMouseOver="funcPopup(event,'description')">description</a>() {
<a name="l492"><span class="linenum"> 492</span></a>          return '&lt;p&gt;You have questions that violate this in your databse. ' .
<a name="l493"><span class="linenum"> 493</span></a>          'You will need to investigate to determine how this happened.&lt;/p&gt;';
<a name="l494"><span class="linenum"> 494</span></a>      }
<a name="l495"><span class="linenum"> 495</span></a>      function <a class="function" onClick="logFunction('solution')" href="../../../_functions/solution.html" onMouseOver="funcPopup(event,'solution')">solution</a>() {
<a name="l496"><span class="linenum"> 496</span></a>          return '&lt;p&gt;It is impossible to give a solution without knowing more about ' .
<a name="l497"><span class="linenum"> 497</span></a>          ' how the problem was caused. You may be able to get help from the ' .
<a name="l498"><span class="linenum"> 498</span></a>          '&lt;a href=&quot;http://moodle.org/mod/forum/view.php?f=121&quot;&gt;Quiz forum&lt;/a&gt;.&lt;/p&gt;';
<a name="l499"><span class="linenum"> 499</span></a>      }
<a name="l500"><span class="linenum"> 500</span></a>  }
<a name="l501"><span class="linenum"> 501</span></a>  
<a name="l502"><span class="linenum"> 502</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('problem_000015')" href="../../../_classes/problem_000015.html" onMouseOver="classPopup(event,'problem_000015')">problem_000015</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('problem_base')" href="../../../_classes/problem_base.html" onMouseOver="classPopup(event,'problem_base')">problem_base</a> {
<a name="l503"><span class="linenum"> 503</span></a>      function <a class="function" onClick="logFunction('title')" href="../../../_functions/title.html" onMouseOver="funcPopup(event,'title')">title</a>() {
<a name="l504"><span class="linenum"> 504</span></a>          return 'Question categories should belong to a valid context';
<a name="l505"><span class="linenum"> 505</span></a>      }
<a name="l506"><span class="linenum"> 506</span></a>      function <a class="function" onClick="logFunction('exists')" href="../../../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">exists</a>() {
<a name="l507"><span class="linenum"> 507</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l508"><span class="linenum"> 508</span></a>          return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists_sql')" href="../../../_functions/record_exists_sql.html" onMouseOver="funcPopup(event,'record_exists_sql')">record_exists_sql</a>(&quot;
<a name="l509"><span class="linenum"> 509</span></a>              SELECT qc.*, (SELECT <a class="phpfunction" onClick="logFunction('COUNT')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(1) FROM {question} q WHERE q.category = qc.id) AS numquestions
<a name="l510"><span class="linenum"> 510</span></a>              FROM {question_categories} qc
<a name="l511"><span class="linenum"> 511</span></a>                  LEFT JOIN {context} con ON qc.contextid = con.id
<a name="l512"><span class="linenum"> 512</span></a>              WHERE con.id IS NULL&quot;);
<a name="l513"><span class="linenum"> 513</span></a>      }
<a name="l514"><span class="linenum"> 514</span></a>      function <a class="function" onClick="logFunction('severity')" href="../../../_functions/severity.html" onMouseOver="funcPopup(event,'severity')">severity</a>() {
<a name="l515"><span class="linenum"> 515</span></a>          return <a class="constant" onClick="logConstant('SEVERITY_ANNOYANCE')" href="../../../_constants/SEVERITY_ANNOYANCE.html" onMouseOver="constPopup(event,'SEVERITY_ANNOYANCE')">SEVERITY_ANNOYANCE</a>;
<a name="l516"><span class="linenum"> 516</span></a>      }
<a name="l517"><span class="linenum"> 517</span></a>      function <a class="function" onClick="logFunction('description')" href="../../../_functions/description.html" onMouseOver="funcPopup(event,'description')">description</a>() {
<a name="l518"><span class="linenum"> 518</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l519"><span class="linenum"> 519</span></a>          <a class="var it27607" onMouseOver="hilite(27607)" onMouseOut="lolite()" onClick="logVariable('problemcategories')" href="../../../_variables/problemcategories.html">$problemcategories</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(&quot;
<a name="l520"><span class="linenum"> 520</span></a>              SELECT qc.id, qc.name, qc.contextid, (SELECT <a class="phpfunction" onClick="logFunction('COUNT')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(1) FROM {question} q WHERE q.category = qc.id) AS numquestions
<a name="l521"><span class="linenum"> 521</span></a>              FROM {question_categories} qc
<a name="l522"><span class="linenum"> 522</span></a>                  LEFT JOIN {context} con ON qc.contextid = con.id
<a name="l523"><span class="linenum"> 523</span></a>              WHERE con.id IS NULL
<a name="l524"><span class="linenum"> 524</span></a>              ORDER BY numquestions DESC, qc.name&quot;);
<a name="l525"><span class="linenum"> 525</span></a>          <a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../../_variables/table.html">$table</a> = '&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Cat id&lt;/th&gt;&lt;th&gt;Category name&lt;/th&gt;' .
<a name="l526"><span class="linenum"> 526</span></a>          &quot;&lt;th&gt;Context id&lt;/th&gt;&lt;th&gt;Num Questions&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;\n&quot;;
<a name="l527"><span class="linenum"> 527</span></a>          foreach (<a class="var it27607" onMouseOver="hilite(27607)" onMouseOut="lolite()" onClick="logVariable('problemcategories')" href="../../../_variables/problemcategories.html">$problemcategories</a> as <a class="var it4945" onMouseOver="hilite(4945)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a>) {
<a name="l528"><span class="linenum"> 528</span></a>              <a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../../_variables/table.html">$table</a> .= &quot;&lt;tr&gt;&lt;td&gt;<a class="var it4945" onMouseOver="hilite(4945)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a>-&gt;<a onClick="logVariable('id')" class="var it39557" onMouseOver="hilite(39557)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>&lt;/td&gt;&lt;td&gt;&quot; . <a class="function" onClick="logFunction('s')" href="../../../_functions/s.html" onMouseOver="funcPopup(event,'s')">s</a>(<a class="var it4945" onMouseOver="hilite(4945)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a>-&gt;<a onClick="logVariable('name')" class="var it39557" onMouseOver="hilite(39557)" onMouseOut="lolite()" href="../../../_variables/name.html">name</a>) . &quot;&lt;/td&gt;&lt;td&gt;&quot; .
<a name="l529"><span class="linenum"> 529</span></a>              <a class="var it4945" onMouseOver="hilite(4945)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a>-&gt;<a onClick="logVariable('contextid')" class="var it39557" onMouseOver="hilite(39557)" onMouseOut="lolite()" href="../../../_variables/contextid.html">contextid</a> .&quot;&lt;/td&gt;&lt;td&gt;<a class="var it4945" onMouseOver="hilite(4945)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a>-&gt;<a onClick="logVariable('numquestions')" class="var it39557" onMouseOver="hilite(39557)" onMouseOut="lolite()" href="../../../_variables/numquestions.html">numquestions</a>&lt;/td&gt;&lt;/tr&gt;\n&quot;;
<a name="l530"><span class="linenum"> 530</span></a>          }
<a name="l531"><span class="linenum"> 531</span></a>          <a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../../_variables/table.html">$table</a> .= '&lt;/tbody&gt;&lt;/table&gt;';
<a name="l532"><span class="linenum"> 532</span></a>          return '&lt;p&gt;All question categories are linked to a context id, and, ' .
<a name="l533"><span class="linenum"> 533</span></a>          'the context they are linked to must exist. The following categories ' .
<a name="l534"><span class="linenum"> 534</span></a>          'belong to a non-existant category:&lt;/p&gt;' . <a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../../_variables/table.html">$table</a> . '&lt;p&gt;Any of these ' .
<a name="l535"><span class="linenum"> 535</span></a>          'categories that contain no questions can just be deleted form the database. ' .
<a name="l536"><span class="linenum"> 536</span></a>          'Other categories will require more thought.&lt;/p&gt;';
<a name="l537"><span class="linenum"> 537</span></a>      }
<a name="l538"><span class="linenum"> 538</span></a>      function <a class="function" onClick="logFunction('solution')" href="../../../_functions/solution.html" onMouseOver="funcPopup(event,'solution')">solution</a>() {
<a name="l539"><span class="linenum"> 539</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>;
<a name="l540"><span class="linenum"> 540</span></a>          return '&lt;p&gt;You can delete the empty categories by executing the following SQL:&lt;/p&gt;&lt;pre&gt;
<a name="l541"><span class="linenum"> 541</span></a>  DELETE FROM ' . <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('prefix')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/prefix.html">prefix</a> . 'question_categories
<a name="l542"><span class="linenum"> 542</span></a>  WHERE
<a name="l543"><span class="linenum"> 543</span></a>      NOT <a class="function" onClick="logFunction('EXISTS')" href="../../../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">EXISTS</a> (SELECT * FROM ' . <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('prefix')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/prefix.html">prefix</a> . 'question q WHERE q.category = ' . <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('prefix')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/prefix.html">prefix</a> . 'question_categories.id)
<a name="l544"><span class="linenum"> 544</span></a>  AND NOT <a class="function" onClick="logFunction('EXISTS')" href="../../../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">EXISTS</a> (SELECT * FROM ' . <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('prefix')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/prefix.html">prefix</a> . 'context con WHERE contextid = con.id)
<a name="l545"><span class="linenum"> 545</span></a>          &lt;/pre&gt;&lt;p&gt;Any remaining categories that contain questions will require more thought. ' .
<a name="l546"><span class="linenum"> 546</span></a>          'People in the &lt;a href=&quot;http://moodle.org/mod/forum/view.php?f=121&quot;&gt;Quiz forum&lt;/a&gt; may be able to help.&lt;/p&gt;';
<a name="l547"><span class="linenum"> 547</span></a>      }
<a name="l548"><span class="linenum"> 548</span></a>  }
<a name="l549"><span class="linenum"> 549</span></a>  
<a name="l550"><span class="linenum"> 550</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('problem_000016')" href="../../../_classes/problem_000016.html" onMouseOver="classPopup(event,'problem_000016')">problem_000016</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('problem_base')" href="../../../_classes/problem_base.html" onMouseOver="classPopup(event,'problem_base')">problem_base</a> {
<a name="l551"><span class="linenum"> 551</span></a>      function <a class="function" onClick="logFunction('title')" href="../../../_functions/title.html" onMouseOver="funcPopup(event,'title')">title</a>() {
<a name="l552"><span class="linenum"> 552</span></a>          return 'Question categories should belong to the same context as their parent';
<a name="l553"><span class="linenum"> 553</span></a>      }
<a name="l554"><span class="linenum"> 554</span></a>      function <a class="function" onClick="logFunction('exists')" href="../../../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">exists</a>() {
<a name="l555"><span class="linenum"> 555</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l556"><span class="linenum"> 556</span></a>          return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists_sql')" href="../../../_functions/record_exists_sql.html" onMouseOver="funcPopup(event,'record_exists_sql')">record_exists_sql</a>(&quot;
<a name="l557"><span class="linenum"> 557</span></a>              SELECT parent_qc.id AS parent, child_qc.id AS child, child_qc.contextid
<a name="l558"><span class="linenum"> 558</span></a>              FROM {question_categories} child_qc
<a name="l559"><span class="linenum"> 559</span></a>                  JOIN {question_categories} parent_qc ON child_qc.parent = parent_qc.id
<a name="l560"><span class="linenum"> 560</span></a>              WHERE child_qc.contextid &lt;&gt; parent_qc.contextid&quot;);
<a name="l561"><span class="linenum"> 561</span></a>      }
<a name="l562"><span class="linenum"> 562</span></a>      function <a class="function" onClick="logFunction('severity')" href="../../../_functions/severity.html" onMouseOver="funcPopup(event,'severity')">severity</a>() {
<a name="l563"><span class="linenum"> 563</span></a>          return <a class="constant" onClick="logConstant('SEVERITY_ANNOYANCE')" href="../../../_constants/SEVERITY_ANNOYANCE.html" onMouseOver="constPopup(event,'SEVERITY_ANNOYANCE')">SEVERITY_ANNOYANCE</a>;
<a name="l564"><span class="linenum"> 564</span></a>      }
<a name="l565"><span class="linenum"> 565</span></a>      function <a class="function" onClick="logFunction('description')" href="../../../_functions/description.html" onMouseOver="funcPopup(event,'description')">description</a>() {
<a name="l566"><span class="linenum"> 566</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l567"><span class="linenum"> 567</span></a>          <a class="var it27607" onMouseOver="hilite(27607)" onMouseOut="lolite()" onClick="logVariable('problemcategories')" href="../../../_variables/problemcategories.html">$problemcategories</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(&quot;
<a name="l568"><span class="linenum"> 568</span></a>              SELECT
<a name="l569"><span class="linenum"> 569</span></a>                  parent_qc.id AS parentid, parent_qc.name AS parentname, parent_qc.contextid AS parentcon,
<a name="l570"><span class="linenum"> 570</span></a>                  child_qc.id AS childid, child_qc.name AS childname, child_qc.contextid AS childcon
<a name="l571"><span class="linenum"> 571</span></a>              FROM {question_categories} child_qc
<a name="l572"><span class="linenum"> 572</span></a>                  JOIN {question_categories} parent_qc ON child_qc.parent = parent_qc.id
<a name="l573"><span class="linenum"> 573</span></a>              WHERE child_qc.contextid &lt;&gt; parent_qc.contextid&quot;);
<a name="l574"><span class="linenum"> 574</span></a>          <a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../../_variables/table.html">$table</a> = '&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th colspan=&quot;3&quot;&gt;Child category&lt;/th&gt;&lt;th colspan=&quot;3&quot;&gt;Parent category&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;' .
<a name="l575"><span class="linenum"> 575</span></a>          '&lt;th&gt;Id&lt;/th&gt;&lt;th&gt;Name&lt;/th&gt;&lt;th&gt;Context id&lt;/th&gt;' .
<a name="l576"><span class="linenum"> 576</span></a>          '&lt;th&gt;Id&lt;/th&gt;&lt;th&gt;Name&lt;/th&gt;&lt;th&gt;Context id&lt;/th&gt;' .
<a name="l577"><span class="linenum"> 577</span></a>          &quot;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;\n&quot;;
<a name="l578"><span class="linenum"> 578</span></a>          foreach (<a class="var it27607" onMouseOver="hilite(27607)" onMouseOut="lolite()" onClick="logVariable('problemcategories')" href="../../../_variables/problemcategories.html">$problemcategories</a> as <a class="var it4945" onMouseOver="hilite(4945)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a>) {
<a name="l579"><span class="linenum"> 579</span></a>              <a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../../_variables/table.html">$table</a> .= &quot;&lt;tr&gt;&lt;td&gt;<a class="var it4945" onMouseOver="hilite(4945)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a>-&gt;<a onClick="logVariable('childid')" class="var it39557" onMouseOver="hilite(39557)" onMouseOut="lolite()" href="../../../_variables/childid.html">childid</a>&lt;/td&gt;&lt;td&gt;&quot; . <a class="function" onClick="logFunction('s')" href="../../../_functions/s.html" onMouseOver="funcPopup(event,'s')">s</a>(<a class="var it4945" onMouseOver="hilite(4945)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a>-&gt;<a onClick="logVariable('childname')" class="var it39557" onMouseOver="hilite(39557)" onMouseOut="lolite()" href="../../../_variables/childname.html">childname</a>) .
<a name="l580"><span class="linenum"> 580</span></a>              &quot;&lt;/td&gt;&lt;td&gt;<a class="var it4945" onMouseOver="hilite(4945)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a>-&gt;<a onClick="logVariable('childcon')" class="var it39557" onMouseOver="hilite(39557)" onMouseOut="lolite()" href="../../../_variables/childcon.html">childcon</a>&lt;/td&gt;&lt;td&gt;<a class="var it4945" onMouseOver="hilite(4945)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a>-&gt;<a onClick="logVariable('parentid')" class="var it39557" onMouseOver="hilite(39557)" onMouseOut="lolite()" href="../../../_variables/parentid.html">parentid</a>&lt;/td&gt;&lt;td&gt;&quot; . <a class="function" onClick="logFunction('s')" href="../../../_functions/s.html" onMouseOver="funcPopup(event,'s')">s</a>(<a class="var it4945" onMouseOver="hilite(4945)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a>-&gt;<a onClick="logVariable('parentname')" class="var it39557" onMouseOver="hilite(39557)" onMouseOut="lolite()" href="../../../_variables/parentname.html">parentname</a>) .
<a name="l581"><span class="linenum"> 581</span></a>              &quot;&lt;/td&gt;&lt;td&gt;<a class="var it4945" onMouseOver="hilite(4945)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../../_variables/cat.html">$cat</a>-&gt;<a onClick="logVariable('parentcon')" class="var it39557" onMouseOver="hilite(39557)" onMouseOut="lolite()" href="../../../_variables/parentcon.html">parentcon</a>&lt;/td&gt;&lt;/tr&gt;\n&quot;;
<a name="l582"><span class="linenum"> 582</span></a>          }
<a name="l583"><span class="linenum"> 583</span></a>          <a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../../_variables/table.html">$table</a> .= '&lt;/tbody&gt;&lt;/table&gt;';
<a name="l584"><span class="linenum"> 584</span></a>          return '&lt;p&gt;When one question category is the parent of another, then they ' .
<a name="l585"><span class="linenum"> 585</span></a>          'should both belong to the same context. This is not true for the following categories:&lt;/p&gt;' .
<a name="l586"><span class="linenum"> 586</span></a>          <a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../../_variables/table.html">$table</a>;
<a name="l587"><span class="linenum"> 587</span></a>      }
<a name="l588"><span class="linenum"> 588</span></a>      function <a class="function" onClick="logFunction('solution')" href="../../../_functions/solution.html" onMouseOver="funcPopup(event,'solution')">solution</a>() {
<a name="l589"><span class="linenum"> 589</span></a>          return '&lt;p&gt;An automated solution is difficult. It depends whether the ' .
<a name="l590"><span class="linenum"> 590</span></a>          'parent or child category is in the wrong pace.' .
<a name="l591"><span class="linenum"> 591</span></a>          'People in the &lt;a href=&quot;http://moodle.org/mod/forum/view.php?f=121&quot;&gt;Quiz forum&lt;/a&gt; may be able to help.&lt;/p&gt;';
<a name="l592"><span class="linenum"> 592</span></a>      }
<a name="l593"><span class="linenum"> 593</span></a>  }
<a name="l594"><span class="linenum"> 594</span></a>  
<a name="l595"><span class="linenum"> 595</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('problem_000017')" href="../../../_classes/problem_000017.html" onMouseOver="classPopup(event,'problem_000017')">problem_000017</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('problem_base')" href="../../../_classes/problem_base.html" onMouseOver="classPopup(event,'problem_base')">problem_base</a> {
<a name="l596"><span class="linenum"> 596</span></a>      function <a class="function" onClick="logFunction('title')" href="../../../_functions/title.html" onMouseOver="funcPopup(event,'title')">title</a>() {
<a name="l597"><span class="linenum"> 597</span></a>          return 'Question categories tree structure';
<a name="l598"><span class="linenum"> 598</span></a>      }
<a name="l599"><span class="linenum"> 599</span></a>      function <a class="function" onClick="logFunction('find_problems')" href="../../../_functions/find_problems.html" onMouseOver="funcPopup(event,'find_problems')">find_problems</a>() {
<a name="l600"><span class="linenum"> 600</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l601"><span class="linenum"> 601</span></a>          static <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../../_variables/answer.html">$answer</a> = null;
<a name="l602"><span class="linenum"> 602</span></a>  
<a name="l603"><span class="linenum"> 603</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../../_variables/answer.html">$answer</a>)) {
<a name="l604"><span class="linenum"> 604</span></a>              <a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../../../_variables/categories.html">$categories</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('question_categories', array(), 'id');
<a name="l605"><span class="linenum"> 605</span></a>  
<a name="l606"><span class="linenum"> 606</span></a>  <span class="comment">            // Look for missing parents.</span>
<a name="l607"><span class="linenum"> 607</span></a>              <a class="var it10196" onMouseOver="hilite(10196)" onMouseOut="lolite()" onClick="logVariable('missingparent')" href="../../../_variables/missingparent.html">$missingparent</a> = <a class="function" onClick="logFunction('tool_health_category_find_missing_parents')" href="../../../_functions/tool_health_category_find_missing_parents.html" onMouseOver="funcPopup(event,'tool_health_category_find_missing_parents')">tool_health_category_find_missing_parents</a>(<a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../../../_variables/categories.html">$categories</a>);
<a name="l608"><span class="linenum"> 608</span></a>  
<a name="l609"><span class="linenum"> 609</span></a>  <span class="comment">            // Look for loops.</span>
<a name="l610"><span class="linenum"> 610</span></a>              <a class="var it593" onMouseOver="hilite(593)" onMouseOut="lolite()" onClick="logVariable('loops')" href="../../../_variables/loops.html">$loops</a> = <a class="function" onClick="logFunction('tool_health_category_find_loops')" href="../../../_functions/tool_health_category_find_loops.html" onMouseOver="funcPopup(event,'tool_health_category_find_loops')">tool_health_category_find_loops</a>(<a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../../../_variables/categories.html">$categories</a>);
<a name="l611"><span class="linenum"> 611</span></a>  
<a name="l612"><span class="linenum"> 612</span></a>              <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../../_variables/answer.html">$answer</a> = array(<a class="var it10196" onMouseOver="hilite(10196)" onMouseOut="lolite()" onClick="logVariable('missingparent')" href="../../../_variables/missingparent.html">$missingparent</a>, <a class="var it593" onMouseOver="hilite(593)" onMouseOut="lolite()" onClick="logVariable('loops')" href="../../../_variables/loops.html">$loops</a>);
<a name="l613"><span class="linenum"> 613</span></a>          }
<a name="l614"><span class="linenum"> 614</span></a>  
<a name="l615"><span class="linenum"> 615</span></a>          return <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../../_variables/answer.html">$answer</a>;
<a name="l616"><span class="linenum"> 616</span></a>      }
<a name="l617"><span class="linenum"> 617</span></a>      function <a class="function" onClick="logFunction('exists')" href="../../../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">exists</a>() {
<a name="l618"><span class="linenum"> 618</span></a>          <a class="function" onClick="logFunction('list')" href="../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it10196" onMouseOver="hilite(10196)" onMouseOut="lolite()" onClick="logVariable('missingparent')" href="../../../_variables/missingparent.html">$missingparent</a>, <a class="var it593" onMouseOver="hilite(593)" onMouseOut="lolite()" onClick="logVariable('loops')" href="../../../_variables/loops.html">$loops</a>) = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('find_problems')" href="../../../_functions/find_problems.html" onMouseOver="funcPopup(event,'find_problems')">find_problems</a>();
<a name="l619"><span class="linenum"> 619</span></a>          return !empty(<a class="var it10196" onMouseOver="hilite(10196)" onMouseOut="lolite()" onClick="logVariable('missingparent')" href="../../../_variables/missingparent.html">$missingparent</a>) || !empty(<a class="var it593" onMouseOver="hilite(593)" onMouseOut="lolite()" onClick="logVariable('loops')" href="../../../_variables/loops.html">$loops</a>);
<a name="l620"><span class="linenum"> 620</span></a>      }
<a name="l621"><span class="linenum"> 621</span></a>      function <a class="function" onClick="logFunction('severity')" href="../../../_functions/severity.html" onMouseOver="funcPopup(event,'severity')">severity</a>() {
<a name="l622"><span class="linenum"> 622</span></a>          return <a class="constant" onClick="logConstant('SEVERITY_ANNOYANCE')" href="../../../_constants/SEVERITY_ANNOYANCE.html" onMouseOver="constPopup(event,'SEVERITY_ANNOYANCE')">SEVERITY_ANNOYANCE</a>;
<a name="l623"><span class="linenum"> 623</span></a>      }
<a name="l624"><span class="linenum"> 624</span></a>      function <a class="function" onClick="logFunction('description')" href="../../../_functions/description.html" onMouseOver="funcPopup(event,'description')">description</a>() {
<a name="l625"><span class="linenum"> 625</span></a>          <a class="function" onClick="logFunction('list')" href="../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it10196" onMouseOver="hilite(10196)" onMouseOut="lolite()" onClick="logVariable('missingparent')" href="../../../_variables/missingparent.html">$missingparent</a>, <a class="var it593" onMouseOver="hilite(593)" onMouseOut="lolite()" onClick="logVariable('loops')" href="../../../_variables/loops.html">$loops</a>) = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('find_problems')" href="../../../_functions/find_problems.html" onMouseOver="funcPopup(event,'find_problems')">find_problems</a>();
<a name="l626"><span class="linenum"> 626</span></a>  
<a name="l627"><span class="linenum"> 627</span></a>          <a class="var it507" onMouseOver="hilite(507)" onMouseOut="lolite()" onClick="logVariable('description')" href="../../../_variables/description.html">$description</a> = '&lt;p&gt;The question categories should be arranged into tree ' .
<a name="l628"><span class="linenum"> 628</span></a>                  ' structures by the question_categories.parent field. Sometimes ' .
<a name="l629"><span class="linenum"> 629</span></a>                  ' this tree structure gets messed up.&lt;/p&gt;';
<a name="l630"><span class="linenum"> 630</span></a>  
<a name="l631"><span class="linenum"> 631</span></a>          <a class="var it507" onMouseOver="hilite(507)" onMouseOut="lolite()" onClick="logVariable('description')" href="../../../_variables/description.html">$description</a> .= <a class="function" onClick="logFunction('tool_health_category_list_missing_parents')" href="../../../_functions/tool_health_category_list_missing_parents.html" onMouseOver="funcPopup(event,'tool_health_category_list_missing_parents')">tool_health_category_list_missing_parents</a>(<a class="var it10196" onMouseOver="hilite(10196)" onMouseOut="lolite()" onClick="logVariable('missingparent')" href="../../../_variables/missingparent.html">$missingparent</a>);
<a name="l632"><span class="linenum"> 632</span></a>          <a class="var it507" onMouseOver="hilite(507)" onMouseOut="lolite()" onClick="logVariable('description')" href="../../../_variables/description.html">$description</a> .= <a class="function" onClick="logFunction('tool_health_category_list_loops')" href="../../../_functions/tool_health_category_list_loops.html" onMouseOver="funcPopup(event,'tool_health_category_list_loops')">tool_health_category_list_loops</a>(<a class="var it593" onMouseOver="hilite(593)" onMouseOut="lolite()" onClick="logVariable('loops')" href="../../../_variables/loops.html">$loops</a>);
<a name="l633"><span class="linenum"> 633</span></a>  
<a name="l634"><span class="linenum"> 634</span></a>          return <a class="var it507" onMouseOver="hilite(507)" onMouseOut="lolite()" onClick="logVariable('description')" href="../../../_variables/description.html">$description</a>;
<a name="l635"><span class="linenum"> 635</span></a>      }
<a name="l636"><span class="linenum"> 636</span></a>  
<a name="l637"><span class="linenum"> 637</span></a>      <span class="comment">/**</span>
<a name="l638"><span class="linenum"> 638</span></a>  <span class="comment">     * Outputs resolutions to problems outlined in MDL-34684 with items having themselves as parent</span>
<a name="l639"><span class="linenum"> 639</span></a>  <span class="comment">     *</span>
<a name="l640"><span class="linenum"> 640</span></a>  <span class="comment">     * @link https://tracker.moodle.org/browse/MDL-34684</span>
<a name="l641"><span class="linenum"> 641</span></a>  <span class="comment">     * @return string Formatted html to be output to the browser with instructions and sql statements to run</span>
<a name="l642"><span class="linenum"> 642</span></a>  <span class="comment">     */</span>
<a name="l643"><span class="linenum"> 643</span></a>      public function <a class="function" onClick="logFunction('solution')" href="../../../_functions/solution.html" onMouseOver="funcPopup(event,'solution')">solution</a>() {
<a name="l644"><span class="linenum"> 644</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>;
<a name="l645"><span class="linenum"> 645</span></a>          <a class="function" onClick="logFunction('list')" href="../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it10196" onMouseOver="hilite(10196)" onMouseOut="lolite()" onClick="logVariable('missingparent')" href="../../../_variables/missingparent.html">$missingparent</a>, <a class="var it593" onMouseOver="hilite(593)" onMouseOut="lolite()" onClick="logVariable('loops')" href="../../../_variables/loops.html">$loops</a>) = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('find_problems')" href="../../../_functions/find_problems.html" onMouseOver="funcPopup(event,'find_problems')">find_problems</a>();
<a name="l646"><span class="linenum"> 646</span></a>  
<a name="l647"><span class="linenum"> 647</span></a>          <a class="var it27601" onMouseOver="hilite(27601)" onMouseOut="lolite()" onClick="logVariable('solution')" href="../../../_variables/solution.html">$solution</a> = '&lt;p&gt;Consider executing the following SQL queries. These fix ' .
<a name="l648"><span class="linenum"> 648</span></a>                  'the problem by moving some categories to the top level.&lt;/p&gt;';
<a name="l649"><span class="linenum"> 649</span></a>  
<a name="l650"><span class="linenum"> 650</span></a>          if (!empty(<a class="var it10196" onMouseOver="hilite(10196)" onMouseOut="lolite()" onClick="logVariable('missingparent')" href="../../../_variables/missingparent.html">$missingparent</a>)) {
<a name="l651"><span class="linenum"> 651</span></a>              <a class="var it27601" onMouseOver="hilite(27601)" onMouseOut="lolite()" onClick="logVariable('solution')" href="../../../_variables/solution.html">$solution</a> .= &quot;&lt;pre&gt;UPDATE &quot; . <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('prefix')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/prefix.html">prefix</a> . &quot;question_categories\n&quot; .
<a name="l652"><span class="linenum"> 652</span></a>                      &quot;        SET parent = 0\n&quot; .
<a name="l653"><span class="linenum"> 653</span></a>                      &quot;        WHERE id IN (&quot; . <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(',', <a class="phpfunction" onClick="logFunction('array_keys')" href="../../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it10196" onMouseOver="hilite(10196)" onMouseOut="lolite()" onClick="logVariable('missingparent')" href="../../../_variables/missingparent.html">$missingparent</a>)) . &quot;);&lt;/pre&gt;\n&quot;;
<a name="l654"><span class="linenum"> 654</span></a>          }
<a name="l655"><span class="linenum"> 655</span></a>  
<a name="l656"><span class="linenum"> 656</span></a>          if (!empty(<a class="var it593" onMouseOver="hilite(593)" onMouseOut="lolite()" onClick="logVariable('loops')" href="../../../_variables/loops.html">$loops</a>)) {
<a name="l657"><span class="linenum"> 657</span></a>              <a class="var it27601" onMouseOver="hilite(27601)" onMouseOut="lolite()" onClick="logVariable('solution')" href="../../../_variables/solution.html">$solution</a> .= &quot;&lt;pre&gt;UPDATE &quot; . <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('prefix')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/prefix.html">prefix</a> . &quot;question_categories\n&quot; .
<a name="l658"><span class="linenum"> 658</span></a>                      &quot;        SET parent = 0\n&quot; .
<a name="l659"><span class="linenum"> 659</span></a>                      &quot;        WHERE id IN (&quot; . <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(',', <a class="phpfunction" onClick="logFunction('array_keys')" href="../../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it593" onMouseOver="hilite(593)" onMouseOut="lolite()" onClick="logVariable('loops')" href="../../../_variables/loops.html">$loops</a>)) . &quot;);&lt;/pre&gt;\n&quot;;
<a name="l660"><span class="linenum"> 660</span></a>          }
<a name="l661"><span class="linenum"> 661</span></a>  
<a name="l662"><span class="linenum"> 662</span></a>          return <a class="var it27601" onMouseOver="hilite(27601)" onMouseOut="lolite()" onClick="logVariable('solution')" href="../../../_variables/solution.html">$solution</a>;
<a name="l663"><span class="linenum"> 663</span></a>      }
<a name="l664"><span class="linenum"> 664</span></a>  }
<a name="l665"><span class="linenum"> 665</span></a>  
<a name="l666"><span class="linenum"> 666</span></a>  <span class="comment">/**</span>
<a name="l667"><span class="linenum"> 667</span></a>  <span class="comment"> * Check course categories tree structure for problems.</span>
<a name="l668"><span class="linenum"> 668</span></a>  <span class="comment"> *</span>
<a name="l669"><span class="linenum"> 669</span></a>  <span class="comment"> * @copyright  2013 Marko Vidberg</span>
<a name="l670"><span class="linenum"> 670</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l671"><span class="linenum"> 671</span></a>  <span class="comment"> */</span>
<a name="l672"><span class="linenum"> 672</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('problem_000018')" href="../../../_classes/problem_000018.html" onMouseOver="classPopup(event,'problem_000018')">problem_000018</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('problem_base')" href="../../../_classes/problem_base.html" onMouseOver="classPopup(event,'problem_base')">problem_base</a> {
<a name="l673"><span class="linenum"> 673</span></a>      <span class="comment">/**</span>
<a name="l674"><span class="linenum"> 674</span></a>  <span class="comment">     * Generate title for this problem.</span>
<a name="l675"><span class="linenum"> 675</span></a>  <span class="comment">     *</span>
<a name="l676"><span class="linenum"> 676</span></a>  <span class="comment">     * @return string Title of problem.</span>
<a name="l677"><span class="linenum"> 677</span></a>  <span class="comment">     */</span>
<a name="l678"><span class="linenum"> 678</span></a>      public function <a class="function" onClick="logFunction('title')" href="../../../_functions/title.html" onMouseOver="funcPopup(event,'title')">title</a>() {
<a name="l679"><span class="linenum"> 679</span></a>          return 'Course categories tree structure';
<a name="l680"><span class="linenum"> 680</span></a>      }
<a name="l681"><span class="linenum"> 681</span></a>  
<a name="l682"><span class="linenum"> 682</span></a>      <span class="comment">/**</span>
<a name="l683"><span class="linenum"> 683</span></a>  <span class="comment">     * Search for problems in the course categories.</span>
<a name="l684"><span class="linenum"> 684</span></a>  <span class="comment">     *</span>
<a name="l685"><span class="linenum"> 685</span></a>  <span class="comment">     * @uses $DB</span>
<a name="l686"><span class="linenum"> 686</span></a>  <span class="comment">     * @return array List of categories that contain missing parents or loops.</span>
<a name="l687"><span class="linenum"> 687</span></a>  <span class="comment">     */</span>
<a name="l688"><span class="linenum"> 688</span></a>      public function <a class="function" onClick="logFunction('find_problems')" href="../../../_functions/find_problems.html" onMouseOver="funcPopup(event,'find_problems')">find_problems</a>() {
<a name="l689"><span class="linenum"> 689</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l690"><span class="linenum"> 690</span></a>          static <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../../_variables/answer.html">$answer</a> = null;
<a name="l691"><span class="linenum"> 691</span></a>  
<a name="l692"><span class="linenum"> 692</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../../_variables/answer.html">$answer</a>)) {
<a name="l693"><span class="linenum"> 693</span></a>              <a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../../../_variables/categories.html">$categories</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('course_categories', array(), 'id');
<a name="l694"><span class="linenum"> 694</span></a>  
<a name="l695"><span class="linenum"> 695</span></a>  <span class="comment">            // Look for missing parents.</span>
<a name="l696"><span class="linenum"> 696</span></a>              <a class="var it10196" onMouseOver="hilite(10196)" onMouseOut="lolite()" onClick="logVariable('missingparent')" href="../../../_variables/missingparent.html">$missingparent</a> = <a class="function" onClick="logFunction('tool_health_category_find_missing_parents')" href="../../../_functions/tool_health_category_find_missing_parents.html" onMouseOver="funcPopup(event,'tool_health_category_find_missing_parents')">tool_health_category_find_missing_parents</a>(<a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../../../_variables/categories.html">$categories</a>);
<a name="l697"><span class="linenum"> 697</span></a>  
<a name="l698"><span class="linenum"> 698</span></a>  <span class="comment">            // Look for loops.</span>
<a name="l699"><span class="linenum"> 699</span></a>              <a class="var it593" onMouseOver="hilite(593)" onMouseOut="lolite()" onClick="logVariable('loops')" href="../../../_variables/loops.html">$loops</a> = <a class="function" onClick="logFunction('tool_health_category_find_loops')" href="../../../_functions/tool_health_category_find_loops.html" onMouseOver="funcPopup(event,'tool_health_category_find_loops')">tool_health_category_find_loops</a>(<a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../../../_variables/categories.html">$categories</a>);
<a name="l700"><span class="linenum"> 700</span></a>  
<a name="l701"><span class="linenum"> 701</span></a>              <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../../_variables/answer.html">$answer</a> = array(<a class="var it10196" onMouseOver="hilite(10196)" onMouseOut="lolite()" onClick="logVariable('missingparent')" href="../../../_variables/missingparent.html">$missingparent</a>, <a class="var it593" onMouseOver="hilite(593)" onMouseOut="lolite()" onClick="logVariable('loops')" href="../../../_variables/loops.html">$loops</a>);
<a name="l702"><span class="linenum"> 702</span></a>          }
<a name="l703"><span class="linenum"> 703</span></a>  
<a name="l704"><span class="linenum"> 704</span></a>          return <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../../_variables/answer.html">$answer</a>;
<a name="l705"><span class="linenum"> 705</span></a>      }
<a name="l706"><span class="linenum"> 706</span></a>  
<a name="l707"><span class="linenum"> 707</span></a>      <span class="comment">/**</span>
<a name="l708"><span class="linenum"> 708</span></a>  <span class="comment">     * Check if the problem exists.</span>
<a name="l709"><span class="linenum"> 709</span></a>  <span class="comment">     *</span>
<a name="l710"><span class="linenum"> 710</span></a>  <span class="comment">     * @return boolean True if either missing parents or loops found</span>
<a name="l711"><span class="linenum"> 711</span></a>  <span class="comment">     */</span>
<a name="l712"><span class="linenum"> 712</span></a>      public function <a class="function" onClick="logFunction('exists')" href="../../../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">exists</a>() {
<a name="l713"><span class="linenum"> 713</span></a>          <a class="function" onClick="logFunction('list')" href="../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it10196" onMouseOver="hilite(10196)" onMouseOut="lolite()" onClick="logVariable('missingparent')" href="../../../_variables/missingparent.html">$missingparent</a>, <a class="var it593" onMouseOver="hilite(593)" onMouseOut="lolite()" onClick="logVariable('loops')" href="../../../_variables/loops.html">$loops</a>) = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('find_problems')" href="../../../_functions/find_problems.html" onMouseOver="funcPopup(event,'find_problems')">find_problems</a>();
<a name="l714"><span class="linenum"> 714</span></a>          return !empty(<a class="var it10196" onMouseOver="hilite(10196)" onMouseOut="lolite()" onClick="logVariable('missingparent')" href="../../../_variables/missingparent.html">$missingparent</a>) || !empty(<a class="var it593" onMouseOver="hilite(593)" onMouseOut="lolite()" onClick="logVariable('loops')" href="../../../_variables/loops.html">$loops</a>);
<a name="l715"><span class="linenum"> 715</span></a>      }
<a name="l716"><span class="linenum"> 716</span></a>  
<a name="l717"><span class="linenum"> 717</span></a>      <span class="comment">/**</span>
<a name="l718"><span class="linenum"> 718</span></a>  <span class="comment">     * Set problem severity.</span>
<a name="l719"><span class="linenum"> 719</span></a>  <span class="comment">     *</span>
<a name="l720"><span class="linenum"> 720</span></a>  <span class="comment">     * @return constant Problem severity.</span>
<a name="l721"><span class="linenum"> 721</span></a>  <span class="comment">     */</span>
<a name="l722"><span class="linenum"> 722</span></a>      public function <a class="function" onClick="logFunction('severity')" href="../../../_functions/severity.html" onMouseOver="funcPopup(event,'severity')">severity</a>() {
<a name="l723"><span class="linenum"> 723</span></a>          return <a class="constant" onClick="logConstant('SEVERITY_SIGNIFICANT')" href="../../../_constants/SEVERITY_SIGNIFICANT.html" onMouseOver="constPopup(event,'SEVERITY_SIGNIFICANT')">SEVERITY_SIGNIFICANT</a>;
<a name="l724"><span class="linenum"> 724</span></a>      }
<a name="l725"><span class="linenum"> 725</span></a>  
<a name="l726"><span class="linenum"> 726</span></a>      <span class="comment">/**</span>
<a name="l727"><span class="linenum"> 727</span></a>  <span class="comment">     * Generate problem description.</span>
<a name="l728"><span class="linenum"> 728</span></a>  <span class="comment">     *</span>
<a name="l729"><span class="linenum"> 729</span></a>  <span class="comment">     * @return string HTML containing details of the problem.</span>
<a name="l730"><span class="linenum"> 730</span></a>  <span class="comment">     */</span>
<a name="l731"><span class="linenum"> 731</span></a>      public function <a class="function" onClick="logFunction('description')" href="../../../_functions/description.html" onMouseOver="funcPopup(event,'description')">description</a>() {
<a name="l732"><span class="linenum"> 732</span></a>          <a class="function" onClick="logFunction('list')" href="../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it10196" onMouseOver="hilite(10196)" onMouseOut="lolite()" onClick="logVariable('missingparent')" href="../../../_variables/missingparent.html">$missingparent</a>, <a class="var it593" onMouseOver="hilite(593)" onMouseOut="lolite()" onClick="logVariable('loops')" href="../../../_variables/loops.html">$loops</a>) = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('find_problems')" href="../../../_functions/find_problems.html" onMouseOver="funcPopup(event,'find_problems')">find_problems</a>();
<a name="l733"><span class="linenum"> 733</span></a>  
<a name="l734"><span class="linenum"> 734</span></a>          <a class="var it507" onMouseOver="hilite(507)" onMouseOut="lolite()" onClick="logVariable('description')" href="../../../_variables/description.html">$description</a> = '&lt;p&gt;The course categories should be arranged into tree ' .
<a name="l735"><span class="linenum"> 735</span></a>                  ' structures by the course_categories.parent field. Sometimes ' .
<a name="l736"><span class="linenum"> 736</span></a>                  ' this tree structure gets messed up.&lt;/p&gt;';
<a name="l737"><span class="linenum"> 737</span></a>  
<a name="l738"><span class="linenum"> 738</span></a>          <a class="var it507" onMouseOver="hilite(507)" onMouseOut="lolite()" onClick="logVariable('description')" href="../../../_variables/description.html">$description</a> .= <a class="function" onClick="logFunction('tool_health_category_list_missing_parents')" href="../../../_functions/tool_health_category_list_missing_parents.html" onMouseOver="funcPopup(event,'tool_health_category_list_missing_parents')">tool_health_category_list_missing_parents</a>(<a class="var it10196" onMouseOver="hilite(10196)" onMouseOut="lolite()" onClick="logVariable('missingparent')" href="../../../_variables/missingparent.html">$missingparent</a>);
<a name="l739"><span class="linenum"> 739</span></a>          <a class="var it507" onMouseOver="hilite(507)" onMouseOut="lolite()" onClick="logVariable('description')" href="../../../_variables/description.html">$description</a> .= <a class="function" onClick="logFunction('tool_health_category_list_loops')" href="../../../_functions/tool_health_category_list_loops.html" onMouseOver="funcPopup(event,'tool_health_category_list_loops')">tool_health_category_list_loops</a>(<a class="var it593" onMouseOver="hilite(593)" onMouseOut="lolite()" onClick="logVariable('loops')" href="../../../_variables/loops.html">$loops</a>);
<a name="l740"><span class="linenum"> 740</span></a>  
<a name="l741"><span class="linenum"> 741</span></a>          return <a class="var it507" onMouseOver="hilite(507)" onMouseOut="lolite()" onClick="logVariable('description')" href="../../../_variables/description.html">$description</a>;
<a name="l742"><span class="linenum"> 742</span></a>      }
<a name="l743"><span class="linenum"> 743</span></a>  
<a name="l744"><span class="linenum"> 744</span></a>      <span class="comment">/**</span>
<a name="l745"><span class="linenum"> 745</span></a>  <span class="comment">     * Generate solution text.</span>
<a name="l746"><span class="linenum"> 746</span></a>  <span class="comment">     *</span>
<a name="l747"><span class="linenum"> 747</span></a>  <span class="comment">     * @uses $CFG</span>
<a name="l748"><span class="linenum"> 748</span></a>  <span class="comment">     * @return string HTML containing the suggested solution.</span>
<a name="l749"><span class="linenum"> 749</span></a>  <span class="comment">     */</span>
<a name="l750"><span class="linenum"> 750</span></a>      public function <a class="function" onClick="logFunction('solution')" href="../../../_functions/solution.html" onMouseOver="funcPopup(event,'solution')">solution</a>() {
<a name="l751"><span class="linenum"> 751</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>;
<a name="l752"><span class="linenum"> 752</span></a>          <a class="function" onClick="logFunction('list')" href="../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it10196" onMouseOver="hilite(10196)" onMouseOut="lolite()" onClick="logVariable('missingparent')" href="../../../_variables/missingparent.html">$missingparent</a>, <a class="var it593" onMouseOver="hilite(593)" onMouseOut="lolite()" onClick="logVariable('loops')" href="../../../_variables/loops.html">$loops</a>) = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('find_problems')" href="../../../_functions/find_problems.html" onMouseOver="funcPopup(event,'find_problems')">find_problems</a>();
<a name="l753"><span class="linenum"> 753</span></a>  
<a name="l754"><span class="linenum"> 754</span></a>          <a class="var it27601" onMouseOver="hilite(27601)" onMouseOut="lolite()" onClick="logVariable('solution')" href="../../../_variables/solution.html">$solution</a> = '&lt;p&gt;Consider executing the following SQL queries. These fix ' .
<a name="l755"><span class="linenum"> 755</span></a>                  'the problem by moving some categories to the top level.&lt;/p&gt;';
<a name="l756"><span class="linenum"> 756</span></a>  
<a name="l757"><span class="linenum"> 757</span></a>          if (!empty(<a class="var it10196" onMouseOver="hilite(10196)" onMouseOut="lolite()" onClick="logVariable('missingparent')" href="../../../_variables/missingparent.html">$missingparent</a>)) {
<a name="l758"><span class="linenum"> 758</span></a>              <a class="var it27601" onMouseOver="hilite(27601)" onMouseOut="lolite()" onClick="logVariable('solution')" href="../../../_variables/solution.html">$solution</a> .= &quot;&lt;pre&gt;UPDATE &quot; . <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('prefix')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/prefix.html">prefix</a> . &quot;course_categories\n&quot; .
<a name="l759"><span class="linenum"> 759</span></a>                      &quot;        SET parent = 0, depth = 1, path = <a class="function" onClick="logFunction('CONCAT')" href="../../../_functions/concat.html" onMouseOver="funcPopup(event,'concat')">CONCAT</a>('/', id)\n&quot; .
<a name="l760"><span class="linenum"> 760</span></a>                      &quot;        WHERE id IN (&quot; . <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(',', <a class="phpfunction" onClick="logFunction('array_keys')" href="../../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it10196" onMouseOver="hilite(10196)" onMouseOut="lolite()" onClick="logVariable('missingparent')" href="../../../_variables/missingparent.html">$missingparent</a>)) . &quot;);&lt;/pre&gt;\n&quot;;
<a name="l761"><span class="linenum"> 761</span></a>          }
<a name="l762"><span class="linenum"> 762</span></a>  
<a name="l763"><span class="linenum"> 763</span></a>          if (!empty(<a class="var it593" onMouseOver="hilite(593)" onMouseOut="lolite()" onClick="logVariable('loops')" href="../../../_variables/loops.html">$loops</a>)) {
<a name="l764"><span class="linenum"> 764</span></a>              <a class="var it27601" onMouseOver="hilite(27601)" onMouseOut="lolite()" onClick="logVariable('solution')" href="../../../_variables/solution.html">$solution</a> .= &quot;&lt;pre&gt;UPDATE &quot; . <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('prefix')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/prefix.html">prefix</a> . &quot;course_categories\n&quot; .
<a name="l765"><span class="linenum"> 765</span></a>                      &quot;        SET parent = 0, depth = 1, path = <a class="function" onClick="logFunction('CONCAT')" href="../../../_functions/concat.html" onMouseOver="funcPopup(event,'concat')">CONCAT</a>('/', id)\n&quot; .
<a name="l766"><span class="linenum"> 766</span></a>                      &quot;        WHERE id IN (&quot; . <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(',', <a class="phpfunction" onClick="logFunction('array_keys')" href="../../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it593" onMouseOver="hilite(593)" onMouseOut="lolite()" onClick="logVariable('loops')" href="../../../_variables/loops.html">$loops</a>)) . &quot;);&lt;/pre&gt;\n&quot;;
<a name="l767"><span class="linenum"> 767</span></a>          }
<a name="l768"><span class="linenum"> 768</span></a>  
<a name="l769"><span class="linenum"> 769</span></a>          return <a class="var it27601" onMouseOver="hilite(27601)" onMouseOut="lolite()" onClick="logVariable('solution')" href="../../../_variables/solution.html">$solution</a>;
<a name="l770"><span class="linenum"> 770</span></a>      }
<a name="l771"><span class="linenum"> 771</span></a>  }
<a name="l772"><span class="linenum"> 772</span></a>  
<a name="l773"><span class="linenum"> 773</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('problem_00000x')" href="../../../_classes/problem_00000x.html" onMouseOver="classPopup(event,'problem_00000x')">problem_00000x</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('problem_base')" href="../../../_classes/problem_base.html" onMouseOver="classPopup(event,'problem_base')">problem_base</a> {
<a name="l774"><span class="linenum"> 774</span></a>      function <a class="function" onClick="logFunction('title')" href="../../../_functions/title.html" onMouseOver="funcPopup(event,'title')">title</a>() {
<a name="l775"><span class="linenum"> 775</span></a>          return '';
<a name="l776"><span class="linenum"> 776</span></a>      }
<a name="l777"><span class="linenum"> 777</span></a>      function <a class="function" onClick="logFunction('exists')" href="../../../_functions/exists.html" onMouseOver="funcPopup(event,'exists')">exists</a>() {
<a name="l778"><span class="linenum"> 778</span></a>          return false;
<a name="l779"><span class="linenum"> 779</span></a>      }
<a name="l780"><span class="linenum"> 780</span></a>      function <a class="function" onClick="logFunction('severity')" href="../../../_functions/severity.html" onMouseOver="funcPopup(event,'severity')">severity</a>() {
<a name="l781"><span class="linenum"> 781</span></a>          return <a class="constant" onClick="logConstant('SEVERITY_SIGNIFICANT')" href="../../../_constants/SEVERITY_SIGNIFICANT.html" onMouseOver="constPopup(event,'SEVERITY_SIGNIFICANT')">SEVERITY_SIGNIFICANT</a>;
<a name="l782"><span class="linenum"> 782</span></a>      }
<a name="l783"><span class="linenum"> 783</span></a>      function <a class="function" onClick="logFunction('description')" href="../../../_functions/description.html" onMouseOver="funcPopup(event,'description')">description</a>() {
<a name="l784"><span class="linenum"> 784</span></a>          return '';
<a name="l785"><span class="linenum"> 785</span></a>      }
<a name="l786"><span class="linenum"> 786</span></a>      function <a class="function" onClick="logFunction('solution')" href="../../../_functions/solution.html" onMouseOver="funcPopup(event,'solution')">solution</a>() {
<a name="l787"><span class="linenum"> 787</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>;
<a name="l788"><span class="linenum"> 788</span></a>          return '';
<a name="l789"><span class="linenum"> 789</span></a>      }
<a name="l790"><span class="linenum"> 790</span></a>  }
<a name="l791"><span class="linenum"> 791</span></a>  
<a name="l792"><span class="linenum"> 792</span></a>  <span class="comment">/*</span>
<a name="l793"><span class="linenum"> 793</span></a>  <span class="comment"></span>
<a name="l794"><span class="linenum"> 794</span></a>  <span class="comment">TODO:</span>
<a name="l795"><span class="linenum"> 795</span></a>  <span class="comment"></span>
<a name="l796"><span class="linenum"> 796</span></a>  <span class="comment">    session.save_path -- it doesn't really matter because we are already IN a session, right?</span>
<a name="l797"><span class="linenum"> 797</span></a>  <span class="comment">    detect unsupported characters in $CFG-&gt;wwwroot - see bug Bug #6091 - relative vs absolute path during backup/restore process</span>
<a name="l798"><span class="linenum"> 798</span></a>  <span class="comment"></span>
<a name="l799"><span class="linenum"> 799</span></a>  <span class="comment">*/</span>
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'characters': ['characters', '', [['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',500]], 11],
'instance': ['instance', 'Retrieve sole instance of the registry. ', [['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29],['lib/classes','useragent.php',101],['backup/cc','validator.php',35],['lib/portfolio','exporter.php',251],['lib/tests','update_deployer_test.php',69],['lib/tests','string_manager_standard_test.php',124],['lib','modinfolib.php',373],['','mdeploy.php',96],['cache','disabledlib.php',171],['cache','disabledlib.php',296],['admin/tool/installaddon/classes','validator.php',85],['cache/classes','config.php',87],['course/format','lib.php',156],['lib','accesslib.php',6184],['lib','accesslib.php',6436],['lib','accesslib.php',6614],['lib','accesslib.php',6868],['lib','accesslib.php',7129],['lib','accesslib.php',7341],['cache','locallib.php',52],['lib/htmlpurifier','HTMLPurifier.php',251],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['cache/classes','helper.php',76],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['lib/classes','plugin_manager.php',83],['lib','filterlib.php',81],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/classes/update','deployer.php',54],['admin/tool/installaddon/classes','pluginfo_client.php',37],['admin/tool/installaddon/classes','installer.php',40],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443]], 3942],
'get_records_sql': ['get_records_sql', 'Get a number of records as an array of objects using a SQL statement. ', [['lib/dml','pgsql_native_moodle_database.php',732],['lib/dml','oci_native_moodle_database.php',1102],['lib/dml','sqlsrv_native_moodle_database.php',823],['lib/dml','mssql_native_moodle_database.php',741],['lib/dml','mysqli_native_moodle_database.php',1049],['lib/dml/tests','dml_test.php',5424],['lib/dml','pdo_moodle_database.php',308]], 678],
'title': ['title', '', [['admin/tool/health','index.php',142],['admin/tool/health','index.php',157],['admin/tool/health','index.php',181],['admin/tool/health','index.php',205],['admin/tool/health','index.php',226],['admin/tool/health','index.php',245],['admin/tool/health','index.php',264],['admin/tool/health','index.php',310],['admin/tool/health','index.php',331],['admin/tool/health','index.php',417],['admin/tool/health','index.php',441],['admin/tool/health','index.php',478],['admin/tool/health','index.php',503],['admin/tool/health','index.php',551],['admin/tool/health','index.php',596],['admin/tool/health','index.php',673],['admin/tool/health','index.php',774],['lib','navigationlib.php',486]], 9],
'tool_health_category_find_loops': ['tool_health_category_find_loops', 'Given a list of categories, this function searches for ones that have loops to previous parent categories. ', [['admin/tool/health','locallib.php',66]], 3],
'sql_position': ['sql_position', 'Returns the SQL for returning searching one string for the location of another. ', [['lib/dml','oci_native_moodle_database.php',1670],['lib/dml','sqlsrv_native_moodle_database.php',1304],['lib/dml','moodle_database.php',2114],['lib/dml','mssql_native_moodle_database.php',1238]], 3],
'get_records': ['get_records', 'Get a number of records as an array of objects where all the given conditions met. ', [['lib/dml','moodle_database.php',1236],['lib','coursecatlib.php',654],['question','category_class.php',63]], 860],
'concat': ['concat', 'concat ', [['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',985],['lib/adodb','adodb.inc.php',2470],['lib/adodb/drivers','adodb-pdo_mysql.inc.php',44],['lib/adodb/drivers','adodb-pdo.inc.php',178],['lib/adodb/drivers','adodb-mysqli.inc.php',455],['lib/adodb/drivers','adodb-mssql.inc.php',668],['lib/adodb/drivers','adodb-mssqlnative.inc.php',514],['lib/adodb/drivers','adodb-mysql.inc.php',430],['lib/adodb/drivers','adodb-fbsql.inc.php',54]], 962],
'exists': ['exists', 'Checks whether or not the variable exists. ', [['lib/htmlpurifier/HTMLPurifier','Context.php',73],['lib/horde/framework/Horde','Variables.php',101],['admin/tool/health','index.php',139],['admin/tool/health','index.php',160],['admin/tool/health','index.php',184],['admin/tool/health','index.php',208],['admin/tool/health','index.php',229],['admin/tool/health','index.php',248],['admin/tool/health','index.php',267],['admin/tool/health','index.php',313],['admin/tool/health','index.php',334],['admin/tool/health','index.php',420],['admin/tool/health','index.php',444],['admin/tool/health','index.php',481],['admin/tool/health','index.php',506],['admin/tool/health','index.php',554],['admin/tool/health','index.php',617],['admin/tool/health','index.php',707],['admin/tool/health','index.php',777],['lib/horde/framework/Horde/Imap/Client/Data','Fetch.php',468],['admin/tool/uploadcourse/classes','course.php',252]], 56],
'find_problems': ['find_problems', '', [['admin/tool/health','index.php',599],['admin/tool/health','index.php',682]], 6],
'tool_health_category_list_loops': ['tool_health_category_list_loops', 'Generates a list of categories with loops. ', [['admin/tool/health','locallib.php',108]], 3],
'require': ['require', '', [['lib/yuilib/3.17.2/timers','timers-debug.js',27],['lib/yuilib/3.17.2/timers','timers.js',27]], 454],
'heading': ['heading', 'Get the heading for this page. ', [['grade/report/singleview/classes/local/screen','grade.php',283],['grade/report/singleview/classes/local/screen','user.php',281],['lib','outputrenderers.php',2957],['lib','outputrenderers.php',4080],['lib','outputrenderers.php',4254],['grade/report/singleview/classes/local/screen','screen.php',197]], 763],
'footer': ['footer', 'Returns the footer ', [['mod/lesson','renderer.php',78],['lib/tcpdf','tcpdf.php',3464],['lib','outputrenderers.php',1021],['lib','outputrenderers.php',4143],['lib','outputrenderers.php',4248]], 780],
'tag': ['tag', 'Outputs a tag with attributes and contents ', [['lib','outputcomponents.php',1063],['lib/zend/Zend/Service','Technorati.php',228]], 1254],
's': ['s', 'Count of attempts selected by $this->whichattempts ', [['mod/quiz/report/statistics/classes','calculated.php',91],['lib','weblib.php',84]], 988],
'record_exists_select': ['record_exists_select', 'Test whether any records exists in a table which match a particular WHERE clause. ', [['lib/dml','moodle_database.php',1781]], 35],
'record_exists_sql': ['record_exists_sql', 'Test whether a SQL SELECT statement returns any records. ', [['lib/dml','moodle_database.php',1797]], 47],
'get_site': ['get_site', 'Returns $course object of the top-level site. ', [['lib','datalib.php',547]], 76],
'severity': ['severity', '', [['admin/tool/health','index.php',145],['admin/tool/health','index.php',168],['admin/tool/health','index.php',191],['admin/tool/health','index.php',213],['admin/tool/health','index.php',232],['admin/tool/health','index.php',251],['admin/tool/health','index.php',295],['admin/tool/health','index.php',317],['admin/tool/health','index.php',343],['admin/tool/health','index.php',424],['admin/tool/health','index.php',457],['admin/tool/health','index.php',488],['admin/tool/health','index.php',514],['admin/tool/health','index.php',562],['admin/tool/health','index.php',621],['admin/tool/health','index.php',717],['admin/tool/health','index.php',780]], 2],
'health_find_problems': ['health_find_problems', '', [['admin/tool/health','index.php',60]], 1],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 1891],
'get_real_size': ['get_real_size', 'Converts numbers like 10M into bytes. ', [['lib','setuplib.php',1253]], 25],
'description': ['description', '', [['mod/quiz/accessrule/numattempts','rule.php',49],['backup/converter/imscc11','lib.php',68],['grade/report/singleview/classes/local/screen','grade.php',82],['backup/converter/imscc11','backuplib.php',45],['backup/converter/moodle1','lib.php',685],['admin/tool/health','index.php',148],['admin/tool/health','index.php',171],['admin/tool/health','index.php',194],['admin/tool/health','index.php',216],['admin/tool/health','index.php',235],['admin/tool/health','index.php',254],['admin/tool/health','index.php',298],['admin/tool/health','index.php',320],['admin/tool/health','index.php',350],['admin/tool/health','index.php',427],['admin/tool/health','index.php',460],['admin/tool/health','index.php',491],['admin/tool/health','index.php',517],['admin/tool/health','index.php',565],['admin/tool/health','index.php',624],['admin/tool/health','index.php',726],['admin/tool/health','index.php',783],['grade/report/singleview/classes/local/screen','selectable_items.php',37],['backup/converter/imscc1','lib.php',67],['mod/quiz/accessrule/safebrowser','rule.php',57],['grade/report/singleview/classes/local/screen','user.php',63],['backup/converter','convertlib.php',192],['mod/quiz/accessrule','accessrulebase.php',156],['mod/quiz/accessrule/timelimit','rule.php',50],['mod/quiz/accessrule/openclosedate','rule.php',45],['mod/quiz/accessrule/password','rule.php',48]], 29],
'sql_concat': ['sql_concat', '', [['lib/dml','pgsql_native_moodle_database.php',1315],['lib/dml','oci_native_moodle_database.php',1550],['lib/dml','sqlsrv_native_moodle_database.php',1257],['lib/dml','sqlite3_pdo_moodle_database.php',353],['lib/dml','mssql_native_moodle_database.php',1194],['lib/dml','mysqli_native_moodle_database.php',1531],['lib/dml/tests','dml_test.php',5433],['lib/dml','pdo_moodle_database.php',536]], 73],
'require_capability': ['require_capability', 'Adds a required capability which all results will be checked against ', [['backup/util/ui','restore_ui_components.php',157],['mod/quiz','attemptlib.php',306],['mod/quiz','attemptlib.php',891],['lib','accesslib.php',764]], 628],
'tool_health_category_list_missing_parents': ['tool_health_category_list_missing_parents', 'Generates a list of categories with missing parents. ', [['admin/tool/health','locallib.php',46]], 3],
'solution': ['solution', '', [['admin/tool/health','index.php',151],['admin/tool/health','index.php',174],['admin/tool/health','index.php',198],['admin/tool/health','index.php',219],['admin/tool/health','index.php',238],['admin/tool/health','index.php',257],['admin/tool/health','index.php',304],['admin/tool/health','index.php',324],['admin/tool/health','index.php',368],['admin/tool/health','index.php',433],['admin/tool/health','index.php',469],['admin/tool/health','index.php',495],['admin/tool/health','index.php',538],['admin/tool/health','index.php',588],['admin/tool/health','index.php',637],['admin/tool/health','index.php',744],['admin/tool/health','index.php',786]], 2],
'ini_get_bool': ['ini_get_bool', 'This function makes the return value of ini_get consistent if you are setting server directives through the .htaccess file in apache. ', [['lib','setuplib.php',738]], 11],
'get_field_sql': ['get_field_sql', 'Get a single field value (first field) using a SQL statement. ', [['lib/dml','moodle_database.php',1539]], 135],
'optional_param': ['optional_param', 'Returns a particular value for the named variable, taken from POST or GET, otherwise returning a given default. ', [['lib','moodlelib.php',605]], 2167],
'health_print_solution': ['health_print_solution', '', [['admin/tool/health','index.php',116]], 1],
'reduce_memory_limit': ['reduce_memory_limit', 'Function to reduce the memory limit to a new value. Will respect the memory limit if it is lower, thus allowing settings in php.ini, apache conf or command line switches to override it ', [['lib','setuplib.php',1217]], 1],
'raise_memory_limit': ['raise_memory_limit', 'Function to raise the memory limit to a new value. Will respect the memory limit if it is higher, thus allowing settings in php.ini, apache conf or command line switches to override it. ', [['lib','setuplib.php',1139]], 56],
'require_login': ['require_login', 'This function checks that the current user is logged in and has the required privileges ', [['lib','moodlelib.php',2444]], 635],
'tool_health_category_find_missing_parents': ['tool_health_category_find_missing_parents', 'Given a list of categories, this function searches for ones that have a missing parent category. ', [['admin/tool/health','locallib.php',27]], 3],
'admin_externalpage_setup': ['admin_externalpage_setup', 'Initialise admin page - this function does require login and permission checks specified in page definition. ', [['lib','adminlib.php',6627]], 144],
'get_string': ['get_string', 'Return a core get_string() call ', [['lib/external','externallib.php',112],['lib','moodlelib.php',6538],['lib','moodlelib.php',9417],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38],['lib/classes','string_manager_install.php',95],['question/behaviour','behaviourbase.php',756]], 19235],
'is_null': ['is_null', '', [], 1992],
'ob_get_clean': ['ob_get_clean', '', [], 26],
'time': ['time', '', [], 1768],
'is_writable': ['is_writable', '', [], 76],
'max': ['max', '', [], 1096],
'is_dir': ['is_dir', '', [], 221],
'array_keys': ['array_keys', '', [], 1152],
'implode': ['implode', '', [], 1259],
'strpos': ['strpos', '', [], 1623],
'ob_start': ['ob_start', '', [], 101],
'count': ['count', '', [], 3984],
'class_exists': ['class_exists', '', [], 273],
'ini_get': ['ini_get', '', [], 142],
'define': ['define', '', [], 2170],
'header': ['header', '', [], 1294]};
CLASS_DATA={
'problem_000013': ['problem_000013', '', [['admin/tool/health','index.php',440]], 0],
'problem_000009': ['problem_000009', '', [['admin/tool/health','index.php',309]], 0],
'problem_000008': ['problem_000008', '', [['admin/tool/health','index.php',263]], 0],
'problem_000012': ['problem_000012', '', [['admin/tool/health','index.php',416]], 0],
'problem_000003': ['problem_000003', '', [['admin/tool/health','index.php',180]], 0],
'problem_000004': ['problem_000004', '', [['admin/tool/health','index.php',204]], 0],
'context_system': ['context_system', 'System context class ', [['lib','accesslib.php',6106]], 929],
'problem_000017': ['problem_000017', '', [['admin/tool/health','index.php',595]], 0],
'problem_000014': ['problem_000014', '', [['admin/tool/health','index.php',477]], 0],
'problem_000016': ['problem_000016', '', [['admin/tool/health','index.php',550]], 0],
'problem_000005': ['problem_000005', '', [['admin/tool/health','index.php',225]], 0],
'problem_000002': ['problem_000002', '', [['admin/tool/health','index.php',156]], 0],
'problem_000007': ['problem_000007', '', [['admin/tool/health','index.php',244]], 0],
'problem_000015': ['problem_000015', '', [['admin/tool/health','index.php',502]], 0],
'problem_00000x': ['problem_00000x', '', [['admin/tool/health','index.php',773]], 0],
'problem_000018': ['problem_000018', 'Check course categories tree structure for problems. ', [['admin/tool/health','index.php',666]], 0],
'problem_base': ['problem_base', '', [['admin/tool/health','index.php',138]], 16]};
CONST_DATA={
'PARAM_PLUGIN': ['PARAM_PLUGIN', '', [['lib','moodlelib.php',324]], 118],
'SEVERITY_CRITICAL': ['SEVERITY_CRITICAL', '', [['admin/tool/health','index.php',38]], 5],
'SEVERITY_SIGNIFICANT': ['SEVERITY_SIGNIFICANT', '', [['admin/tool/health','index.php',37]], 10],
'SEVERITY_ANNOYANCE': ['SEVERITY_ANNOYANCE', '', [['admin/tool/health','index.php',36]], 10],
'SEVERITY_NOTICE': ['SEVERITY_NOTICE', '', [['admin/tool/health','index.php',35]], 5]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
