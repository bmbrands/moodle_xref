<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /admin/roles/define.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='admin/roles';
filename='define.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/admin/roles/</a> -> <a href="define.php.html">define.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="define.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="define.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Lets the user edit role definitions.</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * Responds to actions:</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> *   add       - add a new role (allows import, duplicate, archetype)</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> *   export    - save xml role definition</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> *   edit      - edit the definition of a role</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> *   view      - view the definition of a role</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> *</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment"> * @package    core_role</span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment"> * @copyright  1999 onwards Martin Dougiamas (http://dougiamas.com)</span>
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> */</span>
<a name="l30"><span class="linenum">  30</span></a>  
<a name="l31"><span class="linenum">  31</span></a>  require_once(<a class="phpfunction" onClick="logFunction('dirname')" href="../../_functions/dirname.html" onMouseOver="phpfuncPopup(event,'dirname')">dirname</a>(__FILE__) . '/../../config.php');
<a name="l32"><span class="linenum">  32</span></a>  require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/adminlib.php');
<a name="l33"><span class="linenum">  33</span></a>  
<a name="l34"><span class="linenum">  34</span></a>  <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> = <a class="function" onClick="logFunction('required_param')" href="../../_functions/required_param.html" onMouseOver="funcPopup(event,'required_param')">required_param</a>('action', <a class="constant" onClick="logConstant('PARAM_ALPHA')" href="../../_constants/PARAM_ALPHA.html" onMouseOver="constPopup(event,'PARAM_ALPHA')">PARAM_ALPHA</a>);
<a name="l35"><span class="linenum">  35</span></a>  if (!<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a>, array('add', 'export', 'edit', 'reset', 'view'))) {
<a name="l36"><span class="linenum">  36</span></a>      throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('invalidaccess');
<a name="l37"><span class="linenum">  37</span></a>  }
<a name="l38"><span class="linenum">  38</span></a>  if (<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> != 'add') {
<a name="l39"><span class="linenum">  39</span></a>      <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../_variables/roleid.html">$roleid</a> = <a class="function" onClick="logFunction('required_param')" href="../../_functions/required_param.html" onMouseOver="funcPopup(event,'required_param')">required_param</a>('roleid', <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l40"><span class="linenum">  40</span></a>  } else {
<a name="l41"><span class="linenum">  41</span></a>      <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../_variables/roleid.html">$roleid</a> = 0;
<a name="l42"><span class="linenum">  42</span></a>  }
<a name="l43"><span class="linenum">  43</span></a>  <a class="var it27590" onMouseOver="hilite(27590)" onMouseOut="lolite()" onClick="logVariable('resettype')" href="../../_variables/resettype.html">$resettype</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('resettype', '', <a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>);
<a name="l44"><span class="linenum">  44</span></a>  <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('return', 'manage', <a class="constant" onClick="logConstant('PARAM_ALPHA')" href="../../_constants/PARAM_ALPHA.html" onMouseOver="constPopup(event,'PARAM_ALPHA')">PARAM_ALPHA</a>);
<a name="l45"><span class="linenum">  45</span></a>  
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment">// Get the base URL for this and related pages into a convenient variable.</span>
<a name="l47"><span class="linenum">  47</span></a>  <a class="var it1134" onMouseOver="hilite(1134)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../_variables/baseurl.html">$baseurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../admin/roles/define.php.html">/admin/roles/define.php</a>', array('action'=&gt;<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a>, 'roleid'=&gt;<a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../_variables/roleid.html">$roleid</a>));
<a name="l48"><span class="linenum">  48</span></a>  <a class="var it2589" onMouseOver="hilite(2589)" onMouseOut="lolite()" onClick="logVariable('manageurl')" href="../../_variables/manageurl.html">$manageurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../admin/roles/manage.php.html">/admin/roles/manage.php</a>');
<a name="l49"><span class="linenum">  49</span></a>  if (<a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> === 'manage') {
<a name="l50"><span class="linenum">  50</span></a>      <a class="var it1872" onMouseOver="hilite(1872)" onMouseOut="lolite()" onClick="logVariable('returnurl')" href="../../_variables/returnurl.html">$returnurl</a> = <a class="var it2589" onMouseOver="hilite(2589)" onMouseOut="lolite()" onClick="logVariable('manageurl')" href="../../_variables/manageurl.html">$manageurl</a>;
<a name="l51"><span class="linenum">  51</span></a>  } else {
<a name="l52"><span class="linenum">  52</span></a>      <a class="var it1872" onMouseOver="hilite(1872)" onMouseOut="lolite()" onClick="logVariable('returnurl')" href="../../_variables/returnurl.html">$returnurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../admin/roles/define.php.html">/admin/roles/define.php</a>', array('action'=&gt;'view', 'roleid'=&gt;<a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../_variables/roleid.html">$roleid</a>));;
<a name="l53"><span class="linenum">  53</span></a>  }
<a name="l54"><span class="linenum">  54</span></a>  
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment">// Check access permissions.</span>
<a name="l56"><span class="linenum">  56</span></a>  <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../../_variables/systemcontext.html">$systemcontext</a> = <a class="class" onClick="logClass('context_system')" href="../../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l57"><span class="linenum">  57</span></a>  <a class="function" onClick="logFunction('require_login')" href="../../_functions/require_login.html" onMouseOver="funcPopup(event,'require_login')">require_login</a>();
<a name="l58"><span class="linenum">  58</span></a>  <a class="function" onClick="logFunction('require_capability')" href="../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('moodle/role:manage', <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../../_variables/systemcontext.html">$systemcontext</a>);
<a name="l59"><span class="linenum">  59</span></a>  <a class="function" onClick="logFunction('admin_externalpage_setup')" href="../../_functions/admin_externalpage_setup.html" onMouseOver="funcPopup(event,'admin_externalpage_setup')">admin_externalpage_setup</a>('defineroles', '', array('action' =&gt; <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a>, 'roleid' =&gt; <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../_variables/roleid.html">$roleid</a>), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../admin/roles/define.php.html">/admin/roles/define.php</a>'));
<a name="l60"><span class="linenum">  60</span></a>  
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment">// Export role.</span>
<a name="l62"><span class="linenum">  62</span></a>  if (<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> === 'export') {
<a name="l63"><span class="linenum">  63</span></a>      <a class="class" onClick="logClass('core_role_preset')" href="../../_classes/core_role_preset.html" onMouseOver="classPopup(event,'core_role_preset')">core_role_preset</a>::<a class="function" onClick="logFunction('send_export_xml')" href="../../_functions/send_export_xml.html" onMouseOver="funcPopup(event,'send_export_xml')">send_export_xml</a>(<a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../_variables/roleid.html">$roleid</a>);
<a name="l64"><span class="linenum">  64</span></a>      die;
<a name="l65"><span class="linenum">  65</span></a>  }
<a name="l66"><span class="linenum">  66</span></a>  
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">// Handle the toggle advanced mode button.</span>
<a name="l68"><span class="linenum">  68</span></a>  <a class="var it27591" onMouseOver="hilite(27591)" onMouseOut="lolite()" onClick="logVariable('showadvanced')" href="../../_variables/showadvanced.html">$showadvanced</a> = <a class="function" onClick="logFunction('get_user_preferences')" href="../../_functions/get_user_preferences.html" onMouseOver="funcPopup(event,'get_user_preferences')">get_user_preferences</a>('definerole_showadvanced', false);
<a name="l69"><span class="linenum">  69</span></a>  if (<a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('toggleadvanced', false, <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>)) {
<a name="l70"><span class="linenum">  70</span></a>      <a class="var it27591" onMouseOver="hilite(27591)" onMouseOut="lolite()" onClick="logVariable('showadvanced')" href="../../_variables/showadvanced.html">$showadvanced</a> = !<a class="var it27591" onMouseOver="hilite(27591)" onMouseOut="lolite()" onClick="logVariable('showadvanced')" href="../../_variables/showadvanced.html">$showadvanced</a>;
<a name="l71"><span class="linenum">  71</span></a>      <a class="function" onClick="logFunction('set_user_preference')" href="../../_functions/set_user_preference.html" onMouseOver="funcPopup(event,'set_user_preference')">set_user_preference</a>('definerole_showadvanced', <a class="var it27591" onMouseOver="hilite(27591)" onMouseOut="lolite()" onClick="logVariable('showadvanced')" href="../../_variables/showadvanced.html">$showadvanced</a>);
<a name="l72"><span class="linenum">  72</span></a>  }
<a name="l73"><span class="linenum">  73</span></a>  
<a name="l74"><span class="linenum">  74</span></a>  <span class="comment">// Get some basic data we are going to need.</span>
<a name="l75"><span class="linenum">  75</span></a>  <a class="var it425" onMouseOver="hilite(425)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../../_variables/roles.html">$roles</a> = <a class="function" onClick="logFunction('get_all_roles')" href="../../_functions/get_all_roles.html" onMouseOver="funcPopup(event,'get_all_roles')">get_all_roles</a>();
<a name="l76"><span class="linenum">  76</span></a>  <a class="var it5777" onMouseOver="hilite(5777)" onMouseOut="lolite()" onClick="logVariable('rolenames')" href="../../_variables/rolenames.html">$rolenames</a> = <a class="function" onClick="logFunction('role_fix_names')" href="../../_functions/role_fix_names.html" onMouseOver="funcPopup(event,'role_fix_names')">role_fix_names</a>(<a class="var it425" onMouseOver="hilite(425)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../../_variables/roles.html">$roles</a>, <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../../_variables/systemcontext.html">$systemcontext</a>, <a class="constant" onClick="logConstant('ROLENAME_ORIGINAL')" href="../../_constants/ROLENAME_ORIGINAL.html" onMouseOver="constPopup(event,'ROLENAME_ORIGINAL')">ROLENAME_ORIGINAL</a>);
<a name="l77"><span class="linenum">  77</span></a>  <a class="var it27592" onMouseOver="hilite(27592)" onMouseOut="lolite()" onClick="logVariable('rolescount')" href="../../_variables/rolescount.html">$rolescount</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it425" onMouseOver="hilite(425)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../../_variables/roles.html">$roles</a>);
<a name="l78"><span class="linenum">  78</span></a>  
<a name="l79"><span class="linenum">  79</span></a>  if (<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> === 'add') {
<a name="l80"><span class="linenum">  80</span></a>      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('addinganewrole', 'core_role');
<a name="l81"><span class="linenum">  81</span></a>  } else if (<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'view') {
<a name="l82"><span class="linenum">  82</span></a>      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('viewingdefinitionofrolex', 'core_role', <a class="var it5777" onMouseOver="hilite(5777)" onMouseOut="lolite()" onClick="logVariable('rolenames')" href="../../_variables/rolenames.html">$rolenames</a>[<a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../_variables/roleid.html">$roleid</a>]-&gt;localname);
<a name="l83"><span class="linenum">  83</span></a>  } else if (<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> == 'reset') {
<a name="l84"><span class="linenum">  84</span></a>      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('resettingrole', 'core_role', <a class="var it5777" onMouseOver="hilite(5777)" onMouseOut="lolite()" onClick="logVariable('rolenames')" href="../../_variables/rolenames.html">$rolenames</a>[<a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../_variables/roleid.html">$roleid</a>]-&gt;localname);
<a name="l85"><span class="linenum">  85</span></a>  } else {
<a name="l86"><span class="linenum">  86</span></a>      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('editingrolex', 'core_role', <a class="var it5777" onMouseOver="hilite(5777)" onMouseOut="lolite()" onClick="logVariable('rolenames')" href="../../_variables/rolenames.html">$rolenames</a>[<a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../_variables/roleid.html">$roleid</a>]-&gt;localname);
<a name="l87"><span class="linenum">  87</span></a>  }
<a name="l88"><span class="linenum">  88</span></a>  
<a name="l89"><span class="linenum">  89</span></a>  <span class="comment">// Decide how to create new role.</span>
<a name="l90"><span class="linenum">  90</span></a>  if (<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> === 'add' and <a class="var it27590" onMouseOver="hilite(27590)" onMouseOut="lolite()" onClick="logVariable('resettype')" href="../../_variables/resettype.html">$resettype</a> !== 'none') {
<a name="l91"><span class="linenum">  91</span></a>      <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a> = <span class="keyword">new </span><a class="class" onClick="logClass('core_role_preset_form')" href="../../_classes/core_role_preset_form.html" onMouseOver="classPopup(event,'core_role_preset_form')">core_role_preset_form</a>(null, array('action'=&gt;'add', 'roleid'=&gt;0, 'resettype'=&gt;'0', 'return'=&gt;'manage'));
<a name="l92"><span class="linenum">  92</span></a>      if (<a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('is_cancelled')" href="../../_functions/is_cancelled.html" onMouseOver="funcPopup(event,'is_cancelled')">is_cancelled</a>()) {
<a name="l93"><span class="linenum">  93</span></a>          <a class="function" onClick="logFunction('redirect')" href="../../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it2589" onMouseOver="hilite(2589)" onMouseOut="lolite()" onClick="logVariable('manageurl')" href="../../_variables/manageurl.html">$manageurl</a>);
<a name="l94"><span class="linenum">  94</span></a>  
<a name="l95"><span class="linenum">  95</span></a>      } else if (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('get_data')" href="../../_functions/get_data.html" onMouseOver="funcPopup(event,'get_data')">get_data</a>()) {
<a name="l96"><span class="linenum">  96</span></a>          <a class="var it27590" onMouseOver="hilite(27590)" onMouseOut="lolite()" onClick="logVariable('resettype')" href="../../_variables/resettype.html">$resettype</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('resettype')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/resettype.html">resettype</a>;
<a name="l97"><span class="linenum">  97</span></a>          <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = array(
<a name="l98"><span class="linenum">  98</span></a>              'shortname'     =&gt; 1,
<a name="l99"><span class="linenum">  99</span></a>              'name'          =&gt; 1,
<a name="l100"><span class="linenum"> 100</span></a>              'description'   =&gt; 1,
<a name="l101"><span class="linenum"> 101</span></a>              'permissions'   =&gt; 1,
<a name="l102"><span class="linenum"> 102</span></a>              'archetype'     =&gt; 1,
<a name="l103"><span class="linenum"> 103</span></a>              'contextlevels' =&gt; 1,
<a name="l104"><span class="linenum"> 104</span></a>              'allowassign'   =&gt; 1,
<a name="l105"><span class="linenum"> 105</span></a>              'allowoverride' =&gt; 1,
<a name="l106"><span class="linenum"> 106</span></a>              'allowswitch'   =&gt; 1);
<a name="l107"><span class="linenum"> 107</span></a>          if (<a class="var it27591" onMouseOver="hilite(27591)" onMouseOut="lolite()" onClick="logVariable('showadvanced')" href="../../_variables/showadvanced.html">$showadvanced</a>) {
<a name="l108"><span class="linenum"> 108</span></a>              <a class="var it27593" onMouseOver="hilite(27593)" onMouseOut="lolite()" onClick="logVariable('definitiontable')" href="../../_variables/definitiontable.html">$definitiontable</a> = <span class="keyword">new </span><a class="class" onClick="logClass('core_role_define_role_table_advanced')" href="../../_classes/core_role_define_role_table_advanced.html" onMouseOver="classPopup(event,'core_role_define_role_table_advanced')">core_role_define_role_table_advanced</a>(<a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../../_variables/systemcontext.html">$systemcontext</a>, 0);
<a name="l109"><span class="linenum"> 109</span></a>          } else {
<a name="l110"><span class="linenum"> 110</span></a>              <a class="var it27593" onMouseOver="hilite(27593)" onMouseOut="lolite()" onClick="logVariable('definitiontable')" href="../../_variables/definitiontable.html">$definitiontable</a> = <span class="keyword">new </span><a class="class" onClick="logClass('core_role_define_role_table_basic')" href="../../_classes/core_role_define_role_table_basic.html" onMouseOver="classPopup(event,'core_role_define_role_table_basic')">core_role_define_role_table_basic</a>(<a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../../_variables/systemcontext.html">$systemcontext</a>, 0);
<a name="l111"><span class="linenum"> 111</span></a>          }
<a name="l112"><span class="linenum"> 112</span></a>          if (<a class="function" onClick="logFunction('is_number')" href="../../_functions/is_number.html" onMouseOver="funcPopup(event,'is_number')">is_number</a>(<a class="var it27590" onMouseOver="hilite(27590)" onMouseOut="lolite()" onClick="logVariable('resettype')" href="../../_variables/resettype.html">$resettype</a>)) {
<a name="l113"><span class="linenum"> 113</span></a>  <span class="comment">            // Duplicate the role.</span>
<a name="l114"><span class="linenum"> 114</span></a>              <a class="var it27593" onMouseOver="hilite(27593)" onMouseOut="lolite()" onClick="logVariable('definitiontable')" href="../../_variables/definitiontable.html">$definitiontable</a>-&gt;<a class="function" onClick="logFunction('force_duplicate')" href="../../_functions/force_duplicate.html" onMouseOver="funcPopup(event,'force_duplicate')">force_duplicate</a>(<a class="var it27590" onMouseOver="hilite(27590)" onMouseOut="lolite()" onClick="logVariable('resettype')" href="../../_variables/resettype.html">$resettype</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>);
<a name="l115"><span class="linenum"> 115</span></a>          } else {
<a name="l116"><span class="linenum"> 116</span></a>  <span class="comment">            // Must be an archetype.</span>
<a name="l117"><span class="linenum"> 117</span></a>              <a class="var it27593" onMouseOver="hilite(27593)" onMouseOut="lolite()" onClick="logVariable('definitiontable')" href="../../_variables/definitiontable.html">$definitiontable</a>-&gt;<a class="function" onClick="logFunction('force_archetype')" href="../../_functions/force_archetype.html" onMouseOver="funcPopup(event,'force_archetype')">force_archetype</a>(<a class="var it27590" onMouseOver="hilite(27590)" onMouseOut="lolite()" onClick="logVariable('resettype')" href="../../_variables/resettype.html">$resettype</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>);
<a name="l118"><span class="linenum"> 118</span></a>          }
<a name="l119"><span class="linenum"> 119</span></a>  
<a name="l120"><span class="linenum"> 120</span></a>          if (<a class="var it2503" onMouseOver="hilite(2503)" onMouseOut="lolite()" onClick="logVariable('xml')" href="../../_variables/xml.html">$xml</a> = <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('get_file_content')" href="../../_functions/get_file_content.html" onMouseOver="funcPopup(event,'get_file_content')">get_file_content</a>('rolepreset')) {
<a name="l121"><span class="linenum"> 121</span></a>              <a class="var it27593" onMouseOver="hilite(27593)" onMouseOut="lolite()" onClick="logVariable('definitiontable')" href="../../_variables/definitiontable.html">$definitiontable</a>-&gt;<a class="function" onClick="logFunction('force_preset')" href="../../_functions/force_preset.html" onMouseOver="funcPopup(event,'force_preset')">force_preset</a>(<a class="var it2503" onMouseOver="hilite(2503)" onMouseOut="lolite()" onClick="logVariable('xml')" href="../../_variables/xml.html">$xml</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>);
<a name="l122"><span class="linenum"> 122</span></a>          }
<a name="l123"><span class="linenum"> 123</span></a>  
<a name="l124"><span class="linenum"> 124</span></a>      } else {
<a name="l125"><span class="linenum"> 125</span></a>          echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="phpfunction" onClick="logFunction('header')" href="../../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>();
<a name="l126"><span class="linenum"> 126</span></a>          echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('heading_with_help')" href="../../_functions/heading_with_help.html" onMouseOver="funcPopup(event,'heading_with_help')">heading_with_help</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a>, 'roles', 'core_role');
<a name="l127"><span class="linenum"> 127</span></a>          <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('display')" href="../../_functions/display.html" onMouseOver="funcPopup(event,'display')">display</a>();
<a name="l128"><span class="linenum"> 128</span></a>          echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('footer')" href="../../_functions/footer.html" onMouseOver="funcPopup(event,'footer')">footer</a>();
<a name="l129"><span class="linenum"> 129</span></a>          die;
<a name="l130"><span class="linenum"> 130</span></a>      }
<a name="l131"><span class="linenum"> 131</span></a>  
<a name="l132"><span class="linenum"> 132</span></a>  } else if (<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> === 'reset' and <a class="var it27590" onMouseOver="hilite(27590)" onMouseOut="lolite()" onClick="logVariable('resettype')" href="../../_variables/resettype.html">$resettype</a> !== 'none') {
<a name="l133"><span class="linenum"> 133</span></a>      if (!<a class="var it426" onMouseOver="hilite(426)" onMouseOut="lolite()" onClick="logVariable('role')" href="../../_variables/role.html">$role</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('role', array('id'=&gt;<a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../_variables/roleid.html">$roleid</a>))) {
<a name="l134"><span class="linenum"> 134</span></a>          <a class="function" onClick="logFunction('redirect')" href="../../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it2589" onMouseOver="hilite(2589)" onMouseOut="lolite()" onClick="logVariable('manageurl')" href="../../_variables/manageurl.html">$manageurl</a>);
<a name="l135"><span class="linenum"> 135</span></a>      }
<a name="l136"><span class="linenum"> 136</span></a>      <a class="var it27590" onMouseOver="hilite(27590)" onMouseOut="lolite()" onClick="logVariable('resettype')" href="../../_variables/resettype.html">$resettype</a> = empty(<a class="var it426" onMouseOver="hilite(426)" onMouseOut="lolite()" onClick="logVariable('role')" href="../../_variables/role.html">$role</a>-&gt;<a onClick="logVariable('archetype')" class="var it39449" onMouseOver="hilite(39449)" onMouseOut="lolite()" href="../../_variables/archetype.html">archetype</a>) ? '0' : <a class="var it426" onMouseOver="hilite(426)" onMouseOut="lolite()" onClick="logVariable('role')" href="../../_variables/role.html">$role</a>-&gt;<a onClick="logVariable('archetype')" class="var it39449" onMouseOver="hilite(39449)" onMouseOut="lolite()" href="../../_variables/archetype.html">archetype</a>;
<a name="l137"><span class="linenum"> 137</span></a>      <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a> = <span class="keyword">new </span><a class="class" onClick="logClass('core_role_preset_form')" href="../../_classes/core_role_preset_form.html" onMouseOver="classPopup(event,'core_role_preset_form')">core_role_preset_form</a>(null,
<a name="l138"><span class="linenum"> 138</span></a>          array('action'=&gt;'reset', 'roleid'=&gt;<a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../_variables/roleid.html">$roleid</a>, 'resettype'=&gt;<a class="var it27590" onMouseOver="hilite(27590)" onMouseOut="lolite()" onClick="logVariable('resettype')" href="../../_variables/resettype.html">$resettype</a> , 'permissions'=&gt;1, 'archetype'=&gt;1, 'contextlevels'=&gt;1, 'return'=&gt;<a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>));
<a name="l139"><span class="linenum"> 139</span></a>      if (<a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('is_cancelled')" href="../../_functions/is_cancelled.html" onMouseOver="funcPopup(event,'is_cancelled')">is_cancelled</a>()) {
<a name="l140"><span class="linenum"> 140</span></a>          <a class="function" onClick="logFunction('redirect')" href="../../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it1872" onMouseOver="hilite(1872)" onMouseOut="lolite()" onClick="logVariable('returnurl')" href="../../_variables/returnurl.html">$returnurl</a>);
<a name="l141"><span class="linenum"> 141</span></a>  
<a name="l142"><span class="linenum"> 142</span></a>      } else if (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('get_data')" href="../../_functions/get_data.html" onMouseOver="funcPopup(event,'get_data')">get_data</a>()) {
<a name="l143"><span class="linenum"> 143</span></a>          <a class="var it27590" onMouseOver="hilite(27590)" onMouseOut="lolite()" onClick="logVariable('resettype')" href="../../_variables/resettype.html">$resettype</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('resettype')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/resettype.html">resettype</a>;
<a name="l144"><span class="linenum"> 144</span></a>          <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = array(
<a name="l145"><span class="linenum"> 145</span></a>              'shortname'     =&gt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('shortname')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/shortname.html">shortname</a>,
<a name="l146"><span class="linenum"> 146</span></a>              'name'          =&gt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('name')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>,
<a name="l147"><span class="linenum"> 147</span></a>              'description'   =&gt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('description')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/description.html">description</a>,
<a name="l148"><span class="linenum"> 148</span></a>              'permissions'   =&gt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('permissions')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/permissions.html">permissions</a>,
<a name="l149"><span class="linenum"> 149</span></a>              'archetype'     =&gt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('archetype')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/archetype.html">archetype</a>,
<a name="l150"><span class="linenum"> 150</span></a>              'contextlevels' =&gt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('contextlevels')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/contextlevels.html">contextlevels</a>,
<a name="l151"><span class="linenum"> 151</span></a>              'allowassign'   =&gt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('allowassign')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/allowassign.html">allowassign</a>,
<a name="l152"><span class="linenum"> 152</span></a>              'allowoverride' =&gt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('allowoverride')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/allowoverride.html">allowoverride</a>,
<a name="l153"><span class="linenum"> 153</span></a>              'allowswitch'   =&gt; <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('allowswitch')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/allowswitch.html">allowswitch</a>);
<a name="l154"><span class="linenum"> 154</span></a>          if (<a class="var it27591" onMouseOver="hilite(27591)" onMouseOut="lolite()" onClick="logVariable('showadvanced')" href="../../_variables/showadvanced.html">$showadvanced</a>) {
<a name="l155"><span class="linenum"> 155</span></a>              <a class="var it27593" onMouseOver="hilite(27593)" onMouseOut="lolite()" onClick="logVariable('definitiontable')" href="../../_variables/definitiontable.html">$definitiontable</a> = <span class="keyword">new </span><a class="class" onClick="logClass('core_role_define_role_table_advanced')" href="../../_classes/core_role_define_role_table_advanced.html" onMouseOver="classPopup(event,'core_role_define_role_table_advanced')">core_role_define_role_table_advanced</a>(<a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../../_variables/systemcontext.html">$systemcontext</a>, <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../_variables/roleid.html">$roleid</a>);
<a name="l156"><span class="linenum"> 156</span></a>          } else {
<a name="l157"><span class="linenum"> 157</span></a>              <a class="var it27593" onMouseOver="hilite(27593)" onMouseOut="lolite()" onClick="logVariable('definitiontable')" href="../../_variables/definitiontable.html">$definitiontable</a> = <span class="keyword">new </span><a class="class" onClick="logClass('core_role_define_role_table_basic')" href="../../_classes/core_role_define_role_table_basic.html" onMouseOver="classPopup(event,'core_role_define_role_table_basic')">core_role_define_role_table_basic</a>(<a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../../_variables/systemcontext.html">$systemcontext</a>, <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../_variables/roleid.html">$roleid</a>);
<a name="l158"><span class="linenum"> 158</span></a>          }
<a name="l159"><span class="linenum"> 159</span></a>          if (<a class="function" onClick="logFunction('is_number')" href="../../_functions/is_number.html" onMouseOver="funcPopup(event,'is_number')">is_number</a>(<a class="var it27590" onMouseOver="hilite(27590)" onMouseOut="lolite()" onClick="logVariable('resettype')" href="../../_variables/resettype.html">$resettype</a>)) {
<a name="l160"><span class="linenum"> 160</span></a>  <span class="comment">            // Duplicate the role.</span>
<a name="l161"><span class="linenum"> 161</span></a>              <a class="var it27593" onMouseOver="hilite(27593)" onMouseOut="lolite()" onClick="logVariable('definitiontable')" href="../../_variables/definitiontable.html">$definitiontable</a>-&gt;<a class="function" onClick="logFunction('force_duplicate')" href="../../_functions/force_duplicate.html" onMouseOver="funcPopup(event,'force_duplicate')">force_duplicate</a>(<a class="var it27590" onMouseOver="hilite(27590)" onMouseOut="lolite()" onClick="logVariable('resettype')" href="../../_variables/resettype.html">$resettype</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>);
<a name="l162"><span class="linenum"> 162</span></a>          } else {
<a name="l163"><span class="linenum"> 163</span></a>  <span class="comment">            // Must be an archetype.</span>
<a name="l164"><span class="linenum"> 164</span></a>              <a class="var it27593" onMouseOver="hilite(27593)" onMouseOut="lolite()" onClick="logVariable('definitiontable')" href="../../_variables/definitiontable.html">$definitiontable</a>-&gt;<a class="function" onClick="logFunction('force_archetype')" href="../../_functions/force_archetype.html" onMouseOver="funcPopup(event,'force_archetype')">force_archetype</a>(<a class="var it27590" onMouseOver="hilite(27590)" onMouseOut="lolite()" onClick="logVariable('resettype')" href="../../_variables/resettype.html">$resettype</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>);
<a name="l165"><span class="linenum"> 165</span></a>          }
<a name="l166"><span class="linenum"> 166</span></a>  
<a name="l167"><span class="linenum"> 167</span></a>          if (<a class="var it2503" onMouseOver="hilite(2503)" onMouseOut="lolite()" onClick="logVariable('xml')" href="../../_variables/xml.html">$xml</a> = <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('get_file_content')" href="../../_functions/get_file_content.html" onMouseOver="funcPopup(event,'get_file_content')">get_file_content</a>('rolepreset')) {
<a name="l168"><span class="linenum"> 168</span></a>              <a class="var it27593" onMouseOver="hilite(27593)" onMouseOut="lolite()" onClick="logVariable('definitiontable')" href="../../_variables/definitiontable.html">$definitiontable</a>-&gt;<a class="function" onClick="logFunction('force_preset')" href="../../_functions/force_preset.html" onMouseOver="funcPopup(event,'force_preset')">force_preset</a>(<a class="var it2503" onMouseOver="hilite(2503)" onMouseOut="lolite()" onClick="logVariable('xml')" href="../../_variables/xml.html">$xml</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>);
<a name="l169"><span class="linenum"> 169</span></a>          }
<a name="l170"><span class="linenum"> 170</span></a>  
<a name="l171"><span class="linenum"> 171</span></a>      } else {
<a name="l172"><span class="linenum"> 172</span></a>          echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="phpfunction" onClick="logFunction('header')" href="../../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>();
<a name="l173"><span class="linenum"> 173</span></a>          echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('heading_with_help')" href="../../_functions/heading_with_help.html" onMouseOver="funcPopup(event,'heading_with_help')">heading_with_help</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a>, 'roles', 'core_role');
<a name="l174"><span class="linenum"> 174</span></a>          <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('display')" href="../../_functions/display.html" onMouseOver="funcPopup(event,'display')">display</a>();
<a name="l175"><span class="linenum"> 175</span></a>          echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('footer')" href="../../_functions/footer.html" onMouseOver="funcPopup(event,'footer')">footer</a>();
<a name="l176"><span class="linenum"> 176</span></a>          die;
<a name="l177"><span class="linenum"> 177</span></a>      }
<a name="l178"><span class="linenum"> 178</span></a>  
<a name="l179"><span class="linenum"> 179</span></a>  } else {
<a name="l180"><span class="linenum"> 180</span></a>  <span class="comment">    // Create the table object.</span>
<a name="l181"><span class="linenum"> 181</span></a>      if (<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> === 'view') {
<a name="l182"><span class="linenum"> 182</span></a>          <a class="var it27593" onMouseOver="hilite(27593)" onMouseOut="lolite()" onClick="logVariable('definitiontable')" href="../../_variables/definitiontable.html">$definitiontable</a> = <span class="keyword">new </span><a class="class" onClick="logClass('core_role_view_role_definition_table')" href="../../_classes/core_role_view_role_definition_table.html" onMouseOver="classPopup(event,'core_role_view_role_definition_table')">core_role_view_role_definition_table</a>(<a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../../_variables/systemcontext.html">$systemcontext</a>, <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../_variables/roleid.html">$roleid</a>);
<a name="l183"><span class="linenum"> 183</span></a>      } else if (<a class="var it27591" onMouseOver="hilite(27591)" onMouseOut="lolite()" onClick="logVariable('showadvanced')" href="../../_variables/showadvanced.html">$showadvanced</a>) {
<a name="l184"><span class="linenum"> 184</span></a>          <a class="var it27593" onMouseOver="hilite(27593)" onMouseOut="lolite()" onClick="logVariable('definitiontable')" href="../../_variables/definitiontable.html">$definitiontable</a> = <span class="keyword">new </span><a class="class" onClick="logClass('core_role_define_role_table_advanced')" href="../../_classes/core_role_define_role_table_advanced.html" onMouseOver="classPopup(event,'core_role_define_role_table_advanced')">core_role_define_role_table_advanced</a>(<a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../../_variables/systemcontext.html">$systemcontext</a>, <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../_variables/roleid.html">$roleid</a>);
<a name="l185"><span class="linenum"> 185</span></a>      } else {
<a name="l186"><span class="linenum"> 186</span></a>          <a class="var it27593" onMouseOver="hilite(27593)" onMouseOut="lolite()" onClick="logVariable('definitiontable')" href="../../_variables/definitiontable.html">$definitiontable</a> = <span class="keyword">new </span><a class="class" onClick="logClass('core_role_define_role_table_basic')" href="../../_classes/core_role_define_role_table_basic.html" onMouseOver="classPopup(event,'core_role_define_role_table_basic')">core_role_define_role_table_basic</a>(<a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../../_variables/systemcontext.html">$systemcontext</a>, <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../_variables/roleid.html">$roleid</a>);
<a name="l187"><span class="linenum"> 187</span></a>      }
<a name="l188"><span class="linenum"> 188</span></a>      <a class="var it27593" onMouseOver="hilite(27593)" onMouseOut="lolite()" onClick="logVariable('definitiontable')" href="../../_variables/definitiontable.html">$definitiontable</a>-&gt;<a class="function" onClick="logFunction('read_submitted_permissions')" href="../../_functions/read_submitted_permissions.html" onMouseOver="funcPopup(event,'read_submitted_permissions')">read_submitted_permissions</a>();
<a name="l189"><span class="linenum"> 189</span></a>  }
<a name="l190"><span class="linenum"> 190</span></a>  
<a name="l191"><span class="linenum"> 191</span></a>  <span class="comment">// Handle the cancel button.</span>
<a name="l192"><span class="linenum"> 192</span></a>  if (<a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('cancel', false, <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>)) {
<a name="l193"><span class="linenum"> 193</span></a>      <a class="function" onClick="logFunction('redirect')" href="../../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it1872" onMouseOver="hilite(1872)" onMouseOut="lolite()" onClick="logVariable('returnurl')" href="../../_variables/returnurl.html">$returnurl</a>);
<a name="l194"><span class="linenum"> 194</span></a>  }
<a name="l195"><span class="linenum"> 195</span></a>  
<a name="l196"><span class="linenum"> 196</span></a>  <span class="comment">// Process submission in necessary.</span>
<a name="l197"><span class="linenum"> 197</span></a>  if (<a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('savechanges', false, <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>) &amp;&amp; <a class="function" onClick="logFunction('confirm_sesskey')" href="../../_functions/confirm_sesskey.html" onMouseOver="funcPopup(event,'confirm_sesskey')">confirm_sesskey</a>() &amp;&amp; <a class="var it27593" onMouseOver="hilite(27593)" onMouseOut="lolite()" onClick="logVariable('definitiontable')" href="../../_variables/definitiontable.html">$definitiontable</a>-&gt;<a class="function" onClick="logFunction('is_submission_valid')" href="../../_functions/is_submission_valid.html" onMouseOver="funcPopup(event,'is_submission_valid')">is_submission_valid</a>()) {
<a name="l198"><span class="linenum"> 198</span></a>      <a class="var it27593" onMouseOver="hilite(27593)" onMouseOut="lolite()" onClick="logVariable('definitiontable')" href="../../_variables/definitiontable.html">$definitiontable</a>-&gt;<a class="function" onClick="logFunction('save_changes')" href="../../_functions/save_changes.html" onMouseOver="funcPopup(event,'save_changes')">save_changes</a>();
<a name="l199"><span class="linenum"> 199</span></a>      <a class="var it27597" onMouseOver="hilite(27597)" onMouseOut="lolite()" onClick="logVariable('tableroleid')" href="../../_variables/tableroleid.html">$tableroleid</a> = <a class="var it27593" onMouseOver="hilite(27593)" onMouseOut="lolite()" onClick="logVariable('definitiontable')" href="../../_variables/definitiontable.html">$definitiontable</a>-&gt;<a class="function" onClick="logFunction('get_role_id')" href="../../_functions/get_role_id.html" onMouseOver="funcPopup(event,'get_role_id')">get_role_id</a>();
<a name="l200"><span class="linenum"> 200</span></a>  <span class="comment">    // Trigger event.</span>
<a name="l201"><span class="linenum"> 201</span></a>      <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('role_capabilities_updated')" href="../../_classes/role_capabilities_updated.html" onMouseOver="classPopup(event,'role_capabilities_updated')">role_capabilities_updated</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(
<a name="l202"><span class="linenum"> 202</span></a>          array(
<a name="l203"><span class="linenum"> 203</span></a>              'context' =&gt; <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../../_variables/systemcontext.html">$systemcontext</a>,
<a name="l204"><span class="linenum"> 204</span></a>              'objectid' =&gt; <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../_variables/roleid.html">$roleid</a>
<a name="l205"><span class="linenum"> 205</span></a>          )
<a name="l206"><span class="linenum"> 206</span></a>      );
<a name="l207"><span class="linenum"> 207</span></a>      <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('set_legacy_logdata')" href="../../_functions/set_legacy_logdata.html" onMouseOver="funcPopup(event,'set_legacy_logdata')">set_legacy_logdata</a>(array(<a class="constant" onClick="logConstant('SITEID')" href="../../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>, 'role', <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a>, 'admin/roles/define.php?action=view&amp;roleid=' . <a class="var it27597" onMouseOver="hilite(27597)" onMouseOut="lolite()" onClick="logVariable('tableroleid')" href="../../_variables/tableroleid.html">$tableroleid</a>,
<a name="l208"><span class="linenum"> 208</span></a>          <a class="var it27593" onMouseOver="hilite(27593)" onMouseOut="lolite()" onClick="logVariable('definitiontable')" href="../../_variables/definitiontable.html">$definitiontable</a>-&gt;<a class="function" onClick="logFunction('get_role_name')" href="../../_functions/get_role_name.html" onMouseOver="funcPopup(event,'get_role_name')">get_role_name</a>(), '', <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l209"><span class="linenum"> 209</span></a>      if (!empty(<a class="var it426" onMouseOver="hilite(426)" onMouseOut="lolite()" onClick="logVariable('role')" href="../../_variables/role.html">$role</a>)) {
<a name="l210"><span class="linenum"> 210</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('role', <a class="var it426" onMouseOver="hilite(426)" onMouseOut="lolite()" onClick="logVariable('role')" href="../../_variables/role.html">$role</a>);
<a name="l211"><span class="linenum"> 211</span></a>      }
<a name="l212"><span class="linenum"> 212</span></a>      <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l213"><span class="linenum"> 213</span></a>  
<a name="l214"><span class="linenum"> 214</span></a>      if (<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> === 'add') {
<a name="l215"><span class="linenum"> 215</span></a>          <a class="function" onClick="logFunction('redirect')" href="../../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../admin/roles/define.php.html">/admin/roles/define.php</a>', array('action'=&gt;'view', 'roleid'=&gt;<a class="var it27593" onMouseOver="hilite(27593)" onMouseOut="lolite()" onClick="logVariable('definitiontable')" href="../../_variables/definitiontable.html">$definitiontable</a>-&gt;<a class="function" onClick="logFunction('get_role_id')" href="../../_functions/get_role_id.html" onMouseOver="funcPopup(event,'get_role_id')">get_role_id</a>())));
<a name="l216"><span class="linenum"> 216</span></a>      } else {
<a name="l217"><span class="linenum"> 217</span></a>          <a class="function" onClick="logFunction('redirect')" href="../../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it1872" onMouseOver="hilite(1872)" onMouseOut="lolite()" onClick="logVariable('returnurl')" href="../../_variables/returnurl.html">$returnurl</a>);
<a name="l218"><span class="linenum"> 218</span></a>      }
<a name="l219"><span class="linenum"> 219</span></a>  }
<a name="l220"><span class="linenum"> 220</span></a>  
<a name="l221"><span class="linenum"> 221</span></a>  <span class="comment">// Print the page header and tabs.</span>
<a name="l222"><span class="linenum"> 222</span></a>  echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="phpfunction" onClick="logFunction('header')" href="../../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>();
<a name="l223"><span class="linenum"> 223</span></a>  
<a name="l224"><span class="linenum"> 224</span></a>  <a class="var it622" onMouseOver="hilite(622)" onMouseOut="lolite()" onClick="logVariable('currenttab')" href="../../_variables/currenttab.html">$currenttab</a> = 'manage';
<a name="l225"><span class="linenum"> 225</span></a>  <span class="keyword">require</span> <a class="filename" href="../../admin/roles/managetabs.php.html" onMouseOver="reqPopup(event, 'managetabs.php', '../../admin/roles/managetabs.php')">('managetabs.php')</a>;
<a name="l226"><span class="linenum"> 226</span></a>  
<a name="l227"><span class="linenum"> 227</span></a>  echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('heading_with_help')" href="../../_functions/heading_with_help.html" onMouseOver="funcPopup(event,'heading_with_help')">heading_with_help</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('title')" href="../../_variables/title.html">$title</a>, 'roles', 'core_role');
<a name="l228"><span class="linenum"> 228</span></a>  
<a name="l229"><span class="linenum"> 229</span></a>  <span class="comment">// Work out some button labels.</span>
<a name="l230"><span class="linenum"> 230</span></a>  if (<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> === 'add') {
<a name="l231"><span class="linenum"> 231</span></a>      <a class="var it16317" onMouseOver="hilite(16317)" onMouseOut="lolite()" onClick="logVariable('submitlabel')" href="../../_variables/submitlabel.html">$submitlabel</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('createthisrole', 'core_role');
<a name="l232"><span class="linenum"> 232</span></a>  } else {
<a name="l233"><span class="linenum"> 233</span></a>      <a class="var it16317" onMouseOver="hilite(16317)" onMouseOut="lolite()" onClick="logVariable('submitlabel')" href="../../_variables/submitlabel.html">$submitlabel</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('savechanges');
<a name="l234"><span class="linenum"> 234</span></a>  }
<a name="l235"><span class="linenum"> 235</span></a>  
<a name="l236"><span class="linenum"> 236</span></a>  <span class="comment">// On the view page, show some extra controls at the top.</span>
<a name="l237"><span class="linenum"> 237</span></a>  if (<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> === 'view') {
<a name="l238"><span class="linenum"> 238</span></a>      echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('container_start')" href="../../_functions/container_start.html" onMouseOver="funcPopup(event,'container_start')">container_start</a>('buttons');
<a name="l239"><span class="linenum"> 239</span></a>      <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../admin/roles/define.php.html">/admin/roles/define.php</a>', array('action'=&gt;'edit', 'roleid'=&gt;<a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../_variables/roleid.html">$roleid</a>, 'return'=&gt;'define'));
<a name="l240"><span class="linenum"> 240</span></a>      echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('single_button')" href="../../_functions/single_button.html" onMouseOver="funcPopup(event,'single_button')">single_button</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>), <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('edit'));
<a name="l241"><span class="linenum"> 241</span></a>      <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../admin/roles/define.php.html">/admin/roles/define.php</a>', array('action'=&gt;'reset', 'roleid'=&gt;<a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../_variables/roleid.html">$roleid</a>, 'return'=&gt;'define'));
<a name="l242"><span class="linenum"> 242</span></a>      echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('single_button')" href="../../_functions/single_button.html" onMouseOver="funcPopup(event,'single_button')">single_button</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>), <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('resetrole', 'core_role'));
<a name="l243"><span class="linenum"> 243</span></a>      <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../admin/roles/define.php.html">/admin/roles/define.php</a>', array('action'=&gt;'export', 'roleid'=&gt;<a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../_variables/roleid.html">$roleid</a>));
<a name="l244"><span class="linenum"> 244</span></a>      echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('single_button')" href="../../_functions/single_button.html" onMouseOver="funcPopup(event,'single_button')">single_button</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>), <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('export', 'core_role'));
<a name="l245"><span class="linenum"> 245</span></a>      echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('single_button')" href="../../_functions/single_button.html" onMouseOver="funcPopup(event,'single_button')">single_button</a>(<a class="var it2589" onMouseOver="hilite(2589)" onMouseOut="lolite()" onClick="logVariable('manageurl')" href="../../_variables/manageurl.html">$manageurl</a>, <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('listallroles', 'core_role'));
<a name="l246"><span class="linenum"> 246</span></a>      echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('container_end')" href="../../_functions/container_end.html" onMouseOver="funcPopup(event,'container_end')">container_end</a>();
<a name="l247"><span class="linenum"> 247</span></a>  }
<a name="l248"><span class="linenum"> 248</span></a>  
<a name="l249"><span class="linenum"> 249</span></a>  <span class="comment">// Start the form.</span>
<a name="l250"><span class="linenum"> 250</span></a>  echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('box_start')" href="../../_functions/box_start.html" onMouseOver="funcPopup(event,'box_start')">box_start</a>('generalbox');
<a name="l251"><span class="linenum"> 251</span></a>  if (<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> === 'view') {
<a name="l252"><span class="linenum"> 252</span></a>      echo '&lt;div class=&quot;mform&quot;&gt;';
<a name="l253"><span class="linenum"> 253</span></a>  } else {
<a name="l254"><span class="linenum"> 254</span></a>      ?&gt;
<a name="l255"><span class="linenum"> 255</span></a>  &lt;form id=&quot;rolesform&quot; class=&quot;mform&quot; action=&quot;&lt;?php <a class="function" onClick="logFunction('p')" href="../../_functions/p.html" onMouseOver="funcPopup(event,'p')">p</a>(<a class="var it1134" onMouseOver="hilite(1134)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../_variables/baseurl.html">$baseurl</a>-&gt;<a class="function" onClick="logFunction('out')" href="../../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(false)); ?&gt;&quot; method=&quot;post&quot;&gt;&lt;div&gt;
<a name="l256"><span class="linenum"> 256</span></a>  &lt;input type=&quot;hidden&quot; name=&quot;sesskey&quot; value=&quot;&lt;?php <a class="function" onClick="logFunction('p')" href="../../_functions/p.html" onMouseOver="funcPopup(event,'p')">p</a>(<a class="function" onClick="logFunction('sesskey')" href="../../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>()) ?&gt;&quot; /&gt;
<a name="l257"><span class="linenum"> 257</span></a>  &lt;input type=&quot;hidden&quot; name=&quot;return&quot; value=&quot;&lt;?php <a class="function" onClick="logFunction('p')" href="../../_functions/p.html" onMouseOver="funcPopup(event,'p')">p</a>(<a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>); ?&gt;&quot; /&gt;
<a name="l258"><span class="linenum"> 258</span></a>  &lt;input type=&quot;hidden&quot; name=&quot;resettype&quot; value=&quot;none&quot; /&gt;
<a name="l259"><span class="linenum"> 259</span></a>  &lt;div class=&quot;submit buttons&quot;&gt;
<a name="l260"><span class="linenum"> 260</span></a>      &lt;input type=&quot;submit&quot; name=&quot;savechanges&quot; value=&quot;&lt;?php <a class="function" onClick="logFunction('p')" href="../../_functions/p.html" onMouseOver="funcPopup(event,'p')">p</a>(<a class="var it16317" onMouseOver="hilite(16317)" onMouseOut="lolite()" onClick="logVariable('submitlabel')" href="../../_variables/submitlabel.html">$submitlabel</a>); ?&gt;&quot; /&gt;
<a name="l261"><span class="linenum"> 261</span></a>      &lt;input type=&quot;submit&quot; name=&quot;cancel&quot; value=&quot;&lt;?php <a class="function" onClick="logFunction('print_string')" href="../../_functions/print_string.html" onMouseOver="funcPopup(event,'print_string')">print_string</a>('cancel'); ?&gt;&quot; /&gt;
<a name="l262"><span class="linenum"> 262</span></a>  &lt;/div&gt;
<a name="l263"><span class="linenum"> 263</span></a>      &lt;?php
<a name="l264"><span class="linenum"> 264</span></a>  }
<a name="l265"><span class="linenum"> 265</span></a>  
<a name="l266"><span class="linenum"> 266</span></a>  <span class="comment">// Print the form controls.</span>
<a name="l267"><span class="linenum"> 267</span></a>  <a class="var it27593" onMouseOver="hilite(27593)" onMouseOut="lolite()" onClick="logVariable('definitiontable')" href="../../_variables/definitiontable.html">$definitiontable</a>-&gt;<a class="function" onClick="logFunction('display')" href="../../_functions/display.html" onMouseOver="funcPopup(event,'display')">display</a>();
<a name="l268"><span class="linenum"> 268</span></a>  
<a name="l269"><span class="linenum"> 269</span></a>  <span class="comment">// Close the stuff we left open above.</span>
<a name="l270"><span class="linenum"> 270</span></a>  if (<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../../_variables/action.html">$action</a> === 'view') {
<a name="l271"><span class="linenum"> 271</span></a>      echo '&lt;/div&gt;';
<a name="l272"><span class="linenum"> 272</span></a>  } else {
<a name="l273"><span class="linenum"> 273</span></a>      ?&gt;
<a name="l274"><span class="linenum"> 274</span></a>  &lt;div class=&quot;submit buttons&quot;&gt;
<a name="l275"><span class="linenum"> 275</span></a>      &lt;input type=&quot;submit&quot; name=&quot;savechanges&quot; value=&quot;&lt;?php <a class="function" onClick="logFunction('p')" href="../../_functions/p.html" onMouseOver="funcPopup(event,'p')">p</a>(<a class="var it16317" onMouseOver="hilite(16317)" onMouseOut="lolite()" onClick="logVariable('submitlabel')" href="../../_variables/submitlabel.html">$submitlabel</a>); ?&gt;&quot; /&gt;
<a name="l276"><span class="linenum"> 276</span></a>      &lt;input type=&quot;submit&quot; name=&quot;cancel&quot; value=&quot;&lt;?php <a class="function" onClick="logFunction('print_string')" href="../../_functions/print_string.html" onMouseOver="funcPopup(event,'print_string')">print_string</a>('cancel'); ?&gt;&quot; /&gt;
<a name="l277"><span class="linenum"> 277</span></a>  &lt;/div&gt;
<a name="l278"><span class="linenum"> 278</span></a>  &lt;/div&gt;&lt;/form&gt;
<a name="l279"><span class="linenum"> 279</span></a>  &lt;?php
<a name="l280"><span class="linenum"> 280</span></a>  }
<a name="l281"><span class="linenum"> 281</span></a>  echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('box_end')" href="../../_functions/box_end.html" onMouseOver="funcPopup(event,'box_end')">box_end</a>();
<a name="l282"><span class="linenum"> 282</span></a>  
<a name="l283"><span class="linenum"> 283</span></a>  <span class="comment">// Print a link back to the all roles list.</span>
<a name="l284"><span class="linenum"> 284</span></a>  echo '&lt;div class=&quot;backlink&quot;&gt;';
<a name="l285"><span class="linenum"> 285</span></a>  echo '&lt;p&gt;&lt;a href=&quot;' . <a class="function" onClick="logFunction('s')" href="../../_functions/s.html" onMouseOver="funcPopup(event,'s')">s</a>(<a class="var it2589" onMouseOver="hilite(2589)" onMouseOut="lolite()" onClick="logVariable('manageurl')" href="../../_variables/manageurl.html">$manageurl</a>-&gt;<a class="function" onClick="logFunction('out')" href="../../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(false)) . '&quot;&gt;' . <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('backtoallroles', 'core_role') . '&lt;/a&gt;&lt;/p&gt;';
<a name="l286"><span class="linenum"> 286</span></a>  echo '&lt;/div&gt;';
<a name="l287"><span class="linenum"> 287</span></a>  
<a name="l288"><span class="linenum"> 288</span></a>  echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('footer')" href="../../_functions/footer.html" onMouseOver="funcPopup(event,'footer')">footer</a>();
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'get_all_roles': ['get_all_roles', 'Gets all of the roles this course can contain. ', [['enrol','locallib.php',573],['lib','accesslib.php',3203]], 47],
'save_changes': ['save_changes', 'Override this method to save the settings to the database. The default implementation will probably be sufficient for most simple cases. ', [['filter','local_settings_form.php',68],['admin/roles/classes','capability_table_with_risks.php',118],['admin/roles/classes','view_role_definition_table.php',34],['admin/roles/classes','define_role_table_advanced.php',415]], 4],
'trigger': ['trigger', '', [['lib/evalmath','evalmath.class.php',438],['lib/classes/event','base.php',682]], 778],
'get_role_id': ['get_role_id', 'Gets the role id from it\'s shortname. ', [['lib/tests/behat','behat_data_generators.php',571],['admin/roles/classes','define_role_table_advanced.php',403]], 2],
'is_submission_valid': ['is_submission_valid', '', [['admin/roles/classes','define_role_table_advanced.php',170]], 1],
'box_start': ['box_start', 'Outputs the opening section of a box. ', [['lib','outputrenderers.php',2987]], 351],
'force_duplicate': ['force_duplicate', 'Call this after the table has been initialised, this resets everything to that role. ', [['admin/roles/classes','define_role_table_advanced.php',174]], 2],
'box_end': ['box_end', 'Outputs the closing section of a box. ', [['lib','outputrenderers.php',3002]], 351],
'force_archetype': ['force_archetype', 'Change the role definition to match given archetype. ', [['admin/roles/classes','define_role_table_advanced.php',277]], 2],
'send_export_xml': ['send_export_xml', 'Send role export xml file to browser. ', [['admin/roles/classes','preset.php',36]], 1],
'container_start': ['container_start', 'Outputs the opening section of a container. ', [['lib','outputrenderers.php',3023]], 113],
'print_string': ['print_string', 'Prints out a translated string. ', [['lib','moodlelib.php',6680]], 458],
'is_cancelled': ['is_cancelled', '', [['mod/feedback/item/captcha','lib.php',72],['backup/util/ui','base_moodleform.class.php',330],['lib','formslib.php',567],['mod/feedback/item/multichoice','lib.php',83],['mod/feedback/item/textfield','lib.php',85],['mod/feedback/item/multichoicerated','lib.php',88],['mod/feedback/item/label','lib.php',95],['mod/feedback/item/textarea','lib.php',88],['mod/feedback/item/numeric','lib.php',101],['mod/feedback/item/info','lib.php',72],['mod/feedback/item','feedback_item_class.php',33],['mod/feedback/item','feedback_item_class.php',147]], 160],
'require_login': ['require_login', 'This function checks that the current user is logged in and has the required privileges ', [['lib','moodlelib.php',2444]], 635],
'container_end': ['container_end', 'Outputs the closing section of a container. ', [['lib','outputrenderers.php',3036]], 113],
'p': ['p', 'Alias to print_text(), operates identically. ', [['lib','html2text.php',409],['lib','weblib.php',105]], 329],
'get_string': ['get_string', 'Return a core get_string() call ', [['lib/external','externallib.php',112],['lib','moodlelib.php',6538],['lib','moodlelib.php',9417],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38],['lib/classes','string_manager_install.php',95],['question/behaviour','behaviourbase.php',756]], 19235],
'force_preset': ['force_preset', 'Change the role definition to match given preset. ', [['admin/roles/classes','define_role_table_advanced.php',337]], 2],
'heading_with_help': ['heading_with_help', 'Centered heading with attached help button (same title text) and optional icon attached. ', [['lib','outputrenderers.php',2218]], 39],
'read_submitted_permissions': ['read_submitted_permissions', 'Update $this->permissions based on submitted data, while making a list of changed capabilities in $this->changed. ', [['admin/roles/classes','capability_table_with_risks.php',90],['admin/roles/classes','define_role_table_advanced.php',90]], 3],
'get_record': ['get_record', 'Get a single database record as an object where all the given conditions met. ', [['lib/dml','moodle_database.php',1413]], 2960],
'require_capability': ['require_capability', 'Adds a required capability which all results will be checked against ', [['backup/util/ui','restore_ui_components.php',157],['mod/quiz','attemptlib.php',306],['mod/quiz','attemptlib.php',891],['lib','accesslib.php',764]], 628],
'set_legacy_logdata': ['set_legacy_logdata', 'Set the legacy data used for add_to_log(). ', [['lib/classes/event','tag_updated.php',76],['lib/classes/event','course_resources_list_viewed.php',78],['lib/classes/event','content_viewed.php',98],['lib/classes/event','course_category_updated.php',78],['lib/classes/event','webservice_login_failed.php',91],['lib/classes/event','role_capabilities_updated.php',83],['lib/classes/event','webservice_function_called.php',87],['mod/workshop/classes/event','assessable_uploaded.php',122],['mod/assign/classes/event','base.php',99],['lib/classes/event','course_updated.php',103]], 55],
'confirm_sesskey': ['confirm_sesskey', 'Check the sesskey and return true of false for whether it is valid. (You might like to imagine this function is called sesskey_is_valid().) ', [['lib','sessionlib.php',52]], 315],
'role_fix_names': ['role_fix_names', 'Prepare list of roles for display, apply aliases and localise default role names. ', [['lib','accesslib.php',4625]], 42],
'sesskey': ['sesskey', 'Makes sure that $USER->sesskey exists, if $USER itself exists. It sets a new sesskey if one does not already exist, but does not overwrite existing sesskeys. Returns the sesskey string if $USER exists, or boolean false if not. ', [['lib','sessionlib.php',28]], 631],
'footer': ['footer', 'Returns the footer ', [['mod/lesson','renderer.php',78],['lib/tcpdf','tcpdf.php',3464],['lib','outputrenderers.php',1021],['lib','outputrenderers.php',4143],['lib','outputrenderers.php',4248]], 780],
'display': ['display', '', [['mod/lesson/pagetypes','matching.php',50],['mod/lesson/pagetypes','cluster.php',39],['lib/minify/lib/Minify/Cache','XCache.php',74],['mod/quiz/report/grading','report.php',51],['question/classes/bank','view.php',451],['mod/scorm/report/objectives/classes','report.php',37],['backup/util/ui','base_ui.class.php',169],['lib/minify/lib/Minify/Cache','Memcache.php',85],['lib/minify/lib/Minify/Cache','APC.php',79],['mod/lesson/pagetypes','numerical.php',50],['mod/scorm/report/interactions/classes','report.php',31],['lib/pear/HTML','Common.php',428],['backup/util/ui','import_extensions.php',154],['mod/quiz/report/responses','report.php',51],['mod/quiz/report/statistics','report.php',51],['question/classes/bank','column_base.php',164],['backup/util/ui','restore_ui.class.php',373],['course/format/singleactivity','renderer.php',36],['mod/lesson/pagetypes','endofcluster.php',39],['user/selector','lib.php',205],['backup/util/ui','base_moodleform.class.php',365],['admin/roles/classes','capability_table_with_risks.php',132],['lib','formslib.php',913],['backup/util/ui','restore_ui_stage.class.php',355],['backup/util/ui','restore_ui_stage.class.php',497],['backup/util/ui','restore_ui_stage.class.php',1025],['backup/util/ui','restore_ui_stage.class.php',1112],['mod/lesson/pagetypes','truefalse.php',50],['repository/flickr_public','image.php',149],['mod/scorm/report/basic/classes','report.php',30],['admin/roles/classes','capability_table_base.php',71],['mod/lesson/pagetypes','endofbranch.php',39],['mod/lesson/pagetypes','essay.php',67],['mod/scorm/classes','report.php',39],['mod/quiz/report/overview','report.php',42],['backup/util/ui','backup_ui_stage.class.php',545],['backup/util/ui','backup_ui_stage.class.php',588],['lib/minify/lib/Minify/Cache','ZendPlatform.php',84],['mod/lesson/pagetypes','shortanswer.php',50],['cohort','upload_form.php',316],['mod/scorm/report/graphs/classes','report.php',36],['backup/util/ui','base_ui_stage.class.php',126],['mod/lesson/pagetypes','multichoice.php',87],['lib/minify/lib/Minify/Cache','File.php',72],['admin/roles/classes','define_role_table_advanced.php',603],['mod/lesson/pagetypes','branchtable.php',105]], 297],
'add_record_snapshot': ['add_record_snapshot', 'Add cached data that will be most probably used in event observers. ', [['lib/classes/event','base.php',757]], 262],
'set_user_preference': ['set_user_preference', 'Sets a preference for the specified user. ', [['lib','moodlelib.php',1822]], 163],
'out': ['out', 'Returns the string ', [['lib','moodlelib.php',9451],['lib','weblib.php',547],['lib','tablelib.php',1526],['lib','csslib.php',1540],['lib','csslib.php',1698],['lib','csslib.php',2078],['lib','csslib.php',2162],['lib','csslib.php',2306],['lib','csslib.php',2495],['lib','csslib.php',3240],['report/loglive/classes','table_log_ajax.php',37]], 549],
'create': ['create', 'Creates a new 2048 bit RSA key pair and returns a unique ID that can be used to reference this key pair when launching new instances. ', [['lib/zend/Zend/Service/Amazon/Ec2','Keypair.php',39],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',271],['repository/filesystem','lib.php',283],['lib/zend/Zend/Service/Amazon/Ec2','Securitygroups.php',39],['lib/google/src/Google/Service','Gmail.php',670],['lib/google/src/Google/Service','Gmail.php',827],['course','lib.php',2874],['lib/classes/event','base.php',139],['lib/google/src/Google/Service','Genomics.php',618],['lib/google/src/Google/Service','Genomics.php',717],['lib/google/src/Google/Service','Genomics.php',850],['lib/google/src/Google/Service','Genomics.php',1313],['lib','modinfolib.php',1747],['calendar','lib.php',2651],['lib/zend/Zend/Service/Amazon','Sqs.php',82],['lib','weblib.php',3048],['mod/lesson','locallib.php',1013],['mod/lesson','locallib.php',2166],['mod/lesson','locallib.php',3203],['lib/google/src/Google/Service','Fitness.php',340],['lib/google/src/Google/Service','TagManager.php',1034],['lib/google/src/Google/Service','TagManager.php',1124],['lib/google/src/Google/Service','TagManager.php',1217],['lib/google/src/Google/Service','TagManager.php',1310],['lib/google/src/Google/Service','TagManager.php',1403],['lib/google/src/Google/Service','TagManager.php',1497],['lib/google/src/Google/Service','TagManager.php',1591],['lib/google/src/Google/Service','TagManager.php',1742],['lib/simplepie/library/SimplePie','Cache.php',95],['lib/htmlpurifier/HTMLPurifier','Config.php',114],['lib/htmlpurifier/HTMLPurifier','Lexer.php',53],['lib/google/src/Google/Service','Container.php',314],['lib/adodb','adodb-xmlschema03.inc.php',170],['lib/adodb','adodb-xmlschema03.inc.php',514],['lib/adodb','adodb-xmlschema03.inc.php',779],['lib/adodb','adodb-xmlschema03.inc.php',930],['lib/adodb','adodb-xmlschema03.inc.php',1228],['repository','lib.php',206],['repository','lib.php',1960],['mod/quiz','attemptlib.php',100],['mod/quiz','attemptlib.php',555],['lib/google/src/Google/Service','Games.php',1648],['lib/google/src/Google/Service','Games.php',2012],['lib/google/src/Google/Service','MapsEngine.php',1676],['lib/google/src/Google/Service','MapsEngine.php',1976],['lib/google/src/Google/Service','MapsEngine.php',2252],['lib/google/src/Google/Service','MapsEngine.php',2329],['lib/google/src/Google/Service','MapsEngine.php',2897],['lib/adodb','adodb-xmlschema.inc.php',152],['lib/adodb','adodb-xmlschema.inc.php',473],['lib/adodb','adodb-xmlschema.inc.php',738],['lib/adodb','adodb-xmlschema.inc.php',884],['lib/adodb','adodb-xmlschema.inc.php',1129],['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',65],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',81],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',58],['lib/google/src/Google/Service','Pubsub.php',219],['lib/google/src/Google/Service','Pubsub.php',364],['lib/htmlpurifier/HTMLPurifier','ElementDef.php',135],['lib/simplepie/library/SimplePie','Registry.php',153],['lib','navigationlib.php',266],['lib/google/src/Google/Service','Dns.php',282],['lib/google/src/Google/Service','Dns.php',355],['lib','coursecatlib.php',328],['mod/quiz/classes','structure.php',65]], 3074],
'optional_param': ['optional_param', 'Returns a particular value for the named variable, taken from POST or GET, otherwise returning a given default. ', [['lib','moodlelib.php',605]], 2167],
'is_number': ['is_number', 'Return true if given value is integer or string with integer value ', [['lib','moodlelib.php',1286],['lib/phpexcel/PHPExcel/Calculation','Functions.php',440]], 65],
'admin_externalpage_setup': ['admin_externalpage_setup', 'Initialise admin page - this function does require login and permission checks specified in page definition. ', [['lib','adminlib.php',6627]], 144],
'instance': ['instance', 'Retrieve sole instance of the registry. ', [['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29],['lib/classes','useragent.php',101],['backup/cc','validator.php',35],['lib/portfolio','exporter.php',251],['lib/tests','update_deployer_test.php',69],['lib/tests','string_manager_standard_test.php',124],['lib','modinfolib.php',373],['','mdeploy.php',96],['cache','disabledlib.php',171],['cache','disabledlib.php',296],['admin/tool/installaddon/classes','validator.php',85],['cache/classes','config.php',87],['course/format','lib.php',156],['lib','accesslib.php',6184],['lib','accesslib.php',6436],['lib','accesslib.php',6614],['lib','accesslib.php',6868],['lib','accesslib.php',7129],['lib','accesslib.php',7341],['cache','locallib.php',52],['lib/htmlpurifier','HTMLPurifier.php',251],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['cache/classes','helper.php',76],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['lib/classes','plugin_manager.php',83],['lib','filterlib.php',81],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/classes/update','deployer.php',54],['admin/tool/installaddon/classes','pluginfo_client.php',37],['admin/tool/installaddon/classes','installer.php',40],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443]], 3942],
'get_data': ['get_data', '', [['mod/feedback/item/captcha','lib.php',76],['grade/grading/form/guide','edit_form.php',142],['grade/grading/form','lib.php',841],['grade/grading/form/rubric','edit_form.php',136],['mod/feedback/item/multichoicerated','multichoicerated_form.php',93],['mod/scorm','mod_form.php',514],['lib/classes/event','base.php',564],['mod/feedback','mod_form.php',163],['mod/feedback/item/multichoice','multichoice_form.php',93],['grade/export','grade_export_form.php',206],['lib/simplepie/library/SimplePie','Parser.php',263],['lib','completionlib.php',882],['lib','formslib.php',584],['mod/workshop','locallib.php',3815],['mod/glossary','mod_form.php',203],['mod/feedback/item/textfield','textfield_form.php',57],['blocks/rss_client','editfeed.php',101],['admin/tool/filetypes','edit_form.php',97],['mod/lesson','mod_form.php',383],['admin/tool/uploaduser','user_form.php',394],['admin/webservice','forms.php',299],['mod/feedback/item/numeric','numeric_form.php',60],['mod/feedback/item/multichoice','lib.php',87],['mod/choice','mod_form.php',128],['mod/feedback/item/textarea','textarea_form.php',57],['mod/forum','mod_form.php',270],['mod/feedback/item/textfield','lib.php',89],['mod/feedback/item/multichoicerated','lib.php',92],['admin/tool/uploadcourse/classes','course.php',269],['mod/feedback/item/label','lib.php',99],['mod/feedback/item/textarea','lib.php',92],['backup/util/structure','restore_path_element.class.php',118],['mod/feedback/item/numeric','lib.php',105],['mod/feedback/item/info','lib.php',76],['mod/feedback/item','feedback_item_class.php',37],['mod/feedback/item','feedback_item_class.php',149],['lib/classes/message/inbound','address_manager.php',361],['course','editsection_form.php',96],['message/tests','inbound_test.php',632]], 364],
'get_file_content': ['get_file_content', 'Get content of uploaded file. ', [['lib','formslib.php',876],['lib','odslib.class.php',828]], 13],
'get_user_preferences': ['get_user_preferences', 'Used to fetch user preference(s) ', [['lib','moodlelib.php',1969]], 177],
'get_role_name': ['get_role_name', 'Gets role name. If no such role exists this function returns null. ', [['badges/criteria','award_criteria_manual.php',41],['admin/roles/classes','define_role_table_advanced.php',399]], 3],
's': ['s', 'Count of attempts selected by $this->whichattempts ', [['mod/quiz/report/statistics/classes','calculated.php',91],['lib','weblib.php',84]], 988],
'required_param': ['required_param', 'Returns a particular value for the named variable, taken from POST or GET.  If the parameter doesn\'t exist then an error is thrown because we require this variable. ', [['lib','moodlelib.php',521]], 816],
'redirect': ['redirect', 'Redirect the browser ', [['','mdeploy.php',1474],['lib','weblib.php',2514]], 948],
'single_button': ['single_button', 'Returns a form with a single button. ', [['lib','outputrenderers.php',1735]], 298],
'count': ['count', '', [], 3984],
'in_array': ['in_array', '', [], 1173],
'dirname': ['dirname', '', [], 1071],
'header': ['header', '', [], 1294]};
CLASS_DATA={
'core_role_define_role_table_advanced': ['core_role_define_role_table_advanced', 'As well as tracking the permissions information about the role we are creating or editing, we also track the other information about the role. (This class is starting to be more and more like a formslib form in some respects.) ', [['admin/roles/classes','define_role_table_advanced.php',28]], 5],
'context_system': ['context_system', 'System context class ', [['lib','accesslib.php',6106]], 929],
'core_role_preset_form': ['core_role_preset_form', 'Role add/reset selection form. ', [['admin/roles/classes','preset_form.php',30]], 2],
'role_capabilities_updated': ['role_capabilities_updated', 'Role updated event class. ', [['lib/classes/event','role_capabilities_updated.php',30]], 3],
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',240]], 2887],
'core_role_preset': ['core_role_preset', 'XML role file manipulation class. ', [['admin/roles/classes','preset.php',27]], 6],
'core_role_define_role_table_basic': ['core_role_define_role_table_basic', '', [['admin/roles/classes','define_role_table_basic.php',27]], 3],
'moodle_exception': ['moodle_exception', 'Base Moodle Exception class ', [['lib','setuplib.php',68]], 478],
'core_role_view_role_definition_table': ['core_role_view_role_definition_table', '', [['admin/roles/classes','view_role_definition_table.php',27]], 1]};
CONST_DATA={
'ROLENAME_ORIGINAL': ['ROLENAME_ORIGINAL', '', [['lib','accesslib.php',172]], 19],
'PARAM_INT': ['PARAM_INT', '', [['lib','moodlelib.php',156]], 2948],
'PARAM_ALPHA': ['PARAM_ALPHA', '', [['lib','moodlelib.php',77]], 377],
'SITEID': ['SITEID', '', [['admin/cli','install.php',217],['','install.php',244],['lib/db','install.php',87],['lib','setup.php',748]], 612],
'PARAM_RAW': ['PARAM_RAW', '', [['lib','moodlelib.php',193]], 692],
'PARAM_BOOL': ['PARAM_BOOL', '', [['lib','moodlelib.php',108]], 502]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
