<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /admin/index.php source</title>
    <link rel="stylesheet" href="../sample.css" type="text/css">
    <link rel="stylesheet" href="../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../';
subdir='admin';
filename='index.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/admin/</a> -> <a href="index.php.html">index.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="index.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="index.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">//</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">//</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">//</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment">/**</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * Main administration script.</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> *</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @package    core</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @copyright  1999 onwards Martin Dougiamas (http://dougiamas.com)</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> */</span>
<a name="l25"><span class="linenum">  25</span></a>  
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment">// Check that config.php exists, if not then call the install script</span>
<a name="l27"><span class="linenum">  27</span></a>  if (!<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>('../config.php')) {
<a name="l28"><span class="linenum">  28</span></a>      <a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>('Location: ../install.php');
<a name="l29"><span class="linenum">  29</span></a>      die();
<a name="l30"><span class="linenum">  30</span></a>  }
<a name="l31"><span class="linenum">  31</span></a>  
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment">// Check that PHP is of a sufficient version as soon as possible</span>
<a name="l33"><span class="linenum">  33</span></a>  if (<a class="phpfunction" onClick="logFunction('version_compare')" href="../_functions/version_compare.html" onMouseOver="phpfuncPopup(event,'version_compare')">version_compare</a>(<a class="phpfunction" onClick="logFunction('phpversion')" href="../_functions/phpversion.html" onMouseOver="phpfuncPopup(event,'phpversion')">phpversion</a>(), '5.4.4') &lt; 0) {
<a name="l34"><span class="linenum">  34</span></a>      <a class="var it12755" onMouseOver="hilite(12755)" onMouseOut="lolite()" onClick="logVariable('phpversion')" href="../_variables/phpversion.html">$phpversion</a> = <a class="phpfunction" onClick="logFunction('phpversion')" href="../_functions/phpversion.html" onMouseOver="phpfuncPopup(event,'phpversion')">phpversion</a>();
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment">    // do NOT localise - lang strings would not work here and we CAN NOT move it to later place</span>
<a name="l36"><span class="linenum">  36</span></a>      echo &quot;Moodle 2.7 or later requires at least PHP 5.4.4 (currently using version <a class="var it12755" onMouseOver="hilite(12755)" onMouseOut="lolite()" onClick="logVariable('phpversion')" href="../_variables/phpversion.html">$phpversion</a>).&lt;br /&gt;&quot;;
<a name="l37"><span class="linenum">  37</span></a>      echo &quot;Please upgrade your server software or install older Moodle version.&quot;;
<a name="l38"><span class="linenum">  38</span></a>      die();
<a name="l39"><span class="linenum">  39</span></a>  }
<a name="l40"><span class="linenum">  40</span></a>  
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment">// make sure iconv is available and actually works</span>
<a name="l42"><span class="linenum">  42</span></a>  if (!<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('iconv')) {
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment">    // this should not happen, this must be very borked install</span>
<a name="l44"><span class="linenum">  44</span></a>      echo 'Moodle requires the iconv PHP extension. Please install or enable the iconv extension.';
<a name="l45"><span class="linenum">  45</span></a>      die();
<a name="l46"><span class="linenum">  46</span></a>  }
<a name="l47"><span class="linenum">  47</span></a>  
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment">// Make sure php5-json is available.</span>
<a name="l49"><span class="linenum">  49</span></a>  if (!<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('json_encode') || !<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('json_decode')) {
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment">    // This also shouldn't happen.</span>
<a name="l51"><span class="linenum">  51</span></a>      echo 'Moodle requires the json PHP extension. Please install or enable the json extension.';
<a name="l52"><span class="linenum">  52</span></a>      die();
<a name="l53"><span class="linenum">  53</span></a>  }
<a name="l54"><span class="linenum">  54</span></a>  
<a name="l55"><span class="linenum">  55</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('NO_OUTPUT_BUFFERING')" href="../_constants/NO_OUTPUT_BUFFERING.html" onMouseOver="constPopup(event,'NO_OUTPUT_BUFFERING')">NO_OUTPUT_BUFFERING</a>', true);
<a name="l56"><span class="linenum">  56</span></a>  
<a name="l57"><span class="linenum">  57</span></a>  if ((isset(<a class="var it76" onMouseOver="hilite(76)" onMouseOut="lolite()" onClick="logVariable('_GET')" href="../_variables/_GET.html">$_GET</a>['cache']) and <a class="var it76" onMouseOver="hilite(76)" onMouseOut="lolite()" onClick="logVariable('_GET')" href="../_variables/_GET.html">$_GET</a>['cache'] === '0')
<a name="l58"><span class="linenum">  58</span></a>          <a class="function" onClick="logFunction('or')" href="../_functions/or.html" onMouseOver="funcPopup(event,'or')">or</a> (isset(<a class="var it2053" onMouseOver="hilite(2053)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="../_variables/_POST.html">$_POST</a>['cache']) and <a class="var it2053" onMouseOver="hilite(2053)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="../_variables/_POST.html">$_POST</a>['cache'] === '0')
<a name="l59"><span class="linenum">  59</span></a>          <a class="function" onClick="logFunction('or')" href="../_functions/or.html" onMouseOver="funcPopup(event,'or')">or</a> (!isset(<a class="var it2053" onMouseOver="hilite(2053)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="../_variables/_POST.html">$_POST</a>['cache']) and !isset(<a class="var it76" onMouseOver="hilite(76)" onMouseOut="lolite()" onClick="logVariable('_GET')" href="../_variables/_GET.html">$_GET</a>['cache']) and empty(<a class="var it76" onMouseOver="hilite(76)" onMouseOut="lolite()" onClick="logVariable('_GET')" href="../_variables/_GET.html">$_GET</a>['sesskey']) and empty(<a class="var it2053" onMouseOver="hilite(2053)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="../_variables/_POST.html">$_POST</a>['sesskey']))) {
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment">    // Prevent caching at all cost when visiting this page directly,</span>
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment">    // we redirect to self once we known no upgrades are necessary.</span>
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment">    // Note: $_GET and $_POST are used here intentionally because our param cleaning is not loaded yet.</span>
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment">    // Note2: the sesskey is present in all block editing hacks, we can not redirect there, so enable caching.</span>
<a name="l64"><span class="linenum">  64</span></a>      <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('CACHE_DISABLE_ALL')" href="../_constants/CACHE_DISABLE_ALL.html" onMouseOver="constPopup(event,'CACHE_DISABLE_ALL')">CACHE_DISABLE_ALL</a>', true);
<a name="l65"><span class="linenum">  65</span></a>  
<a name="l66"><span class="linenum">  66</span></a>  <span class="comment">    // Force OPcache reset if used, we do not want any stale caches</span>
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">    // when detecting if upgrade necessary or when running upgrade.</span>
<a name="l68"><span class="linenum">  68</span></a>      if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('opcache_reset')) {
<a name="l69"><span class="linenum">  69</span></a>          opcache_reset();
<a name="l70"><span class="linenum">  70</span></a>      }
<a name="l71"><span class="linenum">  71</span></a>      <a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a> = 0;
<a name="l72"><span class="linenum">  72</span></a>  
<a name="l73"><span class="linenum">  73</span></a>  } else {
<a name="l74"><span class="linenum">  74</span></a>      <a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a> = 1;
<a name="l75"><span class="linenum">  75</span></a>  }
<a name="l76"><span class="linenum">  76</span></a>  
<a name="l77"><span class="linenum">  77</span></a>  <a class="function" onClick="logFunction('require')" href="../_functions/require.html" onMouseOver="funcPopup(event,'require')">require</a>('../config.php');
<a name="l78"><span class="linenum">  78</span></a>  
<a name="l79"><span class="linenum">  79</span></a>  <span class="comment">// Invalidate the cache of version.php in any circumstances to help core_component</span>
<a name="l80"><span class="linenum">  80</span></a>  <span class="comment">// detecting if the version has changed and component cache should be reset.</span>
<a name="l81"><span class="linenum">  81</span></a>  if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('opcache_invalidate')) {
<a name="l82"><span class="linenum">  82</span></a>      opcache_invalidate(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../version.php.html">/version.php</a>', true);
<a name="l83"><span class="linenum">  83</span></a>  }
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment">// Make sure the component cache gets rebuilt if necessary, any method that</span>
<a name="l85"><span class="linenum">  85</span></a>  <span class="comment">// indirectly calls the protected init() method is good here.</span>
<a name="l86"><span class="linenum">  86</span></a>  <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_core_subsystems')" href="../_functions/get_core_subsystems.html" onMouseOver="funcPopup(event,'get_core_subsystems')">get_core_subsystems</a>();
<a name="l87"><span class="linenum">  87</span></a>  
<a name="l88"><span class="linenum">  88</span></a>  require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>.'/adminlib.php');    <span class="comment">// various admin-only functions</span>
<a name="l89"><span class="linenum">  89</span></a>  require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>.'/upgradelib.php');  <span class="comment">// general upgrade/install related functions</span>
<a name="l90"><span class="linenum">  90</span></a>  
<a name="l91"><span class="linenum">  91</span></a>  <a class="var it38029" onMouseOver="hilite(38029)" onMouseOut="lolite()" onClick="logVariable('confirmupgrade')" href="../_variables/confirmupgrade.html">$confirmupgrade</a> = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('confirmupgrade', 0, <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>);
<a name="l92"><span class="linenum">  92</span></a>  <a class="var it38030" onMouseOver="hilite(38030)" onMouseOut="lolite()" onClick="logVariable('confirmrelease')" href="../_variables/confirmrelease.html">$confirmrelease</a> = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('confirmrelease', 0, <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>);
<a name="l93"><span class="linenum">  93</span></a>  <a class="var it38031" onMouseOver="hilite(38031)" onMouseOut="lolite()" onClick="logVariable('confirmplugins')" href="../_variables/confirmplugins.html">$confirmplugins</a> = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('confirmplugincheck', 0, <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>);
<a name="l94"><span class="linenum">  94</span></a>  <a class="var it11204" onMouseOver="hilite(11204)" onMouseOut="lolite()" onClick="logVariable('showallplugins')" href="../_variables/showallplugins.html">$showallplugins</a> = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('showallplugins', 0, <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>);
<a name="l95"><span class="linenum">  95</span></a>  <a class="var it38032" onMouseOver="hilite(38032)" onMouseOut="lolite()" onClick="logVariable('agreelicense')" href="../_variables/agreelicense.html">$agreelicense</a>   = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('agreelicense', 0, <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>);
<a name="l96"><span class="linenum">  96</span></a>  <a class="var it38033" onMouseOver="hilite(38033)" onMouseOut="lolite()" onClick="logVariable('fetchupdates')" href="../_variables/fetchupdates.html">$fetchupdates</a>   = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('fetchupdates', 0, <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>);
<a name="l97"><span class="linenum">  97</span></a>  <a class="var it38034" onMouseOver="hilite(38034)" onMouseOut="lolite()" onClick="logVariable('newaddonreq')" href="../_variables/newaddonreq.html">$newaddonreq</a>    = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('installaddonrequest', null, <a class="constant" onClick="logConstant('PARAM_RAW')" href="../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>);
<a name="l98"><span class="linenum">  98</span></a>  
<a name="l99"><span class="linenum">  99</span></a>  <span class="comment">// Set up PAGE.</span>
<a name="l100"><span class="linenum"> 100</span></a>  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../admin/index.php.html">/admin/index.php</a>');
<a name="l101"><span class="linenum"> 101</span></a>  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('cache', <a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>);
<a name="l102"><span class="linenum"> 102</span></a>  <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_url')" href="../_functions/set_url.html" onMouseOver="funcPopup(event,'set_url')">set_url</a>(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>);
<a name="l103"><span class="linenum"> 103</span></a>  unset(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>);
<a name="l104"><span class="linenum"> 104</span></a>  
<a name="l105"><span class="linenum"> 105</span></a>  <span class="comment">// Are we returning from an add-on installation request at moodle.org/plugins?</span>
<a name="l106"><span class="linenum"> 106</span></a>  if (<a class="var it38034" onMouseOver="hilite(38034)" onMouseOut="lolite()" onClick="logVariable('newaddonreq')" href="../_variables/newaddonreq.html">$newaddonreq</a> and !<a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a> and empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('disableonclickaddoninstall')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/disableonclickaddoninstall.html">disableonclickaddoninstall</a>)) {
<a name="l107"><span class="linenum"> 107</span></a>      <a class="var it1183" onMouseOver="hilite(1183)" onMouseOut="lolite()" onClick="logVariable('target')" href="../_variables/target.html">$target</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../admin/tool/installaddon/index.php.html">/admin/tool/installaddon/index.php</a>', array(
<a name="l108"><span class="linenum"> 108</span></a>          'installaddonrequest' =&gt; <a class="var it38034" onMouseOver="hilite(38034)" onMouseOut="lolite()" onClick="logVariable('newaddonreq')" href="../_variables/newaddonreq.html">$newaddonreq</a>,
<a name="l109"><span class="linenum"> 109</span></a>          'confirm' =&gt; 0));
<a name="l110"><span class="linenum"> 110</span></a>      if (!<a class="function" onClick="logFunction('isloggedin')" href="../_functions/isloggedin.html" onMouseOver="funcPopup(event,'isloggedin')">isloggedin</a>() or <a class="function" onClick="logFunction('isguestuser')" href="../_functions/isguestuser.html" onMouseOver="funcPopup(event,'isguestuser')">isguestuser</a>()) {
<a name="l111"><span class="linenum"> 111</span></a>  <span class="comment">        // Login and go the the add-on tool page.</span>
<a name="l112"><span class="linenum"> 112</span></a>          <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('wantsurl')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/wantsurl.html">wantsurl</a> = <a class="var it1183" onMouseOver="hilite(1183)" onMouseOut="lolite()" onClick="logVariable('target')" href="../_variables/target.html">$target</a>-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>();
<a name="l113"><span class="linenum"> 113</span></a>          <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="function" onClick="logFunction('get_login_url')" href="../_functions/get_login_url.html" onMouseOver="funcPopup(event,'get_login_url')">get_login_url</a>());
<a name="l114"><span class="linenum"> 114</span></a>      }
<a name="l115"><span class="linenum"> 115</span></a>      <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it1183" onMouseOver="hilite(1183)" onMouseOut="lolite()" onClick="logVariable('target')" href="../_variables/target.html">$target</a>);
<a name="l116"><span class="linenum"> 116</span></a>  }
<a name="l117"><span class="linenum"> 117</span></a>  
<a name="l118"><span class="linenum"> 118</span></a>  <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_pagelayout')" href="../_functions/set_pagelayout.html" onMouseOver="funcPopup(event,'set_pagelayout')">set_pagelayout</a>('admin'); <span class="comment">// Set a default pagelayout</span>
<a name="l119"><span class="linenum"> 119</span></a>  
<a name="l120"><span class="linenum"> 120</span></a>  <a class="var it38035" onMouseOver="hilite(38035)" onMouseOut="lolite()" onClick="logVariable('documentationlink')" href="../_variables/documentationlink.html">$documentationlink</a> = '&lt;a href=&quot;http://docs.moodle.org/en/Installation&quot;&gt;Installation docs&lt;/a&gt;';
<a name="l121"><span class="linenum"> 121</span></a>  
<a name="l122"><span class="linenum"> 122</span></a>  <span class="comment">// Check some PHP server settings</span>
<a name="l123"><span class="linenum"> 123</span></a>  
<a name="l124"><span class="linenum"> 124</span></a>  if (<a class="function" onClick="logFunction('ini_get_bool')" href="../_functions/ini_get_bool.html" onMouseOver="funcPopup(event,'ini_get_bool')">ini_get_bool</a>('session.auto_start')) {
<a name="l125"><span class="linenum"> 125</span></a>      <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('phpvaroff', 'debug', '', (object)array('name'=&gt;'session.auto_start', 'link'=&gt;<a class="var it38035" onMouseOver="hilite(38035)" onMouseOut="lolite()" onClick="logVariable('documentationlink')" href="../_variables/documentationlink.html">$documentationlink</a>));
<a name="l126"><span class="linenum"> 126</span></a>  }
<a name="l127"><span class="linenum"> 127</span></a>  
<a name="l128"><span class="linenum"> 128</span></a>  if (!<a class="function" onClick="logFunction('ini_get_bool')" href="../_functions/ini_get_bool.html" onMouseOver="funcPopup(event,'ini_get_bool')">ini_get_bool</a>('file_uploads')) {
<a name="l129"><span class="linenum"> 129</span></a>      <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('phpvaron', 'debug', '', (object)array('name'=&gt;'file_uploads', 'link'=&gt;<a class="var it38035" onMouseOver="hilite(38035)" onMouseOut="lolite()" onClick="logVariable('documentationlink')" href="../_variables/documentationlink.html">$documentationlink</a>));
<a name="l130"><span class="linenum"> 130</span></a>  }
<a name="l131"><span class="linenum"> 131</span></a>  
<a name="l132"><span class="linenum"> 132</span></a>  if (<a class="function" onClick="logFunction('is_float_problem')" href="../_functions/is_float_problem.html" onMouseOver="funcPopup(event,'is_float_problem')">is_float_problem</a>()) {
<a name="l133"><span class="linenum"> 133</span></a>      <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('phpfloatproblem', 'admin', '', <a class="var it38035" onMouseOver="hilite(38035)" onMouseOut="lolite()" onClick="logVariable('documentationlink')" href="../_variables/documentationlink.html">$documentationlink</a>);
<a name="l134"><span class="linenum"> 134</span></a>  }
<a name="l135"><span class="linenum"> 135</span></a>  
<a name="l136"><span class="linenum"> 136</span></a>  <span class="comment">// Set some necessary variables during set-up to avoid PHP warnings later on this page</span>
<a name="l137"><span class="linenum"> 137</span></a>  if (!isset(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('release')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/release.html">release</a>)) {
<a name="l138"><span class="linenum"> 138</span></a>      <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('release')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/release.html">release</a> = '';
<a name="l139"><span class="linenum"> 139</span></a>  }
<a name="l140"><span class="linenum"> 140</span></a>  if (!isset(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/version.html">version</a>)) {
<a name="l141"><span class="linenum"> 141</span></a>      <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/version.html">version</a> = '';
<a name="l142"><span class="linenum"> 142</span></a>  }
<a name="l143"><span class="linenum"> 143</span></a>  if (!isset(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('branch')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/branch.html">branch</a>)) {
<a name="l144"><span class="linenum"> 144</span></a>      <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('branch')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/branch.html">branch</a> = '';
<a name="l145"><span class="linenum"> 145</span></a>  }
<a name="l146"><span class="linenum"> 146</span></a>  
<a name="l147"><span class="linenum"> 147</span></a>  <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a> = null;
<a name="l148"><span class="linenum"> 148</span></a>  <a class="var it1816" onMouseOver="hilite(1816)" onMouseOut="lolite()" onClick="logVariable('release')" href="../_variables/release.html">$release</a> = null;
<a name="l149"><span class="linenum"> 149</span></a>  <a class="var it662" onMouseOver="hilite(662)" onMouseOut="lolite()" onClick="logVariable('branch')" href="../_variables/branch.html">$branch</a> = null;
<a name="l150"><span class="linenum"> 150</span></a>  <a class="function" onClick="logFunction('require')" href="../_functions/require.html" onMouseOver="funcPopup(event,'require')">require</a>(&quot;<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>/version.php&quot;);       <span class="comment">// defines $version, $release, $branch and $maturity</span>
<a name="l151"><span class="linenum"> 151</span></a>  <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('target_release')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/target_release.html">target_release</a> = <a class="var it1816" onMouseOver="hilite(1816)" onMouseOut="lolite()" onClick="logVariable('release')" href="../_variables/release.html">$release</a>;            <span class="comment">// used during installation and upgrades</span>
<a name="l152"><span class="linenum"> 152</span></a>  
<a name="l153"><span class="linenum"> 153</span></a>  if (!<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a> or !<a class="var it1816" onMouseOver="hilite(1816)" onMouseOut="lolite()" onClick="logVariable('release')" href="../_variables/release.html">$release</a>) {
<a name="l154"><span class="linenum"> 154</span></a>      <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('withoutversion', 'debug'); <span class="comment">// without version, stop</span>
<a name="l155"><span class="linenum"> 155</span></a>  }
<a name="l156"><span class="linenum"> 156</span></a>  
<a name="l157"><span class="linenum"> 157</span></a>  if (!<a class="function" onClick="logFunction('core_tables_exist')" href="../_functions/core_tables_exist.html" onMouseOver="funcPopup(event,'core_tables_exist')">core_tables_exist</a>()) {
<a name="l158"><span class="linenum"> 158</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_pagelayout')" href="../_functions/set_pagelayout.html" onMouseOver="funcPopup(event,'set_pagelayout')">set_pagelayout</a>('maintenance');
<a name="l159"><span class="linenum"> 159</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_popup_notification_allowed')" href="../_functions/set_popup_notification_allowed.html" onMouseOver="funcPopup(event,'set_popup_notification_allowed')">set_popup_notification_allowed</a>(false);
<a name="l160"><span class="linenum"> 160</span></a>  
<a name="l161"><span class="linenum"> 161</span></a>  <span class="comment">    // fake some settings</span>
<a name="l162"><span class="linenum"> 162</span></a>      <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('docroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/docroot.html">docroot</a> = 'http://docs.moodle.org';
<a name="l163"><span class="linenum"> 163</span></a>  
<a name="l164"><span class="linenum"> 164</span></a>      <a class="var it26441" onMouseOver="hilite(26441)" onMouseOut="lolite()" onClick="logVariable('strinstallation')" href="../_variables/strinstallation.html">$strinstallation</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('installation', 'install');
<a name="l165"><span class="linenum"> 165</span></a>  
<a name="l166"><span class="linenum"> 166</span></a>  <span class="comment">    // remove current session content completely</span>
<a name="l167"><span class="linenum"> 167</span></a>      \core\session\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('terminate_current')" href="../_functions/terminate_current.html" onMouseOver="funcPopup(event,'terminate_current')">terminate_current</a>();
<a name="l168"><span class="linenum"> 168</span></a>  
<a name="l169"><span class="linenum"> 169</span></a>      if (empty(<a class="var it38032" onMouseOver="hilite(38032)" onMouseOut="lolite()" onClick="logVariable('agreelicense')" href="../_variables/agreelicense.html">$agreelicense</a>)) {
<a name="l170"><span class="linenum"> 170</span></a>          <a class="var it38036" onMouseOver="hilite(38036)" onMouseOut="lolite()" onClick="logVariable('strlicense')" href="../_variables/strlicense.html">$strlicense</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('license');
<a name="l171"><span class="linenum"> 171</span></a>  
<a name="l172"><span class="linenum"> 172</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('navbar')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../_variables/navbar.html">navbar</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it38036" onMouseOver="hilite(38036)" onMouseOut="lolite()" onClick="logVariable('strlicense')" href="../_variables/strlicense.html">$strlicense</a>);
<a name="l173"><span class="linenum"> 173</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_title')" href="../_functions/set_title.html" onMouseOver="funcPopup(event,'set_title')">set_title</a>(<a class="var it26441" onMouseOver="hilite(26441)" onMouseOut="lolite()" onClick="logVariable('strinstallation')" href="../_variables/strinstallation.html">$strinstallation</a>.' - Moodle '.<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('target_release')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/target_release.html">target_release</a>);
<a name="l174"><span class="linenum"> 174</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_heading')" href="../_functions/set_heading.html" onMouseOver="funcPopup(event,'set_heading')">set_heading</a>(<a class="var it26441" onMouseOver="hilite(26441)" onMouseOut="lolite()" onClick="logVariable('strinstallation')" href="../_variables/strinstallation.html">$strinstallation</a>);
<a name="l175"><span class="linenum"> 175</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_cacheable')" href="../_functions/set_cacheable.html" onMouseOver="funcPopup(event,'set_cacheable')">set_cacheable</a>(false);
<a name="l176"><span class="linenum"> 176</span></a>  
<a name="l177"><span class="linenum"> 177</span></a>  <span class="comment">        /** @var core_admin_renderer $output */</span>
<a name="l178"><span class="linenum"> 178</span></a>          <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>('core', 'admin');
<a name="l179"><span class="linenum"> 179</span></a>          echo <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('install_licence_page')" href="../_functions/install_licence_page.html" onMouseOver="funcPopup(event,'install_licence_page')">install_licence_page</a>();
<a name="l180"><span class="linenum"> 180</span></a>          die();
<a name="l181"><span class="linenum"> 181</span></a>      }
<a name="l182"><span class="linenum"> 182</span></a>      if (empty(<a class="var it38030" onMouseOver="hilite(38030)" onMouseOut="lolite()" onClick="logVariable('confirmrelease')" href="../_variables/confirmrelease.html">$confirmrelease</a>)) {
<a name="l183"><span class="linenum"> 183</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>.'/environmentlib.php');
<a name="l184"><span class="linenum"> 184</span></a>          <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it11198" onMouseOver="hilite(11198)" onMouseOut="lolite()" onClick="logVariable('envstatus')" href="../_variables/envstatus.html">$envstatus</a>, <a class="var it11199" onMouseOver="hilite(11199)" onMouseOut="lolite()" onClick="logVariable('environment_results')" href="../_variables/environment_results.html">$environment_results</a>) = <a class="function" onClick="logFunction('check_moodle_environment')" href="../_functions/check_moodle_environment.html" onMouseOver="funcPopup(event,'check_moodle_environment')">check_moodle_environment</a>(<a class="function" onClick="logFunction('normalize_version')" href="../_functions/normalize_version.html" onMouseOver="funcPopup(event,'normalize_version')">normalize_version</a>(<a class="var it1816" onMouseOver="hilite(1816)" onMouseOut="lolite()" onClick="logVariable('release')" href="../_variables/release.html">$release</a>), <a class="constant" onClick="logConstant('ENV_SELECT_RELEASE')" href="../_constants/ENV_SELECT_RELEASE.html" onMouseOver="constPopup(event,'ENV_SELECT_RELEASE')">ENV_SELECT_RELEASE</a>);
<a name="l185"><span class="linenum"> 185</span></a>          <a class="var it38037" onMouseOver="hilite(38037)" onMouseOut="lolite()" onClick="logVariable('strcurrentrelease')" href="../_variables/strcurrentrelease.html">$strcurrentrelease</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('currentrelease');
<a name="l186"><span class="linenum"> 186</span></a>  
<a name="l187"><span class="linenum"> 187</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('navbar')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../_variables/navbar.html">navbar</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it38037" onMouseOver="hilite(38037)" onMouseOut="lolite()" onClick="logVariable('strcurrentrelease')" href="../_variables/strcurrentrelease.html">$strcurrentrelease</a>);
<a name="l188"><span class="linenum"> 188</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_title')" href="../_functions/set_title.html" onMouseOver="funcPopup(event,'set_title')">set_title</a>(<a class="var it26441" onMouseOver="hilite(26441)" onMouseOut="lolite()" onClick="logVariable('strinstallation')" href="../_variables/strinstallation.html">$strinstallation</a>);
<a name="l189"><span class="linenum"> 189</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_heading')" href="../_functions/set_heading.html" onMouseOver="funcPopup(event,'set_heading')">set_heading</a>(<a class="var it26441" onMouseOver="hilite(26441)" onMouseOut="lolite()" onClick="logVariable('strinstallation')" href="../_variables/strinstallation.html">$strinstallation</a> . ' - Moodle ' . <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('target_release')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/target_release.html">target_release</a>);
<a name="l190"><span class="linenum"> 190</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_cacheable')" href="../_functions/set_cacheable.html" onMouseOver="funcPopup(event,'set_cacheable')">set_cacheable</a>(false);
<a name="l191"><span class="linenum"> 191</span></a>  
<a name="l192"><span class="linenum"> 192</span></a>  <span class="comment">        /** @var core_admin_renderer $output */</span>
<a name="l193"><span class="linenum"> 193</span></a>          <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>('core', 'admin');
<a name="l194"><span class="linenum"> 194</span></a>          echo <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('install_environment_page')" href="../_functions/install_environment_page.html" onMouseOver="funcPopup(event,'install_environment_page')">install_environment_page</a>(<a class="var it1244" onMouseOver="hilite(1244)" onMouseOut="lolite()" onClick="logVariable('maturity')" href="../_variables/maturity.html">$maturity</a>, <a class="var it11198" onMouseOver="hilite(11198)" onMouseOut="lolite()" onClick="logVariable('envstatus')" href="../_variables/envstatus.html">$envstatus</a>, <a class="var it11199" onMouseOver="hilite(11199)" onMouseOut="lolite()" onClick="logVariable('environment_results')" href="../_variables/environment_results.html">$environment_results</a>, <a class="var it1816" onMouseOver="hilite(1816)" onMouseOut="lolite()" onClick="logVariable('release')" href="../_variables/release.html">$release</a>);
<a name="l195"><span class="linenum"> 195</span></a>          die();
<a name="l196"><span class="linenum"> 196</span></a>      }
<a name="l197"><span class="linenum"> 197</span></a>  
<a name="l198"><span class="linenum"> 198</span></a>  <span class="comment">    // check plugin dependencies</span>
<a name="l199"><span class="linenum"> 199</span></a>      <a class="var it365" onMouseOver="hilite(365)" onMouseOut="lolite()" onClick="logVariable('failed')" href="../_variables/failed.html">$failed</a> = array();
<a name="l200"><span class="linenum"> 200</span></a>      if (!<a class="class" onClick="logClass('core_plugin_manager')" href="../_classes/core_plugin_manager.html" onMouseOver="classPopup(event,'core_plugin_manager')">core_plugin_manager</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>()-&gt;<a class="function" onClick="logFunction('all_plugins_ok')" href="../_functions/all_plugins_ok.html" onMouseOver="funcPopup(event,'all_plugins_ok')">all_plugins_ok</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>, <a class="var it365" onMouseOver="hilite(365)" onMouseOut="lolite()" onClick="logVariable('failed')" href="../_variables/failed.html">$failed</a>)) {
<a name="l201"><span class="linenum"> 201</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('navbar')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../_variables/navbar.html">navbar</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('pluginscheck', 'admin'));
<a name="l202"><span class="linenum"> 202</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_title')" href="../_functions/set_title.html" onMouseOver="funcPopup(event,'set_title')">set_title</a>(<a class="var it26441" onMouseOver="hilite(26441)" onMouseOut="lolite()" onClick="logVariable('strinstallation')" href="../_variables/strinstallation.html">$strinstallation</a>);
<a name="l203"><span class="linenum"> 203</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_heading')" href="../_functions/set_heading.html" onMouseOver="funcPopup(event,'set_heading')">set_heading</a>(<a class="var it26441" onMouseOver="hilite(26441)" onMouseOut="lolite()" onClick="logVariable('strinstallation')" href="../_variables/strinstallation.html">$strinstallation</a> . ' - Moodle ' . <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('target_release')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/target_release.html">target_release</a>);
<a name="l204"><span class="linenum"> 204</span></a>  
<a name="l205"><span class="linenum"> 205</span></a>          <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>('core', 'admin');
<a name="l206"><span class="linenum"> 206</span></a>          <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../admin/index.php.html">/admin/index.php</a>', array('agreelicense' =&gt; 1, 'confirmrelease' =&gt; 1, 'lang' =&gt; <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('lang')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/lang.html">lang</a>));
<a name="l207"><span class="linenum"> 207</span></a>          echo <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('unsatisfied_dependencies_page')" href="../_functions/unsatisfied_dependencies_page.html" onMouseOver="funcPopup(event,'unsatisfied_dependencies_page')">unsatisfied_dependencies_page</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>, <a class="var it365" onMouseOver="hilite(365)" onMouseOut="lolite()" onClick="logVariable('failed')" href="../_variables/failed.html">$failed</a>, <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>);
<a name="l208"><span class="linenum"> 208</span></a>          die();
<a name="l209"><span class="linenum"> 209</span></a>      }
<a name="l210"><span class="linenum"> 210</span></a>      unset(<a class="var it365" onMouseOver="hilite(365)" onMouseOut="lolite()" onClick="logVariable('failed')" href="../_variables/failed.html">$failed</a>);
<a name="l211"><span class="linenum"> 211</span></a>  
<a name="l212"><span class="linenum"> 212</span></a>  <span class="comment">    //TODO: add a page with list of non-standard plugins here</span>
<a name="l213"><span class="linenum"> 213</span></a>  
<a name="l214"><span class="linenum"> 214</span></a>      <a class="var it38038" onMouseOver="hilite(38038)" onMouseOut="lolite()" onClick="logVariable('strdatabasesetup')" href="../_variables/strdatabasesetup.html">$strdatabasesetup</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('databasesetup');
<a name="l215"><span class="linenum"> 215</span></a>      <a class="function" onClick="logFunction('upgrade_init_javascript')" href="../_functions/upgrade_init_javascript.html" onMouseOver="funcPopup(event,'upgrade_init_javascript')">upgrade_init_javascript</a>();
<a name="l216"><span class="linenum"> 216</span></a>  
<a name="l217"><span class="linenum"> 217</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('navbar')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../_variables/navbar.html">navbar</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it38038" onMouseOver="hilite(38038)" onMouseOut="lolite()" onClick="logVariable('strdatabasesetup')" href="../_variables/strdatabasesetup.html">$strdatabasesetup</a>);
<a name="l218"><span class="linenum"> 218</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_title')" href="../_functions/set_title.html" onMouseOver="funcPopup(event,'set_title')">set_title</a>(<a class="var it26441" onMouseOver="hilite(26441)" onMouseOut="lolite()" onClick="logVariable('strinstallation')" href="../_variables/strinstallation.html">$strinstallation</a>.' - Moodle '.<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('target_release')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/target_release.html">target_release</a>);
<a name="l219"><span class="linenum"> 219</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_heading')" href="../_functions/set_heading.html" onMouseOver="funcPopup(event,'set_heading')">set_heading</a>(<a class="var it26441" onMouseOver="hilite(26441)" onMouseOut="lolite()" onClick="logVariable('strinstallation')" href="../_variables/strinstallation.html">$strinstallation</a>);
<a name="l220"><span class="linenum"> 220</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_cacheable')" href="../_functions/set_cacheable.html" onMouseOver="funcPopup(event,'set_cacheable')">set_cacheable</a>(false);
<a name="l221"><span class="linenum"> 221</span></a>  
<a name="l222"><span class="linenum"> 222</span></a>      <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>('core', 'admin');
<a name="l223"><span class="linenum"> 223</span></a>      echo <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>-&gt;<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>();
<a name="l224"><span class="linenum"> 224</span></a>  
<a name="l225"><span class="linenum"> 225</span></a>      if (!<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('setup_is_unicodedb')" href="../_functions/setup_is_unicodedb.html" onMouseOver="funcPopup(event,'setup_is_unicodedb')">setup_is_unicodedb</a>()) {
<a name="l226"><span class="linenum"> 226</span></a>          if (!<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('change_db_encoding')" href="../_functions/change_db_encoding.html" onMouseOver="funcPopup(event,'change_db_encoding')">change_db_encoding</a>()) {
<a name="l227"><span class="linenum"> 227</span></a>  <span class="comment">            // If could not convert successfully, throw error, and prevent installation</span>
<a name="l228"><span class="linenum"> 228</span></a>              <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('unicoderequired', 'admin');
<a name="l229"><span class="linenum"> 229</span></a>          }
<a name="l230"><span class="linenum"> 230</span></a>      }
<a name="l231"><span class="linenum"> 231</span></a>  
<a name="l232"><span class="linenum"> 232</span></a>      <a class="function" onClick="logFunction('install_core')" href="../_functions/install_core.html" onMouseOver="funcPopup(event,'install_core')">install_core</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>, true);
<a name="l233"><span class="linenum"> 233</span></a>  }
<a name="l234"><span class="linenum"> 234</span></a>  
<a name="l235"><span class="linenum"> 235</span></a>  
<a name="l236"><span class="linenum"> 236</span></a>  <span class="comment">// Check version of Moodle code on disk compared with database</span>
<a name="l237"><span class="linenum"> 237</span></a>  <span class="comment">// and upgrade if possible.</span>
<a name="l238"><span class="linenum"> 238</span></a>  
<a name="l239"><span class="linenum"> 239</span></a>  if (!<a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>) {
<a name="l240"><span class="linenum"> 240</span></a>  <span class="comment">    // Do not try to do anything fancy in non-cached mode,</span>
<a name="l241"><span class="linenum"> 241</span></a>  <span class="comment">    // this prevents themes from fetching data from non-existent tables.</span>
<a name="l242"><span class="linenum"> 242</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_pagelayout')" href="../_functions/set_pagelayout.html" onMouseOver="funcPopup(event,'set_pagelayout')">set_pagelayout</a>('maintenance');
<a name="l243"><span class="linenum"> 243</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_popup_notification_allowed')" href="../_functions/set_popup_notification_allowed.html" onMouseOver="funcPopup(event,'set_popup_notification_allowed')">set_popup_notification_allowed</a>(false);
<a name="l244"><span class="linenum"> 244</span></a>  }
<a name="l245"><span class="linenum"> 245</span></a>  
<a name="l246"><span class="linenum"> 246</span></a>  <a class="var it6451" onMouseOver="hilite(6451)" onMouseOut="lolite()" onClick="logVariable('stradministration')" href="../_variables/stradministration.html">$stradministration</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('administration');
<a name="l247"><span class="linenum"> 247</span></a>  <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_context')" href="../_functions/set_context.html" onMouseOver="funcPopup(event,'set_context')">set_context</a>(<a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>());
<a name="l248"><span class="linenum"> 248</span></a>  
<a name="l249"><span class="linenum"> 249</span></a>  if (empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/version.html">version</a>)) {
<a name="l250"><span class="linenum"> 250</span></a>      <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('missingconfigversion', 'debug');
<a name="l251"><span class="linenum"> 251</span></a>  }
<a name="l252"><span class="linenum"> 252</span></a>  
<a name="l253"><span class="linenum"> 253</span></a>  <span class="comment">// Detect config cache inconsistency, this happens when you switch branches on dev servers.</span>
<a name="l254"><span class="linenum"> 254</span></a>  if (<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/version.html">version</a> != <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('config', 'value', array('name'=&gt;'version'))) {
<a name="l255"><span class="linenum"> 255</span></a>      <a class="function" onClick="logFunction('purge_all_caches')" href="../_functions/purge_all_caches.html" onMouseOver="funcPopup(event,'purge_all_caches')">purge_all_caches</a>();
<a name="l256"><span class="linenum"> 256</span></a>      <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../admin/index.php.html">/admin/index.php</a>'), 'Config cache inconsistency detected, resetting caches...');
<a name="l257"><span class="linenum"> 257</span></a>  }
<a name="l258"><span class="linenum"> 258</span></a>  
<a name="l259"><span class="linenum"> 259</span></a>  if (!<a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a> and <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a> &gt; <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/version.html">version</a>) {  // upgrade
<a name="l260"><span class="linenum"> 260</span></a>  
<a name="l261"><span class="linenum"> 261</span></a>  <span class="comment">    // Warning about upgrading a test site.</span>
<a name="l262"><span class="linenum"> 262</span></a>      <a class="var it11202" onMouseOver="hilite(11202)" onMouseOut="lolite()" onClick="logVariable('testsite')" href="../_variables/testsite.html">$testsite</a> = false;
<a name="l263"><span class="linenum"> 263</span></a>      if (<a class="phpfunction" onClick="logFunction('defined')" href="../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('BEHAT_SITE_RUNNING')" href="../_constants/BEHAT_SITE_RUNNING.html" onMouseOver="constPopup(event,'BEHAT_SITE_RUNNING')">BEHAT_SITE_RUNNING</a>')) {
<a name="l264"><span class="linenum"> 264</span></a>          <a class="var it11202" onMouseOver="hilite(11202)" onMouseOut="lolite()" onClick="logVariable('testsite')" href="../_variables/testsite.html">$testsite</a> = 'behat';
<a name="l265"><span class="linenum"> 265</span></a>      }
<a name="l266"><span class="linenum"> 266</span></a>  
<a name="l267"><span class="linenum"> 267</span></a>  <span class="comment">    // We purge all of MUC's caches here.</span>
<a name="l268"><span class="linenum"> 268</span></a>  <span class="comment">    // Caches are disabled for upgrade by CACHE_DISABLE_ALL so we must set the first arg to true.</span>
<a name="l269"><span class="linenum"> 269</span></a>  <span class="comment">    // This ensures a real config object is loaded and the stores will be purged.</span>
<a name="l270"><span class="linenum"> 270</span></a>  <span class="comment">    // This is the only way we can purge custom caches such as memcache or APC.</span>
<a name="l271"><span class="linenum"> 271</span></a>  <span class="comment">    // Note: all other calls to caches will still used the disabled API.</span>
<a name="l272"><span class="linenum"> 272</span></a>      <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('purge_all')" href="../_functions/purge_all.html" onMouseOver="funcPopup(event,'purge_all')">purge_all</a>(true);
<a name="l273"><span class="linenum"> 273</span></a>  <span class="comment">    // We then purge the regular caches.</span>
<a name="l274"><span class="linenum"> 274</span></a>      <a class="function" onClick="logFunction('purge_all_caches')" href="../_functions/purge_all_caches.html" onMouseOver="funcPopup(event,'purge_all_caches')">purge_all_caches</a>();
<a name="l275"><span class="linenum"> 275</span></a>  
<a name="l276"><span class="linenum"> 276</span></a>  <span class="comment">    /** @var core_admin_renderer $output */</span>
<a name="l277"><span class="linenum"> 277</span></a>      <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>('core', 'admin');
<a name="l278"><span class="linenum"> 278</span></a>  
<a name="l279"><span class="linenum"> 279</span></a>      if (<a class="function" onClick="logFunction('upgrade_stale_php_files_present')" href="../_functions/upgrade_stale_php_files_present.html" onMouseOver="funcPopup(event,'upgrade_stale_php_files_present')">upgrade_stale_php_files_present</a>()) {
<a name="l280"><span class="linenum"> 280</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_title')" href="../_functions/set_title.html" onMouseOver="funcPopup(event,'set_title')">set_title</a>(<a class="var it6451" onMouseOver="hilite(6451)" onMouseOut="lolite()" onClick="logVariable('stradministration')" href="../_variables/stradministration.html">$stradministration</a>);
<a name="l281"><span class="linenum"> 281</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_cacheable')" href="../_functions/set_cacheable.html" onMouseOver="funcPopup(event,'set_cacheable')">set_cacheable</a>(false);
<a name="l282"><span class="linenum"> 282</span></a>  
<a name="l283"><span class="linenum"> 283</span></a>          echo <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('upgrade_stale_php_files_page')" href="../_functions/upgrade_stale_php_files_page.html" onMouseOver="funcPopup(event,'upgrade_stale_php_files_page')">upgrade_stale_php_files_page</a>();
<a name="l284"><span class="linenum"> 284</span></a>          die();
<a name="l285"><span class="linenum"> 285</span></a>      }
<a name="l286"><span class="linenum"> 286</span></a>  
<a name="l287"><span class="linenum"> 287</span></a>      if (empty(<a class="var it38029" onMouseOver="hilite(38029)" onMouseOut="lolite()" onClick="logVariable('confirmupgrade')" href="../_variables/confirmupgrade.html">$confirmupgrade</a>)) {
<a name="l288"><span class="linenum"> 288</span></a>          <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a> = new stdClass();
<a name="l289"><span class="linenum"> 289</span></a>          <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('oldversion')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../_variables/oldversion.html">oldversion</a> = &quot;<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('release')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/release.html">release</a> (&quot;.sprintf('%.2f', <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/version.html">version</a>).&quot;)&quot;;
<a name="l290"><span class="linenum"> 290</span></a>          <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('newversion')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../_variables/newversion.html">newversion</a> = &quot;<a class="var it1816" onMouseOver="hilite(1816)" onMouseOut="lolite()" onClick="logVariable('release')" href="../_variables/release.html">$release</a> (&quot;.sprintf('%.2f', <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>).&quot;)&quot;;
<a name="l291"><span class="linenum"> 291</span></a>          <a class="var it38039" onMouseOver="hilite(38039)" onMouseOut="lolite()" onClick="logVariable('strdatabasechecking')" href="../_variables/strdatabasechecking.html">$strdatabasechecking</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('databasechecking', '', <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>);
<a name="l292"><span class="linenum"> 292</span></a>  
<a name="l293"><span class="linenum"> 293</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_title')" href="../_functions/set_title.html" onMouseOver="funcPopup(event,'set_title')">set_title</a>(<a class="var it6451" onMouseOver="hilite(6451)" onMouseOut="lolite()" onClick="logVariable('stradministration')" href="../_variables/stradministration.html">$stradministration</a>);
<a name="l294"><span class="linenum"> 294</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_heading')" href="../_functions/set_heading.html" onMouseOver="funcPopup(event,'set_heading')">set_heading</a>(<a class="var it38039" onMouseOver="hilite(38039)" onMouseOut="lolite()" onClick="logVariable('strdatabasechecking')" href="../_variables/strdatabasechecking.html">$strdatabasechecking</a>);
<a name="l295"><span class="linenum"> 295</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_cacheable')" href="../_functions/set_cacheable.html" onMouseOver="funcPopup(event,'set_cacheable')">set_cacheable</a>(false);
<a name="l296"><span class="linenum"> 296</span></a>  
<a name="l297"><span class="linenum"> 297</span></a>          echo <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('upgrade_confirm_page')" href="../_functions/upgrade_confirm_page.html" onMouseOver="funcPopup(event,'upgrade_confirm_page')">upgrade_confirm_page</a>(<a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('newversion')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../_variables/newversion.html">newversion</a>, <a class="var it1244" onMouseOver="hilite(1244)" onMouseOut="lolite()" onClick="logVariable('maturity')" href="../_variables/maturity.html">$maturity</a>, <a class="var it11202" onMouseOver="hilite(11202)" onMouseOut="lolite()" onClick="logVariable('testsite')" href="../_variables/testsite.html">$testsite</a>);
<a name="l298"><span class="linenum"> 298</span></a>          die();
<a name="l299"><span class="linenum"> 299</span></a>  
<a name="l300"><span class="linenum"> 300</span></a>      } else if (empty(<a class="var it38030" onMouseOver="hilite(38030)" onMouseOut="lolite()" onClick="logVariable('confirmrelease')" href="../_variables/confirmrelease.html">$confirmrelease</a>)){
<a name="l301"><span class="linenum"> 301</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>.'/environmentlib.php');
<a name="l302"><span class="linenum"> 302</span></a>          <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it11198" onMouseOver="hilite(11198)" onMouseOut="lolite()" onClick="logVariable('envstatus')" href="../_variables/envstatus.html">$envstatus</a>, <a class="var it11199" onMouseOver="hilite(11199)" onMouseOut="lolite()" onClick="logVariable('environment_results')" href="../_variables/environment_results.html">$environment_results</a>) = <a class="function" onClick="logFunction('check_moodle_environment')" href="../_functions/check_moodle_environment.html" onMouseOver="funcPopup(event,'check_moodle_environment')">check_moodle_environment</a>(<a class="var it1816" onMouseOver="hilite(1816)" onMouseOut="lolite()" onClick="logVariable('release')" href="../_variables/release.html">$release</a>, <a class="constant" onClick="logConstant('ENV_SELECT_RELEASE')" href="../_constants/ENV_SELECT_RELEASE.html" onMouseOver="constPopup(event,'ENV_SELECT_RELEASE')">ENV_SELECT_RELEASE</a>);
<a name="l303"><span class="linenum"> 303</span></a>          <a class="var it38037" onMouseOver="hilite(38037)" onMouseOut="lolite()" onClick="logVariable('strcurrentrelease')" href="../_variables/strcurrentrelease.html">$strcurrentrelease</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('currentrelease');
<a name="l304"><span class="linenum"> 304</span></a>  
<a name="l305"><span class="linenum"> 305</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('navbar')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../_variables/navbar.html">navbar</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it38037" onMouseOver="hilite(38037)" onMouseOut="lolite()" onClick="logVariable('strcurrentrelease')" href="../_variables/strcurrentrelease.html">$strcurrentrelease</a>);
<a name="l306"><span class="linenum"> 306</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_title')" href="../_functions/set_title.html" onMouseOver="funcPopup(event,'set_title')">set_title</a>(<a class="var it38037" onMouseOver="hilite(38037)" onMouseOut="lolite()" onClick="logVariable('strcurrentrelease')" href="../_variables/strcurrentrelease.html">$strcurrentrelease</a>);
<a name="l307"><span class="linenum"> 307</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_heading')" href="../_functions/set_heading.html" onMouseOver="funcPopup(event,'set_heading')">set_heading</a>(<a class="var it38037" onMouseOver="hilite(38037)" onMouseOut="lolite()" onClick="logVariable('strcurrentrelease')" href="../_variables/strcurrentrelease.html">$strcurrentrelease</a>);
<a name="l308"><span class="linenum"> 308</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_cacheable')" href="../_functions/set_cacheable.html" onMouseOver="funcPopup(event,'set_cacheable')">set_cacheable</a>(false);
<a name="l309"><span class="linenum"> 309</span></a>  
<a name="l310"><span class="linenum"> 310</span></a>          echo <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('upgrade_environment_page')" href="../_functions/upgrade_environment_page.html" onMouseOver="funcPopup(event,'upgrade_environment_page')">upgrade_environment_page</a>(<a class="var it1816" onMouseOver="hilite(1816)" onMouseOut="lolite()" onClick="logVariable('release')" href="../_variables/release.html">$release</a>, <a class="var it11198" onMouseOver="hilite(11198)" onMouseOut="lolite()" onClick="logVariable('envstatus')" href="../_variables/envstatus.html">$envstatus</a>, <a class="var it11199" onMouseOver="hilite(11199)" onMouseOut="lolite()" onClick="logVariable('environment_results')" href="../_variables/environment_results.html">$environment_results</a>);
<a name="l311"><span class="linenum"> 311</span></a>          die();
<a name="l312"><span class="linenum"> 312</span></a>  
<a name="l313"><span class="linenum"> 313</span></a>      } else if (empty(<a class="var it38031" onMouseOver="hilite(38031)" onMouseOut="lolite()" onClick="logVariable('confirmplugins')" href="../_variables/confirmplugins.html">$confirmplugins</a>)) {
<a name="l314"><span class="linenum"> 314</span></a>          <a class="var it38040" onMouseOver="hilite(38040)" onMouseOut="lolite()" onClick="logVariable('strplugincheck')" href="../_variables/strplugincheck.html">$strplugincheck</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('plugincheck');
<a name="l315"><span class="linenum"> 315</span></a>  
<a name="l316"><span class="linenum"> 316</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('navbar')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../_variables/navbar.html">navbar</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it38040" onMouseOver="hilite(38040)" onMouseOut="lolite()" onClick="logVariable('strplugincheck')" href="../_variables/strplugincheck.html">$strplugincheck</a>);
<a name="l317"><span class="linenum"> 317</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_title')" href="../_functions/set_title.html" onMouseOver="funcPopup(event,'set_title')">set_title</a>(<a class="var it38040" onMouseOver="hilite(38040)" onMouseOut="lolite()" onClick="logVariable('strplugincheck')" href="../_variables/strplugincheck.html">$strplugincheck</a>);
<a name="l318"><span class="linenum"> 318</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_heading')" href="../_functions/set_heading.html" onMouseOver="funcPopup(event,'set_heading')">set_heading</a>(<a class="var it38040" onMouseOver="hilite(38040)" onMouseOut="lolite()" onClick="logVariable('strplugincheck')" href="../_variables/strplugincheck.html">$strplugincheck</a>);
<a name="l319"><span class="linenum"> 319</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_cacheable')" href="../_functions/set_cacheable.html" onMouseOver="funcPopup(event,'set_cacheable')">set_cacheable</a>(false);
<a name="l320"><span class="linenum"> 320</span></a>  
<a name="l321"><span class="linenum"> 321</span></a>          <a class="var it11200" onMouseOver="hilite(11200)" onMouseOut="lolite()" onClick="logVariable('reloadurl')" href="../_variables/reloadurl.html">$reloadurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../admin/index.php.html">/admin/index.php</a>', array('confirmupgrade' =&gt; 1, 'confirmrelease' =&gt; 1, 'cache' =&gt; 0));
<a name="l322"><span class="linenum"> 322</span></a>  
<a name="l323"><span class="linenum"> 323</span></a>          if (<a class="var it38033" onMouseOver="hilite(38033)" onMouseOut="lolite()" onClick="logVariable('fetchupdates')" href="../_variables/fetchupdates.html">$fetchupdates</a>) {
<a name="l324"><span class="linenum"> 324</span></a>  <span class="comment">            // No sesskey support guaranteed here, because sessions might not work yet.</span>
<a name="l325"><span class="linenum"> 325</span></a>              <a class="var it38041" onMouseOver="hilite(38041)" onMouseOut="lolite()" onClick="logVariable('updateschecker')" href="../_variables/updateschecker.html">$updateschecker</a> = \core\update\<a class="class" onClick="logClass('checker')" href="../_classes/checker.html" onMouseOver="classPopup(event,'checker')">checker</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l326"><span class="linenum"> 326</span></a>              if (<a class="var it38041" onMouseOver="hilite(38041)" onMouseOut="lolite()" onClick="logVariable('updateschecker')" href="../_variables/updateschecker.html">$updateschecker</a>-&gt;<a class="function" onClick="logFunction('enabled')" href="../_functions/enabled.html" onMouseOver="funcPopup(event,'enabled')">enabled</a>()) {
<a name="l327"><span class="linenum"> 327</span></a>                  <a class="var it38041" onMouseOver="hilite(38041)" onMouseOut="lolite()" onClick="logVariable('updateschecker')" href="../_variables/updateschecker.html">$updateschecker</a>-&gt;<a class="function" onClick="logFunction('fetch')" href="../_functions/fetch.html" onMouseOver="funcPopup(event,'fetch')">fetch</a>();
<a name="l328"><span class="linenum"> 328</span></a>              }
<a name="l329"><span class="linenum"> 329</span></a>              <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it11200" onMouseOver="hilite(11200)" onMouseOut="lolite()" onClick="logVariable('reloadurl')" href="../_variables/reloadurl.html">$reloadurl</a>);
<a name="l330"><span class="linenum"> 330</span></a>          }
<a name="l331"><span class="linenum"> 331</span></a>  
<a name="l332"><span class="linenum"> 332</span></a>          <a class="var it7248" onMouseOver="hilite(7248)" onMouseOut="lolite()" onClick="logVariable('deployer')" href="../_variables/deployer.html">$deployer</a> = \core\update\<a class="class" onClick="logClass('deployer')" href="../_classes/deployer.html" onMouseOver="classPopup(event,'deployer')">deployer</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l333"><span class="linenum"> 333</span></a>          if (<a class="var it7248" onMouseOver="hilite(7248)" onMouseOut="lolite()" onClick="logVariable('deployer')" href="../_variables/deployer.html">$deployer</a>-&gt;<a class="function" onClick="logFunction('enabled')" href="../_functions/enabled.html" onMouseOver="funcPopup(event,'enabled')">enabled</a>()) {
<a name="l334"><span class="linenum"> 334</span></a>              <a class="var it7248" onMouseOver="hilite(7248)" onMouseOut="lolite()" onClick="logVariable('deployer')" href="../_variables/deployer.html">$deployer</a>-&gt;<a class="function" onClick="logFunction('initialize')" href="../_functions/initialize.html" onMouseOver="funcPopup(event,'initialize')">initialize</a>(<a class="var it11200" onMouseOver="hilite(11200)" onMouseOut="lolite()" onClick="logVariable('reloadurl')" href="../_variables/reloadurl.html">$reloadurl</a>, <a class="var it11200" onMouseOver="hilite(11200)" onMouseOut="lolite()" onClick="logVariable('reloadurl')" href="../_variables/reloadurl.html">$reloadurl</a>);
<a name="l335"><span class="linenum"> 335</span></a>  
<a name="l336"><span class="linenum"> 336</span></a>              <a class="var it7250" onMouseOver="hilite(7250)" onMouseOut="lolite()" onClick="logVariable('deploydata')" href="../_variables/deploydata.html">$deploydata</a> = <a class="var it7248" onMouseOver="hilite(7248)" onMouseOut="lolite()" onClick="logVariable('deployer')" href="../_variables/deployer.html">$deployer</a>-&gt;<a class="function" onClick="logFunction('submitted_data')" href="../_functions/submitted_data.html" onMouseOver="funcPopup(event,'submitted_data')">submitted_data</a>();
<a name="l337"><span class="linenum"> 337</span></a>              if (!empty(<a class="var it7250" onMouseOver="hilite(7250)" onMouseOut="lolite()" onClick="logVariable('deploydata')" href="../_variables/deploydata.html">$deploydata</a>)) {
<a name="l338"><span class="linenum"> 338</span></a>  <span class="comment">                // No sesskey support guaranteed here, because sessions might not work yet.</span>
<a name="l339"><span class="linenum"> 339</span></a>                  echo <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('upgrade_plugin_confirm_deploy_page')" href="../_functions/upgrade_plugin_confirm_deploy_page.html" onMouseOver="funcPopup(event,'upgrade_plugin_confirm_deploy_page')">upgrade_plugin_confirm_deploy_page</a>(<a class="var it7248" onMouseOver="hilite(7248)" onMouseOut="lolite()" onClick="logVariable('deployer')" href="../_variables/deployer.html">$deployer</a>, <a class="var it7250" onMouseOver="hilite(7250)" onMouseOut="lolite()" onClick="logVariable('deploydata')" href="../_variables/deploydata.html">$deploydata</a>);
<a name="l340"><span class="linenum"> 340</span></a>                  die();
<a name="l341"><span class="linenum"> 341</span></a>              }
<a name="l342"><span class="linenum"> 342</span></a>          }
<a name="l343"><span class="linenum"> 343</span></a>  
<a name="l344"><span class="linenum"> 344</span></a>          echo <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('upgrade_plugin_check_page')" href="../_functions/upgrade_plugin_check_page.html" onMouseOver="funcPopup(event,'upgrade_plugin_check_page')">upgrade_plugin_check_page</a>(<a class="class" onClick="logClass('core_plugin_manager')" href="../_classes/core_plugin_manager.html" onMouseOver="classPopup(event,'core_plugin_manager')">core_plugin_manager</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(), \core\update\<a class="class" onClick="logClass('checker')" href="../_classes/checker.html" onMouseOver="classPopup(event,'checker')">checker</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(),
<a name="l345"><span class="linenum"> 345</span></a>                  <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>, <a class="var it11204" onMouseOver="hilite(11204)" onMouseOut="lolite()" onClick="logVariable('showallplugins')" href="../_variables/showallplugins.html">$showallplugins</a>, <a class="var it11200" onMouseOver="hilite(11200)" onMouseOut="lolite()" onClick="logVariable('reloadurl')" href="../_variables/reloadurl.html">$reloadurl</a>,
<a name="l346"><span class="linenum"> 346</span></a>                  <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../admin/index.php.html">/admin/index.php</a>', array('confirmupgrade'=&gt;1, 'confirmrelease'=&gt;1, 'confirmplugincheck'=&gt;1, 'cache'=&gt;0)));
<a name="l347"><span class="linenum"> 347</span></a>          die();
<a name="l348"><span class="linenum"> 348</span></a>  
<a name="l349"><span class="linenum"> 349</span></a>      } else {
<a name="l350"><span class="linenum"> 350</span></a>  <span class="comment">        // Always verify plugin dependencies!</span>
<a name="l351"><span class="linenum"> 351</span></a>          <a class="var it365" onMouseOver="hilite(365)" onMouseOut="lolite()" onClick="logVariable('failed')" href="../_variables/failed.html">$failed</a> = array();
<a name="l352"><span class="linenum"> 352</span></a>          if (!<a class="class" onClick="logClass('core_plugin_manager')" href="../_classes/core_plugin_manager.html" onMouseOver="classPopup(event,'core_plugin_manager')">core_plugin_manager</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>()-&gt;<a class="function" onClick="logFunction('all_plugins_ok')" href="../_functions/all_plugins_ok.html" onMouseOver="funcPopup(event,'all_plugins_ok')">all_plugins_ok</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>, <a class="var it365" onMouseOver="hilite(365)" onMouseOut="lolite()" onClick="logVariable('failed')" href="../_variables/failed.html">$failed</a>)) {
<a name="l353"><span class="linenum"> 353</span></a>              <a class="var it11200" onMouseOver="hilite(11200)" onMouseOut="lolite()" onClick="logVariable('reloadurl')" href="../_variables/reloadurl.html">$reloadurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../admin/index.php.html">/admin/index.php</a>', array('confirmupgrade' =&gt; 1, 'confirmrelease' =&gt; 1, 'cache' =&gt; 0));
<a name="l354"><span class="linenum"> 354</span></a>              echo <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('unsatisfied_dependencies_page')" href="../_functions/unsatisfied_dependencies_page.html" onMouseOver="funcPopup(event,'unsatisfied_dependencies_page')">unsatisfied_dependencies_page</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>, <a class="var it365" onMouseOver="hilite(365)" onMouseOut="lolite()" onClick="logVariable('failed')" href="../_variables/failed.html">$failed</a>, <a class="var it11200" onMouseOver="hilite(11200)" onMouseOut="lolite()" onClick="logVariable('reloadurl')" href="../_variables/reloadurl.html">$reloadurl</a>);
<a name="l355"><span class="linenum"> 355</span></a>              die();
<a name="l356"><span class="linenum"> 356</span></a>          }
<a name="l357"><span class="linenum"> 357</span></a>          unset(<a class="var it365" onMouseOver="hilite(365)" onMouseOut="lolite()" onClick="logVariable('failed')" href="../_variables/failed.html">$failed</a>);
<a name="l358"><span class="linenum"> 358</span></a>  
<a name="l359"><span class="linenum"> 359</span></a>  <span class="comment">        // Launch main upgrade.</span>
<a name="l360"><span class="linenum"> 360</span></a>          <a class="function" onClick="logFunction('upgrade_core')" href="../_functions/upgrade_core.html" onMouseOver="funcPopup(event,'upgrade_core')">upgrade_core</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>, true);
<a name="l361"><span class="linenum"> 361</span></a>      }
<a name="l362"><span class="linenum"> 362</span></a>  } else if (<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a> &lt; <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/version.html">version</a>) {
<a name="l363"><span class="linenum"> 363</span></a>  <span class="comment">    // better stop here, we can not continue with plugin upgrades or anything else</span>
<a name="l364"><span class="linenum"> 364</span></a>      throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('downgradedcore', 'error', <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('/admin/'));
<a name="l365"><span class="linenum"> 365</span></a>  }
<a name="l366"><span class="linenum"> 366</span></a>  
<a name="l367"><span class="linenum"> 367</span></a>  <span class="comment">// Updated human-readable release version if necessary</span>
<a name="l368"><span class="linenum"> 368</span></a>  if (!<a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a> and <a class="var it1816" onMouseOver="hilite(1816)" onMouseOut="lolite()" onClick="logVariable('release')" href="../_variables/release.html">$release</a> &lt;&gt; <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('release')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/release.html">release</a>) {  // Update the release version
<a name="l369"><span class="linenum"> 369</span></a>      <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('release', <a class="var it1816" onMouseOver="hilite(1816)" onMouseOut="lolite()" onClick="logVariable('release')" href="../_variables/release.html">$release</a>);
<a name="l370"><span class="linenum"> 370</span></a>  }
<a name="l371"><span class="linenum"> 371</span></a>  
<a name="l372"><span class="linenum"> 372</span></a>  if (!<a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a> and <a class="var it662" onMouseOver="hilite(662)" onMouseOut="lolite()" onClick="logVariable('branch')" href="../_variables/branch.html">$branch</a> &lt;&gt; <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('branch')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/branch.html">branch</a>) {  // Update the branch
<a name="l373"><span class="linenum"> 373</span></a>      <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('branch', <a class="var it662" onMouseOver="hilite(662)" onMouseOut="lolite()" onClick="logVariable('branch')" href="../_variables/branch.html">$branch</a>);
<a name="l374"><span class="linenum"> 374</span></a>  }
<a name="l375"><span class="linenum"> 375</span></a>  
<a name="l376"><span class="linenum"> 376</span></a>  if (!<a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a> and <a class="function" onClick="logFunction('moodle_needs_upgrading')" href="../_functions/moodle_needs_upgrading.html" onMouseOver="funcPopup(event,'moodle_needs_upgrading')">moodle_needs_upgrading</a>()) {
<a name="l377"><span class="linenum"> 377</span></a>      if (!<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('headerprinted')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../_variables/headerprinted.html">headerprinted</a>) {
<a name="l378"><span class="linenum"> 378</span></a>  <span class="comment">        // means core upgrade or installation was not already done</span>
<a name="l379"><span class="linenum"> 379</span></a>  
<a name="l380"><span class="linenum"> 380</span></a>          if (!<a class="var it38031" onMouseOver="hilite(38031)" onMouseOut="lolite()" onClick="logVariable('confirmplugins')" href="../_variables/confirmplugins.html">$confirmplugins</a>) {
<a name="l381"><span class="linenum"> 381</span></a>              <a class="var it38040" onMouseOver="hilite(38040)" onMouseOut="lolite()" onClick="logVariable('strplugincheck')" href="../_variables/strplugincheck.html">$strplugincheck</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('plugincheck');
<a name="l382"><span class="linenum"> 382</span></a>  
<a name="l383"><span class="linenum"> 383</span></a>              <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('navbar')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../_variables/navbar.html">navbar</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it38040" onMouseOver="hilite(38040)" onMouseOut="lolite()" onClick="logVariable('strplugincheck')" href="../_variables/strplugincheck.html">$strplugincheck</a>);
<a name="l384"><span class="linenum"> 384</span></a>              <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_title')" href="../_functions/set_title.html" onMouseOver="funcPopup(event,'set_title')">set_title</a>(<a class="var it38040" onMouseOver="hilite(38040)" onMouseOut="lolite()" onClick="logVariable('strplugincheck')" href="../_variables/strplugincheck.html">$strplugincheck</a>);
<a name="l385"><span class="linenum"> 385</span></a>              <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_heading')" href="../_functions/set_heading.html" onMouseOver="funcPopup(event,'set_heading')">set_heading</a>(<a class="var it38040" onMouseOver="hilite(38040)" onMouseOut="lolite()" onClick="logVariable('strplugincheck')" href="../_variables/strplugincheck.html">$strplugincheck</a>);
<a name="l386"><span class="linenum"> 386</span></a>              <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_cacheable')" href="../_functions/set_cacheable.html" onMouseOver="funcPopup(event,'set_cacheable')">set_cacheable</a>(false);
<a name="l387"><span class="linenum"> 387</span></a>  
<a name="l388"><span class="linenum"> 388</span></a>              if (<a class="var it38033" onMouseOver="hilite(38033)" onMouseOut="lolite()" onClick="logVariable('fetchupdates')" href="../_variables/fetchupdates.html">$fetchupdates</a>) {
<a name="l389"><span class="linenum"> 389</span></a>                  <a class="function" onClick="logFunction('require_sesskey')" href="../_functions/require_sesskey.html" onMouseOver="funcPopup(event,'require_sesskey')">require_sesskey</a>();
<a name="l390"><span class="linenum"> 390</span></a>                  <a class="var it38041" onMouseOver="hilite(38041)" onMouseOut="lolite()" onClick="logVariable('updateschecker')" href="../_variables/updateschecker.html">$updateschecker</a> = \core\update\<a class="class" onClick="logClass('checker')" href="../_classes/checker.html" onMouseOver="classPopup(event,'checker')">checker</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l391"><span class="linenum"> 391</span></a>                  if (<a class="var it38041" onMouseOver="hilite(38041)" onMouseOut="lolite()" onClick="logVariable('updateschecker')" href="../_variables/updateschecker.html">$updateschecker</a>-&gt;<a class="function" onClick="logFunction('enabled')" href="../_functions/enabled.html" onMouseOver="funcPopup(event,'enabled')">enabled</a>()) {
<a name="l392"><span class="linenum"> 392</span></a>                      <a class="var it38041" onMouseOver="hilite(38041)" onMouseOut="lolite()" onClick="logVariable('updateschecker')" href="../_variables/updateschecker.html">$updateschecker</a>-&gt;<a class="function" onClick="logFunction('fetch')" href="../_functions/fetch.html" onMouseOver="funcPopup(event,'fetch')">fetch</a>();
<a name="l393"><span class="linenum"> 393</span></a>                  }
<a name="l394"><span class="linenum"> 394</span></a>                  <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('url')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../_variables/url.html">url</a>);
<a name="l395"><span class="linenum"> 395</span></a>              }
<a name="l396"><span class="linenum"> 396</span></a>  
<a name="l397"><span class="linenum"> 397</span></a>  <span class="comment">            /** @var core_admin_renderer $output */</span>
<a name="l398"><span class="linenum"> 398</span></a>              <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>('core', 'admin');
<a name="l399"><span class="linenum"> 399</span></a>  
<a name="l400"><span class="linenum"> 400</span></a>              <a class="var it7248" onMouseOver="hilite(7248)" onMouseOut="lolite()" onClick="logVariable('deployer')" href="../_variables/deployer.html">$deployer</a> = \core\update\<a class="class" onClick="logClass('deployer')" href="../_classes/deployer.html" onMouseOver="classPopup(event,'deployer')">deployer</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l401"><span class="linenum"> 401</span></a>              if (<a class="var it7248" onMouseOver="hilite(7248)" onMouseOut="lolite()" onClick="logVariable('deployer')" href="../_variables/deployer.html">$deployer</a>-&gt;<a class="function" onClick="logFunction('enabled')" href="../_functions/enabled.html" onMouseOver="funcPopup(event,'enabled')">enabled</a>()) {
<a name="l402"><span class="linenum"> 402</span></a>                  <a class="var it7248" onMouseOver="hilite(7248)" onMouseOut="lolite()" onClick="logVariable('deployer')" href="../_variables/deployer.html">$deployer</a>-&gt;<a class="function" onClick="logFunction('initialize')" href="../_functions/initialize.html" onMouseOver="funcPopup(event,'initialize')">initialize</a>(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('url')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../_variables/url.html">url</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('url')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../_variables/url.html">url</a>);
<a name="l403"><span class="linenum"> 403</span></a>  
<a name="l404"><span class="linenum"> 404</span></a>                  <a class="var it7250" onMouseOver="hilite(7250)" onMouseOut="lolite()" onClick="logVariable('deploydata')" href="../_variables/deploydata.html">$deploydata</a> = <a class="var it7248" onMouseOver="hilite(7248)" onMouseOut="lolite()" onClick="logVariable('deployer')" href="../_variables/deployer.html">$deployer</a>-&gt;<a class="function" onClick="logFunction('submitted_data')" href="../_functions/submitted_data.html" onMouseOver="funcPopup(event,'submitted_data')">submitted_data</a>();
<a name="l405"><span class="linenum"> 405</span></a>                  if (!empty(<a class="var it7250" onMouseOver="hilite(7250)" onMouseOut="lolite()" onClick="logVariable('deploydata')" href="../_variables/deploydata.html">$deploydata</a>)) {
<a name="l406"><span class="linenum"> 406</span></a>                      <a class="function" onClick="logFunction('require_sesskey')" href="../_functions/require_sesskey.html" onMouseOver="funcPopup(event,'require_sesskey')">require_sesskey</a>();
<a name="l407"><span class="linenum"> 407</span></a>                      echo <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('upgrade_plugin_confirm_deploy_page')" href="../_functions/upgrade_plugin_confirm_deploy_page.html" onMouseOver="funcPopup(event,'upgrade_plugin_confirm_deploy_page')">upgrade_plugin_confirm_deploy_page</a>(<a class="var it7248" onMouseOver="hilite(7248)" onMouseOut="lolite()" onClick="logVariable('deployer')" href="../_variables/deployer.html">$deployer</a>, <a class="var it7250" onMouseOver="hilite(7250)" onMouseOut="lolite()" onClick="logVariable('deploydata')" href="../_variables/deploydata.html">$deploydata</a>);
<a name="l408"><span class="linenum"> 408</span></a>                      die();
<a name="l409"><span class="linenum"> 409</span></a>                  }
<a name="l410"><span class="linenum"> 410</span></a>              }
<a name="l411"><span class="linenum"> 411</span></a>  
<a name="l412"><span class="linenum"> 412</span></a>  <span class="comment">            // Show plugins info.</span>
<a name="l413"><span class="linenum"> 413</span></a>              echo <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('upgrade_plugin_check_page')" href="../_functions/upgrade_plugin_check_page.html" onMouseOver="funcPopup(event,'upgrade_plugin_check_page')">upgrade_plugin_check_page</a>(<a class="class" onClick="logClass('core_plugin_manager')" href="../_classes/core_plugin_manager.html" onMouseOver="classPopup(event,'core_plugin_manager')">core_plugin_manager</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(), \core\update\<a class="class" onClick="logClass('checker')" href="../_classes/checker.html" onMouseOver="classPopup(event,'checker')">checker</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(),
<a name="l414"><span class="linenum"> 414</span></a>                      <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>, <a class="var it11204" onMouseOver="hilite(11204)" onMouseOut="lolite()" onClick="logVariable('showallplugins')" href="../_variables/showallplugins.html">$showallplugins</a>,
<a name="l415"><span class="linenum"> 415</span></a>                      <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('url')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../_variables/url.html">url</a>),
<a name="l416"><span class="linenum"> 416</span></a>                      <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../admin/index.php.html">/admin/index.php</a>', array('confirmplugincheck'=&gt;1, 'cache'=&gt;0)));
<a name="l417"><span class="linenum"> 417</span></a>              die();
<a name="l418"><span class="linenum"> 418</span></a>          }
<a name="l419"><span class="linenum"> 419</span></a>  
<a name="l420"><span class="linenum"> 420</span></a>  <span class="comment">        // Make sure plugin dependencies are always checked.</span>
<a name="l421"><span class="linenum"> 421</span></a>          <a class="var it365" onMouseOver="hilite(365)" onMouseOut="lolite()" onClick="logVariable('failed')" href="../_variables/failed.html">$failed</a> = array();
<a name="l422"><span class="linenum"> 422</span></a>          if (!<a class="class" onClick="logClass('core_plugin_manager')" href="../_classes/core_plugin_manager.html" onMouseOver="classPopup(event,'core_plugin_manager')">core_plugin_manager</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>()-&gt;<a class="function" onClick="logFunction('all_plugins_ok')" href="../_functions/all_plugins_ok.html" onMouseOver="funcPopup(event,'all_plugins_ok')">all_plugins_ok</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>, <a class="var it365" onMouseOver="hilite(365)" onMouseOut="lolite()" onClick="logVariable('failed')" href="../_variables/failed.html">$failed</a>)) {
<a name="l423"><span class="linenum"> 423</span></a>  <span class="comment">            /** @var core_admin_renderer $output */</span>
<a name="l424"><span class="linenum"> 424</span></a>              <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>('core', 'admin');
<a name="l425"><span class="linenum"> 425</span></a>              <a class="var it11200" onMouseOver="hilite(11200)" onMouseOut="lolite()" onClick="logVariable('reloadurl')" href="../_variables/reloadurl.html">$reloadurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../admin/index.php.html">/admin/index.php</a>', array('cache' =&gt; 0));
<a name="l426"><span class="linenum"> 426</span></a>              echo <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('unsatisfied_dependencies_page')" href="../_functions/unsatisfied_dependencies_page.html" onMouseOver="funcPopup(event,'unsatisfied_dependencies_page')">unsatisfied_dependencies_page</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>, <a class="var it365" onMouseOver="hilite(365)" onMouseOut="lolite()" onClick="logVariable('failed')" href="../_variables/failed.html">$failed</a>, <a class="var it11200" onMouseOver="hilite(11200)" onMouseOut="lolite()" onClick="logVariable('reloadurl')" href="../_variables/reloadurl.html">$reloadurl</a>);
<a name="l427"><span class="linenum"> 427</span></a>              die();
<a name="l428"><span class="linenum"> 428</span></a>          }
<a name="l429"><span class="linenum"> 429</span></a>          unset(<a class="var it365" onMouseOver="hilite(365)" onMouseOut="lolite()" onClick="logVariable('failed')" href="../_variables/failed.html">$failed</a>);
<a name="l430"><span class="linenum"> 430</span></a>      }
<a name="l431"><span class="linenum"> 431</span></a>  
<a name="l432"><span class="linenum"> 432</span></a>  <span class="comment">    // install/upgrade all plugins and other parts</span>
<a name="l433"><span class="linenum"> 433</span></a>      <a class="function" onClick="logFunction('upgrade_noncore')" href="../_functions/upgrade_noncore.html" onMouseOver="funcPopup(event,'upgrade_noncore')">upgrade_noncore</a>(true);
<a name="l434"><span class="linenum"> 434</span></a>  }
<a name="l435"><span class="linenum"> 435</span></a>  
<a name="l436"><span class="linenum"> 436</span></a>  <span class="comment">// If this is the first install, indicate that this site is fully configured</span>
<a name="l437"><span class="linenum"> 437</span></a>  <span class="comment">// except the admin password</span>
<a name="l438"><span class="linenum"> 438</span></a>  if (<a class="function" onClick="logFunction('during_initial_install')" href="../_functions/during_initial_install.html" onMouseOver="funcPopup(event,'during_initial_install')">during_initial_install</a>()) {
<a name="l439"><span class="linenum"> 439</span></a>      <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('rolesactive', 1); <span class="comment">// after this, during_initial_install will return false.</span>
<a name="l440"><span class="linenum"> 440</span></a>      <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('adminsetuppending', 1);
<a name="l441"><span class="linenum"> 441</span></a>  <span class="comment">    // we need this redirect to setup proper session</span>
<a name="l442"><span class="linenum"> 442</span></a>      <a class="function" onClick="logFunction('upgrade_finished')" href="../_functions/upgrade_finished.html" onMouseOver="funcPopup(event,'upgrade_finished')">upgrade_finished</a>(&quot;index.php?sessionstarted=1&amp;amp;lang=<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('lang')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/lang.html">lang</a>&quot;);
<a name="l443"><span class="linenum"> 443</span></a>  }
<a name="l444"><span class="linenum"> 444</span></a>  
<a name="l445"><span class="linenum"> 445</span></a>  <span class="comment">// make sure admin user is created - this is the last step because we need</span>
<a name="l446"><span class="linenum"> 446</span></a>  <span class="comment">// session to be working properly in order to edit admin account</span>
<a name="l447"><span class="linenum"> 447</span></a>   if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('adminsetuppending')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/adminsetuppending.html">adminsetuppending</a>)) {
<a name="l448"><span class="linenum"> 448</span></a>      <a class="var it38042" onMouseOver="hilite(38042)" onMouseOut="lolite()" onClick="logVariable('sessionstarted')" href="../_variables/sessionstarted.html">$sessionstarted</a> = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('sessionstarted', 0, <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>);
<a name="l449"><span class="linenum"> 449</span></a>      if (!<a class="var it38042" onMouseOver="hilite(38042)" onMouseOut="lolite()" onClick="logVariable('sessionstarted')" href="../_variables/sessionstarted.html">$sessionstarted</a>) {
<a name="l450"><span class="linenum"> 450</span></a>          <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(&quot;index.php?sessionstarted=1&amp;lang=<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('lang')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/lang.html">lang</a>&quot;);
<a name="l451"><span class="linenum"> 451</span></a>      } else {
<a name="l452"><span class="linenum"> 452</span></a>          <a class="var it38043" onMouseOver="hilite(38043)" onMouseOut="lolite()" onClick="logVariable('sessionverify')" href="../_variables/sessionverify.html">$sessionverify</a> = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('sessionverify', 0, <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>);
<a name="l453"><span class="linenum"> 453</span></a>          if (!<a class="var it38043" onMouseOver="hilite(38043)" onMouseOut="lolite()" onClick="logVariable('sessionverify')" href="../_variables/sessionverify.html">$sessionverify</a>) {
<a name="l454"><span class="linenum"> 454</span></a>              <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('sessionverify')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/sessionverify.html">sessionverify</a> = 1;
<a name="l455"><span class="linenum"> 455</span></a>              <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(&quot;index.php?sessionstarted=1&amp;sessionverify=1&amp;lang=<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('lang')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/lang.html">lang</a>&quot;);
<a name="l456"><span class="linenum"> 456</span></a>          } else {
<a name="l457"><span class="linenum"> 457</span></a>              if (empty(<a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('sessionverify')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/sessionverify.html">sessionverify</a>)) {
<a name="l458"><span class="linenum"> 458</span></a>                  <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('installsessionerror', 'admin', &quot;index.php?sessionstarted=1&amp;lang=<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('lang')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/lang.html">lang</a>&quot;);
<a name="l459"><span class="linenum"> 459</span></a>              }
<a name="l460"><span class="linenum"> 460</span></a>              unset(<a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('sessionverify')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/sessionverify.html">sessionverify</a>);
<a name="l461"><span class="linenum"> 461</span></a>          }
<a name="l462"><span class="linenum"> 462</span></a>      }
<a name="l463"><span class="linenum"> 463</span></a>  
<a name="l464"><span class="linenum"> 464</span></a>  <span class="comment">    // Cleanup SESSION to make sure other code does not complain in the future.</span>
<a name="l465"><span class="linenum"> 465</span></a>      unset(<a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('has_timed_out')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/has_timed_out.html">has_timed_out</a>);
<a name="l466"><span class="linenum"> 466</span></a>      unset(<a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('wantsurl')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/wantsurl.html">wantsurl</a>);
<a name="l467"><span class="linenum"> 467</span></a>  
<a name="l468"><span class="linenum"> 468</span></a>  <span class="comment">    // at this stage there can be only one admin unless more were added by install - users may change username, so do not rely on that</span>
<a name="l469"><span class="linenum"> 469</span></a>      <a class="var it38044" onMouseOver="hilite(38044)" onMouseOut="lolite()" onClick="logVariable('adminids')" href="../_variables/adminids.html">$adminids</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('siteadmins')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/siteadmins.html">siteadmins</a>);
<a name="l470"><span class="linenum"> 470</span></a>      <a class="var it19088" onMouseOver="hilite(19088)" onMouseOut="lolite()" onClick="logVariable('adminuser')" href="../_variables/adminuser.html">$adminuser</a> = <a class="function" onClick="logFunction('get_complete_user_data')" href="../_functions/get_complete_user_data.html" onMouseOver="funcPopup(event,'get_complete_user_data')">get_complete_user_data</a>('id', <a class="phpfunction" onClick="logFunction('reset')" href="../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it38044" onMouseOver="hilite(38044)" onMouseOut="lolite()" onClick="logVariable('adminids')" href="../_variables/adminids.html">$adminids</a>));
<a name="l471"><span class="linenum"> 471</span></a>  
<a name="l472"><span class="linenum"> 472</span></a>      if (<a class="var it19088" onMouseOver="hilite(19088)" onMouseOut="lolite()" onClick="logVariable('adminuser')" href="../_variables/adminuser.html">$adminuser</a>-&gt;<a onClick="logVariable('password')" class="var it41674" onMouseOver="hilite(41674)" onMouseOut="lolite()" href="../_variables/password.html">password</a> === 'adminsetuppending') {
<a name="l473"><span class="linenum"> 473</span></a>  <span class="comment">        // prevent installation hijacking</span>
<a name="l474"><span class="linenum"> 474</span></a>          if (<a class="var it19088" onMouseOver="hilite(19088)" onMouseOut="lolite()" onClick="logVariable('adminuser')" href="../_variables/adminuser.html">$adminuser</a>-&gt;<a onClick="logVariable('lastip')" class="var it41674" onMouseOver="hilite(41674)" onMouseOut="lolite()" href="../_variables/lastip.html">lastip</a> !== <a class="function" onClick="logFunction('getremoteaddr')" href="../_functions/getremoteaddr.html" onMouseOver="funcPopup(event,'getremoteaddr')">getremoteaddr</a>()) {
<a name="l475"><span class="linenum"> 475</span></a>              <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('installhijacked', 'admin');
<a name="l476"><span class="linenum"> 476</span></a>          }
<a name="l477"><span class="linenum"> 477</span></a>  <span class="comment">        // login user and let him set password and admin details</span>
<a name="l478"><span class="linenum"> 478</span></a>          <a class="var it19088" onMouseOver="hilite(19088)" onMouseOut="lolite()" onClick="logVariable('adminuser')" href="../_variables/adminuser.html">$adminuser</a>-&gt;<a onClick="logVariable('newadminuser')" class="var it41674" onMouseOver="hilite(41674)" onMouseOut="lolite()" href="../_variables/newadminuser.html">newadminuser</a> = 1;
<a name="l479"><span class="linenum"> 479</span></a>          <a class="function" onClick="logFunction('complete_user_login')" href="../_functions/complete_user_login.html" onMouseOver="funcPopup(event,'complete_user_login')">complete_user_login</a>(<a class="var it19088" onMouseOver="hilite(19088)" onMouseOut="lolite()" onClick="logVariable('adminuser')" href="../_variables/adminuser.html">$adminuser</a>);
<a name="l480"><span class="linenum"> 480</span></a>          <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(&quot;<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>/user/editadvanced.php?id=<a class="var it19088" onMouseOver="hilite(19088)" onMouseOut="lolite()" onClick="logVariable('adminuser')" href="../_variables/adminuser.html">$adminuser</a>-&gt;<a onClick="logVariable('id')" class="var it41674" onMouseOver="hilite(41674)" onMouseOut="lolite()" href="../_variables/id.html">id</a>&quot;); <span class="comment">// Edit thyself</span>
<a name="l481"><span class="linenum"> 481</span></a>  
<a name="l482"><span class="linenum"> 482</span></a>      } else {
<a name="l483"><span class="linenum"> 483</span></a>          <a class="function" onClick="logFunction('unset_config')" href="../_functions/unset_config.html" onMouseOver="funcPopup(event,'unset_config')">unset_config</a>('adminsetuppending');
<a name="l484"><span class="linenum"> 484</span></a>      }
<a name="l485"><span class="linenum"> 485</span></a>  
<a name="l486"><span class="linenum"> 486</span></a>  } else {
<a name="l487"><span class="linenum"> 487</span></a>  <span class="comment">    // just make sure upgrade logging is properly terminated</span>
<a name="l488"><span class="linenum"> 488</span></a>      <a class="function" onClick="logFunction('upgrade_finished')" href="../_functions/upgrade_finished.html" onMouseOver="funcPopup(event,'upgrade_finished')">upgrade_finished</a>('upgradesettings.php');
<a name="l489"><span class="linenum"> 489</span></a>  }
<a name="l490"><span class="linenum"> 490</span></a>  
<a name="l491"><span class="linenum"> 491</span></a>  if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:config', <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>())) {
<a name="l492"><span class="linenum"> 492</span></a>      if (<a class="var it38033" onMouseOver="hilite(38033)" onMouseOut="lolite()" onClick="logVariable('fetchupdates')" href="../_variables/fetchupdates.html">$fetchupdates</a>) {
<a name="l493"><span class="linenum"> 493</span></a>          <a class="function" onClick="logFunction('require_sesskey')" href="../_functions/require_sesskey.html" onMouseOver="funcPopup(event,'require_sesskey')">require_sesskey</a>();
<a name="l494"><span class="linenum"> 494</span></a>          <a class="var it38041" onMouseOver="hilite(38041)" onMouseOut="lolite()" onClick="logVariable('updateschecker')" href="../_variables/updateschecker.html">$updateschecker</a> = \core\update\<a class="class" onClick="logClass('checker')" href="../_classes/checker.html" onMouseOver="classPopup(event,'checker')">checker</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l495"><span class="linenum"> 495</span></a>          if (<a class="var it38041" onMouseOver="hilite(38041)" onMouseOut="lolite()" onClick="logVariable('updateschecker')" href="../_variables/updateschecker.html">$updateschecker</a>-&gt;<a class="function" onClick="logFunction('enabled')" href="../_functions/enabled.html" onMouseOver="funcPopup(event,'enabled')">enabled</a>()) {
<a name="l496"><span class="linenum"> 496</span></a>              <a class="var it38041" onMouseOver="hilite(38041)" onMouseOut="lolite()" onClick="logVariable('updateschecker')" href="../_variables/updateschecker.html">$updateschecker</a>-&gt;<a class="function" onClick="logFunction('fetch')" href="../_functions/fetch.html" onMouseOver="funcPopup(event,'fetch')">fetch</a>();
<a name="l497"><span class="linenum"> 497</span></a>          }
<a name="l498"><span class="linenum"> 498</span></a>          <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../admin/index.php.html">/admin/index.php</a>', array('cache' =&gt; 0)));
<a name="l499"><span class="linenum"> 499</span></a>      }
<a name="l500"><span class="linenum"> 500</span></a>  }
<a name="l501"><span class="linenum"> 501</span></a>  
<a name="l502"><span class="linenum"> 502</span></a>  <span class="comment">// Now we can be sure everything was upgraded and caches work fine,</span>
<a name="l503"><span class="linenum"> 503</span></a>  <span class="comment">// redirect if necessary to make sure caching is enabled.</span>
<a name="l504"><span class="linenum"> 504</span></a>  if (!<a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>) {
<a name="l505"><span class="linenum"> 505</span></a>      <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../admin/index.php.html">/admin/index.php</a>', array('cache' =&gt; 1)));
<a name="l506"><span class="linenum"> 506</span></a>  }
<a name="l507"><span class="linenum"> 507</span></a>  
<a name="l508"><span class="linenum"> 508</span></a>  <span class="comment">// Check for valid admin user - no guest autologin</span>
<a name="l509"><span class="linenum"> 509</span></a>  <a class="function" onClick="logFunction('require_login')" href="../_functions/require_login.html" onMouseOver="funcPopup(event,'require_login')">require_login</a>(0, false);
<a name="l510"><span class="linenum"> 510</span></a>  if (<a class="function" onClick="logFunction('isguestuser')" href="../_functions/isguestuser.html" onMouseOver="funcPopup(event,'isguestuser')">isguestuser</a>()) {
<a name="l511"><span class="linenum"> 511</span></a>  <span class="comment">    // Login as real user!</span>
<a name="l512"><span class="linenum"> 512</span></a>      <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('wantsurl')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/wantsurl.html">wantsurl</a> = (string)<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../admin/index.php.html">/admin/index.php</a>');
<a name="l513"><span class="linenum"> 513</span></a>      <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="function" onClick="logFunction('get_login_url')" href="../_functions/get_login_url.html" onMouseOver="funcPopup(event,'get_login_url')">get_login_url</a>());
<a name="l514"><span class="linenum"> 514</span></a>  }
<a name="l515"><span class="linenum"> 515</span></a>  <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l516"><span class="linenum"> 516</span></a>  <a class="function" onClick="logFunction('require_capability')" href="../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('moodle/site:config', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l517"><span class="linenum"> 517</span></a>  
<a name="l518"><span class="linenum"> 518</span></a>  <span class="comment">// check that site is properly customized</span>
<a name="l519"><span class="linenum"> 519</span></a>  <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('site')" href="../_variables/site.html">$site</a> = <a class="function" onClick="logFunction('get_site')" href="../_functions/get_site.html" onMouseOver="funcPopup(event,'get_site')">get_site</a>();
<a name="l520"><span class="linenum"> 520</span></a>  if (empty(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('site')" href="../_variables/site.html">$site</a>-&gt;<a onClick="logVariable('shortname')" class="var it39527" onMouseOver="hilite(39527)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a>)) {
<a name="l521"><span class="linenum"> 521</span></a>  <span class="comment">    // probably new installation - lets return to frontpage after this step</span>
<a name="l522"><span class="linenum"> 522</span></a>  <span class="comment">    // remove settings that we want uninitialised</span>
<a name="l523"><span class="linenum"> 523</span></a>      <a class="function" onClick="logFunction('unset_config')" href="../_functions/unset_config.html" onMouseOver="funcPopup(event,'unset_config')">unset_config</a>('registerauth');
<a name="l524"><span class="linenum"> 524</span></a>      <a class="function" onClick="logFunction('unset_config')" href="../_functions/unset_config.html" onMouseOver="funcPopup(event,'unset_config')">unset_config</a>('timezone'); <span class="comment">// Force admin to select timezone!</span>
<a name="l525"><span class="linenum"> 525</span></a>      <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>('upgradesettings.php?return=site');
<a name="l526"><span class="linenum"> 526</span></a>  }
<a name="l527"><span class="linenum"> 527</span></a>  
<a name="l528"><span class="linenum"> 528</span></a>  <span class="comment">// setup critical warnings before printing admin tree block</span>
<a name="l529"><span class="linenum"> 529</span></a>  <a class="var it11210" onMouseOver="hilite(11210)" onMouseOut="lolite()" onClick="logVariable('insecuredataroot')" href="../_variables/insecuredataroot.html">$insecuredataroot</a> = <a class="function" onClick="logFunction('is_dataroot_insecure')" href="../_functions/is_dataroot_insecure.html" onMouseOver="funcPopup(event,'is_dataroot_insecure')">is_dataroot_insecure</a>(true);
<a name="l530"><span class="linenum"> 530</span></a>  <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('admin_critical_warning')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/admin_critical_warning.html">admin_critical_warning</a> = (<a class="var it11210" onMouseOver="hilite(11210)" onMouseOut="lolite()" onClick="logVariable('insecuredataroot')" href="../_variables/insecuredataroot.html">$insecuredataroot</a>==<a class="constant" onClick="logConstant('INSECURE_DATAROOT_ERROR')" href="../_constants/INSECURE_DATAROOT_ERROR.html" onMouseOver="constPopup(event,'INSECURE_DATAROOT_ERROR')">INSECURE_DATAROOT_ERROR</a>);
<a name="l531"><span class="linenum"> 531</span></a>  
<a name="l532"><span class="linenum"> 532</span></a>  <a class="var it6" onMouseOver="hilite(6)" onMouseOut="lolite()" onClick="logVariable('adminroot')" href="../_variables/adminroot.html">$adminroot</a> = <a class="function" onClick="logFunction('admin_get_root')" href="../_functions/admin_get_root.html" onMouseOver="funcPopup(event,'admin_get_root')">admin_get_root</a>();
<a name="l533"><span class="linenum"> 533</span></a>  
<a name="l534"><span class="linenum"> 534</span></a>  <span class="comment">// Check if there are any new admin settings which have still yet to be set</span>
<a name="l535"><span class="linenum"> 535</span></a>  if (<a class="function" onClick="logFunction('any_new_admin_settings')" href="../_functions/any_new_admin_settings.html" onMouseOver="funcPopup(event,'any_new_admin_settings')">any_new_admin_settings</a>(<a class="var it6" onMouseOver="hilite(6)" onMouseOut="lolite()" onClick="logVariable('adminroot')" href="../_variables/adminroot.html">$adminroot</a>)){
<a name="l536"><span class="linenum"> 536</span></a>      <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>('upgradesettings.php');
<a name="l537"><span class="linenum"> 537</span></a>  }
<a name="l538"><span class="linenum"> 538</span></a>  
<a name="l539"><span class="linenum"> 539</span></a>  <span class="comment">// Return to original page that started the plugin uninstallation if necessary.</span>
<a name="l540"><span class="linenum"> 540</span></a>  if (isset(<a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('pluginuninstallreturn')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/pluginuninstallreturn.html">pluginuninstallreturn</a>)) {
<a name="l541"><span class="linenum"> 541</span></a>      <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a> = <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('pluginuninstallreturn')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/pluginuninstallreturn.html">pluginuninstallreturn</a>;
<a name="l542"><span class="linenum"> 542</span></a>      unset(<a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('pluginuninstallreturn')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/pluginuninstallreturn.html">pluginuninstallreturn</a>);
<a name="l543"><span class="linenum"> 543</span></a>      if (<a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>) {
<a name="l544"><span class="linenum"> 544</span></a>          <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>);
<a name="l545"><span class="linenum"> 545</span></a>      }
<a name="l546"><span class="linenum"> 546</span></a>  }
<a name="l547"><span class="linenum"> 547</span></a>  
<a name="l548"><span class="linenum"> 548</span></a>  <span class="comment">// Everything should now be set up, and the user is an admin</span>
<a name="l549"><span class="linenum"> 549</span></a>  
<a name="l550"><span class="linenum"> 550</span></a>  <span class="comment">// Print default admin page with notifications.</span>
<a name="l551"><span class="linenum"> 551</span></a>  <a class="var it11211" onMouseOver="hilite(11211)" onMouseOut="lolite()" onClick="logVariable('errorsdisplayed')" href="../_variables/errorsdisplayed.html">$errorsdisplayed</a> = <a class="phpfunction" onClick="logFunction('defined')" href="../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('WARN_DISPLAY_ERRORS_ENABLED')" href="../_constants/WARN_DISPLAY_ERRORS_ENABLED.html" onMouseOver="constPopup(event,'WARN_DISPLAY_ERRORS_ENABLED')">WARN_DISPLAY_ERRORS_ENABLED</a>');
<a name="l552"><span class="linenum"> 552</span></a>  
<a name="l553"><span class="linenum"> 553</span></a>  <span class="comment">// We make the assumption that at least one schedule task should run once per day.</span>
<a name="l554"><span class="linenum"> 554</span></a>  <a class="var it2496" onMouseOver="hilite(2496)" onMouseOut="lolite()" onClick="logVariable('lastcron')" href="../_variables/lastcron.html">$lastcron</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field_sql')" href="../_functions/get_field_sql.html" onMouseOver="funcPopup(event,'get_field_sql')">get_field_sql</a>('SELECT <a class="phpfunction" onClick="logFunction('MAX')" href="../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">MAX</a>(lastruntime) FROM {task_scheduled}');
<a name="l555"><span class="linenum"> 555</span></a>  <a class="var it11212" onMouseOver="hilite(11212)" onMouseOut="lolite()" onClick="logVariable('cronoverdue')" href="../_variables/cronoverdue.html">$cronoverdue</a> = (<a class="var it2496" onMouseOver="hilite(2496)" onMouseOut="lolite()" onClick="logVariable('lastcron')" href="../_variables/lastcron.html">$lastcron</a> &lt; <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>() - 3600 * 24);
<a name="l556"><span class="linenum"> 556</span></a>  <a class="var it11213" onMouseOver="hilite(11213)" onMouseOut="lolite()" onClick="logVariable('dbproblems')" href="../_variables/dbproblems.html">$dbproblems</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('diagnose')" href="../_functions/diagnose.html" onMouseOver="funcPopup(event,'diagnose')">diagnose</a>();
<a name="l557"><span class="linenum"> 557</span></a>  <a class="var it11214" onMouseOver="hilite(11214)" onMouseOut="lolite()" onClick="logVariable('maintenancemode')" href="../_variables/maintenancemode.html">$maintenancemode</a> = !empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('maintenance_enabled')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/maintenance_enabled.html">maintenance_enabled</a>);
<a name="l558"><span class="linenum"> 558</span></a>  
<a name="l559"><span class="linenum"> 559</span></a>  <span class="comment">// Available updates for Moodle core.</span>
<a name="l560"><span class="linenum"> 560</span></a>  <a class="var it38041" onMouseOver="hilite(38041)" onMouseOut="lolite()" onClick="logVariable('updateschecker')" href="../_variables/updateschecker.html">$updateschecker</a> = \core\update\<a class="class" onClick="logClass('checker')" href="../_classes/checker.html" onMouseOver="classPopup(event,'checker')">checker</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l561"><span class="linenum"> 561</span></a>  <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('availableupdates')" href="../_variables/availableupdates.html">$availableupdates</a> = array();
<a name="l562"><span class="linenum"> 562</span></a>  <a class="var it11215" onMouseOver="hilite(11215)" onMouseOut="lolite()" onClick="logVariable('availableupdatesfetch')" href="../_variables/availableupdatesfetch.html">$availableupdatesfetch</a> = null;
<a name="l563"><span class="linenum"> 563</span></a>  
<a name="l564"><span class="linenum"> 564</span></a>  if (empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('disableupdatenotifications')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/disableupdatenotifications.html">disableupdatenotifications</a>)) {
<a name="l565"><span class="linenum"> 565</span></a>  <span class="comment">    // Only compute the update information when it is going to be displayed to the user.</span>
<a name="l566"><span class="linenum"> 566</span></a>      <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('availableupdates')" href="../_variables/availableupdates.html">$availableupdates</a>['core'] = <a class="var it38041" onMouseOver="hilite(38041)" onMouseOut="lolite()" onClick="logVariable('updateschecker')" href="../_variables/updateschecker.html">$updateschecker</a>-&gt;<a class="function" onClick="logFunction('get_update_info')" href="../_functions/get_update_info.html" onMouseOver="funcPopup(event,'get_update_info')">get_update_info</a>('core',
<a name="l567"><span class="linenum"> 567</span></a>          array('minmaturity' =&gt; <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('updateminmaturity')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/updateminmaturity.html">updateminmaturity</a>, 'notifybuilds' =&gt; <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('updatenotifybuilds')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/updatenotifybuilds.html">updatenotifybuilds</a>));
<a name="l568"><span class="linenum"> 568</span></a>  
<a name="l569"><span class="linenum"> 569</span></a>  <span class="comment">    // Available updates for contributed plugins</span>
<a name="l570"><span class="linenum"> 570</span></a>      <a class="var it1829" onMouseOver="hilite(1829)" onMouseOut="lolite()" onClick="logVariable('pluginman')" href="../_variables/pluginman.html">$pluginman</a> = <a class="class" onClick="logClass('core_plugin_manager')" href="../_classes/core_plugin_manager.html" onMouseOver="classPopup(event,'core_plugin_manager')">core_plugin_manager</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l571"><span class="linenum"> 571</span></a>      foreach (<a class="var it1829" onMouseOver="hilite(1829)" onMouseOut="lolite()" onClick="logVariable('pluginman')" href="../_variables/pluginman.html">$pluginman</a>-&gt;<a class="function" onClick="logFunction('get_plugins')" href="../_functions/get_plugins.html" onMouseOver="funcPopup(event,'get_plugins')">get_plugins</a>() as <a class="var it1843" onMouseOver="hilite(1843)" onMouseOut="lolite()" onClick="logVariable('plugintype')" href="../_variables/plugintype.html">$plugintype</a> =&gt; <a class="var it38045" onMouseOver="hilite(38045)" onMouseOut="lolite()" onClick="logVariable('plugintypeinstances')" href="../_variables/plugintypeinstances.html">$plugintypeinstances</a>) {
<a name="l572"><span class="linenum"> 572</span></a>          foreach (<a class="var it38045" onMouseOver="hilite(38045)" onMouseOut="lolite()" onClick="logVariable('plugintypeinstances')" href="../_variables/plugintypeinstances.html">$plugintypeinstances</a> as <a class="var it1844" onMouseOver="hilite(1844)" onMouseOut="lolite()" onClick="logVariable('pluginname')" href="../_variables/pluginname.html">$pluginname</a> =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('plugininfo')" href="../_variables/plugininfo.html">$plugininfo</a>) {
<a name="l573"><span class="linenum"> 573</span></a>              if (!empty(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('plugininfo')" href="../_variables/plugininfo.html">$plugininfo</a>-&gt;<a onClick="logVariable('availableupdates')" class="var it39515" onMouseOver="hilite(39515)" onMouseOut="lolite()" href="../_variables/availableupdates.html">availableupdates</a>)) {
<a name="l574"><span class="linenum"> 574</span></a>                  foreach (<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('plugininfo')" href="../_variables/plugininfo.html">$plugininfo</a>-&gt;<a onClick="logVariable('availableupdates')" class="var it39515" onMouseOver="hilite(39515)" onMouseOut="lolite()" href="../_variables/availableupdates.html">availableupdates</a> as <a class="var it11254" onMouseOver="hilite(11254)" onMouseOut="lolite()" onClick="logVariable('pluginavailableupdate')" href="../_variables/pluginavailableupdate.html">$pluginavailableupdate</a>) {
<a name="l575"><span class="linenum"> 575</span></a>                      if (<a class="var it11254" onMouseOver="hilite(11254)" onMouseOut="lolite()" onClick="logVariable('pluginavailableupdate')" href="../_variables/pluginavailableupdate.html">$pluginavailableupdate</a>-&gt;<a onClick="logVariable('version')" class="var it41675" onMouseOver="hilite(41675)" onMouseOut="lolite()" href="../_variables/version.html">version</a> &gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('plugininfo')" href="../_variables/plugininfo.html">$plugininfo</a>-&gt;<a onClick="logVariable('versiondisk')" class="var it39515" onMouseOver="hilite(39515)" onMouseOut="lolite()" href="../_variables/versiondisk.html">versiondisk</a>) {
<a name="l576"><span class="linenum"> 576</span></a>                          if (!isset(<a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('availableupdates')" href="../_variables/availableupdates.html">$availableupdates</a>[<a class="var it1843" onMouseOver="hilite(1843)" onMouseOut="lolite()" onClick="logVariable('plugintype')" href="../_variables/plugintype.html">$plugintype</a>.'_'.<a class="var it1844" onMouseOver="hilite(1844)" onMouseOut="lolite()" onClick="logVariable('pluginname')" href="../_variables/pluginname.html">$pluginname</a>])) {
<a name="l577"><span class="linenum"> 577</span></a>                              <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('availableupdates')" href="../_variables/availableupdates.html">$availableupdates</a>[<a class="var it1843" onMouseOver="hilite(1843)" onMouseOut="lolite()" onClick="logVariable('plugintype')" href="../_variables/plugintype.html">$plugintype</a>.'_'.<a class="var it1844" onMouseOver="hilite(1844)" onMouseOut="lolite()" onClick="logVariable('pluginname')" href="../_variables/pluginname.html">$pluginname</a>] = array();
<a name="l578"><span class="linenum"> 578</span></a>                          }
<a name="l579"><span class="linenum"> 579</span></a>                          <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('availableupdates')" href="../_variables/availableupdates.html">$availableupdates</a>[<a class="var it1843" onMouseOver="hilite(1843)" onMouseOut="lolite()" onClick="logVariable('plugintype')" href="../_variables/plugintype.html">$plugintype</a>.'_'.<a class="var it1844" onMouseOver="hilite(1844)" onMouseOut="lolite()" onClick="logVariable('pluginname')" href="../_variables/pluginname.html">$pluginname</a>][] = <a class="var it11254" onMouseOver="hilite(11254)" onMouseOut="lolite()" onClick="logVariable('pluginavailableupdate')" href="../_variables/pluginavailableupdate.html">$pluginavailableupdate</a>;
<a name="l580"><span class="linenum"> 580</span></a>                      }
<a name="l581"><span class="linenum"> 581</span></a>                  }
<a name="l582"><span class="linenum"> 582</span></a>              }
<a name="l583"><span class="linenum"> 583</span></a>          }
<a name="l584"><span class="linenum"> 584</span></a>      }
<a name="l585"><span class="linenum"> 585</span></a>  
<a name="l586"><span class="linenum"> 586</span></a>  <span class="comment">    // The timestamp of the most recent check for available updates</span>
<a name="l587"><span class="linenum"> 587</span></a>      <a class="var it11215" onMouseOver="hilite(11215)" onMouseOut="lolite()" onClick="logVariable('availableupdatesfetch')" href="../_variables/availableupdatesfetch.html">$availableupdatesfetch</a> = <a class="var it38041" onMouseOver="hilite(38041)" onMouseOut="lolite()" onClick="logVariable('updateschecker')" href="../_variables/updateschecker.html">$updateschecker</a>-&gt;<a class="function" onClick="logFunction('get_last_timefetched')" href="../_functions/get_last_timefetched.html" onMouseOver="funcPopup(event,'get_last_timefetched')">get_last_timefetched</a>();
<a name="l588"><span class="linenum"> 588</span></a>  }
<a name="l589"><span class="linenum"> 589</span></a>  
<a name="l590"><span class="linenum"> 590</span></a>  <a class="var it11216" onMouseOver="hilite(11216)" onMouseOut="lolite()" onClick="logVariable('buggyiconvnomb')" href="../_variables/buggyiconvnomb.html">$buggyiconvnomb</a> = (!<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('mb_convert_encoding') and @<a class="function" onClick="logFunction('iconv')" href="../_functions/iconv.html" onMouseOver="funcPopup(event,'iconv')">iconv</a>('UTF-8', 'UTF-8//IGNORE', '100'.<a class="phpfunction" onClick="logFunction('chr')" href="../_functions/chr.html" onMouseOver="phpfuncPopup(event,'chr')">chr</a>(130).'') !== '100');
<a name="l591"><span class="linenum"> 591</span></a>  <span class="comment">//check if the site is registered on Moodle.org</span>
<a name="l592"><span class="linenum"> 592</span></a>  <a class="var it11217" onMouseOver="hilite(11217)" onMouseOut="lolite()" onClick="logVariable('registered')" href="../_variables/registered.html">$registered</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>('registration_hubs', array('huburl' =&gt; <a class="constant" onClick="logConstant('HUB_MOODLEORGHUBURL')" href="../_constants/HUB_MOODLEORGHUBURL.html" onMouseOver="constPopup(event,'HUB_MOODLEORGHUBURL')">HUB_MOODLEORGHUBURL</a>, 'confirmed' =&gt; 1));
<a name="l593"><span class="linenum"> 593</span></a>  <span class="comment">// Check if there are any cache warnings.</span>
<a name="l594"><span class="linenum"> 594</span></a>  <a class="var it11218" onMouseOver="hilite(11218)" onMouseOut="lolite()" onClick="logVariable('cachewarnings')" href="../_variables/cachewarnings.html">$cachewarnings</a> = <a class="class" onClick="logClass('cache_helper')" href="../_classes/cache_helper.html" onMouseOver="classPopup(event,'cache_helper')">cache_helper</a>::<a class="function" onClick="logFunction('warnings')" href="../_functions/warnings.html" onMouseOver="funcPopup(event,'warnings')">warnings</a>();
<a name="l595"><span class="linenum"> 595</span></a>  
<a name="l596"><span class="linenum"> 596</span></a>  <a class="function" onClick="logFunction('admin_externalpage_setup')" href="../_functions/admin_externalpage_setup.html" onMouseOver="funcPopup(event,'admin_externalpage_setup')">admin_externalpage_setup</a>('adminnotifications');
<a name="l597"><span class="linenum"> 597</span></a>  
<a name="l598"><span class="linenum"> 598</span></a>  <span class="comment">/* @var core_admin_renderer $output */</span>
<a name="l599"><span class="linenum"> 599</span></a>  <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>('core', 'admin');
<a name="l600"><span class="linenum"> 600</span></a>  
<a name="l601"><span class="linenum"> 601</span></a>  echo <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('admin_notifications_page')" href="../_functions/admin_notifications_page.html" onMouseOver="funcPopup(event,'admin_notifications_page')">admin_notifications_page</a>(<a class="var it1244" onMouseOver="hilite(1244)" onMouseOut="lolite()" onClick="logVariable('maturity')" href="../_variables/maturity.html">$maturity</a>, <a class="var it11210" onMouseOver="hilite(11210)" onMouseOut="lolite()" onClick="logVariable('insecuredataroot')" href="../_variables/insecuredataroot.html">$insecuredataroot</a>, <a class="var it11211" onMouseOver="hilite(11211)" onMouseOut="lolite()" onClick="logVariable('errorsdisplayed')" href="../_variables/errorsdisplayed.html">$errorsdisplayed</a>, <a class="var it11212" onMouseOver="hilite(11212)" onMouseOut="lolite()" onClick="logVariable('cronoverdue')" href="../_variables/cronoverdue.html">$cronoverdue</a>, <a class="var it11213" onMouseOver="hilite(11213)" onMouseOut="lolite()" onClick="logVariable('dbproblems')" href="../_variables/dbproblems.html">$dbproblems</a>,
<a name="l602"><span class="linenum"> 602</span></a>                                         <a class="var it11214" onMouseOver="hilite(11214)" onMouseOut="lolite()" onClick="logVariable('maintenancemode')" href="../_variables/maintenancemode.html">$maintenancemode</a>, <a class="var it1845" onMouseOver="hilite(1845)" onMouseOut="lolite()" onClick="logVariable('availableupdates')" href="../_variables/availableupdates.html">$availableupdates</a>, <a class="var it11215" onMouseOver="hilite(11215)" onMouseOut="lolite()" onClick="logVariable('availableupdatesfetch')" href="../_variables/availableupdatesfetch.html">$availableupdatesfetch</a>, <a class="var it11216" onMouseOver="hilite(11216)" onMouseOut="lolite()" onClick="logVariable('buggyiconvnomb')" href="../_variables/buggyiconvnomb.html">$buggyiconvnomb</a>,
<a name="l603"><span class="linenum"> 603</span></a>                                         <a class="var it11217" onMouseOver="hilite(11217)" onMouseOut="lolite()" onClick="logVariable('registered')" href="../_variables/registered.html">$registered</a>, <a class="var it11218" onMouseOver="hilite(11218)" onMouseOut="lolite()" onClick="logVariable('cachewarnings')" href="../_variables/cachewarnings.html">$cachewarnings</a>);
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'set_config': ['set_config', 'Set a configuration value for this plugin ', [['mod/assign','assignmentplugin.php',314],['lib/portfolio','plugin.php',515],['lib','moodlelib.php',1331],['lib','enrollib.php',1152],['lib/editor/tinymce/classes','plugin.php',84]], 985],
'get_renderer': ['get_renderer', 'Get the renderer for a part of Moodle for this theme. ', [['lib','outputlib.php',1790],['mod/assign','locallib.php',2734],['lib','outputfactories.php',70],['lib','outputfactories.php',292],['lib','outputfactories.php',377],['course/format','lib.php',889],['question/type/multichoice','question.php',137],['question/type/multichoice','question.php',259],['question/type','questionbase.php',275],['grade/grading/form/guide','lib.php',482],['question/behaviour','behaviourbase.php',135],['lib','pagelib.php',797],['grade/grading/form/rubric','lib.php',486],['lib/tests/fixtures','test_renderer_factory.php',49]], 339],
'is_dataroot_insecure': ['is_dataroot_insecure', 'Try to verify that dataroot is not accessible from web. ', [['lib','adminlib.php',510]], 8],
'upgrade_finished': ['upgrade_finished', 'Indicates upgrade is finished. ', [['lib','upgradelib.php',1316]], 4],
'initialize': ['initialize', 'Prepare the AMF InputStream for parsing. ', [['lib/zend/Zend/Amf','Request.php',84],['','mdeploytest.php',79],['','mdeploy.php',113],['','mdeploy.php',352],['','mdeploy.php',453],['','mdeploy.php',578],['','mdeploy.php',895],['lib/phpexcel/PHPExcel','CachedObjectStorageFactory.php',179],['mod/scorm/datamodels','scorm_13.js',281],['lib/pear/Net/GeoIP','DMA.php',60],['lib/classes','shutdown_manager.php',40],['lib/classes/update','deployer.php',93],['question','category_class.php',197],['lib/typo3','class.t3lib_l10n_locales.php',147]], 18],
'get_complete_user_data': ['get_complete_user_data', 'Get a complete user record, which includes all the info in the user record. ', [['lib','moodlelib.php',4487]], 23],
'unsatisfied_dependencies_page': ['unsatisfied_dependencies_page', 'Displays the list of plugins with unsatisfied dependencies ', [['admin','renderer.php',109]], 3],
'set_url': ['set_url', 'Set the url specifics ', [['backup/cc/cc_lib','cc_weblink.php',50],['backup/util/ui','restore_ui_components.php',141],['mod/wiki','pagelib.php',246],['mod/wiki','pagelib.php',334],['mod/wiki','pagelib.php',421],['mod/wiki','pagelib.php',701],['mod/wiki','pagelib.php',726],['mod/wiki','pagelib.php',840],['mod/wiki','pagelib.php',884],['mod/wiki','pagelib.php',1013],['mod/wiki','pagelib.php',1117],['mod/wiki','pagelib.php',1224],['mod/wiki','pagelib.php',1467],['mod/wiki','pagelib.php',1869],['mod/wiki','pagelib.php',1937],['mod/wiki','pagelib.php',2111],['mod/wiki','pagelib.php',2172],['mod/wiki','pagelib.php',2228],['mod/wiki','pagelib.php',2293],['mod/wiki','pagelib.php',2341],['mod/wiki','pagelib.php',2389],['mod/wiki','pagelib.php',2493],['lib','outputcomponents.php',2823],['lib','pagelib.php',1198]], 574],
'get_core_subsystems': ['get_core_subsystems', 'List all core subsystems and their location ', [['lib/classes','component.php',752],['lib','deprecatedlib.php',391]], 19],
'count_records': ['count_records', 'Count the records in a table where all the given conditions met. ', [['lib/dml','moodle_database.php',1717]], 1399],
'terminate_current': ['terminate_current', 'Terminate current user session. ', [['lib/classes/session','manager.php',473]], 7],
'set_pagelayout': ['set_pagelayout', 'Sets the layout to use for this page. ', [['lib','pagelib.php',1063]], 277],
'param': ['param', 'Returns a placeholder for query parameters e.g. $DB->Param(\'a\') will return - \'?\' for most databases - \':a\' for Oracle - \'$1\', \'$2\', etc. for PostgreSQL ', [['lib/adodb','adodb.inc.php',815],['lib/adodb/drivers','adodb-postgres64.inc.php',591],['lib','weblib.php',455],['lib/adodb/drivers','adodb-oci8po.inc.php',37],['lib/adodb/drivers','adodb-db2oci.inc.php',166],['lib/adodb/drivers','adodb-oci8.inc.php',1014]], 641],
'change_db_encoding': ['change_db_encoding', 'Attempts to change db encoding to UTF-8 encoding if possible. ', [['lib/dml','moodle_database.php',1051]], 2],
'get_last_timefetched': ['get_last_timefetched', 'Returns the timestamp of the last execution of {@link fetch()} ', [['lib/classes/update','checker.php',96],['lib/tests','update_deployer_test.php',113]], 6],
'require_login': ['require_login', 'This function checks that the current user is logged in and has the required privileges ', [['lib','moodlelib.php',2444]], 635],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',884],['lib','accesslib.php',346]], 1929],
'get_string': ['get_string', 'Return a core get_string() call ', [['lib/external','externallib.php',112],['lib','moodlelib.php',6538],['lib','moodlelib.php',9417],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38],['lib/classes','string_manager_install.php',95],['question/behaviour','behaviourbase.php',756]], 19235],
'enabled': ['enabled', 'Is automatic deployment enabled? ', [['lib/classes/update','checker.php',84],['lib/classes/update','deployer.php',77]], 11],
'admin_get_root': ['admin_get_root', 'Returns the reference to admin tree root ', [['lib','adminlib.php',6742]], 27],
'upgrade_core': ['upgrade_core', 'Upgrade moodle core ', [['lib','upgradelib.php',1542]], 2],
'upgrade_stale_php_files_present': ['upgrade_stale_php_files_present', 'Detect if there are leftovers in PHP source files. ', [['lib','upgradelib.php',361]], 2],
'normalize_version': ['normalize_version', 'This function will normalize any version to just a serie of numbers separated by dots. Everything else will be removed. ', [['lib','environmentlib.php',225]], 15],
'upgrade_noncore': ['upgrade_noncore', 'Upgrade/install other parts of moodle ', [['lib','upgradelib.php',1612]], 3],
'set_cacheable': ['set_cacheable', 'Sets whether the browser should cache this page or not. ', [['lib','pagelib.php',1320]], 27],
'fetch': ['fetch', 'Fetches the available update status from the remote site ', [['lib/classes/update','checker.php',113],['lib/minify/lib/Minify/Cache','XCache.php',86],['lib/grade','grade_object.php',126],['completion/criteria','completion_criteria_unenrol.php',43],['completion/criteria','completion_criteria_grade.php',45],['lib/grade','grade_item.php',332],['lib/minify/lib/Minify/Cache','Memcache.php',97],['lib/minify/lib/Minify/Cache','APC.php',91],['completion/criteria','completion_criteria_activity.php',45],['lib/horde/framework/Horde/Imap/Client','Base.php',2373],['completion','data_object.php',152],['completion/criteria','completion_criteria_course.php',46],['completion','completion_completion.php',70],['completion/criteria','completion_criteria_role.php',43],['completion','completion_criteria_completion.php',74],['lib/grade','grade_grade.php',576],['lib/minify/lib/Minify/Cache','ZendPlatform.php',97],['completion/criteria','completion_criteria_date.php',43],['lib/grade','grade_category.php',184],['completion/criteria','completion_criteria_self.php',43],['lib/grade','grade_scale.php',89],['lib/minify/lib/Minify/Cache','File.php',90],['completion','completion_aggregation.php',68],['completion/criteria','completion_criteria_duration.php',43],['lib/grade','grade_outcome.php',182]], 192],
'check_moodle_environment': ['check_moodle_environment', 'This function checks all the requirements defined in environment.xml. ', [['lib','environmentlib.php',86]], 8],
'get_login_url': ['get_login_url', 'Returns full login url. ', [['lib','moodlelib.php',2427],['lib','oauthlib.php',466]], 48],
'iconv': ['iconv', 'iconv wrapper which mutes errors and works around bugs. ', [['lib/htmlpurifier/HTMLPurifier','Encoder.php',40]], 21],
'require_capability': ['require_capability', 'Adds a required capability which all results will be checked against ', [['backup/util/ui','restore_ui_components.php',157],['mod/quiz','attemptlib.php',306],['mod/quiz','attemptlib.php',891],['lib','accesslib.php',764]], 628],
'setup_is_unicodedb': ['setup_is_unicodedb', 'Is db in unicode mode? ', [['lib/dml','pgsql_native_moodle_database.php',610],['lib/dml','oci_native_moodle_database.php',870],['lib/dml','moodle_database.php',1059],['lib/dml','mysqli_native_moodle_database.php',866]], 4],
'get_field_sql': ['get_field_sql', 'Get a single field value (first field) using a SQL statement. ', [['lib/dml','moodle_database.php',1539]], 135],
'set_title': ['set_title', '', [['backup/cc/cc_lib','cc_basiclti.php',57],['backup/cc/cc_lib','cc_weblink.php',41],['backup/cc/cc_lib','cc_metadata.php',225],['backup/cc/cc_lib','cc_forum.php',39],['mod/wiki','pagelib.php',216],['lib','outputcomponents.php',2815],['backup/cc/cc_lib','cc_asssesment.php',595],['backup/cc/cc_lib','cc_asssesment.php',843],['backup/cc/cc_lib','cc_asssesment.php',1060],['backup/cc/cc_lib','cc_asssesment.php',1829],['lib','pagelib.php',1128],['backup/cc/cc_lib','cc_page.php',38]], 445],
'ini_get_bool': ['ini_get_bool', 'This function makes the return value of ini_get consistent if you are setting server directives through the .htaccess file in apache. ', [['lib','setuplib.php',738]], 11],
'or': ['or', '', [['lib/tcpdf','LICENSE.TXT',69]], 552],
'core_tables_exist': ['core_tables_exist', 'Checks if the main tables have been installed yet or not. ', [['lib','upgradelib.php',1646]], 1],
'install_core': ['install_core', 'Install core moodle tables and initialize ', [['lib','upgradelib.php',1485]], 2],
'isloggedin': ['isloggedin', 'Return true, if session is currently logged into the backend server ', [['lib/zend/Zend/Service','LiveDocx.php',293],['lib','accesslib.php',1909]], 177],
'admin_notifications_page': ['admin_notifications_page', 'Display the admin notifications page. ', [['admin','renderer.php',295]], 1],
'require_sesskey': ['require_sesskey', 'Check the session key using {@link confirm_sesskey()}, and cause a fatal error if it does not match. ', [['lib','sessionlib.php',79]], 190],
'submitted_data': ['submitted_data', 'Returns array of data objects passed to this tool. ', [['lib/classes/update','deployer.php',313]], 3],
'install_environment_page': ['install_environment_page', 'Display the \'environment check\' page that is displayed during install. ', [['admin','renderer.php',79]], 1],
'complete_user_login': ['complete_user_login', 'Call to complete the user login process after authenticate_user_login() has succeeded. It will setup the $USER variable and other required bits and pieces. ', [['lib','moodlelib.php',4261]], 10],
'during_initial_install': ['during_initial_install', 'Indicates whether we are in the middle of the initial Moodle install. ', [['lib','setuplib.php',1124]], 48],
'get_site': ['get_site', 'Returns $course object of the top-level site. ', [['lib','datalib.php',547]], 76],
'moodle_needs_upgrading': ['moodle_needs_upgrading', 'Determine if moodle installation requires update. ', [['lib','moodlelib.php',7268]], 7],
'add': ['add', '', [['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',454],['blog','locallib.php',242],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',11],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',31],['lib/xhprof/xhprof_html/jquery','jquery.autocomplete.js',428],['backup/cc','validator.php',51],['lib/google/src/Google/Http','Batch.php',47],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',37],['lib/horde/framework/Horde/Support','ConsistentHash.php',148],['lib/horde/framework/Horde/Imap/Client','Ids.php',155],['lib/zend/Zend/Service/Simpy','WatchlistFilterSet.php',47],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',109],['lib/lessphp/Output','Mapped.php',50],['lib/horde/framework/Horde/Stream','TempString.php',118],['lib','licenselib.php',32],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',207],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',29],['lib/horde/framework/Horde/Mail/Rfc822','List.php',116],['lib/xhprof/xhprof_html/jquery','jquery-1.2.6.js',3450],['lib/google/src/Google/Service','Webmasters.php',375],['lib/horde/framework/Horde','Variables.php',297],['lib','outputcomponents.php',2700],['lib','outputcomponents.php',3375],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',14],['lib/zend/Zend','Date.php',1081],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',33],['comment','lib.php',675],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',86],['lib/horde/framework/Horde','Stream.php',116],['backup/cc/cc_lib/gral_lib','cssparser.php',111],['lib/lessphp','Output.php',18],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',50],['lib','adminlib.php',736],['lib','adminlib.php',895],['lib','adminlib.php',1447],['lib','csslib.php',1508],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',95],['lib','navigationlib.php',302],['lib','navigationlib.php',758],['lib','navigationlib.php',3288],['lib','navigationlib.php',3542],['lib/phpexcel/PHPExcel','HashTable.php',85],['lib/mustache/src/Mustache','HelperCollection.php',56],['lib/horde/framework/Horde/Mail/Rfc822','GroupList.php',25],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',27],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',80],['backup/cc/cc_lib','cc_utils.php',395],['backup/cc/cc_lib','cc_utils.php',454]], 5988],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 1891],
'out': ['out', 'Returns the string ', [['lib','moodlelib.php',9451],['lib','weblib.php',547],['lib','tablelib.php',1526],['lib','csslib.php',1540],['lib','csslib.php',1698],['lib','csslib.php',2078],['lib','csslib.php',2162],['lib','csslib.php',2306],['lib','csslib.php',2495],['lib','csslib.php',3240],['report/loglive/classes','table_log_ajax.php',37]], 549],
'optional_param': ['optional_param', 'Returns a particular value for the named variable, taken from POST or GET, otherwise returning a given default. ', [['lib','moodlelib.php',605]], 2167],
'unset_config': ['unset_config', 'Removes a key from global configuration. ', [['lib','moodlelib.php',1499]], 89],
'upgrade_confirm_page': ['upgrade_confirm_page', 'Display the \'You are about to upgrade Moodle\' page. The first page during upgrade. ', [['admin','renderer.php',132]], 1],
'upgrade_stale_php_files_page': ['upgrade_stale_php_files_page', 'Display page explaining proper upgrade process, there can not be any PHP file leftovers... ', [['admin','renderer.php',59]], 1],
'admin_externalpage_setup': ['admin_externalpage_setup', 'Initialise admin page - this function does require login and permission checks specified in page definition. ', [['lib','adminlib.php',6627]], 144],
'isguestuser': ['isguestuser', 'Determines if a user is logged in as real guest user with username \'guest\'. ', [['lib','accesslib.php',1922]], 237],
'warnings': ['warnings', 'Returns an array of warnings from the cache API. ', [['cache/classes','helper.php',775]], 2],
'get_update_info': ['get_update_info', 'Returns the available update information for the given component ', [['lib/classes/update','checker.php',129]], 6],
'instance': ['instance', 'Retrieve sole instance of the registry. ', [['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29],['lib/classes','useragent.php',101],['backup/cc','validator.php',35],['lib/portfolio','exporter.php',251],['lib/tests','update_deployer_test.php',69],['lib/tests','string_manager_standard_test.php',124],['lib','modinfolib.php',373],['','mdeploy.php',96],['cache','disabledlib.php',171],['cache','disabledlib.php',296],['admin/tool/installaddon/classes','validator.php',85],['cache/classes','config.php',87],['course/format','lib.php',156],['lib','accesslib.php',6184],['lib','accesslib.php',6436],['lib','accesslib.php',6614],['lib','accesslib.php',6868],['lib','accesslib.php',7129],['lib','accesslib.php',7341],['cache','locallib.php',52],['lib/htmlpurifier','HTMLPurifier.php',251],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['cache/classes','helper.php',76],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['lib/classes','plugin_manager.php',83],['lib','filterlib.php',81],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/classes/update','deployer.php',54],['admin/tool/installaddon/classes','pluginfo_client.php',37],['admin/tool/installaddon/classes','installer.php',40],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443]], 3942],
'install_licence_page': ['install_licence_page', 'Display the \'Do you acknowledge the terms of the GPL\' page. The first page during install. ', [['admin','renderer.php',34]], 1],
'upgrade_environment_page': ['upgrade_environment_page', 'Display the environment page during the upgrade process. ', [['admin','renderer.php',156]], 1],
'upgrade_init_javascript': ['upgrade_init_javascript', 'Sets up JS code required for all upgrade scripts. ', [['lib','upgradelib.php',1432]], 2],
'upgrade_plugin_check_page': ['upgrade_plugin_check_page', 'Display the upgrade page that lists all the plugins that require attention. ', [['admin','renderer.php',190]], 2],
'require': ['require', '', [['lib/yuilib/3.17.2/timers','timers-debug.js',27],['lib/yuilib/3.17.2/timers','timers.js',27]], 454],
'is_float_problem': ['is_float_problem', 'Detects if float supports at least 10 decimal digits ', [['lib','adminlib.php',495]], 1],
'purge_all': ['purge_all', 'Purge all of the cache stores of all of their data. ', [['cache/classes','helper.php',464]], 11],
'set_popup_notification_allowed': ['set_popup_notification_allowed', 'Allow or disallow popup notifications on this page. Popups are allowed by default. ', [['lib','pagelib.php',1906]], 14],
'redirect': ['redirect', 'Redirect the browser ', [['','mdeploy.php',1474],['lib','weblib.php',2514]], 948],
'any_new_admin_settings': ['any_new_admin_settings', 'Based on find_new_settings{@link ()}  in upgradesettings.php Looks to find any admin settings that have not been initialized. Returns 1 if it finds any. ', [['lib','adminlib.php',7103]], 2],
'all_plugins_ok': ['all_plugins_ok', 'Checks all dependencies for all installed plugins ', [['lib/classes','plugin_manager.php',714]], 6],
'set_context': ['set_context', 'Set the context. ', [['mod/assign','locallib.php',246],['lib/portfolio','caller.php',568],['grade/grading','lib.php',116],['lib','pagelib.php',942]], 254],
'print_error': ['print_error', 'Abort execution by throwing of a general exception, default exception handler displays the error message in most cases. ', [['lib','setuplib.php',449]], 1560],
'diagnose': ['diagnose', 'Theme diagnostic code. It is very problematic to send debug output to the actual CSS file, instead this functions is supposed to diagnose given theme and highlights all potential problems. This information should be available from the theme selection page or some other debug page for theme designers. ', [['lib','outputlib.php',432],['lib/dml','oci_native_moodle_database.php',112],['lib/dml','moodle_database.php',270],['lib/dml','mysqli_native_moodle_database.php',370]], 2],
'get_plugins': ['get_plugins', 'Gathers and returns the information about all plugins of the given type, either on disk or previously installed. ', [['lib/classes/plugininfo','orphaned.php',60],['lib/classes/plugininfo','base.php',75],['lib/classes/plugininfo','format.php',68],['lib/classes','plugin_manager.php',316]], 15],
'get_field': ['get_field', 'Get the right field name to fetch a stat for these attempts that is calculated for more than one $whichattempts (count or avg). ', [['mod/quiz/report/statistics/classes','calculated.php',109],['lib/dml','moodle_database.php',1497],['user/filters','lib.php',124],['lib/behat','behat_field_manager.php',243]], 485],
'getremoteaddr': ['getremoteaddr', 'Returns most reliable client address ', [['lib','moodlelib.php',8281]], 62],
'purge_all_caches': ['purge_all_caches', 'Invalidates browser caches and cached data in temp. ', [['lib','moodlelib.php',1588]], 13],
'set_heading': ['set_heading', 'Sets the heading to use for the page. This is normally used as the main heading at the top of the content. ', [['lib','pagelib.php',1141]], 419],
'upgrade_plugin_confirm_deploy_page': ['upgrade_plugin_confirm_deploy_page', 'Prints a page with a summary of plugin deployment to be confirmed. ', [['admin','renderer.php',239]], 3],
'explode': ['explode', '', [], 1599],
'time': ['time', '', [], 1768],
'file_exists': ['file_exists', '', [], 873],
'chr': ['chr', '', [], 821],
'define': ['define', '', [], 2170],
'max': ['max', '', [], 1096],
'defined': ['defined', '', [], 4098],
'phpversion': ['phpversion', '', [], 25],
'function_exists': ['function_exists', '', [], 443],
'version_compare': ['version_compare', '', [], 69],
'reset': ['reset', '', [], 1070],
'header': ['header', '', [], 1294]};
CLASS_DATA={
'context_system': ['context_system', 'System context class ', [['lib','accesslib.php',6106]], 929],
'manager': ['manager', 'Defines MAnager class for myprofile navigation tree. ', [['user/classes/output/myprofile','manager.php',28],['lib/classes/log','manager.php',29],['admin/tool/messageinbound/classes','manager.php',29],['lib/classes/message','manager.php',31],['lib/classes/message/inbound','manager.php',29],['admin/tool/log/classes/log','manager.php',29],['lib/classes/session','manager.php',29],['lib/classes/task','manager.php',28],['lib/classes/event','manager.php',30]], 346],
'checker': ['checker', 'Singleton class that handles checking for available updates ', [['lib/classes/update','checker.php',30]], 10],
'cache_helper': ['cache_helper', 'The cache helper class. ', [['cache/classes','helper.php',31]], 131],
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',240]], 2887],
'core_plugin_manager': ['core_plugin_manager', 'Singleton class providing general plugins management functionality. ', [['lib/classes','plugin_manager.php',31]], 187],
'deployer': ['deployer', 'Implements a communication bridge to the mdeploy.php utility ', [['lib/classes/update','deployer.php',30]], 5],
'moodle_exception': ['moodle_exception', 'Base Moodle Exception class ', [['lib','setuplib.php',68]], 478],
'core_component': ['core_component', 'Collection of components related methods. ', [['lib/classes','component.php',41]], 485]};
CONST_DATA={
'CACHE_DISABLE_ALL': ['CACHE_DISABLE_ALL', '', [['admin/tool/behat/cli','init.php',37],['admin/tool/behat/cli','util_single_run.php',57],['admin/tool/phpunit/cli','util.php',63],['admin/cli','install.php',141],['','install.php',48],['cache','README.md',81],['admin/cli','upgrade.php',39],['admin/cli','install_database.php',32],['admin/tool/behat/cli','run.php',32],['lib','setup.php',271],['admin/cli','alternative_component_cache.php',32],['admin','index.php',64]], 20],
'WARN_DISPLAY_ERRORS_ENABLED': ['WARN_DISPLAY_ERRORS_ENABLED', '', [['lib','setup.php',649]], 3],
'ENV_SELECT_RELEASE': ['ENV_SELECT_RELEASE', '', [['lib','environmentlib.php',84]], 12],
'INSECURE_DATAROOT_ERROR': ['INSECURE_DATAROOT_ERROR', '', [['lib','adminlib.php',113]], 8],
'HUB_MOODLEORGHUBURL': ['HUB_MOODLEORGHUBURL', '', [['lib','moodlelib.php',493]], 18],
'NO_OUTPUT_BUFFERING': ['NO_OUTPUT_BUFFERING', '', [['admin/tool/generator','maketestcourse.php',27],['admin/tool/behat/cli','util_single_run.php',91],['admin/tool/innodb','index.php',26],['admin/tool/dbtransfer','dbexport.php',25],['admin/tool/behat/cli','util.php',35],['report/security','index.php',26],['admin/tool/multilangupgrade','index.php',29],['admin/tool/generator/cli','maketestsite.php',26],['admin','cron.php',49],['admin/tool/generator/cli','maketestcourse.php',26],['admin/tool/customlang','index.php',26],['admin/tool/replace','index.php',25],['admin/tool/phpunit','webrunner.php',25],['admin/tool/dbtransfer','index.php',25],['mod/chat/gui_header_js','jsupdated.php',34],['report/performance','index.php',25],['admin/tool/behat/cli','run.php',33],['repository/boxnet','migrationv1.php',34],['lib','setup.php',242],['admin','enrol.php',26],['lib/phpunit','bootstrap.php',87],['admin/tool/assignmentupgrade','batchupgrade.php',25],['admin/tool/generator/cli','maketestplan.php',26],['admin','index.php',55]], 26],
'BEHAT_SITE_RUNNING': ['BEHAT_SITE_RUNNING', '', [['lib','setup.php',131]], 15],
'PARAM_RAW': ['PARAM_RAW', '', [['lib','moodlelib.php',193]], 692],
'PARAM_BOOL': ['PARAM_BOOL', '', [['lib','moodlelib.php',108]], 502]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
